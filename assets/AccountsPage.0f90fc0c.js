import{a as EP,b as OP,Q as xm}from"./QInput.a6e0dfcb.js";import{bX as z,cU as rv,d as Pe,cS as ee,cR as je,dt as _h,cY as iv,cX as sv,P as $e,du as ov,cT as av,cW as ts,cK as ep,c_ as PP,cZ as cv,d0 as TP,bW as cc,dv as et,dm as ie,dn as se,dq as Tt,dl as ke,dw as Et,dx as dr,dy as fi,dz as F,dA as ta,dB as na,dC as xe,dD as di,dE as x,dF as S,dG as H,dH as G,dI as le,dJ as Yt,dK as bl,dL as pt,dM as he,ds as Dt,dN as uc,di as Je,cV as Gu,dO as uv,dP as Gr,dQ as lv,dR as fv,dS as dv,dj as hv,dk as tp,dT as Mm,dU as RP,dV as BP,dW as xP,dX as MP,au as pv,J as Is,bs as gv,b1 as yv,ak as CP,a1 as wh,da as LP,aX as KP,cJ as $d,ai as NP,bx as ks,as as Zr,al as go,cj as DP}from"./index.f601242e.js";import{Q as UP}from"./QTree.054b2a6e.js";import{Q as Cm,a as FP}from"./QTabPanels.6ad9ed11.js";import{Q as zP}from"./QPage.0255ba2c.js";import{s as $s}from"./sha256.d292ca99.js";import{L as Lm,r as mv,i as WP}from"./pako.esm.e657f4ee.js";import{a as Hu,_ as Ra}from"./defineProperty.71eea8c2.js";import{t as VP}from"./token.5c7be7ae.js";import{g as Km}from"./extensionType.77d17971.js";import"./uid.ebc32f47.js";import"./QSlideTransition.a9a6fcef.js";import"./touch.3df10340.js";var qi={},vl={},bv={},vv={};Object.defineProperty(vv,"__esModule",{value:!0});var _l={},Jn={},Cs={},np={exports:{}};const $P=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},_v=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=$P(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};np.exports=_v;np.exports.default=_v;var yn=np.exports,Ne={};(function(r){var e=z&&z.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=Lm,n=mv,i=e(rv.exports);var s=Lm;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Pe.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,W){super(j.span,W),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,j){return new O(K,j)}r.option=M;function A(K){return new m(t.u8(),R,C,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:W})=>W,W=>({values:W}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function W({tag:X,data:Be}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Be}return new m(T,W,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Pe.Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((W,X)=>T.addVariant(X,W,W.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:W})=>W,W=>({values:W}),te)}r.array=N;class V extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),W=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,W]}encode(j,te,T){T=T||0;const W=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+W);return W+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function J(K,j,te){const T=t.u32("length"),W=t.struct([T,t.seq(new V(K,j),t.offset(T,-T.span),"values")]);return new m(W,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=J})(Ne);var jP=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function wv(r){return new TextDecoder("utf-8").decode(r)}function Sv(r){return new TextEncoder().encode(r)}var qP=Object.freeze({__proto__:null,decode:wv,encode:Sv});function Av(r){return je.encode(r)}var GP=Object.freeze({__proto__:null,encode:Av,decode:function(r){return je.decode(r)}});function kv(r){return ee.Buffer.from(ov(r))}var HP=Object.freeze({__proto__:null,encode:function(r){return _h(r)},decode:kv}),YP=Object.freeze({__proto__:null,hex:jP,utf8:qP,bs58:GP,base64:HP});function rp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function Iv(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function wl(r,e={}){r.forEach(t=>{if("accounts"in t)wl(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function zr(r){return r instanceof $e?r:new $e(r)}class JP extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Ro(r){return typeof r=="object"&&r!=null}function ns(r){return typeof r=="string"?JSON.stringify(r):""+r}function QP(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+ns(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*Nm(r,e,t,n){var i;Ro(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=QP(s,e,t,n);a&&(yield a)}}function*ip(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Ro(e.schema)&&Ro(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=ip(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):Ro(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class os{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>Nm(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>Nm(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=Fa(t,n);if(i[0])throw i[0]}(e,this)}create(e){return sp(e,this)}is(e){return Ev(e,this)}mask(e){return function(t,n){const i=Fa(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return Fa(e,this,t)}}function sp(r,e){const t=Fa(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Ev(r,e){return!Fa(r,e)[0]}function Fa(r,e,t={}){const n=ip(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new JP(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function lc(r,e){return new os({type:r,schema:null,validator:e})}function jd(r){return new os({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+ns(e)})}function Dm(r){const e=ns(r),t=typeof r;return new os({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+ns(n)})}function vu(r){return new os({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function _u(){return lc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+ns(r))}function Nu(r){return new os({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Os(){return lc("string",r=>typeof r=="string"||"Expected a string, but received: "+ns(r))}function Gi(r){const e=Object.keys(r);return new os({type:"type",schema:r,*entries(t){if(Ro(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Ro(t)||"Expected an object, but received: "+ns(t)})}function Ov(r){const e=r.map(t=>t.type).join(" | ");return new os({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=ip(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+ns(t),...i]}})}function Pv(){return lc("unknown",()=>!0)}async function Tv(r,e,t){if(e.length<=99)return await Um(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>Um(r,i,t)))).flat()}}async function Um(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function Rv(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=sp(await r._rpcRequest("simulateTransaction",h),eT);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new av("failed to simulate transaction: "+d.error.message,m)}return d.result}function XP(r){return function(e,t,n){return new os({...e,coercer:(i,s)=>Ev(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(Bv(r),ZP,e=>"error"in e?e:{...e,result:sp(e.result,r)})}const ZP=Bv(Pv());function Bv(r){return Ov([Gi({jsonrpc:Dm("2.0"),id:Os(),result:r}),Gi({jsonrpc:Dm("2.0"),id:Os(),error:Gi({code:Pv(),message:Os(),data:Nu(lc("any",()=>!0))})})])}const eT=(Fm=Gi({err:vu(Ov([Gi({}),Os()])),logs:vu(jd(Os())),accounts:Nu(vu(jd(vu(Gi({executable:lc("boolean",r=>typeof r=="boolean"),owner:Os(),lamports:_u(),data:jd(Os()),rentEpoch:Nu(_u())}))))),unitsConsumed:Nu(_u())}),XP(Gi({context:Gi({slot:_u()}),value:Fm})));var Fm,tT=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=zr(r),n||(n=No());const i=new iv;if(i.add(new sv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:Tv,simulateTransaction:Rv});class xv{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await zm(this.connection,s,n)}catch(a){if(a instanceof Mv){const u=await this.connection.getTransaction(Av(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new av(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await zm(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await Rv(this.connection,e,t,n,i);if(s.value.err)throw new nT(s.value);return s.value}}class nT extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function zm(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new Mv(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class Mv extends Error{constructor(e){super(e)}}function rT(r){Sh=r}function No(){return Sh===null?xv.local():Sh}let Sh=null;const iT=new Set(["anchor-deprecated-state","debug-logs"]),Cv=new Map;function Sl(r){return Cv.get(r)!==void 0}var sT=Object.freeze({__proto__:null,set:function(r){if(!iT.has(r))throw new Error("Invalid feature");Cv.set(r,!0)},isSet:Sl});class Ya extends Error{constructor(e){super(e),this.name="IdlError"}}class ra{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new $e(u))}return new ra(s)}}class Bo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=ra.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new $e(d),new $e(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Bo(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),M={code:m,number:parseInt(I)},A={file:h,line:parseInt(d)};return new Bo(M,O,i,e,A,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,M={code:d,number:parseInt(m)};return new Bo(M,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Ja extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=ra.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new Ja(s,a,e.logs):(a=Lv.get(s),a!==void 0?new Ja(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function op(r,e){Sl("debug-logs")&&console.log("Translating error:",r);const t=Bo.parse(r.logs);if(t)return t;const n=Ja.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=ra.parse(r.logs),new Proxy(r,i)}return r}const Ee={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Lv=new Map([[Ee.InstructionMissing,"8 byte instruction identifier not provided"],[Ee.InstructionFallbackNotFound,"Fallback functions are not supported"],[Ee.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Ee.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Ee.IdlInstructionStub,"The program was compiled without idl instructions"],[Ee.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Ee.ConstraintMut,"A mut constraint was violated"],[Ee.ConstraintHasOne,"A has_one constraint was violated"],[Ee.ConstraintSigner,"A signer constraint was violated"],[Ee.ConstraintRaw,"A raw constraint was violated"],[Ee.ConstraintOwner,"An owner constraint was violated"],[Ee.ConstraintRentExempt,"A rent exemption constraint was violated"],[Ee.ConstraintSeeds,"A seeds constraint was violated"],[Ee.ConstraintExecutable,"An executable constraint was violated"],[Ee.ConstraintState,"A state constraint was violated"],[Ee.ConstraintAssociated,"An associated constraint was violated"],[Ee.ConstraintAssociatedInit,"An associated init constraint was violated"],[Ee.ConstraintClose,"A close constraint was violated"],[Ee.ConstraintAddress,"An address constraint was violated"],[Ee.ConstraintZero,"Expected zero account discriminant"],[Ee.ConstraintTokenMint,"A token mint constraint was violated"],[Ee.ConstraintTokenOwner,"A token owner constraint was violated"],[Ee.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Ee.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Ee.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Ee.ConstraintSpace,"A space constraint was violated"],[Ee.RequireViolated,"A require expression was violated"],[Ee.RequireEqViolated,"A require_eq expression was violated"],[Ee.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Ee.RequireNeqViolated,"A require_neq expression was violated"],[Ee.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Ee.RequireGtViolated,"A require_gt expression was violated"],[Ee.RequireGteViolated,"A require_gte expression was violated"],[Ee.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Ee.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Ee.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Ee.AccountDidNotDeserialize,"Failed to deserialize the account"],[Ee.AccountDidNotSerialize,"Failed to serialize the account"],[Ee.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Ee.AccountNotMutable,"The given account is not mutable"],[Ee.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Ee.InvalidProgramId,"Program ID was not as expected"],[Ee.InvalidProgramExecutable,"Program account is not executable"],[Ee.AccountNotSigner,"The given account did not sign"],[Ee.AccountNotSystemOwned,"The given account is not owned by the system program"],[Ee.AccountNotInitialized,"The program expected this account to be already initialized"],[Ee.AccountNotProgramData,"The given account is not a program data account"],[Ee.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Ee.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Ee.StateInvalidAddress,"The given state account does not have the correct address"],[Ee.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Ee.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yu=function(){return Yu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Yu.apply(this,arguments)};function oT(r){return r.toLowerCase()}var aT=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],cT=/[^A-Z0-9]+/gi;function Wm(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function uT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?aT:i,a=n.stripRegexp,u=a===void 0?cT:a,f=n.transform,h=f===void 0?oT:f,d=n.delimiter,m=d===void 0?" ":d,I=Wm(Wm(t,s,"$1\0$2"),u,"\0"),O=0,M=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(O,M).split("\0").map(h).join(m)}(r,Yu({delimiter:"."},e))}class ur{static fieldLayout(e,t){const n=e.name!==void 0?yn(e.name):void 0;switch(e.type){case"bool":return Ne.bool(n);case"u8":return Ne.u8(n);case"i8":return Ne.i8(n);case"u16":return Ne.u16(n);case"i16":return Ne.i16(n);case"u32":return Ne.u32(n);case"i32":return Ne.i32(n);case"f32":return Ne.f32(n);case"u64":return Ne.u64(n);case"i64":return Ne.i64(n);case"f64":return Ne.f64(n);case"u128":return Ne.u128(n);case"i128":return Ne.i128(n);case"bytes":return Ne.vecU8(n);case"string":return Ne.str(n);case"publicKey":return Ne.publicKey(n);default:if("vec"in e.type)return Ne.vec(ur.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ne.option(ur.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new Ya("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new Ya(`Type not found: ${JSON.stringify(e)}`);return ur.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=ur.fieldLayout({name:void 0,type:i},t);return Ne.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>ur.fieldLayout(s,t));return Ne.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=yn(s.name);if(s.fields===void 0)return Ne.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return ur.fieldLayout(f,t)});return Ne.struct(u,a)});return n!==void 0?Ne.rustEnum(i).replicate(n):Ne.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Al{constructor(e){this.idl=e,this.ixLayout=Al.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=qd("global",n.name);t.set(je.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=qd("state",n.name);t.set(je.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=yn(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([qd(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return ur.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=yn(n.name);return[s,Ne.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return ur.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=yn(n.name);return[s,Ne.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):je.decode(e));let n=je.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Ii.format(e,t,this.idl)}}class Ii{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Ii.formatIdlType(u.type),data:Ii.formatIdlData(u,e.data[u.name],n.types)})),a=Ii.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Ii.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Ii.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Ii.formatIdlData(I,m,n)}).join(", "),f=yn(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Ii.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function qd(r,e){var t;let n=`${r}:${t===void 0&&(t={}),uT(e,Yu({delimiter:"_"},t))}`;return ee.Buffer.from($s.exports.sha256.digest(n)).slice(0,8)}function ap(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return za(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>za(r,t.type)).reduce((t,n)=>t+n,0)}function za(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+za(r,e.option);if("coption"in e)return 4+za(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new Ya(`Type not found: ${JSON.stringify(e)}`);return ap(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return za(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const lT=8;class xo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,ur.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=xo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(xo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=xo.accountDiscriminator(e);return{offset:0,bytes:je.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=ap(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from($s.exports.sha256.digest(`account:${yn(e,{pascalCase:!0})}`)).slice(0,8)}}class Kv{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,ur.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[_h(Nv(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(ov(e))}catch{return null}const n=_h(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function Nv(r){return ee.Buffer.from($s.exports.sha256.digest(`event:${r}`)).slice(0,8)}class Dv{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=ur.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await cp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function cp(r){let e=Sl("anchor-deprecated-state")?"account":"state";return ee.Buffer.from($s.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class kl{constructor(e){this.instruction=new Al(e),this.accounts=new xo(e),this.events=new Kv(e),e.state&&(this.state=new Dv(e))}}var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:{};function dT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class hr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Uv=hr;class Ps extends hr{isCount(){throw new Error("ExternalLayout is abstract")}}class hT extends Ps{constructor(e,t,n){if(!(e instanceof hr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Il||this.layout instanceof Fv}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Il extends hr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Fv extends hr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const Gd=Math.pow(2,32);class pT extends hr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*Gd+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/Gd);return{hi32:a,lo32:s-a*Gd}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class gT extends hr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof hr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class zv{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Vm extends zv{constructor(e,t){if(!(e instanceof Ps&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Wv extends hr{constructor(e,t,n){const i=e instanceof Il||e instanceof Fv;if(i)e=new Vm(new hT(e));else if(e instanceof Ps&&e.isCount())e=new Vm(e);else if(!(e instanceof zv))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof hr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new yT(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Pe.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class yT extends hr{constructor(e,t,n,i){if(!(e instanceof Wv))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof hr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class mT extends hr{constructor(e,t){if(!(e instanceof Ps&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ps||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Ps&&(i=e.length),!Pe.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Ps&&this.length.encode(i,t,n),i}}var In=r=>new Il(1,r),$i=r=>new pT(r),Mt=(r,e,t)=>new gT(r,e,t),El=(r,e)=>new mT(r,e);class bT{constructor(e){}encode(e,t){switch(yn(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Vt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||$e.default).toBuffer()}})}(t);case"initializeAccount":return Vt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return Vt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return Vt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return Vt({approve:{amount:n}})}(t);case"revoke":return Vt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return Vt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return Vt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return Vt({burn:{amount:n}})}(t);case"closeAccount":return Vt({closeAccount:{}});case"freezeAccount":return Vt({freezeAccount:{}});case"thawAccount":return Vt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return Vt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return Vt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return Vt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return Vt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return Vt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return Vt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return Vt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return Vt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Vt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Ct=($m=In("instruction"),new Wv($m,vT,_T));var $m,vT,_T;function yo(r){return El(32,r)}function Vt(r){let e=Pe.Buffer.alloc(wT),t=Ct.encode(r,e);return e.slice(0,t)}Ct.addVariant(0,Mt([In("decimals"),El(32,"mintAuthority"),In("freezeAuthorityOption"),yo("freezeAuthority")]),"initializeMint"),Ct.addVariant(1,Mt([]),"initializeAccount"),Ct.addVariant(2,Mt([In("m")]),"initializeMultisig"),Ct.addVariant(3,Mt([$i("amount")]),"transfer"),Ct.addVariant(4,Mt([$i("amount")]),"approve"),Ct.addVariant(5,Mt([]),"revoke"),Ct.addVariant(6,Mt([In("authorityType"),In("newAuthorityOption"),yo("newAuthority")]),"setAuthority"),Ct.addVariant(7,Mt([$i("amount")]),"mintTo"),Ct.addVariant(8,Mt([$i("amount")]),"burn"),Ct.addVariant(9,Mt([]),"closeAccount"),Ct.addVariant(10,Mt([]),"freezeAccount"),Ct.addVariant(11,Mt([]),"thawAccount"),Ct.addVariant(12,Mt([$i("amount"),In("decimals")]),"transferChecked"),Ct.addVariant(13,Mt([$i("amount"),In("decimals")]),"approvedChecked"),Ct.addVariant(14,Mt([$i("amount"),In("decimals")]),"mintToChecked"),Ct.addVariant(15,Mt([$i("amount"),In("decimals")]),"burnedChecked"),Ct.addVariant(16,Mt([yo("authority")]),"InitializeAccount2"),Ct.addVariant(17,Mt([]),"syncNative"),Ct.addVariant(18,Mt([yo("authority")]),"initializeAccount3"),Ct.addVariant(19,Mt([In("m")]),"initializeMultisig2"),Ct.addVariant(20,Mt([In("decimals"),yo("mintAuthority"),In("freezeAuthorityOption"),yo("freezeAuthority")]),"initializeMint2");const wT=Math.max(...Object.values(Ct.registry).map(r=>r.span));class ST{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Du(r){return new up(El(8),e=>lp.fromBuffer(e),e=>e.toBuffer(),r)}function Ao(r){return new up(El(32),e=>new $e(e),e=>e.toBuffer(),r)}function Wa(r,e){return new AT(r,e)}class up extends Uv{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class AT extends Uv{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Il(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function kT(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function IT(r){return r?1:0}class lp extends ts{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Pe.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new lp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class ET{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Pe.Buffer.alloc(165),i=qm.encode(t,n);return n.slice(0,i)}case"mint":{const n=Pe.Buffer.alloc(82),i=jm.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return qm.decode(n)}(t);case"mint":return function(n){return jm.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=ap(this.idl,e))!==null&&t!==void 0?t:0}}const jm=Mt([Wa(Ao(),"mintAuthority"),Du("supply"),In("decimals"),function(r){return new up(In(),kT,IT,r)}("isInitialized"),Wa(Ao(),"freezeAuthority")]),qm=Mt([Ao("mint"),Ao("authority"),Du("amount"),Wa(Ao(),"delegate"),In("state"),Wa(Du(),"isNative"),Du("delegatedAmount"),Wa(Ao(),"closeAuthority")]);class OT{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class Vv{constructor(e){this.instruction=new bT(e),this.accounts=new ET(e),this.events=new OT(e),this.state=new ST(e)}}var PT=Object.freeze({__proto__:null,hash:function(r){return $s.exports.sha256(r)}});function $v(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=$s.exports.sha256.digest(n);return new $e(ee.Buffer.from(i))}function jv(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,TT(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=$s.exports.sha256(new Uint8Array(t)),i=new ts(n,16).toArray(void 0,32);if($e.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new $e(i)}function fp(r,e){let t,n=255;for(;n!=0;){try{t=jv(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const TT=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function qv(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:zr(i).toBuffer())});const[n]=await $e.findProgramAddress(t,zr(r));return n}var RT=Object.freeze({__proto__:null,createWithSeedSync:$v,createProgramAddressSync:jv,findProgramAddressSync:fp,associated:qv});const Ah=new $e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),kh=new $e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var BT=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Ah,ASSOCIATED_PROGRAM_ID:kh,associatedAddress:async function({mint:r,owner:e}){return(await $e.findProgramAddress([e.toBuffer(),Ah.toBuffer(),r.toBuffer()],kh))[0]}}),Ih={exports:{}};(function(r,e){var t=typeof self<"u"?self:fT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function M(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var W={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(W[Symbol.iterator]=function(){return W}),W}function C(T){this.map={},T instanceof C?T.forEach(function(W,X){this.append(X,W)},this):Array.isArray(T)?T.forEach(function(W){this.append(W[0],W[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(W){this.append(W,T[W])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(W,X){T.onload=function(){W(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var W=new FileReader,X=ae(W);return W.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var W=new Uint8Array(T.byteLength);return W.set(new Uint8Array(T)),W.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var W;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(W=T)&&DataView.prototype.isPrototypeOf(W)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(W){var X=new FileReader,Be=ae(X);return X.readAsText(W),Be}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var X=new Uint8Array(W),Be=new Array(X.length),ye=0;ye<X.length;ye++)Be[ye]=String.fromCharCode(X[ye]);return Be.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(T,W){T=M(T),W=A(W);var X=this.map[T];this.map[T]=X?X+", "+W:W},C.prototype.delete=function(T){delete this.map[M(T)]},C.prototype.get=function(T){return T=M(T),this.has(T)?this.map[T]:null},C.prototype.has=function(T){return this.map.hasOwnProperty(M(T))},C.prototype.set=function(T,W){this.map[M(T)]=A(W)},C.prototype.forEach=function(T,W){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(W,this.map[X],X,this)},C.prototype.keys=function(){var T=[];return this.forEach(function(W,X){T.push(X)}),R(T)},C.prototype.values=function(){var T=[];return this.forEach(function(W){T.push(W)}),R(T)},C.prototype.entries=function(){var T=[];return this.forEach(function(W,X){T.push([X,W])}),R(T)},f&&(C.prototype[Symbol.iterator]=C.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(T,W){var X,Be,ye=(W=W||{}).body;if(T instanceof V){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,W.headers||(this.headers=new C(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=W.credentials||this.credentials||"same-origin",!W.headers&&this.headers||(this.headers=new C(W.headers)),this.method=(X=W.method||this.method||"GET",Be=X.toUpperCase(),N.indexOf(Be)>-1?Be:X),this.mode=W.mode||this.mode||null,this.signal=W.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function J(T){var W=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Be=X.split("="),ye=Be.shift().replace(/\+/g," "),Ie=Be.join("=").replace(/\+/g," ");W.append(decodeURIComponent(ye),decodeURIComponent(Ie))}}),W}function K(T,W){W||(W={}),this.type="default",this.status=W.status===void 0?200:W.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new C(W.headers),this.url=W.url||"",this._initBody(T)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},E.call(V.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,W){if(j.indexOf(W)===-1)throw new RangeError("Invalid status code");return new K(null,{status:W,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(W,X){this.message=W,this.name=X;var Be=Error(W);this.stack=Be.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,W){return new Promise(function(X,Be){var ye=new V(T,W);if(ye.signal&&ye.signal.aborted)return Be(new a.DOMException("Aborted","AbortError"));var Ie=new XMLHttpRequest;function $t(){Ie.abort()}Ie.onload=function(){var jt,_e,We={status:Ie.status,statusText:Ie.statusText,headers:(jt=Ie.getAllResponseHeaders()||"",_e=new C,jt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(cn){var kt=cn.split(":"),ft=kt.shift().trim();if(ft){var yr=kt.join(":").trim();_e.append(ft,yr)}}),_e)};We.url="responseURL"in Ie?Ie.responseURL:We.headers.get("X-Request-URL");var Qt="response"in Ie?Ie.response:Ie.responseText;X(new K(Qt,We))},Ie.onerror=function(){Be(new TypeError("Network request failed"))},Ie.ontimeout=function(){Be(new TypeError("Network request failed"))},Ie.onabort=function(){Be(new a.DOMException("Aborted","AbortError"))},Ie.open(ye.method,ye.url,!0),ye.credentials==="include"?Ie.withCredentials=!0:ye.credentials==="omit"&&(Ie.withCredentials=!1),"responseType"in Ie&&h&&(Ie.responseType="blob"),ye.headers.forEach(function(jt,_e){Ie.setRequestHeader(_e,jt)}),ye.signal&&(ye.signal.addEventListener("abort",$t),Ie.onreadystatechange=function(){Ie.readyState===4&&ye.signal.removeEventListener("abort",$t)}),Ie.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=C,s.Request=V,s.Response=K),a.Headers=C,a.Request=V,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Ih,Ih.exports);var xT=dT(Ih.exports);async function Gm(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=Eh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=Eh(i.data);return s}const MT=Ne.rustEnum([Ne.struct([],"uninitialized"),Ne.struct([Ne.option(Ne.publicKey(),"authorityAddress")],"buffer"),Ne.struct([Ne.publicKey("programdataAddress")],"program"),Ne.struct([Ne.u64("slot"),Ne.option(Ne.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ne.u32());function Eh(r){return MT.decode(r)}var CT=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([Gm(r,e),xT(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:Gm,decodeUpgradeableLoaderState:Eh}),LT=Object.freeze({__proto__:null,sha256:PT,rpc:tT,publicKey:RT,bytes:YP,token:BT,features:sT,registry:CT});const KT=Ne.struct([Ne.publicKey("authority"),Ne.vecU8("data")]);function fc(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Do{static build(e,t,n){if(e.name==="_inner")throw new Ya("the _inner name is reserved");const i=(...s)=>{const[a,u]=fc(e,[...s]);wl(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),Sl("debug-logs")&&console.log("Outgoing account metas:",f),new sv({keys:f,programId:n,data:t(e.name,Iv(e,...a))})};return i.accounts=s=>Do.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Do.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=zr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class Gv{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=fc(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw op(h,n)}}}}class Hv{static build(e,t){return(...n)=>{var i,s,a;const[,u]=fc(e,[...n]),f=new iv;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class Yv{constructor(e,t,n=No(),i=new kl(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=Hd(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=Do.build(I,(C,Y)=>i.instruction.encodeState(C,Y),t);O.accounts=C=>function(ae,oe,de,E){if(de.name==="new"){const[N]=fp([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:Hd(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:ep.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return wl(de.accounts,E),[{pubkey:Hd(ae),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(Do.accountsArray(C,I.accounts,I.name));const M=Hv.build(I,O),A=Gv.build(I,M,rp(e),n),R=yn(I.name);h[R]=O,d[R]=M,m[R]=A}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await cp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new cv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function Hd(r){let[e]=fp([],r);return $v(e,"unversioned",r)}class Jv{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??No(),this._coder=s??new kl(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await Tv(this._provider.connection,e.map(n=>zr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Pe.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Ba.get(e.toString());if(n)return n.ee;const i=new cv;e=zr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Ba.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Ba.get(e.toString());t?Ba&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Ba.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return ep.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await qv(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(zr(e),t)}}const Ba=new Map,NT=13,DT=14;class Qv{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new dp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(Hu.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class dp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new FT(e),i=new UT;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(NT):e.slice(DT);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class UT{constructor(){this.stack=[]}program(){return Hu.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){Hu.exports.ok(this.stack.length>0),this.stack.pop()}}class FT{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const zT=new $e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Xv(){return new Vv(Zv)}const Zv={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class Qa{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new WT(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=yn(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(Qa.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=Qa.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await $e.findProgramAddress(t,n);this._accounts[yn(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new $e(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=yn(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[yn(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[yn(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Pe.Buffer.from([t]);case"u16":let n=Pe.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Pe.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Pe.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Pe.Buffer.from(Sv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Pe.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}Qa.CONST_ACCOUNTS={systemProgram:ep.programId,tokenProgram:Ah,associatedTokenProgram:kh,rent:PP};class WT{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=Xv().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[yn(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class e_{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new VT(d,i,s,a,u,f,e,t,n,h)}}class VT{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new Qa(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Xa{constructor(e,t,n,i){t=zr(t),n||(n=No()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new kl(e),this._events=new Qv(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,M,A,R){const C={},Y={},ae={},oe={},de={},E={},N=rp(O),V=O.accounts?class{static build(K,j,te,T){var W;const X={};return(W=K.accounts)===null||W===void 0||W.forEach(Be=>{const ye=yn(Be.name);X[ye]=new Jv(K,Be,te,T,j)}),X}}.build(O,M,A,R):{},J=class{static build(K,j,te,T){if(K.state!==void 0)return new Yv(K,te,T,j)}}.build(O,M,A,R);return O.instructions.forEach(K=>{const j=Do.build(K,(Ie,$t)=>M.instruction.encode(Ie,$t),A),te=Hv.build(K,j),T=Gv.build(K,te,N,R),W=class{static build(Ie,$t,jt,_e,We,Qt,cn){return async(...kt)=>{var ft;const yr=$t(...kt),[,Ft]=fc(Ie,[...kt]);let vn;if(_e.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{vn=await _e.simulate(yr,Ft.signers,(ft=Ft.options)===null||ft===void 0?void 0:ft.commitment)}catch(Xn){throw op(Xn,jt)}if(vn===void 0)throw new Error("Unable to simulate transaction");const Yr=vn.logs;if(!Yr)throw new Error("Simulated logs not found");const mr=[];return cn.events&&new dp(Qt,We).parseLogs(Yr,Xn=>{mr.push(Xn)}),{events:mr,raw:Yr}}}}.build(K,te,N,R,M,A,O),X=class{static build(Ie,$t,jt,_e){const We=$t.accounts.find(cn=>cn.isMut),Qt=!!$t.returns;if(!We&&Qt)return async(...cn)=>{var kt,ft;let yr=await jt(...cn);const Ft=`Program return: ${Ie} `;let vn=yr.raw.find(Xn=>Xn.startsWith(Ft));if(!vn)throw new Error("View expected return log");let Yr=kv(vn.slice(Ft.length)),mr=$t.returns;if(!mr)throw new Error("View expected return type");return ur.fieldLayout({type:mr},Array.from([...(kt=_e.accounts)!==null&&kt!==void 0?kt:[],...(ft=_e.types)!==null&&ft!==void 0?ft:[]])).decode(Yr)}}}.build(A,K,W,O),Be=e_.build(R,A,K,j,te,T,W,X,V),ye=yn(K.name);Y[ye]=j,ae[ye]=te,C[ye]=T,oe[ye]=W,de[ye]=Be,X&&(E[ye]=X)}),[C,Y,ae,V,oe,de,J,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=zr(e),i=await Xa.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new Xa(i,n,t)}static async fetchIdl(e,t){t=t??No();const n=zr(e),i=await async function(h){const d=(await $e.findProgramAddress([],h))[0];return await $e.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),KT.decode(u));var u;const f=WP(a.data);return JSON.parse(wv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class $T{static token(e){return function(t){return new Xa(Zv,zT,t,Xv())}(e)}}var jT=Object.freeze(Object.defineProperty({__proto__:null,web3:TP,ACCOUNT_DISCRIMINATOR_SIZE:lT,AccountClient:Jv,AnchorError:Bo,AnchorProvider:xv,BorshAccountsCoder:xo,BorshCoder:kl,BorshEventCoder:Kv,BorshInstructionCoder:Al,BorshStateCoder:Dv,EventManager:Qv,EventParser:dp,IdlError:Ya,LangErrorCode:Ee,LangErrorMessage:Lv,MethodsBuilderFactory:e_,Program:Xa,ProgramError:Ja,ProgramErrorStack:ra,Spl:$T,SplTokenCoder:Vv,StateClient:Yv,eventDiscriminator:Nv,getProvider:No,parseIdlErrors:rp,setProvider:rT,splitArgsAndCtx:fc,stateDiscriminator:cp,toInstruction:Iv,translateAddress:zr,translateError:op,utils:LT,validateAccounts:wl,BN:ts},Symbol.toStringTag,{value:"Module"})),gt=cc(jT),dc={};Object.defineProperty(dc,"__esModule",{value:!0});dc.stakingIdl=void 0;dc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.getStakingProgram=Cs.getStakingIdl=void 0;const Hm=gt,qT=dc;function t_(r){const e=qT.stakingIdl;return e.metadata.address=r.toBase58(),e}Cs.getStakingIdl=t_;function GT({connection:r,programId:e}){const t=t_(e),n=new Hm.AnchorProvider(r,null,null);return new Hm.Program(t,e,n)}Cs.getStakingProgram=GT;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Cs,r)})(Jn);var HT=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_l,"__esModule",{value:!0});_l.cancelUnstakeInstruction=void 0;const YT=Jn;function JT({connection:r,user:e,registeredStake:t,programId:n}){return HT(this,void 0,void 0,function*(){const i=(0,YT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}_l.cancelUnstakeInstruction=JT;var Ol={},QT=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.createStakingAccountInstruction=void 0;const XT=Jn;function ZT({connection:r,user:e,registeredStake:t,programId:n}){return QT(this,void 0,void 0,function*(){const i=(0,XT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Ol.createStakingAccountInstruction=ZT;var Pl={},js={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=mv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(js);var Lr={},tn={};const eR=Gr.utils.randomPrivateKey,Ym=()=>{const r=Gr.utils.randomPrivateKey(),e=Ju(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Ju=Gr.getPublicKey;function Jm(r){try{return Gr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const hp=(r,e)=>Gr.sign(r,e.slice(0,32)),tR=Gr.verify,ze=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class pp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(lv(Va,this))}static decode(e){return fv(Va,this,e)}static decodeUnchecked(e){return dv(Va,this,e)}}class nR extends pp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Va=new Map;var n_;let r_;const i_=32,fr=32;function rR(r){return r._bn!==void 0}let Qm=1;r_=Symbol.toStringTag;class pe extends pp{constructor(e){if(super({}),this._bn=void 0,rR(e))this._bn=e._bn;else{if(typeof e=="string"){const t=je.decode(e);if(t.length!=fr)throw new Error("Invalid public key input");this._bn=new ts(t)}else this._bn=new ts(e);if(this._bn.byteLength()>fr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(Qm);return Qm+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return je.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===fr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[r_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=Gu(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>i_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,ze(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=Gu(n);if(Jm(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return Jm(t.toBytes())}}n_=pe;pe.default=new n_("11111111111111111111111111111111");Va.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class iR{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=ze(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ze(eR()),this._publicKey=ze(Ju(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const sR=new pe("BPFLoader1111111111111111111111111111111111"),Ji=1280-40-8,Tl=127,Uo=64;class gp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class yp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(yp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ko extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ko.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Za{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Ge=(r="publicKey")=>Je(32,r),oR=(r="signature")=>Je(64,r),Ts=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Je(dr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},aR=(r="authorized")=>ie([Ge("staker"),Ge("withdrawer")],r),cR=(r="lockup")=>ie([Tt("unixTimestamp"),Tt("epoch"),Ge("custodian")],r),uR=(r="voteInit")=>ie([Ge("nodePubkey"),Ge("authorizedVoter"),Ge("authorizedWithdrawer"),ke("commission")],r),lR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Ge("currentAuthorityDerivedKeyOwnerPubkey"),Ts("currentAuthorityDerivedKeySeed"),Ge("newAuthorized")],r);function s_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return s_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Vn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function cr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function tt(r,e){if(!r)throw new Error(e||"Assertion failed")}class Rl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Rl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];tt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{tt(t.length>0,"Expected at least one writable signer key");const[f]=t[0];tt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(tt(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class qr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:je.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Za(this.staticAccountKeys)}static compile(e){const t=Rl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Za(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:je.encode(u.data)}));return new qr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];cr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(je.decode(m.data));let A=[];cr(A,I.length);let R=[];return cr(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];cr(i,n.length);let s=ee.Buffer.alloc(Ji);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Je(m.keyIndicesCount.length,"keyIndicesCount"),Et(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Je(m.dataLength.length,"dataLength"),Et(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Je(1,"numRequiredSignatures"),Je(1,"numReadonlySignedAccounts"),Je(1,"numReadonlyUnsignedAccounts"),Je(t.length,"keyCount"),Et(Ge("key"),e,"keys"),Ge("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>ze(m.toBytes())),recentBlockhash:je.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Tl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Vn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,fr);t=t.slice(fr),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,fr);t=t.slice(fr);const h=Vn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Vn(t),A=t.slice(0,M);t=t.slice(M);const R=Vn(t),C=t.slice(0,R),Y=je.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:je.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new qr(m)}}class Ls{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Za(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Rl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:M}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new Za(u,i).compileInstructions(e.instructions);return new Ls({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();cr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();cr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();cr(s,this.addressTableLookups.length);const a=ie([ke("prefix"),ie([ke("numRequiredSignatures"),ke("numReadonlySignedAccounts"),ke("numReadonlyUnsignedAccounts")],"header"),Je(e.length,"staticAccountKeysLength"),Et(Ge(),this.staticAccountKeys.length,"staticAccountKeys"),Ge("recentBlockhash"),Je(n.length,"instructionsLength"),Je(t.length,"serializedInstructions"),Je(s.length,"addressTableLookupsLength"),Je(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(Ji),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:je.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(Ji);for(const n of this.compiledInstructions){const i=Array();cr(i,n.accountKeyIndexes.length);const s=Array();cr(s,n.data.length),e+=ie([ke("programIdIndex"),Je(i.length,"encodedAccountKeyIndexesLength"),Et(ke(),n.accountKeyIndexes.length,"accountKeyIndexes"),Je(s.length,"encodedDataLength"),Je(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Ji);for(const n of this.addressTableLookups){const i=Array();cr(i,n.writableIndexes.length);const s=Array();cr(s,n.readonlyIndexes.length),e+=ie([Ge("accountKey"),Je(i.length,"encodedWritableIndexesLength"),Et(ke(),n.writableIndexes.length,"writableIndexes"),Je(s.length,"encodedReadonlyIndexesLength"),Et(ke(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Tl;tt(n!==i,"Expected versioned message but received legacy message");const s=i;tt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=Vn(t);for(let M=0;M<f;M++)u.push(new pe(t.splice(0,fr)));const h=je.encode(t.splice(0,fr)),d=Vn(t),m=[];for(let M=0;M<d;M++){const A=t.shift(),R=Vn(t),C=t.splice(0,R),Y=Vn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:C,data:ae})}const I=Vn(t),O=[];for(let M=0;M<I;M++){const A=new pe(t.splice(0,fr)),R=Vn(t),C=t.splice(0,R),Y=Vn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:C,readonlyIndexes:ae})}return new Ls({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const mp={deserializeMessageVersion(r){const e=r[0],t=e&Tl;return t===e?"legacy":t},deserialize:r=>{const e=mp.deserializeMessageVersion(r);if(e==="legacy")return qr.from(r);if(e===0)return Ls.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let ki=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const fR=ee.Buffer.alloc(Uo).fill(0);class bt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new bt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new pe(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:je.encode(R)}});return M.forEach(A=>{tt(A.programIdIndex>=0),A.accounts.forEach(R=>tt(R>=0))}),new qr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=hp(n,i.secretKey);this._addSignature(i.publicKey,ze(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){tt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!tR(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];cr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return tt(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(tt(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),tt(s.length<=Ji,`Transaction too large: ${s.length} > ${Ji}`),s}get keys(){return tt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return tt(this.instructions.length===1),this.instructions[0].programId}get data(){return tt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Vn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Uo);t=t.slice(Uo),i.push(je.encode(ee.Buffer.from(a)))}return ct.populate(qr.from(t),i)}static populate(e,t=[]){const n=new ct;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==je.encode(fR)?null:je.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new bt({keys:s,programId:e.accountKeys[i.programIdIndex],data:je.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class bp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;tt(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;tt(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const M of i){const A=[];for(const C of M.accountKeyIndexes){const Y=m.get(C);if(Y===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ae=C<a;let oe;ae?oe=C<h:C<m.staticAccountKeys.length?oe=C-a<d:oe=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:C<n.numRequiredSignatures,isWritable:oe})}const R=m.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);O.push(new bt({programId:R,data:ze(M.data),keys:A}))}return new bp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return qr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Ls.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class vp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)tt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Uo));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();cr(t,this.signatures.length);const n=ie([Je(t.length,"encodedSignaturesLength"),Et(oR(),this.signatures.length,"signatures"),Je(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Vn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Uo)));const s=mp.deserialize(new Uint8Array(t));return new vp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));tt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=hp(t,i.secretKey)}}addSignature(e,t){tt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));tt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const dR=160,hR=64,pR=dR/hR,o_=1e3/pR,ni=new pe("SysvarC1ock11111111111111111111111111111111"),gR=new pe("SysvarEpochSchedu1e111111111111111111111111"),yR=new pe("Sysvar1nstructions1111111111111111111111111"),Uu=new pe("SysvarRecentB1ockHashes11111111111111111111"),Fo=new pe("SysvarRent111111111111111111111111111111111"),mR=new pe("SysvarRewards111111111111111111111111111111"),bR=new pe("SysvarS1otHashes111111111111111111111111111"),vR=new pe("SysvarS1otHistory11111111111111111111111111"),Fu=new pe("SysvarStakeHistory1111111111111111111111111");async function Oh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Es(r){return new Promise(e=>setTimeout(e,r))}function Qe(r,e){const t=r.layout.span>=0?r.layout.span:s_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function at(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const a_=et("lamportsPerSignature"),c_=ie([se("version"),se("state"),Ge("authorizedPubkey"),Ge("nonce"),ie([a_],"feeCalculator")]),Ph=c_.span;class Bl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=c_.decode(ze(e),0);return new Bl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const _R=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},wR=r=>e=>{const t=Je(r,e),{encode:n,decode:i}=_R(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return hv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=tp(a,r);return n(h,u,f)},s},zo=wR(8);class SR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(St))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=at(St.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=at(St.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=at(St.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=at(St.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=at(St.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=at(St.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=at(St.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=at(St.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=at(St.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),at(St.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=at(St.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=at(St.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(mn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const St=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Tt("lamports"),Tt("space"),Ge("programId")])},Assign:{index:1,layout:ie([se("instruction"),Ge("programId")])},Transfer:{index:2,layout:ie([se("instruction"),zo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Ge("base"),Ts("seed"),Tt("lamports"),Tt("space"),Ge("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Tt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Ge("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Ge("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Tt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Ge("base"),Ts("seed"),Tt("space"),Ge("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Ge("base"),Ts("seed"),Ge("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),zo("lamports"),Ts("seed"),Ge("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class mn{constructor(){}static createAccount(e){const t=St.Create,n=Qe(t,{lamports:e.lamports,space:e.space,programId:ze(e.programId.toBuffer())});return new bt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=St.TransferWithSeed;t=Qe(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=St.Transfer;t=Qe(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=St.AssignWithSeed;t=Qe(i,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=St.Assign;t=Qe(i,{programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=St.CreateWithSeed,n=Qe(t,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ze(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new bt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new ct;"basePubkey"in e&&"seed"in e?t.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Ph,programId:this.programId})):t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Ph,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=St.InitializeNonceAccount,n=Qe(t,{authorized:ze(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Uu,isSigner:!1,isWritable:!1},{pubkey:Fo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new bt(i)}static nonceAdvance(e){const t=St.AdvanceNonceAccount,n=Qe(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Uu,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new bt(i)}static nonceWithdraw(e){const t=St.WithdrawNonceAccount,n=Qe(t,{lamports:e.lamports});return new bt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Uu,isSigner:!1,isWritable:!1},{pubkey:Fo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=St.AuthorizeNonceAccount,n=Qe(t,{authorized:ze(e.newAuthorizedPubkey.toBuffer())});return new bt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=St.AllocateWithSeed;t=Qe(i,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=St.Allocate;t=Qe(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}}mn.programId=new pe("11111111111111111111111111111111");const AR=Ji-300;class Ks{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Ks.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new ct,O.add(mn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new ct,O.add(mn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new ct,O.add(mn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new ct().add(mn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Oh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Et(ke("byte"),dr(se(),-8),"bytes")]),u=Ks.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new ct().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(Oh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Es(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new ct().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Fo,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:M}),{context:R,value:C}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(o_/2)))}}return!0}}Ks.chunkSize=AR;const kR=new pe("BPFLoader2111111111111111111111111111111111");class IR{static getMinNumSignatures(e){return Ks.getMinNumSignatures(e)}static load(e,t,n,i,s){return Ks.load(e,t,n,s,i)}}function ER(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var OR=Object.prototype.toString,PR=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Ka(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Ka(r.toJSON(),e);if(f=OR.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Ka(r[t],!0)+",";return n>-1&&(i+=Ka(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=PR(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=Ka(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var TR=function(r){var e=Ka(r,!1);if(e!==void 0)return""+e},Xm=ER(TR);const xa=32;function Yd(r){let e=0;for(;r>1;)r/=2,e++;return e}function RR(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class u_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Yd(RR(e+xa+1))-Yd(xa)-1,n=this.getSlotsInEpoch(t),i=e-(n-xa);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*xa:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Yd(xa)):this.slotsPerEpoch}}class Th extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const BR={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Se extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var xR=globalThis.fetch;class MR extends RP{constructor(e,t,n){const i=s=>{const a=MP(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function CR(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Zm=56;class Rh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=CR(LR,e),n=e.length-Zm;tt(n>=0,"lookup table is invalid"),tt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Et(Ge(),i,"addresses")]).decode(e.slice(Zm));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const LR={index:1,layout:ie([se("typeIndex"),zo("deactivationSlot"),et("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Et(Ge(),dr(ke(),-1),"authority")])},KR=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function NR(r){const e=r.match(KR);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Jt=fi(ta(pe),F(),r=>new pe(r)),l_=na([F(),xe("base64")]),_p=fi(ta(ee.Buffer),l_,r=>ee.Buffer.from(r[0],"base64")),f_=30*1e3;function DR(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Pt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function d_(r){return pt([x({jsonrpc:xe("2.0"),id:F(),result:r}),x({jsonrpc:xe("2.0"),id:F(),error:x({code:di(),message:F(),data:le(uv())})})])}const UR=d_(di());function Fe(r){return fi(d_(r),UR,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Nt(r){return Fe(x({context:x({slot:S()}),value:r}))}function xl(r){return x({context:x({slot:S()}),value:r})}function Jd(r,e){return r===0?new Ls({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:je.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new qr(e)}const FR=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),zR=Fe(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),WR=H(x({slot:S(),prioritizationFee:S()})),VR=x({total:S(),validator:S(),foundation:S(),epoch:S()}),$R=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),jR=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Yt(),firstNormalEpoch:S(),firstNormalSlot:S()}),qR=bl(F(),H(S())),qs=G(pt([x({}),F()])),GR=x({err:qs}),HR=xe("receivedSignature"),YR=x({"solana-core":F(),"feature-set":le(S())}),eb=Nt(x({err:G(pt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Yt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:na([F(),xe("base64")])})))})),JR=Nt(x({byIdentity:bl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function QR(r,e,t,n,i,s){const a=t||xR;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,M)=>{try{n(d,m,(A,R)=>O([A,R]))}catch(A){M(A)}});return await a(...I)}),new BP(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},XB)};try{let O=5,M,A=500;for(;f?M=await f(r,I):M=await a(r,I),!(M.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await Es(A),A*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function XR(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function ZR(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const eB=Fe(FR),tB=Fe(VR),nB=Fe(WR),rB=Fe($R),iB=Fe(jR),sB=Fe(qR),oB=Fe(S()),aB=Nt(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(Jt)})),Bh=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}),cB=Nt(H(x({address:Jt,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}))),uB=Nt(H(x({pubkey:Jt,account:x({executable:Yt(),owner:Jt,lamports:S(),data:_p,rentEpoch:S()})}))),xh=x({program:F(),parsed:di(),space:S()}),lB=Nt(H(x({pubkey:Jt,account:x({executable:Yt(),owner:Jt,lamports:S(),data:xh,rentEpoch:S()})}))),fB=Nt(H(x({lamports:S(),address:Jt}))),ec=x({executable:Yt(),owner:Jt,lamports:S(),data:_p,rentEpoch:S()}),dB=x({pubkey:Jt,account:ec}),hB=fi(pt([ta(ee.Buffer),xh]),pt([l_,xh]),r=>Array.isArray(r)?he(r,_p):r),Mh=x({executable:Yt(),owner:Jt,lamports:S(),data:hB,rentEpoch:S()}),pB=x({pubkey:Jt,account:Mh}),gB=x({state:pt([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:S(),inactive:S()}),yB=Fe(H(x({signature:F(),slot:S(),err:qs,memo:G(F()),blockTime:le(G(S()))}))),mB=Fe(H(x({signature:F(),slot:S(),err:qs,memo:G(F()),blockTime:le(G(S()))}))),bB=x({subscription:S(),result:xl(ec)}),vB=x({pubkey:Jt,account:ec}),_B=x({subscription:S(),result:xl(vB)}),wB=x({parent:S(),slot:S(),root:S()}),SB=x({subscription:S(),result:wB}),AB=pt([x({type:pt([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:S(),timestamp:S()}),x({type:xe("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:xe("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:xe("dead"),slot:S(),timestamp:S(),err:F()})]),kB=x({subscription:S(),result:AB}),IB=x({subscription:S(),result:xl(pt([GR,HR]))}),EB=x({subscription:S(),result:S()}),OB=x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())}),tb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Yt(),epochCredits:H(na([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),PB=Fe(x({current:H(tb),delinquent:H(tb)})),TB=pt([xe("processed"),xe("confirmed"),xe("finalized")]),RB=x({slot:S(),confirmations:G(S()),err:qs,confirmationStatus:le(TB)}),BB=Nt(H(G(RB))),xB=Fe(S()),h_=x({accountKey:Jt,writableIndexes:H(S()),readonlyIndexes:H(S())}),wp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(h_))})}),p_=x({pubkey:Jt,signer:Yt(),writable:Yt(),source:le(pt([xe("transaction"),xe("lookupTable")]))}),g_=x({accountKeys:H(p_),signatures:H(F())}),y_=x({parsed:di(),program:F(),programId:Jt}),m_=x({accounts:H(Jt),data:F(),programId:Jt}),MB=pt([m_,y_]),CB=pt([x({parsed:di(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),b_=fi(MB,CB,r=>"accounts"in r?he(r,m_):he(r,y_)),v_=x({signatures:H(F()),message:x({accountKeys:H(p_),instructions:H(b_),recentBlockhash:F(),addressTableLookups:le(G(H(h_)))})}),Qu=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Bh}),__=x({writable:H(Jt),readonly:H(Jt)}),Ml=x({err:qs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Qu))),postTokenBalances:le(G(H(Qu))),loadedAddresses:le(__),computeUnitsConsumed:le(S())}),Sp=x({err:qs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(b_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Qu))),postTokenBalances:le(G(H(Qu))),loadedAddresses:le(__),computeUnitsConsumed:le(S())}),ia=pt([xe(0),xe("legacy")]),Gs=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))}),LB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:wp,meta:G(Ml),version:le(ia)})),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),KB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),NB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:g_,meta:G(Ml),version:le(ia)})),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),DB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:v_,meta:G(Sp),version:le(ia)})),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),UB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:g_,meta:G(Sp),version:le(ia)})),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),FB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Gs)),blockTime:G(S()),blockHeight:G(S())}))),zB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:wp,meta:G(Ml)})),rewards:le(H(Gs)),blockTime:G(S())}))),nb=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())}))),Qd=Fe(G(x({slot:S(),meta:G(Ml),blockTime:le(G(S())),transaction:wp,version:le(ia)}))),wu=Fe(G(x({slot:S(),transaction:v_,meta:G(Sp),blockTime:le(G(S())),version:le(ia)}))),WB=Nt(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})})),VB=Nt(x({blockhash:F(),lastValidBlockHeight:S()})),$B=Nt(Yt()),jB=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),qB=Fe(H(jB)),GB=Nt(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),HB=Fe(F()),YB=Fe(F()),JB=x({err:qs,logs:H(F()),signature:F()}),QB=x({result:xl(JB),subscription:S()}),XB={"solana-client":"js/0.0.0-development"};class ZB{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Pt(d),O=this._buildArgs([],m,void 0,I),M=Xm(O);return h[M]=h[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,Fe(S()));if("error"in R)throw new Se(R.error,"failed to get block height information");return R.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=DR(e),this._rpcWsEndpoint=n||NR(e),this._rpcClient=QR(e,i,s,a,u,f),this._rpcRequest=XR(this._rpcClient),this._rpcBatchRequest=ZR(this._rpcClient),this._rpcWebSocket=new MR(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Nt(S()));if("error"in u)throw new Se(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,Fe(G(S())));if("error"in n)throw new Se(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,Fe(S()));if("error"in t)throw new Se(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,oB);if("error"in t)throw new Se(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,aB);if("error"in i)throw new Se(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Nt(Bh));if("error"in s)throw new Se(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Nt(Bh));if("error"in s)throw new Se(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Pt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,uB);if("error"in h)throw new Se(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,lB);if("error"in u)throw new Se(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,fB);if("error"in s)throw new Se(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,cB);if("error"in s)throw new Se(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Nt(G(ec)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Nt(G(Mh)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Nt(H(G(Mh))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Nt(H(G(ec))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Pt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,Fe(gB));if("error"in f)throw new Se(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Pt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(dB),d=a.withContext===!0?he(f,Nt(h)):he(f,Fe(h));if("error"in d)throw new Se(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,Fe(H(pB)));if("error"in u)throw new Se(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=je.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return tt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:ki.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:ki.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Es(1e3),s||(O=await I(),s))return;m({__type:ki.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===ki.PROCESSED)d=m.response;else throw new gp(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let M=s,A=null;const R=async()=>{try{const{context:C,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=C.slot,Y==null?void 0:Y.nonce}catch{return M}};(async()=>{if(M=await R(),!u)for(;;){if(s!==M){O({__type:ki.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Es(2e3),u||(M=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===ki.PROCESSED)I=O.response;else{let M;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Es(400);continue}M=A;break}if(M!=null&&M.value){const A=e||"finalized",{confirmationStatus:R}=M.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new ko(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new ko(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new ko(a);break;default:(C=>{})(A)}I={context:M.context,value:{err:M.value.err}}}else throw new ko(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:ki.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===ki.PROCESSED)u=f.response;else throw new yp(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,Fe(H(OB)));if("error"in t)throw new Se(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,PB);if("error"in i)throw new Se(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,Fe(S()));if("error"in a)throw new Se(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,Fe(F()));if("error"in a)throw new Se(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,Fe(H(Jt)));if("error"in s)throw new Se(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);tt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,BB);if("error"in s)throw new Se(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,Fe(S()));if("error"in a)throw new Se(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,eB);if("error"in i)throw new Se(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Pt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,zR);if("error"in f)throw new Se(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,tB);if("error"in t)throw new Se(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,rB);if("error"in a)throw new Se(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,iB);if("error"in t)throw new Se(t.error,"failed to get epoch schedule");const n=t.result;return new u_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,sB);if("error"in t)throw new Se(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,xB);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,WB);if("error"in i)throw new Se(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,qB);if("error"in n)throw new Se(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,GB);if("error"in s)throw new Se(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=ze(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Nt(G(S())));if("error"in a)throw new Se(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,nB);if("error"in s)throw new Se(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,VB);if("error"in a)throw new Se(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,$B);if("error"in u)throw new Se(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,Fe(YR));if("error"in t)throw new Se(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,Fe(F()));if("error"in t)throw new Se(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,NB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,KB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,LB);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:Jd(m,h.message)},version:m}))}:null}}}catch(u){throw new Se(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,UB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,FB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,DB);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Se(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,JR);if("error"in a)throw new Se(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,Qd);if("error"in u)throw new Se(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Jd(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,wu);if("error"in u)throw new Se(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,wu);if("error"in h)throw new Se(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Qd);if("error"in h)throw new Se(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:Jd(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,zB);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new qr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:ct.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,Fe(H(S())));if("error"in a)throw new Se(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,nb);if("error"in s)throw new Se(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,nb);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Qd);if("error"in s)throw new Se(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new qr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:ct.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,wu);if("error"in s)throw new Se(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,wu);if("error"in u)throw new Se(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,yB);if("error"in a)throw new Se(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,mB);if("error"in a)throw new Se(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Rh({key:e,state:Rh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Bl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,HB);if("error"in i)throw new Se(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Es(100);const n=Date.now()-this._blockhashInfo.lastFetch>=f_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Es(o_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Nt(S()));if("error"in a)throw new Se(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Y=[R,C],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,eb);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof ct){let M=e;i=new ct,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=ct.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());d.accounts={encoding:"base64",addresses:M}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,eb);if("error"in O){let M;if("data"in O.error&&(M=O.error.data.logs,M&&Array.isArray(M))){const A=`
    `,R=A+M.join(A);console.error(O.error.message,R)}throw new Th("failed to simulate transaction: "+O.error.message,M)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=ze(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,YB);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new Th("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,bB);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Xm([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];tt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,_B);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,QB);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,SB);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,kB);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,IB);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,EB);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Mo{constructor(e){this._keypair=void 0,this._keypair=e??Ym()}static generate(){return new Mo(Ym())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Ju(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Mo({publicKey:n,secretKey:e})}static fromSeed(e){const t=Ju(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Mo({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Ei=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),zo("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),zo(),Et(Ge(),dr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class ex{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ei))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=at(Ei.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=at(Ei.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Ap.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Ap{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),tp(BigInt(e.recentSlot),8)],this.programId),i=Ei.CreateLookupTable,s=Qe(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}];return[new bt({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Ei.FreezeLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new bt({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Ei.ExtendLookupTable,n=Qe(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}),new bt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Ei.DeactivateLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new bt({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Ei.CloseLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new bt({programId:this.programId,keys:i,data:n})}}Ap.programId=new pe("AddressLookupTab1e1111111111111111111111111");class tx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ke("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ii))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=at(ii.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=at(ii.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=at(ii.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=at(ii.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(kp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ii=Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),zo("microLamports")])}});class kp{constructor(){}static requestUnits(e){const t=ii.RequestUnits,n=Qe(t,e);return new bt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=ii.RequestHeapFrame,n=Qe(t,e);return new bt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=ii.SetComputeUnitLimit,n=Qe(t,e);return new bt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=ii.SetComputeUnitPrice,n=Qe(t,{microLamports:BigInt(e.microLamports)});return new bt({keys:[],programId:this.programId,data:n})}}kp.programId=new pe("ComputeBudget111111111111111111111111111111");const rb=64,ib=32,sb=64,ob=ie([ke("numSignatures"),ke("padding"),Dt("signatureOffset"),Dt("signatureInstructionIndex"),Dt("publicKeyOffset"),Dt("publicKeyInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),Dt("messageInstructionIndex")]);class Cl{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;tt(t.length===ib,`Public Key must be ${ib} bytes but received ${t.length} bytes`),tt(i.length===sb,`Signature must be ${sb} bytes but received ${i.length} bytes`);const a=ob.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return ob.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new bt({keys:[],programId:Cl.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;tt(t.length===rb,`Private key must be ${rb} bytes but received ${t.length} bytes`);try{const s=Mo.fromSecretKey(t),a=s.publicKey.toBytes(),u=hp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Cl.programId=new pe("Ed25519SigVerify111111111111111111111111111");const nx=(r,e)=>{const t=uc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};uc.utils.isValidPrivateKey;const rx=uc.getPublicKey,ab=32,Xd=20,cb=64,ix=11,Zd=ie([ke("numSignatures"),Dt("signatureOffset"),ke("signatureInstructionIndex"),Dt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),ke("messageInstructionIndex"),Je(20,"ethAddress"),Je(64,"signature"),ke("recoveryId")]);class Co{constructor(){}static publicKeyToEthAddress(e){tt(e.length===cb,`Public key must be ${cb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(Mm(ze(e))).slice(-Xd)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return Co.createInstructionWithEthAddress({ethAddress:Co.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,tt(u.length===Xd,`Address must be ${Xd} bytes but received ${u.length} bytes`);const f=1+ix,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(Zd.span+n.length);return Zd.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:ze(i),ethAddress:ze(u),recoveryId:s},O),O.fill(ze(n),Zd.span),new bt({keys:[],programId:Co.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;tt(t.length===ab,`Private key must be ${ab} bytes but received ${t.length} bytes`);try{const s=ze(t),a=rx(s,!1).slice(1),u=ee.Buffer.from(Mm(ze(n))),[f,h]=nx(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Co.programId=new pe("KeccakSecp256k11111111111111111111111111111");var w_;const S_=new pe("StakeConfig11111111111111111111111111111111");class A_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class hc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}w_=hc;hc.default=new w_(0,0,pe.default);class sx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ln))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=at(ln.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new A_(new pe(t.staker),new pe(t.withdrawer)),lockup:new hc(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),at(ln.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=at(ln.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=at(ln.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=at(ln.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),at(ln.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=at(ln.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),at(ln.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Ll.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const ln=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),aR(),cR()])},Authorize:{index:1,layout:ie([se("instruction"),Ge("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Tt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Tt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Ge("newAuthorized"),se("stakeAuthorizationType"),Ts("authoritySeed"),Ge("authorityOwner")])}}),ox=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ll{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||hc.default,a=ln.Initialize,u=Qe(a,{authorized:{staker:ze(n.staker.toBuffer()),withdrawer:ze(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:ze(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Fo,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new bt(f)}static createAccountWithSeed(e){const t=new ct;t.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new ct;t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=ln.Delegate,a=Qe(s);return new ct().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:Fu,isSigner:!1,isWritable:!1},{pubkey:S_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=ln.Authorize,f=Qe(u,{newAuthorized:ze(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ct().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=ln.AuthorizeWithSeed,d=Qe(h,{newAuthorized:ze(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:ze(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ni,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new ct().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=ln.Split,u=Qe(a,{lamports:s});return new bt({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new ct;return t.add(mn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new ct;return f.add(mn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=ln.Merge,a=Qe(s);return new ct().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:Fu,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=ln.Withdraw,f=Qe(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:Fu,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ct().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=ln.Deactivate,s=Qe(i);return new ct().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Ll.programId=new pe("Stake11111111111111111111111111111111111111");Ll.space=200;class k_{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class ax{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Oi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=at(Oi.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new k_(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=at(Oi.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=at(Oi.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=at(Oi.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(sa.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Oi=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),uR()])},Authorize:{index:1,layout:ie([se("instruction"),Ge("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Tt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),lR()])}}),cx=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class sa{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Oi.InitializeAccount,a=Qe(s,{voteInit:{nodePubkey:ze(i.nodePubkey.toBuffer()),authorizedVoter:ze(i.authorizedVoter.toBuffer()),authorizedWithdrawer:ze(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Fo,isSigner:!1,isWritable:!1},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new bt(u)}static createAccount(e){const t=new ct;return t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Oi.Authorize,u=Qe(a,{newAuthorized:ze(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ct().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Oi.AuthorizeWithSeed,h=Qe(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ze(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:ze(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ni,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ct().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Oi.Withdraw,u=Qe(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new ct().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return sa.withdraw(e)}}sa.programId=new pe("Vote111111111111111111111111111111111111111");sa.space=3731;const I_=new pe("Va1idator1nfo111111111111111111111111111111"),ux=x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});class Ip{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Vn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,fr));t=t.slice(fr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(I_)&&i[1].isSigner){const s=Ts().decode(ee.Buffer.from(t)),a=JSON.parse(s);return xP(a,ux),new Ip(i[1].publicKey,a)}return null}}const lx=new pe("Vote111111111111111111111111111111111111111"),fx=ie([Ge("nodePubkey"),Ge("authorizedWithdrawer"),ke("commission"),et(),Et(ie([et("slot"),se("confirmationCount")]),dr(se(),-8),"votes"),ke("rootSlotValid"),et("rootSlot"),et(),Et(ie([et("epoch"),Ge("authorizedVoter")]),dr(se(),-8),"authorizedVoters"),ie([Et(ie([Ge("authorizedPubkey"),et("epochOfLastAuthorizedSwitch"),et("targetEpoch")]),32,"buf"),et("idx"),ke("isEmpty")],"priorVoters"),et(),Et(ie([et("epoch"),et("credits"),et("prevCredits")]),dr(se(),-8),"epochCredits"),ie([et("slot"),et("timestamp")],"lastTimestamp")]);class Ep{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=fx.decode(ze(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Ep({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(dx),priorVoters:hx(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function dx({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function ub({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function hx({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(ub),...r.slice(0,e).map(ub)]}const lb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function px(r,e){const t=e===!1?"http":"https";if(!r)return lb[t].devnet;const n=lb[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function gx(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const yx=1e9;var mx=Object.freeze(Object.defineProperty({__proto__:null,Account:iR,AddressLookupTableAccount:Rh,AddressLookupTableInstruction:ex,AddressLookupTableProgram:Ap,Authorized:A_,BLOCKHASH_CACHE_TIMEOUT_MS:f_,BPF_LOADER_DEPRECATED_PROGRAM_ID:sR,BPF_LOADER_PROGRAM_ID:kR,BpfLoader:IR,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ii,ComputeBudgetInstruction:tx,ComputeBudgetProgram:kp,Connection:ZB,Ed25519Program:Cl,Enum:nR,EpochSchedule:u_,FeeCalculatorLayout:a_,Keypair:Mo,LAMPORTS_PER_SOL:yx,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Ei,Loader:Ks,Lockup:hc,MAX_SEED_LENGTH:i_,Message:qr,MessageAccountKeys:Za,MessageV0:Ls,NONCE_ACCOUNT_LENGTH:Ph,NonceAccount:Bl,PACKET_DATA_SIZE:Ji,PUBLIC_KEY_LENGTH:fr,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:Uo,SOLANA_SCHEMA:Va,STAKE_CONFIG_ID:S_,STAKE_INSTRUCTION_LAYOUTS:ln,SYSTEM_INSTRUCTION_LAYOUTS:St,SYSVAR_CLOCK_PUBKEY:ni,SYSVAR_EPOCH_SCHEDULE_PUBKEY:gR,SYSVAR_INSTRUCTIONS_PUBKEY:yR,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Uu,SYSVAR_RENT_PUBKEY:Fo,SYSVAR_REWARDS_PUBKEY:mR,SYSVAR_SLOT_HASHES_PUBKEY:bR,SYSVAR_SLOT_HISTORY_PUBKEY:vR,SYSVAR_STAKE_HISTORY_PUBKEY:Fu,Secp256k1Program:Co,SendTransactionError:Th,SolanaJSONRPCError:Se,SolanaJSONRPCErrorCode:BR,StakeAuthorizationLayout:ox,StakeInstruction:sx,StakeProgram:Ll,Struct:pp,SystemInstruction:SR,SystemProgram:mn,Transaction:ct,TransactionExpiredBlockheightExceededError:gp,TransactionExpiredNonceInvalidError:ko,TransactionExpiredTimeoutError:yp,TransactionInstruction:bt,TransactionMessage:bp,TransactionStatus:ki,VALIDATOR_INFO_KEY:I_,VERSION_PREFIX_MASK:Tl,VOTE_PROGRAM_ID:lx,ValidatorInfo:Ip,VersionedMessage:mp,VersionedTransaction:vp,VoteAccount:Ep,VoteAuthorizationLayout:cx,VoteInit:k_,VoteInstruction:ax,VoteProgram:sa,clusterApiUrl:px,sendAndConfirmRawTransaction:gx,sendAndConfirmTransaction:Oh},Symbol.toStringTag,{value:"Module"})),Bi=cc(mx);const fb=()=>{const r=Gr.utils.randomPrivateKey(),e=Ch(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Ch=Gr.getPublicKey;function db(r){try{return Gr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const bx=(r,e)=>Gr.sign(r,e.slice(0,32)),vx=Gr.verify,Wn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class _x{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(lv(zu,this))}static decode(e){return fv(zu,this,e)}static decodeUnchecked(e){return dv(zu,this,e)}}const zu=new Map;var E_;let O_;const wx=32,Rs=32;function Sx(r){return r._bn!==void 0}let hb=1;O_=Symbol.toStringTag;class ve extends _x{constructor(e){if(super({}),this._bn=void 0,Sx(e))this._bn=e._bn;else{if(typeof e=="string"){const t=je.decode(e);if(t.length!=Rs)throw new Error("Invalid public key input");this._bn=new ts(t)}else this._bn=new ts(e);if(this._bn.byteLength()>Rs)throw new Error("Invalid public key input")}}static unique(){const e=new ve(hb);return hb+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return je.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Rs)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[O_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=Gu(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>wx)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Wn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=Gu(n);if(db(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return db(t.toBytes())}}E_=ve;ve.default=new E_("11111111111111111111111111111111");zu.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const Lh=1280-40-8,Ax=127,Kh=64;class pb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Xe=(r="publicKey")=>Je(32,r),Io=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Je(dr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},kx=(r="authorized")=>ie([Xe("staker"),Xe("withdrawer")],r),Ix=(r="lockup")=>ie([Tt("unixTimestamp"),Tt("epoch"),Xe("custodian")],r),Ex=(r="voteInit")=>ie([Xe("nodePubkey"),Xe("authorizedVoter"),Xe("authorizedWithdrawer"),ke("commission")],r),Ox=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Xe("currentAuthorityDerivedKeyOwnerPubkey"),Io("currentAuthorityDerivedKeySeed"),Xe("newAuthorized")],r);function P_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return P_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Na(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Da(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function ar(r,e){if(!r)throw new Error(e||"Assertion failed")}class Op{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Op(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ar(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{ar(t.length>0,"Expected at least one writable signer key");const[f]=t[0];ar(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(ar(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class tc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:je.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new pb(this.staticAccountKeys)}static compile(e){const t=Op.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new pb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:je.encode(u.data)}));return new tc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Da(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(je.decode(m.data));let A=[];Da(A,I.length);let R=[];return Da(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];Da(i,n.length);let s=ee.Buffer.alloc(Lh);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Je(m.keyIndicesCount.length,"keyIndicesCount"),Et(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Je(m.dataLength.length,"dataLength"),Et(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Je(1,"numRequiredSignatures"),Je(1,"numReadonlySignedAccounts"),Je(1,"numReadonlyUnsignedAccounts"),Je(t.length,"keyCount"),Et(Xe("key"),e,"keys"),Xe("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Wn(m.toBytes())),recentBlockhash:je.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Ax))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Na(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Rs);t=t.slice(Rs),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Rs);t=t.slice(Rs);const h=Na(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Na(t),A=t.slice(0,M);t=t.slice(M);const R=Na(t),C=t.slice(0,R),Y=je.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:je.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new tc(m)}}const Px=ee.Buffer.alloc(Kh).fill(0);class ht{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ht(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ve(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:je.encode(R)}});return M.forEach(A=>{ar(A.programIdIndex>=0),A.accounts.forEach(R=>ar(R>=0))}),new tc({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=bx(n,i.secretKey);this._addSignature(i.publicKey,Wn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ar(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!vx(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Da(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return ar(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(ar(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),ar(s.length<=Lh,`Transaction too large: ${s.length} > ${Lh}`),s}get keys(){return ar(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ar(this.instructions.length===1),this.instructions[0].programId}get data(){return ar(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Na(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Kh);t=t.slice(Kh),i.push(je.encode(ee.Buffer.from(a)))}return Lt.populate(tc.from(t),i)}static populate(e,t=[]){const n=new Lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==je.encode(Px)?null:je.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new ht({keys:s,programId:e.accountKeys[i.programIdIndex],data:je.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const eh=new ve("SysvarRecentB1ockHashes11111111111111111111"),Eo=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function Tx(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Er(r,e){const t=r.layout.span>=0?r.layout.span:P_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const Rx=et("lamportsPerSignature"),Bx=ie([se("version"),se("state"),Xe("authorizedPubkey"),Xe("nonce"),ie([Rx],"feeCalculator")]),gb=Bx.span,xx=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},Mx=r=>e=>{const t=Je(r,e),{encode:n,decode:i}=xx(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return hv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=tp(a,r);return n(h,u,f)},s},Wo=Mx(8),Or=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Tt("lamports"),Tt("space"),Xe("programId")])},Assign:{index:1,layout:ie([se("instruction"),Xe("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Wo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Xe("base"),Io("seed"),Tt("lamports"),Tt("space"),Xe("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Tt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Xe("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Xe("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Tt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Xe("base"),Io("seed"),Tt("space"),Xe("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Xe("base"),Io("seed"),Xe("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Wo("lamports"),Io("seed"),Xe("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class ri{constructor(){}static createAccount(e){const t=Or.Create,n=Er(t,{lamports:e.lamports,space:e.space,programId:Wn(e.programId.toBuffer())});return new ht({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Or.TransferWithSeed;t=Er(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Or.Transfer;t=Er(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ht({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Or.AssignWithSeed;t=Er(i,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Or.Assign;t=Er(i,{programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ht({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Or.CreateWithSeed,n=Er(t,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Wn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ht({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Lt;"basePubkey"in e&&"seed"in e?t.add(ri.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:gb,programId:this.programId})):t.add(ri.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:gb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Or.InitializeNonceAccount,n=Er(t,{authorized:Wn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eh,isSigner:!1,isWritable:!1},{pubkey:Eo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ht(i)}static nonceAdvance(e){const t=Or.AdvanceNonceAccount,n=Er(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ht(i)}static nonceWithdraw(e){const t=Or.WithdrawNonceAccount,n=Er(t,{lamports:e.lamports});return new ht({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:eh,isSigner:!1,isWritable:!1},{pubkey:Eo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Or.AuthorizeNonceAccount,n=Er(t,{authorized:Wn(e.newAuthorizedPubkey.toBuffer())});return new ht({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Or.AllocateWithSeed;t=Er(i,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Or.Allocate;t=Er(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ht({keys:n,programId:this.programId,data:t})}}ri.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),Wo("deactivationSlot"),et("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Et(Xe(),dr(ke(),-1),"authority")]);const rn=fi(ta(ve),F(),r=>new ve(r)),T_=na([F(),xe("base64")]),Pp=fi(ta(ee.Buffer),T_,r=>ee.Buffer.from(r[0],"base64"));function R_(r){return pt([x({jsonrpc:xe("2.0"),id:F(),result:r}),x({jsonrpc:xe("2.0"),id:F(),error:x({code:di(),message:F(),data:le(uv())})})])}const Cx=R_(di());function At(r){return fi(R_(r),Cx,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Kr(r){return At(x({context:x({slot:S()}),value:r}))}function Kl(r){return x({context:x({slot:S()}),value:r})}const Lx=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});At(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const Kx=H(x({slot:S(),prioritizationFee:S()})),Nx=x({total:S(),validator:S(),foundation:S(),epoch:S()}),Dx=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),Ux=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Yt(),firstNormalEpoch:S(),firstNormalSlot:S()}),Fx=bl(F(),H(S())),Hs=G(pt([x({}),F()])),zx=x({err:Hs}),Wx=xe("receivedSignature");x({"solana-core":F(),"feature-set":le(S())});Kr(x({err:G(pt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Yt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:na([F(),xe("base64")])})))}));Kr(x({byIdentity:bl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));At(Lx);At(Nx);At(Kx);At(Dx);At(Ux);At(Fx);At(S());Kr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(rn)}));const Vx=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())});Kr(H(x({address:rn,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())})));Kr(H(x({pubkey:rn,account:x({executable:Yt(),owner:rn,lamports:S(),data:Pp,rentEpoch:S()})})));const Nh=x({program:F(),parsed:di(),space:S()});Kr(H(x({pubkey:rn,account:x({executable:Yt(),owner:rn,lamports:S(),data:Nh,rentEpoch:S()})})));Kr(H(x({lamports:S(),address:rn})));const Tp=x({executable:Yt(),owner:rn,lamports:S(),data:Pp,rentEpoch:S()});x({pubkey:rn,account:Tp});const $x=fi(pt([ta(ee.Buffer),Nh]),pt([T_,Nh]),r=>Array.isArray(r)?he(r,Pp):r),jx=x({executable:Yt(),owner:rn,lamports:S(),data:$x,rentEpoch:S()});x({pubkey:rn,account:jx});x({state:pt([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:S(),inactive:S()});At(H(x({signature:F(),slot:S(),err:Hs,memo:G(F()),blockTime:le(G(S()))})));At(H(x({signature:F(),slot:S(),err:Hs,memo:G(F()),blockTime:le(G(S()))})));x({subscription:S(),result:Kl(Tp)});const qx=x({pubkey:rn,account:Tp});x({subscription:S(),result:Kl(qx)});const Gx=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:Gx});const Hx=pt([x({type:pt([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:S(),timestamp:S()}),x({type:xe("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:xe("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:xe("dead"),slot:S(),timestamp:S(),err:F()})]);x({subscription:S(),result:Hx});x({subscription:S(),result:Kl(pt([zx,Wx]))});x({subscription:S(),result:S()});x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())});const yb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Yt(),epochCredits:H(na([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});At(x({current:H(yb),delinquent:H(yb)}));const Yx=pt([xe("processed"),xe("confirmed"),xe("finalized")]),Jx=x({slot:S(),confirmations:G(S()),err:Hs,confirmationStatus:le(Yx)});Kr(H(G(Jx)));At(S());const B_=x({accountKey:rn,writableIndexes:H(S()),readonlyIndexes:H(S())}),Rp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(B_))})}),x_=x({pubkey:rn,signer:Yt(),writable:Yt(),source:le(pt([xe("transaction"),xe("lookupTable")]))}),M_=x({accountKeys:H(x_),signatures:H(F())}),C_=x({parsed:di(),program:F(),programId:rn}),L_=x({accounts:H(rn),data:F(),programId:rn}),Qx=pt([L_,C_]),Xx=pt([x({parsed:di(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),K_=fi(Qx,Xx,r=>"accounts"in r?he(r,L_):he(r,C_)),N_=x({signatures:H(F()),message:x({accountKeys:H(x_),instructions:H(K_),recentBlockhash:F(),addressTableLookups:le(G(H(B_)))})}),Xu=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Vx}),D_=x({writable:H(rn),readonly:H(rn)}),Nl=x({err:Hs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Xu))),postTokenBalances:le(G(H(Xu))),loadedAddresses:le(D_),computeUnitsConsumed:le(S())}),Bp=x({err:Hs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(K_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Xu))),postTokenBalances:le(G(H(Xu))),loadedAddresses:le(D_),computeUnitsConsumed:le(S())}),oa=pt([xe(0),xe("legacy")]),Ys=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))});At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Rp,meta:G(Nl),version:le(oa)})),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:M_,meta:G(Nl),version:le(oa)})),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:N_,meta:G(Bp),version:le(oa)})),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:M_,meta:G(Bp),version:le(oa)})),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Ys)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Rp,meta:G(Nl)})),rewards:le(H(Ys)),blockTime:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())})));At(G(x({slot:S(),meta:Nl,blockTime:le(G(S())),transaction:Rp,version:le(oa)})));At(G(x({slot:S(),transaction:N_,meta:G(Bp),blockTime:le(G(S())),version:le(oa)})));Kr(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})}));Kr(x({blockhash:F(),lastValidBlockHeight:S()}));Kr(Yt());const Zx=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});At(H(Zx));Kr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));At(F());At(F());const eM=x({err:Hs,logs:H(F()),signature:F()});x({result:Kl(eM),subscription:S()});class Hi{constructor(e){this._keypair=void 0,this._keypair=e??fb()}static generate(){return new Hi(fb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Ch(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Hi({publicKey:n,secretKey:e})}static fromSeed(e){const t=Ch(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Hi({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Wo("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Wo(),Et(Xe(),dr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),Wo("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([ke("numSignatures"),ke("padding"),Dt("signatureOffset"),Dt("signatureInstructionIndex"),Dt("publicKeyOffset"),Dt("publicKeyInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),Dt("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");uc.utils.isValidPrivateKey;uc.getPublicKey;ie([ke("numSignatures"),Dt("signatureOffset"),ke("signatureInstructionIndex"),Dt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),ke("messageInstructionIndex"),Je(20,"ethAddress"),Je(64,"signature"),ke("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var U_;new ve("StakeConfig11111111111111111111111111111111");class F_{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}U_=F_;F_.default=new U_(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),kx(),Ix()])},Authorize:{index:1,layout:ie([se("instruction"),Xe("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Tt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Tt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Xe("newAuthorized"),se("stakeAuthorizationType"),Io("authoritySeed"),Xe("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),Ex()])},Authorize:{index:1,layout:ie([se("instruction"),Xe("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Tt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),Ox()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});new ve("Vote111111111111111111111111111111111111111");ie([Xe("nodePubkey"),Xe("authorizedWithdrawer"),ke("commission"),et(),Et(ie([et("slot"),se("confirmationCount")]),dr(se(),-8),"votes"),ke("rootSlotValid"),et("rootSlot"),et(),Et(ie([et("epoch"),Xe("authorizedVoter")]),dr(se(),-8),"authorizedVoters"),ie([Et(ie([Xe("authorizedPubkey"),et("epochOfLastAuthorizedSwitch"),et("targetEpoch")]),32,"buf"),et("idx"),ke("isEmpty")],"priorVoters"),et(),Et(ie([et("epoch"),et("credits"),et("prevCredits")]),dr(se(),-8),"epochCredits"),ie([et("slot"),et("timestamp")],"lastTimestamp")]);var it={},Dl={};Dl.byteLength=rM;Dl.toByteArray=sM;Dl.fromByteArray=cM;var si=[],Pr=[],tM=typeof Uint8Array<"u"?Uint8Array:Array,th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var mo=0,nM=th.length;mo<nM;++mo)si[mo]=th[mo],Pr[th.charCodeAt(mo)]=mo;Pr["-".charCodeAt(0)]=62;Pr["_".charCodeAt(0)]=63;function z_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function rM(r){var e=z_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function iM(r,e,t){return(e+t)*3/4-t}function sM(r){var e,t=z_(r),n=t[0],i=t[1],s=new tM(iM(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Pr[r.charCodeAt(f)]<<18|Pr[r.charCodeAt(f+1)]<<12|Pr[r.charCodeAt(f+2)]<<6|Pr[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Pr[r.charCodeAt(f)]<<2|Pr[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=Pr[r.charCodeAt(f)]<<10|Pr[r.charCodeAt(f+1)]<<4|Pr[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function oM(r){return si[r>>18&63]+si[r>>12&63]+si[r>>6&63]+si[r&63]}function aM(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(oM(n));return i.join("")}function cM(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(aM(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(si[e>>2]+si[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(si[e>>10]+si[e>>4&63]+si[e<<2&63]+"=")),i.join("")}var xp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xp.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};xp.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,M=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=M,a/=256,h-=8);r[t+O-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Dl,t=xp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(wn(v,ArrayBuffer)||v&&wn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(wn(v,SharedArrayBuffer)||v&&wn(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(wn(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Ci(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(wn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),wn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(wn(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||wn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Zn(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Mi(v).length;default:if(L)return k?-1:Zn(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return $t(this,g,y);case"utf8":case"utf-8":return W(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ie(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?W(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(wn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,Ke=k-y;const vt=Math.min(Z,Ke),dt=this.slice(L,$),_t=g.slice(y,k);for(let ut=0;ut<vt;++ut)if(dt[ut]!==_t[ut]){Z=dt[ut],Ke=_t[ut];break}return Z<Ke?-1:Ke<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Ci(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,Ke=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,Ke/=2,y/=2}function vt(_t,ut){return $===1?_t[ut]:_t.readUInt16BE(ut*$)}let dt;if(L){let _t=-1;for(dt=y;dt<Z;dt++)if(vt(v,dt)===vt(g,_t===-1?0:dt-_t)){if(_t===-1&&(_t=dt),dt-_t+1===Ke)return _t*$}else _t!==-1&&(dt-=dt-_t),_t=-1}else for(y+Ke>Z&&(y=Z-Ke),dt=y;dt>=0;dt--){let _t=!0;for(let ut=0;ut<Ke;ut++)if(vt(v,dt+ut)!==vt(g,ut)){_t=!1;break}if(_t)return dt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function V(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const Ke=parseInt(g.substr(Z*2,2),16);if(Ci(Ke))return Z;v[y+Z]=Ke}return Z}function J(v,g,y,k){return _n(Zn(g,v.length-y),v,y,k)}function K(v,g,y,k){return _n(Rc(g),v,y,k)}function j(v,g,y,k){return _n(Mi(g),v,y,k)}function te(v,g,y,k){return _n(Tf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return V(this,g,y,k);case"utf8":case"utf-8":return J(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function W(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,Ke=$>239?4:$>223?3:$>191?2:1;if(L+Ke<=y){let vt,dt,_t,ut;switch(Ke){case 1:$<128&&(Z=$);break;case 2:vt=v[L+1],(vt&192)===128&&(ut=($&31)<<6|vt&63,ut>127&&(Z=ut));break;case 3:vt=v[L+1],dt=v[L+2],(vt&192)===128&&(dt&192)===128&&(ut=($&15)<<12|(vt&63)<<6|dt&63,ut>2047&&(ut<55296||ut>57343)&&(Z=ut));break;case 4:vt=v[L+1],dt=v[L+2],_t=v[L+3],(vt&192)===128&&(dt&192)===128&&(_t&192)===128&&(ut=($&15)<<18|(vt&63)<<12|(dt&63)<<6|_t&63,ut>65535&&ut<1114112&&(Z=ut))}}Z===null?(Z=65533,Ke=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=Ke}return Be(k)}const X=4096;function Be(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ie(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function $t(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Rf[v[$]];return L}function jt(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function _e(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Kn(function(g){g=g>>>0,hi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Kn(function(g){g=g>>>0,hi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Kn(function(g){g=g>>>0,hi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Kn(function(g){g=g>>>0,hi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!1,52,8)};function We(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;We(this,g,y,k,Ke,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;We(this,g,y,k,Ke,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function Qt(v,g,y,k,L){Xn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function cn(v,g,y,k,L){Xn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Kn(function(g,y=0){return Qt(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Kn(function(g,y=0){return cn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const vt=Math.pow(2,8*k-1);We(this,g,y,k,vt-1,-vt)}let $=0,Z=1,Ke=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&Ke===0&&this[y+$-1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const vt=Math.pow(2,8*k-1);We(this,g,y,k,vt-1,-vt)}let $=k-1,Z=1,Ke=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&Ke===0&&this[y+$+1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Kn(function(g,y=0){return Qt(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Kn(function(g,y=0){return cn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kt(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ft(v,g,y,k,L){return g=+g,y=y>>>0,L||kt(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return ft(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return ft(this,g,y,!1,k)};function yr(v,g,y,k,L){return g=+g,y=y>>>0,L||kt(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return yr(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return yr(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),Ke=Z.length;if(Ke===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%Ke]}return this};const Ft={};function vn(v,g,y){Ft[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}vn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vn("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),vn("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=Yr(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=Yr(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function Yr(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function mr(v,g,y){hi(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&dn(g,v.length-(y+1))}function Xn(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let Ke;throw $>3?g===0||g===BigInt(0)?Ke=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:Ke=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:Ke=`>= ${g}${Z} and <= ${y}${Z}`,new Ft.ERR_OUT_OF_RANGE("value",Ke,v)}mr(k,L,$)}function hi(v,g){if(typeof v!="number")throw new Ft.ERR_INVALID_ARG_TYPE(g,"number",v)}function dn(v,g,y){throw Math.floor(v)!==v?(hi(v,y),new Ft.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Ft.ERR_BUFFER_OUT_OF_BOUNDS:new Ft.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const ps=/[^+/0-9A-Za-z-_]/g;function Pf(v){if(v=v.split("=")[0],v=v.trim().replace(ps,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Zn(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function Rc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Tf(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function Mi(v){return e.toByteArray(Pf(v))}function _n(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function wn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Ci(v){return v!==v}const Rf=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Kn(v){return typeof BigInt>"u"?Bf:v}function Bf(){throw new Error("BigInt not supported")}})(it);var uM=typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:typeof window<"u"?window:{},Dh;typeof Object.create=="function"?Dh=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Dh=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var lM=Dh;function xs(r,e){var t={seen:[],stylize:dM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),W_(e)?t.showHidden=e:e&&vM(t,e),Oo(t.showHidden)&&(t.showHidden=!1),Oo(t.depth)&&(t.depth=2),Oo(t.colors)&&(t.colors=!1),Oo(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=fM),Zu(t,r,t.depth)}xs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};xs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function fM(r,e){var t=xs.styles[e];return t?"\x1B["+xs.colors[t][0]+"m"+r+"\x1B["+xs.colors[t][1]+"m":r}function dM(r,e){return r}function hM(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Zu(r,e,t){if(r.customInspect&&e&&ja(e.inspect)&&e.inspect!==xs&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return $_(n)||(n=Zu(r,n,t)),n}var i=pM(r,e);if(i)return i;var s=Object.keys(e),a=hM(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),Wu(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return nh(e);if(s.length===0){if(ja(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if($a(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(el(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Wu(e))return nh(e)}var f="",h=!1,d=["{","}"];if(mM(e)&&(h=!0,d=["[","]"]),ja(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if($a(e)&&(f=" "+RegExp.prototype.toString.call(e)),el(e)&&(f=" "+Date.prototype.toUTCString.call(e)),Wu(e)&&(f=" "+nh(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return $a(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=gM(r,e,t,a,s):I=s.map(function(O){return Uh(r,e,t,a,O,h)}),r.seen.pop(),yM(I,f,d)}function pM(r,e){if(Oo(e))return r.stylize("undefined","undefined");if($_(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(bM(e))return r.stylize(""+e,"number");if(W_(e))return r.stylize(""+e,"boolean");if(V_(e))return r.stylize("null","null")}function nh(r){return"["+Error.prototype.toString.call(r)+"]"}function gM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)j_(e,String(a))?s.push(Uh(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(Uh(r,e,t,n,f,!0))}),s}function Uh(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),j_(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(V_(t)?u=Zu(r,f.value,null):u=Zu(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),Oo(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function yM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function mM(r){return Array.isArray(r)}function W_(r){return typeof r=="boolean"}function V_(r){return r===null}function bM(r){return typeof r=="number"}function $_(r){return typeof r=="string"}function Oo(r){return r===void 0}function $a(r){return Ul(r)&&Mp(r)==="[object RegExp]"}function Ul(r){return typeof r=="object"&&r!==null}function el(r){return Ul(r)&&Mp(r)==="[object Date]"}function Wu(r){return Ul(r)&&(Mp(r)==="[object Error]"||r instanceof Error)}function ja(r){return typeof r=="function"}function mb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function Mp(r){return Object.prototype.toString.call(r)}function vM(r,e){if(!e||!Ul(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function j_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function bb(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var _M=Object.prototype.hasOwnProperty,vb=Object.keys||function(r){var e=[];for(var t in r)_M.call(r,t)&&e.push(t);return e},_b=Array.prototype.slice,rh;function q_(){return typeof rh<"u"?rh:rh=function(){return function(){}.name==="foo"}()}function wb(r){return Object.prototype.toString.call(r)}function Sb(r){return it.isBuffer(r)||typeof uM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function On(r,e){r||Hn(r,!0,e,"==",Lp)}var wM=/\s*function\s+([^\(\s]*)\s*/;function G_(r){if(!!ja(r)){if(q_())return r.name;var e=r.toString(),t=e.match(wM);return t&&t[1]}}On.AssertionError=Cp;function Cp(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=SM(this),this.generatedMessage=!0);var e=r.stackStartFunction||Hn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=G_(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}lM(Cp,Error);function Ab(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function kb(r){if(q_()||!ja(r))return xs(r);var e=G_(r),t=e?": "+e:"";return"[Function"+t+"]"}function SM(r){return Ab(kb(r.actual),128)+" "+r.operator+" "+Ab(kb(r.expected),128)}function Hn(r,e,t,n,i){throw new Cp({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}On.fail=Hn;function Lp(r,e){r||Hn(r,!0,e,"==",Lp)}On.ok=Lp;On.equal=H_;function H_(r,e,t){r!=e&&Hn(r,e,t,"==",H_)}On.notEqual=Y_;function Y_(r,e,t){r==e&&Hn(r,e,t,"!=",Y_)}On.deepEqual=J_;function J_(r,e,t){Vo(r,e,!1)||Hn(r,e,t,"deepEqual",J_)}On.deepStrictEqual=Q_;function Q_(r,e,t){Vo(r,e,!0)||Hn(r,e,t,"deepStrictEqual",Q_)}function Vo(r,e,t,n){if(r===e)return!0;if(it.isBuffer(r)&&it.isBuffer(e))return bb(r,e)===0;if(el(r)&&el(e))return r.getTime()===e.getTime();if($a(r)&&$a(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(Sb(r)&&Sb(e)&&wb(r)===wb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return bb(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(it.isBuffer(r)!==it.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),AM(r,e,t,n))}function Ib(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function AM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(mb(r)||mb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Ib(r),s=Ib(e);if(i&&!s||!i&&s)return!1;if(i)return r=_b.call(r),e=_b.call(e),Vo(r,e,t);var a=vb(r),u=vb(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!Vo(r[f],e[f],t,n))return!1;return!0}On.notDeepEqual=X_;function X_(r,e,t){Vo(r,e,!1)&&Hn(r,e,t,"notDeepEqual",X_)}On.notDeepStrictEqual=Z_;function Z_(r,e,t){Vo(r,e,!0)&&Hn(r,e,t,"notDeepStrictEqual",Z_)}On.strictEqual=ew;function ew(r,e,t){r!==e&&Hn(r,e,t,"===",ew)}On.notStrictEqual=tw;function tw(r,e,t){r===e&&Hn(r,e,t,"!==",tw)}function Eb(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function kM(r){var e;try{r()}catch(t){e=t}return e}function nw(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=kM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&Hn(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&Wu(i),u=!r&&i&&!t;if((a&&s&&Eb(i,t)||u)&&Hn(i,t,"Got unwanted exception"+n),r&&i&&t&&!Eb(i,t)||!r&&i)throw i}On.throws=IM;function IM(r,e,t){nw(!0,r,e,t)}On.doesNotThrow=EM;function EM(r,e,t){nw(!1,r,e,t)}On.ifError=OM;function OM(r){if(r)throw r}class nc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function PM(r,e){return e.property?r+"["+e.property+"]":r}class Su extends nc{isCount(){throw new Error("ExternalLayout is abstract")}}class rw extends nc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class TM extends nc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof nc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class RM extends nc{constructor(e,t){if(!(e instanceof Su&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Su||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Su&&(i=e.length),!(it.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(PM("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Su&&this.length.encode(i,t,n),i}}var Ze=r=>new rw(1,r),qa=r=>new rw(4,r),qt=(r,e,t)=>new TM(r,e,t),iw=(r,e)=>new RM(r,e);const Gt=(r="publicKey")=>iw(32,r),Tr=(r="uint64")=>iw(8,r);function en(r,e,t,...n){return Tx(e,t,n,{skipPreflight:!1})}const BM=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),sw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Ob="Failed to find account",Pb="Invalid account owner";function ih(r){return it.Buffer.from(r.toBuffer())}class kn extends ts{toBuffer(){const e=super.toArray().reverse(),t=it.Buffer.from(e);if(t.length===8)return t;On(t.length<8,"u64 too large");const n=it.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return On(e.length===8,`Invalid buffer length: ${e.length}`),new kn([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function or(r){return"publicKey"in r}const xM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},ow=new ve("So11111111111111111111111111111111111111112"),Ua=qt([qa("mintAuthorityOption"),Gt("mintAuthority"),Tr("supply"),Ze("decimals"),Ze("isInitialized"),qa("freezeAuthorityOption"),Gt("freezeAuthority")]),wo=qt([Gt("mint"),Gt("owner"),Tr("amount"),qa("delegateOption"),Gt("delegate"),Ze("state"),qa("isNativeOption"),Tr("isNative"),Tr("delegatedAmount"),qa("closeAuthorityOption"),Gt("closeAuthority")]),Au=qt([Ze("m"),Ze("n"),Ze("is_initialized"),Gt("signer1"),Gt("signer2"),Gt("signer3"),Gt("signer4"),Gt("signer5"),Gt("signer6"),Gt("signer7"),Gt("signer8"),Gt("signer9"),Gt("signer10"),Gt("signer11")]);class mt{constructor(e,t,n,i){Ra(this,"connection",void 0),Ra(this,"publicKey",void 0),Ra(this,"programId",void 0),Ra(this,"associatedProgramId",void 0),Ra(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:sw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Ua.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(wo.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Au.span)}static async createMint(e,t,n,i,s,a){const u=Hi.generate(),f=new mt(e,u.publicKey,a,t),h=await mt.getMinBalanceRentForExemptMint(e),d=new Lt;return d.add(ri.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Ua.span,programId:a})),d.add(mt.createInitMintInstruction(a,u.publicKey,s,n,i)),await en("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await mt.getMinBalanceRentForExemptAccount(this.connection),n=Hi.generate(),i=new Lt;i.add(ri.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:wo.span,programId:this.programId}));const s=this.publicKey;return i.add(mt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await en("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await mt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await en("CreateAssociatedTokenAccount",this.connection,new Lt().add(mt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await mt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===Ob||n.message===Pb){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await mt.getMinBalanceRentForExemptAccount(e),u=Hi.generate(),f=new Lt;return f.add(ri.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:wo.span,programId:t})),f.add(ri.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(mt.createInitAccountInstruction(t,ow,u.publicKey,n)),await en("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=Hi.generate(),i=await mt.getMinBalanceRentForExemptMultisig(this.connection),s=new Lt;s.add(ri.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:Au.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:Eo,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=qt([Ze("instruction"),Ze("m")]),f=it.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await en("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Ua.span)throw new Error("Invalid mint size");const t=it.Buffer.from(e.data),n=Ua.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=kn.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(Ob);if(!n.owner.equals(this.programId))throw new Error(Pb);if(n.data.length!=wo.span)throw new Error("Invalid account size");const i=it.Buffer.from(n.data),s=wo.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=kn.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new kn):(s.delegate=new ve(s.delegate),s.delegatedAmount=kn.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=kn.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Au.span)throw new Error("Invalid multisig size");const n=it.Buffer.from(t.data),i=Au.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return or(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await en("Transfer",this.connection,new Lt().add(mt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;or(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await en("Approve",this.connection,new Lt().add(mt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("Revoke",this.connection,new Lt().add(mt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;or(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await en("SetAuthority",this.connection,new Lt().add(mt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;or(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await en("MintTo",this.connection,new Lt().add(mt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;or(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await en("Burn",this.connection,new Lt().add(mt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;or(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await en("CloseAccount",this.connection,new Lt().add(mt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("FreezeAccount",this.connection,new Lt().add(mt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("ThawAccount",this.connection,new Lt().add(mt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return or(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await en("TransferChecked",this.connection,new Lt().add(mt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;or(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await en("ApproveChecked",this.connection,new Lt().add(mt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;or(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await en("MintToChecked",this.connection,new Lt().add(mt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;or(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await en("BurnChecked",this.connection,new Lt().add(mt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await en("SyncNative",this.connection,new Lt().add(mt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Eo,isSigner:!1,isWritable:!1}];const u=qt([Ze("instruction"),Ze("decimals"),Gt("mintAuthority"),Ze("option"),Gt("freezeAuthority")]);let f=it.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:ih(i),option:s===null?0:1,freezeAuthority:ih(s||new ve(0))},f);f=f.slice(0,h)}return new ht({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Eo,isSigner:!1,isWritable:!1}],a=qt([Ze("instruction")]),u=it.Buffer.alloc(a.span);return a.encode({instruction:1},u),new ht({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=qt([Ze("instruction"),Tr("amount")]),f=it.Buffer.alloc(u.span);u.encode({instruction:3,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=qt([Ze("instruction"),Tr("amount")]),f=it.Buffer.alloc(u.span);u.encode({instruction:4,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=qt([Ze("instruction")]),a=it.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=qt([Ze("instruction"),Ze("authorityType"),Ze("option"),Gt("newAuthority")]);let f=it.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:xM[i],option:n===null?0:1,newAuthority:ih(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=qt([Ze("instruction"),Tr("amount")]),f=it.Buffer.alloc(u.span);u.encode({instruction:7,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=qt([Ze("instruction"),Tr("amount")]),f=it.Buffer.alloc(u.span);u.encode({instruction:8,amount:new kn(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=qt([Ze("instruction")]),u=it.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=qt([Ze("instruction")]),u=it.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=qt([Ze("instruction")]),u=it.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=qt([Ze("instruction"),Tr("amount"),Ze("decimals")]),d=it.Buffer.alloc(h.span);h.encode({instruction:12,amount:new kn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=qt([Ze("instruction"),Tr("amount"),Ze("decimals")]),d=it.Buffer.alloc(h.span);h.encode({instruction:13,amount:new kn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=qt([Ze("instruction"),Tr("amount"),Ze("decimals")]),h=it.Buffer.alloc(f.span);f.encode({instruction:14,amount:new kn(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=qt([Ze("instruction"),Tr("amount"),Ze("decimals")]),h=it.Buffer.alloc(f.span);f.encode({instruction:15,amount:new kn(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new ht({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=qt([Ze("instruction")]),i=it.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new ht({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=it.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ri.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:Eo,isSigner:!1,isWritable:!1}];return new ht({keys:f,programId:e,data:u})}}var MM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:sw,AccountLayout:wo,MintLayout:Ua,NATIVE_MINT:ow,TOKEN_PROGRAM_ID:BM,Token:mt,u64:kn},Symbol.toStringTag,{value:"Module"})),pc=cc(MM),Fl=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.getAccountInfo=tn.getTokenAccount=tn.getAssociatedTokenAddress=tn.convertFactionStringToNum=tn.longToByteArray=tn.byteArrayToLong=tn.stringToByteArray=tn.byteArrayToString=void 0;const ku=qi,Iu=gt,Vu=Bi,ti=pc;function CM(r){return String.fromCharCode(...r)}tn.byteArrayToString=CM;function LM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}tn.stringToByteArray=LM;function KM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}tn.byteArrayToLong=KM;function NM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}tn.longToByteArray=NM;function DM(r){return Fl(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return ku.FactionType.MUD;case"oni":return ku.FactionType.ONI;case"ustur":return ku.FactionType.Ustur;default:return ku.FactionType.Unenlisted}})}tn.convertFactionStringToNum=DM;function aw(r,e){return Fl(this,void 0,void 0,function*(){const[t]=yield Vu.PublicKey.findProgramAddress([r.toBuffer(),ti.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],ti.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}tn.getAssociatedTokenAddress=aw;function UM(r,e,t,n=e,i){return Fl(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Iu.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Iu.BN(h.info.tokenAmount.amount);d.gt(new Iu.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield aw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(Vu.SystemProgram.programId))return{tokenAccount:u,createInstruction:[ti.Token.createAssociatedTokenAccountInstruction(ti.ASSOCIATED_TOKEN_PROGRAM_ID,ti.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new Vu.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Iu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[Vu.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield ti.Token.getMinBalanceRentForExemptAccount(r),space:ti.AccountLayout.span,programId:ti.TOKEN_PROGRAM_ID}),ti.Token.createInitAccountInstruction(ti.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}tn.getTokenAccount=UM;function FM(r,e){return Fl(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}tn.getAccountInfo=FM;var zl={},zM=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(zl,"__esModule",{value:!0});zl.sendAndConfirmTransaction=void 0;const WM=Bi;function VM(r,e,...t){return zM(this,void 0,void 0,function*(){let n="";try{n=yield(0,WM.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}zl.sendAndConfirmTransaction=VM;var Ns={},Kp={},Np={},cw={};Object.defineProperty(cw,"__esModule",{value:!0});var Wl={},as={},En={},Wr={},gc={};Object.defineProperty(gc,"__esModule",{value:!0});gc.baseIdl=void 0;gc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.baseIdl=void 0;Vl.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var $M=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jM=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qM=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$M(e,r,t);return jM(e,r),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getMarketplaceProgram=Wr.getGmLogsIDL=Wr.getGmIDL=void 0;const Tb=gt,GM=gc,HM=qM(Vl);function uw(r){const e=GM.baseIdl;return e.metadata.address=r.toBase58(),e}Wr.getGmIDL=uw;function YM(r){const e=HM.baseIdl;return e.metadata.address=r.toBase58(),e}Wr.getGmLogsIDL=YM;function JM({connection:r,programId:e}){const t=uw(e),n=new Tb.AnchorProvider(r,null,null);return new Tb.Program(t,e,n)}Wr.getMarketplaceProgram=JM;var Js=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(En,"__esModule",{value:!0});En.getSingleOrder=En.getOpenOrdersForPlayerAndAsset=En.getOpenOrdersForPlayerAndCurrency=En.getOpenOrdersForAsset=En.getOpenOrdersForCurrency=En.getOpenOrdersForPlayer=En.getAllOpenOrders=void 0;const Yn=gt,Qs=Wr;function QM(r,e){return Js(this,void 0,void 0,function*(){const t=new Yn.AnchorProvider(r,null,null),n=(0,Qs.getGmIDL)(e),i=new Yn.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}En.getAllOpenOrders=QM;function XM(r,e,t){return Js(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Qs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForPlayer=XM;function ZM(r,e,t){return Js(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Qs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForCurrency=ZM;function eC(r,e,t){return Js(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Qs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForAsset=eC;function tC(r,e,t,n){return Js(this,void 0,void 0,function*(){const i=new Yn.AnchorProvider(r,null,null),s=(0,Qs.getGmIDL)(n),a=new Yn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}En.getOpenOrdersForPlayerAndCurrency=tC;function nC(r,e,t,n){return Js(this,void 0,void 0,function*(){const i=new Yn.AnchorProvider(r,null,null),s=(0,Qs.getGmIDL)(n),a=new Yn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}En.getOpenOrdersForPlayerAndAsset=nC;function rC(r,e,t){return Js(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Qs.getGmIDL)(t);return yield new Yn.Program(i,t,n).account.orderAccount.fetch(e)})}En.getSingleOrder=rC;var nn={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.FEE_EXEMPT_SEED=Mn.OPEN_ORDERS_COUNTER=Mn.REGISTERED_CURRENCY_SEED=Mn.ORDER_VAULT_AUTH_SEED=Mn.ORDER_VAULT_SEED=Mn.MARKET_VARS_SEED=void 0;Mn.MARKET_VARS_SEED=Pe.Buffer.from("market-vars");Mn.ORDER_VAULT_SEED=Pe.Buffer.from("order-vault-account");Mn.ORDER_VAULT_AUTH_SEED=Pe.Buffer.from("order-vault-auth");Mn.REGISTERED_CURRENCY_SEED=Pe.Buffer.from("registered-currency");Mn.OPEN_ORDERS_COUNTER=Pe.Buffer.from("open-orders-counter");Mn.FEE_EXEMPT_SEED=Pe.Buffer.from("fee_exempt");var iC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),sC=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),oC=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&iC(e,r,t);return sC(e,r),e},cs=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(nn,"__esModule",{value:!0});nn.getAllFeeExemptAccounts=nn.getFeeExemptAccount=nn.getOpenOrdersCounter=nn.getAllRegisteredCurrencies=nn.getRegisteredCurrencyAccount=nn.getOrderVaultAuth=nn.getOrderVault=nn.getMarketVarsAccount=void 0;const tl=gt,aa=Bi,ca=oC(Mn),lw=Wr;function aC(r){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.MARKET_VARS_SEED],r)})}nn.getMarketVarsAccount=aC;function cC(r,e,t){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}nn.getOrderVault=cC;function uC(r,e){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}nn.getOrderVaultAuth=uC;function lC(r,e){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}nn.getRegisteredCurrencyAccount=lC;function fC(r,e){return cs(this,void 0,void 0,function*(){const t=new tl.AnchorProvider(r,null,null),n=(0,lw.getGmIDL)(e),i=new tl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}nn.getAllRegisteredCurrencies=fC;function dC(r,e,t){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}nn.getOpenOrdersCounter=dC;function hC(r,e){return cs(this,void 0,void 0,function*(){return aa.PublicKey.findProgramAddress([ca.FEE_EXEMPT_SEED,r.toBuffer()],e)})}nn.getFeeExemptAccount=hC;function pC(r,e){return cs(this,void 0,void 0,function*(){const t=new tl.AnchorProvider(r,null,null),n=(0,lw.getGmIDL)(e);return yield new tl.Program(n,e,t).account.feeReduction.all()})}nn.getAllFeeExemptAccounts=pC;var $n={},ua=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($n,"__esModule",{value:!0});$n.getRoyaltyReductionForStakingAccount=$n.getRoyaltyReductionForUserAndMint=$n.getRegisteredCurrencyInfoFromPubkey=$n.getRegisteredCurrencyAccountInfo=$n.getFeeExemptAccountInfo=$n.getMarketVarsAccountInfo=void 0;const nl=gt,Dp=nn,$l=Wr,Fh=vl;function gC(r,e){return ua(this,void 0,void 0,function*(){const t=(0,$l.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,Dp.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}$n.getMarketVarsAccountInfo=gC;function yC(r,e,t){return ua(this,void 0,void 0,function*(){const n=(0,$l.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,Dp.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}$n.getFeeExemptAccountInfo=yC;function mC(r,e,t){return ua(this,void 0,void 0,function*(){const n=(0,$l.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,Dp.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}$n.getRegisteredCurrencyAccountInfo=mC;function Up(r,e,t){return ua(this,void 0,void 0,function*(){return yield(0,$l.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}$n.getRegisteredCurrencyInfoFromPubkey=Up;function bC(r,e,t,n,i,s){return ua(this,void 0,void 0,function*(){let a=0;const u=yield Up(r,e,i),[f]=yield(0,Fh.getStakingAccount)(t,n,s),h=yield(0,Fh.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new nl.BN(0))){const d=u.royaltyTiers;let m=new nl.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}$n.getRoyaltyReductionForUserAndMint=bC;function vC(r,e,t,n,i){return ua(this,void 0,void 0,function*(){let s=0;const a=yield Up(r,e,i),u=yield(0,Fh.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new nl.BN(0))){const f=a.royaltyTiers;let h=new nl.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}$n.getRoyaltyReductionForStakingAccount=vC;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(En,r),t(nn,r),t($n,r),t(Mn,r)})(as);var yc={},Qn={},Qi={},_C=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.convertDecimalPriceToBn=Qi.initializeAtaForMint=Qi.getOrderSide=void 0;const wC=gt,SC=js,sh=pc,AC=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";Qi.getOrderSide=AC;function kC({mint:r,owner:e,connection:t}){return _C(this,void 0,void 0,function*(){const n=[],i=yield(0,SC.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(sh.Token.createAssociatedTokenAccountInstruction(sh.ASSOCIATED_TOKEN_PROGRAM_ID,sh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}Qi.initializeAtaForMint=kC;const IC=(r,e)=>new wC.BN(r*Math.pow(10,e));Qi.convertDecimalPriceToBn=IC;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Wr,r),t(Qi,r)})(Qn);var EC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(yc,"__esModule",{value:!0});yc.createOrderCounterInstruction=void 0;const OC=Qn;function PC({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return EC(this,void 0,void 0,function*(){return yield(0,OC.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}yc.createOrderCounterInstruction=PC;var TC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.createCancelOrderInstruction=void 0;const RC=gt,BC=as,xC=yc,Rb=Qn,MC=Lr;function CC({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return TC(this,void 0,void 0,function*(){const s=(0,Rb.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,Rb.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,MC.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof RC.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,BC.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,xC.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}Wl.createCancelOrderInstruction=CC;var $o={},fw=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($o,"__esModule",{value:!0});$o.createInitializeSellOrderInstruction=$o.createInitializeBuyOrderInstruction=void 0;const Lo=gt,dw=Qn,hw=Lr,pw=as,gw=yc,yw=Lr;function LC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return fw(this,void 0,void 0,function*(){const f=(0,dw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,hw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Lo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,pw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,gw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Lo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,yw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeBuy(n,new Lo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}$o.createInitializeBuyOrderInstruction=LC;function KC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return fw(this,void 0,void 0,function*(){const f=(0,dw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,hw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Lo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,pw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,gw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Lo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,yw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeSell(n,new Lo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}$o.createInitializeSellOrderInstruction=KC;var jl={},NC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(jl,"__esModule",{value:!0});jl.createDeregisterCurrencyInstruction=void 0;const DC=Qn;function UC({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return NC(this,void 0,void 0,function*(){const s=[yield(0,DC.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}jl.createDeregisterCurrencyInstruction=UC;var ql={},Gl={},Hl={},mw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",M=d+"Division by zero",A={},R=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var V=this;if(!(V instanceof E))return N===R?Y():new E(N);if(N instanceof E)V.s=N.s,V.e=N.e,V.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(V,N)}V.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var V,J,K;if(!C.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(V=N.indexOf("."))>-1&&(N=N.replace(".","")),(J=N.search(/e/i))>0?(V<0&&(V=J),V+=+N.slice(J+1),N=N.substring(0,J)):V<0&&(V=N.length),K=N.length,J=0;J<K&&N.charAt(J)=="0";)++J;if(J==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=V-J-1,E.c=[],V=0;J<=K;)E.c[V++]=+N.charAt(J++)}return E}function oe(E,N,V,J){var K=E.c;if(V===R&&(V=E.constructor.RM),V!==0&&V!==1&&V!==2&&V!==3)throw Error(O);if(N<1)J=V===3&&(J||!!K[0])||N===0&&(V===1&&K[0]>=5||V===2&&(K[0]>5||K[0]===5&&(J||K[1]!==R))),K.length=1,J?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(J=V===1&&K[N]>=5||V===2&&(K[N]>5||K[N]===5&&(J||K[N+1]!==R||K[N-1]&1))||V===3&&(J||!!K[0]),K.length=N,J){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,V){var J=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(J<0?"e":"e+")+J;else if(J<0){for(;++J;)K="0"+K;K="0."+K}else if(J>0)if(++J>j)for(J-=j;J--;)K+="0";else J<j&&(K=K.slice(0,J)+"."+K.slice(J));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&V?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,V=this,J=V.c,K=(E=new V.constructor(E)).c,j=V.s,te=E.s,T=V.e,W=E.e;if(!J[0]||!K[0])return J[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=W)return T>W^N?1:-1;for(te=(T=J.length)<(W=K.length)?T:W,j=-1;++j<te;)if(J[j]!=K[j])return J[j]>K[j]^N?1:-1;return T==W?0:T>W^N?1:-1},A.div=function(E){var N=this,V=N.constructor,J=N.c,K=(E=new V(E)).c,j=N.s==E.s?1:-1,te=V.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(M);if(!J[0])return E.s=j,E.c=[E.e=0],E;var T,W,X,Be,ye,Ie=K.slice(),$t=T=K.length,jt=J.length,_e=J.slice(0,T),We=_e.length,Qt=E,cn=Qt.c=[],kt=0,ft=te+(Qt.e=N.e-E.e)+1;for(Qt.s=j,j=ft<0?0:ft,Ie.unshift(0);We++<T;)_e.push(0);do{for(X=0;X<10;X++){if(T!=(We=_e.length))Be=T>We?1:-1;else for(ye=-1,Be=0;++ye<T;)if(K[ye]!=_e[ye]){Be=K[ye]>_e[ye]?1:-1;break}if(Be<0){for(W=We==T?K:Ie;We;){if(_e[--We]<W[We]){for(ye=We;ye&&!_e[--ye];)_e[ye]=9;--_e[ye],_e[We]+=10}_e[We]-=W[We]}for(;!_e[0];)_e.shift()}else break}cn[kt++]=Be?X:++X,_e[0]&&Be?_e[We]=J[$t]||0:_e=[J[$t]]}while(($t++<jt||_e[0]!==R)&&j--);return!cn[0]&&kt!=1&&(cn.shift(),Qt.e--,ft--),kt>ft&&oe(Qt,ft,V.RM,_e[0]!==R),Qt},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,V,J,K,j=this,te=j.constructor,T=j.s,W=(E=new te(E)).s;if(T!=W)return E.s=-W,j.plus(E);var X=j.c.slice(),Be=j.e,ye=E.c,Ie=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-W:X[0]?E=new te(j):E.s=1,E;if(T=Be-Ie){for((K=T<0)?(T=-T,J=X):(Ie=Be,J=ye),J.reverse(),W=T;W--;)J.push(0);J.reverse()}else for(V=((K=X.length<ye.length)?X:ye).length,T=W=0;W<V;W++)if(X[W]!=ye[W]){K=X[W]<ye[W];break}if(K&&(J=X,X=ye,ye=J,E.s=-E.s),(W=(V=ye.length)-(N=X.length))>0)for(;W--;)X[N++]=0;for(W=N;V>T;){if(X[--V]<ye[V]){for(N=V;N&&!X[--N];)X[N]=9;--X[N],X[V]+=10}X[V]-=ye[V]}for(;X[--W]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ie;return X[0]||(E.s=1,X=[Ie=0]),E.c=X,E.e=Ie,E},A.mod=function(E){var N,V=this,J=V.constructor,K=V.s,j=(E=new J(E)).s;if(!E.c[0])throw Error(M);return V.s=E.s=1,N=E.cmp(V)==1,V.s=K,E.s=j,N?new J(V):(K=J.DP,j=J.RM,J.DP=J.RM=0,V=V.div(E),J.DP=K,J.RM=j,this.minus(V.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,V,J,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,W=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-W){for(N>0?(W=te,J=X):(N=-N,J=T),J.reverse();N--;)J.push(0);J.reverse()}for(T.length-X.length<0&&(J=X,X=T,T=J),N=X.length,V=0;N;T[N]%=10)V=(T[--N]=T[N]+X[N]+V)/10|0;for(V&&(T.unshift(V),++W),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=W,E},A.pow=function(E){var N=this,V=new N.constructor("1"),J=V,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(J=J.times(N)),E>>=1,!!E;)N=N.times(N);return K?V.div(J):J},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,V,J=this,K=J.constructor,j=J.s,te=J.e,T=new K("0.5");if(!J.c[0])return new K(J);if(j<0)throw Error(d+"No square root");j=Math.sqrt(J+""),j===0||j===1/0?(N=J.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do V=E,E=T.times(V.plus(J.div(V)));while(V.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,V=this,J=V.constructor,K=V.c,j=(E=new J(E)).c,te=K.length,T=j.length,W=V.e,X=E.e;if(E.s=V.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=W+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(W=T;W--;){for(T=0,X=te+W;X>W;)T=N[X]+j[W]*K[X-W-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),W=N.length;!N[--W];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),++E,N);V.c.length<E;)V.c.push(0)}return de(V,!0,!!J)},A.toFixed=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),E+V.e+1,N),E=E+V.e+1;V.c.length<E;)V.c.push(0)}return de(V,!1,!!J)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},A.toPrecision=function(E,N){var V=this,J=V.constructor,K=V.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(V=oe(new J(V),E,N);V.c.length<E;)V.c.push(0)}return de(V,E<=V.e||V.e<=J.NE||V.e>=J.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(z)})(mw);function Ce(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var FC={};function Fp(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:FC}var bw=Object.assign,rl=Object.getOwnPropertyDescriptor,ai=Object.defineProperty,mc=Object.prototype,zh=[];Object.freeze(zh);var zp={};Object.freeze(zp);var zC=typeof Proxy<"u",WC=Object.toString();function vw(){zC||Ce("Proxy not available")}function _w(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Po=function(){};function pr(r){return typeof r=="function"}function Ds(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Yl(r){return r!==null&&typeof r=="object"}function Ri(r){if(!Yl(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===WC}function ww(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function bc(r,e,t){ai(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Sw(r,e,t){ai(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function us(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return Yl(n)&&n[t]===!0}}function la(r){return r instanceof Map}function vc(r){return r instanceof Set}var Aw=typeof Object.getOwnPropertySymbols<"u";function VC(r){var e=Object.keys(r);if(!Aw)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return mc.propertyIsEnumerable.call(r,n)})):e}var jo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Aw?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function kw(r){return r===null?null:typeof r=="object"?""+r:r}function Pi(r,e){return mc.hasOwnProperty.call(r,e)}var $C=Object.getOwnPropertyDescriptors||function(e){var t={};return jo(e).forEach(function(n){t[n]=rl(e,n)}),t};function Bb(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,GC(n.key),n)}}function Wp(r,e,t){return e&&Bb(r.prototype,e),t&&Bb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function rs(){return rs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},rs.apply(this,arguments)}function Iw(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Wh(r,e)}function Wh(r,e){return Wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wh(r,e)}function oh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function jC(r,e){if(!!r){if(typeof r=="string")return xb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xb(r,e)}}function xb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function To(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=jC(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qC(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function GC(r){var e=qC(r,"string");return typeof e=="symbol"?e:String(e)}var oi=Symbol("mobx-stored-annotations");function Vr(r){function e(t,n){if(_c(n))return r.decorate_20223_(t,n);fa(t,n,r)}return Object.assign(e,r)}function fa(r,e,t){Pi(r,oi)||bc(r,oi,rs({},r[oi])),nL(t)||(r[oi][e]=t)}function HC(r){return Pi(r,oi)||bc(r,oi,rs({},r[oi])),r[oi]}function _c(r){return typeof r=="object"&&typeof r.kind=="string"}var Ae=Symbol("mobx administration"),wc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=nt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return qw(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),jn(),Gw(this),qn()},e.toString=function(){return this.name_},r}(),Vp=us("Atom",wc);function Jl(r,e,t){e===void 0&&(e=Po),t===void 0&&(t=Po);var n=new wc(r);return e!==Po&&n0(n,e),t!==Po&&kc(n,t),n}function YC(r,e){return r===e}function JC(r,e){return Qp(r,e)}function QC(r,e){return Qp(r,e,1)}function XC(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Us={identity:YC,structural:JC,default:XC,shallow:QC};function Fs(r,e,t){return sf(r)?r:Array.isArray(r)?Rt.array(r,{name:t}):Ri(r)?Rt.object(r,void 0,{name:t}):la(r)?Rt.map(r,{name:t}):vc(r)?Rt.set(r,{name:t}):typeof r=="function"&&!ls(r)&&!Yo(r)?ww(r)?Vs(r):Ho(t,r):r}function ZC(r,e,t){if(r==null||sn(r)||fn(r)||an(r)||Ln(r))return r;if(Array.isArray(r))return Rt.array(r,{name:t,deep:!1});if(Ri(r))return Rt.object(r,void 0,{name:t,deep:!1});if(la(r))return Rt.map(r,{name:t,deep:!1});if(vc(r))return Rt.set(r,{name:t,deep:!1})}function Ql(r){return r}function eL(r,e){return Qp(r,e)?e:r}var Ew="override",tL=Vr({annotationType_:Ew,make_:rL,extend_:iL,decorate_20223_:sL});function nL(r){return r.annotationType_===Ew}function rL(r,e){return 0}function iL(r,e,t,n){Ce("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function sL(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Sc(r,e){return{annotationType_:r,options_:e,make_:oL,extend_:aL,decorate_20223_:cL}}function oL(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(ls(t.value))return 1;var s=Ow(r,this,e,t,!1);return ai(n,e,s),2}function aL(r,e,t,n){var i=Ow(r,this,e,t);return r.defineProperty_(e,i,n)}function cL(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return is((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){fa(this,n,s)});return}if(t=="method"){var u;return ls(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Ce("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function uL(r,e,t,n){e.annotationType_,n.value}function Ow(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),uL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:is((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function Pw(r,e){return{annotationType_:r,options_:e,make_:lL,extend_:fL,decorate_20223_:dL}}function lL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Pi(r.target_,e)||!Yo(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(Yo(t.value))return 1;var s=Tw(r,this,e,t,!1,!1);return ai(n,e,s),2}function fL(r,e,t,n){var i,s=Tw(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function dL(r,e){var t,n=e.name,i=e.addInitializer;return Yo(r)||(r=Vs(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function hL(r,e,t,n){e.annotationType_,n.value}function Tw(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),hL(r,e,t,n);var a=n.value;if(Yo(a)||(a=Vs(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function $p(r,e){return{annotationType_:r,options_:e,make_:pL,extend_:gL,decorate_20223_:yL}}function pL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function gL(r,e,t,n){return mL(r,this,e,t),r.defineComputedProperty_(e,rs({},this.options_,{get:t.get,set:t.set}),n)}function yL(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=Zs(this)[Ae],a=rs({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new Go(a))}),function(){return this[Ae].getObservablePropValue_(n)}}function mL(r,e,t,n){e.annotationType_,n.get}function Xl(r,e){return{annotationType_:r,options_:e,make_:bL,extend_:vL,decorate_20223_:_L}}function bL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function vL(r,e,t,n){var i,s;return wL(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Fs,n)}function _L(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=Zs(u)[Ae],I=new Xi(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Fs,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Ae].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[Ae].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function wL(r,e,t,n){e.annotationType_}var SL="true",AL=Rw();function Rw(r){return{annotationType_:SL,options_:r,make_:kL,extend_:IL,decorate_20223_:EL}}function kL(r,e,t,n){var i,s;if(t.get)return Mr.make_(r,e,t,n);if(t.set){var a=is(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(ai(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(ww(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?Vs.bound:Vs;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?Ho.bound:Ho;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?Rt.ref:Rt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function IL(r,e,t,n){var i,s;if(t.get)return Mr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:is(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?Rt.ref:Rt;return u.extend_(r,e,t,n)}function EL(r,e){Ce("'"+this.annotationType_+"' cannot be used as a decorator")}var OL="observable",PL="observable.ref",TL="observable.shallow",RL="observable.struct",Bw={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Bw);function Eu(r){return r||Bw}var Vh=Xl(OL),BL=Xl(PL,{enhancer:Ql}),xL=Xl(TL,{enhancer:ZC}),ML=Xl(RL,{enhancer:eL}),xw=Vr(Vh);function Ou(r){return r.deep===!0?Fs:r.deep===!1?Ql:LL(r.defaultDecorator)}function CL(r){var e;return r?(e=r.defaultDecorator)!=null?e:Rw(r):void 0}function LL(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Fs}function Mw(r,e,t){if(_c(e))return Vh.decorate_20223_(r,e);if(Ds(e)){fa(r,e,Vh);return}return sf(r)?r:Ri(r)?Rt.object(r,e,t):Array.isArray(r)?Rt.array(r,e):la(r)?Rt.map(r,e):vc(r)?Rt.set(r,e):typeof r=="object"&&r!==null?r:Rt.box(r,e)}bw(Mw,xw);var KL={box:function(e,t){var n=Eu(t);return new Xi(e,Ou(n),n.name,!0,n.equals)},array:function(e,t){var n=Eu(t);return(fe.useProxies===!1||n.proxy===!1?GK:NK)(e,Ou(n),n.name)},map:function(e,t){var n=Eu(t);return new of(e,Ou(n),n.name)},set:function(e,t){var n=Eu(t);return new Yp(e,Ou(n),n.name)},object:function(e,t,n){return ds(function(){return nf(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?Zs({},n):MK({},n),e,t)})},ref:Vr(BL),shallow:Vr(xL),deep:xw,struct:Vr(ML)},Rt=bw(Mw,KL),Cw="computed",NL="computed.struct",$h=$p(Cw),DL=$p(NL,{equals:Us.structural}),Mr=function(e,t){if(_c(t))return $h.decorate_20223_(e,t);if(Ds(t))return fa(e,t,$h);if(Ri(e))return Vr($p(Cw,e));var n=Ri(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Go(n)};Object.assign(Mr,$h);Mr.struct=Vr(DL);var Mb,Cb,il=0,UL=1,FL=(Mb=(Cb=rl(function(){},"name"))==null?void 0:Cb.configurable)!=null?Mb:!1,Lb={value:"action",configurable:!0,writable:!1,enumerable:!1};function is(r,e,t,n){t===void 0&&(t=!1);function i(){return Lw(r,t,e,n||this,arguments)}return i.isMobxAction=!0,FL&&(Lb.value=r,ai(i,"name",Lb)),i}function Lw(r,e,t,n,i){var s=Kw(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{Nw(s)}}function Kw(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;jn();var f=fe.allowStateChanges;u&&(Xs(),f=Zl(!0));var h=tf(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:UL++,parentActionId_:il};return il=d.actionId_,d}function Nw(r){il!==r.actionId_&&Ce(30),il=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),ef(r.prevAllowStateChanges_),Ko(r.prevAllowStateReads_),qn(),r.runAsAction_&&Ti(r.prevDerivation_),fe.suppressReactionErrors=!1}function qo(r,e){var t=Zl(r);try{return e()}finally{ef(t)}}function Zl(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function ef(r){fe.allowStateChanges=r}var Dw;Dw=Symbol.toPrimitive;var Xi=function(r){Iw(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Us.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Br(this)){var s=xr(this,{object:this,type:ci,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),$r(this)&&jr(this,{type:ci,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Ic(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:ci,newValue:this.value_,oldValue:void 0}),Ec(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return kw(this.get())},t[Dw]=function(){return this.valueOf()},e}(wc),jp=us("ObservableValue",Xi),Uw;Uw=Symbol.toPrimitive;var Go=function(){function r(t){this.dependenciesState_=nt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=nt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ol(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=sl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ce(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=is("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Us.structural:Us.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){YL(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ce(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)jh(this)&&(this.warnAboutUntrackedRead_(),jn(),this.value_=this.computeValue_(!1),qn());else if(qw(this),jh(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&HL(this),fe.trackingContext=n}var i=this.value_;if($u(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ce(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ce(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===nt.NOT_TRACKING_,s=this.computeValue_(!0),a=i||$u(n)||$u(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=Zl(!1),s;if(n)s=Fw(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new ol(a)}return ef(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(qh(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Ws(function(){var f=s.get();if(!a||i){var h=Xs();n({observableKind:"computed",debugObjectName:s.name_,type:ci,object:s,newValue:f,oldValue:u}),Ti(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return kw(this.get())},e[Uw]=function(){return this.valueOf()},r}(),zs=us("ComputedValue",Go),nt;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(nt||(nt={}));var sl;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(sl||(sl={}));var ol=function(e){this.cause=void 0,this.cause=e};function $u(r){return r instanceof ol}function jh(r){switch(r.dependenciesState_){case nt.UP_TO_DATE_:return!1;case nt.NOT_TRACKING_:case nt.STALE_:return!0;case nt.POSSIBLY_STALE_:{for(var e=tf(!0),t=Xs(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(zs(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Ti(t),Ko(e),!0}if(r.dependenciesState_===nt.STALE_)return Ti(t),Ko(e),!0}}return zw(r),Ti(t),Ko(e),!1}}}function Ac(){return fe.trackingDerivation!==null}function Fw(r,e,t){var n=tf(!0);zw(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new ol(a)}return fe.inBatch--,fe.trackingDerivation=i,zL(r),Ko(n),s}function zL(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=nt.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&$w(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,GL(h,r))}n!==nt.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function qh(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)$w(e[t],r);r.dependenciesState_=nt.NOT_TRACKING_}function qp(r){var e=Xs();try{return r()}finally{Ti(e)}}function Xs(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function Ti(r){fe.trackingDerivation=r}function tf(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function Ko(r){fe.allowStateReads=r}function zw(r){if(r.dependenciesState_!==nt.UP_TO_DATE_){r.dependenciesState_=nt.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=nt.UP_TO_DATE_}}var WL=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Ga=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},ju=!0,Ww=!1,fe=function(){var r=Fp();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(ju=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new Ga().version&&(ju=!1),ju?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new Ga):(setTimeout(function(){Ww||Ce(35)},1),new Ga)}();function VL(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Ce(36),Ww=!0,ju){var r=Fp();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new Ga}}function Vw(){return fe}function $L(){var r=new Ga;for(var e in r)WL.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function jL(r){return r.observers_&&r.observers_.size>0}function qL(r){return r.observers_}function GL(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function $w(r,e){r.observers_.delete(e),r.observers_.size===0&&jw(r)}function jw(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function jn(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function qn(){if(--fe.inBatch===0){Hw();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof Go&&t.suspend_())}fe.pendingUnobservations=[]}}function qw(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&jw(r),!1)}function Gw(r){r.lowestObserverState_!==nt.STALE_&&(r.lowestObserverState_=nt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=nt.STALE_}))}function HL(r){r.lowestObserverState_!==nt.STALE_&&(r.lowestObserverState_=nt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.POSSIBLY_STALE_?e.dependenciesState_=nt.STALE_:e.dependenciesState_===nt.UP_TO_DATE_&&(r.lowestObserverState_=nt.UP_TO_DATE_)}))}function YL(r){r.lowestObserverState_===nt.UP_TO_DATE_&&(r.lowestObserverState_=nt.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.UP_TO_DATE_&&(e.dependenciesState_=nt.POSSIBLY_STALE_,e.onBecomeStale_())}))}var rc=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=nt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=sl.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),Hw())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){jn(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,jh(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,qn()}},e.track=function(n){if(!this.isDisposed_){jn(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=Fw(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&qh(this),$u(s)&&this.reportExceptionInDerivation_(s.cause),qn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(jn(),qh(this),qn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Ae]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function JL(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var QL=100,Gh=function(e){return e()};function Hw(){fe.inBatch>0||fe.isRunningReactions||Gh(XL)}function XL(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===QL&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var al=us("Reaction",rc);function ZL(r){var e=Gh;Gh=function(n){return r(function(){return e(n)})}}function Ha(){return!1}function Yw(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Jw="action",eK="action.bound",Qw="autoAction",tK="autoAction.bound",Xw="<unnamed action>",Hh=Sc(Jw),nK=Sc(eK,{bound:!0}),Yh=Sc(Qw,{autoAction:!0}),rK=Sc(tK,{autoAction:!0,bound:!0});function Zw(r){var e=function(n,i){if(pr(n))return is(n.name||Xw,n,r);if(pr(i))return is(n,i,r);if(_c(i))return(r?Yh:Hh).decorate_20223_(n,i);if(Ds(i))return fa(n,i,r?Yh:Hh);if(Ds(n))return Vr(Sc(r?Qw:Jw,{name:n,autoAction:r}))};return e}var Ut=Zw(!1);Object.assign(Ut,Hh);var Ho=Zw(!0);Object.assign(Ho,Yh);Ut.bound=Vr(nK);Ho.bound=Vr(rK);function ic(r){return Lw(r.name||Xw,!1,r,this,void 0)}function ls(r){return pr(r)&&r.isMobxAction===!0}function Ws(r,e){var t,n,i,s,a;e===void 0&&(e=zp);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new rc(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=e0(e),m=!1;h=new rc(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var iK=function(e){return e()};function e0(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:iK}function t0(r,e,t){var n,i,s,a;t===void 0&&(t=zp);var u=(n=t.name)!=null?n:"Reaction",f=Ut(u,t.onError?sK(t.onError,e):e),h=!t.scheduler&&!t.delay,d=e0(t),m=!0,I=!1,O,M,A=t.compareStructural?Us.structural:t.equals||Us.default,R=new rc(u,function(){m||h?C():I||(I=!0,d(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=qo(!1,function(){return r(R)});Y=m||!A(O,ae),M=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,M,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function sK(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var oK="onBO",aK="onBUO";function n0(r,e,t){return r0(oK,r,e,t)}function kc(r,e,t){return r0(aK,r,e,t)}function r0(r,e,t,n){var i=typeof n=="function"?ui(e,t):ui(e),s=pr(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var cK="never",Pu="always",uK="observed";function lK(r){r.isolateGlobalState===!0&&VL();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===Pu?!0:e===cK?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===Pu?Pu:t===uK;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===Pu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&ZL(r.reactionScheduler)}function nf(r,e,t,n){var i=$C(e);return ds(function(){var s=Zs(r,n)[Ae];jo(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function fK(r,e){return i0(ui(r,e))}function i0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=hK(r.observing_).map(i0)),e}function dK(r,e){return s0(ui(r,e))}function s0(r){var e={name:r.name_};return jL(r)&&(e.observers=Array.from(qL(r)).map(s0)),e}function hK(r){return Array.from(new Set(r))}var pK=0;function rf(){this.message="FLOW_CANCELLED"}rf.prototype=Object.create(Error.prototype);function gK(r){return r instanceof rf}var ah=Pw("flow"),yK=Pw("flow.bound",{bound:!0}),Vs=Object.assign(function(e,t){if(_c(t))return ah.decorate_20223_(e,t);if(Ds(t))return fa(e,t,ah);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++pK,d=Ut(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(M,A){var R=0;m=A;function C(oe){I=void 0;var de;try{de=Ut(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return A(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=Ut(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return A(E)}ae(de)}function ae(oe){if(pr(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?M(oe.value):(I=Promise.resolve(oe.value),I.then(C,Y))}C(void 0)});return O.cancel=Ut(i+" - runid: "+h+" - cancel",function(){try{I&&Kb(I);var M=d.return(void 0),A=Promise.resolve(M.value);A.then(Po,Po),Kb(A),m(new rf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},ah);Vs.bound=Vr(yK);function Kb(r){pr(r.cancel)&&r.cancel()}function mK(r){return r}function Yo(r){return(r==null?void 0:r.isMobXFlow)===!0}function bK(r,e,t){var n;return an(r)||fn(r)||jp(r)?n=li(r):sn(r)&&(n=li(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function vK(r,e,t){return pr(t)?wK(r,e,t):_K(r,e)}function _K(r,e){return li(r).intercept_(e)}function wK(r,e,t){return li(r,e).intercept_(t)}function o0(r,e){if(e===void 0)return zs(r);if(sn(r)===!1||!r[Ae].values_.has(e))return!1;var t=ui(r,e);return zs(t)}function a0(r){return o0(r)}function qu(r,e){return o0(r,e)}function c0(r,e){return r?e!==void 0?sn(r)?r[Ae].values_.has(e):!1:sn(r)||!!r[Ae]||Vp(r)||al(r)||zs(r):!1}function sf(r){return c0(r)}function SK(r,e){return c0(r,e)}function Jo(r){if(sn(r))return r[Ae].keys_();if(an(r)||Ln(r))return Array.from(r.keys());if(fn(r))return r.map(function(e,t){return t});Ce(5)}function u0(r){if(sn(r))return Jo(r).map(function(e){return r[e]});if(an(r))return Jo(r).map(function(e){return r.get(e)});if(Ln(r))return Array.from(r.values());if(fn(r))return r.slice();Ce(6)}function l0(r){if(sn(r))return Jo(r).map(function(e){return[e,r[e]]});if(an(r))return Jo(r).map(function(e){return[e,r.get(e)]});if(Ln(r))return Array.from(r.entries());if(fn(r))return r.map(function(e,t){return[t,e]});Ce(7)}function f0(r,e,t){if(arguments.length===2&&!Ln(r)){jn();var n=e;try{for(var i in n)f0(r,i,n[i])}finally{qn()}return}sn(r)?r[Ae].set_(e,t):an(r)?r.set(e,t):Ln(r)?r.add(e):fn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ce("Invalid index: '"+e+"'"),jn(),e>=r.length&&(r.length=e+1),r[e]=t,qn()):Ce(8)}function AK(r,e){sn(r)?r[Ae].delete_(e):an(r)||Ln(r)?r.delete(e):fn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ce(9)}function d0(r,e){if(sn(r))return r[Ae].has_(e);if(an(r))return r.has(e);if(Ln(r))return r.has(e);if(fn(r))return e>=0&&e<r.length;Ce(10)}function kK(r,e){if(!!d0(r,e)){if(sn(r))return r[Ae].get_(e);if(an(r))return r.get(e);if(fn(r))return r[e];Ce(11)}}function IK(r,e,t){if(sn(r))return r[Ae].defineProperty_(e,t);Ce(39)}function h0(r){if(sn(r))return r[Ae].ownKeys_();Ce(38)}function Qo(r,e,t,n){return pr(t)?OK(r,e,t,n):EK(r,e,t)}function EK(r,e,t){return li(r).observe_(e,t)}function OK(r,e,t,n){return li(r,e).observe_(t,n)}function Tu(r,e,t){return r.set(e,t),t}function So(r,e){if(r==null||typeof r!="object"||r instanceof Date||!sf(r))return r;if(jp(r)||zs(r))return So(r.get(),e);if(e.has(r))return e.get(r);if(fn(r)){var t=Tu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=So(a,e)}),t}if(Ln(r)){var n=Tu(e,r,new Set);return r.forEach(function(a){n.add(So(a,e))}),n}if(an(r)){var i=Tu(e,r,new Map);return r.forEach(function(a,u){i.set(u,So(a,e))}),i}else{var s=Tu(e,r,{});return h0(r).forEach(function(a){mc.propertyIsEnumerable.call(r,a)&&(s[a]=So(r[a],e))}),s}}function PK(r,e){return So(r,new Map)}function TK(){}function Rr(r,e){e===void 0&&(e=void 0),jn();try{return r.apply(e)}finally{qn()}}function RK(r,e,t){return arguments.length===1||e&&typeof e=="object"?BK(r,e):p0(r,e,t||{})}function p0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Ae].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=is("When-effect",e),a=Ws(function(u){var f=qo(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function BK(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=p0(r,a,rs({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function bo(r){return r[Ae]}var xK={has:function(e,t){return bo(e).has_(t)},get:function(e,t){return bo(e).get_(t)},set:function(e,t,n){var i;return Ds(t)?(i=bo(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return Ds(t)?(n=bo(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=bo(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return bo(e).ownKeys_()},preventExtensions:function(e){Ce(13)}};function MK(r,e){var t,n;return vw(),r=Zs(r,e),(n=(t=r[Ae]).proxy_)!=null?n:t.proxy_=new Proxy(r,xK)}function Br(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Ic(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),_w(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function xr(r,e){var t=Xs();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ce(14),!!e);i++);return e}finally{Ti(t)}}function $r(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Ec(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),_w(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function jr(r,e){var t=Xs(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Ti(t)}}function Gp(r,e,t){return ds(function(){var n,i=Zs(r,t)[Ae];(n=e)!=null||(e=HC(r)),jo(e).forEach(function(s){return i.make_(s,e[s])})}),r}var ch=Symbol("mobx-keys");function CK(r,e,t){return Ri(r)?nf(r,r,e,t):(ds(function(){var n=Zs(r,t)[Ae];if(!r[ch]){var i=Object.getPrototypeOf(r),s=new Set([].concat(jo(r),jo(i)));s.delete("constructor"),s.delete(Ae),bc(i,ch,s)}r[ch].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var Nb="splice",ci="update",LK=1e4,KK={get:function(e,t){var n=e[Ae];return t===Ae?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Pi(cl,t)?cl[t]:e[t]},set:function(e,t,n){var i=e[Ae];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ce(15)}},Hp=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new wc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return Ic(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ec(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ce("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ce(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&A0(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=zh),Br(this)){var f=xr(this,{object:this.proxy_,type:Nb,index:n,removedCount:i,added:s});if(!f)return zh;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<LK){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&Ha(),u=$r(this),f=u||a?{observableKind:"array",object:this.proxy_,type:ci,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&jr(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&Ha(),u=$r(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Nb,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&jr(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ce(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Br(this)){var u=xr(this,{type:ci,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function NK(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),vw(),ds(function(){var i=new Hp(t,e,n,!1);Sw(i.values_,Ae,i);var s=new Proxy(i.values_,KK);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var cl={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ae];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Ae];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Ae].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ae].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Ce(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Ce(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ae],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};on("concat",xi);on("flat",xi);on("includes",xi);on("indexOf",xi);on("join",xi);on("lastIndexOf",xi);on("slice",xi);on("toString",xi);on("toLocaleString",xi);on("every",fs);on("filter",fs);on("find",fs);on("findIndex",fs);on("flatMap",fs);on("forEach",fs);on("map",fs);on("some",fs);on("reduce",g0);on("reduceRight",g0);function on(r,e){typeof Array.prototype[r]=="function"&&(cl[r]=e(r))}function xi(r){return function(){var e=this[Ae];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function fs(r){return function(e,t){var n=this,i=this[Ae];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function g0(r){return function(){var e=this,t=this[Ae];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var DK=us("ObservableArrayAdministration",Hp);function fn(r){return Yl(r)&&DK(r[Ae])}var y0,m0,UK={},Yi="add",ul="delete";y0=Symbol.iterator;m0=Symbol.toStringTag;var of=function(){function r(t,n,i){var s=this;n===void 0&&(n=Fs),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ae]=UK,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,pr(Map)||Ce(18),ds(function(){s.keysAtom_=Jl("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new Xi(this.has_(n),Ql,"ObservableMap.key?",!1);this.hasMap_.set(n,a),kc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Br(this)){var a=xr(this,{type:s?ci:Yi,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Br(this)){var s=xr(this,{type:ul,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=Ha(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:ul,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Rr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&jr(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=Ha(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:ci,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&jr(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Rr(function(){var h,d=new Xi(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=Ha(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:Yi,object:this,name:n,newValue:i}:null;u&&jr(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return sc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return sc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[y0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=To(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return an(n)&&(n=new Map(n)),Rr(function(){Ri(n)?VC(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):la(n)?(n.constructor!==Map&&Ce(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ce(20,n)}),this},e.clear=function(){var n=this;Rr(function(){qp(function(){for(var i=To(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Rr(function(){for(var s=FK(n),a=new Map,u=!1,f=To(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=To(s.entries()),M;!(M=O()).done;){var A=M.value,R=A[0],C=A[1],Y=i.data_.has(R);if(i.set(R,C),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Ec(this,n)},e.intercept_=function(n){return Ic(this,n)},Wp(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:m0,get:function(){return"Map"}}]),r}(),an=us("ObservableMap",of);function FK(r){if(la(r)||an(r))return r;if(Array.isArray(r))return new Map(r);if(Ri(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ce(21,r)}var b0,v0,zK={};b0=Symbol.iterator;v0=Symbol.toStringTag;var Yp=function(){function r(t,n,i){var s=this;n===void 0&&(n=Fs),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ae]=zK,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,pr(Set)||Ce(22),this.enhancer_=function(a,u){return n(a,u,i)},ds(function(){s.atom_=Jl(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Rr(function(){qp(function(){for(var i=To(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=To(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Br(this)){var s=xr(this,{type:Yi,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Rr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=$r(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:Yi,object:this,newValue:n}:null;u&&jr(this,f)}return this},e.delete=function(n){var i=this;if(Br(this)){var s=xr(this,{type:ul,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=$r(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:ul,object:this,oldValue:n}:null;return Rr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&jr(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return sc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return sc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Ln(n)&&(n=new Set(n)),Rr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):vc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ce("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Ec(this,n)},e.intercept_=function(n){return Ic(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[b0]=function(){return this.values()},Wp(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:v0,get:function(){return"Set"}}]),r}(),Ln=us("ObservableSet",Yp),Db=Object.create(null),Ub="remove",_0=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=AL),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new wc("ObservableObject.keys"),this.isPlainObject_=Ri(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof Go)return s.set(i),!0;if(Br(this)){var a=xr(this,{type:ci,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=$r(this),f=!1,h=u||f?{type:ci,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&jr(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Pi(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Pi(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Xi(n in this.target_,Ql,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[oi])!=null&&s[n])return;Ce(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==mc;){var u=rl(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}zb(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&zb(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{jn();var a=this.delete_(n);if(!a)return a;if(Br(this)){var u=xr(this,{object:this.proxy_||this.target_,name:n,type:Yi,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=rs({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else ai(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{qn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{jn();var u=this.delete_(n);if(!u)return u;if(Br(this)){var f=xr(this,{object:this.proxy_||this.target_,name:n,type:Yi,newValue:i});if(!f)return null;i=f.newValue}var h=Fb(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else ai(this.target_,n,d);var m=new Xi(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{qn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{jn();var a=this.delete_(n);if(!a)return a;if(Br(this)){var u=xr(this,{object:this.proxy_||this.target_,name:n,type:Yi,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=Fb(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else ai(this.target_,n,h);this.values_.set(n,new Go(i)),this.notifyPropertyAddition_(n,void 0)}finally{qn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Pi(this.target_,n))return!0;if(Br(this)){var s=xr(this,{object:this.proxy_||this.target_,name:n,type:Ub});if(!s)return null}try{var a,u;jn();var f=$r(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=rl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof Xi&&(m=d.value_),Gw(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:Ub,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&jr(this,O)}}finally{qn()}return!0},e.observe_=function(n,i){return Ec(this,n)},e.intercept_=function(n){return Ic(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=$r(this),f=!1;if(u||f){var h=u||f?{type:Yi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&jr(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),jo(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function Zs(r,e){var t;if(Pi(r,Ae))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new _0(r,new Map,String(n),CL(e));return bc(r,Ae,i),r}var WK=us("ObservableObjectAdministration",_0);function Fb(r){return Db[r]||(Db[r]={get:function(){return this[Ae].getObservablePropValue_(r)},set:function(t){return this[Ae].setObservablePropValue_(r,t)}})}function sn(r){return Yl(r)?WK(r[Ae]):!1}function zb(r,e,t){var n;(n=r.target_[oi])==null||delete n[t]}var VK=S0(0),$K=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),uh=0,w0=function(){};function jK(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}jK(w0,Array.prototype);var Jp=function(r,e,t){Iw(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,ds(function(){var d=new Hp(u,a,f,!0);d.proxy_=oh(h),Sw(oh(h),Ae,d),s&&s.length&&h.spliceWithArray(0,0,s),$K&&Object.defineProperty(oh(h),"0",VK)}),h}var i=n.prototype;return i.concat=function(){this[Ae].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return fn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return sc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},Wp(n,[{key:"length",get:function(){return this[Ae].getArrayLength_()},set:function(a){this[Ae].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(w0,Symbol.toStringTag,Symbol.iterator);Object.entries(cl).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&bc(Jp.prototype,e,t)});function S0(r){return{enumerable:!1,configurable:!0,get:function(){return this[Ae].get_(r)},set:function(t){this[Ae].set_(r,t)}}}function qK(r){ai(Jp.prototype,""+r,S0(r))}function A0(r){if(r>uh){for(var e=uh;e<r+100;e++)qK(e);uh=r}}A0(1e3);function GK(r,e,t){return new Jp(r,e,t)}function ui(r,e){if(typeof r=="object"&&r!==null){if(fn(r))return e!==void 0&&Ce(23),r[Ae].atom_;if(Ln(r))return r.atom_;if(an(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ce(25,e,ll(r)),t}if(sn(r)){if(!e)return Ce(26);var n=r[Ae].values_.get(e);return n||Ce(27,e,ll(r)),n}if(Vp(r)||zs(r)||al(r))return r}else if(pr(r)&&al(r[Ae]))return r[Ae];Ce(28)}function li(r,e){if(r||Ce(29),e!==void 0)return li(ui(r,e));if(Vp(r)||zs(r)||al(r)||an(r)||Ln(r))return r;if(r[Ae])return r[Ae];Ce(24,r)}function ll(r,e){var t;if(e!==void 0)t=ui(r,e);else{if(ls(r))return r.name;sn(r)||an(r)||Ln(r)?t=li(r):t=ui(r)}return t.name_}function ds(r){var e=Xs(),t=Zl(!0);jn();try{return r()}finally{qn(),ef(t),Ti(e)}}var Wb=mc.toString;function Qp(r,e,t){return t===void 0&&(t=-1),Jh(r,e,t)}function Jh(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=Wb.call(r);if(a!==Wb.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Vb(r),e=Vb(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(pr(f)&&f instanceof f&&pr(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!Jh(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Pi(e,I)&&Jh(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Vb(r){return fn(r)?r.slice():la(r)||an(r)||vc(r)||Ln(r)?Array.from(r.entries()):r}function sc(r){return r[Symbol.iterator]=HK,r}function HK(){return this}["Symbol","Map","Set"].forEach(function(r){var e=Fp();typeof e[r]>"u"&&Ce("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Yw,extras:{getDebugName:ll},$mobx:Ae});var YK=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ae,FlowCancellationError:rf,ObservableMap:of,ObservableSet:Yp,Reaction:rc,_allowStateChanges:qo,_allowStateChangesInsideComputed:ic,_allowStateReadsEnd:Ko,_allowStateReadsStart:tf,_autoAction:Ho,_endAction:Nw,_getAdministration:li,_getGlobalState:Vw,_interceptReads:bK,_isComputingDerivation:Ac,_resetGlobalState:$L,_startAction:Kw,action:Ut,autorun:Ws,comparer:Us,computed:Mr,configure:lK,createAtom:Jl,defineProperty:IK,entries:l0,extendObservable:nf,flow:Vs,flowResult:mK,get:kK,getAtom:ui,getDebugName:ll,getDependencyTree:fK,getObserverTree:dK,has:d0,intercept:vK,isAction:ls,isBoxedObservable:jp,isComputed:a0,isComputedProp:qu,isFlow:Yo,isFlowCancellationError:gK,isObservable:sf,isObservableArray:fn,isObservableMap:an,isObservableObject:sn,isObservableProp:SK,isObservableSet:Ln,keys:Jo,makeAutoObservable:CK,makeObservable:Gp,observable:Rt,observe:Qo,onBecomeObserved:n0,onBecomeUnobserved:kc,onReactionError:JL,override:tL,ownKeys:h0,reaction:t0,remove:AK,runInAction:ic,set:f0,spy:Yw,toJS:PK,trace:TK,transaction:Rr,untracked:qp,values:u0,when:RK},Symbol.toStringTag,{value:"Module"})),k0=cc(YK);(function(r){var e=z&&z.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=gt,n=e(mw.exports),i=k0;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(Hl);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Hl,r)})(Gl);var JK=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ql,"__esModule",{value:!0});ql.createExchangeInstruction=void 0;const Ru=gt,Bu=Bi,QK=Qn,$b=as,XK=as,lh=Lr,fh=Gl;function ZK({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:M,extraAccounts:A=[]}){return JK(this,void 0,void 0,function*(){const R=(0,QK.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Y=u===fh.OrderSide.Sell?new Bu.PublicKey(f):new Bu.PublicKey(h),ae=u===fh.OrderSide.Sell?new Bu.PublicKey(h):new Bu.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,lh.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ru.web3.Keypair?(oe=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,lh.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ru.web3.Keypair?(de=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[V]=yield(0,$b.getOrderVault)(d,Y,s),[J]=yield(0,XK.getOpenOrdersCounter)(d,Y,s);N=yield(0,lh.getTokenAccount)(r,n,Y),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ru.web3.Keypair?(E=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===fh.OrderSide.Buy?n:d,[j]=yield(0,$b.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Ru.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:V,orderAccount:e,openOrdersCounter:J,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:M,feeReduction:j}).remainingAccounts(A).instruction();return C.instructions.push(te),C})}ql.createExchangeInstruction=ZK;var af={},eN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(af,"__esModule",{value:!0});af.createInitializeMarketInstruction=void 0;const tN=Qn;function nN({connection:r,updateAuthorityAccount:e,programId:t}){return eN(this,void 0,void 0,function*(){const i=[yield(0,tN.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}af.createInitializeMarketInstruction=nN;var cf={},rN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(cf,"__esModule",{value:!0});cf.createRegisterCurrencyInstruction=void 0;const iN=gt,sN=Qn;function oN({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return rN(this,void 0,void 0,function*(){const u=[yield(0,sN.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new iN.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}cf.createRegisterCurrencyInstruction=oN;var Zi={},Xp=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.updateRoyaltyTier=Zi.deleteRoyaltyTier=Zi.addRoyaltyTier=void 0;const oc=gt,Zp=Qn;function aN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Xp(this,void 0,void 0,function*(){const a=(0,Zp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new oc.BN(n),new oc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Zi.addRoyaltyTier=aN;function cN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return Xp(this,void 0,void 0,function*(){const s=(0,Zp.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new oc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}Zi.deleteRoyaltyTier=cN;function uN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Xp(this,void 0,void 0,function*(){const a=(0,Zp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new oc.BN(n),new oc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Zi.updateRoyaltyTier=uN;var Xo={},I0=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.createUpdateRegisteredCurrencyVaultInstruction=Xo.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const lN=gt,E0=Qn;function fN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return I0(this,void 0,void 0,function*(){return[yield(0,E0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new lN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}Xo.createUpdateRegisteredCurrencyRoyaltyInstruction=fN;function dN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return I0(this,void 0,void 0,function*(){return[yield(0,E0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}Xo.createUpdateRegisteredCurrencyVaultInstruction=dN;var Zo={},O0=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.createRemoveFeeExemptionInstruction=Zo.createAddFeeExemptionInstruction=void 0;const hN=gt,P0=Qn,fl=as;function pN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return O0(this,void 0,void 0,function*(){const s=(0,P0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,fl.getFeeExemptAccount)(n,i),[h]=yield(0,fl.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new hN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}Zo.createAddFeeExemptionInstruction=pN;function gN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return O0(this,void 0,void 0,function*(){const s=(0,P0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,fl.getFeeExemptAccount)(n,i),[f]=yield(0,fl.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}Zo.createRemoveFeeExemptionInstruction=gN;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(cw,r),t(Wl,r),t($o,r),t(jl,r),t(ql,r),t(af,r),t(cf,r),t(Zi,r),t(Xo,r),t(Zo,r)})(Np);var da={},T0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(T0);var R0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(R0);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(gc,r),t(T0,r),t(R0,r)})(da);var B0={},uf={},x0=function(){},yN=function(r){return r};function M0(r){throw new Error("[mobx-utils] "+r)}function ss(r,e){e===void 0&&(e="Illegal state"),r||M0(e)}function C0(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var L0=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(L0(Object.getPrototypeOf(r))||[])},mN=function(r){var e=L0(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},Qh=function(r){return mN(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},dl="pending",ac="fulfilled",lf="rejected";function bN(r){switch(this.state){case dl:return r.pending&&r.pending(this.value);case lf:return r.rejected&&r.rejected(this.value);case ac:return r.fulfilled?r.fulfilled(this.value):this.value}}function Xh(r,e){if(ss(arguments.length<=2,"fromPromise expects up to two arguments"),ss(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Ut("observableFromPromise-resolve",function(i){t.value=i,t.state=ac}),Ut("observableFromPromise-reject",function(i){t.value=i,t.state=lf})),t.isPromiseBasedObservable=!0,t.case=bN;var n=e&&(e.state===ac||e.state===dl)?e.value:void 0;return nf(t,{value:n,state:dl},{},{deep:!1}),t}(function(r){r.reject=Ut("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=lf,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=ac,n.value=t,n}r.resolve=Ut("fromPromise.resolve",e)})(Xh||(Xh={}));function vN(r){return r&&r.isPromiseBasedObservable===!0}var jb=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function _N(r,e,t){if(qb(r,e),qb(r,t),e!==t){var n=r.slice(),i;return e<t?i=jb(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=jb(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function qb(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function wN(r,e){e===void 0&&(e=void 0);var t=!1,n=Rt.box(e,{deep:!1}),i=Rt.box(!1),s=function(){return t||(t=!0,qo(!0,function(){i.set(!0)}),r(function(u){qo(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Ut("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function eg(r,e,t){e===void 0&&(e=x0),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=Jl("ResourceBasedObservable",function(){ss(!n&&!i),n=!0,r(function(f){qo(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){ss(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var xu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function SN(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function AN(r,e){var t;e===void 0&&(e=!1);var n=Mr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:Qo(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:Qo(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[SN()]=function(){return this},t}var kN=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Gp(this),ic(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),xu([Rt.ref],r.prototype,"current",void 0),xu([Ut.bound],r.prototype,"next",null),xu([Ut.bound],r.prototype,"complete",null),xu([Ut.bound],r.prototype,"error",null),r}();function IN(r,e){return e===void 0&&(e=void 0),new kN(r,e)}var hl=function(){return hl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},hl.apply(this,arguments)},Ma=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},EN=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],K0=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:Rt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:Rt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),Gp(this),ss(sn(e),"createViewModel expects an observable object");var n=Qh(this);Qh(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Ae||i==="__mobxDidRunLazyInitializers")){if(ss(EN.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),qu(e,i)){var a=li(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Mr(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,hl(hl({},d),{configurable:!0,get:function(){return qu(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Ut(function(m){qu(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Jo(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];fn(i)?i.replace(n):an(i)?(i.clear(),i.merge(n)):a0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Ma([Mr],r.prototype,"isDirty",null),Ma([Mr],r.prototype,"changedValues",null),Ma([Ut.bound],r.prototype,"submit",null),Ma([Ut.bound],r.prototype,"reset",null),Ma([Ut.bound],r.prototype,"resetProperty",null),r}();function ON(r){return new K0(r)}function PN(r,e){var t=ui(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return Qo(t,function(){})}function TN(r,e,t){if(t===void 0&&(t=0),!fn(r))throw new Error("Expected observable array as first argument");ls(e)||(e=Ut("queueProcessor",e));var n=function(){var i=r.slice(0);ic(function(){return r.splice(0)}),i.forEach(e)};return t>0?Ws(n,{delay:t}):Ws(n)}function RN(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!fn(r))throw new Error("Expected observable array as first argument");ls(e)||(e=Ut("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);ic(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Ws(i,{delay:t}):Ws(i)}var Bs={};function BN(){for(var r=0,e=Object.getOwnPropertyNames(Bs);r<e.length;r++){var t=e[r];Bs[t].dispose(),delete Bs[t]}}function xN(r){return r===void 0&&(r=1e3),Ac()?(Bs[r]||(typeof r=="number"?Bs[r]=MN(r):Bs[r]=CN()),Bs[r].current()):Date.now()}function MN(r){var e;return eg(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function CN(){var r=eg(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function LN(r){return Ac()||console.warn("'expr' should only be used inside other reactive functions."),Mr(r).get()}var pl=function(){return pl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},pl.apply(this,arguments)},KN=0;function NN(r,e){ss(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=Mr(function(){return d=r(h)},pl(pl({},m),{name:I}));if(!i)var M=kc(O,function(){delete t[f],M(),n&&n(d,h)});return O}var u=!1;return function(f){var h=DN(f),d=t[h];if(d)return d.get();if(!i&&!Ac()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function DN(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++KN,C0(r,"$transformId",t)),t}function dh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function hh(r){return sn(r)||fn(r)||an(r)}function UN(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,dh(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(hh(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(hh(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+dh(f)+"/"+h+"',")+(" but it already exists at '"+dh(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:Qo(u,n)};t.set(u,m),l0(u).forEach(function(I){var O=I[0],M=I[1];return s(M,m,O)})}}}function a(u){if(hh(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),u0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var FN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zN=function(r){FN(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=Qo(d._base,function(I){if(I.type==="splice")Rr(function(){for(var O=0,M=I.removed;O<M.length;O++){var A=M[O];d._removeItem(A)}for(var R=0,C=I.added;R<C.length;R++){var Y=C[R];d._addItem(Y)}});else if(I.type==="update")Rr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=Rt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:t0(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(of),WN=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),VN=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new WN(this.store,e)}}),r}(),gl=function(){return gl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},gl.apply(this,arguments)},$N=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function jN(r,e){if(e===void 0&&(e=!1),ls(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new VN;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!Ac())return!t&&Vw().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=Mr(function(){return d=r.apply(a,u)},gl(gl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||kc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,$N([d],u)),d=void 0}),m.get()}}var qN=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:ac,IDENTITY:yN,NOOP:x0,ObservableGroupMap:zN,PENDING:dl,REJECTED:lf,ViewModel:K0,addHiddenProp:C0,chunkProcessor:RN,computedFn:jN,createTransformer:NN,createViewModel:ON,deepObserve:UN,expr:LN,fail:M0,get fromPromise(){return Xh},fromResource:eg,fromStream:IN,getAllMethodsAndProperties:Qh,invariant:ss,isPromiseBasedObservable:vN,keepAlive:PN,lazyObservable:wN,moveItem:_N,now:xN,queueProcessor:TN,resetNowInternalState:BN,toStream:AN},Symbol.toStringTag,{value:"Module"})),GN=cc(qN),yl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,M=1,A=2,R=1,C=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,V=256,J=512,K=30,j="...",te=800,T=16,W=1,X=2,Be=3,ye=1/0,Ie=9007199254740991,$t=17976931348623157e292,jt=0/0,_e=4294967295,We=_e-1,Qt=_e>>>1,cn=[["ary",N],["bind",R],["bindKey",C],["curry",ae],["curryRight",oe],["flip",J],["partial",de],["partialRight",E],["rearg",V]],kt="[object Arguments]",ft="[object Array]",yr="[object AsyncFunction]",Ft="[object Boolean]",vn="[object Date]",Yr="[object DOMException]",mr="[object Error]",Xn="[object Function]",hi="[object GeneratorFunction]",dn="[object Map]",ps="[object Number]",Pf="[object Null]",Zn="[object Object]",Rc="[object Promise]",Tf="[object Proxy]",Mi="[object RegExp]",_n="[object Set]",wn="[object String]",Ci="[object Symbol]",Rf="[object Undefined]",Kn="[object WeakMap]",Bf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",Ke="[object Uint8Array]",vt="[object Uint8ClampedArray]",dt="[object Uint16Array]",_t="[object Uint32Array]",ut=/\b__p \+= '';/g,H0=/\b(__p \+=) '' \+/g,Y0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rg=/&(?:amp|lt|gt|quot|#39);/g,ig=/[&<>"']/g,J0=RegExp(rg.source),Q0=RegExp(ig.source),X0=/<%-([\s\S]+?)%>/g,Z0=/<%([\s\S]+?)%>/g,sg=/<%=([\s\S]+?)%>/g,eS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tS=/^\w*$/,nS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xf=/[\\^$.*+?()[\]{}|]/g,rS=RegExp(xf.source),Mf=/^\s+/,iS=/\s/,sS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oS=/\{\n\/\* \[wrapped with (.+)\] \*/,aS=/,? & /,cS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uS=/[()=,{}\[\]\/\s]/,lS=/\\(\\)?/g,fS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,og=/\w*$/,dS=/^[-+]0x[0-9a-f]+$/i,hS=/^0b[01]+$/i,pS=/^\[object .+?Constructor\]$/,gS=/^0o[0-7]+$/i,yS=/^(?:0|[1-9]\d*)$/,mS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bc=/($^)/,bS=/['\n\r\u2028\u2029\\]/g,xc="\\ud800-\\udfff",vS="\\u0300-\\u036f",_S="\\ufe20-\\ufe2f",wS="\\u20d0-\\u20ff",ag=vS+_S+wS,cg="\\u2700-\\u27bf",ug="a-z\\xdf-\\xf6\\xf8-\\xff",SS="\\xac\\xb1\\xd7\\xf7",AS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kS="\\u2000-\\u206f",IS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lg="A-Z\\xc0-\\xd6\\xd8-\\xde",fg="\\ufe0e\\ufe0f",dg=SS+AS+kS+IS,Cf="['\u2019]",ES="["+xc+"]",hg="["+dg+"]",Mc="["+ag+"]",pg="\\d+",OS="["+cg+"]",gg="["+ug+"]",yg="[^"+xc+dg+pg+cg+ug+lg+"]",Lf="\\ud83c[\\udffb-\\udfff]",PS="(?:"+Mc+"|"+Lf+")",mg="[^"+xc+"]",Kf="(?:\\ud83c[\\udde6-\\uddff]){2}",Nf="[\\ud800-\\udbff][\\udc00-\\udfff]",eo="["+lg+"]",bg="\\u200d",vg="(?:"+gg+"|"+yg+")",TS="(?:"+eo+"|"+yg+")",_g="(?:"+Cf+"(?:d|ll|m|re|s|t|ve))?",wg="(?:"+Cf+"(?:D|LL|M|RE|S|T|VE))?",Sg=PS+"?",Ag="["+fg+"]?",RS="(?:"+bg+"(?:"+[mg,Kf,Nf].join("|")+")"+Ag+Sg+")*",BS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kg=Ag+Sg+RS,MS="(?:"+[OS,Kf,Nf].join("|")+")"+kg,CS="(?:"+[mg+Mc+"?",Mc,Kf,Nf,ES].join("|")+")",LS=RegExp(Cf,"g"),KS=RegExp(Mc,"g"),Df=RegExp(Lf+"(?="+Lf+")|"+CS+kg,"g"),NS=RegExp([eo+"?"+gg+"+"+_g+"(?="+[hg,eo,"$"].join("|")+")",TS+"+"+wg+"(?="+[hg,eo+vg,"$"].join("|")+")",eo+"?"+vg+"+"+_g,eo+"+"+wg,xS,BS,pg,MS].join("|"),"g"),DS=RegExp("["+bg+xc+ag+fg+"]"),US=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,FS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zS=-1,It={};It[y]=It[k]=It[L]=It[$]=It[Z]=It[Ke]=It[vt]=It[dt]=It[_t]=!0,It[kt]=It[ft]=It[v]=It[Ft]=It[g]=It[vn]=It[mr]=It[Xn]=It[dn]=It[ps]=It[Zn]=It[Mi]=It[_n]=It[wn]=It[Kn]=!1;var wt={};wt[kt]=wt[ft]=wt[v]=wt[g]=wt[Ft]=wt[vn]=wt[y]=wt[k]=wt[L]=wt[$]=wt[Z]=wt[dn]=wt[ps]=wt[Zn]=wt[Mi]=wt[_n]=wt[wn]=wt[Ci]=wt[Ke]=wt[vt]=wt[dt]=wt[_t]=!0,wt[mr]=wt[Xn]=wt[Kn]=!1;var WS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},VS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$S={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qS=parseFloat,GS=parseInt,Ig=typeof z=="object"&&z&&z.Object===Object&&z,HS=typeof self=="object"&&self&&self.Object===Object&&self,hn=Ig||HS||Function("return this")(),Uf=e&&!e.nodeType&&e,gs=Uf&&!0&&r&&!r.nodeType&&r,Eg=gs&&gs.exports===Uf,Ff=Eg&&Ig.process,br=function(){try{var D=gs&&gs.require&&gs.require("util").types;return D||Ff&&Ff.binding&&Ff.binding("util")}catch{}}(),Og=br&&br.isArrayBuffer,Pg=br&&br.isDate,Tg=br&&br.isMap,Rg=br&&br.isRegExp,Bg=br&&br.isSet,xg=br&&br.isTypedArray;function er(D,Q,q){switch(q.length){case 0:return D.call(Q);case 1:return D.call(Q,q[0]);case 2:return D.call(Q,q[0],q[1]);case 3:return D.call(Q,q[0],q[1],q[2])}return D.apply(Q,q)}function YS(D,Q,q,me){for(var Me=-1,rt=D==null?0:D.length;++Me<rt;){var Xt=D[Me];Q(me,Xt,q(Xt),D)}return me}function vr(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me&&Q(D[q],q,D)!==!1;);return D}function JS(D,Q){for(var q=D==null?0:D.length;q--&&Q(D[q],q,D)!==!1;);return D}function Mg(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!Q(D[q],q,D))return!1;return!0}function Li(D,Q){for(var q=-1,me=D==null?0:D.length,Me=0,rt=[];++q<me;){var Xt=D[q];Q(Xt,q,D)&&(rt[Me++]=Xt)}return rt}function Cc(D,Q){var q=D==null?0:D.length;return!!q&&to(D,Q,0)>-1}function zf(D,Q,q){for(var me=-1,Me=D==null?0:D.length;++me<Me;)if(q(Q,D[me]))return!0;return!1}function Ot(D,Q){for(var q=-1,me=D==null?0:D.length,Me=Array(me);++q<me;)Me[q]=Q(D[q],q,D);return Me}function Ki(D,Q){for(var q=-1,me=Q.length,Me=D.length;++q<me;)D[Me+q]=Q[q];return D}function Wf(D,Q,q,me){var Me=-1,rt=D==null?0:D.length;for(me&&rt&&(q=D[++Me]);++Me<rt;)q=Q(q,D[Me],Me,D);return q}function QS(D,Q,q,me){var Me=D==null?0:D.length;for(me&&Me&&(q=D[--Me]);Me--;)q=Q(q,D[Me],Me,D);return q}function Vf(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(Q(D[q],q,D))return!0;return!1}var XS=$f("length");function ZS(D){return D.split("")}function eA(D){return D.match(cS)||[]}function Cg(D,Q,q){var me;return q(D,function(Me,rt,Xt){if(Q(Me,rt,Xt))return me=rt,!1}),me}function Lc(D,Q,q,me){for(var Me=D.length,rt=q+(me?1:-1);me?rt--:++rt<Me;)if(Q(D[rt],rt,D))return rt;return-1}function to(D,Q,q){return Q===Q?dA(D,Q,q):Lc(D,Lg,q)}function tA(D,Q,q,me){for(var Me=q-1,rt=D.length;++Me<rt;)if(me(D[Me],Q))return Me;return-1}function Lg(D){return D!==D}function Kg(D,Q){var q=D==null?0:D.length;return q?qf(D,Q)/q:jt}function $f(D){return function(Q){return Q==null?t:Q[D]}}function jf(D){return function(Q){return D==null?t:D[Q]}}function Ng(D,Q,q,me,Me){return Me(D,function(rt,Xt,yt){q=me?(me=!1,rt):Q(q,rt,Xt,yt)}),q}function nA(D,Q){var q=D.length;for(D.sort(Q);q--;)D[q]=D[q].value;return D}function qf(D,Q){for(var q,me=-1,Me=D.length;++me<Me;){var rt=Q(D[me]);rt!==t&&(q=q===t?rt:q+rt)}return q}function Gf(D,Q){for(var q=-1,me=Array(D);++q<D;)me[q]=Q(q);return me}function rA(D,Q){return Ot(Q,function(q){return[q,D[q]]})}function Dg(D){return D&&D.slice(0,Wg(D)+1).replace(Mf,"")}function tr(D){return function(Q){return D(Q)}}function Hf(D,Q){return Ot(Q,function(q){return D[q]})}function ga(D,Q){return D.has(Q)}function Ug(D,Q){for(var q=-1,me=D.length;++q<me&&to(Q,D[q],0)>-1;);return q}function Fg(D,Q){for(var q=D.length;q--&&to(Q,D[q],0)>-1;);return q}function iA(D,Q){for(var q=D.length,me=0;q--;)D[q]===Q&&++me;return me}var sA=jf(WS),oA=jf(VS);function aA(D){return"\\"+jS[D]}function cA(D,Q){return D==null?t:D[Q]}function no(D){return DS.test(D)}function uA(D){return US.test(D)}function lA(D){for(var Q,q=[];!(Q=D.next()).done;)q.push(Q.value);return q}function Yf(D){var Q=-1,q=Array(D.size);return D.forEach(function(me,Me){q[++Q]=[Me,me]}),q}function zg(D,Q){return function(q){return D(Q(q))}}function Ni(D,Q){for(var q=-1,me=D.length,Me=0,rt=[];++q<me;){var Xt=D[q];(Xt===Q||Xt===d)&&(D[q]=d,rt[Me++]=q)}return rt}function Kc(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=me}),q}function fA(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=[me,me]}),q}function dA(D,Q,q){for(var me=q-1,Me=D.length;++me<Me;)if(D[me]===Q)return me;return-1}function hA(D,Q,q){for(var me=q+1;me--;)if(D[me]===Q)return me;return me}function ro(D){return no(D)?gA(D):XS(D)}function Nr(D){return no(D)?yA(D):ZS(D)}function Wg(D){for(var Q=D.length;Q--&&iS.test(D.charAt(Q)););return Q}var pA=jf($S);function gA(D){for(var Q=Df.lastIndex=0;Df.test(D);)++Q;return Q}function yA(D){return D.match(Df)||[]}function mA(D){return D.match(NS)||[]}var bA=function D(Q){Q=Q==null?hn:io.defaults(hn.Object(),Q,io.pick(hn,FS));var q=Q.Array,me=Q.Date,Me=Q.Error,rt=Q.Function,Xt=Q.Math,yt=Q.Object,Jf=Q.RegExp,vA=Q.String,_r=Q.TypeError,Nc=q.prototype,_A=rt.prototype,so=yt.prototype,Dc=Q["__core-js_shared__"],Uc=_A.toString,lt=so.hasOwnProperty,wA=0,Vg=function(){var o=/[^.]+$/.exec(Dc&&Dc.keys&&Dc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Fc=so.toString,SA=Uc.call(yt),AA=hn._,kA=Jf("^"+Uc.call(lt).replace(xf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zc=Eg?Q.Buffer:t,Di=Q.Symbol,Wc=Q.Uint8Array,$g=zc?zc.allocUnsafe:t,Vc=zg(yt.getPrototypeOf,yt),jg=yt.create,qg=so.propertyIsEnumerable,$c=Nc.splice,Gg=Di?Di.isConcatSpreadable:t,ya=Di?Di.iterator:t,ys=Di?Di.toStringTag:t,jc=function(){try{var o=ws(yt,"defineProperty");return o({},"",{}),o}catch{}}(),IA=Q.clearTimeout!==hn.clearTimeout&&Q.clearTimeout,EA=me&&me.now!==hn.Date.now&&me.now,OA=Q.setTimeout!==hn.setTimeout&&Q.setTimeout,qc=Xt.ceil,Gc=Xt.floor,Qf=yt.getOwnPropertySymbols,PA=zc?zc.isBuffer:t,Hg=Q.isFinite,TA=Nc.join,RA=zg(yt.keys,yt),Zt=Xt.max,Sn=Xt.min,BA=me.now,xA=Q.parseInt,Yg=Xt.random,MA=Nc.reverse,Xf=ws(Q,"DataView"),ma=ws(Q,"Map"),Zf=ws(Q,"Promise"),oo=ws(Q,"Set"),ba=ws(Q,"WeakMap"),va=ws(yt,"create"),Hc=ba&&new ba,ao={},CA=Ss(Xf),LA=Ss(ma),KA=Ss(Zf),NA=Ss(oo),DA=Ss(ba),Yc=Di?Di.prototype:t,_a=Yc?Yc.valueOf:t,Jg=Yc?Yc.toString:t;function _(o){if(Kt(o)&&!Le(o)&&!(o instanceof He)){if(o instanceof wr)return o;if(lt.call(o,"__wrapped__"))return Qy(o)}return new wr(o)}var co=function(){function o(){}return function(c){if(!xt(c))return{};if(jg)return jg(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function Jc(){}function wr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:X0,evaluate:Z0,interpolate:sg,variable:"",imports:{_}},_.prototype=Jc.prototype,_.prototype.constructor=_,wr.prototype=co(Jc.prototype),wr.prototype.constructor=wr;function He(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function UA(){var o=new He(this.__wrapped__);return o.__actions__=Nn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Nn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Nn(this.__views__),o}function FA(){if(this.__filtered__){var o=new He(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function zA(){var o=this.__wrapped__.value(),c=this.__dir__,l=Le(o),p=c<0,b=l?o.length:0,w=Z1(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,we=Sn(U,this.__takeCount__);if(!l||!p&&b==U&&we==U)return _y(o,this.__actions__);var Te=[];e:for(;U--&&ge<we;){ne+=c;for(var Ue=-1,Re=o[ne];++Ue<ce;){var qe=re[Ue],Ye=qe.iteratee,ir=qe.type,xn=Ye(Re);if(ir==X)Re=xn;else if(!xn){if(ir==W)continue e;break e}}Te[ge++]=Re}return Te}He.prototype=co(Jc.prototype),He.prototype.constructor=He;function ms(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function WA(){this.__data__=va?va(null):{},this.size=0}function VA(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function $A(o){var c=this.__data__;if(va){var l=c[o];return l===f?t:l}return lt.call(c,o)?c[o]:t}function jA(o){var c=this.__data__;return va?c[o]!==t:lt.call(c,o)}function qA(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=va&&c===t?f:c,this}ms.prototype.clear=WA,ms.prototype.delete=VA,ms.prototype.get=$A,ms.prototype.has=jA,ms.prototype.set=qA;function pi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function GA(){this.__data__=[],this.size=0}function HA(o){var c=this.__data__,l=Qc(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():$c.call(c,l,1),--this.size,!0}function YA(o){var c=this.__data__,l=Qc(c,o);return l<0?t:c[l][1]}function JA(o){return Qc(this.__data__,o)>-1}function QA(o,c){var l=this.__data__,p=Qc(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}pi.prototype.clear=GA,pi.prototype.delete=HA,pi.prototype.get=YA,pi.prototype.has=JA,pi.prototype.set=QA;function gi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function XA(){this.size=0,this.__data__={hash:new ms,map:new(ma||pi),string:new ms}}function ZA(o){var c=uu(this,o).delete(o);return this.size-=c?1:0,c}function e1(o){return uu(this,o).get(o)}function t1(o){return uu(this,o).has(o)}function n1(o,c){var l=uu(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}gi.prototype.clear=XA,gi.prototype.delete=ZA,gi.prototype.get=e1,gi.prototype.has=t1,gi.prototype.set=n1;function bs(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new gi;++c<l;)this.add(o[c])}function r1(o){return this.__data__.set(o,f),this}function i1(o){return this.__data__.has(o)}bs.prototype.add=bs.prototype.push=r1,bs.prototype.has=i1;function Dr(o){var c=this.__data__=new pi(o);this.size=c.size}function s1(){this.__data__=new pi,this.size=0}function o1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function a1(o){return this.__data__.get(o)}function c1(o){return this.__data__.has(o)}function u1(o,c){var l=this.__data__;if(l instanceof pi){var p=l.__data__;if(!ma||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new gi(p)}return l.set(o,c),this.size=l.size,this}Dr.prototype.clear=s1,Dr.prototype.delete=o1,Dr.prototype.get=a1,Dr.prototype.has=c1,Dr.prototype.set=u1;function Qg(o,c){var l=Le(o),p=!l&&As(o),b=!l&&!p&&Vi(o),w=!l&&!p&&!b&&ho(o),P=l||p||b||w,B=P?Gf(o.length,vA):[],U=B.length;for(var ne in o)(c||lt.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||vi(ne,U)))&&B.push(ne);return B}function Xg(o){var c=o.length;return c?o[ld(0,c-1)]:t}function l1(o,c){return lu(Nn(o),vs(c,0,o.length))}function f1(o){return lu(Nn(o))}function ed(o,c,l){(l!==t&&!Ur(o[c],l)||l===t&&!(c in o))&&yi(o,c,l)}function wa(o,c,l){var p=o[c];(!(lt.call(o,c)&&Ur(p,l))||l===t&&!(c in o))&&yi(o,c,l)}function Qc(o,c){for(var l=o.length;l--;)if(Ur(o[l][0],c))return l;return-1}function d1(o,c,l,p){return Ui(o,function(b,w,P){c(p,b,l(b),P)}),p}function Zg(o,c){return o&&Qr(c,un(c),o)}function h1(o,c){return o&&Qr(c,Un(c),o)}function yi(o,c,l){c=="__proto__"&&jc?jc(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function td(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Ld(o,c[l]);return b}function vs(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Sr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!xt(o))return o;var re=Le(o);if(re){if(P=tk(o),!B)return Nn(o,P)}else{var ce=An(o),ge=ce==Xn||ce==hi;if(Vi(o))return Ay(o,B);if(ce==Zn||ce==kt||ge&&!b){if(P=U||ge?{}:Wy(o),!B)return U?$1(o,h1(P,o)):V1(o,Zg(P,o))}else{if(!wt[ce])return b?o:{};P=nk(o,ce,B)}}w||(w=new Dr);var we=w.get(o);if(we)return we;w.set(o,P),mm(o)?o.forEach(function(Re){P.add(Sr(Re,c,l,Re,o,w))}):gm(o)&&o.forEach(function(Re,qe){P.set(qe,Sr(Re,c,l,qe,o,w))});var Te=ne?U?wd:_d:U?Un:un,Ue=re?t:Te(o);return vr(Ue||o,function(Re,qe){Ue&&(qe=Re,Re=o[qe]),wa(P,qe,Sr(Re,c,l,qe,o,w))}),P}function p1(o){var c=un(o);return function(l){return ey(l,o,c)}}function ey(o,c,l){var p=l.length;if(o==null)return!p;for(o=yt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function ty(o,c,l){if(typeof o!="function")throw new _r(a);return Pa(function(){o.apply(t,l)},c)}function Sa(o,c,l,p){var b=-1,w=Cc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Ot(c,tr(l))),p?(w=zf,P=!1):c.length>=i&&(w=ga,P=!1,c=new bs(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Ui=Py(Jr),ny=Py(rd,!0);function g1(o,c){var l=!0;return Ui(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function Xc(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!rr(P):l(P,B)))var B=P,U=w}return U}function y1(o,c,l,p){var b=o.length;for(l=De(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:De(p),p<0&&(p+=b),p=l>p?0:vm(p);l<p;)o[l++]=c;return o}function ry(o,c){var l=[];return Ui(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function pn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=ik),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?pn(B,c-1,l,p,b):Ki(b,B):p||(b[b.length]=B)}return b}var nd=Ty(),iy=Ty(!0);function Jr(o,c){return o&&nd(o,c,un)}function rd(o,c){return o&&iy(o,c,un)}function Zc(o,c){return Li(c,function(l){return _i(o[l])})}function _s(o,c){c=zi(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[Xr(c[l++])];return l&&l==p?o:t}function sy(o,c,l){var p=c(o);return Le(o)?p:Ki(p,l(o))}function Rn(o){return o==null?o===t?Rf:Pf:ys&&ys in yt(o)?X1(o):fk(o)}function id(o,c){return o>c}function m1(o,c){return o!=null&&lt.call(o,c)}function b1(o,c){return o!=null&&c in yt(o)}function v1(o,c,l){return o>=Sn(c,l)&&o<Zt(c,l)}function sd(o,c,l){for(var p=l?zf:Cc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Ot(re,tr(c))),U=Sn(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new bs(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<U;){var we=re[ce],Te=c?c(we):we;if(we=l||we!==0?we:0,!(ge?ga(ge,Te):p(ne,Te,l))){for(P=w;--P;){var Ue=B[P];if(!(Ue?ga(Ue,Te):p(o[P],Te,l)))continue e}ge&&ge.push(Te),ne.push(we)}}return ne}function _1(o,c,l,p){return Jr(o,function(b,w,P){c(p,l(b),w,P)}),p}function Aa(o,c,l){c=zi(c,o),o=qy(o,c);var p=o==null?o:o[Xr(kr(c))];return p==null?t:er(p,o,l)}function oy(o){return Kt(o)&&Rn(o)==kt}function w1(o){return Kt(o)&&Rn(o)==v}function S1(o){return Kt(o)&&Rn(o)==vn}function ka(o,c,l,p,b){return o===c?!0:o==null||c==null||!Kt(o)&&!Kt(c)?o!==o&&c!==c:A1(o,c,l,p,ka,b)}function A1(o,c,l,p,b,w){var P=Le(o),B=Le(c),U=P?ft:An(o),ne=B?ft:An(c);U=U==kt?Zn:U,ne=ne==kt?Zn:ne;var re=U==Zn,ce=ne==Zn,ge=U==ne;if(ge&&Vi(o)){if(!Vi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new Dr),P||ho(o)?Uy(o,c,l,p,b,w):J1(o,c,U,l,p,b,w);if(!(l&M)){var we=re&&lt.call(o,"__wrapped__"),Te=ce&&lt.call(c,"__wrapped__");if(we||Te){var Ue=we?o.value():o,Re=Te?c.value():c;return w||(w=new Dr),b(Ue,Re,l,p,w)}}return ge?(w||(w=new Dr),Q1(o,c,l,p,b,w)):!1}function k1(o){return Kt(o)&&An(o)==dn}function od(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=yt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new Dr;if(p)var ge=p(ne,re,U,o,c,ce);if(!(ge===t?ka(re,ne,M|A,p,ce):ge))return!1}}return!0}function ay(o){if(!xt(o)||ok(o))return!1;var c=_i(o)?kA:pS;return c.test(Ss(o))}function I1(o){return Kt(o)&&Rn(o)==Mi}function E1(o){return Kt(o)&&An(o)==_n}function O1(o){return Kt(o)&&yu(o.length)&&!!It[Rn(o)]}function cy(o){return typeof o=="function"?o:o==null?Fn:typeof o=="object"?Le(o)?fy(o[0],o[1]):ly(o):Rm(o)}function ad(o){if(!Oa(o))return RA(o);var c=[];for(var l in yt(o))lt.call(o,l)&&l!="constructor"&&c.push(l);return c}function P1(o){if(!xt(o))return lk(o);var c=Oa(o),l=[];for(var p in o)p=="constructor"&&(c||!lt.call(o,p))||l.push(p);return l}function cd(o,c){return o<c}function uy(o,c){var l=-1,p=Dn(o)?q(o.length):[];return Ui(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function ly(o){var c=Ad(o);return c.length==1&&c[0][2]?$y(c[0][0],c[0][1]):function(l){return l===o||od(l,o,c)}}function fy(o,c){return Id(o)&&Vy(c)?$y(Xr(o),c):function(l){var p=Ld(l,o);return p===t&&p===c?Kd(l,o):ka(c,p,M|A)}}function eu(o,c,l,p,b){o!==c&&nd(c,function(w,P){if(b||(b=new Dr),xt(w))T1(o,c,P,l,eu,p,b);else{var B=p?p(Od(o,P),w,P+"",o,c,b):t;B===t&&(B=w),ed(o,P,B)}},Un)}function T1(o,c,l,p,b,w,P){var B=Od(o,l),U=Od(c,l),ne=P.get(U);if(ne){ed(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Le(U),we=!ge&&Vi(U),Te=!ge&&!we&&ho(U);re=U,ge||we||Te?Le(B)?re=B:zt(B)?re=Nn(B):we?(ce=!1,re=Ay(U,!0)):Te?(ce=!1,re=ky(U,!0)):re=[]:Ta(U)||As(U)?(re=B,As(B)?re=_m(B):(!xt(B)||_i(B))&&(re=Wy(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),ed(o,l,re)}function dy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,vi(c,l)?o[c]:t}function hy(o,c,l){c.length?c=Ot(c,function(w){return Le(w)?function(P){return _s(P,w.length===1?w[0]:w)}:w}):c=[Fn];var p=-1;c=Ot(c,tr(Oe()));var b=uy(o,function(w,P,B){var U=Ot(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return nA(b,function(w,P){return W1(w,P,l)})}function R1(o,c){return py(o,c,function(l,p){return Kd(o,p)})}function py(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=_s(o,P);l(B,P)&&Ia(w,zi(P,o),B)}return w}function B1(o){return function(c){return _s(c,o)}}function ud(o,c,l,p){var b=p?tA:to,w=-1,P=c.length,B=o;for(o===c&&(c=Nn(c)),l&&(B=Ot(o,tr(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&$c.call(B,U,1),$c.call(o,U,1);return o}function gy(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;vi(b)?$c.call(o,b,1):hd(o,b)}}return o}function ld(o,c){return o+Gc(Yg()*(c-o+1))}function x1(o,c,l,p){for(var b=-1,w=Zt(qc((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function fd(o,c){var l="";if(!o||c<1||c>Ie)return l;do c%2&&(l+=o),c=Gc(c/2),c&&(o+=o);while(c);return l}function Ve(o,c){return Pd(jy(o,c,Fn),o+"")}function M1(o){return Xg(po(o))}function C1(o,c){var l=po(o);return lu(l,vs(c,0,l.length))}function Ia(o,c,l,p){if(!xt(o))return o;c=zi(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=Xr(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=xt(re)?re:vi(c[b+1])?[]:{})}wa(B,U,ne),B=B[U]}return o}var yy=Hc?function(o,c){return Hc.set(o,c),o}:Fn,L1=jc?function(o,c){return jc(o,"toString",{configurable:!0,enumerable:!1,value:Dd(c),writable:!0})}:Fn;function K1(o){return lu(po(o))}function Ar(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function N1(o,c){var l;return Ui(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function tu(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=Qt){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!rr(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return dd(o,c,Fn,l)}function dd(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=rr(c),ne=c===t;b<w;){var re=Gc((b+w)/2),ce=l(o[re]),ge=ce!==t,we=ce===null,Te=ce===ce,Ue=rr(ce);if(P)var Re=p||Te;else ne?Re=Te&&(p||ge):B?Re=Te&&ge&&(p||!we):U?Re=Te&&ge&&!we&&(p||!Ue):we||Ue?Re=!1:Re=p?ce<=c:ce<c;Re?b=re+1:w=re}return Sn(w,We)}function my(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!Ur(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function by(o){return typeof o=="number"?o:rr(o)?jt:+o}function nr(o){if(typeof o=="string")return o;if(Le(o))return Ot(o,nr)+"";if(rr(o))return Jg?Jg.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Fi(o,c,l){var p=-1,b=Cc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=zf;else if(w>=i){var ne=c?null:H1(o);if(ne)return Kc(ne);P=!1,b=ga,U=new bs}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=U.length;ge--;)if(U[ge]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function hd(o,c){return c=zi(c,o),o=qy(o,c),o==null||delete o[Xr(kr(c))]}function vy(o,c,l,p){return Ia(o,c,l(_s(o,c)),p)}function nu(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Ar(o,p?0:w,p?w+1:b):Ar(o,p?w+1:0,p?b:w)}function _y(o,c){var l=o;return l instanceof He&&(l=l.value()),Wf(c,function(p,b){return b.func.apply(b.thisArg,Ki([p],b.args))},l)}function pd(o,c,l){var p=o.length;if(p<2)return p?Fi(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=Sa(w[b]||P,o[B],c,l));return Fi(pn(w,1),c,l)}function wy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function gd(o){return zt(o)?o:[]}function yd(o){return typeof o=="function"?o:Fn}function zi(o,c){return Le(o)?o:Id(o,c)?[o]:Jy(ot(o))}var D1=Ve;function Wi(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Ar(o,c,l)}var Sy=IA||function(o){return hn.clearTimeout(o)};function Ay(o,c){if(c)return o.slice();var l=o.length,p=$g?$g(l):new o.constructor(l);return o.copy(p),p}function md(o){var c=new o.constructor(o.byteLength);return new Wc(c).set(new Wc(o)),c}function U1(o,c){var l=c?md(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function F1(o){var c=new o.constructor(o.source,og.exec(o));return c.lastIndex=o.lastIndex,c}function z1(o){return _a?yt(_a.call(o)):{}}function ky(o,c){var l=c?md(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function Iy(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=rr(o),P=c!==t,B=c===null,U=c===c,ne=rr(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function W1(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=Iy(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function Ey(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=Zt(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Oy(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=Zt(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var we=b;++U<ne;)ce[we+U]=c[U];for(;++P<B;)(ge||b<w)&&(ce[we+l[P]]=o[b++]);return ce}function Nn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function Qr(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?yi(l,B,U):wa(l,B,U)}return l}function V1(o,c){return Qr(o,kd(o),c)}function $1(o,c){return Qr(o,Fy(o),c)}function ru(o,c){return function(l,p){var b=Le(l)?YS:d1,w=c?c():{};return b(l,o,Oe(p,2),w)}}function uo(o){return Ve(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Bn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=yt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function Py(o,c){return function(l,p){if(l==null)return l;if(!Dn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=yt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function Ty(o){return function(c,l,p){for(var b=-1,w=yt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function j1(o,c,l){var p=c&R,b=Ea(o);function w(){var P=this&&this!==hn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function Ry(o){return function(c){c=ot(c);var l=no(c)?Nr(c):t,p=l?l[0]:c.charAt(0),b=l?Wi(l,1).join(""):c.slice(1);return p[o]()+b}}function lo(o){return function(c){return Wf(Pm(Om(c).replace(LS,"")),o,"")}}function Ea(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=co(o.prototype),p=o.apply(l,c);return xt(p)?p:l}}function q1(o,c,l){var p=Ea(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=fo(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:Ni(P,U);if(w-=ne.length,w<l)return Ly(o,c,iu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==hn&&this instanceof b?p:o;return er(re,this,P)}return b}function By(o){return function(c,l,p){var b=yt(c);if(!Dn(c)){var w=Oe(l,3);c=un(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function xy(o){return bi(function(c){var l=c.length,p=l,b=wr.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new _r(a);if(b&&!P&&cu(w)=="wrapper")var P=new wr([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=cu(w),U=B=="wrapper"?Sd(w):t;U&&Ed(U[0])&&U[1]==(N|ae|de|V)&&!U[4].length&&U[9]==1?P=P[cu(U[0])].apply(P,U[3]):P=w.length==1&&Ed(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Le(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function iu(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ge=c&C,we=c&(ae|oe),Te=c&J,Ue=ge?t:Ea(o);function Re(){for(var qe=arguments.length,Ye=q(qe),ir=qe;ir--;)Ye[ir]=arguments[ir];if(we)var xn=fo(Re),sr=iA(Ye,xn);if(p&&(Ye=Ey(Ye,p,b,we)),w&&(Ye=Oy(Ye,w,P,we)),qe-=sr,we&&qe<ne){var Wt=Ni(Ye,xn);return Ly(o,c,iu,Re.placeholder,l,Ye,Wt,B,U,ne-qe)}var Fr=ce?l:this,Si=ge?Fr[o]:o;return qe=Ye.length,B?Ye=dk(Ye,B):Te&&qe>1&&Ye.reverse(),re&&U<qe&&(Ye.length=U),this&&this!==hn&&this instanceof Re&&(Si=Ue||Ea(Si)),Si.apply(Fr,Ye)}return Re}function My(o,c){return function(l,p){return _1(l,o,c(p),{})}}function su(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=nr(l),p=nr(p)):(l=by(l),p=by(p)),b=o(l,p)}return b}}function bd(o){return bi(function(c){return c=Ot(c,tr(Oe())),Ve(function(l){var p=this;return o(c,function(b){return er(b,p,l)})})})}function ou(o,c){c=c===t?" ":nr(c);var l=c.length;if(l<2)return l?fd(c,o):c;var p=fd(c,qc(o/ro(c)));return no(c)?Wi(Nr(p),0,o).join(""):p.slice(0,o)}function G1(o,c,l,p){var b=c&R,w=Ea(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ge=this&&this!==hn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return er(ge,b?l:this,ce)}return P}function Cy(o){return function(c,l,p){return p&&typeof p!="number"&&Bn(c,l,p)&&(l=p=t),c=wi(c),l===t?(l=c,c=0):l=wi(l),p=p===t?c<l?1:-1:wi(p),x1(c,l,p,o)}}function au(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Ir(c),l=Ir(l)),o(c,l)}}function Ly(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,we=re?w:t,Te=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|C));var Ue=[o,c,b,we,ce,Te,ge,B,U,ne],Re=l.apply(t,Ue);return Ed(o)&&Gy(Re,Ue),Re.placeholder=p,Hy(Re,o,c)}function vd(o){var c=Xt[o];return function(l,p){if(l=Ir(l),p=p==null?0:Sn(De(p),292),p&&Hg(l)){var b=(ot(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(ot(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var H1=oo&&1/Kc(new oo([,-0]))[1]==ye?function(o){return new oo(o)}:zd;function Ky(o){return function(c){var l=An(c);return l==dn?Yf(c):l==_n?fA(c):rA(c,o(c))}}function mi(o,c,l,p,b,w,P,B){var U=c&C;if(!U&&typeof o!="function")throw new _r(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:Zt(De(P),0),B=B===t?B:De(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=U?t:Sd(o),we=[o,c,l,p,b,re,ce,w,P,B];if(ge&&uk(we,ge),o=we[0],c=we[1],l=we[2],p=we[3],b=we[4],B=we[9]=we[9]===t?U?0:o.length:Zt(we[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Te=j1(o,c,l);else c==ae||c==oe?Te=q1(o,c,B):(c==de||c==(R|de))&&!b.length?Te=G1(o,c,l,p):Te=iu.apply(t,we);var Ue=ge?yy:Gy;return Hy(Ue(Te,we),o,c)}function Ny(o,c,l,p){return o===t||Ur(o,so[l])&&!lt.call(p,l)?c:o}function Dy(o,c,l,p,b,w){return xt(o)&&xt(c)&&(w.set(c,o),eu(o,c,t,Dy,w),w.delete(c)),o}function Y1(o){return Ta(o)?t:o}function Uy(o,c,l,p,b,w){var P=l&M,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,we=l&A?new bs:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Te=o[ce],Ue=c[ce];if(p)var Re=P?p(Ue,Te,ce,c,o,w):p(Te,Ue,ce,o,c,w);if(Re!==t){if(Re)continue;ge=!1;break}if(we){if(!Vf(c,function(qe,Ye){if(!ga(we,Ye)&&(Te===qe||b(Te,qe,l,p,w)))return we.push(Ye)})){ge=!1;break}}else if(!(Te===Ue||b(Te,Ue,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function J1(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new Wc(o),new Wc(c)));case Ft:case vn:case ps:return Ur(+o,+c);case mr:return o.name==c.name&&o.message==c.message;case Mi:case wn:return o==c+"";case dn:var B=Yf;case _n:var U=p&M;if(B||(B=Kc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=Uy(B(o),B(c),p,b,w,P);return P.delete(o),re;case Ci:if(_a)return _a.call(o)==_a.call(c)}return!1}function Q1(o,c,l,p,b,w){var P=l&M,B=_d(o),U=B.length,ne=_d(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ge=B[ce];if(!(P?ge in c:lt.call(c,ge)))return!1}var we=w.get(o),Te=w.get(c);if(we&&Te)return we==c&&Te==o;var Ue=!0;w.set(o,c),w.set(c,o);for(var Re=P;++ce<U;){ge=B[ce];var qe=o[ge],Ye=c[ge];if(p)var ir=P?p(Ye,qe,ge,c,o,w):p(qe,Ye,ge,o,c,w);if(!(ir===t?qe===Ye||b(qe,Ye,l,p,w):ir)){Ue=!1;break}Re||(Re=ge=="constructor")}if(Ue&&!Re){var xn=o.constructor,sr=c.constructor;xn!=sr&&"constructor"in o&&"constructor"in c&&!(typeof xn=="function"&&xn instanceof xn&&typeof sr=="function"&&sr instanceof sr)&&(Ue=!1)}return w.delete(o),w.delete(c),Ue}function bi(o){return Pd(jy(o,t,em),o+"")}function _d(o){return sy(o,un,kd)}function wd(o){return sy(o,Un,Fy)}var Sd=Hc?function(o){return Hc.get(o)}:zd;function cu(o){for(var c=o.name+"",l=ao[c],p=lt.call(ao,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function fo(o){var c=lt.call(_,"placeholder")?_:o;return c.placeholder}function Oe(){var o=_.iteratee||Ud;return o=o===Ud?cy:o,arguments.length?o(arguments[0],arguments[1]):o}function uu(o,c){var l=o.__data__;return sk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Ad(o){for(var c=un(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,Vy(b)]}return c}function ws(o,c){var l=cA(o,c);return ay(l)?l:t}function X1(o){var c=lt.call(o,ys),l=o[ys];try{o[ys]=t;var p=!0}catch{}var b=Fc.call(o);return p&&(c?o[ys]=l:delete o[ys]),b}var kd=Qf?function(o){return o==null?[]:(o=yt(o),Li(Qf(o),function(c){return qg.call(o,c)}))}:Wd,Fy=Qf?function(o){for(var c=[];o;)Ki(c,kd(o)),o=Vc(o);return c}:Wd,An=Rn;(Xf&&An(new Xf(new ArrayBuffer(1)))!=g||ma&&An(new ma)!=dn||Zf&&An(Zf.resolve())!=Rc||oo&&An(new oo)!=_n||ba&&An(new ba)!=Kn)&&(An=function(o){var c=Rn(o),l=c==Zn?o.constructor:t,p=l?Ss(l):"";if(p)switch(p){case CA:return g;case LA:return dn;case KA:return Rc;case NA:return _n;case DA:return Kn}return c});function Z1(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=Sn(c,o+P);break;case"takeRight":o=Zt(o,c-P);break}}return{start:o,end:c}}function ek(o){var c=o.match(oS);return c?c[1].split(aS):[]}function zy(o,c,l){c=zi(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=Xr(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&yu(b)&&vi(P,b)&&(Le(o)||As(o)))}function tk(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&lt.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function Wy(o){return typeof o.constructor=="function"&&!Oa(o)?co(Vc(o)):{}}function nk(o,c,l){var p=o.constructor;switch(c){case v:return md(o);case Ft:case vn:return new p(+o);case g:return U1(o,l);case y:case k:case L:case $:case Z:case Ke:case vt:case dt:case _t:return ky(o,l);case dn:return new p;case ps:case wn:return new p(o);case Mi:return F1(o);case _n:return new p;case Ci:return z1(o)}}function rk(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(sS,`{
/* [wrapped with `+c+`] */
`)}function ik(o){return Le(o)||As(o)||!!(Gg&&o&&o[Gg])}function vi(o,c){var l=typeof o;return c=c??Ie,!!c&&(l=="number"||l!="symbol"&&yS.test(o))&&o>-1&&o%1==0&&o<c}function Bn(o,c,l){if(!xt(l))return!1;var p=typeof c;return(p=="number"?Dn(l)&&vi(c,l.length):p=="string"&&c in l)?Ur(l[c],o):!1}function Id(o,c){if(Le(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||rr(o)?!0:tS.test(o)||!eS.test(o)||c!=null&&o in yt(c)}function sk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Ed(o){var c=cu(o),l=_[c];if(typeof l!="function"||!(c in He.prototype))return!1;if(o===l)return!0;var p=Sd(l);return!!p&&o===p[0]}function ok(o){return!!Vg&&Vg in o}var ak=Dc?_i:Vd;function Oa(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||so;return o===l}function Vy(o){return o===o&&!xt(o)}function $y(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in yt(l))}}function ck(o){var c=pu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function uk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|C|N),P=p==N&&l==ae||p==N&&l==V&&o[7].length<=c[8]||p==(N|V)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?Ey(U,B,c[4]):B,o[4]=U?Ni(o[3],d):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?Oy(U,B,c[6]):B,o[6]=U?Ni(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:Sn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function lk(o){var c=[];if(o!=null)for(var l in yt(o))c.push(l);return c}function fk(o){return Fc.call(o)}function jy(o,c,l){return c=Zt(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=Zt(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),er(o,this,B)}}function qy(o,c){return c.length<2?o:_s(o,Ar(c,0,-1))}function dk(o,c){for(var l=o.length,p=Sn(c.length,l),b=Nn(o);p--;){var w=c[p];o[p]=vi(w,l)?b[w]:t}return o}function Od(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var Gy=Yy(yy),Pa=OA||function(o,c){return hn.setTimeout(o,c)},Pd=Yy(L1);function Hy(o,c,l){var p=c+"";return Pd(o,rk(p,hk(ek(p),l)))}function Yy(o){var c=0,l=0;return function(){var p=BA(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function lu(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=ld(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var Jy=ck(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(nS,function(l,p,b,w){c.push(b?w.replace(lS,"$1"):p||l)}),c});function Xr(o){if(typeof o=="string"||rr(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Ss(o){if(o!=null){try{return Uc.call(o)}catch{}try{return o+""}catch{}}return""}function hk(o,c){return vr(cn,function(l){var p="_."+l[0];c&l[1]&&!Cc(o,p)&&o.push(p)}),o.sort()}function Qy(o){if(o instanceof He)return o.clone();var c=new wr(o.__wrapped__,o.__chain__);return c.__actions__=Nn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function pk(o,c,l){(l?Bn(o,c,l):c===t)?c=1:c=Zt(De(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(qc(p/c));b<p;)P[w++]=Ar(o,b,b+=c);return P}function gk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function yk(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return Ki(Le(l)?Nn(l):[l],pn(c,1))}var mk=Ve(function(o,c){return zt(o)?Sa(o,pn(c,1,zt,!0)):[]}),bk=Ve(function(o,c){var l=kr(c);return zt(l)&&(l=t),zt(o)?Sa(o,pn(c,1,zt,!0),Oe(l,2)):[]}),vk=Ve(function(o,c){var l=kr(c);return zt(l)&&(l=t),zt(o)?Sa(o,pn(c,1,zt,!0),t,l):[]});function _k(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),Ar(o,c<0?0:c,p)):[]}function wk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Ar(o,0,c<0?0:c)):[]}function Sk(o,c){return o&&o.length?nu(o,Oe(c,3),!0,!0):[]}function Ak(o,c){return o&&o.length?nu(o,Oe(c,3),!0):[]}function kk(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Bn(o,c,l)&&(l=0,p=b),y1(o,c,l,p)):[]}function Xy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=Zt(p+b,0)),Lc(o,Oe(c,3),b)}function Zy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=De(l),b=l<0?Zt(p+b,0):Sn(b,p-1)),Lc(o,Oe(c,3),b,!0)}function em(o){var c=o==null?0:o.length;return c?pn(o,1):[]}function Ik(o){var c=o==null?0:o.length;return c?pn(o,ye):[]}function Ek(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:De(c),pn(o,c)):[]}function Ok(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function tm(o){return o&&o.length?o[0]:t}function Pk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=Zt(p+b,0)),to(o,c,b)}function Tk(o){var c=o==null?0:o.length;return c?Ar(o,0,-1):[]}var Rk=Ve(function(o){var c=Ot(o,gd);return c.length&&c[0]===o[0]?sd(c):[]}),Bk=Ve(function(o){var c=kr(o),l=Ot(o,gd);return c===kr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?sd(l,Oe(c,2)):[]}),xk=Ve(function(o){var c=kr(o),l=Ot(o,gd);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?sd(l,t,c):[]});function Mk(o,c){return o==null?"":TA.call(o,c)}function kr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function Ck(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=De(l),b=b<0?Zt(p+b,0):Sn(b,p-1)),c===c?hA(o,c,b):Lc(o,Lg,b,!0)}function Lk(o,c){return o&&o.length?dy(o,De(c)):t}var Kk=Ve(nm);function nm(o,c){return o&&o.length&&c&&c.length?ud(o,c):o}function Nk(o,c,l){return o&&o.length&&c&&c.length?ud(o,c,Oe(l,2)):o}function Dk(o,c,l){return o&&o.length&&c&&c.length?ud(o,c,t,l):o}var Uk=bi(function(o,c){var l=o==null?0:o.length,p=td(o,c);return gy(o,Ot(c,function(b){return vi(b,l)?+b:b}).sort(Iy)),p});function Fk(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Oe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return gy(o,b),l}function Td(o){return o==null?o:MA.call(o)}function zk(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Bn(o,c,l)?(c=0,l=p):(c=c==null?0:De(c),l=l===t?p:De(l)),Ar(o,c,l)):[]}function Wk(o,c){return tu(o,c)}function Vk(o,c,l){return dd(o,c,Oe(l,2))}function $k(o,c){var l=o==null?0:o.length;if(l){var p=tu(o,c);if(p<l&&Ur(o[p],c))return p}return-1}function jk(o,c){return tu(o,c,!0)}function qk(o,c,l){return dd(o,c,Oe(l,2),!0)}function Gk(o,c){var l=o==null?0:o.length;if(l){var p=tu(o,c,!0)-1;if(Ur(o[p],c))return p}return-1}function Hk(o){return o&&o.length?my(o):[]}function Yk(o,c){return o&&o.length?my(o,Oe(c,2)):[]}function Jk(o){var c=o==null?0:o.length;return c?Ar(o,1,c):[]}function Qk(o,c,l){return o&&o.length?(c=l||c===t?1:De(c),Ar(o,0,c<0?0:c)):[]}function Xk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Ar(o,c<0?0:c,p)):[]}function Zk(o,c){return o&&o.length?nu(o,Oe(c,3),!1,!0):[]}function eI(o,c){return o&&o.length?nu(o,Oe(c,3)):[]}var tI=Ve(function(o){return Fi(pn(o,1,zt,!0))}),nI=Ve(function(o){var c=kr(o);return zt(c)&&(c=t),Fi(pn(o,1,zt,!0),Oe(c,2))}),rI=Ve(function(o){var c=kr(o);return c=typeof c=="function"?c:t,Fi(pn(o,1,zt,!0),t,c)});function iI(o){return o&&o.length?Fi(o):[]}function sI(o,c){return o&&o.length?Fi(o,Oe(c,2)):[]}function oI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Fi(o,t,c):[]}function Rd(o){if(!(o&&o.length))return[];var c=0;return o=Li(o,function(l){if(zt(l))return c=Zt(l.length,c),!0}),Gf(c,function(l){return Ot(o,$f(l))})}function rm(o,c){if(!(o&&o.length))return[];var l=Rd(o);return c==null?l:Ot(l,function(p){return er(c,t,p)})}var aI=Ve(function(o,c){return zt(o)?Sa(o,c):[]}),cI=Ve(function(o){return pd(Li(o,zt))}),uI=Ve(function(o){var c=kr(o);return zt(c)&&(c=t),pd(Li(o,zt),Oe(c,2))}),lI=Ve(function(o){var c=kr(o);return c=typeof c=="function"?c:t,pd(Li(o,zt),t,c)}),fI=Ve(Rd);function dI(o,c){return wy(o||[],c||[],wa)}function hI(o,c){return wy(o||[],c||[],Ia)}var pI=Ve(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,rm(o,l)});function im(o){var c=_(o);return c.__chain__=!0,c}function gI(o,c){return c(o),o}function fu(o,c){return c(o)}var yI=bi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return td(w,o)};return c>1||this.__actions__.length||!(p instanceof He)||!vi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:fu,args:[b],thisArg:t}),new wr(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function mI(){return im(this)}function bI(){return new wr(this.value(),this.__chain__)}function vI(){this.__values__===t&&(this.__values__=bm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function _I(){return this}function wI(o){for(var c,l=this;l instanceof Jc;){var p=Qy(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function SI(){var o=this.__wrapped__;if(o instanceof He){var c=o;return this.__actions__.length&&(c=new He(this)),c=c.reverse(),c.__actions__.push({func:fu,args:[Td],thisArg:t}),new wr(c,this.__chain__)}return this.thru(Td)}function AI(){return _y(this.__wrapped__,this.__actions__)}var kI=ru(function(o,c,l){lt.call(o,l)?++o[l]:yi(o,l,1)});function II(o,c,l){var p=Le(o)?Mg:g1;return l&&Bn(o,c,l)&&(c=t),p(o,Oe(c,3))}function EI(o,c){var l=Le(o)?Li:ry;return l(o,Oe(c,3))}var OI=By(Xy),PI=By(Zy);function TI(o,c){return pn(du(o,c),1)}function RI(o,c){return pn(du(o,c),ye)}function BI(o,c,l){return l=l===t?1:De(l),pn(du(o,c),l)}function sm(o,c){var l=Le(o)?vr:Ui;return l(o,Oe(c,3))}function om(o,c){var l=Le(o)?JS:ny;return l(o,Oe(c,3))}var xI=ru(function(o,c,l){lt.call(o,l)?o[l].push(c):yi(o,l,[c])});function MI(o,c,l,p){o=Dn(o)?o:po(o),l=l&&!p?De(l):0;var b=o.length;return l<0&&(l=Zt(b+l,0)),mu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&to(o,c,l)>-1}var CI=Ve(function(o,c,l){var p=-1,b=typeof c=="function",w=Dn(o)?q(o.length):[];return Ui(o,function(P){w[++p]=b?er(c,P,l):Aa(P,c,l)}),w}),LI=ru(function(o,c,l){yi(o,l,c)});function du(o,c){var l=Le(o)?Ot:uy;return l(o,Oe(c,3))}function KI(o,c,l,p){return o==null?[]:(Le(c)||(c=c==null?[]:[c]),l=p?t:l,Le(l)||(l=l==null?[]:[l]),hy(o,c,l))}var NI=ru(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function DI(o,c,l){var p=Le(o)?Wf:Ng,b=arguments.length<3;return p(o,Oe(c,4),l,b,Ui)}function UI(o,c,l){var p=Le(o)?QS:Ng,b=arguments.length<3;return p(o,Oe(c,4),l,b,ny)}function FI(o,c){var l=Le(o)?Li:ry;return l(o,gu(Oe(c,3)))}function zI(o){var c=Le(o)?Xg:M1;return c(o)}function WI(o,c,l){(l?Bn(o,c,l):c===t)?c=1:c=De(c);var p=Le(o)?l1:C1;return p(o,c)}function VI(o){var c=Le(o)?f1:K1;return c(o)}function $I(o){if(o==null)return 0;if(Dn(o))return mu(o)?ro(o):o.length;var c=An(o);return c==dn||c==_n?o.size:ad(o).length}function jI(o,c,l){var p=Le(o)?Vf:N1;return l&&Bn(o,c,l)&&(c=t),p(o,Oe(c,3))}var qI=Ve(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Bn(o,c[0],c[1])?c=[]:l>2&&Bn(c[0],c[1],c[2])&&(c=[c[0]]),hy(o,pn(c,1),[])}),hu=EA||function(){return hn.Date.now()};function GI(o,c){if(typeof c!="function")throw new _r(a);return o=De(o),function(){if(--o<1)return c.apply(this,arguments)}}function am(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,mi(o,N,t,t,t,t,c)}function cm(o,c){var l;if(typeof c!="function")throw new _r(a);return o=De(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Bd=Ve(function(o,c,l){var p=R;if(l.length){var b=Ni(l,fo(Bd));p|=de}return mi(o,p,c,l,b)}),um=Ve(function(o,c,l){var p=R|C;if(l.length){var b=Ni(l,fo(um));p|=de}return mi(c,p,o,l,b)});function lm(o,c,l){c=l?t:c;var p=mi(o,ae,t,t,t,t,t,c);return p.placeholder=lm.placeholder,p}function fm(o,c,l){c=l?t:c;var p=mi(o,oe,t,t,t,t,t,c);return p.placeholder=fm.placeholder,p}function dm(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new _r(a);c=Ir(c)||0,xt(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?Zt(Ir(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function we(Wt){var Fr=p,Si=b;return p=b=t,ne=Wt,P=o.apply(Si,Fr),P}function Te(Wt){return ne=Wt,B=Pa(qe,c),re?we(Wt):P}function Ue(Wt){var Fr=Wt-U,Si=Wt-ne,Bm=c-Fr;return ce?Sn(Bm,w-Si):Bm}function Re(Wt){var Fr=Wt-U,Si=Wt-ne;return U===t||Fr>=c||Fr<0||ce&&Si>=w}function qe(){var Wt=hu();if(Re(Wt))return Ye(Wt);B=Pa(qe,Ue(Wt))}function Ye(Wt){return B=t,ge&&p?we(Wt):(p=b=t,P)}function ir(){B!==t&&Sy(B),ne=0,p=U=b=B=t}function xn(){return B===t?P:Ye(hu())}function sr(){var Wt=hu(),Fr=Re(Wt);if(p=arguments,b=this,U=Wt,Fr){if(B===t)return Te(U);if(ce)return Sy(B),B=Pa(qe,c),we(U)}return B===t&&(B=Pa(qe,c)),P}return sr.cancel=ir,sr.flush=xn,sr}var HI=Ve(function(o,c){return ty(o,1,c)}),YI=Ve(function(o,c,l){return ty(o,Ir(c)||0,l)});function JI(o){return mi(o,J)}function pu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new _r(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(pu.Cache||gi),l}pu.Cache=gi;function gu(o){if(typeof o!="function")throw new _r(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function QI(o){return cm(2,o)}var XI=D1(function(o,c){c=c.length==1&&Le(c[0])?Ot(c[0],tr(Oe())):Ot(pn(c,1),tr(Oe()));var l=c.length;return Ve(function(p){for(var b=-1,w=Sn(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return er(o,this,p)})}),xd=Ve(function(o,c){var l=Ni(c,fo(xd));return mi(o,de,t,c,l)}),hm=Ve(function(o,c){var l=Ni(c,fo(hm));return mi(o,E,t,c,l)}),ZI=bi(function(o,c){return mi(o,V,t,t,t,c)});function eE(o,c){if(typeof o!="function")throw new _r(a);return c=c===t?c:De(c),Ve(o,c)}function tE(o,c){if(typeof o!="function")throw new _r(a);return c=c==null?0:Zt(De(c),0),Ve(function(l){var p=l[c],b=Wi(l,0,c);return p&&Ki(b,p),er(o,this,b)})}function nE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new _r(a);return xt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),dm(o,c,{leading:p,maxWait:c,trailing:b})}function rE(o){return am(o,1)}function iE(o,c){return xd(yd(c),o)}function sE(){if(!arguments.length)return[];var o=arguments[0];return Le(o)?o:[o]}function oE(o){return Sr(o,O)}function aE(o,c){return c=typeof c=="function"?c:t,Sr(o,O,c)}function cE(o){return Sr(o,m|O)}function uE(o,c){return c=typeof c=="function"?c:t,Sr(o,m|O,c)}function lE(o,c){return c==null||ey(o,c,un(c))}function Ur(o,c){return o===c||o!==o&&c!==c}var fE=au(id),dE=au(function(o,c){return o>=c}),As=oy(function(){return arguments}())?oy:function(o){return Kt(o)&&lt.call(o,"callee")&&!qg.call(o,"callee")},Le=q.isArray,hE=Og?tr(Og):w1;function Dn(o){return o!=null&&yu(o.length)&&!_i(o)}function zt(o){return Kt(o)&&Dn(o)}function pE(o){return o===!0||o===!1||Kt(o)&&Rn(o)==Ft}var Vi=PA||Vd,gE=Pg?tr(Pg):S1;function yE(o){return Kt(o)&&o.nodeType===1&&!Ta(o)}function mE(o){if(o==null)return!0;if(Dn(o)&&(Le(o)||typeof o=="string"||typeof o.splice=="function"||Vi(o)||ho(o)||As(o)))return!o.length;var c=An(o);if(c==dn||c==_n)return!o.size;if(Oa(o))return!ad(o).length;for(var l in o)if(lt.call(o,l))return!1;return!0}function bE(o,c){return ka(o,c)}function vE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?ka(o,c,t,l):!!p}function Md(o){if(!Kt(o))return!1;var c=Rn(o);return c==mr||c==Yr||typeof o.message=="string"&&typeof o.name=="string"&&!Ta(o)}function _E(o){return typeof o=="number"&&Hg(o)}function _i(o){if(!xt(o))return!1;var c=Rn(o);return c==Xn||c==hi||c==yr||c==Tf}function pm(o){return typeof o=="number"&&o==De(o)}function yu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ie}function xt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Kt(o){return o!=null&&typeof o=="object"}var gm=Tg?tr(Tg):k1;function wE(o,c){return o===c||od(o,c,Ad(c))}function SE(o,c,l){return l=typeof l=="function"?l:t,od(o,c,Ad(c),l)}function AE(o){return ym(o)&&o!=+o}function kE(o){if(ak(o))throw new Me(s);return ay(o)}function IE(o){return o===null}function EE(o){return o==null}function ym(o){return typeof o=="number"||Kt(o)&&Rn(o)==ps}function Ta(o){if(!Kt(o)||Rn(o)!=Zn)return!1;var c=Vc(o);if(c===null)return!0;var l=lt.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&Uc.call(l)==SA}var Cd=Rg?tr(Rg):I1;function OE(o){return pm(o)&&o>=-Ie&&o<=Ie}var mm=Bg?tr(Bg):E1;function mu(o){return typeof o=="string"||!Le(o)&&Kt(o)&&Rn(o)==wn}function rr(o){return typeof o=="symbol"||Kt(o)&&Rn(o)==Ci}var ho=xg?tr(xg):O1;function PE(o){return o===t}function TE(o){return Kt(o)&&An(o)==Kn}function RE(o){return Kt(o)&&Rn(o)==Bf}var BE=au(cd),xE=au(function(o,c){return o<=c});function bm(o){if(!o)return[];if(Dn(o))return mu(o)?Nr(o):Nn(o);if(ya&&o[ya])return lA(o[ya]());var c=An(o),l=c==dn?Yf:c==_n?Kc:po;return l(o)}function wi(o){if(!o)return o===0?o:0;if(o=Ir(o),o===ye||o===-ye){var c=o<0?-1:1;return c*$t}return o===o?o:0}function De(o){var c=wi(o),l=c%1;return c===c?l?c-l:c:0}function vm(o){return o?vs(De(o),0,_e):0}function Ir(o){if(typeof o=="number")return o;if(rr(o))return jt;if(xt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=xt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=Dg(o);var l=hS.test(o);return l||gS.test(o)?GS(o.slice(2),l?2:8):dS.test(o)?jt:+o}function _m(o){return Qr(o,Un(o))}function ME(o){return o?vs(De(o),-Ie,Ie):o===0?o:0}function ot(o){return o==null?"":nr(o)}var CE=uo(function(o,c){if(Oa(c)||Dn(c)){Qr(c,un(c),o);return}for(var l in c)lt.call(c,l)&&wa(o,l,c[l])}),wm=uo(function(o,c){Qr(c,Un(c),o)}),bu=uo(function(o,c,l,p){Qr(c,Un(c),o,p)}),LE=uo(function(o,c,l,p){Qr(c,un(c),o,p)}),KE=bi(td);function NE(o,c){var l=co(o);return c==null?l:Zg(l,c)}var DE=Ve(function(o,c){o=yt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Bn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=Un(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||Ur(re,so[ne])&&!lt.call(o,ne))&&(o[ne]=w[ne])}return o}),UE=Ve(function(o){return o.push(t,Dy),er(Sm,t,o)});function FE(o,c){return Cg(o,Oe(c,3),Jr)}function zE(o,c){return Cg(o,Oe(c,3),rd)}function WE(o,c){return o==null?o:nd(o,Oe(c,3),Un)}function VE(o,c){return o==null?o:iy(o,Oe(c,3),Un)}function $E(o,c){return o&&Jr(o,Oe(c,3))}function jE(o,c){return o&&rd(o,Oe(c,3))}function qE(o){return o==null?[]:Zc(o,un(o))}function GE(o){return o==null?[]:Zc(o,Un(o))}function Ld(o,c,l){var p=o==null?t:_s(o,c);return p===t?l:p}function HE(o,c){return o!=null&&zy(o,c,m1)}function Kd(o,c){return o!=null&&zy(o,c,b1)}var YE=My(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Fc.call(c)),o[c]=l},Dd(Fn)),JE=My(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Fc.call(c)),lt.call(o,c)?o[c].push(l):o[c]=[l]},Oe),QE=Ve(Aa);function un(o){return Dn(o)?Qg(o):ad(o)}function Un(o){return Dn(o)?Qg(o,!0):P1(o)}function XE(o,c){var l={};return c=Oe(c,3),Jr(o,function(p,b,w){yi(l,c(p,b,w),p)}),l}function ZE(o,c){var l={};return c=Oe(c,3),Jr(o,function(p,b,w){yi(l,b,c(p,b,w))}),l}var eO=uo(function(o,c,l){eu(o,c,l)}),Sm=uo(function(o,c,l,p){eu(o,c,l,p)}),tO=bi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Ot(c,function(w){return w=zi(w,o),p||(p=w.length>1),w}),Qr(o,wd(o),l),p&&(l=Sr(l,m|I|O,Y1));for(var b=c.length;b--;)hd(l,c[b]);return l});function nO(o,c){return Am(o,gu(Oe(c)))}var rO=bi(function(o,c){return o==null?{}:R1(o,c)});function Am(o,c){if(o==null)return{};var l=Ot(wd(o),function(p){return[p]});return c=Oe(c),py(o,l,function(p,b){return c(p,b[0])})}function iO(o,c,l){c=zi(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[Xr(c[p])];w===t&&(p=b,w=l),o=_i(w)?w.call(o):w}return o}function sO(o,c,l){return o==null?o:Ia(o,c,l)}function oO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Ia(o,c,l,p)}var km=Ky(un),Im=Ky(Un);function aO(o,c,l){var p=Le(o),b=p||Vi(o)||ho(o);if(c=Oe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:xt(o)?l=_i(w)?co(Vc(o)):{}:l={}}return(b?vr:Jr)(o,function(P,B,U){return c(l,P,B,U)}),l}function cO(o,c){return o==null?!0:hd(o,c)}function uO(o,c,l){return o==null?o:vy(o,c,yd(l))}function lO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:vy(o,c,yd(l),p)}function po(o){return o==null?[]:Hf(o,un(o))}function fO(o){return o==null?[]:Hf(o,Un(o))}function dO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Ir(l),l=l===l?l:0),c!==t&&(c=Ir(c),c=c===c?c:0),vs(Ir(o),c,l)}function hO(o,c,l){return c=wi(c),l===t?(l=c,c=0):l=wi(l),o=Ir(o),v1(o,c,l)}function pO(o,c,l){if(l&&typeof l!="boolean"&&Bn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=wi(o),c===t?(c=o,o=0):c=wi(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=Yg();return Sn(o+b*(c-o+qS("1e-"+((b+"").length-1))),c)}return ld(o,c)}var gO=lo(function(o,c,l){return c=c.toLowerCase(),o+(l?Em(c):c)});function Em(o){return Nd(ot(o).toLowerCase())}function Om(o){return o=ot(o),o&&o.replace(mS,sA).replace(KS,"")}function yO(o,c,l){o=ot(o),c=nr(c);var p=o.length;l=l===t?p:vs(De(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function mO(o){return o=ot(o),o&&Q0.test(o)?o.replace(ig,oA):o}function bO(o){return o=ot(o),o&&rS.test(o)?o.replace(xf,"\\$&"):o}var vO=lo(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),_O=lo(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),wO=Ry("toLowerCase");function SO(o,c,l){o=ot(o),c=De(c);var p=c?ro(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return ou(Gc(b),l)+o+ou(qc(b),l)}function AO(o,c,l){o=ot(o),c=De(c);var p=c?ro(o):0;return c&&p<c?o+ou(c-p,l):o}function kO(o,c,l){o=ot(o),c=De(c);var p=c?ro(o):0;return c&&p<c?ou(c-p,l)+o:o}function IO(o,c,l){return l||c==null?c=0:c&&(c=+c),xA(ot(o).replace(Mf,""),c||0)}function EO(o,c,l){return(l?Bn(o,c,l):c===t)?c=1:c=De(c),fd(ot(o),c)}function OO(){var o=arguments,c=ot(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var PO=lo(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function TO(o,c,l){return l&&typeof l!="number"&&Bn(o,c,l)&&(c=l=t),l=l===t?_e:l>>>0,l?(o=ot(o),o&&(typeof c=="string"||c!=null&&!Cd(c))&&(c=nr(c),!c&&no(o))?Wi(Nr(o),0,l):o.split(c,l)):[]}var RO=lo(function(o,c,l){return o+(l?" ":"")+Nd(c)});function BO(o,c,l){return o=ot(o),l=l==null?0:vs(De(l),0,o.length),c=nr(c),o.slice(l,l+c.length)==c}function xO(o,c,l){var p=_.templateSettings;l&&Bn(o,c,l)&&(c=t),o=ot(o),c=bu({},c,p,Ny);var b=bu({},c.imports,p.imports,Ny),w=un(b),P=Hf(b,w),B,U,ne=0,re=c.interpolate||Bc,ce="__p += '",ge=Jf((c.escape||Bc).source+"|"+re.source+"|"+(re===sg?fS:Bc).source+"|"+(c.evaluate||Bc).source+"|$","g"),we="//# sourceURL="+(lt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zS+"]")+`
`;o.replace(ge,function(Re,qe,Ye,ir,xn,sr){return Ye||(Ye=ir),ce+=o.slice(ne,sr).replace(bS,aA),qe&&(B=!0,ce+=`' +
__e(`+qe+`) +
'`),xn&&(U=!0,ce+=`';
`+xn+`;
__p += '`),Ye&&(ce+=`' +
((__t = (`+Ye+`)) == null ? '' : __t) +
'`),ne=sr+Re.length,Re}),ce+=`';
`;var Te=lt.call(c,"variable")&&c.variable;if(!Te)ce=`with (obj) {
`+ce+`
}
`;else if(uS.test(Te))throw new Me(u);ce=(U?ce.replace(ut,""):ce).replace(H0,"$1").replace(Y0,"$1;"),ce="function("+(Te||"obj")+`) {
`+(Te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Ue=Tm(function(){return rt(w,we+"return "+ce).apply(t,P)});if(Ue.source=ce,Md(Ue))throw Ue;return Ue}function MO(o){return ot(o).toLowerCase()}function CO(o){return ot(o).toUpperCase()}function LO(o,c,l){if(o=ot(o),o&&(l||c===t))return Dg(o);if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Nr(c),w=Ug(p,b),P=Fg(p,b)+1;return Wi(p,w,P).join("")}function KO(o,c,l){if(o=ot(o),o&&(l||c===t))return o.slice(0,Wg(o)+1);if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Fg(p,Nr(c))+1;return Wi(p,0,b).join("")}function NO(o,c,l){if(o=ot(o),o&&(l||c===t))return o.replace(Mf,"");if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Ug(p,Nr(c));return Wi(p,b).join("")}function DO(o,c){var l=K,p=j;if(xt(c)){var b="separator"in c?c.separator:b;l="length"in c?De(c.length):l,p="omission"in c?nr(c.omission):p}o=ot(o);var w=o.length;if(no(o)){var P=Nr(o);w=P.length}if(l>=w)return o;var B=l-ro(p);if(B<1)return p;var U=P?Wi(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),Cd(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=Jf(b.source,ot(og.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(nr(b),B)!=B){var ge=U.lastIndexOf(b);ge>-1&&(U=U.slice(0,ge))}return U+p}function UO(o){return o=ot(o),o&&J0.test(o)?o.replace(rg,pA):o}var FO=lo(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),Nd=Ry("toUpperCase");function Pm(o,c,l){return o=ot(o),c=l?t:c,c===t?uA(o)?mA(o):eA(o):o.match(c)||[]}var Tm=Ve(function(o,c){try{return er(o,t,c)}catch(l){return Md(l)?l:new Me(l)}}),zO=bi(function(o,c){return vr(c,function(l){l=Xr(l),yi(o,l,Bd(o[l],o))}),o});function WO(o){var c=o==null?0:o.length,l=Oe();return o=c?Ot(o,function(p){if(typeof p[1]!="function")throw new _r(a);return[l(p[0]),p[1]]}):[],Ve(function(p){for(var b=-1;++b<c;){var w=o[b];if(er(w[0],this,p))return er(w[1],this,p)}})}function VO(o){return p1(Sr(o,m))}function Dd(o){return function(){return o}}function $O(o,c){return o==null||o!==o?c:o}var jO=xy(),qO=xy(!0);function Fn(o){return o}function Ud(o){return cy(typeof o=="function"?o:Sr(o,m))}function GO(o){return ly(Sr(o,m))}function HO(o,c){return fy(o,Sr(c,m))}var YO=Ve(function(o,c){return function(l){return Aa(l,o,c)}}),JO=Ve(function(o,c){return function(l){return Aa(o,l,c)}});function Fd(o,c,l){var p=un(c),b=Zc(c,p);l==null&&!(xt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=Zc(c,un(c)));var w=!(xt(l)&&"chain"in l)||!!l.chain,P=_i(o);return vr(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=Nn(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,Ki([this.value()],arguments))})}),o}function QO(){return hn._===this&&(hn._=AA),this}function zd(){}function XO(o){return o=De(o),Ve(function(c){return dy(c,o)})}var ZO=bd(Ot),eP=bd(Mg),tP=bd(Vf);function Rm(o){return Id(o)?$f(Xr(o)):B1(o)}function nP(o){return function(c){return o==null?t:_s(o,c)}}var rP=Cy(),iP=Cy(!0);function Wd(){return[]}function Vd(){return!1}function sP(){return{}}function oP(){return""}function aP(){return!0}function cP(o,c){if(o=De(o),o<1||o>Ie)return[];var l=_e,p=Sn(o,_e);c=Oe(c),o-=_e;for(var b=Gf(p,c);++l<o;)c(l);return b}function uP(o){return Le(o)?Ot(o,Xr):rr(o)?[o]:Nn(Jy(ot(o)))}function lP(o){var c=++wA;return ot(o)+c}var fP=su(function(o,c){return o+c},0),dP=vd("ceil"),hP=su(function(o,c){return o/c},1),pP=vd("floor");function gP(o){return o&&o.length?Xc(o,Fn,id):t}function yP(o,c){return o&&o.length?Xc(o,Oe(c,2),id):t}function mP(o){return Kg(o,Fn)}function bP(o,c){return Kg(o,Oe(c,2))}function vP(o){return o&&o.length?Xc(o,Fn,cd):t}function _P(o,c){return o&&o.length?Xc(o,Oe(c,2),cd):t}var wP=su(function(o,c){return o*c},1),SP=vd("round"),AP=su(function(o,c){return o-c},0);function kP(o){return o&&o.length?qf(o,Fn):0}function IP(o,c){return o&&o.length?qf(o,Oe(c,2)):0}return _.after=GI,_.ary=am,_.assign=CE,_.assignIn=wm,_.assignInWith=bu,_.assignWith=LE,_.at=KE,_.before=cm,_.bind=Bd,_.bindAll=zO,_.bindKey=um,_.castArray=sE,_.chain=im,_.chunk=pk,_.compact=gk,_.concat=yk,_.cond=WO,_.conforms=VO,_.constant=Dd,_.countBy=kI,_.create=NE,_.curry=lm,_.curryRight=fm,_.debounce=dm,_.defaults=DE,_.defaultsDeep=UE,_.defer=HI,_.delay=YI,_.difference=mk,_.differenceBy=bk,_.differenceWith=vk,_.drop=_k,_.dropRight=wk,_.dropRightWhile=Sk,_.dropWhile=Ak,_.fill=kk,_.filter=EI,_.flatMap=TI,_.flatMapDeep=RI,_.flatMapDepth=BI,_.flatten=em,_.flattenDeep=Ik,_.flattenDepth=Ek,_.flip=JI,_.flow=jO,_.flowRight=qO,_.fromPairs=Ok,_.functions=qE,_.functionsIn=GE,_.groupBy=xI,_.initial=Tk,_.intersection=Rk,_.intersectionBy=Bk,_.intersectionWith=xk,_.invert=YE,_.invertBy=JE,_.invokeMap=CI,_.iteratee=Ud,_.keyBy=LI,_.keys=un,_.keysIn=Un,_.map=du,_.mapKeys=XE,_.mapValues=ZE,_.matches=GO,_.matchesProperty=HO,_.memoize=pu,_.merge=eO,_.mergeWith=Sm,_.method=YO,_.methodOf=JO,_.mixin=Fd,_.negate=gu,_.nthArg=XO,_.omit=tO,_.omitBy=nO,_.once=QI,_.orderBy=KI,_.over=ZO,_.overArgs=XI,_.overEvery=eP,_.overSome=tP,_.partial=xd,_.partialRight=hm,_.partition=NI,_.pick=rO,_.pickBy=Am,_.property=Rm,_.propertyOf=nP,_.pull=Kk,_.pullAll=nm,_.pullAllBy=Nk,_.pullAllWith=Dk,_.pullAt=Uk,_.range=rP,_.rangeRight=iP,_.rearg=ZI,_.reject=FI,_.remove=Fk,_.rest=eE,_.reverse=Td,_.sampleSize=WI,_.set=sO,_.setWith=oO,_.shuffle=VI,_.slice=zk,_.sortBy=qI,_.sortedUniq=Hk,_.sortedUniqBy=Yk,_.split=TO,_.spread=tE,_.tail=Jk,_.take=Qk,_.takeRight=Xk,_.takeRightWhile=Zk,_.takeWhile=eI,_.tap=gI,_.throttle=nE,_.thru=fu,_.toArray=bm,_.toPairs=km,_.toPairsIn=Im,_.toPath=uP,_.toPlainObject=_m,_.transform=aO,_.unary=rE,_.union=tI,_.unionBy=nI,_.unionWith=rI,_.uniq=iI,_.uniqBy=sI,_.uniqWith=oI,_.unset=cO,_.unzip=Rd,_.unzipWith=rm,_.update=uO,_.updateWith=lO,_.values=po,_.valuesIn=fO,_.without=aI,_.words=Pm,_.wrap=iE,_.xor=cI,_.xorBy=uI,_.xorWith=lI,_.zip=fI,_.zipObject=dI,_.zipObjectDeep=hI,_.zipWith=pI,_.entries=km,_.entriesIn=Im,_.extend=wm,_.extendWith=bu,Fd(_,_),_.add=fP,_.attempt=Tm,_.camelCase=gO,_.capitalize=Em,_.ceil=dP,_.clamp=dO,_.clone=oE,_.cloneDeep=cE,_.cloneDeepWith=uE,_.cloneWith=aE,_.conformsTo=lE,_.deburr=Om,_.defaultTo=$O,_.divide=hP,_.endsWith=yO,_.eq=Ur,_.escape=mO,_.escapeRegExp=bO,_.every=II,_.find=OI,_.findIndex=Xy,_.findKey=FE,_.findLast=PI,_.findLastIndex=Zy,_.findLastKey=zE,_.floor=pP,_.forEach=sm,_.forEachRight=om,_.forIn=WE,_.forInRight=VE,_.forOwn=$E,_.forOwnRight=jE,_.get=Ld,_.gt=fE,_.gte=dE,_.has=HE,_.hasIn=Kd,_.head=tm,_.identity=Fn,_.includes=MI,_.indexOf=Pk,_.inRange=hO,_.invoke=QE,_.isArguments=As,_.isArray=Le,_.isArrayBuffer=hE,_.isArrayLike=Dn,_.isArrayLikeObject=zt,_.isBoolean=pE,_.isBuffer=Vi,_.isDate=gE,_.isElement=yE,_.isEmpty=mE,_.isEqual=bE,_.isEqualWith=vE,_.isError=Md,_.isFinite=_E,_.isFunction=_i,_.isInteger=pm,_.isLength=yu,_.isMap=gm,_.isMatch=wE,_.isMatchWith=SE,_.isNaN=AE,_.isNative=kE,_.isNil=EE,_.isNull=IE,_.isNumber=ym,_.isObject=xt,_.isObjectLike=Kt,_.isPlainObject=Ta,_.isRegExp=Cd,_.isSafeInteger=OE,_.isSet=mm,_.isString=mu,_.isSymbol=rr,_.isTypedArray=ho,_.isUndefined=PE,_.isWeakMap=TE,_.isWeakSet=RE,_.join=Mk,_.kebabCase=vO,_.last=kr,_.lastIndexOf=Ck,_.lowerCase=_O,_.lowerFirst=wO,_.lt=BE,_.lte=xE,_.max=gP,_.maxBy=yP,_.mean=mP,_.meanBy=bP,_.min=vP,_.minBy=_P,_.stubArray=Wd,_.stubFalse=Vd,_.stubObject=sP,_.stubString=oP,_.stubTrue=aP,_.multiply=wP,_.nth=Lk,_.noConflict=QO,_.noop=zd,_.now=hu,_.pad=SO,_.padEnd=AO,_.padStart=kO,_.parseInt=IO,_.random=pO,_.reduce=DI,_.reduceRight=UI,_.repeat=EO,_.replace=OO,_.result=iO,_.round=SP,_.runInContext=D,_.sample=zI,_.size=$I,_.snakeCase=PO,_.some=jI,_.sortedIndex=Wk,_.sortedIndexBy=Vk,_.sortedIndexOf=$k,_.sortedLastIndex=jk,_.sortedLastIndexBy=qk,_.sortedLastIndexOf=Gk,_.startCase=RO,_.startsWith=BO,_.subtract=AP,_.sum=kP,_.sumBy=IP,_.template=xO,_.times=cP,_.toFinite=wi,_.toInteger=De,_.toLength=vm,_.toLower=MO,_.toNumber=Ir,_.toSafeInteger=ME,_.toString=ot,_.toUpper=CO,_.trim=LO,_.trimEnd=KO,_.trimStart=NO,_.truncate=DO,_.unescape=UO,_.uniqueId=lP,_.upperCase=FO,_.upperFirst=Nd,_.each=sm,_.eachRight=om,_.first=tm,Fd(_,function(){var o={};return Jr(_,function(c,l){lt.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,vr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),vr(["drop","take"],function(o,c){He.prototype[o]=function(l){l=l===t?1:Zt(De(l),0);var p=this.__filtered__&&!c?new He(this):this.clone();return p.__filtered__?p.__takeCount__=Sn(l,p.__takeCount__):p.__views__.push({size:Sn(l,_e),type:o+(p.__dir__<0?"Right":"")}),p},He.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),vr(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==W||l==Be;He.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Oe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),vr(["head","last"],function(o,c){var l="take"+(c?"Right":"");He.prototype[o]=function(){return this[l](1).value()[0]}}),vr(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");He.prototype[o]=function(){return this.__filtered__?new He(this):this[l](1)}}),He.prototype.compact=function(){return this.filter(Fn)},He.prototype.find=function(o){return this.filter(o).head()},He.prototype.findLast=function(o){return this.reverse().find(o)},He.prototype.invokeMap=Ve(function(o,c){return typeof o=="function"?new He(this):this.map(function(l){return Aa(l,o,c)})}),He.prototype.reject=function(o){return this.filter(gu(Oe(o)))},He.prototype.slice=function(o,c){o=De(o);var l=this;return l.__filtered__&&(o>0||c<0)?new He(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=De(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},He.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},He.prototype.toArray=function(){return this.take(_e)},Jr(He.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof He,ne=B[0],re=U||Le(P),ce=function(qe){var Ye=b.apply(_,Ki([qe],B));return p&&ge?Ye[0]:Ye};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ge=this.__chain__,we=!!this.__actions__.length,Te=w&&!ge,Ue=U&&!we;if(!w&&re){P=Ue?P:new He(this);var Re=o.apply(P,B);return Re.__actions__.push({func:fu,args:[ce],thisArg:t}),new wr(Re,ge)}return Te&&Ue?o.apply(this,B):(Re=this.thru(ce),Te?p?Re.value()[0]:Re.value():Re)})}),vr(["pop","push","shift","sort","splice","unshift"],function(o){var c=Nc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Le(w)?w:[],b)}return this[l](function(P){return c.apply(Le(P)?P:[],b)})}}),Jr(He.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";lt.call(ao,p)||(ao[p]=[]),ao[p].push({name:c,func:l})}}),ao[iu(t,C).name]=[{name:"wrapper",func:t}],He.prototype.clone=UA,He.prototype.reverse=FA,He.prototype.value=zA,_.prototype.at=yI,_.prototype.chain=mI,_.prototype.commit=bI,_.prototype.next=vI,_.prototype.plant=wI,_.prototype.reverse=SI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=AI,_.prototype.first=_.prototype.head,ya&&(_.prototype[ya]=_I),_},io=bA();gs?((gs.exports=io)._=io,Uf._=io):hn._=io}).call(z)})(yl,yl.exports);var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.OrderCacheService=void 0;const Gb=yl.exports,ei=k0,Hb=Hl,Mu=da;class HN{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,ei.observable)([]),this.observableData=(0,ei.makeAutoObservable)(this.observableData),(0,ei.makeObservable)(this,{buyOrdersCache:ei.computed,sellOrdersCache:ei.computed,allOrdersCache:ei.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,Gb.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,ei.runInAction)(()=>{this.orderChanges.push({eventType:Mu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===Hb.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,ei.runInAction)(()=>{this.orderChanges.push({eventType:Mu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,Gb.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,ei.runInAction)(()=>{this.orderChanges.push({eventType:Mu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,ei.runInAction)(()=>{this.orderChanges.push({eventType:Mu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===Hb.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}ff.OrderCacheService=HN;var ha={},df={};Object.defineProperty(df,"__esModule",{value:!0});df.createTransactionFromInstructions=void 0;const YN=Bi,JN=r=>{const e=new YN.Transaction;return e.add(...r),e};df.createTransactionFromInstructions=JN;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.TEN_THOUSAND=ea.ONE_MILLION=void 0;ea.ONE_MILLION=1e6;ea.TEN_THOUSAND=1e4;var zn=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ha,"__esModule",{value:!0});ha.GmClientService=void 0;const ji=Bi,Cu=Np,Ai=as,ph=df,Yb=Lr,vo=Hl,Jb=ea,QN=Qn,XN=vl;class ZN{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return zn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,Ai.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/Jb.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return zn(this,void 0,void 0,function*(){const n=yield(0,Ai.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return zn(this,void 0,void 0,function*(){const i=yield(0,Ai.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return zn(this,void 0,void 0,function*(){const i=yield(0,Ai.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return zn(this,void 0,void 0,function*(){const i=yield(0,Ai.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return zn(this,void 0,void 0,function*(){const s=yield(0,Ai.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return zn(this,void 0,void 0,function*(){const s=yield(0,Ai.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return zn(this,void 0,void 0,function*(){const i=yield(0,Ai.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return zn(this,void 0,void 0,function*(){let h=Cu.createInitializeSellOrderInstruction,d=n,m=i;f===vo.OrderSide.Buy&&(h=Cu.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,Yb.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:A}=O;return{transaction:(0,ph.createTransactionFromInstructions)(A),signers:M}})}getBnPriceForCurrency(e,t,n,i){return zn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,QN.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return zn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Cu.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,ph.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new ji.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new ji.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return zn(this,void 0,void 0,function*(){const f=new ji.PublicKey(t.id),h=new ji.PublicKey(t.orderMint),d=new ji.PublicKey(t.currencyMint),m=new ji.PublicKey(t.owner),I=t.orderType===vo.OrderSide.Buy?n:new ji.PublicKey(t.owner),O=yield(0,Yb.getAssociatedTokenAddress)(n,t.orderType===vo.OrderSide.Buy?h:d),M=yield this.getRegisteredCurrencies(e,s),{saVault:A}=M.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,XN.getStakingAccount)(a,I,u),{instructions:C,signers:Y}=yield(0,Cu.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new ji.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,ph.createTransactionFromInstructions)(C),signers:Y}})}accountItemsToOrders(e,t,n,i){return zn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?vo.OrderSide.Buy:vo.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new vo.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:M,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return zn(this,void 0,void 0,function*(){const n=[],i=yield(0,Ai.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/Jb.TEN_THOUSAND});return n})}}ha.GmClientService=ZN;var Oc={},Lu=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.GmEventService=void 0;const Ca=gt,gh=Gl,yh=da,eD=ha,tD=Qn,Ku=da;class nD{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Lu(this,void 0,void 0,function*(){this.idl=(0,tD.getGmLogsIDL)(this.programId),this.provider=new Ca.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Ca.Program(this.idl,this.programId,this.provider,{instruction:new Ca.BorshInstructionCoder(this.idl),accounts:new Ca.BorshAccountsCoder(this.idl),state:null,events:new Ca.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Ku.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Ku.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Ku.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Ku.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Lu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Lu(this,void 0,void 0,function*(){const t=yield new eD.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new gh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?gh.OrderSide.Buy:gh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(yh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(yh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(yh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Lu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Oc.GmEventService=nD;var _o=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(uf,"__esModule",{value:!0});uf.GmOrderbookService=void 0;const rD=GN,iD=yl.exports,sD=ff,mh=da,Qb=ha,Xb=Oc;class hf{constructor(e,t,n=60){this.gmClientService=new Qb.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new sD.OrderCacheService,this.gmClientService=new Qb.GmClientService,this.gmEventService=new Xb.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return _o(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,rD.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},hf.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return _o(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return _o(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return _o(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new Xb.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return _o(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,iD.pull)(this.eventCallBacks,e)}loadInitialOrders(){return _o(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case mh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case mh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case mh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}uf.GmOrderbookService=hf;hf.HEALTH_CHECK_RATE=5e3;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(uf,r),t(ha,r),t(Oc,r)})(B0);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Np,r),t(as,r),t(da,r),t(Qn,r),t(Gl,r),t(B0,r)})(Kp);var N0=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.createAccountTransaction=Ns.createAccountInstruction=void 0;const ml=gt,Zh=Bi,D0=Kp;function oD(r,e,t,n){return N0(this,void 0,void 0,function*(){const i=(0,D0.getGmIDL)(n),s=new ml.AnchorProvider(r,null,null),a=new ml.Program(i,n,s);return Zh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}Ns.createAccountInstruction=oD;function aD(r,e,t,n){return N0(this,void 0,void 0,function*(){const i=(0,D0.getGmIDL)(n),s=new ml.AnchorProvider(r,null,null),a=new ml.Program(i,n,s),u=new Zh.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(Zh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}Ns.createAccountTransaction=aD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(tn,r),t(zl,r),t(Ns,r)})(Lr);var cD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.harvestRewardsInstruction=void 0;const uD=gt,lD=js,fD=Lr,dD=Jn;function hD({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return cD(this,void 0,void 0,function*(){const a=(0,dD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,fD.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof uD.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,lD.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}Pl.harvestRewardsInstruction=hD;var pf={},pD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(pf,"__esModule",{value:!0});pf.createInitializeStakingInstruction=void 0;const gD=Jn;function yD({connection:r,updateAuthorityAccount:e,programId:t}){return pD(this,void 0,void 0,function*(){const n=(0,gD.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}pf.createInitializeStakingInstruction=yD;var gf={},yf={},Cn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.ESCROW_AUTH=gn.STAKING_VARS=gn.STAKING_ESCROW=gn.STAKING_ACCOUNT=gn.REWARD_AUTH=gn.REWARD_ACCOUNT=gn.REGISTERED_STAKE=void 0;gn.REGISTERED_STAKE=Pe.Buffer.from("registered-stake");gn.REWARD_ACCOUNT=Pe.Buffer.from("reward-account");gn.REWARD_AUTH=Pe.Buffer.from("reward-vault-authority");gn.STAKING_ACCOUNT=Pe.Buffer.from("staking-account");gn.STAKING_ESCROW=Pe.Buffer.from("staking-escrow");gn.STAKING_VARS=Pe.Buffer.from("staking-vars");gn.ESCROW_AUTH=Pe.Buffer.from("escrow-auth");var pa=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.getRewardAuth=Cn.getTokenEscrow=Cn.getStakingVarsAccount=Cn.getStakingAccountsForRegisteredStake=Cn.getStakingAccount=Cn.getRegisteredStake=void 0;const Zb=gt,Pc=Bi,mD=Jn,Tc=gn;function bD(r,e,t,n){return pa(this,void 0,void 0,function*(){return Pc.PublicKey.findProgramAddress([Tc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Cn.getRegisteredStake=bD;function vD(r,e,t){return pa(this,void 0,void 0,function*(){return Pc.PublicKey.findProgramAddress([Tc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Cn.getStakingAccount=vD;function _D(r,e,t){return pa(this,void 0,void 0,function*(){const n=new Zb.AnchorProvider(r,null,null),i=(0,mD.getStakingIdl)(e),s=new Zb.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Cn.getStakingAccountsForRegisteredStake=_D;function wD(r){return pa(this,void 0,void 0,function*(){return Pc.PublicKey.findProgramAddress([Tc.STAKING_VARS],r)})}Cn.getStakingVarsAccount=wD;function SD(r,e,t){return pa(this,void 0,void 0,function*(){return Pc.PublicKey.findProgramAddress([Tc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Cn.getTokenEscrow=SD;function AD(r,e){return pa(this,void 0,void 0,function*(){return Pc.PublicKey.findProgramAddress([Tc.REWARD_AUTH,e.toBuffer()],r)})}Cn.getRewardAuth=AD;var es={},tg=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(es,"__esModule",{value:!0});es.getStakingVarsAccountInfo=es.getStakingAccountInfo=es.getRegisteredStakeAccountInfo=void 0;const ng=Cs,kD=Cn;function ID(r,e,t){return tg(this,void 0,void 0,function*(){return yield(0,ng.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}es.getRegisteredStakeAccountInfo=ID;function ED(r,e,t){return tg(this,void 0,void 0,function*(){return yield(0,ng.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}es.getStakingAccountInfo=ED;function OD(r,e){return tg(this,void 0,void 0,function*(){const t=(0,ng.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,kD.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}es.getStakingVarsAccountInfo=OD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Cn,r),t(es,r),t(gn,r)})(yf);var PD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(gf,"__esModule",{value:!0});gf.registerStakeInstruction=void 0;const ev=gt,TD=js,RD=yf,BD=Jn;function xD({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return PD(this,void 0,void 0,function*(){const u=(0,BD.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,RD.getRegisteredStake)(a,e,n,i),d=yield(0,TD.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new ev.BN(t),new ev.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}gf.registerStakeInstruction=xD;var mf={},MD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(mf,"__esModule",{value:!0});mf.createSettleStakingAccountInstruction=void 0;const CD=Jn;function LD({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return MD(this,void 0,void 0,function*(){const a=(0,CD.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}mf.createSettleStakingAccountInstruction=LD;var bf={},KD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(bf,"__esModule",{value:!0});bf.stakeTokensInstruction=void 0;const ND=js,DD=Jn;function UD({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return KD(this,void 0,void 0,function*(){const f=(0,DD.getStakingProgram)({connection:r,programId:u}),h=yield(0,ND.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}bf.stakeTokensInstruction=UD;var vf={},FD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(vf,"__esModule",{value:!0});vf.unstakeTokensInstruction=void 0;const zD=gt,WD=js,VD=Lr,$D=yf,jD=Jn;function qD({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return FD(this,void 0,void 0,function*(){const s=(0,jD.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,$D.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,VD.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof zD.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,WD.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}vf.unstakeTokensInstruction=qD;var _f={},GD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_f,"__esModule",{value:!0});_f.updateCooldownPeriodInstruction=void 0;const HD=gt,YD=Jn;function JD({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return GD(this,void 0,void 0,function*(){const s=(0,YD.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new HD.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}_f.updateCooldownPeriodInstruction=JD;var wf={},QD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(wf,"__esModule",{value:!0});wf.updateRewardMultiplierInstruction=void 0;const XD=gt,ZD=Jn;function e2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return QD(this,void 0,void 0,function*(){const a=(0,ZD.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new XD.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}wf.updateRewardMultiplierInstruction=e2;var Sf={},t2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.withdrawTokensInstruction=void 0;const n2=gt,r2=js,i2=Jn,s2=Lr;function o2({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return t2(this,void 0,void 0,function*(){const u=(0,i2.getStakingProgram)({connection:r,programId:a}),f=yield(0,r2.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,s2.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof n2.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}Sf.withdrawTokensInstruction=o2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(vv,r),t(_l,r),t(Ol,r),t(Pl,r),t(pf,r),t(gf,r),t(mf,r),t(bf,r),t(vf,r),t(_f,r),t(wf,r),t(Sf,r)})(bv);var U0={},F0={};Object.defineProperty(F0,"__esModule",{value:!0});(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(dc,r),t(F0,r)})(U0);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(bv,r),t(yf,r),t(U0,r),t(Jn,r)})(vl);var z0={};(function(r){var e=z&&z.__awaiter||function(m,I,O,M){function A(R){return R instanceof O?R:new O(function(C){C(R)})}return new(O||(O=Promise))(function(R,C){function Y(de){try{oe(M.next(de))}catch(E){C(E)}}function ae(de){try{oe(M.throw(de))}catch(E){C(E)}}function oe(de){de.done?R(de.value):A(de.value).then(Y,ae)}oe((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=gt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Pe.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,M){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,M),C=s(M),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,M),[C]=yield a(I,O);return yield R.account.playerFactionData.fetch(C)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,M).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(z0);var W0={},Af={};Object.defineProperty(Af,"__esModule",{value:!0});Af.gumDropIdl=void 0;Af.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=z&&z.__createBinding||(Object.create?function(A,R,C,Y){Y===void 0&&(Y=C);var ae=Object.getOwnPropertyDescriptor(R,C);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(A,Y,ae)}:function(A,R,C,Y){Y===void 0&&(Y=C),A[Y]=R[C]}),t=z&&z.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=z&&z.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(R,A,C);return t(R,A),R},i=z&&z.__awaiter||function(A,R,C,Y){function ae(oe){return oe instanceof C?oe:new C(function(de){de(oe)})}return new(C||(C=Promise))(function(oe,de){function E(J){try{V(Y.next(J))}catch(K){de(K)}}function N(J){try{V(Y.throw(J))}catch(K){de(K)}}function V(J){J.done?oe(J.value):ae(J.value).then(E,N)}V((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=gt,a=pc,u=n(je),f=tn,h=Af,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,C=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Pe.Buffer.from("ClaimStatus"),A.toArrayLike(Pe.Buffer,"le",8),R.toBuffer()],C)});r.getClaimStatusKey=m;const I=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,C,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(V=>(0,r.getClaimStatusKey)(V,C,Y)),E=(yield Promise.all(de)).map(V=>V[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const M=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:C,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(C.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),V=oe.get("index"),J=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!V||!J||!K)throw new Error("Invalid claim");const j=J===""?[]:J.split(",").map(yr=>{const Ft=Pe.Buffer.from(u.decode(yr));if(Ft.length!==32)throw new Error("Invalid proof hash length");return Ft}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),W=yield R.getAccountInfo(T);if(W===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(W.data),Be=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ie=yield(0,f.getAssociatedTokenAddress)(ye,Be),$t=yield R.getParsedTokenAccountsByOwner(ye,{mint:Be}),jt=new s.BN(V),_e=new s.BN(N),[We,Qt]=yield(0,r.getClaimStatusKey)(jt,te,ae),cn=new s.AnchorProvider(R,null,null),kt=new s.Program(h.gumDropIdl,ae,cn),ft=[];return $t.value.length===0&&ft.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Be,Ie,ye,Y)),ft.push(kt.instruction.claim(Qt,jt,_e,Y,j,{accounts:{distributor:te,claimStatus:We,from:T,to:Ie,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),ft});r.claimTokenInstructions=M})(W0);var be={},kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.baseIdl=void 0;kf.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var If={};Object.defineProperty(If,"__esModule",{value:!0});If.scoreLogBaseIdl=void 0;If.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var st=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=gt,gr=pc,V0=Bi,a2=qi,c2=kf,u2=If,Ms=Lr;function Bt(r){const e=c2.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Bt;function Pn(r){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=Pn;function bn(r,e){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=bn;function Gn(r,e,t,n){return st(this,void 0,void 0,function*(){const i=[Pe.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=Gn;function Hr(r,e,t){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=Hr;function Tn(r,e,t){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=Tn;function l2(r,e){return st(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Bt(e),i=new ue.Program(n,e,t),[s]=yield Pn(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=l2;function f2(r,e,t,n){return st(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Bt(e),a=new ue.Program(s,e,i),[u]=yield Tn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=f2;function d2(r,e,t){return st(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(u2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=d2;function h2(r,e,t){return st(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Bt(e),s=new ue.Program(i,e,n),[a]=yield bn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=h2;function Ef(r){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=Ef;function Of(r){return st(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=Of;function p2(r,e){return st(this,void 0,void 0,function*(){const t=Bt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=p2;function g2(r,e){return st(this,void 0,void 0,function*(){const t=Bt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=g2;function y2(r,e,t){return st(this,void 0,void 0,function*(){const n=Bt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield Tn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=y2;function m2(r,e,t,n,i,s,a,u){return st(this,void 0,void 0,function*(){const f=Bt(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield Ef(u),[O,M]=yield Of(u),[A,R]=yield Pn(u);return yield d.instruction.processInitialize(R,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:V0.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=m2;function b2(r,e,t,n,i,s,a,u,f,h,d,m,I){return st(this,void 0,void 0,function*(){const O=Bt(I),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,M),[R,C]=yield bn(I,t),[Y,ae]=yield Pn(I);return yield A.instruction.processRegisterShip(ae,C,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:V0.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=b2;function v2(r,e,t,n){return st(this,void 0,void 0,function*(){const i=Bt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield bn(n,t),[h,d]=yield Pn(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=v2;function _2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const s=Bt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield bn(i,t),[d,m]=yield Pn(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=_2;function w2(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return st(this,void 0,void 0,function*(){const[u,f]=yield Hr(s,n,e),[h,d]=yield Gn(s,n,null,e),[m,I]=yield Tn(s,n,e),[O,M]=yield bn(s,n),[A]=yield(0,a2.getPlayerFactionPDA)(e,a),R=Bt(s),C=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,C).instruction.processInitialDeposit(I,M,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=w2;function S2(r,e,t,n,i,s){return st(this,void 0,void 0,function*(){const[a,u]=yield Hr(s,n,e),[f,h]=yield Gn(s,n,null,e),[d,m]=yield Tn(s,n,e),[I,O]=yield bn(s,n),M=Bt(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=S2;function A2(r,e,t,n,i,s,a,u){return st(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=A2;function k2(r,e,t,n,i,s,a,u){return st(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=k2;function I2(r,e,t,n,i,s,a,u){return st(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=I2;function E2(r,e,t,n,i,s,a,u){return st(this,void 0,void 0,function*(){const[f,h]=yield Tn(u,i,t),[d,m]=yield bn(u,i),[I,O]=yield Pn(u),M=Bt(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=E2;function O2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const[s,a]=yield Tn(i,n,e),[u,f]=yield bn(i,n),[h,d]=yield Pn(i),m=Bt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=O2;function P2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const[s,a]=yield Tn(i,n,e),[u,f]=yield bn(i,n),[h,d]=yield Ef(i),[m,I]=yield Of(i),O=Bt(i),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,M),R={signers:[],instructions:[]};let C;const Y=yield(0,Ms.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(C=ae.publicKey,R.signers.push(ae)):C=ae;const oe=yield A.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=P2;function T2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ms.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFuel(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=T2;function R2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ms.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFood(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=R2;function B2(r,e,t,n,i){return st(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ms.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawArms(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=B2;function x2(r,e,t,n,i,s){return st(this,void 0,void 0,function*(){const[a,u]=yield Hr(s,t,e),[f,h]=yield Gn(s,t,null,e),[d,m]=yield Tn(s,t,e),[I,O]=yield bn(s,t),[M,A]=yield Pn(s),[R,C]=yield Ef(s),[Y,ae]=yield Of(s),oe={signers:[],instructions:[]},de=Bt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let V;const J=yield(0,Ms.getTokenAccount)(r,e,n),K=J.tokenAccount;"createInstruction"in J&&oe.instructions.push(...J.createInstruction),K instanceof ue.web3.Keypair?(V=K.publicKey,oe.signers.push(K)):V=K;let j;const te=yield(0,Ms.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let W;const X=yield(0,Ms.getTokenAccount)(r,e,i),Be=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Be instanceof ue.web3.Keypair?(W=Be.publicKey,oe.signers.push(Be)):W=Be;const ye=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,C,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:V,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:W,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=x2;function M2(r,e,t,n,i,s,a){return st(this,void 0,void 0,function*(){const[u,f]=yield Hr(a,t,e),[h,d]=yield Gn(a,t,null,e),[m,I]=yield Gn(a,t,n,e),[O,M]=yield Gn(a,t,i,e),[A,R]=yield Gn(a,t,s,e),[C,Y]=yield Pn(a),[ae,oe]=yield Tn(a,t,e),de=Bt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,M,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=M2;var $0={};Object.defineProperty($0,"__esModule",{value:!0});var Ht={},hs=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},C2=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.sendTokens=Ht.confirmTokenBalance=Ht.createMint=Ht.mintTokens=Ht.createAssociatedTokenAccountInstruction=Ht.createRequestUnitsInstruction=Ht.Numberu32=Ht.createATokenAccount=Ht.getAtaForMint=void 0;const Cr=gt,lr=pc,L2=Lr,tv=Hu.exports,nv=C2(rv.exports);function j0(r,e){return hs(this,void 0,void 0,function*(){return Cr.web3.PublicKey.findProgramAddress([e.toBuffer(),lr.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],lr.ASSOCIATED_TOKEN_PROGRAM_ID)})}Ht.getAtaForMint=j0;function K2(r,e,t,n){return hs(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield j0(e,n),s=new Cr.web3.Transaction,a=yield G0(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Ht.createATokenAccount=K2;class q0 extends nv.default{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===4)return t;const n=Pe.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new nv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Ht.Numberu32=q0;function N2(r){return hs(this,void 0,void 0,function*(){const e=new q0(1e6),t=Pe.Buffer.from([0]),n=e.toBuffer();return new Cr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Cr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Pe.Buffer.concat([t,n])})})}Ht.createRequestUnitsInstruction=N2;function G0(r,e,t,n){return hs(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Cr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:lr.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Cr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Cr.web3.TransactionInstruction({keys:i,programId:lr.ASSOCIATED_TOKEN_PROGRAM_ID,data:Pe.Buffer.from([])})})}Ht.createAssociatedTokenAccountInstruction=G0;function D2(r,e,t,n,i){return hs(this,void 0,void 0,function*(){const s=new Cr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(lr.Token.createMintToInstruction(lr.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Ht.mintTokens=D2;function U2(r,e,t,n){return hs(this,void 0,void 0,function*(){const i=Cr.web3.Keypair.generate(),s=new Cr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(lr.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Cr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:lr.MintLayout.span,programId:lr.TOKEN_PROGRAM_ID});s.add(u);const f=lr.Token.createInitMintInstruction(lr.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Ht.createMint=U2;function F2(r,e,t,n){return hs(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,tv.strict)(i===null),i!==null){const s=(0,L2.byteArrayToLong)(i.data.slice(64,72));(0,tv.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Ht.confirmTokenBalance=F2;function z2(r,e,t,n){return hs(this,void 0,void 0,function*(){const i=new Cr.web3.Transaction;return i.add(lr.Token.createTransferInstruction(lr.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Ht.sendTokens=z2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(vl,r),t(z0,r),t(W0,r),t(Kp,r),t(be,r),t($0,r),t(Ht,r),t(Ns,r),t(Lr,r)})(qi);const W2={class:"text-overline"},La="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",bh="ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU",vh="poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",V2=pv({__name:"AccountTemplate",props:["count","function_name","publicKey","mint","program"],setup(r){const e=r,t=Is("[empty]");async function n(){switch(e.function_name){case"getRegisteredStake":{const[i]=await qi.getRegisteredStake(new $e(La),new $e(bh),new $e(e.mint),new $e(vh));t.value=i}break;case"getStakingAccount":{const[i]=await qi.getRegisteredStake(new $e(La),new $e(bh),new $e(e.mint),new $e(vh)),[s]=await qi.getStakingAccount(new $e(La),new $e(e.publicKey),i);t.value=s}break;case"getTokenEscrow":{const[i]=await qi.getRegisteredStake(new $e(La),new $e(bh),new $e(e.mint),new $e(vh)),[s]=await qi.getStakingAccount(new $e(La),new $e(e.publicKey),i);t.value=await Km(new $e(e.mint),s,!0)}break;case"getAssociatedTokenAddress(mint)":t.value=await Km(new $e(e.mint),new $e(e.publicKey),!0,LP,VP.ASSOCIATED_PROGRAM_ID);break;default:t.value="No function called";break}}return gv(()=>e.count,async()=>{await n()}),(i,s)=>(yv(),CP("div",W2,wh(t.value),1))}}),$2={class:"row shadow-3 q-pa-md"},j2={class:"col"},q2={class:"row items-center text-h6"},G2={class:"text-blue-4"},H2={class:"row items-center"},Y2={class:"text-weight-bold"},lU=pv({__name:"AccountsPage",setup(r){const e=Is(0);Is();const t=Is("lookup"),n=Is("none"),i=Is("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),s=Is([{label:"Solana",header:"root",children:[{label:"Tokens",header:"generic",children:[{label:"getAssociatedTokenAddress() by mint",function_name:"getAssociatedTokenAddress(mint)",header:"generic",body:"story"}]}]},{label:"StarAtlas-Factory",header:"root",children:[{label:"Staking (Atlas/Polis)",icon:"restaurant_menu",header:"generic",children:[{label:"getRegisteredStake()",function_name:"getRegisteredStake",header:"generic",body:"story"},{label:"getStakingAccount()",function_name:"getStakingAccount",body:"story"},{label:"getTokenEscrow()",function_name:"getTokenEscrow",body:"story"}]}]}]);KP(()=>{var u;n.value=((u=$d().publicKey.value)==null?void 0:u.toString())??"none"});const a=()=>{e.value++};return gv(()=>$d().publicKey.value,()=>{var u;n.value=((u=$d().publicKey.value)==null?void 0:u.toString())??"none"}),(u,f)=>(yv(),NP(zP,{class:"col items-center justify-evenly"},{default:ks(()=>[Zr(OP,{"no-caps":"","outside-arrows":"","mobile-arrows":"",modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=h=>t.value=h),class:"shadow-2",align:"justify"},{default:ks(()=>[Zr(EP,{name:"lookup",label:"Lookup"})]),_:1},8,["modelValue"]),Zr(FP,{dark:"",modelValue:t.value,"onUpdate:modelValue":f[3]||(f[3]=h=>t.value=h),animated:"",class:"q-mx-xl"},{default:ks(()=>[Zr(Cm,{name:"lookup"},{default:ks(()=>[go("div",$2,[go("div",j2,[Zr(xm,{class:"col",modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=h=>n.value=h),label:"Wallet Address"},null,8,["modelValue"]),Zr(xm,{class:"col",modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=h=>i.value=h),label:"Token Mint"},null,8,["modelValue"])]),Zr(DP,{color:"primary",icon:"send",class:"q-ml-xl",onClick:a})]),Zr(UP,{dark:"",nodes:s.value,"node-key":"label",class:"q-pt-md"},{"header-root":ks(h=>[go("div",q2,[go("div",G2,wh(h.node.label),1)])]),"header-generic":ks(h=>[go("div",H2,[go("div",Y2,wh(h.node.label),1)])]),"body-story":ks(h=>[Zr(V2,{count:e.value,function_name:h.node.function_name,"public-key":n.value,mint:i.value},null,8,["count","function_name","public-key","mint"])]),_:1},8,["nodes"])]),_:1}),Zr(Cm,{name:"staratlas",class:"q-gutter-md"})]),_:1},8,["modelValue"])]),_:1}))}});export{lU as default};
