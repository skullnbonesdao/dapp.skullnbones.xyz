import{Q as ol,a as Xm,b as nT}from"./QInput.68ec1fe3.js";import{Q as Zm,a as rT}from"./QTabPanels.38451ba1.js";import{Q as iT}from"./QPage.96cf1fb8.js";import{bZ as Av,ah as kv,aF as Kh,cg as Nh,aC as sT,P as xe,du as oT,cN as qt,cn as Mi,c$ as Iv,au as Js,b1 as Xs,ai as Ev,ck as Ki,J as Hn,ak as vc,as as ke,bx as qe,dv as Ov,cm as Pv,al as gr,a1 as hr,bz as Tv,a6 as vp,d6 as ic,cQ as Dh,ar as ai,cP as sc,aX as Rv,bs as _p,V as Bu,bX as z,dw as Bv,dx as eb,d as Te,df as xv,dy as ee,dz as Ge,dA as Uh,dt as Mv,d0 as aT,dB as Cv,dC as Lv,c_ as ls,dD as Kv,dE as cT,dF as uT,bW as _c,dG as nt,dm as ie,dn as se,dq as Bt,dl as Ie,dH as Pt,dI as vr,dJ as bi,dK as F,dL as la,dM as fa,dN as Ce,dO as vi,dP as x,dQ as S,dR as H,dS as G,dT as le,dU as Xt,dV as xl,dW as yt,dX as he,ds as Ft,dY as wc,di as Xe,dZ as al,d_ as Nv,d$ as ei,e0 as Dv,e1 as Uv,e2 as Fv,dj as zv,dk as wp,e3 as tb,e4 as lT,e5 as fT,e6 as dT,e7 as hT}from"./index.1c37b3f1.js";import{Q as pT}from"./use-prevent-scroll.f099ee78.js";import{b as Wv,h as Fh,f as ih,a as gT,t as yT}from"./token.af474fb7.js";import{Q as Vv,a as $v}from"./QToolbar.e9da7767.js";import{a as jv,Q as qv}from"./QCard.bc2dcea0.js";import{C as Gv}from"./ClosePopup.68a2a162.js";import{c as mT,a as bT,b as nb,d as cl,_ as Ua}from"./defineProperty.4a43e26f.js";import{g as jo,c as vT}from"./associatedTokenAccount.fbe827b9.js";import{Q as _T}from"./QTree.d1d211e8.js";import{s as Zs}from"./sha256.9fc5b71c.js";import"./touch.3df10340.js";import"./QSeparator.7441461f.js";import"./QSlideTransition.545f7f14.js";var lr=Av({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(r,{slots:e}){const t=sT(),n=kv(()=>"q-td"+(r.autoWidth===!0?" q-table--col-auto-width":"")+(r.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(r.props===void 0)return Kh("td",{class:n.value},Nh(e.default));const i=t.vnode.key,s=(r.props.colsMap!==void 0?r.props.colsMap[i]:null)||r.props.col;if(s===void 0)return;const{row:a}=r.props;return Kh("td",{class:n.value+s.__tdClass(a),style:s.__tdStyle(a)},Nh(e.default))}}}),wT=Av({name:"QTr",props:{props:Object,noHover:Boolean},setup(r,{slots:e}){const t=kv(()=>"q-tr"+(r.props===void 0||r.props.header===!0?"":" "+r.props.__trClass)+(r.noHover===!0?" q-tr--no-hover":""));return()=>Kh("tr",{class:t.value},Nh(e.default))}});new xe("3x5vrFFTspsicxrYHMA8SNVW71RMhVkALemXrJFfeQo1");const sh=oT("walletStore",{state:()=>({_updateCount:0,is_loading:!1,token_accounts:[]}),getters:{},actions:{async update_accounts(){this.is_loading=!0,this.token_accounts=[],qt().publicKey.value&&(this.token_accounts=[],this.token_accounts=(await Mi().connection.getParsedTokenAccountsByOwner(qt().publicKey.value,{programId:Iv})).value),this.is_loading=!1}}}),oh=Js({__name:"SolscanLink",props:["address"],setup(r){return(e,t)=>(Xs(),Ev(Ki,{size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+r.address},null,8,["href"]))}}),ST=gr("span",{class:"text-weight-bold"},"Send Token",-1),AT={class:"text-overline"},kT={class:"row q-gutter-x-md"},IT=Js({__name:"SendTokenButton",props:["mint","decimals"],setup(r){const e=Hn(!1),t=r,n=Hn("6AzZCoxBrJnfWejYZmqcdKUvzdG6yTbRLyuqVYizHWy4"),i=Hn(0);async function s(){const a=new ic,u=await jo(new xe(t.mint),new xe(n.value));console.log(u);const f=await jo(new xe(t.mint),qt().publicKey.value);await Mi().connection.getAccountInfo(u)===null&&a.add(vT(qt().publicKey.value,u,new xe(n.value),new xe(t.mint))),a.add(mT(f,u,qt().publicKey.value,i.value*Math.pow(10,t.decimals)));try{const d=await qt().sendTransaction(a,Mi().connection);await Fh(d)}catch(d){Dh.create({color:"red",message:`${d}`,timeout:5e3})}}return(a,u)=>(Xs(),vc(vp,null,[ke(Ki,{size:"sm",icon:"send",onClick:u[0]||(u[0]=f=>e.value=!0)}),ke(Wv,{modelValue:e.value,"onUpdate:modelValue":u[4]||(u[4]=f=>e.value=f)},{default:qe(()=>[ke(jv,null,{default:qe(()=>[ke(Vv,{class:"q-mt-md"},{default:qe(()=>[ke(Ov,null,{default:qe(()=>[ke(Pv,{name:"send"})]),_:1}),ke($v,null,{default:qe(()=>[ST,gr("div",AT,hr(r.mint),1)]),_:1}),Tv(ke(Ki,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Gv]])]),_:1}),ke(qv,{class:"q-gutter-y-md"},{default:qe(()=>[gr("div",null,[ke(ol,{label:"Receiver",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f)},null,8,["modelValue"])]),gr("div",kT,[ke(ol,{class:"col",label:"Amount",modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=f=>i.value=f)},null,8,["modelValue"]),ke(Ki,{color:"primary",icon:"send",onClick:u[3]||(u[3]=f=>s())})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),ET=gr("span",{class:"text-weight-bold"},"Close/Burn Account",-1),OT={class:"text-overline"},PT=gr("div",{class:"q-ma-md text-right text-weight-light"},"fee: 0.00001sol",-1),TT=Js({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(r){const e=Hn(!1),t=r;Hn(""),Hn(0);async function n(){const s=new ic,a=await jo(new xe(t.mint),qt().publicKey.value);s.add(bT(a,new xe(t.mint),qt().publicKey.value,t.amount*Math.pow(10,t.decimals))),s.add(nb(a,qt().publicKey.value,qt().publicKey.value)),Mi().fee_wallet&&s.add(sc.transfer({fromPubkey:qt().publicKey.value,toPubkey:new xe(Mi().fee_wallet),lamports:1e4}));try{const u=await qt().sendTransaction(s,Mi().connection);await Fh(u)}catch(u){Dh.create({color:"red",message:`${u}`,timeout:5e3})}}async function i(){const s=new ic,a=await jo(new xe(t.mint),qt().publicKey.value);s.add(nb(a,qt().publicKey.value,qt().publicKey.value)),Mi().fee_wallet&&s.add(sc.transfer({fromPubkey:qt().publicKey.value,toPubkey:new xe(Mi().fee_wallet),lamports:1e4}));try{const u=await qt().sendTransaction(s,Mi().connection);await Fh(u)}catch(u){Dh.create({color:"red",message:`${u}`,timeout:5e3})}}return(s,a)=>(Xs(),vc(vp,null,[ke(Ki,{size:"sm",icon:"edit",onClick:a[0]||(a[0]=u=>e.value=!0)}),ke(Wv,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value=u)},{default:qe(()=>[ke(jv,null,{default:qe(()=>[ke(Vv,{class:"q-mt-md"},{default:qe(()=>[ke(Ov,null,{default:qe(()=>[ke(Pv,{name:"edit"})]),_:1}),ke($v,null,{default:qe(()=>[ET,gr("div",OT,hr(r.mint),1)]),_:1}),Tv(ke(Ki,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Gv]])]),_:1}),ke(qv,{class:"q-gutter-y-md col justify-around"},{default:qe(()=>[ke(Ki,{class:"full-width",icon:"fireplace",color:"red",onClick:a[1]||(a[1]=u=>n())},{default:qe(()=>[ai(" Burn and close Account ")]),_:1}),ke(Ki,{disabled:r.amount>0,class:"full-width",icon:"fireplace",color:"orange",onClick:a[2]||(a[2]=u=>i())},{default:qe(()=>[ai(" Close Account")]),_:1},8,["disabled"])]),_:1}),PT]),_:1})]),_:1},8,["modelValue"])],64))}}),RT=Js({__name:"AccountWalletAccounts",setup(r){Hn();const e=[{name:"account",required:!0,label:"Account",align:"center",sortable:!0},{name:"account_link",align:"left"},{name:"mint",required:!0,label:"Token-Mint",align:"center",sortable:!0},{name:"mint_link",align:"left"},{name:"owner",align:"center",label:"Owner",sortable:!0},{name:"owner_link",align:"left"},{name:"state",align:"center",label:"State",sortable:!0},{name:"space",label:"Space",sortable:!0},{name:"lamports",label:"Lamports",sortable:!0},{name:"decimals",label:"Decimals",sortable:!0},{name:"amount",label:"Amount",sortable:!0},{label:"Edit",align:"center",name:"edit"},{label:"Send",align:"center",name:"send"}];return Rv(async()=>{await sh().update_accounts()}),_p(()=>qt().publicKey.value,async()=>{await sh().update_accounts()}),(t,n)=>(Xs(),vc("div",null,[ke(gT,{dense:"","hide-pagination":"",title:"Accounts",rows:Bu(sh)().token_accounts,columns:e,"row-key":"name"},{body:qe(i=>[ke(wT,{props:i},{default:qe(()=>[ke(lr,{key:"account",props:i},{default:qe(()=>[ai(hr(Bu(ih)(i.row.pubkey.toString())),1)]),_:2},1032,["props"]),ke(lr,{key:"account_link",props:i},{default:qe(()=>[ke(oh,{address:i.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),ke(lr,{key:"mint",props:i,class:""},{default:qe(()=>[ai(hr(Bu(ih)(i.row.account.data.parsed.info.mint)),1)]),_:2},1032,["props"]),ke(lr,{key:"mint_link",props:i},{default:qe(()=>[ke(oh,{address:i.row.account.data.parsed.info.mint},null,8,["address"])]),_:2},1032,["props"]),ke(lr,{key:"owner",props:i},{default:qe(()=>[ai(hr(Bu(ih)(i.row.account.data.parsed.info.owner)),1)]),_:2},1032,["props"]),ke(lr,{key:"owner_link",props:i},{default:qe(()=>[ke(oh,{address:i.row.account.data.parsed.info.owner},null,8,["address"])]),_:2},1032,["props"]),ke(lr,{key:"state",props:i},{default:qe(()=>[ai(hr(i.row.account.data.parsed.info.state),1)]),_:2},1032,["props"]),ke(lr,{key:"space",props:i},{default:qe(()=>[ai(hr(i.row.account.space),1)]),_:2},1032,["props"]),ke(lr,{key:"lamports",props:i},{default:qe(()=>[ai(hr(i.row.account.lamports),1)]),_:2},1032,["props"]),ke(lr,{key:"decimals",props:i},{default:qe(()=>[ai(hr(i.row.account.data.parsed.info.tokenAmount.decimals),1)]),_:2},1032,["props"]),ke(lr,{key:"amount",props:i},{default:qe(()=>[ke(pT,{color:"teal"},{default:qe(()=>[ai(hr(i.row.account.data.parsed.info.tokenAmount.uiAmount.toFixed(2)),1)]),_:2},1024)]),_:2},1032,["props"]),ke(lr,{key:"edit",props:i,class:""},{default:qe(()=>[ke(TT,{amount:i.row.account.data.parsed.info.tokenAmount.uiAmount,mint:i.row.account.data.parsed.info.mint,decimals:i.row.account.data.parsed.info.tokenAmount.decimals},null,8,["amount","mint","decimals"])]),_:2},1032,["props"]),ke(lr,{key:"send",props:i,class:""},{default:qe(()=>[ke(IT,{mint:i.row.account.data.parsed.info.mint,decimals:i.row.account.data.parsed.info.tokenAmount.decimals},null,8,["mint","decimals"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]))}});var ts={},Ml={},Hv={},Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});var Cl={},er={},zs={},Sp={exports:{}};const BT=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},Qv=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=BT(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};Sp.exports=Qv;Sp.exports.default=Qv;var vn=Sp.exports,Ue={};(function(r){var e=z&&z.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=eb,n=xv,i=e(Bv.exports);var s=eb;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Te.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,W){super(j.span,W),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,j){return new O(K,j)}r.option=M;function A(K){return new m(t.u8(),R,C,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:W})=>W,W=>({values:W}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function W({tag:X,data:Me}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Me}return new m(T,W,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Te.Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((W,X)=>T.addVariant(X,W,W.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:W})=>W,W=>({values:W}),te)}r.array=N;class V extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),W=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,W]}encode(j,te,T){T=T||0;const W=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+W);return W+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function Q(K,j,te){const T=t.u32("length"),W=t.struct([T,t.seq(new V(K,j),t.offset(T,-T.span),"values")]);return new m(W,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=Q})(Ue);var xT=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function Jv(r){return new TextDecoder("utf-8").decode(r)}function Xv(r){return new TextEncoder().encode(r)}var MT=Object.freeze({__proto__:null,decode:Jv,encode:Xv});function Zv(r){return Ge.encode(r)}var CT=Object.freeze({__proto__:null,encode:Zv,decode:function(r){return Ge.decode(r)}});function e_(r){return ee.Buffer.from(Cv(r))}var LT=Object.freeze({__proto__:null,encode:function(r){return Uh(r)},decode:e_}),KT=Object.freeze({__proto__:null,hex:xT,utf8:MT,bs58:CT,base64:LT});function Ap(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function t_(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function Ll(r,e={}){r.forEach(t=>{if("accounts"in t)Ll(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Hr(r){return r instanceof xe?r:new xe(r)}class NT extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Do(r){return typeof r=="object"&&r!=null}function fs(r){return typeof r=="string"?JSON.stringify(r):""+r}function DT(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+fs(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*rb(r,e,t,n){var i;Do(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=DT(s,e,t,n);a&&(yield a)}}function*kp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Do(e.schema)&&Do(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=kp(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):Do(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class gs{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>rb(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>rb(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=Ya(t,n);if(i[0])throw i[0]}(e,this)}create(e){return Ip(e,this)}is(e){return n_(e,this)}mask(e){return function(t,n){const i=Ya(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return Ya(e,this,t)}}function Ip(r,e){const t=Ya(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function n_(r,e){return!Ya(r,e)[0]}function Ya(r,e,t={}){const n=kp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new NT(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Sc(r,e){return new gs({type:r,schema:null,validator:e})}function ah(r){return new gs({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+fs(e)})}function ib(r){const e=fs(r),t=typeof r;return new gs({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+fs(n)})}function xu(r){return new gs({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Mu(){return Sc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+fs(r))}function Qu(r){return new gs({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Cs(){return Sc("string",r=>typeof r=="string"||"Expected a string, but received: "+fs(r))}function ns(r){const e=Object.keys(r);return new gs({type:"type",schema:r,*entries(t){if(Do(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Do(t)||"Expected an object, but received: "+fs(t)})}function r_(r){const e=r.map(t=>t.type).join(" | ");return new gs({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=kp(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+fs(t),...i]}})}function i_(){return Sc("unknown",()=>!0)}async function s_(r,e,t){if(e.length<=99)return await sb(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>sb(r,i,t)))).flat()}}async function sb(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function o_(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=Ip(await r._rpcRequest("simulateTransaction",h),zT);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new Lv("failed to simulate transaction: "+d.error.message,m)}return d.result}function UT(r){return function(e,t,n){return new gs({...e,coercer:(i,s)=>n_(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(a_(r),FT,e=>"error"in e?e:{...e,result:Ip(e.result,r)})}const FT=a_(i_());function a_(r){return r_([ns({jsonrpc:ib("2.0"),id:Cs(),result:r}),ns({jsonrpc:ib("2.0"),id:Cs(),error:ns({code:i_(),message:Cs(),data:Qu(Sc("any",()=>!0))})})])}const zT=(ob=ns({err:xu(r_([ns({}),Cs()])),logs:xu(ah(Cs())),accounts:Qu(xu(ah(xu(ns({executable:Sc("boolean",r=>typeof r=="boolean"),owner:Cs(),lamports:Mu(),data:ah(Cs()),rentEpoch:Qu(Mu())}))))),unitsConsumed:Qu(Mu())}),UT(ns({context:ns({slot:Mu()}),value:ob})));var ob,WT=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=Hr(r),n||(n=qo());const i=new ic;if(i.add(new Mv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:s_,simulateTransaction:o_});class c_{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await ab(this.connection,s,n)}catch(a){if(a instanceof u_){const u=await this.connection.getTransaction(Zv(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new Lv(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await ab(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await o_(this.connection,e,t,n,i);if(s.value.err)throw new VT(s.value);return s.value}}class VT extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function ab(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new u_(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class u_ extends Error{constructor(e){super(e)}}function $T(r){zh=r}function qo(){return zh===null?c_.local():zh}let zh=null;const jT=new Set(["anchor-deprecated-state","debug-logs"]),l_=new Map;function Kl(r){return l_.get(r)!==void 0}var qT=Object.freeze({__proto__:null,set:function(r){if(!jT.has(r))throw new Error("Invalid feature");l_.set(r,!0)},isSet:Kl});class oc extends Error{constructor(e){super(e),this.name="IdlError"}}class da{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new xe(u))}return new da(s)}}class Uo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=da.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new xe(d),new xe(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Uo(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),M={code:m,number:parseInt(I)},A={file:h,line:parseInt(d)};return new Uo(M,O,i,e,A,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,M={code:d,number:parseInt(m)};return new Uo(M,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class ac extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=da.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new ac(s,a,e.logs):(a=f_.get(s),a!==void 0?new ac(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function Ep(r,e){Kl("debug-logs")&&console.log("Translating error:",r);const t=Uo.parse(r.logs);if(t)return t;const n=ac.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=da.parse(r.logs),new Proxy(r,i)}return r}const Oe={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},f_=new Map([[Oe.InstructionMissing,"8 byte instruction identifier not provided"],[Oe.InstructionFallbackNotFound,"Fallback functions are not supported"],[Oe.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Oe.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Oe.IdlInstructionStub,"The program was compiled without idl instructions"],[Oe.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Oe.ConstraintMut,"A mut constraint was violated"],[Oe.ConstraintHasOne,"A has_one constraint was violated"],[Oe.ConstraintSigner,"A signer constraint was violated"],[Oe.ConstraintRaw,"A raw constraint was violated"],[Oe.ConstraintOwner,"An owner constraint was violated"],[Oe.ConstraintRentExempt,"A rent exemption constraint was violated"],[Oe.ConstraintSeeds,"A seeds constraint was violated"],[Oe.ConstraintExecutable,"An executable constraint was violated"],[Oe.ConstraintState,"A state constraint was violated"],[Oe.ConstraintAssociated,"An associated constraint was violated"],[Oe.ConstraintAssociatedInit,"An associated init constraint was violated"],[Oe.ConstraintClose,"A close constraint was violated"],[Oe.ConstraintAddress,"An address constraint was violated"],[Oe.ConstraintZero,"Expected zero account discriminant"],[Oe.ConstraintTokenMint,"A token mint constraint was violated"],[Oe.ConstraintTokenOwner,"A token owner constraint was violated"],[Oe.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Oe.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Oe.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Oe.ConstraintSpace,"A space constraint was violated"],[Oe.RequireViolated,"A require expression was violated"],[Oe.RequireEqViolated,"A require_eq expression was violated"],[Oe.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Oe.RequireNeqViolated,"A require_neq expression was violated"],[Oe.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Oe.RequireGtViolated,"A require_gt expression was violated"],[Oe.RequireGteViolated,"A require_gte expression was violated"],[Oe.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Oe.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Oe.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Oe.AccountDidNotDeserialize,"Failed to deserialize the account"],[Oe.AccountDidNotSerialize,"Failed to serialize the account"],[Oe.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Oe.AccountNotMutable,"The given account is not mutable"],[Oe.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Oe.InvalidProgramId,"Program ID was not as expected"],[Oe.InvalidProgramExecutable,"Program account is not executable"],[Oe.AccountNotSigner,"The given account did not sign"],[Oe.AccountNotSystemOwned,"The given account is not owned by the system program"],[Oe.AccountNotInitialized,"The program expected this account to be already initialized"],[Oe.AccountNotProgramData,"The given account is not a program data account"],[Oe.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Oe.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Oe.StateInvalidAddress,"The given state account does not have the correct address"],[Oe.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Oe.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ul=function(){return ul=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},ul.apply(this,arguments)};function GT(r){return r.toLowerCase()}var HT=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],YT=/[^A-Z0-9]+/gi;function cb(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function QT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?HT:i,a=n.stripRegexp,u=a===void 0?YT:a,f=n.transform,h=f===void 0?GT:f,d=n.delimiter,m=d===void 0?" ":d,I=cb(cb(t,s,"$1\0$2"),u,"\0"),O=0,M=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(O,M).split("\0").map(h).join(m)}(r,ul({delimiter:"."},e))}class yr{static fieldLayout(e,t){const n=e.name!==void 0?vn(e.name):void 0;switch(e.type){case"bool":return Ue.bool(n);case"u8":return Ue.u8(n);case"i8":return Ue.i8(n);case"u16":return Ue.u16(n);case"i16":return Ue.i16(n);case"u32":return Ue.u32(n);case"i32":return Ue.i32(n);case"f32":return Ue.f32(n);case"u64":return Ue.u64(n);case"i64":return Ue.i64(n);case"f64":return Ue.f64(n);case"u128":return Ue.u128(n);case"i128":return Ue.i128(n);case"bytes":return Ue.vecU8(n);case"string":return Ue.str(n);case"publicKey":return Ue.publicKey(n);default:if("vec"in e.type)return Ue.vec(yr.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ue.option(yr.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new oc("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new oc(`Type not found: ${JSON.stringify(e)}`);return yr.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=yr.fieldLayout({name:void 0,type:i},t);return Ue.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>yr.fieldLayout(s,t));return Ue.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=vn(s.name);if(s.fields===void 0)return Ue.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return yr.fieldLayout(f,t)});return Ue.struct(u,a)});return n!==void 0?Ue.rustEnum(i).replicate(n):Ue.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Nl{constructor(e){this.idl=e,this.ixLayout=Nl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=ch("global",n.name);t.set(Ge.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=ch("state",n.name);t.set(Ge.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=vn(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([ch(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return yr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=vn(n.name);return[s,Ue.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return yr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=vn(n.name);return[s,Ue.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):Ge.decode(e));let n=Ge.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return xi.format(e,t,this.idl)}}class xi{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:xi.formatIdlType(u.type),data:xi.formatIdlData(u,e.data[u.name],n.types)})),a=xi.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return xi.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+xi.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+xi.formatIdlData(I,m,n)}).join(", "),f=vn(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return xi.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function ch(r,e){var t;let n=`${r}:${t===void 0&&(t={}),QT(e,ul({delimiter:"_"},t))}`;return ee.Buffer.from(Zs.exports.sha256.digest(n)).slice(0,8)}function Op(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return Qa(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>Qa(r,t.type)).reduce((t,n)=>t+n,0)}function Qa(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Qa(r,e.option);if("coption"in e)return 4+Qa(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new oc(`Type not found: ${JSON.stringify(e)}`);return Op(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return Qa(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const JT=8;class Fo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,yr.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=Fo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(Fo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=Fo.accountDiscriminator(e);return{offset:0,bytes:Ge.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=Op(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(Zs.exports.sha256.digest(`account:${vn(e,{pascalCase:!0})}`)).slice(0,8)}}class d_{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,yr.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[Uh(h_(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(Cv(e))}catch{return null}const n=Uh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function h_(r){return ee.Buffer.from(Zs.exports.sha256.digest(`event:${r}`)).slice(0,8)}class p_{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=yr.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await Pp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function Pp(r){let e=Kl("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(Zs.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class Dl{constructor(e){this.instruction=new Nl(e),this.accounts=new Fo(e),this.events=new d_(e),e.state&&(this.state=new p_(e))}}var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te.global<"u"?Te.global:typeof self<"u"?self:{};function ZT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class _r{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var g_=_r;class Ls extends _r{isCount(){throw new Error("ExternalLayout is abstract")}}class eR extends Ls{constructor(e,t,n){if(!(e instanceof _r))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ul||this.layout instanceof y_}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Ul extends _r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class y_ extends _r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const uh=Math.pow(2,32);class tR extends _r{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*uh+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/uh);return{hi32:a,lo32:s-a*uh}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class nR extends _r{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof _r,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class m_{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ub extends m_{constructor(e,t){if(!(e instanceof Ls&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class b_ extends _r{constructor(e,t,n){const i=e instanceof Ul||e instanceof y_;if(i)e=new ub(new eR(e));else if(e instanceof Ls&&e.isCount())e=new ub(e);else if(!(e instanceof m_))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof _r))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new rR(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Te.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class rR extends _r{constructor(e,t,n,i){if(!(e instanceof b_))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof _r))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class iR extends _r{constructor(e,t){if(!(e instanceof Ls&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ls||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Ls&&(i=e.length),!Te.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Ls&&this.length.encode(i,t,n),i}}var Pn=r=>new Ul(1,r),Zi=r=>new tR(r),Lt=(r,e,t)=>new nR(r,e,t),Fl=(r,e)=>new iR(r,e);class sR{constructor(e){}encode(e,t){switch(vn(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||xe.default).toBuffer()}})}(t);case"initializeAccount":return jt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return jt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return jt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return jt({approve:{amount:n}})}(t);case"revoke":return jt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return jt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return jt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return jt({burn:{amount:n}})}(t);case"closeAccount":return jt({closeAccount:{}});case"freezeAccount":return jt({freezeAccount:{}});case"thawAccount":return jt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return jt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return jt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return jt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return jt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return jt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return jt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return jt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return jt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Kt=(lb=Pn("instruction"),new b_(lb,oR,aR));var lb,oR,aR;function ko(r){return Fl(32,r)}function jt(r){let e=Te.Buffer.alloc(cR),t=Kt.encode(r,e);return e.slice(0,t)}Kt.addVariant(0,Lt([Pn("decimals"),Fl(32,"mintAuthority"),Pn("freezeAuthorityOption"),ko("freezeAuthority")]),"initializeMint"),Kt.addVariant(1,Lt([]),"initializeAccount"),Kt.addVariant(2,Lt([Pn("m")]),"initializeMultisig"),Kt.addVariant(3,Lt([Zi("amount")]),"transfer"),Kt.addVariant(4,Lt([Zi("amount")]),"approve"),Kt.addVariant(5,Lt([]),"revoke"),Kt.addVariant(6,Lt([Pn("authorityType"),Pn("newAuthorityOption"),ko("newAuthority")]),"setAuthority"),Kt.addVariant(7,Lt([Zi("amount")]),"mintTo"),Kt.addVariant(8,Lt([Zi("amount")]),"burn"),Kt.addVariant(9,Lt([]),"closeAccount"),Kt.addVariant(10,Lt([]),"freezeAccount"),Kt.addVariant(11,Lt([]),"thawAccount"),Kt.addVariant(12,Lt([Zi("amount"),Pn("decimals")]),"transferChecked"),Kt.addVariant(13,Lt([Zi("amount"),Pn("decimals")]),"approvedChecked"),Kt.addVariant(14,Lt([Zi("amount"),Pn("decimals")]),"mintToChecked"),Kt.addVariant(15,Lt([Zi("amount"),Pn("decimals")]),"burnedChecked"),Kt.addVariant(16,Lt([ko("authority")]),"InitializeAccount2"),Kt.addVariant(17,Lt([]),"syncNative"),Kt.addVariant(18,Lt([ko("authority")]),"initializeAccount3"),Kt.addVariant(19,Lt([Pn("m")]),"initializeMultisig2"),Kt.addVariant(20,Lt([Pn("decimals"),ko("mintAuthority"),Pn("freezeAuthorityOption"),ko("freezeAuthority")]),"initializeMint2");const cR=Math.max(...Object.values(Kt.registry).map(r=>r.span));class uR{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Ju(r){return new Tp(Fl(8),e=>Rp.fromBuffer(e),e=>e.toBuffer(),r)}function Bo(r){return new Tp(Fl(32),e=>new xe(e),e=>e.toBuffer(),r)}function Ja(r,e){return new lR(r,e)}class Tp extends g_{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class lR extends g_{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Ul(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function fR(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function dR(r){return r?1:0}class Rp extends ls{toBuffer(){const e=super.toArray().reverse(),t=Te.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Te.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Rp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class hR{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Te.Buffer.alloc(165),i=db.encode(t,n);return n.slice(0,i)}case"mint":{const n=Te.Buffer.alloc(82),i=fb.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return db.decode(n)}(t);case"mint":return function(n){return fb.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=Op(this.idl,e))!==null&&t!==void 0?t:0}}const fb=Lt([Ja(Bo(),"mintAuthority"),Ju("supply"),Pn("decimals"),function(r){return new Tp(Pn(),fR,dR,r)}("isInitialized"),Ja(Bo(),"freezeAuthority")]),db=Lt([Bo("mint"),Bo("authority"),Ju("amount"),Ja(Bo(),"delegate"),Pn("state"),Ja(Ju(),"isNative"),Ju("delegatedAmount"),Ja(Bo(),"closeAuthority")]);class pR{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class v_{constructor(e){this.instruction=new sR(e),this.accounts=new hR(e),this.events=new pR(e),this.state=new uR(e)}}var gR=Object.freeze({__proto__:null,hash:function(r){return Zs.exports.sha256(r)}});function __(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=Zs.exports.sha256.digest(n);return new xe(ee.Buffer.from(i))}function w_(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,yR(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=Zs.exports.sha256(new Uint8Array(t)),i=new ls(n,16).toArray(void 0,32);if(xe.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new xe(i)}function Bp(r,e){let t,n=255;for(;n!=0;){try{t=w_(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const yR=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function S_(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:Hr(i).toBuffer())});const[n]=await xe.findProgramAddress(t,Hr(r));return n}var mR=Object.freeze({__proto__:null,createWithSeedSync:__,createProgramAddressSync:w_,findProgramAddressSync:Bp,associated:S_});const Wh=new xe("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Vh=new xe("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var bR=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Wh,ASSOCIATED_PROGRAM_ID:Vh,associatedAddress:async function({mint:r,owner:e}){return(await xe.findProgramAddress([e.toBuffer(),Wh.toBuffer(),r.toBuffer()],Vh))[0]}}),$h={exports:{}};(function(r,e){var t=typeof self<"u"?self:XT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function M(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var W={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(W[Symbol.iterator]=function(){return W}),W}function C(T){this.map={},T instanceof C?T.forEach(function(W,X){this.append(X,W)},this):Array.isArray(T)?T.forEach(function(W){this.append(W[0],W[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(W){this.append(W,T[W])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(W,X){T.onload=function(){W(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var W=new FileReader,X=ae(W);return W.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var W=new Uint8Array(T.byteLength);return W.set(new Uint8Array(T)),W.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var W;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(W=T)&&DataView.prototype.isPrototypeOf(W)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(W){var X=new FileReader,Me=ae(X);return X.readAsText(W),Me}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var X=new Uint8Array(W),Me=new Array(X.length),ye=0;ye<X.length;ye++)Me[ye]=String.fromCharCode(X[ye]);return Me.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(T,W){T=M(T),W=A(W);var X=this.map[T];this.map[T]=X?X+", "+W:W},C.prototype.delete=function(T){delete this.map[M(T)]},C.prototype.get=function(T){return T=M(T),this.has(T)?this.map[T]:null},C.prototype.has=function(T){return this.map.hasOwnProperty(M(T))},C.prototype.set=function(T,W){this.map[M(T)]=A(W)},C.prototype.forEach=function(T,W){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(W,this.map[X],X,this)},C.prototype.keys=function(){var T=[];return this.forEach(function(W,X){T.push(X)}),R(T)},C.prototype.values=function(){var T=[];return this.forEach(function(W){T.push(W)}),R(T)},C.prototype.entries=function(){var T=[];return this.forEach(function(W,X){T.push([X,W])}),R(T)},f&&(C.prototype[Symbol.iterator]=C.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(T,W){var X,Me,ye=(W=W||{}).body;if(T instanceof V){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,W.headers||(this.headers=new C(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=W.credentials||this.credentials||"same-origin",!W.headers&&this.headers||(this.headers=new C(W.headers)),this.method=(X=W.method||this.method||"GET",Me=X.toUpperCase(),N.indexOf(Me)>-1?Me:X),this.mode=W.mode||this.mode||null,this.signal=W.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function Q(T){var W=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Me=X.split("="),ye=Me.shift().replace(/\+/g," "),Ee=Me.join("=").replace(/\+/g," ");W.append(decodeURIComponent(ye),decodeURIComponent(Ee))}}),W}function K(T,W){W||(W={}),this.type="default",this.status=W.status===void 0?200:W.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new C(W.headers),this.url=W.url||"",this._initBody(T)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},E.call(V.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,W){if(j.indexOf(W)===-1)throw new RangeError("Invalid status code");return new K(null,{status:W,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(W,X){this.message=W,this.name=X;var Me=Error(W);this.stack=Me.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,W){return new Promise(function(X,Me){var ye=new V(T,W);if(ye.signal&&ye.signal.aborted)return Me(new a.DOMException("Aborted","AbortError"));var Ee=new XMLHttpRequest;function Gt(){Ee.abort()}Ee.onload=function(){var Ht,_e,$e={status:Ee.status,statusText:Ee.statusText,headers:(Ht=Ee.getAllResponseHeaders()||"",_e=new C,Ht.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(fn){var Et=fn.split(":"),ht=Et.shift().trim();if(ht){var Ar=Et.join(":").trim();_e.append(ht,Ar)}}),_e)};$e.url="responseURL"in Ee?Ee.responseURL:$e.headers.get("X-Request-URL");var en="response"in Ee?Ee.response:Ee.responseText;X(new K(en,$e))},Ee.onerror=function(){Me(new TypeError("Network request failed"))},Ee.ontimeout=function(){Me(new TypeError("Network request failed"))},Ee.onabort=function(){Me(new a.DOMException("Aborted","AbortError"))},Ee.open(ye.method,ye.url,!0),ye.credentials==="include"?Ee.withCredentials=!0:ye.credentials==="omit"&&(Ee.withCredentials=!1),"responseType"in Ee&&h&&(Ee.responseType="blob"),ye.headers.forEach(function(Ht,_e){Ee.setRequestHeader(_e,Ht)}),ye.signal&&(ye.signal.addEventListener("abort",Gt),Ee.onreadystatechange=function(){Ee.readyState===4&&ye.signal.removeEventListener("abort",Gt)}),Ee.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=C,s.Request=V,s.Response=K),a.Headers=C,a.Request=V,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})($h,$h.exports);var vR=ZT($h.exports);async function hb(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=jh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=jh(i.data);return s}const _R=Ue.rustEnum([Ue.struct([],"uninitialized"),Ue.struct([Ue.option(Ue.publicKey(),"authorityAddress")],"buffer"),Ue.struct([Ue.publicKey("programdataAddress")],"program"),Ue.struct([Ue.u64("slot"),Ue.option(Ue.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ue.u32());function jh(r){return _R.decode(r)}var wR=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([hb(r,e),vR(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:hb,decodeUpgradeableLoaderState:jh}),SR=Object.freeze({__proto__:null,sha256:gR,rpc:WT,publicKey:mR,bytes:KT,token:bR,features:qT,registry:wR});const AR=Ue.struct([Ue.publicKey("authority"),Ue.vecU8("data")]);function Ac(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Go{static build(e,t,n){if(e.name==="_inner")throw new oc("the _inner name is reserved");const i=(...s)=>{const[a,u]=Ac(e,[...s]);Ll(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),Kl("debug-logs")&&console.log("Outgoing account metas:",f),new Mv({keys:f,programId:n,data:t(e.name,t_(e,...a))})};return i.accounts=s=>Go.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Go.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=Hr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class A_{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=Ac(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw Ep(h,n)}}}}class k_{static build(e,t){return(...n)=>{var i,s,a;const[,u]=Ac(e,[...n]),f=new ic;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class I_{constructor(e,t,n=qo(),i=new Dl(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=lh(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=Go.build(I,(C,Y)=>i.instruction.encodeState(C,Y),t);O.accounts=C=>function(ae,oe,de,E){if(de.name==="new"){const[N]=Bp([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:lh(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:sc.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return Ll(de.accounts,E),[{pubkey:lh(ae),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(Go.accountsArray(C,I.accounts,I.name));const M=k_.build(I,O),A=A_.build(I,M,Ap(e),n),R=vn(I.name);h[R]=O,d[R]=M,m[R]=A}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await Pp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new Kv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function lh(r){let[e]=Bp([],r);return __(e,"unversioned",r)}class E_{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??qo(),this._coder=s??new Dl(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await s_(this._provider.connection,e.map(n=>Hr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Te.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Fa.get(e.toString());if(n)return n.ee;const i=new Kv;e=Hr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Fa.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Fa.get(e.toString());t?Fa&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Fa.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return sc.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await S_(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Hr(e),t)}}const Fa=new Map,kR=13,IR=14;class O_{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new xp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(cl.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class xp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new OR(e),i=new ER;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(kR):e.slice(IR);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class ER{constructor(){this.stack=[]}program(){return cl.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){cl.exports.ok(this.stack.length>0),this.stack.pop()}}class OR{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const PR=new xe("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function P_(){return new v_(T_)}const T_={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class cc{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new TR(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=vn(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(cc.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=cc.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await xe.findProgramAddress(t,n);this._accounts[vn(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new xe(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=vn(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[vn(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[vn(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Te.Buffer.from([t]);case"u16":let n=Te.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Te.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Te.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Te.Buffer.from(Xv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Te.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}cc.CONST_ACCOUNTS={systemProgram:sc.programId,tokenProgram:Wh,associatedTokenProgram:Vh,rent:aT};class TR{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=P_().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[vn(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class R_{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new RR(d,i,s,a,u,f,e,t,n,h)}}class RR{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new cc(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class uc{constructor(e,t,n,i){t=Hr(t),n||(n=qo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new Dl(e),this._events=new O_(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,M,A,R){const C={},Y={},ae={},oe={},de={},E={},N=Ap(O),V=O.accounts?class{static build(K,j,te,T){var W;const X={};return(W=K.accounts)===null||W===void 0||W.forEach(Me=>{const ye=vn(Me.name);X[ye]=new E_(K,Me,te,T,j)}),X}}.build(O,M,A,R):{},Q=class{static build(K,j,te,T){if(K.state!==void 0)return new I_(K,te,T,j)}}.build(O,M,A,R);return O.instructions.forEach(K=>{const j=Go.build(K,(Ee,Gt)=>M.instruction.encode(Ee,Gt),A),te=k_.build(K,j),T=A_.build(K,te,N,R),W=class{static build(Ee,Gt,Ht,_e,$e,en,fn){return async(...Et)=>{var ht;const Ar=Gt(...Et),[,Wt]=Ac(Ee,[...Et]);let Sn;if(_e.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{Sn=await _e.simulate(Ar,Wt.signers,(ht=Wt.options)===null||ht===void 0?void 0:ht.commitment)}catch(nr){throw Ep(nr,Ht)}if(Sn===void 0)throw new Error("Unable to simulate transaction");const ni=Sn.logs;if(!ni)throw new Error("Simulated logs not found");const kr=[];return fn.events&&new xp(en,$e).parseLogs(ni,nr=>{kr.push(nr)}),{events:kr,raw:ni}}}}.build(K,te,N,R,M,A,O),X=class{static build(Ee,Gt,Ht,_e){const $e=Gt.accounts.find(fn=>fn.isMut),en=!!Gt.returns;if(!$e&&en)return async(...fn)=>{var Et,ht;let Ar=await Ht(...fn);const Wt=`Program return: ${Ee} `;let Sn=Ar.raw.find(nr=>nr.startsWith(Wt));if(!Sn)throw new Error("View expected return log");let ni=e_(Sn.slice(Wt.length)),kr=Gt.returns;if(!kr)throw new Error("View expected return type");return yr.fieldLayout({type:kr},Array.from([...(Et=_e.accounts)!==null&&Et!==void 0?Et:[],...(ht=_e.types)!==null&&ht!==void 0?ht:[]])).decode(ni)}}}.build(A,K,W,O),Me=R_.build(R,A,K,j,te,T,W,X,V),ye=vn(K.name);Y[ye]=j,ae[ye]=te,C[ye]=T,oe[ye]=W,de[ye]=Me,X&&(E[ye]=X)}),[C,Y,ae,V,oe,de,Q,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=Hr(e),i=await uc.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new uc(i,n,t)}static async fetchIdl(e,t){t=t??qo();const n=Hr(e),i=await async function(h){const d=(await xe.findProgramAddress([],h))[0];return await xe.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),AR.decode(u));var u;const f=cT(a.data);return JSON.parse(Jv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class BR{static token(e){return function(t){return new uc(T_,PR,t,P_())}(e)}}var xR=Object.freeze(Object.defineProperty({__proto__:null,web3:uT,ACCOUNT_DISCRIMINATOR_SIZE:JT,AccountClient:E_,AnchorError:Uo,AnchorProvider:c_,BorshAccountsCoder:Fo,BorshCoder:Dl,BorshEventCoder:d_,BorshInstructionCoder:Nl,BorshStateCoder:p_,EventManager:O_,EventParser:xp,IdlError:oc,LangErrorCode:Oe,LangErrorMessage:f_,MethodsBuilderFactory:R_,Program:uc,ProgramError:ac,ProgramErrorStack:da,Spl:BR,SplTokenCoder:v_,StateClient:I_,eventDiscriminator:h_,getProvider:qo,parseIdlErrors:Ap,setProvider:$T,splitArgsAndCtx:Ac,stateDiscriminator:Pp,toInstruction:t_,translateAddress:Hr,translateError:Ep,utils:SR,validateAccounts:Ll,BN:ls},Symbol.toStringTag,{value:"Module"})),mt=_c(xR),kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.stakingIdl=void 0;kc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(zs,"__esModule",{value:!0});zs.getStakingProgram=zs.getStakingIdl=void 0;const pb=mt,MR=kc;function B_(r){const e=MR.stakingIdl;return e.metadata.address=r.toBase58(),e}zs.getStakingIdl=B_;function CR({connection:r,programId:e}){const t=B_(e),n=new pb.AnchorProvider(r,null,null);return new pb.Program(t,e,n)}zs.getStakingProgram=CR;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(zs,r)})(er);var LR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.cancelUnstakeInstruction=void 0;const KR=er;function NR({connection:r,user:e,registeredStake:t,programId:n}){return LR(this,void 0,void 0,function*(){const i=(0,KR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Cl.cancelUnstakeInstruction=NR;var zl={},DR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(zl,"__esModule",{value:!0});zl.createStakingAccountInstruction=void 0;const UR=er;function FR({connection:r,user:e,registeredStake:t,programId:n}){return DR(this,void 0,void 0,function*(){const i=(0,UR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}zl.createStakingAccountInstruction=FR;var Wl={},eo={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=xv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(eo);var Wr={},sn={};const zR=ei.utils.randomPrivateKey,gb=()=>{const r=ei.utils.randomPrivateKey(),e=ll(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},ll=ei.getPublicKey;function yb(r){try{return ei.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Mp=(r,e)=>ei.sign(r,e.slice(0,32)),WR=ei.verify,Ve=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class Cp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Dv(Xa,this))}static decode(e){return Uv(Xa,this,e)}static decodeUnchecked(e){return Fv(Xa,this,e)}}class VR extends Cp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Xa=new Map;var x_;let M_;const C_=32,br=32;function $R(r){return r._bn!==void 0}let mb=1;M_=Symbol.toStringTag;class pe extends Cp{constructor(e){if(super({}),this._bn=void 0,$R(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ge.decode(e);if(t.length!=br)throw new Error("Invalid public key input");this._bn=new ls(t)}else this._bn=new ls(e);if(this._bn.byteLength()>br)throw new Error("Invalid public key input")}}static unique(){const e=new pe(mb);return mb+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===br)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[M_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=al(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>C_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Ve(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=al(n);if(yb(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return yb(t.toBytes())}}x_=pe;pe.default=new x_("11111111111111111111111111111111");Xa.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class jR{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Ve(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Ve(zR()),this._publicKey=Ve(ll(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const qR=new pe("BPFLoader1111111111111111111111111111111111"),ss=1280-40-8,Vl=127,Ho=64;class Lp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Lp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Kp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Kp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class xo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(xo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class lc{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Ye=(r="publicKey")=>Xe(32,r),GR=(r="signature")=>Xe(64,r),Ks=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(vr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},HR=(r="authorized")=>ie([Ye("staker"),Ye("withdrawer")],r),YR=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),Ye("custodian")],r),QR=(r="voteInit")=>ie([Ye("nodePubkey"),Ye("authorizedVoter"),Ye("authorizedWithdrawer"),Ie("commission")],r),JR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Ye("currentAuthorityDerivedKeyOwnerPubkey"),Ks("currentAuthorityDerivedKeySeed"),Ye("newAuthorized")],r);function L_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return L_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function qn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function pr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function rt(r,e){if(!r)throw new Error(e||"Assertion failed")}class $l{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new $l(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];rt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{rt(t.length>0,"Expected at least one writable signer key");const[f]=t[0];rt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(rt(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Zr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ge.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new lc(this.staticAccountKeys)}static compile(e){const t=$l.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new lc(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ge.encode(u.data)}));return new Zr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];pr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(Ge.decode(m.data));let A=[];pr(A,I.length);let R=[];return pr(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];pr(i,n.length);let s=ee.Buffer.alloc(ss);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ie("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Pt(Ie("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Pt(Ie("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Pt(Ye("key"),e,"keys"),Ye("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Ve(m.toBytes())),recentBlockhash:Ge.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Vl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=qn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,br);t=t.slice(br),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,br);t=t.slice(br);const h=qn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=qn(t),A=t.slice(0,M);t=t.slice(M);const R=qn(t),C=t.slice(0,R),Y=Ge.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ge.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new Zr(m)}}class Ws{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new lc(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=$l.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:M}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new lc(u,i).compileInstructions(e.instructions);return new Ws({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();pr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();pr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();pr(s,this.addressTableLookups.length);const a=ie([Ie("prefix"),ie([Ie("numRequiredSignatures"),Ie("numReadonlySignedAccounts"),Ie("numReadonlyUnsignedAccounts")],"header"),Xe(e.length,"staticAccountKeysLength"),Pt(Ye(),this.staticAccountKeys.length,"staticAccountKeys"),Ye("recentBlockhash"),Xe(n.length,"instructionsLength"),Xe(t.length,"serializedInstructions"),Xe(s.length,"addressTableLookupsLength"),Xe(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(ss),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:Ge.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(ss);for(const n of this.compiledInstructions){const i=Array();pr(i,n.accountKeyIndexes.length);const s=Array();pr(s,n.data.length),e+=ie([Ie("programIdIndex"),Xe(i.length,"encodedAccountKeyIndexesLength"),Pt(Ie(),n.accountKeyIndexes.length,"accountKeyIndexes"),Xe(s.length,"encodedDataLength"),Xe(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ss);for(const n of this.addressTableLookups){const i=Array();pr(i,n.writableIndexes.length);const s=Array();pr(s,n.readonlyIndexes.length),e+=ie([Ye("accountKey"),Xe(i.length,"encodedWritableIndexesLength"),Pt(Ie(),n.writableIndexes.length,"writableIndexes"),Xe(s.length,"encodedReadonlyIndexesLength"),Pt(Ie(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Vl;rt(n!==i,"Expected versioned message but received legacy message");const s=i;rt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=qn(t);for(let M=0;M<f;M++)u.push(new pe(t.splice(0,br)));const h=Ge.encode(t.splice(0,br)),d=qn(t),m=[];for(let M=0;M<d;M++){const A=t.shift(),R=qn(t),C=t.splice(0,R),Y=qn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:C,data:ae})}const I=qn(t),O=[];for(let M=0;M<I;M++){const A=new pe(t.splice(0,br)),R=qn(t),C=t.splice(0,R),Y=qn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:C,readonlyIndexes:ae})}return new Ws({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const Np={deserializeMessageVersion(r){const e=r[0],t=e&Vl;return t===e?"legacy":t},deserialize:r=>{const e=Np.deserializeMessageVersion(r);if(e==="legacy")return Zr.from(r);if(e===0)return Ws.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Bi=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const XR=ee.Buffer.alloc(Ho).fill(0);class _t{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new _t(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new pe(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ge.encode(R)}});return M.forEach(A=>{rt(A.programIdIndex>=0),A.accounts.forEach(R=>rt(R>=0))}),new Zr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Mp(n,i.secretKey);this._addSignature(i.publicKey,Ve(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){rt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!WR(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];pr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return rt(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(rt(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),rt(s.length<=ss,`Transaction too large: ${s.length} > ${ss}`),s}get keys(){return rt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return rt(this.instructions.length===1),this.instructions[0].programId}get data(){return rt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=qn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Ho);t=t.slice(Ho),i.push(Ge.encode(ee.Buffer.from(a)))}return lt.populate(Zr.from(t),i)}static populate(e,t=[]){const n=new lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ge.encode(XR)?null:Ge.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new _t({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ge.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Dp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;rt(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;rt(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const M of i){const A=[];for(const C of M.accountKeyIndexes){const Y=m.get(C);if(Y===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ae=C<a;let oe;ae?oe=C<h:C<m.staticAccountKeys.length?oe=C-a<d:oe=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:C<n.numRequiredSignatures,isWritable:oe})}const R=m.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);O.push(new _t({programId:R,data:Ve(M.data),keys:A}))}return new Dp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return Zr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Ws.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Up{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)rt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Ho));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();pr(t,this.signatures.length);const n=ie([Xe(t.length,"encodedSignaturesLength"),Pt(GR(),this.signatures.length,"signatures"),Xe(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=qn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Ho)));const s=Np.deserialize(new Uint8Array(t));return new Up(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));rt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Mp(t,i.secretKey)}}addSignature(e,t){rt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));rt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const ZR=160,eB=64,tB=ZR/eB,K_=1e3/tB,ui=new pe("SysvarC1ock11111111111111111111111111111111"),nB=new pe("SysvarEpochSchedu1e111111111111111111111111"),rB=new pe("Sysvar1nstructions1111111111111111111111111"),Xu=new pe("SysvarRecentB1ockHashes11111111111111111111"),Yo=new pe("SysvarRent111111111111111111111111111111111"),iB=new pe("SysvarRewards111111111111111111111111111111"),sB=new pe("SysvarS1otHashes111111111111111111111111111"),oB=new pe("SysvarS1otHistory11111111111111111111111111"),Zu=new pe("SysvarStakeHistory1111111111111111111111111");async function qh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ms(r){return new Promise(e=>setTimeout(e,r))}function Ze(r,e){const t=r.layout.span>=0?r.layout.span:L_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ut(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const N_=nt("lamportsPerSignature"),D_=ie([se("version"),se("state"),Ye("authorizedPubkey"),Ye("nonce"),ie([N_],"feeCalculator")]),Gh=D_.span;class jl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=D_.decode(Ve(e),0);return new jl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const aB=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},cB=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=aB(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return zv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=wp(a,r);return n(h,u,f)},s},Qo=cB(8);class uB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(kt))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ut(kt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ut(kt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ut(kt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ut(kt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ut(kt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ut(kt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ut(kt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ut(kt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ut(kt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(kt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(kt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ut(kt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(_n.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const kt=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),Ye("programId")])},Assign:{index:1,layout:ie([se("instruction"),Ye("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Qo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Ye("base"),Ks("seed"),Bt("lamports"),Bt("space"),Ye("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Ye("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Ye("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Ye("base"),Ks("seed"),Bt("space"),Ye("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Ye("base"),Ks("seed"),Ye("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Qo("lamports"),Ks("seed"),Ye("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class _n{constructor(){}static createAccount(e){const t=kt.Create,n=Ze(t,{lamports:e.lamports,space:e.space,programId:Ve(e.programId.toBuffer())});return new _t({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=kt.TransferWithSeed;t=Ze(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ve(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=kt.Transfer;t=Ze(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=kt.AssignWithSeed;t=Ze(i,{base:Ve(e.basePubkey.toBuffer()),seed:e.seed,programId:Ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Assign;t=Ze(i,{programId:Ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=kt.CreateWithSeed,n=Ze(t,{base:Ve(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ve(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _t({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new lt;"basePubkey"in e&&"seed"in e?t.add(_n.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Gh,programId:this.programId})):t.add(_n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Gh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=kt.InitializeNonceAccount,n=Ze(t,{authorized:Ve(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xu,isSigner:!1,isWritable:!1},{pubkey:Yo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceAdvance(e){const t=kt.AdvanceNonceAccount,n=Ze(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xu,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceWithdraw(e){const t=kt.WithdrawNonceAccount,n=Ze(t,{lamports:e.lamports});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Xu,isSigner:!1,isWritable:!1},{pubkey:Yo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=kt.AuthorizeNonceAccount,n=Ze(t,{authorized:Ve(e.newAuthorizedPubkey.toBuffer())});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=kt.AllocateWithSeed;t=Ze(i,{base:Ve(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Allocate;t=Ze(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}}_n.programId=new pe("11111111111111111111111111111111");const lB=ss-300;class Vs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Vs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new lt,O.add(_n.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new lt,O.add(_n.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new lt,O.add(_n.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new lt().add(_n.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await qh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Pt(Ie("byte"),vr(se(),-8),"bytes")]),u=Vs.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(qh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ms(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Yo,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:M}),{context:R,value:C}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(K_/2)))}}return!0}}Vs.chunkSize=lB;const fB=new pe("BPFLoader2111111111111111111111111111111111");class dB{static getMinNumSignatures(e){return Vs.getMinNumSignatures(e)}static load(e,t,n,i,s){return Vs.load(e,t,n,s,i)}}function hB(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pB=Object.prototype.toString,gB=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function ja(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return ja(r.toJSON(),e);if(f=pB.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=ja(r[t],!0)+",";return n>-1&&(i+=ja(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=gB(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=ja(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var yB=function(r){var e=ja(r,!1);if(e!==void 0)return""+e},bb=hB(yB);const za=32;function fh(r){let e=0;for(;r>1;)r/=2,e++;return e}function mB(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class U_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=fh(mB(e+za+1))-fh(za)-1,n=this.getSlotsInEpoch(t),i=e-(n-za);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*za:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+fh(za)):this.slotsPerEpoch}}class Hh extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const bB={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Se extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var vB=globalThis.fetch;class _B extends lT{constructor(e,t,n){const i=s=>{const a=hT(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function wB(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const vb=56;class Yh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=wB(SB,e),n=e.length-vb;rt(n>=0,"lookup table is invalid"),rt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Pt(Ye(),i,"addresses")]).decode(e.slice(vb));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const SB={index:1,layout:ie([se("typeIndex"),Qo("deactivationSlot"),nt("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Pt(Ye(),vr(Ie(),-1),"authority")])},AB=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function kB(r){const e=r.match(AB);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Zt=bi(la(pe),F(),r=>new pe(r)),F_=fa([F(),Ce("base64")]),Fp=bi(la(ee.Buffer),F_,r=>ee.Buffer.from(r[0],"base64")),z_=30*1e3;function IB(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Rt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function W_(r){return yt([x({jsonrpc:Ce("2.0"),id:F(),result:r}),x({jsonrpc:Ce("2.0"),id:F(),error:x({code:vi(),message:F(),data:le(Nv())})})])}const EB=W_(vi());function We(r){return bi(W_(r),EB,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Ut(r){return We(x({context:x({slot:S()}),value:r}))}function ql(r){return x({context:x({slot:S()}),value:r})}function dh(r,e){return r===0?new Ws({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ge.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Zr(e)}const OB=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),PB=We(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),TB=H(x({slot:S(),prioritizationFee:S()})),RB=x({total:S(),validator:S(),foundation:S(),epoch:S()}),BB=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),xB=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Xt(),firstNormalEpoch:S(),firstNormalSlot:S()}),MB=xl(F(),H(S())),to=G(yt([x({}),F()])),CB=x({err:to}),LB=Ce("receivedSignature"),KB=x({"solana-core":F(),"feature-set":le(S())}),_b=Ut(x({err:G(yt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Xt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:fa([F(),Ce("base64")])})))})),NB=Ut(x({byIdentity:xl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function DB(r,e,t,n,i,s){const a=t||vB;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,M)=>{try{n(d,m,(A,R)=>O([A,R]))}catch(A){M(A)}});return await a(...I)}),new fT(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},Ux)};try{let O=5,M,A=500;for(;f?M=await f(r,I):M=await a(r,I),!(M.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await Ms(A),A*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function UB(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function FB(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const zB=We(OB),WB=We(RB),VB=We(TB),$B=We(BB),jB=We(xB),qB=We(MB),GB=We(S()),HB=Ut(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(Zt)})),Qh=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}),YB=Ut(H(x({address:Zt,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}))),QB=Ut(H(x({pubkey:Zt,account:x({executable:Xt(),owner:Zt,lamports:S(),data:Fp,rentEpoch:S()})}))),Jh=x({program:F(),parsed:vi(),space:S()}),JB=Ut(H(x({pubkey:Zt,account:x({executable:Xt(),owner:Zt,lamports:S(),data:Jh,rentEpoch:S()})}))),XB=Ut(H(x({lamports:S(),address:Zt}))),fc=x({executable:Xt(),owner:Zt,lamports:S(),data:Fp,rentEpoch:S()}),ZB=x({pubkey:Zt,account:fc}),ex=bi(yt([la(ee.Buffer),Jh]),yt([F_,Jh]),r=>Array.isArray(r)?he(r,Fp):r),Xh=x({executable:Xt(),owner:Zt,lamports:S(),data:ex,rentEpoch:S()}),tx=x({pubkey:Zt,account:Xh}),nx=x({state:yt([Ce("active"),Ce("inactive"),Ce("activating"),Ce("deactivating")]),active:S(),inactive:S()}),rx=We(H(x({signature:F(),slot:S(),err:to,memo:G(F()),blockTime:le(G(S()))}))),ix=We(H(x({signature:F(),slot:S(),err:to,memo:G(F()),blockTime:le(G(S()))}))),sx=x({subscription:S(),result:ql(fc)}),ox=x({pubkey:Zt,account:fc}),ax=x({subscription:S(),result:ql(ox)}),cx=x({parent:S(),slot:S(),root:S()}),ux=x({subscription:S(),result:cx}),lx=yt([x({type:yt([Ce("firstShredReceived"),Ce("completed"),Ce("optimisticConfirmation"),Ce("root")]),slot:S(),timestamp:S()}),x({type:Ce("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Ce("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Ce("dead"),slot:S(),timestamp:S(),err:F()})]),fx=x({subscription:S(),result:lx}),dx=x({subscription:S(),result:ql(yt([CB,LB]))}),hx=x({subscription:S(),result:S()}),px=x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())}),wb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Xt(),epochCredits:H(fa([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),gx=We(x({current:H(wb),delinquent:H(wb)})),yx=yt([Ce("processed"),Ce("confirmed"),Ce("finalized")]),mx=x({slot:S(),confirmations:G(S()),err:to,confirmationStatus:le(yx)}),bx=Ut(H(G(mx))),vx=We(S()),V_=x({accountKey:Zt,writableIndexes:H(S()),readonlyIndexes:H(S())}),zp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(V_))})}),$_=x({pubkey:Zt,signer:Xt(),writable:Xt(),source:le(yt([Ce("transaction"),Ce("lookupTable")]))}),j_=x({accountKeys:H($_),signatures:H(F())}),q_=x({parsed:vi(),program:F(),programId:Zt}),G_=x({accounts:H(Zt),data:F(),programId:Zt}),_x=yt([G_,q_]),wx=yt([x({parsed:vi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),H_=bi(_x,wx,r=>"accounts"in r?he(r,G_):he(r,q_)),Y_=x({signatures:H(F()),message:x({accountKeys:H($_),instructions:H(H_),recentBlockhash:F(),addressTableLookups:le(G(H(V_)))})}),fl=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Qh}),Q_=x({writable:H(Zt),readonly:H(Zt)}),Gl=x({err:to,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(fl))),postTokenBalances:le(G(H(fl))),loadedAddresses:le(Q_),computeUnitsConsumed:le(S())}),Wp=x({err:to,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(H_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(fl))),postTokenBalances:le(G(H(fl))),loadedAddresses:le(Q_),computeUnitsConsumed:le(S())}),ha=yt([Ce(0),Ce("legacy")]),no=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))}),Sx=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:zp,meta:G(Gl),version:le(ha)})),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),Ax=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),kx=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:j_,meta:G(Gl),version:le(ha)})),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),Ix=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Y_,meta:G(Wp),version:le(ha)})),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),Ex=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:j_,meta:G(Wp),version:le(ha)})),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),Ox=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(no)),blockTime:G(S()),blockHeight:G(S())}))),Px=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:zp,meta:G(Gl)})),rewards:le(H(no)),blockTime:G(S())}))),Sb=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())}))),hh=We(G(x({slot:S(),meta:G(Gl),blockTime:le(G(S())),transaction:zp,version:le(ha)}))),Cu=We(G(x({slot:S(),transaction:Y_,meta:G(Wp),blockTime:le(G(S())),version:le(ha)}))),Tx=Ut(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})})),Rx=Ut(x({blockhash:F(),lastValidBlockHeight:S()})),Bx=Ut(Xt()),xx=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),Mx=We(H(xx)),Cx=Ut(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),Lx=We(F()),Kx=We(F()),Nx=x({err:to,logs:H(F()),signature:F()}),Dx=x({result:ql(Nx),subscription:S()}),Ux={"solana-client":"js/0.0.0-development"};class Fx{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Rt(d),O=this._buildArgs([],m,void 0,I),M=bb(O);return h[M]=h[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,We(S()));if("error"in R)throw new Se(R.error,"failed to get block height information");return R.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=IB(e),this._rpcWsEndpoint=n||kB(e),this._rpcClient=DB(e,i,s,a,u,f),this._rpcRequest=UB(this._rpcClient),this._rpcBatchRequest=FB(this._rpcClient),this._rpcWebSocket=new _B(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Ut(S()));if("error"in u)throw new Se(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,We(G(S())));if("error"in n)throw new Se(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,We(S()));if("error"in t)throw new Se(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,GB);if("error"in t)throw new Se(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,HB);if("error"in i)throw new Se(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Ut(Qh));if("error"in s)throw new Se(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Ut(Qh));if("error"in s)throw new Se(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Rt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,QB);if("error"in h)throw new Se(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,JB);if("error"in u)throw new Se(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,XB);if("error"in s)throw new Se(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,YB);if("error"in s)throw new Se(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ut(G(fc)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ut(G(Xh)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ut(H(G(Xh))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ut(H(G(fc))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Rt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,We(nx));if("error"in f)throw new Se(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(ZB),d=a.withContext===!0?he(f,Ut(h)):he(f,We(h));if("error"in d)throw new Se(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,We(H(tx)));if("error"in u)throw new Se(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=Ge.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return rt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:Bi.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:Bi.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Ms(1e3),s||(O=await I(),s))return;m({__type:Bi.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===Bi.PROCESSED)d=m.response;else throw new Lp(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let M=s,A=null;const R=async()=>{try{const{context:C,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=C.slot,Y==null?void 0:Y.nonce}catch{return M}};(async()=>{if(M=await R(),!u)for(;;){if(s!==M){O({__type:Bi.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Ms(2e3),u||(M=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===Bi.PROCESSED)I=O.response;else{let M;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Ms(400);continue}M=A;break}if(M!=null&&M.value){const A=e||"finalized",{confirmationStatus:R}=M.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new xo(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new xo(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new xo(a);break;default:(C=>{})(A)}I={context:M.context,value:{err:M.value.err}}}else throw new xo(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Bi.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===Bi.PROCESSED)u=f.response;else throw new Kp(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,We(H(px)));if("error"in t)throw new Se(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,gx);if("error"in i)throw new Se(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,We(S()));if("error"in a)throw new Se(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,We(F()));if("error"in a)throw new Se(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,We(H(Zt)));if("error"in s)throw new Se(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);rt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,bx);if("error"in s)throw new Se(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,We(S()));if("error"in a)throw new Se(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,zB);if("error"in i)throw new Se(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Rt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,PB);if("error"in f)throw new Se(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,WB);if("error"in t)throw new Se(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,$B);if("error"in a)throw new Se(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,jB);if("error"in t)throw new Se(t.error,"failed to get epoch schedule");const n=t.result;return new U_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,qB);if("error"in t)throw new Se(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,vx);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,Tx);if("error"in i)throw new Se(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,Mx);if("error"in n)throw new Se(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,Cx);if("error"in s)throw new Se(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=Ve(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Ut(G(S())));if("error"in a)throw new Se(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,VB);if("error"in s)throw new Se(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,Rx);if("error"in a)throw new Se(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,Bx);if("error"in u)throw new Se(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,We(KB));if("error"in t)throw new Se(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,We(F()));if("error"in t)throw new Se(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,kx);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Ax);if("error"in u)throw u.error;return u.result}default:{const u=he(a,Sx);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:dh(m,h.message)},version:m}))}:null}}}catch(u){throw new Se(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,Ex);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Ox);if("error"in u)throw u.error;return u.result}default:{const u=he(a,Ix);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Se(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,NB);if("error"in a)throw new Se(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,hh);if("error"in u)throw new Se(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:dh(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,Cu);if("error"in u)throw new Se(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Cu);if("error"in h)throw new Se(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,hh);if("error"in h)throw new Se(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:dh(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Px);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new Zr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:lt.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,We(H(S())));if("error"in a)throw new Se(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,Sb);if("error"in s)throw new Se(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Sb);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,hh);if("error"in s)throw new Se(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new Zr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:lt.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Cu);if("error"in s)throw new Se(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,Cu);if("error"in u)throw new Se(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,rx);if("error"in a)throw new Se(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,ix);if("error"in a)throw new Se(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Yh({key:e,state:Yh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=jl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,Lx);if("error"in i)throw new Se(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ms(100);const n=Date.now()-this._blockhashInfo.lastFetch>=z_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ms(K_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Ut(S()));if("error"in a)throw new Se(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Y=[R,C],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,_b);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof lt){let M=e;i=new lt,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=lt.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());d.accounts={encoding:"base64",addresses:M}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,_b);if("error"in O){let M;if("data"in O.error&&(M=O.error.data.logs,M&&Array.isArray(M))){const A=`
    `,R=A+M.join(A);console.error(O.error.message,R)}throw new Hh("failed to simulate transaction: "+O.error.message,M)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Ve(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,Kx);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new Hh("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,sx);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=bb([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];rt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,ax);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,Dx);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,ux);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,fx);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,dx);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,hx);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class zo{constructor(e){this._keypair=void 0,this._keypair=e??gb()}static generate(){return new zo(gb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=ll(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new zo({publicKey:n,secretKey:e})}static fromSeed(e){const t=ll(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new zo({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Ci=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Qo("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Qo(),Pt(Ye(),vr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class zx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ci))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ut(Ci.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ut(Ci.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Vp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Vp{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),wp(BigInt(e.recentSlot),8)],this.programId),i=Ci.CreateLookupTable,s=Ze(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:_n.programId,isSigner:!1,isWritable:!1}];return[new _t({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Ci.FreezeLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Ci.ExtendLookupTable,n=Ze(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:_n.programId,isSigner:!1,isWritable:!1}),new _t({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Ci.DeactivateLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Ci.CloseLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new _t({programId:this.programId,keys:i,data:n})}}Vp.programId=new pe("AddressLookupTab1e1111111111111111111111111");class Wx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ie("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(fi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ut(fi.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ut(fi.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ut(fi.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ut(fi.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals($p.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const fi=Object.freeze({RequestUnits:{index:0,layout:ie([Ie("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ie("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ie("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ie("instruction"),Qo("microLamports")])}});class $p{constructor(){}static requestUnits(e){const t=fi.RequestUnits,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=fi.RequestHeapFrame,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=fi.SetComputeUnitLimit,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=fi.SetComputeUnitPrice,n=Ze(t,{microLamports:BigInt(e.microLamports)});return new _t({keys:[],programId:this.programId,data:n})}}$p.programId=new pe("ComputeBudget111111111111111111111111111111");const Ab=64,kb=32,Ib=64,Eb=ie([Ie("numSignatures"),Ie("padding"),Ft("signatureOffset"),Ft("signatureInstructionIndex"),Ft("publicKeyOffset"),Ft("publicKeyInstructionIndex"),Ft("messageDataOffset"),Ft("messageDataSize"),Ft("messageInstructionIndex")]);class Hl{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;rt(t.length===kb,`Public Key must be ${kb} bytes but received ${t.length} bytes`),rt(i.length===Ib,`Signature must be ${Ib} bytes but received ${i.length} bytes`);const a=Eb.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return Eb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new _t({keys:[],programId:Hl.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Ab,`Private key must be ${Ab} bytes but received ${t.length} bytes`);try{const s=zo.fromSecretKey(t),a=s.publicKey.toBytes(),u=Mp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Hl.programId=new pe("Ed25519SigVerify111111111111111111111111111");const Vx=(r,e)=>{const t=wc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};wc.utils.isValidPrivateKey;const $x=wc.getPublicKey,Ob=32,ph=20,Pb=64,jx=11,gh=ie([Ie("numSignatures"),Ft("signatureOffset"),Ie("signatureInstructionIndex"),Ft("ethAddressOffset"),Ie("ethAddressInstructionIndex"),Ft("messageDataOffset"),Ft("messageDataSize"),Ie("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ie("recoveryId")]);class Wo{constructor(){}static publicKeyToEthAddress(e){rt(e.length===Pb,`Public key must be ${Pb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(tb(Ve(e))).slice(-ph)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return Wo.createInstructionWithEthAddress({ethAddress:Wo.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,rt(u.length===ph,`Address must be ${ph} bytes but received ${u.length} bytes`);const f=1+jx,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(gh.span+n.length);return gh.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:Ve(i),ethAddress:Ve(u),recoveryId:s},O),O.fill(Ve(n),gh.span),new _t({keys:[],programId:Wo.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Ob,`Private key must be ${Ob} bytes but received ${t.length} bytes`);try{const s=Ve(t),a=$x(s,!1).slice(1),u=ee.Buffer.from(tb(Ve(n))),[f,h]=Vx(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Wo.programId=new pe("KeccakSecp256k11111111111111111111111111111");var J_;const X_=new pe("StakeConfig11111111111111111111111111111111");class Z_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Ic{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}J_=Ic;Ic.default=new J_(0,0,pe.default);class qx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(hn))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ut(hn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Z_(new pe(t.staker),new pe(t.withdrawer)),lockup:new Ic(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ut(hn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ut(hn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ut(hn.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(hn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(hn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(hn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(hn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Yl.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const hn=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),HR(),YR()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType"),Ks("authoritySeed"),Ye("authorityOwner")])}}),Gx=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Yl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Ic.default,a=hn.Initialize,u=Ze(a,{authorized:{staker:Ve(n.staker.toBuffer()),withdrawer:Ve(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Ve(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Yo,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new _t(f)}static createAccountWithSeed(e){const t=new lt;t.add(_n.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new lt;t.add(_n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=hn.Delegate,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:Zu,isSigner:!1,isWritable:!1},{pubkey:X_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=hn.Authorize,f=Ze(u,{newAuthorized:Ve(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=hn.AuthorizeWithSeed,d=Ze(h,{newAuthorized:Ve(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:Ve(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new lt().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=hn.Split,u=Ze(a,{lamports:s});return new _t({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new lt;return t.add(_n.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new lt;return f.add(_n.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=hn.Merge,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:Zu,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=hn.Withdraw,f=Ze(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:Zu,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=hn.Deactivate,s=Ze(i);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Yl.programId=new pe("Stake11111111111111111111111111111111111111");Yl.space=200;class ew{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class Hx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Li))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ut(Li.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ew(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ut(Li.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ut(Li.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(Li.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(pa.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Li=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),QR()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),JR()])}}),Yx=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class pa{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Li.InitializeAccount,a=Ze(s,{voteInit:{nodePubkey:Ve(i.nodePubkey.toBuffer()),authorizedVoter:Ve(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Ve(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Yo,isSigner:!1,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new _t(u)}static createAccount(e){const t=new lt;return t.add(_n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Li.Authorize,u=Ze(a,{newAuthorized:Ve(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Li.AuthorizeWithSeed,h=Ze(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ve(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Ve(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new lt().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Li.Withdraw,u=Ze(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return pa.withdraw(e)}}pa.programId=new pe("Vote111111111111111111111111111111111111111");pa.space=3731;const tw=new pe("Va1idator1nfo111111111111111111111111111111"),Qx=x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});class jp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(qn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,br));t=t.slice(br);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(tw)&&i[1].isSigner){const s=Ks().decode(ee.Buffer.from(t)),a=JSON.parse(s);return dT(a,Qx),new jp(i[1].publicKey,a)}return null}}const Jx=new pe("Vote111111111111111111111111111111111111111"),Xx=ie([Ye("nodePubkey"),Ye("authorizedWithdrawer"),Ie("commission"),nt(),Pt(ie([nt("slot"),se("confirmationCount")]),vr(se(),-8),"votes"),Ie("rootSlotValid"),nt("rootSlot"),nt(),Pt(ie([nt("epoch"),Ye("authorizedVoter")]),vr(se(),-8),"authorizedVoters"),ie([Pt(ie([Ye("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ie("isEmpty")],"priorVoters"),nt(),Pt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),vr(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);class qp{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Xx.decode(Ve(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new qp({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(Zx),priorVoters:eM(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Zx({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function Tb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function eM({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(Tb),...r.slice(0,e).map(Tb)]}const Rb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function tM(r,e){const t=e===!1?"http":"https";if(!r)return Rb[t].devnet;const n=Rb[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function nM(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const rM=1e9;var iM=Object.freeze(Object.defineProperty({__proto__:null,Account:jR,AddressLookupTableAccount:Yh,AddressLookupTableInstruction:zx,AddressLookupTableProgram:Vp,Authorized:Z_,BLOCKHASH_CACHE_TIMEOUT_MS:z_,BPF_LOADER_DEPRECATED_PROGRAM_ID:qR,BPF_LOADER_PROGRAM_ID:fB,BpfLoader:dB,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:fi,ComputeBudgetInstruction:Wx,ComputeBudgetProgram:$p,Connection:Fx,Ed25519Program:Hl,Enum:VR,EpochSchedule:U_,FeeCalculatorLayout:N_,Keypair:zo,LAMPORTS_PER_SOL:rM,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Ci,Loader:Vs,Lockup:Ic,MAX_SEED_LENGTH:C_,Message:Zr,MessageAccountKeys:lc,MessageV0:Ws,NONCE_ACCOUNT_LENGTH:Gh,NonceAccount:jl,PACKET_DATA_SIZE:ss,PUBLIC_KEY_LENGTH:br,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:Ho,SOLANA_SCHEMA:Xa,STAKE_CONFIG_ID:X_,STAKE_INSTRUCTION_LAYOUTS:hn,SYSTEM_INSTRUCTION_LAYOUTS:kt,SYSVAR_CLOCK_PUBKEY:ui,SYSVAR_EPOCH_SCHEDULE_PUBKEY:nB,SYSVAR_INSTRUCTIONS_PUBKEY:rB,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Xu,SYSVAR_RENT_PUBKEY:Yo,SYSVAR_REWARDS_PUBKEY:iB,SYSVAR_SLOT_HASHES_PUBKEY:sB,SYSVAR_SLOT_HISTORY_PUBKEY:oB,SYSVAR_STAKE_HISTORY_PUBKEY:Zu,Secp256k1Program:Wo,SendTransactionError:Hh,SolanaJSONRPCError:Se,SolanaJSONRPCErrorCode:bB,StakeAuthorizationLayout:Gx,StakeInstruction:qx,StakeProgram:Yl,Struct:Cp,SystemInstruction:uB,SystemProgram:_n,Transaction:lt,TransactionExpiredBlockheightExceededError:Lp,TransactionExpiredNonceInvalidError:xo,TransactionExpiredTimeoutError:Kp,TransactionInstruction:_t,TransactionMessage:Dp,TransactionStatus:Bi,VALIDATOR_INFO_KEY:tw,VERSION_PREFIX_MASK:Vl,VOTE_PROGRAM_ID:Jx,ValidatorInfo:jp,VersionedMessage:Np,VersionedTransaction:Up,VoteAccount:qp,VoteAuthorizationLayout:Yx,VoteInit:ew,VoteInstruction:Hx,VoteProgram:pa,clusterApiUrl:tM,sendAndConfirmRawTransaction:nM,sendAndConfirmTransaction:qh},Symbol.toStringTag,{value:"Module"})),Fi=_c(iM);const Bb=()=>{const r=ei.utils.randomPrivateKey(),e=Zh(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Zh=ei.getPublicKey;function xb(r){try{return ei.ExtendedPoint.fromHex(r),!0}catch{return!1}}const sM=(r,e)=>ei.sign(r,e.slice(0,32)),oM=ei.verify,jn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class aM{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Dv(el,this))}static decode(e){return Uv(el,this,e)}static decodeUnchecked(e){return Fv(el,this,e)}}const el=new Map;var nw;let rw;const cM=32,Ns=32;function uM(r){return r._bn!==void 0}let Mb=1;rw=Symbol.toStringTag;class ve extends aM{constructor(e){if(super({}),this._bn=void 0,uM(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ge.decode(e);if(t.length!=Ns)throw new Error("Invalid public key input");this._bn=new ls(t)}else this._bn=new ls(e);if(this._bn.byteLength()>Ns)throw new Error("Invalid public key input")}}static unique(){const e=new ve(Mb);return Mb+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Ns)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[rw](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=al(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>cM)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,jn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=al(n);if(xb(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return xb(t.toBytes())}}nw=ve;ve.default=new nw("11111111111111111111111111111111");el.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const ep=1280-40-8,lM=127,tp=64;class Cb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const et=(r="publicKey")=>Xe(32,r),Mo=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(vr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},fM=(r="authorized")=>ie([et("staker"),et("withdrawer")],r),dM=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),et("custodian")],r),hM=(r="voteInit")=>ie([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),Ie("commission")],r),pM=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),Mo("currentAuthorityDerivedKeySeed"),et("newAuthorized")],r);function iw(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return iw({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function qa(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Ga(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function dr(r,e){if(!r)throw new Error(e||"Assertion failed")}class Gp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Gp(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];dr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{dr(t.length>0,"Expected at least one writable signer key");const[f]=t[0];dr(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(dr(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class dc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ge.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Cb(this.staticAccountKeys)}static compile(e){const t=Gp.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Cb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ge.encode(u.data)}));return new dc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ga(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(Ge.decode(m.data));let A=[];Ga(A,I.length);let R=[];return Ga(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];Ga(i,n.length);let s=ee.Buffer.alloc(ep);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ie("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Pt(Ie("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Pt(Ie("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Pt(et("key"),e,"keys"),et("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>jn(m.toBytes())),recentBlockhash:Ge.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&lM))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=qa(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Ns);t=t.slice(Ns),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Ns);t=t.slice(Ns);const h=qa(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=qa(t),A=t.slice(0,M);t=t.slice(M);const R=qa(t),C=t.slice(0,R),Y=Ge.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ge.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new dc(m)}}const gM=ee.Buffer.alloc(tp).fill(0);class gt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Nt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ve(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ge.encode(R)}});return M.forEach(A=>{dr(A.programIdIndex>=0),A.accounts.forEach(R=>dr(R>=0))}),new dc({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=sM(n,i.secretKey);this._addSignature(i.publicKey,jn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){dr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!oM(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Ga(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return dr(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(dr(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),dr(s.length<=ep,`Transaction too large: ${s.length} > ${ep}`),s}get keys(){return dr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return dr(this.instructions.length===1),this.instructions[0].programId}get data(){return dr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=qa(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,tp);t=t.slice(tp),i.push(Ge.encode(ee.Buffer.from(a)))}return Nt.populate(dc.from(t),i)}static populate(e,t=[]){const n=new Nt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ge.encode(gM)?null:Ge.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new gt({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ge.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const yh=new ve("SysvarRecentB1ockHashes11111111111111111111"),Co=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function yM(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Mr(r,e){const t=r.layout.span>=0?r.layout.span:iw(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const mM=nt("lamportsPerSignature"),bM=ie([se("version"),se("state"),et("authorizedPubkey"),et("nonce"),ie([mM],"feeCalculator")]),Lb=bM.span,vM=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},_M=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=vM(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return zv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=wp(a,r);return n(h,u,f)},s},Jo=_M(8),Cr=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),et("programId")])},Assign:{index:1,layout:ie([se("instruction"),et("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Jo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),et("base"),Mo("seed"),Bt("lamports"),Bt("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),et("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),et("base"),Mo("seed"),Bt("space"),et("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),et("base"),Mo("seed"),et("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Jo("lamports"),Mo("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class li{constructor(){}static createAccount(e){const t=Cr.Create,n=Mr(t,{lamports:e.lamports,space:e.space,programId:jn(e.programId.toBuffer())});return new gt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Cr.TransferWithSeed;t=Mr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:jn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Cr.Transfer;t=Mr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Cr.AssignWithSeed;t=Mr(i,{base:jn(e.basePubkey.toBuffer()),seed:e.seed,programId:jn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Cr.Assign;t=Mr(i,{programId:jn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Cr.CreateWithSeed,n=Mr(t,{base:jn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:jn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Nt;"basePubkey"in e&&"seed"in e?t.add(li.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Lb,programId:this.programId})):t.add(li.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Lb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Cr.InitializeNonceAccount,n=Mr(t,{authorized:jn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yh,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceAdvance(e){const t=Cr.AdvanceNonceAccount,n=Mr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceWithdraw(e){const t=Cr.WithdrawNonceAccount,n=Mr(t,{lamports:e.lamports});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:yh,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Cr.AuthorizeNonceAccount,n=Mr(t,{authorized:jn(e.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Cr.AllocateWithSeed;t=Mr(i,{base:jn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:jn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Cr.Allocate;t=Mr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}}li.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),Jo("deactivationSlot"),nt("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Pt(et(),vr(Ie(),-1),"authority")]);const an=bi(la(ve),F(),r=>new ve(r)),sw=fa([F(),Ce("base64")]),Hp=bi(la(ee.Buffer),sw,r=>ee.Buffer.from(r[0],"base64"));function ow(r){return yt([x({jsonrpc:Ce("2.0"),id:F(),result:r}),x({jsonrpc:Ce("2.0"),id:F(),error:x({code:vi(),message:F(),data:le(Nv())})})])}const wM=ow(vi());function It(r){return bi(ow(r),wM,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Vr(r){return It(x({context:x({slot:S()}),value:r}))}function Ql(r){return x({context:x({slot:S()}),value:r})}const SM=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});It(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const AM=H(x({slot:S(),prioritizationFee:S()})),kM=x({total:S(),validator:S(),foundation:S(),epoch:S()}),IM=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),EM=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Xt(),firstNormalEpoch:S(),firstNormalSlot:S()}),OM=xl(F(),H(S())),ro=G(yt([x({}),F()])),PM=x({err:ro}),TM=Ce("receivedSignature");x({"solana-core":F(),"feature-set":le(S())});Vr(x({err:G(yt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Xt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:fa([F(),Ce("base64")])})))}));Vr(x({byIdentity:xl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));It(SM);It(kM);It(AM);It(IM);It(EM);It(OM);It(S());Vr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(an)}));const RM=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())});Vr(H(x({address:an,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())})));Vr(H(x({pubkey:an,account:x({executable:Xt(),owner:an,lamports:S(),data:Hp,rentEpoch:S()})})));const np=x({program:F(),parsed:vi(),space:S()});Vr(H(x({pubkey:an,account:x({executable:Xt(),owner:an,lamports:S(),data:np,rentEpoch:S()})})));Vr(H(x({lamports:S(),address:an})));const Yp=x({executable:Xt(),owner:an,lamports:S(),data:Hp,rentEpoch:S()});x({pubkey:an,account:Yp});const BM=bi(yt([la(ee.Buffer),np]),yt([sw,np]),r=>Array.isArray(r)?he(r,Hp):r),xM=x({executable:Xt(),owner:an,lamports:S(),data:BM,rentEpoch:S()});x({pubkey:an,account:xM});x({state:yt([Ce("active"),Ce("inactive"),Ce("activating"),Ce("deactivating")]),active:S(),inactive:S()});It(H(x({signature:F(),slot:S(),err:ro,memo:G(F()),blockTime:le(G(S()))})));It(H(x({signature:F(),slot:S(),err:ro,memo:G(F()),blockTime:le(G(S()))})));x({subscription:S(),result:Ql(Yp)});const MM=x({pubkey:an,account:Yp});x({subscription:S(),result:Ql(MM)});const CM=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:CM});const LM=yt([x({type:yt([Ce("firstShredReceived"),Ce("completed"),Ce("optimisticConfirmation"),Ce("root")]),slot:S(),timestamp:S()}),x({type:Ce("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Ce("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Ce("dead"),slot:S(),timestamp:S(),err:F()})]);x({subscription:S(),result:LM});x({subscription:S(),result:Ql(yt([PM,TM]))});x({subscription:S(),result:S()});x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())});const Kb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Xt(),epochCredits:H(fa([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});It(x({current:H(Kb),delinquent:H(Kb)}));const KM=yt([Ce("processed"),Ce("confirmed"),Ce("finalized")]),NM=x({slot:S(),confirmations:G(S()),err:ro,confirmationStatus:le(KM)});Vr(H(G(NM)));It(S());const aw=x({accountKey:an,writableIndexes:H(S()),readonlyIndexes:H(S())}),Qp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(aw))})}),cw=x({pubkey:an,signer:Xt(),writable:Xt(),source:le(yt([Ce("transaction"),Ce("lookupTable")]))}),uw=x({accountKeys:H(cw),signatures:H(F())}),lw=x({parsed:vi(),program:F(),programId:an}),fw=x({accounts:H(an),data:F(),programId:an}),DM=yt([fw,lw]),UM=yt([x({parsed:vi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),dw=bi(DM,UM,r=>"accounts"in r?he(r,fw):he(r,lw)),hw=x({signatures:H(F()),message:x({accountKeys:H(cw),instructions:H(dw),recentBlockhash:F(),addressTableLookups:le(G(H(aw)))})}),dl=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:RM}),pw=x({writable:H(an),readonly:H(an)}),Jl=x({err:ro,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(dl))),postTokenBalances:le(G(H(dl))),loadedAddresses:le(pw),computeUnitsConsumed:le(S())}),Jp=x({err:ro,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(dw)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(dl))),postTokenBalances:le(G(H(dl))),loadedAddresses:le(pw),computeUnitsConsumed:le(S())}),ga=yt([Ce(0),Ce("legacy")]),io=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))});It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Qp,meta:G(Jl),version:le(ga)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:uw,meta:G(Jl),version:le(ga)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:hw,meta:G(Jp),version:le(ga)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:uw,meta:G(Jp),version:le(ga)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Qp,meta:G(Jl)})),rewards:le(H(io)),blockTime:G(S())})));It(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())})));It(G(x({slot:S(),meta:Jl,blockTime:le(G(S())),transaction:Qp,version:le(ga)})));It(G(x({slot:S(),transaction:hw,meta:G(Jp),blockTime:le(G(S())),version:le(ga)})));Vr(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})}));Vr(x({blockhash:F(),lastValidBlockHeight:S()}));Vr(Xt());const FM=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});It(H(FM));Vr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));It(F());It(F());const zM=x({err:ro,logs:H(F()),signature:F()});x({result:Ql(zM),subscription:S()});class rs{constructor(e){this._keypair=void 0,this._keypair=e??Bb()}static generate(){return new rs(Bb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Zh(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new rs({publicKey:n,secretKey:e})}static fromSeed(e){const t=Zh(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new rs({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Jo("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Jo(),Pt(et(),vr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([Ie("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ie("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ie("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ie("instruction"),Jo("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([Ie("numSignatures"),Ie("padding"),Ft("signatureOffset"),Ft("signatureInstructionIndex"),Ft("publicKeyOffset"),Ft("publicKeyInstructionIndex"),Ft("messageDataOffset"),Ft("messageDataSize"),Ft("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");wc.utils.isValidPrivateKey;wc.getPublicKey;ie([Ie("numSignatures"),Ft("signatureOffset"),Ie("signatureInstructionIndex"),Ft("ethAddressOffset"),Ie("ethAddressInstructionIndex"),Ft("messageDataOffset"),Ft("messageDataSize"),Ie("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ie("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var gw;new ve("StakeConfig11111111111111111111111111111111");class yw{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}gw=yw;yw.default=new gw(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),fM(),dM()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType"),Mo("authoritySeed"),et("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),hM()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),pM()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});new ve("Vote111111111111111111111111111111111111111");ie([et("nodePubkey"),et("authorizedWithdrawer"),Ie("commission"),nt(),Pt(ie([nt("slot"),se("confirmationCount")]),vr(se(),-8),"votes"),Ie("rootSlotValid"),nt("rootSlot"),nt(),Pt(ie([nt("epoch"),et("authorizedVoter")]),vr(se(),-8),"authorizedVoters"),ie([Pt(ie([et("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ie("isEmpty")],"priorVoters"),nt(),Pt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),vr(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);var ot={},Xl={};Xl.byteLength=$M;Xl.toByteArray=qM;Xl.fromByteArray=YM;var di=[],Lr=[],WM=typeof Uint8Array<"u"?Uint8Array:Array,mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Io=0,VM=mh.length;Io<VM;++Io)di[Io]=mh[Io],Lr[mh.charCodeAt(Io)]=Io;Lr["-".charCodeAt(0)]=62;Lr["_".charCodeAt(0)]=63;function mw(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function $M(r){var e=mw(r),t=e[0],n=e[1];return(t+n)*3/4-n}function jM(r,e,t){return(e+t)*3/4-t}function qM(r){var e,t=mw(r),n=t[0],i=t[1],s=new WM(jM(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Lr[r.charCodeAt(f)]<<18|Lr[r.charCodeAt(f+1)]<<12|Lr[r.charCodeAt(f+2)]<<6|Lr[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Lr[r.charCodeAt(f)]<<2|Lr[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=Lr[r.charCodeAt(f)]<<10|Lr[r.charCodeAt(f+1)]<<4|Lr[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function GM(r){return di[r>>18&63]+di[r>>12&63]+di[r>>6&63]+di[r&63]}function HM(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(GM(n));return i.join("")}function YM(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(HM(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(di[e>>2]+di[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(di[e>>10]+di[e>>4&63]+di[e<<2&63]+"=")),i.join("")}var Xp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Xp.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};Xp.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,M=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=M,a/=256,h-=8);r[t+O-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Xl,t=Xp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(kn(v,ArrayBuffer)||v&&kn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(kn(v,SharedArrayBuffer)||v&&kn(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(kn(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Vi(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(kn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),kn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(kn(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||kn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return rr(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Wi(v).length;default:if(L)return k?-1:rr(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return Gt(this,g,y);case"utf8":case"utf-8":return W(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ee(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?W(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(kn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,De=k-y;const wt=Math.min(Z,De),pt=this.slice(L,$),St=g.slice(y,k);for(let ft=0;ft<wt;++ft)if(pt[ft]!==St[ft]){Z=pt[ft],De=St[ft];break}return Z<De?-1:De<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Vi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,De=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,De/=2,y/=2}function wt(St,ft){return $===1?St[ft]:St.readUInt16BE(ft*$)}let pt;if(L){let St=-1;for(pt=y;pt<Z;pt++)if(wt(v,pt)===wt(g,St===-1?0:pt-St)){if(St===-1&&(St=pt),pt-St+1===De)return St*$}else St!==-1&&(pt-=pt-St),St=-1}else for(y+De>Z&&(y=Z-De),pt=y;pt>=0;pt--){let St=!0;for(let ft=0;ft<De;ft++)if(wt(v,pt+ft)!==wt(g,ft)){St=!1;break}if(St)return pt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function V(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const De=parseInt(g.substr(Z*2,2),16);if(Vi(De))return Z;v[y+Z]=De}return Z}function Q(v,g,y,k){return An(rr(g,v.length-y),v,y,k)}function K(v,g,y,k){return An(Wc(g),v,y,k)}function j(v,g,y,k){return An(Wi(g),v,y,k)}function te(v,g,y,k){return An(Vf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return V(this,g,y,k);case"utf8":case"utf-8":return Q(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function W(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,De=$>239?4:$>223?3:$>191?2:1;if(L+De<=y){let wt,pt,St,ft;switch(De){case 1:$<128&&(Z=$);break;case 2:wt=v[L+1],(wt&192)===128&&(ft=($&31)<<6|wt&63,ft>127&&(Z=ft));break;case 3:wt=v[L+1],pt=v[L+2],(wt&192)===128&&(pt&192)===128&&(ft=($&15)<<12|(wt&63)<<6|pt&63,ft>2047&&(ft<55296||ft>57343)&&(Z=ft));break;case 4:wt=v[L+1],pt=v[L+2],St=v[L+3],(wt&192)===128&&(pt&192)===128&&(St&192)===128&&(ft=($&15)<<18|(wt&63)<<12|(pt&63)<<6|St&63,ft>65535&&ft<1114112&&(Z=ft))}}Z===null?(Z=65533,De=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=De}return Me(k)}const X=4096;function Me(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ee(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function Gt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=$f[v[$]];return L}function Ht(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function _e(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Un(function(g){g=g>>>0,_i(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&gn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Un(function(g){g=g>>>0,_i(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&gn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Un(function(g){g=g>>>0,_i(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&gn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Un(function(g){g=g>>>0,_i(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&gn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!1,52,8)};function $e(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const De=Math.pow(2,8*k)-1;$e(this,g,y,k,De,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const De=Math.pow(2,8*k)-1;$e(this,g,y,k,De,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function en(v,g,y,k,L){nr(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function fn(v,g,y,k,L){nr(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Un(function(g,y=0){return en(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Un(function(g,y=0){return fn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);$e(this,g,y,k,wt-1,-wt)}let $=0,Z=1,De=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&De===0&&this[y+$-1]!==0&&(De=1),this[y+$]=(g/Z>>0)-De&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);$e(this,g,y,k,wt-1,-wt)}let $=k-1,Z=1,De=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&De===0&&this[y+$+1]!==0&&(De=1),this[y+$]=(g/Z>>0)-De&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Un(function(g,y=0){return en(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Un(function(g,y=0){return fn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ht(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return ht(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return ht(this,g,y,!1,k)};function Ar(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return Ar(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return Ar(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),De=Z.length;if(De===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%De]}return this};const Wt={};function Sn(v,g,y){Wt[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}Sn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Sn("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),Sn("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=ni(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=ni(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function ni(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function kr(v,g,y){_i(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&gn(g,v.length-(y+1))}function nr(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let De;throw $>3?g===0||g===BigInt(0)?De=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:De=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:De=`>= ${g}${Z} and <= ${y}${Z}`,new Wt.ERR_OUT_OF_RANGE("value",De,v)}kr(k,L,$)}function _i(v,g){if(typeof v!="number")throw new Wt.ERR_INVALID_ARG_TYPE(g,"number",v)}function gn(v,g,y){throw Math.floor(v)!==v?(_i(v,y),new Wt.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Wt.ERR_BUFFER_OUT_OF_BOUNDS:new Wt.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const As=/[^+/0-9A-Za-z-_]/g;function Wf(v){if(v=v.split("=")[0],v=v.trim().replace(As,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function rr(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function Wc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Vf(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function Wi(v){return e.toByteArray(Wf(v))}function An(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function kn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Vi(v){return v!==v}const $f=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Un(v){return typeof BigInt>"u"?jf:v}function jf(){throw new Error("BigInt not supported")}})(ot);var QM=typeof Te.global<"u"?Te.global:typeof self<"u"?self:typeof window<"u"?window:{},rp;typeof Object.create=="function"?rp=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:rp=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var JM=rp;function Us(r,e){var t={seen:[],stylize:ZM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),bw(e)?t.showHidden=e:e&&oC(t,e),Lo(t.showHidden)&&(t.showHidden=!1),Lo(t.depth)&&(t.depth=2),Lo(t.colors)&&(t.colors=!1),Lo(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=XM),hl(t,r,t.depth)}Us.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Us.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function XM(r,e){var t=Us.styles[e];return t?"\x1B["+Us.colors[t][0]+"m"+r+"\x1B["+Us.colors[t][1]+"m":r}function ZM(r,e){return r}function eC(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function hl(r,e,t){if(r.customInspect&&e&&ec(e.inspect)&&e.inspect!==Us&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return _w(n)||(n=hl(r,n,t)),n}var i=tC(r,e);if(i)return i;var s=Object.keys(e),a=eC(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),tl(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return bh(e);if(s.length===0){if(ec(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(Za(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(pl(e))return r.stylize(Date.prototype.toString.call(e),"date");if(tl(e))return bh(e)}var f="",h=!1,d=["{","}"];if(iC(e)&&(h=!0,d=["[","]"]),ec(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if(Za(e)&&(f=" "+RegExp.prototype.toString.call(e)),pl(e)&&(f=" "+Date.prototype.toUTCString.call(e)),tl(e)&&(f=" "+bh(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return Za(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=nC(r,e,t,a,s):I=s.map(function(O){return ip(r,e,t,a,O,h)}),r.seen.pop(),rC(I,f,d)}function tC(r,e){if(Lo(e))return r.stylize("undefined","undefined");if(_w(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(sC(e))return r.stylize(""+e,"number");if(bw(e))return r.stylize(""+e,"boolean");if(vw(e))return r.stylize("null","null")}function bh(r){return"["+Error.prototype.toString.call(r)+"]"}function nC(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)ww(e,String(a))?s.push(ip(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(ip(r,e,t,n,f,!0))}),s}function ip(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),ww(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(vw(t)?u=hl(r,f.value,null):u=hl(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),Lo(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function rC(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function iC(r){return Array.isArray(r)}function bw(r){return typeof r=="boolean"}function vw(r){return r===null}function sC(r){return typeof r=="number"}function _w(r){return typeof r=="string"}function Lo(r){return r===void 0}function Za(r){return Zl(r)&&Zp(r)==="[object RegExp]"}function Zl(r){return typeof r=="object"&&r!==null}function pl(r){return Zl(r)&&Zp(r)==="[object Date]"}function tl(r){return Zl(r)&&(Zp(r)==="[object Error]"||r instanceof Error)}function ec(r){return typeof r=="function"}function Nb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function Zp(r){return Object.prototype.toString.call(r)}function oC(r,e){if(!e||!Zl(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function ww(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Db(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var aC=Object.prototype.hasOwnProperty,Ub=Object.keys||function(r){var e=[];for(var t in r)aC.call(r,t)&&e.push(t);return e},Fb=Array.prototype.slice,vh;function Sw(){return typeof vh<"u"?vh:vh=function(){return function(){}.name==="foo"}()}function zb(r){return Object.prototype.toString.call(r)}function Wb(r){return ot.isBuffer(r)||typeof QM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function Rn(r,e){r||Xn(r,!0,e,"==",tg)}var cC=/\s*function\s+([^\(\s]*)\s*/;function Aw(r){if(!!ec(r)){if(Sw())return r.name;var e=r.toString(),t=e.match(cC);return t&&t[1]}}Rn.AssertionError=eg;function eg(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=uC(this),this.generatedMessage=!0);var e=r.stackStartFunction||Xn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=Aw(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}JM(eg,Error);function Vb(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function $b(r){if(Sw()||!ec(r))return Us(r);var e=Aw(r),t=e?": "+e:"";return"[Function"+t+"]"}function uC(r){return Vb($b(r.actual),128)+" "+r.operator+" "+Vb($b(r.expected),128)}function Xn(r,e,t,n,i){throw new eg({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}Rn.fail=Xn;function tg(r,e){r||Xn(r,!0,e,"==",tg)}Rn.ok=tg;Rn.equal=kw;function kw(r,e,t){r!=e&&Xn(r,e,t,"==",kw)}Rn.notEqual=Iw;function Iw(r,e,t){r==e&&Xn(r,e,t,"!=",Iw)}Rn.deepEqual=Ew;function Ew(r,e,t){Xo(r,e,!1)||Xn(r,e,t,"deepEqual",Ew)}Rn.deepStrictEqual=Ow;function Ow(r,e,t){Xo(r,e,!0)||Xn(r,e,t,"deepStrictEqual",Ow)}function Xo(r,e,t,n){if(r===e)return!0;if(ot.isBuffer(r)&&ot.isBuffer(e))return Db(r,e)===0;if(pl(r)&&pl(e))return r.getTime()===e.getTime();if(Za(r)&&Za(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(Wb(r)&&Wb(e)&&zb(r)===zb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return Db(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(ot.isBuffer(r)!==ot.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),lC(r,e,t,n))}function jb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function lC(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(Nb(r)||Nb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=jb(r),s=jb(e);if(i&&!s||!i&&s)return!1;if(i)return r=Fb.call(r),e=Fb.call(e),Xo(r,e,t);var a=Ub(r),u=Ub(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!Xo(r[f],e[f],t,n))return!1;return!0}Rn.notDeepEqual=Pw;function Pw(r,e,t){Xo(r,e,!1)&&Xn(r,e,t,"notDeepEqual",Pw)}Rn.notDeepStrictEqual=Tw;function Tw(r,e,t){Xo(r,e,!0)&&Xn(r,e,t,"notDeepStrictEqual",Tw)}Rn.strictEqual=Rw;function Rw(r,e,t){r!==e&&Xn(r,e,t,"===",Rw)}Rn.notStrictEqual=Bw;function Bw(r,e,t){r===e&&Xn(r,e,t,"!==",Bw)}function qb(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function fC(r){var e;try{r()}catch(t){e=t}return e}function xw(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=fC(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&Xn(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&tl(i),u=!r&&i&&!t;if((a&&s&&qb(i,t)||u)&&Xn(i,t,"Got unwanted exception"+n),r&&i&&t&&!qb(i,t)||!r&&i)throw i}Rn.throws=dC;function dC(r,e,t){xw(!0,r,e,t)}Rn.doesNotThrow=hC;function hC(r,e,t){xw(!1,r,e,t)}Rn.ifError=pC;function pC(r){if(r)throw r}class hc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function gC(r,e){return e.property?r+"["+e.property+"]":r}class Lu extends hc{isCount(){throw new Error("ExternalLayout is abstract")}}class Mw extends hc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class yC extends hc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof hc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class mC extends hc{constructor(e,t){if(!(e instanceof Lu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Lu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Lu&&(i=e.length),!(ot.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(gC("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Lu&&this.length.encode(i,t,n),i}}var tt=r=>new Mw(1,r),tc=r=>new Mw(4,r),Yt=(r,e,t)=>new yC(r,e,t),Cw=(r,e)=>new mC(r,e);const Qt=(r="publicKey")=>Cw(32,r),Kr=(r="uint64")=>Cw(8,r);function rn(r,e,t,...n){return yM(e,t,n,{skipPreflight:!1})}const bC=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Lw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Gb="Failed to find account",Hb="Invalid account owner";function _h(r){return ot.Buffer.from(r.toBuffer())}class On extends ls{toBuffer(){const e=super.toArray().reverse(),t=ot.Buffer.from(e);if(t.length===8)return t;Rn(t.length<8,"u64 too large");const n=ot.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return Rn(e.length===8,`Invalid buffer length: ${e.length}`),new On([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function fr(r){return"publicKey"in r}const vC={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},Kw=new ve("So11111111111111111111111111111111111111112"),Ha=Yt([tc("mintAuthorityOption"),Qt("mintAuthority"),Kr("supply"),tt("decimals"),tt("isInitialized"),tc("freezeAuthorityOption"),Qt("freezeAuthority")]),To=Yt([Qt("mint"),Qt("owner"),Kr("amount"),tc("delegateOption"),Qt("delegate"),tt("state"),tc("isNativeOption"),Kr("isNative"),Kr("delegatedAmount"),tc("closeAuthorityOption"),Qt("closeAuthority")]),Ku=Yt([tt("m"),tt("n"),tt("is_initialized"),Qt("signer1"),Qt("signer2"),Qt("signer3"),Qt("signer4"),Qt("signer5"),Qt("signer6"),Qt("signer7"),Qt("signer8"),Qt("signer9"),Qt("signer10"),Qt("signer11")]);class vt{constructor(e,t,n,i){Ua(this,"connection",void 0),Ua(this,"publicKey",void 0),Ua(this,"programId",void 0),Ua(this,"associatedProgramId",void 0),Ua(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:Lw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Ha.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(To.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Ku.span)}static async createMint(e,t,n,i,s,a){const u=rs.generate(),f=new vt(e,u.publicKey,a,t),h=await vt.getMinBalanceRentForExemptMint(e),d=new Nt;return d.add(li.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Ha.span,programId:a})),d.add(vt.createInitMintInstruction(a,u.publicKey,s,n,i)),await rn("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await vt.getMinBalanceRentForExemptAccount(this.connection),n=rs.generate(),i=new Nt;i.add(li.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:To.span,programId:this.programId}));const s=this.publicKey;return i.add(vt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await rn("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await rn("CreateAssociatedTokenAccount",this.connection,new Nt().add(vt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===Gb||n.message===Hb){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await vt.getMinBalanceRentForExemptAccount(e),u=rs.generate(),f=new Nt;return f.add(li.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:To.span,programId:t})),f.add(li.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(vt.createInitAccountInstruction(t,Kw,u.publicKey,n)),await rn("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=rs.generate(),i=await vt.getMinBalanceRentForExemptMultisig(this.connection),s=new Nt;s.add(li.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:Ku.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:Co,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=Yt([tt("instruction"),tt("m")]),f=ot.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await rn("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Ha.span)throw new Error("Invalid mint size");const t=ot.Buffer.from(e.data),n=Ha.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=On.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(Gb);if(!n.owner.equals(this.programId))throw new Error(Hb);if(n.data.length!=To.span)throw new Error("Invalid account size");const i=ot.Buffer.from(n.data),s=To.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=On.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new On):(s.delegate=new ve(s.delegate),s.delegatedAmount=On.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=On.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Ku.span)throw new Error("Invalid multisig size");const n=ot.Buffer.from(t.data),i=Ku.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return fr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await rn("Transfer",this.connection,new Nt().add(vt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;fr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await rn("Approve",this.connection,new Nt().add(vt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;fr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await rn("Revoke",this.connection,new Nt().add(vt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;fr(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await rn("SetAuthority",this.connection,new Nt().add(vt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;fr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await rn("MintTo",this.connection,new Nt().add(vt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;fr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await rn("Burn",this.connection,new Nt().add(vt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;fr(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await rn("CloseAccount",this.connection,new Nt().add(vt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;fr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await rn("FreezeAccount",this.connection,new Nt().add(vt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;fr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await rn("ThawAccount",this.connection,new Nt().add(vt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return fr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await rn("TransferChecked",this.connection,new Nt().add(vt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;fr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await rn("ApproveChecked",this.connection,new Nt().add(vt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;fr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await rn("MintToChecked",this.connection,new Nt().add(vt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;fr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await rn("BurnChecked",this.connection,new Nt().add(vt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await rn("SyncNative",this.connection,new Nt().add(vt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Co,isSigner:!1,isWritable:!1}];const u=Yt([tt("instruction"),tt("decimals"),Qt("mintAuthority"),tt("option"),Qt("freezeAuthority")]);let f=ot.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:_h(i),option:s===null?0:1,freezeAuthority:_h(s||new ve(0))},f);f=f.slice(0,h)}return new gt({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1}],a=Yt([tt("instruction")]),u=ot.Buffer.alloc(a.span);return a.encode({instruction:1},u),new gt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=Yt([tt("instruction"),Kr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:3,amount:new On(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=Yt([tt("instruction"),Kr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:4,amount:new On(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=Yt([tt("instruction")]),a=ot.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=Yt([tt("instruction"),tt("authorityType"),tt("option"),Qt("newAuthority")]);let f=ot.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:vC[i],option:n===null?0:1,newAuthority:_h(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=Yt([tt("instruction"),Kr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:7,amount:new On(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=Yt([tt("instruction"),Kr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:8,amount:new On(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=Yt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=Yt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=Yt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=Yt([tt("instruction"),Kr("amount"),tt("decimals")]),d=ot.Buffer.alloc(h.span);h.encode({instruction:12,amount:new On(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=Yt([tt("instruction"),Kr("amount"),tt("decimals")]),d=ot.Buffer.alloc(h.span);h.encode({instruction:13,amount:new On(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=Yt([tt("instruction"),Kr("amount"),tt("decimals")]),h=ot.Buffer.alloc(f.span);f.encode({instruction:14,amount:new On(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=Yt([tt("instruction"),Kr("amount"),tt("decimals")]),h=ot.Buffer.alloc(f.span);f.encode({instruction:15,amount:new On(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=Yt([tt("instruction")]),i=ot.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new gt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=ot.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:li.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1}];return new gt({keys:f,programId:e,data:u})}}var _C=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:Lw,AccountLayout:To,MintLayout:Ha,NATIVE_MINT:Kw,TOKEN_PROGRAM_ID:bC,Token:vt,u64:On},Symbol.toStringTag,{value:"Module"})),Ec=_c(_C),ef=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(sn,"__esModule",{value:!0});sn.getAccountInfo=sn.getTokenAccount=sn.getAssociatedTokenAddress=sn.convertFactionStringToNum=sn.longToByteArray=sn.byteArrayToLong=sn.stringToByteArray=sn.byteArrayToString=void 0;const Nu=ts,Du=mt,nl=Fi,ci=Ec;function wC(r){return String.fromCharCode(...r)}sn.byteArrayToString=wC;function SC(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}sn.stringToByteArray=SC;function AC(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}sn.byteArrayToLong=AC;function kC(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}sn.longToByteArray=kC;function IC(r){return ef(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return Nu.FactionType.MUD;case"oni":return Nu.FactionType.ONI;case"ustur":return Nu.FactionType.Ustur;default:return Nu.FactionType.Unenlisted}})}sn.convertFactionStringToNum=IC;function Nw(r,e){return ef(this,void 0,void 0,function*(){const[t]=yield nl.PublicKey.findProgramAddress([r.toBuffer(),ci.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],ci.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}sn.getAssociatedTokenAddress=Nw;function EC(r,e,t,n=e,i){return ef(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Du.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Du.BN(h.info.tokenAmount.amount);d.gt(new Du.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield Nw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(nl.SystemProgram.programId))return{tokenAccount:u,createInstruction:[ci.Token.createAssociatedTokenAccountInstruction(ci.ASSOCIATED_TOKEN_PROGRAM_ID,ci.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new nl.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Du.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[nl.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield ci.Token.getMinBalanceRentForExemptAccount(r),space:ci.AccountLayout.span,programId:ci.TOKEN_PROGRAM_ID}),ci.Token.createInitAccountInstruction(ci.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}sn.getTokenAccount=EC;function OC(r,e){return ef(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}sn.getAccountInfo=OC;var tf={},PC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(tf,"__esModule",{value:!0});tf.sendAndConfirmTransaction=void 0;const TC=Fi;function RC(r,e,...t){return PC(this,void 0,void 0,function*(){let n="";try{n=yield(0,TC.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}tf.sendAndConfirmTransaction=RC;var $s={},ng={},rg={},Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});var nf={},ys={},Tn={},Yr={},Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.baseIdl=void 0;Oc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var rf={};Object.defineProperty(rf,"__esModule",{value:!0});rf.baseIdl=void 0;rf.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var BC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),xC=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),MC=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&BC(e,r,t);return xC(e,r),e};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.getMarketplaceProgram=Yr.getGmLogsIDL=Yr.getGmIDL=void 0;const Yb=mt,CC=Oc,LC=MC(rf);function Uw(r){const e=CC.baseIdl;return e.metadata.address=r.toBase58(),e}Yr.getGmIDL=Uw;function KC(r){const e=LC.baseIdl;return e.metadata.address=r.toBase58(),e}Yr.getGmLogsIDL=KC;function NC({connection:r,programId:e}){const t=Uw(e),n=new Yb.AnchorProvider(r,null,null);return new Yb.Program(t,e,n)}Yr.getMarketplaceProgram=NC;var so=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.getSingleOrder=Tn.getOpenOrdersForPlayerAndAsset=Tn.getOpenOrdersForPlayerAndCurrency=Tn.getOpenOrdersForAsset=Tn.getOpenOrdersForCurrency=Tn.getOpenOrdersForPlayer=Tn.getAllOpenOrders=void 0;const Zn=mt,oo=Yr;function DC(r,e){return so(this,void 0,void 0,function*(){const t=new Zn.AnchorProvider(r,null,null),n=(0,oo.getGmIDL)(e),i=new Zn.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}Tn.getAllOpenOrders=DC;function UC(r,e,t){return so(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,oo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Tn.getOpenOrdersForPlayer=UC;function FC(r,e,t){return so(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,oo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Tn.getOpenOrdersForCurrency=FC;function zC(r,e,t){return so(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,oo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Tn.getOpenOrdersForAsset=zC;function WC(r,e,t,n){return so(this,void 0,void 0,function*(){const i=new Zn.AnchorProvider(r,null,null),s=(0,oo.getGmIDL)(n),a=new Zn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Tn.getOpenOrdersForPlayerAndCurrency=WC;function VC(r,e,t,n){return so(this,void 0,void 0,function*(){const i=new Zn.AnchorProvider(r,null,null),s=(0,oo.getGmIDL)(n),a=new Zn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Tn.getOpenOrdersForPlayerAndAsset=VC;function $C(r,e,t){return so(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,oo.getGmIDL)(t);return yield new Zn.Program(i,t,n).account.orderAccount.fetch(e)})}Tn.getSingleOrder=$C;var on={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.FEE_EXEMPT_SEED=Kn.OPEN_ORDERS_COUNTER=Kn.REGISTERED_CURRENCY_SEED=Kn.ORDER_VAULT_AUTH_SEED=Kn.ORDER_VAULT_SEED=Kn.MARKET_VARS_SEED=void 0;Kn.MARKET_VARS_SEED=Te.Buffer.from("market-vars");Kn.ORDER_VAULT_SEED=Te.Buffer.from("order-vault-account");Kn.ORDER_VAULT_AUTH_SEED=Te.Buffer.from("order-vault-auth");Kn.REGISTERED_CURRENCY_SEED=Te.Buffer.from("registered-currency");Kn.OPEN_ORDERS_COUNTER=Te.Buffer.from("open-orders-counter");Kn.FEE_EXEMPT_SEED=Te.Buffer.from("fee_exempt");var jC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qC=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),GC=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&jC(e,r,t);return qC(e,r),e},ms=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(on,"__esModule",{value:!0});on.getAllFeeExemptAccounts=on.getFeeExemptAccount=on.getOpenOrdersCounter=on.getAllRegisteredCurrencies=on.getRegisteredCurrencyAccount=on.getOrderVaultAuth=on.getOrderVault=on.getMarketVarsAccount=void 0;const gl=mt,ya=Fi,ma=GC(Kn),Fw=Yr;function HC(r){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.MARKET_VARS_SEED],r)})}on.getMarketVarsAccount=HC;function YC(r,e,t){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}on.getOrderVault=YC;function QC(r,e){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}on.getOrderVaultAuth=QC;function JC(r,e){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}on.getRegisteredCurrencyAccount=JC;function XC(r,e){return ms(this,void 0,void 0,function*(){const t=new gl.AnchorProvider(r,null,null),n=(0,Fw.getGmIDL)(e),i=new gl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}on.getAllRegisteredCurrencies=XC;function ZC(r,e,t){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}on.getOpenOrdersCounter=ZC;function eL(r,e){return ms(this,void 0,void 0,function*(){return ya.PublicKey.findProgramAddress([ma.FEE_EXEMPT_SEED,r.toBuffer()],e)})}on.getFeeExemptAccount=eL;function tL(r,e){return ms(this,void 0,void 0,function*(){const t=new gl.AnchorProvider(r,null,null),n=(0,Fw.getGmIDL)(e);return yield new gl.Program(n,e,t).account.feeReduction.all()})}on.getAllFeeExemptAccounts=tL;var Gn={},ba=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getRoyaltyReductionForStakingAccount=Gn.getRoyaltyReductionForUserAndMint=Gn.getRegisteredCurrencyInfoFromPubkey=Gn.getRegisteredCurrencyAccountInfo=Gn.getFeeExemptAccountInfo=Gn.getMarketVarsAccountInfo=void 0;const yl=mt,ig=on,sf=Yr,sp=Ml;function nL(r,e){return ba(this,void 0,void 0,function*(){const t=(0,sf.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,ig.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}Gn.getMarketVarsAccountInfo=nL;function rL(r,e,t){return ba(this,void 0,void 0,function*(){const n=(0,sf.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,ig.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}Gn.getFeeExemptAccountInfo=rL;function iL(r,e,t){return ba(this,void 0,void 0,function*(){const n=(0,sf.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,ig.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}Gn.getRegisteredCurrencyAccountInfo=iL;function sg(r,e,t){return ba(this,void 0,void 0,function*(){return yield(0,sf.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}Gn.getRegisteredCurrencyInfoFromPubkey=sg;function sL(r,e,t,n,i,s){return ba(this,void 0,void 0,function*(){let a=0;const u=yield sg(r,e,i),[f]=yield(0,sp.getStakingAccount)(t,n,s),h=yield(0,sp.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new yl.BN(0))){const d=u.royaltyTiers;let m=new yl.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}Gn.getRoyaltyReductionForUserAndMint=sL;function oL(r,e,t,n,i){return ba(this,void 0,void 0,function*(){let s=0;const a=yield sg(r,e,i),u=yield(0,sp.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new yl.BN(0))){const f=a.royaltyTiers;let h=new yl.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}Gn.getRoyaltyReductionForStakingAccount=oL;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Tn,r),t(on,r),t(Gn,r),t(Kn,r)})(ys);var Pc={},tr={},os={},aL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(os,"__esModule",{value:!0});os.convertDecimalPriceToBn=os.initializeAtaForMint=os.getOrderSide=void 0;const cL=mt,uL=eo,wh=Ec,lL=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";os.getOrderSide=lL;function fL({mint:r,owner:e,connection:t}){return aL(this,void 0,void 0,function*(){const n=[],i=yield(0,uL.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(wh.Token.createAssociatedTokenAccountInstruction(wh.ASSOCIATED_TOKEN_PROGRAM_ID,wh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}os.initializeAtaForMint=fL;const dL=(r,e)=>new cL.BN(r*Math.pow(10,e));os.convertDecimalPriceToBn=dL;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yr,r),t(os,r)})(tr);var hL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createOrderCounterInstruction=void 0;const pL=tr;function gL({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return hL(this,void 0,void 0,function*(){return yield(0,pL.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}Pc.createOrderCounterInstruction=gL;var yL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(nf,"__esModule",{value:!0});nf.createCancelOrderInstruction=void 0;const mL=mt,bL=ys,vL=Pc,Qb=tr,_L=Wr;function wL({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return yL(this,void 0,void 0,function*(){const s=(0,Qb.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,Qb.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,_L.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof mL.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,bL.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,vL.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}nf.createCancelOrderInstruction=wL;var Zo={},zw=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.createInitializeSellOrderInstruction=Zo.createInitializeBuyOrderInstruction=void 0;const Vo=mt,Ww=tr,Vw=Wr,$w=ys,jw=Pc,qw=Wr;function SL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return zw(this,void 0,void 0,function*(){const f=(0,Ww.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Vw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Vo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,$w.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Vo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,qw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeBuy(n,new Vo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Zo.createInitializeBuyOrderInstruction=SL;function AL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return zw(this,void 0,void 0,function*(){const f=(0,Ww.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Vw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Vo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,$w.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Vo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,qw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeSell(n,new Vo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Zo.createInitializeSellOrderInstruction=AL;var of={},kL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(of,"__esModule",{value:!0});of.createDeregisterCurrencyInstruction=void 0;const IL=tr;function EL({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return kL(this,void 0,void 0,function*(){const s=[yield(0,IL.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}of.createDeregisterCurrencyInstruction=EL;var af={},cf={},uf={},Gw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",M=d+"Division by zero",A={},R=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var V=this;if(!(V instanceof E))return N===R?Y():new E(N);if(N instanceof E)V.s=N.s,V.e=N.e,V.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(V,N)}V.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var V,Q,K;if(!C.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(V=N.indexOf("."))>-1&&(N=N.replace(".","")),(Q=N.search(/e/i))>0?(V<0&&(V=Q),V+=+N.slice(Q+1),N=N.substring(0,Q)):V<0&&(V=N.length),K=N.length,Q=0;Q<K&&N.charAt(Q)=="0";)++Q;if(Q==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=V-Q-1,E.c=[],V=0;Q<=K;)E.c[V++]=+N.charAt(Q++)}return E}function oe(E,N,V,Q){var K=E.c;if(V===R&&(V=E.constructor.RM),V!==0&&V!==1&&V!==2&&V!==3)throw Error(O);if(N<1)Q=V===3&&(Q||!!K[0])||N===0&&(V===1&&K[0]>=5||V===2&&(K[0]>5||K[0]===5&&(Q||K[1]!==R))),K.length=1,Q?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(Q=V===1&&K[N]>=5||V===2&&(K[N]>5||K[N]===5&&(Q||K[N+1]!==R||K[N-1]&1))||V===3&&(Q||!!K[0]),K.length=N,Q){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,V){var Q=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(Q<0?"e":"e+")+Q;else if(Q<0){for(;++Q;)K="0"+K;K="0."+K}else if(Q>0)if(++Q>j)for(Q-=j;Q--;)K+="0";else Q<j&&(K=K.slice(0,Q)+"."+K.slice(Q));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&V?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,V=this,Q=V.c,K=(E=new V.constructor(E)).c,j=V.s,te=E.s,T=V.e,W=E.e;if(!Q[0]||!K[0])return Q[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=W)return T>W^N?1:-1;for(te=(T=Q.length)<(W=K.length)?T:W,j=-1;++j<te;)if(Q[j]!=K[j])return Q[j]>K[j]^N?1:-1;return T==W?0:T>W^N?1:-1},A.div=function(E){var N=this,V=N.constructor,Q=N.c,K=(E=new V(E)).c,j=N.s==E.s?1:-1,te=V.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(M);if(!Q[0])return E.s=j,E.c=[E.e=0],E;var T,W,X,Me,ye,Ee=K.slice(),Gt=T=K.length,Ht=Q.length,_e=Q.slice(0,T),$e=_e.length,en=E,fn=en.c=[],Et=0,ht=te+(en.e=N.e-E.e)+1;for(en.s=j,j=ht<0?0:ht,Ee.unshift(0);$e++<T;)_e.push(0);do{for(X=0;X<10;X++){if(T!=($e=_e.length))Me=T>$e?1:-1;else for(ye=-1,Me=0;++ye<T;)if(K[ye]!=_e[ye]){Me=K[ye]>_e[ye]?1:-1;break}if(Me<0){for(W=$e==T?K:Ee;$e;){if(_e[--$e]<W[$e]){for(ye=$e;ye&&!_e[--ye];)_e[ye]=9;--_e[ye],_e[$e]+=10}_e[$e]-=W[$e]}for(;!_e[0];)_e.shift()}else break}fn[Et++]=Me?X:++X,_e[0]&&Me?_e[$e]=Q[Gt]||0:_e=[Q[Gt]]}while((Gt++<Ht||_e[0]!==R)&&j--);return!fn[0]&&Et!=1&&(fn.shift(),en.e--,ht--),Et>ht&&oe(en,ht,V.RM,_e[0]!==R),en},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,V,Q,K,j=this,te=j.constructor,T=j.s,W=(E=new te(E)).s;if(T!=W)return E.s=-W,j.plus(E);var X=j.c.slice(),Me=j.e,ye=E.c,Ee=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-W:X[0]?E=new te(j):E.s=1,E;if(T=Me-Ee){for((K=T<0)?(T=-T,Q=X):(Ee=Me,Q=ye),Q.reverse(),W=T;W--;)Q.push(0);Q.reverse()}else for(V=((K=X.length<ye.length)?X:ye).length,T=W=0;W<V;W++)if(X[W]!=ye[W]){K=X[W]<ye[W];break}if(K&&(Q=X,X=ye,ye=Q,E.s=-E.s),(W=(V=ye.length)-(N=X.length))>0)for(;W--;)X[N++]=0;for(W=N;V>T;){if(X[--V]<ye[V]){for(N=V;N&&!X[--N];)X[N]=9;--X[N],X[V]+=10}X[V]-=ye[V]}for(;X[--W]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ee;return X[0]||(E.s=1,X=[Ee=0]),E.c=X,E.e=Ee,E},A.mod=function(E){var N,V=this,Q=V.constructor,K=V.s,j=(E=new Q(E)).s;if(!E.c[0])throw Error(M);return V.s=E.s=1,N=E.cmp(V)==1,V.s=K,E.s=j,N?new Q(V):(K=Q.DP,j=Q.RM,Q.DP=Q.RM=0,V=V.div(E),Q.DP=K,Q.RM=j,this.minus(V.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,V,Q,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,W=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-W){for(N>0?(W=te,Q=X):(N=-N,Q=T),Q.reverse();N--;)Q.push(0);Q.reverse()}for(T.length-X.length<0&&(Q=X,X=T,T=Q),N=X.length,V=0;N;T[N]%=10)V=(T[--N]=T[N]+X[N]+V)/10|0;for(V&&(T.unshift(V),++W),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=W,E},A.pow=function(E){var N=this,V=new N.constructor("1"),Q=V,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(Q=Q.times(N)),E>>=1,!!E;)N=N.times(N);return K?V.div(Q):Q},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,V,Q=this,K=Q.constructor,j=Q.s,te=Q.e,T=new K("0.5");if(!Q.c[0])return new K(Q);if(j<0)throw Error(d+"No square root");j=Math.sqrt(Q+""),j===0||j===1/0?(N=Q.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do V=E,E=T.times(V.plus(Q.div(V)));while(V.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,V=this,Q=V.constructor,K=V.c,j=(E=new Q(E)).c,te=K.length,T=j.length,W=V.e,X=E.e;if(E.s=V.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=W+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(W=T;W--;){for(T=0,X=te+W;X>W;)T=N[X]+j[W]*K[X-W-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),W=N.length;!N[--W];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var V=this,Q=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),++E,N);V.c.length<E;)V.c.push(0)}return de(V,!0,!!Q)},A.toFixed=function(E,N){var V=this,Q=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),E+V.e+1,N),E=E+V.e+1;V.c.length<E;)V.c.push(0)}return de(V,!1,!!Q)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},A.toPrecision=function(E,N){var V=this,Q=V.constructor,K=V.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(V=oe(new Q(V),E,N);V.c.length<E;)V.c.push(0)}return de(V,E<=V.e||V.e<=Q.NE||V.e>=Q.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(z)})(Gw);function Ke(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var OL={};function og(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te.global<"u"?Te.global:typeof self<"u"?self:OL}var Hw=Object.assign,ml=Object.getOwnPropertyDescriptor,pi=Object.defineProperty,Tc=Object.prototype,op=[];Object.freeze(op);var ag={};Object.freeze(ag);var PL=typeof Proxy<"u",TL=Object.toString();function Yw(){PL||Ke("Proxy not available")}function Qw(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Ko=function(){};function wr(r){return typeof r=="function"}function js(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function lf(r){return r!==null&&typeof r=="object"}function Ui(r){if(!lf(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===TL}function Jw(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Rc(r,e,t){pi(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Xw(r,e,t){pi(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function bs(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return lf(n)&&n[t]===!0}}function va(r){return r instanceof Map}function Bc(r){return r instanceof Set}var Zw=typeof Object.getOwnPropertySymbols<"u";function RL(r){var e=Object.keys(r);if(!Zw)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return Tc.propertyIsEnumerable.call(r,n)})):e}var ea=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Zw?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function e0(r){return r===null?null:typeof r=="object"?""+r:r}function Ni(r,e){return Tc.hasOwnProperty.call(r,e)}var BL=Object.getOwnPropertyDescriptors||function(e){var t={};return ea(e).forEach(function(n){t[n]=ml(e,n)}),t};function Jb(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,CL(n.key),n)}}function cg(r,e,t){return e&&Jb(r.prototype,e),t&&Jb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ds(){return ds=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ds.apply(this,arguments)}function t0(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,ap(r,e)}function ap(r,e){return ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ap(r,e)}function Sh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xL(r,e){if(!!r){if(typeof r=="string")return Xb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xb(r,e)}}function Xb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function No(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=xL(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ML(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function CL(r){var e=ML(r,"string");return typeof e=="symbol"?e:String(e)}var hi=Symbol("mobx-stored-annotations");function Qr(r){function e(t,n){if(xc(n))return r.decorate_20223_(t,n);_a(t,n,r)}return Object.assign(e,r)}function _a(r,e,t){Ni(r,hi)||Rc(r,hi,ds({},r[hi])),VL(t)||(r[hi][e]=t)}function LL(r){return Ni(r,hi)||Rc(r,hi,ds({},r[hi])),r[hi]}function xc(r){return typeof r=="object"&&typeof r.kind=="string"}var Ae=Symbol("mobx administration"),Mc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return S0(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),Yn(),A0(this),Qn()},e.toString=function(){return this.name_},r}(),ug=bs("Atom",Mc);function ff(r,e,t){e===void 0&&(e=Ko),t===void 0&&(t=Ko);var n=new Mc(r);return e!==Ko&&x0(n,e),t!==Ko&&Kc(n,t),n}function KL(r,e){return r===e}function NL(r,e){return mg(r,e)}function DL(r,e){return mg(r,e,1)}function UL(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var qs={identity:KL,structural:NL,default:UL,shallow:DL};function Gs(r,e,t){return vf(r)?r:Array.isArray(r)?xt.array(r,{name:t}):Ui(r)?xt.object(r,void 0,{name:t}):va(r)?xt.map(r,{name:t}):Bc(r)?xt.set(r,{name:t}):typeof r=="function"&&!vs(r)&&!ia(r)?Jw(r)?Qs(r):ra(t,r):r}function FL(r,e,t){if(r==null||cn(r)||pn(r)||ln(r)||Dn(r))return r;if(Array.isArray(r))return xt.array(r,{name:t,deep:!1});if(Ui(r))return xt.object(r,void 0,{name:t,deep:!1});if(va(r))return xt.map(r,{name:t,deep:!1});if(Bc(r))return xt.set(r,{name:t,deep:!1})}function df(r){return r}function zL(r,e){return mg(r,e)?e:r}var n0="override",WL=Qr({annotationType_:n0,make_:$L,extend_:jL,decorate_20223_:qL});function VL(r){return r.annotationType_===n0}function $L(r,e){return 0}function jL(r,e,t,n){Ke("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function qL(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Cc(r,e){return{annotationType_:r,options_:e,make_:GL,extend_:HL,decorate_20223_:YL}}function GL(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(vs(t.value))return 1;var s=r0(r,this,e,t,!1);return pi(n,e,s),2}function HL(r,e,t,n){var i=r0(r,this,e,t);return r.defineProperty_(e,i,n)}function YL(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return hs((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){_a(this,n,s)});return}if(t=="method"){var u;return vs(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Ke("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function QL(r,e,t,n){e.annotationType_,n.value}function r0(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),QL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:hs((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function i0(r,e){return{annotationType_:r,options_:e,make_:JL,extend_:XL,decorate_20223_:ZL}}function JL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Ni(r.target_,e)||!ia(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(ia(t.value))return 1;var s=s0(r,this,e,t,!1,!1);return pi(n,e,s),2}function XL(r,e,t,n){var i,s=s0(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function ZL(r,e){var t,n=e.name,i=e.addInitializer;return ia(r)||(r=Qs(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function eK(r,e,t,n){e.annotationType_,n.value}function s0(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),eK(r,e,t,n);var a=n.value;if(ia(a)||(a=Qs(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function lg(r,e){return{annotationType_:r,options_:e,make_:tK,extend_:nK,decorate_20223_:rK}}function tK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function nK(r,e,t,n){return iK(r,this,e,t),r.defineComputedProperty_(e,ds({},this.options_,{get:t.get,set:t.set}),n)}function rK(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=co(this)[Ae],a=ds({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new na(a))}),function(){return this[Ae].getObservablePropValue_(n)}}function iK(r,e,t,n){e.annotationType_,n.get}function hf(r,e){return{annotationType_:r,options_:e,make_:sK,extend_:oK,decorate_20223_:aK}}function sK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function oK(r,e,t,n){var i,s;return cK(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Gs,n)}function aK(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=co(u)[Ae],I=new as(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Gs,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Ae].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[Ae].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function cK(r,e,t,n){e.annotationType_}var uK="true",lK=o0();function o0(r){return{annotationType_:uK,options_:r,make_:fK,extend_:dK,decorate_20223_:hK}}function fK(r,e,t,n){var i,s;if(t.get)return Fr.make_(r,e,t,n);if(t.set){var a=hs(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(pi(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(Jw(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?Qs.bound:Qs;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?ra.bound:ra;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?xt.ref:xt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function dK(r,e,t,n){var i,s;if(t.get)return Fr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:hs(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?xt.ref:xt;return u.extend_(r,e,t,n)}function hK(r,e){Ke("'"+this.annotationType_+"' cannot be used as a decorator")}var pK="observable",gK="observable.ref",yK="observable.shallow",mK="observable.struct",a0={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(a0);function Uu(r){return r||a0}var cp=hf(pK),bK=hf(gK,{enhancer:df}),vK=hf(yK,{enhancer:FL}),_K=hf(mK,{enhancer:zL}),c0=Qr(cp);function Fu(r){return r.deep===!0?Gs:r.deep===!1?df:SK(r.defaultDecorator)}function wK(r){var e;return r?(e=r.defaultDecorator)!=null?e:o0(r):void 0}function SK(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Gs}function u0(r,e,t){if(xc(e))return cp.decorate_20223_(r,e);if(js(e)){_a(r,e,cp);return}return vf(r)?r:Ui(r)?xt.object(r,e,t):Array.isArray(r)?xt.array(r,e):va(r)?xt.map(r,e):Bc(r)?xt.set(r,e):typeof r=="object"&&r!==null?r:xt.box(r,e)}Hw(u0,c0);var AK={box:function(e,t){var n=Uu(t);return new as(e,Fu(n),n.name,!0,n.equals)},array:function(e,t){var n=Uu(t);return(fe.useProxies===!1||n.proxy===!1?CN:kN)(e,Fu(n),n.name)},map:function(e,t){var n=Uu(t);return new _f(e,Fu(n),n.name)},set:function(e,t){var n=Uu(t);return new gg(e,Fu(n),n.name)},object:function(e,t,n){return ws(function(){return mf(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?co({},n):_N({},n),e,t)})},ref:Qr(bK),shallow:Qr(vK),deep:c0,struct:Qr(_K)},xt=Hw(u0,AK),l0="computed",kK="computed.struct",up=lg(l0),IK=lg(kK,{equals:qs.structural}),Fr=function(e,t){if(xc(t))return up.decorate_20223_(e,t);if(js(t))return _a(e,t,up);if(Ui(e))return Qr(lg(l0,e));var n=Ui(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new na(n)};Object.assign(Fr,up);Fr.struct=Qr(IK);var Zb,ev,bl=0,EK=1,OK=(Zb=(ev=ml(function(){},"name"))==null?void 0:ev.configurable)!=null?Zb:!1,tv={value:"action",configurable:!0,writable:!1,enumerable:!1};function hs(r,e,t,n){t===void 0&&(t=!1);function i(){return f0(r,t,e,n||this,arguments)}return i.isMobxAction=!0,OK&&(tv.value=r,pi(i,"name",tv)),i}function f0(r,e,t,n,i){var s=d0(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{h0(s)}}function d0(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;Yn();var f=fe.allowStateChanges;u&&(ao(),f=pf(!0));var h=yf(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:EK++,parentActionId_:bl};return bl=d.actionId_,d}function h0(r){bl!==r.actionId_&&Ke(30),bl=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),gf(r.prevAllowStateChanges_),$o(r.prevAllowStateReads_),Qn(),r.runAsAction_&&Di(r.prevDerivation_),fe.suppressReactionErrors=!1}function ta(r,e){var t=pf(r);try{return e()}finally{gf(t)}}function pf(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function gf(r){fe.allowStateChanges=r}var p0;p0=Symbol.toPrimitive;var as=function(r){t0(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=qs.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Dr(this)){var s=Ur(this,{object:this,type:gi,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Jr(this)&&Xr(this,{type:gi,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Nc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:gi,newValue:this.value_,oldValue:void 0}),Dc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return e0(this.get())},t[p0]=function(){return this.valueOf()},e}(Mc),fg=bs("ObservableValue",as),g0;g0=Symbol.toPrimitive;var na=function(){function r(t){this.dependenciesState_=it.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new _l(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=vl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ke(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=hs("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?qs.structural:qs.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){KK(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ke(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)lp(this)&&(this.warnAboutUntrackedRead_(),Yn(),this.value_=this.computeValue_(!1),Qn());else if(S0(this),lp(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&LK(this),fe.trackingContext=n}var i=this.value_;if(rl(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ke(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ke(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===it.NOT_TRACKING_,s=this.computeValue_(!0),a=i||rl(n)||rl(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=pf(!1),s;if(n)s=y0(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new _l(a)}return gf(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(fp(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Ys(function(){var f=s.get();if(!a||i){var h=ao();n({observableKind:"computed",debugObjectName:s.name_,type:gi,object:s,newValue:f,oldValue:u}),Di(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return e0(this.get())},e[g0]=function(){return this.valueOf()},r}(),Hs=bs("ComputedValue",na),it;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(it||(it={}));var vl;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(vl||(vl={}));var _l=function(e){this.cause=void 0,this.cause=e};function rl(r){return r instanceof _l}function lp(r){switch(r.dependenciesState_){case it.UP_TO_DATE_:return!1;case it.NOT_TRACKING_:case it.STALE_:return!0;case it.POSSIBLY_STALE_:{for(var e=yf(!0),t=ao(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(Hs(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Di(t),$o(e),!0}if(r.dependenciesState_===it.STALE_)return Di(t),$o(e),!0}}return m0(r),Di(t),$o(e),!1}}}function Lc(){return fe.trackingDerivation!==null}function y0(r,e,t){var n=yf(!0);m0(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new _l(a)}return fe.inBatch--,fe.trackingDerivation=i,PK(r),$o(n),s}function PK(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=it.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&_0(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,CK(h,r))}n!==it.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function fp(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)_0(e[t],r);r.dependenciesState_=it.NOT_TRACKING_}function dg(r){var e=ao();try{return r()}finally{Di(e)}}function ao(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function Di(r){fe.trackingDerivation=r}function yf(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function $o(r){fe.allowStateReads=r}function m0(r){if(r.dependenciesState_!==it.UP_TO_DATE_){r.dependenciesState_=it.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=it.UP_TO_DATE_}}var TK=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],nc=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},il=!0,b0=!1,fe=function(){var r=og();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(il=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new nc().version&&(il=!1),il?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new nc):(setTimeout(function(){b0||Ke(35)},1),new nc)}();function RK(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Ke(36),b0=!0,il){var r=og();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new nc}}function v0(){return fe}function BK(){var r=new nc;for(var e in r)TK.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function xK(r){return r.observers_&&r.observers_.size>0}function MK(r){return r.observers_}function CK(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function _0(r,e){r.observers_.delete(e),r.observers_.size===0&&w0(r)}function w0(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function Yn(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function Qn(){if(--fe.inBatch===0){k0();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof na&&t.suspend_())}fe.pendingUnobservations=[]}}function S0(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&w0(r),!1)}function A0(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=it.STALE_}))}function LK(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.POSSIBLY_STALE_?e.dependenciesState_=it.STALE_:e.dependenciesState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.UP_TO_DATE_)}))}function KK(r){r.lowestObserverState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&(e.dependenciesState_=it.POSSIBLY_STALE_,e.onBecomeStale_())}))}var pc=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=it.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=vl.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),k0())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Yn(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,lp(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,Qn()}},e.track=function(n){if(!this.isDisposed_){Yn(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=y0(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&fp(this),rl(s)&&this.reportExceptionInDerivation_(s.cause),Qn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Yn(),fp(this),Qn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Ae]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function NK(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var DK=100,dp=function(e){return e()};function k0(){fe.inBatch>0||fe.isRunningReactions||dp(UK)}function UK(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===DK&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var wl=bs("Reaction",pc);function FK(r){var e=dp;dp=function(n){return r(function(){return e(n)})}}function rc(){return!1}function I0(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var E0="action",zK="action.bound",O0="autoAction",WK="autoAction.bound",P0="<unnamed action>",hp=Cc(E0),VK=Cc(zK,{bound:!0}),pp=Cc(O0,{autoAction:!0}),$K=Cc(WK,{autoAction:!0,bound:!0});function T0(r){var e=function(n,i){if(wr(n))return hs(n.name||P0,n,r);if(wr(i))return hs(n,i,r);if(xc(i))return(r?pp:hp).decorate_20223_(n,i);if(js(i))return _a(n,i,r?pp:hp);if(js(n))return Qr(Cc(r?O0:E0,{name:n,autoAction:r}))};return e}var zt=T0(!1);Object.assign(zt,hp);var ra=T0(!0);Object.assign(ra,pp);zt.bound=Qr(VK);ra.bound=Qr($K);function gc(r){return f0(r.name||P0,!1,r,this,void 0)}function vs(r){return wr(r)&&r.isMobxAction===!0}function Ys(r,e){var t,n,i,s,a;e===void 0&&(e=ag);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new pc(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=R0(e),m=!1;h=new pc(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var jK=function(e){return e()};function R0(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:jK}function B0(r,e,t){var n,i,s,a;t===void 0&&(t=ag);var u=(n=t.name)!=null?n:"Reaction",f=zt(u,t.onError?qK(t.onError,e):e),h=!t.scheduler&&!t.delay,d=R0(t),m=!0,I=!1,O,M,A=t.compareStructural?qs.structural:t.equals||qs.default,R=new pc(u,function(){m||h?C():I||(I=!0,d(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=ta(!1,function(){return r(R)});Y=m||!A(O,ae),M=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,M,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function qK(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var GK="onBO",HK="onBUO";function x0(r,e,t){return M0(GK,r,e,t)}function Kc(r,e,t){return M0(HK,r,e,t)}function M0(r,e,t,n){var i=typeof n=="function"?yi(e,t):yi(e),s=wr(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var YK="never",zu="always",QK="observed";function JK(r){r.isolateGlobalState===!0&&RK();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===zu?!0:e===YK?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===zu?zu:t===QK;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===zu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&FK(r.reactionScheduler)}function mf(r,e,t,n){var i=BL(e);return ws(function(){var s=co(r,n)[Ae];ea(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function XK(r,e){return C0(yi(r,e))}function C0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=eN(r.observing_).map(C0)),e}function ZK(r,e){return L0(yi(r,e))}function L0(r){var e={name:r.name_};return xK(r)&&(e.observers=Array.from(MK(r)).map(L0)),e}function eN(r){return Array.from(new Set(r))}var tN=0;function bf(){this.message="FLOW_CANCELLED"}bf.prototype=Object.create(Error.prototype);function nN(r){return r instanceof bf}var Ah=i0("flow"),rN=i0("flow.bound",{bound:!0}),Qs=Object.assign(function(e,t){if(xc(t))return Ah.decorate_20223_(e,t);if(js(t))return _a(e,t,Ah);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++tN,d=zt(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(M,A){var R=0;m=A;function C(oe){I=void 0;var de;try{de=zt(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return A(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=zt(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return A(E)}ae(de)}function ae(oe){if(wr(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?M(oe.value):(I=Promise.resolve(oe.value),I.then(C,Y))}C(void 0)});return O.cancel=zt(i+" - runid: "+h+" - cancel",function(){try{I&&nv(I);var M=d.return(void 0),A=Promise.resolve(M.value);A.then(Ko,Ko),nv(A),m(new bf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},Ah);Qs.bound=Qr(rN);function nv(r){wr(r.cancel)&&r.cancel()}function iN(r){return r}function ia(r){return(r==null?void 0:r.isMobXFlow)===!0}function sN(r,e,t){var n;return ln(r)||pn(r)||fg(r)?n=mi(r):cn(r)&&(n=mi(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function oN(r,e,t){return wr(t)?cN(r,e,t):aN(r,e)}function aN(r,e){return mi(r).intercept_(e)}function cN(r,e,t){return mi(r,e).intercept_(t)}function K0(r,e){if(e===void 0)return Hs(r);if(cn(r)===!1||!r[Ae].values_.has(e))return!1;var t=yi(r,e);return Hs(t)}function N0(r){return K0(r)}function sl(r,e){return K0(r,e)}function D0(r,e){return r?e!==void 0?cn(r)?r[Ae].values_.has(e):!1:cn(r)||!!r[Ae]||ug(r)||wl(r)||Hs(r):!1}function vf(r){return D0(r)}function uN(r,e){return D0(r,e)}function sa(r){if(cn(r))return r[Ae].keys_();if(ln(r)||Dn(r))return Array.from(r.keys());if(pn(r))return r.map(function(e,t){return t});Ke(5)}function U0(r){if(cn(r))return sa(r).map(function(e){return r[e]});if(ln(r))return sa(r).map(function(e){return r.get(e)});if(Dn(r))return Array.from(r.values());if(pn(r))return r.slice();Ke(6)}function F0(r){if(cn(r))return sa(r).map(function(e){return[e,r[e]]});if(ln(r))return sa(r).map(function(e){return[e,r.get(e)]});if(Dn(r))return Array.from(r.entries());if(pn(r))return r.map(function(e,t){return[t,e]});Ke(7)}function z0(r,e,t){if(arguments.length===2&&!Dn(r)){Yn();var n=e;try{for(var i in n)z0(r,i,n[i])}finally{Qn()}return}cn(r)?r[Ae].set_(e,t):ln(r)?r.set(e,t):Dn(r)?r.add(e):pn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ke("Invalid index: '"+e+"'"),Yn(),e>=r.length&&(r.length=e+1),r[e]=t,Qn()):Ke(8)}function lN(r,e){cn(r)?r[Ae].delete_(e):ln(r)||Dn(r)?r.delete(e):pn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ke(9)}function W0(r,e){if(cn(r))return r[Ae].has_(e);if(ln(r))return r.has(e);if(Dn(r))return r.has(e);if(pn(r))return e>=0&&e<r.length;Ke(10)}function fN(r,e){if(!!W0(r,e)){if(cn(r))return r[Ae].get_(e);if(ln(r))return r.get(e);if(pn(r))return r[e];Ke(11)}}function dN(r,e,t){if(cn(r))return r[Ae].defineProperty_(e,t);Ke(39)}function V0(r){if(cn(r))return r[Ae].ownKeys_();Ke(38)}function oa(r,e,t,n){return wr(t)?pN(r,e,t,n):hN(r,e,t)}function hN(r,e,t){return mi(r).observe_(e,t)}function pN(r,e,t,n){return mi(r,e).observe_(t,n)}function Wu(r,e,t){return r.set(e,t),t}function Ro(r,e){if(r==null||typeof r!="object"||r instanceof Date||!vf(r))return r;if(fg(r)||Hs(r))return Ro(r.get(),e);if(e.has(r))return e.get(r);if(pn(r)){var t=Wu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=Ro(a,e)}),t}if(Dn(r)){var n=Wu(e,r,new Set);return r.forEach(function(a){n.add(Ro(a,e))}),n}if(ln(r)){var i=Wu(e,r,new Map);return r.forEach(function(a,u){i.set(u,Ro(a,e))}),i}else{var s=Wu(e,r,{});return V0(r).forEach(function(a){Tc.propertyIsEnumerable.call(r,a)&&(s[a]=Ro(r[a],e))}),s}}function gN(r,e){return Ro(r,new Map)}function yN(){}function Nr(r,e){e===void 0&&(e=void 0),Yn();try{return r.apply(e)}finally{Qn()}}function mN(r,e,t){return arguments.length===1||e&&typeof e=="object"?bN(r,e):$0(r,e,t||{})}function $0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Ae].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=hs("When-effect",e),a=Ys(function(u){var f=ta(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function bN(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=$0(r,a,ds({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function Eo(r){return r[Ae]}var vN={has:function(e,t){return Eo(e).has_(t)},get:function(e,t){return Eo(e).get_(t)},set:function(e,t,n){var i;return js(t)?(i=Eo(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return js(t)?(n=Eo(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=Eo(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return Eo(e).ownKeys_()},preventExtensions:function(e){Ke(13)}};function _N(r,e){var t,n;return Yw(),r=co(r,e),(n=(t=r[Ae]).proxy_)!=null?n:t.proxy_=new Proxy(r,vN)}function Dr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Nc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),Qw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Ur(r,e){var t=ao();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ke(14),!!e);i++);return e}finally{Di(t)}}function Jr(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Dc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),Qw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Xr(r,e){var t=ao(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Di(t)}}function hg(r,e,t){return ws(function(){var n,i=co(r,t)[Ae];(n=e)!=null||(e=LL(r)),ea(e).forEach(function(s){return i.make_(s,e[s])})}),r}var kh=Symbol("mobx-keys");function wN(r,e,t){return Ui(r)?mf(r,r,e,t):(ws(function(){var n=co(r,t)[Ae];if(!r[kh]){var i=Object.getPrototypeOf(r),s=new Set([].concat(ea(r),ea(i)));s.delete("constructor"),s.delete(Ae),Rc(i,kh,s)}r[kh].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var rv="splice",gi="update",SN=1e4,AN={get:function(e,t){var n=e[Ae];return t===Ae?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Ni(Sl,t)?Sl[t]:e[t]},set:function(e,t,n){var i=e[Ae];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ke(15)}},pg=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new Mc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return Nc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Dc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ke("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ke(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&Z0(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=op),Dr(this)){var f=Ur(this,{object:this.proxy_,type:rv,index:n,removedCount:i,added:s});if(!f)return op;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<SN){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&rc(),u=Jr(this),f=u||a?{observableKind:"array",object:this.proxy_,type:gi,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&Xr(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&rc(),u=Jr(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:rv,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&Xr(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ke(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Dr(this)){var u=Ur(this,{type:gi,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function kN(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),Yw(),ws(function(){var i=new pg(t,e,n,!1);Xw(i.values_,Ae,i);var s=new Proxy(i.values_,AN);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var Sl={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ae];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Ae];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Ae].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ae].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Ke(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Ke(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ae],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};un("concat",zi);un("flat",zi);un("includes",zi);un("indexOf",zi);un("join",zi);un("lastIndexOf",zi);un("slice",zi);un("toString",zi);un("toLocaleString",zi);un("every",_s);un("filter",_s);un("find",_s);un("findIndex",_s);un("flatMap",_s);un("forEach",_s);un("map",_s);un("some",_s);un("reduce",j0);un("reduceRight",j0);function un(r,e){typeof Array.prototype[r]=="function"&&(Sl[r]=e(r))}function zi(r){return function(){var e=this[Ae];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function _s(r){return function(e,t){var n=this,i=this[Ae];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function j0(r){return function(){var e=this,t=this[Ae];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var IN=bs("ObservableArrayAdministration",pg);function pn(r){return lf(r)&&IN(r[Ae])}var q0,G0,EN={},is="add",Al="delete";q0=Symbol.iterator;G0=Symbol.toStringTag;var _f=function(){function r(t,n,i){var s=this;n===void 0&&(n=Gs),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ae]=EN,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,wr(Map)||Ke(18),ws(function(){s.keysAtom_=ff("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new as(this.has_(n),df,"ObservableMap.key?",!1);this.hasMap_.set(n,a),Kc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Dr(this)){var a=Ur(this,{type:s?gi:is,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Dr(this)){var s=Ur(this,{type:Al,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=rc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:Al,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Nr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&Xr(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=rc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:gi,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Xr(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Nr(function(){var h,d=new as(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=rc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:is,object:this,name:n,newValue:i}:null;u&&Xr(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return yc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return yc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[q0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=No(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return ln(n)&&(n=new Map(n)),Nr(function(){Ui(n)?RL(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):va(n)?(n.constructor!==Map&&Ke(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ke(20,n)}),this},e.clear=function(){var n=this;Nr(function(){dg(function(){for(var i=No(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Nr(function(){for(var s=ON(n),a=new Map,u=!1,f=No(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=No(s.entries()),M;!(M=O()).done;){var A=M.value,R=A[0],C=A[1],Y=i.data_.has(R);if(i.set(R,C),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Dc(this,n)},e.intercept_=function(n){return Nc(this,n)},cg(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:G0,get:function(){return"Map"}}]),r}(),ln=bs("ObservableMap",_f);function ON(r){if(va(r)||ln(r))return r;if(Array.isArray(r))return new Map(r);if(Ui(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ke(21,r)}var H0,Y0,PN={};H0=Symbol.iterator;Y0=Symbol.toStringTag;var gg=function(){function r(t,n,i){var s=this;n===void 0&&(n=Gs),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ae]=PN,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,wr(Set)||Ke(22),this.enhancer_=function(a,u){return n(a,u,i)},ws(function(){s.atom_=ff(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Nr(function(){dg(function(){for(var i=No(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=No(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Dr(this)){var s=Ur(this,{type:is,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Nr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=Jr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:is,object:this,newValue:n}:null;u&&Xr(this,f)}return this},e.delete=function(n){var i=this;if(Dr(this)){var s=Ur(this,{type:Al,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=Jr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:Al,object:this,oldValue:n}:null;return Nr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&Xr(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return yc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return yc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Dn(n)&&(n=new Set(n)),Nr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):Bc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ke("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Dc(this,n)},e.intercept_=function(n){return Nc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[H0]=function(){return this.values()},cg(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Y0,get:function(){return"Set"}}]),r}(),Dn=bs("ObservableSet",gg),iv=Object.create(null),sv="remove",Q0=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=lK),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new Mc("ObservableObject.keys"),this.isPlainObject_=Ui(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof na)return s.set(i),!0;if(Dr(this)){var a=Ur(this,{type:gi,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=Jr(this),f=!1,h=u||f?{type:gi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Xr(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Ni(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Ni(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new as(n in this.target_,df,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[hi])!=null&&s[n])return;Ke(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==Tc;){var u=ml(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}av(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&av(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Yn();var a=this.delete_(n);if(!a)return a;if(Dr(this)){var u=Ur(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=ds({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else pi(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Qn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{Yn();var u=this.delete_(n);if(!u)return u;if(Dr(this)){var f=Ur(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:i});if(!f)return null;i=f.newValue}var h=ov(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else pi(this.target_,n,d);var m=new as(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{Qn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Yn();var a=this.delete_(n);if(!a)return a;if(Dr(this)){var u=Ur(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=ov(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else pi(this.target_,n,h);this.values_.set(n,new na(i)),this.notifyPropertyAddition_(n,void 0)}finally{Qn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Ni(this.target_,n))return!0;if(Dr(this)){var s=Ur(this,{object:this.proxy_||this.target_,name:n,type:sv});if(!s)return null}try{var a,u;Yn();var f=Jr(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=ml(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof as&&(m=d.value_),A0(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:sv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&Xr(this,O)}}finally{Qn()}return!0},e.observe_=function(n,i){return Dc(this,n)},e.intercept_=function(n){return Nc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=Jr(this),f=!1;if(u||f){var h=u||f?{type:is,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&Xr(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),ea(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function co(r,e){var t;if(Ni(r,Ae))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new Q0(r,new Map,String(n),wK(e));return Rc(r,Ae,i),r}var TN=bs("ObservableObjectAdministration",Q0);function ov(r){return iv[r]||(iv[r]={get:function(){return this[Ae].getObservablePropValue_(r)},set:function(t){return this[Ae].setObservablePropValue_(r,t)}})}function cn(r){return lf(r)?TN(r[Ae]):!1}function av(r,e,t){var n;(n=r.target_[hi])==null||delete n[t]}var RN=X0(0),BN=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),Ih=0,J0=function(){};function xN(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}xN(J0,Array.prototype);var yg=function(r,e,t){t0(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,ws(function(){var d=new pg(u,a,f,!0);d.proxy_=Sh(h),Xw(Sh(h),Ae,d),s&&s.length&&h.spliceWithArray(0,0,s),BN&&Object.defineProperty(Sh(h),"0",RN)}),h}var i=n.prototype;return i.concat=function(){this[Ae].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return pn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return yc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},cg(n,[{key:"length",get:function(){return this[Ae].getArrayLength_()},set:function(a){this[Ae].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(J0,Symbol.toStringTag,Symbol.iterator);Object.entries(Sl).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&Rc(yg.prototype,e,t)});function X0(r){return{enumerable:!1,configurable:!0,get:function(){return this[Ae].get_(r)},set:function(t){this[Ae].set_(r,t)}}}function MN(r){pi(yg.prototype,""+r,X0(r))}function Z0(r){if(r>Ih){for(var e=Ih;e<r+100;e++)MN(e);Ih=r}}Z0(1e3);function CN(r,e,t){return new yg(r,e,t)}function yi(r,e){if(typeof r=="object"&&r!==null){if(pn(r))return e!==void 0&&Ke(23),r[Ae].atom_;if(Dn(r))return r.atom_;if(ln(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ke(25,e,kl(r)),t}if(cn(r)){if(!e)return Ke(26);var n=r[Ae].values_.get(e);return n||Ke(27,e,kl(r)),n}if(ug(r)||Hs(r)||wl(r))return r}else if(wr(r)&&wl(r[Ae]))return r[Ae];Ke(28)}function mi(r,e){if(r||Ke(29),e!==void 0)return mi(yi(r,e));if(ug(r)||Hs(r)||wl(r)||ln(r)||Dn(r))return r;if(r[Ae])return r[Ae];Ke(24,r)}function kl(r,e){var t;if(e!==void 0)t=yi(r,e);else{if(vs(r))return r.name;cn(r)||ln(r)||Dn(r)?t=mi(r):t=yi(r)}return t.name_}function ws(r){var e=ao(),t=pf(!0);Yn();try{return r()}finally{Qn(),gf(t),Di(e)}}var cv=Tc.toString;function mg(r,e,t){return t===void 0&&(t=-1),gp(r,e,t)}function gp(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=cv.call(r);if(a!==cv.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=uv(r),e=uv(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(wr(f)&&f instanceof f&&wr(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!gp(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Ni(e,I)&&gp(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function uv(r){return pn(r)?r.slice():va(r)||ln(r)||Bc(r)||Dn(r)?Array.from(r.entries()):r}function yc(r){return r[Symbol.iterator]=LN,r}function LN(){return this}["Symbol","Map","Set"].forEach(function(r){var e=og();typeof e[r]>"u"&&Ke("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:I0,extras:{getDebugName:kl},$mobx:Ae});var KN=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ae,FlowCancellationError:bf,ObservableMap:_f,ObservableSet:gg,Reaction:pc,_allowStateChanges:ta,_allowStateChangesInsideComputed:gc,_allowStateReadsEnd:$o,_allowStateReadsStart:yf,_autoAction:ra,_endAction:h0,_getAdministration:mi,_getGlobalState:v0,_interceptReads:sN,_isComputingDerivation:Lc,_resetGlobalState:BK,_startAction:d0,action:zt,autorun:Ys,comparer:qs,computed:Fr,configure:JK,createAtom:ff,defineProperty:dN,entries:F0,extendObservable:mf,flow:Qs,flowResult:iN,get:fN,getAtom:yi,getDebugName:kl,getDependencyTree:XK,getObserverTree:ZK,has:W0,intercept:oN,isAction:vs,isBoxedObservable:fg,isComputed:N0,isComputedProp:sl,isFlow:ia,isFlowCancellationError:nN,isObservable:vf,isObservableArray:pn,isObservableMap:ln,isObservableObject:cn,isObservableProp:uN,isObservableSet:Dn,keys:sa,makeAutoObservable:wN,makeObservable:hg,observable:xt,observe:oa,onBecomeObserved:x0,onBecomeUnobserved:Kc,onReactionError:NK,override:WL,ownKeys:V0,reaction:B0,remove:lN,runInAction:gc,set:z0,spy:I0,toJS:gN,trace:yN,transaction:Nr,untracked:dg,values:U0,when:mN},Symbol.toStringTag,{value:"Module"})),eS=_c(KN);(function(r){var e=z&&z.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=mt,n=e(Gw.exports),i=eS;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(uf);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(uf,r)})(cf);var NN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(af,"__esModule",{value:!0});af.createExchangeInstruction=void 0;const Vu=mt,$u=Fi,DN=tr,lv=ys,UN=ys,Eh=Wr,Oh=cf;function FN({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:M,extraAccounts:A=[]}){return NN(this,void 0,void 0,function*(){const R=(0,DN.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Y=u===Oh.OrderSide.Sell?new $u.PublicKey(f):new $u.PublicKey(h),ae=u===Oh.OrderSide.Sell?new $u.PublicKey(h):new $u.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,Eh.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Vu.web3.Keypair?(oe=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,Eh.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Vu.web3.Keypair?(de=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[V]=yield(0,lv.getOrderVault)(d,Y,s),[Q]=yield(0,UN.getOpenOrdersCounter)(d,Y,s);N=yield(0,Eh.getTokenAccount)(r,n,Y),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Vu.web3.Keypair?(E=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===Oh.OrderSide.Buy?n:d,[j]=yield(0,lv.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Vu.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:V,orderAccount:e,openOrdersCounter:Q,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:M,feeReduction:j}).remainingAccounts(A).instruction();return C.instructions.push(te),C})}af.createExchangeInstruction=FN;var wf={},zN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(wf,"__esModule",{value:!0});wf.createInitializeMarketInstruction=void 0;const WN=tr;function VN({connection:r,updateAuthorityAccount:e,programId:t}){return zN(this,void 0,void 0,function*(){const i=[yield(0,WN.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}wf.createInitializeMarketInstruction=VN;var Sf={},$N=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.createRegisterCurrencyInstruction=void 0;const jN=mt,qN=tr;function GN({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return $N(this,void 0,void 0,function*(){const u=[yield(0,qN.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new jN.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}Sf.createRegisterCurrencyInstruction=GN;var cs={},bg=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(cs,"__esModule",{value:!0});cs.updateRoyaltyTier=cs.deleteRoyaltyTier=cs.addRoyaltyTier=void 0;const mc=mt,vg=tr;function HN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return bg(this,void 0,void 0,function*(){const a=(0,vg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new mc.BN(n),new mc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}cs.addRoyaltyTier=HN;function YN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return bg(this,void 0,void 0,function*(){const s=(0,vg.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new mc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}cs.deleteRoyaltyTier=YN;function QN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return bg(this,void 0,void 0,function*(){const a=(0,vg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new mc.BN(n),new mc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}cs.updateRoyaltyTier=QN;var aa={},tS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(aa,"__esModule",{value:!0});aa.createUpdateRegisteredCurrencyVaultInstruction=aa.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const JN=mt,nS=tr;function XN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return tS(this,void 0,void 0,function*(){return[yield(0,nS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new JN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}aa.createUpdateRegisteredCurrencyRoyaltyInstruction=XN;function ZN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return tS(this,void 0,void 0,function*(){return[yield(0,nS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}aa.createUpdateRegisteredCurrencyVaultInstruction=ZN;var ca={},rS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ca,"__esModule",{value:!0});ca.createRemoveFeeExemptionInstruction=ca.createAddFeeExemptionInstruction=void 0;const eD=mt,iS=tr,Il=ys;function tD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return rS(this,void 0,void 0,function*(){const s=(0,iS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,Il.getFeeExemptAccount)(n,i),[h]=yield(0,Il.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new eD.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}ca.createAddFeeExemptionInstruction=tD;function nD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return rS(this,void 0,void 0,function*(){const s=(0,iS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,Il.getFeeExemptAccount)(n,i),[f]=yield(0,Il.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}ca.createRemoveFeeExemptionInstruction=nD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Dw,r),t(nf,r),t(Zo,r),t(of,r),t(af,r),t(wf,r),t(Sf,r),t(cs,r),t(aa,r),t(ca,r)})(rg);var wa={},sS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(sS);var oS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(oS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Oc,r),t(sS,r),t(oS,r)})(wa);var aS={},Af={},cS=function(){},rD=function(r){return r};function uS(r){throw new Error("[mobx-utils] "+r)}function ps(r,e){e===void 0&&(e="Illegal state"),r||uS(e)}function lS(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var fS=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(fS(Object.getPrototypeOf(r))||[])},iD=function(r){var e=fS(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},yp=function(r){return iD(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},El="pending",bc="fulfilled",kf="rejected";function sD(r){switch(this.state){case El:return r.pending&&r.pending(this.value);case kf:return r.rejected&&r.rejected(this.value);case bc:return r.fulfilled?r.fulfilled(this.value):this.value}}function mp(r,e){if(ps(arguments.length<=2,"fromPromise expects up to two arguments"),ps(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(zt("observableFromPromise-resolve",function(i){t.value=i,t.state=bc}),zt("observableFromPromise-reject",function(i){t.value=i,t.state=kf})),t.isPromiseBasedObservable=!0,t.case=sD;var n=e&&(e.state===bc||e.state===El)?e.value:void 0;return mf(t,{value:n,state:El},{},{deep:!1}),t}(function(r){r.reject=zt("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=kf,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=bc,n.value=t,n}r.resolve=zt("fromPromise.resolve",e)})(mp||(mp={}));function oD(r){return r&&r.isPromiseBasedObservable===!0}var fv=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function aD(r,e,t){if(dv(r,e),dv(r,t),e!==t){var n=r.slice(),i;return e<t?i=fv(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=fv(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function dv(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function cD(r,e){e===void 0&&(e=void 0);var t=!1,n=xt.box(e,{deep:!1}),i=xt.box(!1),s=function(){return t||(t=!0,ta(!0,function(){i.set(!0)}),r(function(u){ta(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=zt("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function _g(r,e,t){e===void 0&&(e=cS),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=ff("ResourceBasedObservable",function(){ps(!n&&!i),n=!0,r(function(f){ta(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){ps(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var ju=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function uD(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function lD(r,e){var t;e===void 0&&(e=!1);var n=Fr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:oa(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:oa(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[uD()]=function(){return this},t}var fD=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),hg(this),gc(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),ju([xt.ref],r.prototype,"current",void 0),ju([zt.bound],r.prototype,"next",null),ju([zt.bound],r.prototype,"complete",null),ju([zt.bound],r.prototype,"error",null),r}();function dD(r,e){return e===void 0&&(e=void 0),new fD(r,e)}var Ol=function(){return Ol=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ol.apply(this,arguments)},Wa=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hD=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],dS=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),hg(this),ps(cn(e),"createViewModel expects an observable object");var n=yp(this);yp(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Ae||i==="__mobxDidRunLazyInitializers")){if(ps(hD.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),sl(e,i)){var a=mi(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Fr(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,Ol(Ol({},d),{configurable:!0,get:function(){return sl(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:zt(function(m){sl(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;sa(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];pn(i)?i.replace(n):ln(i)?(i.clear(),i.merge(n)):N0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Wa([Fr],r.prototype,"isDirty",null),Wa([Fr],r.prototype,"changedValues",null),Wa([zt.bound],r.prototype,"submit",null),Wa([zt.bound],r.prototype,"reset",null),Wa([zt.bound],r.prototype,"resetProperty",null),r}();function pD(r){return new dS(r)}function gD(r,e){var t=yi(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return oa(t,function(){})}function yD(r,e,t){if(t===void 0&&(t=0),!pn(r))throw new Error("Expected observable array as first argument");vs(e)||(e=zt("queueProcessor",e));var n=function(){var i=r.slice(0);gc(function(){return r.splice(0)}),i.forEach(e)};return t>0?Ys(n,{delay:t}):Ys(n)}function mD(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!pn(r))throw new Error("Expected observable array as first argument");vs(e)||(e=zt("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);gc(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Ys(i,{delay:t}):Ys(i)}var Ds={};function bD(){for(var r=0,e=Object.getOwnPropertyNames(Ds);r<e.length;r++){var t=e[r];Ds[t].dispose(),delete Ds[t]}}function vD(r){return r===void 0&&(r=1e3),Lc()?(Ds[r]||(typeof r=="number"?Ds[r]=_D(r):Ds[r]=wD()),Ds[r].current()):Date.now()}function _D(r){var e;return _g(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function wD(){var r=_g(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function SD(r){return Lc()||console.warn("'expr' should only be used inside other reactive functions."),Fr(r).get()}var Pl=function(){return Pl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Pl.apply(this,arguments)},AD=0;function kD(r,e){ps(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=Fr(function(){return d=r(h)},Pl(Pl({},m),{name:I}));if(!i)var M=Kc(O,function(){delete t[f],M(),n&&n(d,h)});return O}var u=!1;return function(f){var h=ID(f),d=t[h];if(d)return d.get();if(!i&&!Lc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function ID(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++AD,lS(r,"$transformId",t)),t}function Ph(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function Th(r){return cn(r)||pn(r)||ln(r)}function ED(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,Ph(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(Th(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(Th(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+Ph(f)+"/"+h+"',")+(" but it already exists at '"+Ph(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:oa(u,n)};t.set(u,m),F0(u).forEach(function(I){var O=I[0],M=I[1];return s(M,m,O)})}}}function a(u){if(Th(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),U0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var OD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PD=function(r){OD(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=oa(d._base,function(I){if(I.type==="splice")Nr(function(){for(var O=0,M=I.removed;O<M.length;O++){var A=M[O];d._removeItem(A)}for(var R=0,C=I.added;R<C.length;R++){var Y=C[R];d._addItem(Y)}});else if(I.type==="update")Nr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=xt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:B0(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(_f),TD=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),RD=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new TD(this.store,e)}}),r}(),Tl=function(){return Tl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Tl.apply(this,arguments)},BD=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function xD(r,e){if(e===void 0&&(e=!1),vs(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new RD;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!Lc())return!t&&v0().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=Fr(function(){return d=r.apply(a,u)},Tl(Tl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||Kc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,BD([d],u)),d=void 0}),m.get()}}var MD=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:bc,IDENTITY:rD,NOOP:cS,ObservableGroupMap:PD,PENDING:El,REJECTED:kf,ViewModel:dS,addHiddenProp:lS,chunkProcessor:mD,computedFn:xD,createTransformer:kD,createViewModel:pD,deepObserve:ED,expr:SD,fail:uS,get fromPromise(){return mp},fromResource:_g,fromStream:dD,getAllMethodsAndProperties:yp,invariant:ps,isPromiseBasedObservable:oD,keepAlive:gD,lazyObservable:cD,moveItem:aD,now:vD,queueProcessor:yD,resetNowInternalState:bD,toStream:lD},Symbol.toStringTag,{value:"Module"})),CD=_c(MD),Rl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,M=1,A=2,R=1,C=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,V=256,Q=512,K=30,j="...",te=800,T=16,W=1,X=2,Me=3,ye=1/0,Ee=9007199254740991,Gt=17976931348623157e292,Ht=0/0,_e=4294967295,$e=_e-1,en=_e>>>1,fn=[["ary",N],["bind",R],["bindKey",C],["curry",ae],["curryRight",oe],["flip",Q],["partial",de],["partialRight",E],["rearg",V]],Et="[object Arguments]",ht="[object Array]",Ar="[object AsyncFunction]",Wt="[object Boolean]",Sn="[object Date]",ni="[object DOMException]",kr="[object Error]",nr="[object Function]",_i="[object GeneratorFunction]",gn="[object Map]",As="[object Number]",Wf="[object Null]",rr="[object Object]",Wc="[object Promise]",Vf="[object Proxy]",Wi="[object RegExp]",An="[object Set]",kn="[object String]",Vi="[object Symbol]",$f="[object Undefined]",Un="[object WeakMap]",jf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",De="[object Uint8Array]",wt="[object Uint8ClampedArray]",pt="[object Uint16Array]",St="[object Uint32Array]",ft=/\b__p \+= '';/g,kS=/\b(__p \+=) '' \+/g,IS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ag=/&(?:amp|lt|gt|quot|#39);/g,kg=/[&<>"']/g,ES=RegExp(Ag.source),OS=RegExp(kg.source),PS=/<%-([\s\S]+?)%>/g,TS=/<%([\s\S]+?)%>/g,Ig=/<%=([\s\S]+?)%>/g,RS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,BS=/^\w*$/,xS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qf=/[\\^$.*+?()[\]{}|]/g,MS=RegExp(qf.source),Gf=/^\s+/,CS=/\s/,LS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,KS=/\{\n\/\* \[wrapped with (.+)\] \*/,NS=/,? & /,DS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,US=/[()=,{}\[\]\/\s]/,FS=/\\(\\)?/g,zS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Eg=/\w*$/,WS=/^[-+]0x[0-9a-f]+$/i,VS=/^0b[01]+$/i,$S=/^\[object .+?Constructor\]$/,jS=/^0o[0-7]+$/i,qS=/^(?:0|[1-9]\d*)$/,GS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vc=/($^)/,HS=/['\n\r\u2028\u2029\\]/g,$c="\\ud800-\\udfff",YS="\\u0300-\\u036f",QS="\\ufe20-\\ufe2f",JS="\\u20d0-\\u20ff",Og=YS+QS+JS,Pg="\\u2700-\\u27bf",Tg="a-z\\xdf-\\xf6\\xf8-\\xff",XS="\\xac\\xb1\\xd7\\xf7",ZS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eA="\\u2000-\\u206f",tA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rg="A-Z\\xc0-\\xd6\\xd8-\\xde",Bg="\\ufe0e\\ufe0f",xg=XS+ZS+eA+tA,Hf="['\u2019]",nA="["+$c+"]",Mg="["+xg+"]",jc="["+Og+"]",Cg="\\d+",rA="["+Pg+"]",Lg="["+Tg+"]",Kg="[^"+$c+xg+Cg+Pg+Tg+Rg+"]",Yf="\\ud83c[\\udffb-\\udfff]",iA="(?:"+jc+"|"+Yf+")",Ng="[^"+$c+"]",Qf="(?:\\ud83c[\\udde6-\\uddff]){2}",Jf="[\\ud800-\\udbff][\\udc00-\\udfff]",uo="["+Rg+"]",Dg="\\u200d",Ug="(?:"+Lg+"|"+Kg+")",sA="(?:"+uo+"|"+Kg+")",Fg="(?:"+Hf+"(?:d|ll|m|re|s|t|ve))?",zg="(?:"+Hf+"(?:D|LL|M|RE|S|T|VE))?",Wg=iA+"?",Vg="["+Bg+"]?",oA="(?:"+Dg+"(?:"+[Ng,Qf,Jf].join("|")+")"+Vg+Wg+")*",aA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$g=Vg+Wg+oA,uA="(?:"+[rA,Qf,Jf].join("|")+")"+$g,lA="(?:"+[Ng+jc+"?",jc,Qf,Jf,nA].join("|")+")",fA=RegExp(Hf,"g"),dA=RegExp(jc,"g"),Xf=RegExp(Yf+"(?="+Yf+")|"+lA+$g,"g"),hA=RegExp([uo+"?"+Lg+"+"+Fg+"(?="+[Mg,uo,"$"].join("|")+")",sA+"+"+zg+"(?="+[Mg,uo+Ug,"$"].join("|")+")",uo+"?"+Ug+"+"+Fg,uo+"+"+zg,cA,aA,Cg,uA].join("|"),"g"),pA=RegExp("["+Dg+$c+Og+Bg+"]"),gA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yA=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mA=-1,Ot={};Ot[y]=Ot[k]=Ot[L]=Ot[$]=Ot[Z]=Ot[De]=Ot[wt]=Ot[pt]=Ot[St]=!0,Ot[Et]=Ot[ht]=Ot[v]=Ot[Wt]=Ot[g]=Ot[Sn]=Ot[kr]=Ot[nr]=Ot[gn]=Ot[As]=Ot[rr]=Ot[Wi]=Ot[An]=Ot[kn]=Ot[Un]=!1;var At={};At[Et]=At[ht]=At[v]=At[g]=At[Wt]=At[Sn]=At[y]=At[k]=At[L]=At[$]=At[Z]=At[gn]=At[As]=At[rr]=At[Wi]=At[An]=At[kn]=At[Vi]=At[De]=At[wt]=At[pt]=At[St]=!0,At[kr]=At[nr]=At[Un]=!1;var bA={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_A={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wA={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},SA=parseFloat,AA=parseInt,jg=typeof z=="object"&&z&&z.Object===Object&&z,kA=typeof self=="object"&&self&&self.Object===Object&&self,yn=jg||kA||Function("return this")(),Zf=e&&!e.nodeType&&e,ks=Zf&&!0&&r&&!r.nodeType&&r,qg=ks&&ks.exports===Zf,ed=qg&&jg.process,Ir=function(){try{var D=ks&&ks.require&&ks.require("util").types;return D||ed&&ed.binding&&ed.binding("util")}catch{}}(),Gg=Ir&&Ir.isArrayBuffer,Hg=Ir&&Ir.isDate,Yg=Ir&&Ir.isMap,Qg=Ir&&Ir.isRegExp,Jg=Ir&&Ir.isSet,Xg=Ir&&Ir.isTypedArray;function ir(D,J,q){switch(q.length){case 0:return D.call(J);case 1:return D.call(J,q[0]);case 2:return D.call(J,q[0],q[1]);case 3:return D.call(J,q[0],q[1],q[2])}return D.apply(J,q)}function IA(D,J,q,me){for(var Le=-1,st=D==null?0:D.length;++Le<st;){var tn=D[Le];J(me,tn,q(tn),D)}return me}function Er(D,J){for(var q=-1,me=D==null?0:D.length;++q<me&&J(D[q],q,D)!==!1;);return D}function EA(D,J){for(var q=D==null?0:D.length;q--&&J(D[q],q,D)!==!1;);return D}function Zg(D,J){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!J(D[q],q,D))return!1;return!0}function $i(D,J){for(var q=-1,me=D==null?0:D.length,Le=0,st=[];++q<me;){var tn=D[q];J(tn,q,D)&&(st[Le++]=tn)}return st}function qc(D,J){var q=D==null?0:D.length;return!!q&&lo(D,J,0)>-1}function td(D,J,q){for(var me=-1,Le=D==null?0:D.length;++me<Le;)if(q(J,D[me]))return!0;return!1}function Tt(D,J){for(var q=-1,me=D==null?0:D.length,Le=Array(me);++q<me;)Le[q]=J(D[q],q,D);return Le}function ji(D,J){for(var q=-1,me=J.length,Le=D.length;++q<me;)D[Le+q]=J[q];return D}function nd(D,J,q,me){var Le=-1,st=D==null?0:D.length;for(me&&st&&(q=D[++Le]);++Le<st;)q=J(q,D[Le],Le,D);return q}function OA(D,J,q,me){var Le=D==null?0:D.length;for(me&&Le&&(q=D[--Le]);Le--;)q=J(q,D[Le],Le,D);return q}function rd(D,J){for(var q=-1,me=D==null?0:D.length;++q<me;)if(J(D[q],q,D))return!0;return!1}var PA=id("length");function TA(D){return D.split("")}function RA(D){return D.match(DS)||[]}function ey(D,J,q){var me;return q(D,function(Le,st,tn){if(J(Le,st,tn))return me=st,!1}),me}function Gc(D,J,q,me){for(var Le=D.length,st=q+(me?1:-1);me?st--:++st<Le;)if(J(D[st],st,D))return st;return-1}function lo(D,J,q){return J===J?WA(D,J,q):Gc(D,ty,q)}function BA(D,J,q,me){for(var Le=q-1,st=D.length;++Le<st;)if(me(D[Le],J))return Le;return-1}function ty(D){return D!==D}function ny(D,J){var q=D==null?0:D.length;return q?od(D,J)/q:Ht}function id(D){return function(J){return J==null?t:J[D]}}function sd(D){return function(J){return D==null?t:D[J]}}function ry(D,J,q,me,Le){return Le(D,function(st,tn,bt){q=me?(me=!1,st):J(q,st,tn,bt)}),q}function xA(D,J){var q=D.length;for(D.sort(J);q--;)D[q]=D[q].value;return D}function od(D,J){for(var q,me=-1,Le=D.length;++me<Le;){var st=J(D[me]);st!==t&&(q=q===t?st:q+st)}return q}function ad(D,J){for(var q=-1,me=Array(D);++q<D;)me[q]=J(q);return me}function MA(D,J){return Tt(J,function(q){return[q,D[q]]})}function iy(D){return D&&D.slice(0,cy(D)+1).replace(Gf,"")}function sr(D){return function(J){return D(J)}}function cd(D,J){return Tt(J,function(q){return D[q]})}function ka(D,J){return D.has(J)}function sy(D,J){for(var q=-1,me=D.length;++q<me&&lo(J,D[q],0)>-1;);return q}function oy(D,J){for(var q=D.length;q--&&lo(J,D[q],0)>-1;);return q}function CA(D,J){for(var q=D.length,me=0;q--;)D[q]===J&&++me;return me}var LA=sd(bA),KA=sd(vA);function NA(D){return"\\"+wA[D]}function DA(D,J){return D==null?t:D[J]}function fo(D){return pA.test(D)}function UA(D){return gA.test(D)}function FA(D){for(var J,q=[];!(J=D.next()).done;)q.push(J.value);return q}function ud(D){var J=-1,q=Array(D.size);return D.forEach(function(me,Le){q[++J]=[Le,me]}),q}function ay(D,J){return function(q){return D(J(q))}}function qi(D,J){for(var q=-1,me=D.length,Le=0,st=[];++q<me;){var tn=D[q];(tn===J||tn===d)&&(D[q]=d,st[Le++]=q)}return st}function Hc(D){var J=-1,q=Array(D.size);return D.forEach(function(me){q[++J]=me}),q}function zA(D){var J=-1,q=Array(D.size);return D.forEach(function(me){q[++J]=[me,me]}),q}function WA(D,J,q){for(var me=q-1,Le=D.length;++me<Le;)if(D[me]===J)return me;return-1}function VA(D,J,q){for(var me=q+1;me--;)if(D[me]===J)return me;return me}function ho(D){return fo(D)?jA(D):PA(D)}function $r(D){return fo(D)?qA(D):TA(D)}function cy(D){for(var J=D.length;J--&&CS.test(D.charAt(J)););return J}var $A=sd(_A);function jA(D){for(var J=Xf.lastIndex=0;Xf.test(D);)++J;return J}function qA(D){return D.match(Xf)||[]}function GA(D){return D.match(hA)||[]}var HA=function D(J){J=J==null?yn:po.defaults(yn.Object(),J,po.pick(yn,yA));var q=J.Array,me=J.Date,Le=J.Error,st=J.Function,tn=J.Math,bt=J.Object,ld=J.RegExp,YA=J.String,Or=J.TypeError,Yc=q.prototype,QA=st.prototype,go=bt.prototype,Qc=J["__core-js_shared__"],Jc=QA.toString,dt=go.hasOwnProperty,JA=0,uy=function(){var o=/[^.]+$/.exec(Qc&&Qc.keys&&Qc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Xc=go.toString,XA=Jc.call(bt),ZA=yn._,e1=ld("^"+Jc.call(dt).replace(qf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zc=qg?J.Buffer:t,Gi=J.Symbol,eu=J.Uint8Array,ly=Zc?Zc.allocUnsafe:t,tu=ay(bt.getPrototypeOf,bt),fy=bt.create,dy=go.propertyIsEnumerable,nu=Yc.splice,hy=Gi?Gi.isConcatSpreadable:t,Ia=Gi?Gi.iterator:t,Is=Gi?Gi.toStringTag:t,ru=function(){try{var o=Rs(bt,"defineProperty");return o({},"",{}),o}catch{}}(),t1=J.clearTimeout!==yn.clearTimeout&&J.clearTimeout,n1=me&&me.now!==yn.Date.now&&me.now,r1=J.setTimeout!==yn.setTimeout&&J.setTimeout,iu=tn.ceil,su=tn.floor,fd=bt.getOwnPropertySymbols,i1=Zc?Zc.isBuffer:t,py=J.isFinite,s1=Yc.join,o1=ay(bt.keys,bt),nn=tn.max,In=tn.min,a1=me.now,c1=J.parseInt,gy=tn.random,u1=Yc.reverse,dd=Rs(J,"DataView"),Ea=Rs(J,"Map"),hd=Rs(J,"Promise"),yo=Rs(J,"Set"),Oa=Rs(J,"WeakMap"),Pa=Rs(bt,"create"),ou=Oa&&new Oa,mo={},l1=Bs(dd),f1=Bs(Ea),d1=Bs(hd),h1=Bs(yo),p1=Bs(Oa),au=Gi?Gi.prototype:t,Ta=au?au.valueOf:t,yy=au?au.toString:t;function _(o){if(Dt(o)&&!Ne(o)&&!(o instanceof Qe)){if(o instanceof Pr)return o;if(dt.call(o,"__wrapped__"))return mm(o)}return new Pr(o)}var bo=function(){function o(){}return function(c){if(!Ct(c))return{};if(fy)return fy(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function cu(){}function Pr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:PS,evaluate:TS,interpolate:Ig,variable:"",imports:{_}},_.prototype=cu.prototype,_.prototype.constructor=_,Pr.prototype=bo(cu.prototype),Pr.prototype.constructor=Pr;function Qe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function g1(){var o=new Qe(this.__wrapped__);return o.__actions__=Fn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Fn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Fn(this.__views__),o}function y1(){if(this.__filtered__){var o=new Qe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function m1(){var o=this.__wrapped__.value(),c=this.__dir__,l=Ne(o),p=c<0,b=l?o.length:0,w=Tk(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,we=In(U,this.__takeCount__);if(!l||!p&&b==U&&we==U)return Fy(o,this.__actions__);var Re=[];e:for(;U--&&ge<we;){ne+=c;for(var ze=-1,Be=o[ne];++ze<ce;){var He=re[ze],Je=He.iteratee,cr=He.type,Ln=Je(Be);if(cr==X)Be=Ln;else if(!Ln){if(cr==W)continue e;break e}}Re[ge++]=Be}return Re}Qe.prototype=bo(cu.prototype),Qe.prototype.constructor=Qe;function Es(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function b1(){this.__data__=Pa?Pa(null):{},this.size=0}function v1(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function _1(o){var c=this.__data__;if(Pa){var l=c[o];return l===f?t:l}return dt.call(c,o)?c[o]:t}function w1(o){var c=this.__data__;return Pa?c[o]!==t:dt.call(c,o)}function S1(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=Pa&&c===t?f:c,this}Es.prototype.clear=b1,Es.prototype.delete=v1,Es.prototype.get=_1,Es.prototype.has=w1,Es.prototype.set=S1;function wi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function A1(){this.__data__=[],this.size=0}function k1(o){var c=this.__data__,l=uu(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():nu.call(c,l,1),--this.size,!0}function I1(o){var c=this.__data__,l=uu(c,o);return l<0?t:c[l][1]}function E1(o){return uu(this.__data__,o)>-1}function O1(o,c){var l=this.__data__,p=uu(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}wi.prototype.clear=A1,wi.prototype.delete=k1,wi.prototype.get=I1,wi.prototype.has=E1,wi.prototype.set=O1;function Si(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function P1(){this.size=0,this.__data__={hash:new Es,map:new(Ea||wi),string:new Es}}function T1(o){var c=wu(this,o).delete(o);return this.size-=c?1:0,c}function R1(o){return wu(this,o).get(o)}function B1(o){return wu(this,o).has(o)}function x1(o,c){var l=wu(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}Si.prototype.clear=P1,Si.prototype.delete=T1,Si.prototype.get=R1,Si.prototype.has=B1,Si.prototype.set=x1;function Os(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new Si;++c<l;)this.add(o[c])}function M1(o){return this.__data__.set(o,f),this}function C1(o){return this.__data__.has(o)}Os.prototype.add=Os.prototype.push=M1,Os.prototype.has=C1;function jr(o){var c=this.__data__=new wi(o);this.size=c.size}function L1(){this.__data__=new wi,this.size=0}function K1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function N1(o){return this.__data__.get(o)}function D1(o){return this.__data__.has(o)}function U1(o,c){var l=this.__data__;if(l instanceof wi){var p=l.__data__;if(!Ea||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new Si(p)}return l.set(o,c),this.size=l.size,this}jr.prototype.clear=L1,jr.prototype.delete=K1,jr.prototype.get=N1,jr.prototype.has=D1,jr.prototype.set=U1;function my(o,c){var l=Ne(o),p=!l&&xs(o),b=!l&&!p&&Xi(o),w=!l&&!p&&!b&&So(o),P=l||p||b||w,B=P?ad(o.length,YA):[],U=B.length;for(var ne in o)(c||dt.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Ei(ne,U)))&&B.push(ne);return B}function by(o){var c=o.length;return c?o[kd(0,c-1)]:t}function F1(o,c){return Su(Fn(o),Ps(c,0,o.length))}function z1(o){return Su(Fn(o))}function pd(o,c,l){(l!==t&&!qr(o[c],l)||l===t&&!(c in o))&&Ai(o,c,l)}function Ra(o,c,l){var p=o[c];(!(dt.call(o,c)&&qr(p,l))||l===t&&!(c in o))&&Ai(o,c,l)}function uu(o,c){for(var l=o.length;l--;)if(qr(o[l][0],c))return l;return-1}function W1(o,c,l,p){return Hi(o,function(b,w,P){c(p,b,l(b),P)}),p}function vy(o,c){return o&&ii(c,dn(c),o)}function V1(o,c){return o&&ii(c,Wn(c),o)}function Ai(o,c,l){c=="__proto__"&&ru?ru(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function gd(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Yd(o,c[l]);return b}function Ps(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Tr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!Ct(o))return o;var re=Ne(o);if(re){if(P=Bk(o),!B)return Fn(o,P)}else{var ce=En(o),ge=ce==nr||ce==_i;if(Xi(o))return Vy(o,B);if(ce==rr||ce==Et||ge&&!b){if(P=U||ge?{}:cm(o),!B)return U?_k(o,V1(P,o)):vk(o,vy(P,o))}else{if(!At[ce])return b?o:{};P=xk(o,ce,B)}}w||(w=new jr);var we=w.get(o);if(we)return we;w.set(o,P),Nm(o)?o.forEach(function(Be){P.add(Tr(Be,c,l,Be,o,w))}):Lm(o)&&o.forEach(function(Be,He){P.set(He,Tr(Be,c,l,He,o,w))});var Re=ne?U?Ld:Cd:U?Wn:dn,ze=re?t:Re(o);return Er(ze||o,function(Be,He){ze&&(He=Be,Be=o[He]),Ra(P,He,Tr(Be,c,l,He,o,w))}),P}function $1(o){var c=dn(o);return function(l){return _y(l,o,c)}}function _y(o,c,l){var p=l.length;if(o==null)return!p;for(o=bt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function wy(o,c,l){if(typeof o!="function")throw new Or(a);return Na(function(){o.apply(t,l)},c)}function Ba(o,c,l,p){var b=-1,w=qc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Tt(c,sr(l))),p?(w=td,P=!1):c.length>=i&&(w=ka,P=!1,c=new Os(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Hi=Hy(ri),Sy=Hy(md,!0);function j1(o,c){var l=!0;return Hi(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function lu(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!ar(P):l(P,B)))var B=P,U=w}return U}function q1(o,c,l,p){var b=o.length;for(l=Fe(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:Fe(p),p<0&&(p+=b),p=l>p?0:Um(p);l<p;)o[l++]=c;return o}function Ay(o,c){var l=[];return Hi(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function mn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=Ck),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?mn(B,c-1,l,p,b):ji(b,B):p||(b[b.length]=B)}return b}var yd=Yy(),ky=Yy(!0);function ri(o,c){return o&&yd(o,c,dn)}function md(o,c){return o&&ky(o,c,dn)}function fu(o,c){return $i(c,function(l){return Oi(o[l])})}function Ts(o,c){c=Qi(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[si(c[l++])];return l&&l==p?o:t}function Iy(o,c,l){var p=c(o);return Ne(o)?p:ji(p,l(o))}function Mn(o){return o==null?o===t?$f:Wf:Is&&Is in bt(o)?Pk(o):zk(o)}function bd(o,c){return o>c}function G1(o,c){return o!=null&&dt.call(o,c)}function H1(o,c){return o!=null&&c in bt(o)}function Y1(o,c,l){return o>=In(c,l)&&o<nn(c,l)}function vd(o,c,l){for(var p=l?td:qc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Tt(re,sr(c))),U=In(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new Os(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<U;){var we=re[ce],Re=c?c(we):we;if(we=l||we!==0?we:0,!(ge?ka(ge,Re):p(ne,Re,l))){for(P=w;--P;){var ze=B[P];if(!(ze?ka(ze,Re):p(o[P],Re,l)))continue e}ge&&ge.push(Re),ne.push(we)}}return ne}function Q1(o,c,l,p){return ri(o,function(b,w,P){c(p,l(b),w,P)}),p}function xa(o,c,l){c=Qi(c,o),o=dm(o,c);var p=o==null?o:o[si(Br(c))];return p==null?t:ir(p,o,l)}function Ey(o){return Dt(o)&&Mn(o)==Et}function J1(o){return Dt(o)&&Mn(o)==v}function X1(o){return Dt(o)&&Mn(o)==Sn}function Ma(o,c,l,p,b){return o===c?!0:o==null||c==null||!Dt(o)&&!Dt(c)?o!==o&&c!==c:Z1(o,c,l,p,Ma,b)}function Z1(o,c,l,p,b,w){var P=Ne(o),B=Ne(c),U=P?ht:En(o),ne=B?ht:En(c);U=U==Et?rr:U,ne=ne==Et?rr:ne;var re=U==rr,ce=ne==rr,ge=U==ne;if(ge&&Xi(o)){if(!Xi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new jr),P||So(o)?sm(o,c,l,p,b,w):Ek(o,c,U,l,p,b,w);if(!(l&M)){var we=re&&dt.call(o,"__wrapped__"),Re=ce&&dt.call(c,"__wrapped__");if(we||Re){var ze=we?o.value():o,Be=Re?c.value():c;return w||(w=new jr),b(ze,Be,l,p,w)}}return ge?(w||(w=new jr),Ok(o,c,l,p,b,w)):!1}function ek(o){return Dt(o)&&En(o)==gn}function _d(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=bt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new jr;if(p)var ge=p(ne,re,U,o,c,ce);if(!(ge===t?Ma(re,ne,M|A,p,ce):ge))return!1}}return!0}function Oy(o){if(!Ct(o)||Kk(o))return!1;var c=Oi(o)?e1:$S;return c.test(Bs(o))}function tk(o){return Dt(o)&&Mn(o)==Wi}function nk(o){return Dt(o)&&En(o)==An}function rk(o){return Dt(o)&&Pu(o.length)&&!!Ot[Mn(o)]}function Py(o){return typeof o=="function"?o:o==null?Vn:typeof o=="object"?Ne(o)?By(o[0],o[1]):Ry(o):Qm(o)}function wd(o){if(!Ka(o))return o1(o);var c=[];for(var l in bt(o))dt.call(o,l)&&l!="constructor"&&c.push(l);return c}function ik(o){if(!Ct(o))return Fk(o);var c=Ka(o),l=[];for(var p in o)p=="constructor"&&(c||!dt.call(o,p))||l.push(p);return l}function Sd(o,c){return o<c}function Ty(o,c){var l=-1,p=zn(o)?q(o.length):[];return Hi(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function Ry(o){var c=Nd(o);return c.length==1&&c[0][2]?lm(c[0][0],c[0][1]):function(l){return l===o||_d(l,o,c)}}function By(o,c){return Ud(o)&&um(c)?lm(si(o),c):function(l){var p=Yd(l,o);return p===t&&p===c?Qd(l,o):Ma(c,p,M|A)}}function du(o,c,l,p,b){o!==c&&yd(c,function(w,P){if(b||(b=new jr),Ct(w))sk(o,c,P,l,du,p,b);else{var B=p?p(zd(o,P),w,P+"",o,c,b):t;B===t&&(B=w),pd(o,P,B)}},Wn)}function sk(o,c,l,p,b,w,P){var B=zd(o,l),U=zd(c,l),ne=P.get(U);if(ne){pd(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Ne(U),we=!ge&&Xi(U),Re=!ge&&!we&&So(U);re=U,ge||we||Re?Ne(B)?re=B:Vt(B)?re=Fn(B):we?(ce=!1,re=Vy(U,!0)):Re?(ce=!1,re=$y(U,!0)):re=[]:Da(U)||xs(U)?(re=B,xs(B)?re=Fm(B):(!Ct(B)||Oi(B))&&(re=cm(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),pd(o,l,re)}function xy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,Ei(c,l)?o[c]:t}function My(o,c,l){c.length?c=Tt(c,function(w){return Ne(w)?function(P){return Ts(P,w.length===1?w[0]:w)}:w}):c=[Vn];var p=-1;c=Tt(c,sr(Pe()));var b=Ty(o,function(w,P,B){var U=Tt(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return xA(b,function(w,P){return bk(w,P,l)})}function ok(o,c){return Cy(o,c,function(l,p){return Qd(o,p)})}function Cy(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=Ts(o,P);l(B,P)&&Ca(w,Qi(P,o),B)}return w}function ak(o){return function(c){return Ts(c,o)}}function Ad(o,c,l,p){var b=p?BA:lo,w=-1,P=c.length,B=o;for(o===c&&(c=Fn(c)),l&&(B=Tt(o,sr(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&nu.call(B,U,1),nu.call(o,U,1);return o}function Ly(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;Ei(b)?nu.call(o,b,1):Od(o,b)}}return o}function kd(o,c){return o+su(gy()*(c-o+1))}function ck(o,c,l,p){for(var b=-1,w=nn(iu((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function Id(o,c){var l="";if(!o||c<1||c>Ee)return l;do c%2&&(l+=o),c=su(c/2),c&&(o+=o);while(c);return l}function je(o,c){return Wd(fm(o,c,Vn),o+"")}function uk(o){return by(Ao(o))}function lk(o,c){var l=Ao(o);return Su(l,Ps(c,0,l.length))}function Ca(o,c,l,p){if(!Ct(o))return o;c=Qi(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=si(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=Ct(re)?re:Ei(c[b+1])?[]:{})}Ra(B,U,ne),B=B[U]}return o}var Ky=ou?function(o,c){return ou.set(o,c),o}:Vn,fk=ru?function(o,c){return ru(o,"toString",{configurable:!0,enumerable:!1,value:Xd(c),writable:!0})}:Vn;function dk(o){return Su(Ao(o))}function Rr(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function hk(o,c){var l;return Hi(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function hu(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=en){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!ar(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return Ed(o,c,Vn,l)}function Ed(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=ar(c),ne=c===t;b<w;){var re=su((b+w)/2),ce=l(o[re]),ge=ce!==t,we=ce===null,Re=ce===ce,ze=ar(ce);if(P)var Be=p||Re;else ne?Be=Re&&(p||ge):B?Be=Re&&ge&&(p||!we):U?Be=Re&&ge&&!we&&(p||!ze):we||ze?Be=!1:Be=p?ce<=c:ce<c;Be?b=re+1:w=re}return In(w,$e)}function Ny(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!qr(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function Dy(o){return typeof o=="number"?o:ar(o)?Ht:+o}function or(o){if(typeof o=="string")return o;if(Ne(o))return Tt(o,or)+"";if(ar(o))return yy?yy.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Yi(o,c,l){var p=-1,b=qc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=td;else if(w>=i){var ne=c?null:kk(o);if(ne)return Hc(ne);P=!1,b=ka,U=new Os}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=U.length;ge--;)if(U[ge]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function Od(o,c){return c=Qi(c,o),o=dm(o,c),o==null||delete o[si(Br(c))]}function Uy(o,c,l,p){return Ca(o,c,l(Ts(o,c)),p)}function pu(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Rr(o,p?0:w,p?w+1:b):Rr(o,p?w+1:0,p?b:w)}function Fy(o,c){var l=o;return l instanceof Qe&&(l=l.value()),nd(c,function(p,b){return b.func.apply(b.thisArg,ji([p],b.args))},l)}function Pd(o,c,l){var p=o.length;if(p<2)return p?Yi(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=Ba(w[b]||P,o[B],c,l));return Yi(mn(w,1),c,l)}function zy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function Td(o){return Vt(o)?o:[]}function Rd(o){return typeof o=="function"?o:Vn}function Qi(o,c){return Ne(o)?o:Ud(o,c)?[o]:ym(ct(o))}var pk=je;function Ji(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Rr(o,c,l)}var Wy=t1||function(o){return yn.clearTimeout(o)};function Vy(o,c){if(c)return o.slice();var l=o.length,p=ly?ly(l):new o.constructor(l);return o.copy(p),p}function Bd(o){var c=new o.constructor(o.byteLength);return new eu(c).set(new eu(o)),c}function gk(o,c){var l=c?Bd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function yk(o){var c=new o.constructor(o.source,Eg.exec(o));return c.lastIndex=o.lastIndex,c}function mk(o){return Ta?bt(Ta.call(o)):{}}function $y(o,c){var l=c?Bd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function jy(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=ar(o),P=c!==t,B=c===null,U=c===c,ne=ar(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function bk(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=jy(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function qy(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=nn(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Gy(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=nn(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var we=b;++U<ne;)ce[we+U]=c[U];for(;++P<B;)(ge||b<w)&&(ce[we+l[P]]=o[b++]);return ce}function Fn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function ii(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?Ai(l,B,U):Ra(l,B,U)}return l}function vk(o,c){return ii(o,Dd(o),c)}function _k(o,c){return ii(o,om(o),c)}function gu(o,c){return function(l,p){var b=Ne(l)?IA:W1,w=c?c():{};return b(l,o,Pe(p,2),w)}}function vo(o){return je(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Cn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=bt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function Hy(o,c){return function(l,p){if(l==null)return l;if(!zn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=bt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function Yy(o){return function(c,l,p){for(var b=-1,w=bt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function wk(o,c,l){var p=c&R,b=La(o);function w(){var P=this&&this!==yn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function Qy(o){return function(c){c=ct(c);var l=fo(c)?$r(c):t,p=l?l[0]:c.charAt(0),b=l?Ji(l,1).join(""):c.slice(1);return p[o]()+b}}function _o(o){return function(c){return nd(Hm(Gm(c).replace(fA,"")),o,"")}}function La(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=bo(o.prototype),p=o.apply(l,c);return Ct(p)?p:l}}function Sk(o,c,l){var p=La(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=wo(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:qi(P,U);if(w-=ne.length,w<l)return tm(o,c,yu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==yn&&this instanceof b?p:o;return ir(re,this,P)}return b}function Jy(o){return function(c,l,p){var b=bt(c);if(!zn(c)){var w=Pe(l,3);c=dn(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function Xy(o){return Ii(function(c){var l=c.length,p=l,b=Pr.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new Or(a);if(b&&!P&&_u(w)=="wrapper")var P=new Pr([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=_u(w),U=B=="wrapper"?Kd(w):t;U&&Fd(U[0])&&U[1]==(N|ae|de|V)&&!U[4].length&&U[9]==1?P=P[_u(U[0])].apply(P,U[3]):P=w.length==1&&Fd(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Ne(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function yu(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ge=c&C,we=c&(ae|oe),Re=c&Q,ze=ge?t:La(o);function Be(){for(var He=arguments.length,Je=q(He),cr=He;cr--;)Je[cr]=arguments[cr];if(we)var Ln=wo(Be),ur=CA(Je,Ln);if(p&&(Je=qy(Je,p,b,we)),w&&(Je=Gy(Je,w,P,we)),He-=ur,we&&He<ne){var $t=qi(Je,Ln);return tm(o,c,yu,Be.placeholder,l,Je,$t,B,U,ne-He)}var Gr=ce?l:this,Ti=ge?Gr[o]:o;return He=Je.length,B?Je=Wk(Je,B):Re&&He>1&&Je.reverse(),re&&U<He&&(Je.length=U),this&&this!==yn&&this instanceof Be&&(Ti=ze||La(Ti)),Ti.apply(Gr,Je)}return Be}function Zy(o,c){return function(l,p){return Q1(l,o,c(p),{})}}function mu(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=or(l),p=or(p)):(l=Dy(l),p=Dy(p)),b=o(l,p)}return b}}function xd(o){return Ii(function(c){return c=Tt(c,sr(Pe())),je(function(l){var p=this;return o(c,function(b){return ir(b,p,l)})})})}function bu(o,c){c=c===t?" ":or(c);var l=c.length;if(l<2)return l?Id(c,o):c;var p=Id(c,iu(o/ho(c)));return fo(c)?Ji($r(p),0,o).join(""):p.slice(0,o)}function Ak(o,c,l,p){var b=c&R,w=La(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ge=this&&this!==yn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return ir(ge,b?l:this,ce)}return P}function em(o){return function(c,l,p){return p&&typeof p!="number"&&Cn(c,l,p)&&(l=p=t),c=Pi(c),l===t?(l=c,c=0):l=Pi(l),p=p===t?c<l?1:-1:Pi(p),ck(c,l,p,o)}}function vu(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=xr(c),l=xr(l)),o(c,l)}}function tm(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,we=re?w:t,Re=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|C));var ze=[o,c,b,we,ce,Re,ge,B,U,ne],Be=l.apply(t,ze);return Fd(o)&&hm(Be,ze),Be.placeholder=p,pm(Be,o,c)}function Md(o){var c=tn[o];return function(l,p){if(l=xr(l),p=p==null?0:In(Fe(p),292),p&&py(l)){var b=(ct(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(ct(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var kk=yo&&1/Hc(new yo([,-0]))[1]==ye?function(o){return new yo(o)}:th;function nm(o){return function(c){var l=En(c);return l==gn?ud(c):l==An?zA(c):MA(c,o(c))}}function ki(o,c,l,p,b,w,P,B){var U=c&C;if(!U&&typeof o!="function")throw new Or(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:nn(Fe(P),0),B=B===t?B:Fe(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=U?t:Kd(o),we=[o,c,l,p,b,re,ce,w,P,B];if(ge&&Uk(we,ge),o=we[0],c=we[1],l=we[2],p=we[3],b=we[4],B=we[9]=we[9]===t?U?0:o.length:nn(we[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Re=wk(o,c,l);else c==ae||c==oe?Re=Sk(o,c,B):(c==de||c==(R|de))&&!b.length?Re=Ak(o,c,l,p):Re=yu.apply(t,we);var ze=ge?Ky:hm;return pm(ze(Re,we),o,c)}function rm(o,c,l,p){return o===t||qr(o,go[l])&&!dt.call(p,l)?c:o}function im(o,c,l,p,b,w){return Ct(o)&&Ct(c)&&(w.set(c,o),du(o,c,t,im,w),w.delete(c)),o}function Ik(o){return Da(o)?t:o}function sm(o,c,l,p,b,w){var P=l&M,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,we=l&A?new Os:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Re=o[ce],ze=c[ce];if(p)var Be=P?p(ze,Re,ce,c,o,w):p(Re,ze,ce,o,c,w);if(Be!==t){if(Be)continue;ge=!1;break}if(we){if(!rd(c,function(He,Je){if(!ka(we,Je)&&(Re===He||b(Re,He,l,p,w)))return we.push(Je)})){ge=!1;break}}else if(!(Re===ze||b(Re,ze,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function Ek(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new eu(o),new eu(c)));case Wt:case Sn:case As:return qr(+o,+c);case kr:return o.name==c.name&&o.message==c.message;case Wi:case kn:return o==c+"";case gn:var B=ud;case An:var U=p&M;if(B||(B=Hc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=sm(B(o),B(c),p,b,w,P);return P.delete(o),re;case Vi:if(Ta)return Ta.call(o)==Ta.call(c)}return!1}function Ok(o,c,l,p,b,w){var P=l&M,B=Cd(o),U=B.length,ne=Cd(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ge=B[ce];if(!(P?ge in c:dt.call(c,ge)))return!1}var we=w.get(o),Re=w.get(c);if(we&&Re)return we==c&&Re==o;var ze=!0;w.set(o,c),w.set(c,o);for(var Be=P;++ce<U;){ge=B[ce];var He=o[ge],Je=c[ge];if(p)var cr=P?p(Je,He,ge,c,o,w):p(He,Je,ge,o,c,w);if(!(cr===t?He===Je||b(He,Je,l,p,w):cr)){ze=!1;break}Be||(Be=ge=="constructor")}if(ze&&!Be){var Ln=o.constructor,ur=c.constructor;Ln!=ur&&"constructor"in o&&"constructor"in c&&!(typeof Ln=="function"&&Ln instanceof Ln&&typeof ur=="function"&&ur instanceof ur)&&(ze=!1)}return w.delete(o),w.delete(c),ze}function Ii(o){return Wd(fm(o,t,_m),o+"")}function Cd(o){return Iy(o,dn,Dd)}function Ld(o){return Iy(o,Wn,om)}var Kd=ou?function(o){return ou.get(o)}:th;function _u(o){for(var c=o.name+"",l=mo[c],p=dt.call(mo,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function wo(o){var c=dt.call(_,"placeholder")?_:o;return c.placeholder}function Pe(){var o=_.iteratee||Zd;return o=o===Zd?Py:o,arguments.length?o(arguments[0],arguments[1]):o}function wu(o,c){var l=o.__data__;return Lk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Nd(o){for(var c=dn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,um(b)]}return c}function Rs(o,c){var l=DA(o,c);return Oy(l)?l:t}function Pk(o){var c=dt.call(o,Is),l=o[Is];try{o[Is]=t;var p=!0}catch{}var b=Xc.call(o);return p&&(c?o[Is]=l:delete o[Is]),b}var Dd=fd?function(o){return o==null?[]:(o=bt(o),$i(fd(o),function(c){return dy.call(o,c)}))}:nh,om=fd?function(o){for(var c=[];o;)ji(c,Dd(o)),o=tu(o);return c}:nh,En=Mn;(dd&&En(new dd(new ArrayBuffer(1)))!=g||Ea&&En(new Ea)!=gn||hd&&En(hd.resolve())!=Wc||yo&&En(new yo)!=An||Oa&&En(new Oa)!=Un)&&(En=function(o){var c=Mn(o),l=c==rr?o.constructor:t,p=l?Bs(l):"";if(p)switch(p){case l1:return g;case f1:return gn;case d1:return Wc;case h1:return An;case p1:return Un}return c});function Tk(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=In(c,o+P);break;case"takeRight":o=nn(o,c-P);break}}return{start:o,end:c}}function Rk(o){var c=o.match(KS);return c?c[1].split(NS):[]}function am(o,c,l){c=Qi(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=si(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&Pu(b)&&Ei(P,b)&&(Ne(o)||xs(o)))}function Bk(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&dt.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function cm(o){return typeof o.constructor=="function"&&!Ka(o)?bo(tu(o)):{}}function xk(o,c,l){var p=o.constructor;switch(c){case v:return Bd(o);case Wt:case Sn:return new p(+o);case g:return gk(o,l);case y:case k:case L:case $:case Z:case De:case wt:case pt:case St:return $y(o,l);case gn:return new p;case As:case kn:return new p(o);case Wi:return yk(o);case An:return new p;case Vi:return mk(o)}}function Mk(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(LS,`{
/* [wrapped with `+c+`] */
`)}function Ck(o){return Ne(o)||xs(o)||!!(hy&&o&&o[hy])}function Ei(o,c){var l=typeof o;return c=c??Ee,!!c&&(l=="number"||l!="symbol"&&qS.test(o))&&o>-1&&o%1==0&&o<c}function Cn(o,c,l){if(!Ct(l))return!1;var p=typeof c;return(p=="number"?zn(l)&&Ei(c,l.length):p=="string"&&c in l)?qr(l[c],o):!1}function Ud(o,c){if(Ne(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||ar(o)?!0:BS.test(o)||!RS.test(o)||c!=null&&o in bt(c)}function Lk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Fd(o){var c=_u(o),l=_[c];if(typeof l!="function"||!(c in Qe.prototype))return!1;if(o===l)return!0;var p=Kd(l);return!!p&&o===p[0]}function Kk(o){return!!uy&&uy in o}var Nk=Qc?Oi:rh;function Ka(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||go;return o===l}function um(o){return o===o&&!Ct(o)}function lm(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in bt(l))}}function Dk(o){var c=Eu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function Uk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|C|N),P=p==N&&l==ae||p==N&&l==V&&o[7].length<=c[8]||p==(N|V)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?qy(U,B,c[4]):B,o[4]=U?qi(o[3],d):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?Gy(U,B,c[6]):B,o[6]=U?qi(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:In(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function Fk(o){var c=[];if(o!=null)for(var l in bt(o))c.push(l);return c}function zk(o){return Xc.call(o)}function fm(o,c,l){return c=nn(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=nn(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),ir(o,this,B)}}function dm(o,c){return c.length<2?o:Ts(o,Rr(c,0,-1))}function Wk(o,c){for(var l=o.length,p=In(c.length,l),b=Fn(o);p--;){var w=c[p];o[p]=Ei(w,l)?b[w]:t}return o}function zd(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var hm=gm(Ky),Na=r1||function(o,c){return yn.setTimeout(o,c)},Wd=gm(fk);function pm(o,c,l){var p=c+"";return Wd(o,Mk(p,Vk(Rk(p),l)))}function gm(o){var c=0,l=0;return function(){var p=a1(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function Su(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=kd(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var ym=Dk(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(xS,function(l,p,b,w){c.push(b?w.replace(FS,"$1"):p||l)}),c});function si(o){if(typeof o=="string"||ar(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Bs(o){if(o!=null){try{return Jc.call(o)}catch{}try{return o+""}catch{}}return""}function Vk(o,c){return Er(fn,function(l){var p="_."+l[0];c&l[1]&&!qc(o,p)&&o.push(p)}),o.sort()}function mm(o){if(o instanceof Qe)return o.clone();var c=new Pr(o.__wrapped__,o.__chain__);return c.__actions__=Fn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function $k(o,c,l){(l?Cn(o,c,l):c===t)?c=1:c=nn(Fe(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(iu(p/c));b<p;)P[w++]=Rr(o,b,b+=c);return P}function jk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function qk(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return ji(Ne(l)?Fn(l):[l],mn(c,1))}var Gk=je(function(o,c){return Vt(o)?Ba(o,mn(c,1,Vt,!0)):[]}),Hk=je(function(o,c){var l=Br(c);return Vt(l)&&(l=t),Vt(o)?Ba(o,mn(c,1,Vt,!0),Pe(l,2)):[]}),Yk=je(function(o,c){var l=Br(c);return Vt(l)&&(l=t),Vt(o)?Ba(o,mn(c,1,Vt,!0),t,l):[]});function Qk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Fe(c),Rr(o,c<0?0:c,p)):[]}function Jk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Fe(c),c=p-c,Rr(o,0,c<0?0:c)):[]}function Xk(o,c){return o&&o.length?pu(o,Pe(c,3),!0,!0):[]}function Zk(o,c){return o&&o.length?pu(o,Pe(c,3),!0):[]}function eI(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Cn(o,c,l)&&(l=0,p=b),q1(o,c,l,p)):[]}function bm(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Fe(l);return b<0&&(b=nn(p+b,0)),Gc(o,Pe(c,3),b)}function vm(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=Fe(l),b=l<0?nn(p+b,0):In(b,p-1)),Gc(o,Pe(c,3),b,!0)}function _m(o){var c=o==null?0:o.length;return c?mn(o,1):[]}function tI(o){var c=o==null?0:o.length;return c?mn(o,ye):[]}function nI(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:Fe(c),mn(o,c)):[]}function rI(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function wm(o){return o&&o.length?o[0]:t}function iI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Fe(l);return b<0&&(b=nn(p+b,0)),lo(o,c,b)}function sI(o){var c=o==null?0:o.length;return c?Rr(o,0,-1):[]}var oI=je(function(o){var c=Tt(o,Td);return c.length&&c[0]===o[0]?vd(c):[]}),aI=je(function(o){var c=Br(o),l=Tt(o,Td);return c===Br(l)?c=t:l.pop(),l.length&&l[0]===o[0]?vd(l,Pe(c,2)):[]}),cI=je(function(o){var c=Br(o),l=Tt(o,Td);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?vd(l,t,c):[]});function uI(o,c){return o==null?"":s1.call(o,c)}function Br(o){var c=o==null?0:o.length;return c?o[c-1]:t}function lI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=Fe(l),b=b<0?nn(p+b,0):In(b,p-1)),c===c?VA(o,c,b):Gc(o,ty,b,!0)}function fI(o,c){return o&&o.length?xy(o,Fe(c)):t}var dI=je(Sm);function Sm(o,c){return o&&o.length&&c&&c.length?Ad(o,c):o}function hI(o,c,l){return o&&o.length&&c&&c.length?Ad(o,c,Pe(l,2)):o}function pI(o,c,l){return o&&o.length&&c&&c.length?Ad(o,c,t,l):o}var gI=Ii(function(o,c){var l=o==null?0:o.length,p=gd(o,c);return Ly(o,Tt(c,function(b){return Ei(b,l)?+b:b}).sort(jy)),p});function yI(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Pe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return Ly(o,b),l}function Vd(o){return o==null?o:u1.call(o)}function mI(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Cn(o,c,l)?(c=0,l=p):(c=c==null?0:Fe(c),l=l===t?p:Fe(l)),Rr(o,c,l)):[]}function bI(o,c){return hu(o,c)}function vI(o,c,l){return Ed(o,c,Pe(l,2))}function _I(o,c){var l=o==null?0:o.length;if(l){var p=hu(o,c);if(p<l&&qr(o[p],c))return p}return-1}function wI(o,c){return hu(o,c,!0)}function SI(o,c,l){return Ed(o,c,Pe(l,2),!0)}function AI(o,c){var l=o==null?0:o.length;if(l){var p=hu(o,c,!0)-1;if(qr(o[p],c))return p}return-1}function kI(o){return o&&o.length?Ny(o):[]}function II(o,c){return o&&o.length?Ny(o,Pe(c,2)):[]}function EI(o){var c=o==null?0:o.length;return c?Rr(o,1,c):[]}function OI(o,c,l){return o&&o.length?(c=l||c===t?1:Fe(c),Rr(o,0,c<0?0:c)):[]}function PI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Fe(c),c=p-c,Rr(o,c<0?0:c,p)):[]}function TI(o,c){return o&&o.length?pu(o,Pe(c,3),!1,!0):[]}function RI(o,c){return o&&o.length?pu(o,Pe(c,3)):[]}var BI=je(function(o){return Yi(mn(o,1,Vt,!0))}),xI=je(function(o){var c=Br(o);return Vt(c)&&(c=t),Yi(mn(o,1,Vt,!0),Pe(c,2))}),MI=je(function(o){var c=Br(o);return c=typeof c=="function"?c:t,Yi(mn(o,1,Vt,!0),t,c)});function CI(o){return o&&o.length?Yi(o):[]}function LI(o,c){return o&&o.length?Yi(o,Pe(c,2)):[]}function KI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Yi(o,t,c):[]}function $d(o){if(!(o&&o.length))return[];var c=0;return o=$i(o,function(l){if(Vt(l))return c=nn(l.length,c),!0}),ad(c,function(l){return Tt(o,id(l))})}function Am(o,c){if(!(o&&o.length))return[];var l=$d(o);return c==null?l:Tt(l,function(p){return ir(c,t,p)})}var NI=je(function(o,c){return Vt(o)?Ba(o,c):[]}),DI=je(function(o){return Pd($i(o,Vt))}),UI=je(function(o){var c=Br(o);return Vt(c)&&(c=t),Pd($i(o,Vt),Pe(c,2))}),FI=je(function(o){var c=Br(o);return c=typeof c=="function"?c:t,Pd($i(o,Vt),t,c)}),zI=je($d);function WI(o,c){return zy(o||[],c||[],Ra)}function VI(o,c){return zy(o||[],c||[],Ca)}var $I=je(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,Am(o,l)});function km(o){var c=_(o);return c.__chain__=!0,c}function jI(o,c){return c(o),o}function Au(o,c){return c(o)}var qI=Ii(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return gd(w,o)};return c>1||this.__actions__.length||!(p instanceof Qe)||!Ei(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:Au,args:[b],thisArg:t}),new Pr(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function GI(){return km(this)}function HI(){return new Pr(this.value(),this.__chain__)}function YI(){this.__values__===t&&(this.__values__=Dm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function QI(){return this}function JI(o){for(var c,l=this;l instanceof cu;){var p=mm(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function XI(){var o=this.__wrapped__;if(o instanceof Qe){var c=o;return this.__actions__.length&&(c=new Qe(this)),c=c.reverse(),c.__actions__.push({func:Au,args:[Vd],thisArg:t}),new Pr(c,this.__chain__)}return this.thru(Vd)}function ZI(){return Fy(this.__wrapped__,this.__actions__)}var eE=gu(function(o,c,l){dt.call(o,l)?++o[l]:Ai(o,l,1)});function tE(o,c,l){var p=Ne(o)?Zg:j1;return l&&Cn(o,c,l)&&(c=t),p(o,Pe(c,3))}function nE(o,c){var l=Ne(o)?$i:Ay;return l(o,Pe(c,3))}var rE=Jy(bm),iE=Jy(vm);function sE(o,c){return mn(ku(o,c),1)}function oE(o,c){return mn(ku(o,c),ye)}function aE(o,c,l){return l=l===t?1:Fe(l),mn(ku(o,c),l)}function Im(o,c){var l=Ne(o)?Er:Hi;return l(o,Pe(c,3))}function Em(o,c){var l=Ne(o)?EA:Sy;return l(o,Pe(c,3))}var cE=gu(function(o,c,l){dt.call(o,l)?o[l].push(c):Ai(o,l,[c])});function uE(o,c,l,p){o=zn(o)?o:Ao(o),l=l&&!p?Fe(l):0;var b=o.length;return l<0&&(l=nn(b+l,0)),Tu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&lo(o,c,l)>-1}var lE=je(function(o,c,l){var p=-1,b=typeof c=="function",w=zn(o)?q(o.length):[];return Hi(o,function(P){w[++p]=b?ir(c,P,l):xa(P,c,l)}),w}),fE=gu(function(o,c,l){Ai(o,l,c)});function ku(o,c){var l=Ne(o)?Tt:Ty;return l(o,Pe(c,3))}function dE(o,c,l,p){return o==null?[]:(Ne(c)||(c=c==null?[]:[c]),l=p?t:l,Ne(l)||(l=l==null?[]:[l]),My(o,c,l))}var hE=gu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function pE(o,c,l){var p=Ne(o)?nd:ry,b=arguments.length<3;return p(o,Pe(c,4),l,b,Hi)}function gE(o,c,l){var p=Ne(o)?OA:ry,b=arguments.length<3;return p(o,Pe(c,4),l,b,Sy)}function yE(o,c){var l=Ne(o)?$i:Ay;return l(o,Ou(Pe(c,3)))}function mE(o){var c=Ne(o)?by:uk;return c(o)}function bE(o,c,l){(l?Cn(o,c,l):c===t)?c=1:c=Fe(c);var p=Ne(o)?F1:lk;return p(o,c)}function vE(o){var c=Ne(o)?z1:dk;return c(o)}function _E(o){if(o==null)return 0;if(zn(o))return Tu(o)?ho(o):o.length;var c=En(o);return c==gn||c==An?o.size:wd(o).length}function wE(o,c,l){var p=Ne(o)?rd:hk;return l&&Cn(o,c,l)&&(c=t),p(o,Pe(c,3))}var SE=je(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Cn(o,c[0],c[1])?c=[]:l>2&&Cn(c[0],c[1],c[2])&&(c=[c[0]]),My(o,mn(c,1),[])}),Iu=n1||function(){return yn.Date.now()};function AE(o,c){if(typeof c!="function")throw new Or(a);return o=Fe(o),function(){if(--o<1)return c.apply(this,arguments)}}function Om(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,ki(o,N,t,t,t,t,c)}function Pm(o,c){var l;if(typeof c!="function")throw new Or(a);return o=Fe(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var jd=je(function(o,c,l){var p=R;if(l.length){var b=qi(l,wo(jd));p|=de}return ki(o,p,c,l,b)}),Tm=je(function(o,c,l){var p=R|C;if(l.length){var b=qi(l,wo(Tm));p|=de}return ki(c,p,o,l,b)});function Rm(o,c,l){c=l?t:c;var p=ki(o,ae,t,t,t,t,t,c);return p.placeholder=Rm.placeholder,p}function Bm(o,c,l){c=l?t:c;var p=ki(o,oe,t,t,t,t,t,c);return p.placeholder=Bm.placeholder,p}function xm(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new Or(a);c=xr(c)||0,Ct(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?nn(xr(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function we($t){var Gr=p,Ti=b;return p=b=t,ne=$t,P=o.apply(Ti,Gr),P}function Re($t){return ne=$t,B=Na(He,c),re?we($t):P}function ze($t){var Gr=$t-U,Ti=$t-ne,Jm=c-Gr;return ce?In(Jm,w-Ti):Jm}function Be($t){var Gr=$t-U,Ti=$t-ne;return U===t||Gr>=c||Gr<0||ce&&Ti>=w}function He(){var $t=Iu();if(Be($t))return Je($t);B=Na(He,ze($t))}function Je($t){return B=t,ge&&p?we($t):(p=b=t,P)}function cr(){B!==t&&Wy(B),ne=0,p=U=b=B=t}function Ln(){return B===t?P:Je(Iu())}function ur(){var $t=Iu(),Gr=Be($t);if(p=arguments,b=this,U=$t,Gr){if(B===t)return Re(U);if(ce)return Wy(B),B=Na(He,c),we(U)}return B===t&&(B=Na(He,c)),P}return ur.cancel=cr,ur.flush=Ln,ur}var kE=je(function(o,c){return wy(o,1,c)}),IE=je(function(o,c,l){return wy(o,xr(c)||0,l)});function EE(o){return ki(o,Q)}function Eu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Or(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(Eu.Cache||Si),l}Eu.Cache=Si;function Ou(o){if(typeof o!="function")throw new Or(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function OE(o){return Pm(2,o)}var PE=pk(function(o,c){c=c.length==1&&Ne(c[0])?Tt(c[0],sr(Pe())):Tt(mn(c,1),sr(Pe()));var l=c.length;return je(function(p){for(var b=-1,w=In(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return ir(o,this,p)})}),qd=je(function(o,c){var l=qi(c,wo(qd));return ki(o,de,t,c,l)}),Mm=je(function(o,c){var l=qi(c,wo(Mm));return ki(o,E,t,c,l)}),TE=Ii(function(o,c){return ki(o,V,t,t,t,c)});function RE(o,c){if(typeof o!="function")throw new Or(a);return c=c===t?c:Fe(c),je(o,c)}function BE(o,c){if(typeof o!="function")throw new Or(a);return c=c==null?0:nn(Fe(c),0),je(function(l){var p=l[c],b=Ji(l,0,c);return p&&ji(b,p),ir(o,this,b)})}function xE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new Or(a);return Ct(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),xm(o,c,{leading:p,maxWait:c,trailing:b})}function ME(o){return Om(o,1)}function CE(o,c){return qd(Rd(c),o)}function LE(){if(!arguments.length)return[];var o=arguments[0];return Ne(o)?o:[o]}function KE(o){return Tr(o,O)}function NE(o,c){return c=typeof c=="function"?c:t,Tr(o,O,c)}function DE(o){return Tr(o,m|O)}function UE(o,c){return c=typeof c=="function"?c:t,Tr(o,m|O,c)}function FE(o,c){return c==null||_y(o,c,dn(c))}function qr(o,c){return o===c||o!==o&&c!==c}var zE=vu(bd),WE=vu(function(o,c){return o>=c}),xs=Ey(function(){return arguments}())?Ey:function(o){return Dt(o)&&dt.call(o,"callee")&&!dy.call(o,"callee")},Ne=q.isArray,VE=Gg?sr(Gg):J1;function zn(o){return o!=null&&Pu(o.length)&&!Oi(o)}function Vt(o){return Dt(o)&&zn(o)}function $E(o){return o===!0||o===!1||Dt(o)&&Mn(o)==Wt}var Xi=i1||rh,jE=Hg?sr(Hg):X1;function qE(o){return Dt(o)&&o.nodeType===1&&!Da(o)}function GE(o){if(o==null)return!0;if(zn(o)&&(Ne(o)||typeof o=="string"||typeof o.splice=="function"||Xi(o)||So(o)||xs(o)))return!o.length;var c=En(o);if(c==gn||c==An)return!o.size;if(Ka(o))return!wd(o).length;for(var l in o)if(dt.call(o,l))return!1;return!0}function HE(o,c){return Ma(o,c)}function YE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?Ma(o,c,t,l):!!p}function Gd(o){if(!Dt(o))return!1;var c=Mn(o);return c==kr||c==ni||typeof o.message=="string"&&typeof o.name=="string"&&!Da(o)}function QE(o){return typeof o=="number"&&py(o)}function Oi(o){if(!Ct(o))return!1;var c=Mn(o);return c==nr||c==_i||c==Ar||c==Vf}function Cm(o){return typeof o=="number"&&o==Fe(o)}function Pu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ee}function Ct(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Dt(o){return o!=null&&typeof o=="object"}var Lm=Yg?sr(Yg):ek;function JE(o,c){return o===c||_d(o,c,Nd(c))}function XE(o,c,l){return l=typeof l=="function"?l:t,_d(o,c,Nd(c),l)}function ZE(o){return Km(o)&&o!=+o}function eO(o){if(Nk(o))throw new Le(s);return Oy(o)}function tO(o){return o===null}function nO(o){return o==null}function Km(o){return typeof o=="number"||Dt(o)&&Mn(o)==As}function Da(o){if(!Dt(o)||Mn(o)!=rr)return!1;var c=tu(o);if(c===null)return!0;var l=dt.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&Jc.call(l)==XA}var Hd=Qg?sr(Qg):tk;function rO(o){return Cm(o)&&o>=-Ee&&o<=Ee}var Nm=Jg?sr(Jg):nk;function Tu(o){return typeof o=="string"||!Ne(o)&&Dt(o)&&Mn(o)==kn}function ar(o){return typeof o=="symbol"||Dt(o)&&Mn(o)==Vi}var So=Xg?sr(Xg):rk;function iO(o){return o===t}function sO(o){return Dt(o)&&En(o)==Un}function oO(o){return Dt(o)&&Mn(o)==jf}var aO=vu(Sd),cO=vu(function(o,c){return o<=c});function Dm(o){if(!o)return[];if(zn(o))return Tu(o)?$r(o):Fn(o);if(Ia&&o[Ia])return FA(o[Ia]());var c=En(o),l=c==gn?ud:c==An?Hc:Ao;return l(o)}function Pi(o){if(!o)return o===0?o:0;if(o=xr(o),o===ye||o===-ye){var c=o<0?-1:1;return c*Gt}return o===o?o:0}function Fe(o){var c=Pi(o),l=c%1;return c===c?l?c-l:c:0}function Um(o){return o?Ps(Fe(o),0,_e):0}function xr(o){if(typeof o=="number")return o;if(ar(o))return Ht;if(Ct(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Ct(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=iy(o);var l=VS.test(o);return l||jS.test(o)?AA(o.slice(2),l?2:8):WS.test(o)?Ht:+o}function Fm(o){return ii(o,Wn(o))}function uO(o){return o?Ps(Fe(o),-Ee,Ee):o===0?o:0}function ct(o){return o==null?"":or(o)}var lO=vo(function(o,c){if(Ka(c)||zn(c)){ii(c,dn(c),o);return}for(var l in c)dt.call(c,l)&&Ra(o,l,c[l])}),zm=vo(function(o,c){ii(c,Wn(c),o)}),Ru=vo(function(o,c,l,p){ii(c,Wn(c),o,p)}),fO=vo(function(o,c,l,p){ii(c,dn(c),o,p)}),dO=Ii(gd);function hO(o,c){var l=bo(o);return c==null?l:vy(l,c)}var pO=je(function(o,c){o=bt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Cn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=Wn(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||qr(re,go[ne])&&!dt.call(o,ne))&&(o[ne]=w[ne])}return o}),gO=je(function(o){return o.push(t,im),ir(Wm,t,o)});function yO(o,c){return ey(o,Pe(c,3),ri)}function mO(o,c){return ey(o,Pe(c,3),md)}function bO(o,c){return o==null?o:yd(o,Pe(c,3),Wn)}function vO(o,c){return o==null?o:ky(o,Pe(c,3),Wn)}function _O(o,c){return o&&ri(o,Pe(c,3))}function wO(o,c){return o&&md(o,Pe(c,3))}function SO(o){return o==null?[]:fu(o,dn(o))}function AO(o){return o==null?[]:fu(o,Wn(o))}function Yd(o,c,l){var p=o==null?t:Ts(o,c);return p===t?l:p}function kO(o,c){return o!=null&&am(o,c,G1)}function Qd(o,c){return o!=null&&am(o,c,H1)}var IO=Zy(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Xc.call(c)),o[c]=l},Xd(Vn)),EO=Zy(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Xc.call(c)),dt.call(o,c)?o[c].push(l):o[c]=[l]},Pe),OO=je(xa);function dn(o){return zn(o)?my(o):wd(o)}function Wn(o){return zn(o)?my(o,!0):ik(o)}function PO(o,c){var l={};return c=Pe(c,3),ri(o,function(p,b,w){Ai(l,c(p,b,w),p)}),l}function TO(o,c){var l={};return c=Pe(c,3),ri(o,function(p,b,w){Ai(l,b,c(p,b,w))}),l}var RO=vo(function(o,c,l){du(o,c,l)}),Wm=vo(function(o,c,l,p){du(o,c,l,p)}),BO=Ii(function(o,c){var l={};if(o==null)return l;var p=!1;c=Tt(c,function(w){return w=Qi(w,o),p||(p=w.length>1),w}),ii(o,Ld(o),l),p&&(l=Tr(l,m|I|O,Ik));for(var b=c.length;b--;)Od(l,c[b]);return l});function xO(o,c){return Vm(o,Ou(Pe(c)))}var MO=Ii(function(o,c){return o==null?{}:ok(o,c)});function Vm(o,c){if(o==null)return{};var l=Tt(Ld(o),function(p){return[p]});return c=Pe(c),Cy(o,l,function(p,b){return c(p,b[0])})}function CO(o,c,l){c=Qi(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[si(c[p])];w===t&&(p=b,w=l),o=Oi(w)?w.call(o):w}return o}function LO(o,c,l){return o==null?o:Ca(o,c,l)}function KO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Ca(o,c,l,p)}var $m=nm(dn),jm=nm(Wn);function NO(o,c,l){var p=Ne(o),b=p||Xi(o)||So(o);if(c=Pe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:Ct(o)?l=Oi(w)?bo(tu(o)):{}:l={}}return(b?Er:ri)(o,function(P,B,U){return c(l,P,B,U)}),l}function DO(o,c){return o==null?!0:Od(o,c)}function UO(o,c,l){return o==null?o:Uy(o,c,Rd(l))}function FO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Uy(o,c,Rd(l),p)}function Ao(o){return o==null?[]:cd(o,dn(o))}function zO(o){return o==null?[]:cd(o,Wn(o))}function WO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=xr(l),l=l===l?l:0),c!==t&&(c=xr(c),c=c===c?c:0),Ps(xr(o),c,l)}function VO(o,c,l){return c=Pi(c),l===t?(l=c,c=0):l=Pi(l),o=xr(o),Y1(o,c,l)}function $O(o,c,l){if(l&&typeof l!="boolean"&&Cn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Pi(o),c===t?(c=o,o=0):c=Pi(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=gy();return In(o+b*(c-o+SA("1e-"+((b+"").length-1))),c)}return kd(o,c)}var jO=_o(function(o,c,l){return c=c.toLowerCase(),o+(l?qm(c):c)});function qm(o){return Jd(ct(o).toLowerCase())}function Gm(o){return o=ct(o),o&&o.replace(GS,LA).replace(dA,"")}function qO(o,c,l){o=ct(o),c=or(c);var p=o.length;l=l===t?p:Ps(Fe(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function GO(o){return o=ct(o),o&&OS.test(o)?o.replace(kg,KA):o}function HO(o){return o=ct(o),o&&MS.test(o)?o.replace(qf,"\\$&"):o}var YO=_o(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),QO=_o(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),JO=Qy("toLowerCase");function XO(o,c,l){o=ct(o),c=Fe(c);var p=c?ho(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return bu(su(b),l)+o+bu(iu(b),l)}function ZO(o,c,l){o=ct(o),c=Fe(c);var p=c?ho(o):0;return c&&p<c?o+bu(c-p,l):o}function eP(o,c,l){o=ct(o),c=Fe(c);var p=c?ho(o):0;return c&&p<c?bu(c-p,l)+o:o}function tP(o,c,l){return l||c==null?c=0:c&&(c=+c),c1(ct(o).replace(Gf,""),c||0)}function nP(o,c,l){return(l?Cn(o,c,l):c===t)?c=1:c=Fe(c),Id(ct(o),c)}function rP(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var iP=_o(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function sP(o,c,l){return l&&typeof l!="number"&&Cn(o,c,l)&&(c=l=t),l=l===t?_e:l>>>0,l?(o=ct(o),o&&(typeof c=="string"||c!=null&&!Hd(c))&&(c=or(c),!c&&fo(o))?Ji($r(o),0,l):o.split(c,l)):[]}var oP=_o(function(o,c,l){return o+(l?" ":"")+Jd(c)});function aP(o,c,l){return o=ct(o),l=l==null?0:Ps(Fe(l),0,o.length),c=or(c),o.slice(l,l+c.length)==c}function cP(o,c,l){var p=_.templateSettings;l&&Cn(o,c,l)&&(c=t),o=ct(o),c=Ru({},c,p,rm);var b=Ru({},c.imports,p.imports,rm),w=dn(b),P=cd(b,w),B,U,ne=0,re=c.interpolate||Vc,ce="__p += '",ge=ld((c.escape||Vc).source+"|"+re.source+"|"+(re===Ig?zS:Vc).source+"|"+(c.evaluate||Vc).source+"|$","g"),we="//# sourceURL="+(dt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mA+"]")+`
`;o.replace(ge,function(Be,He,Je,cr,Ln,ur){return Je||(Je=cr),ce+=o.slice(ne,ur).replace(HS,NA),He&&(B=!0,ce+=`' +
__e(`+He+`) +
'`),Ln&&(U=!0,ce+=`';
`+Ln+`;
__p += '`),Je&&(ce+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),ne=ur+Be.length,Be}),ce+=`';
`;var Re=dt.call(c,"variable")&&c.variable;if(!Re)ce=`with (obj) {
`+ce+`
}
`;else if(US.test(Re))throw new Le(u);ce=(U?ce.replace(ft,""):ce).replace(kS,"$1").replace(IS,"$1;"),ce="function("+(Re||"obj")+`) {
`+(Re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var ze=Ym(function(){return st(w,we+"return "+ce).apply(t,P)});if(ze.source=ce,Gd(ze))throw ze;return ze}function uP(o){return ct(o).toLowerCase()}function lP(o){return ct(o).toUpperCase()}function fP(o,c,l){if(o=ct(o),o&&(l||c===t))return iy(o);if(!o||!(c=or(c)))return o;var p=$r(o),b=$r(c),w=sy(p,b),P=oy(p,b)+1;return Ji(p,w,P).join("")}function dP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.slice(0,cy(o)+1);if(!o||!(c=or(c)))return o;var p=$r(o),b=oy(p,$r(c))+1;return Ji(p,0,b).join("")}function hP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.replace(Gf,"");if(!o||!(c=or(c)))return o;var p=$r(o),b=sy(p,$r(c));return Ji(p,b).join("")}function pP(o,c){var l=K,p=j;if(Ct(c)){var b="separator"in c?c.separator:b;l="length"in c?Fe(c.length):l,p="omission"in c?or(c.omission):p}o=ct(o);var w=o.length;if(fo(o)){var P=$r(o);w=P.length}if(l>=w)return o;var B=l-ho(p);if(B<1)return p;var U=P?Ji(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),Hd(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=ld(b.source,ct(Eg.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(or(b),B)!=B){var ge=U.lastIndexOf(b);ge>-1&&(U=U.slice(0,ge))}return U+p}function gP(o){return o=ct(o),o&&ES.test(o)?o.replace(Ag,$A):o}var yP=_o(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),Jd=Qy("toUpperCase");function Hm(o,c,l){return o=ct(o),c=l?t:c,c===t?UA(o)?GA(o):RA(o):o.match(c)||[]}var Ym=je(function(o,c){try{return ir(o,t,c)}catch(l){return Gd(l)?l:new Le(l)}}),mP=Ii(function(o,c){return Er(c,function(l){l=si(l),Ai(o,l,jd(o[l],o))}),o});function bP(o){var c=o==null?0:o.length,l=Pe();return o=c?Tt(o,function(p){if(typeof p[1]!="function")throw new Or(a);return[l(p[0]),p[1]]}):[],je(function(p){for(var b=-1;++b<c;){var w=o[b];if(ir(w[0],this,p))return ir(w[1],this,p)}})}function vP(o){return $1(Tr(o,m))}function Xd(o){return function(){return o}}function _P(o,c){return o==null||o!==o?c:o}var wP=Xy(),SP=Xy(!0);function Vn(o){return o}function Zd(o){return Py(typeof o=="function"?o:Tr(o,m))}function AP(o){return Ry(Tr(o,m))}function kP(o,c){return By(o,Tr(c,m))}var IP=je(function(o,c){return function(l){return xa(l,o,c)}}),EP=je(function(o,c){return function(l){return xa(o,l,c)}});function eh(o,c,l){var p=dn(c),b=fu(c,p);l==null&&!(Ct(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=fu(c,dn(c)));var w=!(Ct(l)&&"chain"in l)||!!l.chain,P=Oi(o);return Er(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=Fn(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,ji([this.value()],arguments))})}),o}function OP(){return yn._===this&&(yn._=ZA),this}function th(){}function PP(o){return o=Fe(o),je(function(c){return xy(c,o)})}var TP=xd(Tt),RP=xd(Zg),BP=xd(rd);function Qm(o){return Ud(o)?id(si(o)):ak(o)}function xP(o){return function(c){return o==null?t:Ts(o,c)}}var MP=em(),CP=em(!0);function nh(){return[]}function rh(){return!1}function LP(){return{}}function KP(){return""}function NP(){return!0}function DP(o,c){if(o=Fe(o),o<1||o>Ee)return[];var l=_e,p=In(o,_e);c=Pe(c),o-=_e;for(var b=ad(p,c);++l<o;)c(l);return b}function UP(o){return Ne(o)?Tt(o,si):ar(o)?[o]:Fn(ym(ct(o)))}function FP(o){var c=++JA;return ct(o)+c}var zP=mu(function(o,c){return o+c},0),WP=Md("ceil"),VP=mu(function(o,c){return o/c},1),$P=Md("floor");function jP(o){return o&&o.length?lu(o,Vn,bd):t}function qP(o,c){return o&&o.length?lu(o,Pe(c,2),bd):t}function GP(o){return ny(o,Vn)}function HP(o,c){return ny(o,Pe(c,2))}function YP(o){return o&&o.length?lu(o,Vn,Sd):t}function QP(o,c){return o&&o.length?lu(o,Pe(c,2),Sd):t}var JP=mu(function(o,c){return o*c},1),XP=Md("round"),ZP=mu(function(o,c){return o-c},0);function eT(o){return o&&o.length?od(o,Vn):0}function tT(o,c){return o&&o.length?od(o,Pe(c,2)):0}return _.after=AE,_.ary=Om,_.assign=lO,_.assignIn=zm,_.assignInWith=Ru,_.assignWith=fO,_.at=dO,_.before=Pm,_.bind=jd,_.bindAll=mP,_.bindKey=Tm,_.castArray=LE,_.chain=km,_.chunk=$k,_.compact=jk,_.concat=qk,_.cond=bP,_.conforms=vP,_.constant=Xd,_.countBy=eE,_.create=hO,_.curry=Rm,_.curryRight=Bm,_.debounce=xm,_.defaults=pO,_.defaultsDeep=gO,_.defer=kE,_.delay=IE,_.difference=Gk,_.differenceBy=Hk,_.differenceWith=Yk,_.drop=Qk,_.dropRight=Jk,_.dropRightWhile=Xk,_.dropWhile=Zk,_.fill=eI,_.filter=nE,_.flatMap=sE,_.flatMapDeep=oE,_.flatMapDepth=aE,_.flatten=_m,_.flattenDeep=tI,_.flattenDepth=nI,_.flip=EE,_.flow=wP,_.flowRight=SP,_.fromPairs=rI,_.functions=SO,_.functionsIn=AO,_.groupBy=cE,_.initial=sI,_.intersection=oI,_.intersectionBy=aI,_.intersectionWith=cI,_.invert=IO,_.invertBy=EO,_.invokeMap=lE,_.iteratee=Zd,_.keyBy=fE,_.keys=dn,_.keysIn=Wn,_.map=ku,_.mapKeys=PO,_.mapValues=TO,_.matches=AP,_.matchesProperty=kP,_.memoize=Eu,_.merge=RO,_.mergeWith=Wm,_.method=IP,_.methodOf=EP,_.mixin=eh,_.negate=Ou,_.nthArg=PP,_.omit=BO,_.omitBy=xO,_.once=OE,_.orderBy=dE,_.over=TP,_.overArgs=PE,_.overEvery=RP,_.overSome=BP,_.partial=qd,_.partialRight=Mm,_.partition=hE,_.pick=MO,_.pickBy=Vm,_.property=Qm,_.propertyOf=xP,_.pull=dI,_.pullAll=Sm,_.pullAllBy=hI,_.pullAllWith=pI,_.pullAt=gI,_.range=MP,_.rangeRight=CP,_.rearg=TE,_.reject=yE,_.remove=yI,_.rest=RE,_.reverse=Vd,_.sampleSize=bE,_.set=LO,_.setWith=KO,_.shuffle=vE,_.slice=mI,_.sortBy=SE,_.sortedUniq=kI,_.sortedUniqBy=II,_.split=sP,_.spread=BE,_.tail=EI,_.take=OI,_.takeRight=PI,_.takeRightWhile=TI,_.takeWhile=RI,_.tap=jI,_.throttle=xE,_.thru=Au,_.toArray=Dm,_.toPairs=$m,_.toPairsIn=jm,_.toPath=UP,_.toPlainObject=Fm,_.transform=NO,_.unary=ME,_.union=BI,_.unionBy=xI,_.unionWith=MI,_.uniq=CI,_.uniqBy=LI,_.uniqWith=KI,_.unset=DO,_.unzip=$d,_.unzipWith=Am,_.update=UO,_.updateWith=FO,_.values=Ao,_.valuesIn=zO,_.without=NI,_.words=Hm,_.wrap=CE,_.xor=DI,_.xorBy=UI,_.xorWith=FI,_.zip=zI,_.zipObject=WI,_.zipObjectDeep=VI,_.zipWith=$I,_.entries=$m,_.entriesIn=jm,_.extend=zm,_.extendWith=Ru,eh(_,_),_.add=zP,_.attempt=Ym,_.camelCase=jO,_.capitalize=qm,_.ceil=WP,_.clamp=WO,_.clone=KE,_.cloneDeep=DE,_.cloneDeepWith=UE,_.cloneWith=NE,_.conformsTo=FE,_.deburr=Gm,_.defaultTo=_P,_.divide=VP,_.endsWith=qO,_.eq=qr,_.escape=GO,_.escapeRegExp=HO,_.every=tE,_.find=rE,_.findIndex=bm,_.findKey=yO,_.findLast=iE,_.findLastIndex=vm,_.findLastKey=mO,_.floor=$P,_.forEach=Im,_.forEachRight=Em,_.forIn=bO,_.forInRight=vO,_.forOwn=_O,_.forOwnRight=wO,_.get=Yd,_.gt=zE,_.gte=WE,_.has=kO,_.hasIn=Qd,_.head=wm,_.identity=Vn,_.includes=uE,_.indexOf=iI,_.inRange=VO,_.invoke=OO,_.isArguments=xs,_.isArray=Ne,_.isArrayBuffer=VE,_.isArrayLike=zn,_.isArrayLikeObject=Vt,_.isBoolean=$E,_.isBuffer=Xi,_.isDate=jE,_.isElement=qE,_.isEmpty=GE,_.isEqual=HE,_.isEqualWith=YE,_.isError=Gd,_.isFinite=QE,_.isFunction=Oi,_.isInteger=Cm,_.isLength=Pu,_.isMap=Lm,_.isMatch=JE,_.isMatchWith=XE,_.isNaN=ZE,_.isNative=eO,_.isNil=nO,_.isNull=tO,_.isNumber=Km,_.isObject=Ct,_.isObjectLike=Dt,_.isPlainObject=Da,_.isRegExp=Hd,_.isSafeInteger=rO,_.isSet=Nm,_.isString=Tu,_.isSymbol=ar,_.isTypedArray=So,_.isUndefined=iO,_.isWeakMap=sO,_.isWeakSet=oO,_.join=uI,_.kebabCase=YO,_.last=Br,_.lastIndexOf=lI,_.lowerCase=QO,_.lowerFirst=JO,_.lt=aO,_.lte=cO,_.max=jP,_.maxBy=qP,_.mean=GP,_.meanBy=HP,_.min=YP,_.minBy=QP,_.stubArray=nh,_.stubFalse=rh,_.stubObject=LP,_.stubString=KP,_.stubTrue=NP,_.multiply=JP,_.nth=fI,_.noConflict=OP,_.noop=th,_.now=Iu,_.pad=XO,_.padEnd=ZO,_.padStart=eP,_.parseInt=tP,_.random=$O,_.reduce=pE,_.reduceRight=gE,_.repeat=nP,_.replace=rP,_.result=CO,_.round=XP,_.runInContext=D,_.sample=mE,_.size=_E,_.snakeCase=iP,_.some=wE,_.sortedIndex=bI,_.sortedIndexBy=vI,_.sortedIndexOf=_I,_.sortedLastIndex=wI,_.sortedLastIndexBy=SI,_.sortedLastIndexOf=AI,_.startCase=oP,_.startsWith=aP,_.subtract=ZP,_.sum=eT,_.sumBy=tT,_.template=cP,_.times=DP,_.toFinite=Pi,_.toInteger=Fe,_.toLength=Um,_.toLower=uP,_.toNumber=xr,_.toSafeInteger=uO,_.toString=ct,_.toUpper=lP,_.trim=fP,_.trimEnd=dP,_.trimStart=hP,_.truncate=pP,_.unescape=gP,_.uniqueId=FP,_.upperCase=yP,_.upperFirst=Jd,_.each=Im,_.eachRight=Em,_.first=wm,eh(_,function(){var o={};return ri(_,function(c,l){dt.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),Er(["drop","take"],function(o,c){Qe.prototype[o]=function(l){l=l===t?1:nn(Fe(l),0);var p=this.__filtered__&&!c?new Qe(this):this.clone();return p.__filtered__?p.__takeCount__=In(l,p.__takeCount__):p.__views__.push({size:In(l,_e),type:o+(p.__dir__<0?"Right":"")}),p},Qe.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),Er(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==W||l==Me;Qe.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Pe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),Er(["head","last"],function(o,c){var l="take"+(c?"Right":"");Qe.prototype[o]=function(){return this[l](1).value()[0]}}),Er(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Qe.prototype[o]=function(){return this.__filtered__?new Qe(this):this[l](1)}}),Qe.prototype.compact=function(){return this.filter(Vn)},Qe.prototype.find=function(o){return this.filter(o).head()},Qe.prototype.findLast=function(o){return this.reverse().find(o)},Qe.prototype.invokeMap=je(function(o,c){return typeof o=="function"?new Qe(this):this.map(function(l){return xa(l,o,c)})}),Qe.prototype.reject=function(o){return this.filter(Ou(Pe(o)))},Qe.prototype.slice=function(o,c){o=Fe(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Qe(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=Fe(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Qe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qe.prototype.toArray=function(){return this.take(_e)},ri(Qe.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof Qe,ne=B[0],re=U||Ne(P),ce=function(He){var Je=b.apply(_,ji([He],B));return p&&ge?Je[0]:Je};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ge=this.__chain__,we=!!this.__actions__.length,Re=w&&!ge,ze=U&&!we;if(!w&&re){P=ze?P:new Qe(this);var Be=o.apply(P,B);return Be.__actions__.push({func:Au,args:[ce],thisArg:t}),new Pr(Be,ge)}return Re&&ze?o.apply(this,B):(Be=this.thru(ce),Re?p?Be.value()[0]:Be.value():Be)})}),Er(["pop","push","shift","sort","splice","unshift"],function(o){var c=Yc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Ne(w)?w:[],b)}return this[l](function(P){return c.apply(Ne(P)?P:[],b)})}}),ri(Qe.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";dt.call(mo,p)||(mo[p]=[]),mo[p].push({name:c,func:l})}}),mo[yu(t,C).name]=[{name:"wrapper",func:t}],Qe.prototype.clone=g1,Qe.prototype.reverse=y1,Qe.prototype.value=m1,_.prototype.at=qI,_.prototype.chain=GI,_.prototype.commit=HI,_.prototype.next=YI,_.prototype.plant=JI,_.prototype.reverse=XI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=ZI,_.prototype.first=_.prototype.head,Ia&&(_.prototype[Ia]=QI),_},po=HA();ks?((ks.exports=po)._=po,Zf._=po):yn._=po}).call(z)})(Rl,Rl.exports);var If={};Object.defineProperty(If,"__esModule",{value:!0});If.OrderCacheService=void 0;const hv=Rl.exports,oi=eS,pv=uf,qu=wa;class LD{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,oi.observable)([]),this.observableData=(0,oi.makeAutoObservable)(this.observableData),(0,oi.makeObservable)(this,{buyOrdersCache:oi.computed,sellOrdersCache:oi.computed,allOrdersCache:oi.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,hv.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:qu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===pv.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:qu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,hv.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:qu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,oi.runInAction)(()=>{this.orderChanges.push({eventType:qu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===pv.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}If.OrderCacheService=LD;var Sa={},Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.createTransactionFromInstructions=void 0;const KD=Fi,ND=r=>{const e=new KD.Transaction;return e.add(...r),e};Ef.createTransactionFromInstructions=ND;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.TEN_THOUSAND=ua.ONE_MILLION=void 0;ua.ONE_MILLION=1e6;ua.TEN_THOUSAND=1e4;var $n=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.GmClientService=void 0;const es=Fi,Gu=rg,Ri=ys,Rh=Ef,gv=Wr,Oo=uf,yv=ua,DD=tr,UD=Ml;class FD{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return $n(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,Ri.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/yv.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return $n(this,void 0,void 0,function*(){const n=yield(0,Ri.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return $n(this,void 0,void 0,function*(){const i=yield(0,Ri.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return $n(this,void 0,void 0,function*(){const i=yield(0,Ri.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return $n(this,void 0,void 0,function*(){const i=yield(0,Ri.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return $n(this,void 0,void 0,function*(){const s=yield(0,Ri.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return $n(this,void 0,void 0,function*(){const s=yield(0,Ri.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return $n(this,void 0,void 0,function*(){const i=yield(0,Ri.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return $n(this,void 0,void 0,function*(){let h=Gu.createInitializeSellOrderInstruction,d=n,m=i;f===Oo.OrderSide.Buy&&(h=Gu.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,gv.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:A}=O;return{transaction:(0,Rh.createTransactionFromInstructions)(A),signers:M}})}getBnPriceForCurrency(e,t,n,i){return $n(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,DD.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return $n(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Gu.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,Rh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new es.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new es.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return $n(this,void 0,void 0,function*(){const f=new es.PublicKey(t.id),h=new es.PublicKey(t.orderMint),d=new es.PublicKey(t.currencyMint),m=new es.PublicKey(t.owner),I=t.orderType===Oo.OrderSide.Buy?n:new es.PublicKey(t.owner),O=yield(0,gv.getAssociatedTokenAddress)(n,t.orderType===Oo.OrderSide.Buy?h:d),M=yield this.getRegisteredCurrencies(e,s),{saVault:A}=M.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,UD.getStakingAccount)(a,I,u),{instructions:C,signers:Y}=yield(0,Gu.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new es.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,Rh.createTransactionFromInstructions)(C),signers:Y}})}accountItemsToOrders(e,t,n,i){return $n(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?Oo.OrderSide.Buy:Oo.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new Oo.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:M,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return $n(this,void 0,void 0,function*(){const n=[],i=yield(0,Ri.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/yv.TEN_THOUSAND});return n})}}Sa.GmClientService=FD;var Uc={},Hu=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.GmEventService=void 0;const Va=mt,Bh=cf,xh=wa,zD=Sa,WD=tr,Yu=wa;class VD{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Hu(this,void 0,void 0,function*(){this.idl=(0,WD.getGmLogsIDL)(this.programId),this.provider=new Va.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Va.Program(this.idl,this.programId,this.provider,{instruction:new Va.BorshInstructionCoder(this.idl),accounts:new Va.BorshAccountsCoder(this.idl),state:null,events:new Va.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Yu.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Yu.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Yu.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Yu.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Hu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Hu(this,void 0,void 0,function*(){const t=yield new zD.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new Bh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?Bh.OrderSide.Buy:Bh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(xh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(xh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(xh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Hu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Uc.GmEventService=VD;var Po=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Af,"__esModule",{value:!0});Af.GmOrderbookService=void 0;const $D=CD,jD=Rl.exports,qD=If,Mh=wa,mv=Sa,bv=Uc;class Of{constructor(e,t,n=60){this.gmClientService=new mv.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new qD.OrderCacheService,this.gmClientService=new mv.GmClientService,this.gmEventService=new bv.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return Po(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,$D.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},Of.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return Po(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return Po(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return Po(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new bv.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return Po(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,jD.pull)(this.eventCallBacks,e)}loadInitialOrders(){return Po(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case Mh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case Mh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case Mh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}Af.GmOrderbookService=Of;Of.HEALTH_CHECK_RATE=5e3;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Af,r),t(Sa,r),t(Uc,r)})(aS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(rg,r),t(ys,r),t(wa,r),t(tr,r),t(cf,r),t(aS,r)})(ng);var hS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($s,"__esModule",{value:!0});$s.createAccountTransaction=$s.createAccountInstruction=void 0;const Bl=mt,bp=Fi,pS=ng;function GD(r,e,t,n){return hS(this,void 0,void 0,function*(){const i=(0,pS.getGmIDL)(n),s=new Bl.AnchorProvider(r,null,null),a=new Bl.Program(i,n,s);return bp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}$s.createAccountInstruction=GD;function HD(r,e,t,n){return hS(this,void 0,void 0,function*(){const i=(0,pS.getGmIDL)(n),s=new Bl.AnchorProvider(r,null,null),a=new Bl.Program(i,n,s),u=new bp.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(bp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}$s.createAccountTransaction=HD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(sn,r),t(tf,r),t($s,r)})(Wr);var YD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.harvestRewardsInstruction=void 0;const QD=mt,JD=eo,XD=Wr,ZD=er;function e2({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return YD(this,void 0,void 0,function*(){const a=(0,ZD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,XD.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof QD.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,JD.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}Wl.harvestRewardsInstruction=e2;var Pf={},t2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.createInitializeStakingInstruction=void 0;const n2=er;function r2({connection:r,updateAuthorityAccount:e,programId:t}){return t2(this,void 0,void 0,function*(){const n=(0,n2.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}Pf.createInitializeStakingInstruction=r2;var Tf={},Rf={},Nn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.ESCROW_AUTH=bn.STAKING_VARS=bn.STAKING_ESCROW=bn.STAKING_ACCOUNT=bn.REWARD_AUTH=bn.REWARD_ACCOUNT=bn.REGISTERED_STAKE=void 0;bn.REGISTERED_STAKE=Te.Buffer.from("registered-stake");bn.REWARD_ACCOUNT=Te.Buffer.from("reward-account");bn.REWARD_AUTH=Te.Buffer.from("reward-vault-authority");bn.STAKING_ACCOUNT=Te.Buffer.from("staking-account");bn.STAKING_ESCROW=Te.Buffer.from("staking-escrow");bn.STAKING_VARS=Te.Buffer.from("staking-vars");bn.ESCROW_AUTH=Te.Buffer.from("escrow-auth");var Aa=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.getRewardAuth=Nn.getTokenEscrow=Nn.getStakingVarsAccount=Nn.getStakingAccountsForRegisteredStake=Nn.getStakingAccount=Nn.getRegisteredStake=void 0;const vv=mt,Fc=Fi,i2=er,zc=bn;function s2(r,e,t,n){return Aa(this,void 0,void 0,function*(){return Fc.PublicKey.findProgramAddress([zc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Nn.getRegisteredStake=s2;function o2(r,e,t){return Aa(this,void 0,void 0,function*(){return Fc.PublicKey.findProgramAddress([zc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Nn.getStakingAccount=o2;function a2(r,e,t){return Aa(this,void 0,void 0,function*(){const n=new vv.AnchorProvider(r,null,null),i=(0,i2.getStakingIdl)(e),s=new vv.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Nn.getStakingAccountsForRegisteredStake=a2;function c2(r){return Aa(this,void 0,void 0,function*(){return Fc.PublicKey.findProgramAddress([zc.STAKING_VARS],r)})}Nn.getStakingVarsAccount=c2;function u2(r,e,t){return Aa(this,void 0,void 0,function*(){return Fc.PublicKey.findProgramAddress([zc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Nn.getTokenEscrow=u2;function l2(r,e){return Aa(this,void 0,void 0,function*(){return Fc.PublicKey.findProgramAddress([zc.REWARD_AUTH,e.toBuffer()],r)})}Nn.getRewardAuth=l2;var us={},wg=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(us,"__esModule",{value:!0});us.getStakingVarsAccountInfo=us.getStakingAccountInfo=us.getRegisteredStakeAccountInfo=void 0;const Sg=zs,f2=Nn;function d2(r,e,t){return wg(this,void 0,void 0,function*(){return yield(0,Sg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}us.getRegisteredStakeAccountInfo=d2;function h2(r,e,t){return wg(this,void 0,void 0,function*(){return yield(0,Sg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}us.getStakingAccountInfo=h2;function p2(r,e){return wg(this,void 0,void 0,function*(){const t=(0,Sg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,f2.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}us.getStakingVarsAccountInfo=p2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Nn,r),t(us,r),t(bn,r)})(Rf);var g2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.registerStakeInstruction=void 0;const _v=mt,y2=eo,m2=Rf,b2=er;function v2({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return g2(this,void 0,void 0,function*(){const u=(0,b2.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,m2.getRegisteredStake)(a,e,n,i),d=yield(0,y2.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new _v.BN(t),new _v.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}Tf.registerStakeInstruction=v2;var Bf={},_2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.createSettleStakingAccountInstruction=void 0;const w2=er;function S2({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return _2(this,void 0,void 0,function*(){const a=(0,w2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}Bf.createSettleStakingAccountInstruction=S2;var xf={},A2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xf,"__esModule",{value:!0});xf.stakeTokensInstruction=void 0;const k2=eo,I2=er;function E2({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return A2(this,void 0,void 0,function*(){const f=(0,I2.getStakingProgram)({connection:r,programId:u}),h=yield(0,k2.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}xf.stakeTokensInstruction=E2;var Mf={},O2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.unstakeTokensInstruction=void 0;const P2=mt,T2=eo,R2=Wr,B2=Rf,x2=er;function M2({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return O2(this,void 0,void 0,function*(){const s=(0,x2.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,B2.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,R2.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof P2.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,T2.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}Mf.unstakeTokensInstruction=M2;var Cf={},C2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.updateCooldownPeriodInstruction=void 0;const L2=mt,K2=er;function N2({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return C2(this,void 0,void 0,function*(){const s=(0,K2.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new L2.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}Cf.updateCooldownPeriodInstruction=N2;var Lf={},D2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.updateRewardMultiplierInstruction=void 0;const U2=mt,F2=er;function z2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return D2(this,void 0,void 0,function*(){const a=(0,F2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new U2.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}Lf.updateRewardMultiplierInstruction=z2;var Kf={},W2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.withdrawTokensInstruction=void 0;const V2=mt,$2=eo,j2=er,q2=Wr;function G2({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return W2(this,void 0,void 0,function*(){const u=(0,j2.getStakingProgram)({connection:r,programId:a}),f=yield(0,$2.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,q2.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof V2.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}Kf.withdrawTokensInstruction=G2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yv,r),t(Cl,r),t(zl,r),t(Wl,r),t(Pf,r),t(Tf,r),t(Bf,r),t(xf,r),t(Mf,r),t(Cf,r),t(Lf,r),t(Kf,r)})(Hv);var gS={},yS={};Object.defineProperty(yS,"__esModule",{value:!0});(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(kc,r),t(yS,r)})(gS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Hv,r),t(Rf,r),t(gS,r),t(er,r)})(Ml);var mS={};(function(r){var e=z&&z.__awaiter||function(m,I,O,M){function A(R){return R instanceof O?R:new O(function(C){C(R)})}return new(O||(O=Promise))(function(R,C){function Y(de){try{oe(M.next(de))}catch(E){C(E)}}function ae(de){try{oe(M.throw(de))}catch(E){C(E)}}function oe(de){de.done?R(de.value):A(de.value).then(Y,ae)}oe((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=mt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Te.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,M){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,M),C=s(M),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,M),[C]=yield a(I,O);return yield R.account.playerFactionData.fetch(C)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,M).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(mS);var bS={},Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.gumDropIdl=void 0;Nf.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=z&&z.__createBinding||(Object.create?function(A,R,C,Y){Y===void 0&&(Y=C);var ae=Object.getOwnPropertyDescriptor(R,C);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(A,Y,ae)}:function(A,R,C,Y){Y===void 0&&(Y=C),A[Y]=R[C]}),t=z&&z.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=z&&z.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(R,A,C);return t(R,A),R},i=z&&z.__awaiter||function(A,R,C,Y){function ae(oe){return oe instanceof C?oe:new C(function(de){de(oe)})}return new(C||(C=Promise))(function(oe,de){function E(Q){try{V(Y.next(Q))}catch(K){de(K)}}function N(Q){try{V(Y.throw(Q))}catch(K){de(K)}}function V(Q){Q.done?oe(Q.value):ae(Q.value).then(E,N)}V((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=mt,a=Ec,u=n(Ge),f=sn,h=Nf,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,C=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Te.Buffer.from("ClaimStatus"),A.toArrayLike(Te.Buffer,"le",8),R.toBuffer()],C)});r.getClaimStatusKey=m;const I=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,C,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(V=>(0,r.getClaimStatusKey)(V,C,Y)),E=(yield Promise.all(de)).map(V=>V[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const M=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:C,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(C.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),V=oe.get("index"),Q=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!V||!Q||!K)throw new Error("Invalid claim");const j=Q===""?[]:Q.split(",").map(Ar=>{const Wt=Te.Buffer.from(u.decode(Ar));if(Wt.length!==32)throw new Error("Invalid proof hash length");return Wt}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),W=yield R.getAccountInfo(T);if(W===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(W.data),Me=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ee=yield(0,f.getAssociatedTokenAddress)(ye,Me),Gt=yield R.getParsedTokenAccountsByOwner(ye,{mint:Me}),Ht=new s.BN(V),_e=new s.BN(N),[$e,en]=yield(0,r.getClaimStatusKey)(Ht,te,ae),fn=new s.AnchorProvider(R,null,null),Et=new s.Program(h.gumDropIdl,ae,fn),ht=[];return Gt.value.length===0&&ht.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Me,Ee,ye,Y)),ht.push(Et.instruction.claim(en,Ht,_e,Y,j,{accounts:{distributor:te,claimStatus:$e,from:T,to:Ee,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),ht});r.claimTokenInstructions=M})(bS);var be={},Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.baseIdl=void 0;Df.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.scoreLogBaseIdl=void 0;Uf.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var at=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=mt,Sr=Ec,vS=Fi,H2=ts,Y2=Df,Q2=Uf,Fs=Wr;function Mt(r){const e=Y2.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Mt;function Bn(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=Bn;function wn(r,e){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=wn;function Jn(r,e,t,n){return at(this,void 0,void 0,function*(){const i=[Te.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=Jn;function ti(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=ti;function xn(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=xn;function J2(r,e){return at(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Mt(e),i=new ue.Program(n,e,t),[s]=yield Bn(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=J2;function X2(r,e,t,n){return at(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Mt(e),a=new ue.Program(s,e,i),[u]=yield xn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=X2;function Z2(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(Q2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=Z2;function eU(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Mt(e),s=new ue.Program(i,e,n),[a]=yield wn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=eU;function Ff(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=Ff;function zf(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=zf;function tU(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=tU;function nU(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=nU;function rU(r,e,t){return at(this,void 0,void 0,function*(){const n=Mt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield xn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=rU;function iU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const f=Mt(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield Ff(u),[O,M]=yield zf(u),[A,R]=yield Bn(u);return yield d.instruction.processInitialize(R,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:Sr.TOKEN_PROGRAM_ID,systemProgram:vS.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=iU;function sU(r,e,t,n,i,s,a,u,f,h,d,m,I){return at(this,void 0,void 0,function*(){const O=Mt(I),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,M),[R,C]=yield wn(I,t),[Y,ae]=yield Bn(I);return yield A.instruction.processRegisterShip(ae,C,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:vS.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=sU;function oU(r,e,t,n){return at(this,void 0,void 0,function*(){const i=Mt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield wn(n,t),[h,d]=yield Bn(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=oU;function aU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const s=Mt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield wn(i,t),[d,m]=yield Bn(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=aU;function cU(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return at(this,void 0,void 0,function*(){const[u,f]=yield ti(s,n,e),[h,d]=yield Jn(s,n,null,e),[m,I]=yield xn(s,n,e),[O,M]=yield wn(s,n),[A]=yield(0,H2.getPlayerFactionPDA)(e,a),R=Mt(s),C=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,C).instruction.processInitialDeposit(I,M,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=cU;function uU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ti(s,n,e),[f,h]=yield Jn(s,n,null,e),[d,m]=yield xn(s,n,e),[I,O]=yield wn(s,n),M=Mt(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=uU;function lU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Jn(u,i,s,t),[I,O]=yield xn(u,i,t),[M,A]=yield wn(u,i),[R,C]=yield Bn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=lU;function fU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Jn(u,i,s,t),[I,O]=yield xn(u,i,t),[M,A]=yield wn(u,i),[R,C]=yield Bn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=fU;function dU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Jn(u,i,s,t),[I,O]=yield xn(u,i,t),[M,A]=yield wn(u,i),[R,C]=yield Bn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=dU;function hU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield xn(u,i,t),[d,m]=yield wn(u,i),[I,O]=yield Bn(u),M=Mt(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=hU;function pU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield xn(i,n,e),[u,f]=yield wn(i,n),[h,d]=yield Bn(i),m=Mt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=pU;function gU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield xn(i,n,e),[u,f]=yield wn(i,n),[h,d]=yield Ff(i),[m,I]=yield zf(i),O=Mt(i),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,M),R={signers:[],instructions:[]};let C;const Y=yield(0,Fs.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(C=ae.publicKey,R.signers.push(ae)):C=ae;const oe=yield A.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=gU;function yU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Jn(i,n,t,e),[h,d]=yield xn(i,n,e),[m,I]=yield wn(i,n),[O,M]=yield Bn(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Fs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFuel(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=yU;function mU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Jn(i,n,t,e),[h,d]=yield xn(i,n,e),[m,I]=yield wn(i,n),[O,M]=yield Bn(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Fs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFood(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=mU;function bU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Jn(i,n,t,e),[h,d]=yield xn(i,n,e),[m,I]=yield wn(i,n),[O,M]=yield Bn(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Fs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawArms(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:Sr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=bU;function vU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ti(s,t,e),[f,h]=yield Jn(s,t,null,e),[d,m]=yield xn(s,t,e),[I,O]=yield wn(s,t),[M,A]=yield Bn(s),[R,C]=yield Ff(s),[Y,ae]=yield zf(s),oe={signers:[],instructions:[]},de=Mt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let V;const Q=yield(0,Fs.getTokenAccount)(r,e,n),K=Q.tokenAccount;"createInstruction"in Q&&oe.instructions.push(...Q.createInstruction),K instanceof ue.web3.Keypair?(V=K.publicKey,oe.signers.push(K)):V=K;let j;const te=yield(0,Fs.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let W;const X=yield(0,Fs.getTokenAccount)(r,e,i),Me=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Me instanceof ue.web3.Keypair?(W=Me.publicKey,oe.signers.push(Me)):W=Me;const ye=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,C,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:V,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:W,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:Sr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=vU;function _U(r,e,t,n,i,s,a){return at(this,void 0,void 0,function*(){const[u,f]=yield ti(a,t,e),[h,d]=yield Jn(a,t,null,e),[m,I]=yield Jn(a,t,n,e),[O,M]=yield Jn(a,t,i,e),[A,R]=yield Jn(a,t,s,e),[C,Y]=yield Bn(a),[ae,oe]=yield xn(a,t,e),de=Mt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,M,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:Sr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=_U;var _S={};Object.defineProperty(_S,"__esModule",{value:!0});var Jt={},Ss=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},wU=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.sendTokens=Jt.confirmTokenBalance=Jt.createMint=Jt.mintTokens=Jt.createAssociatedTokenAccountInstruction=Jt.createRequestUnitsInstruction=Jt.Numberu32=Jt.createATokenAccount=Jt.getAtaForMint=void 0;const zr=mt,mr=Ec,SU=Wr,wv=cl.exports,Sv=wU(Bv.exports);function wS(r,e){return Ss(this,void 0,void 0,function*(){return zr.web3.PublicKey.findProgramAddress([e.toBuffer(),mr.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],mr.ASSOCIATED_TOKEN_PROGRAM_ID)})}Jt.getAtaForMint=wS;function AU(r,e,t,n){return Ss(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield wS(e,n),s=new zr.web3.Transaction,a=yield AS(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Jt.createATokenAccount=AU;class SS extends Sv.default{toBuffer(){const e=super.toArray().reverse(),t=Te.Buffer.from(e);if(t.length===4)return t;const n=Te.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Sv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Jt.Numberu32=SS;function kU(r){return Ss(this,void 0,void 0,function*(){const e=new SS(1e6),t=Te.Buffer.from([0]),n=e.toBuffer();return new zr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new zr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Te.Buffer.concat([t,n])})})}Jt.createRequestUnitsInstruction=kU;function AS(r,e,t,n){return Ss(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:zr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:mr.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:zr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new zr.web3.TransactionInstruction({keys:i,programId:mr.ASSOCIATED_TOKEN_PROGRAM_ID,data:Te.Buffer.from([])})})}Jt.createAssociatedTokenAccountInstruction=AS;function IU(r,e,t,n,i){return Ss(this,void 0,void 0,function*(){const s=new zr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(mr.Token.createMintToInstruction(mr.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Jt.mintTokens=IU;function EU(r,e,t,n){return Ss(this,void 0,void 0,function*(){const i=zr.web3.Keypair.generate(),s=new zr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(mr.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=zr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:mr.MintLayout.span,programId:mr.TOKEN_PROGRAM_ID});s.add(u);const f=mr.Token.createInitMintInstruction(mr.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Jt.createMint=EU;function OU(r,e,t,n){return Ss(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,wv.strict)(i===null),i!==null){const s=(0,SU.byteArrayToLong)(i.data.slice(64,72));(0,wv.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Jt.confirmTokenBalance=OU;function PU(r,e,t,n){return Ss(this,void 0,void 0,function*(){const i=new zr.web3.Transaction;return i.add(mr.Token.createTransferInstruction(mr.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Jt.sendTokens=PU;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ml,r),t(mS,r),t(bS,r),t(ng,r),t(be,r),t(_S,r),t(Jt,r),t($s,r),t(Wr,r)})(ts);const TU={class:"text-overline"},$a="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",Ch="ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU",Lh="poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",RU=Js({__name:"AccountTemplate",props:["count","function_name","publicKey","mint","program"],setup(r){const e=r,t=Hn("[empty]");async function n(){switch(e.function_name){case"getRegisteredStake":{const[i]=await ts.getRegisteredStake(new xe($a),new xe(Ch),new xe(e.mint),new xe(Lh));t.value=i}break;case"getStakingAccount":{const[i]=await ts.getRegisteredStake(new xe($a),new xe(Ch),new xe(e.mint),new xe(Lh)),[s]=await ts.getStakingAccount(new xe($a),new xe(e.publicKey),i);t.value=s}break;case"getTokenEscrow":{const[i]=await ts.getRegisteredStake(new xe($a),new xe(Ch),new xe(e.mint),new xe(Lh)),[s]=await ts.getStakingAccount(new xe($a),new xe(e.publicKey),i);t.value=await jo(new xe(e.mint),s,!0)}break;case"getAssociatedTokenAddress(mint)":t.value=await jo(new xe(e.mint),new xe(e.publicKey),!0,Iv,yT.ASSOCIATED_PROGRAM_ID);break;default:t.value="No function called";break}}return _p(()=>e.count,async()=>{await n()}),(i,s)=>(Xs(),vc("div",TU,hr(t.value),1))}}),BU={class:"row shadow-3 q-pa-md"},xU={class:"col"},MU={class:"row items-center text-h6"},CU={class:"text-blue-4"},LU={class:"row items-center"},KU={class:"text-weight-bold"},NU=Js({__name:"AccountSolana",setup(r){const e=Hn(0),t=Hn("none"),n=Hn("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),i=Hn([{label:"Solana",header:"root",children:[{label:"Tokens",header:"generic",children:[{label:"getAssociatedTokenAddress() by mint",function_name:"getAssociatedTokenAddress(mint)",header:"generic",body:"story"}]}]},{label:"StarAtlas-Factory",header:"root",children:[{label:"Staking (Atlas/Polis)",icon:"restaurant_menu",header:"generic",children:[{label:"getRegisteredStake()",function_name:"getRegisteredStake",header:"generic",body:"story"},{label:"getStakingAccount()",function_name:"getStakingAccount",body:"story"},{label:"getTokenEscrow()",function_name:"getTokenEscrow",body:"story"}]}]}]);Rv(()=>{var a;t.value=((a=qt().publicKey.value)==null?void 0:a.toString())??"none"});const s=()=>{e.value++};return _p(()=>qt().publicKey.value,()=>{var a;t.value=((a=qt().publicKey.value)==null?void 0:a.toString())??"none"}),(a,u)=>(Xs(),vc(vp,null,[gr("div",BU,[gr("div",xU,[ke(ol,{class:"col",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=f=>t.value=f),label:"Wallet Address"},null,8,["modelValue"]),ke(ol,{class:"col",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f),label:"Token Mint"},null,8,["modelValue"])]),ke(Ki,{color:"primary",icon:"send",class:"q-ml-xl",onClick:s})]),ke(_T,{dark:"",nodes:i.value,"node-key":"label",class:"q-pt-md"},{"header-root":qe(f=>[gr("div",MU,[gr("div",CU,hr(f.node.label),1)])]),"header-generic":qe(f=>[gr("div",LU,[gr("div",KU,hr(f.node.label),1)])]),"body-story":qe(f=>[ke(RU,{count:e.value,function_name:f.node.function_name,"public-key":t.value,mint:n.value},null,8,["count","function_name","public-key","mint"])]),_:1},8,["nodes"])],64))}}),tF=Js({__name:"AccountsPage",setup(r){Hn();const e=Hn("wallet");return(t,n)=>(Xs(),Ev(iT,{class:"col items-center justify-evenly"},{default:qe(()=>[ke(nT,{"no-caps":"","outside-arrows":"","mobile-arrows":"",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i),class:"shadow-2",align:"justify"},{default:qe(()=>[ke(Xm,{name:"wallet",label:"Wallet"}),ke(Xm,{name:"solana",label:"Solana"})]),_:1},8,["modelValue"]),ke(rT,{dark:"",modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=i=>e.value=i),animated:"",class:"q-mx-xs"},{default:qe(()=>[ke(Zm,{name:"wallet"},{default:qe(()=>[ke(RT)]),_:1}),ke(Zm,{name:"solana",class:"q-gutter-md"},{default:qe(()=>[ke(NU)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{tF as default};
