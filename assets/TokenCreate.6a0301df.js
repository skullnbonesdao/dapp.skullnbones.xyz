import{d2 as A,d3 as w,d4 as N,d5 as M,d6 as S,d7 as y,d8 as _,d9 as B,da as x,db as P,dL as L,dM as U,dN as W,au as O,J as f,dO as K,P as C,b1 as j,ai as G,bx as I,as as u,al as p,cm as q,V as Y,bV as $,ar as F,cP as J,dr as Z,cS as d,de as H,dP as X,dQ as ee,cp as te,dR as ne,dt as ae,cU as oe}from"./index.746aaf4d.js";import{a as D,T as b}from"./internal.d0a1054f.js";import{a as V,Q as h}from"./QInput.a9ae8056.js";import{Q as se}from"./QSeparator.34e714e3.js";import{Q as ie}from"./use-key-composition.af6a996d.js";import{h as re}from"./handleTransaction.d35ca172.js";const v=A([w("instruction"),N("amount"),w("decimals")]);function Se(a,e,t,n,o,i=[],r=y){const m=D([{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,i),k=M.Buffer.alloc(v.span);return v.encode({instruction:b.BurnChecked,amount:BigInt(n),decimals:o},k),new S({keys:m,programId:r,data:k})}function _e(a,e=y){if(!a.programId.equals(e))throw new _;if(a.data.length!==v.span)throw new B;const{keys:{account:t,mint:n,owner:o,multiSigners:i},data:r}=le(a);if(r.instruction!==b.BurnChecked)throw new x;if(!t||!n||!o)throw new P;return{programId:e,keys:{account:t,mint:n,owner:o,multiSigners:i},data:r}}function le({programId:a,keys:[e,t,n,...o],data:i}){return{programId:a,keys:{account:e,mint:t,owner:n,multiSigners:o},data:v.decode(i)}}class ue extends L{constructor(e){super(-1,e),this.publicKeyLayout=U()}decode(e,t=0){return e[t]===0?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,n=0){return e===null?(t[n]=0,1):(t[n]=1,this.publicKeyLayout.encode(e,t,n+1),33)}getSpan(e,t=0){return e?e[t]===0?1:1+this.publicKeyLayout.span:1+this.publicKeyLayout.span}}const T=A([w("instruction"),N("amount"),w("decimals")]);function de(a,e,t,n,o,i=[],r=y){const m=D([{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,i),k=M.Buffer.alloc(T.span);return T.encode({instruction:b.MintToChecked,amount:BigInt(n),decimals:o},k),new S({keys:m,programId:r,data:k})}function Be(a,e=y){if(!a.programId.equals(e))throw new _;if(a.data.length!==T.span)throw new B;const{keys:{mint:t,destination:n,authority:o,multiSigners:i},data:r}=ce(a);if(r.instruction!==b.MintToChecked)throw new x;if(!t||!n||!o)throw new P;return{programId:e,keys:{mint:t,destination:n,authority:o,multiSigners:i},data:r}}function ce({programId:a,keys:[e,t,n,...o],data:i}){return{programId:a,keys:{mint:e,destination:t,authority:n,multiSigners:o},data:T.decode(i)}}const g=A([w("instruction"),w("decimals"),U("mintAuthority"),new ue("freezeAuthority")]);function me(a,e,t,n,o=y){const i=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!1}],r=M.Buffer.alloc(g.span);return g.encode({instruction:b.InitializeMint,decimals:e,mintAuthority:t,freezeAuthority:n},r),new S({keys:i,programId:o,data:r})}function xe(a,e=y){if(!a.programId.equals(e))throw new _;if(a.data.length!==g.span)throw new B;const{keys:{mint:t,rent:n},data:o}=pe(a);if(o.instruction!==b.InitializeMint)throw new x;if(!t||!n)throw new P;return{programId:e,keys:{mint:t,rent:n},data:o}}function pe({programId:a,keys:[e,t],data:n}){const{instruction:o,decimals:i,mintAuthority:r,freezeAuthority:m}=g.decode(n);return{programId:a,keys:{mint:e,rent:t},data:{instruction:o,decimals:i,mintAuthority:r,freezeAuthority:m}}}const ye=p("p",{class:"text-h6"},"Create a new Token",-1),ke={class:"col q-gutter-y-sm"},fe=p("div",{class:"text-subtitle1"},"General",-1),he={class:"row q-gutter-x-sm"},we={class:"col q-gutter-y-sm"},be=p("div",{class:"text-subtitle1"},"Metadata",-1),Ie={class:"row"},ve=p("div",{class:"col"},null,-1),Pe=O({__name:"TokenCreate",setup(a){const e=f(K.generate().publicKey.toString()),t=f(0),n=f(1),o=f(""),i=f(""),r=f(""),m=new C("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");async function k(){try{const c=new J,s=new C(e.value),l=parseInt(t.value.toString(),10),R=n.value;if(isNaN(l)||l<0||l>9)throw new Error("Invalid decimals value. It must be between 0 and 9.");let E=await Z(s,d(),!0);const Q=C.findProgramAddressSync([M.Buffer.from("metadata"),m.toBuffer(),s.toBuffer()],m)[0];if(!o.value.length)throw new Error("Invalid token name");if(i.value.length==0)throw new Error("Invalid token symbol");if(!r.value.length)throw new Error("Invalid token uri");const z={name:o.value,symbol:i.value,uri:r.value,sellerFeeBasisPoints:0,creators:null,collection:null,uses:null};c.add(H.createAccount({fromPubkey:d(),newAccountPubkey:s,space:X,lamports:await ee(te().connection),programId:y})),c.add(me(s,l,d(),d(),y)),c.add(ne.createCreateMetadataAccountV3Instruction({metadata:Q,mint:s,mintAuthority:d(),payer:d(),updateAuthority:d()},{createMetadataAccountArgsV3:{collectionDetails:null,data:z,isMutable:!0}})),c.add(ae(d(),E,d(),s)),c.add(de(s,E,d(),R,l)),await re(c,"[Token] Create")}catch(c){oe.create({position:"bottom-right",color:"red",message:`${c}`,timeout:5e3})}}return(c,s)=>(j(),G(ie,{flat:"",bordered:""},{default:I(()=>[u(V,null,{default:I(()=>[ye]),_:1}),u(se),u(V,null,{default:I(()=>[p("div",ke,[fe,p("div",he,[u(h,{class:"col",filled:"",square:"",modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l),type:"text",disable:"",label:"New Token Mint",dense:""},null,8,["modelValue"]),u(q,{color:"primary",icon:"refresh",onClick:s[1]||(s[1]=l=>e.value=Y(K).generate().publicKey.toString())})]),u(h,{filled:"",square:"",modelValue:t.value,"onUpdate:modelValue":s[2]||(s[2]=l=>t.value=l),type:"number",label:"Decimals",dense:""},null,8,["modelValue"]),u(h,{square:"",filled:"",modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=l=>n.value=l),type:"number",label:"Initial amount",dense:""},null,8,["modelValue"])])]),_:1}),u(V,null,{default:I(()=>[p("div",we,[be,u(h,{class:"col",filled:"",square:"",modelValue:o.value,"onUpdate:modelValue":s[4]||(s[4]=l=>o.value=l),type:"text",label:"Token Name",dense:""},null,8,["modelValue"]),u(h,{class:"col",filled:"",square:"",modelValue:i.value,"onUpdate:modelValue":s[5]||(s[5]=l=>i.value=l),type:"text",label:"Token Symbol",dense:""},null,8,["modelValue"]),u(h,{class:"col",filled:"",square:"",modelValue:r.value,"onUpdate:modelValue":s[6]||(s[6]=l=>r.value=l),type:"text",label:"Token URI",dense:""},null,8,["modelValue"]),p("div",Ie,[ve,u(q,{color:"primary",onClick:s[7]||(s[7]=$(l=>k().then(()=>{}),["prevent"]))},{default:I(()=>[F("Create ")]),_:1})])])]),_:1})]),_:1}))}});export{ue as C,Pe as _,Se as a,me as b,de as c,xe as d,Be as e,_e as f,pe as g,ce as h,g as i,v as j,le as k,T as m};
