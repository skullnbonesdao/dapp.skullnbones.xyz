import{Q as A,a as b,b as E}from"./QInput.be944aee.js";import{Q as h,a as X}from"./QTabPanels.2de40093.js";import{Q as q}from"./QPage.14b24f22.js";import{P as d,cJ as D,cn as J,ah as Q,cK as U,cL as Y,cM as j,au as w,J as m,b1 as p,ak as f,as as t,bx as l,ar as g,ck as x,cN as W,cO as H,cP as N,cQ as y,aX as $,a6 as S,b7 as C,bz as P,ai as k,a1 as B,aj as z}from"./index.fd781c8b.js";import{l as T,n as F,o as K,m as M,C as I}from"./ClosePopup.98192b48.js";import{Q as L}from"./QBtnDropdown.711cf46a.js";import{Q as G}from"./QTree.1fe07214.js";import"./touch.3df10340.js";import"./QSlideTransition.c6edb3d9.js";const O="processed",Z="confirmed",ee=new d("6CY4PELBNPvqLymWWpWSEMR84kwmTZERFj6VoRLvL5Vn");let R=null;const V=()=>R,te=()=>{const v=D(),a=J().connection,r=Q(()=>new U(a,v.value,{preflightCommitment:O,commitment:Z})),n=Q(()=>new Y(j,ee,r.value));R={wallet:v,connection:a,provider:r,program:n}},ae={class:"row q-gutter-x-md"},le=w({__name:"CreateWhitelist",setup(v){const a=m("My new whitelist");async function r(){const{program:n}=V();let[o,u]=d.findProgramAddressSync([W().publicKey.value.toBytes(),H(a.value)],n.value.programId);try{const c=await n.value.methods.initialize(a.value).accounts({whitelist:o,systemProgram:N.programId}).rpc();console.log(c),y.create({message:"TX-Signature: "+c,timeout:5e3})}catch{y.create({color:"red",message:"Error sending tx!",timeout:5e3})}}return(n,o)=>(p(),f("div",ae,[t(A,{class:"col",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=u=>a.value=u)},null,8,["modelValue"]),t(x,{color:"primary",onClick:o[1]||(o[1]=u=>r())},{default:l(()=>[g("Create")]),_:1})]))}}),oe={class:"row q-gutter-x-md"},se=w({__name:"AddAddressToWhitelist",setup(v){const{program:a}=V(),r=m("3x5vrFFTspsicxrYHMA8SNVW71RMhVkALemXrJFfeQo1"),n=m(),o=m();$(async()=>{n.value=await a.value.account.whitelist.all()});async function u(){const c=new d(o.value.publicKey),[s,i]=d.findProgramAddressSync([new d(r.value).toBytes(),c.toBytes()],a.value.programId);try{const e=new d(r.value),_=await a.value.methods.addToWhitelist(e).accounts({entry:s,whitelist:c,authority:W().publicKey.value,systemProgram:N.programId}).rpc();console.log(_),y.create({message:"TX-Signature: "+_,timeout:5e3})}catch(e){console.log(e),y.create({color:"red",message:`${e}`,timeout:5e3})}}return(c,s)=>{var i;return p(),f("div",oe,[t(L,{color:"primary",label:((i=o.value)==null?void 0:i.account.name)??"please select a whitelist"},{default:l(()=>[t(T,null,{default:l(()=>[(p(!0),f(S,null,C(n.value,e=>P((p(),k(M,{clickable:"",key:e,onClick:_=>o.value=e},{default:l(()=>[t(F,null,{default:l(()=>[t(K,null,{default:l(()=>[g(B(e==null?void 0:e.account.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[I]])),128))]),_:1})]),_:1},8,["label"]),t(A,{class:"col",outlined:"",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),label:"Address to be added"},null,8,["modelValue"]),t(x,{color:"primary",onClick:s[1]||(s[1]=e=>u())},{default:l(()=>[g("Add")]),_:1})])}}}),re={class:"row q-gutter-x-md"},ne=w({__name:"ViewWhitelist",setup(v){const{program:a}=V(),r=m(),n=m();$(async()=>{r.value=await a.value.account.whitelist.all(),n.value=await a.value.account.whitelistEntry.all()});const o=Q(()=>{var u;return(u=r==null?void 0:r.value)==null?void 0:u.map(c=>{var s,i;return{label:`${c.account.name} | ${c.publicKey.toString()}`,children:(i=(s=n.value)==null?void 0:s.filter(e=>e.account.parent.toString()===c.publicKey.toString()))==null?void 0:i.flatMap(e=>({label:`Member: ${e.account.whitelisted.toString()}  |  Account: ${e.publicKey.toString()} `}))}})});return(u,c)=>(p(),f("div",re,[o.value?(p(),k(G,{key:0,nodes:o.value,"node-key":"label","selected-color":"primary","default-expand-all":""},null,8,["nodes"])):z("",!0)]))}}),ce={class:"row q-gutter-x-md"},ue=w({__name:"RemoveAddressFromWhitelist",setup(v){const{program:a}=V(),r=m("3x5vrFFTspsicxrYHMA8SNVW71RMhVkALemXrJFfeQo1"),n=m(),o=m();$(async()=>{n.value=await a.value.account.whitelist.all()});async function u(){const c=new d(o.value.publicKey),[s,i]=d.findProgramAddressSync([new d(r.value).toBytes(),c.toBytes()],a.value.programId);try{console.log(a.value.methods);const e=new d(r.value),_=await a.value.methods.removeFromWhitelist(e).accounts({entry:s,whitelist:c,authority:W().publicKey.value}).rpc();console.log(_),y.create({message:"TX-Signature: "+_,timeout:5e3})}catch(e){console.log(e),y.create({color:"red",message:`${e}`,timeout:5e3})}}return(c,s)=>{var i;return p(),f("div",ce,[t(L,{color:"primary",label:((i=o.value)==null?void 0:i.account.name)??"please select a whitelist"},{default:l(()=>[t(T,null,{default:l(()=>[(p(!0),f(S,null,C(n.value,e=>P((p(),k(M,{clickable:"",key:e,onClick:_=>o.value=e},{default:l(()=>[t(F,null,{default:l(()=>[t(K,null,{default:l(()=>[g(B(e==null?void 0:e.account.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[I]])),128))]),_:1})]),_:1},8,["label"]),t(A,{class:"col",outlined:"",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),label:"Address to be removed"},null,8,["modelValue"]),t(x,{color:"primary",onClick:s[1]||(s[1]=e=>u())},{default:l(()=>[g("Remove")]),_:1})])}}}),ie={class:"row q-gutter-x-md"},de=w({__name:"DeleteWhitelist",setup(v){const{program:a}=V(),r=m("3x5vrFFTspsicxrYHMA8SNVW71RMhVkALemXrJFfeQo1"),n=m(),o=m();$(async()=>{n.value=await a.value.account.whitelist.all()});async function u(){const c=new d(o.value.publicKey);d.findProgramAddressSync([new d(r.value).toBytes(),c.toBytes()],a.value.programId);try{const s=await a.value.methods.deleteWhitelist(o.value.account.name).accounts({whitelist:c,authority:W().publicKey.value}).rpc();console.log(s),y.create({message:"TX-Signature: "+s,timeout:5e3})}catch(s){console.log(s),y.create({color:"red",message:`${s}`,timeout:5e3})}}return(c,s)=>{var i;return p(),f("div",ie,[t(L,{color:"primary",label:((i=o.value)==null?void 0:i.account.name)??"please select a whitelist"},{default:l(()=>[t(T,null,{default:l(()=>[(p(!0),f(S,null,C(n.value,e=>P((p(),k(M,{clickable:"",key:e,onClick:_=>o.value=e},{default:l(()=>[t(F,null,{default:l(()=>[t(K,null,{default:l(()=>[g(B(e==null?void 0:e.account.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[I]])),128))]),_:1})]),_:1},8,["label"]),t(x,{color:"primary",onClick:s[0]||(s[0]=e=>u())},{default:l(()=>[g("Delete")]),_:1})])}}}),he=w({__name:"WhitelistPage",setup(v){const a=m("create");return te(),(r,n)=>(p(),k(q,{class:"col text-center"},{default:l(()=>[t(E,{"no-caps":"","outside-arrows":"","mobile-arrows":"",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=o=>a.value=o),class:"shadow-2",align:"justify"},{default:l(()=>[t(b,{name:"create",label:"Create Whitelist"}),t(b,{name:"add",label:"Add Address to Whitelist"}),t(b,{name:"remove",label:"Remove address from Whitelist"}),t(b,{name:"delete",label:"Delete Whitelist"}),t(b,{name:"view",label:"View "})]),_:1},8,["modelValue"]),t(X,{dark:"",modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=o=>a.value=o),animated:"",class:"q-mx-xl"},{default:l(()=>[t(h,{name:"create"},{default:l(()=>[t(le)]),_:1}),t(h,{name:"add"},{default:l(()=>[t(se)]),_:1}),t(h,{name:"remove"},{default:l(()=>[t(ue)]),_:1}),t(h,{name:"delete"},{default:l(()=>[t(de)]),_:1}),t(h,{name:"view"},{default:l(()=>[t(ne)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{he as default};
