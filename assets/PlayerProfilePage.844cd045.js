import{P as h,dC as b,dj as S,dc as g,co as u,cS as w,au as x,aX as k,bs as Q,b1 as v,ai as A,bx as r,as as s,cn as C,al as c,a1 as D,V as I,cl as B}from"./index.6d45fbd2.js";import{Q as f}from"./QCardSection.2834c74f.js";import{Q as K}from"./QSeparator.53fe2de9.js";import{Q as N}from"./QCard.5934de04.js";import{Q as j}from"./QPage.4b6f979d.js";const d=new h(b.address),l=S("playerProfileStore",{state:()=>({profile:{}}),getters:{},actions:{async updateStore(){const n=g().pg_playerProfile.value,o=await u().connection.getProgramAccounts(d,{filters:[{memcmp:{offset:30,bytes:w().toString()}}]});console.log(o[0]),this.profile=o[0];const t=[];let e=o[0].account.data.subarray(30),a=0;for(;e.length>=80;){const P=e.subarray(0,80),i=n.coder.types.decode("profileKey",P);console.log("sjdkajl"),console.log(i);const[m]=await u().connection.getProgramAccounts(d,{filters:[{memcmp:{offset:30,bytes:i.key.toString()}}]});let p;m&&([p]=await u().connection.getProgramAccounts(d,{filters:[{memcmp:{offset:9,bytes:m.pubkey.toString()}}]}));const _=p?new TextDecoder().decode(p.account.data.subarray(42)):"",y=await L(i.permissions);console.log(`Permission: ${y} `),t.push({account:i.key.toString(),name:_,idx:a,permissions:y}),e=e.subarray(80),a+=1}console.log(t)}}});function L(n){const o=[];for(const t of n){const e=[];e.push((t&1<<0)===1<<0),e.push((t&1<<1)===1<<1),e.push((t&1<<2)===1<<2),e.push((t&1<<3)===1<<3),e.push((t&1<<4)===1<<4),e.push((t&1<<5)===1<<5),e.push((t&1<<6)===1<<6),e.push((t&1<<7)===1<<7),o.push(e)}return o}const R=c("div",{class:"col text-h6"},"Player Profile Integration",-1),V=c("div",{class:"text-subtitle1"},"Playerprofile",-1),q=c("div",{class:"text-subtitle2 text-accent"}," Get access to your player profile data ",-1),E=c("div",null,null,-1),T=x({__name:"PlayerProfilePage",setup(n){return k(async()=>{await l().updateStore()}),Q(()=>l().profile,async()=>{var t;const o=(t=g())==null?void 0:t.pg_playerProfile.value;console.log(await(o==null?void 0:o.account.profile.fetch(l().profile.pubkey)))}),(o,t)=>(v(),A(j,{class:"bg-black"},{default:r(()=>[s(N,{flat:""},{default:r(()=>[s(f,{class:"row items-center q-gutter-x-md"},{default:r(()=>[s(C,{name:"diversity_3",size:"md"}),R]),_:1}),s(K),s(f,null,{default:r(()=>[V,q]),_:1}),s(f,{class:"q-gutter-y-sm"},{default:r(()=>{var e,a;return[c("div",null,D((a=(e=I(l)().profile)==null?void 0:e.pubkey)==null?void 0:a.toString()),1),E,s(B,{label:"Create Profile"})]}),_:1})]),_:1})]),_:1}))}});export{T as default};
