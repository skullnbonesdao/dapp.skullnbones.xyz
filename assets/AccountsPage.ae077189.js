import{Q as SP}from"./QInput.d65ccb6e.js";import{bW as W,cT as tv,cR as ee,cQ as Ve,dq as yh,cX as nv,cW as rv,P as wt,dr as iv,cS as sv,cV as Xi,cJ as Yh,cZ as AP,cY as ov,d1 as kP,bV as ic,ds as Xe,dj as ie,dk as se,dm as Pt,di as ke,dt as It,du as fr,dv as ui,dw as F,dx as Yo,dy as Jo,dz as Be,dA as li,dB as x,dC as S,dD as H,dE as G,dF as le,dG as Ht,dH as yl,dI as dt,dJ as he,dp as Nt,dK as sc,df as He,cU as $u,dL as av,dM as qr,dN as cv,dO as uv,dP as lv,dg as fv,dh as Jh,dQ as Bm,dR as IP,dS as EP,dT as OP,dU as PP,at as Qh,I as Mu,br as TP,b0 as Xh,ah as Zh,bw as ep,ak as Va,a0 as ju,aW as RP,cI as BP,ar as ka,ci as xP}from"./index.8041a8a0.js";import{Q as MP}from"./QPage.cd69325b.js";import{Q as dv}from"./QCard.15c855af.js";import{s as Us}from"./sha256.69c21d79.js";import{L as xm,r as hv,i as CP}from"./pako.esm.edd8a1b7.js";import{a as qu,_ as Ia}from"./defineProperty.ff620672.js";import"./uid.1059bff9.js";var $a={},ml={},pv={},gv={};Object.defineProperty(gv,"__esModule",{value:!0});var bl={},Yn={},Ts={},tp={exports:{}};const LP=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},yv=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=LP(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};tp.exports=yv;tp.exports.default=yv;var gn=tp.exports,Ke={};(function(r){var e=W&&W.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=xm,n=hv,i=e(tv.exports);var s=xm;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,z){super(j.span,z),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,j){return new O(K,j)}r.option=M;function A(K){return new m(t.u8(),R,C,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:z})=>z,z=>({values:z}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function z({tag:X,data:Re}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Re}return new m(T,z,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((z,X)=>T.addVariant(X,z,z.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:z})=>z,z=>({values:z}),te)}r.array=N;class V extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),z=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,z]}encode(j,te,T){T=T||0;const z=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+z);return z+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function J(K,j,te){const T=t.u32("length"),z=t.struct([T,t.seq(new V(K,j),t.offset(T,-T.span),"values")]);return new m(z,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=J})(Ke);var KP=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function mv(r){return new TextDecoder("utf-8").decode(r)}function bv(r){return new TextEncoder().encode(r)}var NP=Object.freeze({__proto__:null,decode:mv,encode:bv});function vv(r){return Ve.encode(r)}var DP=Object.freeze({__proto__:null,encode:vv,decode:function(r){return Ve.decode(r)}});function _v(r){return ee.Buffer.from(iv(r))}var UP=Object.freeze({__proto__:null,encode:function(r){return yh(r)},decode:_v}),FP=Object.freeze({__proto__:null,hex:KP,utf8:NP,bs58:DP,base64:UP});function np(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function wv(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function vl(r,e={}){r.forEach(t=>{if("accounts"in t)vl(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Fr(r){return r instanceof wt?r:new wt(r)}class WP extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function ko(r){return typeof r=="object"&&r!=null}function Zi(r){return typeof r=="string"?JSON.stringify(r):""+r}function zP(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+Zi(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*Mm(r,e,t,n){var i;ko(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=zP(s,e,t,n);a&&(yield a)}}function*rp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&ko(e.schema)&&ko(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=rp(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):ko(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class rs{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>Mm(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>Mm(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=Ca(t,n);if(i[0])throw i[0]}(e,this)}create(e){return ip(e,this)}is(e){return Sv(e,this)}mask(e){return function(t,n){const i=Ca(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return Ca(e,this,t)}}function ip(r,e){const t=Ca(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Sv(r,e){return!Ca(r,e)[0]}function Ca(r,e,t={}){const n=rp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new WP(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function oc(r,e){return new rs({type:r,schema:null,validator:e})}function zd(r){return new rs({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+Zi(e)})}function Cm(r){const e=Zi(r),t=typeof r;return new rs({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+Zi(n)})}function gu(r){return new rs({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function yu(){return oc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+Zi(r))}function Cu(r){return new rs({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Ss(){return oc("string",r=>typeof r=="string"||"Expected a string, but received: "+Zi(r))}function $i(r){const e=Object.keys(r);return new rs({type:"type",schema:r,*entries(t){if(ko(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>ko(t)||"Expected an object, but received: "+Zi(t)})}function Av(r){const e=r.map(t=>t.type).join(" | ");return new rs({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=rp(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Zi(t),...i]}})}function kv(){return oc("unknown",()=>!0)}async function Iv(r,e,t){if(e.length<=99)return await Lm(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>Lm(r,i,t)))).flat()}}async function Lm(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function Ev(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=ip(await r._rpcRequest("simulateTransaction",h),jP);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new sv("failed to simulate transaction: "+d.error.message,m)}return d.result}function VP(r){return function(e,t,n){return new rs({...e,coercer:(i,s)=>Sv(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(Ov(r),$P,e=>"error"in e?e:{...e,result:ip(e.result,r)})}const $P=Ov(kv());function Ov(r){return Av([$i({jsonrpc:Cm("2.0"),id:Ss(),result:r}),$i({jsonrpc:Cm("2.0"),id:Ss(),error:$i({code:kv(),message:Ss(),data:Cu(oc("any",()=>!0))})})])}const jP=(Km=$i({err:gu(Av([$i({}),Ss()])),logs:gu(zd(Ss())),accounts:Cu(gu(zd(gu($i({executable:oc("boolean",r=>typeof r=="boolean"),owner:Ss(),lamports:yu(),data:zd(Ss()),rentEpoch:Cu(yu())}))))),unitsConsumed:Cu(yu())}),VP($i({context:$i({slot:yu()}),value:Km})));var Km,qP=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=Fr(r),n||(n=Bo());const i=new nv;if(i.add(new rv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:Iv,simulateTransaction:Ev});class Pv{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await Nm(this.connection,s,n)}catch(a){if(a instanceof Tv){const u=await this.connection.getTransaction(vv(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new sv(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await Nm(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await Ev(this.connection,e,t,n,i);if(s.value.err)throw new GP(s.value);return s.value}}class GP extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Nm(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new Tv(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class Tv extends Error{constructor(e){super(e)}}function HP(r){mh=r}function Bo(){return mh===null?Pv.local():mh}let mh=null;const YP=new Set(["anchor-deprecated-state","debug-logs"]),Rv=new Map;function _l(r){return Rv.get(r)!==void 0}var JP=Object.freeze({__proto__:null,set:function(r){if(!YP.has(r))throw new Error("Invalid feature");Rv.set(r,!0)},isSet:_l});class ja extends Error{constructor(e){super(e),this.name="IdlError"}}class Qo{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new wt(u))}return new Qo(s)}}class Io extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=Qo.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new wt(d),new wt(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Io(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),M={code:m,number:parseInt(I)},A={file:h,line:parseInt(d)};return new Io(M,O,i,e,A,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,M={code:d,number:parseInt(m)};return new Io(M,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class qa extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=Qo.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new qa(s,a,e.logs):(a=Bv.get(s),a!==void 0?new qa(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function sp(r,e){_l("debug-logs")&&console.log("Translating error:",r);const t=Io.parse(r.logs);if(t)return t;const n=qa.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=Qo.parse(r.logs),new Proxy(r,i)}return r}const Ee={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Bv=new Map([[Ee.InstructionMissing,"8 byte instruction identifier not provided"],[Ee.InstructionFallbackNotFound,"Fallback functions are not supported"],[Ee.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Ee.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Ee.IdlInstructionStub,"The program was compiled without idl instructions"],[Ee.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Ee.ConstraintMut,"A mut constraint was violated"],[Ee.ConstraintHasOne,"A has_one constraint was violated"],[Ee.ConstraintSigner,"A signer constraint was violated"],[Ee.ConstraintRaw,"A raw constraint was violated"],[Ee.ConstraintOwner,"An owner constraint was violated"],[Ee.ConstraintRentExempt,"A rent exemption constraint was violated"],[Ee.ConstraintSeeds,"A seeds constraint was violated"],[Ee.ConstraintExecutable,"An executable constraint was violated"],[Ee.ConstraintState,"A state constraint was violated"],[Ee.ConstraintAssociated,"An associated constraint was violated"],[Ee.ConstraintAssociatedInit,"An associated init constraint was violated"],[Ee.ConstraintClose,"A close constraint was violated"],[Ee.ConstraintAddress,"An address constraint was violated"],[Ee.ConstraintZero,"Expected zero account discriminant"],[Ee.ConstraintTokenMint,"A token mint constraint was violated"],[Ee.ConstraintTokenOwner,"A token owner constraint was violated"],[Ee.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Ee.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Ee.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Ee.ConstraintSpace,"A space constraint was violated"],[Ee.RequireViolated,"A require expression was violated"],[Ee.RequireEqViolated,"A require_eq expression was violated"],[Ee.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Ee.RequireNeqViolated,"A require_neq expression was violated"],[Ee.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Ee.RequireGtViolated,"A require_gt expression was violated"],[Ee.RequireGteViolated,"A require_gte expression was violated"],[Ee.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Ee.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Ee.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Ee.AccountDidNotDeserialize,"Failed to deserialize the account"],[Ee.AccountDidNotSerialize,"Failed to serialize the account"],[Ee.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Ee.AccountNotMutable,"The given account is not mutable"],[Ee.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Ee.InvalidProgramId,"Program ID was not as expected"],[Ee.InvalidProgramExecutable,"Program account is not executable"],[Ee.AccountNotSigner,"The given account did not sign"],[Ee.AccountNotSystemOwned,"The given account is not owned by the system program"],[Ee.AccountNotInitialized,"The program expected this account to be already initialized"],[Ee.AccountNotProgramData,"The given account is not a program data account"],[Ee.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Ee.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Ee.StateInvalidAddress,"The given state account does not have the correct address"],[Ee.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Ee.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gu=function(){return Gu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Gu.apply(this,arguments)};function QP(r){return r.toLowerCase()}var XP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ZP=/[^A-Z0-9]+/gi;function Dm(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function eT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?XP:i,a=n.stripRegexp,u=a===void 0?ZP:a,f=n.transform,h=f===void 0?QP:f,d=n.delimiter,m=d===void 0?" ":d,I=Dm(Dm(t,s,"$1\0$2"),u,"\0"),O=0,M=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(O,M).split("\0").map(h).join(m)}(r,Gu({delimiter:"."},e))}class cr{static fieldLayout(e,t){const n=e.name!==void 0?gn(e.name):void 0;switch(e.type){case"bool":return Ke.bool(n);case"u8":return Ke.u8(n);case"i8":return Ke.i8(n);case"u16":return Ke.u16(n);case"i16":return Ke.i16(n);case"u32":return Ke.u32(n);case"i32":return Ke.i32(n);case"f32":return Ke.f32(n);case"u64":return Ke.u64(n);case"i64":return Ke.i64(n);case"f64":return Ke.f64(n);case"u128":return Ke.u128(n);case"i128":return Ke.i128(n);case"bytes":return Ke.vecU8(n);case"string":return Ke.str(n);case"publicKey":return Ke.publicKey(n);default:if("vec"in e.type)return Ke.vec(cr.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ke.option(cr.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new ja("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new ja(`Type not found: ${JSON.stringify(e)}`);return cr.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=cr.fieldLayout({name:void 0,type:i},t);return Ke.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>cr.fieldLayout(s,t));return Ke.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=gn(s.name);if(s.fields===void 0)return Ke.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return cr.fieldLayout(f,t)});return Ke.struct(u,a)});return n!==void 0?Ke.rustEnum(i).replicate(n):Ke.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class wl{constructor(e){this.idl=e,this.ixLayout=wl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=Vd("global",n.name);t.set(Ve.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=Vd("state",n.name);t.set(Ve.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=gn(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([Vd(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return cr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=gn(n.name);return[s,Ke.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return cr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=gn(n.name);return[s,Ke.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):Ve.decode(e));let n=Ve.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Ai.format(e,t,this.idl)}}class Ai{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Ai.formatIdlType(u.type),data:Ai.formatIdlData(u,e.data[u.name],n.types)})),a=Ai.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Ai.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Ai.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Ai.formatIdlData(I,m,n)}).join(", "),f=gn(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Ai.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function Vd(r,e){var t;let n=`${r}:${t===void 0&&(t={}),eT(e,Gu({delimiter:"_"},t))}`;return ee.Buffer.from(Us.exports.sha256.digest(n)).slice(0,8)}function op(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return La(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>La(r,t.type)).reduce((t,n)=>t+n,0)}function La(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+La(r,e.option);if("coption"in e)return 4+La(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new ja(`Type not found: ${JSON.stringify(e)}`);return op(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return La(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const tT=8;class Eo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,cr.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=Eo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(Eo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=Eo.accountDiscriminator(e);return{offset:0,bytes:Ve.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=op(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(Us.exports.sha256.digest(`account:${gn(e,{pascalCase:!0})}`)).slice(0,8)}}class xv{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,cr.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[yh(Mv(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(iv(e))}catch{return null}const n=yh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function Mv(r){return ee.Buffer.from(Us.exports.sha256.digest(`event:${r}`)).slice(0,8)}class Cv{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=cr.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await ap(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function ap(r){let e=_l("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(Us.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class Sl{constructor(e){this.instruction=new wl(e),this.accounts=new Eo(e),this.events=new xv(e),e.state&&(this.state=new Cv(e))}}var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class dr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Lv=dr;class As extends dr{isCount(){throw new Error("ExternalLayout is abstract")}}class iT extends As{constructor(e,t,n){if(!(e instanceof dr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Al||this.layout instanceof Kv}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Al extends dr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Kv extends dr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const $d=Math.pow(2,32);class sT extends dr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*$d+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/$d);return{hi32:a,lo32:s-a*$d}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class oT extends dr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof dr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Nv{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Um extends Nv{constructor(e,t){if(!(e instanceof As&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Dv extends dr{constructor(e,t,n){const i=e instanceof Al||e instanceof Kv;if(i)e=new Um(new iT(e));else if(e instanceof As&&e.isCount())e=new Um(e);else if(!(e instanceof Nv))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof dr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new aT(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class aT extends dr{constructor(e,t,n,i){if(!(e instanceof Dv))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof dr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class cT extends dr{constructor(e,t){if(!(e instanceof As&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof As||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof As&&(i=e.length),!Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof As&&this.length.encode(i,t,n),i}}var kn=r=>new Al(1,r),zi=r=>new sT(r),xt=(r,e,t)=>new oT(r,e,t),kl=(r,e)=>new cT(r,e);class uT{constructor(e){}encode(e,t){switch(gn(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return zt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||wt.default).toBuffer()}})}(t);case"initializeAccount":return zt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return zt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return zt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return zt({approve:{amount:n}})}(t);case"revoke":return zt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return zt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return zt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return zt({burn:{amount:n}})}(t);case"closeAccount":return zt({closeAccount:{}});case"freezeAccount":return zt({freezeAccount:{}});case"thawAccount":return zt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return zt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return zt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return zt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return zt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return zt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return zt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return zt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return zt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return zt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Mt=(Fm=kn("instruction"),new Dv(Fm,lT,fT));var Fm,lT,fT;function uo(r){return kl(32,r)}function zt(r){let e=Buffer.alloc(dT),t=Mt.encode(r,e);return e.slice(0,t)}Mt.addVariant(0,xt([kn("decimals"),kl(32,"mintAuthority"),kn("freezeAuthorityOption"),uo("freezeAuthority")]),"initializeMint"),Mt.addVariant(1,xt([]),"initializeAccount"),Mt.addVariant(2,xt([kn("m")]),"initializeMultisig"),Mt.addVariant(3,xt([zi("amount")]),"transfer"),Mt.addVariant(4,xt([zi("amount")]),"approve"),Mt.addVariant(5,xt([]),"revoke"),Mt.addVariant(6,xt([kn("authorityType"),kn("newAuthorityOption"),uo("newAuthority")]),"setAuthority"),Mt.addVariant(7,xt([zi("amount")]),"mintTo"),Mt.addVariant(8,xt([zi("amount")]),"burn"),Mt.addVariant(9,xt([]),"closeAccount"),Mt.addVariant(10,xt([]),"freezeAccount"),Mt.addVariant(11,xt([]),"thawAccount"),Mt.addVariant(12,xt([zi("amount"),kn("decimals")]),"transferChecked"),Mt.addVariant(13,xt([zi("amount"),kn("decimals")]),"approvedChecked"),Mt.addVariant(14,xt([zi("amount"),kn("decimals")]),"mintToChecked"),Mt.addVariant(15,xt([zi("amount"),kn("decimals")]),"burnedChecked"),Mt.addVariant(16,xt([uo("authority")]),"InitializeAccount2"),Mt.addVariant(17,xt([]),"syncNative"),Mt.addVariant(18,xt([uo("authority")]),"initializeAccount3"),Mt.addVariant(19,xt([kn("m")]),"initializeMultisig2"),Mt.addVariant(20,xt([kn("decimals"),uo("mintAuthority"),kn("freezeAuthorityOption"),uo("freezeAuthority")]),"initializeMint2");const dT=Math.max(...Object.values(Mt.registry).map(r=>r.span));class hT{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Lu(r){return new cp(kl(8),e=>up.fromBuffer(e),e=>e.toBuffer(),r)}function mo(r){return new cp(kl(32),e=>new wt(e),e=>e.toBuffer(),r)}function Ka(r,e){return new pT(r,e)}class cp extends Lv{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class pT extends Lv{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Al(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function gT(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function yT(r){return r?1:0}class up extends Xi{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new up([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class mT{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Buffer.alloc(165),i=zm.encode(t,n);return n.slice(0,i)}case"mint":{const n=Buffer.alloc(82),i=Wm.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return zm.decode(n)}(t);case"mint":return function(n){return Wm.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=op(this.idl,e))!==null&&t!==void 0?t:0}}const Wm=xt([Ka(mo(),"mintAuthority"),Lu("supply"),kn("decimals"),function(r){return new cp(kn(),gT,yT,r)}("isInitialized"),Ka(mo(),"freezeAuthority")]),zm=xt([mo("mint"),mo("authority"),Lu("amount"),Ka(mo(),"delegate"),kn("state"),Ka(Lu(),"isNative"),Lu("delegatedAmount"),Ka(mo(),"closeAuthority")]);class bT{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class Uv{constructor(e){this.instruction=new uT(e),this.accounts=new mT(e),this.events=new bT(e),this.state=new hT(e)}}var vT=Object.freeze({__proto__:null,hash:function(r){return Us.exports.sha256(r)}});function Fv(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=Us.exports.sha256.digest(n);return new wt(ee.Buffer.from(i))}function Wv(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,_T(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=Us.exports.sha256(new Uint8Array(t)),i=new Xi(n,16).toArray(void 0,32);if(wt.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new wt(i)}function lp(r,e){let t,n=255;for(;n!=0;){try{t=Wv(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const _T=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function zv(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:Fr(i).toBuffer())});const[n]=await wt.findProgramAddress(t,Fr(r));return n}var wT=Object.freeze({__proto__:null,createWithSeedSync:Fv,createProgramAddressSync:Wv,findProgramAddressSync:lp,associated:zv});const bh=new wt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),vh=new wt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ST=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:bh,ASSOCIATED_PROGRAM_ID:vh,associatedAddress:async function({mint:r,owner:e}){return(await wt.findProgramAddress([e.toBuffer(),bh.toBuffer(),r.toBuffer()],vh))[0]}}),_h={exports:{}};(function(r,e){var t=typeof self<"u"?self:nT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function M(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var z={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(z[Symbol.iterator]=function(){return z}),z}function C(T){this.map={},T instanceof C?T.forEach(function(z,X){this.append(X,z)},this):Array.isArray(T)?T.forEach(function(z){this.append(z[0],z[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(z){this.append(z,T[z])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(z,X){T.onload=function(){z(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var z=new FileReader,X=ae(z);return z.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var z=new Uint8Array(T.byteLength);return z.set(new Uint8Array(T)),z.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var z;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(z=T)&&DataView.prototype.isPrototypeOf(z)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(z){var X=new FileReader,Re=ae(X);return X.readAsText(z),Re}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(z){for(var X=new Uint8Array(z),Re=new Array(X.length),ye=0;ye<X.length;ye++)Re[ye]=String.fromCharCode(X[ye]);return Re.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(T,z){T=M(T),z=A(z);var X=this.map[T];this.map[T]=X?X+", "+z:z},C.prototype.delete=function(T){delete this.map[M(T)]},C.prototype.get=function(T){return T=M(T),this.has(T)?this.map[T]:null},C.prototype.has=function(T){return this.map.hasOwnProperty(M(T))},C.prototype.set=function(T,z){this.map[M(T)]=A(z)},C.prototype.forEach=function(T,z){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(z,this.map[X],X,this)},C.prototype.keys=function(){var T=[];return this.forEach(function(z,X){T.push(X)}),R(T)},C.prototype.values=function(){var T=[];return this.forEach(function(z){T.push(z)}),R(T)},C.prototype.entries=function(){var T=[];return this.forEach(function(z,X){T.push([X,z])}),R(T)},f&&(C.prototype[Symbol.iterator]=C.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(T,z){var X,Re,ye=(z=z||{}).body;if(T instanceof V){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,z.headers||(this.headers=new C(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=z.credentials||this.credentials||"same-origin",!z.headers&&this.headers||(this.headers=new C(z.headers)),this.method=(X=z.method||this.method||"GET",Re=X.toUpperCase(),N.indexOf(Re)>-1?Re:X),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function J(T){var z=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Re=X.split("="),ye=Re.shift().replace(/\+/g," "),Ie=Re.join("=").replace(/\+/g," ");z.append(decodeURIComponent(ye),decodeURIComponent(Ie))}}),z}function K(T,z){z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new C(z.headers),this.url=z.url||"",this._initBody(T)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},E.call(V.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,z){if(j.indexOf(z)===-1)throw new RangeError("Invalid status code");return new K(null,{status:z,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(z,X){this.message=z,this.name=X;var Re=Error(z);this.stack=Re.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,z){return new Promise(function(X,Re){var ye=new V(T,z);if(ye.signal&&ye.signal.aborted)return Re(new a.DOMException("Aborted","AbortError"));var Ie=new XMLHttpRequest;function Vt(){Ie.abort()}Ie.onload=function(){var $t,_e,We={status:Ie.status,statusText:Ie.statusText,headers:($t=Ie.getAllResponseHeaders()||"",_e=new C,$t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(an){var At=an.split(":"),ut=At.shift().trim();if(ut){var gr=At.join(":").trim();_e.append(ut,gr)}}),_e)};We.url="responseURL"in Ie?Ie.responseURL:We.headers.get("X-Request-URL");var Jt="response"in Ie?Ie.response:Ie.responseText;X(new K(Jt,We))},Ie.onerror=function(){Re(new TypeError("Network request failed"))},Ie.ontimeout=function(){Re(new TypeError("Network request failed"))},Ie.onabort=function(){Re(new a.DOMException("Aborted","AbortError"))},Ie.open(ye.method,ye.url,!0),ye.credentials==="include"?Ie.withCredentials=!0:ye.credentials==="omit"&&(Ie.withCredentials=!1),"responseType"in Ie&&h&&(Ie.responseType="blob"),ye.headers.forEach(function($t,_e){Ie.setRequestHeader(_e,$t)}),ye.signal&&(ye.signal.addEventListener("abort",Vt),Ie.onreadystatechange=function(){Ie.readyState===4&&ye.signal.removeEventListener("abort",Vt)}),Ie.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=C,s.Request=V,s.Response=K),a.Headers=C,a.Request=V,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(_h,_h.exports);var AT=rT(_h.exports);async function Vm(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=wh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=wh(i.data);return s}const kT=Ke.rustEnum([Ke.struct([],"uninitialized"),Ke.struct([Ke.option(Ke.publicKey(),"authorityAddress")],"buffer"),Ke.struct([Ke.publicKey("programdataAddress")],"program"),Ke.struct([Ke.u64("slot"),Ke.option(Ke.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ke.u32());function wh(r){return kT.decode(r)}var IT=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([Vm(r,e),AT(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:Vm,decodeUpgradeableLoaderState:wh}),ET=Object.freeze({__proto__:null,sha256:vT,rpc:qP,publicKey:wT,bytes:FP,token:ST,features:JP,registry:IT});const OT=Ke.struct([Ke.publicKey("authority"),Ke.vecU8("data")]);function ac(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class xo{static build(e,t,n){if(e.name==="_inner")throw new ja("the _inner name is reserved");const i=(...s)=>{const[a,u]=ac(e,[...s]);vl(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),_l("debug-logs")&&console.log("Outgoing account metas:",f),new rv({keys:f,programId:n,data:t(e.name,wv(e,...a))})};return i.accounts=s=>xo.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return xo.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=Fr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class Vv{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=ac(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw sp(h,n)}}}}class $v{static build(e,t){return(...n)=>{var i,s,a;const[,u]=ac(e,[...n]),f=new nv;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class jv{constructor(e,t,n=Bo(),i=new Sl(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=jd(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=xo.build(I,(C,Y)=>i.instruction.encodeState(C,Y),t);O.accounts=C=>function(ae,oe,de,E){if(de.name==="new"){const[N]=lp([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:jd(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:Yh.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return vl(de.accounts,E),[{pubkey:jd(ae),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(xo.accountsArray(C,I.accounts,I.name));const M=$v.build(I,O),A=Vv.build(I,M,np(e),n),R=gn(I.name);h[R]=O,d[R]=M,m[R]=A}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await ap(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new ov,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function jd(r){let[e]=lp([],r);return Fv(e,"unversioned",r)}class qv{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??Bo(),this._coder=s??new Sl(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await Iv(this._provider.connection,e.map(n=>Fr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Ea.get(e.toString());if(n)return n.ee;const i=new ov;e=Fr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Ea.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Ea.get(e.toString());t?Ea&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Ea.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return Yh.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await zv(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Fr(e),t)}}const Ea=new Map,PT=13,TT=14;class Gv{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new fp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(qu.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class fp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new BT(e),i=new RT;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(PT):e.slice(TT);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class RT{constructor(){this.stack=[]}program(){return qu.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){qu.exports.ok(this.stack.length>0),this.stack.pop()}}class BT{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const xT=new wt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Hv(){return new Uv(Yv)}const Yv={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class Ga{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new MT(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=gn(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(Ga.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=Ga.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await wt.findProgramAddress(t,n);this._accounts[gn(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new wt(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=gn(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[gn(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[gn(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let n=Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Buffer.from(bv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}Ga.CONST_ACCOUNTS={systemProgram:Yh.programId,tokenProgram:bh,associatedTokenProgram:vh,rent:AP};class MT{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=Hv().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[gn(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class Jv{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new CT(d,i,s,a,u,f,e,t,n,h)}}class CT{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new Ga(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Ha{constructor(e,t,n,i){t=Fr(t),n||(n=Bo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new Sl(e),this._events=new Gv(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,M,A,R){const C={},Y={},ae={},oe={},de={},E={},N=np(O),V=O.accounts?class{static build(K,j,te,T){var z;const X={};return(z=K.accounts)===null||z===void 0||z.forEach(Re=>{const ye=gn(Re.name);X[ye]=new qv(K,Re,te,T,j)}),X}}.build(O,M,A,R):{},J=class{static build(K,j,te,T){if(K.state!==void 0)return new jv(K,te,T,j)}}.build(O,M,A,R);return O.instructions.forEach(K=>{const j=xo.build(K,(Ie,Vt)=>M.instruction.encode(Ie,Vt),A),te=$v.build(K,j),T=Vv.build(K,te,N,R),z=class{static build(Ie,Vt,$t,_e,We,Jt,an){return async(...At)=>{var ut;const gr=Vt(...At),[,Ut]=ac(Ie,[...At]);let bn;if(_e.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{bn=await _e.simulate(gr,Ut.signers,(ut=Ut.options)===null||ut===void 0?void 0:ut.commitment)}catch(Qn){throw sp(Qn,$t)}if(bn===void 0)throw new Error("Unable to simulate transaction");const Hr=bn.logs;if(!Hr)throw new Error("Simulated logs not found");const yr=[];return an.events&&new fp(Jt,We).parseLogs(Hr,Qn=>{yr.push(Qn)}),{events:yr,raw:Hr}}}}.build(K,te,N,R,M,A,O),X=class{static build(Ie,Vt,$t,_e){const We=Vt.accounts.find(an=>an.isMut),Jt=!!Vt.returns;if(!We&&Jt)return async(...an)=>{var At,ut;let gr=await $t(...an);const Ut=`Program return: ${Ie} `;let bn=gr.raw.find(Qn=>Qn.startsWith(Ut));if(!bn)throw new Error("View expected return log");let Hr=_v(bn.slice(Ut.length)),yr=Vt.returns;if(!yr)throw new Error("View expected return type");return cr.fieldLayout({type:yr},Array.from([...(At=_e.accounts)!==null&&At!==void 0?At:[],...(ut=_e.types)!==null&&ut!==void 0?ut:[]])).decode(Hr)}}}.build(A,K,z,O),Re=Jv.build(R,A,K,j,te,T,z,X,V),ye=gn(K.name);Y[ye]=j,ae[ye]=te,C[ye]=T,oe[ye]=z,de[ye]=Re,X&&(E[ye]=X)}),[C,Y,ae,V,oe,de,J,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=Fr(e),i=await Ha.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new Ha(i,n,t)}static async fetchIdl(e,t){t=t??Bo();const n=Fr(e),i=await async function(h){const d=(await wt.findProgramAddress([],h))[0];return await wt.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),OT.decode(u));var u;const f=CP(a.data);return JSON.parse(mv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class LT{static token(e){return function(t){return new Ha(Yv,xT,t,Hv())}(e)}}var KT=Object.freeze(Object.defineProperty({__proto__:null,web3:kP,ACCOUNT_DISCRIMINATOR_SIZE:tT,AccountClient:qv,AnchorError:Io,AnchorProvider:Pv,BorshAccountsCoder:Eo,BorshCoder:Sl,BorshEventCoder:xv,BorshInstructionCoder:wl,BorshStateCoder:Cv,EventManager:Gv,EventParser:fp,IdlError:ja,LangErrorCode:Ee,LangErrorMessage:Bv,MethodsBuilderFactory:Jv,Program:Ha,ProgramError:qa,ProgramErrorStack:Qo,Spl:LT,SplTokenCoder:Uv,StateClient:jv,eventDiscriminator:Mv,getProvider:Bo,parseIdlErrors:np,setProvider:HP,splitArgsAndCtx:ac,stateDiscriminator:ap,toInstruction:wv,translateAddress:Fr,translateError:sp,utils:ET,validateAccounts:vl,BN:Xi},Symbol.toStringTag,{value:"Module"})),ht=ic(KT),cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.stakingIdl=void 0;cc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.getStakingProgram=Ts.getStakingIdl=void 0;const $m=ht,NT=cc;function Qv(r){const e=NT.stakingIdl;return e.metadata.address=r.toBase58(),e}Ts.getStakingIdl=Qv;function DT({connection:r,programId:e}){const t=Qv(e),n=new $m.AnchorProvider(r,null,null);return new $m.Program(t,e,n)}Ts.getStakingProgram=DT;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ts,r)})(Yn);var UT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(bl,"__esModule",{value:!0});bl.cancelUnstakeInstruction=void 0;const FT=Yn;function WT({connection:r,user:e,registeredStake:t,programId:n}){return UT(this,void 0,void 0,function*(){const i=(0,FT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}bl.cancelUnstakeInstruction=WT;var Il={},zT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Il,"__esModule",{value:!0});Il.createStakingAccountInstruction=void 0;const VT=Yn;function $T({connection:r,user:e,registeredStake:t,programId:n}){return zT(this,void 0,void 0,function*(){const i=(0,VT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Il.createStakingAccountInstruction=$T;var El={},Fs={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=hv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(Fs);var Cr={},en={};const jT=qr.utils.randomPrivateKey,jm=()=>{const r=qr.utils.randomPrivateKey(),e=Hu(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Hu=qr.getPublicKey;function qm(r){try{return qr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const dp=(r,e)=>qr.sign(r,e.slice(0,32)),qT=qr.verify,Fe=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class hp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(cv(Na,this))}static decode(e){return uv(Na,this,e)}static decodeUnchecked(e){return lv(Na,this,e)}}class GT extends hp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Na=new Map;var Xv;let Zv;const e_=32,lr=32;function HT(r){return r._bn!==void 0}let Gm=1;Zv=Symbol.toStringTag;class pe extends hp{constructor(e){if(super({}),this._bn=void 0,HT(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ve.decode(e);if(t.length!=lr)throw new Error("Invalid public key input");this._bn=new Xi(t)}else this._bn=new Xi(e);if(this._bn.byteLength()>lr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(Gm);return Gm+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ve.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===lr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Zv](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=$u(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>e_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Fe(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=$u(n);if(qm(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return qm(t.toBytes())}}Xv=pe;pe.default=new Xv("11111111111111111111111111111111");Na.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class YT{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Fe(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Fe(jT()),this._publicKey=Fe(Hu(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const JT=new pe("BPFLoader1111111111111111111111111111111111"),Gi=1280-40-8,Ol=127,Mo=64;class pp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(pp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class gp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class bo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(bo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ya{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const je=(r="publicKey")=>He(32,r),QT=(r="signature")=>He(64,r),ks=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),He(fr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},XT=(r="authorized")=>ie([je("staker"),je("withdrawer")],r),ZT=(r="lockup")=>ie([Pt("unixTimestamp"),Pt("epoch"),je("custodian")],r),eR=(r="voteInit")=>ie([je("nodePubkey"),je("authorizedVoter"),je("authorizedWithdrawer"),ke("commission")],r),tR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),je("currentAuthorityDerivedKeyOwnerPubkey"),ks("currentAuthorityDerivedKeySeed"),je("newAuthorized")],r);function t_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return t_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function zn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function ar(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Ze(r,e){if(!r)throw new Error(e||"Assertion failed")}class Pl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Pl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ze(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{Ze(t.length>0,"Expected at least one writable signer key");const[f]=t[0];Ze(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(Ze(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class jr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ve.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ya(this.staticAccountKeys)}static compile(e){const t=Pl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Ya(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ve.encode(u.data)}));return new jr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];ar(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(Ve.decode(m.data));let A=[];ar(A,I.length);let R=[];return ar(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];ar(i,n.length);let s=ee.Buffer.alloc(Gi);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),He(m.keyIndicesCount.length,"keyIndicesCount"),It(ke("keyIndex"),m.keyIndices.length,"keyIndices"),He(m.dataLength.length,"dataLength"),It(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([He(1,"numRequiredSignatures"),He(1,"numReadonlySignedAccounts"),He(1,"numReadonlyUnsignedAccounts"),He(t.length,"keyCount"),It(je("key"),e,"keys"),je("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Fe(m.toBytes())),recentBlockhash:Ve.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Ol))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=zn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,lr);t=t.slice(lr),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,lr);t=t.slice(lr);const h=zn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=zn(t),A=t.slice(0,M);t=t.slice(M);const R=zn(t),C=t.slice(0,R),Y=Ve.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ve.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new jr(m)}}class Rs{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ya(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Pl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:M}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new Ya(u,i).compileInstructions(e.instructions);return new Rs({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();ar(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();ar(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();ar(s,this.addressTableLookups.length);const a=ie([ke("prefix"),ie([ke("numRequiredSignatures"),ke("numReadonlySignedAccounts"),ke("numReadonlyUnsignedAccounts")],"header"),He(e.length,"staticAccountKeysLength"),It(je(),this.staticAccountKeys.length,"staticAccountKeys"),je("recentBlockhash"),He(n.length,"instructionsLength"),He(t.length,"serializedInstructions"),He(s.length,"addressTableLookupsLength"),He(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(Gi),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:Ve.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(Gi);for(const n of this.compiledInstructions){const i=Array();ar(i,n.accountKeyIndexes.length);const s=Array();ar(s,n.data.length),e+=ie([ke("programIdIndex"),He(i.length,"encodedAccountKeyIndexesLength"),It(ke(),n.accountKeyIndexes.length,"accountKeyIndexes"),He(s.length,"encodedDataLength"),He(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Gi);for(const n of this.addressTableLookups){const i=Array();ar(i,n.writableIndexes.length);const s=Array();ar(s,n.readonlyIndexes.length),e+=ie([je("accountKey"),He(i.length,"encodedWritableIndexesLength"),It(ke(),n.writableIndexes.length,"writableIndexes"),He(s.length,"encodedReadonlyIndexesLength"),It(ke(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Ol;Ze(n!==i,"Expected versioned message but received legacy message");const s=i;Ze(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=zn(t);for(let M=0;M<f;M++)u.push(new pe(t.splice(0,lr)));const h=Ve.encode(t.splice(0,lr)),d=zn(t),m=[];for(let M=0;M<d;M++){const A=t.shift(),R=zn(t),C=t.splice(0,R),Y=zn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:C,data:ae})}const I=zn(t),O=[];for(let M=0;M<I;M++){const A=new pe(t.splice(0,lr)),R=zn(t),C=t.splice(0,R),Y=zn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:C,readonlyIndexes:ae})}return new Rs({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const yp={deserializeMessageVersion(r){const e=r[0],t=e&Ol;return t===e?"legacy":t},deserialize:r=>{const e=yp.deserializeMessageVersion(r);if(e==="legacy")return jr.from(r);if(e===0)return Rs.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Si=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const nR=ee.Buffer.alloc(Mo).fill(0);class yt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ot{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new yt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new pe(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ve.encode(R)}});return M.forEach(A=>{Ze(A.programIdIndex>=0),A.accounts.forEach(R=>Ze(R>=0))}),new jr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=dp(n,i.secretKey);this._addSignature(i.publicKey,Fe(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ze(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!qT(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];ar(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return Ze(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(Ze(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),Ze(s.length<=Gi,`Transaction too large: ${s.length} > ${Gi}`),s}get keys(){return Ze(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ze(this.instructions.length===1),this.instructions[0].programId}get data(){return Ze(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=zn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Mo);t=t.slice(Mo),i.push(Ve.encode(ee.Buffer.from(a)))}return ot.populate(jr.from(t),i)}static populate(e,t=[]){const n=new ot;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ve.encode(nR)?null:Ve.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new yt({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ve.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class mp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;Ze(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;Ze(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const M of i){const A=[];for(const C of M.accountKeyIndexes){const Y=m.get(C);if(Y===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ae=C<a;let oe;ae?oe=C<h:C<m.staticAccountKeys.length?oe=C-a<d:oe=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:C<n.numRequiredSignatures,isWritable:oe})}const R=m.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);O.push(new yt({programId:R,data:Fe(M.data),keys:A}))}return new mp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return jr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Rs.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class bp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Ze(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Mo));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();ar(t,this.signatures.length);const n=ie([He(t.length,"encodedSignaturesLength"),It(QT(),this.signatures.length,"signatures"),He(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=zn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Mo)));const s=yp.deserialize(new Uint8Array(t));return new bp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));Ze(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=dp(t,i.secretKey)}}addSignature(e,t){Ze(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Ze(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const rR=160,iR=64,sR=rR/iR,n_=1e3/sR,ei=new pe("SysvarC1ock11111111111111111111111111111111"),oR=new pe("SysvarEpochSchedu1e111111111111111111111111"),aR=new pe("Sysvar1nstructions1111111111111111111111111"),Ku=new pe("SysvarRecentB1ockHashes11111111111111111111"),Co=new pe("SysvarRent111111111111111111111111111111111"),cR=new pe("SysvarRewards111111111111111111111111111111"),uR=new pe("SysvarS1otHashes111111111111111111111111111"),lR=new pe("SysvarS1otHistory11111111111111111111111111"),Nu=new pe("SysvarStakeHistory1111111111111111111111111");async function Sh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function ws(r){return new Promise(e=>setTimeout(e,r))}function Ye(r,e){const t=r.layout.span>=0?r.layout.span:t_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function st(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const r_=Xe("lamportsPerSignature"),i_=ie([se("version"),se("state"),je("authorizedPubkey"),je("nonce"),ie([r_],"feeCalculator")]),Ah=i_.span;class Tl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=i_.decode(Fe(e),0);return new Tl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const fR=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},dR=r=>e=>{const t=He(r,e),{encode:n,decode:i}=fR(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return fv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Jh(a,r);return n(h,u,f)},s},Lo=dR(8);class hR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(_t))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=st(_t.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=st(_t.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=st(_t.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=st(_t.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=st(_t.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=st(_t.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=st(_t.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=st(_t.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=st(_t.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(_t.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=st(_t.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=st(_t.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(yn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const _t=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Pt("lamports"),Pt("space"),je("programId")])},Assign:{index:1,layout:ie([se("instruction"),je("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Lo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),je("base"),ks("seed"),Pt("lamports"),Pt("space"),je("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Pt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),je("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),je("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Pt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),je("base"),ks("seed"),Pt("space"),je("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),je("base"),ks("seed"),je("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Lo("lamports"),ks("seed"),je("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class yn{constructor(){}static createAccount(e){const t=_t.Create,n=Ye(t,{lamports:e.lamports,space:e.space,programId:Fe(e.programId.toBuffer())});return new yt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=_t.TransferWithSeed;t=Ye(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Fe(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=_t.Transfer;t=Ye(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=_t.AssignWithSeed;t=Ye(i,{base:Fe(e.basePubkey.toBuffer()),seed:e.seed,programId:Fe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=_t.Assign;t=Ye(i,{programId:Fe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=_t.CreateWithSeed,n=Ye(t,{base:Fe(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Fe(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new yt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new ot;"basePubkey"in e&&"seed"in e?t.add(yn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Ah,programId:this.programId})):t.add(yn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Ah,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=_t.InitializeNonceAccount,n=Ye(t,{authorized:Fe(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceAdvance(e){const t=_t.AdvanceNonceAccount,n=Ye(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceWithdraw(e){const t=_t.WithdrawNonceAccount,n=Ye(t,{lamports:e.lamports});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:Co,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=_t.AuthorizeNonceAccount,n=Ye(t,{authorized:Fe(e.newAuthorizedPubkey.toBuffer())});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=_t.AllocateWithSeed;t=Ye(i,{base:Fe(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Fe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=_t.Allocate;t=Ye(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}}yn.programId=new pe("11111111111111111111111111111111");const pR=Gi-300;class Bs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Bs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new ot,O.add(yn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new ot,O.add(yn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new ot,O.add(yn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new ot().add(yn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Sh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),It(ke("byte"),fr(se(),-8),"bytes")]),u=Bs.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new ot().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(Sh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await ws(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new ot().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Co,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:M}),{context:R,value:C}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(n_/2)))}}return!0}}Bs.chunkSize=pR;const gR=new pe("BPFLoader2111111111111111111111111111111111");class yR{static getMinNumSignatures(e){return Bs.getMinNumSignatures(e)}static load(e,t,n,i,s){return Bs.load(e,t,n,s,i)}}function mR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bR=Object.prototype.toString,vR=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Ra(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Ra(r.toJSON(),e);if(f=bR.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Ra(r[t],!0)+",";return n>-1&&(i+=Ra(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=vR(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=Ra(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var _R=function(r){var e=Ra(r,!1);if(e!==void 0)return""+e},Hm=mR(_R);const Oa=32;function qd(r){let e=0;for(;r>1;)r/=2,e++;return e}function wR(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class s_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=qd(wR(e+Oa+1))-qd(Oa)-1,n=this.getSlotsInEpoch(t),i=e-(n-Oa);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Oa:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+qd(Oa)):this.slotsPerEpoch}}class kh extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const SR={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Se extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var AR=globalThis.fetch;class kR extends IP{constructor(e,t,n){const i=s=>{const a=PP(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function IR(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Ym=56;class Ih{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=IR(ER,e),n=e.length-Ym;Ze(n>=0,"lookup table is invalid"),Ze(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([It(je(),i,"addresses")]).decode(e.slice(Ym));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const ER={index:1,layout:ie([se("typeIndex"),Lo("deactivationSlot"),Xe("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),It(je(),fr(ke(),-1),"authority")])},OR=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function PR(r){const e=r.match(OR);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Yt=ui(Yo(pe),F(),r=>new pe(r)),o_=Jo([F(),Be("base64")]),vp=ui(Yo(ee.Buffer),o_,r=>ee.Buffer.from(r[0],"base64")),a_=30*1e3;function TR(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Ot(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function c_(r){return dt([x({jsonrpc:Be("2.0"),id:F(),result:r}),x({jsonrpc:Be("2.0"),id:F(),error:x({code:li(),message:F(),data:le(av())})})])}const RR=c_(li());function Ue(r){return ui(c_(r),RR,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Kt(r){return Ue(x({context:x({slot:S()}),value:r}))}function Rl(r){return x({context:x({slot:S()}),value:r})}function Gd(r,e){return r===0?new Rs({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ve.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new jr(e)}const BR=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),xR=Ue(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),MR=H(x({slot:S(),prioritizationFee:S()})),CR=x({total:S(),validator:S(),foundation:S(),epoch:S()}),LR=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),KR=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Ht(),firstNormalEpoch:S(),firstNormalSlot:S()}),NR=yl(F(),H(S())),Ws=G(dt([x({}),F()])),DR=x({err:Ws}),UR=Be("receivedSignature"),FR=x({"solana-core":F(),"feature-set":le(S())}),Jm=Kt(x({err:G(dt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Ht(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:Jo([F(),Be("base64")])})))})),WR=Kt(x({byIdentity:yl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function zR(r,e,t,n,i,s){const a=t||AR;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,M)=>{try{n(d,m,(A,R)=>O([A,R]))}catch(A){M(A)}});return await a(...I)}),new EP(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},VB)};try{let O=5,M,A=500;for(;f?M=await f(r,I):M=await a(r,I),!(M.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await ws(A),A*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function VR(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function $R(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const jR=Ue(BR),qR=Ue(CR),GR=Ue(MR),HR=Ue(LR),YR=Ue(KR),JR=Ue(NR),QR=Ue(S()),XR=Kt(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(Yt)})),Eh=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}),ZR=Kt(H(x({address:Yt,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}))),eB=Kt(H(x({pubkey:Yt,account:x({executable:Ht(),owner:Yt,lamports:S(),data:vp,rentEpoch:S()})}))),Oh=x({program:F(),parsed:li(),space:S()}),tB=Kt(H(x({pubkey:Yt,account:x({executable:Ht(),owner:Yt,lamports:S(),data:Oh,rentEpoch:S()})}))),nB=Kt(H(x({lamports:S(),address:Yt}))),Ja=x({executable:Ht(),owner:Yt,lamports:S(),data:vp,rentEpoch:S()}),rB=x({pubkey:Yt,account:Ja}),iB=ui(dt([Yo(ee.Buffer),Oh]),dt([o_,Oh]),r=>Array.isArray(r)?he(r,vp):r),Ph=x({executable:Ht(),owner:Yt,lamports:S(),data:iB,rentEpoch:S()}),sB=x({pubkey:Yt,account:Ph}),oB=x({state:dt([Be("active"),Be("inactive"),Be("activating"),Be("deactivating")]),active:S(),inactive:S()}),aB=Ue(H(x({signature:F(),slot:S(),err:Ws,memo:G(F()),blockTime:le(G(S()))}))),cB=Ue(H(x({signature:F(),slot:S(),err:Ws,memo:G(F()),blockTime:le(G(S()))}))),uB=x({subscription:S(),result:Rl(Ja)}),lB=x({pubkey:Yt,account:Ja}),fB=x({subscription:S(),result:Rl(lB)}),dB=x({parent:S(),slot:S(),root:S()}),hB=x({subscription:S(),result:dB}),pB=dt([x({type:dt([Be("firstShredReceived"),Be("completed"),Be("optimisticConfirmation"),Be("root")]),slot:S(),timestamp:S()}),x({type:Be("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Be("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Be("dead"),slot:S(),timestamp:S(),err:F()})]),gB=x({subscription:S(),result:pB}),yB=x({subscription:S(),result:Rl(dt([DR,UR]))}),mB=x({subscription:S(),result:S()}),bB=x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())}),Qm=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Ht(),epochCredits:H(Jo([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),vB=Ue(x({current:H(Qm),delinquent:H(Qm)})),_B=dt([Be("processed"),Be("confirmed"),Be("finalized")]),wB=x({slot:S(),confirmations:G(S()),err:Ws,confirmationStatus:le(_B)}),SB=Kt(H(G(wB))),AB=Ue(S()),u_=x({accountKey:Yt,writableIndexes:H(S()),readonlyIndexes:H(S())}),_p=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(u_))})}),l_=x({pubkey:Yt,signer:Ht(),writable:Ht(),source:le(dt([Be("transaction"),Be("lookupTable")]))}),f_=x({accountKeys:H(l_),signatures:H(F())}),d_=x({parsed:li(),program:F(),programId:Yt}),h_=x({accounts:H(Yt),data:F(),programId:Yt}),kB=dt([h_,d_]),IB=dt([x({parsed:li(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),p_=ui(kB,IB,r=>"accounts"in r?he(r,h_):he(r,d_)),g_=x({signatures:H(F()),message:x({accountKeys:H(l_),instructions:H(p_),recentBlockhash:F(),addressTableLookups:le(G(H(u_)))})}),Yu=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Eh}),y_=x({writable:H(Yt),readonly:H(Yt)}),Bl=x({err:Ws,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Yu))),postTokenBalances:le(G(H(Yu))),loadedAddresses:le(y_),computeUnitsConsumed:le(S())}),wp=x({err:Ws,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(p_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Yu))),postTokenBalances:le(G(H(Yu))),loadedAddresses:le(y_),computeUnitsConsumed:le(S())}),Xo=dt([Be(0),Be("legacy")]),zs=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))}),EB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:_p,meta:G(Bl),version:le(Xo)})),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),OB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),PB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:f_,meta:G(Bl),version:le(Xo)})),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),TB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:g_,meta:G(wp),version:le(Xo)})),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),RB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:f_,meta:G(wp),version:le(Xo)})),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),BB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(zs)),blockTime:G(S()),blockHeight:G(S())}))),xB=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:_p,meta:G(Bl)})),rewards:le(H(zs)),blockTime:G(S())}))),Xm=Ue(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())}))),Hd=Ue(G(x({slot:S(),meta:G(Bl),blockTime:le(G(S())),transaction:_p,version:le(Xo)}))),mu=Ue(G(x({slot:S(),transaction:g_,meta:G(wp),blockTime:le(G(S())),version:le(Xo)}))),MB=Kt(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})})),CB=Kt(x({blockhash:F(),lastValidBlockHeight:S()})),LB=Kt(Ht()),KB=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),NB=Ue(H(KB)),DB=Kt(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),UB=Ue(F()),FB=Ue(F()),WB=x({err:Ws,logs:H(F()),signature:F()}),zB=x({result:Rl(WB),subscription:S()}),VB={"solana-client":"js/0.0.0-development"};class $B{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Ot(d),O=this._buildArgs([],m,void 0,I),M=Hm(O);return h[M]=h[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,Ue(S()));if("error"in R)throw new Se(R.error,"failed to get block height information");return R.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=TR(e),this._rpcWsEndpoint=n||PR(e),this._rpcClient=zR(e,i,s,a,u,f),this._rpcRequest=VR(this._rpcClient),this._rpcBatchRequest=$R(this._rpcClient),this._rpcWebSocket=new kR(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Kt(S()));if("error"in u)throw new Se(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,Ue(G(S())));if("error"in n)throw new Se(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,Ue(S()));if("error"in t)throw new Se(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,QR);if("error"in t)throw new Se(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,XR);if("error"in i)throw new Se(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Kt(Eh));if("error"in s)throw new Se(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Kt(Eh));if("error"in s)throw new Se(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Ot(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,eB);if("error"in h)throw new Se(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,tB);if("error"in u)throw new Se(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,nB);if("error"in s)throw new Se(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,ZR);if("error"in s)throw new Se(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Kt(G(Ja)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Kt(G(Ph)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Ot(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Kt(H(G(Ph))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Ot(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Kt(H(G(Ja))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Ot(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,Ue(oB));if("error"in f)throw new Se(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Ot(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(rB),d=a.withContext===!0?he(f,Kt(h)):he(f,Ue(h));if("error"in d)throw new Se(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,Ue(H(sB)));if("error"in u)throw new Se(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=Ve.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Ze(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:Si.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:Si.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await ws(1e3),s||(O=await I(),s))return;m({__type:Si.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===Si.PROCESSED)d=m.response;else throw new pp(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let M=s,A=null;const R=async()=>{try{const{context:C,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=C.slot,Y==null?void 0:Y.nonce}catch{return M}};(async()=>{if(M=await R(),!u)for(;;){if(s!==M){O({__type:Si.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await ws(2e3),u||(M=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===Si.PROCESSED)I=O.response;else{let M;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await ws(400);continue}M=A;break}if(M!=null&&M.value){const A=e||"finalized",{confirmationStatus:R}=M.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new bo(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new bo(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new bo(a);break;default:(C=>{})(A)}I={context:M.context,value:{err:M.value.err}}}else throw new bo(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Si.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===Si.PROCESSED)u=f.response;else throw new gp(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,Ue(H(bB)));if("error"in t)throw new Se(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,vB);if("error"in i)throw new Se(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,Ue(S()));if("error"in a)throw new Se(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,Ue(F()));if("error"in a)throw new Se(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,Ue(H(Yt)));if("error"in s)throw new Se(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);Ze(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,SB);if("error"in s)throw new Se(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,Ue(S()));if("error"in a)throw new Se(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,jR);if("error"in i)throw new Se(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Ot(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,xR);if("error"in f)throw new Se(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,qR);if("error"in t)throw new Se(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,HR);if("error"in a)throw new Se(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,YR);if("error"in t)throw new Se(t.error,"failed to get epoch schedule");const n=t.result;return new s_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,JR);if("error"in t)throw new Se(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,AB);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,MB);if("error"in i)throw new Se(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,NB);if("error"in n)throw new Se(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,DB);if("error"in s)throw new Se(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=Fe(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Kt(G(S())));if("error"in a)throw new Se(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,GR);if("error"in s)throw new Se(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,CB);if("error"in a)throw new Se(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,LB);if("error"in u)throw new Se(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,Ue(FR));if("error"in t)throw new Se(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,Ue(F()));if("error"in t)throw new Se(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,PB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,OB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,EB);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:Gd(m,h.message)},version:m}))}:null}}}catch(u){throw new Se(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,RB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,BB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,TB);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Se(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,WR);if("error"in a)throw new Se(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,Hd);if("error"in u)throw new Se(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Gd(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Ot(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,mu);if("error"in u)throw new Se(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Ot(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,mu);if("error"in h)throw new Se(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Ot(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Hd);if("error"in h)throw new Se(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:Gd(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,xB);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new jr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:ot.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,Ue(H(S())));if("error"in a)throw new Se(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,Xm);if("error"in s)throw new Se(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Xm);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Hd);if("error"in s)throw new Se(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new jr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:ot.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,mu);if("error"in s)throw new Se(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,mu);if("error"in u)throw new Se(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,aB);if("error"in a)throw new Se(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,cB);if("error"in a)throw new Se(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Ih({key:e,state:Ih.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Tl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,UB);if("error"in i)throw new Se(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await ws(100);const n=Date.now()-this._blockhashInfo.lastFetch>=a_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await ws(n_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Ot(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Kt(S()));if("error"in a)throw new Se(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Y=[R,C],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,Jm);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof ot){let M=e;i=new ot,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=ot.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());d.accounts={encoding:"base64",addresses:M}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,Jm);if("error"in O){let M;if("data"in O.error&&(M=O.error.data.logs,M&&Array.isArray(M))){const A=`
    `,R=A+M.join(A);console.error(O.error.message,R)}throw new kh("failed to simulate transaction: "+O.error.message,M)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Fe(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,FB);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new kh("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,uB);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Hm([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];Ze(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,fB);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,zB);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,hB);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,gB);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,yB);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,mB);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Oo{constructor(e){this._keypair=void 0,this._keypair=e??jm()}static generate(){return new Oo(jm())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Hu(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Oo({publicKey:n,secretKey:e})}static fromSeed(e){const t=Hu(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Oo({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const ki=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Lo("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Lo(),It(je(),fr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class jB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ki))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=st(ki.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=st(ki.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Sp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Sp{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),Jh(BigInt(e.recentSlot),8)],this.programId),i=ki.CreateLookupTable,s=Ye(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yn.programId,isSigner:!1,isWritable:!1}];return[new yt({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=ki.FreezeLookupTable,n=Ye(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=ki.ExtendLookupTable,n=Ye(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yn.programId,isSigner:!1,isWritable:!1}),new yt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=ki.DeactivateLookupTable,n=Ye(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=ki.CloseLookupTable,n=Ye(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new yt({programId:this.programId,keys:i,data:n})}}Sp.programId=new pe("AddressLookupTab1e1111111111111111111111111");class qB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ke("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ni))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=st(ni.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=st(ni.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=st(ni.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=st(ni.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Ap.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ni=Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),Lo("microLamports")])}});class Ap{constructor(){}static requestUnits(e){const t=ni.RequestUnits,n=Ye(t,e);return new yt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=ni.RequestHeapFrame,n=Ye(t,e);return new yt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=ni.SetComputeUnitLimit,n=Ye(t,e);return new yt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=ni.SetComputeUnitPrice,n=Ye(t,{microLamports:BigInt(e.microLamports)});return new yt({keys:[],programId:this.programId,data:n})}}Ap.programId=new pe("ComputeBudget111111111111111111111111111111");const Zm=64,eb=32,tb=64,nb=ie([ke("numSignatures"),ke("padding"),Nt("signatureOffset"),Nt("signatureInstructionIndex"),Nt("publicKeyOffset"),Nt("publicKeyInstructionIndex"),Nt("messageDataOffset"),Nt("messageDataSize"),Nt("messageInstructionIndex")]);class xl{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;Ze(t.length===eb,`Public Key must be ${eb} bytes but received ${t.length} bytes`),Ze(i.length===tb,`Signature must be ${tb} bytes but received ${i.length} bytes`);const a=nb.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return nb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new yt({keys:[],programId:xl.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;Ze(t.length===Zm,`Private key must be ${Zm} bytes but received ${t.length} bytes`);try{const s=Oo.fromSecretKey(t),a=s.publicKey.toBytes(),u=dp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}xl.programId=new pe("Ed25519SigVerify111111111111111111111111111");const GB=(r,e)=>{const t=sc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};sc.utils.isValidPrivateKey;const HB=sc.getPublicKey,rb=32,Yd=20,ib=64,YB=11,Jd=ie([ke("numSignatures"),Nt("signatureOffset"),ke("signatureInstructionIndex"),Nt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Nt("messageDataOffset"),Nt("messageDataSize"),ke("messageInstructionIndex"),He(20,"ethAddress"),He(64,"signature"),ke("recoveryId")]);class Po{constructor(){}static publicKeyToEthAddress(e){Ze(e.length===ib,`Public key must be ${ib} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(Bm(Fe(e))).slice(-Yd)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return Po.createInstructionWithEthAddress({ethAddress:Po.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,Ze(u.length===Yd,`Address must be ${Yd} bytes but received ${u.length} bytes`);const f=1+YB,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(Jd.span+n.length);return Jd.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:Fe(i),ethAddress:Fe(u),recoveryId:s},O),O.fill(Fe(n),Jd.span),new yt({keys:[],programId:Po.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;Ze(t.length===rb,`Private key must be ${rb} bytes but received ${t.length} bytes`);try{const s=Fe(t),a=HB(s,!1).slice(1),u=ee.Buffer.from(Bm(Fe(n))),[f,h]=GB(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Po.programId=new pe("KeccakSecp256k11111111111111111111111111111");var m_;const b_=new pe("StakeConfig11111111111111111111111111111111");class v_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class uc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}m_=uc;uc.default=new m_(0,0,pe.default);class JB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(un))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=st(un.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new v_(new pe(t.staker),new pe(t.withdrawer)),lockup:new uc(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),st(un.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=st(un.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=st(un.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=st(un.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(un.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=st(un.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(un.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Ml.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const un=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),XT(),ZT()])},Authorize:{index:1,layout:ie([se("instruction"),je("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Pt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Pt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),je("newAuthorized"),se("stakeAuthorizationType"),ks("authoritySeed"),je("authorityOwner")])}}),QB=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ml{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||uc.default,a=un.Initialize,u=Ye(a,{authorized:{staker:Fe(n.staker.toBuffer()),withdrawer:Fe(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Fe(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Co,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new yt(f)}static createAccountWithSeed(e){const t=new ot;t.add(yn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new ot;t.add(yn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=un.Delegate,a=Ye(s);return new ot().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:b_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=un.Authorize,f=Ye(u,{newAuthorized:Fe(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ot().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=un.AuthorizeWithSeed,d=Ye(h,{newAuthorized:Fe(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:Fe(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new ot().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=un.Split,u=Ye(a,{lamports:s});return new yt({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new ot;return t.add(yn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new ot;return f.add(yn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=un.Merge,a=Ye(s);return new ot().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=un.Withdraw,f=Ye(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ot().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=un.Deactivate,s=Ye(i);return new ot().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Ml.programId=new pe("Stake11111111111111111111111111111111111111");Ml.space=200;class __{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class XB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ii))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=st(Ii.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new __(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=st(Ii.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=st(Ii.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=st(Ii.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Zo.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ii=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),eR()])},Authorize:{index:1,layout:ie([se("instruction"),je("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Pt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),tR()])}}),ZB=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Zo{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Ii.InitializeAccount,a=Ye(s,{voteInit:{nodePubkey:Fe(i.nodePubkey.toBuffer()),authorizedVoter:Fe(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Fe(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Co,isSigner:!1,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new yt(u)}static createAccount(e){const t=new ot;return t.add(yn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Ii.Authorize,u=Ye(a,{newAuthorized:Fe(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ot().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Ii.AuthorizeWithSeed,h=Ye(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Fe(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Fe(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ot().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Ii.Withdraw,u=Ye(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new ot().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return Zo.withdraw(e)}}Zo.programId=new pe("Vote111111111111111111111111111111111111111");Zo.space=3731;const w_=new pe("Va1idator1nfo111111111111111111111111111111"),ex=x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});class kp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(zn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,lr));t=t.slice(lr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(w_)&&i[1].isSigner){const s=ks().decode(ee.Buffer.from(t)),a=JSON.parse(s);return OP(a,ex),new kp(i[1].publicKey,a)}return null}}const tx=new pe("Vote111111111111111111111111111111111111111"),nx=ie([je("nodePubkey"),je("authorizedWithdrawer"),ke("commission"),Xe(),It(ie([Xe("slot"),se("confirmationCount")]),fr(se(),-8),"votes"),ke("rootSlotValid"),Xe("rootSlot"),Xe(),It(ie([Xe("epoch"),je("authorizedVoter")]),fr(se(),-8),"authorizedVoters"),ie([It(ie([je("authorizedPubkey"),Xe("epochOfLastAuthorizedSwitch"),Xe("targetEpoch")]),32,"buf"),Xe("idx"),ke("isEmpty")],"priorVoters"),Xe(),It(ie([Xe("epoch"),Xe("credits"),Xe("prevCredits")]),fr(se(),-8),"epochCredits"),ie([Xe("slot"),Xe("timestamp")],"lastTimestamp")]);class Ip{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=nx.decode(Fe(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Ip({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(rx),priorVoters:ix(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function rx({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function sb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function ix({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(sb),...r.slice(0,e).map(sb)]}const ob={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function sx(r,e){const t=e===!1?"http":"https";if(!r)return ob[t].devnet;const n=ob[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function ox(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const ax=1e9;var cx=Object.freeze(Object.defineProperty({__proto__:null,Account:YT,AddressLookupTableAccount:Ih,AddressLookupTableInstruction:jB,AddressLookupTableProgram:Sp,Authorized:v_,BLOCKHASH_CACHE_TIMEOUT_MS:a_,BPF_LOADER_DEPRECATED_PROGRAM_ID:JT,BPF_LOADER_PROGRAM_ID:gR,BpfLoader:yR,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ni,ComputeBudgetInstruction:qB,ComputeBudgetProgram:Ap,Connection:$B,Ed25519Program:xl,Enum:GT,EpochSchedule:s_,FeeCalculatorLayout:r_,Keypair:Oo,LAMPORTS_PER_SOL:ax,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:ki,Loader:Bs,Lockup:uc,MAX_SEED_LENGTH:e_,Message:jr,MessageAccountKeys:Ya,MessageV0:Rs,NONCE_ACCOUNT_LENGTH:Ah,NonceAccount:Tl,PACKET_DATA_SIZE:Gi,PUBLIC_KEY_LENGTH:lr,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:Mo,SOLANA_SCHEMA:Na,STAKE_CONFIG_ID:b_,STAKE_INSTRUCTION_LAYOUTS:un,SYSTEM_INSTRUCTION_LAYOUTS:_t,SYSVAR_CLOCK_PUBKEY:ei,SYSVAR_EPOCH_SCHEDULE_PUBKEY:oR,SYSVAR_INSTRUCTIONS_PUBKEY:aR,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Ku,SYSVAR_RENT_PUBKEY:Co,SYSVAR_REWARDS_PUBKEY:cR,SYSVAR_SLOT_HASHES_PUBKEY:uR,SYSVAR_SLOT_HISTORY_PUBKEY:lR,SYSVAR_STAKE_HISTORY_PUBKEY:Nu,Secp256k1Program:Po,SendTransactionError:kh,SolanaJSONRPCError:Se,SolanaJSONRPCErrorCode:SR,StakeAuthorizationLayout:QB,StakeInstruction:JB,StakeProgram:Ml,Struct:hp,SystemInstruction:hR,SystemProgram:yn,Transaction:ot,TransactionExpiredBlockheightExceededError:pp,TransactionExpiredNonceInvalidError:bo,TransactionExpiredTimeoutError:gp,TransactionInstruction:yt,TransactionMessage:mp,TransactionStatus:Si,VALIDATOR_INFO_KEY:w_,VERSION_PREFIX_MASK:Ol,VOTE_PROGRAM_ID:tx,ValidatorInfo:kp,VersionedMessage:yp,VersionedTransaction:bp,VoteAccount:Ip,VoteAuthorizationLayout:ZB,VoteInit:__,VoteInstruction:XB,VoteProgram:Zo,clusterApiUrl:sx,sendAndConfirmRawTransaction:ox,sendAndConfirmTransaction:Sh},Symbol.toStringTag,{value:"Module"})),Ti=ic(cx);const ab=()=>{const r=qr.utils.randomPrivateKey(),e=Th(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Th=qr.getPublicKey;function cb(r){try{return qr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const ux=(r,e)=>qr.sign(r,e.slice(0,32)),lx=qr.verify,Wn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class fx{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(cv(Du,this))}static decode(e){return uv(Du,this,e)}static decodeUnchecked(e){return lv(Du,this,e)}}const Du=new Map;var S_;let A_;const dx=32,Is=32;function hx(r){return r._bn!==void 0}let ub=1;A_=Symbol.toStringTag;class ve extends fx{constructor(e){if(super({}),this._bn=void 0,hx(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ve.decode(e);if(t.length!=Is)throw new Error("Invalid public key input");this._bn=new Xi(t)}else this._bn=new Xi(e);if(this._bn.byteLength()>Is)throw new Error("Invalid public key input")}}static unique(){const e=new ve(ub);return ub+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ve.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Is)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[A_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=$u(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>dx)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Wn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=$u(n);if(cb(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return cb(t.toBytes())}}S_=ve;ve.default=new S_("11111111111111111111111111111111");Du.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const Rh=1280-40-8,px=127,Bh=64;class lb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Je=(r="publicKey")=>He(32,r),vo=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),He(fr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},gx=(r="authorized")=>ie([Je("staker"),Je("withdrawer")],r),yx=(r="lockup")=>ie([Pt("unixTimestamp"),Pt("epoch"),Je("custodian")],r),mx=(r="voteInit")=>ie([Je("nodePubkey"),Je("authorizedVoter"),Je("authorizedWithdrawer"),ke("commission")],r),bx=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Je("currentAuthorityDerivedKeyOwnerPubkey"),vo("currentAuthorityDerivedKeySeed"),Je("newAuthorized")],r);function k_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return k_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Ba(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function xa(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function or(r,e){if(!r)throw new Error(e||"Assertion failed")}class Ep{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Ep(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];or(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{or(t.length>0,"Expected at least one writable signer key");const[f]=t[0];or(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(or(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Qa{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ve.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new lb(this.staticAccountKeys)}static compile(e){const t=Ep.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new lb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ve.encode(u.data)}));return new Qa({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];xa(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from(Ve.decode(m.data));let A=[];xa(A,I.length);let R=[];return xa(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];xa(i,n.length);let s=ee.Buffer.alloc(Rh);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),He(m.keyIndicesCount.length,"keyIndicesCount"),It(ke("keyIndex"),m.keyIndices.length,"keyIndices"),He(m.dataLength.length,"dataLength"),It(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([He(1,"numRequiredSignatures"),He(1,"numReadonlySignedAccounts"),He(1,"numReadonlyUnsignedAccounts"),He(t.length,"keyCount"),It(Je("key"),e,"keys"),Je("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Wn(m.toBytes())),recentBlockhash:Ve.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&px))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Ba(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Is);t=t.slice(Is),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Is);t=t.slice(Is);const h=Ba(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Ba(t),A=t.slice(0,M);t=t.slice(M);const R=Ba(t),C=t.slice(0,R),Y=Ve.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ve.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new Qa(m)}}const vx=ee.Buffer.alloc(Bh).fill(0);class ft{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ft(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ve(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ve.encode(R)}});return M.forEach(A=>{or(A.programIdIndex>=0),A.accounts.forEach(R=>or(R>=0))}),new Qa({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=ux(n,i.secretKey);this._addSignature(i.publicKey,Wn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){or(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!lx(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];xa(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return or(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(or(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),or(s.length<=Rh,`Transaction too large: ${s.length} > ${Rh}`),s}get keys(){return or(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return or(this.instructions.length===1),this.instructions[0].programId}get data(){return or(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ba(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Bh);t=t.slice(Bh),i.push(Ve.encode(ee.Buffer.from(a)))}return Ct.populate(Qa.from(t),i)}static populate(e,t=[]){const n=new Ct;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ve.encode(vx)?null:Ve.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new ft({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ve.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const Qd=new ve("SysvarRecentB1ockHashes11111111111111111111"),_o=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function _x(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ir(r,e){const t=r.layout.span>=0?r.layout.span:k_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const wx=Xe("lamportsPerSignature"),Sx=ie([se("version"),se("state"),Je("authorizedPubkey"),Je("nonce"),ie([wx],"feeCalculator")]),fb=Sx.span,Ax=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},kx=r=>e=>{const t=He(r,e),{encode:n,decode:i}=Ax(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return fv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Jh(a,r);return n(h,u,f)},s},Ko=kx(8),Er=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Pt("lamports"),Pt("space"),Je("programId")])},Assign:{index:1,layout:ie([se("instruction"),Je("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Ko("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Je("base"),vo("seed"),Pt("lamports"),Pt("space"),Je("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Pt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Je("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Je("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Pt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Je("base"),vo("seed"),Pt("space"),Je("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Je("base"),vo("seed"),Je("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Ko("lamports"),vo("seed"),Je("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class ti{constructor(){}static createAccount(e){const t=Er.Create,n=Ir(t,{lamports:e.lamports,space:e.space,programId:Wn(e.programId.toBuffer())});return new ft({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Er.TransferWithSeed;t=Ir(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Er.Transfer;t=Ir(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ft({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Er.AssignWithSeed;t=Ir(i,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Er.Assign;t=Ir(i,{programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ft({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Er.CreateWithSeed,n=Ir(t,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Wn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ft({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Ct;"basePubkey"in e&&"seed"in e?t.add(ti.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:fb,programId:this.programId})):t.add(ti.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:fb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Er.InitializeNonceAccount,n=Ir(t,{authorized:Wn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ft(i)}static nonceAdvance(e){const t=Er.AdvanceNonceAccount,n=Ir(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ft(i)}static nonceWithdraw(e){const t=Er.WithdrawNonceAccount,n=Ir(t,{lamports:e.lamports});return new ft({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Er.AuthorizeNonceAccount,n=Ir(t,{authorized:Wn(e.newAuthorizedPubkey.toBuffer())});return new ft({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Er.AllocateWithSeed;t=Ir(i,{base:Wn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Wn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Er.Allocate;t=Ir(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ft({keys:n,programId:this.programId,data:t})}}ti.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),Ko("deactivationSlot"),Xe("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),It(Je(),fr(ke(),-1),"authority")]);const nn=ui(Yo(ve),F(),r=>new ve(r)),I_=Jo([F(),Be("base64")]),Op=ui(Yo(ee.Buffer),I_,r=>ee.Buffer.from(r[0],"base64"));function E_(r){return dt([x({jsonrpc:Be("2.0"),id:F(),result:r}),x({jsonrpc:Be("2.0"),id:F(),error:x({code:li(),message:F(),data:le(av())})})])}const Ix=E_(li());function St(r){return ui(E_(r),Ix,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Lr(r){return St(x({context:x({slot:S()}),value:r}))}function Cl(r){return x({context:x({slot:S()}),value:r})}const Ex=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});St(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const Ox=H(x({slot:S(),prioritizationFee:S()})),Px=x({total:S(),validator:S(),foundation:S(),epoch:S()}),Tx=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),Rx=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Ht(),firstNormalEpoch:S(),firstNormalSlot:S()}),Bx=yl(F(),H(S())),Vs=G(dt([x({}),F()])),xx=x({err:Vs}),Mx=Be("receivedSignature");x({"solana-core":F(),"feature-set":le(S())});Lr(x({err:G(dt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Ht(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:Jo([F(),Be("base64")])})))}));Lr(x({byIdentity:yl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));St(Ex);St(Px);St(Ox);St(Tx);St(Rx);St(Bx);St(S());Lr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(nn)}));const Cx=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())});Lr(H(x({address:nn,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())})));Lr(H(x({pubkey:nn,account:x({executable:Ht(),owner:nn,lamports:S(),data:Op,rentEpoch:S()})})));const xh=x({program:F(),parsed:li(),space:S()});Lr(H(x({pubkey:nn,account:x({executable:Ht(),owner:nn,lamports:S(),data:xh,rentEpoch:S()})})));Lr(H(x({lamports:S(),address:nn})));const Pp=x({executable:Ht(),owner:nn,lamports:S(),data:Op,rentEpoch:S()});x({pubkey:nn,account:Pp});const Lx=ui(dt([Yo(ee.Buffer),xh]),dt([I_,xh]),r=>Array.isArray(r)?he(r,Op):r),Kx=x({executable:Ht(),owner:nn,lamports:S(),data:Lx,rentEpoch:S()});x({pubkey:nn,account:Kx});x({state:dt([Be("active"),Be("inactive"),Be("activating"),Be("deactivating")]),active:S(),inactive:S()});St(H(x({signature:F(),slot:S(),err:Vs,memo:G(F()),blockTime:le(G(S()))})));St(H(x({signature:F(),slot:S(),err:Vs,memo:G(F()),blockTime:le(G(S()))})));x({subscription:S(),result:Cl(Pp)});const Nx=x({pubkey:nn,account:Pp});x({subscription:S(),result:Cl(Nx)});const Dx=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:Dx});const Ux=dt([x({type:dt([Be("firstShredReceived"),Be("completed"),Be("optimisticConfirmation"),Be("root")]),slot:S(),timestamp:S()}),x({type:Be("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Be("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Be("dead"),slot:S(),timestamp:S(),err:F()})]);x({subscription:S(),result:Ux});x({subscription:S(),result:Cl(dt([xx,Mx]))});x({subscription:S(),result:S()});x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())});const db=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Ht(),epochCredits:H(Jo([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});St(x({current:H(db),delinquent:H(db)}));const Fx=dt([Be("processed"),Be("confirmed"),Be("finalized")]),Wx=x({slot:S(),confirmations:G(S()),err:Vs,confirmationStatus:le(Fx)});Lr(H(G(Wx)));St(S());const O_=x({accountKey:nn,writableIndexes:H(S()),readonlyIndexes:H(S())}),Tp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(O_))})}),P_=x({pubkey:nn,signer:Ht(),writable:Ht(),source:le(dt([Be("transaction"),Be("lookupTable")]))}),T_=x({accountKeys:H(P_),signatures:H(F())}),R_=x({parsed:li(),program:F(),programId:nn}),B_=x({accounts:H(nn),data:F(),programId:nn}),zx=dt([B_,R_]),Vx=dt([x({parsed:li(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),x_=ui(zx,Vx,r=>"accounts"in r?he(r,B_):he(r,R_)),M_=x({signatures:H(F()),message:x({accountKeys:H(P_),instructions:H(x_),recentBlockhash:F(),addressTableLookups:le(G(H(O_)))})}),Ju=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Cx}),C_=x({writable:H(nn),readonly:H(nn)}),Ll=x({err:Vs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Ju))),postTokenBalances:le(G(H(Ju))),loadedAddresses:le(C_),computeUnitsConsumed:le(S())}),Rp=x({err:Vs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Ju))),postTokenBalances:le(G(H(Ju))),loadedAddresses:le(C_),computeUnitsConsumed:le(S())}),ea=dt([Be(0),Be("legacy")]),$s=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))});St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Tp,meta:G(Ll),version:le(ea)})),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:T_,meta:G(Ll),version:le(ea)})),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:M_,meta:G(Rp),version:le(ea)})),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:T_,meta:G(Rp),version:le(ea)})),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H($s)),blockTime:G(S()),blockHeight:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Tp,meta:G(Ll)})),rewards:le(H($s)),blockTime:G(S())})));St(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())})));St(G(x({slot:S(),meta:Ll,blockTime:le(G(S())),transaction:Tp,version:le(ea)})));St(G(x({slot:S(),transaction:M_,meta:G(Rp),blockTime:le(G(S())),version:le(ea)})));Lr(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})}));Lr(x({blockhash:F(),lastValidBlockHeight:S()}));Lr(Ht());const $x=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});St(H($x));Lr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));St(F());St(F());const jx=x({err:Vs,logs:H(F()),signature:F()});x({result:Cl(jx),subscription:S()});class ji{constructor(e){this._keypair=void 0,this._keypair=e??ab()}static generate(){return new ji(ab())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Th(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new ji({publicKey:n,secretKey:e})}static fromSeed(e){const t=Th(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new ji({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Ko("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Ko(),It(Je(),fr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),Ko("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([ke("numSignatures"),ke("padding"),Nt("signatureOffset"),Nt("signatureInstructionIndex"),Nt("publicKeyOffset"),Nt("publicKeyInstructionIndex"),Nt("messageDataOffset"),Nt("messageDataSize"),Nt("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");sc.utils.isValidPrivateKey;sc.getPublicKey;ie([ke("numSignatures"),Nt("signatureOffset"),ke("signatureInstructionIndex"),Nt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Nt("messageDataOffset"),Nt("messageDataSize"),ke("messageInstructionIndex"),He(20,"ethAddress"),He(64,"signature"),ke("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var L_;new ve("StakeConfig11111111111111111111111111111111");class K_{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}L_=K_;K_.default=new L_(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),gx(),yx()])},Authorize:{index:1,layout:ie([se("instruction"),Je("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Pt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Pt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Je("newAuthorized"),se("stakeAuthorizationType"),vo("authoritySeed"),Je("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),mx()])},Authorize:{index:1,layout:ie([se("instruction"),Je("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Pt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),bx()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});new ve("Vote111111111111111111111111111111111111111");ie([Je("nodePubkey"),Je("authorizedWithdrawer"),ke("commission"),Xe(),It(ie([Xe("slot"),se("confirmationCount")]),fr(se(),-8),"votes"),ke("rootSlotValid"),Xe("rootSlot"),Xe(),It(ie([Xe("epoch"),Je("authorizedVoter")]),fr(se(),-8),"authorizedVoters"),ie([It(ie([Je("authorizedPubkey"),Xe("epochOfLastAuthorizedSwitch"),Xe("targetEpoch")]),32,"buf"),Xe("idx"),ke("isEmpty")],"priorVoters"),Xe(),It(ie([Xe("epoch"),Xe("credits"),Xe("prevCredits")]),fr(se(),-8),"epochCredits"),ie([Xe("slot"),Xe("timestamp")],"lastTimestamp")]);var nt={},Kl={};Kl.byteLength=Hx;Kl.toByteArray=Jx;Kl.fromByteArray=Zx;var ri=[],Or=[],qx=typeof Uint8Array<"u"?Uint8Array:Array,Xd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var lo=0,Gx=Xd.length;lo<Gx;++lo)ri[lo]=Xd[lo],Or[Xd.charCodeAt(lo)]=lo;Or["-".charCodeAt(0)]=62;Or["_".charCodeAt(0)]=63;function N_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Hx(r){var e=N_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Yx(r,e,t){return(e+t)*3/4-t}function Jx(r){var e,t=N_(r),n=t[0],i=t[1],s=new qx(Yx(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Or[r.charCodeAt(f)]<<18|Or[r.charCodeAt(f+1)]<<12|Or[r.charCodeAt(f+2)]<<6|Or[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Or[r.charCodeAt(f)]<<2|Or[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=Or[r.charCodeAt(f)]<<10|Or[r.charCodeAt(f+1)]<<4|Or[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Qx(r){return ri[r>>18&63]+ri[r>>12&63]+ri[r>>6&63]+ri[r&63]}function Xx(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Qx(n));return i.join("")}function Zx(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(Xx(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(ri[e>>2]+ri[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ri[e>>10]+ri[e>>4&63]+ri[e<<2&63]+"=")),i.join("")}var Bp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Bp.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};Bp.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,M=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=M,a/=256,h-=8);r[t+O-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Kl,t=Bp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(_n(v,ArrayBuffer)||v&&_n(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_n(v,SharedArrayBuffer)||v&&_n(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(_n(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||xi(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(_n(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),_n(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(_n(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||_n(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Xn(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Bi(v).length;default:if(L)return k?-1:Xn(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return Vt(this,g,y);case"utf8":case"utf-8":return z(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ie(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?z(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(_n(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,Le=k-y;const mt=Math.min(Z,Le),lt=this.slice(L,$),bt=g.slice(y,k);for(let at=0;at<mt;++at)if(lt[at]!==bt[at]){Z=lt[at],Le=bt[at];break}return Z<Le?-1:Le<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,xi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,Le=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,Le/=2,y/=2}function mt(bt,at){return $===1?bt[at]:bt.readUInt16BE(at*$)}let lt;if(L){let bt=-1;for(lt=y;lt<Z;lt++)if(mt(v,lt)===mt(g,bt===-1?0:lt-bt)){if(bt===-1&&(bt=lt),lt-bt+1===Le)return bt*$}else bt!==-1&&(lt-=lt-bt),bt=-1}else for(y+Le>Z&&(y=Z-Le),lt=y;lt>=0;lt--){let bt=!0;for(let at=0;at<Le;at++)if(mt(v,lt+at)!==mt(g,at)){bt=!1;break}if(bt)return lt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function V(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const Le=parseInt(g.substr(Z*2,2),16);if(xi(Le))return Z;v[y+Z]=Le}return Z}function J(v,g,y,k){return vn(Xn(g,v.length-y),v,y,k)}function K(v,g,y,k){return vn(Ec(g),v,y,k)}function j(v,g,y,k){return vn(Bi(g),v,y,k)}function te(v,g,y,k){return vn(Of(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return V(this,g,y,k);case"utf8":case"utf-8":return J(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function z(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,Le=$>239?4:$>223?3:$>191?2:1;if(L+Le<=y){let mt,lt,bt,at;switch(Le){case 1:$<128&&(Z=$);break;case 2:mt=v[L+1],(mt&192)===128&&(at=($&31)<<6|mt&63,at>127&&(Z=at));break;case 3:mt=v[L+1],lt=v[L+2],(mt&192)===128&&(lt&192)===128&&(at=($&15)<<12|(mt&63)<<6|lt&63,at>2047&&(at<55296||at>57343)&&(Z=at));break;case 4:mt=v[L+1],lt=v[L+2],bt=v[L+3],(mt&192)===128&&(lt&192)===128&&(bt&192)===128&&(at=($&15)<<18|(mt&63)<<12|(lt&63)<<6|bt&63,at>65535&&at<1114112&&(Z=at))}}Z===null?(Z=65533,Le=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=Le}return Re(k)}const X=4096;function Re(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ie(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function Vt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Pf[v[$]];return L}function $t(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function _e(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Ln(function(g){g=g>>>0,fi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&fn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ln(function(g){g=g>>>0,fi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&fn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Ln(function(g){g=g>>>0,fi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&fn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Ln(function(g){g=g>>>0,fi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&fn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!1,52,8)};function We(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Le=Math.pow(2,8*k)-1;We(this,g,y,k,Le,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Le=Math.pow(2,8*k)-1;We(this,g,y,k,Le,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function Jt(v,g,y,k,L){Qn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function an(v,g,y,k,L){Qn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Ln(function(g,y=0){return Jt(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ln(function(g,y=0){return an(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const mt=Math.pow(2,8*k-1);We(this,g,y,k,mt-1,-mt)}let $=0,Z=1,Le=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&Le===0&&this[y+$-1]!==0&&(Le=1),this[y+$]=(g/Z>>0)-Le&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const mt=Math.pow(2,8*k-1);We(this,g,y,k,mt-1,-mt)}let $=k-1,Z=1,Le=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&Le===0&&this[y+$+1]!==0&&(Le=1),this[y+$]=(g/Z>>0)-Le&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Ln(function(g,y=0){return Jt(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ln(function(g,y=0){return an(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function At(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ut(v,g,y,k,L){return g=+g,y=y>>>0,L||At(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return ut(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return ut(this,g,y,!1,k)};function gr(v,g,y,k,L){return g=+g,y=y>>>0,L||At(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return gr(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return gr(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),Le=Z.length;if(Le===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%Le]}return this};const Ut={};function bn(v,g,y){Ut[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}bn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),bn("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),bn("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=Hr(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=Hr(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function Hr(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function yr(v,g,y){fi(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&fn(g,v.length-(y+1))}function Qn(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let Le;throw $>3?g===0||g===BigInt(0)?Le=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:Le=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:Le=`>= ${g}${Z} and <= ${y}${Z}`,new Ut.ERR_OUT_OF_RANGE("value",Le,v)}yr(k,L,$)}function fi(v,g){if(typeof v!="number")throw new Ut.ERR_INVALID_ARG_TYPE(g,"number",v)}function fn(v,g,y){throw Math.floor(v)!==v?(fi(v,y),new Ut.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Ut.ERR_BUFFER_OUT_OF_BOUNDS:new Ut.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const fs=/[^+/0-9A-Za-z-_]/g;function Ef(v){if(v=v.split("=")[0],v=v.trim().replace(fs,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Xn(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function Ec(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Of(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function Bi(v){return e.toByteArray(Ef(v))}function vn(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function _n(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function xi(v){return v!==v}const Pf=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Ln(v){return typeof BigInt>"u"?Tf:v}function Tf(){throw new Error("BigInt not supported")}})(nt);var eM=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Mh;typeof Object.create=="function"?Mh=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Mh=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var tM=Mh;function Os(r,e){var t={seen:[],stylize:rM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),D_(e)?t.showHidden=e:e&&lM(t,e),wo(t.showHidden)&&(t.showHidden=!1),wo(t.depth)&&(t.depth=2),wo(t.colors)&&(t.colors=!1),wo(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=nM),Qu(t,r,t.depth)}Os.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Os.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function nM(r,e){var t=Os.styles[e];return t?"\x1B["+Os.colors[t][0]+"m"+r+"\x1B["+Os.colors[t][1]+"m":r}function rM(r,e){return r}function iM(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Qu(r,e,t){if(r.customInspect&&e&&Ua(e.inspect)&&e.inspect!==Os&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return F_(n)||(n=Qu(r,n,t)),n}var i=sM(r,e);if(i)return i;var s=Object.keys(e),a=iM(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),Uu(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Zd(e);if(s.length===0){if(Ua(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(Da(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Xu(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Uu(e))return Zd(e)}var f="",h=!1,d=["{","}"];if(cM(e)&&(h=!0,d=["[","]"]),Ua(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if(Da(e)&&(f=" "+RegExp.prototype.toString.call(e)),Xu(e)&&(f=" "+Date.prototype.toUTCString.call(e)),Uu(e)&&(f=" "+Zd(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return Da(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=oM(r,e,t,a,s):I=s.map(function(O){return Ch(r,e,t,a,O,h)}),r.seen.pop(),aM(I,f,d)}function sM(r,e){if(wo(e))return r.stylize("undefined","undefined");if(F_(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(uM(e))return r.stylize(""+e,"number");if(D_(e))return r.stylize(""+e,"boolean");if(U_(e))return r.stylize("null","null")}function Zd(r){return"["+Error.prototype.toString.call(r)+"]"}function oM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)W_(e,String(a))?s.push(Ch(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(Ch(r,e,t,n,f,!0))}),s}function Ch(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),W_(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(U_(t)?u=Qu(r,f.value,null):u=Qu(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),wo(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function aM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function cM(r){return Array.isArray(r)}function D_(r){return typeof r=="boolean"}function U_(r){return r===null}function uM(r){return typeof r=="number"}function F_(r){return typeof r=="string"}function wo(r){return r===void 0}function Da(r){return Nl(r)&&xp(r)==="[object RegExp]"}function Nl(r){return typeof r=="object"&&r!==null}function Xu(r){return Nl(r)&&xp(r)==="[object Date]"}function Uu(r){return Nl(r)&&(xp(r)==="[object Error]"||r instanceof Error)}function Ua(r){return typeof r=="function"}function hb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function xp(r){return Object.prototype.toString.call(r)}function lM(r,e){if(!e||!Nl(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function W_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function pb(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var fM=Object.prototype.hasOwnProperty,gb=Object.keys||function(r){var e=[];for(var t in r)fM.call(r,t)&&e.push(t);return e},yb=Array.prototype.slice,eh;function z_(){return typeof eh<"u"?eh:eh=function(){return function(){}.name==="foo"}()}function mb(r){return Object.prototype.toString.call(r)}function bb(r){return nt.isBuffer(r)||typeof eM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function En(r,e){r||Gn(r,!0,e,"==",Cp)}var dM=/\s*function\s+([^\(\s]*)\s*/;function V_(r){if(!!Ua(r)){if(z_())return r.name;var e=r.toString(),t=e.match(dM);return t&&t[1]}}En.AssertionError=Mp;function Mp(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=hM(this),this.generatedMessage=!0);var e=r.stackStartFunction||Gn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=V_(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}tM(Mp,Error);function vb(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function _b(r){if(z_()||!Ua(r))return Os(r);var e=V_(r),t=e?": "+e:"";return"[Function"+t+"]"}function hM(r){return vb(_b(r.actual),128)+" "+r.operator+" "+vb(_b(r.expected),128)}function Gn(r,e,t,n,i){throw new Mp({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}En.fail=Gn;function Cp(r,e){r||Gn(r,!0,e,"==",Cp)}En.ok=Cp;En.equal=$_;function $_(r,e,t){r!=e&&Gn(r,e,t,"==",$_)}En.notEqual=j_;function j_(r,e,t){r==e&&Gn(r,e,t,"!=",j_)}En.deepEqual=q_;function q_(r,e,t){No(r,e,!1)||Gn(r,e,t,"deepEqual",q_)}En.deepStrictEqual=G_;function G_(r,e,t){No(r,e,!0)||Gn(r,e,t,"deepStrictEqual",G_)}function No(r,e,t,n){if(r===e)return!0;if(nt.isBuffer(r)&&nt.isBuffer(e))return pb(r,e)===0;if(Xu(r)&&Xu(e))return r.getTime()===e.getTime();if(Da(r)&&Da(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(bb(r)&&bb(e)&&mb(r)===mb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return pb(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(nt.isBuffer(r)!==nt.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),pM(r,e,t,n))}function wb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function pM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(hb(r)||hb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=wb(r),s=wb(e);if(i&&!s||!i&&s)return!1;if(i)return r=yb.call(r),e=yb.call(e),No(r,e,t);var a=gb(r),u=gb(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!No(r[f],e[f],t,n))return!1;return!0}En.notDeepEqual=H_;function H_(r,e,t){No(r,e,!1)&&Gn(r,e,t,"notDeepEqual",H_)}En.notDeepStrictEqual=Y_;function Y_(r,e,t){No(r,e,!0)&&Gn(r,e,t,"notDeepStrictEqual",Y_)}En.strictEqual=J_;function J_(r,e,t){r!==e&&Gn(r,e,t,"===",J_)}En.notStrictEqual=Q_;function Q_(r,e,t){r===e&&Gn(r,e,t,"!==",Q_)}function Sb(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function gM(r){var e;try{r()}catch(t){e=t}return e}function X_(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=gM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&Gn(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&Uu(i),u=!r&&i&&!t;if((a&&s&&Sb(i,t)||u)&&Gn(i,t,"Got unwanted exception"+n),r&&i&&t&&!Sb(i,t)||!r&&i)throw i}En.throws=yM;function yM(r,e,t){X_(!0,r,e,t)}En.doesNotThrow=mM;function mM(r,e,t){X_(!1,r,e,t)}En.ifError=bM;function bM(r){if(r)throw r}class Xa{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function vM(r,e){return e.property?r+"["+e.property+"]":r}class bu extends Xa{isCount(){throw new Error("ExternalLayout is abstract")}}class Z_ extends Xa{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class _M extends Xa{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof Xa,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class wM extends Xa{constructor(e,t){if(!(e instanceof bu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof bu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof bu&&(i=e.length),!(nt.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(vM("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof bu&&this.length.encode(i,t,n),i}}var Qe=r=>new Z_(1,r),Fa=r=>new Z_(4,r),jt=(r,e,t)=>new _M(r,e,t),ew=(r,e)=>new wM(r,e);const qt=(r="publicKey")=>ew(32,r),Pr=(r="uint64")=>ew(8,r);function Zt(r,e,t,...n){return _x(e,t,n,{skipPreflight:!1})}const SM=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),tw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Ab="Failed to find account",kb="Invalid account owner";function th(r){return nt.Buffer.from(r.toBuffer())}class An extends Xi{toBuffer(){const e=super.toArray().reverse(),t=nt.Buffer.from(e);if(t.length===8)return t;En(t.length<8,"u64 too large");const n=nt.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return En(e.length===8,`Invalid buffer length: ${e.length}`),new An([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function sr(r){return"publicKey"in r}const AM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},nw=new ve("So11111111111111111111111111111111111111112"),Ma=jt([Fa("mintAuthorityOption"),qt("mintAuthority"),Pr("supply"),Qe("decimals"),Qe("isInitialized"),Fa("freezeAuthorityOption"),qt("freezeAuthority")]),go=jt([qt("mint"),qt("owner"),Pr("amount"),Fa("delegateOption"),qt("delegate"),Qe("state"),Fa("isNativeOption"),Pr("isNative"),Pr("delegatedAmount"),Fa("closeAuthorityOption"),qt("closeAuthority")]),vu=jt([Qe("m"),Qe("n"),Qe("is_initialized"),qt("signer1"),qt("signer2"),qt("signer3"),qt("signer4"),qt("signer5"),qt("signer6"),qt("signer7"),qt("signer8"),qt("signer9"),qt("signer10"),qt("signer11")]);class gt{constructor(e,t,n,i){Ia(this,"connection",void 0),Ia(this,"publicKey",void 0),Ia(this,"programId",void 0),Ia(this,"associatedProgramId",void 0),Ia(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:tw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Ma.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(go.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(vu.span)}static async createMint(e,t,n,i,s,a){const u=ji.generate(),f=new gt(e,u.publicKey,a,t),h=await gt.getMinBalanceRentForExemptMint(e),d=new Ct;return d.add(ti.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Ma.span,programId:a})),d.add(gt.createInitMintInstruction(a,u.publicKey,s,n,i)),await Zt("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await gt.getMinBalanceRentForExemptAccount(this.connection),n=ji.generate(),i=new Ct;i.add(ti.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:go.span,programId:this.programId}));const s=this.publicKey;return i.add(gt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await Zt("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await gt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await Zt("CreateAssociatedTokenAccount",this.connection,new Ct().add(gt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await gt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===Ab||n.message===kb){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await gt.getMinBalanceRentForExemptAccount(e),u=ji.generate(),f=new Ct;return f.add(ti.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:go.span,programId:t})),f.add(ti.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(gt.createInitAccountInstruction(t,nw,u.publicKey,n)),await Zt("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=ji.generate(),i=await gt.getMinBalanceRentForExemptMultisig(this.connection),s=new Ct;s.add(ti.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:vu.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:_o,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=jt([Qe("instruction"),Qe("m")]),f=nt.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await Zt("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Ma.span)throw new Error("Invalid mint size");const t=nt.Buffer.from(e.data),n=Ma.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=An.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(Ab);if(!n.owner.equals(this.programId))throw new Error(kb);if(n.data.length!=go.span)throw new Error("Invalid account size");const i=nt.Buffer.from(n.data),s=go.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=An.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new An):(s.delegate=new ve(s.delegate),s.delegatedAmount=An.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=An.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=vu.span)throw new Error("Invalid multisig size");const n=nt.Buffer.from(t.data),i=vu.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return sr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await Zt("Transfer",this.connection,new Ct().add(gt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;sr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await Zt("Approve",this.connection,new Ct().add(gt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;sr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await Zt("Revoke",this.connection,new Ct().add(gt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;sr(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await Zt("SetAuthority",this.connection,new Ct().add(gt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;sr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await Zt("MintTo",this.connection,new Ct().add(gt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;sr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await Zt("Burn",this.connection,new Ct().add(gt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;sr(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await Zt("CloseAccount",this.connection,new Ct().add(gt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;sr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await Zt("FreezeAccount",this.connection,new Ct().add(gt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;sr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await Zt("ThawAccount",this.connection,new Ct().add(gt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return sr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await Zt("TransferChecked",this.connection,new Ct().add(gt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;sr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await Zt("ApproveChecked",this.connection,new Ct().add(gt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;sr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await Zt("MintToChecked",this.connection,new Ct().add(gt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;sr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await Zt("BurnChecked",this.connection,new Ct().add(gt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await Zt("SyncNative",this.connection,new Ct().add(gt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:_o,isSigner:!1,isWritable:!1}];const u=jt([Qe("instruction"),Qe("decimals"),qt("mintAuthority"),Qe("option"),qt("freezeAuthority")]);let f=nt.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:th(i),option:s===null?0:1,freezeAuthority:th(s||new ve(0))},f);f=f.slice(0,h)}return new ft({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1}],a=jt([Qe("instruction")]),u=nt.Buffer.alloc(a.span);return a.encode({instruction:1},u),new ft({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=jt([Qe("instruction"),Pr("amount")]),f=nt.Buffer.alloc(u.span);u.encode({instruction:3,amount:new An(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=jt([Qe("instruction"),Pr("amount")]),f=nt.Buffer.alloc(u.span);u.encode({instruction:4,amount:new An(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=jt([Qe("instruction")]),a=nt.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=jt([Qe("instruction"),Qe("authorityType"),Qe("option"),qt("newAuthority")]);let f=nt.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:AM[i],option:n===null?0:1,newAuthority:th(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=jt([Qe("instruction"),Pr("amount")]),f=nt.Buffer.alloc(u.span);u.encode({instruction:7,amount:new An(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=jt([Qe("instruction"),Pr("amount")]),f=nt.Buffer.alloc(u.span);u.encode({instruction:8,amount:new An(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=jt([Qe("instruction")]),u=nt.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=jt([Qe("instruction")]),u=nt.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=jt([Qe("instruction")]),u=nt.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=jt([Qe("instruction"),Pr("amount"),Qe("decimals")]),d=nt.Buffer.alloc(h.span);h.encode({instruction:12,amount:new An(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=jt([Qe("instruction"),Pr("amount"),Qe("decimals")]),d=nt.Buffer.alloc(h.span);h.encode({instruction:13,amount:new An(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=jt([Qe("instruction"),Pr("amount"),Qe("decimals")]),h=nt.Buffer.alloc(f.span);f.encode({instruction:14,amount:new An(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=jt([Qe("instruction"),Pr("amount"),Qe("decimals")]),h=nt.Buffer.alloc(f.span);f.encode({instruction:15,amount:new An(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new ft({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=jt([Qe("instruction")]),i=nt.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new ft({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=nt.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ti.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1}];return new ft({keys:f,programId:e,data:u})}}var kM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:tw,AccountLayout:go,MintLayout:Ma,NATIVE_MINT:nw,TOKEN_PROGRAM_ID:SM,Token:gt,u64:An},Symbol.toStringTag,{value:"Module"})),lc=ic(kM),Dl=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(en,"__esModule",{value:!0});en.getAccountInfo=en.getTokenAccount=en.getAssociatedTokenAddress=en.convertFactionStringToNum=en.longToByteArray=en.byteArrayToLong=en.stringToByteArray=en.byteArrayToString=void 0;const _u=$a,wu=ht,Fu=Ti,Zr=lc;function IM(r){return String.fromCharCode(...r)}en.byteArrayToString=IM;function EM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}en.stringToByteArray=EM;function OM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}en.byteArrayToLong=OM;function PM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}en.longToByteArray=PM;function TM(r){return Dl(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return _u.FactionType.MUD;case"oni":return _u.FactionType.ONI;case"ustur":return _u.FactionType.Ustur;default:return _u.FactionType.Unenlisted}})}en.convertFactionStringToNum=TM;function rw(r,e){return Dl(this,void 0,void 0,function*(){const[t]=yield Fu.PublicKey.findProgramAddress([r.toBuffer(),Zr.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],Zr.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}en.getAssociatedTokenAddress=rw;function RM(r,e,t,n=e,i){return Dl(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new wu.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new wu.BN(h.info.tokenAmount.amount);d.gt(new wu.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield rw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(Fu.SystemProgram.programId))return{tokenAccount:u,createInstruction:[Zr.Token.createAssociatedTokenAccountInstruction(Zr.ASSOCIATED_TOKEN_PROGRAM_ID,Zr.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new Fu.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=wu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[Fu.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield Zr.Token.getMinBalanceRentForExemptAccount(r),space:Zr.AccountLayout.span,programId:Zr.TOKEN_PROGRAM_ID}),Zr.Token.createInitAccountInstruction(Zr.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}en.getTokenAccount=RM;function BM(r,e){return Dl(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}en.getAccountInfo=BM;var Ul={},xM=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.sendAndConfirmTransaction=void 0;const MM=Ti;function CM(r,e,...t){return xM(this,void 0,void 0,function*(){let n="";try{n=yield(0,MM.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}Ul.sendAndConfirmTransaction=CM;var xs={},Lp={},Kp={},iw={};Object.defineProperty(iw,"__esModule",{value:!0});var Fl={},is={},In={},Wr={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.baseIdl=void 0;fc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.baseIdl=void 0;Wl.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var LM=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),KM=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),NM=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&LM(e,r,t);return KM(e,r),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getMarketplaceProgram=Wr.getGmLogsIDL=Wr.getGmIDL=void 0;const Ib=ht,DM=fc,UM=NM(Wl);function sw(r){const e=DM.baseIdl;return e.metadata.address=r.toBase58(),e}Wr.getGmIDL=sw;function FM(r){const e=UM.baseIdl;return e.metadata.address=r.toBase58(),e}Wr.getGmLogsIDL=FM;function WM({connection:r,programId:e}){const t=sw(e),n=new Ib.AnchorProvider(r,null,null);return new Ib.Program(t,e,n)}Wr.getMarketplaceProgram=WM;var js=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(In,"__esModule",{value:!0});In.getSingleOrder=In.getOpenOrdersForPlayerAndAsset=In.getOpenOrdersForPlayerAndCurrency=In.getOpenOrdersForAsset=In.getOpenOrdersForCurrency=In.getOpenOrdersForPlayer=In.getAllOpenOrders=void 0;const Hn=ht,qs=Wr;function zM(r,e){return js(this,void 0,void 0,function*(){const t=new Hn.AnchorProvider(r,null,null),n=(0,qs.getGmIDL)(e),i=new Hn.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}In.getAllOpenOrders=zM;function VM(r,e,t){return js(this,void 0,void 0,function*(){const n=new Hn.AnchorProvider(r,null,null),i=(0,qs.getGmIDL)(t),s=new Hn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}In.getOpenOrdersForPlayer=VM;function $M(r,e,t){return js(this,void 0,void 0,function*(){const n=new Hn.AnchorProvider(r,null,null),i=(0,qs.getGmIDL)(t),s=new Hn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}In.getOpenOrdersForCurrency=$M;function jM(r,e,t){return js(this,void 0,void 0,function*(){const n=new Hn.AnchorProvider(r,null,null),i=(0,qs.getGmIDL)(t),s=new Hn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}In.getOpenOrdersForAsset=jM;function qM(r,e,t,n){return js(this,void 0,void 0,function*(){const i=new Hn.AnchorProvider(r,null,null),s=(0,qs.getGmIDL)(n),a=new Hn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}In.getOpenOrdersForPlayerAndCurrency=qM;function GM(r,e,t,n){return js(this,void 0,void 0,function*(){const i=new Hn.AnchorProvider(r,null,null),s=(0,qs.getGmIDL)(n),a=new Hn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}In.getOpenOrdersForPlayerAndAsset=GM;function HM(r,e,t){return js(this,void 0,void 0,function*(){const n=new Hn.AnchorProvider(r,null,null),i=(0,qs.getGmIDL)(t);return yield new Hn.Program(i,t,n).account.orderAccount.fetch(e)})}In.getSingleOrder=HM;var tn={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.FEE_EXEMPT_SEED=xn.OPEN_ORDERS_COUNTER=xn.REGISTERED_CURRENCY_SEED=xn.ORDER_VAULT_AUTH_SEED=xn.ORDER_VAULT_SEED=xn.MARKET_VARS_SEED=void 0;xn.MARKET_VARS_SEED=Buffer.from("market-vars");xn.ORDER_VAULT_SEED=Buffer.from("order-vault-account");xn.ORDER_VAULT_AUTH_SEED=Buffer.from("order-vault-auth");xn.REGISTERED_CURRENCY_SEED=Buffer.from("registered-currency");xn.OPEN_ORDERS_COUNTER=Buffer.from("open-orders-counter");xn.FEE_EXEMPT_SEED=Buffer.from("fee_exempt");var YM=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JM=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),QM=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&YM(e,r,t);return JM(e,r),e},ss=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.getAllFeeExemptAccounts=tn.getFeeExemptAccount=tn.getOpenOrdersCounter=tn.getAllRegisteredCurrencies=tn.getRegisteredCurrencyAccount=tn.getOrderVaultAuth=tn.getOrderVault=tn.getMarketVarsAccount=void 0;const Zu=ht,ta=Ti,na=QM(xn),ow=Wr;function XM(r){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.MARKET_VARS_SEED],r)})}tn.getMarketVarsAccount=XM;function ZM(r,e,t){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}tn.getOrderVault=ZM;function eC(r,e){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}tn.getOrderVaultAuth=eC;function tC(r,e){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}tn.getRegisteredCurrencyAccount=tC;function nC(r,e){return ss(this,void 0,void 0,function*(){const t=new Zu.AnchorProvider(r,null,null),n=(0,ow.getGmIDL)(e),i=new Zu.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}tn.getAllRegisteredCurrencies=nC;function rC(r,e,t){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}tn.getOpenOrdersCounter=rC;function iC(r,e){return ss(this,void 0,void 0,function*(){return ta.PublicKey.findProgramAddress([na.FEE_EXEMPT_SEED,r.toBuffer()],e)})}tn.getFeeExemptAccount=iC;function sC(r,e){return ss(this,void 0,void 0,function*(){const t=new Zu.AnchorProvider(r,null,null),n=(0,ow.getGmIDL)(e);return yield new Zu.Program(n,e,t).account.feeReduction.all()})}tn.getAllFeeExemptAccounts=sC;var Vn={},ra=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.getRoyaltyReductionForStakingAccount=Vn.getRoyaltyReductionForUserAndMint=Vn.getRegisteredCurrencyInfoFromPubkey=Vn.getRegisteredCurrencyAccountInfo=Vn.getFeeExemptAccountInfo=Vn.getMarketVarsAccountInfo=void 0;const el=ht,Np=tn,zl=Wr,Lh=ml;function oC(r,e){return ra(this,void 0,void 0,function*(){const t=(0,zl.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,Np.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}Vn.getMarketVarsAccountInfo=oC;function aC(r,e,t){return ra(this,void 0,void 0,function*(){const n=(0,zl.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,Np.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}Vn.getFeeExemptAccountInfo=aC;function cC(r,e,t){return ra(this,void 0,void 0,function*(){const n=(0,zl.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,Np.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}Vn.getRegisteredCurrencyAccountInfo=cC;function Dp(r,e,t){return ra(this,void 0,void 0,function*(){return yield(0,zl.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}Vn.getRegisteredCurrencyInfoFromPubkey=Dp;function uC(r,e,t,n,i,s){return ra(this,void 0,void 0,function*(){let a=0;const u=yield Dp(r,e,i),[f]=yield(0,Lh.getStakingAccount)(t,n,s),h=yield(0,Lh.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new el.BN(0))){const d=u.royaltyTiers;let m=new el.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}Vn.getRoyaltyReductionForUserAndMint=uC;function lC(r,e,t,n,i){return ra(this,void 0,void 0,function*(){let s=0;const a=yield Dp(r,e,i),u=yield(0,Lh.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new el.BN(0))){const f=a.royaltyTiers;let h=new el.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}Vn.getRoyaltyReductionForStakingAccount=lC;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(In,r),t(tn,r),t(Vn,r),t(xn,r)})(is);var dc={},Jn={},Hi={},fC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.convertDecimalPriceToBn=Hi.initializeAtaForMint=Hi.getOrderSide=void 0;const dC=ht,hC=Fs,nh=lc,pC=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";Hi.getOrderSide=pC;function gC({mint:r,owner:e,connection:t}){return fC(this,void 0,void 0,function*(){const n=[],i=yield(0,hC.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(nh.Token.createAssociatedTokenAccountInstruction(nh.ASSOCIATED_TOKEN_PROGRAM_ID,nh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}Hi.initializeAtaForMint=gC;const yC=(r,e)=>new dC.BN(r*Math.pow(10,e));Hi.convertDecimalPriceToBn=yC;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Wr,r),t(Hi,r)})(Jn);var mC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(dc,"__esModule",{value:!0});dc.createOrderCounterInstruction=void 0;const bC=Jn;function vC({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return mC(this,void 0,void 0,function*(){return yield(0,bC.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}dc.createOrderCounterInstruction=vC;var _C=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.createCancelOrderInstruction=void 0;const wC=ht,SC=is,AC=dc,Eb=Jn,kC=Cr;function IC({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return _C(this,void 0,void 0,function*(){const s=(0,Eb.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,Eb.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,kC.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof wC.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,SC.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,AC.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}Fl.createCancelOrderInstruction=IC;var Do={},aw=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Do,"__esModule",{value:!0});Do.createInitializeSellOrderInstruction=Do.createInitializeBuyOrderInstruction=void 0;const To=ht,cw=Jn,uw=Cr,lw=is,fw=dc,dw=Cr;function EC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return aw(this,void 0,void 0,function*(){const f=(0,cw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,uw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof To.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,lw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,fw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=To.web3.Keypair.generate();h.signers.push(A);const R=yield(0,dw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeBuy(n,new To.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Do.createInitializeBuyOrderInstruction=EC;function OC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return aw(this,void 0,void 0,function*(){const f=(0,cw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,uw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof To.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,lw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,fw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=To.web3.Keypair.generate();h.signers.push(A);const R=yield(0,dw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeSell(n,new To.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Do.createInitializeSellOrderInstruction=OC;var Vl={},PC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.createDeregisterCurrencyInstruction=void 0;const TC=Jn;function RC({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return PC(this,void 0,void 0,function*(){const s=[yield(0,TC.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}Vl.createDeregisterCurrencyInstruction=RC;var $l={},jl={},ql={},hw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",M=d+"Division by zero",A={},R=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var V=this;if(!(V instanceof E))return N===R?Y():new E(N);if(N instanceof E)V.s=N.s,V.e=N.e,V.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(V,N)}V.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var V,J,K;if(!C.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(V=N.indexOf("."))>-1&&(N=N.replace(".","")),(J=N.search(/e/i))>0?(V<0&&(V=J),V+=+N.slice(J+1),N=N.substring(0,J)):V<0&&(V=N.length),K=N.length,J=0;J<K&&N.charAt(J)=="0";)++J;if(J==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=V-J-1,E.c=[],V=0;J<=K;)E.c[V++]=+N.charAt(J++)}return E}function oe(E,N,V,J){var K=E.c;if(V===R&&(V=E.constructor.RM),V!==0&&V!==1&&V!==2&&V!==3)throw Error(O);if(N<1)J=V===3&&(J||!!K[0])||N===0&&(V===1&&K[0]>=5||V===2&&(K[0]>5||K[0]===5&&(J||K[1]!==R))),K.length=1,J?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(J=V===1&&K[N]>=5||V===2&&(K[N]>5||K[N]===5&&(J||K[N+1]!==R||K[N-1]&1))||V===3&&(J||!!K[0]),K.length=N,J){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,V){var J=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(J<0?"e":"e+")+J;else if(J<0){for(;++J;)K="0"+K;K="0."+K}else if(J>0)if(++J>j)for(J-=j;J--;)K+="0";else J<j&&(K=K.slice(0,J)+"."+K.slice(J));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&V?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,V=this,J=V.c,K=(E=new V.constructor(E)).c,j=V.s,te=E.s,T=V.e,z=E.e;if(!J[0]||!K[0])return J[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=z)return T>z^N?1:-1;for(te=(T=J.length)<(z=K.length)?T:z,j=-1;++j<te;)if(J[j]!=K[j])return J[j]>K[j]^N?1:-1;return T==z?0:T>z^N?1:-1},A.div=function(E){var N=this,V=N.constructor,J=N.c,K=(E=new V(E)).c,j=N.s==E.s?1:-1,te=V.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(M);if(!J[0])return E.s=j,E.c=[E.e=0],E;var T,z,X,Re,ye,Ie=K.slice(),Vt=T=K.length,$t=J.length,_e=J.slice(0,T),We=_e.length,Jt=E,an=Jt.c=[],At=0,ut=te+(Jt.e=N.e-E.e)+1;for(Jt.s=j,j=ut<0?0:ut,Ie.unshift(0);We++<T;)_e.push(0);do{for(X=0;X<10;X++){if(T!=(We=_e.length))Re=T>We?1:-1;else for(ye=-1,Re=0;++ye<T;)if(K[ye]!=_e[ye]){Re=K[ye]>_e[ye]?1:-1;break}if(Re<0){for(z=We==T?K:Ie;We;){if(_e[--We]<z[We]){for(ye=We;ye&&!_e[--ye];)_e[ye]=9;--_e[ye],_e[We]+=10}_e[We]-=z[We]}for(;!_e[0];)_e.shift()}else break}an[At++]=Re?X:++X,_e[0]&&Re?_e[We]=J[Vt]||0:_e=[J[Vt]]}while((Vt++<$t||_e[0]!==R)&&j--);return!an[0]&&At!=1&&(an.shift(),Jt.e--,ut--),At>ut&&oe(Jt,ut,V.RM,_e[0]!==R),Jt},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,V,J,K,j=this,te=j.constructor,T=j.s,z=(E=new te(E)).s;if(T!=z)return E.s=-z,j.plus(E);var X=j.c.slice(),Re=j.e,ye=E.c,Ie=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-z:X[0]?E=new te(j):E.s=1,E;if(T=Re-Ie){for((K=T<0)?(T=-T,J=X):(Ie=Re,J=ye),J.reverse(),z=T;z--;)J.push(0);J.reverse()}else for(V=((K=X.length<ye.length)?X:ye).length,T=z=0;z<V;z++)if(X[z]!=ye[z]){K=X[z]<ye[z];break}if(K&&(J=X,X=ye,ye=J,E.s=-E.s),(z=(V=ye.length)-(N=X.length))>0)for(;z--;)X[N++]=0;for(z=N;V>T;){if(X[--V]<ye[V]){for(N=V;N&&!X[--N];)X[N]=9;--X[N],X[V]+=10}X[V]-=ye[V]}for(;X[--z]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ie;return X[0]||(E.s=1,X=[Ie=0]),E.c=X,E.e=Ie,E},A.mod=function(E){var N,V=this,J=V.constructor,K=V.s,j=(E=new J(E)).s;if(!E.c[0])throw Error(M);return V.s=E.s=1,N=E.cmp(V)==1,V.s=K,E.s=j,N?new J(V):(K=J.DP,j=J.RM,J.DP=J.RM=0,V=V.div(E),J.DP=K,J.RM=j,this.minus(V.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,V,J,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,z=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-z){for(N>0?(z=te,J=X):(N=-N,J=T),J.reverse();N--;)J.push(0);J.reverse()}for(T.length-X.length<0&&(J=X,X=T,T=J),N=X.length,V=0;N;T[N]%=10)V=(T[--N]=T[N]+X[N]+V)/10|0;for(V&&(T.unshift(V),++z),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=z,E},A.pow=function(E){var N=this,V=new N.constructor("1"),J=V,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(J=J.times(N)),E>>=1,!!E;)N=N.times(N);return K?V.div(J):J},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,V,J=this,K=J.constructor,j=J.s,te=J.e,T=new K("0.5");if(!J.c[0])return new K(J);if(j<0)throw Error(d+"No square root");j=Math.sqrt(J+""),j===0||j===1/0?(N=J.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do V=E,E=T.times(V.plus(J.div(V)));while(V.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,V=this,J=V.constructor,K=V.c,j=(E=new J(E)).c,te=K.length,T=j.length,z=V.e,X=E.e;if(E.s=V.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=z+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(z=T;z--;){for(T=0,X=te+z;X>z;)T=N[X]+j[z]*K[X-z-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),z=N.length;!N[--z];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),++E,N);V.c.length<E;)V.c.push(0)}return de(V,!0,!!J)},A.toFixed=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),E+V.e+1,N),E=E+V.e+1;V.c.length<E;)V.c.push(0)}return de(V,!1,!!J)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},A.toPrecision=function(E,N){var V=this,J=V.constructor,K=V.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(V=oe(new J(V),E,N);V.c.length<E;)V.c.push(0)}return de(V,E<=V.e||V.e<=J.NE||V.e>=J.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(W)})(hw);function Me(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var BC={};function Up(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:BC}var pw=Object.assign,tl=Object.getOwnPropertyDescriptor,si=Object.defineProperty,hc=Object.prototype,Kh=[];Object.freeze(Kh);var Fp={};Object.freeze(Fp);var xC=typeof Proxy<"u",MC=Object.toString();function gw(){xC||Me("Proxy not available")}function yw(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var So=function(){};function hr(r){return typeof r=="function"}function Ms(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Gl(r){return r!==null&&typeof r=="object"}function Pi(r){if(!Gl(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===MC}function mw(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function pc(r,e,t){si(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function bw(r,e,t){si(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function os(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return Gl(n)&&n[t]===!0}}function ia(r){return r instanceof Map}function gc(r){return r instanceof Set}var vw=typeof Object.getOwnPropertySymbols<"u";function CC(r){var e=Object.keys(r);if(!vw)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return hc.propertyIsEnumerable.call(r,n)})):e}var Uo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:vw?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function _w(r){return r===null?null:typeof r=="object"?""+r:r}function Ei(r,e){return hc.hasOwnProperty.call(r,e)}var LC=Object.getOwnPropertyDescriptors||function(e){var t={};return Uo(e).forEach(function(n){t[n]=tl(e,n)}),t};function Ob(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,DC(n.key),n)}}function Wp(r,e,t){return e&&Ob(r.prototype,e),t&&Ob(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function es(){return es=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},es.apply(this,arguments)}function ww(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Nh(r,e)}function Nh(r,e){return Nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nh(r,e)}function rh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function KC(r,e){if(!!r){if(typeof r=="string")return Pb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pb(r,e)}}function Pb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ao(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=KC(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NC(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function DC(r){var e=NC(r,"string");return typeof e=="symbol"?e:String(e)}var ii=Symbol("mobx-stored-annotations");function zr(r){function e(t,n){if(yc(n))return r.decorate_20223_(t,n);sa(t,n,r)}return Object.assign(e,r)}function sa(r,e,t){Ei(r,ii)||pc(r,ii,es({},r[ii])),GC(t)||(r[ii][e]=t)}function UC(r){return Ei(r,ii)||pc(r,ii,es({},r[ii])),r[ii]}function yc(r){return typeof r=="object"&&typeof r.kind=="string"}var Ae=Symbol("mobx administration"),mc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=et.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return zw(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),$n(),Vw(this),jn()},e.toString=function(){return this.name_},r}(),zp=os("Atom",mc);function Hl(r,e,t){e===void 0&&(e=So),t===void 0&&(t=So);var n=new mc(r);return e!==So&&Xw(n,e),t!==So&&_c(n,t),n}function FC(r,e){return r===e}function WC(r,e){return Jp(r,e)}function zC(r,e){return Jp(r,e,1)}function VC(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Cs={identity:FC,structural:WC,default:VC,shallow:zC};function Ls(r,e,t){return nf(r)?r:Array.isArray(r)?Tt.array(r,{name:t}):Pi(r)?Tt.object(r,void 0,{name:t}):ia(r)?Tt.map(r,{name:t}):gc(r)?Tt.set(r,{name:t}):typeof r=="function"&&!as(r)&&!Vo(r)?mw(r)?Ds(r):zo(t,r):r}function $C(r,e,t){if(r==null||rn(r)||ln(r)||on(r)||Cn(r))return r;if(Array.isArray(r))return Tt.array(r,{name:t,deep:!1});if(Pi(r))return Tt.object(r,void 0,{name:t,deep:!1});if(ia(r))return Tt.map(r,{name:t,deep:!1});if(gc(r))return Tt.set(r,{name:t,deep:!1})}function Yl(r){return r}function jC(r,e){return Jp(r,e)?e:r}var Sw="override",qC=zr({annotationType_:Sw,make_:HC,extend_:YC,decorate_20223_:JC});function GC(r){return r.annotationType_===Sw}function HC(r,e){return 0}function YC(r,e,t,n){Me("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function JC(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function bc(r,e){return{annotationType_:r,options_:e,make_:QC,extend_:XC,decorate_20223_:ZC}}function QC(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(as(t.value))return 1;var s=Aw(r,this,e,t,!1);return si(n,e,s),2}function XC(r,e,t,n){var i=Aw(r,this,e,t);return r.defineProperty_(e,i,n)}function ZC(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return ts((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){sa(this,n,s)});return}if(t=="method"){var u;return as(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Me("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function eL(r,e,t,n){e.annotationType_,n.value}function Aw(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),eL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:ts((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function kw(r,e){return{annotationType_:r,options_:e,make_:tL,extend_:nL,decorate_20223_:rL}}function tL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Ei(r.target_,e)||!Vo(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(Vo(t.value))return 1;var s=Iw(r,this,e,t,!1,!1);return si(n,e,s),2}function nL(r,e,t,n){var i,s=Iw(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function rL(r,e){var t,n=e.name,i=e.addInitializer;return Vo(r)||(r=Ds(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function iL(r,e,t,n){e.annotationType_,n.value}function Iw(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),iL(r,e,t,n);var a=n.value;if(Vo(a)||(a=Ds(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function Vp(r,e){return{annotationType_:r,options_:e,make_:sL,extend_:oL,decorate_20223_:aL}}function sL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function oL(r,e,t,n){return cL(r,this,e,t),r.defineComputedProperty_(e,es({},this.options_,{get:t.get,set:t.set}),n)}function aL(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=Hs(this)[Ae],a=es({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new Wo(a))}),function(){return this[Ae].getObservablePropValue_(n)}}function cL(r,e,t,n){e.annotationType_,n.get}function Jl(r,e){return{annotationType_:r,options_:e,make_:uL,extend_:lL,decorate_20223_:fL}}function uL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function lL(r,e,t,n){var i,s;return dL(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Ls,n)}function fL(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=Hs(u)[Ae],I=new Yi(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Ls,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Ae].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[Ae].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function dL(r,e,t,n){e.annotationType_}var hL="true",pL=Ew();function Ew(r){return{annotationType_:hL,options_:r,make_:gL,extend_:yL,decorate_20223_:mL}}function gL(r,e,t,n){var i,s;if(t.get)return xr.make_(r,e,t,n);if(t.set){var a=ts(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(si(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(mw(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?Ds.bound:Ds;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?zo.bound:zo;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?Tt.ref:Tt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function yL(r,e,t,n){var i,s;if(t.get)return xr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:ts(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?Tt.ref:Tt;return u.extend_(r,e,t,n)}function mL(r,e){Me("'"+this.annotationType_+"' cannot be used as a decorator")}var bL="observable",vL="observable.ref",_L="observable.shallow",wL="observable.struct",Ow={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Ow);function Su(r){return r||Ow}var Dh=Jl(bL),SL=Jl(vL,{enhancer:Yl}),AL=Jl(_L,{enhancer:$C}),kL=Jl(wL,{enhancer:jC}),Pw=zr(Dh);function Au(r){return r.deep===!0?Ls:r.deep===!1?Yl:EL(r.defaultDecorator)}function IL(r){var e;return r?(e=r.defaultDecorator)!=null?e:Ew(r):void 0}function EL(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Ls}function Tw(r,e,t){if(yc(e))return Dh.decorate_20223_(r,e);if(Ms(e)){sa(r,e,Dh);return}return nf(r)?r:Pi(r)?Tt.object(r,e,t):Array.isArray(r)?Tt.array(r,e):ia(r)?Tt.map(r,e):gc(r)?Tt.set(r,e):typeof r=="object"&&r!==null?r:Tt.box(r,e)}pw(Tw,Pw);var OL={box:function(e,t){var n=Su(t);return new Yi(e,Au(n),n.name,!0,n.equals)},array:function(e,t){var n=Su(t);return(fe.useProxies===!1||n.proxy===!1?DK:PK)(e,Au(n),n.name)},map:function(e,t){var n=Su(t);return new rf(e,Au(n),n.name)},set:function(e,t){var n=Su(t);return new Hp(e,Au(n),n.name)},object:function(e,t,n){return us(function(){return ef(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?Hs({},n):kK({},n),e,t)})},ref:zr(SL),shallow:zr(AL),deep:Pw,struct:zr(kL)},Tt=pw(Tw,OL),Rw="computed",PL="computed.struct",Uh=Vp(Rw),TL=Vp(PL,{equals:Cs.structural}),xr=function(e,t){if(yc(t))return Uh.decorate_20223_(e,t);if(Ms(t))return sa(e,t,Uh);if(Pi(e))return zr(Vp(Rw,e));var n=Pi(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Wo(n)};Object.assign(xr,Uh);xr.struct=zr(TL);var Tb,Rb,nl=0,RL=1,BL=(Tb=(Rb=tl(function(){},"name"))==null?void 0:Rb.configurable)!=null?Tb:!1,Bb={value:"action",configurable:!0,writable:!1,enumerable:!1};function ts(r,e,t,n){t===void 0&&(t=!1);function i(){return Bw(r,t,e,n||this,arguments)}return i.isMobxAction=!0,BL&&(Bb.value=r,si(i,"name",Bb)),i}function Bw(r,e,t,n,i){var s=xw(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{Mw(s)}}function xw(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;$n();var f=fe.allowStateChanges;u&&(Gs(),f=Ql(!0));var h=Zl(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:RL++,parentActionId_:nl};return nl=d.actionId_,d}function Mw(r){nl!==r.actionId_&&Me(30),nl=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),Xl(r.prevAllowStateChanges_),Ro(r.prevAllowStateReads_),jn(),r.runAsAction_&&Oi(r.prevDerivation_),fe.suppressReactionErrors=!1}function Fo(r,e){var t=Ql(r);try{return e()}finally{Xl(t)}}function Ql(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function Xl(r){fe.allowStateChanges=r}var Cw;Cw=Symbol.toPrimitive;var Yi=function(r){ww(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Cs.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Rr(this)){var s=Br(this,{object:this,type:oi,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Vr(this)&&$r(this,{type:oi,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return wc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:oi,newValue:this.value_,oldValue:void 0}),Sc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return _w(this.get())},t[Cw]=function(){return this.valueOf()},e}(mc),$p=os("ObservableValue",Yi),Lw;Lw=Symbol.toPrimitive;var Wo=function(){function r(t){this.dependenciesState_=et.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=et.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new il(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=rl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Me(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ts("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Cs.structural:Cs.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){FL(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Me(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Fh(this)&&(this.warnAboutUntrackedRead_(),$n(),this.value_=this.computeValue_(!1),jn());else if(zw(this),Fh(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&UL(this),fe.trackingContext=n}var i=this.value_;if(Wu(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Me(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Me(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===et.NOT_TRACKING_,s=this.computeValue_(!0),a=i||Wu(n)||Wu(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=Ql(!1),s;if(n)s=Kw(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new il(a)}return Xl(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(Wh(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Ns(function(){var f=s.get();if(!a||i){var h=Gs();n({observableKind:"computed",debugObjectName:s.name_,type:oi,object:s,newValue:f,oldValue:u}),Oi(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return _w(this.get())},e[Lw]=function(){return this.valueOf()},r}(),Ks=os("ComputedValue",Wo),et;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(et||(et={}));var rl;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(rl||(rl={}));var il=function(e){this.cause=void 0,this.cause=e};function Wu(r){return r instanceof il}function Fh(r){switch(r.dependenciesState_){case et.UP_TO_DATE_:return!1;case et.NOT_TRACKING_:case et.STALE_:return!0;case et.POSSIBLY_STALE_:{for(var e=Zl(!0),t=Gs(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(Ks(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Oi(t),Ro(e),!0}if(r.dependenciesState_===et.STALE_)return Oi(t),Ro(e),!0}}return Nw(r),Oi(t),Ro(e),!1}}}function vc(){return fe.trackingDerivation!==null}function Kw(r,e,t){var n=Zl(!0);Nw(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new il(a)}return fe.inBatch--,fe.trackingDerivation=i,xL(r),Ro(n),s}function xL(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=et.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&Fw(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,DL(h,r))}n!==et.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function Wh(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)Fw(e[t],r);r.dependenciesState_=et.NOT_TRACKING_}function jp(r){var e=Gs();try{return r()}finally{Oi(e)}}function Gs(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function Oi(r){fe.trackingDerivation=r}function Zl(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function Ro(r){fe.allowStateReads=r}function Nw(r){if(r.dependenciesState_!==et.UP_TO_DATE_){r.dependenciesState_=et.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=et.UP_TO_DATE_}}var ML=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Wa=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},zu=!0,Dw=!1,fe=function(){var r=Up();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(zu=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new Wa().version&&(zu=!1),zu?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new Wa):(setTimeout(function(){Dw||Me(35)},1),new Wa)}();function CL(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Me(36),Dw=!0,zu){var r=Up();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new Wa}}function Uw(){return fe}function LL(){var r=new Wa;for(var e in r)ML.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function KL(r){return r.observers_&&r.observers_.size>0}function NL(r){return r.observers_}function DL(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function Fw(r,e){r.observers_.delete(e),r.observers_.size===0&&Ww(r)}function Ww(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function $n(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function jn(){if(--fe.inBatch===0){$w();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof Wo&&t.suspend_())}fe.pendingUnobservations=[]}}function zw(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&Ww(r),!1)}function Vw(r){r.lowestObserverState_!==et.STALE_&&(r.lowestObserverState_=et.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===et.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=et.STALE_}))}function UL(r){r.lowestObserverState_!==et.STALE_&&(r.lowestObserverState_=et.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===et.POSSIBLY_STALE_?e.dependenciesState_=et.STALE_:e.dependenciesState_===et.UP_TO_DATE_&&(r.lowestObserverState_=et.UP_TO_DATE_)}))}function FL(r){r.lowestObserverState_===et.UP_TO_DATE_&&(r.lowestObserverState_=et.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===et.UP_TO_DATE_&&(e.dependenciesState_=et.POSSIBLY_STALE_,e.onBecomeStale_())}))}var Za=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=et.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=rl.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),$w())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){$n(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,Fh(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,jn()}},e.track=function(n){if(!this.isDisposed_){$n(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=Kw(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Wh(this),Wu(s)&&this.reportExceptionInDerivation_(s.cause),jn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||($n(),Wh(this),jn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Ae]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function WL(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var zL=100,zh=function(e){return e()};function $w(){fe.inBatch>0||fe.isRunningReactions||zh(VL)}function VL(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===zL&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var sl=os("Reaction",Za);function $L(r){var e=zh;zh=function(n){return r(function(){return e(n)})}}function za(){return!1}function jw(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var qw="action",jL="action.bound",Gw="autoAction",qL="autoAction.bound",Hw="<unnamed action>",Vh=bc(qw),GL=bc(jL,{bound:!0}),$h=bc(Gw,{autoAction:!0}),HL=bc(qL,{autoAction:!0,bound:!0});function Yw(r){var e=function(n,i){if(hr(n))return ts(n.name||Hw,n,r);if(hr(i))return ts(n,i,r);if(yc(i))return(r?$h:Vh).decorate_20223_(n,i);if(Ms(i))return sa(n,i,r?$h:Vh);if(Ms(n))return zr(bc(r?Gw:qw,{name:n,autoAction:r}))};return e}var Dt=Yw(!1);Object.assign(Dt,Vh);var zo=Yw(!0);Object.assign(zo,$h);Dt.bound=zr(GL);zo.bound=zr(HL);function ec(r){return Bw(r.name||Hw,!1,r,this,void 0)}function as(r){return hr(r)&&r.isMobxAction===!0}function Ns(r,e){var t,n,i,s,a;e===void 0&&(e=Fp);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new Za(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=Jw(e),m=!1;h=new Za(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var YL=function(e){return e()};function Jw(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:YL}function Qw(r,e,t){var n,i,s,a;t===void 0&&(t=Fp);var u=(n=t.name)!=null?n:"Reaction",f=Dt(u,t.onError?JL(t.onError,e):e),h=!t.scheduler&&!t.delay,d=Jw(t),m=!0,I=!1,O,M,A=t.compareStructural?Cs.structural:t.equals||Cs.default,R=new Za(u,function(){m||h?C():I||(I=!0,d(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=Fo(!1,function(){return r(R)});Y=m||!A(O,ae),M=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,M,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function JL(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var QL="onBO",XL="onBUO";function Xw(r,e,t){return Zw(QL,r,e,t)}function _c(r,e,t){return Zw(XL,r,e,t)}function Zw(r,e,t,n){var i=typeof n=="function"?ai(e,t):ai(e),s=hr(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var ZL="never",ku="always",eK="observed";function tK(r){r.isolateGlobalState===!0&&CL();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===ku?!0:e===ZL?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===ku?ku:t===eK;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===ku)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&$L(r.reactionScheduler)}function ef(r,e,t,n){var i=LC(e);return us(function(){var s=Hs(r,n)[Ae];Uo(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function nK(r,e){return e0(ai(r,e))}function e0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=iK(r.observing_).map(e0)),e}function rK(r,e){return t0(ai(r,e))}function t0(r){var e={name:r.name_};return KL(r)&&(e.observers=Array.from(NL(r)).map(t0)),e}function iK(r){return Array.from(new Set(r))}var sK=0;function tf(){this.message="FLOW_CANCELLED"}tf.prototype=Object.create(Error.prototype);function oK(r){return r instanceof tf}var ih=kw("flow"),aK=kw("flow.bound",{bound:!0}),Ds=Object.assign(function(e,t){if(yc(t))return ih.decorate_20223_(e,t);if(Ms(t))return sa(e,t,ih);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++sK,d=Dt(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(M,A){var R=0;m=A;function C(oe){I=void 0;var de;try{de=Dt(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return A(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=Dt(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return A(E)}ae(de)}function ae(oe){if(hr(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?M(oe.value):(I=Promise.resolve(oe.value),I.then(C,Y))}C(void 0)});return O.cancel=Dt(i+" - runid: "+h+" - cancel",function(){try{I&&xb(I);var M=d.return(void 0),A=Promise.resolve(M.value);A.then(So,So),xb(A),m(new tf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},ih);Ds.bound=zr(aK);function xb(r){hr(r.cancel)&&r.cancel()}function cK(r){return r}function Vo(r){return(r==null?void 0:r.isMobXFlow)===!0}function uK(r,e,t){var n;return on(r)||ln(r)||$p(r)?n=ci(r):rn(r)&&(n=ci(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function lK(r,e,t){return hr(t)?dK(r,e,t):fK(r,e)}function fK(r,e){return ci(r).intercept_(e)}function dK(r,e,t){return ci(r,e).intercept_(t)}function n0(r,e){if(e===void 0)return Ks(r);if(rn(r)===!1||!r[Ae].values_.has(e))return!1;var t=ai(r,e);return Ks(t)}function r0(r){return n0(r)}function Vu(r,e){return n0(r,e)}function i0(r,e){return r?e!==void 0?rn(r)?r[Ae].values_.has(e):!1:rn(r)||!!r[Ae]||zp(r)||sl(r)||Ks(r):!1}function nf(r){return i0(r)}function hK(r,e){return i0(r,e)}function $o(r){if(rn(r))return r[Ae].keys_();if(on(r)||Cn(r))return Array.from(r.keys());if(ln(r))return r.map(function(e,t){return t});Me(5)}function s0(r){if(rn(r))return $o(r).map(function(e){return r[e]});if(on(r))return $o(r).map(function(e){return r.get(e)});if(Cn(r))return Array.from(r.values());if(ln(r))return r.slice();Me(6)}function o0(r){if(rn(r))return $o(r).map(function(e){return[e,r[e]]});if(on(r))return $o(r).map(function(e){return[e,r.get(e)]});if(Cn(r))return Array.from(r.entries());if(ln(r))return r.map(function(e,t){return[t,e]});Me(7)}function a0(r,e,t){if(arguments.length===2&&!Cn(r)){$n();var n=e;try{for(var i in n)a0(r,i,n[i])}finally{jn()}return}rn(r)?r[Ae].set_(e,t):on(r)?r.set(e,t):Cn(r)?r.add(e):ln(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Me("Invalid index: '"+e+"'"),$n(),e>=r.length&&(r.length=e+1),r[e]=t,jn()):Me(8)}function pK(r,e){rn(r)?r[Ae].delete_(e):on(r)||Cn(r)?r.delete(e):ln(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Me(9)}function c0(r,e){if(rn(r))return r[Ae].has_(e);if(on(r))return r.has(e);if(Cn(r))return r.has(e);if(ln(r))return e>=0&&e<r.length;Me(10)}function gK(r,e){if(!!c0(r,e)){if(rn(r))return r[Ae].get_(e);if(on(r))return r.get(e);if(ln(r))return r[e];Me(11)}}function yK(r,e,t){if(rn(r))return r[Ae].defineProperty_(e,t);Me(39)}function u0(r){if(rn(r))return r[Ae].ownKeys_();Me(38)}function jo(r,e,t,n){return hr(t)?bK(r,e,t,n):mK(r,e,t)}function mK(r,e,t){return ci(r).observe_(e,t)}function bK(r,e,t,n){return ci(r,e).observe_(t,n)}function Iu(r,e,t){return r.set(e,t),t}function yo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!nf(r))return r;if($p(r)||Ks(r))return yo(r.get(),e);if(e.has(r))return e.get(r);if(ln(r)){var t=Iu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=yo(a,e)}),t}if(Cn(r)){var n=Iu(e,r,new Set);return r.forEach(function(a){n.add(yo(a,e))}),n}if(on(r)){var i=Iu(e,r,new Map);return r.forEach(function(a,u){i.set(u,yo(a,e))}),i}else{var s=Iu(e,r,{});return u0(r).forEach(function(a){hc.propertyIsEnumerable.call(r,a)&&(s[a]=yo(r[a],e))}),s}}function vK(r,e){return yo(r,new Map)}function _K(){}function Tr(r,e){e===void 0&&(e=void 0),$n();try{return r.apply(e)}finally{jn()}}function wK(r,e,t){return arguments.length===1||e&&typeof e=="object"?SK(r,e):l0(r,e,t||{})}function l0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Ae].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=ts("When-effect",e),a=Ns(function(u){var f=Fo(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function SK(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=l0(r,a,es({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function fo(r){return r[Ae]}var AK={has:function(e,t){return fo(e).has_(t)},get:function(e,t){return fo(e).get_(t)},set:function(e,t,n){var i;return Ms(t)?(i=fo(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return Ms(t)?(n=fo(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=fo(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return fo(e).ownKeys_()},preventExtensions:function(e){Me(13)}};function kK(r,e){var t,n;return gw(),r=Hs(r,e),(n=(t=r[Ae]).proxy_)!=null?n:t.proxy_=new Proxy(r,AK)}function Rr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function wc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),yw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Br(r,e){var t=Gs();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Me(14),!!e);i++);return e}finally{Oi(t)}}function Vr(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Sc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),yw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function $r(r,e){var t=Gs(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Oi(t)}}function qp(r,e,t){return us(function(){var n,i=Hs(r,t)[Ae];(n=e)!=null||(e=UC(r)),Uo(e).forEach(function(s){return i.make_(s,e[s])})}),r}var sh=Symbol("mobx-keys");function IK(r,e,t){return Pi(r)?ef(r,r,e,t):(us(function(){var n=Hs(r,t)[Ae];if(!r[sh]){var i=Object.getPrototypeOf(r),s=new Set([].concat(Uo(r),Uo(i)));s.delete("constructor"),s.delete(Ae),pc(i,sh,s)}r[sh].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var Mb="splice",oi="update",EK=1e4,OK={get:function(e,t){var n=e[Ae];return t===Ae?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Ei(ol,t)?ol[t]:e[t]},set:function(e,t,n){var i=e[Ae];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Me(15)}},Gp=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new mc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return wc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Sc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Me("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Me(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&v0(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=Kh),Rr(this)){var f=Br(this,{object:this.proxy_,type:Mb,index:n,removedCount:i,added:s});if(!f)return Kh;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<EK){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&za(),u=Vr(this),f=u||a?{observableKind:"array",object:this.proxy_,type:oi,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&$r(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&za(),u=Vr(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Mb,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&$r(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Me(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Rr(this)){var u=Br(this,{type:oi,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function PK(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),gw(),us(function(){var i=new Gp(t,e,n,!1);bw(i.values_,Ae,i);var s=new Proxy(i.values_,OK);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var ol={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ae];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Ae];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Ae].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ae].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Me(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Me(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ae],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};sn("concat",Ri);sn("flat",Ri);sn("includes",Ri);sn("indexOf",Ri);sn("join",Ri);sn("lastIndexOf",Ri);sn("slice",Ri);sn("toString",Ri);sn("toLocaleString",Ri);sn("every",cs);sn("filter",cs);sn("find",cs);sn("findIndex",cs);sn("flatMap",cs);sn("forEach",cs);sn("map",cs);sn("some",cs);sn("reduce",f0);sn("reduceRight",f0);function sn(r,e){typeof Array.prototype[r]=="function"&&(ol[r]=e(r))}function Ri(r){return function(){var e=this[Ae];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function cs(r){return function(e,t){var n=this,i=this[Ae];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function f0(r){return function(){var e=this,t=this[Ae];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var TK=os("ObservableArrayAdministration",Gp);function ln(r){return Gl(r)&&TK(r[Ae])}var d0,h0,RK={},qi="add",al="delete";d0=Symbol.iterator;h0=Symbol.toStringTag;var rf=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ls),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ae]=RK,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,hr(Map)||Me(18),us(function(){s.keysAtom_=Hl("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new Yi(this.has_(n),Yl,"ObservableMap.key?",!1);this.hasMap_.set(n,a),_c(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Rr(this)){var a=Br(this,{type:s?oi:qi,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Rr(this)){var s=Br(this,{type:al,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=za(),u=Vr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:al,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Tr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&$r(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=za(),u=Vr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:oi,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&$r(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Tr(function(){var h,d=new Yi(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=za(),u=Vr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:qi,object:this,name:n,newValue:i}:null;u&&$r(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return tc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return tc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[d0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=Ao(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return on(n)&&(n=new Map(n)),Tr(function(){Pi(n)?CC(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):ia(n)?(n.constructor!==Map&&Me(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Me(20,n)}),this},e.clear=function(){var n=this;Tr(function(){jp(function(){for(var i=Ao(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Tr(function(){for(var s=BK(n),a=new Map,u=!1,f=Ao(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=Ao(s.entries()),M;!(M=O()).done;){var A=M.value,R=A[0],C=A[1],Y=i.data_.has(R);if(i.set(R,C),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Sc(this,n)},e.intercept_=function(n){return wc(this,n)},Wp(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:h0,get:function(){return"Map"}}]),r}(),on=os("ObservableMap",rf);function BK(r){if(ia(r)||on(r))return r;if(Array.isArray(r))return new Map(r);if(Pi(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Me(21,r)}var p0,g0,xK={};p0=Symbol.iterator;g0=Symbol.toStringTag;var Hp=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ls),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ae]=xK,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,hr(Set)||Me(22),this.enhancer_=function(a,u){return n(a,u,i)},us(function(){s.atom_=Hl(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Tr(function(){jp(function(){for(var i=Ao(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=Ao(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Rr(this)){var s=Br(this,{type:qi,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Tr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=Vr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:qi,object:this,newValue:n}:null;u&&$r(this,f)}return this},e.delete=function(n){var i=this;if(Rr(this)){var s=Br(this,{type:al,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=Vr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:al,object:this,oldValue:n}:null;return Tr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&$r(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return tc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return tc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Cn(n)&&(n=new Set(n)),Tr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):gc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Me("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Sc(this,n)},e.intercept_=function(n){return wc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[p0]=function(){return this.values()},Wp(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:g0,get:function(){return"Set"}}]),r}(),Cn=os("ObservableSet",Hp),Cb=Object.create(null),Lb="remove",y0=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=pL),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new mc("ObservableObject.keys"),this.isPlainObject_=Pi(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof Wo)return s.set(i),!0;if(Rr(this)){var a=Br(this,{type:oi,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=Vr(this),f=!1,h=u||f?{type:oi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&$r(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Ei(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Ei(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Yi(n in this.target_,Yl,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[ii])!=null&&s[n])return;Me(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==hc;){var u=tl(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}Nb(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&Nb(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{$n();var a=this.delete_(n);if(!a)return a;if(Rr(this)){var u=Br(this,{object:this.proxy_||this.target_,name:n,type:qi,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=es({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else si(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{jn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{$n();var u=this.delete_(n);if(!u)return u;if(Rr(this)){var f=Br(this,{object:this.proxy_||this.target_,name:n,type:qi,newValue:i});if(!f)return null;i=f.newValue}var h=Kb(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else si(this.target_,n,d);var m=new Yi(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{jn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{$n();var a=this.delete_(n);if(!a)return a;if(Rr(this)){var u=Br(this,{object:this.proxy_||this.target_,name:n,type:qi,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=Kb(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else si(this.target_,n,h);this.values_.set(n,new Wo(i)),this.notifyPropertyAddition_(n,void 0)}finally{jn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Ei(this.target_,n))return!0;if(Rr(this)){var s=Br(this,{object:this.proxy_||this.target_,name:n,type:Lb});if(!s)return null}try{var a,u;$n();var f=Vr(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=tl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof Yi&&(m=d.value_),Vw(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:Lb,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&$r(this,O)}}finally{jn()}return!0},e.observe_=function(n,i){return Sc(this,n)},e.intercept_=function(n){return wc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=Vr(this),f=!1;if(u||f){var h=u||f?{type:qi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&$r(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Uo(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function Hs(r,e){var t;if(Ei(r,Ae))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new y0(r,new Map,String(n),IL(e));return pc(r,Ae,i),r}var MK=os("ObservableObjectAdministration",y0);function Kb(r){return Cb[r]||(Cb[r]={get:function(){return this[Ae].getObservablePropValue_(r)},set:function(t){return this[Ae].setObservablePropValue_(r,t)}})}function rn(r){return Gl(r)?MK(r[Ae]):!1}function Nb(r,e,t){var n;(n=r.target_[ii])==null||delete n[t]}var CK=b0(0),LK=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),oh=0,m0=function(){};function KK(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}KK(m0,Array.prototype);var Yp=function(r,e,t){ww(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,us(function(){var d=new Gp(u,a,f,!0);d.proxy_=rh(h),bw(rh(h),Ae,d),s&&s.length&&h.spliceWithArray(0,0,s),LK&&Object.defineProperty(rh(h),"0",CK)}),h}var i=n.prototype;return i.concat=function(){this[Ae].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return ln(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return tc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},Wp(n,[{key:"length",get:function(){return this[Ae].getArrayLength_()},set:function(a){this[Ae].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(m0,Symbol.toStringTag,Symbol.iterator);Object.entries(ol).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&pc(Yp.prototype,e,t)});function b0(r){return{enumerable:!1,configurable:!0,get:function(){return this[Ae].get_(r)},set:function(t){this[Ae].set_(r,t)}}}function NK(r){si(Yp.prototype,""+r,b0(r))}function v0(r){if(r>oh){for(var e=oh;e<r+100;e++)NK(e);oh=r}}v0(1e3);function DK(r,e,t){return new Yp(r,e,t)}function ai(r,e){if(typeof r=="object"&&r!==null){if(ln(r))return e!==void 0&&Me(23),r[Ae].atom_;if(Cn(r))return r.atom_;if(on(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Me(25,e,cl(r)),t}if(rn(r)){if(!e)return Me(26);var n=r[Ae].values_.get(e);return n||Me(27,e,cl(r)),n}if(zp(r)||Ks(r)||sl(r))return r}else if(hr(r)&&sl(r[Ae]))return r[Ae];Me(28)}function ci(r,e){if(r||Me(29),e!==void 0)return ci(ai(r,e));if(zp(r)||Ks(r)||sl(r)||on(r)||Cn(r))return r;if(r[Ae])return r[Ae];Me(24,r)}function cl(r,e){var t;if(e!==void 0)t=ai(r,e);else{if(as(r))return r.name;rn(r)||on(r)||Cn(r)?t=ci(r):t=ai(r)}return t.name_}function us(r){var e=Gs(),t=Ql(!0);$n();try{return r()}finally{jn(),Xl(t),Oi(e)}}var Db=hc.toString;function Jp(r,e,t){return t===void 0&&(t=-1),jh(r,e,t)}function jh(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=Db.call(r);if(a!==Db.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Ub(r),e=Ub(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(hr(f)&&f instanceof f&&hr(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!jh(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Ei(e,I)&&jh(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Ub(r){return ln(r)?r.slice():ia(r)||on(r)||gc(r)||Cn(r)?Array.from(r.entries()):r}function tc(r){return r[Symbol.iterator]=UK,r}function UK(){return this}["Symbol","Map","Set"].forEach(function(r){var e=Up();typeof e[r]>"u"&&Me("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:jw,extras:{getDebugName:cl},$mobx:Ae});var FK=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ae,FlowCancellationError:tf,ObservableMap:rf,ObservableSet:Hp,Reaction:Za,_allowStateChanges:Fo,_allowStateChangesInsideComputed:ec,_allowStateReadsEnd:Ro,_allowStateReadsStart:Zl,_autoAction:zo,_endAction:Mw,_getAdministration:ci,_getGlobalState:Uw,_interceptReads:uK,_isComputingDerivation:vc,_resetGlobalState:LL,_startAction:xw,action:Dt,autorun:Ns,comparer:Cs,computed:xr,configure:tK,createAtom:Hl,defineProperty:yK,entries:o0,extendObservable:ef,flow:Ds,flowResult:cK,get:gK,getAtom:ai,getDebugName:cl,getDependencyTree:nK,getObserverTree:rK,has:c0,intercept:lK,isAction:as,isBoxedObservable:$p,isComputed:r0,isComputedProp:Vu,isFlow:Vo,isFlowCancellationError:oK,isObservable:nf,isObservableArray:ln,isObservableMap:on,isObservableObject:rn,isObservableProp:hK,isObservableSet:Cn,keys:$o,makeAutoObservable:IK,makeObservable:qp,observable:Tt,observe:jo,onBecomeObserved:Xw,onBecomeUnobserved:_c,onReactionError:WL,override:qC,ownKeys:u0,reaction:Qw,remove:pK,runInAction:ec,set:a0,spy:jw,toJS:vK,trace:_K,transaction:Tr,untracked:jp,values:s0,when:wK},Symbol.toStringTag,{value:"Module"})),_0=ic(FK);(function(r){var e=W&&W.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=ht,n=e(hw.exports),i=_0;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(ql);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ql,r)})(jl);var WK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($l,"__esModule",{value:!0});$l.createExchangeInstruction=void 0;const Eu=ht,Ou=Ti,zK=Jn,Fb=is,VK=is,ah=Cr,ch=jl;function $K({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:M,extraAccounts:A=[]}){return WK(this,void 0,void 0,function*(){const R=(0,zK.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Y=u===ch.OrderSide.Sell?new Ou.PublicKey(f):new Ou.PublicKey(h),ae=u===ch.OrderSide.Sell?new Ou.PublicKey(h):new Ou.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,ah.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Eu.web3.Keypair?(oe=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,ah.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Eu.web3.Keypair?(de=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[V]=yield(0,Fb.getOrderVault)(d,Y,s),[J]=yield(0,VK.getOpenOrdersCounter)(d,Y,s);N=yield(0,ah.getTokenAccount)(r,n,Y),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Eu.web3.Keypair?(E=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===ch.OrderSide.Buy?n:d,[j]=yield(0,Fb.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Eu.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:V,orderAccount:e,openOrdersCounter:J,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:M,feeReduction:j}).remainingAccounts(A).instruction();return C.instructions.push(te),C})}$l.createExchangeInstruction=$K;var sf={},jK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(sf,"__esModule",{value:!0});sf.createInitializeMarketInstruction=void 0;const qK=Jn;function GK({connection:r,updateAuthorityAccount:e,programId:t}){return jK(this,void 0,void 0,function*(){const i=[yield(0,qK.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}sf.createInitializeMarketInstruction=GK;var of={},HK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(of,"__esModule",{value:!0});of.createRegisterCurrencyInstruction=void 0;const YK=ht,JK=Jn;function QK({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return HK(this,void 0,void 0,function*(){const u=[yield(0,JK.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new YK.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}of.createRegisterCurrencyInstruction=QK;var Ji={},Qp=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.updateRoyaltyTier=Ji.deleteRoyaltyTier=Ji.addRoyaltyTier=void 0;const nc=ht,Xp=Jn;function XK({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Qp(this,void 0,void 0,function*(){const a=(0,Xp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new nc.BN(n),new nc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Ji.addRoyaltyTier=XK;function ZK({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return Qp(this,void 0,void 0,function*(){const s=(0,Xp.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new nc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}Ji.deleteRoyaltyTier=ZK;function eN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Qp(this,void 0,void 0,function*(){const a=(0,Xp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new nc.BN(n),new nc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Ji.updateRoyaltyTier=eN;var qo={},w0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(qo,"__esModule",{value:!0});qo.createUpdateRegisteredCurrencyVaultInstruction=qo.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const tN=ht,S0=Jn;function nN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return w0(this,void 0,void 0,function*(){return[yield(0,S0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new tN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}qo.createUpdateRegisteredCurrencyRoyaltyInstruction=nN;function rN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return w0(this,void 0,void 0,function*(){return[yield(0,S0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}qo.createUpdateRegisteredCurrencyVaultInstruction=rN;var Go={},A0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Go,"__esModule",{value:!0});Go.createRemoveFeeExemptionInstruction=Go.createAddFeeExemptionInstruction=void 0;const iN=ht,k0=Jn,ul=is;function sN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return A0(this,void 0,void 0,function*(){const s=(0,k0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,ul.getFeeExemptAccount)(n,i),[h]=yield(0,ul.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new iN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}Go.createAddFeeExemptionInstruction=sN;function oN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return A0(this,void 0,void 0,function*(){const s=(0,k0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,ul.getFeeExemptAccount)(n,i),[f]=yield(0,ul.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}Go.createRemoveFeeExemptionInstruction=oN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(iw,r),t(Fl,r),t(Do,r),t(Vl,r),t($l,r),t(sf,r),t(of,r),t(Ji,r),t(qo,r),t(Go,r)})(Kp);var oa={},I0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(I0);var E0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(E0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(fc,r),t(I0,r),t(E0,r)})(oa);var O0={},af={},P0=function(){},aN=function(r){return r};function T0(r){throw new Error("[mobx-utils] "+r)}function ns(r,e){e===void 0&&(e="Illegal state"),r||T0(e)}function R0(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var B0=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(B0(Object.getPrototypeOf(r))||[])},cN=function(r){var e=B0(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},qh=function(r){return cN(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},ll="pending",rc="fulfilled",cf="rejected";function uN(r){switch(this.state){case ll:return r.pending&&r.pending(this.value);case cf:return r.rejected&&r.rejected(this.value);case rc:return r.fulfilled?r.fulfilled(this.value):this.value}}function Gh(r,e){if(ns(arguments.length<=2,"fromPromise expects up to two arguments"),ns(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Dt("observableFromPromise-resolve",function(i){t.value=i,t.state=rc}),Dt("observableFromPromise-reject",function(i){t.value=i,t.state=cf})),t.isPromiseBasedObservable=!0,t.case=uN;var n=e&&(e.state===rc||e.state===ll)?e.value:void 0;return ef(t,{value:n,state:ll},{},{deep:!1}),t}(function(r){r.reject=Dt("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=cf,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=rc,n.value=t,n}r.resolve=Dt("fromPromise.resolve",e)})(Gh||(Gh={}));function lN(r){return r&&r.isPromiseBasedObservable===!0}var Wb=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function fN(r,e,t){if(zb(r,e),zb(r,t),e!==t){var n=r.slice(),i;return e<t?i=Wb(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=Wb(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function zb(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function dN(r,e){e===void 0&&(e=void 0);var t=!1,n=Tt.box(e,{deep:!1}),i=Tt.box(!1),s=function(){return t||(t=!0,Fo(!0,function(){i.set(!0)}),r(function(u){Fo(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Dt("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function Zp(r,e,t){e===void 0&&(e=P0),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=Hl("ResourceBasedObservable",function(){ns(!n&&!i),n=!0,r(function(f){Fo(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){ns(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var Pu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function hN(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function pN(r,e){var t;e===void 0&&(e=!1);var n=xr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:jo(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:jo(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[hN()]=function(){return this},t}var gN=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),qp(this),ec(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),Pu([Tt.ref],r.prototype,"current",void 0),Pu([Dt.bound],r.prototype,"next",null),Pu([Dt.bound],r.prototype,"complete",null),Pu([Dt.bound],r.prototype,"error",null),r}();function yN(r,e){return e===void 0&&(e=void 0),new gN(r,e)}var fl=function(){return fl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},fl.apply(this,arguments)},Pa=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mN=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],x0=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:Tt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:Tt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),qp(this),ns(rn(e),"createViewModel expects an observable object");var n=qh(this);qh(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Ae||i==="__mobxDidRunLazyInitializers")){if(ns(mN.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),Vu(e,i)){var a=ci(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,xr(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,fl(fl({},d),{configurable:!0,get:function(){return Vu(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Dt(function(m){Vu(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;$o(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];ln(i)?i.replace(n):on(i)?(i.clear(),i.merge(n)):r0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Pa([xr],r.prototype,"isDirty",null),Pa([xr],r.prototype,"changedValues",null),Pa([Dt.bound],r.prototype,"submit",null),Pa([Dt.bound],r.prototype,"reset",null),Pa([Dt.bound],r.prototype,"resetProperty",null),r}();function bN(r){return new x0(r)}function vN(r,e){var t=ai(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return jo(t,function(){})}function _N(r,e,t){if(t===void 0&&(t=0),!ln(r))throw new Error("Expected observable array as first argument");as(e)||(e=Dt("queueProcessor",e));var n=function(){var i=r.slice(0);ec(function(){return r.splice(0)}),i.forEach(e)};return t>0?Ns(n,{delay:t}):Ns(n)}function wN(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!ln(r))throw new Error("Expected observable array as first argument");as(e)||(e=Dt("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);ec(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Ns(i,{delay:t}):Ns(i)}var Es={};function SN(){for(var r=0,e=Object.getOwnPropertyNames(Es);r<e.length;r++){var t=e[r];Es[t].dispose(),delete Es[t]}}function AN(r){return r===void 0&&(r=1e3),vc()?(Es[r]||(typeof r=="number"?Es[r]=kN(r):Es[r]=IN()),Es[r].current()):Date.now()}function kN(r){var e;return Zp(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function IN(){var r=Zp(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function EN(r){return vc()||console.warn("'expr' should only be used inside other reactive functions."),xr(r).get()}var dl=function(){return dl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},dl.apply(this,arguments)},ON=0;function PN(r,e){ns(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=xr(function(){return d=r(h)},dl(dl({},m),{name:I}));if(!i)var M=_c(O,function(){delete t[f],M(),n&&n(d,h)});return O}var u=!1;return function(f){var h=TN(f),d=t[h];if(d)return d.get();if(!i&&!vc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function TN(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++ON,R0(r,"$transformId",t)),t}function uh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function lh(r){return rn(r)||ln(r)||on(r)}function RN(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,uh(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(lh(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(lh(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+uh(f)+"/"+h+"',")+(" but it already exists at '"+uh(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:jo(u,n)};t.set(u,m),o0(u).forEach(function(I){var O=I[0],M=I[1];return s(M,m,O)})}}}function a(u){if(lh(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),s0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var BN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xN=function(r){BN(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=jo(d._base,function(I){if(I.type==="splice")Tr(function(){for(var O=0,M=I.removed;O<M.length;O++){var A=M[O];d._removeItem(A)}for(var R=0,C=I.added;R<C.length;R++){var Y=C[R];d._addItem(Y)}});else if(I.type==="update")Tr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=Tt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:Qw(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(rf),MN=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),CN=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new MN(this.store,e)}}),r}(),hl=function(){return hl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},hl.apply(this,arguments)},LN=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function KN(r,e){if(e===void 0&&(e=!1),as(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new CN;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!vc())return!t&&Uw().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=xr(function(){return d=r.apply(a,u)},hl(hl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||_c(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,LN([d],u)),d=void 0}),m.get()}}var NN=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:rc,IDENTITY:aN,NOOP:P0,ObservableGroupMap:xN,PENDING:ll,REJECTED:cf,ViewModel:x0,addHiddenProp:R0,chunkProcessor:wN,computedFn:KN,createTransformer:PN,createViewModel:bN,deepObserve:RN,expr:EN,fail:T0,get fromPromise(){return Gh},fromResource:Zp,fromStream:yN,getAllMethodsAndProperties:qh,invariant:ns,isPromiseBasedObservable:lN,keepAlive:vN,lazyObservable:dN,moveItem:fN,now:AN,queueProcessor:_N,resetNowInternalState:SN,toStream:pN},Symbol.toStringTag,{value:"Module"})),DN=ic(NN),pl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,M=1,A=2,R=1,C=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,V=256,J=512,K=30,j="...",te=800,T=16,z=1,X=2,Re=3,ye=1/0,Ie=9007199254740991,Vt=17976931348623157e292,$t=0/0,_e=4294967295,We=_e-1,Jt=_e>>>1,an=[["ary",N],["bind",R],["bindKey",C],["curry",ae],["curryRight",oe],["flip",J],["partial",de],["partialRight",E],["rearg",V]],At="[object Arguments]",ut="[object Array]",gr="[object AsyncFunction]",Ut="[object Boolean]",bn="[object Date]",Hr="[object DOMException]",yr="[object Error]",Qn="[object Function]",fi="[object GeneratorFunction]",fn="[object Map]",fs="[object Number]",Ef="[object Null]",Xn="[object Object]",Ec="[object Promise]",Of="[object Proxy]",Bi="[object RegExp]",vn="[object Set]",_n="[object String]",xi="[object Symbol]",Pf="[object Undefined]",Ln="[object WeakMap]",Tf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",Le="[object Uint8Array]",mt="[object Uint8ClampedArray]",lt="[object Uint16Array]",bt="[object Uint32Array]",at=/\b__p \+= '';/g,$0=/\b(__p \+=) '' \+/g,j0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ng=/&(?:amp|lt|gt|quot|#39);/g,rg=/[&<>"']/g,q0=RegExp(ng.source),G0=RegExp(rg.source),H0=/<%-([\s\S]+?)%>/g,Y0=/<%([\s\S]+?)%>/g,ig=/<%=([\s\S]+?)%>/g,J0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q0=/^\w*$/,X0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rf=/[\\^$.*+?()[\]{}|]/g,Z0=RegExp(Rf.source),Bf=/^\s+/,eS=/\s/,tS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nS=/\{\n\/\* \[wrapped with (.+)\] \*/,rS=/,? & /,iS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sS=/[()=,{}\[\]\/\s]/,oS=/\\(\\)?/g,aS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sg=/\w*$/,cS=/^[-+]0x[0-9a-f]+$/i,uS=/^0b[01]+$/i,lS=/^\[object .+?Constructor\]$/,fS=/^0o[0-7]+$/i,dS=/^(?:0|[1-9]\d*)$/,hS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oc=/($^)/,pS=/['\n\r\u2028\u2029\\]/g,Pc="\\ud800-\\udfff",gS="\\u0300-\\u036f",yS="\\ufe20-\\ufe2f",mS="\\u20d0-\\u20ff",og=gS+yS+mS,ag="\\u2700-\\u27bf",cg="a-z\\xdf-\\xf6\\xf8-\\xff",bS="\\xac\\xb1\\xd7\\xf7",vS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_S="\\u2000-\\u206f",wS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ug="A-Z\\xc0-\\xd6\\xd8-\\xde",lg="\\ufe0e\\ufe0f",fg=bS+vS+_S+wS,xf="['\u2019]",SS="["+Pc+"]",dg="["+fg+"]",Tc="["+og+"]",hg="\\d+",AS="["+ag+"]",pg="["+cg+"]",gg="[^"+Pc+fg+hg+ag+cg+ug+"]",Mf="\\ud83c[\\udffb-\\udfff]",kS="(?:"+Tc+"|"+Mf+")",yg="[^"+Pc+"]",Cf="(?:\\ud83c[\\udde6-\\uddff]){2}",Lf="[\\ud800-\\udbff][\\udc00-\\udfff]",Ys="["+ug+"]",mg="\\u200d",bg="(?:"+pg+"|"+gg+")",IS="(?:"+Ys+"|"+gg+")",vg="(?:"+xf+"(?:d|ll|m|re|s|t|ve))?",_g="(?:"+xf+"(?:D|LL|M|RE|S|T|VE))?",wg=kS+"?",Sg="["+lg+"]?",ES="(?:"+mg+"(?:"+[yg,Cf,Lf].join("|")+")"+Sg+wg+")*",OS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",PS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ag=Sg+wg+ES,TS="(?:"+[AS,Cf,Lf].join("|")+")"+Ag,RS="(?:"+[yg+Tc+"?",Tc,Cf,Lf,SS].join("|")+")",BS=RegExp(xf,"g"),xS=RegExp(Tc,"g"),Kf=RegExp(Mf+"(?="+Mf+")|"+RS+Ag,"g"),MS=RegExp([Ys+"?"+pg+"+"+vg+"(?="+[dg,Ys,"$"].join("|")+")",IS+"+"+_g+"(?="+[dg,Ys+bg,"$"].join("|")+")",Ys+"?"+bg+"+"+vg,Ys+"+"+_g,PS,OS,hg,TS].join("|"),"g"),CS=RegExp("["+mg+Pc+og+lg+"]"),LS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,KS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],NS=-1,kt={};kt[y]=kt[k]=kt[L]=kt[$]=kt[Z]=kt[Le]=kt[mt]=kt[lt]=kt[bt]=!0,kt[At]=kt[ut]=kt[v]=kt[Ut]=kt[g]=kt[bn]=kt[yr]=kt[Qn]=kt[fn]=kt[fs]=kt[Xn]=kt[Bi]=kt[vn]=kt[_n]=kt[Ln]=!1;var vt={};vt[At]=vt[ut]=vt[v]=vt[g]=vt[Ut]=vt[bn]=vt[y]=vt[k]=vt[L]=vt[$]=vt[Z]=vt[fn]=vt[fs]=vt[Xn]=vt[Bi]=vt[vn]=vt[_n]=vt[xi]=vt[Le]=vt[mt]=vt[lt]=vt[bt]=!0,vt[yr]=vt[Qn]=vt[Ln]=!1;var DS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},US={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},FS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},WS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zS=parseFloat,VS=parseInt,kg=typeof W=="object"&&W&&W.Object===Object&&W,$S=typeof self=="object"&&self&&self.Object===Object&&self,dn=kg||$S||Function("return this")(),Nf=e&&!e.nodeType&&e,ds=Nf&&!0&&r&&!r.nodeType&&r,Ig=ds&&ds.exports===Nf,Df=Ig&&kg.process,mr=function(){try{var D=ds&&ds.require&&ds.require("util").types;return D||Df&&Df.binding&&Df.binding("util")}catch{}}(),Eg=mr&&mr.isArrayBuffer,Og=mr&&mr.isDate,Pg=mr&&mr.isMap,Tg=mr&&mr.isRegExp,Rg=mr&&mr.isSet,Bg=mr&&mr.isTypedArray;function Zn(D,Q,q){switch(q.length){case 0:return D.call(Q);case 1:return D.call(Q,q[0]);case 2:return D.call(Q,q[0],q[1]);case 3:return D.call(Q,q[0],q[1],q[2])}return D.apply(Q,q)}function jS(D,Q,q,me){for(var xe=-1,tt=D==null?0:D.length;++xe<tt;){var Qt=D[xe];Q(me,Qt,q(Qt),D)}return me}function br(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me&&Q(D[q],q,D)!==!1;);return D}function qS(D,Q){for(var q=D==null?0:D.length;q--&&Q(D[q],q,D)!==!1;);return D}function xg(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!Q(D[q],q,D))return!1;return!0}function Mi(D,Q){for(var q=-1,me=D==null?0:D.length,xe=0,tt=[];++q<me;){var Qt=D[q];Q(Qt,q,D)&&(tt[xe++]=Qt)}return tt}function Rc(D,Q){var q=D==null?0:D.length;return!!q&&Js(D,Q,0)>-1}function Uf(D,Q,q){for(var me=-1,xe=D==null?0:D.length;++me<xe;)if(q(Q,D[me]))return!0;return!1}function Et(D,Q){for(var q=-1,me=D==null?0:D.length,xe=Array(me);++q<me;)xe[q]=Q(D[q],q,D);return xe}function Ci(D,Q){for(var q=-1,me=Q.length,xe=D.length;++q<me;)D[xe+q]=Q[q];return D}function Ff(D,Q,q,me){var xe=-1,tt=D==null?0:D.length;for(me&&tt&&(q=D[++xe]);++xe<tt;)q=Q(q,D[xe],xe,D);return q}function GS(D,Q,q,me){var xe=D==null?0:D.length;for(me&&xe&&(q=D[--xe]);xe--;)q=Q(q,D[xe],xe,D);return q}function Wf(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(Q(D[q],q,D))return!0;return!1}var HS=zf("length");function YS(D){return D.split("")}function JS(D){return D.match(iS)||[]}function Mg(D,Q,q){var me;return q(D,function(xe,tt,Qt){if(Q(xe,tt,Qt))return me=tt,!1}),me}function Bc(D,Q,q,me){for(var xe=D.length,tt=q+(me?1:-1);me?tt--:++tt<xe;)if(Q(D[tt],tt,D))return tt;return-1}function Js(D,Q,q){return Q===Q?cA(D,Q,q):Bc(D,Cg,q)}function QS(D,Q,q,me){for(var xe=q-1,tt=D.length;++xe<tt;)if(me(D[xe],Q))return xe;return-1}function Cg(D){return D!==D}function Lg(D,Q){var q=D==null?0:D.length;return q?$f(D,Q)/q:$t}function zf(D){return function(Q){return Q==null?t:Q[D]}}function Vf(D){return function(Q){return D==null?t:D[Q]}}function Kg(D,Q,q,me,xe){return xe(D,function(tt,Qt,pt){q=me?(me=!1,tt):Q(q,tt,Qt,pt)}),q}function XS(D,Q){var q=D.length;for(D.sort(Q);q--;)D[q]=D[q].value;return D}function $f(D,Q){for(var q,me=-1,xe=D.length;++me<xe;){var tt=Q(D[me]);tt!==t&&(q=q===t?tt:q+tt)}return q}function jf(D,Q){for(var q=-1,me=Array(D);++q<D;)me[q]=Q(q);return me}function ZS(D,Q){return Et(Q,function(q){return[q,D[q]]})}function Ng(D){return D&&D.slice(0,Wg(D)+1).replace(Bf,"")}function er(D){return function(Q){return D(Q)}}function qf(D,Q){return Et(Q,function(q){return D[q]})}function ua(D,Q){return D.has(Q)}function Dg(D,Q){for(var q=-1,me=D.length;++q<me&&Js(Q,D[q],0)>-1;);return q}function Ug(D,Q){for(var q=D.length;q--&&Js(Q,D[q],0)>-1;);return q}function eA(D,Q){for(var q=D.length,me=0;q--;)D[q]===Q&&++me;return me}var tA=Vf(DS),nA=Vf(US);function rA(D){return"\\"+WS[D]}function iA(D,Q){return D==null?t:D[Q]}function Qs(D){return CS.test(D)}function sA(D){return LS.test(D)}function oA(D){for(var Q,q=[];!(Q=D.next()).done;)q.push(Q.value);return q}function Gf(D){var Q=-1,q=Array(D.size);return D.forEach(function(me,xe){q[++Q]=[xe,me]}),q}function Fg(D,Q){return function(q){return D(Q(q))}}function Li(D,Q){for(var q=-1,me=D.length,xe=0,tt=[];++q<me;){var Qt=D[q];(Qt===Q||Qt===d)&&(D[q]=d,tt[xe++]=q)}return tt}function xc(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=me}),q}function aA(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=[me,me]}),q}function cA(D,Q,q){for(var me=q-1,xe=D.length;++me<xe;)if(D[me]===Q)return me;return-1}function uA(D,Q,q){for(var me=q+1;me--;)if(D[me]===Q)return me;return me}function Xs(D){return Qs(D)?fA(D):HS(D)}function Kr(D){return Qs(D)?dA(D):YS(D)}function Wg(D){for(var Q=D.length;Q--&&eS.test(D.charAt(Q)););return Q}var lA=Vf(FS);function fA(D){for(var Q=Kf.lastIndex=0;Kf.test(D);)++Q;return Q}function dA(D){return D.match(Kf)||[]}function hA(D){return D.match(MS)||[]}var pA=function D(Q){Q=Q==null?dn:Zs.defaults(dn.Object(),Q,Zs.pick(dn,KS));var q=Q.Array,me=Q.Date,xe=Q.Error,tt=Q.Function,Qt=Q.Math,pt=Q.Object,Hf=Q.RegExp,gA=Q.String,vr=Q.TypeError,Mc=q.prototype,yA=tt.prototype,eo=pt.prototype,Cc=Q["__core-js_shared__"],Lc=yA.toString,ct=eo.hasOwnProperty,mA=0,zg=function(){var o=/[^.]+$/.exec(Cc&&Cc.keys&&Cc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Kc=eo.toString,bA=Lc.call(pt),vA=dn._,_A=Hf("^"+Lc.call(ct).replace(Rf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nc=Ig?Q.Buffer:t,Ki=Q.Symbol,Dc=Q.Uint8Array,Vg=Nc?Nc.allocUnsafe:t,Uc=Fg(pt.getPrototypeOf,pt),$g=pt.create,jg=eo.propertyIsEnumerable,Fc=Mc.splice,qg=Ki?Ki.isConcatSpreadable:t,la=Ki?Ki.iterator:t,hs=Ki?Ki.toStringTag:t,Wc=function(){try{var o=bs(pt,"defineProperty");return o({},"",{}),o}catch{}}(),wA=Q.clearTimeout!==dn.clearTimeout&&Q.clearTimeout,SA=me&&me.now!==dn.Date.now&&me.now,AA=Q.setTimeout!==dn.setTimeout&&Q.setTimeout,zc=Qt.ceil,Vc=Qt.floor,Yf=pt.getOwnPropertySymbols,kA=Nc?Nc.isBuffer:t,Gg=Q.isFinite,IA=Mc.join,EA=Fg(pt.keys,pt),Xt=Qt.max,wn=Qt.min,OA=me.now,PA=Q.parseInt,Hg=Qt.random,TA=Mc.reverse,Jf=bs(Q,"DataView"),fa=bs(Q,"Map"),Qf=bs(Q,"Promise"),to=bs(Q,"Set"),da=bs(Q,"WeakMap"),ha=bs(pt,"create"),$c=da&&new da,no={},RA=vs(Jf),BA=vs(fa),xA=vs(Qf),MA=vs(to),CA=vs(da),jc=Ki?Ki.prototype:t,pa=jc?jc.valueOf:t,Yg=jc?jc.toString:t;function _(o){if(Lt(o)&&!Ce(o)&&!(o instanceof qe)){if(o instanceof _r)return o;if(ct.call(o,"__wrapped__"))return Jy(o)}return new _r(o)}var ro=function(){function o(){}return function(c){if(!Bt(c))return{};if($g)return $g(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function qc(){}function _r(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:H0,evaluate:Y0,interpolate:ig,variable:"",imports:{_}},_.prototype=qc.prototype,_.prototype.constructor=_,_r.prototype=ro(qc.prototype),_r.prototype.constructor=_r;function qe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function LA(){var o=new qe(this.__wrapped__);return o.__actions__=Kn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kn(this.__views__),o}function KA(){if(this.__filtered__){var o=new qe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function NA(){var o=this.__wrapped__.value(),c=this.__dir__,l=Ce(o),p=c<0,b=l?o.length:0,w=Y1(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,we=wn(U,this.__takeCount__);if(!l||!p&&b==U&&we==U)return vy(o,this.__actions__);var Pe=[];e:for(;U--&&ge<we;){ne+=c;for(var De=-1,Te=o[ne];++De<ce;){var $e=re[De],Ge=$e.iteratee,rr=$e.type,Bn=Ge(Te);if(rr==X)Te=Bn;else if(!Bn){if(rr==z)continue e;break e}}Pe[ge++]=Te}return Pe}qe.prototype=ro(qc.prototype),qe.prototype.constructor=qe;function ps(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function DA(){this.__data__=ha?ha(null):{},this.size=0}function UA(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function FA(o){var c=this.__data__;if(ha){var l=c[o];return l===f?t:l}return ct.call(c,o)?c[o]:t}function WA(o){var c=this.__data__;return ha?c[o]!==t:ct.call(c,o)}function zA(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=ha&&c===t?f:c,this}ps.prototype.clear=DA,ps.prototype.delete=UA,ps.prototype.get=FA,ps.prototype.has=WA,ps.prototype.set=zA;function di(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function VA(){this.__data__=[],this.size=0}function $A(o){var c=this.__data__,l=Gc(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():Fc.call(c,l,1),--this.size,!0}function jA(o){var c=this.__data__,l=Gc(c,o);return l<0?t:c[l][1]}function qA(o){return Gc(this.__data__,o)>-1}function GA(o,c){var l=this.__data__,p=Gc(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}di.prototype.clear=VA,di.prototype.delete=$A,di.prototype.get=jA,di.prototype.has=qA,di.prototype.set=GA;function hi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function HA(){this.size=0,this.__data__={hash:new ps,map:new(fa||di),string:new ps}}function YA(o){var c=su(this,o).delete(o);return this.size-=c?1:0,c}function JA(o){return su(this,o).get(o)}function QA(o){return su(this,o).has(o)}function XA(o,c){var l=su(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}hi.prototype.clear=HA,hi.prototype.delete=YA,hi.prototype.get=JA,hi.prototype.has=QA,hi.prototype.set=XA;function gs(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new hi;++c<l;)this.add(o[c])}function ZA(o){return this.__data__.set(o,f),this}function e1(o){return this.__data__.has(o)}gs.prototype.add=gs.prototype.push=ZA,gs.prototype.has=e1;function Nr(o){var c=this.__data__=new di(o);this.size=c.size}function t1(){this.__data__=new di,this.size=0}function n1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function r1(o){return this.__data__.get(o)}function i1(o){return this.__data__.has(o)}function s1(o,c){var l=this.__data__;if(l instanceof di){var p=l.__data__;if(!fa||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new hi(p)}return l.set(o,c),this.size=l.size,this}Nr.prototype.clear=t1,Nr.prototype.delete=n1,Nr.prototype.get=r1,Nr.prototype.has=i1,Nr.prototype.set=s1;function Jg(o,c){var l=Ce(o),p=!l&&_s(o),b=!l&&!p&&Wi(o),w=!l&&!p&&!b&&ao(o),P=l||p||b||w,B=P?jf(o.length,gA):[],U=B.length;for(var ne in o)(c||ct.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||mi(ne,U)))&&B.push(ne);return B}function Qg(o){var c=o.length;return c?o[cd(0,c-1)]:t}function o1(o,c){return ou(Kn(o),ys(c,0,o.length))}function a1(o){return ou(Kn(o))}function Xf(o,c,l){(l!==t&&!Dr(o[c],l)||l===t&&!(c in o))&&pi(o,c,l)}function ga(o,c,l){var p=o[c];(!(ct.call(o,c)&&Dr(p,l))||l===t&&!(c in o))&&pi(o,c,l)}function Gc(o,c){for(var l=o.length;l--;)if(Dr(o[l][0],c))return l;return-1}function c1(o,c,l,p){return Ni(o,function(b,w,P){c(p,b,l(b),P)}),p}function Xg(o,c){return o&&Jr(c,cn(c),o)}function u1(o,c){return o&&Jr(c,Dn(c),o)}function pi(o,c,l){c=="__proto__"&&Wc?Wc(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function Zf(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Md(o,c[l]);return b}function ys(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function wr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!Bt(o))return o;var re=Ce(o);if(re){if(P=Q1(o),!B)return Kn(o,P)}else{var ce=Sn(o),ge=ce==Qn||ce==fi;if(Wi(o))return Sy(o,B);if(ce==Xn||ce==At||ge&&!b){if(P=U||ge?{}:Wy(o),!B)return U?F1(o,u1(P,o)):U1(o,Xg(P,o))}else{if(!vt[ce])return b?o:{};P=X1(o,ce,B)}}w||(w=new Nr);var we=w.get(o);if(we)return we;w.set(o,P),ym(o)?o.forEach(function(Te){P.add(wr(Te,c,l,Te,o,w))}):pm(o)&&o.forEach(function(Te,$e){P.set($e,wr(Te,c,l,$e,o,w))});var Pe=ne?U?vd:bd:U?Dn:cn,De=re?t:Pe(o);return br(De||o,function(Te,$e){De&&($e=Te,Te=o[$e]),ga(P,$e,wr(Te,c,l,$e,o,w))}),P}function l1(o){var c=cn(o);return function(l){return Zg(l,o,c)}}function Zg(o,c,l){var p=l.length;if(o==null)return!p;for(o=pt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function ey(o,c,l){if(typeof o!="function")throw new vr(a);return Sa(function(){o.apply(t,l)},c)}function ya(o,c,l,p){var b=-1,w=Rc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Et(c,er(l))),p?(w=Uf,P=!1):c.length>=i&&(w=ua,P=!1,c=new gs(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Ni=Oy(Yr),ty=Oy(td,!0);function f1(o,c){var l=!0;return Ni(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function Hc(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!nr(P):l(P,B)))var B=P,U=w}return U}function d1(o,c,l,p){var b=o.length;for(l=Ne(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:Ne(p),p<0&&(p+=b),p=l>p?0:bm(p);l<p;)o[l++]=c;return o}function ny(o,c){var l=[];return Ni(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function hn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=ek),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?hn(B,c-1,l,p,b):Ci(b,B):p||(b[b.length]=B)}return b}var ed=Py(),ry=Py(!0);function Yr(o,c){return o&&ed(o,c,cn)}function td(o,c){return o&&ry(o,c,cn)}function Yc(o,c){return Mi(c,function(l){return bi(o[l])})}function ms(o,c){c=Ui(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[Qr(c[l++])];return l&&l==p?o:t}function iy(o,c,l){var p=c(o);return Ce(o)?p:Ci(p,l(o))}function Tn(o){return o==null?o===t?Pf:Ef:hs&&hs in pt(o)?H1(o):ak(o)}function nd(o,c){return o>c}function h1(o,c){return o!=null&&ct.call(o,c)}function p1(o,c){return o!=null&&c in pt(o)}function g1(o,c,l){return o>=wn(c,l)&&o<Xt(c,l)}function rd(o,c,l){for(var p=l?Uf:Rc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Et(re,er(c))),U=wn(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new gs(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<U;){var we=re[ce],Pe=c?c(we):we;if(we=l||we!==0?we:0,!(ge?ua(ge,Pe):p(ne,Pe,l))){for(P=w;--P;){var De=B[P];if(!(De?ua(De,Pe):p(o[P],Pe,l)))continue e}ge&&ge.push(Pe),ne.push(we)}}return ne}function y1(o,c,l,p){return Yr(o,function(b,w,P){c(p,l(b),w,P)}),p}function ma(o,c,l){c=Ui(c,o),o=jy(o,c);var p=o==null?o:o[Qr(Ar(c))];return p==null?t:Zn(p,o,l)}function sy(o){return Lt(o)&&Tn(o)==At}function m1(o){return Lt(o)&&Tn(o)==v}function b1(o){return Lt(o)&&Tn(o)==bn}function ba(o,c,l,p,b){return o===c?!0:o==null||c==null||!Lt(o)&&!Lt(c)?o!==o&&c!==c:v1(o,c,l,p,ba,b)}function v1(o,c,l,p,b,w){var P=Ce(o),B=Ce(c),U=P?ut:Sn(o),ne=B?ut:Sn(c);U=U==At?Xn:U,ne=ne==At?Xn:ne;var re=U==Xn,ce=ne==Xn,ge=U==ne;if(ge&&Wi(o)){if(!Wi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new Nr),P||ao(o)?Dy(o,c,l,p,b,w):q1(o,c,U,l,p,b,w);if(!(l&M)){var we=re&&ct.call(o,"__wrapped__"),Pe=ce&&ct.call(c,"__wrapped__");if(we||Pe){var De=we?o.value():o,Te=Pe?c.value():c;return w||(w=new Nr),b(De,Te,l,p,w)}}return ge?(w||(w=new Nr),G1(o,c,l,p,b,w)):!1}function _1(o){return Lt(o)&&Sn(o)==fn}function id(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=pt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new Nr;if(p)var ge=p(ne,re,U,o,c,ce);if(!(ge===t?ba(re,ne,M|A,p,ce):ge))return!1}}return!0}function oy(o){if(!Bt(o)||nk(o))return!1;var c=bi(o)?_A:lS;return c.test(vs(o))}function w1(o){return Lt(o)&&Tn(o)==Bi}function S1(o){return Lt(o)&&Sn(o)==vn}function A1(o){return Lt(o)&&du(o.length)&&!!kt[Tn(o)]}function ay(o){return typeof o=="function"?o:o==null?Un:typeof o=="object"?Ce(o)?ly(o[0],o[1]):uy(o):Tm(o)}function sd(o){if(!wa(o))return EA(o);var c=[];for(var l in pt(o))ct.call(o,l)&&l!="constructor"&&c.push(l);return c}function k1(o){if(!Bt(o))return ok(o);var c=wa(o),l=[];for(var p in o)p=="constructor"&&(c||!ct.call(o,p))||l.push(p);return l}function od(o,c){return o<c}function cy(o,c){var l=-1,p=Nn(o)?q(o.length):[];return Ni(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function uy(o){var c=wd(o);return c.length==1&&c[0][2]?Vy(c[0][0],c[0][1]):function(l){return l===o||id(l,o,c)}}function ly(o,c){return Ad(o)&&zy(c)?Vy(Qr(o),c):function(l){var p=Md(l,o);return p===t&&p===c?Cd(l,o):ba(c,p,M|A)}}function Jc(o,c,l,p,b){o!==c&&ed(c,function(w,P){if(b||(b=new Nr),Bt(w))I1(o,c,P,l,Jc,p,b);else{var B=p?p(Id(o,P),w,P+"",o,c,b):t;B===t&&(B=w),Xf(o,P,B)}},Dn)}function I1(o,c,l,p,b,w,P){var B=Id(o,l),U=Id(c,l),ne=P.get(U);if(ne){Xf(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Ce(U),we=!ge&&Wi(U),Pe=!ge&&!we&&ao(U);re=U,ge||we||Pe?Ce(B)?re=B:Ft(B)?re=Kn(B):we?(ce=!1,re=Sy(U,!0)):Pe?(ce=!1,re=Ay(U,!0)):re=[]:Aa(U)||_s(U)?(re=B,_s(B)?re=vm(B):(!Bt(B)||bi(B))&&(re=Wy(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),Xf(o,l,re)}function fy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,mi(c,l)?o[c]:t}function dy(o,c,l){c.length?c=Et(c,function(w){return Ce(w)?function(P){return ms(P,w.length===1?w[0]:w)}:w}):c=[Un];var p=-1;c=Et(c,er(Oe()));var b=cy(o,function(w,P,B){var U=Et(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return XS(b,function(w,P){return D1(w,P,l)})}function E1(o,c){return hy(o,c,function(l,p){return Cd(o,p)})}function hy(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=ms(o,P);l(B,P)&&va(w,Ui(P,o),B)}return w}function O1(o){return function(c){return ms(c,o)}}function ad(o,c,l,p){var b=p?QS:Js,w=-1,P=c.length,B=o;for(o===c&&(c=Kn(c)),l&&(B=Et(o,er(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&Fc.call(B,U,1),Fc.call(o,U,1);return o}function py(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;mi(b)?Fc.call(o,b,1):fd(o,b)}}return o}function cd(o,c){return o+Vc(Hg()*(c-o+1))}function P1(o,c,l,p){for(var b=-1,w=Xt(zc((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function ud(o,c){var l="";if(!o||c<1||c>Ie)return l;do c%2&&(l+=o),c=Vc(c/2),c&&(o+=o);while(c);return l}function ze(o,c){return Ed($y(o,c,Un),o+"")}function T1(o){return Qg(co(o))}function R1(o,c){var l=co(o);return ou(l,ys(c,0,l.length))}function va(o,c,l,p){if(!Bt(o))return o;c=Ui(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=Qr(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=Bt(re)?re:mi(c[b+1])?[]:{})}ga(B,U,ne),B=B[U]}return o}var gy=$c?function(o,c){return $c.set(o,c),o}:Un,B1=Wc?function(o,c){return Wc(o,"toString",{configurable:!0,enumerable:!1,value:Kd(c),writable:!0})}:Un;function x1(o){return ou(co(o))}function Sr(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function M1(o,c){var l;return Ni(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function Qc(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=Jt){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!nr(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return ld(o,c,Un,l)}function ld(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=nr(c),ne=c===t;b<w;){var re=Vc((b+w)/2),ce=l(o[re]),ge=ce!==t,we=ce===null,Pe=ce===ce,De=nr(ce);if(P)var Te=p||Pe;else ne?Te=Pe&&(p||ge):B?Te=Pe&&ge&&(p||!we):U?Te=Pe&&ge&&!we&&(p||!De):we||De?Te=!1:Te=p?ce<=c:ce<c;Te?b=re+1:w=re}return wn(w,We)}function yy(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!Dr(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function my(o){return typeof o=="number"?o:nr(o)?$t:+o}function tr(o){if(typeof o=="string")return o;if(Ce(o))return Et(o,tr)+"";if(nr(o))return Yg?Yg.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Di(o,c,l){var p=-1,b=Rc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=Uf;else if(w>=i){var ne=c?null:$1(o);if(ne)return xc(ne);P=!1,b=ua,U=new gs}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=U.length;ge--;)if(U[ge]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function fd(o,c){return c=Ui(c,o),o=jy(o,c),o==null||delete o[Qr(Ar(c))]}function by(o,c,l,p){return va(o,c,l(ms(o,c)),p)}function Xc(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Sr(o,p?0:w,p?w+1:b):Sr(o,p?w+1:0,p?b:w)}function vy(o,c){var l=o;return l instanceof qe&&(l=l.value()),Ff(c,function(p,b){return b.func.apply(b.thisArg,Ci([p],b.args))},l)}function dd(o,c,l){var p=o.length;if(p<2)return p?Di(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=ya(w[b]||P,o[B],c,l));return Di(hn(w,1),c,l)}function _y(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function hd(o){return Ft(o)?o:[]}function pd(o){return typeof o=="function"?o:Un}function Ui(o,c){return Ce(o)?o:Ad(o,c)?[o]:Yy(it(o))}var C1=ze;function Fi(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Sr(o,c,l)}var wy=wA||function(o){return dn.clearTimeout(o)};function Sy(o,c){if(c)return o.slice();var l=o.length,p=Vg?Vg(l):new o.constructor(l);return o.copy(p),p}function gd(o){var c=new o.constructor(o.byteLength);return new Dc(c).set(new Dc(o)),c}function L1(o,c){var l=c?gd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function K1(o){var c=new o.constructor(o.source,sg.exec(o));return c.lastIndex=o.lastIndex,c}function N1(o){return pa?pt(pa.call(o)):{}}function Ay(o,c){var l=c?gd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function ky(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=nr(o),P=c!==t,B=c===null,U=c===c,ne=nr(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function D1(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=ky(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function Iy(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=Xt(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Ey(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=Xt(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var we=b;++U<ne;)ce[we+U]=c[U];for(;++P<B;)(ge||b<w)&&(ce[we+l[P]]=o[b++]);return ce}function Kn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function Jr(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?pi(l,B,U):ga(l,B,U)}return l}function U1(o,c){return Jr(o,Sd(o),c)}function F1(o,c){return Jr(o,Uy(o),c)}function Zc(o,c){return function(l,p){var b=Ce(l)?jS:c1,w=c?c():{};return b(l,o,Oe(p,2),w)}}function io(o){return ze(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Rn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=pt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function Oy(o,c){return function(l,p){if(l==null)return l;if(!Nn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=pt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function Py(o){return function(c,l,p){for(var b=-1,w=pt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function W1(o,c,l){var p=c&R,b=_a(o);function w(){var P=this&&this!==dn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function Ty(o){return function(c){c=it(c);var l=Qs(c)?Kr(c):t,p=l?l[0]:c.charAt(0),b=l?Fi(l,1).join(""):c.slice(1);return p[o]()+b}}function so(o){return function(c){return Ff(Om(Em(c).replace(BS,"")),o,"")}}function _a(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=ro(o.prototype),p=o.apply(l,c);return Bt(p)?p:l}}function z1(o,c,l){var p=_a(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=oo(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:Li(P,U);if(w-=ne.length,w<l)return Cy(o,c,eu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==dn&&this instanceof b?p:o;return Zn(re,this,P)}return b}function Ry(o){return function(c,l,p){var b=pt(c);if(!Nn(c)){var w=Oe(l,3);c=cn(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function By(o){return yi(function(c){var l=c.length,p=l,b=_r.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new vr(a);if(b&&!P&&iu(w)=="wrapper")var P=new _r([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=iu(w),U=B=="wrapper"?_d(w):t;U&&kd(U[0])&&U[1]==(N|ae|de|V)&&!U[4].length&&U[9]==1?P=P[iu(U[0])].apply(P,U[3]):P=w.length==1&&kd(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Ce(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function eu(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ge=c&C,we=c&(ae|oe),Pe=c&J,De=ge?t:_a(o);function Te(){for(var $e=arguments.length,Ge=q($e),rr=$e;rr--;)Ge[rr]=arguments[rr];if(we)var Bn=oo(Te),ir=eA(Ge,Bn);if(p&&(Ge=Iy(Ge,p,b,we)),w&&(Ge=Ey(Ge,w,P,we)),$e-=ir,we&&$e<ne){var Wt=Li(Ge,Bn);return Cy(o,c,eu,Te.placeholder,l,Ge,Wt,B,U,ne-$e)}var Ur=ce?l:this,_i=ge?Ur[o]:o;return $e=Ge.length,B?Ge=ck(Ge,B):Pe&&$e>1&&Ge.reverse(),re&&U<$e&&(Ge.length=U),this&&this!==dn&&this instanceof Te&&(_i=De||_a(_i)),_i.apply(Ur,Ge)}return Te}function xy(o,c){return function(l,p){return y1(l,o,c(p),{})}}function tu(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=tr(l),p=tr(p)):(l=my(l),p=my(p)),b=o(l,p)}return b}}function yd(o){return yi(function(c){return c=Et(c,er(Oe())),ze(function(l){var p=this;return o(c,function(b){return Zn(b,p,l)})})})}function nu(o,c){c=c===t?" ":tr(c);var l=c.length;if(l<2)return l?ud(c,o):c;var p=ud(c,zc(o/Xs(c)));return Qs(c)?Fi(Kr(p),0,o).join(""):p.slice(0,o)}function V1(o,c,l,p){var b=c&R,w=_a(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ge=this&&this!==dn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return Zn(ge,b?l:this,ce)}return P}function My(o){return function(c,l,p){return p&&typeof p!="number"&&Rn(c,l,p)&&(l=p=t),c=vi(c),l===t?(l=c,c=0):l=vi(l),p=p===t?c<l?1:-1:vi(p),P1(c,l,p,o)}}function ru(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=kr(c),l=kr(l)),o(c,l)}}function Cy(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,we=re?w:t,Pe=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|C));var De=[o,c,b,we,ce,Pe,ge,B,U,ne],Te=l.apply(t,De);return kd(o)&&qy(Te,De),Te.placeholder=p,Gy(Te,o,c)}function md(o){var c=Qt[o];return function(l,p){if(l=kr(l),p=p==null?0:wn(Ne(p),292),p&&Gg(l)){var b=(it(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(it(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var $1=to&&1/xc(new to([,-0]))[1]==ye?function(o){return new to(o)}:Ud;function Ly(o){return function(c){var l=Sn(c);return l==fn?Gf(c):l==vn?aA(c):ZS(c,o(c))}}function gi(o,c,l,p,b,w,P,B){var U=c&C;if(!U&&typeof o!="function")throw new vr(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:Xt(Ne(P),0),B=B===t?B:Ne(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=U?t:_d(o),we=[o,c,l,p,b,re,ce,w,P,B];if(ge&&sk(we,ge),o=we[0],c=we[1],l=we[2],p=we[3],b=we[4],B=we[9]=we[9]===t?U?0:o.length:Xt(we[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Pe=W1(o,c,l);else c==ae||c==oe?Pe=z1(o,c,B):(c==de||c==(R|de))&&!b.length?Pe=V1(o,c,l,p):Pe=eu.apply(t,we);var De=ge?gy:qy;return Gy(De(Pe,we),o,c)}function Ky(o,c,l,p){return o===t||Dr(o,eo[l])&&!ct.call(p,l)?c:o}function Ny(o,c,l,p,b,w){return Bt(o)&&Bt(c)&&(w.set(c,o),Jc(o,c,t,Ny,w),w.delete(c)),o}function j1(o){return Aa(o)?t:o}function Dy(o,c,l,p,b,w){var P=l&M,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,we=l&A?new gs:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Pe=o[ce],De=c[ce];if(p)var Te=P?p(De,Pe,ce,c,o,w):p(Pe,De,ce,o,c,w);if(Te!==t){if(Te)continue;ge=!1;break}if(we){if(!Wf(c,function($e,Ge){if(!ua(we,Ge)&&(Pe===$e||b(Pe,$e,l,p,w)))return we.push(Ge)})){ge=!1;break}}else if(!(Pe===De||b(Pe,De,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function q1(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new Dc(o),new Dc(c)));case Ut:case bn:case fs:return Dr(+o,+c);case yr:return o.name==c.name&&o.message==c.message;case Bi:case _n:return o==c+"";case fn:var B=Gf;case vn:var U=p&M;if(B||(B=xc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=Dy(B(o),B(c),p,b,w,P);return P.delete(o),re;case xi:if(pa)return pa.call(o)==pa.call(c)}return!1}function G1(o,c,l,p,b,w){var P=l&M,B=bd(o),U=B.length,ne=bd(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ge=B[ce];if(!(P?ge in c:ct.call(c,ge)))return!1}var we=w.get(o),Pe=w.get(c);if(we&&Pe)return we==c&&Pe==o;var De=!0;w.set(o,c),w.set(c,o);for(var Te=P;++ce<U;){ge=B[ce];var $e=o[ge],Ge=c[ge];if(p)var rr=P?p(Ge,$e,ge,c,o,w):p($e,Ge,ge,o,c,w);if(!(rr===t?$e===Ge||b($e,Ge,l,p,w):rr)){De=!1;break}Te||(Te=ge=="constructor")}if(De&&!Te){var Bn=o.constructor,ir=c.constructor;Bn!=ir&&"constructor"in o&&"constructor"in c&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof ir=="function"&&ir instanceof ir)&&(De=!1)}return w.delete(o),w.delete(c),De}function yi(o){return Ed($y(o,t,Zy),o+"")}function bd(o){return iy(o,cn,Sd)}function vd(o){return iy(o,Dn,Uy)}var _d=$c?function(o){return $c.get(o)}:Ud;function iu(o){for(var c=o.name+"",l=no[c],p=ct.call(no,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function oo(o){var c=ct.call(_,"placeholder")?_:o;return c.placeholder}function Oe(){var o=_.iteratee||Nd;return o=o===Nd?ay:o,arguments.length?o(arguments[0],arguments[1]):o}function su(o,c){var l=o.__data__;return tk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function wd(o){for(var c=cn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,zy(b)]}return c}function bs(o,c){var l=iA(o,c);return oy(l)?l:t}function H1(o){var c=ct.call(o,hs),l=o[hs];try{o[hs]=t;var p=!0}catch{}var b=Kc.call(o);return p&&(c?o[hs]=l:delete o[hs]),b}var Sd=Yf?function(o){return o==null?[]:(o=pt(o),Mi(Yf(o),function(c){return jg.call(o,c)}))}:Fd,Uy=Yf?function(o){for(var c=[];o;)Ci(c,Sd(o)),o=Uc(o);return c}:Fd,Sn=Tn;(Jf&&Sn(new Jf(new ArrayBuffer(1)))!=g||fa&&Sn(new fa)!=fn||Qf&&Sn(Qf.resolve())!=Ec||to&&Sn(new to)!=vn||da&&Sn(new da)!=Ln)&&(Sn=function(o){var c=Tn(o),l=c==Xn?o.constructor:t,p=l?vs(l):"";if(p)switch(p){case RA:return g;case BA:return fn;case xA:return Ec;case MA:return vn;case CA:return Ln}return c});function Y1(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=wn(c,o+P);break;case"takeRight":o=Xt(o,c-P);break}}return{start:o,end:c}}function J1(o){var c=o.match(nS);return c?c[1].split(rS):[]}function Fy(o,c,l){c=Ui(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=Qr(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&du(b)&&mi(P,b)&&(Ce(o)||_s(o)))}function Q1(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&ct.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function Wy(o){return typeof o.constructor=="function"&&!wa(o)?ro(Uc(o)):{}}function X1(o,c,l){var p=o.constructor;switch(c){case v:return gd(o);case Ut:case bn:return new p(+o);case g:return L1(o,l);case y:case k:case L:case $:case Z:case Le:case mt:case lt:case bt:return Ay(o,l);case fn:return new p;case fs:case _n:return new p(o);case Bi:return K1(o);case vn:return new p;case xi:return N1(o)}}function Z1(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(tS,`{
/* [wrapped with `+c+`] */
`)}function ek(o){return Ce(o)||_s(o)||!!(qg&&o&&o[qg])}function mi(o,c){var l=typeof o;return c=c??Ie,!!c&&(l=="number"||l!="symbol"&&dS.test(o))&&o>-1&&o%1==0&&o<c}function Rn(o,c,l){if(!Bt(l))return!1;var p=typeof c;return(p=="number"?Nn(l)&&mi(c,l.length):p=="string"&&c in l)?Dr(l[c],o):!1}function Ad(o,c){if(Ce(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||nr(o)?!0:Q0.test(o)||!J0.test(o)||c!=null&&o in pt(c)}function tk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function kd(o){var c=iu(o),l=_[c];if(typeof l!="function"||!(c in qe.prototype))return!1;if(o===l)return!0;var p=_d(l);return!!p&&o===p[0]}function nk(o){return!!zg&&zg in o}var rk=Cc?bi:Wd;function wa(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||eo;return o===l}function zy(o){return o===o&&!Bt(o)}function Vy(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in pt(l))}}function ik(o){var c=lu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function sk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|C|N),P=p==N&&l==ae||p==N&&l==V&&o[7].length<=c[8]||p==(N|V)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?Iy(U,B,c[4]):B,o[4]=U?Li(o[3],d):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?Ey(U,B,c[6]):B,o[6]=U?Li(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:wn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function ok(o){var c=[];if(o!=null)for(var l in pt(o))c.push(l);return c}function ak(o){return Kc.call(o)}function $y(o,c,l){return c=Xt(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=Xt(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),Zn(o,this,B)}}function jy(o,c){return c.length<2?o:ms(o,Sr(c,0,-1))}function ck(o,c){for(var l=o.length,p=wn(c.length,l),b=Kn(o);p--;){var w=c[p];o[p]=mi(w,l)?b[w]:t}return o}function Id(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var qy=Hy(gy),Sa=AA||function(o,c){return dn.setTimeout(o,c)},Ed=Hy(B1);function Gy(o,c,l){var p=c+"";return Ed(o,Z1(p,uk(J1(p),l)))}function Hy(o){var c=0,l=0;return function(){var p=OA(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function ou(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=cd(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var Yy=ik(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(X0,function(l,p,b,w){c.push(b?w.replace(oS,"$1"):p||l)}),c});function Qr(o){if(typeof o=="string"||nr(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function vs(o){if(o!=null){try{return Lc.call(o)}catch{}try{return o+""}catch{}}return""}function uk(o,c){return br(an,function(l){var p="_."+l[0];c&l[1]&&!Rc(o,p)&&o.push(p)}),o.sort()}function Jy(o){if(o instanceof qe)return o.clone();var c=new _r(o.__wrapped__,o.__chain__);return c.__actions__=Kn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function lk(o,c,l){(l?Rn(o,c,l):c===t)?c=1:c=Xt(Ne(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(zc(p/c));b<p;)P[w++]=Sr(o,b,b+=c);return P}function fk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function dk(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return Ci(Ce(l)?Kn(l):[l],hn(c,1))}var hk=ze(function(o,c){return Ft(o)?ya(o,hn(c,1,Ft,!0)):[]}),pk=ze(function(o,c){var l=Ar(c);return Ft(l)&&(l=t),Ft(o)?ya(o,hn(c,1,Ft,!0),Oe(l,2)):[]}),gk=ze(function(o,c){var l=Ar(c);return Ft(l)&&(l=t),Ft(o)?ya(o,hn(c,1,Ft,!0),t,l):[]});function yk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ne(c),Sr(o,c<0?0:c,p)):[]}function mk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ne(c),c=p-c,Sr(o,0,c<0?0:c)):[]}function bk(o,c){return o&&o.length?Xc(o,Oe(c,3),!0,!0):[]}function vk(o,c){return o&&o.length?Xc(o,Oe(c,3),!0):[]}function _k(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Rn(o,c,l)&&(l=0,p=b),d1(o,c,l,p)):[]}function Qy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ne(l);return b<0&&(b=Xt(p+b,0)),Bc(o,Oe(c,3),b)}function Xy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=Ne(l),b=l<0?Xt(p+b,0):wn(b,p-1)),Bc(o,Oe(c,3),b,!0)}function Zy(o){var c=o==null?0:o.length;return c?hn(o,1):[]}function wk(o){var c=o==null?0:o.length;return c?hn(o,ye):[]}function Sk(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:Ne(c),hn(o,c)):[]}function Ak(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function em(o){return o&&o.length?o[0]:t}function kk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ne(l);return b<0&&(b=Xt(p+b,0)),Js(o,c,b)}function Ik(o){var c=o==null?0:o.length;return c?Sr(o,0,-1):[]}var Ek=ze(function(o){var c=Et(o,hd);return c.length&&c[0]===o[0]?rd(c):[]}),Ok=ze(function(o){var c=Ar(o),l=Et(o,hd);return c===Ar(l)?c=t:l.pop(),l.length&&l[0]===o[0]?rd(l,Oe(c,2)):[]}),Pk=ze(function(o){var c=Ar(o),l=Et(o,hd);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?rd(l,t,c):[]});function Tk(o,c){return o==null?"":IA.call(o,c)}function Ar(o){var c=o==null?0:o.length;return c?o[c-1]:t}function Rk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=Ne(l),b=b<0?Xt(p+b,0):wn(b,p-1)),c===c?uA(o,c,b):Bc(o,Cg,b,!0)}function Bk(o,c){return o&&o.length?fy(o,Ne(c)):t}var xk=ze(tm);function tm(o,c){return o&&o.length&&c&&c.length?ad(o,c):o}function Mk(o,c,l){return o&&o.length&&c&&c.length?ad(o,c,Oe(l,2)):o}function Ck(o,c,l){return o&&o.length&&c&&c.length?ad(o,c,t,l):o}var Lk=yi(function(o,c){var l=o==null?0:o.length,p=Zf(o,c);return py(o,Et(c,function(b){return mi(b,l)?+b:b}).sort(ky)),p});function Kk(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Oe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return py(o,b),l}function Od(o){return o==null?o:TA.call(o)}function Nk(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Rn(o,c,l)?(c=0,l=p):(c=c==null?0:Ne(c),l=l===t?p:Ne(l)),Sr(o,c,l)):[]}function Dk(o,c){return Qc(o,c)}function Uk(o,c,l){return ld(o,c,Oe(l,2))}function Fk(o,c){var l=o==null?0:o.length;if(l){var p=Qc(o,c);if(p<l&&Dr(o[p],c))return p}return-1}function Wk(o,c){return Qc(o,c,!0)}function zk(o,c,l){return ld(o,c,Oe(l,2),!0)}function Vk(o,c){var l=o==null?0:o.length;if(l){var p=Qc(o,c,!0)-1;if(Dr(o[p],c))return p}return-1}function $k(o){return o&&o.length?yy(o):[]}function jk(o,c){return o&&o.length?yy(o,Oe(c,2)):[]}function qk(o){var c=o==null?0:o.length;return c?Sr(o,1,c):[]}function Gk(o,c,l){return o&&o.length?(c=l||c===t?1:Ne(c),Sr(o,0,c<0?0:c)):[]}function Hk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ne(c),c=p-c,Sr(o,c<0?0:c,p)):[]}function Yk(o,c){return o&&o.length?Xc(o,Oe(c,3),!1,!0):[]}function Jk(o,c){return o&&o.length?Xc(o,Oe(c,3)):[]}var Qk=ze(function(o){return Di(hn(o,1,Ft,!0))}),Xk=ze(function(o){var c=Ar(o);return Ft(c)&&(c=t),Di(hn(o,1,Ft,!0),Oe(c,2))}),Zk=ze(function(o){var c=Ar(o);return c=typeof c=="function"?c:t,Di(hn(o,1,Ft,!0),t,c)});function eI(o){return o&&o.length?Di(o):[]}function tI(o,c){return o&&o.length?Di(o,Oe(c,2)):[]}function nI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Di(o,t,c):[]}function Pd(o){if(!(o&&o.length))return[];var c=0;return o=Mi(o,function(l){if(Ft(l))return c=Xt(l.length,c),!0}),jf(c,function(l){return Et(o,zf(l))})}function nm(o,c){if(!(o&&o.length))return[];var l=Pd(o);return c==null?l:Et(l,function(p){return Zn(c,t,p)})}var rI=ze(function(o,c){return Ft(o)?ya(o,c):[]}),iI=ze(function(o){return dd(Mi(o,Ft))}),sI=ze(function(o){var c=Ar(o);return Ft(c)&&(c=t),dd(Mi(o,Ft),Oe(c,2))}),oI=ze(function(o){var c=Ar(o);return c=typeof c=="function"?c:t,dd(Mi(o,Ft),t,c)}),aI=ze(Pd);function cI(o,c){return _y(o||[],c||[],ga)}function uI(o,c){return _y(o||[],c||[],va)}var lI=ze(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,nm(o,l)});function rm(o){var c=_(o);return c.__chain__=!0,c}function fI(o,c){return c(o),o}function au(o,c){return c(o)}var dI=yi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return Zf(w,o)};return c>1||this.__actions__.length||!(p instanceof qe)||!mi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:au,args:[b],thisArg:t}),new _r(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function hI(){return rm(this)}function pI(){return new _r(this.value(),this.__chain__)}function gI(){this.__values__===t&&(this.__values__=mm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function yI(){return this}function mI(o){for(var c,l=this;l instanceof qc;){var p=Jy(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function bI(){var o=this.__wrapped__;if(o instanceof qe){var c=o;return this.__actions__.length&&(c=new qe(this)),c=c.reverse(),c.__actions__.push({func:au,args:[Od],thisArg:t}),new _r(c,this.__chain__)}return this.thru(Od)}function vI(){return vy(this.__wrapped__,this.__actions__)}var _I=Zc(function(o,c,l){ct.call(o,l)?++o[l]:pi(o,l,1)});function wI(o,c,l){var p=Ce(o)?xg:f1;return l&&Rn(o,c,l)&&(c=t),p(o,Oe(c,3))}function SI(o,c){var l=Ce(o)?Mi:ny;return l(o,Oe(c,3))}var AI=Ry(Qy),kI=Ry(Xy);function II(o,c){return hn(cu(o,c),1)}function EI(o,c){return hn(cu(o,c),ye)}function OI(o,c,l){return l=l===t?1:Ne(l),hn(cu(o,c),l)}function im(o,c){var l=Ce(o)?br:Ni;return l(o,Oe(c,3))}function sm(o,c){var l=Ce(o)?qS:ty;return l(o,Oe(c,3))}var PI=Zc(function(o,c,l){ct.call(o,l)?o[l].push(c):pi(o,l,[c])});function TI(o,c,l,p){o=Nn(o)?o:co(o),l=l&&!p?Ne(l):0;var b=o.length;return l<0&&(l=Xt(b+l,0)),hu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&Js(o,c,l)>-1}var RI=ze(function(o,c,l){var p=-1,b=typeof c=="function",w=Nn(o)?q(o.length):[];return Ni(o,function(P){w[++p]=b?Zn(c,P,l):ma(P,c,l)}),w}),BI=Zc(function(o,c,l){pi(o,l,c)});function cu(o,c){var l=Ce(o)?Et:cy;return l(o,Oe(c,3))}function xI(o,c,l,p){return o==null?[]:(Ce(c)||(c=c==null?[]:[c]),l=p?t:l,Ce(l)||(l=l==null?[]:[l]),dy(o,c,l))}var MI=Zc(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function CI(o,c,l){var p=Ce(o)?Ff:Kg,b=arguments.length<3;return p(o,Oe(c,4),l,b,Ni)}function LI(o,c,l){var p=Ce(o)?GS:Kg,b=arguments.length<3;return p(o,Oe(c,4),l,b,ty)}function KI(o,c){var l=Ce(o)?Mi:ny;return l(o,fu(Oe(c,3)))}function NI(o){var c=Ce(o)?Qg:T1;return c(o)}function DI(o,c,l){(l?Rn(o,c,l):c===t)?c=1:c=Ne(c);var p=Ce(o)?o1:R1;return p(o,c)}function UI(o){var c=Ce(o)?a1:x1;return c(o)}function FI(o){if(o==null)return 0;if(Nn(o))return hu(o)?Xs(o):o.length;var c=Sn(o);return c==fn||c==vn?o.size:sd(o).length}function WI(o,c,l){var p=Ce(o)?Wf:M1;return l&&Rn(o,c,l)&&(c=t),p(o,Oe(c,3))}var zI=ze(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Rn(o,c[0],c[1])?c=[]:l>2&&Rn(c[0],c[1],c[2])&&(c=[c[0]]),dy(o,hn(c,1),[])}),uu=SA||function(){return dn.Date.now()};function VI(o,c){if(typeof c!="function")throw new vr(a);return o=Ne(o),function(){if(--o<1)return c.apply(this,arguments)}}function om(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,gi(o,N,t,t,t,t,c)}function am(o,c){var l;if(typeof c!="function")throw new vr(a);return o=Ne(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Td=ze(function(o,c,l){var p=R;if(l.length){var b=Li(l,oo(Td));p|=de}return gi(o,p,c,l,b)}),cm=ze(function(o,c,l){var p=R|C;if(l.length){var b=Li(l,oo(cm));p|=de}return gi(c,p,o,l,b)});function um(o,c,l){c=l?t:c;var p=gi(o,ae,t,t,t,t,t,c);return p.placeholder=um.placeholder,p}function lm(o,c,l){c=l?t:c;var p=gi(o,oe,t,t,t,t,t,c);return p.placeholder=lm.placeholder,p}function fm(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new vr(a);c=kr(c)||0,Bt(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?Xt(kr(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function we(Wt){var Ur=p,_i=b;return p=b=t,ne=Wt,P=o.apply(_i,Ur),P}function Pe(Wt){return ne=Wt,B=Sa($e,c),re?we(Wt):P}function De(Wt){var Ur=Wt-U,_i=Wt-ne,Rm=c-Ur;return ce?wn(Rm,w-_i):Rm}function Te(Wt){var Ur=Wt-U,_i=Wt-ne;return U===t||Ur>=c||Ur<0||ce&&_i>=w}function $e(){var Wt=uu();if(Te(Wt))return Ge(Wt);B=Sa($e,De(Wt))}function Ge(Wt){return B=t,ge&&p?we(Wt):(p=b=t,P)}function rr(){B!==t&&wy(B),ne=0,p=U=b=B=t}function Bn(){return B===t?P:Ge(uu())}function ir(){var Wt=uu(),Ur=Te(Wt);if(p=arguments,b=this,U=Wt,Ur){if(B===t)return Pe(U);if(ce)return wy(B),B=Sa($e,c),we(U)}return B===t&&(B=Sa($e,c)),P}return ir.cancel=rr,ir.flush=Bn,ir}var $I=ze(function(o,c){return ey(o,1,c)}),jI=ze(function(o,c,l){return ey(o,kr(c)||0,l)});function qI(o){return gi(o,J)}function lu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new vr(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(lu.Cache||hi),l}lu.Cache=hi;function fu(o){if(typeof o!="function")throw new vr(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function GI(o){return am(2,o)}var HI=C1(function(o,c){c=c.length==1&&Ce(c[0])?Et(c[0],er(Oe())):Et(hn(c,1),er(Oe()));var l=c.length;return ze(function(p){for(var b=-1,w=wn(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return Zn(o,this,p)})}),Rd=ze(function(o,c){var l=Li(c,oo(Rd));return gi(o,de,t,c,l)}),dm=ze(function(o,c){var l=Li(c,oo(dm));return gi(o,E,t,c,l)}),YI=yi(function(o,c){return gi(o,V,t,t,t,c)});function JI(o,c){if(typeof o!="function")throw new vr(a);return c=c===t?c:Ne(c),ze(o,c)}function QI(o,c){if(typeof o!="function")throw new vr(a);return c=c==null?0:Xt(Ne(c),0),ze(function(l){var p=l[c],b=Fi(l,0,c);return p&&Ci(b,p),Zn(o,this,b)})}function XI(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new vr(a);return Bt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),fm(o,c,{leading:p,maxWait:c,trailing:b})}function ZI(o){return om(o,1)}function eE(o,c){return Rd(pd(c),o)}function tE(){if(!arguments.length)return[];var o=arguments[0];return Ce(o)?o:[o]}function nE(o){return wr(o,O)}function rE(o,c){return c=typeof c=="function"?c:t,wr(o,O,c)}function iE(o){return wr(o,m|O)}function sE(o,c){return c=typeof c=="function"?c:t,wr(o,m|O,c)}function oE(o,c){return c==null||Zg(o,c,cn(c))}function Dr(o,c){return o===c||o!==o&&c!==c}var aE=ru(nd),cE=ru(function(o,c){return o>=c}),_s=sy(function(){return arguments}())?sy:function(o){return Lt(o)&&ct.call(o,"callee")&&!jg.call(o,"callee")},Ce=q.isArray,uE=Eg?er(Eg):m1;function Nn(o){return o!=null&&du(o.length)&&!bi(o)}function Ft(o){return Lt(o)&&Nn(o)}function lE(o){return o===!0||o===!1||Lt(o)&&Tn(o)==Ut}var Wi=kA||Wd,fE=Og?er(Og):b1;function dE(o){return Lt(o)&&o.nodeType===1&&!Aa(o)}function hE(o){if(o==null)return!0;if(Nn(o)&&(Ce(o)||typeof o=="string"||typeof o.splice=="function"||Wi(o)||ao(o)||_s(o)))return!o.length;var c=Sn(o);if(c==fn||c==vn)return!o.size;if(wa(o))return!sd(o).length;for(var l in o)if(ct.call(o,l))return!1;return!0}function pE(o,c){return ba(o,c)}function gE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?ba(o,c,t,l):!!p}function Bd(o){if(!Lt(o))return!1;var c=Tn(o);return c==yr||c==Hr||typeof o.message=="string"&&typeof o.name=="string"&&!Aa(o)}function yE(o){return typeof o=="number"&&Gg(o)}function bi(o){if(!Bt(o))return!1;var c=Tn(o);return c==Qn||c==fi||c==gr||c==Of}function hm(o){return typeof o=="number"&&o==Ne(o)}function du(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ie}function Bt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Lt(o){return o!=null&&typeof o=="object"}var pm=Pg?er(Pg):_1;function mE(o,c){return o===c||id(o,c,wd(c))}function bE(o,c,l){return l=typeof l=="function"?l:t,id(o,c,wd(c),l)}function vE(o){return gm(o)&&o!=+o}function _E(o){if(rk(o))throw new xe(s);return oy(o)}function wE(o){return o===null}function SE(o){return o==null}function gm(o){return typeof o=="number"||Lt(o)&&Tn(o)==fs}function Aa(o){if(!Lt(o)||Tn(o)!=Xn)return!1;var c=Uc(o);if(c===null)return!0;var l=ct.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&Lc.call(l)==bA}var xd=Tg?er(Tg):w1;function AE(o){return hm(o)&&o>=-Ie&&o<=Ie}var ym=Rg?er(Rg):S1;function hu(o){return typeof o=="string"||!Ce(o)&&Lt(o)&&Tn(o)==_n}function nr(o){return typeof o=="symbol"||Lt(o)&&Tn(o)==xi}var ao=Bg?er(Bg):A1;function kE(o){return o===t}function IE(o){return Lt(o)&&Sn(o)==Ln}function EE(o){return Lt(o)&&Tn(o)==Tf}var OE=ru(od),PE=ru(function(o,c){return o<=c});function mm(o){if(!o)return[];if(Nn(o))return hu(o)?Kr(o):Kn(o);if(la&&o[la])return oA(o[la]());var c=Sn(o),l=c==fn?Gf:c==vn?xc:co;return l(o)}function vi(o){if(!o)return o===0?o:0;if(o=kr(o),o===ye||o===-ye){var c=o<0?-1:1;return c*Vt}return o===o?o:0}function Ne(o){var c=vi(o),l=c%1;return c===c?l?c-l:c:0}function bm(o){return o?ys(Ne(o),0,_e):0}function kr(o){if(typeof o=="number")return o;if(nr(o))return $t;if(Bt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Bt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=Ng(o);var l=uS.test(o);return l||fS.test(o)?VS(o.slice(2),l?2:8):cS.test(o)?$t:+o}function vm(o){return Jr(o,Dn(o))}function TE(o){return o?ys(Ne(o),-Ie,Ie):o===0?o:0}function it(o){return o==null?"":tr(o)}var RE=io(function(o,c){if(wa(c)||Nn(c)){Jr(c,cn(c),o);return}for(var l in c)ct.call(c,l)&&ga(o,l,c[l])}),_m=io(function(o,c){Jr(c,Dn(c),o)}),pu=io(function(o,c,l,p){Jr(c,Dn(c),o,p)}),BE=io(function(o,c,l,p){Jr(c,cn(c),o,p)}),xE=yi(Zf);function ME(o,c){var l=ro(o);return c==null?l:Xg(l,c)}var CE=ze(function(o,c){o=pt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Rn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=Dn(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||Dr(re,eo[ne])&&!ct.call(o,ne))&&(o[ne]=w[ne])}return o}),LE=ze(function(o){return o.push(t,Ny),Zn(wm,t,o)});function KE(o,c){return Mg(o,Oe(c,3),Yr)}function NE(o,c){return Mg(o,Oe(c,3),td)}function DE(o,c){return o==null?o:ed(o,Oe(c,3),Dn)}function UE(o,c){return o==null?o:ry(o,Oe(c,3),Dn)}function FE(o,c){return o&&Yr(o,Oe(c,3))}function WE(o,c){return o&&td(o,Oe(c,3))}function zE(o){return o==null?[]:Yc(o,cn(o))}function VE(o){return o==null?[]:Yc(o,Dn(o))}function Md(o,c,l){var p=o==null?t:ms(o,c);return p===t?l:p}function $E(o,c){return o!=null&&Fy(o,c,h1)}function Cd(o,c){return o!=null&&Fy(o,c,p1)}var jE=xy(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Kc.call(c)),o[c]=l},Kd(Un)),qE=xy(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Kc.call(c)),ct.call(o,c)?o[c].push(l):o[c]=[l]},Oe),GE=ze(ma);function cn(o){return Nn(o)?Jg(o):sd(o)}function Dn(o){return Nn(o)?Jg(o,!0):k1(o)}function HE(o,c){var l={};return c=Oe(c,3),Yr(o,function(p,b,w){pi(l,c(p,b,w),p)}),l}function YE(o,c){var l={};return c=Oe(c,3),Yr(o,function(p,b,w){pi(l,b,c(p,b,w))}),l}var JE=io(function(o,c,l){Jc(o,c,l)}),wm=io(function(o,c,l,p){Jc(o,c,l,p)}),QE=yi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Et(c,function(w){return w=Ui(w,o),p||(p=w.length>1),w}),Jr(o,vd(o),l),p&&(l=wr(l,m|I|O,j1));for(var b=c.length;b--;)fd(l,c[b]);return l});function XE(o,c){return Sm(o,fu(Oe(c)))}var ZE=yi(function(o,c){return o==null?{}:E1(o,c)});function Sm(o,c){if(o==null)return{};var l=Et(vd(o),function(p){return[p]});return c=Oe(c),hy(o,l,function(p,b){return c(p,b[0])})}function eO(o,c,l){c=Ui(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[Qr(c[p])];w===t&&(p=b,w=l),o=bi(w)?w.call(o):w}return o}function tO(o,c,l){return o==null?o:va(o,c,l)}function nO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:va(o,c,l,p)}var Am=Ly(cn),km=Ly(Dn);function rO(o,c,l){var p=Ce(o),b=p||Wi(o)||ao(o);if(c=Oe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:Bt(o)?l=bi(w)?ro(Uc(o)):{}:l={}}return(b?br:Yr)(o,function(P,B,U){return c(l,P,B,U)}),l}function iO(o,c){return o==null?!0:fd(o,c)}function sO(o,c,l){return o==null?o:by(o,c,pd(l))}function oO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:by(o,c,pd(l),p)}function co(o){return o==null?[]:qf(o,cn(o))}function aO(o){return o==null?[]:qf(o,Dn(o))}function cO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=kr(l),l=l===l?l:0),c!==t&&(c=kr(c),c=c===c?c:0),ys(kr(o),c,l)}function uO(o,c,l){return c=vi(c),l===t?(l=c,c=0):l=vi(l),o=kr(o),g1(o,c,l)}function lO(o,c,l){if(l&&typeof l!="boolean"&&Rn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=vi(o),c===t?(c=o,o=0):c=vi(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=Hg();return wn(o+b*(c-o+zS("1e-"+((b+"").length-1))),c)}return cd(o,c)}var fO=so(function(o,c,l){return c=c.toLowerCase(),o+(l?Im(c):c)});function Im(o){return Ld(it(o).toLowerCase())}function Em(o){return o=it(o),o&&o.replace(hS,tA).replace(xS,"")}function dO(o,c,l){o=it(o),c=tr(c);var p=o.length;l=l===t?p:ys(Ne(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function hO(o){return o=it(o),o&&G0.test(o)?o.replace(rg,nA):o}function pO(o){return o=it(o),o&&Z0.test(o)?o.replace(Rf,"\\$&"):o}var gO=so(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),yO=so(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),mO=Ty("toLowerCase");function bO(o,c,l){o=it(o),c=Ne(c);var p=c?Xs(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return nu(Vc(b),l)+o+nu(zc(b),l)}function vO(o,c,l){o=it(o),c=Ne(c);var p=c?Xs(o):0;return c&&p<c?o+nu(c-p,l):o}function _O(o,c,l){o=it(o),c=Ne(c);var p=c?Xs(o):0;return c&&p<c?nu(c-p,l)+o:o}function wO(o,c,l){return l||c==null?c=0:c&&(c=+c),PA(it(o).replace(Bf,""),c||0)}function SO(o,c,l){return(l?Rn(o,c,l):c===t)?c=1:c=Ne(c),ud(it(o),c)}function AO(){var o=arguments,c=it(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var kO=so(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function IO(o,c,l){return l&&typeof l!="number"&&Rn(o,c,l)&&(c=l=t),l=l===t?_e:l>>>0,l?(o=it(o),o&&(typeof c=="string"||c!=null&&!xd(c))&&(c=tr(c),!c&&Qs(o))?Fi(Kr(o),0,l):o.split(c,l)):[]}var EO=so(function(o,c,l){return o+(l?" ":"")+Ld(c)});function OO(o,c,l){return o=it(o),l=l==null?0:ys(Ne(l),0,o.length),c=tr(c),o.slice(l,l+c.length)==c}function PO(o,c,l){var p=_.templateSettings;l&&Rn(o,c,l)&&(c=t),o=it(o),c=pu({},c,p,Ky);var b=pu({},c.imports,p.imports,Ky),w=cn(b),P=qf(b,w),B,U,ne=0,re=c.interpolate||Oc,ce="__p += '",ge=Hf((c.escape||Oc).source+"|"+re.source+"|"+(re===ig?aS:Oc).source+"|"+(c.evaluate||Oc).source+"|$","g"),we="//# sourceURL="+(ct.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++NS+"]")+`
`;o.replace(ge,function(Te,$e,Ge,rr,Bn,ir){return Ge||(Ge=rr),ce+=o.slice(ne,ir).replace(pS,rA),$e&&(B=!0,ce+=`' +
__e(`+$e+`) +
'`),Bn&&(U=!0,ce+=`';
`+Bn+`;
__p += '`),Ge&&(ce+=`' +
((__t = (`+Ge+`)) == null ? '' : __t) +
'`),ne=ir+Te.length,Te}),ce+=`';
`;var Pe=ct.call(c,"variable")&&c.variable;if(!Pe)ce=`with (obj) {
`+ce+`
}
`;else if(sS.test(Pe))throw new xe(u);ce=(U?ce.replace(at,""):ce).replace($0,"$1").replace(j0,"$1;"),ce="function("+(Pe||"obj")+`) {
`+(Pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var De=Pm(function(){return tt(w,we+"return "+ce).apply(t,P)});if(De.source=ce,Bd(De))throw De;return De}function TO(o){return it(o).toLowerCase()}function RO(o){return it(o).toUpperCase()}function BO(o,c,l){if(o=it(o),o&&(l||c===t))return Ng(o);if(!o||!(c=tr(c)))return o;var p=Kr(o),b=Kr(c),w=Dg(p,b),P=Ug(p,b)+1;return Fi(p,w,P).join("")}function xO(o,c,l){if(o=it(o),o&&(l||c===t))return o.slice(0,Wg(o)+1);if(!o||!(c=tr(c)))return o;var p=Kr(o),b=Ug(p,Kr(c))+1;return Fi(p,0,b).join("")}function MO(o,c,l){if(o=it(o),o&&(l||c===t))return o.replace(Bf,"");if(!o||!(c=tr(c)))return o;var p=Kr(o),b=Dg(p,Kr(c));return Fi(p,b).join("")}function CO(o,c){var l=K,p=j;if(Bt(c)){var b="separator"in c?c.separator:b;l="length"in c?Ne(c.length):l,p="omission"in c?tr(c.omission):p}o=it(o);var w=o.length;if(Qs(o)){var P=Kr(o);w=P.length}if(l>=w)return o;var B=l-Xs(p);if(B<1)return p;var U=P?Fi(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),xd(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=Hf(b.source,it(sg.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(tr(b),B)!=B){var ge=U.lastIndexOf(b);ge>-1&&(U=U.slice(0,ge))}return U+p}function LO(o){return o=it(o),o&&q0.test(o)?o.replace(ng,lA):o}var KO=so(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),Ld=Ty("toUpperCase");function Om(o,c,l){return o=it(o),c=l?t:c,c===t?sA(o)?hA(o):JS(o):o.match(c)||[]}var Pm=ze(function(o,c){try{return Zn(o,t,c)}catch(l){return Bd(l)?l:new xe(l)}}),NO=yi(function(o,c){return br(c,function(l){l=Qr(l),pi(o,l,Td(o[l],o))}),o});function DO(o){var c=o==null?0:o.length,l=Oe();return o=c?Et(o,function(p){if(typeof p[1]!="function")throw new vr(a);return[l(p[0]),p[1]]}):[],ze(function(p){for(var b=-1;++b<c;){var w=o[b];if(Zn(w[0],this,p))return Zn(w[1],this,p)}})}function UO(o){return l1(wr(o,m))}function Kd(o){return function(){return o}}function FO(o,c){return o==null||o!==o?c:o}var WO=By(),zO=By(!0);function Un(o){return o}function Nd(o){return ay(typeof o=="function"?o:wr(o,m))}function VO(o){return uy(wr(o,m))}function $O(o,c){return ly(o,wr(c,m))}var jO=ze(function(o,c){return function(l){return ma(l,o,c)}}),qO=ze(function(o,c){return function(l){return ma(o,l,c)}});function Dd(o,c,l){var p=cn(c),b=Yc(c,p);l==null&&!(Bt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=Yc(c,cn(c)));var w=!(Bt(l)&&"chain"in l)||!!l.chain,P=bi(o);return br(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=Kn(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,Ci([this.value()],arguments))})}),o}function GO(){return dn._===this&&(dn._=vA),this}function Ud(){}function HO(o){return o=Ne(o),ze(function(c){return fy(c,o)})}var YO=yd(Et),JO=yd(xg),QO=yd(Wf);function Tm(o){return Ad(o)?zf(Qr(o)):O1(o)}function XO(o){return function(c){return o==null?t:ms(o,c)}}var ZO=My(),eP=My(!0);function Fd(){return[]}function Wd(){return!1}function tP(){return{}}function nP(){return""}function rP(){return!0}function iP(o,c){if(o=Ne(o),o<1||o>Ie)return[];var l=_e,p=wn(o,_e);c=Oe(c),o-=_e;for(var b=jf(p,c);++l<o;)c(l);return b}function sP(o){return Ce(o)?Et(o,Qr):nr(o)?[o]:Kn(Yy(it(o)))}function oP(o){var c=++mA;return it(o)+c}var aP=tu(function(o,c){return o+c},0),cP=md("ceil"),uP=tu(function(o,c){return o/c},1),lP=md("floor");function fP(o){return o&&o.length?Hc(o,Un,nd):t}function dP(o,c){return o&&o.length?Hc(o,Oe(c,2),nd):t}function hP(o){return Lg(o,Un)}function pP(o,c){return Lg(o,Oe(c,2))}function gP(o){return o&&o.length?Hc(o,Un,od):t}function yP(o,c){return o&&o.length?Hc(o,Oe(c,2),od):t}var mP=tu(function(o,c){return o*c},1),bP=md("round"),vP=tu(function(o,c){return o-c},0);function _P(o){return o&&o.length?$f(o,Un):0}function wP(o,c){return o&&o.length?$f(o,Oe(c,2)):0}return _.after=VI,_.ary=om,_.assign=RE,_.assignIn=_m,_.assignInWith=pu,_.assignWith=BE,_.at=xE,_.before=am,_.bind=Td,_.bindAll=NO,_.bindKey=cm,_.castArray=tE,_.chain=rm,_.chunk=lk,_.compact=fk,_.concat=dk,_.cond=DO,_.conforms=UO,_.constant=Kd,_.countBy=_I,_.create=ME,_.curry=um,_.curryRight=lm,_.debounce=fm,_.defaults=CE,_.defaultsDeep=LE,_.defer=$I,_.delay=jI,_.difference=hk,_.differenceBy=pk,_.differenceWith=gk,_.drop=yk,_.dropRight=mk,_.dropRightWhile=bk,_.dropWhile=vk,_.fill=_k,_.filter=SI,_.flatMap=II,_.flatMapDeep=EI,_.flatMapDepth=OI,_.flatten=Zy,_.flattenDeep=wk,_.flattenDepth=Sk,_.flip=qI,_.flow=WO,_.flowRight=zO,_.fromPairs=Ak,_.functions=zE,_.functionsIn=VE,_.groupBy=PI,_.initial=Ik,_.intersection=Ek,_.intersectionBy=Ok,_.intersectionWith=Pk,_.invert=jE,_.invertBy=qE,_.invokeMap=RI,_.iteratee=Nd,_.keyBy=BI,_.keys=cn,_.keysIn=Dn,_.map=cu,_.mapKeys=HE,_.mapValues=YE,_.matches=VO,_.matchesProperty=$O,_.memoize=lu,_.merge=JE,_.mergeWith=wm,_.method=jO,_.methodOf=qO,_.mixin=Dd,_.negate=fu,_.nthArg=HO,_.omit=QE,_.omitBy=XE,_.once=GI,_.orderBy=xI,_.over=YO,_.overArgs=HI,_.overEvery=JO,_.overSome=QO,_.partial=Rd,_.partialRight=dm,_.partition=MI,_.pick=ZE,_.pickBy=Sm,_.property=Tm,_.propertyOf=XO,_.pull=xk,_.pullAll=tm,_.pullAllBy=Mk,_.pullAllWith=Ck,_.pullAt=Lk,_.range=ZO,_.rangeRight=eP,_.rearg=YI,_.reject=KI,_.remove=Kk,_.rest=JI,_.reverse=Od,_.sampleSize=DI,_.set=tO,_.setWith=nO,_.shuffle=UI,_.slice=Nk,_.sortBy=zI,_.sortedUniq=$k,_.sortedUniqBy=jk,_.split=IO,_.spread=QI,_.tail=qk,_.take=Gk,_.takeRight=Hk,_.takeRightWhile=Yk,_.takeWhile=Jk,_.tap=fI,_.throttle=XI,_.thru=au,_.toArray=mm,_.toPairs=Am,_.toPairsIn=km,_.toPath=sP,_.toPlainObject=vm,_.transform=rO,_.unary=ZI,_.union=Qk,_.unionBy=Xk,_.unionWith=Zk,_.uniq=eI,_.uniqBy=tI,_.uniqWith=nI,_.unset=iO,_.unzip=Pd,_.unzipWith=nm,_.update=sO,_.updateWith=oO,_.values=co,_.valuesIn=aO,_.without=rI,_.words=Om,_.wrap=eE,_.xor=iI,_.xorBy=sI,_.xorWith=oI,_.zip=aI,_.zipObject=cI,_.zipObjectDeep=uI,_.zipWith=lI,_.entries=Am,_.entriesIn=km,_.extend=_m,_.extendWith=pu,Dd(_,_),_.add=aP,_.attempt=Pm,_.camelCase=fO,_.capitalize=Im,_.ceil=cP,_.clamp=cO,_.clone=nE,_.cloneDeep=iE,_.cloneDeepWith=sE,_.cloneWith=rE,_.conformsTo=oE,_.deburr=Em,_.defaultTo=FO,_.divide=uP,_.endsWith=dO,_.eq=Dr,_.escape=hO,_.escapeRegExp=pO,_.every=wI,_.find=AI,_.findIndex=Qy,_.findKey=KE,_.findLast=kI,_.findLastIndex=Xy,_.findLastKey=NE,_.floor=lP,_.forEach=im,_.forEachRight=sm,_.forIn=DE,_.forInRight=UE,_.forOwn=FE,_.forOwnRight=WE,_.get=Md,_.gt=aE,_.gte=cE,_.has=$E,_.hasIn=Cd,_.head=em,_.identity=Un,_.includes=TI,_.indexOf=kk,_.inRange=uO,_.invoke=GE,_.isArguments=_s,_.isArray=Ce,_.isArrayBuffer=uE,_.isArrayLike=Nn,_.isArrayLikeObject=Ft,_.isBoolean=lE,_.isBuffer=Wi,_.isDate=fE,_.isElement=dE,_.isEmpty=hE,_.isEqual=pE,_.isEqualWith=gE,_.isError=Bd,_.isFinite=yE,_.isFunction=bi,_.isInteger=hm,_.isLength=du,_.isMap=pm,_.isMatch=mE,_.isMatchWith=bE,_.isNaN=vE,_.isNative=_E,_.isNil=SE,_.isNull=wE,_.isNumber=gm,_.isObject=Bt,_.isObjectLike=Lt,_.isPlainObject=Aa,_.isRegExp=xd,_.isSafeInteger=AE,_.isSet=ym,_.isString=hu,_.isSymbol=nr,_.isTypedArray=ao,_.isUndefined=kE,_.isWeakMap=IE,_.isWeakSet=EE,_.join=Tk,_.kebabCase=gO,_.last=Ar,_.lastIndexOf=Rk,_.lowerCase=yO,_.lowerFirst=mO,_.lt=OE,_.lte=PE,_.max=fP,_.maxBy=dP,_.mean=hP,_.meanBy=pP,_.min=gP,_.minBy=yP,_.stubArray=Fd,_.stubFalse=Wd,_.stubObject=tP,_.stubString=nP,_.stubTrue=rP,_.multiply=mP,_.nth=Bk,_.noConflict=GO,_.noop=Ud,_.now=uu,_.pad=bO,_.padEnd=vO,_.padStart=_O,_.parseInt=wO,_.random=lO,_.reduce=CI,_.reduceRight=LI,_.repeat=SO,_.replace=AO,_.result=eO,_.round=bP,_.runInContext=D,_.sample=NI,_.size=FI,_.snakeCase=kO,_.some=WI,_.sortedIndex=Dk,_.sortedIndexBy=Uk,_.sortedIndexOf=Fk,_.sortedLastIndex=Wk,_.sortedLastIndexBy=zk,_.sortedLastIndexOf=Vk,_.startCase=EO,_.startsWith=OO,_.subtract=vP,_.sum=_P,_.sumBy=wP,_.template=PO,_.times=iP,_.toFinite=vi,_.toInteger=Ne,_.toLength=bm,_.toLower=TO,_.toNumber=kr,_.toSafeInteger=TE,_.toString=it,_.toUpper=RO,_.trim=BO,_.trimEnd=xO,_.trimStart=MO,_.truncate=CO,_.unescape=LO,_.uniqueId=oP,_.upperCase=KO,_.upperFirst=Ld,_.each=im,_.eachRight=sm,_.first=em,Dd(_,function(){var o={};return Yr(_,function(c,l){ct.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),br(["drop","take"],function(o,c){qe.prototype[o]=function(l){l=l===t?1:Xt(Ne(l),0);var p=this.__filtered__&&!c?new qe(this):this.clone();return p.__filtered__?p.__takeCount__=wn(l,p.__takeCount__):p.__views__.push({size:wn(l,_e),type:o+(p.__dir__<0?"Right":"")}),p},qe.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),br(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==z||l==Re;qe.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Oe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),br(["head","last"],function(o,c){var l="take"+(c?"Right":"");qe.prototype[o]=function(){return this[l](1).value()[0]}}),br(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");qe.prototype[o]=function(){return this.__filtered__?new qe(this):this[l](1)}}),qe.prototype.compact=function(){return this.filter(Un)},qe.prototype.find=function(o){return this.filter(o).head()},qe.prototype.findLast=function(o){return this.reverse().find(o)},qe.prototype.invokeMap=ze(function(o,c){return typeof o=="function"?new qe(this):this.map(function(l){return ma(l,o,c)})}),qe.prototype.reject=function(o){return this.filter(fu(Oe(o)))},qe.prototype.slice=function(o,c){o=Ne(o);var l=this;return l.__filtered__&&(o>0||c<0)?new qe(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=Ne(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},qe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},qe.prototype.toArray=function(){return this.take(_e)},Yr(qe.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof qe,ne=B[0],re=U||Ce(P),ce=function($e){var Ge=b.apply(_,Ci([$e],B));return p&&ge?Ge[0]:Ge};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ge=this.__chain__,we=!!this.__actions__.length,Pe=w&&!ge,De=U&&!we;if(!w&&re){P=De?P:new qe(this);var Te=o.apply(P,B);return Te.__actions__.push({func:au,args:[ce],thisArg:t}),new _r(Te,ge)}return Pe&&De?o.apply(this,B):(Te=this.thru(ce),Pe?p?Te.value()[0]:Te.value():Te)})}),br(["pop","push","shift","sort","splice","unshift"],function(o){var c=Mc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Ce(w)?w:[],b)}return this[l](function(P){return c.apply(Ce(P)?P:[],b)})}}),Yr(qe.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";ct.call(no,p)||(no[p]=[]),no[p].push({name:c,func:l})}}),no[eu(t,C).name]=[{name:"wrapper",func:t}],qe.prototype.clone=LA,qe.prototype.reverse=KA,qe.prototype.value=NA,_.prototype.at=dI,_.prototype.chain=hI,_.prototype.commit=pI,_.prototype.next=gI,_.prototype.plant=mI,_.prototype.reverse=bI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=vI,_.prototype.first=_.prototype.head,la&&(_.prototype[la]=yI),_},Zs=pA();ds?((ds.exports=Zs)._=Zs,Nf._=Zs):dn._=Zs}).call(W)})(pl,pl.exports);var uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.OrderCacheService=void 0;const Vb=pl.exports,Xr=_0,$b=ql,Tu=oa;class UN{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,Xr.observable)([]),this.observableData=(0,Xr.makeAutoObservable)(this.observableData),(0,Xr.makeObservable)(this,{buyOrdersCache:Xr.computed,sellOrdersCache:Xr.computed,allOrdersCache:Xr.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,Vb.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,Xr.runInAction)(()=>{this.orderChanges.push({eventType:Tu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===$b.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,Xr.runInAction)(()=>{this.orderChanges.push({eventType:Tu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,Vb.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,Xr.runInAction)(()=>{this.orderChanges.push({eventType:Tu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,Xr.runInAction)(()=>{this.orderChanges.push({eventType:Tu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===$b.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}uf.OrderCacheService=UN;var aa={},lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.createTransactionFromInstructions=void 0;const FN=Ti,WN=r=>{const e=new FN.Transaction;return e.add(...r),e};lf.createTransactionFromInstructions=WN;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.TEN_THOUSAND=Ho.ONE_MILLION=void 0;Ho.ONE_MILLION=1e6;Ho.TEN_THOUSAND=1e4;var Fn=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(aa,"__esModule",{value:!0});aa.GmClientService=void 0;const Vi=Ti,Ru=Kp,wi=is,fh=lf,jb=Cr,ho=ql,qb=Ho,zN=Jn,VN=ml;class $N{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return Fn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,wi.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/qb.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return Fn(this,void 0,void 0,function*(){const n=yield(0,wi.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return Fn(this,void 0,void 0,function*(){const i=yield(0,wi.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return Fn(this,void 0,void 0,function*(){const i=yield(0,wi.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return Fn(this,void 0,void 0,function*(){const i=yield(0,wi.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return Fn(this,void 0,void 0,function*(){const s=yield(0,wi.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return Fn(this,void 0,void 0,function*(){const s=yield(0,wi.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return Fn(this,void 0,void 0,function*(){const i=yield(0,wi.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return Fn(this,void 0,void 0,function*(){let h=Ru.createInitializeSellOrderInstruction,d=n,m=i;f===ho.OrderSide.Buy&&(h=Ru.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,jb.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:A}=O;return{transaction:(0,fh.createTransactionFromInstructions)(A),signers:M}})}getBnPriceForCurrency(e,t,n,i){return Fn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,zN.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return Fn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Ru.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,fh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new Vi.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new Vi.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return Fn(this,void 0,void 0,function*(){const f=new Vi.PublicKey(t.id),h=new Vi.PublicKey(t.orderMint),d=new Vi.PublicKey(t.currencyMint),m=new Vi.PublicKey(t.owner),I=t.orderType===ho.OrderSide.Buy?n:new Vi.PublicKey(t.owner),O=yield(0,jb.getAssociatedTokenAddress)(n,t.orderType===ho.OrderSide.Buy?h:d),M=yield this.getRegisteredCurrencies(e,s),{saVault:A}=M.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,VN.getStakingAccount)(a,I,u),{instructions:C,signers:Y}=yield(0,Ru.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new Vi.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,fh.createTransactionFromInstructions)(C),signers:Y}})}accountItemsToOrders(e,t,n,i){return Fn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?ho.OrderSide.Buy:ho.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new ho.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:M,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return Fn(this,void 0,void 0,function*(){const n=[],i=yield(0,wi.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/qb.TEN_THOUSAND});return n})}}aa.GmClientService=$N;var Ac={},Bu=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.GmEventService=void 0;const Ta=ht,dh=jl,hh=oa,jN=aa,qN=Jn,xu=oa;class GN{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Bu(this,void 0,void 0,function*(){this.idl=(0,qN.getGmLogsIDL)(this.programId),this.provider=new Ta.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Ta.Program(this.idl,this.programId,this.provider,{instruction:new Ta.BorshInstructionCoder(this.idl),accounts:new Ta.BorshAccountsCoder(this.idl),state:null,events:new Ta.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(xu.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(xu.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(xu.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(xu.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Bu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Bu(this,void 0,void 0,function*(){const t=yield new jN.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new dh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?dh.OrderSide.Buy:dh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(hh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(hh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(hh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Bu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Ac.GmEventService=GN;var po=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(af,"__esModule",{value:!0});af.GmOrderbookService=void 0;const HN=DN,YN=pl.exports,JN=uf,ph=oa,Gb=aa,Hb=Ac;class ff{constructor(e,t,n=60){this.gmClientService=new Gb.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new JN.OrderCacheService,this.gmClientService=new Gb.GmClientService,this.gmEventService=new Hb.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return po(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,HN.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},ff.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return po(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return po(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return po(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new Hb.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return po(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,YN.pull)(this.eventCallBacks,e)}loadInitialOrders(){return po(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case ph.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case ph.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case ph.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}af.GmOrderbookService=ff;ff.HEALTH_CHECK_RATE=5e3;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(af,r),t(aa,r),t(Ac,r)})(O0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Kp,r),t(is,r),t(oa,r),t(Jn,r),t(jl,r),t(O0,r)})(Lp);var M0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xs,"__esModule",{value:!0});xs.createAccountTransaction=xs.createAccountInstruction=void 0;const gl=ht,Hh=Ti,C0=Lp;function QN(r,e,t,n){return M0(this,void 0,void 0,function*(){const i=(0,C0.getGmIDL)(n),s=new gl.AnchorProvider(r,null,null),a=new gl.Program(i,n,s);return Hh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}xs.createAccountInstruction=QN;function XN(r,e,t,n){return M0(this,void 0,void 0,function*(){const i=(0,C0.getGmIDL)(n),s=new gl.AnchorProvider(r,null,null),a=new gl.Program(i,n,s),u=new Hh.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(Hh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}xs.createAccountTransaction=XN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(en,r),t(Ul,r),t(xs,r)})(Cr);var ZN=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(El,"__esModule",{value:!0});El.harvestRewardsInstruction=void 0;const eD=ht,tD=Fs,nD=Cr,rD=Yn;function iD({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return ZN(this,void 0,void 0,function*(){const a=(0,rD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,nD.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof eD.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,tD.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}El.harvestRewardsInstruction=iD;var df={},sD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(df,"__esModule",{value:!0});df.createInitializeStakingInstruction=void 0;const oD=Yn;function aD({connection:r,updateAuthorityAccount:e,programId:t}){return sD(this,void 0,void 0,function*(){const n=(0,oD.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}df.createInitializeStakingInstruction=aD;var hf={},pf={},Mn={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.ESCROW_AUTH=pn.STAKING_VARS=pn.STAKING_ESCROW=pn.STAKING_ACCOUNT=pn.REWARD_AUTH=pn.REWARD_ACCOUNT=pn.REGISTERED_STAKE=void 0;pn.REGISTERED_STAKE=Buffer.from("registered-stake");pn.REWARD_ACCOUNT=Buffer.from("reward-account");pn.REWARD_AUTH=Buffer.from("reward-vault-authority");pn.STAKING_ACCOUNT=Buffer.from("staking-account");pn.STAKING_ESCROW=Buffer.from("staking-escrow");pn.STAKING_VARS=Buffer.from("staking-vars");pn.ESCROW_AUTH=Buffer.from("escrow-auth");var ca=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.getRewardAuth=Mn.getTokenEscrow=Mn.getStakingVarsAccount=Mn.getStakingAccountsForRegisteredStake=Mn.getStakingAccount=Mn.getRegisteredStake=void 0;const Yb=ht,kc=Ti,cD=Yn,Ic=pn;function uD(r,e,t,n){return ca(this,void 0,void 0,function*(){return kc.PublicKey.findProgramAddress([Ic.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Mn.getRegisteredStake=uD;function lD(r,e,t){return ca(this,void 0,void 0,function*(){return kc.PublicKey.findProgramAddress([Ic.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Mn.getStakingAccount=lD;function fD(r,e,t){return ca(this,void 0,void 0,function*(){const n=new Yb.AnchorProvider(r,null,null),i=(0,cD.getStakingIdl)(e),s=new Yb.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Mn.getStakingAccountsForRegisteredStake=fD;function dD(r){return ca(this,void 0,void 0,function*(){return kc.PublicKey.findProgramAddress([Ic.STAKING_VARS],r)})}Mn.getStakingVarsAccount=dD;function hD(r,e,t){return ca(this,void 0,void 0,function*(){return kc.PublicKey.findProgramAddress([Ic.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Mn.getTokenEscrow=hD;function pD(r,e){return ca(this,void 0,void 0,function*(){return kc.PublicKey.findProgramAddress([Ic.REWARD_AUTH,e.toBuffer()],r)})}Mn.getRewardAuth=pD;var Qi={},eg=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.getStakingVarsAccountInfo=Qi.getStakingAccountInfo=Qi.getRegisteredStakeAccountInfo=void 0;const tg=Ts,gD=Mn;function yD(r,e,t){return eg(this,void 0,void 0,function*(){return yield(0,tg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}Qi.getRegisteredStakeAccountInfo=yD;function mD(r,e,t){return eg(this,void 0,void 0,function*(){return yield(0,tg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}Qi.getStakingAccountInfo=mD;function bD(r,e){return eg(this,void 0,void 0,function*(){const t=(0,tg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,gD.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}Qi.getStakingVarsAccountInfo=bD;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Mn,r),t(Qi,r),t(pn,r)})(pf);var vD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(hf,"__esModule",{value:!0});hf.registerStakeInstruction=void 0;const Jb=ht,_D=Fs,wD=pf,SD=Yn;function AD({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return vD(this,void 0,void 0,function*(){const u=(0,SD.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,wD.getRegisteredStake)(a,e,n,i),d=yield(0,_D.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new Jb.BN(t),new Jb.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}hf.registerStakeInstruction=AD;var gf={},kD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(gf,"__esModule",{value:!0});gf.createSettleStakingAccountInstruction=void 0;const ID=Yn;function ED({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return kD(this,void 0,void 0,function*(){const a=(0,ID.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}gf.createSettleStakingAccountInstruction=ED;var yf={},OD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(yf,"__esModule",{value:!0});yf.stakeTokensInstruction=void 0;const PD=Fs,TD=Yn;function RD({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return OD(this,void 0,void 0,function*(){const f=(0,TD.getStakingProgram)({connection:r,programId:u}),h=yield(0,PD.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}yf.stakeTokensInstruction=RD;var mf={},BD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(mf,"__esModule",{value:!0});mf.unstakeTokensInstruction=void 0;const xD=ht,MD=Fs,CD=Cr,LD=pf,KD=Yn;function ND({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return BD(this,void 0,void 0,function*(){const s=(0,KD.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,LD.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,CD.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof xD.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,MD.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}mf.unstakeTokensInstruction=ND;var bf={},DD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(bf,"__esModule",{value:!0});bf.updateCooldownPeriodInstruction=void 0;const UD=ht,FD=Yn;function WD({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return DD(this,void 0,void 0,function*(){const s=(0,FD.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new UD.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}bf.updateCooldownPeriodInstruction=WD;var vf={},zD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(vf,"__esModule",{value:!0});vf.updateRewardMultiplierInstruction=void 0;const VD=ht,$D=Yn;function jD({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return zD(this,void 0,void 0,function*(){const a=(0,$D.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new VD.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}vf.updateRewardMultiplierInstruction=jD;var _f={},qD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_f,"__esModule",{value:!0});_f.withdrawTokensInstruction=void 0;const GD=ht,HD=Fs,YD=Yn,JD=Cr;function QD({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return qD(this,void 0,void 0,function*(){const u=(0,YD.getStakingProgram)({connection:r,programId:a}),f=yield(0,HD.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,JD.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof GD.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}_f.withdrawTokensInstruction=QD;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(gv,r),t(bl,r),t(Il,r),t(El,r),t(df,r),t(hf,r),t(gf,r),t(yf,r),t(mf,r),t(bf,r),t(vf,r),t(_f,r)})(pv);var L0={},K0={};Object.defineProperty(K0,"__esModule",{value:!0});(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(cc,r),t(K0,r)})(L0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(pv,r),t(pf,r),t(L0,r),t(Yn,r)})(ml);var N0={};(function(r){var e=W&&W.__awaiter||function(m,I,O,M){function A(R){return R instanceof O?R:new O(function(C){C(R)})}return new(O||(O=Promise))(function(R,C){function Y(de){try{oe(M.next(de))}catch(E){C(E)}}function ae(de){try{oe(M.throw(de))}catch(E){C(E)}}function oe(de){de.done?R(de.value):A(de.value).then(Y,ae)}oe((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=ht,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,M){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,M),C=s(M),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,M),[C]=yield a(I,O);return yield R.account.playerFactionData.fetch(C)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,M).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(N0);var D0={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.gumDropIdl=void 0;wf.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=W&&W.__createBinding||(Object.create?function(A,R,C,Y){Y===void 0&&(Y=C);var ae=Object.getOwnPropertyDescriptor(R,C);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(A,Y,ae)}:function(A,R,C,Y){Y===void 0&&(Y=C),A[Y]=R[C]}),t=W&&W.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=W&&W.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(R,A,C);return t(R,A),R},i=W&&W.__awaiter||function(A,R,C,Y){function ae(oe){return oe instanceof C?oe:new C(function(de){de(oe)})}return new(C||(C=Promise))(function(oe,de){function E(J){try{V(Y.next(J))}catch(K){de(K)}}function N(J){try{V(Y.throw(J))}catch(K){de(K)}}function V(J){J.done?oe(J.value):ae(J.value).then(E,N)}V((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=ht,a=lc,u=n(Ve),f=en,h=wf,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,C=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Buffer.from("ClaimStatus"),A.toArrayLike(Buffer,"le",8),R.toBuffer()],C)});r.getClaimStatusKey=m;const I=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,C,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(V=>(0,r.getClaimStatusKey)(V,C,Y)),E=(yield Promise.all(de)).map(V=>V[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const M=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:C,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(C.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),V=oe.get("index"),J=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!V||!J||!K)throw new Error("Invalid claim");const j=J===""?[]:J.split(",").map(gr=>{const Ut=Buffer.from(u.decode(gr));if(Ut.length!==32)throw new Error("Invalid proof hash length");return Ut}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),z=yield R.getAccountInfo(T);if(z===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(z.data),Re=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ie=yield(0,f.getAssociatedTokenAddress)(ye,Re),Vt=yield R.getParsedTokenAccountsByOwner(ye,{mint:Re}),$t=new s.BN(V),_e=new s.BN(N),[We,Jt]=yield(0,r.getClaimStatusKey)($t,te,ae),an=new s.AnchorProvider(R,null,null),At=new s.Program(h.gumDropIdl,ae,an),ut=[];return Vt.value.length===0&&ut.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Re,Ie,ye,Y)),ut.push(At.instruction.claim(Jt,$t,_e,Y,j,{accounts:{distributor:te,claimStatus:We,from:T,to:Ie,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),ut});r.claimTokenInstructions=M})(D0);var be={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.baseIdl=void 0;Sf.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var Af={};Object.defineProperty(Af,"__esModule",{value:!0});Af.scoreLogBaseIdl=void 0;Af.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var rt=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=ht,pr=lc,U0=Ti,XD=$a,ZD=Sf,e2=Af,Ps=Cr;function Rt(r){const e=ZD.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Rt;function On(r){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=On;function mn(r,e){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=mn;function qn(r,e,t,n){return rt(this,void 0,void 0,function*(){const i=[Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=qn;function Gr(r,e,t){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=Gr;function Pn(r,e,t){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=Pn;function t2(r,e){return rt(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Rt(e),i=new ue.Program(n,e,t),[s]=yield On(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=t2;function n2(r,e,t,n){return rt(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Rt(e),a=new ue.Program(s,e,i),[u]=yield Pn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=n2;function r2(r,e,t){return rt(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(e2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=r2;function i2(r,e,t){return rt(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Rt(e),s=new ue.Program(i,e,n),[a]=yield mn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=i2;function kf(r){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=kf;function If(r){return rt(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=If;function s2(r,e){return rt(this,void 0,void 0,function*(){const t=Rt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=s2;function o2(r,e){return rt(this,void 0,void 0,function*(){const t=Rt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=o2;function a2(r,e,t){return rt(this,void 0,void 0,function*(){const n=Rt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield Pn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=a2;function c2(r,e,t,n,i,s,a,u){return rt(this,void 0,void 0,function*(){const f=Rt(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield kf(u),[O,M]=yield If(u),[A,R]=yield On(u);return yield d.instruction.processInitialize(R,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:pr.TOKEN_PROGRAM_ID,systemProgram:U0.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=c2;function u2(r,e,t,n,i,s,a,u,f,h,d,m,I){return rt(this,void 0,void 0,function*(){const O=Rt(I),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,M),[R,C]=yield mn(I,t),[Y,ae]=yield On(I);return yield A.instruction.processRegisterShip(ae,C,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:U0.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=u2;function l2(r,e,t,n){return rt(this,void 0,void 0,function*(){const i=Rt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield mn(n,t),[h,d]=yield On(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=l2;function f2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const s=Rt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield mn(i,t),[d,m]=yield On(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=f2;function d2(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return rt(this,void 0,void 0,function*(){const[u,f]=yield Gr(s,n,e),[h,d]=yield qn(s,n,null,e),[m,I]=yield Pn(s,n,e),[O,M]=yield mn(s,n),[A]=yield(0,XD.getPlayerFactionPDA)(e,a),R=Rt(s),C=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,C).instruction.processInitialDeposit(I,M,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=d2;function h2(r,e,t,n,i,s){return rt(this,void 0,void 0,function*(){const[a,u]=yield Gr(s,n,e),[f,h]=yield qn(s,n,null,e),[d,m]=yield Pn(s,n,e),[I,O]=yield mn(s,n),M=Rt(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=h2;function p2(r,e,t,n,i,s,a,u){return rt(this,void 0,void 0,function*(){const[f,h]=yield Gr(u,i,t),[d,m]=yield qn(u,i,s,t),[I,O]=yield Pn(u,i,t),[M,A]=yield mn(u,i),[R,C]=yield On(u),Y=Rt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=p2;function g2(r,e,t,n,i,s,a,u){return rt(this,void 0,void 0,function*(){const[f,h]=yield Gr(u,i,t),[d,m]=yield qn(u,i,s,t),[I,O]=yield Pn(u,i,t),[M,A]=yield mn(u,i),[R,C]=yield On(u),Y=Rt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=g2;function y2(r,e,t,n,i,s,a,u){return rt(this,void 0,void 0,function*(){const[f,h]=yield Gr(u,i,t),[d,m]=yield qn(u,i,s,t),[I,O]=yield Pn(u,i,t),[M,A]=yield mn(u,i),[R,C]=yield On(u),Y=Rt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=y2;function m2(r,e,t,n,i,s,a,u){return rt(this,void 0,void 0,function*(){const[f,h]=yield Pn(u,i,t),[d,m]=yield mn(u,i),[I,O]=yield On(u),M=Rt(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=m2;function b2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const[s,a]=yield Pn(i,n,e),[u,f]=yield mn(i,n),[h,d]=yield On(i),m=Rt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=b2;function v2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const[s,a]=yield Pn(i,n,e),[u,f]=yield mn(i,n),[h,d]=yield kf(i),[m,I]=yield If(i),O=Rt(i),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,M),R={signers:[],instructions:[]};let C;const Y=yield(0,Ps.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(C=ae.publicKey,R.signers.push(ae)):C=ae;const oe=yield A.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=v2;function _2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const[s,a]=yield Gr(i,n,e),[u,f]=yield qn(i,n,t,e),[h,d]=yield Pn(i,n,e),[m,I]=yield mn(i,n),[O,M]=yield On(i),A=Rt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ps.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFuel(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=_2;function w2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const[s,a]=yield Gr(i,n,e),[u,f]=yield qn(i,n,t,e),[h,d]=yield Pn(i,n,e),[m,I]=yield mn(i,n),[O,M]=yield On(i),A=Rt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ps.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFood(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=w2;function S2(r,e,t,n,i){return rt(this,void 0,void 0,function*(){const[s,a]=yield Gr(i,n,e),[u,f]=yield qn(i,n,t,e),[h,d]=yield Pn(i,n,e),[m,I]=yield mn(i,n),[O,M]=yield On(i),A=Rt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ps.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawArms(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:pr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=S2;function A2(r,e,t,n,i,s){return rt(this,void 0,void 0,function*(){const[a,u]=yield Gr(s,t,e),[f,h]=yield qn(s,t,null,e),[d,m]=yield Pn(s,t,e),[I,O]=yield mn(s,t),[M,A]=yield On(s),[R,C]=yield kf(s),[Y,ae]=yield If(s),oe={signers:[],instructions:[]},de=Rt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let V;const J=yield(0,Ps.getTokenAccount)(r,e,n),K=J.tokenAccount;"createInstruction"in J&&oe.instructions.push(...J.createInstruction),K instanceof ue.web3.Keypair?(V=K.publicKey,oe.signers.push(K)):V=K;let j;const te=yield(0,Ps.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let z;const X=yield(0,Ps.getTokenAccount)(r,e,i),Re=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Re instanceof ue.web3.Keypair?(z=Re.publicKey,oe.signers.push(Re)):z=Re;const ye=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,C,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:V,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:z,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:pr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=A2;function k2(r,e,t,n,i,s,a){return rt(this,void 0,void 0,function*(){const[u,f]=yield Gr(a,t,e),[h,d]=yield qn(a,t,null,e),[m,I]=yield qn(a,t,n,e),[O,M]=yield qn(a,t,i,e),[A,R]=yield qn(a,t,s,e),[C,Y]=yield On(a),[ae,oe]=yield Pn(a,t,e),de=Rt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,M,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:pr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=k2;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});var Gt={},ls=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},I2=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.sendTokens=Gt.confirmTokenBalance=Gt.createMint=Gt.mintTokens=Gt.createAssociatedTokenAccountInstruction=Gt.createRequestUnitsInstruction=Gt.Numberu32=Gt.createATokenAccount=Gt.getAtaForMint=void 0;const Mr=ht,ur=lc,E2=Cr,Qb=qu.exports,Xb=I2(tv.exports);function W0(r,e){return ls(this,void 0,void 0,function*(){return Mr.web3.PublicKey.findProgramAddress([e.toBuffer(),ur.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],ur.ASSOCIATED_TOKEN_PROGRAM_ID)})}Gt.getAtaForMint=W0;function O2(r,e,t,n){return ls(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield W0(e,n),s=new Mr.web3.Transaction,a=yield V0(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Gt.createATokenAccount=O2;class z0 extends Xb.default{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(t.length===4)return t;const n=Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Xb.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Gt.Numberu32=z0;function P2(r){return ls(this,void 0,void 0,function*(){const e=new z0(1e6),t=Buffer.from([0]),n=e.toBuffer();return new Mr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Mr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Buffer.concat([t,n])})})}Gt.createRequestUnitsInstruction=P2;function V0(r,e,t,n){return ls(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Mr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:ur.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Mr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Mr.web3.TransactionInstruction({keys:i,programId:ur.ASSOCIATED_TOKEN_PROGRAM_ID,data:Buffer.from([])})})}Gt.createAssociatedTokenAccountInstruction=V0;function T2(r,e,t,n,i){return ls(this,void 0,void 0,function*(){const s=new Mr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(ur.Token.createMintToInstruction(ur.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Gt.mintTokens=T2;function R2(r,e,t,n){return ls(this,void 0,void 0,function*(){const i=Mr.web3.Keypair.generate(),s=new Mr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(ur.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Mr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:ur.MintLayout.span,programId:ur.TOKEN_PROGRAM_ID});s.add(u);const f=ur.Token.createInitMintInstruction(ur.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Gt.createMint=R2;function B2(r,e,t,n){return ls(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,Qb.strict)(i===null),i!==null){const s=(0,E2.byteArrayToLong)(i.data.slice(64,72));(0,Qb.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Gt.confirmTokenBalance=B2;function x2(r,e,t,n){return ls(this,void 0,void 0,function*(){const i=new Mr.web3.Transaction;return i.add(ur.Token.createTransferInstruction(ur.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Gt.sendTokens=x2;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ml,r),t(N0,r),t(D0,r),t(Lp,r),t(be,r),t(F0,r),t(Gt,r),t(xs,r),t(Cr,r)})($a);const M2={class:"col text-h6"},C2={class:"text-overline"},gh="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",Zb="ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",ev=Qh({__name:"AccountTemplate",props:["count","function_name","publicKey"],setup(r){const e=r,t=Mu();async function n(){switch(e.function_name){case"getStakingAccount":t.value=await $a.getStakingAccount(new wt(gh),new wt(e.publicKey),new wt("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E"));break;case"getRegisteredStake":t.value=await $a.getRegisteredStake(new wt(gh),new wt(gh),new wt(Zb),new wt(Zb));break;default:t.value="No function called";break}}return TP(()=>e.count,async()=>{await n()}),(i,s)=>(Xh(),Zh(dv,{class:"row q-pa-md"},{default:ep(()=>[Va("div",M2,ju(r.function_name)+":",1),Va("div",C2,ju(t.value),1)]),_:1}))}}),L2={class:"col text-h6"},K2={class:"text-overline"},N2=Qh({__name:"AccountStatic",props:["count","function_name","data"],setup(r){return(e,t)=>(Xh(),Zh(dv,{class:"row q-pa-md"},{default:ep(()=>[Va("div",L2,ju(r.function_name)+":",1),Va("div",K2,ju(r.data),1)]),_:1}))}}),D2={class:"row"},H2=Qh({__name:"AccountsPage",setup(r){const e=Mu(0);Mu();const t=Mu("none");RP(()=>{var i;t.value=((i=BP().publicKey.value)==null?void 0:i.toString())??"none"});const n=()=>{e.value++};return(i,s)=>(Xh(),Zh(MP,{class:"col items-center justify-evenly q-mx-sm q-pt-sm q-gutter-y-md"},{default:ep(()=>[Va("div",D2,[ka(SP,{class:"col",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),label:"Wallet Address"},null,8,["modelValue"]),ka(xP,{color:"primary",icon:"send",onClick:n})]),ka(N2,{function_name:"getRegisteredStake(Atlas)",data:"J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E"}),ka(ev,{count:e.value,function_name:"getRegisteredStake","public-key":t.value},null,8,["count","public-key"]),ka(ev,{count:e.value,function_name:"getStakingAccount","public-key":t.value},null,8,["count","public-key"])]),_:1}))}});export{H2 as default};
