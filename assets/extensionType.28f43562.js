import{d0 as h,d8 as V,P as w,c$ as c,c_ as d,dx as I,cZ as z,du as R,dy as L,dz as b,dA as ee}from"./index.1c68c498.js";import{e as U,d as O,f as D,g as T,u as g,h as ne,i as v,j as te}from"./errors.1b8f7c21.js";const y=e=>{const n=h(e),{encode:r,decode:a}=U(n),s=n;return s.decode=(i,f)=>!!a(i,f),s.encode=(i,f,m)=>{const _=Number(i);return r(_,f,m)},s},o=e=>{const n=V(32,e),{encode:r,decode:a}=U(n),s=n;return s.decode=(i,f)=>{const m=a(i,f);return new w(m)},s.encode=(i,f,m)=>{const _=i.toBuffer();return r(_,f,m)},s};var N;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Mint=1]="Mint",e[e.Account=2]="Account"})(N||(N={}));const S=1,P=c([h("m"),h("n"),y("isInitialized"),o("signer1"),o("signer2"),o("signer3"),o("signer4"),o("signer5"),o("signer6"),o("signer7"),o("signer8"),o("signer9"),o("signer10"),o("signer11")]),M=P.span;async function ye(e,n,r,a=d){const s=await e.getAccountInfo(n,r);return ae(n,s,a)}function ae(e,n,r=d){if(!n)throw new O;if(!n.owner.equals(r))throw new D;if(n.data.length!=M)throw new T;const a=P.decode(n.data);return{address:e,...a}}async function Fe(e,n){return await e.getMinimumBalanceForRentExemption(M,n)}var E;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen"})(E||(E={}));const G=c([o("mint"),o("owner"),g("amount"),I("delegateOption"),o("delegate"),h("state"),I("isNativeOption"),g("isNative"),g("delegatedAmount"),I("closeAuthorityOption"),o("closeAuthority")]),l=G.span;async function _e(e,n,r,a=d){const s=await e.getAccountInfo(n,r);return Z(n,s,a)}async function Oe(e,n,r,a=d){const s=await e.getMultipleAccountsInfo(n,r);return n.map((i,f)=>Z(i,s[f],a))}async function De(e,n){return await re(e,[],n)}async function re(e,n,r){const a=Q(n);return await e.getMinimumBalanceForRentExemption(a,r)}function Z(e,n,r=d){if(!n)throw new O;if(!n.owner.equals(r))throw new D;if(n.data.length<l)throw new T;const a=G.decode(n.data.slice(0,l));let s=z.Buffer.alloc(0);if(n.data.length>l){if(n.data.length===M)throw new T;if(n.data[l]!=N.Account)throw new ne;s=n.data.slice(l+S)}return{address:e,mint:a.mint,owner:a.owner,amount:a.amount,delegate:a.delegateOption?a.delegate:null,delegatedAmount:a.delegatedAmount,isInitialized:a.state!==E.Uninitialized,isFrozen:a.state===E.Frozen,isNative:!!a.isNativeOption,rentExemptReserve:a.isNativeOption?a.isNative:null,closeAuthority:a.closeAuthorityOption?a.closeAuthority:null,tlvData:s}}const k=c([I("mintAuthorityOption"),o("mintAuthority"),g("supply"),h("decimals"),y("isInitialized"),I("freezeAuthorityOption"),o("freezeAuthority")]),C=k.span;async function Se(e,n,r,a=d){const s=await e.getAccountInfo(n,r);return se(n,s,a)}function se(e,n,r=d){if(!n)throw new O;if(!n.owner.equals(r))throw new D;if(n.data.length<C)throw new T;const a=k.decode(n.data.slice(0,C));let s=z.Buffer.alloc(0);if(n.data.length>C){if(n.data.length<=l)throw new T;if(n.data.length===M)throw new T;if(n.data[l]!=N.Mint)throw new te;s=n.data.slice(l+S)}return{address:e,mintAuthority:a.mintAuthorityOption?a.mintAuthority:null,supply:a.supply,decimals:a.decimals,isInitialized:a.isInitialized,freezeAuthority:a.freezeAuthorityOption?a.freezeAuthority:null,tlvData:s}}async function Le(e,n){return await oe(e,[],n)}async function oe(e,n,r){const a=Ce(n);return await e.getMinimumBalanceForRentExemption(a,r)}async function be(e,n,r=!1,a=d,s=R){if(!r&&!w.isOnCurve(n.toBuffer()))throw new v;const[i]=await w.findProgramAddress([n.toBuffer(),a.toBuffer(),e.toBuffer()],s);return i}function Be(e,n,r=!1,a=d,s=R){if(!r&&!w.isOnCurve(n.toBuffer()))throw new v;const[i]=w.findProgramAddressSync([n.toBuffer(),a.toBuffer(),e.toBuffer()],s);return i}const x=c([y("lockCpi")]),ie=x.span;function ze(e){const n=u(t.CpiGuard,e.tlvData);return n!==null?x.decode(n):null}const K=c([h("state")]),ce=K.span;function Re(e){const n=u(t.DefaultAccountState,e.tlvData);return n!==null?K.decode(n):null}const q=c([]),ue=q.span;function Ue(e){const n=u(t.ImmutableOwner,e.tlvData);return n!==null?q.decode(n):null}const W=c([o("rateAuthority"),L("initializationTimestamp"),b("preUpdateAverageRate"),L("lastUpdateTimestamp"),b("currentRate")]),le=W.span;function ve(e){const n=u(t.InterestBearingConfig,e.tlvData);return n!==null?W.decode(n):null}const $=c([y("requireIncomingTransferMemos")]),fe=$.span;function Pe(e){const n=u(t.MemoTransfer,e.tlvData);return n!==null?$.decode(n):null}const Y=c([o("closeAuthority")]),de=Y.span;function Ge(e){const n=u(t.MintCloseAuthority,e.tlvData);return n!==null?Y.decode(n):null}const F=c([]),ge=F.span,Ae=F.span;function Ze(e){const n=u(t.NonTransferable,e.tlvData);return n!==null?F.decode(n):null}function ke(e){const n=u(t.NonTransferableAccount,e.tlvData);return n!==null?F.decode(n):null}const H=c([o("delegate")]),me=H.span;function xe(e){const n=u(t.PermanentDelegate,e.tlvData);return n!==null?H.decode(n):null}const Te=1e4,Ke=Te;function B(e){return c([g("epoch"),g("maximumFee"),ee("transferFeeBasisPoints")],e)}const j=c([o("transferFeeConfigAuthority"),o("withdrawWithheldAuthority"),g("withheldAmount"),B("olderTransferFee"),B("newerTransferFee")]),he=j.span,X=c([g("withheldAmount")]),Ie=X.span;function qe(e){const n=u(t.TransferFeeConfig,e.tlvData);return n!==null?j.decode(n):null}function We(e){const n=u(t.TransferFeeAmount,e.tlvData);return n!==null?X.decode(n):null}var t;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.TransferFeeConfig=1]="TransferFeeConfig",e[e.TransferFeeAmount=2]="TransferFeeAmount",e[e.MintCloseAuthority=3]="MintCloseAuthority",e[e.ConfidentialTransferMint=4]="ConfidentialTransferMint",e[e.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",e[e.DefaultAccountState=6]="DefaultAccountState",e[e.ImmutableOwner=7]="ImmutableOwner",e[e.MemoTransfer=8]="MemoTransfer",e[e.NonTransferable=9]="NonTransferable",e[e.InterestBearingConfig=10]="InterestBearingConfig",e[e.CpiGuard=11]="CpiGuard",e[e.PermanentDelegate=12]="PermanentDelegate",e[e.NonTransferableAccount=13]="NonTransferableAccount"})(t||(t={}));const A=2,p=2;function we(e){switch(e){case t.Uninitialized:return 0;case t.TransferFeeConfig:return he;case t.TransferFeeAmount:return Ie;case t.MintCloseAuthority:return de;case t.ConfidentialTransferMint:return 97;case t.ConfidentialTransferAccount:return 286;case t.CpiGuard:return ie;case t.DefaultAccountState:return ce;case t.ImmutableOwner:return ue;case t.MemoTransfer:return fe;case t.NonTransferable:return ge;case t.InterestBearingConfig:return le;case t.PermanentDelegate:return me;case t.NonTransferableAccount:return Ae;default:throw Error(`Unknown extension type: ${e}`)}}function $e(e){switch(e){case t.TransferFeeConfig:case t.MintCloseAuthority:case t.ConfidentialTransferMint:case t.DefaultAccountState:case t.NonTransferable:case t.InterestBearingConfig:case t.PermanentDelegate:return!0;case t.Uninitialized:case t.TransferFeeAmount:case t.ConfidentialTransferAccount:case t.ImmutableOwner:case t.MemoTransfer:case t.CpiGuard:case t.NonTransferableAccount:return!1;default:throw Error(`Unknown extension type: ${e}`)}}function Ye(e){switch(e){case t.TransferFeeAmount:case t.ConfidentialTransferAccount:case t.ImmutableOwner:case t.MemoTransfer:case t.CpiGuard:case t.NonTransferableAccount:return!0;case t.Uninitialized:case t.TransferFeeConfig:case t.MintCloseAuthority:case t.ConfidentialTransferMint:case t.DefaultAccountState:case t.NonTransferable:case t.InterestBearingConfig:case t.PermanentDelegate:return!1;default:throw Error(`Unknown extension type: ${e}`)}}function Me(e){switch(e){case t.TransferFeeConfig:return t.TransferFeeAmount;case t.ConfidentialTransferMint:return t.ConfidentialTransferAccount;case t.NonTransferable:return t.NonTransferableAccount;case t.TransferFeeAmount:case t.ConfidentialTransferAccount:case t.CpiGuard:case t.DefaultAccountState:case t.ImmutableOwner:case t.MemoTransfer:case t.MintCloseAuthority:case t.Uninitialized:case t.InterestBearingConfig:case t.PermanentDelegate:case t.NonTransferableAccount:return t.Uninitialized}}function J(e,n){if(e.length===0)return n;{const r=l+S+e.filter((a,s)=>s===e.indexOf(a)).map(a=>we(a)+A+p).reduce((a,s)=>a+s);return r===M?r+A:r}}function Ce(e){return J(e,C)}function Q(e){return J(e,l)}function u(e,n){let r=0;for(;r+A+p<=n.length;){const a=n.readUInt16LE(r),s=n.readUInt16LE(r+A),i=r+A+p;if(a==e)return n.slice(i,i+s);r=i+s}return null}function Ne(e){const n=[];let r=0;for(;r<e.length;){const a=e.readUInt16LE(r);n.push(a);const s=e.readUInt16LE(r+A);r+=A+p+s}return n}function He(e){const r=Ne(e.tlvData).map(Me);return Q(r)}export{X as $,l as A,W as B,x as C,K as D,t as E,le as F,ve as G,$ as H,q as I,fe as J,Pe as K,p as L,C as M,Y as N,de as O,Ge as P,F as Q,ge as R,Ae as S,A as T,Ze as U,ke as V,Te as W,Ke as X,B as Y,j as Z,he as _,Be as a,Ie as a0,qe as a1,We as a2,H as a3,me as a4,xe as a5,E as a6,G as a7,Oe as a8,re as a9,Z as aa,k as ab,se as ac,oe as ad,P as ae,ye as af,ae as ag,Se as b,He as c,Le as d,Fe as e,M as f,be as g,De as h,_e as i,Ce as j,N as k,S as l,ie as m,ze as n,ce as o,o as p,Re as q,we as r,$e as s,Ye as t,Me as u,Q as v,u as w,Ne as x,ue as y,Ue as z};
