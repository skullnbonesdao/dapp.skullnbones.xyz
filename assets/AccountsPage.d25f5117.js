import{Q as Lu,a as sb}from"./QTabs.46d7ab68.js";import{Q as ll}from"./QSpace.d89096e6.js";import{t as dT,f as fT,u as zs,a as Bv,b as hT}from"./format_address.a8bc421d.js";import{Q as ob,a as pT}from"./QTabPanels.0bc5f077.js";import{Q as gT}from"./QPage.254b4c0f.js";import{Q as dl}from"./QInput.b7ed1c20.js";import{bX as z,dd as xv,dZ as ab,dg as Re,dh as Cv,di as ee,de as Ge,d_ as Vh,d3 as uc,dX as Mv,P as Me,cR as lc,cY as yT,d$ as Lv,e0 as Kv,cX as ls,e1 as Nv,e2 as mT,e3 as bT,bW as kc,dj as nt,dk as ie,dl as se,dm as xt,dn as Ee,dp as Tt,dq as _r,dr as _i,ds as F,dt as ga,du as ya,dv as Le,dw as wi,dx as x,dy as S,dz as H,dA as G,dB as le,dC as nn,dD as Dl,dE as mt,dF as he,dG as Vt,dH as Ic,dI as Xe,dJ as fl,dK as Dv,dL as ri,e4 as Uv,e5 as Fv,e6 as zv,dM as Vv,dN as Ip,dO as cb,dP as vT,dQ as _T,dR as wT,dS as ST,au as gs,J as tn,bs as Ul,b1 as Xn,ak as eo,a1 as Ht,aX as Ep,cq as Xt,al as ht,as as pe,ck as Qr,bx as Ie,a6 as Op,bZ as Wv,ah as $v,aF as Wh,cg as $h,aC as AT,ai as Ls,cm as Pp,V as Yo,d4 as Fl,bz as jv,cn as hl,cP as jh,ar as Dr,e7 as fh,e8 as kT,d0 as ub,aj as Co,Z as qv}from"./index.2aa30145.js";import{Q as IT}from"./QTree.384f581c.js";import{s as to}from"./sha256.e4d6ee67.js";import{a as pl,g as Qo,c as ET}from"./index.de9a2af4.js";import{_ as $a,c as OT,a as PT,b as lb}from"./defineProperty.43960b8f.js";import{T as TT}from"./constants.64f7c7b2.js";import{c as Gv,Q as Hv}from"./QSelect.423ba994.js";import{Q as Yv,a as Qv}from"./QToolbar.6f3d770f.js";import{Q as Jv,a as Xv}from"./QCard.c875dd23.js";import{C as Zv}from"./ClosePopup.769fc70f.js";import{h as qh}from"./QSlideTransition.13333a18.js";import"./QList.f11ffbb0.js";import"./QSeparator.558d612f.js";import"./touch.3df10340.js";var ts={},zl={},e_={},t_={};Object.defineProperty(t_,"__esModule",{value:!0});var Vl={},ir={},$s={},Tp={exports:{}};const RT=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},n_=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=RT(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};Tp.exports=n_;Tp.exports.default=n_;var An=Tp.exports,Fe={};(function(r){var e=z&&z.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=ab,n=Cv,i=e(xv.exports);var s=ab;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Re.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function d(K){return new a(8,!0,K)}r.i64=d;function h(K){return new a(16,!1,K)}r.u128=h;function f(K){return new a(16,!0,K)}r.i128=f;class m extends t.Layout{constructor(j,te,T,V){super(j.span,V),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function C(K,j){return new O(K,j)}r.option=C;function A(K){return new m(t.u8(),R,M,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function M(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:V})=>V,V=>({values:V}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function V({tag:X,data:Ce}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Ce}return new m(T,V,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function fe(K){return new m(oe(),j=>j.toString("utf-8"),j=>Re.Buffer.from(j,"utf-8"),K)}r.str=fe;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((V,X)=>T.addVariant(X,V,V.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:V})=>V,V=>({values:V}),te)}r.array=N;class W extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),V=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,V]}encode(j,te,T){T=T||0;const V=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+V);return V+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function Q(K,j,te){const T=t.u32("length"),V=t.struct([T,t.seq(new W(K,j),t.offset(T,-T.span),"values")]);return new m(V,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=Q})(Fe);var BT=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function r_(r){return new TextDecoder("utf-8").decode(r)}function i_(r){return new TextEncoder().encode(r)}var xT=Object.freeze({__proto__:null,decode:r_,encode:i_});function s_(r){return Ge.encode(r)}var CT=Object.freeze({__proto__:null,encode:s_,decode:function(r){return Ge.decode(r)}});function o_(r){return ee.Buffer.from(Lv(r))}var MT=Object.freeze({__proto__:null,encode:function(r){return Vh(r)},decode:o_}),LT=Object.freeze({__proto__:null,hex:BT,utf8:xT,bs58:CT,base64:MT});function Rp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function a_(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function Wl(r,e={}){r.forEach(t=>{if("accounts"in t)Wl(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Jr(r){return r instanceof Me?r:new Me(r)}class KT extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function zo(r){return typeof r=="object"&&r!=null}function ds(r){return typeof r=="string"?JSON.stringify(r):""+r}function NT(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:d="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+ds(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:d}}function*db(r,e,t,n){var i;zo(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=NT(s,e,t,n);a&&(yield a)}}function*Bp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&zo(e.schema)&&zo(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let d=!0;for(const h of e.validator(r,u))d=!1,yield[h,void 0];for(let[h,f,m]of e.entries(r,u)){const I=Bp(f,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,f],coerce:s,mask:a});for(const O of I)O[0]?(d=!1,yield[O[0],void 0]):s&&(f=O[1],h===void 0?r=f:r instanceof Map?r.set(h,f):r instanceof Set?r.add(f):zo(r)&&(r[h]=f))}if(d)for(const h of e.refiner(r,u))d=!1,yield[h,void 0];d&&(yield[void 0,r])}class ys{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=d=>d,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(d,h)=>db(i(d,h),h,this,d):()=>[],this.refiner=s?(d,h)=>db(s(d,h),h,this,d):()=>[]}assert(e){return function(t,n){const i=ec(t,n);if(i[0])throw i[0]}(e,this)}create(e){return xp(e,this)}is(e){return c_(e,this)}mask(e){return function(t,n){const i=ec(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return ec(e,this,t)}}function xp(r,e){const t=ec(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function c_(r,e){return!ec(r,e)[0]}function ec(r,e,t={}){const n=Bp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new KT(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Ec(r,e){return new ys({type:r,schema:null,validator:e})}function hh(r){return new ys({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+ds(e)})}function fb(r){const e=ds(r),t=typeof r;return new ys({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+ds(n)})}function Ku(r){return new ys({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Nu(){return Ec("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+ds(r))}function el(r){return new ys({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Ks(){return Ec("string",r=>typeof r=="string"||"Expected a string, but received: "+ds(r))}function ns(r){const e=Object.keys(r);return new ys({type:"type",schema:r,*entries(t){if(zo(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>zo(t)||"Expected an object, but received: "+ds(t)})}function u_(r){const e=r.map(t=>t.type).join(" | ");return new ys({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=Bp(t,s,n),[u]=a;if(!u[0])return[];for(const[d]of a)d&&i.push(d)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+ds(t),...i]}})}function l_(){return Ec("unknown",()=>!0)}async function d_(r,e,t){if(e.length<=99)return await hb(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>hb(r,i,t)))).flat()}}async function hb(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function f_(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),d={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());d.accounts={encoding:"base64",addresses:m}}t&&(d.sigVerify=!0);const h=[u,d],f=xp(await r._rpcRequest("simulateTransaction",h),FT);if("error"in f){let m;if("data"in f.error&&(m=f.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(f.error.message,O)}throw new Kv("failed to simulate transaction: "+f.error.message,m)}return f.result}function DT(r){return function(e,t,n){return new ys({...e,coercer:(i,s)=>c_(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(h_(r),UT,e=>"error"in e?e:{...e,result:xp(e.result,r)})}const UT=h_(l_());function h_(r){return u_([ns({jsonrpc:fb("2.0"),id:Ks(),result:r}),ns({jsonrpc:fb("2.0"),id:Ks(),error:ns({code:l_(),message:Ks(),data:el(Ec("any",()=>!0))})})])}const FT=(pb=ns({err:Ku(u_([ns({}),Ks()])),logs:Ku(hh(Ks())),accounts:el(Ku(hh(Ku(ns({executable:Ec("boolean",r=>typeof r=="boolean"),owner:Ks(),lamports:Nu(),data:hh(Ks()),rentEpoch:el(Nu())}))))),unitsConsumed:el(Nu())}),DT(ns({context:ns({slot:Nu()}),value:pb})));var pb,zT=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=Jr(r),n||(n=Jo());const i=new uc;if(i.add(new Mv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:d_,simulateTransaction:f_});class p_{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await gb(this.connection,s,n)}catch(a){if(a instanceof g_){const u=await this.connection.getTransaction(s_(e.signature),{commitment:"confirmed"});if(u){const d=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw d?new Kv(a.message,d):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var d;let h=u.tx,f=(d=u.signers)!==null&&d!==void 0?d:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,f.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const d=s[u].serialize();a.push(await gb(this.connection,d,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await f_(this.connection,e,t,n,i);if(s.value.err)throw new VT(s.value);return s.value}}class VT extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function gb(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new g_(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class g_ extends Error{constructor(e){super(e)}}function WT(r){Gh=r}function Jo(){return Gh===null?p_.local():Gh}let Gh=null;const $T=new Set(["anchor-deprecated-state","debug-logs"]),y_=new Map;function $l(r){return y_.get(r)!==void 0}var jT=Object.freeze({__proto__:null,set:function(r){if(!$T.has(r))throw new Error("Invalid feature");y_.set(r,!0)},isSet:$l});class dc extends Error{constructor(e){super(e),this.name="IdlError"}}class ma{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new Me(u))}return new ma(s)}}class Vo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=ma.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,f=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new Me(f),new Me(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,f=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[f,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),d=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,f,m]=a.slice(1,4),I={code:h,number:parseInt(f)};return new Vo(I,m,i,e,void 0,s)}if(u){const[h,f,m,I,O]=u.slice(1,6),C={code:m,number:parseInt(I)},A={file:h,line:parseInt(f)};return new Vo(C,O,i,e,A,s)}if(d){const[h,f,m,I]=d.slice(1,5),O=h,C={code:f,number:parseInt(m)};return new Vo(C,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class fc extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=ma.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new fc(s,a,e.logs):(a=m_.get(s),a!==void 0?new fc(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function Cp(r,e){$l("debug-logs")&&console.log("Translating error:",r);const t=Vo.parse(r.logs);if(t)return t;const n=fc.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=ma.parse(r.logs),new Proxy(r,i)}return r}const Pe={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},m_=new Map([[Pe.InstructionMissing,"8 byte instruction identifier not provided"],[Pe.InstructionFallbackNotFound,"Fallback functions are not supported"],[Pe.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Pe.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Pe.IdlInstructionStub,"The program was compiled without idl instructions"],[Pe.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Pe.ConstraintMut,"A mut constraint was violated"],[Pe.ConstraintHasOne,"A has_one constraint was violated"],[Pe.ConstraintSigner,"A signer constraint was violated"],[Pe.ConstraintRaw,"A raw constraint was violated"],[Pe.ConstraintOwner,"An owner constraint was violated"],[Pe.ConstraintRentExempt,"A rent exemption constraint was violated"],[Pe.ConstraintSeeds,"A seeds constraint was violated"],[Pe.ConstraintExecutable,"An executable constraint was violated"],[Pe.ConstraintState,"A state constraint was violated"],[Pe.ConstraintAssociated,"An associated constraint was violated"],[Pe.ConstraintAssociatedInit,"An associated init constraint was violated"],[Pe.ConstraintClose,"A close constraint was violated"],[Pe.ConstraintAddress,"An address constraint was violated"],[Pe.ConstraintZero,"Expected zero account discriminant"],[Pe.ConstraintTokenMint,"A token mint constraint was violated"],[Pe.ConstraintTokenOwner,"A token owner constraint was violated"],[Pe.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Pe.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Pe.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Pe.ConstraintSpace,"A space constraint was violated"],[Pe.RequireViolated,"A require expression was violated"],[Pe.RequireEqViolated,"A require_eq expression was violated"],[Pe.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Pe.RequireNeqViolated,"A require_neq expression was violated"],[Pe.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Pe.RequireGtViolated,"A require_gt expression was violated"],[Pe.RequireGteViolated,"A require_gte expression was violated"],[Pe.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Pe.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Pe.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Pe.AccountDidNotDeserialize,"Failed to deserialize the account"],[Pe.AccountDidNotSerialize,"Failed to serialize the account"],[Pe.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Pe.AccountNotMutable,"The given account is not mutable"],[Pe.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Pe.InvalidProgramId,"Program ID was not as expected"],[Pe.InvalidProgramExecutable,"Program account is not executable"],[Pe.AccountNotSigner,"The given account did not sign"],[Pe.AccountNotSystemOwned,"The given account is not owned by the system program"],[Pe.AccountNotInitialized,"The program expected this account to be already initialized"],[Pe.AccountNotProgramData,"The given account is not a program data account"],[Pe.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Pe.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Pe.StateInvalidAddress,"The given state account does not have the correct address"],[Pe.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Pe.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gl=function(){return gl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},gl.apply(this,arguments)};function qT(r){return r.toLowerCase()}var GT=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],HT=/[^A-Z0-9]+/gi;function yb(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function YT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?GT:i,a=n.stripRegexp,u=a===void 0?HT:a,d=n.transform,h=d===void 0?qT:d,f=n.delimiter,m=f===void 0?" ":f,I=yb(yb(t,s,"$1\0$2"),u,"\0"),O=0,C=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(C-1)==="\0";)C--;return I.slice(O,C).split("\0").map(h).join(m)}(r,gl({delimiter:"."},e))}class mr{static fieldLayout(e,t){const n=e.name!==void 0?An(e.name):void 0;switch(e.type){case"bool":return Fe.bool(n);case"u8":return Fe.u8(n);case"i8":return Fe.i8(n);case"u16":return Fe.u16(n);case"i16":return Fe.i16(n);case"u32":return Fe.u32(n);case"i32":return Fe.i32(n);case"f32":return Fe.f32(n);case"u64":return Fe.u64(n);case"i64":return Fe.i64(n);case"f64":return Fe.f64(n);case"u128":return Fe.u128(n);case"i128":return Fe.i128(n);case"bytes":return Fe.vecU8(n);case"string":return Fe.str(n);case"publicKey":return Fe.publicKey(n);default:if("vec"in e.type)return Fe.vec(mr.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Fe.option(mr.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new dc("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new dc(`Type not found: ${JSON.stringify(e)}`);return mr.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=mr.fieldLayout({name:void 0,type:i},t);return Fe.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>mr.fieldLayout(s,t));return Fe.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=An(s.name);if(s.fields===void 0)return Fe.struct([],a);const u=s.fields.map(d=>{if(!d.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return mr.fieldLayout(d,t)});return Fe.struct(u,a)});return n!==void 0?Fe.rustEnum(i).replicate(n):Fe.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class jl{constructor(e){this.idl=e,this.ixLayout=jl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=ph("global",n.name);t.set(Ge.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=ph("state",n.name);t.set(Ge.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=An(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),d=i.slice(0,u);return ee.Buffer.concat([ph(e,t),d])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,d;return mr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(d=e.types)!==null&&d!==void 0?d:[]]))});const s=An(n.name);return[s,Fe.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,d;return mr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(d=e.types)!==null&&d!==void 0?d:[]]))});const s=An(n.name);return[s,Fe.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):Ge.decode(e));let n=Ge.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Mi.format(e,t,this.idl)}}class Mi{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Mi.formatIdlType(u.type),data:Mi.formatIdlData(u,e.data[u.name],n.types)})),a=Mi.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,d)=>d<a.length?{name:a[d].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Mi.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Mi.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var f;const m=a[h],I=(f=i[s])===null||f===void 0?void 0:f.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Mi.formatIdlData(I,m,n)}).join(", "),d=An(s,{pascalCase:!0});return u.length===0?d:`${d} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Mi.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function ph(r,e){var t;let n=`${r}:${t===void 0&&(t={}),YT(e,gl({delimiter:"_"},t))}`;return ee.Buffer.from(to.exports.sha256.digest(n)).slice(0,8)}function Mp(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return tc(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>tc(r,t.type)).reduce((t,n)=>t+n,0)}function tc(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+tc(r,e.option);if("coption"in e)return 4+tc(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new dc(`Type not found: ${JSON.stringify(e)}`);return Mp(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return tc(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const QT=8;class Wo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,mr.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=Wo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(Wo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=Wo.accountDiscriminator(e);return{offset:0,bytes:Ge.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=Mp(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(to.exports.sha256.digest(`account:${An(e,{pascalCase:!0})}`)).slice(0,8)}}class b_{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,mr.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[Vh(v_(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(Lv(e))}catch{return null}const n=Vh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function v_(r){return ee.Buffer.from(to.exports.sha256.digest(`event:${r}`)).slice(0,8)}class __{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=mr.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await Lp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function Lp(r){let e=$l("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(to.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class ql{constructor(e){this.instruction=new jl(e),this.accounts=new Wo(e),this.events=new b_(e),e.state&&(this.state=new __(e))}}var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re.global<"u"?Re.global:typeof self<"u"?self:{};function XT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class wr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var w_=wr;class Ns extends wr{isCount(){throw new Error("ExternalLayout is abstract")}}class ZT extends Ns{constructor(e,t,n){if(!(e instanceof wr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Gl||this.layout instanceof S_}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Gl extends wr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class S_ extends wr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const gh=Math.pow(2,32);class eR extends wr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*gh+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/gh);return{hi32:a,lo32:s-a*gh}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class tR extends wr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof wr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let d=u.span;if(a=0<d?d:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>d&&(d=u.getSpan(t,n)))}s=n,n+=d}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class A_{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class mb extends A_{constructor(e,t){if(!(e instanceof Ns&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class k_ extends wr{constructor(e,t,n){const i=e instanceof Gl||e instanceof S_;if(i)e=new mb(new ZT(e));else if(e instanceof Ns&&e.isCount())e=new mb(e);else if(!(e instanceof A_))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof wr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new nR(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Re.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class nR extends wr{constructor(e,t,n,i){if(!(e instanceof k_))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof wr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class rR extends wr{constructor(e,t){if(!(e instanceof Ns&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ns||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Ns&&(i=e.length),!Re.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Ns&&this.length.encode(i,t,n),i}}var xn=r=>new Gl(1,r),Zi=r=>new eR(r),Kt=(r,e,t)=>new tR(r,e,t),Hl=(r,e)=>new rR(r,e);class iR{constructor(e){}encode(e,t){switch(An(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Gt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||Me.default).toBuffer()}})}(t);case"initializeAccount":return Gt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return Gt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return Gt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return Gt({approve:{amount:n}})}(t);case"revoke":return Gt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return Gt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return Gt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return Gt({burn:{amount:n}})}(t);case"closeAccount":return Gt({closeAccount:{}});case"freezeAccount":return Gt({freezeAccount:{}});case"thawAccount":return Gt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return Gt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return Gt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return Gt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return Gt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return Gt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return Gt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return Gt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return Gt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Gt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Nt=(bb=xn("instruction"),new k_(bb,sR,oR));var bb,sR,oR;function Eo(r){return Hl(32,r)}function Gt(r){let e=Re.Buffer.alloc(aR),t=Nt.encode(r,e);return e.slice(0,t)}Nt.addVariant(0,Kt([xn("decimals"),Hl(32,"mintAuthority"),xn("freezeAuthorityOption"),Eo("freezeAuthority")]),"initializeMint"),Nt.addVariant(1,Kt([]),"initializeAccount"),Nt.addVariant(2,Kt([xn("m")]),"initializeMultisig"),Nt.addVariant(3,Kt([Zi("amount")]),"transfer"),Nt.addVariant(4,Kt([Zi("amount")]),"approve"),Nt.addVariant(5,Kt([]),"revoke"),Nt.addVariant(6,Kt([xn("authorityType"),xn("newAuthorityOption"),Eo("newAuthority")]),"setAuthority"),Nt.addVariant(7,Kt([Zi("amount")]),"mintTo"),Nt.addVariant(8,Kt([Zi("amount")]),"burn"),Nt.addVariant(9,Kt([]),"closeAccount"),Nt.addVariant(10,Kt([]),"freezeAccount"),Nt.addVariant(11,Kt([]),"thawAccount"),Nt.addVariant(12,Kt([Zi("amount"),xn("decimals")]),"transferChecked"),Nt.addVariant(13,Kt([Zi("amount"),xn("decimals")]),"approvedChecked"),Nt.addVariant(14,Kt([Zi("amount"),xn("decimals")]),"mintToChecked"),Nt.addVariant(15,Kt([Zi("amount"),xn("decimals")]),"burnedChecked"),Nt.addVariant(16,Kt([Eo("authority")]),"InitializeAccount2"),Nt.addVariant(17,Kt([]),"syncNative"),Nt.addVariant(18,Kt([Eo("authority")]),"initializeAccount3"),Nt.addVariant(19,Kt([xn("m")]),"initializeMultisig2"),Nt.addVariant(20,Kt([xn("decimals"),Eo("mintAuthority"),xn("freezeAuthorityOption"),Eo("freezeAuthority")]),"initializeMint2");const aR=Math.max(...Object.values(Nt.registry).map(r=>r.span));class cR{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function tl(r){return new Kp(Hl(8),e=>Np.fromBuffer(e),e=>e.toBuffer(),r)}function Mo(r){return new Kp(Hl(32),e=>new Me(e),e=>e.toBuffer(),r)}function nc(r,e){return new uR(r,e)}class Kp extends w_{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class uR extends w_{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Gl(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function lR(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function dR(r){return r?1:0}class Np extends ls{toBuffer(){const e=super.toArray().reverse(),t=Re.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Re.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Np([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class fR{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Re.Buffer.alloc(165),i=_b.encode(t,n);return n.slice(0,i)}case"mint":{const n=Re.Buffer.alloc(82),i=vb.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return _b.decode(n)}(t);case"mint":return function(n){return vb.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=Mp(this.idl,e))!==null&&t!==void 0?t:0}}const vb=Kt([nc(Mo(),"mintAuthority"),tl("supply"),xn("decimals"),function(r){return new Kp(xn(),lR,dR,r)}("isInitialized"),nc(Mo(),"freezeAuthority")]),_b=Kt([Mo("mint"),Mo("authority"),tl("amount"),nc(Mo(),"delegate"),xn("state"),nc(tl(),"isNative"),tl("delegatedAmount"),nc(Mo(),"closeAuthority")]);class hR{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class I_{constructor(e){this.instruction=new iR(e),this.accounts=new fR(e),this.events=new hR(e),this.state=new cR(e)}}var pR=Object.freeze({__proto__:null,hash:function(r){return to.exports.sha256(r)}});function E_(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=to.exports.sha256.digest(n);return new Me(ee.Buffer.from(i))}function O_(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,gR(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=to.exports.sha256(new Uint8Array(t)),i=new ls(n,16).toArray(void 0,32);if(Me.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new Me(i)}function Dp(r,e){let t,n=255;for(;n!=0;){try{t=O_(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const gR=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function P_(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:Jr(i).toBuffer())});const[n]=await Me.findProgramAddress(t,Jr(r));return n}var yR=Object.freeze({__proto__:null,createWithSeedSync:E_,createProgramAddressSync:O_,findProgramAddressSync:Dp,associated:P_});const Hh=new Me("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Yh=new Me("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var mR=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Hh,ASSOCIATED_PROGRAM_ID:Yh,associatedAddress:async function({mint:r,owner:e}){return(await Me.findProgramAddress([e.toBuffer(),Hh.toBuffer(),r.toBuffer()],Yh))[0]}}),Qh={exports:{}};(function(r,e){var t=typeof self<"u"?self:JT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,d="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function C(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var V={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return d&&(V[Symbol.iterator]=function(){return V}),V}function M(T){this.map={},T instanceof M?T.forEach(function(V,X){this.append(X,V)},this):Array.isArray(T)?T.forEach(function(V){this.append(V[0],V[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(V){this.append(V,T[V])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(V,X){T.onload=function(){V(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var V=new FileReader,X=ae(V);return V.readAsArrayBuffer(T),X}function fe(T){if(T.slice)return T.slice(0);var V=new Uint8Array(T.byteLength);return V.set(new Uint8Array(T)),V.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var V;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:f&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(V=T)&&DataView.prototype.isPrototypeOf(V)?(this._bodyArrayBuffer=fe(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=fe(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(V){var X=new FileReader,Ce=ae(X);return X.readAsText(V),Ce}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var X=new Uint8Array(V),Ce=new Array(X.length),me=0;me<X.length;me++)Ce[me]=String.fromCharCode(X[me]);return Ce.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}M.prototype.append=function(T,V){T=C(T),V=A(V);var X=this.map[T];this.map[T]=X?X+", "+V:V},M.prototype.delete=function(T){delete this.map[C(T)]},M.prototype.get=function(T){return T=C(T),this.has(T)?this.map[T]:null},M.prototype.has=function(T){return this.map.hasOwnProperty(C(T))},M.prototype.set=function(T,V){this.map[C(T)]=A(V)},M.prototype.forEach=function(T,V){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(V,this.map[X],X,this)},M.prototype.keys=function(){var T=[];return this.forEach(function(V,X){T.push(X)}),R(T)},M.prototype.values=function(){var T=[];return this.forEach(function(V){T.push(V)}),R(T)},M.prototype.entries=function(){var T=[];return this.forEach(function(V,X){T.push([X,V])}),R(T)},d&&(M.prototype[Symbol.iterator]=M.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function W(T,V){var X,Ce,me=(V=V||{}).body;if(T instanceof W){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,V.headers||(this.headers=new M(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,me||T._bodyInit==null||(me=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=V.credentials||this.credentials||"same-origin",!V.headers&&this.headers||(this.headers=new M(V.headers)),this.method=(X=V.method||this.method||"GET",Ce=X.toUpperCase(),N.indexOf(Ce)>-1?Ce:X),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&me)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(me)}function Q(T){var V=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Ce=X.split("="),me=Ce.shift().replace(/\+/g," "),Oe=Ce.join("=").replace(/\+/g," ");V.append(decodeURIComponent(me),decodeURIComponent(Oe))}}),V}function K(T,V){V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in V?V.statusText:"OK",this.headers=new M(V.headers),this.url=V.url||"",this._initBody(T)}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})},E.call(W.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new M(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,V){if(j.indexOf(V)===-1)throw new RangeError("Invalid status code");return new K(null,{status:V,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(V,X){this.message=V,this.name=X;var Ce=Error(V);this.stack=Ce.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,V){return new Promise(function(X,Ce){var me=new W(T,V);if(me.signal&&me.signal.aborted)return Ce(new a.DOMException("Aborted","AbortError"));var Oe=new XMLHttpRequest;function Yt(){Oe.abort()}Oe.onload=function(){var Qt,we,je={status:Oe.status,statusText:Oe.statusText,headers:(Qt=Oe.getAllResponseHeaders()||"",we=new M,Qt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(gn){var Ot=gn.split(":"),pt=Ot.shift().trim();if(pt){var kr=Ot.join(":").trim();we.append(pt,kr)}}),we)};je.url="responseURL"in Oe?Oe.responseURL:je.headers.get("X-Request-URL");var sn="response"in Oe?Oe.response:Oe.responseText;X(new K(sn,je))},Oe.onerror=function(){Ce(new TypeError("Network request failed"))},Oe.ontimeout=function(){Ce(new TypeError("Network request failed"))},Oe.onabort=function(){Ce(new a.DOMException("Aborted","AbortError"))},Oe.open(me.method,me.url,!0),me.credentials==="include"?Oe.withCredentials=!0:me.credentials==="omit"&&(Oe.withCredentials=!1),"responseType"in Oe&&h&&(Oe.responseType="blob"),me.headers.forEach(function(Qt,we){Oe.setRequestHeader(we,Qt)}),me.signal&&(me.signal.addEventListener("abort",Yt),Oe.onreadystatechange=function(){Oe.readyState===4&&me.signal.removeEventListener("abort",Yt)}),Oe.send(me._bodyInit===void 0?null:me._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=M,s.Request=W,s.Response=K),a.Headers=M,a.Request=W,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Qh,Qh.exports);var bR=XT(Qh.exports);async function wb(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=Jh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=Jh(i.data);return s}const vR=Fe.rustEnum([Fe.struct([],"uninitialized"),Fe.struct([Fe.option(Fe.publicKey(),"authorityAddress")],"buffer"),Fe.struct([Fe.publicKey("programdataAddress")],"program"),Fe.struct([Fe.u64("slot"),Fe.option(Fe.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Fe.u32());function Jh(r){return vR.decode(r)}var _R=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([wb(r,e),bR(n)]),a=(await s.json()).filter(d=>!d.aborted&&d.state==="Built"&&d.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:wb,decodeUpgradeableLoaderState:Jh}),wR=Object.freeze({__proto__:null,sha256:pR,rpc:zT,publicKey:yR,bytes:LT,token:mR,features:jT,registry:_R});const SR=Fe.struct([Fe.publicKey("authority"),Fe.vecU8("data")]);function Oc(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Xo{static build(e,t,n){if(e.name==="_inner")throw new dc("the _inner name is reserved");const i=(...s)=>{const[a,u]=Oc(e,[...s]);Wl(e.accounts,u.accounts);const d=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&d.push(...u.remainingAccounts),$l("debug-logs")&&console.log("Outgoing account metas:",d),new Mv({keys:d,programId:n,data:t(e.name,a_(e,...a))})};return i.accounts=s=>Xo.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Xo.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=Jr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class T_{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,d]=Oc(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=d.signers)!==null&&a!==void 0?a:[],d.options)}catch(h){throw Cp(h,n)}}}}class R_{static build(e,t){return(...n)=>{var i,s,a;const[,u]=Oc(e,[...n]),d=new uc;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>d.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>d.add(h)),d.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>d.add(h)),d}}}class B_{constructor(e,t,n=Jo(),i=new ql(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=yh(t),this._sub=null;const[s,a,u]=(()=>{var d;let h={},f={},m={};return(d=e.state)===null||d===void 0||d.methods.forEach(I=>{const O=Xo.build(I,(M,Y)=>i.instruction.encodeState(M,Y),t);O.accounts=M=>function(ae,oe,fe,E){if(fe.name==="new"){const[N]=Dp([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:yh(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:lc.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return Wl(fe.accounts,E),[{pubkey:yh(ae),isWritable:!0,isSigner:!1}]}(t,n,I,M).concat(Xo.accountsArray(M,I.accounts,I.name));const C=R_.build(I,O),A=T_.build(I,C,Rp(e),n),R=An(I.name);h[R]=O,f[R]=C,m[R]=A}),[h,f,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await Lp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new Nv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function yh(r){let[e]=Dp([],r);return E_(e,"unversioned",r)}class x_{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??Jo(),this._coder=s??new ql(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await d_(this._provider.connection,e.map(n=>Jr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Re.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=ja.get(e.toString());if(n)return n.ee;const i=new Nv;e=Jr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return ja.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=ja.get(e.toString());t?ja&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{ja.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return lc.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await P_(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Jr(e),t)}}const ja=new Map,AR=13,kR=14;class C_{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new Up(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const d=this._eventListeners.get(u.name);d&&d.forEach(h=>{const f=this._eventCallbacks.get(h);if(f){const[,m]=f;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(pl.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class Up{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new ER(e),i=new IR;let s=n.next();for(;s!==null;){let[a,u,d]=this.handleLog(i,s);a&&t(a),u&&i.push(u),d&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(AR):e.slice(kR);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class IR{constructor(){this.stack=[]}program(){return pl.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){pl.exports.ok(this.stack.length>0),this.stack.pop()}}class ER{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const OR=new Me("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function M_(){return new I_(L_)}const L_={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class hc{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new PR(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=An(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(hc.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=hc.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await Me.findProgramAddress(t,n);this._accounts[An(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new Me(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=An(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[An(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[An(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Re.Buffer.from([t]);case"u16":let n=Re.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Re.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Re.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Re.Buffer.from(i_(t));case"publicKey":return t.toBuffer();default:if(e.array)return Re.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}hc.CONST_ACCOUNTS={systemProgram:lc.programId,tokenProgram:Hh,associatedTokenProgram:Yh,rent:yT};class PR{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=M_().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[An(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class K_{static build(e,t,n,i,s,a,u,d,h){return(...f)=>new TR(f,i,s,a,u,d,e,t,n,h)}}class TR{constructor(e,t,n,i,s,a,u,d,h,f){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new hc(e,this._accounts,u,d,h,f)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class pc{constructor(e,t,n,i){t=Jr(t),n||(n=Jo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new ql(e),this._events=new C_(this._programId,n,this._coder);const[s,a,u,d,h,f,m,I]=class{static build(O,C,A,R){const M={},Y={},ae={},oe={},fe={},E={},N=Rp(O),W=O.accounts?class{static build(K,j,te,T){var V;const X={};return(V=K.accounts)===null||V===void 0||V.forEach(Ce=>{const me=An(Ce.name);X[me]=new x_(K,Ce,te,T,j)}),X}}.build(O,C,A,R):{},Q=class{static build(K,j,te,T){if(K.state!==void 0)return new B_(K,te,T,j)}}.build(O,C,A,R);return O.instructions.forEach(K=>{const j=Xo.build(K,(Oe,Yt)=>C.instruction.encode(Oe,Yt),A),te=R_.build(K,j),T=T_.build(K,te,N,R),V=class{static build(Oe,Yt,Qt,we,je,sn,gn){return async(...Ot)=>{var pt;const kr=Yt(...Ot),[,$t]=Oc(Oe,[...Ot]);let En;if(we.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{En=await we.simulate(kr,$t.signers,(pt=$t.options)===null||pt===void 0?void 0:pt.commitment)}catch(or){throw Cp(or,Qt)}if(En===void 0)throw new Error("Unable to simulate transaction");const si=En.logs;if(!si)throw new Error("Simulated logs not found");const Ir=[];return gn.events&&new Up(sn,je).parseLogs(si,or=>{Ir.push(or)}),{events:Ir,raw:si}}}}.build(K,te,N,R,C,A,O),X=class{static build(Oe,Yt,Qt,we){const je=Yt.accounts.find(gn=>gn.isMut),sn=!!Yt.returns;if(!je&&sn)return async(...gn)=>{var Ot,pt;let kr=await Qt(...gn);const $t=`Program return: ${Oe} `;let En=kr.raw.find(or=>or.startsWith($t));if(!En)throw new Error("View expected return log");let si=o_(En.slice($t.length)),Ir=Yt.returns;if(!Ir)throw new Error("View expected return type");return mr.fieldLayout({type:Ir},Array.from([...(Ot=we.accounts)!==null&&Ot!==void 0?Ot:[],...(pt=we.types)!==null&&pt!==void 0?pt:[]])).decode(si)}}}.build(A,K,V,O),Ce=K_.build(R,A,K,j,te,T,V,X,W),me=An(K.name);Y[me]=j,ae[me]=te,M[me]=T,oe[me]=V,fe[me]=Ce,X&&(E[me]=X)}),[M,Y,ae,W,oe,fe,Q,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=d,this.simulate=h,this.methods=f,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=Jr(e),i=await pc.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new pc(i,n,t)}static async fetchIdl(e,t){t=t??Jo();const n=Jr(e),i=await async function(h){const f=(await Me.findProgramAddress([],h))[0];return await Me.createWithSeed(f,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),SR.decode(u));var u;const d=mT(a.data);return JSON.parse(r_(d))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class RR{static token(e){return function(t){return new pc(L_,OR,t,M_())}(e)}}var BR=Object.freeze(Object.defineProperty({__proto__:null,web3:bT,ACCOUNT_DISCRIMINATOR_SIZE:QT,AccountClient:x_,AnchorError:Vo,AnchorProvider:p_,BorshAccountsCoder:Wo,BorshCoder:ql,BorshEventCoder:b_,BorshInstructionCoder:jl,BorshStateCoder:__,EventManager:C_,EventParser:Up,IdlError:dc,LangErrorCode:Pe,LangErrorMessage:m_,MethodsBuilderFactory:K_,Program:pc,ProgramError:fc,ProgramErrorStack:ma,Spl:RR,SplTokenCoder:I_,StateClient:B_,eventDiscriminator:v_,getProvider:Jo,parseIdlErrors:Rp,setProvider:WT,splitArgsAndCtx:Oc,stateDiscriminator:Lp,toInstruction:a_,translateAddress:Jr,translateError:Cp,utils:wR,validateAccounts:Wl,BN:ls},Symbol.toStringTag,{value:"Module"})),bt=kc(BR),Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.stakingIdl=void 0;Pc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty($s,"__esModule",{value:!0});$s.getStakingProgram=$s.getStakingIdl=void 0;const Sb=bt,xR=Pc;function N_(r){const e=xR.stakingIdl;return e.metadata.address=r.toBase58(),e}$s.getStakingIdl=N_;function CR({connection:r,programId:e}){const t=N_(e),n=new Sb.AnchorProvider(r,null,null);return new Sb.Program(t,e,n)}$s.getStakingProgram=CR;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t($s,r)})(ir);var MR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.cancelUnstakeInstruction=void 0;const LR=ir;function KR({connection:r,user:e,registeredStake:t,programId:n}){return MR(this,void 0,void 0,function*(){const i=(0,LR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Vl.cancelUnstakeInstruction=KR;var Yl={},NR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.createStakingAccountInstruction=void 0;const DR=ir;function UR({connection:r,user:e,registeredStake:t,programId:n}){return NR(this,void 0,void 0,function*(){const i=(0,DR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Yl.createStakingAccountInstruction=UR;var Ql={},no={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=Cv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(no);var $r={},un={};const FR=ri.utils.randomPrivateKey,Ab=()=>{const r=ri.utils.randomPrivateKey(),e=yl(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},yl=ri.getPublicKey;function kb(r){try{return ri.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Fp=(r,e)=>ri.sign(r,e.slice(0,32)),zR=ri.verify,$e=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class zp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Uv(rc,this))}static decode(e){return Fv(rc,this,e)}static decodeUnchecked(e){return zv(rc,this,e)}}class VR extends zp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const rc=new Map;var D_;let U_;const F_=32,vr=32;function WR(r){return r._bn!==void 0}let Ib=1;U_=Symbol.toStringTag;class ge extends zp{constructor(e){if(super({}),this._bn=void 0,WR(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ge.decode(e);if(t.length!=vr)throw new Error("Invalid public key input");this._bn=new ls(t)}else this._bn=new ls(e);if(this._bn.byteLength()>vr)throw new Error("Invalid public key input")}}static unique(){const e=new ge(Ib);return Ib+=1,new ge(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===vr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[U_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=fl(i);return new ge(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>F_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,$e(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=fl(n);if(kb(i))throw new Error("Invalid seeds, address must fall off the curve");return new ge(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ge(e);return kb(t.toBytes())}}D_=ge;ge.default=new D_("11111111111111111111111111111111");rc.set(ge,{kind:"struct",fields:[["_bn","u256"]]});class $R{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=$e(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=$e(FR()),this._publicKey=$e(yl(this._secretKey))}get publicKey(){return new ge(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const jR=new ge("BPFLoader1111111111111111111111111111111111"),ss=1280-40-8,Jl=127,Zo=64;class Vp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Vp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Wp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Wp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Lo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Lo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class gc{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Ye=(r="publicKey")=>Xe(32,r),qR=(r="signature")=>Xe(64,r),Ds=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(_r(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const d={chars:ee.Buffer.from(s,"utf8")};return n(d,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},GR=(r="authorized")=>ie([Ye("staker"),Ye("withdrawer")],r),HR=(r="lockup")=>ie([xt("unixTimestamp"),xt("epoch"),Ye("custodian")],r),YR=(r="voteInit")=>ie([Ye("nodePubkey"),Ye("authorizedVoter"),Ye("authorizedWithdrawer"),Ee("commission")],r),QR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Ye("currentAuthorityDerivedKeyOwnerPubkey"),Ds("currentAuthorityDerivedKeySeed"),Ye("newAuthorized")],r);function z_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return z_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Qn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function yr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function rt(r,e){if(!r)throw new Error(e||"Assertion failed")}class Xl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let d=n.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,d)),d},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const d=i(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new Xl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];rt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),i=e.filter(([,d])=>!d.isSigner&&d.isWritable),s=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{rt(t.length>0,"Expected at least one writable signer key");const[d]=t[0];rt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([d])=>new ge(d)),...n.map(([d])=>new ge(d)),...i.map(([d])=>new ge(d)),...s.map(([d])=>new ge(d))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ge(s),d=e.findIndex(h=>h.equals(u));d>=0&&(rt(d<256,"Max lookup table index exceeded"),n.push(d),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class ni{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ge(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ge.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new gc(this.staticAccountKeys)}static compile(e){const t=Xl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new gc(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ge.encode(u.data)}));return new ni({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];yr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,C=Array.from(Ge.decode(m.data));let A=[];yr(A,I.length);let R=[];return yr(R,C.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:C}});let i=[];yr(i,n.length);let s=ee.Buffer.alloc(ss);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ee("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Tt(Ee("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Tt(Ee("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Tt(Ye("key"),e,"keys"),Ye("recentBlockhash")]),d={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>$e(m.toBytes())),recentBlockhash:Ge.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const f=u.encode(d,h);return s.copy(h,f),h.slice(0,f+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Jl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Qn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,vr);t=t.slice(vr),u.push(new ge(ee.Buffer.from(O)))}const d=t.slice(0,vr);t=t.slice(vr);const h=Qn(t);let f=[];for(let I=0;I<h;I++){const O=t.shift(),C=Qn(t),A=t.slice(0,C);t=t.slice(C);const R=Qn(t),M=t.slice(0,R),Y=Ge.encode(ee.Buffer.from(M));t=t.slice(R),f.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ge.encode(ee.Buffer.from(d)),accountKeys:u,instructions:f};return new ni(m)}}class js{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new gc(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Xl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const f of s){const m=t.extractTableLookup(f);if(m!==void 0){const[I,{writable:O,readonly:C}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...C)}}const[a,u]=t.getMessageComponents(),h=new gc(u,i).compileInstructions(e.instructions);return new js({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();yr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();yr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();yr(s,this.addressTableLookups.length);const a=ie([Ee("prefix"),ie([Ee("numRequiredSignatures"),Ee("numReadonlySignedAccounts"),Ee("numReadonlyUnsignedAccounts")],"header"),Xe(e.length,"staticAccountKeysLength"),Tt(Ye(),this.staticAccountKeys.length,"staticAccountKeys"),Ye("recentBlockhash"),Xe(n.length,"instructionsLength"),Xe(t.length,"serializedInstructions"),Xe(s.length,"addressTableLookupsLength"),Xe(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(ss),d=1<<7,h=a.encode({prefix:d,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:Ge.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(ss);for(const n of this.compiledInstructions){const i=Array();yr(i,n.accountKeyIndexes.length);const s=Array();yr(s,n.data.length),e+=ie([Ee("programIdIndex"),Xe(i.length,"encodedAccountKeyIndexesLength"),Tt(Ee(),n.accountKeyIndexes.length,"accountKeyIndexes"),Xe(s.length,"encodedDataLength"),Xe(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ss);for(const n of this.addressTableLookups){const i=Array();yr(i,n.writableIndexes.length);const s=Array();yr(s,n.readonlyIndexes.length),e+=ie([Ye("accountKey"),Xe(i.length,"encodedWritableIndexesLength"),Tt(Ee(),n.writableIndexes.length,"writableIndexes"),Xe(s.length,"encodedReadonlyIndexesLength"),Tt(Ee(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Jl;rt(n!==i,"Expected versioned message but received legacy message");const s=i;rt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],d=Qn(t);for(let C=0;C<d;C++)u.push(new ge(t.splice(0,vr)));const h=Ge.encode(t.splice(0,vr)),f=Qn(t),m=[];for(let C=0;C<f;C++){const A=t.shift(),R=Qn(t),M=t.splice(0,R),Y=Qn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:M,data:ae})}const I=Qn(t),O=[];for(let C=0;C<I;C++){const A=new ge(t.splice(0,vr)),R=Qn(t),M=t.splice(0,R),Y=Qn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:M,readonlyIndexes:ae})}return new js({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const $p={deserializeMessageVersion(r){const e=r[0],t=e&Jl;return t===e?"legacy":t},deserialize:r=>{const e=$p.deserializeMessageVersion(r);if(e==="legacy")return ni.from(r);if(e===0)return js.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ci=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const JR=ee.Buffer.alloc(Zo).fill(0);class wt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new wt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(M=>{s.push({...M})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ge(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),M=a.findIndex(Y=>Y.pubkey.toString()===R);M>-1?(a[M].isWritable=a[M].isWritable||A.isWritable,a[M].isSigner=a[M].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",M)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(M=>M.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let d=0,h=0,f=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:M})=>{R?(m.push(A.toString()),d+=1,M||(h+=1)):(I.push(A.toString()),M||(f+=1))});const O=m.concat(I),C=t.map(A=>{const{data:R,programId:M}=A;return{programIdIndex:O.indexOf(M.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ge.encode(R)}});return C.forEach(A=>{rt(A.programIdIndex>=0),A.accounts.forEach(R=>rt(R>=0))}),new ni({header:{numRequiredSignatures:d,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:f},accountKeys:O,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Fp(n,i.secretKey);this._addSignature(i.publicKey,$e(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){rt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!zR(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];yr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return rt(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(rt(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),rt(s.length<=ss,`Transaction too large: ${s.length} > ${ss}`),s}get keys(){return rt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return rt(this.instructions.length===1),this.instructions[0].programId}get data(){return rt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Qn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Zo);t=t.slice(Zo),i.push(Ge.encode(ee.Buffer.from(a)))}return lt.populate(ni.from(t),i)}static populate(e,t=[]){const n=new lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ge.encode(JR)?null:Ge.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new wt({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ge.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class jp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d}=n,h=a-u;rt(h>0,"Message header is invalid");const f=e.staticAccountKeys.length-a-d;rt(f>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const C of i){const A=[];for(const M of C.accountKeyIndexes){const Y=m.get(M);if(Y===void 0)throw new Error(`Failed to find key for account key index ${M}`);const ae=M<a;let oe;ae?oe=M<h:M<m.staticAccountKeys.length?oe=M-a<f:oe=M-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:M<n.numRequiredSignatures,isWritable:oe})}const R=m.get(C.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${C.programIdIndex}`);O.push(new wt({programId:R,data:$e(C.data),keys:A}))}return new jp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return ni.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return js.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class qp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)rt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Zo));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();yr(t,this.signatures.length);const n=ie([Xe(t.length,"encodedSignaturesLength"),Tt(qR(),this.signatures.length,"signatures"),Xe(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Qn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Zo)));const s=$p.deserialize(new Uint8Array(t));return new qp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));rt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Fp(t,i.secretKey)}}addSignature(e,t){rt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));rt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const XR=160,ZR=64,eB=XR/ZR,V_=1e3/eB,di=new ge("SysvarC1ock11111111111111111111111111111111"),tB=new ge("SysvarEpochSchedu1e111111111111111111111111"),nB=new ge("Sysvar1nstructions1111111111111111111111111"),nl=new ge("SysvarRecentB1ockHashes11111111111111111111"),ea=new ge("SysvarRent111111111111111111111111111111111"),rB=new ge("SysvarRewards111111111111111111111111111111"),iB=new ge("SysvarS1otHashes111111111111111111111111111"),sB=new ge("SysvarS1otHistory11111111111111111111111111"),rl=new ge("SysvarStakeHistory1111111111111111111111111");async function Xh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,d=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ms(r){return new Promise(e=>setTimeout(e,r))}function Ze(r,e){const t=r.layout.span>=0?r.layout.span:z_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ut(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const W_=nt("lamportsPerSignature"),$_=ie([se("version"),se("state"),Ye("authorizedPubkey"),Ye("nonce"),ie([W_],"feeCalculator")]),Zh=$_.span;class Zl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=$_.decode($e(e),0);return new Zl({authorizedPubkey:new ge(t.authorizedPubkey),nonce:new ge(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const oB=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},aB=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=oB(t),s=t;return s.decode=(a,u)=>{const d=i(a,u);return Vv(ee.Buffer.from(d))},s.encode=(a,u,d)=>{const h=Ip(a,r);return n(h,u,d)},s},ta=aB(8);class cB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(It))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ut(It.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new ge(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ut(It.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ut(It.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new ge(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ut(It.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ut(It.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ge(t),seed:n,space:i,programId:new ge(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ut(It.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ge(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ut(It.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ge(t),seed:n,programId:new ge(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ut(It.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ge(t),seed:n,lamports:i,space:s,programId:new ge(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ut(It.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ge(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(It.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(It.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ut(It.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ge(t)}}static checkProgramId(e){if(!e.equals(kn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const It=Object.freeze({Create:{index:0,layout:ie([se("instruction"),xt("lamports"),xt("space"),Ye("programId")])},Assign:{index:1,layout:ie([se("instruction"),Ye("programId")])},Transfer:{index:2,layout:ie([se("instruction"),ta("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Ye("base"),Ds("seed"),xt("lamports"),xt("space"),Ye("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),xt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Ye("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Ye("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),xt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Ye("base"),Ds("seed"),xt("space"),Ye("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Ye("base"),Ds("seed"),Ye("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),ta("lamports"),Ds("seed"),Ye("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class kn{constructor(){}static createAccount(e){const t=It.Create,n=Ze(t,{lamports:e.lamports,space:e.space,programId:$e(e.programId.toBuffer())});return new wt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=It.TransferWithSeed;t=Ze(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:$e(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=It.Transfer;t=Ze(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new wt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=It.AssignWithSeed;t=Ze(i,{base:$e(e.basePubkey.toBuffer()),seed:e.seed,programId:$e(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=It.Assign;t=Ze(i,{programId:$e(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new wt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=It.CreateWithSeed,n=Ze(t,{base:$e(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:$e(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new wt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new lt;"basePubkey"in e&&"seed"in e?t.add(kn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Zh,programId:this.programId})):t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Zh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=It.InitializeNonceAccount,n=Ze(t,{authorized:$e(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:nl,isSigner:!1,isWritable:!1},{pubkey:ea,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new wt(i)}static nonceAdvance(e){const t=It.AdvanceNonceAccount,n=Ze(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:nl,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new wt(i)}static nonceWithdraw(e){const t=It.WithdrawNonceAccount,n=Ze(t,{lamports:e.lamports});return new wt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:nl,isSigner:!1,isWritable:!1},{pubkey:ea,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=It.AuthorizeNonceAccount,n=Ze(t,{authorized:$e(e.newAuthorizedPubkey.toBuffer())});return new wt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=It.AllocateWithSeed;t=Ze(i,{base:$e(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:$e(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=It.Allocate;t=Ze(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new wt({keys:n,programId:this.programId,data:t})}}kn.programId=new ge("11111111111111111111111111111111");const uB=ss-300;class qs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/qs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new lt,O.add(kn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new lt,O.add(kn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new lt,O.add(kn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new lt().add(kn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Xh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Tt(Ee("byte"),_r(se(),-8),"bytes")]),u=qs.chunkSize;let d=0,h=s,f=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:d,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});f.push(Xh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ms(1e3/4),d+=u,h=h.slice(u)}await Promise.all(f);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ea,isSigner:!1,isWritable:!1}],programId:i,data:I}),C="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:C}),{context:R,value:M}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},C);if(M.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(M)})`);for(;;){try{if(await e.getSlot({commitment:C})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(V_/2)))}}return!0}}qs.chunkSize=uB;const lB=new ge("BPFLoader2111111111111111111111111111111111");class dB{static getMinNumSignatures(e){return qs.getMinNumSignatures(e)}static load(e,t,n,i,s){return qs.load(e,t,n,s,i)}}function fB(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hB=Object.prototype.toString,pB=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Qa(r,e){var t,n,i,s,a,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Qa(r.toJSON(),e);if(d=hB.call(r),d==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Qa(r[t],!0)+",";return n>-1&&(i+=Qa(r[t],!0)),i+"]"}else if(d==="[object Object]"){for(s=pB(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=Qa(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var gB=function(r){var e=Qa(r,!1);if(e!==void 0)return""+e},Eb=fB(gB);const qa=32;function mh(r){let e=0;for(;r>1;)r/=2,e++;return e}function yB(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class j_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=mh(yB(e+qa+1))-mh(qa)-1,n=this.getSlotsInEpoch(t),i=e-(n-qa);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*qa:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+mh(qa)):this.slotsPerEpoch}}class ep extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const mB={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Ae extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var bB=globalThis.fetch;class vB extends vT{constructor(e,t,n){const i=s=>{const a=ST(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function _B(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Ob=56;class tp{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=_B(wB,e),n=e.length-Ob;rt(n>=0,"lookup table is invalid"),rt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Tt(Ye(),i,"addresses")]).decode(e.slice(Ob));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ge(t.authority[0]):void 0,addresses:s.map(a=>new ge(a))}}}const wB={index:1,layout:ie([se("typeIndex"),ta("deactivationSlot"),nt("lastExtendedSlot"),Ee("lastExtendedStartIndex"),Ee(),Tt(Ye(),_r(Ee(),-1),"authority")])},SB=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function AB(r){const e=r.match(SB);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),d=u==null?"":`:${u+1}`;return`${a}//${n}${d}${s}`}const rn=_i(ga(ge),F(),r=>new ge(r)),q_=ya([F(),Le("base64")]),Gp=_i(ga(ee.Buffer),q_,r=>ee.Buffer.from(r[0],"base64")),G_=30*1e3;function kB(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Bt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function H_(r){return mt([x({jsonrpc:Le("2.0"),id:F(),result:r}),x({jsonrpc:Le("2.0"),id:F(),error:x({code:wi(),message:F(),data:le(Dv())})})])}const IB=H_(wi());function We(r){return _i(H_(r),IB,e=>"error"in e?e:{...e,result:he(e.result,r)})}function zt(r){return We(x({context:x({slot:S()}),value:r}))}function ed(r){return x({context:x({slot:S()}),value:r})}function bh(r,e){return r===0?new js({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ge(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ge.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new ni(e)}const EB=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),OB=We(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),PB=H(x({slot:S(),prioritizationFee:S()})),TB=x({total:S(),validator:S(),foundation:S(),epoch:S()}),RB=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),BB=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:nn(),firstNormalEpoch:S(),firstNormalSlot:S()}),xB=Dl(F(),H(S())),ro=G(mt([x({}),F()])),CB=x({err:ro}),MB=Le("receivedSignature"),LB=x({"solana-core":F(),"feature-set":le(S())}),Pb=zt(x({err:G(mt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:nn(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:ya([F(),Le("base64")])})))})),KB=zt(x({byIdentity:Dl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function NB(r,e,t,n,i,s){const a=t||bB;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(f,m)=>{const I=await new Promise((O,C)=>{try{n(f,m,(A,R)=>O([A,R]))}catch(A){C(A)}});return await a(...I)}),new _T(async(f,m)=>{const I={method:"POST",body:f,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},Dx)};try{let O=5,C,A=500;for(;d?C=await d(r,I):C=await a(r,I),!(C.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${C.status} ${C.statusText}.  Retrying after ${A}ms delay...`),await Ms(A),A*=2;const R=await C.text();C.ok?m(null,R):m(new Error(`${C.status} ${C.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function DB(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function UB(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const FB=We(EB),zB=We(TB),VB=We(PB),WB=We(RB),$B=We(BB),jB=We(xB),qB=We(S()),GB=zt(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(rn)})),np=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}),HB=zt(H(x({address:rn,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}))),YB=zt(H(x({pubkey:rn,account:x({executable:nn(),owner:rn,lamports:S(),data:Gp,rentEpoch:S()})}))),rp=x({program:F(),parsed:wi(),space:S()}),QB=zt(H(x({pubkey:rn,account:x({executable:nn(),owner:rn,lamports:S(),data:rp,rentEpoch:S()})}))),JB=zt(H(x({lamports:S(),address:rn}))),yc=x({executable:nn(),owner:rn,lamports:S(),data:Gp,rentEpoch:S()}),XB=x({pubkey:rn,account:yc}),ZB=_i(mt([ga(ee.Buffer),rp]),mt([q_,rp]),r=>Array.isArray(r)?he(r,Gp):r),ip=x({executable:nn(),owner:rn,lamports:S(),data:ZB,rentEpoch:S()}),ex=x({pubkey:rn,account:ip}),tx=x({state:mt([Le("active"),Le("inactive"),Le("activating"),Le("deactivating")]),active:S(),inactive:S()}),nx=We(H(x({signature:F(),slot:S(),err:ro,memo:G(F()),blockTime:le(G(S()))}))),rx=We(H(x({signature:F(),slot:S(),err:ro,memo:G(F()),blockTime:le(G(S()))}))),ix=x({subscription:S(),result:ed(yc)}),sx=x({pubkey:rn,account:yc}),ox=x({subscription:S(),result:ed(sx)}),ax=x({parent:S(),slot:S(),root:S()}),cx=x({subscription:S(),result:ax}),ux=mt([x({type:mt([Le("firstShredReceived"),Le("completed"),Le("optimisticConfirmation"),Le("root")]),slot:S(),timestamp:S()}),x({type:Le("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Le("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Le("dead"),slot:S(),timestamp:S(),err:F()})]),lx=x({subscription:S(),result:ux}),dx=x({subscription:S(),result:ed(mt([CB,MB]))}),fx=x({subscription:S(),result:S()}),hx=x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())}),Tb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:nn(),epochCredits:H(ya([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),px=We(x({current:H(Tb),delinquent:H(Tb)})),gx=mt([Le("processed"),Le("confirmed"),Le("finalized")]),yx=x({slot:S(),confirmations:G(S()),err:ro,confirmationStatus:le(gx)}),mx=zt(H(G(yx))),bx=We(S()),Y_=x({accountKey:rn,writableIndexes:H(S()),readonlyIndexes:H(S())}),Hp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(Y_))})}),Q_=x({pubkey:rn,signer:nn(),writable:nn(),source:le(mt([Le("transaction"),Le("lookupTable")]))}),J_=x({accountKeys:H(Q_),signatures:H(F())}),X_=x({parsed:wi(),program:F(),programId:rn}),Z_=x({accounts:H(rn),data:F(),programId:rn}),vx=mt([Z_,X_]),_x=mt([x({parsed:wi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),ew=_i(vx,_x,r=>"accounts"in r?he(r,Z_):he(r,X_)),tw=x({signatures:H(F()),message:x({accountKeys:H(Q_),instructions:H(ew),recentBlockhash:F(),addressTableLookups:le(G(H(Y_)))})}),ml=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:np}),nw=x({writable:H(rn),readonly:H(rn)}),td=x({err:ro,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(ml))),postTokenBalances:le(G(H(ml))),loadedAddresses:le(nw),computeUnitsConsumed:le(S())}),Yp=x({err:ro,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(ew)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(ml))),postTokenBalances:le(G(H(ml))),loadedAddresses:le(nw),computeUnitsConsumed:le(S())}),ba=mt([Le(0),Le("legacy")]),io=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))}),wx=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Hp,meta:G(td),version:le(ba)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),Sx=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),Ax=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:J_,meta:G(td),version:le(ba)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),kx=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:tw,meta:G(Yp),version:le(ba)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),Ix=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:J_,meta:G(Yp),version:le(ba)})),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),Ex=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(io)),blockTime:G(S()),blockHeight:G(S())}))),Ox=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Hp,meta:G(td)})),rewards:le(H(io)),blockTime:G(S())}))),Rb=We(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())}))),vh=We(G(x({slot:S(),meta:G(td),blockTime:le(G(S())),transaction:Hp,version:le(ba)}))),Du=We(G(x({slot:S(),transaction:tw,meta:G(Yp),blockTime:le(G(S())),version:le(ba)}))),Px=zt(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})})),Tx=zt(x({blockhash:F(),lastValidBlockHeight:S()})),Rx=zt(nn()),Bx=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),xx=We(H(Bx)),Cx=zt(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),Mx=We(F()),Lx=We(F()),Kx=x({err:ro,logs:H(F()),signature:F()}),Nx=x({result:ed(Kx),subscription:S()}),Dx={"solana-client":"js/0.0.0-development"};class Ux{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async f=>{const{commitment:m,config:I}=Bt(f),O=this._buildArgs([],m,void 0,I),C=Eb(O);return h[C]=h[C]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,We(S()));if("error"in R)throw new Ae(R.error,"failed to get block height information");return R.result}finally{delete h[C]}})(),await h[C]}})();let n,i,s,a,u,d;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,d=t.httpAgent),this._rpcEndpoint=kB(e),this._rpcWsEndpoint=n||AB(e),this._rpcClient=NB(e,i,s,a,u,d),this._rpcRequest=DB(this._rpcClient),this._rpcBatchRequest=UB(this._rpcClient),this._rpcWebSocket=new vB(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,zt(S()));if("error"in u)throw new Ae(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,We(G(S())));if("error"in n)throw new Ae(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,We(S()));if("error"in t)throw new Ae(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,qB);if("error"in t)throw new Ae(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,GB);if("error"in i)throw new Ae(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,zt(np));if("error"in s)throw new Ae(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,zt(np));if("error"in s)throw new Ae(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Bt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),d=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(d,YB);if("error"in h)throw new Ae(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,QB);if("error"in u)throw new Ae(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,JB);if("error"in s)throw new Ae(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,HB);if("error"in s)throw new Ae(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,zt(G(yc)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,zt(G(ip)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Bt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),d=he(u,zt(H(G(ip))));if("error"in d)throw new Ae(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Bt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),d=he(u,zt(H(G(yc))));if("error"in d)throw new Ae(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Bt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),d=he(u,We(tx));if("error"in d)throw new Ae(d.error,`failed to get Stake Activation ${e.toBase58()}`);return d.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Bt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),d=await this._rpcRequest("getProgramAccounts",u),h=H(XB),f=a.withContext===!0?he(d,zt(h)):he(d,We(h));if("error"in f)throw new Ae(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,We(H(ex)));if("error"in u)throw new Ae(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=Ge.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return rt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((d,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};d({__type:Ci.PROCESSED,response:O})},e);const f=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await f,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,d({__type:Ci.PROCESSED,response:{context:I,value:O}})}})()}catch(f){h(f)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Ms(1e3),s||(O=await I(),s))return;m({__type:Ci.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let f;try{const m=await Promise.race([h,d,a]);if(m.__type===Ci.PROCESSED)f=m.response;else throw new Vp(i)}finally{s=!0,u()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const d=new Promise(O=>{let C=s,A=null;const R=async()=>{try{const{context:M,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=M.slot,Y==null?void 0:Y.nonce}catch{return C}};(async()=>{if(C=await R(),!u)for(;;){if(s!==C){O({__type:Ci.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Ms(2e3),u||(C=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,f,d]);if(O.__type===Ci.PROCESSED)I=O.response;else{let C;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Ms(400);continue}C=A;break}if(C!=null&&C.value){const A=e||"finalized",{confirmationStatus:R}=C.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new Lo(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new Lo(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new Lo(a);break;default:(M=>{})(A)}I={context:C.context,value:{err:C.value.err}}}else throw new Lo(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(d=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:Ci.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const d=await Promise.race([a,i]);if(d.__type===Ci.PROCESSED)u=d.response;else throw new Wp(t,d.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,We(H(hx)));if("error"in t)throw new Ae(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,px);if("error"in i)throw new Ae(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,We(S()));if("error"in a)throw new Ae(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,We(F()));if("error"in a)throw new Ae(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,We(H(rn)));if("error"in s)throw new Ae(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);rt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,mx);if("error"in s)throw new Ae(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,We(S()));if("error"in a)throw new Ae(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,FB);if("error"in i)throw new Ae(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Bt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),d=he(u,OB);if("error"in d)throw new Ae(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,zB);if("error"in t)throw new Ae(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,WB);if("error"in a)throw new Ae(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,$B);if("error"in t)throw new Ae(t.error,"failed to get epoch schedule");const n=t.result;return new j_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,jB);if("error"in t)throw new Ae(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,bx);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,Px);if("error"in i)throw new Ae(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,xx);if("error"in n)throw new Ae(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,Cx);if("error"in s)throw new Ae(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=$e(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,zt(G(S())));if("error"in a)throw new Ae(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,VB);if("error"in s)throw new Ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,Tx);if("error"in a)throw new Ae(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,Rx);if("error"in u)throw new Ae(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,We(LB));if("error"in t)throw new Ae(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,We(F()));if("error"in t)throw new Ae(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,Ax);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Sx);if("error"in u)throw u.error;return u.result}default:{const u=he(a,wx);if("error"in u)throw u.error;const{result:d}=u;return d?{...d,transactions:d.transactions.map(({transaction:h,meta:f,version:m})=>({meta:f,transaction:{...h,message:bh(m,h.message)},version:m}))}:null}}}catch(u){throw new Ae(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,Ix);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Ex);if("error"in u)throw u.error;return u.result}default:{const u=he(a,kx);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Ae(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...d}=e;n=u,t=d}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,KB);if("error"in a)throw new Ae(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,vh);if("error"in u)throw new Ae(u.error,"failed to get transaction");const d=u.result;return d&&{...d,transaction:{...d.transaction,message:bh(d.version,d.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Bt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,Du);if("error"in u)throw new Ae(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Bt(t),s=e.map(d=>{const h=this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(d=>{const h=he(d,Du);if("error"in h)throw new Ae(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Bt(t),s=e.map(d=>{const h=this._buildArgsAtLeastConfirmed([d],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(d=>{const h=he(d,vh);if("error"in h)throw new Ae(h.error,"failed to get transactions");const f=h.result;return f&&{...f,transaction:{...f.transaction,message:bh(f.version,f.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Ox);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:d,meta:h})=>{const f=new ni(d.message);return{meta:h,transaction:{...d,message:f}}})};return{...u,transactions:u.transactions.map(({transaction:d,meta:h})=>({meta:h,transaction:lt.populate(d.message,d.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,We(H(S())));if("error"in a)throw new Ae(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,Rb);if("error"in s)throw new Ae(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Rb);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,vh);if("error"in s)throw new Ae(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new ni(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:lt.populate(u,d)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Du);if("error"in s)throw new Ae(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,Du);if("error"in u)throw new Ae(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const d=await this.getConfirmedBlockSignatures(t,"finalized");d.signatures.length>0&&(i.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(i.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,nx);if("error"in a)throw new Ae(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,rx);if("error"in a)throw new Ae(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new tp({key:e,state:tp.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Zl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,Mx);if("error"in i)throw new Ae(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ms(100);const n=Date.now()-this._blockhashInfo.lastFetch>=G_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ms(V_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Bt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,zt(S()));if("error"in a)throw new Ae(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const M=t||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment);const Y=[R,M],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,Pb);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof lt){let C=e;i=new lt,i.feePayer=C.feePayer,i.instructions=e.instructions,i.nonceInfo=C.nonceInfo,i.signatures=C.signatures}else i=lt.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let C=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(C);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else C=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(n){const C=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());f.accounts={encoding:"base64",addresses:C}}s&&(f.sigVerify=!0);const m=[h,f],I=await this._rpcRequest("simulateTransaction",m),O=he(I,Pb);if("error"in O){let C;if("data"in O.error&&(C=O.error.data.logs,C&&Array.isArray(C))){const A=`
    `,R=A+C.join(A);console.error(O.error.message,R)}throw new ep("failed to simulate transaction: "+O.error.message,C)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const d=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=$e(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),d=he(u,Lx);if("error"in d){let h;throw"data"in d.error&&(h=d.error.data.logs),new ep("failed to send transaction: "+d.error.message,h)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,ix);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Eb([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];rt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,ox);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,Nx);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,cx);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,lx);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,dx);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(d,h)=>{t(d,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,fx);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class $o{constructor(e){this._keypair=void 0,this._keypair=e??Ab()}static generate(){return new $o(Ab())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=yl(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new $o({publicKey:n,secretKey:e})}static fromSeed(e){const t=yl(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new $o({publicKey:t,secretKey:n})}get publicKey(){return new ge(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Li=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),ta("recentSlot"),Ee("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),ta(),Tt(Ye(),_r(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class Fx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Li))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ut(Li.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ut(Li.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new ge(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Qp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Qp{constructor(){}static createLookupTable(e){const[t,n]=ge.findProgramAddressSync([e.authority.toBuffer(),Ip(BigInt(e.recentSlot),8)],this.programId),i=Li.CreateLookupTable,s=Ze(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:kn.programId,isSigner:!1,isWritable:!1}];return[new wt({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Li.FreezeLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new wt({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Li.ExtendLookupTable,n=Ze(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:kn.programId,isSigner:!1,isWritable:!1}),new wt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Li.DeactivateLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new wt({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Li.CloseLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new wt({programId:this.programId,keys:i,data:n})}}Qp.programId=new ge("AddressLookupTab1e1111111111111111111111111");class zx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(hi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ut(hi.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ut(hi.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ut(hi.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ut(hi.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Jp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const hi=Object.freeze({RequestUnits:{index:0,layout:ie([Ee("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ee("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ee("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ee("instruction"),ta("microLamports")])}});class Jp{constructor(){}static requestUnits(e){const t=hi.RequestUnits,n=Ze(t,e);return new wt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=hi.RequestHeapFrame,n=Ze(t,e);return new wt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=hi.SetComputeUnitLimit,n=Ze(t,e);return new wt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=hi.SetComputeUnitPrice,n=Ze(t,{microLamports:BigInt(e.microLamports)});return new wt({keys:[],programId:this.programId,data:n})}}Jp.programId=new ge("ComputeBudget111111111111111111111111111111");const Bb=64,xb=32,Cb=64,Mb=ie([Ee("numSignatures"),Ee("padding"),Vt("signatureOffset"),Vt("signatureInstructionIndex"),Vt("publicKeyOffset"),Vt("publicKeyInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Vt("messageInstructionIndex")]);class nd{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;rt(t.length===xb,`Public Key must be ${xb} bytes but received ${t.length} bytes`),rt(i.length===Cb,`Signature must be ${Cb} bytes but received ${i.length} bytes`);const a=Mb.span,u=a+t.length,d=u+i.length,h=1,f=ee.Buffer.alloc(d+n.length),m=s??65535;return Mb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:d,messageDataSize:n.length,messageInstructionIndex:m},f),f.fill(t,a),f.fill(i,u),f.fill(n,d),new wt({keys:[],programId:nd.programId,data:f})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Bb,`Private key must be ${Bb} bytes but received ${t.length} bytes`);try{const s=$o.fromSecretKey(t),a=s.publicKey.toBytes(),u=Fp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}nd.programId=new ge("Ed25519SigVerify111111111111111111111111111");const Vx=(r,e)=>{const t=Ic.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Ic.utils.isValidPrivateKey;const Wx=Ic.getPublicKey,Lb=32,_h=20,Kb=64,$x=11,wh=ie([Ee("numSignatures"),Vt("signatureOffset"),Ee("signatureInstructionIndex"),Vt("ethAddressOffset"),Ee("ethAddressInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Ee("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ee("recoveryId")]);class jo{constructor(){}static publicKeyToEthAddress(e){rt(e.length===Kb,`Public key must be ${Kb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(cb($e(e))).slice(-_h)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return jo.createInstructionWithEthAddress({ethAddress:jo.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,rt(u.length===_h,`Address must be ${_h} bytes but received ${u.length} bytes`);const d=1+$x,h=d,f=d+u.length,m=f+i.length+1,I=1,O=ee.Buffer.alloc(wh.span+n.length);return wh.encode({numSignatures:I,signatureOffset:f,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:$e(i),ethAddress:$e(u),recoveryId:s},O),O.fill($e(n),wh.span),new wt({keys:[],programId:jo.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Lb,`Private key must be ${Lb} bytes but received ${t.length} bytes`);try{const s=$e(t),a=Wx(s,!1).slice(1),u=ee.Buffer.from(cb($e(n))),[d,h]=Vx(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:d,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}jo.programId=new ge("KeccakSecp256k11111111111111111111111111111");var rw;const iw=new ge("StakeConfig11111111111111111111111111111111");class sw{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Tc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}rw=Tc;Tc.default=new rw(0,0,ge.default);class jx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(mn))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ut(mn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new sw(new ge(t.staker),new ge(t.withdrawer)),lockup:new Tc(n.unixTimestamp,n.epoch,new ge(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ut(mn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ut(mn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ge(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ut(mn.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new ge(s),newAuthorizedPubkey:new ge(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(mn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(mn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(mn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(mn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(rd.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const mn=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),GR(),HR()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),xt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),xt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType"),Ds("authoritySeed"),Ye("authorityOwner")])}}),qx=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class rd{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Tc.default,a=mn.Initialize,u=Ze(a,{authorized:{staker:$e(n.staker.toBuffer()),withdrawer:$e(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:$e(s.custodian.toBuffer())}}),d={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ea,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new wt(d)}static createAccountWithSeed(e){const t=new lt;t.add(kn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new lt;t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=mn.Delegate,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:rl,isSigner:!1,isWritable:!1},{pubkey:iw,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=mn.Authorize,d=Ze(u,{newAuthorized:$e(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:d})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:d}=e,h=mn.AuthorizeWithSeed,f=Ze(h,{newAuthorized:$e(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:$e(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:di,isSigner:!1,isWritable:!1}];return d&&m.push({pubkey:d,isSigner:!1,isWritable:!1}),new lt().add({keys:m,programId:this.programId,data:f})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=mn.Split,u=Ze(a,{lamports:s});return new wt({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new lt;return t.add(kn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,d=new lt;return d.add(kn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),d.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=mn.Merge,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:rl,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=mn.Withdraw,d=Ze(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:rl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:d})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=mn.Deactivate,s=Ze(i);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}rd.programId=new ge("Stake11111111111111111111111111111111111111");rd.space=200;class ow{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class Gx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ki))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ut(Ki.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ow(new ge(t.nodePubkey),new ge(t.authorizedVoter),new ge(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ut(Ki.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ge(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ut(Ki.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ge(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ge(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(Ki.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(va.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ki=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),YR()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),xt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),QR()])}}),Hx=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class va{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Ki.InitializeAccount,a=Ze(s,{voteInit:{nodePubkey:$e(i.nodePubkey.toBuffer()),authorizedVoter:$e(i.authorizedVoter.toBuffer()),authorizedWithdrawer:$e(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ea,isSigner:!1,isWritable:!1},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new wt(u)}static createAccount(e){const t=new lt;return t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Ki.Authorize,u=Ze(a,{newAuthorized:$e(i.toBuffer()),voteAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:d,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,d=Ki.AuthorizeWithSeed,h=Ze(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:$e(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:$e(s.toBuffer()),voteAuthorizationType:a.index}}),f=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Ki.Withdraw,u=Ze(a,{lamports:i}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:d,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return va.withdraw(e)}}va.programId=new ge("Vote111111111111111111111111111111111111111");va.space=3731;const aw=new ge("Va1idator1nfo111111111111111111111111111111"),Yx=x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});class Xp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Qn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new ge(t.slice(0,vr));t=t.slice(vr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(aw)&&i[1].isSigner){const s=Ds().decode(ee.Buffer.from(t)),a=JSON.parse(s);return wT(a,Yx),new Xp(i[1].publicKey,a)}return null}}const Qx=new ge("Vote111111111111111111111111111111111111111"),Jx=ie([Ye("nodePubkey"),Ye("authorizedWithdrawer"),Ee("commission"),nt(),Tt(ie([nt("slot"),se("confirmationCount")]),_r(se(),-8),"votes"),Ee("rootSlotValid"),nt("rootSlot"),nt(),Tt(ie([nt("epoch"),Ye("authorizedVoter")]),_r(se(),-8),"authorizedVoters"),ie([Tt(ie([Ye("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ee("isEmpty")],"priorVoters"),nt(),Tt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),_r(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);class Zp{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Jx.decode($e(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Zp({nodePubkey:new ge(n.nodePubkey),authorizedWithdrawer:new ge(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(Xx),priorVoters:Zx(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Xx({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new ge(r)}}function Nb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new ge(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Zx({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(Nb),...r.slice(0,e).map(Nb)]}const Db={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function eC(r,e){const t=e===!1?"http":"https";if(!r)return Db[t].devnet;const n=Db[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function tC(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),d=s&&s.commitment,f=(await(i?r.confirmTransaction(i,d):r.confirmTransaction(u,d))).value;if(f.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(f)})`);return u}const nC=1e9;var rC=Object.freeze(Object.defineProperty({__proto__:null,Account:$R,AddressLookupTableAccount:tp,AddressLookupTableInstruction:Fx,AddressLookupTableProgram:Qp,Authorized:sw,BLOCKHASH_CACHE_TIMEOUT_MS:G_,BPF_LOADER_DEPRECATED_PROGRAM_ID:jR,BPF_LOADER_PROGRAM_ID:lB,BpfLoader:dB,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:hi,ComputeBudgetInstruction:zx,ComputeBudgetProgram:Jp,Connection:Ux,Ed25519Program:nd,Enum:VR,EpochSchedule:j_,FeeCalculatorLayout:W_,Keypair:$o,LAMPORTS_PER_SOL:nC,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Li,Loader:qs,Lockup:Tc,MAX_SEED_LENGTH:F_,Message:ni,MessageAccountKeys:gc,MessageV0:js,NONCE_ACCOUNT_LENGTH:Zh,NonceAccount:Zl,PACKET_DATA_SIZE:ss,PUBLIC_KEY_LENGTH:vr,PublicKey:ge,SIGNATURE_LENGTH_IN_BYTES:Zo,SOLANA_SCHEMA:rc,STAKE_CONFIG_ID:iw,STAKE_INSTRUCTION_LAYOUTS:mn,SYSTEM_INSTRUCTION_LAYOUTS:It,SYSVAR_CLOCK_PUBKEY:di,SYSVAR_EPOCH_SCHEDULE_PUBKEY:tB,SYSVAR_INSTRUCTIONS_PUBKEY:nB,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:nl,SYSVAR_RENT_PUBKEY:ea,SYSVAR_REWARDS_PUBKEY:rB,SYSVAR_SLOT_HASHES_PUBKEY:iB,SYSVAR_SLOT_HISTORY_PUBKEY:sB,SYSVAR_STAKE_HISTORY_PUBKEY:rl,Secp256k1Program:jo,SendTransactionError:ep,SolanaJSONRPCError:Ae,SolanaJSONRPCErrorCode:mB,StakeAuthorizationLayout:qx,StakeInstruction:jx,StakeProgram:rd,Struct:zp,SystemInstruction:cB,SystemProgram:kn,Transaction:lt,TransactionExpiredBlockheightExceededError:Vp,TransactionExpiredNonceInvalidError:Lo,TransactionExpiredTimeoutError:Wp,TransactionInstruction:wt,TransactionMessage:jp,TransactionStatus:Ci,VALIDATOR_INFO_KEY:aw,VERSION_PREFIX_MASK:Jl,VOTE_PROGRAM_ID:Qx,ValidatorInfo:Xp,VersionedMessage:$p,VersionedTransaction:qp,VoteAccount:Zp,VoteAuthorizationLayout:Hx,VoteInit:ow,VoteInstruction:Gx,VoteProgram:va,clusterApiUrl:eC,sendAndConfirmRawTransaction:tC,sendAndConfirmTransaction:Xh},Symbol.toStringTag,{value:"Module"})),Fi=kc(rC);const Ub=()=>{const r=ri.utils.randomPrivateKey(),e=sp(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},sp=ri.getPublicKey;function Fb(r){try{return ri.ExtendedPoint.fromHex(r),!0}catch{return!1}}const iC=(r,e)=>ri.sign(r,e.slice(0,32)),sC=ri.verify,Yn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class oC{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Uv(il,this))}static decode(e){return Fv(il,this,e)}static decodeUnchecked(e){return zv(il,this,e)}}const il=new Map;var cw;let uw;const aC=32,Us=32;function cC(r){return r._bn!==void 0}let zb=1;uw=Symbol.toStringTag;class _e extends oC{constructor(e){if(super({}),this._bn=void 0,cC(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ge.decode(e);if(t.length!=Us)throw new Error("Invalid public key input");this._bn=new ls(t)}else this._bn=new ls(e);if(this._bn.byteLength()>Us)throw new Error("Invalid public key input")}}static unique(){const e=new _e(zb);return zb+=1,new _e(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Us)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[uw](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=fl(i);return new _e(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>aC)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Yn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=fl(n);if(Fb(i))throw new Error("Invalid seeds, address must fall off the curve");return new _e(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new _e(e);return Fb(t.toBytes())}}cw=_e;_e.default=new cw("11111111111111111111111111111111");il.set(_e,{kind:"struct",fields:[["_bn","u256"]]});new _e("BPFLoader1111111111111111111111111111111111");const op=1280-40-8,uC=127,ap=64;class Vb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const et=(r="publicKey")=>Xe(32,r),Ko=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(_r(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const d={chars:ee.Buffer.from(s,"utf8")};return n(d,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},lC=(r="authorized")=>ie([et("staker"),et("withdrawer")],r),dC=(r="lockup")=>ie([xt("unixTimestamp"),xt("epoch"),et("custodian")],r),fC=(r="voteInit")=>ie([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),Ee("commission")],r),hC=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),Ko("currentAuthorityDerivedKeySeed"),et("newAuthorized")],r);function lw(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return lw({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Ja(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Xa(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function gr(r,e){if(!r)throw new Error(e||"Assertion failed")}class eg{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let d=n.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,d)),d},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const d=i(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new eg(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];gr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),i=e.filter(([,d])=>!d.isSigner&&d.isWritable),s=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{gr(t.length>0,"Expected at least one writable signer key");const[d]=t[0];gr(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([d])=>new _e(d)),...n.map(([d])=>new _e(d)),...i.map(([d])=>new _e(d)),...s.map(([d])=>new _e(d))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new _e(s),d=e.findIndex(h=>h.equals(u));d>=0&&(gr(d<256,"Max lookup table index exceeded"),n.push(d),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class mc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new _e(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ge.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Vb(this.staticAccountKeys)}static compile(e){const t=eg.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Vb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ge.encode(u.data)}));return new mc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Xa(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,C=Array.from(Ge.decode(m.data));let A=[];Xa(A,I.length);let R=[];return Xa(R,C.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:C}});let i=[];Xa(i,n.length);let s=ee.Buffer.alloc(op);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ee("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Tt(Ee("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Tt(Ee("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Tt(et("key"),e,"keys"),et("recentBlockhash")]),d={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Yn(m.toBytes())),recentBlockhash:Ge.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const f=u.encode(d,h);return s.copy(h,f),h.slice(0,f+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&uC))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Ja(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Us);t=t.slice(Us),u.push(new _e(ee.Buffer.from(O)))}const d=t.slice(0,Us);t=t.slice(Us);const h=Ja(t);let f=[];for(let I=0;I<h;I++){const O=t.shift(),C=Ja(t),A=t.slice(0,C);t=t.slice(C);const R=Ja(t),M=t.slice(0,R),Y=Ge.encode(ee.Buffer.from(M));t=t.slice(R),f.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ge.encode(ee.Buffer.from(d)),accountKeys:u,instructions:f};return new mc(m)}}const pC=ee.Buffer.alloc(ap).fill(0);class yt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Dt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new yt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(M=>{s.push({...M})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new _e(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),M=a.findIndex(Y=>Y.pubkey.toString()===R);M>-1?(a[M].isWritable=a[M].isWritable||A.isWritable,a[M].isSigner=a[M].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",M)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(M=>M.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let d=0,h=0,f=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:M})=>{R?(m.push(A.toString()),d+=1,M||(h+=1)):(I.push(A.toString()),M||(f+=1))});const O=m.concat(I),C=t.map(A=>{const{data:R,programId:M}=A;return{programIdIndex:O.indexOf(M.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:Ge.encode(R)}});return C.forEach(A=>{gr(A.programIdIndex>=0),A.accounts.forEach(R=>gr(R>=0))}),new mc({header:{numRequiredSignatures:d,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:f},accountKeys:O,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=iC(n,i.secretKey);this._addSignature(i.publicKey,Yn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){gr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!sC(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Xa(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return gr(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(gr(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),gr(s.length<=op,`Transaction too large: ${s.length} > ${op}`),s}get keys(){return gr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return gr(this.instructions.length===1),this.instructions[0].programId}get data(){return gr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ja(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,ap);t=t.slice(ap),i.push(Ge.encode(ee.Buffer.from(a)))}return Dt.populate(mc.from(t),i)}static populate(e,t=[]){const n=new Dt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ge.encode(pC)?null:Ge.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new yt({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ge.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new _e("SysvarC1ock11111111111111111111111111111111");new _e("SysvarEpochSchedu1e111111111111111111111111");new _e("Sysvar1nstructions1111111111111111111111111");const Sh=new _e("SysvarRecentB1ockHashes11111111111111111111"),No=new _e("SysvarRent111111111111111111111111111111111");new _e("SysvarRewards111111111111111111111111111111");new _e("SysvarS1otHashes111111111111111111111111111");new _e("SysvarS1otHistory11111111111111111111111111");new _e("SysvarStakeHistory1111111111111111111111111");async function gC(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,d=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Mr(r,e){const t=r.layout.span>=0?r.layout.span:lw(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const yC=nt("lamportsPerSignature"),mC=ie([se("version"),se("state"),et("authorizedPubkey"),et("nonce"),ie([yC],"feeCalculator")]),Wb=mC.span,bC=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},vC=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=bC(t),s=t;return s.decode=(a,u)=>{const d=i(a,u);return Vv(ee.Buffer.from(d))},s.encode=(a,u,d)=>{const h=Ip(a,r);return n(h,u,d)},s},na=vC(8),Lr=Object.freeze({Create:{index:0,layout:ie([se("instruction"),xt("lamports"),xt("space"),et("programId")])},Assign:{index:1,layout:ie([se("instruction"),et("programId")])},Transfer:{index:2,layout:ie([se("instruction"),na("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),et("base"),Ko("seed"),xt("lamports"),xt("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),xt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),et("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),xt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),et("base"),Ko("seed"),xt("space"),et("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),et("base"),Ko("seed"),et("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),na("lamports"),Ko("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class fi{constructor(){}static createAccount(e){const t=Lr.Create,n=Mr(t,{lamports:e.lamports,space:e.space,programId:Yn(e.programId.toBuffer())});return new yt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Lr.TransferWithSeed;t=Mr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Yn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Lr.Transfer;t=Mr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Lr.AssignWithSeed;t=Mr(i,{base:Yn(e.basePubkey.toBuffer()),seed:e.seed,programId:Yn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Lr.Assign;t=Mr(i,{programId:Yn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Lr.CreateWithSeed,n=Mr(t,{base:Yn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Yn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new yt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Dt;"basePubkey"in e&&"seed"in e?t.add(fi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Wb,programId:this.programId})):t.add(fi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Wb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Lr.InitializeNonceAccount,n=Mr(t,{authorized:Yn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Sh,isSigner:!1,isWritable:!1},{pubkey:No,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceAdvance(e){const t=Lr.AdvanceNonceAccount,n=Mr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Sh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceWithdraw(e){const t=Lr.WithdrawNonceAccount,n=Mr(t,{lamports:e.lamports});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Sh,isSigner:!1,isWritable:!1},{pubkey:No,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Lr.AuthorizeNonceAccount,n=Mr(t,{authorized:Yn(e.newAuthorizedPubkey.toBuffer())});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Lr.AllocateWithSeed;t=Mr(i,{base:Yn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Yn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Lr.Allocate;t=Mr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:t})}}fi.programId=new _e("11111111111111111111111111111111");new _e("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),na("deactivationSlot"),nt("lastExtendedSlot"),Ee("lastExtendedStartIndex"),Ee(),Tt(et(),_r(Ee(),-1),"authority")]);const dn=_i(ga(_e),F(),r=>new _e(r)),dw=ya([F(),Le("base64")]),tg=_i(ga(ee.Buffer),dw,r=>ee.Buffer.from(r[0],"base64"));function fw(r){return mt([x({jsonrpc:Le("2.0"),id:F(),result:r}),x({jsonrpc:Le("2.0"),id:F(),error:x({code:wi(),message:F(),data:le(Dv())})})])}const _C=fw(wi());function Et(r){return _i(fw(r),_C,e=>"error"in e?e:{...e,result:he(e.result,r)})}function jr(r){return Et(x({context:x({slot:S()}),value:r}))}function id(r){return x({context:x({slot:S()}),value:r})}const wC=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});Et(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const SC=H(x({slot:S(),prioritizationFee:S()})),AC=x({total:S(),validator:S(),foundation:S(),epoch:S()}),kC=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),IC=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:nn(),firstNormalEpoch:S(),firstNormalSlot:S()}),EC=Dl(F(),H(S())),so=G(mt([x({}),F()])),OC=x({err:so}),PC=Le("receivedSignature");x({"solana-core":F(),"feature-set":le(S())});jr(x({err:G(mt([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:nn(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:ya([F(),Le("base64")])})))}));jr(x({byIdentity:Dl(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));Et(wC);Et(AC);Et(SC);Et(kC);Et(IC);Et(EC);Et(S());jr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(dn)}));const TC=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())});jr(H(x({address:dn,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())})));jr(H(x({pubkey:dn,account:x({executable:nn(),owner:dn,lamports:S(),data:tg,rentEpoch:S()})})));const cp=x({program:F(),parsed:wi(),space:S()});jr(H(x({pubkey:dn,account:x({executable:nn(),owner:dn,lamports:S(),data:cp,rentEpoch:S()})})));jr(H(x({lamports:S(),address:dn})));const ng=x({executable:nn(),owner:dn,lamports:S(),data:tg,rentEpoch:S()});x({pubkey:dn,account:ng});const RC=_i(mt([ga(ee.Buffer),cp]),mt([dw,cp]),r=>Array.isArray(r)?he(r,tg):r),BC=x({executable:nn(),owner:dn,lamports:S(),data:RC,rentEpoch:S()});x({pubkey:dn,account:BC});x({state:mt([Le("active"),Le("inactive"),Le("activating"),Le("deactivating")]),active:S(),inactive:S()});Et(H(x({signature:F(),slot:S(),err:so,memo:G(F()),blockTime:le(G(S()))})));Et(H(x({signature:F(),slot:S(),err:so,memo:G(F()),blockTime:le(G(S()))})));x({subscription:S(),result:id(ng)});const xC=x({pubkey:dn,account:ng});x({subscription:S(),result:id(xC)});const CC=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:CC});const MC=mt([x({type:mt([Le("firstShredReceived"),Le("completed"),Le("optimisticConfirmation"),Le("root")]),slot:S(),timestamp:S()}),x({type:Le("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Le("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Le("dead"),slot:S(),timestamp:S(),err:F()})]);x({subscription:S(),result:MC});x({subscription:S(),result:id(mt([OC,PC]))});x({subscription:S(),result:S()});x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())});const $b=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:nn(),epochCredits:H(ya([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});Et(x({current:H($b),delinquent:H($b)}));const LC=mt([Le("processed"),Le("confirmed"),Le("finalized")]),KC=x({slot:S(),confirmations:G(S()),err:so,confirmationStatus:le(LC)});jr(H(G(KC)));Et(S());const hw=x({accountKey:dn,writableIndexes:H(S()),readonlyIndexes:H(S())}),rg=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(hw))})}),pw=x({pubkey:dn,signer:nn(),writable:nn(),source:le(mt([Le("transaction"),Le("lookupTable")]))}),gw=x({accountKeys:H(pw),signatures:H(F())}),yw=x({parsed:wi(),program:F(),programId:dn}),mw=x({accounts:H(dn),data:F(),programId:dn}),NC=mt([mw,yw]),DC=mt([x({parsed:wi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),bw=_i(NC,DC,r=>"accounts"in r?he(r,mw):he(r,yw)),vw=x({signatures:H(F()),message:x({accountKeys:H(pw),instructions:H(bw),recentBlockhash:F(),addressTableLookups:le(G(H(hw)))})}),bl=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:TC}),_w=x({writable:H(dn),readonly:H(dn)}),sd=x({err:so,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(bl))),postTokenBalances:le(G(H(bl))),loadedAddresses:le(_w),computeUnitsConsumed:le(S())}),ig=x({err:so,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(bw)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(bl))),postTokenBalances:le(G(H(bl))),loadedAddresses:le(_w),computeUnitsConsumed:le(S())}),_a=mt([Le(0),Le("legacy")]),oo=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))});Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:rg,meta:G(sd),version:le(_a)})),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:gw,meta:G(sd),version:le(_a)})),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:vw,meta:G(ig),version:le(_a)})),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:gw,meta:G(ig),version:le(_a)})),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(oo)),blockTime:G(S()),blockHeight:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:rg,meta:G(sd)})),rewards:le(H(oo)),blockTime:G(S())})));Et(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())})));Et(G(x({slot:S(),meta:sd,blockTime:le(G(S())),transaction:rg,version:le(_a)})));Et(G(x({slot:S(),transaction:vw,meta:G(ig),blockTime:le(G(S())),version:le(_a)})));jr(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})}));jr(x({blockhash:F(),lastValidBlockHeight:S()}));jr(nn());const UC=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});Et(H(UC));jr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));Et(F());Et(F());const FC=x({err:so,logs:H(F()),signature:F()});x({result:id(FC),subscription:S()});class rs{constructor(e){this._keypair=void 0,this._keypair=e??Ub()}static generate(){return new rs(Ub())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=sp(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new rs({publicKey:n,secretKey:e})}static fromSeed(e){const t=sp(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new rs({publicKey:t,secretKey:n})}get publicKey(){return new _e(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),na("recentSlot"),Ee("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),na(),Tt(et(),_r(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new _e("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([Ee("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ee("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ee("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ee("instruction"),na("microLamports")])}});new _e("ComputeBudget111111111111111111111111111111");ie([Ee("numSignatures"),Ee("padding"),Vt("signatureOffset"),Vt("signatureInstructionIndex"),Vt("publicKeyOffset"),Vt("publicKeyInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Vt("messageInstructionIndex")]);new _e("Ed25519SigVerify111111111111111111111111111");Ic.utils.isValidPrivateKey;Ic.getPublicKey;ie([Ee("numSignatures"),Vt("signatureOffset"),Ee("signatureInstructionIndex"),Vt("ethAddressOffset"),Ee("ethAddressInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Ee("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ee("recoveryId")]);new _e("KeccakSecp256k11111111111111111111111111111");var ww;new _e("StakeConfig11111111111111111111111111111111");class Sw{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}ww=Sw;Sw.default=new ww(0,0,_e.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),lC(),dC()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),xt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),xt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType"),Ko("authoritySeed"),et("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new _e("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),fC()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),xt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),hC()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new _e("Vote111111111111111111111111111111111111111");new _e("Va1idator1nfo111111111111111111111111111111");x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});new _e("Vote111111111111111111111111111111111111111");ie([et("nodePubkey"),et("authorizedWithdrawer"),Ee("commission"),nt(),Tt(ie([nt("slot"),se("confirmationCount")]),_r(se(),-8),"votes"),Ee("rootSlotValid"),nt("rootSlot"),nt(),Tt(ie([nt("epoch"),et("authorizedVoter")]),_r(se(),-8),"authorizedVoters"),ie([Tt(ie([et("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ee("isEmpty")],"priorVoters"),nt(),Tt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),_r(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);var ot={},od={};od.byteLength=WC;od.toByteArray=jC;od.fromByteArray=HC;var pi=[],Kr=[],zC=typeof Uint8Array<"u"?Uint8Array:Array,Ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Oo=0,VC=Ah.length;Oo<VC;++Oo)pi[Oo]=Ah[Oo],Kr[Ah.charCodeAt(Oo)]=Oo;Kr["-".charCodeAt(0)]=62;Kr["_".charCodeAt(0)]=63;function Aw(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function WC(r){var e=Aw(r),t=e[0],n=e[1];return(t+n)*3/4-n}function $C(r,e,t){return(e+t)*3/4-t}function jC(r){var e,t=Aw(r),n=t[0],i=t[1],s=new zC($C(r,n,i)),a=0,u=i>0?n-4:n,d;for(d=0;d<u;d+=4)e=Kr[r.charCodeAt(d)]<<18|Kr[r.charCodeAt(d+1)]<<12|Kr[r.charCodeAt(d+2)]<<6|Kr[r.charCodeAt(d+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Kr[r.charCodeAt(d)]<<2|Kr[r.charCodeAt(d+1)]>>4,s[a++]=e&255),i===1&&(e=Kr[r.charCodeAt(d)]<<10|Kr[r.charCodeAt(d+1)]<<4|Kr[r.charCodeAt(d+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function qC(r){return pi[r>>18&63]+pi[r>>12&63]+pi[r>>6&63]+pi[r&63]}function GC(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(qC(n));return i.join("")}function HC(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(GC(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(pi[e>>2]+pi[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(pi[e>>10]+pi[e>>4&63]+pi[e<<2&63]+"=")),i.join("")}var sg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */sg.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,d=(1<<u)-1,h=d>>1,f=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-f)-1,O>>=-f,f+=u;f>0;s=s*256+r[e+m],m+=I,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+r[e+m],m+=I,f-=8);if(s===0)s=1-h;else{if(s===d)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};sg.write=function(r,e,t,n,i,s){var a,u,d,h=s*8-i-1,f=(1<<h)-1,m=f>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,C=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+m>=1?e+=I/d:e+=I*Math.pow(2,1-m),e*d>=2&&(a++,d/=2),a+m>=f?(u=0,a=f):a+m>=1?(u=(e*d-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=C,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=C,a/=256,h-=8);r[t+O-C]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=od,t=sg,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return d(v,g,y)}u.poolSize=8192;function d(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return C(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Pn(v,ArrayBuffer)||v&&Pn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pn(v,SharedArrayBuffer)||v&&Pn(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return d(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function f(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return f(v,g,y)};function m(v){return h(v),a(v<0?0:M(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:M(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function C(v){if(Pn(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=M(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Wi(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function M(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(Pn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),Pn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(Pn(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Pn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return ar(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Vi(v).length;default:if(L)return k?-1:ar(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return Yt(this,g,y);case"utf8":case"utf-8":return V(this,g,y);case"ascii":return me(this,g,y);case"latin1":case"binary":return Oe(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function fe(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)fe(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)fe(this,y,y+3),fe(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)fe(this,y,y+7),fe(this,y+1,y+6),fe(this,y+2,y+5),fe(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?V(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(Pn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,Ue=k-y;const St=Math.min(Z,Ue),gt=this.slice(L,$),At=g.slice(y,k);for(let dt=0;dt<St;++dt)if(gt[dt]!==At[dt]){Z=gt[dt],Ue=At[dt];break}return Z<Ue?-1:Ue<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Wi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,Ue=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,Ue/=2,y/=2}function St(At,dt){return $===1?At[dt]:At.readUInt16BE(dt*$)}let gt;if(L){let At=-1;for(gt=y;gt<Z;gt++)if(St(v,gt)===St(g,At===-1?0:gt-At)){if(At===-1&&(At=gt),gt-At+1===Ue)return At*$}else At!==-1&&(gt-=gt-At),At=-1}else for(y+Ue>Z&&(y=Z-Ue),gt=y;gt>=0;gt--){let At=!0;for(let dt=0;dt<Ue;dt++)if(St(v,gt+dt)!==St(g,dt)){At=!1;break}if(At)return gt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function W(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const Ue=parseInt(g.substr(Z*2,2),16);if(Wi(Ue))return Z;v[y+Z]=Ue}return Z}function Q(v,g,y,k){return On(ar(g,v.length-y),v,y,k)}function K(v,g,y,k){return On(qc(g),v,y,k)}function j(v,g,y,k){return On(Vi(g),v,y,k)}function te(v,g,y,k){return On(Qd(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return W(this,g,y,k);case"utf8":case"utf-8":return Q(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function V(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,Ue=$>239?4:$>223?3:$>191?2:1;if(L+Ue<=y){let St,gt,At,dt;switch(Ue){case 1:$<128&&(Z=$);break;case 2:St=v[L+1],(St&192)===128&&(dt=($&31)<<6|St&63,dt>127&&(Z=dt));break;case 3:St=v[L+1],gt=v[L+2],(St&192)===128&&(gt&192)===128&&(dt=($&15)<<12|(St&63)<<6|gt&63,dt>2047&&(dt<55296||dt>57343)&&(Z=dt));break;case 4:St=v[L+1],gt=v[L+2],At=v[L+3],(St&192)===128&&(gt&192)===128&&(At&192)===128&&(dt=($&15)<<18|(St&63)<<12|(gt&63)<<6|At&63,dt>65535&&dt<1114112&&(Z=dt))}}Z===null?(Z=65533,Ue=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=Ue}return Ce(k)}const X=4096;function Ce(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function me(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Oe(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function Yt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Jd[v[$]];return L}function Qt(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function we(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||we(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||we(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||we(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||we(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Wn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&vn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Wn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&vn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||we(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||we(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||we(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Wn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&vn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Wn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&vn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||we(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||we(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||we(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||we(g,8,this.length),t.read(this,g,!1,52,8)};function je(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ue=Math.pow(2,8*k)-1;je(this,g,y,k,Ue,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ue=Math.pow(2,8*k)-1;je(this,g,y,k,Ue,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function sn(v,g,y,k,L){or(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function gn(v,g,y,k,L){or(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Wn(function(g,y=0){return sn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Wn(function(g,y=0){return gn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const St=Math.pow(2,8*k-1);je(this,g,y,k,St-1,-St)}let $=0,Z=1,Ue=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&Ue===0&&this[y+$-1]!==0&&(Ue=1),this[y+$]=(g/Z>>0)-Ue&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const St=Math.pow(2,8*k-1);je(this,g,y,k,St-1,-St)}let $=k-1,Z=1,Ue=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&Ue===0&&this[y+$+1]!==0&&(Ue=1),this[y+$]=(g/Z>>0)-Ue&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||je(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Wn(function(g,y=0){return sn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Wn(function(g,y=0){return gn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ot(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function pt(v,g,y,k,L){return g=+g,y=y>>>0,L||Ot(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return pt(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return pt(this,g,y,!1,k)};function kr(v,g,y,k,L){return g=+g,y=y>>>0,L||Ot(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return kr(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return kr(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),Ue=Z.length;if(Ue===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%Ue]}return this};const $t={};function En(v,g,y){$t[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}En("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),En("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),En("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=si(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=si(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function si(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function Ir(v,g,y){Si(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&vn(g,v.length-(y+1))}function or(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let Ue;throw $>3?g===0||g===BigInt(0)?Ue=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:Ue=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:Ue=`>= ${g}${Z} and <= ${y}${Z}`,new $t.ERR_OUT_OF_RANGE("value",Ue,v)}Ir(k,L,$)}function Si(v,g){if(typeof v!="number")throw new $t.ERR_INVALID_ARG_TYPE(g,"number",v)}function vn(v,g,y){throw Math.floor(v)!==v?(Si(v,y),new $t.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new $t.ERR_BUFFER_OUT_OF_BOUNDS:new $t.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const ks=/[^+/0-9A-Za-z-_]/g;function Yd(v){if(v=v.split("=")[0],v=v.trim().replace(ks,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function ar(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function qc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Qd(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function Vi(v){return e.toByteArray(Yd(v))}function On(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function Pn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Wi(v){return v!==v}const Jd=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Wn(v){return typeof BigInt>"u"?Xd:v}function Xd(){throw new Error("BigInt not supported")}})(ot);var YC=typeof Re.global<"u"?Re.global:typeof self<"u"?self:typeof window<"u"?window:{},up;typeof Object.create=="function"?up=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:up=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var QC=up;function Vs(r,e){var t={seen:[],stylize:XC};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),kw(e)?t.showHidden=e:e&&sM(t,e),Do(t.showHidden)&&(t.showHidden=!1),Do(t.depth)&&(t.depth=2),Do(t.colors)&&(t.colors=!1),Do(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=JC),vl(t,r,t.depth)}Vs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Vs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function JC(r,e){var t=Vs.styles[e];return t?"\x1B["+Vs.colors[t][0]+"m"+r+"\x1B["+Vs.colors[t][1]+"m":r}function XC(r,e){return r}function ZC(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function vl(r,e,t){if(r.customInspect&&e&&sc(e.inspect)&&e.inspect!==Vs&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return Ew(n)||(n=vl(r,n,t)),n}var i=eM(r,e);if(i)return i;var s=Object.keys(e),a=ZC(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),sl(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return kh(e);if(s.length===0){if(sc(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(ic(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(_l(e))return r.stylize(Date.prototype.toString.call(e),"date");if(sl(e))return kh(e)}var d="",h=!1,f=["{","}"];if(rM(e)&&(h=!0,f=["[","]"]),sc(e)){var m=e.name?": "+e.name:"";d=" [Function"+m+"]"}if(ic(e)&&(d=" "+RegExp.prototype.toString.call(e)),_l(e)&&(d=" "+Date.prototype.toUTCString.call(e)),sl(e)&&(d=" "+kh(e)),s.length===0&&(!h||e.length==0))return f[0]+d+f[1];if(t<0)return ic(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=tM(r,e,t,a,s):I=s.map(function(O){return lp(r,e,t,a,O,h)}),r.seen.pop(),nM(I,d,f)}function eM(r,e){if(Do(e))return r.stylize("undefined","undefined");if(Ew(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(iM(e))return r.stylize(""+e,"number");if(kw(e))return r.stylize(""+e,"boolean");if(Iw(e))return r.stylize("null","null")}function kh(r){return"["+Error.prototype.toString.call(r)+"]"}function tM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)Ow(e,String(a))?s.push(lp(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(d){d.match(/^\d+$/)||s.push(lp(r,e,t,n,d,!0))}),s}function lp(r,e,t,n,i,s){var a,u,d;if(d=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},d.get?d.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):d.set&&(u=r.stylize("[Setter]","special")),Ow(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(d.value)<0?(Iw(t)?u=vl(r,d.value,null):u=vl(r,d.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),Do(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function nM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function rM(r){return Array.isArray(r)}function kw(r){return typeof r=="boolean"}function Iw(r){return r===null}function iM(r){return typeof r=="number"}function Ew(r){return typeof r=="string"}function Do(r){return r===void 0}function ic(r){return ad(r)&&og(r)==="[object RegExp]"}function ad(r){return typeof r=="object"&&r!==null}function _l(r){return ad(r)&&og(r)==="[object Date]"}function sl(r){return ad(r)&&(og(r)==="[object Error]"||r instanceof Error)}function sc(r){return typeof r=="function"}function jb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function og(r){return Object.prototype.toString.call(r)}function sM(r,e){if(!e||!ad(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function Ow(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function qb(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var oM=Object.prototype.hasOwnProperty,Gb=Object.keys||function(r){var e=[];for(var t in r)oM.call(r,t)&&e.push(t);return e},Hb=Array.prototype.slice,Ih;function Pw(){return typeof Ih<"u"?Ih:Ih=function(){return function(){}.name==="foo"}()}function Yb(r){return Object.prototype.toString.call(r)}function Qb(r){return ot.isBuffer(r)||typeof YC.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function Mn(r,e){r||nr(r,!0,e,"==",cg)}var aM=/\s*function\s+([^\(\s]*)\s*/;function Tw(r){if(!!sc(r)){if(Pw())return r.name;var e=r.toString(),t=e.match(aM);return t&&t[1]}}Mn.AssertionError=ag;function ag(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=cM(this),this.generatedMessage=!0);var e=r.stackStartFunction||nr;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=Tw(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}QC(ag,Error);function Jb(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function Xb(r){if(Pw()||!sc(r))return Vs(r);var e=Tw(r),t=e?": "+e:"";return"[Function"+t+"]"}function cM(r){return Jb(Xb(r.actual),128)+" "+r.operator+" "+Jb(Xb(r.expected),128)}function nr(r,e,t,n,i){throw new ag({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}Mn.fail=nr;function cg(r,e){r||nr(r,!0,e,"==",cg)}Mn.ok=cg;Mn.equal=Rw;function Rw(r,e,t){r!=e&&nr(r,e,t,"==",Rw)}Mn.notEqual=Bw;function Bw(r,e,t){r==e&&nr(r,e,t,"!=",Bw)}Mn.deepEqual=xw;function xw(r,e,t){ra(r,e,!1)||nr(r,e,t,"deepEqual",xw)}Mn.deepStrictEqual=Cw;function Cw(r,e,t){ra(r,e,!0)||nr(r,e,t,"deepStrictEqual",Cw)}function ra(r,e,t,n){if(r===e)return!0;if(ot.isBuffer(r)&&ot.isBuffer(e))return qb(r,e)===0;if(_l(r)&&_l(e))return r.getTime()===e.getTime();if(ic(r)&&ic(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(Qb(r)&&Qb(e)&&Yb(r)===Yb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return qb(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(ot.isBuffer(r)!==ot.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),uM(r,e,t,n))}function Zb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function uM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(jb(r)||jb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Zb(r),s=Zb(e);if(i&&!s||!i&&s)return!1;if(i)return r=Hb.call(r),e=Hb.call(e),ra(r,e,t);var a=Gb(r),u=Gb(e),d,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(d=a[h],!ra(r[d],e[d],t,n))return!1;return!0}Mn.notDeepEqual=Mw;function Mw(r,e,t){ra(r,e,!1)&&nr(r,e,t,"notDeepEqual",Mw)}Mn.notDeepStrictEqual=Lw;function Lw(r,e,t){ra(r,e,!0)&&nr(r,e,t,"notDeepStrictEqual",Lw)}Mn.strictEqual=Kw;function Kw(r,e,t){r!==e&&nr(r,e,t,"===",Kw)}Mn.notStrictEqual=Nw;function Nw(r,e,t){r===e&&nr(r,e,t,"!==",Nw)}function ev(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function lM(r){var e;try{r()}catch(t){e=t}return e}function Dw(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=lM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&nr(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&sl(i),u=!r&&i&&!t;if((a&&s&&ev(i,t)||u)&&nr(i,t,"Got unwanted exception"+n),r&&i&&t&&!ev(i,t)||!r&&i)throw i}Mn.throws=dM;function dM(r,e,t){Dw(!0,r,e,t)}Mn.doesNotThrow=fM;function fM(r,e,t){Dw(!1,r,e,t)}Mn.ifError=hM;function hM(r){if(r)throw r}class bc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function pM(r,e){return e.property?r+"["+e.property+"]":r}class Uu extends bc{isCount(){throw new Error("ExternalLayout is abstract")}}class Uw extends bc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class gM extends bc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof bc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let d=u.span;if(a=0<d?d:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>d&&(d=u.getSpan(t,n)))}s=n,n+=d}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class yM extends bc{constructor(e,t){if(!(e instanceof Uu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Uu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Uu&&(i=e.length),!(ot.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(pM("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Uu&&this.length.encode(i,t,n),i}}var tt=r=>new Uw(1,r),oc=r=>new Uw(4,r),Jt=(r,e,t)=>new gM(r,e,t),Fw=(r,e)=>new yM(r,e);const Zt=(r="publicKey")=>Fw(32,r),Nr=(r="uint64")=>Fw(8,r);function cn(r,e,t,...n){return gC(e,t,n,{skipPreflight:!1})}const mM=new _e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),zw=new _e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),tv="Failed to find account",nv="Invalid account owner";function Eh(r){return ot.Buffer.from(r.toBuffer())}class Bn extends ls{toBuffer(){const e=super.toArray().reverse(),t=ot.Buffer.from(e);if(t.length===8)return t;Mn(t.length<8,"u64 too large");const n=ot.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return Mn(e.length===8,`Invalid buffer length: ${e.length}`),new Bn([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function pr(r){return"publicKey"in r}const bM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},Vw=new _e("So11111111111111111111111111111111111111112"),Za=Jt([oc("mintAuthorityOption"),Zt("mintAuthority"),Nr("supply"),tt("decimals"),tt("isInitialized"),oc("freezeAuthorityOption"),Zt("freezeAuthority")]),Bo=Jt([Zt("mint"),Zt("owner"),Nr("amount"),oc("delegateOption"),Zt("delegate"),tt("state"),oc("isNativeOption"),Nr("isNative"),Nr("delegatedAmount"),oc("closeAuthorityOption"),Zt("closeAuthority")]),Fu=Jt([tt("m"),tt("n"),tt("is_initialized"),Zt("signer1"),Zt("signer2"),Zt("signer3"),Zt("signer4"),Zt("signer5"),Zt("signer6"),Zt("signer7"),Zt("signer8"),Zt("signer9"),Zt("signer10"),Zt("signer11")]);class _t{constructor(e,t,n,i){$a(this,"connection",void 0),$a(this,"publicKey",void 0),$a(this,"programId",void 0),$a(this,"associatedProgramId",void 0),$a(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:zw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Za.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(Bo.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Fu.span)}static async createMint(e,t,n,i,s,a){const u=rs.generate(),d=new _t(e,u.publicKey,a,t),h=await _t.getMinBalanceRentForExemptMint(e),f=new Dt;return f.add(fi.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Za.span,programId:a})),f.add(_t.createInitMintInstruction(a,u.publicKey,s,n,i)),await cn("createAccount and InitializeMint",e,f,t,u),d}async createAccount(e){const t=await _t.getMinBalanceRentForExemptAccount(this.connection),n=rs.generate(),i=new Dt;i.add(fi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:Bo.span,programId:this.programId}));const s=this.publicKey;return i.add(_t.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await cn("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await _t.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await cn("CreateAssociatedTokenAccount",this.connection,new Dt().add(_t.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await _t.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===tv||n.message===nv){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await _t.getMinBalanceRentForExemptAccount(e),u=rs.generate(),d=new Dt;return d.add(fi.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:Bo.span,programId:t})),d.add(fi.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),d.add(_t.createInitAccountInstruction(t,Vw,u.publicKey,n)),await cn("createAccount, transfer, and initializeAccount",e,d,i,u),u.publicKey}async createMultisig(e,t){const n=rs.generate(),i=await _t.getMinBalanceRentForExemptMultisig(this.connection),s=new Dt;s.add(fi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:Fu.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:No,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=Jt([tt("instruction"),tt("m")]),d=ot.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},d),s.add({keys:a,programId:this.programId,data:d}),await cn("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Za.span)throw new Error("Invalid mint size");const t=ot.Buffer.from(e.data),n=Za.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new _e(n.mintAuthority),n.supply=Bn.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new _e(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(tv);if(!n.owner.equals(this.programId))throw new Error(nv);if(n.data.length!=Bo.span)throw new Error("Invalid account size");const i=ot.Buffer.from(n.data),s=Bo.decode(i);if(s.address=e,s.mint=new _e(s.mint),s.owner=new _e(s.owner),s.amount=Bn.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new Bn):(s.delegate=new _e(s.delegate),s.delegatedAmount=Bn.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=Bn.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new _e(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Fu.span)throw new Error("Invalid multisig size");const n=ot.Buffer.from(t.data),i=Fu.decode(n);return i.signer1=new _e(i.signer1),i.signer2=new _e(i.signer2),i.signer3=new _e(i.signer3),i.signer4=new _e(i.signer4),i.signer5=new _e(i.signer5),i.signer6=new _e(i.signer6),i.signer7=new _e(i.signer7),i.signer8=new _e(i.signer8),i.signer9=new _e(i.signer9),i.signer10=new _e(i.signer10),i.signer11=new _e(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return pr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await cn("Transfer",this.connection,new Dt().add(_t.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;pr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await cn("Approve",this.connection,new Dt().add(_t.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;pr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await cn("Revoke",this.connection,new Dt().add(_t.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;pr(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await cn("SetAuthority",this.connection,new Dt().add(_t.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;pr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await cn("MintTo",this.connection,new Dt().add(_t.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;pr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await cn("Burn",this.connection,new Dt().add(_t.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;pr(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await cn("CloseAccount",this.connection,new Dt().add(_t.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;pr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await cn("FreezeAccount",this.connection,new Dt().add(_t.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;pr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await cn("ThawAccount",this.connection,new Dt().add(_t.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,d;return pr(n)?(u=n.publicKey,d=[n]):(u=n,d=i),await cn("TransferChecked",this.connection,new Dt().add(_t.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...d)}async approveChecked(e,t,n,i,s,a){let u,d;pr(n)?(u=n.publicKey,d=[n]):(u=n,d=i),await cn("ApproveChecked",this.connection,new Dt().add(_t.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...d)}async mintToChecked(e,t,n,i,s){let a,u;pr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await cn("MintToChecked",this.connection,new Dt().add(_t.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;pr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await cn("BurnChecked",this.connection,new Dt().add(_t.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await cn("SyncNative",this.connection,new Dt().add(_t.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:No,isSigner:!1,isWritable:!1}];const u=Jt([tt("instruction"),tt("decimals"),Zt("mintAuthority"),tt("option"),Zt("freezeAuthority")]);let d=ot.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:Eh(i),option:s===null?0:1,freezeAuthority:Eh(s||new _e(0))},d);d=d.slice(0,h)}return new yt({keys:a,programId:e,data:d})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:No,isSigner:!1,isWritable:!1}],a=Jt([tt("instruction")]),u=ot.Buffer.alloc(a.span);return a.encode({instruction:1},u),new yt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=Jt([tt("instruction"),Nr("amount")]),d=ot.Buffer.alloc(u.span);u.encode({instruction:3,amount:new Bn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:h,programId:e,data:d})}static createApproveInstruction(e,t,n,i,s,a){const u=Jt([tt("instruction"),Nr("amount")]),d=ot.Buffer.alloc(u.span);u.encode({instruction:4,amount:new Bn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:h,programId:e,data:d})}static createRevokeInstruction(e,t,n,i){const s=Jt([tt("instruction")]),a=ot.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(d=>u.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=Jt([tt("instruction"),tt("authorityType"),tt("option"),Zt("newAuthority")]);let d=ot.Buffer.alloc(1024);{const f=u.encode({instruction:6,authorityType:bM[i],option:n===null?0:1,newAuthority:Eh(n||new _e(0))},d);d=d.slice(0,f)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:h,programId:e,data:d})}static createMintToInstruction(e,t,n,i,s,a){const u=Jt([tt("instruction"),Nr("amount")]),d=ot.Buffer.alloc(u.span);u.encode({instruction:7,amount:new Bn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:h,programId:e,data:d})}static createBurnInstruction(e,t,n,i,s,a){const u=Jt([tt("instruction"),Nr("amount")]),d=ot.Buffer.alloc(u.span);u.encode({instruction:8,amount:new Bn(a).toBuffer()},d);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:h,programId:e,data:d})}static createCloseAccountInstruction(e,t,n,i,s){const a=Jt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:9},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:d,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=Jt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:10},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:d,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=Jt([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:11},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:d,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,d){const h=Jt([tt("instruction"),Nr("amount"),tt("decimals")]),f=ot.Buffer.alloc(h.span);h.encode({instruction:12,amount:new Bn(u).toBuffer(),decimals:d},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:m,programId:e,data:f})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,d){const h=Jt([tt("instruction"),Nr("amount"),tt("decimals")]),f=ot.Buffer.alloc(h.span);h.encode({instruction:13,amount:new Bn(u).toBuffer(),decimals:d},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:m,programId:e,data:f})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const d=Jt([tt("instruction"),Nr("amount"),tt("decimals")]),h=ot.Buffer.alloc(d.span);d.encode({instruction:14,amount:new Bn(a).toBuffer(),decimals:u},h);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:f,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const d=Jt([tt("instruction"),Nr("amount"),tt("decimals")]),h=ot.Buffer.alloc(d.span);d.encode({instruction:15,amount:new Bn(a).toBuffer(),decimals:u},h);let f=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new yt({keys:f,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=Jt([tt("instruction")]),i=ot.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new yt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!_e.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await _e.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=ot.Buffer.alloc(0);let d=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:fi.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:No,isSigner:!1,isWritable:!1}];return new yt({keys:d,programId:e,data:u})}}var vM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:zw,AccountLayout:Bo,MintLayout:Za,NATIVE_MINT:Vw,TOKEN_PROGRAM_ID:mM,Token:_t,u64:Bn},Symbol.toStringTag,{value:"Module"})),Rc=kc(vM),cd=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(un,"__esModule",{value:!0});un.getAccountInfo=un.getTokenAccount=un.getAssociatedTokenAddress=un.convertFactionStringToNum=un.longToByteArray=un.byteArrayToLong=un.stringToByteArray=un.byteArrayToString=void 0;const zu=ts,Vu=bt,ol=Fi,li=Rc;function _M(r){return String.fromCharCode(...r)}un.byteArrayToString=_M;function wM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}un.stringToByteArray=wM;function SM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}un.byteArrayToLong=SM;function AM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}un.longToByteArray=AM;function kM(r){return cd(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return zu.FactionType.MUD;case"oni":return zu.FactionType.ONI;case"ustur":return zu.FactionType.Ustur;default:return zu.FactionType.Unenlisted}})}un.convertFactionStringToNum=kM;function Ww(r,e){return cd(this,void 0,void 0,function*(){const[t]=yield ol.PublicKey.findProgramAddress([r.toBuffer(),li.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],li.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}un.getAssociatedTokenAddress=Ww;function IM(r,e,t,n=e,i){return cd(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const d of s)if(d.account.data.parsed.type==="account"){const h=d.account.data.parsed,f=new Vu.BN(h.info.tokenAmount.amount);(u===null||f.gt(u))&&(a=d.pubkey,u=f)}}else{let u=null;for(const d of s)if(d.account.data.parsed.type==="account"){const h=d.account.data.parsed,f=new Vu.BN(h.info.tokenAmount.amount);f.gt(new Vu.BN(i))&&(u===null||f.lt(u))&&(a=d.pubkey,u=f)}}if(a===null){const u=yield Ww(e,t),{value:d}=yield r.getParsedAccountInfo(u,"confirmed");if(d===null||d.owner.equals(ol.SystemProgram.programId))return{tokenAccount:u,createInstruction:[li.Token.createAssociatedTokenAccountInstruction(li.ASSOCIATED_TOKEN_PROGRAM_ID,li.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in d.data&&d.data.parsed.type==="account"&&new ol.PublicKey(d.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Vu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[ol.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield li.Token.getMinBalanceRentForExemptAccount(r),space:li.AccountLayout.span,programId:li.TOKEN_PROGRAM_ID}),li.Token.createInitAccountInstruction(li.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}un.getTokenAccount=IM;function EM(r,e){return cd(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}un.getAccountInfo=EM;var ud={},OM=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ud,"__esModule",{value:!0});ud.sendAndConfirmTransaction=void 0;const PM=Fi;function TM(r,e,...t){return OM(this,void 0,void 0,function*(){let n="";try{n=yield(0,PM.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}ud.sendAndConfirmTransaction=TM;var Gs={},ug={},lg={},$w={};Object.defineProperty($w,"__esModule",{value:!0});var ld={},ms={},Cn={},Xr={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.baseIdl=void 0;Bc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var dd={};Object.defineProperty(dd,"__esModule",{value:!0});dd.baseIdl=void 0;dd.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var RM=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),BM=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xM=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&RM(e,r,t);return BM(e,r),e};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.getMarketplaceProgram=Xr.getGmLogsIDL=Xr.getGmIDL=void 0;const rv=bt,CM=Bc,MM=xM(dd);function jw(r){const e=CM.baseIdl;return e.metadata.address=r.toBase58(),e}Xr.getGmIDL=jw;function LM(r){const e=MM.baseIdl;return e.metadata.address=r.toBase58(),e}Xr.getGmLogsIDL=LM;function KM({connection:r,programId:e}){const t=jw(e),n=new rv.AnchorProvider(r,null,null);return new rv.Program(t,e,n)}Xr.getMarketplaceProgram=KM;var ao=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.getSingleOrder=Cn.getOpenOrdersForPlayerAndAsset=Cn.getOpenOrdersForPlayerAndCurrency=Cn.getOpenOrdersForAsset=Cn.getOpenOrdersForCurrency=Cn.getOpenOrdersForPlayer=Cn.getAllOpenOrders=void 0;const rr=bt,co=Xr;function NM(r,e){return ao(this,void 0,void 0,function*(){const t=new rr.AnchorProvider(r,null,null),n=(0,co.getGmIDL)(e),i=new rr.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}Cn.getAllOpenOrders=NM;function DM(r,e,t){return ao(this,void 0,void 0,function*(){const n=new rr.AnchorProvider(r,null,null),i=(0,co.getGmIDL)(t),s=new rr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Cn.getOpenOrdersForPlayer=DM;function UM(r,e,t){return ao(this,void 0,void 0,function*(){const n=new rr.AnchorProvider(r,null,null),i=(0,co.getGmIDL)(t),s=new rr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Cn.getOpenOrdersForCurrency=UM;function FM(r,e,t){return ao(this,void 0,void 0,function*(){const n=new rr.AnchorProvider(r,null,null),i=(0,co.getGmIDL)(t),s=new rr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Cn.getOpenOrdersForAsset=FM;function zM(r,e,t,n){return ao(this,void 0,void 0,function*(){const i=new rr.AnchorProvider(r,null,null),s=(0,co.getGmIDL)(n),a=new rr.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Cn.getOpenOrdersForPlayerAndCurrency=zM;function VM(r,e,t,n){return ao(this,void 0,void 0,function*(){const i=new rr.AnchorProvider(r,null,null),s=(0,co.getGmIDL)(n),a=new rr.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Cn.getOpenOrdersForPlayerAndAsset=VM;function WM(r,e,t){return ao(this,void 0,void 0,function*(){const n=new rr.AnchorProvider(r,null,null),i=(0,co.getGmIDL)(t);return yield new rr.Program(i,t,n).account.orderAccount.fetch(e)})}Cn.getSingleOrder=WM;var ln={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.FEE_EXEMPT_SEED=Fn.OPEN_ORDERS_COUNTER=Fn.REGISTERED_CURRENCY_SEED=Fn.ORDER_VAULT_AUTH_SEED=Fn.ORDER_VAULT_SEED=Fn.MARKET_VARS_SEED=void 0;Fn.MARKET_VARS_SEED=Re.Buffer.from("market-vars");Fn.ORDER_VAULT_SEED=Re.Buffer.from("order-vault-account");Fn.ORDER_VAULT_AUTH_SEED=Re.Buffer.from("order-vault-auth");Fn.REGISTERED_CURRENCY_SEED=Re.Buffer.from("registered-currency");Fn.OPEN_ORDERS_COUNTER=Re.Buffer.from("open-orders-counter");Fn.FEE_EXEMPT_SEED=Re.Buffer.from("fee_exempt");var $M=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jM=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qM=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$M(e,r,t);return jM(e,r),e},bs=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ln,"__esModule",{value:!0});ln.getAllFeeExemptAccounts=ln.getFeeExemptAccount=ln.getOpenOrdersCounter=ln.getAllRegisteredCurrencies=ln.getRegisteredCurrencyAccount=ln.getOrderVaultAuth=ln.getOrderVault=ln.getMarketVarsAccount=void 0;const wl=bt,wa=Fi,Sa=qM(Fn),qw=Xr;function GM(r){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.MARKET_VARS_SEED],r)})}ln.getMarketVarsAccount=GM;function HM(r,e,t){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}ln.getOrderVault=HM;function YM(r,e){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}ln.getOrderVaultAuth=YM;function QM(r,e){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}ln.getRegisteredCurrencyAccount=QM;function JM(r,e){return bs(this,void 0,void 0,function*(){const t=new wl.AnchorProvider(r,null,null),n=(0,qw.getGmIDL)(e),i=new wl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const d of a){const h={mint:d.account.tokenMint,royalty:d.account.royalty,saVault:d.account.saCurrencyVault};u.push(h)}return u})}ln.getAllRegisteredCurrencies=JM;function XM(r,e,t){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}ln.getOpenOrdersCounter=XM;function ZM(r,e){return bs(this,void 0,void 0,function*(){return wa.PublicKey.findProgramAddress([Sa.FEE_EXEMPT_SEED,r.toBuffer()],e)})}ln.getFeeExemptAccount=ZM;function eL(r,e){return bs(this,void 0,void 0,function*(){const t=new wl.AnchorProvider(r,null,null),n=(0,qw.getGmIDL)(e);return yield new wl.Program(n,e,t).account.feeReduction.all()})}ln.getAllFeeExemptAccounts=eL;var Jn={},Aa=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getRoyaltyReductionForStakingAccount=Jn.getRoyaltyReductionForUserAndMint=Jn.getRegisteredCurrencyInfoFromPubkey=Jn.getRegisteredCurrencyAccountInfo=Jn.getFeeExemptAccountInfo=Jn.getMarketVarsAccountInfo=void 0;const Sl=bt,dg=ln,fd=Xr,dp=zl;function tL(r,e){return Aa(this,void 0,void 0,function*(){const t=(0,fd.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,dg.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}Jn.getMarketVarsAccountInfo=tL;function nL(r,e,t){return Aa(this,void 0,void 0,function*(){const n=(0,fd.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,dg.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}Jn.getFeeExemptAccountInfo=nL;function rL(r,e,t){return Aa(this,void 0,void 0,function*(){const n=(0,fd.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,dg.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}Jn.getRegisteredCurrencyAccountInfo=rL;function fg(r,e,t){return Aa(this,void 0,void 0,function*(){return yield(0,fd.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}Jn.getRegisteredCurrencyInfoFromPubkey=fg;function iL(r,e,t,n,i,s){return Aa(this,void 0,void 0,function*(){let a=0;const u=yield fg(r,e,i),[d]=yield(0,dp.getStakingAccount)(t,n,s),h=yield(0,dp.getStakingAccountInfo)(r,d,t);if(h.unstakedTs.eq(new Sl.BN(0))){const f=u.royaltyTiers;let m=new Sl.BN(0);for(const I of f)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}Jn.getRoyaltyReductionForUserAndMint=iL;function sL(r,e,t,n,i){return Aa(this,void 0,void 0,function*(){let s=0;const a=yield fg(r,e,i),u=yield(0,dp.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new Sl.BN(0))){const d=a.royaltyTiers;let h=new Sl.BN(0);for(const f of d)u.totalStake.gte(f.stakeAmount)&&(h=f.discount);s=h.toNumber()/1e4}return s})}Jn.getRoyaltyReductionForStakingAccount=sL;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Cn,r),t(ln,r),t(Jn,r),t(Fn,r)})(ms);var xc={},sr={},os={},oL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(os,"__esModule",{value:!0});os.convertDecimalPriceToBn=os.initializeAtaForMint=os.getOrderSide=void 0;const aL=bt,cL=no,Oh=Rc,uL=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";os.getOrderSide=uL;function lL({mint:r,owner:e,connection:t}){return oL(this,void 0,void 0,function*(){const n=[],i=yield(0,cL.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(Oh.Token.createAssociatedTokenAccountInstruction(Oh.ASSOCIATED_TOKEN_PROGRAM_ID,Oh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}os.initializeAtaForMint=lL;const dL=(r,e)=>new aL.BN(r*Math.pow(10,e));os.convertDecimalPriceToBn=dL;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Xr,r),t(os,r)})(sr);var fL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xc,"__esModule",{value:!0});xc.createOrderCounterInstruction=void 0;const hL=sr;function pL({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return fL(this,void 0,void 0,function*(){return yield(0,hL.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}xc.createOrderCounterInstruction=pL;var gL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ld,"__esModule",{value:!0});ld.createCancelOrderInstruction=void 0;const yL=bt,mL=ms,bL=xc,iv=sr,vL=$r;function _L({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return gL(this,void 0,void 0,function*(){const s=(0,iv.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,iv.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let f=null,m=null;const I=yield(0,vL.getTokenAccount)(r,e,h);f=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),f instanceof yL.web3.Keypair?(m=f.publicKey,a.signers.push(f)):m=f;const[O]=yield(0,mL.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,bL.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}ld.createCancelOrderInstruction=_L;var ia={},Gw=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ia,"__esModule",{value:!0});ia.createInitializeSellOrderInstruction=ia.createInitializeBuyOrderInstruction=void 0;const qo=bt,Hw=sr,Yw=$r,Qw=ms,Jw=xc,Xw=$r;function wL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return Gw(this,void 0,void 0,function*(){const d=(0,Hw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,Yw.getTokenAccount)(r,e,a);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof qo.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const[O]=yield(0,Qw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,Jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=qo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,Xw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const M=yield d.methods.processInitializeBuy(n,new qo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(M),{orderAccount:A.publicKey,ixSet:h}})}ia.createInitializeBuyOrderInstruction=wL;function SL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return Gw(this,void 0,void 0,function*(){const d=(0,Hw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,Yw.getTokenAccount)(r,e,a);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof qo.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const[O]=yield(0,Qw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,Jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=qo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,Xw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const M=yield d.methods.processInitializeSell(n,new qo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(M),{orderAccount:A.publicKey,ixSet:h}})}ia.createInitializeSellOrderInstruction=SL;var hd={},AL=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(hd,"__esModule",{value:!0});hd.createDeregisterCurrencyInstruction=void 0;const kL=sr;function IL({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return AL(this,void 0,void 0,function*(){const s=[yield(0,kL.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}hd.createDeregisterCurrencyInstruction=IL;var pd={},gd={},yd={},Zw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,d=21,h=!1,f="[big.js] ",m=f+"Invalid ",I=m+"decimal places",O=m+"rounding mode",C=f+"Division by zero",A={},R=void 0,M=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var W=this;if(!(W instanceof E))return N===R?Y():new E(N);if(N instanceof E)W.s=N.s,W.e=N.e,W.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(W,N)}W.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=d,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var W,Q,K;if(!M.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(W=N.indexOf("."))>-1&&(N=N.replace(".","")),(Q=N.search(/e/i))>0?(W<0&&(W=Q),W+=+N.slice(Q+1),N=N.substring(0,Q)):W<0&&(W=N.length),K=N.length,Q=0;Q<K&&N.charAt(Q)=="0";)++Q;if(Q==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=W-Q-1,E.c=[],W=0;Q<=K;)E.c[W++]=+N.charAt(Q++)}return E}function oe(E,N,W,Q){var K=E.c;if(W===R&&(W=E.constructor.RM),W!==0&&W!==1&&W!==2&&W!==3)throw Error(O);if(N<1)Q=W===3&&(Q||!!K[0])||N===0&&(W===1&&K[0]>=5||W===2&&(K[0]>5||K[0]===5&&(Q||K[1]!==R))),K.length=1,Q?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(Q=W===1&&K[N]>=5||W===2&&(K[N]>5||K[N]===5&&(Q||K[N+1]!==R||K[N-1]&1))||W===3&&(Q||!!K[0]),K.length=N,Q){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function fe(E,N,W){var Q=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(Q<0?"e":"e+")+Q;else if(Q<0){for(;++Q;)K="0"+K;K="0."+K}else if(Q>0)if(++Q>j)for(Q-=j;Q--;)K+="0";else Q<j&&(K=K.slice(0,Q)+"."+K.slice(Q));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&W?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,W=this,Q=W.c,K=(E=new W.constructor(E)).c,j=W.s,te=E.s,T=W.e,V=E.e;if(!Q[0]||!K[0])return Q[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=V)return T>V^N?1:-1;for(te=(T=Q.length)<(V=K.length)?T:V,j=-1;++j<te;)if(Q[j]!=K[j])return Q[j]>K[j]^N?1:-1;return T==V?0:T>V^N?1:-1},A.div=function(E){var N=this,W=N.constructor,Q=N.c,K=(E=new W(E)).c,j=N.s==E.s?1:-1,te=W.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(C);if(!Q[0])return E.s=j,E.c=[E.e=0],E;var T,V,X,Ce,me,Oe=K.slice(),Yt=T=K.length,Qt=Q.length,we=Q.slice(0,T),je=we.length,sn=E,gn=sn.c=[],Ot=0,pt=te+(sn.e=N.e-E.e)+1;for(sn.s=j,j=pt<0?0:pt,Oe.unshift(0);je++<T;)we.push(0);do{for(X=0;X<10;X++){if(T!=(je=we.length))Ce=T>je?1:-1;else for(me=-1,Ce=0;++me<T;)if(K[me]!=we[me]){Ce=K[me]>we[me]?1:-1;break}if(Ce<0){for(V=je==T?K:Oe;je;){if(we[--je]<V[je]){for(me=je;me&&!we[--me];)we[me]=9;--we[me],we[je]+=10}we[je]-=V[je]}for(;!we[0];)we.shift()}else break}gn[Ot++]=Ce?X:++X,we[0]&&Ce?we[je]=Q[Yt]||0:we=[Q[Yt]]}while((Yt++<Qt||we[0]!==R)&&j--);return!gn[0]&&Ot!=1&&(gn.shift(),sn.e--,pt--),Ot>pt&&oe(sn,pt,W.RM,we[0]!==R),sn},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,W,Q,K,j=this,te=j.constructor,T=j.s,V=(E=new te(E)).s;if(T!=V)return E.s=-V,j.plus(E);var X=j.c.slice(),Ce=j.e,me=E.c,Oe=E.e;if(!X[0]||!me[0])return me[0]?E.s=-V:X[0]?E=new te(j):E.s=1,E;if(T=Ce-Oe){for((K=T<0)?(T=-T,Q=X):(Oe=Ce,Q=me),Q.reverse(),V=T;V--;)Q.push(0);Q.reverse()}else for(W=((K=X.length<me.length)?X:me).length,T=V=0;V<W;V++)if(X[V]!=me[V]){K=X[V]<me[V];break}if(K&&(Q=X,X=me,me=Q,E.s=-E.s),(V=(W=me.length)-(N=X.length))>0)for(;V--;)X[N++]=0;for(V=N;W>T;){if(X[--W]<me[W]){for(N=W;N&&!X[--N];)X[N]=9;--X[N],X[W]+=10}X[W]-=me[W]}for(;X[--V]===0;)X.pop();for(;X[0]===0;)X.shift(),--Oe;return X[0]||(E.s=1,X=[Oe=0]),E.c=X,E.e=Oe,E},A.mod=function(E){var N,W=this,Q=W.constructor,K=W.s,j=(E=new Q(E)).s;if(!E.c[0])throw Error(C);return W.s=E.s=1,N=E.cmp(W)==1,W.s=K,E.s=j,N?new Q(W):(K=Q.DP,j=Q.RM,Q.DP=Q.RM=0,W=W.div(E),Q.DP=K,Q.RM=j,this.minus(W.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,W,Q,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,V=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-V){for(N>0?(V=te,Q=X):(N=-N,Q=T),Q.reverse();N--;)Q.push(0);Q.reverse()}for(T.length-X.length<0&&(Q=X,X=T,T=Q),N=X.length,W=0;N;T[N]%=10)W=(T[--N]=T[N]+X[N]+W)/10|0;for(W&&(T.unshift(W),++V),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=V,E},A.pow=function(E){var N=this,W=new N.constructor("1"),Q=W,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(Q=Q.times(N)),E>>=1,!!E;)N=N.times(N);return K?W.div(Q):Q},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,W,Q=this,K=Q.constructor,j=Q.s,te=Q.e,T=new K("0.5");if(!Q.c[0])return new K(Q);if(j<0)throw Error(f+"No square root");j=Math.sqrt(Q+""),j===0||j===1/0?(N=Q.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do W=E,E=T.times(W.plus(Q.div(W)));while(W.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,W=this,Q=W.constructor,K=W.c,j=(E=new Q(E)).c,te=K.length,T=j.length,V=W.e,X=E.e;if(E.s=W.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=V+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(V=T;V--;){for(T=0,X=te+V;X>V;)T=N[X]+j[V]*K[X-V-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),V=N.length;!N[--V];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var W=this,Q=W.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(W=oe(new W.constructor(W),++E,N);W.c.length<E;)W.c.push(0)}return fe(W,!0,!!Q)},A.toFixed=function(E,N){var W=this,Q=W.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(W=oe(new W.constructor(W),E+W.e+1,N),E=E+W.e+1;W.c.length<E;)W.c.push(0)}return fe(W,!1,!!Q)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return fe(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(fe(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(f+"Imprecise conversion");return E},A.toPrecision=function(E,N){var W=this,Q=W.constructor,K=W.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(W=oe(new Q(W),E,N);W.c.length<E;)W.c.push(0)}return fe(W,E<=W.e||W.e<=Q.NE||W.e>=Q.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(f+"valueOf disallowed");return fe(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(z)})(Zw);function Ne(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var EL={};function hg(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re.global<"u"?Re.global:typeof self<"u"?self:EL}var e0=Object.assign,Al=Object.getOwnPropertyDescriptor,yi=Object.defineProperty,Cc=Object.prototype,fp=[];Object.freeze(fp);var pg={};Object.freeze(pg);var OL=typeof Proxy<"u",PL=Object.toString();function t0(){OL||Ne("Proxy not available")}function n0(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Uo=function(){};function Sr(r){return typeof r=="function"}function Hs(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function md(r){return r!==null&&typeof r=="object"}function Ui(r){if(!md(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===PL}function r0(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Mc(r,e,t){yi(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function i0(r,e,t){yi(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function vs(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return md(n)&&n[t]===!0}}function ka(r){return r instanceof Map}function Lc(r){return r instanceof Set}var s0=typeof Object.getOwnPropertySymbols<"u";function TL(r){var e=Object.keys(r);if(!s0)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return Cc.propertyIsEnumerable.call(r,n)})):e}var sa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:s0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function o0(r){return r===null?null:typeof r=="object"?""+r:r}function Ni(r,e){return Cc.hasOwnProperty.call(r,e)}var RL=Object.getOwnPropertyDescriptors||function(e){var t={};return sa(e).forEach(function(n){t[n]=Al(e,n)}),t};function sv(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,CL(n.key),n)}}function gg(r,e,t){return e&&sv(r.prototype,e),t&&sv(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function fs(){return fs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},fs.apply(this,arguments)}function a0(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,hp(r,e)}function hp(r,e){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hp(r,e)}function Ph(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function BL(r,e){if(!!r){if(typeof r=="string")return ov(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ov(r,e)}}function ov(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Fo(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=BL(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xL(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function CL(r){var e=xL(r,"string");return typeof e=="symbol"?e:String(e)}var gi=Symbol("mobx-stored-annotations");function Zr(r){function e(t,n){if(Kc(n))return r.decorate_20223_(t,n);Ia(t,n,r)}return Object.assign(e,r)}function Ia(r,e,t){Ni(r,gi)||Mc(r,gi,fs({},r[gi])),VL(t)||(r[gi][e]=t)}function ML(r){return Ni(r,gi)||Mc(r,gi,fs({},r[gi])),r[gi]}function Kc(r){return typeof r=="object"&&typeof r.kind=="string"}var ke=Symbol("mobx administration"),Nc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=de.inBatch?de.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return P0(this)},e.reportChanged=function(){(!de.inBatch||this.batchId_!==de.batchId)&&(de.stateVersion=de.stateVersion<Number.MAX_SAFE_INTEGER?de.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),Zn(),T0(this),er()},e.toString=function(){return this.name_},r}(),yg=vs("Atom",Nc);function bd(r,e,t){e===void 0&&(e=Uo),t===void 0&&(t=Uo);var n=new Nc(r);return e!==Uo&&D0(n,e),t!==Uo&&Fc(n,t),n}function LL(r,e){return r===e}function KL(r,e){return kg(r,e)}function NL(r,e){return kg(r,e,1)}function DL(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Ys={identity:LL,structural:KL,default:DL,shallow:NL};function Qs(r,e,t){return Ed(r)?r:Array.isArray(r)?Ct.array(r,{name:t}):Ui(r)?Ct.object(r,void 0,{name:t}):ka(r)?Ct.map(r,{name:t}):Lc(r)?Ct.set(r,{name:t}):typeof r=="function"&&!_s(r)&&!ua(r)?r0(r)?Zs(r):ca(t,r):r}function UL(r,e,t){if(r==null||fn(r)||bn(r)||pn(r)||Vn(r))return r;if(Array.isArray(r))return Ct.array(r,{name:t,deep:!1});if(Ui(r))return Ct.object(r,void 0,{name:t,deep:!1});if(ka(r))return Ct.map(r,{name:t,deep:!1});if(Lc(r))return Ct.set(r,{name:t,deep:!1})}function vd(r){return r}function FL(r,e){return kg(r,e)?e:r}var c0="override",zL=Zr({annotationType_:c0,make_:WL,extend_:$L,decorate_20223_:jL});function VL(r){return r.annotationType_===c0}function WL(r,e){return 0}function $L(r,e,t,n){Ne("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function jL(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Dc(r,e){return{annotationType_:r,options_:e,make_:qL,extend_:GL,decorate_20223_:HL}}function qL(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(_s(t.value))return 1;var s=u0(r,this,e,t,!1);return yi(n,e,s),2}function GL(r,e,t,n){var i=u0(r,this,e,t);return r.defineProperty_(e,i,n)}function HL(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var f,m,I,O;return hs((f=(m=s.options_)==null?void 0:m.name)!=null?f:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){Ia(this,n,s)});return}if(t=="method"){var u;return _s(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var d=this,h=d[n].bind(d);h.isMobxAction=!0,d[n]=h}),r}Ne("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function YL(r,e,t,n){e.annotationType_,n.value}function u0(r,e,t,n,i){var s,a,u,d,h,f,m;i===void 0&&(i=de.safeDescriptors),YL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:hs((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(d=(h=e.options_)==null?void 0:h.autoAction)!=null?d:!1,(f=e.options_)!=null&&f.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function l0(r,e){return{annotationType_:r,options_:e,make_:QL,extend_:JL,decorate_20223_:XL}}function QL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Ni(r.target_,e)||!ua(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(ua(t.value))return 1;var s=d0(r,this,e,t,!1,!1);return yi(n,e,s),2}function JL(r,e,t,n){var i,s=d0(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function XL(r,e){var t,n=e.name,i=e.addInitializer;return ua(r)||(r=Zs(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function ZL(r,e,t,n){e.annotationType_,n.value}function d0(r,e,t,n,i,s){s===void 0&&(s=de.safeDescriptors),ZL(r,e,t,n);var a=n.value;if(ua(a)||(a=Zs(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function mg(r,e){return{annotationType_:r,options_:e,make_:eK,extend_:tK,decorate_20223_:nK}}function eK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function tK(r,e,t,n){return rK(r,this,e,t),r.defineComputedProperty_(e,fs({},this.options_,{get:t.get,set:t.set}),n)}function nK(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=lo(this)[ke],a=fs({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new aa(a))}),function(){return this[ke].getObservablePropValue_(n)}}function rK(r,e,t,n){e.annotationType_,n.get}function _d(r,e){return{annotationType_:r,options_:e,make_:iK,extend_:sK,decorate_20223_:oK}}function iK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function sK(r,e,t,n){var i,s;return aK(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Qs,n)}function oK(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,d){var h,f,m=lo(u)[ke],I=new as(d,(h=(f=t.options_)==null?void 0:f.enhancer)!=null?h:Qs,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[ke].getObservablePropValue_(i)},set:function(d){return s.has(this)||a(this,d),this[ke].setObservablePropValue_(i,d)},init:function(d){return s.has(this)||a(this,d),d}}}function aK(r,e,t,n){e.annotationType_}var cK="true",uK=f0();function f0(r){return{annotationType_:cK,options_:r,make_:lK,extend_:dK,decorate_20223_:fK}}function lK(r,e,t,n){var i,s;if(t.get)return Vr.make_(r,e,t,n);if(t.set){var a=hs(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:de.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(yi(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(r0(t.value)){var d,h=(d=this.options_)!=null&&d.autoBind?Zs.bound:Zs;return h.make_(r,e,t,n)}var f=(u=this.options_)!=null&&u.autoBind?ca.bound:ca;return f.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?Ct.ref:Ct;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function dK(r,e,t,n){var i,s;if(t.get)return Vr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:de.safeDescriptors?r.isPlainObject_:!0,set:hs(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?Ct.ref:Ct;return u.extend_(r,e,t,n)}function fK(r,e){Ne("'"+this.annotationType_+"' cannot be used as a decorator")}var hK="observable",pK="observable.ref",gK="observable.shallow",yK="observable.struct",h0={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(h0);function Wu(r){return r||h0}var pp=_d(hK),mK=_d(pK,{enhancer:vd}),bK=_d(gK,{enhancer:UL}),vK=_d(yK,{enhancer:FL}),p0=Zr(pp);function $u(r){return r.deep===!0?Qs:r.deep===!1?vd:wK(r.defaultDecorator)}function _K(r){var e;return r?(e=r.defaultDecorator)!=null?e:f0(r):void 0}function wK(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Qs}function g0(r,e,t){if(Kc(e))return pp.decorate_20223_(r,e);if(Hs(e)){Ia(r,e,pp);return}return Ed(r)?r:Ui(r)?Ct.object(r,e,t):Array.isArray(r)?Ct.array(r,e):ka(r)?Ct.map(r,e):Lc(r)?Ct.set(r,e):typeof r=="object"&&r!==null?r:Ct.box(r,e)}e0(g0,p0);var SK={box:function(e,t){var n=Wu(t);return new as(e,$u(n),n.name,!0,n.equals)},array:function(e,t){var n=Wu(t);return(de.useProxies===!1||n.proxy===!1?CN:AN)(e,$u(n),n.name)},map:function(e,t){var n=Wu(t);return new Od(e,$u(n),n.name)},set:function(e,t){var n=Wu(t);return new Sg(e,$u(n),n.name)},object:function(e,t,n){return Ss(function(){return kd(de.useProxies===!1||(n==null?void 0:n.proxy)===!1?lo({},n):vN({},n),e,t)})},ref:Zr(mK),shallow:Zr(bK),deep:p0,struct:Zr(vK)},Ct=e0(g0,SK),y0="computed",AK="computed.struct",gp=mg(y0),kK=mg(AK,{equals:Ys.structural}),Vr=function(e,t){if(Kc(t))return gp.decorate_20223_(e,t);if(Hs(t))return Ia(e,t,gp);if(Ui(e))return Zr(mg(y0,e));var n=Ui(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new aa(n)};Object.assign(Vr,gp);Vr.struct=Zr(kK);var av,cv,kl=0,IK=1,EK=(av=(cv=Al(function(){},"name"))==null?void 0:cv.configurable)!=null?av:!1,uv={value:"action",configurable:!0,writable:!1,enumerable:!1};function hs(r,e,t,n){t===void 0&&(t=!1);function i(){return m0(r,t,e,n||this,arguments)}return i.isMobxAction=!0,EK&&(uv.value=r,yi(i,"name",uv)),i}function m0(r,e,t,n,i){var s=b0(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{v0(s)}}function b0(r,e,t,n){var i=!1,s=0,a=de.trackingDerivation,u=!e||!a;Zn();var d=de.allowStateChanges;u&&(uo(),d=wd(!0));var h=Ad(!0),f={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:d,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:IK++,parentActionId_:kl};return kl=f.actionId_,f}function v0(r){kl!==r.actionId_&&Ne(30),kl=r.parentActionId_,r.error_!==void 0&&(de.suppressReactionErrors=!0),Sd(r.prevAllowStateChanges_),Go(r.prevAllowStateReads_),er(),r.runAsAction_&&Di(r.prevDerivation_),de.suppressReactionErrors=!1}function oa(r,e){var t=wd(r);try{return e()}finally{Sd(t)}}function wd(r){var e=de.allowStateChanges;return de.allowStateChanges=r,e}function Sd(r){de.allowStateChanges=r}var _0;_0=Symbol.toPrimitive;var as=function(r){a0(e,r);function e(n,i,s,a,u){var d;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Ys.default),d=r.call(this,s)||this,d.enhancer=void 0,d.name_=void 0,d.equals=void 0,d.hasUnreportedChange_=!1,d.interceptors_=void 0,d.changeListeners_=void 0,d.value_=void 0,d.dehancer=void 0,d.enhancer=i,d.name_=s,d.equals=u,d.value_=i(n,void 0,s),d}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==de.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Fr(this)){var s=zr(this,{object:this,type:mi,newValue:i});if(!s)return de.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?de.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),ei(this)&&ti(this,{type:mi,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return zc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:mi,newValue:this.value_,oldValue:void 0}),Vc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return o0(this.get())},t[_0]=function(){return this.valueOf()},e}(Nc),bg=vs("ObservableValue",as),w0;w0=Symbol.toPrimitive;var aa=function(){function r(t){this.dependenciesState_=it.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new El(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Il.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ne(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=hs("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Ys.structural:Ys.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){LK(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ne(32,this.name_,this.derivation),de.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)yp(this)&&(this.warnAboutUntrackedRead_(),Zn(),this.value_=this.computeValue_(!1),er());else if(P0(this),yp(this)){var n=de.trackingContext;this.keepAlive_&&!n&&(de.trackingContext=this),this.trackAndCompute()&&MK(this),de.trackingContext=n}var i=this.value_;if(al(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ne(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ne(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===it.NOT_TRACKING_,s=this.computeValue_(!0),a=i||al(n)||al(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=wd(!1),s;if(n)s=S0(this,this.derivation,this.scope_);else if(de.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new El(a)}return Sd(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(mp(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Xs(function(){var d=s.get();if(!a||i){var h=uo();n({observableKind:"computed",debugObjectName:s.name_,type:mi,object:s,newValue:d,oldValue:u}),Di(h)}a=!1,u=d})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return o0(this.get())},e[w0]=function(){return this.valueOf()},r}(),Js=vs("ComputedValue",aa),it;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(it||(it={}));var Il;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Il||(Il={}));var El=function(e){this.cause=void 0,this.cause=e};function al(r){return r instanceof El}function yp(r){switch(r.dependenciesState_){case it.UP_TO_DATE_:return!1;case it.NOT_TRACKING_:case it.STALE_:return!0;case it.POSSIBLY_STALE_:{for(var e=Ad(!0),t=uo(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(Js(a)){if(de.disableErrorBoundaries)a.get();else try{a.get()}catch{return Di(t),Go(e),!0}if(r.dependenciesState_===it.STALE_)return Di(t),Go(e),!0}}return A0(r),Di(t),Go(e),!1}}}function Uc(){return de.trackingDerivation!==null}function S0(r,e,t){var n=Ad(!0);A0(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++de.runId;var i=de.trackingDerivation;de.trackingDerivation=r,de.inBatch++;var s;if(de.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new El(a)}return de.inBatch--,de.trackingDerivation=i,OK(r),Go(n),s}function OK(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=it.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var d=e[s];d.diffValue_===0&&E0(d,r),d.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,CK(h,r))}n!==it.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function mp(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)E0(e[t],r);r.dependenciesState_=it.NOT_TRACKING_}function vg(r){var e=uo();try{return r()}finally{Di(e)}}function uo(){var r=de.trackingDerivation;return de.trackingDerivation=null,r}function Di(r){de.trackingDerivation=r}function Ad(r){var e=de.allowStateReads;return de.allowStateReads=r,e}function Go(r){de.allowStateReads=r}function A0(r){if(r.dependenciesState_!==it.UP_TO_DATE_){r.dependenciesState_=it.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=it.UP_TO_DATE_}}var PK=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],ac=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},cl=!0,k0=!1,de=function(){var r=hg();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(cl=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new ac().version&&(cl=!1),cl?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new ac):(setTimeout(function(){k0||Ne(35)},1),new ac)}();function TK(){if((de.pendingReactions.length||de.inBatch||de.isRunningReactions)&&Ne(36),k0=!0,cl){var r=hg();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),de=new ac}}function I0(){return de}function RK(){var r=new ac;for(var e in r)PK.indexOf(e)===-1&&(de[e]=r[e]);de.allowStateChanges=!de.enforceActions}function BK(r){return r.observers_&&r.observers_.size>0}function xK(r){return r.observers_}function CK(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function E0(r,e){r.observers_.delete(e),r.observers_.size===0&&O0(r)}function O0(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,de.pendingUnobservations.push(r))}function Zn(){de.inBatch===0&&(de.batchId=de.batchId<Number.MAX_SAFE_INTEGER?de.batchId+1:Number.MIN_SAFE_INTEGER),de.inBatch++}function er(){if(--de.inBatch===0){R0();for(var r=de.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof aa&&t.suspend_())}de.pendingUnobservations=[]}}function P0(r){var e=de.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&de.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&de.inBatch>0&&O0(r),!1)}function T0(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=it.STALE_}))}function MK(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.POSSIBLY_STALE_?e.dependenciesState_=it.STALE_:e.dependenciesState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.UP_TO_DATE_)}))}function LK(r){r.lowestObserverState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&(e.dependenciesState_=it.POSSIBLY_STALE_,e.onBecomeStale_())}))}var vc=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=it.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Il.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,de.pendingReactions.push(this),R0())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Zn(),this.isScheduled_=!1;var n=de.trackingContext;if(de.trackingContext=this,yp(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}de.trackingContext=n,er()}},e.track=function(n){if(!this.isDisposed_){Zn(),this.isRunning_=!0;var i=de.trackingContext;de.trackingContext=this;var s=S0(this,n,void 0);de.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&mp(this),al(s)&&this.reportExceptionInDerivation_(s.cause),er()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(de.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";de.suppressReactionErrors||console.error(s,n),de.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Zn(),mp(this),er()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[ke]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function KK(r){return de.globalReactionErrorHandlers.push(r),function(){var e=de.globalReactionErrorHandlers.indexOf(r);e>=0&&de.globalReactionErrorHandlers.splice(e,1)}}var NK=100,bp=function(e){return e()};function R0(){de.inBatch>0||de.isRunningReactions||bp(DK)}function DK(){de.isRunningReactions=!0;for(var r=de.pendingReactions,e=0;r.length>0;){++e===NK&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}de.isRunningReactions=!1}var Ol=vs("Reaction",vc);function UK(r){var e=bp;bp=function(n){return r(function(){return e(n)})}}function cc(){return!1}function B0(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var x0="action",FK="action.bound",C0="autoAction",zK="autoAction.bound",M0="<unnamed action>",vp=Dc(x0),VK=Dc(FK,{bound:!0}),_p=Dc(C0,{autoAction:!0}),WK=Dc(zK,{autoAction:!0,bound:!0});function L0(r){var e=function(n,i){if(Sr(n))return hs(n.name||M0,n,r);if(Sr(i))return hs(n,i,r);if(Kc(i))return(r?_p:vp).decorate_20223_(n,i);if(Hs(i))return Ia(n,i,r?_p:vp);if(Hs(n))return Zr(Dc(r?C0:x0,{name:n,autoAction:r}))};return e}var Wt=L0(!1);Object.assign(Wt,vp);var ca=L0(!0);Object.assign(ca,_p);Wt.bound=Zr(VK);ca.bound=Zr(WK);function _c(r){return m0(r.name||M0,!1,r,this,void 0)}function _s(r){return Sr(r)&&r.isMobxAction===!0}function Xs(r,e){var t,n,i,s,a;e===void 0&&(e=pg);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",d=!e.scheduler&&!e.delay,h;if(d)h=new vc(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var f=K0(e),m=!1;h=new vc(u,function(){m||(m=!0,f(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var $K=function(e){return e()};function K0(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:$K}function N0(r,e,t){var n,i,s,a;t===void 0&&(t=pg);var u=(n=t.name)!=null?n:"Reaction",d=Wt(u,t.onError?jK(t.onError,e):e),h=!t.scheduler&&!t.delay,f=K0(t),m=!0,I=!1,O,C,A=t.compareStructural?Ys.structural:t.equals||Ys.default,R=new vc(u,function(){m||h?M():I||(I=!0,f(M))},t.onError,t.requiresObservable);function M(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=oa(!1,function(){return r(R)});Y=m||!A(O,ae),C=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&d(O,C,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function jK(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var qK="onBO",GK="onBUO";function D0(r,e,t){return U0(qK,r,e,t)}function Fc(r,e,t){return U0(GK,r,e,t)}function U0(r,e,t,n){var i=typeof n=="function"?bi(e,t):bi(e),s=Sr(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var HK="never",ju="always",YK="observed";function QK(r){r.isolateGlobalState===!0&&TK();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(de.useProxies=e===ju?!0:e===HK?!1:typeof Proxy<"u"),e==="ifavailable"&&(de.verifyProxies=!0),t!==void 0){var n=t===ju?ju:t===YK;de.enforceActions=n,de.allowStateChanges=!(n===!0||n===ju)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(de[i]=!!r[i])}),de.allowStateReads=!de.observableRequiresReaction,r.reactionScheduler&&UK(r.reactionScheduler)}function kd(r,e,t,n){var i=RL(e);return Ss(function(){var s=lo(r,n)[ke];sa(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function JK(r,e){return F0(bi(r,e))}function F0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=ZK(r.observing_).map(F0)),e}function XK(r,e){return z0(bi(r,e))}function z0(r){var e={name:r.name_};return BK(r)&&(e.observers=Array.from(xK(r)).map(z0)),e}function ZK(r){return Array.from(new Set(r))}var eN=0;function Id(){this.message="FLOW_CANCELLED"}Id.prototype=Object.create(Error.prototype);function tN(r){return r instanceof Id}var Th=l0("flow"),nN=l0("flow.bound",{bound:!0}),Zs=Object.assign(function(e,t){if(Kc(t))return Th.decorate_20223_(e,t);if(Hs(t))return Ia(e,t,Th);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,d=arguments,h=++eN,f=Wt(i+" - runid: "+h+" - init",n).apply(u,d),m,I=void 0,O=new Promise(function(C,A){var R=0;m=A;function M(oe){I=void 0;var fe;try{fe=Wt(i+" - runid: "+h+" - yield "+R++,f.next).call(f,oe)}catch(E){return A(E)}ae(fe)}function Y(oe){I=void 0;var fe;try{fe=Wt(i+" - runid: "+h+" - yield "+R++,f.throw).call(f,oe)}catch(E){return A(E)}ae(fe)}function ae(oe){if(Sr(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?C(oe.value):(I=Promise.resolve(oe.value),I.then(M,Y))}M(void 0)});return O.cancel=Wt(i+" - runid: "+h+" - cancel",function(){try{I&&lv(I);var C=f.return(void 0),A=Promise.resolve(C.value);A.then(Uo,Uo),lv(A),m(new Id)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},Th);Zs.bound=Zr(nN);function lv(r){Sr(r.cancel)&&r.cancel()}function rN(r){return r}function ua(r){return(r==null?void 0:r.isMobXFlow)===!0}function iN(r,e,t){var n;return pn(r)||bn(r)||bg(r)?n=vi(r):fn(r)&&(n=vi(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function sN(r,e,t){return Sr(t)?aN(r,e,t):oN(r,e)}function oN(r,e){return vi(r).intercept_(e)}function aN(r,e,t){return vi(r,e).intercept_(t)}function V0(r,e){if(e===void 0)return Js(r);if(fn(r)===!1||!r[ke].values_.has(e))return!1;var t=bi(r,e);return Js(t)}function W0(r){return V0(r)}function ul(r,e){return V0(r,e)}function $0(r,e){return r?e!==void 0?fn(r)?r[ke].values_.has(e):!1:fn(r)||!!r[ke]||yg(r)||Ol(r)||Js(r):!1}function Ed(r){return $0(r)}function cN(r,e){return $0(r,e)}function la(r){if(fn(r))return r[ke].keys_();if(pn(r)||Vn(r))return Array.from(r.keys());if(bn(r))return r.map(function(e,t){return t});Ne(5)}function j0(r){if(fn(r))return la(r).map(function(e){return r[e]});if(pn(r))return la(r).map(function(e){return r.get(e)});if(Vn(r))return Array.from(r.values());if(bn(r))return r.slice();Ne(6)}function q0(r){if(fn(r))return la(r).map(function(e){return[e,r[e]]});if(pn(r))return la(r).map(function(e){return[e,r.get(e)]});if(Vn(r))return Array.from(r.entries());if(bn(r))return r.map(function(e,t){return[t,e]});Ne(7)}function G0(r,e,t){if(arguments.length===2&&!Vn(r)){Zn();var n=e;try{for(var i in n)G0(r,i,n[i])}finally{er()}return}fn(r)?r[ke].set_(e,t):pn(r)?r.set(e,t):Vn(r)?r.add(e):bn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ne("Invalid index: '"+e+"'"),Zn(),e>=r.length&&(r.length=e+1),r[e]=t,er()):Ne(8)}function uN(r,e){fn(r)?r[ke].delete_(e):pn(r)||Vn(r)?r.delete(e):bn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ne(9)}function H0(r,e){if(fn(r))return r[ke].has_(e);if(pn(r))return r.has(e);if(Vn(r))return r.has(e);if(bn(r))return e>=0&&e<r.length;Ne(10)}function lN(r,e){if(!!H0(r,e)){if(fn(r))return r[ke].get_(e);if(pn(r))return r.get(e);if(bn(r))return r[e];Ne(11)}}function dN(r,e,t){if(fn(r))return r[ke].defineProperty_(e,t);Ne(39)}function Y0(r){if(fn(r))return r[ke].ownKeys_();Ne(38)}function da(r,e,t,n){return Sr(t)?hN(r,e,t,n):fN(r,e,t)}function fN(r,e,t){return vi(r).observe_(e,t)}function hN(r,e,t,n){return vi(r,e).observe_(t,n)}function qu(r,e,t){return r.set(e,t),t}function xo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!Ed(r))return r;if(bg(r)||Js(r))return xo(r.get(),e);if(e.has(r))return e.get(r);if(bn(r)){var t=qu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=xo(a,e)}),t}if(Vn(r)){var n=qu(e,r,new Set);return r.forEach(function(a){n.add(xo(a,e))}),n}if(pn(r)){var i=qu(e,r,new Map);return r.forEach(function(a,u){i.set(u,xo(a,e))}),i}else{var s=qu(e,r,{});return Y0(r).forEach(function(a){Cc.propertyIsEnumerable.call(r,a)&&(s[a]=xo(r[a],e))}),s}}function pN(r,e){return xo(r,new Map)}function gN(){}function Ur(r,e){e===void 0&&(e=void 0),Zn();try{return r.apply(e)}finally{er()}}function yN(r,e,t){return arguments.length===1||e&&typeof e=="object"?mN(r,e):Q0(r,e,t||{})}function Q0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[ke].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=hs("When-effect",e),a=Xs(function(u){var d=oa(!1,r);d&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function mN(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var d,h=Q0(r,a,fs({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(d=e.signal)==null||d.addEventListener==null||d.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function Po(r){return r[ke]}var bN={has:function(e,t){return Po(e).has_(t)},get:function(e,t){return Po(e).get_(t)},set:function(e,t,n){var i;return Hs(t)?(i=Po(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return Hs(t)?(n=Po(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=Po(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return Po(e).ownKeys_()},preventExtensions:function(e){Ne(13)}};function vN(r,e){var t,n;return t0(),r=lo(r,e),(n=(t=r[ke]).proxy_)!=null?n:t.proxy_=new Proxy(r,bN)}function Fr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function zc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),n0(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function zr(r,e){var t=uo();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ne(14),!!e);i++);return e}finally{Di(t)}}function ei(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Vc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),n0(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function ti(r,e){var t=uo(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Di(t)}}function _g(r,e,t){return Ss(function(){var n,i=lo(r,t)[ke];(n=e)!=null||(e=ML(r)),sa(e).forEach(function(s){return i.make_(s,e[s])})}),r}var Rh=Symbol("mobx-keys");function _N(r,e,t){return Ui(r)?kd(r,r,e,t):(Ss(function(){var n=lo(r,t)[ke];if(!r[Rh]){var i=Object.getPrototypeOf(r),s=new Set([].concat(sa(r),sa(i)));s.delete("constructor"),s.delete(ke),Mc(i,Rh,s)}r[Rh].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var dv="splice",mi="update",wN=1e4,SN={get:function(e,t){var n=e[ke];return t===ke?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Ni(Pl,t)?Pl[t]:e[t]},set:function(e,t,n){var i=e[ke];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ne(15)}},wg=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new Nc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return zc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Vc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ne("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ne(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&sS(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=fp),Fr(this)){var d=zr(this,{object:this.proxy_,type:dv,index:n,removedCount:i,added:s});if(!d)return fp;i=d.removedCount,s=d.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var f=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,f),this.dehanceValues_(f)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<wN){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),d=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var f=0;f<d.length;f++)this.values_[n+s.length+f]=d[f];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&cc(),u=ei(this),d=u||a?{observableKind:"array",object:this.proxy_,type:mi,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&ti(this,d)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&cc(),u=ei(this),d=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:dv,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&ti(this,d)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ne(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Fr(this)){var u=zr(this,{type:mi,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var d=i!==a;d&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),f=0;f<h.length-1;f++)h[f]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function AN(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),t0(),Ss(function(){var i=new wg(t,e,n,!1);i0(i.values_,ke,i);var s=new Proxy(i.values_,SN);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var Pl={clear:function(){return this.splice(0)},replace:function(e){var t=this[ke];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[ke];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[ke].spliceWithArray_(e,t,n)},push:function(){for(var e=this[ke],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[ke].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ke],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return de.trackingDerivation&&Ne(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){de.trackingDerivation&&Ne(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[ke],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};hn("concat",zi);hn("flat",zi);hn("includes",zi);hn("indexOf",zi);hn("join",zi);hn("lastIndexOf",zi);hn("slice",zi);hn("toString",zi);hn("toLocaleString",zi);hn("every",ws);hn("filter",ws);hn("find",ws);hn("findIndex",ws);hn("flatMap",ws);hn("forEach",ws);hn("map",ws);hn("some",ws);hn("reduce",J0);hn("reduceRight",J0);function hn(r,e){typeof Array.prototype[r]=="function"&&(Pl[r]=e(r))}function zi(r){return function(){var e=this[ke];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function ws(r){return function(e,t){var n=this,i=this[ke];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function J0(r){return function(){var e=this,t=this[ke];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var kN=vs("ObservableArrayAdministration",wg);function bn(r){return md(r)&&kN(r[ke])}var X0,Z0,IN={},is="add",Tl="delete";X0=Symbol.iterator;Z0=Symbol.toStringTag;var Od=function(){function r(t,n,i){var s=this;n===void 0&&(n=Qs),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ke]=IN,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,Sr(Map)||Ne(18),Ss(function(){s.keysAtom_=bd("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!de.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new as(this.has_(n),vd,"ObservableMap.key?",!1);this.hasMap_.set(n,a),Fc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Fr(this)){var a=zr(this,{type:s?mi:is,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Fr(this)){var s=zr(this,{type:Tl,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=cc(),u=ei(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:Tl,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Ur(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var f=i.data_.get(n);f.setNewValue_(void 0),i.data_.delete(n)}),u&&ti(this,d),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==de.UNCHANGED){var a=cc(),u=ei(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:mi,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&ti(this,d)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Ur(function(){var h,f=new as(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,f),i=f.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=cc(),u=ei(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:is,object:this,name:n,newValue:i}:null;u&&ti(this,d)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return wc({next:function(){var a=i.next(),u=a.done,d=a.value;return{done:u,value:u?void 0:n.get(d)}}})},e.entries=function(){var n=this,i=this.keys();return wc({next:function(){var a=i.next(),u=a.done,d=a.value;return{done:u,value:u?void 0:[d,n.get(d)]}}})},e[X0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=Fo(this),a;!(a=s()).done;){var u=a.value,d=u[0],h=u[1];n.call(i,h,d,this)}},e.merge=function(n){var i=this;return pn(n)&&(n=new Map(n)),Ur(function(){Ui(n)?TL(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):ka(n)?(n.constructor!==Map&&Ne(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ne(20,n)}),this},e.clear=function(){var n=this;Ur(function(){vg(function(){for(var i=Fo(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Ur(function(){for(var s=EN(n),a=new Map,u=!1,d=Fo(i.data_.keys()),h;!(h=d()).done;){var f=h.value;if(!s.has(f)){var m=i.delete(f);if(m)u=!0;else{var I=i.data_.get(f);a.set(f,I)}}}for(var O=Fo(s.entries()),C;!(C=O()).done;){var A=C.value,R=A[0],M=A[1],Y=i.data_.has(R);if(i.set(R,M),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),fe=a.keys(),E=oe.next(),N=fe.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=fe.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return zc(this,n)},gg(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Z0,get:function(){return"Map"}}]),r}(),pn=vs("ObservableMap",Od);function EN(r){if(ka(r)||pn(r))return r;if(Array.isArray(r))return new Map(r);if(Ui(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ne(21,r)}var eS,tS,ON={};eS=Symbol.iterator;tS=Symbol.toStringTag;var Sg=function(){function r(t,n,i){var s=this;n===void 0&&(n=Qs),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[ke]=ON,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Sr(Set)||Ne(22),this.enhancer_=function(a,u){return n(a,u,i)},Ss(function(){s.atom_=bd(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Ur(function(){vg(function(){for(var i=Fo(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=Fo(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Fr(this)){var s=zr(this,{type:is,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Ur(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=ei(this),d=u||a?{observableKind:"set",debugObjectName:this.name_,type:is,object:this,newValue:n}:null;u&&ti(this,d)}return this},e.delete=function(n){var i=this;if(Fr(this)){var s=zr(this,{type:Tl,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=ei(this),d=u||a?{observableKind:"set",debugObjectName:this.name_,type:Tl,object:this,oldValue:n}:null;return Ur(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&ti(this,d),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return wc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return wc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Vn(n)&&(n=new Set(n)),Ur(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):Lc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ne("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return zc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[eS]=function(){return this.values()},gg(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:tS,get:function(){return"Set"}}]),r}(),Vn=vs("ObservableSet",Sg),fv=Object.create(null),hv="remove",nS=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=uK),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new Nc("ObservableObject.keys"),this.isPlainObject_=Ui(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof aa)return s.set(i),!0;if(Fr(this)){var a=zr(this,{type:mi,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==de.UNCHANGED){var u=ei(this),d=!1,h=u||d?{type:mi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&ti(this,h)}return!0},e.get_=function(n){return de.trackingDerivation&&!Ni(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Ni(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!de.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new as(n in this.target_,vd,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[gi])!=null&&s[n])return;Ne(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==Cc;){var u=Al(a,n);if(u){var d=i.make_(this,n,u,a);if(d===0)return;if(d===1)break}a=Object.getPrototypeOf(a)}gv(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&gv(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Zn();var a=this.delete_(n);if(!a)return a;if(Fr(this)){var u=zr(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:i.value});if(!u)return null;var d=u.newValue;i.value!==d&&(i=fs({},i,{value:d}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else yi(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{er()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{Zn();var u=this.delete_(n);if(!u)return u;if(Fr(this)){var d=zr(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:i});if(!d)return null;i=d.newValue}var h=pv(n),f={configurable:de.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,f))return!1}else yi(this.target_,n,f);var m=new as(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{er()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Zn();var a=this.delete_(n);if(!a)return a;if(Fr(this)){var u=zr(this,{object:this.proxy_||this.target_,name:n,type:is,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var d=pv(n),h={configurable:de.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:d.get,set:d.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else yi(this.target_,n,h);this.values_.set(n,new aa(i)),this.notifyPropertyAddition_(n,void 0)}finally{er()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Ni(this.target_,n))return!0;if(Fr(this)){var s=zr(this,{object:this.proxy_||this.target_,name:n,type:hv});if(!s)return null}try{var a,u;Zn();var d=ei(this),h=!1,f=this.values_.get(n),m=void 0;if(!f&&(d||h)){var I;m=(I=Al(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(f&&(this.values_.delete(n),f instanceof as&&(m=f.value_),T0(f)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),d||h){var O={type:hv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};d&&ti(this,O)}}finally{er()}return!0},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return zc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=ei(this),d=!1;if(u||d){var h=u||d?{type:is,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&ti(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),sa(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function lo(r,e){var t;if(Ni(r,ke))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new nS(r,new Map,String(n),_K(e));return Mc(r,ke,i),r}var PN=vs("ObservableObjectAdministration",nS);function pv(r){return fv[r]||(fv[r]={get:function(){return this[ke].getObservablePropValue_(r)},set:function(t){return this[ke].setObservablePropValue_(r,t)}})}function fn(r){return md(r)?PN(r[ke]):!1}function gv(r,e,t){var n;(n=r.target_[gi])==null||delete n[t]}var TN=iS(0),RN=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),Bh=0,rS=function(){};function BN(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}BN(rS,Array.prototype);var Ag=function(r,e,t){a0(n,r);function n(s,a,u,d){var h;return u===void 0&&(u="ObservableArray"),d===void 0&&(d=!1),h=r.call(this)||this,Ss(function(){var f=new wg(u,a,d,!0);f.proxy_=Ph(h),i0(Ph(h),ke,f),s&&s.length&&h.spliceWithArray(0,0,s),RN&&Object.defineProperty(Ph(h),"0",TN)}),h}var i=n.prototype;return i.concat=function(){this[ke].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return bn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return wc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},gg(n,[{key:"length",get:function(){return this[ke].getArrayLength_()},set:function(a){this[ke].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(rS,Symbol.toStringTag,Symbol.iterator);Object.entries(Pl).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&Mc(Ag.prototype,e,t)});function iS(r){return{enumerable:!1,configurable:!0,get:function(){return this[ke].get_(r)},set:function(t){this[ke].set_(r,t)}}}function xN(r){yi(Ag.prototype,""+r,iS(r))}function sS(r){if(r>Bh){for(var e=Bh;e<r+100;e++)xN(e);Bh=r}}sS(1e3);function CN(r,e,t){return new Ag(r,e,t)}function bi(r,e){if(typeof r=="object"&&r!==null){if(bn(r))return e!==void 0&&Ne(23),r[ke].atom_;if(Vn(r))return r.atom_;if(pn(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ne(25,e,Rl(r)),t}if(fn(r)){if(!e)return Ne(26);var n=r[ke].values_.get(e);return n||Ne(27,e,Rl(r)),n}if(yg(r)||Js(r)||Ol(r))return r}else if(Sr(r)&&Ol(r[ke]))return r[ke];Ne(28)}function vi(r,e){if(r||Ne(29),e!==void 0)return vi(bi(r,e));if(yg(r)||Js(r)||Ol(r)||pn(r)||Vn(r))return r;if(r[ke])return r[ke];Ne(24,r)}function Rl(r,e){var t;if(e!==void 0)t=bi(r,e);else{if(_s(r))return r.name;fn(r)||pn(r)||Vn(r)?t=vi(r):t=bi(r)}return t.name_}function Ss(r){var e=uo(),t=wd(!0);Zn();try{return r()}finally{er(),Sd(t),Di(e)}}var yv=Cc.toString;function kg(r,e,t){return t===void 0&&(t=-1),wp(r,e,t)}function wp(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=yv.call(r);if(a!==yv.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=mv(r),e=mv(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var d=r.constructor,h=e.constructor;if(d!==h&&!(Sr(d)&&d instanceof d&&Sr(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var f=n.length;f--;)if(n[f]===r)return i[f]===e;if(n.push(r),i.push(e),u){if(f=r.length,f!==e.length)return!1;for(;f--;)if(!wp(r[f],e[f],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(f=m.length,Object.keys(e).length!==f)return!1;for(;f--;)if(I=m[f],!(Ni(e,I)&&wp(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function mv(r){return bn(r)?r.slice():ka(r)||pn(r)||Lc(r)||Vn(r)?Array.from(r.entries()):r}function wc(r){return r[Symbol.iterator]=MN,r}function MN(){return this}["Symbol","Map","Set"].forEach(function(r){var e=hg();typeof e[r]>"u"&&Ne("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:B0,extras:{getDebugName:Rl},$mobx:ke});var LN=Object.freeze(Object.defineProperty({__proto__:null,$mobx:ke,FlowCancellationError:Id,ObservableMap:Od,ObservableSet:Sg,Reaction:vc,_allowStateChanges:oa,_allowStateChangesInsideComputed:_c,_allowStateReadsEnd:Go,_allowStateReadsStart:Ad,_autoAction:ca,_endAction:v0,_getAdministration:vi,_getGlobalState:I0,_interceptReads:iN,_isComputingDerivation:Uc,_resetGlobalState:RK,_startAction:b0,action:Wt,autorun:Xs,comparer:Ys,computed:Vr,configure:QK,createAtom:bd,defineProperty:dN,entries:q0,extendObservable:kd,flow:Zs,flowResult:rN,get:lN,getAtom:bi,getDebugName:Rl,getDependencyTree:JK,getObserverTree:XK,has:H0,intercept:sN,isAction:_s,isBoxedObservable:bg,isComputed:W0,isComputedProp:ul,isFlow:ua,isFlowCancellationError:tN,isObservable:Ed,isObservableArray:bn,isObservableMap:pn,isObservableObject:fn,isObservableProp:cN,isObservableSet:Vn,keys:la,makeAutoObservable:_N,makeObservable:_g,observable:Ct,observe:da,onBecomeObserved:D0,onBecomeUnobserved:Fc,onReactionError:KK,override:zL,ownKeys:Y0,reaction:N0,remove:uN,runInAction:_c,set:G0,spy:B0,toJS:pN,trace:gN,transaction:Ur,untracked:vg,values:j0,when:yN},Symbol.toStringTag,{value:"Module"})),oS=kc(LN);(function(r){var e=z&&z.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=bt,n=e(Zw.exports),i=oS;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(d){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,d&&(this.id=d.id,this.orderType=d.orderType,this.orderMint=d.orderMint,this.currencyMint=d.currencyMint,this.currencyDecimals=d.currencyDecimals,this.price=d.price,this.orderQtyRemaining=d.orderQtyRemaining,this.orderOriginationQty=d.orderOriginationQty,this.owner=d.owner,this.ownerAssetTokenAccount=d.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=d.ownerCurrencyTokenAccount,this.createdAt=d.createdAt,this.slotContext=d.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(d=1){return this.bigNumberPrice.mul(d).div(this.decimalDivisor).toNumber()}}r.Order=a})(yd);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(yd,r)})(gd);var KN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(pd,"__esModule",{value:!0});pd.createExchangeInstruction=void 0;const Gu=bt,Hu=Fi,NN=sr,bv=ms,DN=ms,xh=$r,Ch=gd;function UN({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:d,currencyMint:h,orderInitializer:f,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:C,extraAccounts:A=[]}){return KN(this,void 0,void 0,function*(){const R=(0,NN.getMarketplaceProgram)({connection:r,programId:s}),M={signers:[],instructions:[]},Y=u===Ch.OrderSide.Sell?new Hu.PublicKey(d):new Hu.PublicKey(h),ae=u===Ch.OrderSide.Sell?new Hu.PublicKey(h):new Hu.PublicKey(d);let oe=null,fe=null,E=null,N=yield(0,xh.getTokenAccount)(r,f,Y,n);"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof Gu.web3.Keypair?(oe=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,xh.getTokenAccount)(r,f,ae,n),"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof Gu.web3.Keypair?(fe=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):fe=N.tokenAccount):fe=N.tokenAccount;const[W]=yield(0,bv.getOrderVault)(f,Y,s),[Q]=yield(0,DN.getOpenOrdersCounter)(f,Y,s);N=yield(0,xh.getTokenAccount)(r,n,Y),"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof Gu.web3.Keypair?(E=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===Ch.OrderSide.Buy?n:f,[j]=yield(0,bv.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Gu.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:d,orderInitializer:f,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:fe,orderVaultAccount:W,orderAccount:e,openOrdersCounter:Q,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:C,feeReduction:j}).remainingAccounts(A).instruction();return M.instructions.push(te),M})}pd.createExchangeInstruction=UN;var Pd={},FN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.createInitializeMarketInstruction=void 0;const zN=sr;function VN({connection:r,updateAuthorityAccount:e,programId:t}){return FN(this,void 0,void 0,function*(){const i=[yield(0,zN.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}Pd.createInitializeMarketInstruction=VN;var Td={},WN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Td,"__esModule",{value:!0});Td.createRegisterCurrencyInstruction=void 0;const $N=bt,jN=sr;function qN({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return WN(this,void 0,void 0,function*(){const u=[yield(0,jN.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new $N.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}Td.createRegisterCurrencyInstruction=qN;var cs={},Ig=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(cs,"__esModule",{value:!0});cs.updateRoyaltyTier=cs.deleteRoyaltyTier=cs.addRoyaltyTier=void 0;const Sc=bt,Eg=sr;function GN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Ig(this,void 0,void 0,function*(){const a=(0,Eg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},d=yield a.methods.addRoyaltyTier(new Sc.BN(n),new Sc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(d),u})}cs.addRoyaltyTier=GN;function HN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return Ig(this,void 0,void 0,function*(){const s=(0,Eg.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new Sc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}cs.deleteRoyaltyTier=HN;function YN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Ig(this,void 0,void 0,function*(){const a=(0,Eg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},d=yield a.methods.updateRoyaltyTier(new Sc.BN(n),new Sc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(d),u})}cs.updateRoyaltyTier=YN;var fa={},aS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(fa,"__esModule",{value:!0});fa.createUpdateRegisteredCurrencyVaultInstruction=fa.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const QN=bt,cS=sr;function JN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return aS(this,void 0,void 0,function*(){return[yield(0,cS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new QN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}fa.createUpdateRegisteredCurrencyRoyaltyInstruction=JN;function XN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return aS(this,void 0,void 0,function*(){return[yield(0,cS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}fa.createUpdateRegisteredCurrencyVaultInstruction=XN;var ha={},uS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ha,"__esModule",{value:!0});ha.createRemoveFeeExemptionInstruction=ha.createAddFeeExemptionInstruction=void 0;const ZN=bt,lS=sr,Bl=ms;function eD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return uS(this,void 0,void 0,function*(){const s=(0,lS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[d]=yield(0,Bl.getFeeExemptAccount)(n,i),[h]=yield(0,Bl.getMarketVarsAccount)(i),f=[yield s.methods.addFeeExemption(new ZN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:d,marketVarsAccount:h}).instruction()];return a.instructions.push(...f),a})}ha.createAddFeeExemptionInstruction=eD;function tD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return uS(this,void 0,void 0,function*(){const s=(0,lS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,Bl.getFeeExemptAccount)(n,i),[d]=yield(0,Bl.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:d}).instruction()];return a.instructions.push(...h),a})}ha.createRemoveFeeExemptionInstruction=tD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t($w,r),t(ld,r),t(ia,r),t(hd,r),t(pd,r),t(Pd,r),t(Td,r),t(cs,r),t(fa,r),t(ha,r)})(lg);var Ea={},dS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(dS);var fS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(fS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Bc,r),t(dS,r),t(fS,r)})(Ea);var hS={},Rd={},pS=function(){},nD=function(r){return r};function gS(r){throw new Error("[mobx-utils] "+r)}function ps(r,e){e===void 0&&(e="Illegal state"),r||gS(e)}function yS(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var mS=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(mS(Object.getPrototypeOf(r))||[])},rD=function(r){var e=mS(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},Sp=function(r){return rD(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},xl="pending",Ac="fulfilled",Bd="rejected";function iD(r){switch(this.state){case xl:return r.pending&&r.pending(this.value);case Bd:return r.rejected&&r.rejected(this.value);case Ac:return r.fulfilled?r.fulfilled(this.value):this.value}}function Ap(r,e){if(ps(arguments.length<=2,"fromPromise expects up to two arguments"),ps(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Wt("observableFromPromise-resolve",function(i){t.value=i,t.state=Ac}),Wt("observableFromPromise-reject",function(i){t.value=i,t.state=Bd})),t.isPromiseBasedObservable=!0,t.case=iD;var n=e&&(e.state===Ac||e.state===xl)?e.value:void 0;return kd(t,{value:n,state:xl},{},{deep:!1}),t}(function(r){r.reject=Wt("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=Bd,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=Ac,n.value=t,n}r.resolve=Wt("fromPromise.resolve",e)})(Ap||(Ap={}));function sD(r){return r&&r.isPromiseBasedObservable===!0}var vv=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function oD(r,e,t){if(_v(r,e),_v(r,t),e!==t){var n=r.slice(),i;return e<t?i=vv(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=vv(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function _v(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function aD(r,e){e===void 0&&(e=void 0);var t=!1,n=Ct.box(e,{deep:!1}),i=Ct.box(!1),s=function(){return t||(t=!0,oa(!0,function(){i.set(!0)}),r(function(u){oa(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Wt("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function Og(r,e,t){e===void 0&&(e=pS),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=bd("ResourceBasedObservable",function(){ps(!n&&!i),n=!0,r(function(d){oa(!0,function(){s=d,u.reportChanged()})})},a);return{current:function(){ps(!i,"subscribingObservable has already been disposed");var d=u.reportObserved();return!d&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var Yu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function cD(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function uD(r,e){var t;e===void 0&&(e=!1);var n=Vr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:da(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:da(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[cD()]=function(){return this},t}var lD=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),_g(this),_c(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),Yu([Ct.ref],r.prototype,"current",void 0),Yu([Wt.bound],r.prototype,"next",null),Yu([Wt.bound],r.prototype,"complete",null),Yu([Wt.bound],r.prototype,"error",null),r}();function dD(r,e){return e===void 0&&(e=void 0),new lD(r,e)}var Cl=function(){return Cl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cl.apply(this,arguments)},Ga=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fD=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],bS=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:Ct.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:Ct.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),_g(this),ps(fn(e),"createViewModel expects an observable object");var n=Sp(this);Sp(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===ke||i==="__mobxDidRunLazyInitializers")){if(ps(fD.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),ul(e,i)){var a=vi(e,i),u=a.derivation.bind(t),d=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Vr(u,{set:d}))}var h=Object.getOwnPropertyDescriptor(e,i),f=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,Cl(Cl({},f),{configurable:!0,get:function(){return ul(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Wt(function(m){ul(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;la(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];bn(i)?i.replace(n):pn(i)?(i.clear(),i.merge(n)):W0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Ga([Vr],r.prototype,"isDirty",null),Ga([Vr],r.prototype,"changedValues",null),Ga([Wt.bound],r.prototype,"submit",null),Ga([Wt.bound],r.prototype,"reset",null),Ga([Wt.bound],r.prototype,"resetProperty",null),r}();function hD(r){return new bS(r)}function pD(r,e){var t=bi(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return da(t,function(){})}function gD(r,e,t){if(t===void 0&&(t=0),!bn(r))throw new Error("Expected observable array as first argument");_s(e)||(e=Wt("queueProcessor",e));var n=function(){var i=r.slice(0);_c(function(){return r.splice(0)}),i.forEach(e)};return t>0?Xs(n,{delay:t}):Xs(n)}function yD(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!bn(r))throw new Error("Expected observable array as first argument");_s(e)||(e=Wt("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);_c(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Xs(i,{delay:t}):Xs(i)}var Fs={};function mD(){for(var r=0,e=Object.getOwnPropertyNames(Fs);r<e.length;r++){var t=e[r];Fs[t].dispose(),delete Fs[t]}}function bD(r){return r===void 0&&(r=1e3),Uc()?(Fs[r]||(typeof r=="number"?Fs[r]=vD(r):Fs[r]=_D()),Fs[r].current()):Date.now()}function vD(r){var e;return Og(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function _D(){var r=Og(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function wD(r){return Uc()||console.warn("'expr' should only be used inside other reactive functions."),Vr(r).get()}var Ml=function(){return Ml=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ml.apply(this,arguments)},SD=0;function AD(r,e){ps(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(d,h){var f,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+d,O=Vr(function(){return f=r(h)},Ml(Ml({},m),{name:I}));if(!i)var C=Fc(O,function(){delete t[d],C(),n&&n(f,h)});return O}var u=!1;return function(d){var h=kD(d),f=t[h];if(f)return f.get();if(!i&&!Uc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(d);return n&&n(m,d),m}return f=t[h]=a(h,d),f.get()}}function kD(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++SD,yS(r,"$transformId",t)),t}function Mh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function Lh(r){return fn(r)||bn(r)||pn(r)}function ID(r,e){var t=new WeakMap;function n(u){var d=t.get(u.object);i(u,d),e(u,Mh(d),r)}function i(u,d){switch(u.type){case"add":s(u.newValue,d,u.name);break;case"update":a(u.oldValue),s(u.newValue,d,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,d,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(Lh(u.object[h])){var f=t.get(u.object[h]);f&&(f.path=""+h)}break}}function s(u,d,h){if(Lh(u)){var f=t.get(u);if(f){if(f.parent!==d||f.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+Mh(d)+"/"+h+"',")+(" but it already exists at '"+Mh(f.parent)+"/"+f.path+"'"))}else{var m={parent:d,path:h,dispose:da(u,n)};t.set(u,m),q0(u).forEach(function(I){var O=I[0],C=I[1];return s(C,m,O)})}}}function a(u){if(Lh(u)){var d=t.get(u);if(!d)return;t.delete(u),d.dispose(),j0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var ED=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),OD=function(r){ED(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,d=s.keyToName,h=d===void 0?function(I){return""+I}:d,f=r.call(this)||this;Object.defineProperty(f,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),f._keyToName=h,f._groupBy=n,f._ogmInfoKey=Symbol("ogmInfo"+u),f._base=t;for(var m=0;m<t.length;m++)f._addItem(t[m]);return f._disposeBaseObserver=da(f._base,function(I){if(I.type==="splice")Ur(function(){for(var O=0,C=I.removed;O<C.length;O++){var A=C[O];f._removeItem(A)}for(var R=0,M=I.added;R<M.length;R++){var Y=M[R];f._addItem(Y)}});else if(I.type==="update")Ur(function(){f._removeItem(I.oldValue),f._addItem(I.newValue)});else throw new Error("illegal state")}),f}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=Ct([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:N0(function(){return n._groupBy(t)},function(u,d){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var f=n._getGroupArr(u),m=f.length;f.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(Od),PD=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),TD=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new PD(this.store,e)}}),r}(),Ll=function(){return Ll=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ll.apply(this,arguments)},RD=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function BD(r,e){if(e===void 0&&(e=!1),_s(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new TD;return function(){for(var a=this,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!Uc())return!t&&I0().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var f,m=Vr(function(){return f=r.apply(a,u)},Ll(Ll({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||Fc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,RD([f],u)),f=void 0}),m.get()}}var xD=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:Ac,IDENTITY:nD,NOOP:pS,ObservableGroupMap:OD,PENDING:xl,REJECTED:Bd,ViewModel:bS,addHiddenProp:yS,chunkProcessor:yD,computedFn:BD,createTransformer:AD,createViewModel:hD,deepObserve:ID,expr:wD,fail:gS,get fromPromise(){return Ap},fromResource:Og,fromStream:dD,getAllMethodsAndProperties:Sp,invariant:ps,isPromiseBasedObservable:sD,keepAlive:pD,lazyObservable:aD,moveItem:oD,now:bD,queueProcessor:gD,resetNowInternalState:mD,toStream:uD},Symbol.toStringTag,{value:"Module"})),CD=kc(xD),Kl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",m=1,I=2,O=4,C=1,A=2,R=1,M=2,Y=4,ae=8,oe=16,fe=32,E=64,N=128,W=256,Q=512,K=30,j="...",te=800,T=16,V=1,X=2,Ce=3,me=1/0,Oe=9007199254740991,Yt=17976931348623157e292,Qt=0/0,we=4294967295,je=we-1,sn=we>>>1,gn=[["ary",N],["bind",R],["bindKey",M],["curry",ae],["curryRight",oe],["flip",Q],["partial",fe],["partialRight",E],["rearg",W]],Ot="[object Arguments]",pt="[object Array]",kr="[object AsyncFunction]",$t="[object Boolean]",En="[object Date]",si="[object DOMException]",Ir="[object Error]",or="[object Function]",Si="[object GeneratorFunction]",vn="[object Map]",ks="[object Number]",Yd="[object Null]",ar="[object Object]",qc="[object Promise]",Qd="[object Proxy]",Vi="[object RegExp]",On="[object Set]",Pn="[object String]",Wi="[object Symbol]",Jd="[object Undefined]",Wn="[object WeakMap]",Xd="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",Ue="[object Uint8Array]",St="[object Uint8ClampedArray]",gt="[object Uint16Array]",At="[object Uint32Array]",dt=/\b__p \+= '';/g,CS=/\b(__p \+=) '' \+/g,MS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rg=/&(?:amp|lt|gt|quot|#39);/g,Bg=/[&<>"']/g,LS=RegExp(Rg.source),KS=RegExp(Bg.source),NS=/<%-([\s\S]+?)%>/g,DS=/<%([\s\S]+?)%>/g,xg=/<%=([\s\S]+?)%>/g,US=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FS=/^\w*$/,zS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zd=/[\\^$.*+?()[\]{}|]/g,VS=RegExp(Zd.source),ef=/^\s+/,WS=/\s/,$S=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jS=/\{\n\/\* \[wrapped with (.+)\] \*/,qS=/,? & /,GS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,HS=/[()=,{}\[\]\/\s]/,YS=/\\(\\)?/g,QS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cg=/\w*$/,JS=/^[-+]0x[0-9a-f]+$/i,XS=/^0b[01]+$/i,ZS=/^\[object .+?Constructor\]$/,eA=/^0o[0-7]+$/i,tA=/^(?:0|[1-9]\d*)$/,nA=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gc=/($^)/,rA=/['\n\r\u2028\u2029\\]/g,Hc="\\ud800-\\udfff",iA="\\u0300-\\u036f",sA="\\ufe20-\\ufe2f",oA="\\u20d0-\\u20ff",Mg=iA+sA+oA,Lg="\\u2700-\\u27bf",Kg="a-z\\xdf-\\xf6\\xf8-\\xff",aA="\\xac\\xb1\\xd7\\xf7",cA="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",uA="\\u2000-\\u206f",lA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ng="A-Z\\xc0-\\xd6\\xd8-\\xde",Dg="\\ufe0e\\ufe0f",Ug=aA+cA+uA+lA,tf="['\u2019]",dA="["+Hc+"]",Fg="["+Ug+"]",Yc="["+Mg+"]",zg="\\d+",fA="["+Lg+"]",Vg="["+Kg+"]",Wg="[^"+Hc+Ug+zg+Lg+Kg+Ng+"]",nf="\\ud83c[\\udffb-\\udfff]",hA="(?:"+Yc+"|"+nf+")",$g="[^"+Hc+"]",rf="(?:\\ud83c[\\udde6-\\uddff]){2}",sf="[\\ud800-\\udbff][\\udc00-\\udfff]",fo="["+Ng+"]",jg="\\u200d",qg="(?:"+Vg+"|"+Wg+")",pA="(?:"+fo+"|"+Wg+")",Gg="(?:"+tf+"(?:d|ll|m|re|s|t|ve))?",Hg="(?:"+tf+"(?:D|LL|M|RE|S|T|VE))?",Yg=hA+"?",Qg="["+Dg+"]?",gA="(?:"+jg+"(?:"+[$g,rf,sf].join("|")+")"+Qg+Yg+")*",yA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jg=Qg+Yg+gA,bA="(?:"+[fA,rf,sf].join("|")+")"+Jg,vA="(?:"+[$g+Yc+"?",Yc,rf,sf,dA].join("|")+")",_A=RegExp(tf,"g"),wA=RegExp(Yc,"g"),of=RegExp(nf+"(?="+nf+")|"+vA+Jg,"g"),SA=RegExp([fo+"?"+Vg+"+"+Gg+"(?="+[Fg,fo,"$"].join("|")+")",pA+"+"+Hg+"(?="+[Fg,fo+qg,"$"].join("|")+")",fo+"?"+qg+"+"+Gg,fo+"+"+Hg,mA,yA,zg,bA].join("|"),"g"),AA=RegExp("["+jg+Hc+Mg+Dg+"]"),kA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IA=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EA=-1,Pt={};Pt[y]=Pt[k]=Pt[L]=Pt[$]=Pt[Z]=Pt[Ue]=Pt[St]=Pt[gt]=Pt[At]=!0,Pt[Ot]=Pt[pt]=Pt[v]=Pt[$t]=Pt[g]=Pt[En]=Pt[Ir]=Pt[or]=Pt[vn]=Pt[ks]=Pt[ar]=Pt[Vi]=Pt[On]=Pt[Pn]=Pt[Wn]=!1;var kt={};kt[Ot]=kt[pt]=kt[v]=kt[g]=kt[$t]=kt[En]=kt[y]=kt[k]=kt[L]=kt[$]=kt[Z]=kt[vn]=kt[ks]=kt[ar]=kt[Vi]=kt[On]=kt[Pn]=kt[Wi]=kt[Ue]=kt[St]=kt[gt]=kt[At]=!0,kt[Ir]=kt[or]=kt[Wn]=!1;var OA={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},PA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TA={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},RA={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},BA=parseFloat,xA=parseInt,Xg=typeof z=="object"&&z&&z.Object===Object&&z,CA=typeof self=="object"&&self&&self.Object===Object&&self,_n=Xg||CA||Function("return this")(),af=e&&!e.nodeType&&e,Is=af&&!0&&r&&!r.nodeType&&r,Zg=Is&&Is.exports===af,cf=Zg&&Xg.process,Er=function(){try{var D=Is&&Is.require&&Is.require("util").types;return D||cf&&cf.binding&&cf.binding("util")}catch{}}(),ey=Er&&Er.isArrayBuffer,ty=Er&&Er.isDate,ny=Er&&Er.isMap,ry=Er&&Er.isRegExp,iy=Er&&Er.isSet,sy=Er&&Er.isTypedArray;function cr(D,J,q){switch(q.length){case 0:return D.call(J);case 1:return D.call(J,q[0]);case 2:return D.call(J,q[0],q[1]);case 3:return D.call(J,q[0],q[1],q[2])}return D.apply(J,q)}function MA(D,J,q,be){for(var Ke=-1,st=D==null?0:D.length;++Ke<st;){var on=D[Ke];J(be,on,q(on),D)}return be}function Or(D,J){for(var q=-1,be=D==null?0:D.length;++q<be&&J(D[q],q,D)!==!1;);return D}function LA(D,J){for(var q=D==null?0:D.length;q--&&J(D[q],q,D)!==!1;);return D}function oy(D,J){for(var q=-1,be=D==null?0:D.length;++q<be;)if(!J(D[q],q,D))return!1;return!0}function $i(D,J){for(var q=-1,be=D==null?0:D.length,Ke=0,st=[];++q<be;){var on=D[q];J(on,q,D)&&(st[Ke++]=on)}return st}function Qc(D,J){var q=D==null?0:D.length;return!!q&&ho(D,J,0)>-1}function uf(D,J,q){for(var be=-1,Ke=D==null?0:D.length;++be<Ke;)if(q(J,D[be]))return!0;return!1}function Rt(D,J){for(var q=-1,be=D==null?0:D.length,Ke=Array(be);++q<be;)Ke[q]=J(D[q],q,D);return Ke}function ji(D,J){for(var q=-1,be=J.length,Ke=D.length;++q<be;)D[Ke+q]=J[q];return D}function lf(D,J,q,be){var Ke=-1,st=D==null?0:D.length;for(be&&st&&(q=D[++Ke]);++Ke<st;)q=J(q,D[Ke],Ke,D);return q}function KA(D,J,q,be){var Ke=D==null?0:D.length;for(be&&Ke&&(q=D[--Ke]);Ke--;)q=J(q,D[Ke],Ke,D);return q}function df(D,J){for(var q=-1,be=D==null?0:D.length;++q<be;)if(J(D[q],q,D))return!0;return!1}var NA=ff("length");function DA(D){return D.split("")}function UA(D){return D.match(GS)||[]}function ay(D,J,q){var be;return q(D,function(Ke,st,on){if(J(Ke,st,on))return be=st,!1}),be}function Jc(D,J,q,be){for(var Ke=D.length,st=q+(be?1:-1);be?st--:++st<Ke;)if(J(D[st],st,D))return st;return-1}function ho(D,J,q){return J===J?JA(D,J,q):Jc(D,cy,q)}function FA(D,J,q,be){for(var Ke=q-1,st=D.length;++Ke<st;)if(be(D[Ke],J))return Ke;return-1}function cy(D){return D!==D}function uy(D,J){var q=D==null?0:D.length;return q?pf(D,J)/q:Qt}function ff(D){return function(J){return J==null?t:J[D]}}function hf(D){return function(J){return D==null?t:D[J]}}function ly(D,J,q,be,Ke){return Ke(D,function(st,on,vt){q=be?(be=!1,st):J(q,st,on,vt)}),q}function zA(D,J){var q=D.length;for(D.sort(J);q--;)D[q]=D[q].value;return D}function pf(D,J){for(var q,be=-1,Ke=D.length;++be<Ke;){var st=J(D[be]);st!==t&&(q=q===t?st:q+st)}return q}function gf(D,J){for(var q=-1,be=Array(D);++q<D;)be[q]=J(q);return be}function VA(D,J){return Rt(J,function(q){return[q,D[q]]})}function dy(D){return D&&D.slice(0,gy(D)+1).replace(ef,"")}function ur(D){return function(J){return D(J)}}function yf(D,J){return Rt(J,function(q){return D[q]})}function Ta(D,J){return D.has(J)}function fy(D,J){for(var q=-1,be=D.length;++q<be&&ho(J,D[q],0)>-1;);return q}function hy(D,J){for(var q=D.length;q--&&ho(J,D[q],0)>-1;);return q}function WA(D,J){for(var q=D.length,be=0;q--;)D[q]===J&&++be;return be}var $A=hf(OA),jA=hf(PA);function qA(D){return"\\"+RA[D]}function GA(D,J){return D==null?t:D[J]}function po(D){return AA.test(D)}function HA(D){return kA.test(D)}function YA(D){for(var J,q=[];!(J=D.next()).done;)q.push(J.value);return q}function mf(D){var J=-1,q=Array(D.size);return D.forEach(function(be,Ke){q[++J]=[Ke,be]}),q}function py(D,J){return function(q){return D(J(q))}}function qi(D,J){for(var q=-1,be=D.length,Ke=0,st=[];++q<be;){var on=D[q];(on===J||on===f)&&(D[q]=f,st[Ke++]=q)}return st}function Xc(D){var J=-1,q=Array(D.size);return D.forEach(function(be){q[++J]=be}),q}function QA(D){var J=-1,q=Array(D.size);return D.forEach(function(be){q[++J]=[be,be]}),q}function JA(D,J,q){for(var be=q-1,Ke=D.length;++be<Ke;)if(D[be]===J)return be;return-1}function XA(D,J,q){for(var be=q+1;be--;)if(D[be]===J)return be;return be}function go(D){return po(D)?e1(D):NA(D)}function qr(D){return po(D)?t1(D):DA(D)}function gy(D){for(var J=D.length;J--&&WS.test(D.charAt(J)););return J}var ZA=hf(TA);function e1(D){for(var J=of.lastIndex=0;of.test(D);)++J;return J}function t1(D){return D.match(of)||[]}function n1(D){return D.match(SA)||[]}var r1=function D(J){J=J==null?_n:yo.defaults(_n.Object(),J,yo.pick(_n,IA));var q=J.Array,be=J.Date,Ke=J.Error,st=J.Function,on=J.Math,vt=J.Object,bf=J.RegExp,i1=J.String,Pr=J.TypeError,Zc=q.prototype,s1=st.prototype,mo=vt.prototype,eu=J["__core-js_shared__"],tu=s1.toString,ft=mo.hasOwnProperty,o1=0,yy=function(){var o=/[^.]+$/.exec(eu&&eu.keys&&eu.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),nu=mo.toString,a1=tu.call(vt),c1=_n._,u1=bf("^"+tu.call(ft).replace(Zd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ru=Zg?J.Buffer:t,Gi=J.Symbol,iu=J.Uint8Array,my=ru?ru.allocUnsafe:t,su=py(vt.getPrototypeOf,vt),by=vt.create,vy=mo.propertyIsEnumerable,ou=Zc.splice,_y=Gi?Gi.isConcatSpreadable:t,Ra=Gi?Gi.iterator:t,Es=Gi?Gi.toStringTag:t,au=function(){try{var o=Bs(vt,"defineProperty");return o({},"",{}),o}catch{}}(),l1=J.clearTimeout!==_n.clearTimeout&&J.clearTimeout,d1=be&&be.now!==_n.Date.now&&be.now,f1=J.setTimeout!==_n.setTimeout&&J.setTimeout,cu=on.ceil,uu=on.floor,vf=vt.getOwnPropertySymbols,h1=ru?ru.isBuffer:t,wy=J.isFinite,p1=Zc.join,g1=py(vt.keys,vt),an=on.max,Tn=on.min,y1=be.now,m1=J.parseInt,Sy=on.random,b1=Zc.reverse,_f=Bs(J,"DataView"),Ba=Bs(J,"Map"),wf=Bs(J,"Promise"),bo=Bs(J,"Set"),xa=Bs(J,"WeakMap"),Ca=Bs(vt,"create"),lu=xa&&new xa,vo={},v1=xs(_f),_1=xs(Ba),w1=xs(wf),S1=xs(bo),A1=xs(xa),du=Gi?Gi.prototype:t,Ma=du?du.valueOf:t,Ay=du?du.toString:t;function _(o){if(Ut(o)&&!De(o)&&!(o instanceof Qe)){if(o instanceof Tr)return o;if(ft.call(o,"__wrapped__"))return km(o)}return new Tr(o)}var _o=function(){function o(){}return function(c){if(!Lt(c))return{};if(by)return by(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function fu(){}function Tr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:NS,evaluate:DS,interpolate:xg,variable:"",imports:{_}},_.prototype=fu.prototype,_.prototype.constructor=_,Tr.prototype=_o(fu.prototype),Tr.prototype.constructor=Tr;function Qe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=we,this.__views__=[]}function k1(){var o=new Qe(this.__wrapped__);return o.__actions__=$n(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=$n(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=$n(this.__views__),o}function I1(){if(this.__filtered__){var o=new Qe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function E1(){var o=this.__wrapped__.value(),c=this.__dir__,l=De(o),p=c<0,b=l?o.length:0,w=Dk(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ye=0,Se=Tn(U,this.__takeCount__);if(!l||!p&&b==U&&Se==U)return Gy(o,this.__actions__);var Be=[];e:for(;U--&&ye<Se;){ne+=c;for(var Ve=-1,xe=o[ne];++Ve<ce;){var He=re[Ve],Je=He.iteratee,fr=He.type,Un=Je(xe);if(fr==X)xe=Un;else if(!Un){if(fr==V)continue e;break e}}Be[ye++]=xe}return Be}Qe.prototype=_o(fu.prototype),Qe.prototype.constructor=Qe;function Os(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function O1(){this.__data__=Ca?Ca(null):{},this.size=0}function P1(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function T1(o){var c=this.__data__;if(Ca){var l=c[o];return l===d?t:l}return ft.call(c,o)?c[o]:t}function R1(o){var c=this.__data__;return Ca?c[o]!==t:ft.call(c,o)}function B1(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=Ca&&c===t?d:c,this}Os.prototype.clear=O1,Os.prototype.delete=P1,Os.prototype.get=T1,Os.prototype.has=R1,Os.prototype.set=B1;function Ai(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function x1(){this.__data__=[],this.size=0}function C1(o){var c=this.__data__,l=hu(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():ou.call(c,l,1),--this.size,!0}function M1(o){var c=this.__data__,l=hu(c,o);return l<0?t:c[l][1]}function L1(o){return hu(this.__data__,o)>-1}function K1(o,c){var l=this.__data__,p=hu(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}Ai.prototype.clear=x1,Ai.prototype.delete=C1,Ai.prototype.get=M1,Ai.prototype.has=L1,Ai.prototype.set=K1;function ki(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function N1(){this.size=0,this.__data__={hash:new Os,map:new(Ba||Ai),string:new Os}}function D1(o){var c=Iu(this,o).delete(o);return this.size-=c?1:0,c}function U1(o){return Iu(this,o).get(o)}function F1(o){return Iu(this,o).has(o)}function z1(o,c){var l=Iu(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}ki.prototype.clear=N1,ki.prototype.delete=D1,ki.prototype.get=U1,ki.prototype.has=F1,ki.prototype.set=z1;function Ps(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new ki;++c<l;)this.add(o[c])}function V1(o){return this.__data__.set(o,d),this}function W1(o){return this.__data__.has(o)}Ps.prototype.add=Ps.prototype.push=V1,Ps.prototype.has=W1;function Gr(o){var c=this.__data__=new Ai(o);this.size=c.size}function $1(){this.__data__=new Ai,this.size=0}function j1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function q1(o){return this.__data__.get(o)}function G1(o){return this.__data__.has(o)}function H1(o,c){var l=this.__data__;if(l instanceof Ai){var p=l.__data__;if(!Ba||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new ki(p)}return l.set(o,c),this.size=l.size,this}Gr.prototype.clear=$1,Gr.prototype.delete=j1,Gr.prototype.get=q1,Gr.prototype.has=G1,Gr.prototype.set=H1;function ky(o,c){var l=De(o),p=!l&&Cs(o),b=!l&&!p&&Xi(o),w=!l&&!p&&!b&&ko(o),P=l||p||b||w,B=P?gf(o.length,i1):[],U=B.length;for(var ne in o)(c||ft.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Pi(ne,U)))&&B.push(ne);return B}function Iy(o){var c=o.length;return c?o[xf(0,c-1)]:t}function Y1(o,c){return Eu($n(o),Ts(c,0,o.length))}function Q1(o){return Eu($n(o))}function Sf(o,c,l){(l!==t&&!Hr(o[c],l)||l===t&&!(c in o))&&Ii(o,c,l)}function La(o,c,l){var p=o[c];(!(ft.call(o,c)&&Hr(p,l))||l===t&&!(c in o))&&Ii(o,c,l)}function hu(o,c){for(var l=o.length;l--;)if(Hr(o[l][0],c))return l;return-1}function J1(o,c,l,p){return Hi(o,function(b,w,P){c(p,b,l(b),P)}),p}function Ey(o,c){return o&&ai(c,yn(c),o)}function X1(o,c){return o&&ai(c,qn(c),o)}function Ii(o,c,l){c=="__proto__"&&au?au(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function Af(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:rh(o,c[l]);return b}function Ts(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Rr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!Lt(o))return o;var re=De(o);if(re){if(P=Fk(o),!B)return $n(o,P)}else{var ce=Rn(o),ye=ce==or||ce==Si;if(Xi(o))return Qy(o,B);if(ce==ar||ce==Ot||ye&&!b){if(P=U||ye?{}:gm(o),!B)return U?Tk(o,X1(P,o)):Pk(o,Ey(P,o))}else{if(!kt[ce])return b?o:{};P=zk(o,ce,B)}}w||(w=new Gr);var Se=w.get(o);if(Se)return Se;w.set(o,P),$m(o)?o.forEach(function(xe){P.add(Rr(xe,c,l,xe,o,w))}):Vm(o)&&o.forEach(function(xe,He){P.set(He,Rr(xe,c,l,He,o,w))});var Be=ne?U?Wf:Vf:U?qn:yn,Ve=re?t:Be(o);return Or(Ve||o,function(xe,He){Ve&&(He=xe,xe=o[He]),La(P,He,Rr(xe,c,l,He,o,w))}),P}function Z1(o){var c=yn(o);return function(l){return Oy(l,o,c)}}function Oy(o,c,l){var p=l.length;if(o==null)return!p;for(o=vt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function Py(o,c,l){if(typeof o!="function")throw new Pr(a);return Va(function(){o.apply(t,l)},c)}function Ka(o,c,l,p){var b=-1,w=Qc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Rt(c,ur(l))),p?(w=uf,P=!1):c.length>=i&&(w=Ta,P=!1,c=new Ps(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ye=ne;ye--;)if(c[ye]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Hi=tm(oi),Ty=tm(If,!0);function ek(o,c){var l=!0;return Hi(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function pu(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!dr(P):l(P,B)))var B=P,U=w}return U}function tk(o,c,l,p){var b=o.length;for(l=ze(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:ze(p),p<0&&(p+=b),p=l>p?0:qm(p);l<p;)o[l++]=c;return o}function Ry(o,c){var l=[];return Hi(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function wn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=Wk),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?wn(B,c-1,l,p,b):ji(b,B):p||(b[b.length]=B)}return b}var kf=nm(),By=nm(!0);function oi(o,c){return o&&kf(o,c,yn)}function If(o,c){return o&&By(o,c,yn)}function gu(o,c){return $i(c,function(l){return Ti(o[l])})}function Rs(o,c){c=Qi(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[ci(c[l++])];return l&&l==p?o:t}function xy(o,c,l){var p=c(o);return De(o)?p:ji(p,l(o))}function Nn(o){return o==null?o===t?Jd:Yd:Es&&Es in vt(o)?Nk(o):Qk(o)}function Ef(o,c){return o>c}function nk(o,c){return o!=null&&ft.call(o,c)}function rk(o,c){return o!=null&&c in vt(o)}function ik(o,c,l){return o>=Tn(c,l)&&o<an(c,l)}function Of(o,c,l){for(var p=l?uf:Qc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Rt(re,ur(c))),U=Tn(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new Ps(P&&re):t}re=o[0];var ce=-1,ye=B[0];e:for(;++ce<b&&ne.length<U;){var Se=re[ce],Be=c?c(Se):Se;if(Se=l||Se!==0?Se:0,!(ye?Ta(ye,Be):p(ne,Be,l))){for(P=w;--P;){var Ve=B[P];if(!(Ve?Ta(Ve,Be):p(o[P],Be,l)))continue e}ye&&ye.push(Be),ne.push(Se)}}return ne}function sk(o,c,l,p){return oi(o,function(b,w,P){c(p,l(b),w,P)}),p}function Na(o,c,l){c=Qi(c,o),o=vm(o,c);var p=o==null?o:o[ci(xr(c))];return p==null?t:cr(p,o,l)}function Cy(o){return Ut(o)&&Nn(o)==Ot}function ok(o){return Ut(o)&&Nn(o)==v}function ak(o){return Ut(o)&&Nn(o)==En}function Da(o,c,l,p,b){return o===c?!0:o==null||c==null||!Ut(o)&&!Ut(c)?o!==o&&c!==c:ck(o,c,l,p,Da,b)}function ck(o,c,l,p,b,w){var P=De(o),B=De(c),U=P?pt:Rn(o),ne=B?pt:Rn(c);U=U==Ot?ar:U,ne=ne==Ot?ar:ne;var re=U==ar,ce=ne==ar,ye=U==ne;if(ye&&Xi(o)){if(!Xi(c))return!1;P=!0,re=!1}if(ye&&!re)return w||(w=new Gr),P||ko(o)?fm(o,c,l,p,b,w):Lk(o,c,U,l,p,b,w);if(!(l&C)){var Se=re&&ft.call(o,"__wrapped__"),Be=ce&&ft.call(c,"__wrapped__");if(Se||Be){var Ve=Se?o.value():o,xe=Be?c.value():c;return w||(w=new Gr),b(Ve,xe,l,p,w)}}return ye?(w||(w=new Gr),Kk(o,c,l,p,b,w)):!1}function uk(o){return Ut(o)&&Rn(o)==vn}function Pf(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=vt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new Gr;if(p)var ye=p(ne,re,U,o,c,ce);if(!(ye===t?Da(re,ne,C|A,p,ce):ye))return!1}}return!0}function My(o){if(!Lt(o)||jk(o))return!1;var c=Ti(o)?u1:ZS;return c.test(xs(o))}function lk(o){return Ut(o)&&Nn(o)==Vi}function dk(o){return Ut(o)&&Rn(o)==On}function fk(o){return Ut(o)&&xu(o.length)&&!!Pt[Nn(o)]}function Ly(o){return typeof o=="function"?o:o==null?Gn:typeof o=="object"?De(o)?Dy(o[0],o[1]):Ny(o):rb(o)}function Tf(o){if(!za(o))return g1(o);var c=[];for(var l in vt(o))ft.call(o,l)&&l!="constructor"&&c.push(l);return c}function hk(o){if(!Lt(o))return Yk(o);var c=za(o),l=[];for(var p in o)p=="constructor"&&(c||!ft.call(o,p))||l.push(p);return l}function Rf(o,c){return o<c}function Ky(o,c){var l=-1,p=jn(o)?q(o.length):[];return Hi(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function Ny(o){var c=jf(o);return c.length==1&&c[0][2]?mm(c[0][0],c[0][1]):function(l){return l===o||Pf(l,o,c)}}function Dy(o,c){return Gf(o)&&ym(c)?mm(ci(o),c):function(l){var p=rh(l,o);return p===t&&p===c?ih(l,o):Da(c,p,C|A)}}function yu(o,c,l,p,b){o!==c&&kf(c,function(w,P){if(b||(b=new Gr),Lt(w))pk(o,c,P,l,yu,p,b);else{var B=p?p(Yf(o,P),w,P+"",o,c,b):t;B===t&&(B=w),Sf(o,P,B)}},qn)}function pk(o,c,l,p,b,w,P){var B=Yf(o,l),U=Yf(c,l),ne=P.get(U);if(ne){Sf(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ye=De(U),Se=!ye&&Xi(U),Be=!ye&&!Se&&ko(U);re=U,ye||Se||Be?De(B)?re=B:jt(B)?re=$n(B):Se?(ce=!1,re=Qy(U,!0)):Be?(ce=!1,re=Jy(U,!0)):re=[]:Wa(U)||Cs(U)?(re=B,Cs(B)?re=Gm(B):(!Lt(B)||Ti(B))&&(re=gm(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),Sf(o,l,re)}function Uy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,Pi(c,l)?o[c]:t}function Fy(o,c,l){c.length?c=Rt(c,function(w){return De(w)?function(P){return Rs(P,w.length===1?w[0]:w)}:w}):c=[Gn];var p=-1;c=Rt(c,ur(Te()));var b=Ky(o,function(w,P,B){var U=Rt(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return zA(b,function(w,P){return Ok(w,P,l)})}function gk(o,c){return zy(o,c,function(l,p){return ih(o,p)})}function zy(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=Rs(o,P);l(B,P)&&Ua(w,Qi(P,o),B)}return w}function yk(o){return function(c){return Rs(c,o)}}function Bf(o,c,l,p){var b=p?FA:ho,w=-1,P=c.length,B=o;for(o===c&&(c=$n(c)),l&&(B=Rt(o,ur(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&ou.call(B,U,1),ou.call(o,U,1);return o}function Vy(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;Pi(b)?ou.call(o,b,1):Lf(o,b)}}return o}function xf(o,c){return o+uu(Sy()*(c-o+1))}function mk(o,c,l,p){for(var b=-1,w=an(cu((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function Cf(o,c){var l="";if(!o||c<1||c>Oe)return l;do c%2&&(l+=o),c=uu(c/2),c&&(o+=o);while(c);return l}function qe(o,c){return Qf(bm(o,c,Gn),o+"")}function bk(o){return Iy(Io(o))}function vk(o,c){var l=Io(o);return Eu(l,Ts(c,0,l.length))}function Ua(o,c,l,p){if(!Lt(o))return o;c=Qi(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=ci(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=Lt(re)?re:Pi(c[b+1])?[]:{})}La(B,U,ne),B=B[U]}return o}var Wy=lu?function(o,c){return lu.set(o,c),o}:Gn,_k=au?function(o,c){return au(o,"toString",{configurable:!0,enumerable:!1,value:oh(c),writable:!0})}:Gn;function wk(o){return Eu(Io(o))}function Br(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function Sk(o,c){var l;return Hi(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function mu(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=sn){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!dr(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return Mf(o,c,Gn,l)}function Mf(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=dr(c),ne=c===t;b<w;){var re=uu((b+w)/2),ce=l(o[re]),ye=ce!==t,Se=ce===null,Be=ce===ce,Ve=dr(ce);if(P)var xe=p||Be;else ne?xe=Be&&(p||ye):B?xe=Be&&ye&&(p||!Se):U?xe=Be&&ye&&!Se&&(p||!Ve):Se||Ve?xe=!1:xe=p?ce<=c:ce<c;xe?b=re+1:w=re}return Tn(w,je)}function $y(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!Hr(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function jy(o){return typeof o=="number"?o:dr(o)?Qt:+o}function lr(o){if(typeof o=="string")return o;if(De(o))return Rt(o,lr)+"";if(dr(o))return Ay?Ay.call(o):"";var c=o+"";return c=="0"&&1/o==-me?"-0":c}function Yi(o,c,l){var p=-1,b=Qc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=uf;else if(w>=i){var ne=c?null:Ck(o);if(ne)return Xc(ne);P=!1,b=Ta,U=new Ps}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ye=U.length;ye--;)if(U[ye]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function Lf(o,c){return c=Qi(c,o),o=vm(o,c),o==null||delete o[ci(xr(c))]}function qy(o,c,l,p){return Ua(o,c,l(Rs(o,c)),p)}function bu(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Br(o,p?0:w,p?w+1:b):Br(o,p?w+1:0,p?b:w)}function Gy(o,c){var l=o;return l instanceof Qe&&(l=l.value()),lf(c,function(p,b){return b.func.apply(b.thisArg,ji([p],b.args))},l)}function Kf(o,c,l){var p=o.length;if(p<2)return p?Yi(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=Ka(w[b]||P,o[B],c,l));return Yi(wn(w,1),c,l)}function Hy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function Nf(o){return jt(o)?o:[]}function Df(o){return typeof o=="function"?o:Gn}function Qi(o,c){return De(o)?o:Gf(o,c)?[o]:Am(ct(o))}var Ak=qe;function Ji(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Br(o,c,l)}var Yy=l1||function(o){return _n.clearTimeout(o)};function Qy(o,c){if(c)return o.slice();var l=o.length,p=my?my(l):new o.constructor(l);return o.copy(p),p}function Uf(o){var c=new o.constructor(o.byteLength);return new iu(c).set(new iu(o)),c}function kk(o,c){var l=c?Uf(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function Ik(o){var c=new o.constructor(o.source,Cg.exec(o));return c.lastIndex=o.lastIndex,c}function Ek(o){return Ma?vt(Ma.call(o)):{}}function Jy(o,c){var l=c?Uf(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function Xy(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=dr(o),P=c!==t,B=c===null,U=c===c,ne=dr(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function Ok(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=Xy(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function Zy(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=an(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function em(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=an(w-B,0),ce=q(re+ne),ye=!p;++b<re;)ce[b]=o[b];for(var Se=b;++U<ne;)ce[Se+U]=c[U];for(;++P<B;)(ye||b<w)&&(ce[Se+l[P]]=o[b++]);return ce}function $n(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function ai(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?Ii(l,B,U):La(l,B,U)}return l}function Pk(o,c){return ai(o,qf(o),c)}function Tk(o,c){return ai(o,hm(o),c)}function vu(o,c){return function(l,p){var b=De(l)?MA:J1,w=c?c():{};return b(l,o,Te(p,2),w)}}function wo(o){return qe(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Dn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=vt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function tm(o,c){return function(l,p){if(l==null)return l;if(!jn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=vt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function nm(o){return function(c,l,p){for(var b=-1,w=vt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function Rk(o,c,l){var p=c&R,b=Fa(o);function w(){var P=this&&this!==_n&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function rm(o){return function(c){c=ct(c);var l=po(c)?qr(c):t,p=l?l[0]:c.charAt(0),b=l?Ji(l,1).join(""):c.slice(1);return p[o]()+b}}function So(o){return function(c){return lf(tb(eb(c).replace(_A,"")),o,"")}}function Fa(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=_o(o.prototype),p=o.apply(l,c);return Lt(p)?p:l}}function Bk(o,c,l){var p=Fa(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=Ao(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:qi(P,U);if(w-=ne.length,w<l)return cm(o,c,_u,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==_n&&this instanceof b?p:o;return cr(re,this,P)}return b}function im(o){return function(c,l,p){var b=vt(c);if(!jn(c)){var w=Te(l,3);c=yn(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function sm(o){return Oi(function(c){var l=c.length,p=l,b=Tr.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new Pr(a);if(b&&!P&&ku(w)=="wrapper")var P=new Tr([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=ku(w),U=B=="wrapper"?$f(w):t;U&&Hf(U[0])&&U[1]==(N|ae|fe|W)&&!U[4].length&&U[9]==1?P=P[ku(U[0])].apply(P,U[3]):P=w.length==1&&Hf(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&De(re))return P.plant(re).value();for(var ce=0,ye=l?c[ce].apply(this,ne):re;++ce<l;)ye=c[ce].call(this,ye);return ye}})}function _u(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ye=c&M,Se=c&(ae|oe),Be=c&Q,Ve=ye?t:Fa(o);function xe(){for(var He=arguments.length,Je=q(He),fr=He;fr--;)Je[fr]=arguments[fr];if(Se)var Un=Ao(xe),hr=WA(Je,Un);if(p&&(Je=Zy(Je,p,b,Se)),w&&(Je=em(Je,w,P,Se)),He-=hr,Se&&He<ne){var qt=qi(Je,Un);return cm(o,c,_u,xe.placeholder,l,Je,qt,B,U,ne-He)}var Yr=ce?l:this,Bi=ye?Yr[o]:o;return He=Je.length,B?Je=Jk(Je,B):Be&&He>1&&Je.reverse(),re&&U<He&&(Je.length=U),this&&this!==_n&&this instanceof xe&&(Bi=Ve||Fa(Bi)),Bi.apply(Yr,Je)}return xe}function om(o,c){return function(l,p){return sk(l,o,c(p),{})}}function wu(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=lr(l),p=lr(p)):(l=jy(l),p=jy(p)),b=o(l,p)}return b}}function Ff(o){return Oi(function(c){return c=Rt(c,ur(Te())),qe(function(l){var p=this;return o(c,function(b){return cr(b,p,l)})})})}function Su(o,c){c=c===t?" ":lr(c);var l=c.length;if(l<2)return l?Cf(c,o):c;var p=Cf(c,cu(o/go(c)));return po(c)?Ji(qr(p),0,o).join(""):p.slice(0,o)}function xk(o,c,l,p){var b=c&R,w=Fa(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ye=this&&this!==_n&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return cr(ye,b?l:this,ce)}return P}function am(o){return function(c,l,p){return p&&typeof p!="number"&&Dn(c,l,p)&&(l=p=t),c=Ri(c),l===t?(l=c,c=0):l=Ri(l),p=p===t?c<l?1:-1:Ri(p),mk(c,l,p,o)}}function Au(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Cr(c),l=Cr(l)),o(c,l)}}function cm(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ye=re?t:P,Se=re?w:t,Be=re?t:w;c|=re?fe:E,c&=~(re?E:fe),c&Y||(c&=~(R|M));var Ve=[o,c,b,Se,ce,Be,ye,B,U,ne],xe=l.apply(t,Ve);return Hf(o)&&_m(xe,Ve),xe.placeholder=p,wm(xe,o,c)}function zf(o){var c=on[o];return function(l,p){if(l=Cr(l),p=p==null?0:Tn(ze(p),292),p&&wy(l)){var b=(ct(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(ct(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var Ck=bo&&1/Xc(new bo([,-0]))[1]==me?function(o){return new bo(o)}:uh;function um(o){return function(c){var l=Rn(c);return l==vn?mf(c):l==On?QA(c):VA(c,o(c))}}function Ei(o,c,l,p,b,w,P,B){var U=c&M;if(!U&&typeof o!="function")throw new Pr(a);var ne=p?p.length:0;if(ne||(c&=~(fe|E),p=b=t),P=P===t?P:an(ze(P),0),B=B===t?B:ze(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ye=U?t:$f(o),Se=[o,c,l,p,b,re,ce,w,P,B];if(ye&&Hk(Se,ye),o=Se[0],c=Se[1],l=Se[2],p=Se[3],b=Se[4],B=Se[9]=Se[9]===t?U?0:o.length:an(Se[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Be=Rk(o,c,l);else c==ae||c==oe?Be=Bk(o,c,B):(c==fe||c==(R|fe))&&!b.length?Be=xk(o,c,l,p):Be=_u.apply(t,Se);var Ve=ye?Wy:_m;return wm(Ve(Be,Se),o,c)}function lm(o,c,l,p){return o===t||Hr(o,mo[l])&&!ft.call(p,l)?c:o}function dm(o,c,l,p,b,w){return Lt(o)&&Lt(c)&&(w.set(c,o),yu(o,c,t,dm,w),w.delete(c)),o}function Mk(o){return Wa(o)?t:o}function fm(o,c,l,p,b,w){var P=l&C,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ye=!0,Se=l&A?new Ps:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Be=o[ce],Ve=c[ce];if(p)var xe=P?p(Ve,Be,ce,c,o,w):p(Be,Ve,ce,o,c,w);if(xe!==t){if(xe)continue;ye=!1;break}if(Se){if(!df(c,function(He,Je){if(!Ta(Se,Je)&&(Be===He||b(Be,He,l,p,w)))return Se.push(Je)})){ye=!1;break}}else if(!(Be===Ve||b(Be,Ve,l,p,w))){ye=!1;break}}return w.delete(o),w.delete(c),ye}function Lk(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new iu(o),new iu(c)));case $t:case En:case ks:return Hr(+o,+c);case Ir:return o.name==c.name&&o.message==c.message;case Vi:case Pn:return o==c+"";case vn:var B=mf;case On:var U=p&C;if(B||(B=Xc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=fm(B(o),B(c),p,b,w,P);return P.delete(o),re;case Wi:if(Ma)return Ma.call(o)==Ma.call(c)}return!1}function Kk(o,c,l,p,b,w){var P=l&C,B=Vf(o),U=B.length,ne=Vf(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ye=B[ce];if(!(P?ye in c:ft.call(c,ye)))return!1}var Se=w.get(o),Be=w.get(c);if(Se&&Be)return Se==c&&Be==o;var Ve=!0;w.set(o,c),w.set(c,o);for(var xe=P;++ce<U;){ye=B[ce];var He=o[ye],Je=c[ye];if(p)var fr=P?p(Je,He,ye,c,o,w):p(He,Je,ye,o,c,w);if(!(fr===t?He===Je||b(He,Je,l,p,w):fr)){Ve=!1;break}xe||(xe=ye=="constructor")}if(Ve&&!xe){var Un=o.constructor,hr=c.constructor;Un!=hr&&"constructor"in o&&"constructor"in c&&!(typeof Un=="function"&&Un instanceof Un&&typeof hr=="function"&&hr instanceof hr)&&(Ve=!1)}return w.delete(o),w.delete(c),Ve}function Oi(o){return Qf(bm(o,t,Om),o+"")}function Vf(o){return xy(o,yn,qf)}function Wf(o){return xy(o,qn,hm)}var $f=lu?function(o){return lu.get(o)}:uh;function ku(o){for(var c=o.name+"",l=vo[c],p=ft.call(vo,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function Ao(o){var c=ft.call(_,"placeholder")?_:o;return c.placeholder}function Te(){var o=_.iteratee||ah;return o=o===ah?Ly:o,arguments.length?o(arguments[0],arguments[1]):o}function Iu(o,c){var l=o.__data__;return $k(c)?l[typeof c=="string"?"string":"hash"]:l.map}function jf(o){for(var c=yn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,ym(b)]}return c}function Bs(o,c){var l=GA(o,c);return My(l)?l:t}function Nk(o){var c=ft.call(o,Es),l=o[Es];try{o[Es]=t;var p=!0}catch{}var b=nu.call(o);return p&&(c?o[Es]=l:delete o[Es]),b}var qf=vf?function(o){return o==null?[]:(o=vt(o),$i(vf(o),function(c){return vy.call(o,c)}))}:lh,hm=vf?function(o){for(var c=[];o;)ji(c,qf(o)),o=su(o);return c}:lh,Rn=Nn;(_f&&Rn(new _f(new ArrayBuffer(1)))!=g||Ba&&Rn(new Ba)!=vn||wf&&Rn(wf.resolve())!=qc||bo&&Rn(new bo)!=On||xa&&Rn(new xa)!=Wn)&&(Rn=function(o){var c=Nn(o),l=c==ar?o.constructor:t,p=l?xs(l):"";if(p)switch(p){case v1:return g;case _1:return vn;case w1:return qc;case S1:return On;case A1:return Wn}return c});function Dk(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=Tn(c,o+P);break;case"takeRight":o=an(o,c-P);break}}return{start:o,end:c}}function Uk(o){var c=o.match(jS);return c?c[1].split(qS):[]}function pm(o,c,l){c=Qi(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=ci(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&xu(b)&&Pi(P,b)&&(De(o)||Cs(o)))}function Fk(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&ft.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function gm(o){return typeof o.constructor=="function"&&!za(o)?_o(su(o)):{}}function zk(o,c,l){var p=o.constructor;switch(c){case v:return Uf(o);case $t:case En:return new p(+o);case g:return kk(o,l);case y:case k:case L:case $:case Z:case Ue:case St:case gt:case At:return Jy(o,l);case vn:return new p;case ks:case Pn:return new p(o);case Vi:return Ik(o);case On:return new p;case Wi:return Ek(o)}}function Vk(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace($S,`{
/* [wrapped with `+c+`] */
`)}function Wk(o){return De(o)||Cs(o)||!!(_y&&o&&o[_y])}function Pi(o,c){var l=typeof o;return c=c??Oe,!!c&&(l=="number"||l!="symbol"&&tA.test(o))&&o>-1&&o%1==0&&o<c}function Dn(o,c,l){if(!Lt(l))return!1;var p=typeof c;return(p=="number"?jn(l)&&Pi(c,l.length):p=="string"&&c in l)?Hr(l[c],o):!1}function Gf(o,c){if(De(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||dr(o)?!0:FS.test(o)||!US.test(o)||c!=null&&o in vt(c)}function $k(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Hf(o){var c=ku(o),l=_[c];if(typeof l!="function"||!(c in Qe.prototype))return!1;if(o===l)return!0;var p=$f(l);return!!p&&o===p[0]}function jk(o){return!!yy&&yy in o}var qk=eu?Ti:dh;function za(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||mo;return o===l}function ym(o){return o===o&&!Lt(o)}function mm(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in vt(l))}}function Gk(o){var c=Ru(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function Hk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|M|N),P=p==N&&l==ae||p==N&&l==W&&o[7].length<=c[8]||p==(N|W)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?Zy(U,B,c[4]):B,o[4]=U?qi(o[3],f):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?em(U,B,c[6]):B,o[6]=U?qi(o[5],f):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:Tn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function Yk(o){var c=[];if(o!=null)for(var l in vt(o))c.push(l);return c}function Qk(o){return nu.call(o)}function bm(o,c,l){return c=an(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=an(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),cr(o,this,B)}}function vm(o,c){return c.length<2?o:Rs(o,Br(c,0,-1))}function Jk(o,c){for(var l=o.length,p=Tn(c.length,l),b=$n(o);p--;){var w=c[p];o[p]=Pi(w,l)?b[w]:t}return o}function Yf(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var _m=Sm(Wy),Va=f1||function(o,c){return _n.setTimeout(o,c)},Qf=Sm(_k);function wm(o,c,l){var p=c+"";return Qf(o,Vk(p,Xk(Uk(p),l)))}function Sm(o){var c=0,l=0;return function(){var p=y1(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function Eu(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=xf(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var Am=Gk(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(zS,function(l,p,b,w){c.push(b?w.replace(YS,"$1"):p||l)}),c});function ci(o){if(typeof o=="string"||dr(o))return o;var c=o+"";return c=="0"&&1/o==-me?"-0":c}function xs(o){if(o!=null){try{return tu.call(o)}catch{}try{return o+""}catch{}}return""}function Xk(o,c){return Or(gn,function(l){var p="_."+l[0];c&l[1]&&!Qc(o,p)&&o.push(p)}),o.sort()}function km(o){if(o instanceof Qe)return o.clone();var c=new Tr(o.__wrapped__,o.__chain__);return c.__actions__=$n(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function Zk(o,c,l){(l?Dn(o,c,l):c===t)?c=1:c=an(ze(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(cu(p/c));b<p;)P[w++]=Br(o,b,b+=c);return P}function eI(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function tI(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return ji(De(l)?$n(l):[l],wn(c,1))}var nI=qe(function(o,c){return jt(o)?Ka(o,wn(c,1,jt,!0)):[]}),rI=qe(function(o,c){var l=xr(c);return jt(l)&&(l=t),jt(o)?Ka(o,wn(c,1,jt,!0),Te(l,2)):[]}),iI=qe(function(o,c){var l=xr(c);return jt(l)&&(l=t),jt(o)?Ka(o,wn(c,1,jt,!0),t,l):[]});function sI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:ze(c),Br(o,c<0?0:c,p)):[]}function oI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:ze(c),c=p-c,Br(o,0,c<0?0:c)):[]}function aI(o,c){return o&&o.length?bu(o,Te(c,3),!0,!0):[]}function cI(o,c){return o&&o.length?bu(o,Te(c,3),!0):[]}function uI(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Dn(o,c,l)&&(l=0,p=b),tk(o,c,l,p)):[]}function Im(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:ze(l);return b<0&&(b=an(p+b,0)),Jc(o,Te(c,3),b)}function Em(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=ze(l),b=l<0?an(p+b,0):Tn(b,p-1)),Jc(o,Te(c,3),b,!0)}function Om(o){var c=o==null?0:o.length;return c?wn(o,1):[]}function lI(o){var c=o==null?0:o.length;return c?wn(o,me):[]}function dI(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:ze(c),wn(o,c)):[]}function fI(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function Pm(o){return o&&o.length?o[0]:t}function hI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:ze(l);return b<0&&(b=an(p+b,0)),ho(o,c,b)}function pI(o){var c=o==null?0:o.length;return c?Br(o,0,-1):[]}var gI=qe(function(o){var c=Rt(o,Nf);return c.length&&c[0]===o[0]?Of(c):[]}),yI=qe(function(o){var c=xr(o),l=Rt(o,Nf);return c===xr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?Of(l,Te(c,2)):[]}),mI=qe(function(o){var c=xr(o),l=Rt(o,Nf);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?Of(l,t,c):[]});function bI(o,c){return o==null?"":p1.call(o,c)}function xr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function vI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=ze(l),b=b<0?an(p+b,0):Tn(b,p-1)),c===c?XA(o,c,b):Jc(o,cy,b,!0)}function _I(o,c){return o&&o.length?Uy(o,ze(c)):t}var wI=qe(Tm);function Tm(o,c){return o&&o.length&&c&&c.length?Bf(o,c):o}function SI(o,c,l){return o&&o.length&&c&&c.length?Bf(o,c,Te(l,2)):o}function AI(o,c,l){return o&&o.length&&c&&c.length?Bf(o,c,t,l):o}var kI=Oi(function(o,c){var l=o==null?0:o.length,p=Af(o,c);return Vy(o,Rt(c,function(b){return Pi(b,l)?+b:b}).sort(Xy)),p});function II(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Te(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return Vy(o,b),l}function Jf(o){return o==null?o:b1.call(o)}function EI(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Dn(o,c,l)?(c=0,l=p):(c=c==null?0:ze(c),l=l===t?p:ze(l)),Br(o,c,l)):[]}function OI(o,c){return mu(o,c)}function PI(o,c,l){return Mf(o,c,Te(l,2))}function TI(o,c){var l=o==null?0:o.length;if(l){var p=mu(o,c);if(p<l&&Hr(o[p],c))return p}return-1}function RI(o,c){return mu(o,c,!0)}function BI(o,c,l){return Mf(o,c,Te(l,2),!0)}function xI(o,c){var l=o==null?0:o.length;if(l){var p=mu(o,c,!0)-1;if(Hr(o[p],c))return p}return-1}function CI(o){return o&&o.length?$y(o):[]}function MI(o,c){return o&&o.length?$y(o,Te(c,2)):[]}function LI(o){var c=o==null?0:o.length;return c?Br(o,1,c):[]}function KI(o,c,l){return o&&o.length?(c=l||c===t?1:ze(c),Br(o,0,c<0?0:c)):[]}function NI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:ze(c),c=p-c,Br(o,c<0?0:c,p)):[]}function DI(o,c){return o&&o.length?bu(o,Te(c,3),!1,!0):[]}function UI(o,c){return o&&o.length?bu(o,Te(c,3)):[]}var FI=qe(function(o){return Yi(wn(o,1,jt,!0))}),zI=qe(function(o){var c=xr(o);return jt(c)&&(c=t),Yi(wn(o,1,jt,!0),Te(c,2))}),VI=qe(function(o){var c=xr(o);return c=typeof c=="function"?c:t,Yi(wn(o,1,jt,!0),t,c)});function WI(o){return o&&o.length?Yi(o):[]}function $I(o,c){return o&&o.length?Yi(o,Te(c,2)):[]}function jI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Yi(o,t,c):[]}function Xf(o){if(!(o&&o.length))return[];var c=0;return o=$i(o,function(l){if(jt(l))return c=an(l.length,c),!0}),gf(c,function(l){return Rt(o,ff(l))})}function Rm(o,c){if(!(o&&o.length))return[];var l=Xf(o);return c==null?l:Rt(l,function(p){return cr(c,t,p)})}var qI=qe(function(o,c){return jt(o)?Ka(o,c):[]}),GI=qe(function(o){return Kf($i(o,jt))}),HI=qe(function(o){var c=xr(o);return jt(c)&&(c=t),Kf($i(o,jt),Te(c,2))}),YI=qe(function(o){var c=xr(o);return c=typeof c=="function"?c:t,Kf($i(o,jt),t,c)}),QI=qe(Xf);function JI(o,c){return Hy(o||[],c||[],La)}function XI(o,c){return Hy(o||[],c||[],Ua)}var ZI=qe(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,Rm(o,l)});function Bm(o){var c=_(o);return c.__chain__=!0,c}function eE(o,c){return c(o),o}function Ou(o,c){return c(o)}var tE=Oi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return Af(w,o)};return c>1||this.__actions__.length||!(p instanceof Qe)||!Pi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:Ou,args:[b],thisArg:t}),new Tr(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function nE(){return Bm(this)}function rE(){return new Tr(this.value(),this.__chain__)}function iE(){this.__values__===t&&(this.__values__=jm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function sE(){return this}function oE(o){for(var c,l=this;l instanceof fu;){var p=km(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function aE(){var o=this.__wrapped__;if(o instanceof Qe){var c=o;return this.__actions__.length&&(c=new Qe(this)),c=c.reverse(),c.__actions__.push({func:Ou,args:[Jf],thisArg:t}),new Tr(c,this.__chain__)}return this.thru(Jf)}function cE(){return Gy(this.__wrapped__,this.__actions__)}var uE=vu(function(o,c,l){ft.call(o,l)?++o[l]:Ii(o,l,1)});function lE(o,c,l){var p=De(o)?oy:ek;return l&&Dn(o,c,l)&&(c=t),p(o,Te(c,3))}function dE(o,c){var l=De(o)?$i:Ry;return l(o,Te(c,3))}var fE=im(Im),hE=im(Em);function pE(o,c){return wn(Pu(o,c),1)}function gE(o,c){return wn(Pu(o,c),me)}function yE(o,c,l){return l=l===t?1:ze(l),wn(Pu(o,c),l)}function xm(o,c){var l=De(o)?Or:Hi;return l(o,Te(c,3))}function Cm(o,c){var l=De(o)?LA:Ty;return l(o,Te(c,3))}var mE=vu(function(o,c,l){ft.call(o,l)?o[l].push(c):Ii(o,l,[c])});function bE(o,c,l,p){o=jn(o)?o:Io(o),l=l&&!p?ze(l):0;var b=o.length;return l<0&&(l=an(b+l,0)),Cu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&ho(o,c,l)>-1}var vE=qe(function(o,c,l){var p=-1,b=typeof c=="function",w=jn(o)?q(o.length):[];return Hi(o,function(P){w[++p]=b?cr(c,P,l):Na(P,c,l)}),w}),_E=vu(function(o,c,l){Ii(o,l,c)});function Pu(o,c){var l=De(o)?Rt:Ky;return l(o,Te(c,3))}function wE(o,c,l,p){return o==null?[]:(De(c)||(c=c==null?[]:[c]),l=p?t:l,De(l)||(l=l==null?[]:[l]),Fy(o,c,l))}var SE=vu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function AE(o,c,l){var p=De(o)?lf:ly,b=arguments.length<3;return p(o,Te(c,4),l,b,Hi)}function kE(o,c,l){var p=De(o)?KA:ly,b=arguments.length<3;return p(o,Te(c,4),l,b,Ty)}function IE(o,c){var l=De(o)?$i:Ry;return l(o,Bu(Te(c,3)))}function EE(o){var c=De(o)?Iy:bk;return c(o)}function OE(o,c,l){(l?Dn(o,c,l):c===t)?c=1:c=ze(c);var p=De(o)?Y1:vk;return p(o,c)}function PE(o){var c=De(o)?Q1:wk;return c(o)}function TE(o){if(o==null)return 0;if(jn(o))return Cu(o)?go(o):o.length;var c=Rn(o);return c==vn||c==On?o.size:Tf(o).length}function RE(o,c,l){var p=De(o)?df:Sk;return l&&Dn(o,c,l)&&(c=t),p(o,Te(c,3))}var BE=qe(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Dn(o,c[0],c[1])?c=[]:l>2&&Dn(c[0],c[1],c[2])&&(c=[c[0]]),Fy(o,wn(c,1),[])}),Tu=d1||function(){return _n.Date.now()};function xE(o,c){if(typeof c!="function")throw new Pr(a);return o=ze(o),function(){if(--o<1)return c.apply(this,arguments)}}function Mm(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,Ei(o,N,t,t,t,t,c)}function Lm(o,c){var l;if(typeof c!="function")throw new Pr(a);return o=ze(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Zf=qe(function(o,c,l){var p=R;if(l.length){var b=qi(l,Ao(Zf));p|=fe}return Ei(o,p,c,l,b)}),Km=qe(function(o,c,l){var p=R|M;if(l.length){var b=qi(l,Ao(Km));p|=fe}return Ei(c,p,o,l,b)});function Nm(o,c,l){c=l?t:c;var p=Ei(o,ae,t,t,t,t,t,c);return p.placeholder=Nm.placeholder,p}function Dm(o,c,l){c=l?t:c;var p=Ei(o,oe,t,t,t,t,t,c);return p.placeholder=Dm.placeholder,p}function Um(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ye=!0;if(typeof o!="function")throw new Pr(a);c=Cr(c)||0,Lt(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?an(Cr(l.maxWait)||0,c):w,ye="trailing"in l?!!l.trailing:ye);function Se(qt){var Yr=p,Bi=b;return p=b=t,ne=qt,P=o.apply(Bi,Yr),P}function Be(qt){return ne=qt,B=Va(He,c),re?Se(qt):P}function Ve(qt){var Yr=qt-U,Bi=qt-ne,ib=c-Yr;return ce?Tn(ib,w-Bi):ib}function xe(qt){var Yr=qt-U,Bi=qt-ne;return U===t||Yr>=c||Yr<0||ce&&Bi>=w}function He(){var qt=Tu();if(xe(qt))return Je(qt);B=Va(He,Ve(qt))}function Je(qt){return B=t,ye&&p?Se(qt):(p=b=t,P)}function fr(){B!==t&&Yy(B),ne=0,p=U=b=B=t}function Un(){return B===t?P:Je(Tu())}function hr(){var qt=Tu(),Yr=xe(qt);if(p=arguments,b=this,U=qt,Yr){if(B===t)return Be(U);if(ce)return Yy(B),B=Va(He,c),Se(U)}return B===t&&(B=Va(He,c)),P}return hr.cancel=fr,hr.flush=Un,hr}var CE=qe(function(o,c){return Py(o,1,c)}),ME=qe(function(o,c,l){return Py(o,Cr(c)||0,l)});function LE(o){return Ei(o,Q)}function Ru(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Pr(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(Ru.Cache||ki),l}Ru.Cache=ki;function Bu(o){if(typeof o!="function")throw new Pr(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function KE(o){return Lm(2,o)}var NE=Ak(function(o,c){c=c.length==1&&De(c[0])?Rt(c[0],ur(Te())):Rt(wn(c,1),ur(Te()));var l=c.length;return qe(function(p){for(var b=-1,w=Tn(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return cr(o,this,p)})}),eh=qe(function(o,c){var l=qi(c,Ao(eh));return Ei(o,fe,t,c,l)}),Fm=qe(function(o,c){var l=qi(c,Ao(Fm));return Ei(o,E,t,c,l)}),DE=Oi(function(o,c){return Ei(o,W,t,t,t,c)});function UE(o,c){if(typeof o!="function")throw new Pr(a);return c=c===t?c:ze(c),qe(o,c)}function FE(o,c){if(typeof o!="function")throw new Pr(a);return c=c==null?0:an(ze(c),0),qe(function(l){var p=l[c],b=Ji(l,0,c);return p&&ji(b,p),cr(o,this,b)})}function zE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new Pr(a);return Lt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),Um(o,c,{leading:p,maxWait:c,trailing:b})}function VE(o){return Mm(o,1)}function WE(o,c){return eh(Df(c),o)}function $E(){if(!arguments.length)return[];var o=arguments[0];return De(o)?o:[o]}function jE(o){return Rr(o,O)}function qE(o,c){return c=typeof c=="function"?c:t,Rr(o,O,c)}function GE(o){return Rr(o,m|O)}function HE(o,c){return c=typeof c=="function"?c:t,Rr(o,m|O,c)}function YE(o,c){return c==null||Oy(o,c,yn(c))}function Hr(o,c){return o===c||o!==o&&c!==c}var QE=Au(Ef),JE=Au(function(o,c){return o>=c}),Cs=Cy(function(){return arguments}())?Cy:function(o){return Ut(o)&&ft.call(o,"callee")&&!vy.call(o,"callee")},De=q.isArray,XE=ey?ur(ey):ok;function jn(o){return o!=null&&xu(o.length)&&!Ti(o)}function jt(o){return Ut(o)&&jn(o)}function ZE(o){return o===!0||o===!1||Ut(o)&&Nn(o)==$t}var Xi=h1||dh,eO=ty?ur(ty):ak;function tO(o){return Ut(o)&&o.nodeType===1&&!Wa(o)}function nO(o){if(o==null)return!0;if(jn(o)&&(De(o)||typeof o=="string"||typeof o.splice=="function"||Xi(o)||ko(o)||Cs(o)))return!o.length;var c=Rn(o);if(c==vn||c==On)return!o.size;if(za(o))return!Tf(o).length;for(var l in o)if(ft.call(o,l))return!1;return!0}function rO(o,c){return Da(o,c)}function iO(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?Da(o,c,t,l):!!p}function th(o){if(!Ut(o))return!1;var c=Nn(o);return c==Ir||c==si||typeof o.message=="string"&&typeof o.name=="string"&&!Wa(o)}function sO(o){return typeof o=="number"&&wy(o)}function Ti(o){if(!Lt(o))return!1;var c=Nn(o);return c==or||c==Si||c==kr||c==Qd}function zm(o){return typeof o=="number"&&o==ze(o)}function xu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Oe}function Lt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Ut(o){return o!=null&&typeof o=="object"}var Vm=ny?ur(ny):uk;function oO(o,c){return o===c||Pf(o,c,jf(c))}function aO(o,c,l){return l=typeof l=="function"?l:t,Pf(o,c,jf(c),l)}function cO(o){return Wm(o)&&o!=+o}function uO(o){if(qk(o))throw new Ke(s);return My(o)}function lO(o){return o===null}function dO(o){return o==null}function Wm(o){return typeof o=="number"||Ut(o)&&Nn(o)==ks}function Wa(o){if(!Ut(o)||Nn(o)!=ar)return!1;var c=su(o);if(c===null)return!0;var l=ft.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&tu.call(l)==a1}var nh=ry?ur(ry):lk;function fO(o){return zm(o)&&o>=-Oe&&o<=Oe}var $m=iy?ur(iy):dk;function Cu(o){return typeof o=="string"||!De(o)&&Ut(o)&&Nn(o)==Pn}function dr(o){return typeof o=="symbol"||Ut(o)&&Nn(o)==Wi}var ko=sy?ur(sy):fk;function hO(o){return o===t}function pO(o){return Ut(o)&&Rn(o)==Wn}function gO(o){return Ut(o)&&Nn(o)==Xd}var yO=Au(Rf),mO=Au(function(o,c){return o<=c});function jm(o){if(!o)return[];if(jn(o))return Cu(o)?qr(o):$n(o);if(Ra&&o[Ra])return YA(o[Ra]());var c=Rn(o),l=c==vn?mf:c==On?Xc:Io;return l(o)}function Ri(o){if(!o)return o===0?o:0;if(o=Cr(o),o===me||o===-me){var c=o<0?-1:1;return c*Yt}return o===o?o:0}function ze(o){var c=Ri(o),l=c%1;return c===c?l?c-l:c:0}function qm(o){return o?Ts(ze(o),0,we):0}function Cr(o){if(typeof o=="number")return o;if(dr(o))return Qt;if(Lt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Lt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=dy(o);var l=XS.test(o);return l||eA.test(o)?xA(o.slice(2),l?2:8):JS.test(o)?Qt:+o}function Gm(o){return ai(o,qn(o))}function bO(o){return o?Ts(ze(o),-Oe,Oe):o===0?o:0}function ct(o){return o==null?"":lr(o)}var vO=wo(function(o,c){if(za(c)||jn(c)){ai(c,yn(c),o);return}for(var l in c)ft.call(c,l)&&La(o,l,c[l])}),Hm=wo(function(o,c){ai(c,qn(c),o)}),Mu=wo(function(o,c,l,p){ai(c,qn(c),o,p)}),_O=wo(function(o,c,l,p){ai(c,yn(c),o,p)}),wO=Oi(Af);function SO(o,c){var l=_o(o);return c==null?l:Ey(l,c)}var AO=qe(function(o,c){o=vt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Dn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=qn(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||Hr(re,mo[ne])&&!ft.call(o,ne))&&(o[ne]=w[ne])}return o}),kO=qe(function(o){return o.push(t,dm),cr(Ym,t,o)});function IO(o,c){return ay(o,Te(c,3),oi)}function EO(o,c){return ay(o,Te(c,3),If)}function OO(o,c){return o==null?o:kf(o,Te(c,3),qn)}function PO(o,c){return o==null?o:By(o,Te(c,3),qn)}function TO(o,c){return o&&oi(o,Te(c,3))}function RO(o,c){return o&&If(o,Te(c,3))}function BO(o){return o==null?[]:gu(o,yn(o))}function xO(o){return o==null?[]:gu(o,qn(o))}function rh(o,c,l){var p=o==null?t:Rs(o,c);return p===t?l:p}function CO(o,c){return o!=null&&pm(o,c,nk)}function ih(o,c){return o!=null&&pm(o,c,rk)}var MO=om(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=nu.call(c)),o[c]=l},oh(Gn)),LO=om(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=nu.call(c)),ft.call(o,c)?o[c].push(l):o[c]=[l]},Te),KO=qe(Na);function yn(o){return jn(o)?ky(o):Tf(o)}function qn(o){return jn(o)?ky(o,!0):hk(o)}function NO(o,c){var l={};return c=Te(c,3),oi(o,function(p,b,w){Ii(l,c(p,b,w),p)}),l}function DO(o,c){var l={};return c=Te(c,3),oi(o,function(p,b,w){Ii(l,b,c(p,b,w))}),l}var UO=wo(function(o,c,l){yu(o,c,l)}),Ym=wo(function(o,c,l,p){yu(o,c,l,p)}),FO=Oi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Rt(c,function(w){return w=Qi(w,o),p||(p=w.length>1),w}),ai(o,Wf(o),l),p&&(l=Rr(l,m|I|O,Mk));for(var b=c.length;b--;)Lf(l,c[b]);return l});function zO(o,c){return Qm(o,Bu(Te(c)))}var VO=Oi(function(o,c){return o==null?{}:gk(o,c)});function Qm(o,c){if(o==null)return{};var l=Rt(Wf(o),function(p){return[p]});return c=Te(c),zy(o,l,function(p,b){return c(p,b[0])})}function WO(o,c,l){c=Qi(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[ci(c[p])];w===t&&(p=b,w=l),o=Ti(w)?w.call(o):w}return o}function $O(o,c,l){return o==null?o:Ua(o,c,l)}function jO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Ua(o,c,l,p)}var Jm=um(yn),Xm=um(qn);function qO(o,c,l){var p=De(o),b=p||Xi(o)||ko(o);if(c=Te(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:Lt(o)?l=Ti(w)?_o(su(o)):{}:l={}}return(b?Or:oi)(o,function(P,B,U){return c(l,P,B,U)}),l}function GO(o,c){return o==null?!0:Lf(o,c)}function HO(o,c,l){return o==null?o:qy(o,c,Df(l))}function YO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:qy(o,c,Df(l),p)}function Io(o){return o==null?[]:yf(o,yn(o))}function QO(o){return o==null?[]:yf(o,qn(o))}function JO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Cr(l),l=l===l?l:0),c!==t&&(c=Cr(c),c=c===c?c:0),Ts(Cr(o),c,l)}function XO(o,c,l){return c=Ri(c),l===t?(l=c,c=0):l=Ri(l),o=Cr(o),ik(o,c,l)}function ZO(o,c,l){if(l&&typeof l!="boolean"&&Dn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Ri(o),c===t?(c=o,o=0):c=Ri(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=Sy();return Tn(o+b*(c-o+BA("1e-"+((b+"").length-1))),c)}return xf(o,c)}var eP=So(function(o,c,l){return c=c.toLowerCase(),o+(l?Zm(c):c)});function Zm(o){return sh(ct(o).toLowerCase())}function eb(o){return o=ct(o),o&&o.replace(nA,$A).replace(wA,"")}function tP(o,c,l){o=ct(o),c=lr(c);var p=o.length;l=l===t?p:Ts(ze(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function nP(o){return o=ct(o),o&&KS.test(o)?o.replace(Bg,jA):o}function rP(o){return o=ct(o),o&&VS.test(o)?o.replace(Zd,"\\$&"):o}var iP=So(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),sP=So(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),oP=rm("toLowerCase");function aP(o,c,l){o=ct(o),c=ze(c);var p=c?go(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return Su(uu(b),l)+o+Su(cu(b),l)}function cP(o,c,l){o=ct(o),c=ze(c);var p=c?go(o):0;return c&&p<c?o+Su(c-p,l):o}function uP(o,c,l){o=ct(o),c=ze(c);var p=c?go(o):0;return c&&p<c?Su(c-p,l)+o:o}function lP(o,c,l){return l||c==null?c=0:c&&(c=+c),m1(ct(o).replace(ef,""),c||0)}function dP(o,c,l){return(l?Dn(o,c,l):c===t)?c=1:c=ze(c),Cf(ct(o),c)}function fP(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var hP=So(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function pP(o,c,l){return l&&typeof l!="number"&&Dn(o,c,l)&&(c=l=t),l=l===t?we:l>>>0,l?(o=ct(o),o&&(typeof c=="string"||c!=null&&!nh(c))&&(c=lr(c),!c&&po(o))?Ji(qr(o),0,l):o.split(c,l)):[]}var gP=So(function(o,c,l){return o+(l?" ":"")+sh(c)});function yP(o,c,l){return o=ct(o),l=l==null?0:Ts(ze(l),0,o.length),c=lr(c),o.slice(l,l+c.length)==c}function mP(o,c,l){var p=_.templateSettings;l&&Dn(o,c,l)&&(c=t),o=ct(o),c=Mu({},c,p,lm);var b=Mu({},c.imports,p.imports,lm),w=yn(b),P=yf(b,w),B,U,ne=0,re=c.interpolate||Gc,ce="__p += '",ye=bf((c.escape||Gc).source+"|"+re.source+"|"+(re===xg?QS:Gc).source+"|"+(c.evaluate||Gc).source+"|$","g"),Se="//# sourceURL="+(ft.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EA+"]")+`
`;o.replace(ye,function(xe,He,Je,fr,Un,hr){return Je||(Je=fr),ce+=o.slice(ne,hr).replace(rA,qA),He&&(B=!0,ce+=`' +
__e(`+He+`) +
'`),Un&&(U=!0,ce+=`';
`+Un+`;
__p += '`),Je&&(ce+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),ne=hr+xe.length,xe}),ce+=`';
`;var Be=ft.call(c,"variable")&&c.variable;if(!Be)ce=`with (obj) {
`+ce+`
}
`;else if(HS.test(Be))throw new Ke(u);ce=(U?ce.replace(dt,""):ce).replace(CS,"$1").replace(MS,"$1;"),ce="function("+(Be||"obj")+`) {
`+(Be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Ve=nb(function(){return st(w,Se+"return "+ce).apply(t,P)});if(Ve.source=ce,th(Ve))throw Ve;return Ve}function bP(o){return ct(o).toLowerCase()}function vP(o){return ct(o).toUpperCase()}function _P(o,c,l){if(o=ct(o),o&&(l||c===t))return dy(o);if(!o||!(c=lr(c)))return o;var p=qr(o),b=qr(c),w=fy(p,b),P=hy(p,b)+1;return Ji(p,w,P).join("")}function wP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.slice(0,gy(o)+1);if(!o||!(c=lr(c)))return o;var p=qr(o),b=hy(p,qr(c))+1;return Ji(p,0,b).join("")}function SP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.replace(ef,"");if(!o||!(c=lr(c)))return o;var p=qr(o),b=fy(p,qr(c));return Ji(p,b).join("")}function AP(o,c){var l=K,p=j;if(Lt(c)){var b="separator"in c?c.separator:b;l="length"in c?ze(c.length):l,p="omission"in c?lr(c.omission):p}o=ct(o);var w=o.length;if(po(o)){var P=qr(o);w=P.length}if(l>=w)return o;var B=l-go(p);if(B<1)return p;var U=P?Ji(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),nh(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=bf(b.source,ct(Cg.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(lr(b),B)!=B){var ye=U.lastIndexOf(b);ye>-1&&(U=U.slice(0,ye))}return U+p}function kP(o){return o=ct(o),o&&LS.test(o)?o.replace(Rg,ZA):o}var IP=So(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),sh=rm("toUpperCase");function tb(o,c,l){return o=ct(o),c=l?t:c,c===t?HA(o)?n1(o):UA(o):o.match(c)||[]}var nb=qe(function(o,c){try{return cr(o,t,c)}catch(l){return th(l)?l:new Ke(l)}}),EP=Oi(function(o,c){return Or(c,function(l){l=ci(l),Ii(o,l,Zf(o[l],o))}),o});function OP(o){var c=o==null?0:o.length,l=Te();return o=c?Rt(o,function(p){if(typeof p[1]!="function")throw new Pr(a);return[l(p[0]),p[1]]}):[],qe(function(p){for(var b=-1;++b<c;){var w=o[b];if(cr(w[0],this,p))return cr(w[1],this,p)}})}function PP(o){return Z1(Rr(o,m))}function oh(o){return function(){return o}}function TP(o,c){return o==null||o!==o?c:o}var RP=sm(),BP=sm(!0);function Gn(o){return o}function ah(o){return Ly(typeof o=="function"?o:Rr(o,m))}function xP(o){return Ny(Rr(o,m))}function CP(o,c){return Dy(o,Rr(c,m))}var MP=qe(function(o,c){return function(l){return Na(l,o,c)}}),LP=qe(function(o,c){return function(l){return Na(o,l,c)}});function ch(o,c,l){var p=yn(c),b=gu(c,p);l==null&&!(Lt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=gu(c,yn(c)));var w=!(Lt(l)&&"chain"in l)||!!l.chain,P=Ti(o);return Or(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=$n(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,ji([this.value()],arguments))})}),o}function KP(){return _n._===this&&(_n._=c1),this}function uh(){}function NP(o){return o=ze(o),qe(function(c){return Uy(c,o)})}var DP=Ff(Rt),UP=Ff(oy),FP=Ff(df);function rb(o){return Gf(o)?ff(ci(o)):yk(o)}function zP(o){return function(c){return o==null?t:Rs(o,c)}}var VP=am(),WP=am(!0);function lh(){return[]}function dh(){return!1}function $P(){return{}}function jP(){return""}function qP(){return!0}function GP(o,c){if(o=ze(o),o<1||o>Oe)return[];var l=we,p=Tn(o,we);c=Te(c),o-=we;for(var b=gf(p,c);++l<o;)c(l);return b}function HP(o){return De(o)?Rt(o,ci):dr(o)?[o]:$n(Am(ct(o)))}function YP(o){var c=++o1;return ct(o)+c}var QP=wu(function(o,c){return o+c},0),JP=zf("ceil"),XP=wu(function(o,c){return o/c},1),ZP=zf("floor");function eT(o){return o&&o.length?pu(o,Gn,Ef):t}function tT(o,c){return o&&o.length?pu(o,Te(c,2),Ef):t}function nT(o){return uy(o,Gn)}function rT(o,c){return uy(o,Te(c,2))}function iT(o){return o&&o.length?pu(o,Gn,Rf):t}function sT(o,c){return o&&o.length?pu(o,Te(c,2),Rf):t}var oT=wu(function(o,c){return o*c},1),aT=zf("round"),cT=wu(function(o,c){return o-c},0);function uT(o){return o&&o.length?pf(o,Gn):0}function lT(o,c){return o&&o.length?pf(o,Te(c,2)):0}return _.after=xE,_.ary=Mm,_.assign=vO,_.assignIn=Hm,_.assignInWith=Mu,_.assignWith=_O,_.at=wO,_.before=Lm,_.bind=Zf,_.bindAll=EP,_.bindKey=Km,_.castArray=$E,_.chain=Bm,_.chunk=Zk,_.compact=eI,_.concat=tI,_.cond=OP,_.conforms=PP,_.constant=oh,_.countBy=uE,_.create=SO,_.curry=Nm,_.curryRight=Dm,_.debounce=Um,_.defaults=AO,_.defaultsDeep=kO,_.defer=CE,_.delay=ME,_.difference=nI,_.differenceBy=rI,_.differenceWith=iI,_.drop=sI,_.dropRight=oI,_.dropRightWhile=aI,_.dropWhile=cI,_.fill=uI,_.filter=dE,_.flatMap=pE,_.flatMapDeep=gE,_.flatMapDepth=yE,_.flatten=Om,_.flattenDeep=lI,_.flattenDepth=dI,_.flip=LE,_.flow=RP,_.flowRight=BP,_.fromPairs=fI,_.functions=BO,_.functionsIn=xO,_.groupBy=mE,_.initial=pI,_.intersection=gI,_.intersectionBy=yI,_.intersectionWith=mI,_.invert=MO,_.invertBy=LO,_.invokeMap=vE,_.iteratee=ah,_.keyBy=_E,_.keys=yn,_.keysIn=qn,_.map=Pu,_.mapKeys=NO,_.mapValues=DO,_.matches=xP,_.matchesProperty=CP,_.memoize=Ru,_.merge=UO,_.mergeWith=Ym,_.method=MP,_.methodOf=LP,_.mixin=ch,_.negate=Bu,_.nthArg=NP,_.omit=FO,_.omitBy=zO,_.once=KE,_.orderBy=wE,_.over=DP,_.overArgs=NE,_.overEvery=UP,_.overSome=FP,_.partial=eh,_.partialRight=Fm,_.partition=SE,_.pick=VO,_.pickBy=Qm,_.property=rb,_.propertyOf=zP,_.pull=wI,_.pullAll=Tm,_.pullAllBy=SI,_.pullAllWith=AI,_.pullAt=kI,_.range=VP,_.rangeRight=WP,_.rearg=DE,_.reject=IE,_.remove=II,_.rest=UE,_.reverse=Jf,_.sampleSize=OE,_.set=$O,_.setWith=jO,_.shuffle=PE,_.slice=EI,_.sortBy=BE,_.sortedUniq=CI,_.sortedUniqBy=MI,_.split=pP,_.spread=FE,_.tail=LI,_.take=KI,_.takeRight=NI,_.takeRightWhile=DI,_.takeWhile=UI,_.tap=eE,_.throttle=zE,_.thru=Ou,_.toArray=jm,_.toPairs=Jm,_.toPairsIn=Xm,_.toPath=HP,_.toPlainObject=Gm,_.transform=qO,_.unary=VE,_.union=FI,_.unionBy=zI,_.unionWith=VI,_.uniq=WI,_.uniqBy=$I,_.uniqWith=jI,_.unset=GO,_.unzip=Xf,_.unzipWith=Rm,_.update=HO,_.updateWith=YO,_.values=Io,_.valuesIn=QO,_.without=qI,_.words=tb,_.wrap=WE,_.xor=GI,_.xorBy=HI,_.xorWith=YI,_.zip=QI,_.zipObject=JI,_.zipObjectDeep=XI,_.zipWith=ZI,_.entries=Jm,_.entriesIn=Xm,_.extend=Hm,_.extendWith=Mu,ch(_,_),_.add=QP,_.attempt=nb,_.camelCase=eP,_.capitalize=Zm,_.ceil=JP,_.clamp=JO,_.clone=jE,_.cloneDeep=GE,_.cloneDeepWith=HE,_.cloneWith=qE,_.conformsTo=YE,_.deburr=eb,_.defaultTo=TP,_.divide=XP,_.endsWith=tP,_.eq=Hr,_.escape=nP,_.escapeRegExp=rP,_.every=lE,_.find=fE,_.findIndex=Im,_.findKey=IO,_.findLast=hE,_.findLastIndex=Em,_.findLastKey=EO,_.floor=ZP,_.forEach=xm,_.forEachRight=Cm,_.forIn=OO,_.forInRight=PO,_.forOwn=TO,_.forOwnRight=RO,_.get=rh,_.gt=QE,_.gte=JE,_.has=CO,_.hasIn=ih,_.head=Pm,_.identity=Gn,_.includes=bE,_.indexOf=hI,_.inRange=XO,_.invoke=KO,_.isArguments=Cs,_.isArray=De,_.isArrayBuffer=XE,_.isArrayLike=jn,_.isArrayLikeObject=jt,_.isBoolean=ZE,_.isBuffer=Xi,_.isDate=eO,_.isElement=tO,_.isEmpty=nO,_.isEqual=rO,_.isEqualWith=iO,_.isError=th,_.isFinite=sO,_.isFunction=Ti,_.isInteger=zm,_.isLength=xu,_.isMap=Vm,_.isMatch=oO,_.isMatchWith=aO,_.isNaN=cO,_.isNative=uO,_.isNil=dO,_.isNull=lO,_.isNumber=Wm,_.isObject=Lt,_.isObjectLike=Ut,_.isPlainObject=Wa,_.isRegExp=nh,_.isSafeInteger=fO,_.isSet=$m,_.isString=Cu,_.isSymbol=dr,_.isTypedArray=ko,_.isUndefined=hO,_.isWeakMap=pO,_.isWeakSet=gO,_.join=bI,_.kebabCase=iP,_.last=xr,_.lastIndexOf=vI,_.lowerCase=sP,_.lowerFirst=oP,_.lt=yO,_.lte=mO,_.max=eT,_.maxBy=tT,_.mean=nT,_.meanBy=rT,_.min=iT,_.minBy=sT,_.stubArray=lh,_.stubFalse=dh,_.stubObject=$P,_.stubString=jP,_.stubTrue=qP,_.multiply=oT,_.nth=_I,_.noConflict=KP,_.noop=uh,_.now=Tu,_.pad=aP,_.padEnd=cP,_.padStart=uP,_.parseInt=lP,_.random=ZO,_.reduce=AE,_.reduceRight=kE,_.repeat=dP,_.replace=fP,_.result=WO,_.round=aT,_.runInContext=D,_.sample=EE,_.size=TE,_.snakeCase=hP,_.some=RE,_.sortedIndex=OI,_.sortedIndexBy=PI,_.sortedIndexOf=TI,_.sortedLastIndex=RI,_.sortedLastIndexBy=BI,_.sortedLastIndexOf=xI,_.startCase=gP,_.startsWith=yP,_.subtract=cT,_.sum=uT,_.sumBy=lT,_.template=mP,_.times=GP,_.toFinite=Ri,_.toInteger=ze,_.toLength=qm,_.toLower=bP,_.toNumber=Cr,_.toSafeInteger=bO,_.toString=ct,_.toUpper=vP,_.trim=_P,_.trimEnd=wP,_.trimStart=SP,_.truncate=AP,_.unescape=kP,_.uniqueId=YP,_.upperCase=IP,_.upperFirst=sh,_.each=xm,_.eachRight=Cm,_.first=Pm,ch(_,function(){var o={};return oi(_,function(c,l){ft.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,Or(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),Or(["drop","take"],function(o,c){Qe.prototype[o]=function(l){l=l===t?1:an(ze(l),0);var p=this.__filtered__&&!c?new Qe(this):this.clone();return p.__filtered__?p.__takeCount__=Tn(l,p.__takeCount__):p.__views__.push({size:Tn(l,we),type:o+(p.__dir__<0?"Right":"")}),p},Qe.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),Or(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==V||l==Ce;Qe.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Te(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),Or(["head","last"],function(o,c){var l="take"+(c?"Right":"");Qe.prototype[o]=function(){return this[l](1).value()[0]}}),Or(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Qe.prototype[o]=function(){return this.__filtered__?new Qe(this):this[l](1)}}),Qe.prototype.compact=function(){return this.filter(Gn)},Qe.prototype.find=function(o){return this.filter(o).head()},Qe.prototype.findLast=function(o){return this.reverse().find(o)},Qe.prototype.invokeMap=qe(function(o,c){return typeof o=="function"?new Qe(this):this.map(function(l){return Na(l,o,c)})}),Qe.prototype.reject=function(o){return this.filter(Bu(Te(o)))},Qe.prototype.slice=function(o,c){o=ze(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Qe(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=ze(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Qe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qe.prototype.toArray=function(){return this.take(we)},oi(Qe.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof Qe,ne=B[0],re=U||De(P),ce=function(He){var Je=b.apply(_,ji([He],B));return p&&ye?Je[0]:Je};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ye=this.__chain__,Se=!!this.__actions__.length,Be=w&&!ye,Ve=U&&!Se;if(!w&&re){P=Ve?P:new Qe(this);var xe=o.apply(P,B);return xe.__actions__.push({func:Ou,args:[ce],thisArg:t}),new Tr(xe,ye)}return Be&&Ve?o.apply(this,B):(xe=this.thru(ce),Be?p?xe.value()[0]:xe.value():xe)})}),Or(["pop","push","shift","sort","splice","unshift"],function(o){var c=Zc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(De(w)?w:[],b)}return this[l](function(P){return c.apply(De(P)?P:[],b)})}}),oi(Qe.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";ft.call(vo,p)||(vo[p]=[]),vo[p].push({name:c,func:l})}}),vo[_u(t,M).name]=[{name:"wrapper",func:t}],Qe.prototype.clone=k1,Qe.prototype.reverse=I1,Qe.prototype.value=E1,_.prototype.at=tE,_.prototype.chain=nE,_.prototype.commit=rE,_.prototype.next=iE,_.prototype.plant=oE,_.prototype.reverse=aE,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=cE,_.prototype.first=_.prototype.head,Ra&&(_.prototype[Ra]=sE),_},yo=r1();Is?((Is.exports=yo)._=yo,af._=yo):_n._=yo}).call(z)})(Kl,Kl.exports);var xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.OrderCacheService=void 0;const wv=Kl.exports,ui=oS,Sv=yd,Qu=Ea;class MD{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,ui.observable)([]),this.observableData=(0,ui.makeAutoObservable)(this.observableData),(0,ui.makeObservable)(this,{buyOrdersCache:ui.computed,sellOrdersCache:ui.computed,allOrdersCache:ui.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,wv.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,ui.runInAction)(()=>{this.orderChanges.push({eventType:Qu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===Sv.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,ui.runInAction)(()=>{this.orderChanges.push({eventType:Qu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,wv.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,ui.runInAction)(()=>{this.orderChanges.push({eventType:Qu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,ui.runInAction)(()=>{this.orderChanges.push({eventType:Qu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===Sv.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}xd.OrderCacheService=MD;var Oa={},Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});Cd.createTransactionFromInstructions=void 0;const LD=Fi,KD=r=>{const e=new LD.Transaction;return e.add(...r),e};Cd.createTransactionFromInstructions=KD;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.TEN_THOUSAND=pa.ONE_MILLION=void 0;pa.ONE_MILLION=1e6;pa.TEN_THOUSAND=1e4;var Hn=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.GmClientService=void 0;const es=Fi,Ju=lg,xi=ms,Kh=Cd,Av=$r,To=yd,kv=pa,ND=sr,DD=zl;class UD{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return Hn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,xi.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:d,royalty:h,saVault:f}=u,m=yield e.getTokenSupply(d,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:d.toString(),royaltyPercentageAsDecimal:h.toNumber()/kv.ONE_MILLION,saVault:f.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return Hn(this,void 0,void 0,function*(){const n=yield(0,xi.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return Hn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return Hn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return Hn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return Hn(this,void 0,void 0,function*(){const s=yield(0,xi.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return Hn(this,void 0,void 0,function*(){const s=yield(0,xi.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return Hn(this,void 0,void 0,function*(){const i=yield(0,xi.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,d){return Hn(this,void 0,void 0,function*(){let h=Ju.createInitializeSellOrderInstruction,f=n,m=i;d===To.OrderSide.Buy&&(h=Ju.createInitializeBuyOrderInstruction,f=i,m=n);const I=yield(0,Av.getAssociatedTokenAddress)(t,f),{ixSet:O}=yield h({connection:e,depositMint:f,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:C,instructions:A}=O;return{transaction:(0,Kh.createTransactionFromInstructions)(A),signers:C}})}getBnPriceForCurrency(e,t,n,i){return Hn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,ND.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return Hn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Ju.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,Kh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new es.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new es.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return Hn(this,void 0,void 0,function*(){const d=new es.PublicKey(t.id),h=new es.PublicKey(t.orderMint),f=new es.PublicKey(t.currencyMint),m=new es.PublicKey(t.owner),I=t.orderType===To.OrderSide.Buy?n:new es.PublicKey(t.owner),O=yield(0,Av.getAssociatedTokenAddress)(n,t.orderType===To.OrderSide.Buy?h:f),C=yield this.getRegisteredCurrencies(e,s),{saVault:A}=C.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,DD.getStakingAccount)(a,I,u),{instructions:M,signers:Y}=yield(0,Ju.createExchangeInstruction)({connection:e,orderAccount:d,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:f,orderInitializer:m,saVault:new es.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,Kh.createTransactionFromInstructions)(M),signers:Y}})}accountItemsToOrders(e,t,n,i){return Hn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),d=Object.keys(a.account.orderSide)[0]==="buy"?To.OrderSide.Buy:To.OrderSide.Sell,h=a.account.assetMint.toString(),f=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),C=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),M=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===f);return new To.Order({id:u,orderType:d,orderMint:h,currencyMint:f,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:C,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:M,slotContext:i})})})}getAllFeeExemptions(e,t){return Hn(this,void 0,void 0,function*(){const n=[],i=yield(0,xi.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/kv.TEN_THOUSAND});return n})}}Oa.GmClientService=UD;var Wc={},Xu=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.GmEventService=void 0;const Ha=bt,Nh=gd,Dh=Ea,FD=Oa,zD=sr,Zu=Ea;class VD{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Xu(this,void 0,void 0,function*(){this.idl=(0,zD.getGmLogsIDL)(this.programId),this.provider=new Ha.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Ha.Program(this.idl,this.programId,this.provider,{instruction:new Ha.BorshInstructionCoder(this.idl),accounts:new Ha.BorshAccountsCoder(this.idl),state:null,events:new Ha.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Zu.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Zu.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Zu.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Zu.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Xu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Xu(this,void 0,void 0,function*(){const t=yield new FD.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new Nh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?Nh.OrderSide.Buy:Nh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(Dh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(Dh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(Dh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Xu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Wc.GmEventService=VD;var Ro=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Rd,"__esModule",{value:!0});Rd.GmOrderbookService=void 0;const WD=CD,$D=Kl.exports,jD=xd,Uh=Ea,Iv=Oa,Ev=Wc;class Md{constructor(e,t,n=60){this.gmClientService=new Iv.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new jD.OrderCacheService,this.gmClientService=new Iv.GmClientService,this.gmEventService=new Ev.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return Ro(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,WD.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},Md.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return Ro(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return Ro(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return Ro(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new Ev.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return Ro(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,$D.pull)(this.eventCallBacks,e)}loadInitialOrders(){return Ro(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case Uh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case Uh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case Uh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}Rd.GmOrderbookService=Md;Md.HEALTH_CHECK_RATE=5e3;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Rd,r),t(Oa,r),t(Wc,r)})(hS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(lg,r),t(ms,r),t(Ea,r),t(sr,r),t(gd,r),t(hS,r)})(ug);var vS=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.createAccountTransaction=Gs.createAccountInstruction=void 0;const Nl=bt,kp=Fi,_S=ug;function qD(r,e,t,n){return vS(this,void 0,void 0,function*(){const i=(0,_S.getGmIDL)(n),s=new Nl.AnchorProvider(r,null,null),a=new Nl.Program(i,n,s);return kp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}Gs.createAccountInstruction=qD;function GD(r,e,t,n){return vS(this,void 0,void 0,function*(){const i=(0,_S.getGmIDL)(n),s=new Nl.AnchorProvider(r,null,null),a=new Nl.Program(i,n,s),u=new kp.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(kp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}Gs.createAccountTransaction=GD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(un,r),t(ud,r),t(Gs,r)})($r);var HD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.harvestRewardsInstruction=void 0;const YD=bt,QD=no,JD=$r,XD=ir;function ZD({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return HD(this,void 0,void 0,function*(){const a=(0,XD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let d=null,h=null;const f=yield(0,JD.getTokenAccount)(r,e,t);d=f.tokenAccount,"createInstruction"in f&&u.instructions.push(...f.createInstruction),d instanceof YD.web3.Keypair?(h=d.publicKey,u.signers.push(d)):h=d;const m=yield(0,QD.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}Ql.harvestRewardsInstruction=ZD;var Ld={},e2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.createInitializeStakingInstruction=void 0;const t2=ir;function n2({connection:r,updateAuthorityAccount:e,programId:t}){return e2(this,void 0,void 0,function*(){const n=(0,t2.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}Ld.createInitializeStakingInstruction=n2;var Kd={},Nd={},zn={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ESCROW_AUTH=Sn.STAKING_VARS=Sn.STAKING_ESCROW=Sn.STAKING_ACCOUNT=Sn.REWARD_AUTH=Sn.REWARD_ACCOUNT=Sn.REGISTERED_STAKE=void 0;Sn.REGISTERED_STAKE=Re.Buffer.from("registered-stake");Sn.REWARD_ACCOUNT=Re.Buffer.from("reward-account");Sn.REWARD_AUTH=Re.Buffer.from("reward-vault-authority");Sn.STAKING_ACCOUNT=Re.Buffer.from("staking-account");Sn.STAKING_ESCROW=Re.Buffer.from("staking-escrow");Sn.STAKING_VARS=Re.Buffer.from("staking-vars");Sn.ESCROW_AUTH=Re.Buffer.from("escrow-auth");var Pa=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(zn,"__esModule",{value:!0});zn.getRewardAuth=zn.getTokenEscrow=zn.getStakingVarsAccount=zn.getStakingAccountsForRegisteredStake=zn.getStakingAccount=zn.getRegisteredStake=void 0;const Ov=bt,$c=Fi,r2=ir,jc=Sn;function i2(r,e,t,n){return Pa(this,void 0,void 0,function*(){return $c.PublicKey.findProgramAddress([jc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}zn.getRegisteredStake=i2;function s2(r,e,t){return Pa(this,void 0,void 0,function*(){return $c.PublicKey.findProgramAddress([jc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}zn.getStakingAccount=s2;function o2(r,e,t){return Pa(this,void 0,void 0,function*(){const n=new Ov.AnchorProvider(r,null,null),i=(0,r2.getStakingIdl)(e),s=new Ov.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}zn.getStakingAccountsForRegisteredStake=o2;function a2(r){return Pa(this,void 0,void 0,function*(){return $c.PublicKey.findProgramAddress([jc.STAKING_VARS],r)})}zn.getStakingVarsAccount=a2;function c2(r,e,t){return Pa(this,void 0,void 0,function*(){return $c.PublicKey.findProgramAddress([jc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}zn.getTokenEscrow=c2;function u2(r,e){return Pa(this,void 0,void 0,function*(){return $c.PublicKey.findProgramAddress([jc.REWARD_AUTH,e.toBuffer()],r)})}zn.getRewardAuth=u2;var us={},Pg=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(us,"__esModule",{value:!0});us.getStakingVarsAccountInfo=us.getStakingAccountInfo=us.getRegisteredStakeAccountInfo=void 0;const Tg=$s,l2=zn;function d2(r,e,t){return Pg(this,void 0,void 0,function*(){return yield(0,Tg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}us.getRegisteredStakeAccountInfo=d2;function f2(r,e,t){return Pg(this,void 0,void 0,function*(){return yield(0,Tg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}us.getStakingAccountInfo=f2;function h2(r,e){return Pg(this,void 0,void 0,function*(){const t=(0,Tg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,l2.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}us.getStakingVarsAccountInfo=h2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(zn,r),t(us,r),t(Sn,r)})(Nd);var p2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.registerStakeInstruction=void 0;const Pv=bt,g2=no,y2=Nd,m2=ir;function b2({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return p2(this,void 0,void 0,function*(){const u=(0,m2.getStakingProgram)({connection:r,programId:a}),d={instructions:[],signers:[]},[h]=yield(0,y2.getRegisteredStake)(a,e,n,i),f=yield(0,g2.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new Pv.BN(t),new Pv.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:f}).instruction();return d.instructions.push(m),d})}Kd.registerStakeInstruction=b2;var Dd={},v2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.createSettleStakingAccountInstruction=void 0;const _2=ir;function w2({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return v2(this,void 0,void 0,function*(){const a=(0,_2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},d=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(d),u})}Dd.createSettleStakingAccountInstruction=w2;var Ud={},S2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.stakeTokensInstruction=void 0;const A2=no,k2=ir;function I2({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return S2(this,void 0,void 0,function*(){const d=(0,k2.getStakingProgram)({connection:r,programId:u}),h=yield(0,A2.associatedAddress)({owner:a,mint:t}),f={instructions:[],signers:[]},m=yield d.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return f.instructions.push(m),f})}Ud.stakeTokensInstruction=I2;var Fd={},E2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.unstakeTokensInstruction=void 0;const O2=bt,P2=no,T2=$r,R2=Nd,B2=ir;function x2({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return E2(this,void 0,void 0,function*(){const s=(0,B2.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},d=(yield(0,R2.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,f=null;const m=yield(0,T2.getTokenAccount)(r,e,d);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof O2.web3.Keypair?(f=h.publicKey,a.signers.push(h)):f=h;const I=yield(0,P2.associatedAddress)({owner:t,mint:d}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:d,registeredStake:t,stakingAccount:n,userRewardAccount:f,rewardAta:I}).instruction();return a.instructions.push(O),a})}Fd.unstakeTokensInstruction=x2;var zd={},C2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(zd,"__esModule",{value:!0});zd.updateCooldownPeriodInstruction=void 0;const M2=bt,L2=ir;function K2({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return C2(this,void 0,void 0,function*(){const s=(0,L2.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new M2.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}zd.updateCooldownPeriodInstruction=K2;var Vd={},N2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.updateRewardMultiplierInstruction=void 0;const D2=bt,U2=ir;function F2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return N2(this,void 0,void 0,function*(){const a=(0,U2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},d=yield a.methods.updateRewardMultiplier(new D2.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(d),u})}Vd.updateRewardMultiplierInstruction=F2;var Wd={},z2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.withdrawTokensInstruction=void 0;const V2=bt,W2=no,$2=ir,j2=$r;function q2({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return z2(this,void 0,void 0,function*(){const u=(0,$2.getStakingProgram)({connection:r,programId:a}),d=yield(0,W2.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,j2.getTokenAccount)(r,t,n);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof V2.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:d}).instruction();return h.instructions.push(O),h})}Wd.withdrawTokensInstruction=q2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(t_,r),t(Vl,r),t(Yl,r),t(Ql,r),t(Ld,r),t(Kd,r),t(Dd,r),t(Ud,r),t(Fd,r),t(zd,r),t(Vd,r),t(Wd,r)})(e_);var wS={},SS={};Object.defineProperty(SS,"__esModule",{value:!0});(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Pc,r),t(SS,r)})(wS);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(e_,r),t(Nd,r),t(wS,r),t(ir,r)})(zl);var AS={};(function(r){var e=z&&z.__awaiter||function(m,I,O,C){function A(R){return R instanceof O?R:new O(function(M){M(R)})}return new(O||(O=Promise))(function(R,M){function Y(fe){try{oe(C.next(fe))}catch(E){M(E)}}function ae(fe){try{oe(C.throw(fe))}catch(E){M(E)}}function oe(fe){fe.done?R(fe.value):A(fe.value).then(Y,ae)}oe((C=C.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=bt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Re.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,C){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,C),M=s(C),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(M,C,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function d(m,I,O){return e(this,void 0,void 0,function*(){const C=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,C),[M]=yield a(I,O);return yield R.account.playerFactionData.fetch(M)})}r.getPlayer=d;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),C=s(I);return(yield new t.Program(C,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function f(m,I,O){return e(this,void 0,void 0,function*(){const C=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,C).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=f})(AS);var kS={},$d={};Object.defineProperty($d,"__esModule",{value:!0});$d.gumDropIdl=void 0;$d.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=z&&z.__createBinding||(Object.create?function(A,R,M,Y){Y===void 0&&(Y=M);var ae=Object.getOwnPropertyDescriptor(R,M);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[M]}}),Object.defineProperty(A,Y,ae)}:function(A,R,M,Y){Y===void 0&&(Y=M),A[Y]=R[M]}),t=z&&z.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=z&&z.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var M in A)M!=="default"&&Object.prototype.hasOwnProperty.call(A,M)&&e(R,A,M);return t(R,A),R},i=z&&z.__awaiter||function(A,R,M,Y){function ae(oe){return oe instanceof M?oe:new M(function(fe){fe(oe)})}return new(M||(M=Promise))(function(oe,fe){function E(Q){try{W(Y.next(Q))}catch(K){fe(K)}}function N(Q){try{W(Y.throw(Q))}catch(K){fe(K)}}function W(Q){Q.done?oe(Q.value):ae(Q.value).then(E,N)}W((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=bt,a=Rc,u=n(Ge),d=un,h=$d,f=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,M=f)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Re.Buffer.from("ClaimStatus"),A.toArrayLike(Re.Buffer,"le",8),R.toBuffer()],M)});r.getClaimStatusKey=m;const I=(A,R,M,Y=f)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),fe=yield(0,r.getClaimStatusKey)(R,M,Y);try{return yield oe.account.claimStatus.fetch(fe[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,M,Y=f)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),fe=R.map(W=>(0,r.getClaimStatusKey)(W,M,Y)),E=(yield Promise.all(fe)).map(W=>W[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const C=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:M,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(M.split("?")[1]),fe=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),W=oe.get("index"),Q=oe.get("proof"),K=oe.get("tokenAcc");if(!fe||!E||!N||!W||!Q||!K)throw new Error("Invalid claim");const j=Q===""?[]:Q.split(",").map(kr=>{const $t=Re.Buffer.from(u.decode(kr));if($t.length!==32)throw new Error("Invalid proof hash length");return $t}),te=new s.web3.PublicKey(fe),T=new s.web3.PublicKey(K),V=yield R.getAccountInfo(T);if(V===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(V.data),Ce=new s.web3.PublicKey(X.mint),me=new s.web3.PublicKey(E),Oe=yield(0,d.getAssociatedTokenAddress)(me,Ce),Yt=yield R.getParsedTokenAccountsByOwner(me,{mint:Ce}),Qt=new s.BN(W),we=new s.BN(N),[je,sn]=yield(0,r.getClaimStatusKey)(Qt,te,ae),gn=new s.AnchorProvider(R,null,null),Ot=new s.Program(h.gumDropIdl,ae,gn),pt=[];return Yt.value.length===0&&pt.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Ce,Oe,me,Y)),pt.push(Ot.instruction.claim(sn,Qt,we,Y,j,{accounts:{distributor:te,claimStatus:je,from:T,to:Oe,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),pt});r.claimTokenInstructions=C})(kS);var ve={},jd={};Object.defineProperty(jd,"__esModule",{value:!0});jd.baseIdl=void 0;jd.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var qd={};Object.defineProperty(qd,"__esModule",{value:!0});qd.scoreLogBaseIdl=void 0;qd.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var at=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ve,"__esModule",{value:!0});ve.closeAccountsInstruction=ve.createWithdrawShipsInstruction=ve.createWithdrawArmsInstruction=ve.createWithdrawFoodInstruction=ve.createWithdrawFuelInstruction=ve.createHarvestInstruction=ve.createSettleInstruction=ve.createRepairInstruction=ve.createRefuelInstruction=ve.createRefeedInstruction=ve.createRearmInstruction=ve.createPartialDepositInstruction=ve.createInitialDepositInstruction=ve.createUpdateRewardRateInstruction=ve.createDeregisterShipInstruction=ve.createRegisterShipInstruction=ve.createScoreVarsInitializeInstruction=ve.getAllFleetsForUserPublicKey=ve.getAllFleets=ve.getAllRegisteredShips=ve.getScoreTreasuryAuthAccount=ve.getScoreTreasuryTokenAccount=ve.getScoreVarsShipInfo=ve.decodeEvent=ve.getShipStakingAccountInfo=ve.getScoreVarsInfo=ve.getShipStakingAccount=ve.getScoreEscrowAuthAccount=ve.getScoreEscrowAccount=ve.getScoreVarsShipAccount=ve.getScoreVarsAccount=ve.getScoreIDL=void 0;const ue=bt,Ar=Rc,IS=Fi,G2=ts,H2=jd,Y2=qd,Ws=$r;function Mt(r){const e=H2.baseIdl;return e.metadata.address=r.toBase58(),e}ve.getScoreIDL=Mt;function Ln(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCOREVARS")],r)})}ve.getScoreVarsAccount=Ln;function In(r,e){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}ve.getScoreVarsShipAccount=In;function tr(r,e,t,n){return at(this,void 0,void 0,function*(){const i=[Re.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}ve.getScoreEscrowAccount=tr;function ii(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}ve.getScoreEscrowAuthAccount=ii;function Kn(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}ve.getShipStakingAccount=Kn;function Q2(r,e){return at(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Mt(e),i=new ue.Program(n,e,t),[s]=yield Ln(e);return yield i.account.scoreVars.fetch(s)})}ve.getScoreVarsInfo=Q2;function J2(r,e,t,n){return at(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Mt(e),a=new ue.Program(s,e,i),[u]=yield Kn(e,t,n);return yield a.account.shipStaking.fetch(u)})}ve.getShipStakingAccountInfo=J2;function X2(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(Y2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}ve.decodeEvent=X2;function Z2(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Mt(e),s=new ue.Program(i,e,n),[a]=yield In(e,t);return yield s.account.scoreVarsShip.fetch(a)})}ve.getScoreVarsShipInfo=Z2;function Gd(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCORE_TREASURY")],r)})}ve.getScoreTreasuryTokenAccount=Gd;function Hd(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Re.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}ve.getScoreTreasuryAuthAccount=Hd;function eU(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}ve.getAllRegisteredShips=eU;function tU(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}ve.getAllFleets=tU;function nU(r,e,t){return at(this,void 0,void 0,function*(){const n=Mt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const f of a){const[m]=yield Kn(t,f.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(f=>f!==null).map(f=>f)})}ve.getAllFleetsForUserPublicKey=nU;function rU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const d=Mt(u),h=new ue.AnchorProvider(r,null,null),f=new ue.Program(d,u,h),[m,I]=yield Gd(u),[O,C]=yield Hd(u),[A,R]=yield Ln(u);return yield f.instruction.processInitialize(R,I,C,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:Ar.TOKEN_PROGRAM_ID,systemProgram:IS.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}ve.createScoreVarsInitializeInstruction=rU;function iU(r,e,t,n,i,s,a,u,d,h,f,m,I){return at(this,void 0,void 0,function*(){const O=Mt(I),C=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,C),[R,M]=yield In(I,t),[Y,ae]=yield Ln(I);return yield A.instruction.processRegisterShip(ae,M,new ue.BN(m),n,i,s,a,u,d,h,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:IS.SystemProgram.programId},signers:[]})})}ve.createRegisterShipInstruction=iU;function sU(r,e,t,n){return at(this,void 0,void 0,function*(){const i=Mt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,d]=yield In(n,t),[h,f]=yield Ln(n);return yield a.instruction.processDeregisterShip(f,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}ve.createDeregisterShipInstruction=sU;function oU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const s=Mt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[d,h]=yield In(i,t),[f,m]=yield Ln(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:f,scoreVarsShipAccount:d,shipMint:t},signers:[]})})}ve.createUpdateRewardRateInstruction=oU;function aU(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return at(this,void 0,void 0,function*(){const[u,d]=yield ii(s,n,e),[h,f]=yield tr(s,n,null,e),[m,I]=yield Kn(s,n,e),[O,C]=yield In(s,n),[A]=yield(0,G2.getPlayerFactionPDA)(e,a),R=Mt(s),M=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,M).instruction.processInitialDeposit(I,C,d,f,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}ve.createInitialDepositInstruction=aU;function cU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ii(s,n,e),[d,h]=yield tr(s,n,null,e),[f,m]=yield Kn(s,n,e),[I,O]=yield In(s,n),C=Mt(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(C,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:f,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:d}})})}ve.createPartialDepositInstruction=cU;function uU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[d,h]=yield ii(u,i,t),[f,m]=yield tr(u,i,s,t),[I,O]=yield Kn(u,i,t),[C,A]=yield In(u,i),[R,M]=yield Ln(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:f}})})}ve.createRearmInstruction=uU;function lU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[d,h]=yield ii(u,i,t),[f,m]=yield tr(u,i,s,t),[I,O]=yield Kn(u,i,t),[C,A]=yield In(u,i),[R,M]=yield Ln(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:f}})})}ve.createRefeedInstruction=lU;function dU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[d,h]=yield ii(u,i,t),[f,m]=yield tr(u,i,s,t),[I,O]=yield Kn(u,i,t),[C,A]=yield In(u,i),[R,M]=yield Ln(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:f}})})}ve.createRefuelInstruction=dU;function fU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[d,h]=yield Kn(u,i,t),[f,m]=yield In(u,i),[I,O]=yield Ln(u),C=Mt(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(C,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:d,scoreVarsAccount:I,scoreVarsShipAccount:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}ve.createRepairInstruction=fU;function hU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Kn(i,n,e),[u,d]=yield In(i,n),[h,f]=yield Ln(i),m=Mt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,f,d,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}ve.createSettleInstruction=hU;function pU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Kn(i,n,e),[u,d]=yield In(i,n),[h,f]=yield Gd(i),[m,I]=yield Hd(i),O=Mt(i),C=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,C),R={signers:[],instructions:[]};let M;const Y=yield(0,Ws.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(M=ae.publicKey,R.signers.push(ae)):M=ae;const oe=yield A.instruction.processHarvest(a,d,f,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:M,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}ve.createHarvestInstruction=pU;function gU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ii(i,n,e),[u,d]=yield tr(i,n,t,e),[h,f]=yield Kn(i,n,e),[m,I]=yield In(i,n),[O,C]=yield Ln(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ws.getTokenAccount)(r,e,t),fe=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),fe instanceof ue.web3.Keypair?(ae=fe.publicKey,Y.signers.push(fe)):ae=fe;const E=yield M.instruction.processWithdrawFuel(f,C,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}ve.createWithdrawFuelInstruction=gU;function yU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ii(i,n,e),[u,d]=yield tr(i,n,t,e),[h,f]=yield Kn(i,n,e),[m,I]=yield In(i,n),[O,C]=yield Ln(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ws.getTokenAccount)(r,e,t),fe=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),fe instanceof ue.web3.Keypair?(ae=fe.publicKey,Y.signers.push(fe)):ae=fe;const E=yield M.instruction.processWithdrawFood(f,C,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}ve.createWithdrawFoodInstruction=yU;function mU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ii(i,n,e),[u,d]=yield tr(i,n,t,e),[h,f]=yield Kn(i,n,e),[m,I]=yield In(i,n),[O,C]=yield Ln(i),A=Mt(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ws.getTokenAccount)(r,e,t),fe=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),fe instanceof ue.web3.Keypair?(ae=fe.publicKey,Y.signers.push(fe)):ae=fe;const E=yield M.instruction.processWithdrawArms(f,C,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:Ar.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}ve.createWithdrawArmsInstruction=mU;function bU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ii(s,t,e),[d,h]=yield tr(s,t,null,e),[f,m]=yield Kn(s,t,e),[I,O]=yield In(s,t),[C,A]=yield Ln(s),[R,M]=yield Gd(s),[Y,ae]=yield Hd(s),oe={signers:[],instructions:[]},fe=Mt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(fe,s,E);let W;const Q=yield(0,Ws.getTokenAccount)(r,e,n),K=Q.tokenAccount;"createInstruction"in Q&&oe.instructions.push(...Q.createInstruction),K instanceof ue.web3.Keypair?(W=K.publicKey,oe.signers.push(K)):W=K;let j;const te=yield(0,Ws.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let V;const X=yield(0,Ws.getTokenAccount)(r,e,i),Ce=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Ce instanceof ue.web3.Keypair?(V=Ce.publicKey,oe.signers.push(Ce)):V=Ce;const me=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,M,{accounts:{playerAccount:e,shipStakingAccount:f,scoreVarsAccount:C,scoreVarsShipAccount:I,playerAtlasTokenAccount:W,shipTokenAccountEscrow:d,shipTokenAccountReturn:j,toolkitTokenAccountSource:V,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:Ar.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(me),oe})}ve.createWithdrawShipsInstruction=bU;function vU(r,e,t,n,i,s,a){return at(this,void 0,void 0,function*(){const[u,d]=yield ii(a,t,e),[h,f]=yield tr(a,t,null,e),[m,I]=yield tr(a,t,n,e),[O,C]=yield tr(a,t,i,e),[A,R]=yield tr(a,t,s,e),[M,Y]=yield Ln(a),[ae,oe]=yield Kn(a,t,e),fe=Mt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(fe,a,E).instruction.processCloseAccounts(oe,Y,f,I,C,R,d,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:M,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:Ar.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}ve.closeAccountsInstruction=vU;var ES={};Object.defineProperty(ES,"__esModule",{value:!0});var en={},As=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})},_U=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(en,"__esModule",{value:!0});en.sendTokens=en.confirmTokenBalance=en.createMint=en.mintTokens=en.createAssociatedTokenAccountInstruction=en.createRequestUnitsInstruction=en.Numberu32=en.createATokenAccount=en.getAtaForMint=void 0;const Wr=bt,br=Rc,wU=$r,Tv=pl.exports,Rv=_U(xv.exports);function OS(r,e){return As(this,void 0,void 0,function*(){return Wr.web3.PublicKey.findProgramAddress([e.toBuffer(),br.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],br.ASSOCIATED_TOKEN_PROGRAM_ID)})}en.getAtaForMint=OS;function SU(r,e,t,n){return As(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield OS(e,n),s=new Wr.web3.Transaction,a=yield TS(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}en.createATokenAccount=SU;class PS extends Rv.default{toBuffer(){const e=super.toArray().reverse(),t=Re.Buffer.from(e);if(t.length===4)return t;const n=Re.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Rv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}en.Numberu32=PS;function AU(r){return As(this,void 0,void 0,function*(){const e=new PS(1e6),t=Re.Buffer.from([0]),n=e.toBuffer();return new Wr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Wr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Re.Buffer.concat([t,n])})})}en.createRequestUnitsInstruction=AU;function TS(r,e,t,n){return As(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Wr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:br.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Wr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Wr.web3.TransactionInstruction({keys:i,programId:br.ASSOCIATED_TOKEN_PROGRAM_ID,data:Re.Buffer.from([])})})}en.createAssociatedTokenAccountInstruction=TS;function kU(r,e,t,n,i){return As(this,void 0,void 0,function*(){const s=new Wr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(br.Token.createMintToInstruction(br.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}en.mintTokens=kU;function IU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=Wr.web3.Keypair.generate(),s=new Wr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(br.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Wr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:br.MintLayout.span,programId:br.TOKEN_PROGRAM_ID});s.add(u);const d=br.Token.createInitMintInstruction(br.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(d),yield r.sendAndConfirm(s,[i]),i.publicKey})}en.createMint=IU;function EU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,Tv.strict)(i===null),i!==null){const s=(0,wU.byteArrayToLong)(i.data.slice(64,72));(0,Tv.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}en.confirmTokenBalance=EU;function OU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=new Wr.web3.Transaction;return i.add(br.Token.createTransferInstruction(br.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}en.sendTokens=OU;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(zl,r),t(AS,r),t(kS,r),t(ug,r),t(ve,r),t(ES,r),t(en,r),t(Gs,r),t($r,r)})(ts);const PU={class:"text-overline"},Ya="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",Fh="ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU",zh="poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",TU=gs({__name:"AccountTemplate",props:["count","function_name","publicKey","mint","program"],setup(r){const e=r,t=tn("[empty]");async function n(){switch(e.function_name){case"getRegisteredStake":{const[i]=await ts.getRegisteredStake(new Me(Ya),new Me(Fh),new Me(e.mint),new Me(zh));t.value=i}break;case"getStakingAccount":{const[i]=await ts.getRegisteredStake(new Me(Ya),new Me(Fh),new Me(e.mint),new Me(zh)),[s]=await ts.getStakingAccount(new Me(Ya),new Me(e.publicKey),i);t.value=s}break;case"getTokenEscrow":{const[i]=await ts.getRegisteredStake(new Me(Ya),new Me(Fh),new Me(e.mint),new Me(zh)),[s]=await ts.getStakingAccount(new Me(Ya),new Me(e.publicKey),i);t.value=await Qo(new Me(e.mint),s,!0)}break;case"getAssociatedTokenAddress(mint)":t.value=await Qo(new Me(e.mint),new Me(e.publicKey),!0,TT,dT.ASSOCIATED_PROGRAM_ID);break;default:t.value="No function called";break}}return Ul(()=>e.count,async()=>{await n()}),(i,s)=>(Xn(),eo("div",PU,Ht(t.value),1))}}),RU={class:"row shadow-3 q-pa-md"},BU={class:"col"},xU={class:"row items-center text-h6"},CU={class:"text-primary"},MU={class:"row items-center"},LU={class:"text-weight-bold"},KU=gs({__name:"AccountSolana",setup(r){const e=tn(0),t=tn("none"),n=tn("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),i=tn([{label:"Solana",header:"root",children:[{label:"Tokens",header:"generic",children:[{label:"getAssociatedTokenAddress() by mint",function_name:"getAssociatedTokenAddress(mint)",header:"generic",body:"story"}]}]},{label:"StarAtlas-Factory",header:"root",children:[{label:"Staking (Atlas/Polis)",icon:"restaurant_menu",header:"generic",children:[{label:"getRegisteredStake()",function_name:"getRegisteredStake",header:"generic",body:"story"},{label:"getStakingAccount()",function_name:"getStakingAccount",body:"story"},{label:"getTokenEscrow()",function_name:"getTokenEscrow",body:"story"}]}]}]);Ep(()=>{var a;t.value=((a=Xt().publicKey.value)==null?void 0:a.toString())??"none"});const s=()=>{e.value++};return Ul(()=>Xt().publicKey.value,()=>{var a;t.value=((a=Xt().publicKey.value)==null?void 0:a.toString())??"none"}),(a,u)=>(Xn(),eo(Op,null,[ht("div",RU,[ht("div",BU,[pe(dl,{class:"col",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=d=>t.value=d),label:"Wallet Address"},null,8,["modelValue"]),pe(dl,{class:"col",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d),label:"Token Mint"},null,8,["modelValue"])]),pe(Qr,{color:"primary",icon:"send",class:"q-ml-xl",onClick:s})]),pe(IT,{color:"primary",dark:"",nodes:i.value,"node-key":"label",class:"q-pt-md"},{"header-root":Ie(d=>[ht("div",xU,[ht("div",CU,Ht(d.node.label),1)])]),"default-header":Ie(d=>[ht("div",MU,[ht("div",LU,Ht(d.node.label),1)])]),"body-story":Ie(d=>[pe(TU,{count:e.value,function_name:d.node.function_name,"public-key":t.value,mint:n.value},null,8,["count","function_name","public-key","mint"])]),_:1},8,["nodes"])],64))}});var Ft=Wv({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(r,{slots:e}){const t=AT(),n=$v(()=>"q-td"+(r.autoWidth===!0?" q-table--col-auto-width":"")+(r.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(r.props===void 0)return Wh("td",{class:n.value},$h(e.default));const i=t.vnode.key,s=(r.props.colsMap!==void 0?r.props.colsMap[i]:null)||r.props.col;if(s===void 0)return;const{row:a}=r.props;return Wh("td",{class:n.value+s.__tdClass(a),style:s.__tdStyle(a)},$h(e.default))}}}),RS=Wv({name:"QTr",props:{props:Object,noHover:Boolean},setup(r,{slots:e}){const t=$v(()=>"q-tr"+(r.props===void 0||r.props.header===!0?"":" "+r.props.__trClass)+(r.noHover===!0?" q-tr--no-hover":""));return()=>Wh("tr",{class:t.value},$h(e.default))}});const Ho=gs({__name:"SolscanLink",props:["address"],setup(r){return(e,t)=>(Xn(),Ls(Qr,{square:"",flat:"",color:"secondary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+r.address},{default:Ie(()=>[pe(Pp),ht("div",null,Ht(Yo(fT)(r.address)),1)]),_:1},8,["href"]))}}),NU=ht("span",{class:"text-weight-bold"},"Send Token",-1),DU={class:"text-overline"},UU={class:"row"},BS=gs({__name:"SendTokenButton",props:["mint","decimals"],setup(r){const e=tn(!1),t=r,n=tn("6AzZCoxBrJnfWejYZmqcdKUvzdG6yTbRLyuqVYizHWy4"),i=tn(0);async function s(){const a=new uc,u=await Qo(new Me(t.mint),new Me(n.value));console.log(u);const d=await Qo(new Me(t.mint),Xt().publicKey.value);await hl().connection.getAccountInfo(u)===null&&a.add(ET(Xt().publicKey.value,u,new Me(n.value),new Me(t.mint))),a.add(OT(d,u,Xt().publicKey.value,i.value*Math.pow(10,t.decimals)));try{const f=await Xt().sendTransaction(a,hl().connection);await qh(f)}catch(f){jh.create({color:"red",message:`${f}`,timeout:5e3})}}return(a,u)=>(Xn(),eo(Op,null,[pe(Qr,{square:"",color:"primary",size:"sm",icon:"send",onClick:u[0]||(u[0]=d=>e.value=!0)}),pe(Gv,{modelValue:e.value,"onUpdate:modelValue":u[4]||(u[4]=d=>e.value=d)},{default:Ie(()=>[pe(Jv,null,{default:Ie(()=>[pe(Yv,{class:"q-mt-md"},{default:Ie(()=>[pe(Fl,null,{default:Ie(()=>[pe(Pp,{name:"send"})]),_:1}),pe(Qv,null,{default:Ie(()=>[NU,ht("div",DU,Ht(r.mint),1)]),_:1}),jv(pe(Qr,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Zv]])]),_:1}),pe(Xv,{class:"q-gutter-y-sm"},{default:Ie(()=>[ht("div",null,[pe(dl,{filled:"",square:"",label:"Receiver",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d)},null,8,["modelValue"])]),ht("div",UU,[pe(dl,{filled:"",square:"",class:"col",label:"Amount",modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=d=>i.value=d)},null,8,["modelValue"]),pe(Qr,{square:"",color:"primary",icon:"send",onClick:u[3]||(u[3]=d=>s())})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),FU=ht("span",{class:"text-weight-bold"},"Close/Burn Account",-1),zU={class:"text-overline"},VU=ht("div",{class:"row q-gutter-x-sm"},[ht("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),WU={class:"row q-gutter-x-sm"},$U=ht("div",{class:""},"Amount left:",-1),jU={class:""},qU={class:"q-ma-md text-right text-weight-light"},xS=gs({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(r){const e=tn(!1),t=r;tn(""),tn(0);async function n(){const s=new uc,a=await Qo(new Me(t.mint),Xt().publicKey.value);s.add(PT(a,new Me(t.mint),Xt().publicKey.value,t.amount*Math.pow(10,t.decimals))),s.add(lb(a,Xt().publicKey.value,Xt().publicKey.value)),s.add(lc.transfer({fromPubkey:Xt().publicKey.value,toPubkey:new Me(ub),lamports:fh}));try{const u=await Xt().sendTransaction(s,hl().connection);await qh(u)}catch(u){jh.create({color:"red",message:`${u}`,timeout:5e3})}}async function i(){const s=new uc,a=await Qo(new Me(t.mint),Xt().publicKey.value);s.add(lb(a,Xt().publicKey.value,Xt().publicKey.value)),s.add(lc.transfer({fromPubkey:Xt().publicKey.value,toPubkey:new Me(ub),lamports:fh}));try{const u=await Xt().sendTransaction(s,hl().connection);await qh(u)}catch(u){jh.create({color:"red",message:`${u}`,timeout:5e3})}}return(s,a)=>(Xn(),eo(Op,null,[pe(Qr,{flat:"",square:"",color:"primary",size:"sm",icon:"edit",onClick:a[0]||(a[0]=u=>e.value=!0)}),pe(Gv,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value=u)},{default:Ie(()=>[pe(Jv,null,{default:Ie(()=>[pe(Yv,{class:"q-mt-md"},{default:Ie(()=>[pe(Fl,null,{default:Ie(()=>[pe(Pp,{name:"edit"})]),_:1}),pe(Qv,null,{default:Ie(()=>[FU,ht("div",zU,Ht(r.mint),1)]),_:1}),jv(pe(Qr,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Zv]])]),_:1}),pe(Xv,{class:"q-gutter-y-md col justify-around"},{default:Ie(()=>[VU,ht("div",WU,[$U,ht("div",jU,Ht(r.amount),1)]),pe(Qr,{square:"",disabled:r.amount==0,class:"full-width",color:"red",onClick:a[1]||(a[1]=u=>n())},{default:Ie(()=>[Dr(" Burn and close Account ")]),_:1},8,["disabled"]),pe(Qr,{square:"",flat:"",disabled:r.amount>0,class:"full-width",color:"orange",onClick:a[2]||(a[2]=u=>i())},{default:Ie(()=>[Dr(" Close Account")]),_:1},8,["disabled"])]),_:1}),ht("div",qU," service-fee: "+Ht(Yo(fh)/Yo(kT))+"sol ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),GU=ht("div",{class:"col-2 q-table__title"},"Accounts",-1),HU=["src"],YU=gs({__name:"AccountWalletAccountsToken",setup(r){tn();const e=tn(["account","amount","mint","action"]),t=[{name:"image",label:"Image",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0},{name:"account",label:"Account",align:"left",sortable:!0},{name:"mint",label:"Mint",align:"left",sortable:!0},{name:"owner",align:"left",label:"Owner",sortable:!0},{name:"state",align:"center",label:"State",sortable:!0},{name:"space",label:"Space",sortable:!0},{name:"lamports",label:"Lamports",sortable:!0},{name:"decimals",label:"Decimals",sortable:!0},{name:"amount",label:"Amount",align:"right",sortable:!0},{label:"",align:"right",name:"action"}];Ep(async()=>{await zs().update_accounts()}),Ul(()=>Xt().publicKey.value,async()=>{await zs().update_accounts()});const n=tn({rowsPerPage:0});return(i,s)=>(Xn(),eo("div",null,[pe(Bv,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:n.value,"onUpdate:pagination":s[1]||(s[1]=a=>n.value=a),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:Yo(zs)().get_account_map,columns:t,"row-key":"name"},{top:Ie(a=>[GU,pe(ll),pe(Hv,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=u=>e.value=u),multiple:"",borderless:"",dense:"","options-dense":"","display-value":i.$q.lang.table.columns,"emit-value":"","map-options":"",options:t,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),pe(Qr,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:Ie(a=>[pe(RS,{props:a},{default:Ie(()=>[pe(Ft,{key:"image",props:a},{default:Ie(()=>{var u;return[(u=a.row.meta)!=null&&u.logoURI?(Xn(),Ls(Fl,{key:0,color:"",size:"sm"},{default:Ie(()=>{var d;return[ht("img",{src:(d=a.row.meta)==null?void 0:d.logoURI},null,8,HU)]}),_:2},1024)):Co("",!0)]}),_:2},1032,["props"]),pe(Ft,{key:"name",props:a},{default:Ie(()=>{var u;return[Dr(Ht(((u=a.row.meta)==null?void 0:u.name)??"-"),1)]}),_:2},1032,["props"]),pe(Ft,{key:"account",props:a},{default:Ie(()=>[pe(Ho,{address:a.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"mint",props:a,class:""},{default:Ie(()=>[pe(Ho,{address:a.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"owner",props:a},{default:Ie(()=>[pe(Ho,{address:a.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"state",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.data.parsed.info.state),1)]),_:2},1032,["props"]),pe(Ft,{key:"space",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.space),1)]),_:2},1032,["props"]),pe(Ft,{key:"lamports",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.lamports),1)]),_:2},1032,["props"]),pe(Ft,{key:"decimals",props:a},{default:Ie(()=>[Dr(Ht(a.row.info.tokenAmount.decimals),1)]),_:2},1032,["props"]),pe(Ft,{key:"amount",class:"text-overline",props:a},{default:Ie(()=>[ht("div",{class:qv(a.row.info.tokenAmount.uiAmount>0?"text-white":"text-secondary")},Ht(a.row.info.tokenAmount.uiAmount.toFixed(2)),3)]),_:2},1032,["props"]),pe(Ft,{key:"action",props:a,class:"q-gutter-x-sm"},{default:Ie(()=>[pe(xS,{amount:a.row.info.tokenAmount.uiAmount,mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),pe(BS,{mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["mint","decimals"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","visible-columns","rows"])]))}}),QU=ht("div",{class:"col-2 q-table__title"},"Accounts",-1),JU=["src"],XU=gs({__name:"AccountWalletAccountsNft",setup(r){tn();const e=tn(["account","amount","mint","action"]),t=[{name:"name",label:"Name",align:"left",sortable:!0,required:!0},{name:"symbol",label:"Symbol",align:"left",sortable:!0,required:!0},{name:"account",label:"Account",align:"left",sortable:!0},{name:"mint",label:"Mint",align:"left",sortable:!0},{name:"owner",align:"left",label:"Owner",sortable:!0},{name:"state",align:"center",label:"State",sortable:!0},{name:"space",label:"Space",sortable:!0},{name:"lamports",label:"Lamports",sortable:!0},{name:"decimals",label:"Decimals",sortable:!0},{name:"amount",label:"Amount",sortable:!0},{label:"",align:"right",name:"action"}];Ep(async()=>{await zs().update_accounts_nft()}),Ul(()=>Xt().publicKey.value,async()=>{await zs().update_accounts_nft()});const n=tn({rowsPerPage:0});return(i,s)=>(Xn(),eo("div",null,[pe(Bv,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:n.value,"onUpdate:pagination":s[1]||(s[1]=a=>n.value=a),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:Yo(zs)().nft_map,columns:t,"row-key":"name"},{top:Ie(a=>[QU,pe(ll),pe(Hv,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=u=>e.value=u),multiple:"",borderless:"",dense:"","options-dense":"","display-value":i.$q.lang.table.columns,"emit-value":"","map-options":"",options:t,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),pe(Qr,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:Ie(a=>[pe(RS,{props:a},{default:Ie(()=>[pe(Ft,{key:"name",props:a,class:"row items-center"},{default:Ie(()=>{var u;return[a.row.meta.data.uri&&a.row.data?(Xn(),Ls(Fl,{key:0,color:"",size:"sm",class:"q-mr-sm"},{default:Ie(()=>[ht("img",{src:a.row.data.image??"none"},null,8,JU)]),_:2},1024)):Co("",!0),ht("div",null,Ht(((u=a.row.meta.data)==null?void 0:u.name)||a.row.data.name),1)]}),_:2},1032,["props"]),pe(Ft,{key:"symbol",props:a},{default:Ie(()=>[Dr(Ht(a.row.meta.data.symbol||a.row.data.symbol),1)]),_:2},1032,["props"]),pe(Ft,{key:"account",props:a},{default:Ie(()=>[pe(Ho,{address:a.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"mint",props:a,class:""},{default:Ie(()=>[pe(Ho,{address:a.row.meta.mint},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"owner",props:a},{default:Ie(()=>[pe(Ho,{address:a.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),pe(Ft,{key:"state",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.data.parsed.info.state),1)]),_:2},1032,["props"]),pe(Ft,{key:"space",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.space),1)]),_:2},1032,["props"]),pe(Ft,{key:"lamports",props:a},{default:Ie(()=>[Dr(Ht(a.row.account.account.lamports),1)]),_:2},1032,["props"]),pe(Ft,{key:"decimals",props:a},{default:Ie(()=>[Dr(Ht(a.row.info.tokenAmount.decimals),1)]),_:2},1032,["props"]),pe(Ft,{key:"amount",class:"text-overline",props:a},{default:Ie(()=>[ht("div",{class:qv(a.row.info.tokenAmount.uiAmount>0?"text-white":"text-yellow")},Ht(a.row.info.tokenAmount.uiAmount.toFixed(2)),3)]),_:2},1032,["props"]),pe(Ft,{key:"action",props:a,class:"q-gutter-x-sm"},{default:Ie(()=>[pe(xS,{amount:a.row.info.tokenAmount.uiAmount,mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),pe(BS,{mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["mint","decimals"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","visible-columns","rows"])]))}}),ZU={class:"col shadow-1"},eF={class:"row"},tF=ht("div",{class:"col"},null,-1),nF={key:0,class:"row"},kF=gs({__name:"AccountsPage",setup(r){tn();const e=tn("wallet"),t=tn("token");return(n,i)=>(Xn(),Ls(gT,{class:"col items-center justify-evenly"},{default:Ie(()=>[ht("div",ZU,[pe(sb,{"no-caps":"","outside-arrows":"","mobile-arrows":"",modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=s=>e.value=s),align:"justify"},{default:Ie(()=>[pe(Lu,{name:"wallet",label:"Wallet"}),pe(Lu,{name:"solana",label:"Solana"})]),_:1},8,["modelValue"]),ht("div",eF,[e.value=="wallet"?(Xn(),Ls(sb,{key:0,class:"col","mobile-arrows":"",modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=s=>t.value=s),align:"justify"},{default:Ie(()=>[pe(Lu,{name:"token",label:"Token"}),pe(Lu,{name:"nft",label:"NFT"})]),_:1},8,["modelValue"])):Co("",!0),tF])]),pe(pT,{dark:"",modelValue:e.value,"onUpdate:modelValue":i[2]||(i[2]=s=>e.value=s),animated:"",class:"q-ma-md"},{default:Ie(()=>[pe(ob,{name:"wallet"},{default:Ie(()=>[Yo(zs)().is_loading?(Xn(),eo("div",nF,[pe(ll),pe(hT,{class:"row",color:"primary",size:"3rem"}),pe(ll)])):Co("",!0),t.value=="token"?(Xn(),Ls(YU,{key:1})):Co("",!0),t.value=="nft"?(Xn(),Ls(XU,{key:2})):Co("",!0)]),_:1}),pe(ob,{name:"solana",class:"q-gutter-md"},{default:Ie(()=>[pe(KU)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{kF as default};
