import{a as wh,Q as gx}from"./QTabs.d07a477b.js";import{Q as yx}from"./QPage.68df9e1d.js";import{a as ei,Q as yc}from"./QInput.98f7d855.js";import{Q as mx}from"./QSpace.001257a9.js";import{bX as W,d7 as zv,dF as db,d6 as Be,d8 as jv,cR as te,c$ as Ye,dG as Jh,da as Ws,dj as qv,P as Ee,dk as Vs,dH as bx,dI as Gv,dJ as Hv,d0 as Ln,dK as Yv,dL as vx,dM as wx,bW as Tc,cS as it,cT as se,cU as oe,cV as Lt,cW as Pe,cX as Rt,cY as kr,dN as Ii,dO as F,dP as va,dQ as wa,dR as De,dS as Ei,dT as B,dU as A,dV as Y,dW as H,dX as de,dY as rn,dZ as Gl,d_ as vt,d$ as pe,cZ as qt,e0 as Rc,c_ as et,e1 as wl,e2 as Qv,e3 as ai,d1 as Jv,d2 as Xv,d3 as Zv,d4 as ew,d5 as Rp,e4 as fb,e5 as _x,e6 as Ax,e7 as Sx,e8 as kx,cn as kn,di as Us,cN as tw,cO as nw,de as Ai,df as Ix,au as Bc,b1 as st,ai as Vi,bx as zt,as as Te,al as $,V as Le,ck as er,ak as Wt,bz as hb,a6 as _l,b7 as Bp,a1 as Ct,aj as ul,cr as pb,J as sc,aX as Mp,e9 as Ex,ea as _h,dh as Ha,eb as Px,ec as gb,bs as rw,cl as Ox}from"./index.0bd0d212.js";import{j as yb,k as mb}from"./rtl.dc303b46.js";import{Q as xx}from"./QList.86296bf1.js";import{Q as Hl}from"./QCard.48efacd3.js";import{g as Al,M as Tx}from"./pda.cf98ef86.js";import{e as Sl}from"./cusper.2a5dda33.js";import{t as Rx,v as Bx}from"./token.4644f28a.js";import{s as ao}from"./sha256.f44c07ca.js";import{_ as Ya,a as Mx}from"./Amount.1fd7f191.js";import{h as Cx}from"./handle_confirmation.f5ce65df.js";import{g as Qa}from"./extensionType.9eba7834.js";import{Q as iw}from"./QImg.8fac3f7e.js";import{Q as ls}from"./QSeparator.4d28fbcd.js";import{Q as Lx}from"./QSelect.5b6cb711.js";import{c as bb}from"./associatedTokenAccount.642d713f.js";import"./errors.2f31b9f6.js";var Vn={},Yl={},sw={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});var Ql={},cr={},Js={},Cp={exports:{}};const Kx=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},aw=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=Kx(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};Cp.exports=aw;Cp.exports.default=aw;var In=Cp.exports,We={};(function(r){var e=W&&W.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=db,n=jv,i=e(zv.exports);var s=db;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(q,ne,x){super(q,x),this.blob=t.blob(q),this.signed=ne}decode(q,ne=0){const x=new i.default(this.blob.decode(q,ne),10,"le");return this.signed?x.fromTwos(this.span*8).clone():x}encode(q,ne,x=0){return this.signed&&(q=q.toTwos(this.span*8)),this.blob.encode(q.toArrayLike(Be.Buffer,"le",this.span),ne,x)}}function u(K){return new a(8,!1,K)}r.u64=u;function d(K){return new a(8,!0,K)}r.i64=d;function h(K){return new a(16,!1,K)}r.u128=h;function f(K){return new a(16,!0,K)}r.i128=f;class m extends t.Layout{constructor(q,ne,x,V){super(q.span,V),this.layout=q,this.decoder=ne,this.encoder=x}decode(q,ne){return this.decoder(this.layout.decode(q,ne))}encode(q,ne,x){return this.layout.encode(this.encoder(q),ne,x)}getSpan(q,ne){return this.layout.getSpan(q,ne)}}function I(K){return new m(t.blob(32),q=>new n.PublicKey(q),q=>q.toBuffer(),K)}r.publicKey=I;class P extends t.Layout{constructor(q,ne){super(-1,ne),this.layout=q,this.discriminator=t.u8()}encode(q,ne,x=0){return q==null?this.discriminator.encode(0,ne,x):(this.discriminator.encode(1,ne,x),this.layout.encode(q,ne,x+1)+1)}decode(q,ne=0){const x=this.discriminator.decode(q,ne);if(x===0)return null;if(x===1)return this.layout.decode(q,ne+1);throw new Error("Invalid option "+this.property)}getSpan(q,ne=0){const x=this.discriminator.decode(q,ne);if(x===0)return 1;if(x===1)return this.layout.getSpan(q,ne+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,q){return new P(K,q)}r.option=M;function S(K){return new m(t.u8(),T,C,K)}r.bool=S;function T(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Q(K,q){const ne=t.u32("length"),x=t.struct([ne,t.seq(K,t.offset(ne,-ne.span),"values")]);return new m(x,({values:V})=>V,V=>({values:V}),q)}r.vec=Q;function ce(K,q,ne){const x=t.struct([u("tag"),q.replicate("data")]);function V({tag:Z,data:Ke}){if(!Z.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+Z.toString("hex"));return Ke}return new m(x,V,Z=>({tag:K,data:Z}),ne)}r.tagged=ce;function ae(K){const q=t.u32("length"),ne=t.struct([q,t.blob(t.offset(q,-q.span),"data")]);return new m(ne,({data:x})=>x,x=>({data:x}),K)}r.vecU8=ae;function he(K){return new m(ae(),q=>q.toString("utf-8"),q=>Be.Buffer.from(q,"utf-8"),K)}r.str=he;function E(K,q,ne){const x=t.union(ne??t.u8(),q);return K.forEach((V,Z)=>x.addVariant(Z,V,V.property)),x}r.rustEnum=E;function D(K,q,ne){const x=t.struct([t.seq(K,q,"values")]);return new m(x,({values:V})=>V,V=>({values:V}),ne)}r.array=D;class z extends t.Layout{constructor(q,ne,x){super(q.span+ne.span,x),this.keyLayout=q,this.valueLayout=ne}decode(q,ne){ne=ne||0;const x=this.keyLayout.decode(q,ne),V=this.valueLayout.decode(q,ne+this.keyLayout.getSpan(q,ne));return[x,V]}encode(q,ne,x){x=x||0;const V=this.keyLayout.encode(q[0],ne,x),Z=this.valueLayout.encode(q[1],ne,x+V);return V+Z}getSpan(q,ne){return this.keyLayout.getSpan(q,ne)+this.valueLayout.getSpan(q,ne)}}function J(K,q,ne){const x=t.u32("length"),V=t.struct([x,t.seq(new z(K,q),t.offset(x,-x.span),"values")]);return new m(V,({values:Z})=>new Map(Z),Z=>({values:Array.from(Z.entries())}),ne)}r.map=J})(We);var Dx=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?te.Buffer.from([]):te.Buffer.from(e.map(t=>parseInt(t,16)))}});function cw(r){return new TextDecoder("utf-8").decode(r)}function uw(r){return new TextEncoder().encode(r)}var Nx=Object.freeze({__proto__:null,decode:cw,encode:uw});function lw(r){return Ye.encode(r)}var $x=Object.freeze({__proto__:null,encode:lw,decode:function(r){return Ye.decode(r)}});function dw(r){return te.Buffer.from(Gv(r))}var Ux=Object.freeze({__proto__:null,encode:function(r){return Jh(r)},decode:dw}),Fx=Object.freeze({__proto__:null,hex:Dx,utf8:Nx,bs58:$x,base64:Ux});function Lp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function fw(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function Jl(r,e={}){r.forEach(t=>{if("accounts"in t)Jl(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function ti(r){return r instanceof Ee?r:new Ee(r)}class Wx extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Ho(r){return typeof r=="object"&&r!=null}function bs(r){return typeof r=="string"?JSON.stringify(r):""+r}function Vx(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:d="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+bs(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:d}}function*vb(r,e,t,n){var i;Ho(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=Vx(s,e,t,n);a&&(yield a)}}function*Kp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Ho(e.schema)&&Ho(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let d=!0;for(const h of e.validator(r,u))d=!1,yield[h,void 0];for(let[h,f,m]of e.entries(r,u)){const I=Kp(f,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,f],coerce:s,mask:a});for(const P of I)P[0]?(d=!1,yield[P[0],void 0]):s&&(f=P[1],h===void 0?r=f:r instanceof Map?r.set(h,f):r instanceof Set?r.add(f):Ho(r)&&(r[h]=f))}if(d)for(const h of e.refiner(r,u))d=!1,yield[h,void 0];d&&(yield[void 0,r])}class As{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=d=>d,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(d,h)=>vb(i(d,h),h,this,d):()=>[],this.refiner=s?(d,h)=>vb(s(d,h),h,this,d):()=>[]}assert(e){return function(t,n){const i=oc(t,n);if(i[0])throw i[0]}(e,this)}create(e){return Dp(e,this)}is(e){return hw(e,this)}mask(e){return function(t,n){const i=oc(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return oc(e,this,t)}}function Dp(r,e){const t=oc(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function hw(r,e){return!oc(r,e)[0]}function oc(r,e,t={}){const n=Kp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new Wx(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Mc(r,e){return new As({type:r,schema:null,validator:e})}function Ah(r){return new As({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+bs(e)})}function wb(r){const e=bs(r),t=typeof r;return new As({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+bs(n)})}function Wu(r){return new As({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Vu(){return Mc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+bs(r))}function ll(r){return new As({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function zs(){return Mc("string",r=>typeof r=="string"||"Expected a string, but received: "+bs(r))}function us(r){const e=Object.keys(r);return new As({type:"type",schema:r,*entries(t){if(Ho(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Ho(t)||"Expected an object, but received: "+bs(t)})}function pw(r){const e=r.map(t=>t.type).join(" | ");return new As({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=Kp(t,s,n),[u]=a;if(!u[0])return[];for(const[d]of a)d&&i.push(d)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+bs(t),...i]}})}function gw(){return Mc("unknown",()=>!0)}async function yw(r,e,t){if(e.length<=99)return await _b(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>_b(r,i,t)))).flat()}}async function _b(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function mw(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),d={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());d.accounts={encoding:"base64",addresses:m}}t&&(d.sigVerify=!0);const h=[u,d],f=Dp(await r._rpcRequest("simulateTransaction",h),qx);if("error"in f){let m;if("data"in f.error&&(m=f.error.data.logs,m&&Array.isArray(m))){const I=`
    `,P=I+m.join(I);console.error(f.error.message,P)}throw new Hv("failed to simulate transaction: "+f.error.message,m)}return f.result}function zx(r){return function(e,t,n){return new As({...e,coercer:(i,s)=>hw(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(bw(r),jx,e=>"error"in e?e:{...e,result:Dp(e.result,r)})}const jx=bw(gw());function bw(r){return pw([us({jsonrpc:wb("2.0"),id:zs(),result:r}),us({jsonrpc:wb("2.0"),id:zs(),error:us({code:gw(),message:zs(),data:ll(Mc("any",()=>!0))})})])}const qx=(Ab=us({err:Wu(pw([us({}),zs()])),logs:Wu(Ah(zs())),accounts:ll(Wu(Ah(Wu(us({executable:Mc("boolean",r=>typeof r=="boolean"),owner:zs(),lamports:Vu(),data:Ah(zs()),rentEpoch:ll(Vu())}))))),unitsConsumed:ll(Vu())}),zx(us({context:us({slot:Vu()}),value:Ab})));var Ab,Gx=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=ti(r),n||(n=ta());const i=new Ws;if(i.add(new qv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:yw,simulateTransaction:mw});class vw{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await Sb(this.connection,s,n)}catch(a){if(a instanceof ww){const u=await this.connection.getTransaction(lw(e.signature),{commitment:"confirmed"});if(u){const d=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw d?new Hv(a.message,d):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var d;let h=u.tx,f=(d=u.signers)!==null&&d!==void 0?d:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,f.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const d=s[u].serialize();a.push(await Sb(this.connection,d,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await mw(this.connection,e,t,n,i);if(s.value.err)throw new Hx(s.value);return s.value}}class Hx extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Sb(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new ww(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class ww extends Error{constructor(e){super(e)}}function Yx(r){Xh=r}function ta(){return Xh===null?vw.local():Xh}let Xh=null;const Qx=new Set(["anchor-deprecated-state","debug-logs"]),_w=new Map;function Xl(r){return _w.get(r)!==void 0}var Jx=Object.freeze({__proto__:null,set:function(r){if(!Qx.has(r))throw new Error("Invalid feature");_w.set(r,!0)},isSet:Xl});class mc extends Error{constructor(e){super(e),this.name="IdlError"}}class _a{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new Ee(u))}return new _a(s)}}class Yo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=_a.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,f=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new Ee(f),new Ee(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,f=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[f,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),d=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,f,m]=a.slice(1,4),I={code:h,number:parseInt(f)};return new Yo(I,m,i,e,void 0,s)}if(u){const[h,f,m,I,P]=u.slice(1,6),M={code:m,number:parseInt(I)},S={file:h,line:parseInt(f)};return new Yo(M,P,i,e,S,s)}if(d){const[h,f,m,I]=d.slice(1,5),P=h,M={code:f,number:parseInt(m)};return new Yo(M,I,i,e,P,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class bc extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=_a.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new bc(s,a,e.logs):(a=Aw.get(s),a!==void 0?new bc(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function Np(r,e){Xl("debug-logs")&&console.log("Translating error:",r);const t=Yo.parse(r.logs);if(t)return t;const n=bc.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=_a.parse(r.logs),new Proxy(r,i)}return r}const xe={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Aw=new Map([[xe.InstructionMissing,"8 byte instruction identifier not provided"],[xe.InstructionFallbackNotFound,"Fallback functions are not supported"],[xe.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[xe.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[xe.IdlInstructionStub,"The program was compiled without idl instructions"],[xe.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[xe.ConstraintMut,"A mut constraint was violated"],[xe.ConstraintHasOne,"A has_one constraint was violated"],[xe.ConstraintSigner,"A signer constraint was violated"],[xe.ConstraintRaw,"A raw constraint was violated"],[xe.ConstraintOwner,"An owner constraint was violated"],[xe.ConstraintRentExempt,"A rent exemption constraint was violated"],[xe.ConstraintSeeds,"A seeds constraint was violated"],[xe.ConstraintExecutable,"An executable constraint was violated"],[xe.ConstraintState,"A state constraint was violated"],[xe.ConstraintAssociated,"An associated constraint was violated"],[xe.ConstraintAssociatedInit,"An associated init constraint was violated"],[xe.ConstraintClose,"A close constraint was violated"],[xe.ConstraintAddress,"An address constraint was violated"],[xe.ConstraintZero,"Expected zero account discriminant"],[xe.ConstraintTokenMint,"A token mint constraint was violated"],[xe.ConstraintTokenOwner,"A token owner constraint was violated"],[xe.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[xe.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[xe.ConstraintMintDecimals,"A mint decimals constraint was violated"],[xe.ConstraintSpace,"A space constraint was violated"],[xe.RequireViolated,"A require expression was violated"],[xe.RequireEqViolated,"A require_eq expression was violated"],[xe.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[xe.RequireNeqViolated,"A require_neq expression was violated"],[xe.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[xe.RequireGtViolated,"A require_gt expression was violated"],[xe.RequireGteViolated,"A require_gte expression was violated"],[xe.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[xe.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[xe.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[xe.AccountDidNotDeserialize,"Failed to deserialize the account"],[xe.AccountDidNotSerialize,"Failed to serialize the account"],[xe.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[xe.AccountNotMutable,"The given account is not mutable"],[xe.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[xe.InvalidProgramId,"Program ID was not as expected"],[xe.InvalidProgramExecutable,"Program account is not executable"],[xe.AccountNotSigner,"The given account did not sign"],[xe.AccountNotSystemOwned,"The given account is not owned by the system program"],[xe.AccountNotInitialized,"The program expected this account to be already initialized"],[xe.AccountNotProgramData,"The given account is not a program data account"],[xe.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[xe.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[xe.StateInvalidAddress,"The given state account does not have the correct address"],[xe.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[xe.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kl=function(){return kl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},kl.apply(this,arguments)};function Xx(r){return r.toLowerCase()}var Zx=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],eT=/[^A-Z0-9]+/gi;function kb(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function tT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?Zx:i,a=n.stripRegexp,u=a===void 0?eT:a,d=n.transform,h=d===void 0?Xx:d,f=n.delimiter,m=f===void 0?" ":f,I=kb(kb(t,s,"$1\0$2"),u,"\0"),P=0,M=I.length;I.charAt(P)==="\0";)P++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(P,M).split("\0").map(h).join(m)}(r,kl({delimiter:"."},e))}class _r{static fieldLayout(e,t){const n=e.name!==void 0?In(e.name):void 0;switch(e.type){case"bool":return We.bool(n);case"u8":return We.u8(n);case"i8":return We.i8(n);case"u16":return We.u16(n);case"i16":return We.i16(n);case"u32":return We.u32(n);case"i32":return We.i32(n);case"f32":return We.f32(n);case"u64":return We.u64(n);case"i64":return We.i64(n);case"f64":return We.f64(n);case"u128":return We.u128(n);case"i128":return We.i128(n);case"bytes":return We.vecU8(n);case"string":return We.str(n);case"publicKey":return We.publicKey(n);default:if("vec"in e.type)return We.vec(_r.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return We.option(_r.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new mc("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new mc(`Type not found: ${JSON.stringify(e)}`);return _r.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=_r.fieldLayout({name:void 0,type:i},t);return We.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>_r.fieldLayout(s,t));return We.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=In(s.name);if(s.fields===void 0)return We.struct([],a);const u=s.fields.map(d=>{if(!d.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return _r.fieldLayout(d,t)});return We.struct(u,a)});return n!==void 0?We.rustEnum(i).replicate(n):We.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Zl{constructor(e){this.idl=e,this.ixLayout=Zl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=Sh("global",n.name);t.set(Ye.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=Sh("state",n.name);t.set(Ye.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=te.Buffer.alloc(1e3),s=In(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),d=i.slice(0,u);return te.Buffer.concat([Sh(e,t),d])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,d;return _r.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(d=e.types)!==null&&d!==void 0?d:[]]))});const s=In(n.name);return[s,We.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,d;return _r.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(d=e.types)!==null&&d!==void 0?d:[]]))});const s=In(n.name);return[s,We.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?te.Buffer.from(e,"hex"):Ye.decode(e));let n=Ye.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Ui.format(e,t,this.idl)}}class Ui{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Ui.formatIdlType(u.type),data:Ui.formatIdlData(u,e.data[u.name],n.types)})),a=Ui.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,d)=>d<a.length?{name:a[d].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Ui.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Ui.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var f;const m=a[h],I=(f=i[s])===null||f===void 0?void 0:f.filter(P=>P.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Ui.formatIdlData(I,m,n)}).join(", "),d=In(s,{pascalCase:!0});return u.length===0?d:`${d} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Ui.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function Sh(r,e){var t;let n=`${r}:${t===void 0&&(t={}),tT(e,kl({delimiter:"_"},t))}`;return te.Buffer.from(ao.exports.sha256.digest(n)).slice(0,8)}function $p(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return ac(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>ac(r,t.type)).reduce((t,n)=>t+n,0)}function ac(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+ac(r,e.option);if("coption"in e)return 4+ac(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new mc(`Type not found: ${JSON.stringify(e)}`);return $p(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return ac(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const nT=8;class Qo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,_r.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=te.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=Qo.accountDiscriminator(e);return te.Buffer.concat([u,a])}decode(e,t){if(Qo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=Qo.accountDiscriminator(e);return{offset:0,bytes:Ye.encode(t?te.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=$p(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return te.Buffer.from(ao.exports.sha256.digest(`account:${In(e,{pascalCase:!0})}`)).slice(0,8)}}class Sw{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,_r.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[Jh(kw(n.name)),n.name]))}decode(e){let t;try{t=te.Buffer.from(Gv(e))}catch{return null}const n=Jh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function kw(r){return te.Buffer.from(ao.exports.sha256.digest(`event:${r}`)).slice(0,8)}class Iw{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=_r.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=te.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await Up(e),a=n.slice(0,i);return te.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function Up(r){let e=Xl("anchor-deprecated-state")?"account":"state";return te.Buffer.from(ao.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class ed{constructor(e){this.instruction=new Zl(e),this.accounts=new Qo(e),this.events=new Sw(e),e.state&&(this.state=new Iw(e))}}var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Be.global<"u"?Be.global:typeof self<"u"?self:{};function iT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class Ir{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Ew=Ir;class js extends Ir{isCount(){throw new Error("ExternalLayout is abstract")}}class sT extends js{constructor(e,t,n){if(!(e instanceof Ir))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof td||this.layout instanceof Pw}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class td extends Ir{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Pw extends Ir{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const kh=Math.pow(2,32);class oT extends Ir{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*kh+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/kh);return{hi32:a,lo32:s-a*kh}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class aT extends Ir{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof Ir,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let d=u.span;if(a=0<d?d:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>d&&(d=u.getSpan(t,n)))}s=n,n+=d}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Ow{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Ib extends Ow{constructor(e,t){if(!(e instanceof js&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class xw extends Ir{constructor(e,t,n){const i=e instanceof td||e instanceof Pw;if(i)e=new Ib(new sT(e));else if(e instanceof js&&e.isCount())e=new Ib(e);else if(!(e instanceof Ow))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ir))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new cT(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Be.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class cT extends Ir{constructor(e,t,n,i){if(!(e instanceof xw))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof Ir))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class uT extends Ir{constructor(e,t){if(!(e instanceof js&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof js||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof js&&(i=e.length),!Be.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof js&&this.length.encode(i,t,n),i}}var Cn=r=>new td(1,r),os=r=>new oT(r),$t=(r,e,t)=>new aT(r,e,t),nd=(r,e)=>new uT(r,e);class lT{constructor(e){}encode(e,t){switch(In(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Jt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||Ee.default).toBuffer()}})}(t);case"initializeAccount":return Jt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return Jt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return Jt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return Jt({approve:{amount:n}})}(t);case"revoke":return Jt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return Jt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return Jt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return Jt({burn:{amount:n}})}(t);case"closeAccount":return Jt({closeAccount:{}});case"freezeAccount":return Jt({freezeAccount:{}});case"thawAccount":return Jt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return Jt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return Jt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return Jt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return Jt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return Jt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return Jt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return Jt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return Jt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Jt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Ut=(Eb=Cn("instruction"),new xw(Eb,dT,fT));var Eb,dT,fT;function Bo(r){return nd(32,r)}function Jt(r){let e=Be.Buffer.alloc(hT),t=Ut.encode(r,e);return e.slice(0,t)}Ut.addVariant(0,$t([Cn("decimals"),nd(32,"mintAuthority"),Cn("freezeAuthorityOption"),Bo("freezeAuthority")]),"initializeMint"),Ut.addVariant(1,$t([]),"initializeAccount"),Ut.addVariant(2,$t([Cn("m")]),"initializeMultisig"),Ut.addVariant(3,$t([os("amount")]),"transfer"),Ut.addVariant(4,$t([os("amount")]),"approve"),Ut.addVariant(5,$t([]),"revoke"),Ut.addVariant(6,$t([Cn("authorityType"),Cn("newAuthorityOption"),Bo("newAuthority")]),"setAuthority"),Ut.addVariant(7,$t([os("amount")]),"mintTo"),Ut.addVariant(8,$t([os("amount")]),"burn"),Ut.addVariant(9,$t([]),"closeAccount"),Ut.addVariant(10,$t([]),"freezeAccount"),Ut.addVariant(11,$t([]),"thawAccount"),Ut.addVariant(12,$t([os("amount"),Cn("decimals")]),"transferChecked"),Ut.addVariant(13,$t([os("amount"),Cn("decimals")]),"approvedChecked"),Ut.addVariant(14,$t([os("amount"),Cn("decimals")]),"mintToChecked"),Ut.addVariant(15,$t([os("amount"),Cn("decimals")]),"burnedChecked"),Ut.addVariant(16,$t([Bo("authority")]),"InitializeAccount2"),Ut.addVariant(17,$t([]),"syncNative"),Ut.addVariant(18,$t([Bo("authority")]),"initializeAccount3"),Ut.addVariant(19,$t([Cn("m")]),"initializeMultisig2"),Ut.addVariant(20,$t([Cn("decimals"),Bo("mintAuthority"),Cn("freezeAuthorityOption"),Bo("freezeAuthority")]),"initializeMint2");const hT=Math.max(...Object.values(Ut.registry).map(r=>r.span));class pT{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function dl(r){return new Fp(nd(8),e=>Wp.fromBuffer(e),e=>e.toBuffer(),r)}function Fo(r){return new Fp(nd(32),e=>new Ee(e),e=>e.toBuffer(),r)}function cc(r,e){return new gT(r,e)}class Fp extends Ew{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class gT extends Ew{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new td(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function yT(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function mT(r){return r?1:0}class Wp extends Ln{toBuffer(){const e=super.toArray().reverse(),t=Be.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Be.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Wp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class bT{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Be.Buffer.alloc(165),i=Ob.encode(t,n);return n.slice(0,i)}case"mint":{const n=Be.Buffer.alloc(82),i=Pb.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return Ob.decode(n)}(t);case"mint":return function(n){return Pb.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=$p(this.idl,e))!==null&&t!==void 0?t:0}}const Pb=$t([cc(Fo(),"mintAuthority"),dl("supply"),Cn("decimals"),function(r){return new Fp(Cn(),yT,mT,r)}("isInitialized"),cc(Fo(),"freezeAuthority")]),Ob=$t([Fo("mint"),Fo("authority"),dl("amount"),cc(Fo(),"delegate"),Cn("state"),cc(dl(),"isNative"),dl("delegatedAmount"),cc(Fo(),"closeAuthority")]);class vT{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class Tw{constructor(e){this.instruction=new lT(e),this.accounts=new bT(e),this.events=new vT(e),this.state=new pT(e)}}var wT=Object.freeze({__proto__:null,hash:function(r){return ao.exports.sha256(r)}});function Rw(r,e,t){const n=te.Buffer.concat([r.toBuffer(),te.Buffer.from(e),t.toBuffer()]),i=ao.exports.sha256.digest(n);return new Ee(te.Buffer.from(i))}function Bw(r,e){let t=te.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=te.Buffer.concat([t,_T(s)])}),t=te.Buffer.concat([t,e.toBuffer(),te.Buffer.from("ProgramDerivedAddress")]);let n=ao.exports.sha256(new Uint8Array(t)),i=new Ln(n,16).toArray(void 0,32);if(Ee.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new Ee(i)}function Vp(r,e){let t,n=255;for(;n!=0;){try{t=Bw(r.concat(te.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const _T=r=>r instanceof te.Buffer?r:r instanceof Uint8Array?te.Buffer.from(r.buffer,r.byteOffset,r.byteLength):te.Buffer.from(r);async function Mw(r,...e){let t=[te.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof te.Buffer?i:ti(i).toBuffer())});const[n]=await Ee.findProgramAddress(t,ti(r));return n}var AT=Object.freeze({__proto__:null,createWithSeedSync:Rw,createProgramAddressSync:Bw,findProgramAddressSync:Vp,associated:Mw});const Zh=new Ee("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ep=new Ee("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ST=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Zh,ASSOCIATED_PROGRAM_ID:ep,associatedAddress:async function({mint:r,owner:e}){return(await Ee.findProgramAddress([e.toBuffer(),Zh.toBuffer(),r.toBuffer()],ep))[0]}}),tp={exports:{}};(function(r,e){var t=typeof self<"u"?self:rT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,d="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],P=ArrayBuffer.isView||function(x){return x&&I.indexOf(Object.prototype.toString.call(x))>-1};function M(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(x))throw new TypeError("Invalid character in header field name");return x.toLowerCase()}function S(x){return typeof x!="string"&&(x=String(x)),x}function T(x){var V={next:function(){var Z=x.shift();return{done:Z===void 0,value:Z}}};return d&&(V[Symbol.iterator]=function(){return V}),V}function C(x){this.map={},x instanceof C?x.forEach(function(V,Z){this.append(Z,V)},this):Array.isArray(x)?x.forEach(function(V){this.append(V[0],V[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(V){this.append(V,x[V])},this)}function Q(x){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}function ce(x){return new Promise(function(V,Z){x.onload=function(){V(x.result)},x.onerror=function(){Z(x.error)}})}function ae(x){var V=new FileReader,Z=ce(V);return V.readAsArrayBuffer(x),Z}function he(x){if(x.slice)return x.slice(0);var V=new Uint8Array(x.byteLength);return V.set(new Uint8Array(x)),V.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(x){var V;this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:h&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:f&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:u&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():m&&h&&(V=x)&&DataView.prototype.isPrototypeOf(V)?(this._bodyArrayBuffer=he(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(x)||P(x))?this._bodyArrayBuffer=he(x):this._bodyText=x=Object.prototype.toString.call(x):this._bodyText="",this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var x=Q(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var x=Q(this);if(x)return x;if(this._bodyBlob)return function(V){var Z=new FileReader,Ke=ce(Z);return Z.readAsText(V),Ke}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var Z=new Uint8Array(V),Ke=new Array(Z.length),me=0;me<Z.length;me++)Ke[me]=String.fromCharCode(Z[me]);return Ke.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(x,V){x=M(x),V=S(V);var Z=this.map[x];this.map[x]=Z?Z+", "+V:V},C.prototype.delete=function(x){delete this.map[M(x)]},C.prototype.get=function(x){return x=M(x),this.has(x)?this.map[x]:null},C.prototype.has=function(x){return this.map.hasOwnProperty(M(x))},C.prototype.set=function(x,V){this.map[M(x)]=S(V)},C.prototype.forEach=function(x,V){for(var Z in this.map)this.map.hasOwnProperty(Z)&&x.call(V,this.map[Z],Z,this)},C.prototype.keys=function(){var x=[];return this.forEach(function(V,Z){x.push(Z)}),T(x)},C.prototype.values=function(){var x=[];return this.forEach(function(V){x.push(V)}),T(x)},C.prototype.entries=function(){var x=[];return this.forEach(function(V,Z){x.push([Z,V])}),T(x)},d&&(C.prototype[Symbol.iterator]=C.prototype.entries);var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function z(x,V){var Z,Ke,me=(V=V||{}).body;if(x instanceof z){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,V.headers||(this.headers=new C(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,me||x._bodyInit==null||(me=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=V.credentials||this.credentials||"same-origin",!V.headers&&this.headers||(this.headers=new C(V.headers)),this.method=(Z=V.method||this.method||"GET",Ke=Z.toUpperCase(),D.indexOf(Ke)>-1?Ke:Z),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&me)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(me)}function J(x){var V=new FormData;return x.trim().split("&").forEach(function(Z){if(Z){var Ke=Z.split("="),me=Ke.shift().replace(/\+/g," "),Oe=Ke.join("=").replace(/\+/g," ");V.append(decodeURIComponent(me),decodeURIComponent(Oe))}}),V}function K(x,V){V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in V?V.statusText:"OK",this.headers=new C(V.headers),this.url=V.url||"",this._initBody(x)}z.prototype.clone=function(){return new z(this,{body:this._bodyInit})},E.call(z.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var x=new K(null,{status:0,statusText:""});return x.type="error",x};var q=[301,302,303,307,308];K.redirect=function(x,V){if(q.indexOf(V)===-1)throw new RangeError("Invalid status code");return new K(null,{status:V,headers:{location:x}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(V,Z){this.message=V,this.name=Z;var Ke=Error(V);this.stack=Ke.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function ne(x,V){return new Promise(function(Z,Ke){var me=new z(x,V);if(me.signal&&me.signal.aborted)return Ke(new a.DOMException("Aborted","AbortError"));var Oe=new XMLHttpRequest;function Xt(){Oe.abort()}Oe.onload=function(){var Zt,Ae,Ge={status:Oe.status,statusText:Oe.statusText,headers:(Zt=Oe.getAllResponseHeaders()||"",Ae=new C,Zt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(yn){var xt=yn.split(":"),yt=xt.shift().trim();if(yt){var Or=xt.join(":").trim();Ae.append(yt,Or)}}),Ae)};Ge.url="responseURL"in Oe?Oe.responseURL:Ge.headers.get("X-Request-URL");var on="response"in Oe?Oe.response:Oe.responseText;Z(new K(on,Ge))},Oe.onerror=function(){Ke(new TypeError("Network request failed"))},Oe.ontimeout=function(){Ke(new TypeError("Network request failed"))},Oe.onabort=function(){Ke(new a.DOMException("Aborted","AbortError"))},Oe.open(me.method,me.url,!0),me.credentials==="include"?Oe.withCredentials=!0:me.credentials==="omit"&&(Oe.withCredentials=!1),"responseType"in Oe&&h&&(Oe.responseType="blob"),me.headers.forEach(function(Zt,Ae){Oe.setRequestHeader(Ae,Zt)}),me.signal&&(me.signal.addEventListener("abort",Xt),Oe.onreadystatechange=function(){Oe.readyState===4&&me.signal.removeEventListener("abort",Xt)}),Oe.send(me._bodyInit===void 0?null:me._bodyInit)})}ne.polyfill=!0,s.fetch||(s.fetch=ne,s.Headers=C,s.Request=z,s.Response=K),a.Headers=C,a.Request=z,a.Response=K,a.fetch=ne,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(tp,tp.exports);var kT=iT(tp.exports);async function xb(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=np(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=np(i.data);return s}const IT=We.rustEnum([We.struct([],"uninitialized"),We.struct([We.option(We.publicKey(),"authorityAddress")],"buffer"),We.struct([We.publicKey("programdataAddress")],"program"),We.struct([We.u64("slot"),We.option(We.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,We.u32());function np(r){return IT.decode(r)}var ET=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([xb(r,e),kT(n)]),a=(await s.json()).filter(d=>!d.aborted&&d.state==="Built"&&d.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:xb,decodeUpgradeableLoaderState:np}),PT=Object.freeze({__proto__:null,sha256:wT,rpc:Gx,publicKey:AT,bytes:Fx,token:ST,features:Jx,registry:ET});const OT=We.struct([We.publicKey("authority"),We.vecU8("data")]);function Cc(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class na{static build(e,t,n){if(e.name==="_inner")throw new mc("the _inner name is reserved");const i=(...s)=>{const[a,u]=Cc(e,[...s]);Jl(e.accounts,u.accounts);const d=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&d.push(...u.remainingAccounts),Xl("debug-logs")&&console.log("Outgoing account metas:",d),new qv({keys:d,programId:n,data:t(e.name,fw(e,...a))})};return i.accounts=s=>na.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return na.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=ti(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class Cw{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,d]=Cc(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=d.signers)!==null&&a!==void 0?a:[],d.options)}catch(h){throw Np(h,n)}}}}class Lw{static build(e,t){return(...n)=>{var i,s,a;const[,u]=Cc(e,[...n]),d=new Ws;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>d.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>d.add(h)),d.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>d.add(h)),d}}}class Kw{constructor(e,t,n=ta(),i=new ed(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=Ih(t),this._sub=null;const[s,a,u]=(()=>{var d;let h={},f={},m={};return(d=e.state)===null||d===void 0||d.methods.forEach(I=>{const P=na.build(I,(C,Q)=>i.instruction.encodeState(C,Q),t);P.accounts=C=>function(ce,ae,he,E){if(he.name==="new"){const[D]=Vp([],ce);if(ae.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:ae.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:Ih(ce),isWritable:!0,isSigner:!1},{pubkey:D,isWritable:!1,isSigner:!1},{pubkey:Vs.programId,isWritable:!1,isSigner:!1},{pubkey:ce,isWritable:!1,isSigner:!1}]}return Jl(he.accounts,E),[{pubkey:Ih(ce),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(na.accountsArray(C,I.accounts,I.name));const M=Lw.build(I,P),S=Cw.build(I,M,Lp(e),n),T=In(I.name);h[T]=P,f[T]=M,m[T]=S}),[h,f,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await Up(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new Yv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function Ih(r){let[e]=Vp([],r);return Rw(e,"unversioned",r)}class Dw{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??ta(),this._coder=s??new ed(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await yw(this._provider.connection,e.map(n=>ti(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Be.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Ja.get(e.toString());if(n)return n.ee;const i=new Yv;e=ti(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Ja.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Ja.get(e.toString());t?Ja&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Ja.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return Vs.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await Mw(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(ti(e),t)}}const Ja=new Map,xT=13,TT=14;class Nw{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new zp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const d=this._eventListeners.get(u.name);d&&d.forEach(h=>{const f=this._eventCallbacks.get(h);if(f){const[,m]=f;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(Sl.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class zp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new BT(e),i=new RT;let s=n.next();for(;s!==null;){let[a,u,d]=this.handleLog(i,s);a&&t(a),u&&i.push(u),d&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(xT):e.slice(TT);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class RT{constructor(){this.stack=[]}program(){return Sl.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){Sl.exports.ok(this.stack.length>0),this.stack.pop()}}class BT{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const MT=new Ee("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function $w(){return new Tw(Uw)}const Uw={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class vc{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new CT(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=In(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(vc.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=vc.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await Ee.findProgramAddress(t,n);this._accounts[In(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new Ee(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=In(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[In(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[In(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Be.Buffer.from([t]);case"u16":let n=Be.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Be.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Be.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Be.Buffer.from(uw(t));case"publicKey":return t.toBuffer();default:if(e.array)return Be.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}vc.CONST_ACCOUNTS={systemProgram:Vs.programId,tokenProgram:Zh,associatedTokenProgram:ep,rent:bx};class CT{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=$w().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[In(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class Fw{static build(e,t,n,i,s,a,u,d,h){return(...f)=>new LT(f,i,s,a,u,d,e,t,n,h)}}class LT{constructor(e,t,n,i,s,a,u,d,h,f){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new vc(e,this._accounts,u,d,h,f)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class wc{constructor(e,t,n,i){t=ti(t),n||(n=ta()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new ed(e),this._events=new Nw(this._programId,n,this._coder);const[s,a,u,d,h,f,m,I]=class{static build(P,M,S,T){const C={},Q={},ce={},ae={},he={},E={},D=Lp(P),z=P.accounts?class{static build(K,q,ne,x){var V;const Z={};return(V=K.accounts)===null||V===void 0||V.forEach(Ke=>{const me=In(Ke.name);Z[me]=new Dw(K,Ke,ne,x,q)}),Z}}.build(P,M,S,T):{},J=class{static build(K,q,ne,x){if(K.state!==void 0)return new Kw(K,ne,x,q)}}.build(P,M,S,T);return P.instructions.forEach(K=>{const q=na.build(K,(Oe,Xt)=>M.instruction.encode(Oe,Xt),S),ne=Lw.build(K,q),x=Cw.build(K,ne,D,T),V=class{static build(Oe,Xt,Zt,Ae,Ge,on,yn){return async(...xt)=>{var yt;const Or=Xt(...xt),[,Ht]=Cc(Oe,[...xt]);let On;if(Ae.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{On=await Ae.simulate(Or,Ht.signers,(yt=Ht.options)===null||yt===void 0?void 0:yt.commitment)}catch(lr){throw Np(lr,Zt)}if(On===void 0)throw new Error("Unable to simulate transaction");const ui=On.logs;if(!ui)throw new Error("Simulated logs not found");const xr=[];return yn.events&&new zp(on,Ge).parseLogs(ui,lr=>{xr.push(lr)}),{events:xr,raw:ui}}}}.build(K,ne,D,T,M,S,P),Z=class{static build(Oe,Xt,Zt,Ae){const Ge=Xt.accounts.find(yn=>yn.isMut),on=!!Xt.returns;if(!Ge&&on)return async(...yn)=>{var xt,yt;let Or=await Zt(...yn);const Ht=`Program return: ${Oe} `;let On=Or.raw.find(lr=>lr.startsWith(Ht));if(!On)throw new Error("View expected return log");let ui=dw(On.slice(Ht.length)),xr=Xt.returns;if(!xr)throw new Error("View expected return type");return _r.fieldLayout({type:xr},Array.from([...(xt=Ae.accounts)!==null&&xt!==void 0?xt:[],...(yt=Ae.types)!==null&&yt!==void 0?yt:[]])).decode(ui)}}}.build(S,K,V,P),Ke=Fw.build(T,S,K,q,ne,x,V,Z,z),me=In(K.name);Q[me]=q,ce[me]=ne,C[me]=x,ae[me]=V,he[me]=Ke,Z&&(E[me]=Z)}),[C,Q,ce,z,ae,he,J,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=d,this.simulate=h,this.methods=f,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=ti(e),i=await wc.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new wc(i,n,t)}static async fetchIdl(e,t){t=t??ta();const n=ti(e),i=await async function(h){const f=(await Ee.findProgramAddress([],h))[0];return await Ee.createWithSeed(f,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),OT.decode(u));var u;const d=vx(a.data);return JSON.parse(cw(d))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class KT{static token(e){return function(t){return new wc(Uw,MT,t,$w())}(e)}}var DT=Object.freeze(Object.defineProperty({__proto__:null,web3:wx,ACCOUNT_DISCRIMINATOR_SIZE:nT,AccountClient:Dw,AnchorError:Yo,AnchorProvider:vw,BorshAccountsCoder:Qo,BorshCoder:ed,BorshEventCoder:Sw,BorshInstructionCoder:Zl,BorshStateCoder:Iw,EventManager:Nw,EventParser:zp,IdlError:mc,LangErrorCode:xe,LangErrorMessage:Aw,MethodsBuilderFactory:Fw,Program:wc,ProgramError:bc,ProgramErrorStack:_a,Spl:KT,SplTokenCoder:Tw,StateClient:Kw,eventDiscriminator:kw,getProvider:ta,parseIdlErrors:Lp,setProvider:Yx,splitArgsAndCtx:Cc,stateDiscriminator:Up,toInstruction:fw,translateAddress:ti,translateError:Np,utils:PT,validateAccounts:Jl,BN:Ln},Symbol.toStringTag,{value:"Module"})),wt=Tc(DT),Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.stakingIdl=void 0;Lc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Js,"__esModule",{value:!0});Js.getStakingProgram=Js.getStakingIdl=void 0;const Tb=wt,NT=Lc;function Ww(r){const e=NT.stakingIdl;return e.metadata.address=r.toBase58(),e}Js.getStakingIdl=Ww;function $T({connection:r,programId:e}){const t=Ww(e),n=new Tb.AnchorProvider(r,null,null);return new Tb.Program(t,e,n)}Js.getStakingProgram=$T;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Js,r)})(cr);var UT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.cancelUnstakeInstruction=void 0;const FT=cr;function WT({connection:r,user:e,registeredStake:t,programId:n}){return UT(this,void 0,void 0,function*(){const i=(0,FT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Ql.cancelUnstakeInstruction=WT;var rd={},VT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(rd,"__esModule",{value:!0});rd.createStakingAccountInstruction=void 0;const zT=cr;function jT({connection:r,user:e,registeredStake:t,programId:n}){return VT(this,void 0,void 0,function*(){const i=(0,zT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}rd.createStakingAccountInstruction=jT;var id={},co={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=jv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(co);var Gr={},ln={};const qT=ai.utils.randomPrivateKey,Rb=()=>{const r=ai.utils.randomPrivateKey(),e=Il(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Il=ai.getPublicKey;function Bb(r){try{return ai.ExtendedPoint.fromHex(r),!0}catch{return!1}}const jp=(r,e)=>ai.sign(r,e.slice(0,32)),GT=ai.verify,qe=r=>te.Buffer.isBuffer(r)?r:r instanceof Uint8Array?te.Buffer.from(r.buffer,r.byteOffset,r.byteLength):te.Buffer.from(r);class qp{constructor(e){Object.assign(this,e)}encode(){return te.Buffer.from(Jv(uc,this))}static decode(e){return Xv(uc,this,e)}static decodeUnchecked(e){return Zv(uc,this,e)}}class HT extends qp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const uc=new Map;var Vw;let zw;const jw=32,Sr=32;function YT(r){return r._bn!==void 0}let Mb=1;zw=Symbol.toStringTag;class ge extends qp{constructor(e){if(super({}),this._bn=void 0,YT(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ye.decode(e);if(t.length!=Sr)throw new Error("Invalid public key input");this._bn=new Ln(t)}else this._bn=new Ln(e);if(this._bn.byteLength()>Sr)throw new Error("Invalid public key input")}}static unique(){const e=new ge(Mb);return Mb+=1,new ge(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ye.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(te.Buffer);if(e.length===Sr)return e;const t=te.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[zw](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=te.Buffer.concat([e.toBuffer(),te.Buffer.from(t),n.toBuffer()]),s=wl(i);return new ge(s)}static createProgramAddressSync(e,t){let n=te.Buffer.alloc(0);e.forEach(function(s){if(s.length>jw)throw new TypeError("Max seed length exceeded");n=te.Buffer.concat([n,qe(s)])}),n=te.Buffer.concat([n,t.toBuffer(),te.Buffer.from("ProgramDerivedAddress")]);const i=wl(n);if(Bb(i))throw new Error("Invalid seeds, address must fall off the curve");return new ge(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(te.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ge(e);return Bb(t.toBytes())}}Vw=ge;ge.default=new Vw("11111111111111111111111111111111");uc.set(ge,{kind:"struct",fields:[["_bn","u256"]]});class QT{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=qe(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=qe(qT()),this._publicKey=qe(Il(this._secretKey))}get publicKey(){return new ge(this._publicKey)}get secretKey(){return te.Buffer.concat([this._secretKey,this._publicKey],64)}}const JT=new ge("BPFLoader1111111111111111111111111111111111"),hs=1280-40-8,sd=127,ra=64;class Gp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Gp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Hp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Hp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Wo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Wo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class _c{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Je=(r="publicKey")=>et(32,r),XT=(r="signature")=>et(64,r),qs=(r="string")=>{const e=se([oe("length"),oe("lengthPadding"),et(kr(oe(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const d={chars:te.Buffer.from(s,"utf8")};return n(d,a,u)},i.alloc=s=>oe().span+oe().span+te.Buffer.from(s,"utf8").length,i},ZT=(r="authorized")=>se([Je("staker"),Je("withdrawer")],r),eR=(r="lockup")=>se([Lt("unixTimestamp"),Lt("epoch"),Je("custodian")],r),tR=(r="voteInit")=>se([Je("nodePubkey"),Je("authorizedVoter"),Je("authorizedWithdrawer"),Pe("commission")],r),nR=(r="voteAuthorizeWithSeedArgs")=>se([oe("voteAuthorizationType"),Je("currentAuthorityDerivedKeyOwnerPubkey"),qs("currentAuthorityDerivedKeySeed"),Je("newAuthorized")],r);function qw(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return qw({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function tr(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function wr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function ot(r,e){if(!r)throw new Error(e||"Assertion failed")}class od{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let d=n.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,d)),d},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const d=i(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new od(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ot(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),i=e.filter(([,d])=>!d.isSigner&&d.isWritable),s=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{ot(t.length>0,"Expected at least one writable signer key");const[d]=t[0];ot(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([d])=>new ge(d)),...n.map(([d])=>new ge(d)),...i.map(([d])=>new ge(d)),...s.map(([d])=>new ge(d))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ge(s),d=e.findIndex(h=>h.equals(u));d>=0&&(ot(d<256,"Max lookup table index exceeded"),n.push(d),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class oi{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ge(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ye.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new _c(this.staticAccountKeys)}static compile(e){const t=od.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new _c(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ye.encode(u.data)}));return new oi({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];wr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:P}=m,M=Array.from(Ye.decode(m.data));let S=[];wr(S,I.length);let T=[];return wr(T,M.length),{programIdIndex:P,keyIndicesCount:te.Buffer.from(S),keyIndices:I,dataLength:te.Buffer.from(T),data:M}});let i=[];wr(i,n.length);let s=te.Buffer.alloc(hs);te.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=se([Pe("programIdIndex"),et(m.keyIndicesCount.length,"keyIndicesCount"),Rt(Pe("keyIndex"),m.keyIndices.length,"keyIndices"),et(m.dataLength.length,"dataLength"),Rt(Pe("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=se([et(1,"numRequiredSignatures"),et(1,"numReadonlySignedAccounts"),et(1,"numReadonlyUnsignedAccounts"),et(t.length,"keyCount"),Rt(Je("key"),e,"keys"),Je("recentBlockhash")]),d={numRequiredSignatures:te.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:te.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:te.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:te.Buffer.from(t),keys:this.accountKeys.map(m=>qe(m.toBytes())),recentBlockhash:Ye.decode(this.recentBlockhash)};let h=te.Buffer.alloc(2048);const f=u.encode(d,h);return s.copy(h,f),h.slice(0,f+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&sd))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=tr(t);let u=[];for(let I=0;I<a;I++){const P=t.slice(0,Sr);t=t.slice(Sr),u.push(new ge(te.Buffer.from(P)))}const d=t.slice(0,Sr);t=t.slice(Sr);const h=tr(t);let f=[];for(let I=0;I<h;I++){const P=t.shift(),M=tr(t),S=t.slice(0,M);t=t.slice(M);const T=tr(t),C=t.slice(0,T),Q=Ye.encode(te.Buffer.from(C));t=t.slice(T),f.push({programIdIndex:P,accounts:S,data:Q})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ye.encode(te.Buffer.from(d)),accountKeys:u,instructions:f};return new oi(m)}}class Xs{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new _c(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=od.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const f of s){const m=t.extractTableLookup(f);if(m!==void 0){const[I,{writable:P,readonly:M}]=m;n.push(I),i.writable.push(...P),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new _c(u,i).compileInstructions(e.instructions);return new Xs({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();wr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();wr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();wr(s,this.addressTableLookups.length);const a=se([Pe("prefix"),se([Pe("numRequiredSignatures"),Pe("numReadonlySignedAccounts"),Pe("numReadonlyUnsignedAccounts")],"header"),et(e.length,"staticAccountKeysLength"),Rt(Je(),this.staticAccountKeys.length,"staticAccountKeys"),Je("recentBlockhash"),et(n.length,"instructionsLength"),et(t.length,"serializedInstructions"),et(s.length,"addressTableLookupsLength"),et(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(hs),d=1<<7,h=a.encode({prefix:d,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:Ye.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(hs);for(const n of this.compiledInstructions){const i=Array();wr(i,n.accountKeyIndexes.length);const s=Array();wr(s,n.data.length),e+=se([Pe("programIdIndex"),et(i.length,"encodedAccountKeyIndexesLength"),Rt(Pe(),n.accountKeyIndexes.length,"accountKeyIndexes"),et(s.length,"encodedDataLength"),et(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(hs);for(const n of this.addressTableLookups){const i=Array();wr(i,n.writableIndexes.length);const s=Array();wr(s,n.readonlyIndexes.length),e+=se([Je("accountKey"),et(i.length,"encodedWritableIndexesLength"),Rt(Pe(),n.writableIndexes.length,"writableIndexes"),et(s.length,"encodedReadonlyIndexesLength"),Rt(Pe(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&sd;ot(n!==i,"Expected versioned message but received legacy message");const s=i;ot(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],d=tr(t);for(let M=0;M<d;M++)u.push(new ge(t.splice(0,Sr)));const h=Ye.encode(t.splice(0,Sr)),f=tr(t),m=[];for(let M=0;M<f;M++){const S=t.shift(),T=tr(t),C=t.splice(0,T),Q=tr(t),ce=new Uint8Array(t.splice(0,Q));m.push({programIdIndex:S,accountKeyIndexes:C,data:ce})}const I=tr(t),P=[];for(let M=0;M<I;M++){const S=new ge(t.splice(0,Sr)),T=tr(t),C=t.splice(0,T),Q=tr(t),ce=t.splice(0,Q);P.push({accountKey:S,writableIndexes:C,readonlyIndexes:ce})}return new Xs({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:P})}}const Yp={deserializeMessageVersion(r){const e=r[0],t=e&sd;return t===e?"legacy":t},deserialize:r=>{const e=Yp.deserializeMessageVersion(r);if(e==="legacy")return oi.from(r);if(e===0)return Xs.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let $i=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const rR=te.Buffer.alloc(ra).fill(0);class St{constructor(e){this.keys=void 0,this.programId=void 0,this.data=te.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ht{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new St(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],s=[];t.forEach(S=>{S.keys.forEach(C=>{s.push({...C})});const T=S.programId.toString();i.includes(T)||i.push(T)}),i.forEach(S=>{s.push({pubkey:new ge(S),isSigner:!1,isWritable:!1})});const a=[];s.forEach(S=>{const T=S.pubkey.toString(),C=a.findIndex(Q=>Q.pubkey.toString()===T);C>-1?(a[C].isWritable=a[C].isWritable||S.isWritable,a[C].isSigner=a[C].isSigner||S.isSigner):a.push(S)}),a.sort(function(S,T){if(S.isSigner!==T.isSigner)return S.isSigner?-1:1;if(S.isWritable!==T.isWritable)return S.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",C)});const u=a.findIndex(S=>S.pubkey.equals(n));if(u>-1){const[S]=a.splice(u,1);S.isSigner=!0,S.isWritable=!0,a.unshift(S)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const S of this.signatures){const T=a.findIndex(C=>C.pubkey.equals(S.publicKey));if(T>-1)a[T].isSigner||(a[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let d=0,h=0,f=0;const m=[],I=[];a.forEach(({pubkey:S,isSigner:T,isWritable:C})=>{T?(m.push(S.toString()),d+=1,C||(h+=1)):(I.push(S.toString()),C||(f+=1))});const P=m.concat(I),M=t.map(S=>{const{data:T,programId:C}=S;return{programIdIndex:P.indexOf(C.toString()),accounts:S.keys.map(Q=>P.indexOf(Q.pubkey.toString())),data:Ye.encode(T)}});return M.forEach(S=>{ot(S.programIdIndex>=0),S.accounts.forEach(T=>ot(T>=0))}),new oi({header:{numRequiredSignatures:d,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:f},accountKeys:P,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=jp(n,i.secretKey);this._addSignature(i.publicKey,qe(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ot(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=te.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!GT(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];wr(n,t.length);const i=n.length+t.length*64+e.length,s=te.Buffer.alloc(i);return ot(t.length<256),te.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(ot(a.length===64,"signature has invalid length"),te.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),ot(s.length<=hs,`Transaction too large: ${s.length} > ${hs}`),s}get keys(){return ot(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ot(this.instructions.length===1),this.instructions[0].programId}get data(){return ot(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=tr(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,ra);t=t.slice(ra),i.push(Ye.encode(te.Buffer.from(a)))}return ht.populate(oi.from(t),i)}static populate(e,t=[]){const n=new ht;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ye.encode(rR)?null:Ye.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new St({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ye.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Qp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d}=n,h=a-u;ot(h>0,"Message header is invalid");const f=e.staticAccountKeys.length-a-d;ot(f>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const P=[];for(const M of i){const S=[];for(const C of M.accountKeyIndexes){const Q=m.get(C);if(Q===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ce=C<a;let ae;ce?ae=C<h:C<m.staticAccountKeys.length?ae=C-a<f:ae=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,S.push({pubkey:Q,isSigner:C<n.numRequiredSignatures,isWritable:ae})}const T=m.get(M.programIdIndex);if(T===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);P.push(new St({programId:T,data:qe(M.data),keys:S}))}return new Qp({payerKey:I,instructions:P,recentBlockhash:s})}compileToLegacyMessage(){return oi.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Xs.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Jp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)ot(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(ra));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();wr(t,this.signatures.length);const n=se([et(t.length,"encodedSignaturesLength"),Rt(XT(),this.signatures.length,"signatures"),et(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=tr(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,ra)));const s=Yp.deserialize(new Uint8Array(t));return new Jp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));ot(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=jp(t,i.secretKey)}}addSignature(e,t){ot(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));ot(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const iR=160,sR=64,oR=iR/sR,Gw=1e3/oR,gi=new ge("SysvarC1ock11111111111111111111111111111111"),aR=new ge("SysvarEpochSchedu1e111111111111111111111111"),cR=new ge("Sysvar1nstructions1111111111111111111111111"),fl=new ge("SysvarRecentB1ockHashes11111111111111111111"),ia=new ge("SysvarRent111111111111111111111111111111111"),uR=new ge("SysvarRewards111111111111111111111111111111"),lR=new ge("SysvarS1otHashes111111111111111111111111111"),dR=new ge("SysvarS1otHistory11111111111111111111111111"),hl=new ge("SysvarStakeHistory1111111111111111111111111");async function rp(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,d=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Fs(r){return new Promise(e=>setTimeout(e,r))}function tt(r,e){const t=r.layout.span>=0?r.layout.span:qw(r,e),n=te.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ft(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const Hw=it("lamportsPerSignature"),Yw=se([oe("version"),oe("state"),Je("authorizedPubkey"),Je("nonce"),se([Hw],"feeCalculator")]),ip=Yw.span;class ad{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Yw.decode(qe(e),0);return new ad({authorizedPubkey:new ge(t.authorizedPubkey),nonce:new ge(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const fR=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},hR=r=>e=>{const t=et(r,e),{encode:n,decode:i}=fR(t),s=t;return s.decode=(a,u)=>{const d=i(a,u);return ew(te.Buffer.from(d))},s.encode=(a,u,d)=>{const h=Rp(a,r);return n(h,u,d)},s},sa=hR(8);class pR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=oe("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Pt))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ft(Pt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new ge(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ft(Pt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ft(Pt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new ge(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ft(Pt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ft(Pt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ge(t),seed:n,space:i,programId:new ge(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ft(Pt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ge(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ft(Pt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ge(t),seed:n,programId:new ge(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ft(Pt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ge(t),seed:n,lamports:i,space:s,programId:new ge(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ft(Pt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ge(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ft(Pt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ft(Pt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ft(Pt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ge(t)}}static checkProgramId(e){if(!e.equals(En.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Pt=Object.freeze({Create:{index:0,layout:se([oe("instruction"),Lt("lamports"),Lt("space"),Je("programId")])},Assign:{index:1,layout:se([oe("instruction"),Je("programId")])},Transfer:{index:2,layout:se([oe("instruction"),sa("lamports")])},CreateWithSeed:{index:3,layout:se([oe("instruction"),Je("base"),qs("seed"),Lt("lamports"),Lt("space"),Je("programId")])},AdvanceNonceAccount:{index:4,layout:se([oe("instruction")])},WithdrawNonceAccount:{index:5,layout:se([oe("instruction"),Lt("lamports")])},InitializeNonceAccount:{index:6,layout:se([oe("instruction"),Je("authorized")])},AuthorizeNonceAccount:{index:7,layout:se([oe("instruction"),Je("authorized")])},Allocate:{index:8,layout:se([oe("instruction"),Lt("space")])},AllocateWithSeed:{index:9,layout:se([oe("instruction"),Je("base"),qs("seed"),Lt("space"),Je("programId")])},AssignWithSeed:{index:10,layout:se([oe("instruction"),Je("base"),qs("seed"),Je("programId")])},TransferWithSeed:{index:11,layout:se([oe("instruction"),sa("lamports"),qs("seed"),Je("programId")])},UpgradeNonceAccount:{index:12,layout:se([oe("instruction")])}});class En{constructor(){}static createAccount(e){const t=Pt.Create,n=tt(t,{lamports:e.lamports,space:e.space,programId:qe(e.programId.toBuffer())});return new St({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Pt.TransferWithSeed;t=tt(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:qe(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Pt.Transfer;t=tt(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Pt.AssignWithSeed;t=tt(i,{base:qe(e.basePubkey.toBuffer()),seed:e.seed,programId:qe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Pt.Assign;t=tt(i,{programId:qe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Pt.CreateWithSeed,n=tt(t,{base:qe(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:qe(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new St({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new ht;"basePubkey"in e&&"seed"in e?t.add(En.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ip,programId:this.programId})):t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ip,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Pt.InitializeNonceAccount,n=tt(t,{authorized:qe(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fl,isSigner:!1,isWritable:!1},{pubkey:ia,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new St(i)}static nonceAdvance(e){const t=Pt.AdvanceNonceAccount,n=tt(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fl,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new St(i)}static nonceWithdraw(e){const t=Pt.WithdrawNonceAccount,n=tt(t,{lamports:e.lamports});return new St({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fl,isSigner:!1,isWritable:!1},{pubkey:ia,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Pt.AuthorizeNonceAccount,n=tt(t,{authorized:qe(e.newAuthorizedPubkey.toBuffer())});return new St({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Pt.AllocateWithSeed;t=tt(i,{base:qe(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:qe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Pt.Allocate;t=tt(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:t})}}En.programId=new ge("11111111111111111111111111111111");const gR=hs-300;class Zs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Zs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let P=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(P=P||new ht,P.add(En.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(P=P||new ht,P.add(En.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(P=P||new ht,P.add(En.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else P=new ht().add(En.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));P!==null&&await rp(e,P,[t,n],{commitment:"confirmed"})}const a=se([oe("instruction"),oe("offset"),oe("bytesLength"),oe("bytesLengthPadding"),Rt(Pe("byte"),kr(oe(),-8),"bytes")]),u=Zs.chunkSize;let d=0,h=s,f=[];for(;h.length>0;){const m=h.slice(0,u),I=te.Buffer.alloc(u+16);a.encode({instruction:0,offset:d,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const P=new ht().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});f.push(rp(e,P,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Fs(1e3/4),d+=u,h=h.slice(u)}await Promise.all(f);{const m=se([oe("instruction")]),I=te.Buffer.alloc(m.span);m.encode({instruction:1},I);const P=new ht().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ia,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",S=await e.sendTransaction(P,[t,n],{preflightCommitment:M}),{context:T,value:C}=await e.confirmTransaction({signature:S,lastValidBlockHeight:P.lastValidBlockHeight,blockhash:P.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${S} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>T.slot)break}catch{}await new Promise(Q=>setTimeout(Q,Math.round(Gw/2)))}}return!0}}Zs.chunkSize=gR;const yR=new ge("BPFLoader2111111111111111111111111111111111");class mR{static getMinNumSignatures(e){return Zs.getMinNumSignatures(e)}static load(e,t,n,i,s){return Zs.load(e,t,n,s,i)}}function bR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vR=Object.prototype.toString,wR=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function tc(r,e){var t,n,i,s,a,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return tc(r.toJSON(),e);if(d=vR.call(r),d==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=tc(r[t],!0)+",";return n>-1&&(i+=tc(r[t],!0)),i+"]"}else if(d==="[object Object]"){for(s=wR(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=tc(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var _R=function(r){var e=tc(r,!1);if(e!==void 0)return""+e},Cb=bR(_R);const Xa=32;function Eh(r){let e=0;for(;r>1;)r/=2,e++;return e}function AR(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Qw{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Eh(AR(e+Xa+1))-Eh(Xa)-1,n=this.getSlotsInEpoch(t),i=e-(n-Xa);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Xa:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Eh(Xa)):this.slotsPerEpoch}}class sp extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const SR={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ke extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var kR=globalThis.fetch;class IR extends _x{constructor(e,t,n){const i=s=>{const a=kx(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function ER(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Lb=56;class op{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=ER(PR,e),n=e.length-Lb;ot(n>=0,"lookup table is invalid"),ot(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=se([Rt(Je(),i,"addresses")]).decode(e.slice(Lb));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ge(t.authority[0]):void 0,addresses:s.map(a=>new ge(a))}}}const PR={index:1,layout:se([oe("typeIndex"),sa("deactivationSlot"),it("lastExtendedSlot"),Pe("lastExtendedStartIndex"),Pe(),Rt(Je(),kr(Pe(),-1),"authority")])},OR=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xR(r){const e=r.match(OR);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),d=u==null?"":`:${u+1}`;return`${a}//${n}${d}${s}`}const sn=Ii(va(ge),F(),r=>new ge(r)),Jw=wa([F(),De("base64")]),Xp=Ii(va(te.Buffer),Jw,r=>te.Buffer.from(r[0],"base64")),Xw=30*1e3;function TR(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Mt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function Zw(r){return vt([B({jsonrpc:De("2.0"),id:F(),result:r}),B({jsonrpc:De("2.0"),id:F(),error:B({code:Ei(),message:F(),data:de(Qv())})})])}const RR=Zw(Ei());function je(r){return Ii(Zw(r),RR,e=>"error"in e?e:{...e,result:pe(e.result,r)})}function jt(r){return je(B({context:B({slot:A()}),value:r}))}function cd(r){return B({context:B({slot:A()}),value:r})}function Ph(r,e){return r===0?new Xs({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ge(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ye.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new oi(e)}const BR=B({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()}),MR=je(Y(H(B({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:de(H(A()))})))),CR=Y(B({slot:A(),prioritizationFee:A()})),LR=B({total:A(),validator:A(),foundation:A(),epoch:A()}),KR=B({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:de(A()),transactionCount:de(A())}),DR=B({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:rn(),firstNormalEpoch:A(),firstNormalSlot:A()}),NR=Gl(F(),Y(A())),uo=H(vt([B({}),F()])),$R=B({err:uo}),UR=De("receivedSignature"),FR=B({"solana-core":F(),"feature-set":de(A())}),Kb=jt(B({err:H(vt([B({}),F()])),logs:H(Y(F())),accounts:de(H(Y(H(B({executable:rn(),owner:F(),lamports:A(),data:Y(F()),rentEpoch:de(A())}))))),unitsConsumed:de(A()),returnData:de(H(B({programId:F(),data:wa([F(),De("base64")])})))})),WR=jt(B({byIdentity:Gl(F(),Y(A())),range:B({firstSlot:A(),lastSlot:A()})}));function VR(r,e,t,n,i,s){const a=t||kR;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(f,m)=>{const I=await new Promise((P,M)=>{try{n(f,m,(S,T)=>P([S,T]))}catch(S){M(S)}});return await a(...I)}),new Ax(async(f,m)=>{const I={method:"POST",body:f,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},zB)};try{let P=5,M,S=500;for(;d?M=await d(r,I):M=await a(r,I),!(M.status!==429||i===!0||(P-=1,P===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${S}ms delay...`),await Fs(S),S*=2;const T=await M.text();M.ok?m(null,T):m(new Error(`${M.status} ${M.statusText}: ${T}`))}catch(P){P instanceof Error&&m(P)}},{})}function zR(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function jR(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const qR=je(BR),GR=je(LR),HR=je(CR),YR=je(KR),QR=je(DR),JR=je(NR),XR=je(A()),ZR=jt(B({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:Y(sn)})),ap=B({amount:F(),uiAmount:H(A()),decimals:A(),uiAmountString:de(F())}),eB=jt(Y(B({address:sn,amount:F(),uiAmount:H(A()),decimals:A(),uiAmountString:de(F())}))),tB=jt(Y(B({pubkey:sn,account:B({executable:rn(),owner:sn,lamports:A(),data:Xp,rentEpoch:A()})}))),cp=B({program:F(),parsed:Ei(),space:A()}),nB=jt(Y(B({pubkey:sn,account:B({executable:rn(),owner:sn,lamports:A(),data:cp,rentEpoch:A()})}))),rB=jt(Y(B({lamports:A(),address:sn}))),Ac=B({executable:rn(),owner:sn,lamports:A(),data:Xp,rentEpoch:A()}),iB=B({pubkey:sn,account:Ac}),sB=Ii(vt([va(te.Buffer),cp]),vt([Jw,cp]),r=>Array.isArray(r)?pe(r,Xp):r),up=B({executable:rn(),owner:sn,lamports:A(),data:sB,rentEpoch:A()}),oB=B({pubkey:sn,account:up}),aB=B({state:vt([De("active"),De("inactive"),De("activating"),De("deactivating")]),active:A(),inactive:A()}),cB=je(Y(B({signature:F(),slot:A(),err:uo,memo:H(F()),blockTime:de(H(A()))}))),uB=je(Y(B({signature:F(),slot:A(),err:uo,memo:H(F()),blockTime:de(H(A()))}))),lB=B({subscription:A(),result:cd(Ac)}),dB=B({pubkey:sn,account:Ac}),fB=B({subscription:A(),result:cd(dB)}),hB=B({parent:A(),slot:A(),root:A()}),pB=B({subscription:A(),result:hB}),gB=vt([B({type:vt([De("firstShredReceived"),De("completed"),De("optimisticConfirmation"),De("root")]),slot:A(),timestamp:A()}),B({type:De("createdBank"),parent:A(),slot:A(),timestamp:A()}),B({type:De("frozen"),slot:A(),timestamp:A(),stats:B({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),B({type:De("dead"),slot:A(),timestamp:A(),err:F()})]),yB=B({subscription:A(),result:gB}),mB=B({subscription:A(),result:cd(vt([$R,UR]))}),bB=B({subscription:A(),result:A()}),vB=B({pubkey:F(),gossip:H(F()),tpu:H(F()),rpc:H(F()),version:H(F())}),Db=B({votePubkey:F(),nodePubkey:F(),activatedStake:A(),epochVoteAccount:rn(),epochCredits:Y(wa([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:H(A())}),wB=je(B({current:Y(Db),delinquent:Y(Db)})),_B=vt([De("processed"),De("confirmed"),De("finalized")]),AB=B({slot:A(),confirmations:H(A()),err:uo,confirmationStatus:de(_B)}),SB=jt(Y(H(AB))),kB=je(A()),e_=B({accountKey:sn,writableIndexes:Y(A()),readonlyIndexes:Y(A())}),Zp=B({signatures:Y(F()),message:B({accountKeys:Y(F()),header:B({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:Y(B({accounts:Y(A()),data:F(),programIdIndex:A()})),recentBlockhash:F(),addressTableLookups:de(Y(e_))})}),t_=B({pubkey:sn,signer:rn(),writable:rn(),source:de(vt([De("transaction"),De("lookupTable")]))}),n_=B({accountKeys:Y(t_),signatures:Y(F())}),r_=B({parsed:Ei(),program:F(),programId:sn}),i_=B({accounts:Y(sn),data:F(),programId:sn}),IB=vt([i_,r_]),EB=vt([B({parsed:Ei(),program:F(),programId:F()}),B({accounts:Y(F()),data:F(),programId:F()})]),s_=Ii(IB,EB,r=>"accounts"in r?pe(r,i_):pe(r,r_)),o_=B({signatures:Y(F()),message:B({accountKeys:Y(t_),instructions:Y(s_),recentBlockhash:F(),addressTableLookups:de(H(Y(e_)))})}),El=B({accountIndex:A(),mint:F(),owner:de(F()),uiTokenAmount:ap}),a_=B({writable:Y(sn),readonly:Y(sn)}),ud=B({err:uo,fee:A(),innerInstructions:de(H(Y(B({index:A(),instructions:Y(B({accounts:Y(A()),data:F(),programIdIndex:A()}))})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:de(H(Y(F()))),preTokenBalances:de(H(Y(El))),postTokenBalances:de(H(Y(El))),loadedAddresses:de(a_),computeUnitsConsumed:de(A())}),eg=B({err:uo,fee:A(),innerInstructions:de(H(Y(B({index:A(),instructions:Y(s_)})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:de(H(Y(F()))),preTokenBalances:de(H(Y(El))),postTokenBalances:de(H(Y(El))),loadedAddresses:de(a_),computeUnitsConsumed:de(A())}),Aa=vt([De(0),De("legacy")]),lo=B({pubkey:F(),lamports:A(),postBalance:H(A()),rewardType:H(F()),commission:de(H(A()))}),PB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:Zp,meta:H(ud),version:de(Aa)})),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),OB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),xB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:n_,meta:H(ud),version:de(Aa)})),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),TB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:o_,meta:H(eg),version:de(Aa)})),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),RB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:n_,meta:H(eg),version:de(Aa)})),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),BB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),rewards:de(Y(lo)),blockTime:H(A()),blockHeight:H(A())}))),MB=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:Zp,meta:H(ud)})),rewards:de(Y(lo)),blockTime:H(A())}))),Nb=je(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),signatures:Y(F()),blockTime:H(A())}))),Oh=je(H(B({slot:A(),meta:H(ud),blockTime:de(H(A())),transaction:Zp,version:de(Aa)}))),zu=je(H(B({slot:A(),transaction:o_,meta:H(eg),blockTime:de(H(A())),version:de(Aa)}))),CB=jt(B({blockhash:F(),feeCalculator:B({lamportsPerSignature:A()})})),LB=jt(B({blockhash:F(),lastValidBlockHeight:A()})),KB=jt(rn()),DB=B({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()}),NB=je(Y(DB)),$B=jt(H(B({feeCalculator:B({lamportsPerSignature:A()})}))),UB=je(F()),FB=je(F()),WB=B({err:uo,logs:Y(F()),signature:F()}),VB=B({result:cd(WB),subscription:A()}),zB={"solana-client":"js/0.0.0-development"};class jB{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async f=>{const{commitment:m,config:I}=Mt(f),P=this._buildArgs([],m,void 0,I),M=Cb(P);return h[M]=h[M]??(async()=>{try{const S=await this._rpcRequest("getBlockHeight",P),T=pe(S,je(A()));if("error"in T)throw new ke(T.error,"failed to get block height information");return T.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,d;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,d=t.httpAgent),this._rpcEndpoint=TR(e),this._rpcWsEndpoint=n||xR(e),this._rpcClient=VR(e,i,s,a,u,d),this._rpcRequest=zR(this._rpcClient),this._rpcBatchRequest=jR(this._rpcClient),this._rpcWebSocket=new IR(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=pe(a,jt(A()));if("error"in u)throw new ke(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=pe(t,je(H(A())));if("error"in n)throw new ke(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=pe(e,je(A()));if("error"in t)throw new ke(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=pe(e,XR);if("error"in t)throw new ke(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=pe(n,ZR);if("error"in i)throw new ke(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=pe(i,jt(ap));if("error"in s)throw new ke(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=pe(i,jt(ap));if("error"in s)throw new ke(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Mt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),d=await this._rpcRequest("getTokenAccountsByOwner",u),h=pe(d,tB);if("error"in h)throw new ke(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=pe(a,nB);if("error"in u)throw new ke(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=pe(i,rB);if("error"in s)throw new ke(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=pe(i,eB);if("error"in s)throw new ke(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=pe(a,jt(H(Ac)));if("error"in u)throw new ke(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=pe(a,jt(H(up)));if("error"in u)throw new ke(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Mt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),d=pe(u,jt(Y(H(up))));if("error"in d)throw new ke(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Mt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),d=pe(u,jt(Y(H(Ac))));if("error"in d)throw new ke(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Mt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),d=pe(u,je(aB));if("error"in d)throw new ke(d.error,`failed to get Stake Activation ${e.toBase58()}`);return d.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Mt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),d=await this._rpcRequest("getProgramAccounts",u),h=Y(iB),f=a.withContext===!0?pe(d,jt(h)):pe(d,je(h));if("error"in f)throw new ke(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=pe(a,je(Y(oB)));if("error"in u)throw new ke(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=Ye.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return ot(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((d,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const P={context:I,value:m};d({__type:$i.PROCESSED,response:P})},e);const f=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await f,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:P}=m;if(P!=null)if(P!=null&&P.err)h(P.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(P.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(P.confirmationStatus==="processed"||P.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,d({__type:$i.PROCESSED,response:{context:I,value:P}})}})()}catch(f){h(f)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let P=await I();if(!s){for(;P<=n;)if(await Fs(1e3),s||(P=await I(),s))return;m({__type:$i.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let f;try{const m=await Promise.race([h,d,a]);if(m.__type===$i.PROCESSED)f=m.response;else throw new Gp(i)}finally{s=!0,u()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const d=new Promise(P=>{let M=s,S=null;const T=async()=>{try{const{context:C,value:Q}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return S=C.slot,Q==null?void 0:Q.nonce}catch{return M}};(async()=>{if(M=await T(),!u)for(;;){if(s!==M){P({__type:$i.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await Fs(2e3),u||(M=await T(),u))return}})()}),{abortConfirmation:h,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const P=await Promise.race([m,f,d]);if(P.__type===$i.PROCESSED)I=P.response;else{let M;for(;;){const S=await this.getSignatureStatus(a);if(S==null)break;if(S.context.slot<(P.slotInWhichNonceDidAdvance??n)){await Fs(400);continue}M=S;break}if(M!=null&&M.value){const S=e||"finalized",{confirmationStatus:T}=M.value;switch(S){case"processed":case"recent":if(T!=="processed"&&T!=="confirmed"&&T!=="finalized")throw new Wo(a);break;case"confirmed":case"single":case"singleGossip":if(T!=="confirmed"&&T!=="finalized")throw new Wo(a);break;case"finalized":case"max":case"root":if(T!=="finalized")throw new Wo(a);break;default:(C=>{})(S)}I={context:M.context,value:{err:M.value.err}}}else throw new Wo(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(d=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:$i.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const d=await Promise.race([a,i]);if(d.__type===$i.PROCESSED)u=d.response;else throw new Hp(t,d.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=pe(e,je(Y(vB)));if("error"in t)throw new ke(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=pe(n,wB);if("error"in i)throw new ke(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=pe(s,je(A()));if("error"in a)throw new ke(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=pe(s,je(F()));if("error"in a)throw new ke(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=pe(i,je(Y(sn)));if("error"in s)throw new ke(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);ot(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=pe(i,SB);if("error"in s)throw new ke(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=pe(s,je(A()));if("error"in a)throw new ke(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=pe(n,qR);if("error"in i)throw new ke(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Mt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),d=pe(u,MR);if("error"in d)throw new ke(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=pe(e,GR);if("error"in t)throw new ke(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=pe(s,YR);if("error"in a)throw new ke(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=pe(e,QR);if("error"in t)throw new ke(t.error,"failed to get epoch schedule");const n=t.result;return new Qw(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=pe(e,JR);if("error"in t)throw new ke(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=pe(i,kB);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=pe(n,CB);if("error"in i)throw new ke(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=pe(t,NB);if("error"in n)throw new ke(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=pe(i,$B);if("error"in s)throw new ke(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=qe(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=pe(s,jt(H(A())));if("error"in a)throw new ke(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=pe(i,HR);if("error"in s)throw new ke(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=pe(s,LB);if("error"in a)throw new ke(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=pe(a,KB);if("error"in u)throw new ke(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=pe(e,je(FR));if("error"in t)throw new ke(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=pe(e,je(F()));if("error"in t)throw new ke(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=pe(a,xB);if("error"in u)throw u.error;return u.result}case"none":{const u=pe(a,OB);if("error"in u)throw u.error;return u.result}default:{const u=pe(a,PB);if("error"in u)throw u.error;const{result:d}=u;return d?{...d,transactions:d.transactions.map(({transaction:h,meta:f,version:m})=>({meta:f,transaction:{...h,message:Ph(m,h.message)},version:m}))}:null}}}catch(u){throw new ke(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=pe(a,RB);if("error"in u)throw u.error;return u.result}case"none":{const u=pe(a,BB);if("error"in u)throw u.error;return u.result}default:{const u=pe(a,TB);if("error"in u)throw u.error;return u.result}}}catch(u){throw new ke(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...d}=e;n=u,t=d}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=pe(s,WR);if("error"in a)throw new ke(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=pe(a,Oh);if("error"in u)throw new ke(u.error,"failed to get transaction");const d=u.result;return d&&{...d,transaction:{...d.transaction,message:Ph(d.version,d.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Mt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=pe(a,zu);if("error"in u)throw new ke(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Mt(t),s=e.map(d=>{const h=this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(d=>{const h=pe(d,zu);if("error"in h)throw new ke(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Mt(t),s=e.map(d=>{const h=this._buildArgsAtLeastConfirmed([d],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(d=>{const h=pe(d,Oh);if("error"in h)throw new ke(h.error,"failed to get transactions");const f=h.result;return f&&{...f,transaction:{...f.transaction,message:Ph(f.version,f.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=pe(i,MB);if("error"in s)throw new ke(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:d,meta:h})=>{const f=new oi(d.message);return{meta:h,transaction:{...d,message:f}}})};return{...u,transactions:u.transactions.map(({transaction:d,meta:h})=>({meta:h,transaction:ht.populate(d.message,d.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=pe(s,je(Y(A())));if("error"in a)throw new ke(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=pe(i,Nb);if("error"in s)throw new ke(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=pe(i,Nb);if("error"in s)throw new ke(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=pe(i,Oh);if("error"in s)throw new ke(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new oi(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:ht.populate(u,d)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=pe(i,zu);if("error"in s)throw new ke(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=pe(a,zu);if("error"in u)throw new ke(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const d=await this.getConfirmedBlockSignatures(t,"finalized");d.signatures.length>0&&(i.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(i.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=pe(s,cB);if("error"in a)throw new ke(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=pe(s,uB);if("error"in a)throw new ke(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new op({key:e,state:op.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=ad.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=pe(n,UB);if("error"in i)throw new ke(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Fs(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Xw;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Fs(Gw/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Mt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=pe(s,jt(A()));if("error"in a)throw new ke(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const S=e.serialize(),T=te.Buffer.from(S).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Q=[T,C],ce=await this._rpcRequest("simulateTransaction",Q),ae=pe(ce,Kb);if("error"in ae)throw new Error("failed to simulate transaction: "+ae.error.message);return ae.result}let i;if(e instanceof ht){let M=e;i=new ht,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=ht.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const S=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const T=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(T)&&!this._blockhashInfo.transactionSignatures.includes(T)){this._blockhashInfo.simulatedSignatures.push(T);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(S=>S.toBase58());f.accounts={encoding:"base64",addresses:M}}s&&(f.sigVerify=!0);const m=[h,f],I=await this._rpcRequest("simulateTransaction",m),P=pe(I,Kb);if("error"in P){let M;if("data"in P.error&&(M=P.error.data.logs,M&&Array.isArray(M))){const S=`
    `,T=S+M.join(S);console.error(P.error.message,T)}throw new sp("failed to simulate transaction: "+P.error.message,M)}return P.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const d=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=qe(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),d=pe(u,FB);if("error"in d){let h;throw"data"in d.error&&(h=d.error.data.logs),new sp("failed to send transaction: "+d.error.message,h)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=pe(e,lB);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Cb([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];ot(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=pe(e,fB);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=pe(e,VB);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=pe(e,pB);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=pe(e,yB);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=pe(e,mB);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(d,h)=>{t(d,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=pe(e,bB);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Jo{constructor(e){this._keypair=void 0,this._keypair=e??Rb()}static generate(){return new Jo(Rb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Il(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Jo({publicKey:n,secretKey:e})}static fromSeed(e){const t=Il(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Jo({publicKey:t,secretKey:n})}get publicKey(){return new ge(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Fi=Object.freeze({CreateLookupTable:{index:0,layout:se([oe("instruction"),sa("recentSlot"),Pe("bumpSeed")])},FreezeLookupTable:{index:1,layout:se([oe("instruction")])},ExtendLookupTable:{index:2,layout:se([oe("instruction"),sa(),Rt(Je(),kr(oe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:se([oe("instruction")])},CloseLookupTable:{index:4,layout:se([oe("instruction")])}});class qB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=oe("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Fi))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ft(Fi.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ft(Fi.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new ge(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(tg.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class tg{constructor(){}static createLookupTable(e){const[t,n]=ge.findProgramAddressSync([e.authority.toBuffer(),Rp(BigInt(e.recentSlot),8)],this.programId),i=Fi.CreateLookupTable,s=tt(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:En.programId,isSigner:!1,isWritable:!1}];return[new St({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Fi.FreezeLookupTable,n=tt(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new St({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Fi.ExtendLookupTable,n=tt(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:En.programId,isSigner:!1,isWritable:!1}),new St({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Fi.DeactivateLookupTable,n=tt(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new St({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Fi.CloseLookupTable,n=tt(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new St({programId:this.programId,keys:i,data:n})}}tg.programId=new ge("AddressLookupTab1e1111111111111111111111111");class GB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Pe("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(mi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ft(mi.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ft(mi.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ft(mi.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ft(mi.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(ng.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const mi=Object.freeze({RequestUnits:{index:0,layout:se([Pe("instruction"),oe("units"),oe("additionalFee")])},RequestHeapFrame:{index:1,layout:se([Pe("instruction"),oe("bytes")])},SetComputeUnitLimit:{index:2,layout:se([Pe("instruction"),oe("units")])},SetComputeUnitPrice:{index:3,layout:se([Pe("instruction"),sa("microLamports")])}});class ng{constructor(){}static requestUnits(e){const t=mi.RequestUnits,n=tt(t,e);return new St({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=mi.RequestHeapFrame,n=tt(t,e);return new St({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=mi.SetComputeUnitLimit,n=tt(t,e);return new St({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=mi.SetComputeUnitPrice,n=tt(t,{microLamports:BigInt(e.microLamports)});return new St({keys:[],programId:this.programId,data:n})}}ng.programId=new ge("ComputeBudget111111111111111111111111111111");const $b=64,Ub=32,Fb=64,Wb=se([Pe("numSignatures"),Pe("padding"),qt("signatureOffset"),qt("signatureInstructionIndex"),qt("publicKeyOffset"),qt("publicKeyInstructionIndex"),qt("messageDataOffset"),qt("messageDataSize"),qt("messageInstructionIndex")]);class ld{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;ot(t.length===Ub,`Public Key must be ${Ub} bytes but received ${t.length} bytes`),ot(i.length===Fb,`Signature must be ${Fb} bytes but received ${i.length} bytes`);const a=Wb.span,u=a+t.length,d=u+i.length,h=1,f=te.Buffer.alloc(d+n.length),m=s??65535;return Wb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:d,messageDataSize:n.length,messageInstructionIndex:m},f),f.fill(t,a),f.fill(i,u),f.fill(n,d),new St({keys:[],programId:ld.programId,data:f})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;ot(t.length===$b,`Private key must be ${$b} bytes but received ${t.length} bytes`);try{const s=Jo.fromSecretKey(t),a=s.publicKey.toBytes(),u=jp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ld.programId=new ge("Ed25519SigVerify111111111111111111111111111");const HB=(r,e)=>{const t=Rc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Rc.utils.isValidPrivateKey;const YB=Rc.getPublicKey,Vb=32,xh=20,zb=64,QB=11,Th=se([Pe("numSignatures"),qt("signatureOffset"),Pe("signatureInstructionIndex"),qt("ethAddressOffset"),Pe("ethAddressInstructionIndex"),qt("messageDataOffset"),qt("messageDataSize"),Pe("messageInstructionIndex"),et(20,"ethAddress"),et(64,"signature"),Pe("recoveryId")]);class Xo{constructor(){}static publicKeyToEthAddress(e){ot(e.length===zb,`Public key must be ${zb} bytes but received ${e.length} bytes`);try{return te.Buffer.from(fb(qe(e))).slice(-xh)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return Xo.createInstructionWithEthAddress({ethAddress:Xo.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=te.Buffer.from(t.substr(2),"hex"):u=te.Buffer.from(t,"hex"):u=t,ot(u.length===xh,`Address must be ${xh} bytes but received ${u.length} bytes`);const d=1+QB,h=d,f=d+u.length,m=f+i.length+1,I=1,P=te.Buffer.alloc(Th.span+n.length);return Th.encode({numSignatures:I,signatureOffset:f,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:qe(i),ethAddress:qe(u),recoveryId:s},P),P.fill(qe(n),Th.span),new St({keys:[],programId:Xo.programId,data:P})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;ot(t.length===Vb,`Private key must be ${Vb} bytes but received ${t.length} bytes`);try{const s=qe(t),a=YB(s,!1).slice(1),u=te.Buffer.from(fb(qe(n))),[d,h]=HB(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:d,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Xo.programId=new ge("KeccakSecp256k11111111111111111111111111111");var c_;const u_=new ge("StakeConfig11111111111111111111111111111111");class l_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Kc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}c_=Kc;Kc.default=new c_(0,0,ge.default);class JB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=oe("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(bn))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ft(bn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new l_(new ge(t.staker),new ge(t.withdrawer)),lockup:new Kc(n.unixTimestamp,n.epoch,new ge(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ft(bn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ft(bn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ge(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ft(bn.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new ge(s),newAuthorizedPubkey:new ge(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ft(bn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ft(bn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ft(bn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ft(bn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(dd.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const bn=Object.freeze({Initialize:{index:0,layout:se([oe("instruction"),ZT(),eR()])},Authorize:{index:1,layout:se([oe("instruction"),Je("newAuthorized"),oe("stakeAuthorizationType")])},Delegate:{index:2,layout:se([oe("instruction")])},Split:{index:3,layout:se([oe("instruction"),Lt("lamports")])},Withdraw:{index:4,layout:se([oe("instruction"),Lt("lamports")])},Deactivate:{index:5,layout:se([oe("instruction")])},Merge:{index:7,layout:se([oe("instruction")])},AuthorizeWithSeed:{index:8,layout:se([oe("instruction"),Je("newAuthorized"),oe("stakeAuthorizationType"),qs("authoritySeed"),Je("authorityOwner")])}}),XB=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class dd{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Kc.default,a=bn.Initialize,u=tt(a,{authorized:{staker:qe(n.staker.toBuffer()),withdrawer:qe(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:qe(s.custodian.toBuffer())}}),d={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ia,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new St(d)}static createAccountWithSeed(e){const t=new ht;t.add(En.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new ht;t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=bn.Delegate,a=tt(s);return new ht().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:hl,isSigner:!1,isWritable:!1},{pubkey:u_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=bn.Authorize,d=tt(u,{newAuthorized:qe(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ht().add({keys:h,programId:this.programId,data:d})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:d}=e,h=bn.AuthorizeWithSeed,f=tt(h,{newAuthorized:qe(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:qe(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1}];return d&&m.push({pubkey:d,isSigner:!1,isWritable:!1}),new ht().add({keys:m,programId:this.programId,data:f})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=bn.Split,u=tt(a,{lamports:s});return new St({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new ht;return t.add(En.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,d=new ht;return d.add(En.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),d.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=bn.Merge,a=tt(s);return new ht().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:hl,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=bn.Withdraw,d=tt(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:hl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new ht().add({keys:h,programId:this.programId,data:d})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=bn.Deactivate,s=tt(i);return new ht().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}dd.programId=new ge("Stake11111111111111111111111111111111111111");dd.space=200;class d_{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class ZB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=oe("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Wi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ft(Wi.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new d_(new ge(t.nodePubkey),new ge(t.authorizedVoter),new ge(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ft(Wi.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ge(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ft(Wi.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ge(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ge(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ft(Wi.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Sa.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Wi=Object.freeze({InitializeAccount:{index:0,layout:se([oe("instruction"),tR()])},Authorize:{index:1,layout:se([oe("instruction"),Je("newAuthorized"),oe("voteAuthorizationType")])},Withdraw:{index:3,layout:se([oe("instruction"),Lt("lamports")])},AuthorizeWithSeed:{index:10,layout:se([oe("instruction"),nR()])}}),eM=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Sa{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Wi.InitializeAccount,a=tt(s,{voteInit:{nodePubkey:qe(i.nodePubkey.toBuffer()),authorizedVoter:qe(i.authorizedVoter.toBuffer()),authorizedWithdrawer:qe(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ia,isSigner:!1,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new St(u)}static createAccount(e){const t=new ht;return t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Wi.Authorize,u=tt(a,{newAuthorized:qe(i.toBuffer()),voteAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ht().add({keys:d,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,d=Wi.AuthorizeWithSeed,h=tt(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:qe(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:qe(s.toBuffer()),voteAuthorizationType:a.index}}),f=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ht().add({keys:f,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Wi.Withdraw,u=tt(a,{lamports:i}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new ht().add({keys:d,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return Sa.withdraw(e)}}Sa.programId=new ge("Vote111111111111111111111111111111111111111");Sa.space=3731;const f_=new ge("Va1idator1nfo111111111111111111111111111111"),tM=B({name:F(),website:de(F()),details:de(F()),keybaseUsername:de(F())});class rg{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(tr(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new ge(t.slice(0,Sr));t=t.slice(Sr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(f_)&&i[1].isSigner){const s=qs().decode(te.Buffer.from(t)),a=JSON.parse(s);return Sx(a,tM),new rg(i[1].publicKey,a)}return null}}const nM=new ge("Vote111111111111111111111111111111111111111"),rM=se([Je("nodePubkey"),Je("authorizedWithdrawer"),Pe("commission"),it(),Rt(se([it("slot"),oe("confirmationCount")]),kr(oe(),-8),"votes"),Pe("rootSlotValid"),it("rootSlot"),it(),Rt(se([it("epoch"),Je("authorizedVoter")]),kr(oe(),-8),"authorizedVoters"),se([Rt(se([Je("authorizedPubkey"),it("epochOfLastAuthorizedSwitch"),it("targetEpoch")]),32,"buf"),it("idx"),Pe("isEmpty")],"priorVoters"),it(),Rt(se([it("epoch"),it("credits"),it("prevCredits")]),kr(oe(),-8),"epochCredits"),se([it("slot"),it("timestamp")],"lastTimestamp")]);class ig{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=rM.decode(qe(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new ig({nodePubkey:new ge(n.nodePubkey),authorizedWithdrawer:new ge(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(iM),priorVoters:sM(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function iM({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new ge(r)}}function jb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new ge(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function sM({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(jb),...r.slice(0,e).map(jb)]}const qb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function oM(r,e){const t=e===!1?"http":"https";if(!r)return qb[t].devnet;const n=qb[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function aM(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),d=s&&s.commitment,f=(await(i?r.confirmTransaction(i,d):r.confirmTransaction(u,d))).value;if(f.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(f)})`);return u}const cM=1e9;var uM=Object.freeze(Object.defineProperty({__proto__:null,Account:QT,AddressLookupTableAccount:op,AddressLookupTableInstruction:qB,AddressLookupTableProgram:tg,Authorized:l_,BLOCKHASH_CACHE_TIMEOUT_MS:Xw,BPF_LOADER_DEPRECATED_PROGRAM_ID:JT,BPF_LOADER_PROGRAM_ID:yR,BpfLoader:mR,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:mi,ComputeBudgetInstruction:GB,ComputeBudgetProgram:ng,Connection:jB,Ed25519Program:ld,Enum:HT,EpochSchedule:Qw,FeeCalculatorLayout:Hw,Keypair:Jo,LAMPORTS_PER_SOL:cM,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Fi,Loader:Zs,Lockup:Kc,MAX_SEED_LENGTH:jw,Message:oi,MessageAccountKeys:_c,MessageV0:Xs,NONCE_ACCOUNT_LENGTH:ip,NonceAccount:ad,PACKET_DATA_SIZE:hs,PUBLIC_KEY_LENGTH:Sr,PublicKey:ge,SIGNATURE_LENGTH_IN_BYTES:ra,SOLANA_SCHEMA:uc,STAKE_CONFIG_ID:u_,STAKE_INSTRUCTION_LAYOUTS:bn,SYSTEM_INSTRUCTION_LAYOUTS:Pt,SYSVAR_CLOCK_PUBKEY:gi,SYSVAR_EPOCH_SCHEDULE_PUBKEY:aR,SYSVAR_INSTRUCTIONS_PUBKEY:cR,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:fl,SYSVAR_RENT_PUBKEY:ia,SYSVAR_REWARDS_PUBKEY:uR,SYSVAR_SLOT_HASHES_PUBKEY:lR,SYSVAR_SLOT_HISTORY_PUBKEY:dR,SYSVAR_STAKE_HISTORY_PUBKEY:hl,Secp256k1Program:Xo,SendTransactionError:sp,SolanaJSONRPCError:ke,SolanaJSONRPCErrorCode:SR,StakeAuthorizationLayout:XB,StakeInstruction:JB,StakeProgram:dd,Struct:qp,SystemInstruction:pR,SystemProgram:En,Transaction:ht,TransactionExpiredBlockheightExceededError:Gp,TransactionExpiredNonceInvalidError:Wo,TransactionExpiredTimeoutError:Hp,TransactionInstruction:St,TransactionMessage:Qp,TransactionStatus:$i,VALIDATOR_INFO_KEY:f_,VERSION_PREFIX_MASK:sd,VOTE_PROGRAM_ID:nM,ValidatorInfo:rg,VersionedMessage:Yp,VersionedTransaction:Jp,VoteAccount:ig,VoteAuthorizationLayout:eM,VoteInit:d_,VoteInstruction:ZB,VoteProgram:Sa,clusterApiUrl:oM,sendAndConfirmRawTransaction:aM,sendAndConfirmTransaction:rp},Symbol.toStringTag,{value:"Module"})),Gi=Tc(uM);const Gb=()=>{const r=ai.utils.randomPrivateKey(),e=lp(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},lp=ai.getPublicKey;function Hb(r){try{return ai.ExtendedPoint.fromHex(r),!0}catch{return!1}}const lM=(r,e)=>ai.sign(r,e.slice(0,32)),dM=ai.verify,Zn=r=>te.Buffer.isBuffer(r)?r:r instanceof Uint8Array?te.Buffer.from(r.buffer,r.byteOffset,r.byteLength):te.Buffer.from(r);class fM{constructor(e){Object.assign(this,e)}encode(){return te.Buffer.from(Jv(pl,this))}static decode(e){return Xv(pl,this,e)}static decodeUnchecked(e){return Zv(pl,this,e)}}const pl=new Map;var h_;let p_;const hM=32,Gs=32;function pM(r){return r._bn!==void 0}let Yb=1;p_=Symbol.toStringTag;class we extends fM{constructor(e){if(super({}),this._bn=void 0,pM(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Ye.decode(e);if(t.length!=Gs)throw new Error("Invalid public key input");this._bn=new Ln(t)}else this._bn=new Ln(e);if(this._bn.byteLength()>Gs)throw new Error("Invalid public key input")}}static unique(){const e=new we(Yb);return Yb+=1,new we(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ye.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(te.Buffer);if(e.length===Gs)return e;const t=te.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[p_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=te.Buffer.concat([e.toBuffer(),te.Buffer.from(t),n.toBuffer()]),s=wl(i);return new we(s)}static createProgramAddressSync(e,t){let n=te.Buffer.alloc(0);e.forEach(function(s){if(s.length>hM)throw new TypeError("Max seed length exceeded");n=te.Buffer.concat([n,Zn(s)])}),n=te.Buffer.concat([n,t.toBuffer(),te.Buffer.from("ProgramDerivedAddress")]);const i=wl(n);if(Hb(i))throw new Error("Invalid seeds, address must fall off the curve");return new we(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(te.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new we(e);return Hb(t.toBytes())}}h_=we;we.default=new h_("11111111111111111111111111111111");pl.set(we,{kind:"struct",fields:[["_bn","u256"]]});new we("BPFLoader1111111111111111111111111111111111");const dp=1280-40-8,gM=127,fp=64;class Qb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const nt=(r="publicKey")=>et(32,r),Vo=(r="string")=>{const e=se([oe("length"),oe("lengthPadding"),et(kr(oe(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const d={chars:te.Buffer.from(s,"utf8")};return n(d,a,u)},i.alloc=s=>oe().span+oe().span+te.Buffer.from(s,"utf8").length,i},yM=(r="authorized")=>se([nt("staker"),nt("withdrawer")],r),mM=(r="lockup")=>se([Lt("unixTimestamp"),Lt("epoch"),nt("custodian")],r),bM=(r="voteInit")=>se([nt("nodePubkey"),nt("authorizedVoter"),nt("authorizedWithdrawer"),Pe("commission")],r),vM=(r="voteAuthorizeWithSeedArgs")=>se([oe("voteAuthorizationType"),nt("currentAuthorityDerivedKeyOwnerPubkey"),Vo("currentAuthorityDerivedKeySeed"),nt("newAuthorized")],r);function g_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return g_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function nc(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function rc(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function vr(r,e){if(!r)throw new Error(e||"Assertion failed")}class sg{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let d=n.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,d)),d},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const d=i(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new sg(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];vr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),i=e.filter(([,d])=>!d.isSigner&&d.isWritable),s=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{vr(t.length>0,"Expected at least one writable signer key");const[d]=t[0];vr(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([d])=>new we(d)),...n.map(([d])=>new we(d)),...i.map(([d])=>new we(d)),...s.map(([d])=>new we(d))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new we(s),d=e.findIndex(h=>h.equals(u));d>=0&&(vr(d<256,"Max lookup table index exceeded"),n.push(d),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Sc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new we(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ye.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Qb(this.staticAccountKeys)}static compile(e){const t=sg.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Qb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ye.encode(u.data)}));return new Sc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];rc(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:P}=m,M=Array.from(Ye.decode(m.data));let S=[];rc(S,I.length);let T=[];return rc(T,M.length),{programIdIndex:P,keyIndicesCount:te.Buffer.from(S),keyIndices:I,dataLength:te.Buffer.from(T),data:M}});let i=[];rc(i,n.length);let s=te.Buffer.alloc(dp);te.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=se([Pe("programIdIndex"),et(m.keyIndicesCount.length,"keyIndicesCount"),Rt(Pe("keyIndex"),m.keyIndices.length,"keyIndices"),et(m.dataLength.length,"dataLength"),Rt(Pe("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=se([et(1,"numRequiredSignatures"),et(1,"numReadonlySignedAccounts"),et(1,"numReadonlyUnsignedAccounts"),et(t.length,"keyCount"),Rt(nt("key"),e,"keys"),nt("recentBlockhash")]),d={numRequiredSignatures:te.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:te.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:te.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:te.Buffer.from(t),keys:this.accountKeys.map(m=>Zn(m.toBytes())),recentBlockhash:Ye.decode(this.recentBlockhash)};let h=te.Buffer.alloc(2048);const f=u.encode(d,h);return s.copy(h,f),h.slice(0,f+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&gM))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=nc(t);let u=[];for(let I=0;I<a;I++){const P=t.slice(0,Gs);t=t.slice(Gs),u.push(new we(te.Buffer.from(P)))}const d=t.slice(0,Gs);t=t.slice(Gs);const h=nc(t);let f=[];for(let I=0;I<h;I++){const P=t.shift(),M=nc(t),S=t.slice(0,M);t=t.slice(M);const T=nc(t),C=t.slice(0,T),Q=Ye.encode(te.Buffer.from(C));t=t.slice(T),f.push({programIdIndex:P,accounts:S,data:Q})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Ye.encode(te.Buffer.from(d)),accountKeys:u,instructions:f};return new Sc(m)}}const wM=te.Buffer.alloc(fp).fill(0);class bt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=te.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ft{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new bt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],s=[];t.forEach(S=>{S.keys.forEach(C=>{s.push({...C})});const T=S.programId.toString();i.includes(T)||i.push(T)}),i.forEach(S=>{s.push({pubkey:new we(S),isSigner:!1,isWritable:!1})});const a=[];s.forEach(S=>{const T=S.pubkey.toString(),C=a.findIndex(Q=>Q.pubkey.toString()===T);C>-1?(a[C].isWritable=a[C].isWritable||S.isWritable,a[C].isSigner=a[C].isSigner||S.isSigner):a.push(S)}),a.sort(function(S,T){if(S.isSigner!==T.isSigner)return S.isSigner?-1:1;if(S.isWritable!==T.isWritable)return S.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",C)});const u=a.findIndex(S=>S.pubkey.equals(n));if(u>-1){const[S]=a.splice(u,1);S.isSigner=!0,S.isWritable=!0,a.unshift(S)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const S of this.signatures){const T=a.findIndex(C=>C.pubkey.equals(S.publicKey));if(T>-1)a[T].isSigner||(a[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let d=0,h=0,f=0;const m=[],I=[];a.forEach(({pubkey:S,isSigner:T,isWritable:C})=>{T?(m.push(S.toString()),d+=1,C||(h+=1)):(I.push(S.toString()),C||(f+=1))});const P=m.concat(I),M=t.map(S=>{const{data:T,programId:C}=S;return{programIdIndex:P.indexOf(C.toString()),accounts:S.keys.map(Q=>P.indexOf(Q.pubkey.toString())),data:Ye.encode(T)}});return M.forEach(S=>{vr(S.programIdIndex>=0),S.accounts.forEach(T=>vr(T>=0))}),new Sc({header:{numRequiredSignatures:d,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:f},accountKeys:P,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=lM(n,i.secretKey);this._addSignature(i.publicKey,Zn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){vr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=te.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!dM(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];rc(n,t.length);const i=n.length+t.length*64+e.length,s=te.Buffer.alloc(i);return vr(t.length<256),te.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(vr(a.length===64,"signature has invalid length"),te.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),vr(s.length<=dp,`Transaction too large: ${s.length} > ${dp}`),s}get keys(){return vr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return vr(this.instructions.length===1),this.instructions[0].programId}get data(){return vr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=nc(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,fp);t=t.slice(fp),i.push(Ye.encode(te.Buffer.from(a)))}return Ft.populate(Sc.from(t),i)}static populate(e,t=[]){const n=new Ft;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==Ye.encode(wM)?null:Ye.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new bt({keys:s,programId:e.accountKeys[i.programIdIndex],data:Ye.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new we("SysvarC1ock11111111111111111111111111111111");new we("SysvarEpochSchedu1e111111111111111111111111");new we("Sysvar1nstructions1111111111111111111111111");const Rh=new we("SysvarRecentB1ockHashes11111111111111111111"),zo=new we("SysvarRent111111111111111111111111111111111");new we("SysvarRewards111111111111111111111111111111");new we("SysvarS1otHashes111111111111111111111111111");new we("SysvarS1otHistory11111111111111111111111111");new we("SysvarStakeHistory1111111111111111111111111");async function _M(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,d=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Nr(r,e){const t=r.layout.span>=0?r.layout.span:g_(r,e),n=te.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const AM=it("lamportsPerSignature"),SM=se([oe("version"),oe("state"),nt("authorizedPubkey"),nt("nonce"),se([AM],"feeCalculator")]),Jb=SM.span,kM=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},IM=r=>e=>{const t=et(r,e),{encode:n,decode:i}=kM(t),s=t;return s.decode=(a,u)=>{const d=i(a,u);return ew(te.Buffer.from(d))},s.encode=(a,u,d)=>{const h=Rp(a,r);return n(h,u,d)},s},oa=IM(8),$r=Object.freeze({Create:{index:0,layout:se([oe("instruction"),Lt("lamports"),Lt("space"),nt("programId")])},Assign:{index:1,layout:se([oe("instruction"),nt("programId")])},Transfer:{index:2,layout:se([oe("instruction"),oa("lamports")])},CreateWithSeed:{index:3,layout:se([oe("instruction"),nt("base"),Vo("seed"),Lt("lamports"),Lt("space"),nt("programId")])},AdvanceNonceAccount:{index:4,layout:se([oe("instruction")])},WithdrawNonceAccount:{index:5,layout:se([oe("instruction"),Lt("lamports")])},InitializeNonceAccount:{index:6,layout:se([oe("instruction"),nt("authorized")])},AuthorizeNonceAccount:{index:7,layout:se([oe("instruction"),nt("authorized")])},Allocate:{index:8,layout:se([oe("instruction"),Lt("space")])},AllocateWithSeed:{index:9,layout:se([oe("instruction"),nt("base"),Vo("seed"),Lt("space"),nt("programId")])},AssignWithSeed:{index:10,layout:se([oe("instruction"),nt("base"),Vo("seed"),nt("programId")])},TransferWithSeed:{index:11,layout:se([oe("instruction"),oa("lamports"),Vo("seed"),nt("programId")])},UpgradeNonceAccount:{index:12,layout:se([oe("instruction")])}});class yi{constructor(){}static createAccount(e){const t=$r.Create,n=Nr(t,{lamports:e.lamports,space:e.space,programId:Zn(e.programId.toBuffer())});return new bt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=$r.TransferWithSeed;t=Nr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Zn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=$r.Transfer;t=Nr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=$r.AssignWithSeed;t=Nr(i,{base:Zn(e.basePubkey.toBuffer()),seed:e.seed,programId:Zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=$r.Assign;t=Nr(i,{programId:Zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=$r.CreateWithSeed,n=Nr(t,{base:Zn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Zn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new bt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Ft;"basePubkey"in e&&"seed"in e?t.add(yi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Jb,programId:this.programId})):t.add(yi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Jb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=$r.InitializeNonceAccount,n=Nr(t,{authorized:Zn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rh,isSigner:!1,isWritable:!1},{pubkey:zo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new bt(i)}static nonceAdvance(e){const t=$r.AdvanceNonceAccount,n=Nr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new bt(i)}static nonceWithdraw(e){const t=$r.WithdrawNonceAccount,n=Nr(t,{lamports:e.lamports});return new bt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Rh,isSigner:!1,isWritable:!1},{pubkey:zo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=$r.AuthorizeNonceAccount,n=Nr(t,{authorized:Zn(e.newAuthorizedPubkey.toBuffer())});return new bt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=$r.AllocateWithSeed;t=Nr(i,{base:Zn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=$r.Allocate;t=Nr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:t})}}yi.programId=new we("11111111111111111111111111111111");new we("BPFLoader2111111111111111111111111111111111");se([oe("typeIndex"),oa("deactivationSlot"),it("lastExtendedSlot"),Pe("lastExtendedStartIndex"),Pe(),Rt(nt(),kr(Pe(),-1),"authority")]);const fn=Ii(va(we),F(),r=>new we(r)),y_=wa([F(),De("base64")]),og=Ii(va(te.Buffer),y_,r=>te.Buffer.from(r[0],"base64"));function m_(r){return vt([B({jsonrpc:De("2.0"),id:F(),result:r}),B({jsonrpc:De("2.0"),id:F(),error:B({code:Ei(),message:F(),data:de(Qv())})})])}const EM=m_(Ei());function Ot(r){return Ii(m_(r),EM,e=>"error"in e?e:{...e,result:pe(e.result,r)})}function Hr(r){return Ot(B({context:B({slot:A()}),value:r}))}function fd(r){return B({context:B({slot:A()}),value:r})}const PM=B({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()});Ot(Y(H(B({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:de(H(A()))}))));const OM=Y(B({slot:A(),prioritizationFee:A()})),xM=B({total:A(),validator:A(),foundation:A(),epoch:A()}),TM=B({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:de(A()),transactionCount:de(A())}),RM=B({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:rn(),firstNormalEpoch:A(),firstNormalSlot:A()}),BM=Gl(F(),Y(A())),fo=H(vt([B({}),F()])),MM=B({err:fo}),CM=De("receivedSignature");B({"solana-core":F(),"feature-set":de(A())});Hr(B({err:H(vt([B({}),F()])),logs:H(Y(F())),accounts:de(H(Y(H(B({executable:rn(),owner:F(),lamports:A(),data:Y(F()),rentEpoch:de(A())}))))),unitsConsumed:de(A()),returnData:de(H(B({programId:F(),data:wa([F(),De("base64")])})))}));Hr(B({byIdentity:Gl(F(),Y(A())),range:B({firstSlot:A(),lastSlot:A()})}));Ot(PM);Ot(xM);Ot(OM);Ot(TM);Ot(RM);Ot(BM);Ot(A());Hr(B({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:Y(fn)}));const LM=B({amount:F(),uiAmount:H(A()),decimals:A(),uiAmountString:de(F())});Hr(Y(B({address:fn,amount:F(),uiAmount:H(A()),decimals:A(),uiAmountString:de(F())})));Hr(Y(B({pubkey:fn,account:B({executable:rn(),owner:fn,lamports:A(),data:og,rentEpoch:A()})})));const hp=B({program:F(),parsed:Ei(),space:A()});Hr(Y(B({pubkey:fn,account:B({executable:rn(),owner:fn,lamports:A(),data:hp,rentEpoch:A()})})));Hr(Y(B({lamports:A(),address:fn})));const ag=B({executable:rn(),owner:fn,lamports:A(),data:og,rentEpoch:A()});B({pubkey:fn,account:ag});const KM=Ii(vt([va(te.Buffer),hp]),vt([y_,hp]),r=>Array.isArray(r)?pe(r,og):r),DM=B({executable:rn(),owner:fn,lamports:A(),data:KM,rentEpoch:A()});B({pubkey:fn,account:DM});B({state:vt([De("active"),De("inactive"),De("activating"),De("deactivating")]),active:A(),inactive:A()});Ot(Y(B({signature:F(),slot:A(),err:fo,memo:H(F()),blockTime:de(H(A()))})));Ot(Y(B({signature:F(),slot:A(),err:fo,memo:H(F()),blockTime:de(H(A()))})));B({subscription:A(),result:fd(ag)});const NM=B({pubkey:fn,account:ag});B({subscription:A(),result:fd(NM)});const $M=B({parent:A(),slot:A(),root:A()});B({subscription:A(),result:$M});const UM=vt([B({type:vt([De("firstShredReceived"),De("completed"),De("optimisticConfirmation"),De("root")]),slot:A(),timestamp:A()}),B({type:De("createdBank"),parent:A(),slot:A(),timestamp:A()}),B({type:De("frozen"),slot:A(),timestamp:A(),stats:B({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),B({type:De("dead"),slot:A(),timestamp:A(),err:F()})]);B({subscription:A(),result:UM});B({subscription:A(),result:fd(vt([MM,CM]))});B({subscription:A(),result:A()});B({pubkey:F(),gossip:H(F()),tpu:H(F()),rpc:H(F()),version:H(F())});const Xb=B({votePubkey:F(),nodePubkey:F(),activatedStake:A(),epochVoteAccount:rn(),epochCredits:Y(wa([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:H(A())});Ot(B({current:Y(Xb),delinquent:Y(Xb)}));const FM=vt([De("processed"),De("confirmed"),De("finalized")]),WM=B({slot:A(),confirmations:H(A()),err:fo,confirmationStatus:de(FM)});Hr(Y(H(WM)));Ot(A());const b_=B({accountKey:fn,writableIndexes:Y(A()),readonlyIndexes:Y(A())}),cg=B({signatures:Y(F()),message:B({accountKeys:Y(F()),header:B({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:Y(B({accounts:Y(A()),data:F(),programIdIndex:A()})),recentBlockhash:F(),addressTableLookups:de(Y(b_))})}),v_=B({pubkey:fn,signer:rn(),writable:rn(),source:de(vt([De("transaction"),De("lookupTable")]))}),w_=B({accountKeys:Y(v_),signatures:Y(F())}),__=B({parsed:Ei(),program:F(),programId:fn}),A_=B({accounts:Y(fn),data:F(),programId:fn}),VM=vt([A_,__]),zM=vt([B({parsed:Ei(),program:F(),programId:F()}),B({accounts:Y(F()),data:F(),programId:F()})]),S_=Ii(VM,zM,r=>"accounts"in r?pe(r,A_):pe(r,__)),k_=B({signatures:Y(F()),message:B({accountKeys:Y(v_),instructions:Y(S_),recentBlockhash:F(),addressTableLookups:de(H(Y(b_)))})}),Pl=B({accountIndex:A(),mint:F(),owner:de(F()),uiTokenAmount:LM}),I_=B({writable:Y(fn),readonly:Y(fn)}),hd=B({err:fo,fee:A(),innerInstructions:de(H(Y(B({index:A(),instructions:Y(B({accounts:Y(A()),data:F(),programIdIndex:A()}))})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:de(H(Y(F()))),preTokenBalances:de(H(Y(Pl))),postTokenBalances:de(H(Y(Pl))),loadedAddresses:de(I_),computeUnitsConsumed:de(A())}),ug=B({err:fo,fee:A(),innerInstructions:de(H(Y(B({index:A(),instructions:Y(S_)})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:de(H(Y(F()))),preTokenBalances:de(H(Y(Pl))),postTokenBalances:de(H(Y(Pl))),loadedAddresses:de(I_),computeUnitsConsumed:de(A())}),ka=vt([De(0),De("legacy")]),ho=B({pubkey:F(),lamports:A(),postBalance:H(A()),rewardType:H(F()),commission:de(H(A()))});Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:cg,meta:H(hd),version:de(ka)})),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:w_,meta:H(hd),version:de(ka)})),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:k_,meta:H(ug),version:de(ka)})),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:w_,meta:H(ug),version:de(ka)})),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),rewards:de(Y(ho)),blockTime:H(A()),blockHeight:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),transactions:Y(B({transaction:cg,meta:H(hd)})),rewards:de(Y(ho)),blockTime:H(A())})));Ot(H(B({blockhash:F(),previousBlockhash:F(),parentSlot:A(),signatures:Y(F()),blockTime:H(A())})));Ot(H(B({slot:A(),meta:hd,blockTime:de(H(A())),transaction:cg,version:de(ka)})));Ot(H(B({slot:A(),transaction:k_,meta:H(ug),blockTime:de(H(A())),version:de(ka)})));Hr(B({blockhash:F(),feeCalculator:B({lamportsPerSignature:A()})}));Hr(B({blockhash:F(),lastValidBlockHeight:A()}));Hr(rn());const jM=B({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()});Ot(Y(jM));Hr(H(B({feeCalculator:B({lamportsPerSignature:A()})})));Ot(F());Ot(F());const qM=B({err:fo,logs:Y(F()),signature:F()});B({result:fd(qM),subscription:A()});class ds{constructor(e){this._keypair=void 0,this._keypair=e??Gb()}static generate(){return new ds(Gb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=lp(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new ds({publicKey:n,secretKey:e})}static fromSeed(e){const t=lp(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new ds({publicKey:t,secretKey:n})}get publicKey(){return new we(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:se([oe("instruction"),oa("recentSlot"),Pe("bumpSeed")])},FreezeLookupTable:{index:1,layout:se([oe("instruction")])},ExtendLookupTable:{index:2,layout:se([oe("instruction"),oa(),Rt(nt(),kr(oe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:se([oe("instruction")])},CloseLookupTable:{index:4,layout:se([oe("instruction")])}});new we("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:se([Pe("instruction"),oe("units"),oe("additionalFee")])},RequestHeapFrame:{index:1,layout:se([Pe("instruction"),oe("bytes")])},SetComputeUnitLimit:{index:2,layout:se([Pe("instruction"),oe("units")])},SetComputeUnitPrice:{index:3,layout:se([Pe("instruction"),oa("microLamports")])}});new we("ComputeBudget111111111111111111111111111111");se([Pe("numSignatures"),Pe("padding"),qt("signatureOffset"),qt("signatureInstructionIndex"),qt("publicKeyOffset"),qt("publicKeyInstructionIndex"),qt("messageDataOffset"),qt("messageDataSize"),qt("messageInstructionIndex")]);new we("Ed25519SigVerify111111111111111111111111111");Rc.utils.isValidPrivateKey;Rc.getPublicKey;se([Pe("numSignatures"),qt("signatureOffset"),Pe("signatureInstructionIndex"),qt("ethAddressOffset"),Pe("ethAddressInstructionIndex"),qt("messageDataOffset"),qt("messageDataSize"),Pe("messageInstructionIndex"),et(20,"ethAddress"),et(64,"signature"),Pe("recoveryId")]);new we("KeccakSecp256k11111111111111111111111111111");var E_;new we("StakeConfig11111111111111111111111111111111");class P_{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}E_=P_;P_.default=new E_(0,0,we.default);Object.freeze({Initialize:{index:0,layout:se([oe("instruction"),yM(),mM()])},Authorize:{index:1,layout:se([oe("instruction"),nt("newAuthorized"),oe("stakeAuthorizationType")])},Delegate:{index:2,layout:se([oe("instruction")])},Split:{index:3,layout:se([oe("instruction"),Lt("lamports")])},Withdraw:{index:4,layout:se([oe("instruction"),Lt("lamports")])},Deactivate:{index:5,layout:se([oe("instruction")])},Merge:{index:7,layout:se([oe("instruction")])},AuthorizeWithSeed:{index:8,layout:se([oe("instruction"),nt("newAuthorized"),oe("stakeAuthorizationType"),Vo("authoritySeed"),nt("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new we("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:se([oe("instruction"),bM()])},Authorize:{index:1,layout:se([oe("instruction"),nt("newAuthorized"),oe("voteAuthorizationType")])},Withdraw:{index:3,layout:se([oe("instruction"),Lt("lamports")])},AuthorizeWithSeed:{index:10,layout:se([oe("instruction"),vM()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new we("Vote111111111111111111111111111111111111111");new we("Va1idator1nfo111111111111111111111111111111");B({name:F(),website:de(F()),details:de(F()),keybaseUsername:de(F())});new we("Vote111111111111111111111111111111111111111");se([nt("nodePubkey"),nt("authorizedWithdrawer"),Pe("commission"),it(),Rt(se([it("slot"),oe("confirmationCount")]),kr(oe(),-8),"votes"),Pe("rootSlotValid"),it("rootSlot"),it(),Rt(se([it("epoch"),nt("authorizedVoter")]),kr(oe(),-8),"authorizedVoters"),se([Rt(se([nt("authorizedPubkey"),it("epochOfLastAuthorizedSwitch"),it("targetEpoch")]),32,"buf"),it("idx"),Pe("isEmpty")],"priorVoters"),it(),Rt(se([it("epoch"),it("credits"),it("prevCredits")]),kr(oe(),-8),"epochCredits"),se([it("slot"),it("timestamp")],"lastTimestamp")]);var ut={},pd={};pd.byteLength=YM;pd.toByteArray=JM;pd.fromByteArray=eC;var bi=[],Ur=[],GM=typeof Uint8Array<"u"?Uint8Array:Array,Bh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mo=0,HM=Bh.length;Mo<HM;++Mo)bi[Mo]=Bh[Mo],Ur[Bh.charCodeAt(Mo)]=Mo;Ur["-".charCodeAt(0)]=62;Ur["_".charCodeAt(0)]=63;function O_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function YM(r){var e=O_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function QM(r,e,t){return(e+t)*3/4-t}function JM(r){var e,t=O_(r),n=t[0],i=t[1],s=new GM(QM(r,n,i)),a=0,u=i>0?n-4:n,d;for(d=0;d<u;d+=4)e=Ur[r.charCodeAt(d)]<<18|Ur[r.charCodeAt(d+1)]<<12|Ur[r.charCodeAt(d+2)]<<6|Ur[r.charCodeAt(d+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Ur[r.charCodeAt(d)]<<2|Ur[r.charCodeAt(d+1)]>>4,s[a++]=e&255),i===1&&(e=Ur[r.charCodeAt(d)]<<10|Ur[r.charCodeAt(d+1)]<<4|Ur[r.charCodeAt(d+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function XM(r){return bi[r>>18&63]+bi[r>>12&63]+bi[r>>6&63]+bi[r&63]}function ZM(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(XM(n));return i.join("")}function eC(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(ZM(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(bi[e>>2]+bi[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(bi[e>>10]+bi[e>>4&63]+bi[e<<2&63]+"=")),i.join("")}var lg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */lg.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,d=(1<<u)-1,h=d>>1,f=-7,m=t?i-1:0,I=t?-1:1,P=r[e+m];for(m+=I,s=P&(1<<-f)-1,P>>=-f,f+=u;f>0;s=s*256+r[e+m],m+=I,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+r[e+m],m+=I,f-=8);if(s===0)s=1-h;else{if(s===d)return a?NaN:(P?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(P?-1:1)*a*Math.pow(2,s-n)};lg.write=function(r,e,t,n,i,s){var a,u,d,h=s*8-i-1,f=(1<<h)-1,m=f>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,M=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+m>=1?e+=I/d:e+=I*Math.pow(2,1-m),e*d>=2&&(a++,d/=2),a+m>=f?(u=0,a=f):a+m>=1?(u=(e*d-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+P]=u&255,P+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+P]=a&255,P+=M,a/=256,h-=8);r[t+P-M]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=pd,t=lg,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return d(v,g,y)}u.poolSize=8192;function d(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Tn(v,ArrayBuffer)||v&&Tn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tn(v,SharedArrayBuffer)||v&&Tn(v.buffer,SharedArrayBuffer)))return S(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=T(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return d(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function f(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return f(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ce(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function P(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(Tn(v,Uint8Array)){const g=new Uint8Array(v);return S(g.buffer,g.byteOffset,g.byteLength)}return P(v)}function S(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function T(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Qi(v.length)?a(0):P(v);if(v.type==="Buffer"&&Array.isArray(v.data))return P(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Q(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(Tn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),Tn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let j=0,ee=Math.min(k,L);j<ee;++j)if(g[j]!==y[j]){k=g[j],L=y[j];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let j=0;for(k=0;k<g.length;++k){let ee=g[k];if(Tn(ee,Uint8Array))j+ee.length>L.length?(u.isBuffer(ee)||(ee=u.from(ee)),ee.copy(L,j)):Uint8Array.prototype.set.call(L,ee,j);else if(u.isBuffer(ee))ee.copy(L,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=ee.length}return L};function ce(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Tn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return dr(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Yi(v).length;default:if(L)return k?-1:dr(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ce;function ae(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return Xt(this,g,y);case"utf8":case"utf-8":return V(this,g,y);case"ascii":return me(this,g,y);case"latin1":case"binary":return Oe(this,g,y);case"base64":return x(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function he(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)he(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)he(this,y,y+3),he(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)he(this,y,y+7),he(this,y+1,y+6),he(this,y+2,y+5),he(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?V(this,0,g):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,j){if(Tn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),j===void 0&&(j=this.length),y<0||k>g.length||L<0||j>this.length)throw new RangeError("out of range index");if(L>=j&&y>=k)return 0;if(L>=j)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,j>>>=0,this===g)return 0;let ee=j-L,Fe=k-y;const kt=Math.min(ee,Fe),mt=this.slice(L,j),It=g.slice(y,k);for(let pt=0;pt<kt;++pt)if(mt[pt]!==It[pt]){ee=mt[pt],Fe=It[pt];break}return ee<Fe?-1:Fe<ee?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Qi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:D(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):D(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function D(v,g,y,k,L){let j=1,ee=v.length,Fe=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;j=2,ee/=2,Fe/=2,y/=2}function kt(It,pt){return j===1?It[pt]:It.readUInt16BE(pt*j)}let mt;if(L){let It=-1;for(mt=y;mt<ee;mt++)if(kt(v,mt)===kt(g,It===-1?0:mt-It)){if(It===-1&&(It=mt),mt-It+1===Fe)return It*j}else It!==-1&&(mt-=mt-It),It=-1}else for(y+Fe>ee&&(y=ee-Fe),mt=y;mt>=0;mt--){let It=!0;for(let pt=0;pt<Fe;pt++)if(kt(v,mt+pt)!==kt(g,pt)){It=!1;break}if(It)return mt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function z(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const j=g.length;k>j/2&&(k=j/2);let ee;for(ee=0;ee<k;++ee){const Fe=parseInt(g.substr(ee*2,2),16);if(Qi(Fe))return ee;v[y+ee]=Fe}return ee}function J(v,g,y,k){return xn(dr(g,v.length-y),v,y,k)}function K(v,g,y,k){return xn(Zc(g),v,y,k)}function q(v,g,y,k){return xn(Yi(g),v,y,k)}function ne(v,g,y,k){return xn(sf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const j=this.length-y;if((k===void 0||k>j)&&(k=j),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let ee=!1;for(;;)switch(L){case"hex":return z(this,g,y,k);case"utf8":case"utf-8":return J(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return q(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,g,y,k);default:if(ee)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),ee=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function V(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const j=v[L];let ee=null,Fe=j>239?4:j>223?3:j>191?2:1;if(L+Fe<=y){let kt,mt,It,pt;switch(Fe){case 1:j<128&&(ee=j);break;case 2:kt=v[L+1],(kt&192)===128&&(pt=(j&31)<<6|kt&63,pt>127&&(ee=pt));break;case 3:kt=v[L+1],mt=v[L+2],(kt&192)===128&&(mt&192)===128&&(pt=(j&15)<<12|(kt&63)<<6|mt&63,pt>2047&&(pt<55296||pt>57343)&&(ee=pt));break;case 4:kt=v[L+1],mt=v[L+2],It=v[L+3],(kt&192)===128&&(mt&192)===128&&(It&192)===128&&(pt=(j&15)<<18|(kt&63)<<12|(mt&63)<<6|It&63,pt>65535&&pt<1114112&&(ee=pt))}}ee===null?(ee=65533,Fe=1):ee>65535&&(ee-=65536,k.push(ee>>>10&1023|55296),ee=56320|ee&1023),k.push(ee),L+=Fe}return Ke(k)}const Z=4096;function Ke(v){const g=v.length;if(g<=Z)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=Z));return y}function me(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Oe(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function Xt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let j=g;j<y;++j)L+=of[v[j]];return L}function Zt(v,g,y){const k=v.slice(g,y);let L="";for(let j=0;j<k.length-1;j+=2)L+=String.fromCharCode(k[j]+k[j+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function Ae(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||Ae(g,y,this.length);let L=this[g],j=1,ee=0;for(;++ee<y&&(j*=256);)L+=this[g+ee]*j;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||Ae(g,y,this.length);let L=this[g+--y],j=1;for(;y>0&&(j*=256);)L+=this[g+--y]*j;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||Ae(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||Ae(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||Ae(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Gn(function(g){g=g>>>0,Pi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&wn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,j=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt(j)<<BigInt(32))}),u.prototype.readBigUInt64BE=Gn(function(g){g=g>>>0,Pi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&wn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],j=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt(j)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||Ae(g,y,this.length);let L=this[g],j=1,ee=0;for(;++ee<y&&(j*=256);)L+=this[g+ee]*j;return j*=128,L>=j&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||Ae(g,y,this.length);let L=y,j=1,ee=this[g+--L];for(;L>0&&(j*=256);)ee+=this[g+--L]*j;return j*=128,ee>=j&&(ee-=Math.pow(2,8*y)),ee},u.prototype.readInt8=function(g,y){return g=g>>>0,y||Ae(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||Ae(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||Ae(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Gn(function(g){g=g>>>0,Pi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&wn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Gn(function(g){g=g>>>0,Pi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&wn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||Ae(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||Ae(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||Ae(g,8,this.length),t.read(this,g,!1,52,8)};function Ge(v,g,y,k,L,j){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<j)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Fe=Math.pow(2,8*k)-1;Ge(this,g,y,k,Fe,0)}let j=1,ee=0;for(this[y]=g&255;++ee<k&&(j*=256);)this[y+ee]=g/j&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Fe=Math.pow(2,8*k)-1;Ge(this,g,y,k,Fe,0)}let j=k-1,ee=1;for(this[y+j]=g&255;--j>=0&&(ee*=256);)this[y+j]=g/ee&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function on(v,g,y,k,L){lr(g,k,L,v,y,7);let j=Number(g&BigInt(4294967295));v[y++]=j,j=j>>8,v[y++]=j,j=j>>8,v[y++]=j,j=j>>8,v[y++]=j;let ee=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=ee,ee=ee>>8,v[y++]=ee,ee=ee>>8,v[y++]=ee,ee=ee>>8,v[y++]=ee,y}function yn(v,g,y,k,L){lr(g,k,L,v,y,7);let j=Number(g&BigInt(4294967295));v[y+7]=j,j=j>>8,v[y+6]=j,j=j>>8,v[y+5]=j,j=j>>8,v[y+4]=j;let ee=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=ee,ee=ee>>8,v[y+2]=ee,ee=ee>>8,v[y+1]=ee,ee=ee>>8,v[y]=ee,y+8}u.prototype.writeBigUInt64LE=Gn(function(g,y=0){return on(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Gn(function(g,y=0){return yn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const kt=Math.pow(2,8*k-1);Ge(this,g,y,k,kt-1,-kt)}let j=0,ee=1,Fe=0;for(this[y]=g&255;++j<k&&(ee*=256);)g<0&&Fe===0&&this[y+j-1]!==0&&(Fe=1),this[y+j]=(g/ee>>0)-Fe&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const kt=Math.pow(2,8*k-1);Ge(this,g,y,k,kt-1,-kt)}let j=k-1,ee=1,Fe=0;for(this[y+j]=g&255;--j>=0&&(ee*=256);)g<0&&Fe===0&&this[y+j+1]!==0&&(Fe=1),this[y+j]=(g/ee>>0)-Fe&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||Ge(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Gn(function(g,y=0){return on(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Gn(function(g,y=0){return yn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xt(v,g,y,k,L,j){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function yt(v,g,y,k,L){return g=+g,y=y>>>0,L||xt(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return yt(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return yt(this,g,y,!1,k)};function Or(v,g,y,k,L){return g=+g,y=y>>>0,L||xt(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return Or(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return Or(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const j=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),j},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const ee=g.charCodeAt(0);(L==="utf8"&&ee<128||L==="latin1")&&(g=ee)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let j;if(typeof g=="number")for(j=y;j<k;++j)this[j]=g;else{const ee=u.isBuffer(g)?g:u.from(g,L),Fe=ee.length;if(Fe===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(j=0;j<k-y;++j)this[j+y]=ee[j%Fe]}return this};const Ht={};function On(v,g,y){Ht[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}On("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),On("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),On("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=ui(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=ui(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function ui(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function xr(v,g,y){Pi(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&wn(g,v.length-(y+1))}function lr(v,g,y,k,L,j){if(v>y||v<g){const ee=typeof g=="bigint"?"n":"";let Fe;throw j>3?g===0||g===BigInt(0)?Fe=`>= 0${ee} and < 2${ee} ** ${(j+1)*8}${ee}`:Fe=`>= -(2${ee} ** ${(j+1)*8-1}${ee}) and < 2 ** ${(j+1)*8-1}${ee}`:Fe=`>= ${g}${ee} and <= ${y}${ee}`,new Ht.ERR_OUT_OF_RANGE("value",Fe,v)}xr(k,L,j)}function Pi(v,g){if(typeof v!="number")throw new Ht.ERR_INVALID_ARG_TYPE(g,"number",v)}function wn(v,g,y){throw Math.floor(v)!==v?(Pi(v,y),new Ht.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Ht.ERR_BUFFER_OUT_OF_BOUNDS:new Ht.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const Ts=/[^+/0-9A-Za-z-_]/g;function rf(v){if(v=v.split("=")[0],v=v.trim().replace(Ts,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function dr(v,g){g=g||1/0;let y;const k=v.length;let L=null;const j=[];for(let ee=0;ee<k;++ee){if(y=v.charCodeAt(ee),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&j.push(239,191,189);continue}else if(ee+1===k){(g-=3)>-1&&j.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&j.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&j.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;j.push(y)}else if(y<2048){if((g-=2)<0)break;j.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;j.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;j.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return j}function Zc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function sf(v,g){let y,k,L;const j=[];for(let ee=0;ee<v.length&&!((g-=2)<0);++ee)y=v.charCodeAt(ee),k=y>>8,L=y%256,j.push(L),j.push(k);return j}function Yi(v){return e.toByteArray(rf(v))}function xn(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function Tn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Qi(v){return v!==v}const of=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Gn(v){return typeof BigInt>"u"?af:v}function af(){throw new Error("BigInt not supported")}})(ut);var tC=typeof Be.global<"u"?Be.global:typeof self<"u"?self:typeof window<"u"?window:{},pp;typeof Object.create=="function"?pp=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:pp=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var nC=pp;function Ys(r,e){var t={seen:[],stylize:iC};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),x_(e)?t.showHidden=e:e&&dC(t,e),jo(t.showHidden)&&(t.showHidden=!1),jo(t.depth)&&(t.depth=2),jo(t.colors)&&(t.colors=!1),jo(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=rC),Ol(t,r,t.depth)}Ys.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Ys.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function rC(r,e){var t=Ys.styles[e];return t?"\x1B["+Ys.colors[t][0]+"m"+r+"\x1B["+Ys.colors[t][1]+"m":r}function iC(r,e){return r}function sC(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Ol(r,e,t){if(r.customInspect&&e&&dc(e.inspect)&&e.inspect!==Ys&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return R_(n)||(n=Ol(r,n,t)),n}var i=oC(r,e);if(i)return i;var s=Object.keys(e),a=sC(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),gl(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Mh(e);if(s.length===0){if(dc(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(lc(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(xl(e))return r.stylize(Date.prototype.toString.call(e),"date");if(gl(e))return Mh(e)}var d="",h=!1,f=["{","}"];if(uC(e)&&(h=!0,f=["[","]"]),dc(e)){var m=e.name?": "+e.name:"";d=" [Function"+m+"]"}if(lc(e)&&(d=" "+RegExp.prototype.toString.call(e)),xl(e)&&(d=" "+Date.prototype.toUTCString.call(e)),gl(e)&&(d=" "+Mh(e)),s.length===0&&(!h||e.length==0))return f[0]+d+f[1];if(t<0)return lc(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=aC(r,e,t,a,s):I=s.map(function(P){return gp(r,e,t,a,P,h)}),r.seen.pop(),cC(I,d,f)}function oC(r,e){if(jo(e))return r.stylize("undefined","undefined");if(R_(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(lC(e))return r.stylize(""+e,"number");if(x_(e))return r.stylize(""+e,"boolean");if(T_(e))return r.stylize("null","null")}function Mh(r){return"["+Error.prototype.toString.call(r)+"]"}function aC(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)B_(e,String(a))?s.push(gp(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(d){d.match(/^\d+$/)||s.push(gp(r,e,t,n,d,!0))}),s}function gp(r,e,t,n,i,s){var a,u,d;if(d=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},d.get?d.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):d.set&&(u=r.stylize("[Setter]","special")),B_(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(d.value)<0?(T_(t)?u=Ol(r,d.value,null):u=Ol(r,d.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),jo(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function cC(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function uC(r){return Array.isArray(r)}function x_(r){return typeof r=="boolean"}function T_(r){return r===null}function lC(r){return typeof r=="number"}function R_(r){return typeof r=="string"}function jo(r){return r===void 0}function lc(r){return gd(r)&&dg(r)==="[object RegExp]"}function gd(r){return typeof r=="object"&&r!==null}function xl(r){return gd(r)&&dg(r)==="[object Date]"}function gl(r){return gd(r)&&(dg(r)==="[object Error]"||r instanceof Error)}function dc(r){return typeof r=="function"}function Zb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function dg(r){return Object.prototype.toString.call(r)}function dC(r,e){if(!e||!gd(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function B_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function ev(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var fC=Object.prototype.hasOwnProperty,tv=Object.keys||function(r){var e=[];for(var t in r)fC.call(r,t)&&e.push(t);return e},nv=Array.prototype.slice,Ch;function M_(){return typeof Ch<"u"?Ch:Ch=function(){return function(){}.name==="foo"}()}function rv(r){return Object.prototype.toString.call(r)}function iv(r){return ut.isBuffer(r)||typeof tC.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function Dn(r,e){r||or(r,!0,e,"==",hg)}var hC=/\s*function\s+([^\(\s]*)\s*/;function C_(r){if(!!dc(r)){if(M_())return r.name;var e=r.toString(),t=e.match(hC);return t&&t[1]}}Dn.AssertionError=fg;function fg(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=pC(this),this.generatedMessage=!0);var e=r.stackStartFunction||or;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=C_(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}nC(fg,Error);function sv(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function ov(r){if(M_()||!dc(r))return Ys(r);var e=C_(r),t=e?": "+e:"";return"[Function"+t+"]"}function pC(r){return sv(ov(r.actual),128)+" "+r.operator+" "+sv(ov(r.expected),128)}function or(r,e,t,n,i){throw new fg({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}Dn.fail=or;function hg(r,e){r||or(r,!0,e,"==",hg)}Dn.ok=hg;Dn.equal=L_;function L_(r,e,t){r!=e&&or(r,e,t,"==",L_)}Dn.notEqual=K_;function K_(r,e,t){r==e&&or(r,e,t,"!=",K_)}Dn.deepEqual=D_;function D_(r,e,t){aa(r,e,!1)||or(r,e,t,"deepEqual",D_)}Dn.deepStrictEqual=N_;function N_(r,e,t){aa(r,e,!0)||or(r,e,t,"deepStrictEqual",N_)}function aa(r,e,t,n){if(r===e)return!0;if(ut.isBuffer(r)&&ut.isBuffer(e))return ev(r,e)===0;if(xl(r)&&xl(e))return r.getTime()===e.getTime();if(lc(r)&&lc(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(iv(r)&&iv(e)&&rv(r)===rv(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return ev(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(ut.isBuffer(r)!==ut.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),gC(r,e,t,n))}function av(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function gC(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(Zb(r)||Zb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=av(r),s=av(e);if(i&&!s||!i&&s)return!1;if(i)return r=nv.call(r),e=nv.call(e),aa(r,e,t);var a=tv(r),u=tv(e),d,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(d=a[h],!aa(r[d],e[d],t,n))return!1;return!0}Dn.notDeepEqual=$_;function $_(r,e,t){aa(r,e,!1)&&or(r,e,t,"notDeepEqual",$_)}Dn.notDeepStrictEqual=U_;function U_(r,e,t){aa(r,e,!0)&&or(r,e,t,"notDeepStrictEqual",U_)}Dn.strictEqual=F_;function F_(r,e,t){r!==e&&or(r,e,t,"===",F_)}Dn.notStrictEqual=W_;function W_(r,e,t){r===e&&or(r,e,t,"!==",W_)}function cv(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function yC(r){var e;try{r()}catch(t){e=t}return e}function V_(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=yC(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&or(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&gl(i),u=!r&&i&&!t;if((a&&s&&cv(i,t)||u)&&or(i,t,"Got unwanted exception"+n),r&&i&&t&&!cv(i,t)||!r&&i)throw i}Dn.throws=mC;function mC(r,e,t){V_(!0,r,e,t)}Dn.doesNotThrow=bC;function bC(r,e,t){V_(!1,r,e,t)}Dn.ifError=vC;function vC(r){if(r)throw r}class kc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function wC(r,e){return e.property?r+"["+e.property+"]":r}class ju extends kc{isCount(){throw new Error("ExternalLayout is abstract")}}class z_ extends kc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class _C extends kc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof kc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let d=u.span;if(a=0<d?d:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>d&&(d=u.getSpan(t,n)))}s=n,n+=d}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class AC extends kc{constructor(e,t){if(!(e instanceof ju&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ju||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof ju&&(i=e.length),!(ut.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(wC("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof ju&&this.length.encode(i,t,n),i}}var rt=r=>new z_(1,r),fc=r=>new z_(4,r),en=(r,e,t)=>new _C(r,e,t),j_=(r,e)=>new AC(r,e);const tn=(r="publicKey")=>j_(32,r),Fr=(r="uint64")=>j_(8,r);function un(r,e,t,...n){return _M(e,t,n,{skipPreflight:!1})}const SC=new we("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),q_=new we("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),uv="Failed to find account",lv="Invalid account owner";function Lh(r){return ut.Buffer.from(r.toBuffer())}class Mn extends Ln{toBuffer(){const e=super.toArray().reverse(),t=ut.Buffer.from(e);if(t.length===8)return t;Dn(t.length<8,"u64 too large");const n=ut.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return Dn(e.length===8,`Invalid buffer length: ${e.length}`),new Mn([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function br(r){return"publicKey"in r}const kC={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},G_=new we("So11111111111111111111111111111111111111112"),ic=en([fc("mintAuthorityOption"),tn("mintAuthority"),Fr("supply"),rt("decimals"),rt("isInitialized"),fc("freezeAuthorityOption"),tn("freezeAuthority")]),$o=en([tn("mint"),tn("owner"),Fr("amount"),fc("delegateOption"),tn("delegate"),rt("state"),fc("isNativeOption"),Fr("isNative"),Fr("delegatedAmount"),fc("closeAuthorityOption"),tn("closeAuthority")]),qu=en([rt("m"),rt("n"),rt("is_initialized"),tn("signer1"),tn("signer2"),tn("signer3"),tn("signer4"),tn("signer5"),tn("signer6"),tn("signer7"),tn("signer8"),tn("signer9"),tn("signer10"),tn("signer11")]);class At{constructor(e,t,n,i){Ya(this,"connection",void 0),Ya(this,"publicKey",void 0),Ya(this,"programId",void 0),Ya(this,"associatedProgramId",void 0),Ya(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:q_})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(ic.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption($o.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(qu.span)}static async createMint(e,t,n,i,s,a){const u=ds.generate(),d=new At(e,u.publicKey,a,t),h=await At.getMinBalanceRentForExemptMint(e),f=new Ft;return f.add(yi.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:ic.span,programId:a})),f.add(At.createInitMintInstruction(a,u.publicKey,s,n,i)),await un("createAccount and InitializeMint",e,f,t,u),d}async createAccount(e){const t=await At.getMinBalanceRentForExemptAccount(this.connection),n=ds.generate(),i=new Ft;i.add(yi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:$o.span,programId:this.programId}));const s=this.publicKey;return i.add(At.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await un("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await At.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await un("CreateAssociatedTokenAccount",this.connection,new Ft().add(At.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await At.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===uv||n.message===lv){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await At.getMinBalanceRentForExemptAccount(e),u=ds.generate(),d=new Ft;return d.add(yi.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:$o.span,programId:t})),d.add(yi.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),d.add(At.createInitAccountInstruction(t,G_,u.publicKey,n)),await un("createAccount, transfer, and initializeAccount",e,d,i,u),u.publicKey}async createMultisig(e,t){const n=ds.generate(),i=await At.getMinBalanceRentForExemptMultisig(this.connection),s=new Ft;s.add(yi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:qu.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:zo,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=en([rt("instruction"),rt("m")]),d=ut.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},d),s.add({keys:a,programId:this.programId,data:d}),await un("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=ic.span)throw new Error("Invalid mint size");const t=ut.Buffer.from(e.data),n=ic.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new we(n.mintAuthority),n.supply=Mn.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new we(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(uv);if(!n.owner.equals(this.programId))throw new Error(lv);if(n.data.length!=$o.span)throw new Error("Invalid account size");const i=ut.Buffer.from(n.data),s=$o.decode(i);if(s.address=e,s.mint=new we(s.mint),s.owner=new we(s.owner),s.amount=Mn.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new Mn):(s.delegate=new we(s.delegate),s.delegatedAmount=Mn.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=Mn.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new we(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=qu.span)throw new Error("Invalid multisig size");const n=ut.Buffer.from(t.data),i=qu.decode(n);return i.signer1=new we(i.signer1),i.signer2=new we(i.signer2),i.signer3=new we(i.signer3),i.signer4=new we(i.signer4),i.signer5=new we(i.signer5),i.signer6=new we(i.signer6),i.signer7=new we(i.signer7),i.signer8=new we(i.signer8),i.signer9=new we(i.signer9),i.signer10=new we(i.signer10),i.signer11=new we(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return br(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await un("Transfer",this.connection,new Ft().add(At.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;br(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await un("Approve",this.connection,new Ft().add(At.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;br(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await un("Revoke",this.connection,new Ft().add(At.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;br(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await un("SetAuthority",this.connection,new Ft().add(At.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;br(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await un("MintTo",this.connection,new Ft().add(At.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;br(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await un("Burn",this.connection,new Ft().add(At.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;br(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await un("CloseAccount",this.connection,new Ft().add(At.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;br(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await un("FreezeAccount",this.connection,new Ft().add(At.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;br(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await un("ThawAccount",this.connection,new Ft().add(At.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,d;return br(n)?(u=n.publicKey,d=[n]):(u=n,d=i),await un("TransferChecked",this.connection,new Ft().add(At.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...d)}async approveChecked(e,t,n,i,s,a){let u,d;br(n)?(u=n.publicKey,d=[n]):(u=n,d=i),await un("ApproveChecked",this.connection,new Ft().add(At.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...d)}async mintToChecked(e,t,n,i,s){let a,u;br(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await un("MintToChecked",this.connection,new Ft().add(At.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;br(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await un("BurnChecked",this.connection,new Ft().add(At.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await un("SyncNative",this.connection,new Ft().add(At.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:zo,isSigner:!1,isWritable:!1}];const u=en([rt("instruction"),rt("decimals"),tn("mintAuthority"),rt("option"),tn("freezeAuthority")]);let d=ut.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:Lh(i),option:s===null?0:1,freezeAuthority:Lh(s||new we(0))},d);d=d.slice(0,h)}return new bt({keys:a,programId:e,data:d})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:zo,isSigner:!1,isWritable:!1}],a=en([rt("instruction")]),u=ut.Buffer.alloc(a.span);return a.encode({instruction:1},u),new bt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=en([rt("instruction"),Fr("amount")]),d=ut.Buffer.alloc(u.span);u.encode({instruction:3,amount:new Mn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:h,programId:e,data:d})}static createApproveInstruction(e,t,n,i,s,a){const u=en([rt("instruction"),Fr("amount")]),d=ut.Buffer.alloc(u.span);u.encode({instruction:4,amount:new Mn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:h,programId:e,data:d})}static createRevokeInstruction(e,t,n,i){const s=en([rt("instruction")]),a=ut.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(d=>u.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=en([rt("instruction"),rt("authorityType"),rt("option"),tn("newAuthority")]);let d=ut.Buffer.alloc(1024);{const f=u.encode({instruction:6,authorityType:kC[i],option:n===null?0:1,newAuthority:Lh(n||new we(0))},d);d=d.slice(0,f)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:h,programId:e,data:d})}static createMintToInstruction(e,t,n,i,s,a){const u=en([rt("instruction"),Fr("amount")]),d=ut.Buffer.alloc(u.span);u.encode({instruction:7,amount:new Mn(a).toBuffer()},d);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:h,programId:e,data:d})}static createBurnInstruction(e,t,n,i,s,a){const u=en([rt("instruction"),Fr("amount")]),d=ut.Buffer.alloc(u.span);u.encode({instruction:8,amount:new Mn(a).toBuffer()},d);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(f=>h.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:h,programId:e,data:d})}static createCloseAccountInstruction(e,t,n,i,s){const a=en([rt("instruction")]),u=ut.Buffer.alloc(a.span);a.encode({instruction:9},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:d,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=en([rt("instruction")]),u=ut.Buffer.alloc(a.span);a.encode({instruction:10},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:d,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=en([rt("instruction")]),u=ut.Buffer.alloc(a.span);a.encode({instruction:11},u);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>d.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:d,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,d){const h=en([rt("instruction"),Fr("amount"),rt("decimals")]),f=ut.Buffer.alloc(h.span);h.encode({instruction:12,amount:new Mn(u).toBuffer(),decimals:d},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:m,programId:e,data:f})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,d){const h=en([rt("instruction"),Fr("amount"),rt("decimals")]),f=ut.Buffer.alloc(h.span);h.encode({instruction:13,amount:new Mn(u).toBuffer(),decimals:d},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:m,programId:e,data:f})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const d=en([rt("instruction"),Fr("amount"),rt("decimals")]),h=ut.Buffer.alloc(d.span);d.encode({instruction:14,amount:new Mn(a).toBuffer(),decimals:u},h);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:f,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const d=en([rt("instruction"),Fr("amount"),rt("decimals")]),h=ut.Buffer.alloc(d.span);d.encode({instruction:15,amount:new Mn(a).toBuffer(),decimals:u},h);let f=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new bt({keys:f,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=en([rt("instruction")]),i=ut.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new bt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!we.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await we.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=ut.Buffer.alloc(0);let d=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:yi.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:zo,isSigner:!1,isWritable:!1}];return new bt({keys:d,programId:e,data:u})}}var IC=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:q_,AccountLayout:$o,MintLayout:ic,NATIVE_MINT:G_,TOKEN_PROGRAM_ID:SC,Token:At,u64:Mn},Symbol.toStringTag,{value:"Module"})),Dc=Tc(IC),yd=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ln,"__esModule",{value:!0});ln.getAccountInfo=ln.getTokenAccount=ln.getAssociatedTokenAddress=ln.convertFactionStringToNum=ln.longToByteArray=ln.byteArrayToLong=ln.stringToByteArray=ln.byteArrayToString=void 0;const Gu=Vn,Hu=wt,yl=Gi,pi=Dc;function EC(r){return String.fromCharCode(...r)}ln.byteArrayToString=EC;function PC(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}ln.stringToByteArray=PC;function OC(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}ln.byteArrayToLong=OC;function xC(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}ln.longToByteArray=xC;function TC(r){return yd(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return Gu.FactionType.MUD;case"oni":return Gu.FactionType.ONI;case"ustur":return Gu.FactionType.Ustur;default:return Gu.FactionType.Unenlisted}})}ln.convertFactionStringToNum=TC;function H_(r,e){return yd(this,void 0,void 0,function*(){const[t]=yield yl.PublicKey.findProgramAddress([r.toBuffer(),pi.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],pi.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}ln.getAssociatedTokenAddress=H_;function RC(r,e,t,n=e,i){return yd(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const d of s)if(d.account.data.parsed.type==="account"){const h=d.account.data.parsed,f=new Hu.BN(h.info.tokenAmount.amount);(u===null||f.gt(u))&&(a=d.pubkey,u=f)}}else{let u=null;for(const d of s)if(d.account.data.parsed.type==="account"){const h=d.account.data.parsed,f=new Hu.BN(h.info.tokenAmount.amount);f.gt(new Hu.BN(i))&&(u===null||f.lt(u))&&(a=d.pubkey,u=f)}}if(a===null){const u=yield H_(e,t),{value:d}=yield r.getParsedAccountInfo(u,"confirmed");if(d===null||d.owner.equals(yl.SystemProgram.programId))return{tokenAccount:u,createInstruction:[pi.Token.createAssociatedTokenAccountInstruction(pi.ASSOCIATED_TOKEN_PROGRAM_ID,pi.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in d.data&&d.data.parsed.type==="account"&&new yl.PublicKey(d.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Hu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[yl.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield pi.Token.getMinBalanceRentForExemptAccount(r),space:pi.AccountLayout.span,programId:pi.TOKEN_PROGRAM_ID}),pi.Token.createInitAccountInstruction(pi.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}ln.getTokenAccount=RC;function BC(r,e){return yd(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}ln.getAccountInfo=BC;var md={},MC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(md,"__esModule",{value:!0});md.sendAndConfirmTransaction=void 0;const CC=Gi;function LC(r,e,...t){return MC(this,void 0,void 0,function*(){let n="";try{n=yield(0,CC.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}md.sendAndConfirmTransaction=LC;var eo={},pg={},gg={},Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});var bd={},Ss={},Kn={},ni={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.baseIdl=void 0;Nc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var vd={};Object.defineProperty(vd,"__esModule",{value:!0});vd.baseIdl=void 0;vd.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var KC=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),DC=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),NC=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&KC(e,r,t);return DC(e,r),e};Object.defineProperty(ni,"__esModule",{value:!0});ni.getMarketplaceProgram=ni.getGmLogsIDL=ni.getGmIDL=void 0;const dv=wt,$C=Nc,UC=NC(vd);function Q_(r){const e=$C.baseIdl;return e.metadata.address=r.toBase58(),e}ni.getGmIDL=Q_;function FC(r){const e=UC.baseIdl;return e.metadata.address=r.toBase58(),e}ni.getGmLogsIDL=FC;function WC({connection:r,programId:e}){const t=Q_(e),n=new dv.AnchorProvider(r,null,null);return new dv.Program(t,e,n)}ni.getMarketplaceProgram=WC;var po=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.getSingleOrder=Kn.getOpenOrdersForPlayerAndAsset=Kn.getOpenOrdersForPlayerAndCurrency=Kn.getOpenOrdersForAsset=Kn.getOpenOrdersForCurrency=Kn.getOpenOrdersForPlayer=Kn.getAllOpenOrders=void 0;const ar=wt,go=ni;function VC(r,e){return po(this,void 0,void 0,function*(){const t=new ar.AnchorProvider(r,null,null),n=(0,go.getGmIDL)(e),i=new ar.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}Kn.getAllOpenOrders=VC;function zC(r,e,t){return po(this,void 0,void 0,function*(){const n=new ar.AnchorProvider(r,null,null),i=(0,go.getGmIDL)(t),s=new ar.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Kn.getOpenOrdersForPlayer=zC;function jC(r,e,t){return po(this,void 0,void 0,function*(){const n=new ar.AnchorProvider(r,null,null),i=(0,go.getGmIDL)(t),s=new ar.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Kn.getOpenOrdersForCurrency=jC;function qC(r,e,t){return po(this,void 0,void 0,function*(){const n=new ar.AnchorProvider(r,null,null),i=(0,go.getGmIDL)(t),s=new ar.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Kn.getOpenOrdersForAsset=qC;function GC(r,e,t,n){return po(this,void 0,void 0,function*(){const i=new ar.AnchorProvider(r,null,null),s=(0,go.getGmIDL)(n),a=new ar.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Kn.getOpenOrdersForPlayerAndCurrency=GC;function HC(r,e,t,n){return po(this,void 0,void 0,function*(){const i=new ar.AnchorProvider(r,null,null),s=(0,go.getGmIDL)(n),a=new ar.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Kn.getOpenOrdersForPlayerAndAsset=HC;function YC(r,e,t){return po(this,void 0,void 0,function*(){const n=new ar.AnchorProvider(r,null,null),i=(0,go.getGmIDL)(t);return yield new ar.Program(i,t,n).account.orderAccount.fetch(e)})}Kn.getSingleOrder=YC;var dn={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.FEE_EXEMPT_SEED=zn.OPEN_ORDERS_COUNTER=zn.REGISTERED_CURRENCY_SEED=zn.ORDER_VAULT_AUTH_SEED=zn.ORDER_VAULT_SEED=zn.MARKET_VARS_SEED=void 0;zn.MARKET_VARS_SEED=Be.Buffer.from("market-vars");zn.ORDER_VAULT_SEED=Be.Buffer.from("order-vault-account");zn.ORDER_VAULT_AUTH_SEED=Be.Buffer.from("order-vault-auth");zn.REGISTERED_CURRENCY_SEED=Be.Buffer.from("registered-currency");zn.OPEN_ORDERS_COUNTER=Be.Buffer.from("open-orders-counter");zn.FEE_EXEMPT_SEED=Be.Buffer.from("fee_exempt");var QC=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JC=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XC=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&QC(e,r,t);return JC(e,r),e},ks=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(dn,"__esModule",{value:!0});dn.getAllFeeExemptAccounts=dn.getFeeExemptAccount=dn.getOpenOrdersCounter=dn.getAllRegisteredCurrencies=dn.getRegisteredCurrencyAccount=dn.getOrderVaultAuth=dn.getOrderVault=dn.getMarketVarsAccount=void 0;const Tl=wt,Ia=Gi,Ea=XC(zn),J_=ni;function ZC(r){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.MARKET_VARS_SEED],r)})}dn.getMarketVarsAccount=ZC;function eL(r,e,t){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}dn.getOrderVault=eL;function tL(r,e){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}dn.getOrderVaultAuth=tL;function nL(r,e){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}dn.getRegisteredCurrencyAccount=nL;function rL(r,e){return ks(this,void 0,void 0,function*(){const t=new Tl.AnchorProvider(r,null,null),n=(0,J_.getGmIDL)(e),i=new Tl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const d of a){const h={mint:d.account.tokenMint,royalty:d.account.royalty,saVault:d.account.saCurrencyVault};u.push(h)}return u})}dn.getAllRegisteredCurrencies=rL;function iL(r,e,t){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}dn.getOpenOrdersCounter=iL;function sL(r,e){return ks(this,void 0,void 0,function*(){return Ia.PublicKey.findProgramAddress([Ea.FEE_EXEMPT_SEED,r.toBuffer()],e)})}dn.getFeeExemptAccount=sL;function oL(r,e){return ks(this,void 0,void 0,function*(){const t=new Tl.AnchorProvider(r,null,null),n=(0,J_.getGmIDL)(e);return yield new Tl.Program(n,e,t).account.feeReduction.all()})}dn.getAllFeeExemptAccounts=oL;var nr={},Pa=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(nr,"__esModule",{value:!0});nr.getRoyaltyReductionForStakingAccount=nr.getRoyaltyReductionForUserAndMint=nr.getRegisteredCurrencyInfoFromPubkey=nr.getRegisteredCurrencyAccountInfo=nr.getFeeExemptAccountInfo=nr.getMarketVarsAccountInfo=void 0;const Rl=wt,yg=dn,wd=ni,yp=Yl;function aL(r,e){return Pa(this,void 0,void 0,function*(){const t=(0,wd.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,yg.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}nr.getMarketVarsAccountInfo=aL;function cL(r,e,t){return Pa(this,void 0,void 0,function*(){const n=(0,wd.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,yg.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}nr.getFeeExemptAccountInfo=cL;function uL(r,e,t){return Pa(this,void 0,void 0,function*(){const n=(0,wd.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,yg.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}nr.getRegisteredCurrencyAccountInfo=uL;function mg(r,e,t){return Pa(this,void 0,void 0,function*(){return yield(0,wd.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}nr.getRegisteredCurrencyInfoFromPubkey=mg;function lL(r,e,t,n,i,s){return Pa(this,void 0,void 0,function*(){let a=0;const u=yield mg(r,e,i),[d]=yield(0,yp.getStakingAccount)(t,n,s),h=yield(0,yp.getStakingAccountInfo)(r,d,t);if(h.unstakedTs.eq(new Rl.BN(0))){const f=u.royaltyTiers;let m=new Rl.BN(0);for(const I of f)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}nr.getRoyaltyReductionForUserAndMint=lL;function dL(r,e,t,n,i){return Pa(this,void 0,void 0,function*(){let s=0;const a=yield mg(r,e,i),u=yield(0,yp.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new Rl.BN(0))){const d=a.royaltyTiers;let h=new Rl.BN(0);for(const f of d)u.totalStake.gte(f.stakeAmount)&&(h=f.discount);s=h.toNumber()/1e4}return s})}nr.getRoyaltyReductionForStakingAccount=dL;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Kn,r),t(dn,r),t(nr,r),t(zn,r)})(Ss);var $c={},ur={},ps={},fL=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ps,"__esModule",{value:!0});ps.convertDecimalPriceToBn=ps.initializeAtaForMint=ps.getOrderSide=void 0;const hL=wt,pL=co,Kh=Dc,gL=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";ps.getOrderSide=gL;function yL({mint:r,owner:e,connection:t}){return fL(this,void 0,void 0,function*(){const n=[],i=yield(0,pL.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(Kh.Token.createAssociatedTokenAccountInstruction(Kh.ASSOCIATED_TOKEN_PROGRAM_ID,Kh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}ps.initializeAtaForMint=yL;const mL=(r,e)=>new hL.BN(r*Math.pow(10,e));ps.convertDecimalPriceToBn=mL;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ni,r),t(ps,r)})(ur);var bL=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($c,"__esModule",{value:!0});$c.createOrderCounterInstruction=void 0;const vL=ur;function wL({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return bL(this,void 0,void 0,function*(){return yield(0,vL.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}$c.createOrderCounterInstruction=wL;var _L=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(bd,"__esModule",{value:!0});bd.createCancelOrderInstruction=void 0;const AL=wt,SL=Ss,kL=$c,fv=ur,IL=Gr;function EL({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return _L(this,void 0,void 0,function*(){const s=(0,fv.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,fv.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let f=null,m=null;const I=yield(0,IL.getTokenAccount)(r,e,h);f=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),f instanceof AL.web3.Keypair?(m=f.publicKey,a.signers.push(f)):m=f;const[P]=yield(0,SL.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(P))===null){const T=yield(0,kL.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(T)}const S=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(S),a})}bd.createCancelOrderInstruction=EL;var ca={},X_=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ca,"__esModule",{value:!0});ca.createInitializeSellOrderInstruction=ca.createInitializeBuyOrderInstruction=void 0;const Zo=wt,Z_=ur,eA=Gr,tA=Ss,nA=$c,rA=Gr;function PL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return X_(this,void 0,void 0,function*(){const d=(0,Z_.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,eA.getTokenAccount)(r,e,a);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof Zo.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const[P]=yield(0,tA.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(P))===null){const Q=yield(0,nA.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Q)}const S=Zo.web3.Keypair.generate();h.signers.push(S);const T=yield(0,rA.createAccountInstruction)(r,e,S,u);h.instructions.push(T);const C=yield d.methods.processInitializeBuy(n,new Zo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:S.publicKey,depositMint:s,receiveMint:a}).signers([S]).instruction();return h.instructions.push(C),{orderAccount:S.publicKey,ixSet:h}})}ca.createInitializeBuyOrderInstruction=PL;function OL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return X_(this,void 0,void 0,function*(){const d=(0,Z_.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,eA.getTokenAccount)(r,e,a);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof Zo.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const[P]=yield(0,tA.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(P))===null){const Q=yield(0,nA.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Q)}const S=Zo.web3.Keypair.generate();h.signers.push(S);const T=yield(0,rA.createAccountInstruction)(r,e,S,u);h.instructions.push(T);const C=yield d.methods.processInitializeSell(n,new Zo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:S.publicKey,depositMint:s,receiveMint:a}).signers([S]).instruction();return h.instructions.push(C),{orderAccount:S.publicKey,ixSet:h}})}ca.createInitializeSellOrderInstruction=OL;var _d={},xL=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_d,"__esModule",{value:!0});_d.createDeregisterCurrencyInstruction=void 0;const TL=ur;function RL({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return xL(this,void 0,void 0,function*(){const s=[yield(0,TL.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}_d.createDeregisterCurrencyInstruction=RL;var Ad={},Sd={},kd={},iA={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,d=21,h=!1,f="[big.js] ",m=f+"Invalid ",I=m+"decimal places",P=m+"rounding mode",M=f+"Division by zero",S={},T=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Q(){function E(D){var z=this;if(!(z instanceof E))return D===T?Q():new E(D);if(D instanceof E)z.s=D.s,z.e=D.e,z.c=D.c.slice();else{if(typeof D!="string"){if(E.strict===!0&&typeof D!="bigint")throw TypeError(m+"value");D=D===0&&1/D<0?"-0":String(D)}ce(z,D)}z.constructor=E}return E.prototype=S,E.DP=n,E.RM=i,E.NE=u,E.PE=d,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ce(E,D){var z,J,K;if(!C.test(D))throw Error(m+"number");for(E.s=D.charAt(0)=="-"?(D=D.slice(1),-1):1,(z=D.indexOf("."))>-1&&(D=D.replace(".","")),(J=D.search(/e/i))>0?(z<0&&(z=J),z+=+D.slice(J+1),D=D.substring(0,J)):z<0&&(z=D.length),K=D.length,J=0;J<K&&D.charAt(J)=="0";)++J;if(J==K)E.c=[E.e=0];else{for(;K>0&&D.charAt(--K)=="0";);for(E.e=z-J-1,E.c=[],z=0;J<=K;)E.c[z++]=+D.charAt(J++)}return E}function ae(E,D,z,J){var K=E.c;if(z===T&&(z=E.constructor.RM),z!==0&&z!==1&&z!==2&&z!==3)throw Error(P);if(D<1)J=z===3&&(J||!!K[0])||D===0&&(z===1&&K[0]>=5||z===2&&(K[0]>5||K[0]===5&&(J||K[1]!==T))),K.length=1,J?(E.e=E.e-D+1,K[0]=1):K[0]=E.e=0;else if(D<K.length){if(J=z===1&&K[D]>=5||z===2&&(K[D]>5||K[D]===5&&(J||K[D+1]!==T||K[D-1]&1))||z===3&&(J||!!K[0]),K.length=D,J){for(;++K[--D]>9;)if(K[D]=0,D===0){++E.e,K.unshift(1);break}}for(D=K.length;!K[--D];)K.pop()}return E}function he(E,D,z){var J=E.e,K=E.c.join(""),q=K.length;if(D)K=K.charAt(0)+(q>1?"."+K.slice(1):"")+(J<0?"e":"e+")+J;else if(J<0){for(;++J;)K="0"+K;K="0."+K}else if(J>0)if(++J>q)for(J-=q;J--;)K+="0";else J<q&&(K=K.slice(0,J)+"."+K.slice(J));else q>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&z?"-"+K:K}S.abs=function(){var E=new this.constructor(this);return E.s=1,E},S.cmp=function(E){var D,z=this,J=z.c,K=(E=new z.constructor(E)).c,q=z.s,ne=E.s,x=z.e,V=E.e;if(!J[0]||!K[0])return J[0]?q:K[0]?-ne:0;if(q!=ne)return q;if(D=q<0,x!=V)return x>V^D?1:-1;for(ne=(x=J.length)<(V=K.length)?x:V,q=-1;++q<ne;)if(J[q]!=K[q])return J[q]>K[q]^D?1:-1;return x==V?0:x>V^D?1:-1},S.div=function(E){var D=this,z=D.constructor,J=D.c,K=(E=new z(E)).c,q=D.s==E.s?1:-1,ne=z.DP;if(ne!==~~ne||ne<0||ne>s)throw Error(I);if(!K[0])throw Error(M);if(!J[0])return E.s=q,E.c=[E.e=0],E;var x,V,Z,Ke,me,Oe=K.slice(),Xt=x=K.length,Zt=J.length,Ae=J.slice(0,x),Ge=Ae.length,on=E,yn=on.c=[],xt=0,yt=ne+(on.e=D.e-E.e)+1;for(on.s=q,q=yt<0?0:yt,Oe.unshift(0);Ge++<x;)Ae.push(0);do{for(Z=0;Z<10;Z++){if(x!=(Ge=Ae.length))Ke=x>Ge?1:-1;else for(me=-1,Ke=0;++me<x;)if(K[me]!=Ae[me]){Ke=K[me]>Ae[me]?1:-1;break}if(Ke<0){for(V=Ge==x?K:Oe;Ge;){if(Ae[--Ge]<V[Ge]){for(me=Ge;me&&!Ae[--me];)Ae[me]=9;--Ae[me],Ae[Ge]+=10}Ae[Ge]-=V[Ge]}for(;!Ae[0];)Ae.shift()}else break}yn[xt++]=Ke?Z:++Z,Ae[0]&&Ke?Ae[Ge]=J[Xt]||0:Ae=[J[Xt]]}while((Xt++<Zt||Ae[0]!==T)&&q--);return!yn[0]&&xt!=1&&(yn.shift(),on.e--,yt--),xt>yt&&ae(on,yt,z.RM,Ae[0]!==T),on},S.eq=function(E){return this.cmp(E)===0},S.gt=function(E){return this.cmp(E)>0},S.gte=function(E){return this.cmp(E)>-1},S.lt=function(E){return this.cmp(E)<0},S.lte=function(E){return this.cmp(E)<1},S.minus=S.sub=function(E){var D,z,J,K,q=this,ne=q.constructor,x=q.s,V=(E=new ne(E)).s;if(x!=V)return E.s=-V,q.plus(E);var Z=q.c.slice(),Ke=q.e,me=E.c,Oe=E.e;if(!Z[0]||!me[0])return me[0]?E.s=-V:Z[0]?E=new ne(q):E.s=1,E;if(x=Ke-Oe){for((K=x<0)?(x=-x,J=Z):(Oe=Ke,J=me),J.reverse(),V=x;V--;)J.push(0);J.reverse()}else for(z=((K=Z.length<me.length)?Z:me).length,x=V=0;V<z;V++)if(Z[V]!=me[V]){K=Z[V]<me[V];break}if(K&&(J=Z,Z=me,me=J,E.s=-E.s),(V=(z=me.length)-(D=Z.length))>0)for(;V--;)Z[D++]=0;for(V=D;z>x;){if(Z[--z]<me[z]){for(D=z;D&&!Z[--D];)Z[D]=9;--Z[D],Z[z]+=10}Z[z]-=me[z]}for(;Z[--V]===0;)Z.pop();for(;Z[0]===0;)Z.shift(),--Oe;return Z[0]||(E.s=1,Z=[Oe=0]),E.c=Z,E.e=Oe,E},S.mod=function(E){var D,z=this,J=z.constructor,K=z.s,q=(E=new J(E)).s;if(!E.c[0])throw Error(M);return z.s=E.s=1,D=E.cmp(z)==1,z.s=K,E.s=q,D?new J(z):(K=J.DP,q=J.RM,J.DP=J.RM=0,z=z.div(E),J.DP=K,J.RM=q,this.minus(z.times(E)))},S.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},S.plus=S.add=function(E){var D,z,J,K=this,q=K.constructor;if(E=new q(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var ne=K.e,x=K.c,V=E.e,Z=E.c;if(!x[0]||!Z[0])return Z[0]||(x[0]?E=new q(K):E.s=K.s),E;if(x=x.slice(),D=ne-V){for(D>0?(V=ne,J=Z):(D=-D,J=x),J.reverse();D--;)J.push(0);J.reverse()}for(x.length-Z.length<0&&(J=Z,Z=x,x=J),D=Z.length,z=0;D;x[D]%=10)z=(x[--D]=x[D]+Z[D]+z)/10|0;for(z&&(x.unshift(z),++V),D=x.length;x[--D]===0;)x.pop();return E.c=x,E.e=V,E},S.pow=function(E){var D=this,z=new D.constructor("1"),J=z,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(J=J.times(D)),E>>=1,!!E;)D=D.times(D);return K?z.div(J):J},S.prec=function(E,D){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return ae(new this.constructor(this),E,D)},S.round=function(E,D){if(E===T)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return ae(new this.constructor(this),E+this.e+1,D)},S.sqrt=function(){var E,D,z,J=this,K=J.constructor,q=J.s,ne=J.e,x=new K("0.5");if(!J.c[0])return new K(J);if(q<0)throw Error(f+"No square root");q=Math.sqrt(J+""),q===0||q===1/0?(D=J.c.join(""),D.length+ne&1||(D+="0"),q=Math.sqrt(D),ne=((ne+1)/2|0)-(ne<0||ne&1),E=new K((q==1/0?"5e":(q=q.toExponential()).slice(0,q.indexOf("e")+1))+ne)):E=new K(q+""),ne=E.e+(K.DP+=4);do z=E,E=x.times(z.plus(J.div(z)));while(z.c.slice(0,ne).join("")!==E.c.slice(0,ne).join(""));return ae(E,(K.DP-=4)+E.e+1,K.RM)},S.times=S.mul=function(E){var D,z=this,J=z.constructor,K=z.c,q=(E=new J(E)).c,ne=K.length,x=q.length,V=z.e,Z=E.e;if(E.s=z.s==E.s?1:-1,!K[0]||!q[0])return E.c=[E.e=0],E;for(E.e=V+Z,ne<x&&(D=K,K=q,q=D,Z=ne,ne=x,x=Z),D=new Array(Z=ne+x);Z--;)D[Z]=0;for(V=x;V--;){for(x=0,Z=ne+V;Z>V;)x=D[Z]+q[V]*K[Z-V-1]+x,D[Z--]=x%10,x=x/10|0;D[Z]=x}for(x?++E.e:D.shift(),V=D.length;!D[--V];)D.pop();return E.c=D,E},S.toExponential=function(E,D){var z=this,J=z.c[0];if(E!==T){if(E!==~~E||E<0||E>s)throw Error(I);for(z=ae(new z.constructor(z),++E,D);z.c.length<E;)z.c.push(0)}return he(z,!0,!!J)},S.toFixed=function(E,D){var z=this,J=z.c[0];if(E!==T){if(E!==~~E||E<0||E>s)throw Error(I);for(z=ae(new z.constructor(z),E+z.e+1,D),E=E+z.e+1;z.c.length<E;)z.c.push(0)}return he(z,!1,!!J)},S.toJSON=S.toString=function(){var E=this,D=E.constructor;return he(E,E.e<=D.NE||E.e>=D.PE,!!E.c[0])},S.toNumber=function(){var E=Number(he(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(f+"Imprecise conversion");return E},S.toPrecision=function(E,D){var z=this,J=z.constructor,K=z.c[0];if(E!==T){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(z=ae(new J(z),E,D);z.c.length<E;)z.c.push(0)}return he(z,E<=z.e||z.e<=J.NE||z.e>=J.PE,!!K)},S.valueOf=function(){var E=this,D=E.constructor;if(D.strict===!0)throw Error(f+"valueOf disallowed");return he(E,E.e<=D.NE||E.e>=D.PE,!0)},t=Q(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(W)})(iA);function $e(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var BL={};function bg(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Be.global<"u"?Be.global:typeof self<"u"?self:BL}var sA=Object.assign,Bl=Object.getOwnPropertyDescriptor,wi=Object.defineProperty,Uc=Object.prototype,mp=[];Object.freeze(mp);var vg={};Object.freeze(vg);var ML=typeof Proxy<"u",CL=Object.toString();function oA(){ML||$e("Proxy not available")}function aA(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var qo=function(){};function Er(r){return typeof r=="function"}function to(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Id(r){return r!==null&&typeof r=="object"}function qi(r){if(!Id(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===CL}function cA(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Fc(r,e,t){wi(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function uA(r,e,t){wi(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function Is(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return Id(n)&&n[t]===!0}}function Oa(r){return r instanceof Map}function Wc(r){return r instanceof Set}var lA=typeof Object.getOwnPropertySymbols<"u";function LL(r){var e=Object.keys(r);if(!lA)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return Uc.propertyIsEnumerable.call(r,n)})):e}var ua=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:lA?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function dA(r){return r===null?null:typeof r=="object"?""+r:r}function zi(r,e){return Uc.hasOwnProperty.call(r,e)}var KL=Object.getOwnPropertyDescriptors||function(e){var t={};return ua(e).forEach(function(n){t[n]=Bl(e,n)}),t};function hv(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,$L(n.key),n)}}function wg(r,e,t){return e&&hv(r.prototype,e),t&&hv(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function vs(){return vs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},vs.apply(this,arguments)}function fA(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,bp(r,e)}function bp(r,e){return bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bp(r,e)}function Dh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function DL(r,e){if(!!r){if(typeof r=="string")return pv(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pv(r,e)}}function pv(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Go(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=DL(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NL(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $L(r){var e=NL(r,"string");return typeof e=="symbol"?e:String(e)}var vi=Symbol("mobx-stored-annotations");function ri(r){function e(t,n){if(Vc(n))return r.decorate_20223_(t,n);xa(t,n,r)}return Object.assign(e,r)}function xa(r,e,t){zi(r,vi)||Fc(r,vi,vs({},r[vi])),HL(t)||(r[vi][e]=t)}function UL(r){return zi(r,vi)||Fc(r,vi,vs({},r[vi])),r[vi]}function Vc(r){return typeof r=="object"&&typeof r.kind=="string"}var Ie=Symbol("mobx administration"),zc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=at.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return MA(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),rr(),CA(this),ir()},e.toString=function(){return this.name_},r}(),_g=Is("Atom",zc);function Ed(r,e,t){e===void 0&&(e=qo),t===void 0&&(t=qo);var n=new zc(r);return e!==qo&&VA(n,e),t!==qo&&Gc(n,t),n}function FL(r,e){return r===e}function WL(r,e){return xg(r,e)}function VL(r,e){return xg(r,e,1)}function zL(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var no={identity:FL,structural:WL,default:zL,shallow:VL};function ro(r,e,t){return Cd(r)?r:Array.isArray(r)?Kt.array(r,{name:t}):qi(r)?Kt.object(r,void 0,{name:t}):Oa(r)?Kt.map(r,{name:t}):Wc(r)?Kt.set(r,{name:t}):typeof r=="function"&&!Es(r)&&!ha(r)?cA(r)?oo(r):fa(t,r):r}function jL(r,e,t){if(r==null||hn(r)||vn(r)||gn(r)||qn(r))return r;if(Array.isArray(r))return Kt.array(r,{name:t,deep:!1});if(qi(r))return Kt.object(r,void 0,{name:t,deep:!1});if(Oa(r))return Kt.map(r,{name:t,deep:!1});if(Wc(r))return Kt.set(r,{name:t,deep:!1})}function Pd(r){return r}function qL(r,e){return xg(r,e)?e:r}var hA="override",GL=ri({annotationType_:hA,make_:YL,extend_:QL,decorate_20223_:JL});function HL(r){return r.annotationType_===hA}function YL(r,e){return 0}function QL(r,e,t,n){$e("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function JL(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function jc(r,e){return{annotationType_:r,options_:e,make_:XL,extend_:ZL,decorate_20223_:eK}}function XL(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(Es(t.value))return 1;var s=pA(r,this,e,t,!1);return wi(n,e,s),2}function ZL(r,e,t,n){var i=pA(r,this,e,t);return r.defineProperty_(e,i,n)}function eK(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var f,m,I,P;return ws((f=(m=s.options_)==null?void 0:m.name)!=null?f:n.toString(),h,(I=(P=s.options_)==null?void 0:P.autoAction)!=null?I:!1)};if(t=="field"){i(function(){xa(this,n,s)});return}if(t=="method"){var u;return Es(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var d=this,h=d[n].bind(d);h.isMobxAction=!0,d[n]=h}),r}$e("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function tK(r,e,t,n){e.annotationType_,n.value}function pA(r,e,t,n,i){var s,a,u,d,h,f,m;i===void 0&&(i=fe.safeDescriptors),tK(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var P;I=I.bind((P=r.proxy_)!=null?P:r.target_)}return{value:ws((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(d=(h=e.options_)==null?void 0:h.autoAction)!=null?d:!1,(f=e.options_)!=null&&f.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function gA(r,e){return{annotationType_:r,options_:e,make_:nK,extend_:rK,decorate_20223_:iK}}function nK(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!zi(r.target_,e)||!ha(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(ha(t.value))return 1;var s=yA(r,this,e,t,!1,!1);return wi(n,e,s),2}function rK(r,e,t,n){var i,s=yA(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function iK(r,e){var t,n=e.name,i=e.addInitializer;return ha(r)||(r=oo(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function sK(r,e,t,n){e.annotationType_,n.value}function yA(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),sK(r,e,t,n);var a=n.value;if(ha(a)||(a=oo(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function Ag(r,e){return{annotationType_:r,options_:e,make_:oK,extend_:aK,decorate_20223_:cK}}function oK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function aK(r,e,t,n){return uK(r,this,e,t),r.defineComputedProperty_(e,vs({},this.options_,{get:t.get,set:t.set}),n)}function cK(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=mo(this)[Ie],a=vs({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new da(a))}),function(){return this[Ie].getObservablePropValue_(n)}}function uK(r,e,t,n){e.annotationType_,n.get}function Od(r,e){return{annotationType_:r,options_:e,make_:lK,extend_:dK,decorate_20223_:fK}}function lK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function dK(r,e,t,n){var i,s;return hK(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:ro,n)}function fK(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,d){var h,f,m=mo(u)[Ie],I=new gs(d,(h=(f=t.options_)==null?void 0:f.enhancer)!=null?h:ro,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Ie].getObservablePropValue_(i)},set:function(d){return s.has(this)||a(this,d),this[Ie].setObservablePropValue_(i,d)},init:function(d){return s.has(this)||a(this,d),d}}}function hK(r,e,t,n){e.annotationType_}var pK="true",gK=mA();function mA(r){return{annotationType_:pK,options_:r,make_:yK,extend_:mK,decorate_20223_:bK}}function yK(r,e,t,n){var i,s;if(t.get)return jr.make_(r,e,t,n);if(t.set){var a=ws(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(wi(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(cA(t.value)){var d,h=(d=this.options_)!=null&&d.autoBind?oo.bound:oo;return h.make_(r,e,t,n)}var f=(u=this.options_)!=null&&u.autoBind?fa.bound:fa;return f.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?Kt.ref:Kt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function mK(r,e,t,n){var i,s;if(t.get)return jr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:ws(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?Kt.ref:Kt;return u.extend_(r,e,t,n)}function bK(r,e){$e("'"+this.annotationType_+"' cannot be used as a decorator")}var vK="observable",wK="observable.ref",_K="observable.shallow",AK="observable.struct",bA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(bA);function Yu(r){return r||bA}var vp=Od(vK),SK=Od(wK,{enhancer:Pd}),kK=Od(_K,{enhancer:jL}),IK=Od(AK,{enhancer:qL}),vA=ri(vp);function Qu(r){return r.deep===!0?ro:r.deep===!1?Pd:PK(r.defaultDecorator)}function EK(r){var e;return r?(e=r.defaultDecorator)!=null?e:mA(r):void 0}function PK(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:ro}function wA(r,e,t){if(Vc(e))return vp.decorate_20223_(r,e);if(to(e)){xa(r,e,vp);return}return Cd(r)?r:qi(r)?Kt.object(r,e,t):Array.isArray(r)?Kt.array(r,e):Oa(r)?Kt.map(r,e):Wc(r)?Kt.set(r,e):typeof r=="object"&&r!==null?r:Kt.box(r,e)}sA(wA,vA);var OK={box:function(e,t){var n=Yu(t);return new gs(e,Qu(n),n.name,!0,n.equals)},array:function(e,t){var n=Yu(t);return(fe.useProxies===!1||n.proxy===!1?$D:xD)(e,Qu(n),n.name)},map:function(e,t){var n=Yu(t);return new Ld(e,Qu(n),n.name)},set:function(e,t){var n=Yu(t);return new Pg(e,Qu(n),n.name)},object:function(e,t,n){return Os(function(){return Bd(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?mo({},n):ID({},n),e,t)})},ref:ri(SK),shallow:ri(kK),deep:vA,struct:ri(IK)},Kt=sA(wA,OK),_A="computed",xK="computed.struct",wp=Ag(_A),TK=Ag(xK,{equals:no.structural}),jr=function(e,t){if(Vc(t))return wp.decorate_20223_(e,t);if(to(t))return xa(e,t,wp);if(qi(e))return ri(Ag(_A,e));var n=qi(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new da(n)};Object.assign(jr,wp);jr.struct=ri(TK);var gv,yv,Ml=0,RK=1,BK=(gv=(yv=Bl(function(){},"name"))==null?void 0:yv.configurable)!=null?gv:!1,mv={value:"action",configurable:!0,writable:!1,enumerable:!1};function ws(r,e,t,n){t===void 0&&(t=!1);function i(){return AA(r,t,e,n||this,arguments)}return i.isMobxAction=!0,BK&&(mv.value=r,wi(i,"name",mv)),i}function AA(r,e,t,n,i){var s=SA(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{kA(s)}}function SA(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;rr();var d=fe.allowStateChanges;u&&(yo(),d=xd(!0));var h=Rd(!0),f={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:d,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:RK++,parentActionId_:Ml};return Ml=f.actionId_,f}function kA(r){Ml!==r.actionId_&&$e(30),Ml=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),Td(r.prevAllowStateChanges_),ea(r.prevAllowStateReads_),ir(),r.runAsAction_&&ji(r.prevDerivation_),fe.suppressReactionErrors=!1}function la(r,e){var t=xd(r);try{return e()}finally{Td(t)}}function xd(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function Td(r){fe.allowStateChanges=r}var IA;IA=Symbol.toPrimitive;var gs=function(r){fA(e,r);function e(n,i,s,a,u){var d;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=no.default),d=r.call(this,s)||this,d.enhancer=void 0,d.name_=void 0,d.equals=void 0,d.hasUnreportedChange_=!1,d.interceptors_=void 0,d.changeListeners_=void 0,d.value_=void 0,d.dehancer=void 0,d.enhancer=i,d.name_=s,d.equals=u,d.value_=i(n,void 0,s),d}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Vr(this)){var s=zr(this,{object:this,type:_i,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),ii(this)&&si(this,{type:_i,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Hc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:_i,newValue:this.value_,oldValue:void 0}),Yc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return dA(this.get())},t[IA]=function(){return this.valueOf()},e}(zc),Sg=Is("ObservableValue",gs),EA;EA=Symbol.toPrimitive;var da=function(){function r(t){this.dependenciesState_=at.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=at.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ll(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Cl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||$e(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ws("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?no.structural:no.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){FK(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&$e(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)_p(this)&&(this.warnAboutUntrackedRead_(),rr(),this.value_=this.computeValue_(!1),ir());else if(MA(this),_p(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&UK(this),fe.trackingContext=n}var i=this.value_;if(ml(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&$e(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else $e(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===at.NOT_TRACKING_,s=this.computeValue_(!0),a=i||ml(n)||ml(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=xd(!1),s;if(n)s=PA(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new Ll(a)}return Td(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(Ap(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return so(function(){var d=s.get();if(!a||i){var h=yo();n({observableKind:"computed",debugObjectName:s.name_,type:_i,object:s,newValue:d,oldValue:u}),ji(h)}a=!1,u=d})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return dA(this.get())},e[EA]=function(){return this.valueOf()},r}(),io=Is("ComputedValue",da),at;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(at||(at={}));var Cl;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Cl||(Cl={}));var Ll=function(e){this.cause=void 0,this.cause=e};function ml(r){return r instanceof Ll}function _p(r){switch(r.dependenciesState_){case at.UP_TO_DATE_:return!1;case at.NOT_TRACKING_:case at.STALE_:return!0;case at.POSSIBLY_STALE_:{for(var e=Rd(!0),t=yo(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(io(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return ji(t),ea(e),!0}if(r.dependenciesState_===at.STALE_)return ji(t),ea(e),!0}}return OA(r),ji(t),ea(e),!1}}}function qc(){return fe.trackingDerivation!==null}function PA(r,e,t){var n=Rd(!0);OA(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new Ll(a)}return fe.inBatch--,fe.trackingDerivation=i,MK(r),ea(n),s}function MK(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=at.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var d=e[s];d.diffValue_===0&&RA(d,r),d.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,$K(h,r))}n!==at.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function Ap(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)RA(e[t],r);r.dependenciesState_=at.NOT_TRACKING_}function kg(r){var e=yo();try{return r()}finally{ji(e)}}function yo(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function ji(r){fe.trackingDerivation=r}function Rd(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function ea(r){fe.allowStateReads=r}function OA(r){if(r.dependenciesState_!==at.UP_TO_DATE_){r.dependenciesState_=at.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=at.UP_TO_DATE_}}var CK=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],hc=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},bl=!0,xA=!1,fe=function(){var r=bg();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(bl=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new hc().version&&(bl=!1),bl?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new hc):(setTimeout(function(){xA||$e(35)},1),new hc)}();function LK(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&$e(36),xA=!0,bl){var r=bg();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new hc}}function TA(){return fe}function KK(){var r=new hc;for(var e in r)CK.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function DK(r){return r.observers_&&r.observers_.size>0}function NK(r){return r.observers_}function $K(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function RA(r,e){r.observers_.delete(e),r.observers_.size===0&&BA(r)}function BA(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function rr(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function ir(){if(--fe.inBatch===0){LA();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof da&&t.suspend_())}fe.pendingUnobservations=[]}}function MA(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&BA(r),!1)}function CA(r){r.lowestObserverState_!==at.STALE_&&(r.lowestObserverState_=at.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===at.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=at.STALE_}))}function UK(r){r.lowestObserverState_!==at.STALE_&&(r.lowestObserverState_=at.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===at.POSSIBLY_STALE_?e.dependenciesState_=at.STALE_:e.dependenciesState_===at.UP_TO_DATE_&&(r.lowestObserverState_=at.UP_TO_DATE_)}))}function FK(r){r.lowestObserverState_===at.UP_TO_DATE_&&(r.lowestObserverState_=at.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===at.UP_TO_DATE_&&(e.dependenciesState_=at.POSSIBLY_STALE_,e.onBecomeStale_())}))}var Ic=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=at.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Cl.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),LA())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){rr(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,_p(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,ir()}},e.track=function(n){if(!this.isDisposed_){rr(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=PA(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ap(this),ml(s)&&this.reportExceptionInDerivation_(s.cause),ir()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(rr(),Ap(this),ir()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Ie]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function WK(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var VK=100,Sp=function(e){return e()};function LA(){fe.inBatch>0||fe.isRunningReactions||Sp(zK)}function zK(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===VK&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var Kl=Is("Reaction",Ic);function jK(r){var e=Sp;Sp=function(n){return r(function(){return e(n)})}}function pc(){return!1}function KA(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var DA="action",qK="action.bound",NA="autoAction",GK="autoAction.bound",$A="<unnamed action>",kp=jc(DA),HK=jc(qK,{bound:!0}),Ip=jc(NA,{autoAction:!0}),YK=jc(GK,{autoAction:!0,bound:!0});function UA(r){var e=function(n,i){if(Er(n))return ws(n.name||$A,n,r);if(Er(i))return ws(n,i,r);if(Vc(i))return(r?Ip:kp).decorate_20223_(n,i);if(to(i))return xa(n,i,r?Ip:kp);if(to(n))return ri(jc(r?NA:DA,{name:n,autoAction:r}))};return e}var Gt=UA(!1);Object.assign(Gt,kp);var fa=UA(!0);Object.assign(fa,Ip);Gt.bound=ri(HK);fa.bound=ri(YK);function Ec(r){return AA(r.name||$A,!1,r,this,void 0)}function Es(r){return Er(r)&&r.isMobxAction===!0}function so(r,e){var t,n,i,s,a;e===void 0&&(e=vg);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",d=!e.scheduler&&!e.delay,h;if(d)h=new Ic(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var f=FA(e),m=!1;h=new Ic(u,function(){m||(m=!0,f(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var QK=function(e){return e()};function FA(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:QK}function WA(r,e,t){var n,i,s,a;t===void 0&&(t=vg);var u=(n=t.name)!=null?n:"Reaction",d=Gt(u,t.onError?JK(t.onError,e):e),h=!t.scheduler&&!t.delay,f=FA(t),m=!0,I=!1,P,M,S=t.compareStructural?no.structural:t.equals||no.default,T=new Ic(u,function(){m||h?C():I||(I=!0,f(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!T.isDisposed_){var Q=!1;T.track(function(){var ce=la(!1,function(){return r(T)});Q=m||!S(P,ce),M=P,P=ce}),(m&&t.fireImmediately||!m&&Q)&&d(P,M,T),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||T.schedule_(),T.getDisposer_((a=t)==null?void 0:a.signal)}function JK(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var XK="onBO",ZK="onBUO";function VA(r,e,t){return zA(XK,r,e,t)}function Gc(r,e,t){return zA(ZK,r,e,t)}function zA(r,e,t,n){var i=typeof n=="function"?Si(e,t):Si(e),s=Er(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var eD="never",Ju="always",tD="observed";function nD(r){r.isolateGlobalState===!0&&LK();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===Ju?!0:e===eD?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===Ju?Ju:t===tD;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===Ju)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&jK(r.reactionScheduler)}function Bd(r,e,t,n){var i=KL(e);return Os(function(){var s=mo(r,n)[Ie];ua(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function rD(r,e){return jA(Si(r,e))}function jA(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=sD(r.observing_).map(jA)),e}function iD(r,e){return qA(Si(r,e))}function qA(r){var e={name:r.name_};return DK(r)&&(e.observers=Array.from(NK(r)).map(qA)),e}function sD(r){return Array.from(new Set(r))}var oD=0;function Md(){this.message="FLOW_CANCELLED"}Md.prototype=Object.create(Error.prototype);function aD(r){return r instanceof Md}var Nh=gA("flow"),cD=gA("flow.bound",{bound:!0}),oo=Object.assign(function(e,t){if(Vc(t))return Nh.decorate_20223_(e,t);if(to(t))return xa(e,t,Nh);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,d=arguments,h=++oD,f=Gt(i+" - runid: "+h+" - init",n).apply(u,d),m,I=void 0,P=new Promise(function(M,S){var T=0;m=S;function C(ae){I=void 0;var he;try{he=Gt(i+" - runid: "+h+" - yield "+T++,f.next).call(f,ae)}catch(E){return S(E)}ce(he)}function Q(ae){I=void 0;var he;try{he=Gt(i+" - runid: "+h+" - yield "+T++,f.throw).call(f,ae)}catch(E){return S(E)}ce(he)}function ce(ae){if(Er(ae==null?void 0:ae.then)){ae.then(ce,S);return}return ae.done?M(ae.value):(I=Promise.resolve(ae.value),I.then(C,Q))}C(void 0)});return P.cancel=Gt(i+" - runid: "+h+" - cancel",function(){try{I&&bv(I);var M=f.return(void 0),S=Promise.resolve(M.value);S.then(qo,qo),bv(S),m(new Md)}catch(T){m(T)}}),P};return s.isMobXFlow=!0,s},Nh);oo.bound=ri(cD);function bv(r){Er(r.cancel)&&r.cancel()}function uD(r){return r}function ha(r){return(r==null?void 0:r.isMobXFlow)===!0}function lD(r,e,t){var n;return gn(r)||vn(r)||Sg(r)?n=ki(r):hn(r)&&(n=ki(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function dD(r,e,t){return Er(t)?hD(r,e,t):fD(r,e)}function fD(r,e){return ki(r).intercept_(e)}function hD(r,e,t){return ki(r,e).intercept_(t)}function GA(r,e){if(e===void 0)return io(r);if(hn(r)===!1||!r[Ie].values_.has(e))return!1;var t=Si(r,e);return io(t)}function HA(r){return GA(r)}function vl(r,e){return GA(r,e)}function YA(r,e){return r?e!==void 0?hn(r)?r[Ie].values_.has(e):!1:hn(r)||!!r[Ie]||_g(r)||Kl(r)||io(r):!1}function Cd(r){return YA(r)}function pD(r,e){return YA(r,e)}function pa(r){if(hn(r))return r[Ie].keys_();if(gn(r)||qn(r))return Array.from(r.keys());if(vn(r))return r.map(function(e,t){return t});$e(5)}function QA(r){if(hn(r))return pa(r).map(function(e){return r[e]});if(gn(r))return pa(r).map(function(e){return r.get(e)});if(qn(r))return Array.from(r.values());if(vn(r))return r.slice();$e(6)}function JA(r){if(hn(r))return pa(r).map(function(e){return[e,r[e]]});if(gn(r))return pa(r).map(function(e){return[e,r.get(e)]});if(qn(r))return Array.from(r.entries());if(vn(r))return r.map(function(e,t){return[t,e]});$e(7)}function XA(r,e,t){if(arguments.length===2&&!qn(r)){rr();var n=e;try{for(var i in n)XA(r,i,n[i])}finally{ir()}return}hn(r)?r[Ie].set_(e,t):gn(r)?r.set(e,t):qn(r)?r.add(e):vn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&$e("Invalid index: '"+e+"'"),rr(),e>=r.length&&(r.length=e+1),r[e]=t,ir()):$e(8)}function gD(r,e){hn(r)?r[Ie].delete_(e):gn(r)||qn(r)?r.delete(e):vn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):$e(9)}function ZA(r,e){if(hn(r))return r[Ie].has_(e);if(gn(r))return r.has(e);if(qn(r))return r.has(e);if(vn(r))return e>=0&&e<r.length;$e(10)}function yD(r,e){if(!!ZA(r,e)){if(hn(r))return r[Ie].get_(e);if(gn(r))return r.get(e);if(vn(r))return r[e];$e(11)}}function mD(r,e,t){if(hn(r))return r[Ie].defineProperty_(e,t);$e(39)}function eS(r){if(hn(r))return r[Ie].ownKeys_();$e(38)}function ga(r,e,t,n){return Er(t)?vD(r,e,t,n):bD(r,e,t)}function bD(r,e,t){return ki(r).observe_(e,t)}function vD(r,e,t,n){return ki(r,e).observe_(t,n)}function Xu(r,e,t){return r.set(e,t),t}function Uo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!Cd(r))return r;if(Sg(r)||io(r))return Uo(r.get(),e);if(e.has(r))return e.get(r);if(vn(r)){var t=Xu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=Uo(a,e)}),t}if(qn(r)){var n=Xu(e,r,new Set);return r.forEach(function(a){n.add(Uo(a,e))}),n}if(gn(r)){var i=Xu(e,r,new Map);return r.forEach(function(a,u){i.set(u,Uo(a,e))}),i}else{var s=Xu(e,r,{});return eS(r).forEach(function(a){Uc.propertyIsEnumerable.call(r,a)&&(s[a]=Uo(r[a],e))}),s}}function wD(r,e){return Uo(r,new Map)}function _D(){}function Wr(r,e){e===void 0&&(e=void 0),rr();try{return r.apply(e)}finally{ir()}}function AD(r,e,t){return arguments.length===1||e&&typeof e=="object"?SD(r,e):tS(r,e,t||{})}function tS(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Ie].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=ws("When-effect",e),a=so(function(u){var d=la(!1,r);d&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function SD(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var d,h=tS(r,a,vs({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(d=e.signal)==null||d.addEventListener==null||d.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function Co(r){return r[Ie]}var kD={has:function(e,t){return Co(e).has_(t)},get:function(e,t){return Co(e).get_(t)},set:function(e,t,n){var i;return to(t)?(i=Co(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return to(t)?(n=Co(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=Co(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return Co(e).ownKeys_()},preventExtensions:function(e){$e(13)}};function ID(r,e){var t,n;return oA(),r=mo(r,e),(n=(t=r[Ie]).proxy_)!=null?n:t.proxy_=new Proxy(r,kD)}function Vr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Hc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),aA(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function zr(r,e){var t=yo();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&$e(14),!!e);i++);return e}finally{ji(t)}}function ii(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Yc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),aA(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function si(r,e){var t=yo(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);ji(t)}}function Ig(r,e,t){return Os(function(){var n,i=mo(r,t)[Ie];(n=e)!=null||(e=UL(r)),ua(e).forEach(function(s){return i.make_(s,e[s])})}),r}var $h=Symbol("mobx-keys");function ED(r,e,t){return qi(r)?Bd(r,r,e,t):(Os(function(){var n=mo(r,t)[Ie];if(!r[$h]){var i=Object.getPrototypeOf(r),s=new Set([].concat(ua(r),ua(i)));s.delete("constructor"),s.delete(Ie),Fc(i,$h,s)}r[$h].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var vv="splice",_i="update",PD=1e4,OD={get:function(e,t){var n=e[Ie];return t===Ie?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):zi(Dl,t)?Dl[t]:e[t]},set:function(e,t,n){var i=e[Ie];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){$e(15)}},Eg=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new zc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return Hc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Yc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&$e("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&$e(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&lS(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=mp),Vr(this)){var d=zr(this,{object:this.proxy_,type:vv,index:n,removedCount:i,added:s});if(!d)return mp;i=d.removedCount,s=d.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var f=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,f),this.dehanceValues_(f)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<PD){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),d=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var f=0;f<d.length;f++)this.values_[n+s.length+f]=d[f];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&pc(),u=ii(this),d=u||a?{observableKind:"array",object:this.proxy_,type:_i,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&si(this,d)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&pc(),u=ii(this),d=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:vv,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&si(this,d)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&$e(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Vr(this)){var u=zr(this,{type:_i,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var d=i!==a;d&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),f=0;f<h.length-1;f++)h[f]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function xD(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),oA(),Os(function(){var i=new Eg(t,e,n,!1);uA(i.values_,Ie,i);var s=new Proxy(i.values_,OD);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var Dl={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ie];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Ie];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Ie].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ie],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ie].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ie],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&$e(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&$e(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ie],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};pn("concat",Hi);pn("flat",Hi);pn("includes",Hi);pn("indexOf",Hi);pn("join",Hi);pn("lastIndexOf",Hi);pn("slice",Hi);pn("toString",Hi);pn("toLocaleString",Hi);pn("every",Ps);pn("filter",Ps);pn("find",Ps);pn("findIndex",Ps);pn("flatMap",Ps);pn("forEach",Ps);pn("map",Ps);pn("some",Ps);pn("reduce",nS);pn("reduceRight",nS);function pn(r,e){typeof Array.prototype[r]=="function"&&(Dl[r]=e(r))}function Hi(r){return function(){var e=this[Ie];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function Ps(r){return function(e,t){var n=this,i=this[Ie];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function nS(r){return function(){var e=this,t=this[Ie];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var TD=Is("ObservableArrayAdministration",Eg);function vn(r){return Id(r)&&TD(r[Ie])}var rS,iS,RD={},fs="add",Nl="delete";rS=Symbol.iterator;iS=Symbol.toStringTag;var Ld=function(){function r(t,n,i){var s=this;n===void 0&&(n=ro),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ie]=RD,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,Er(Map)||$e(18),Os(function(){s.keysAtom_=Ed("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new gs(this.has_(n),Pd,"ObservableMap.key?",!1);this.hasMap_.set(n,a),Gc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Vr(this)){var a=zr(this,{type:s?_i:fs,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Vr(this)){var s=zr(this,{type:Nl,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=pc(),u=ii(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:Nl,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Wr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var f=i.data_.get(n);f.setNewValue_(void 0),i.data_.delete(n)}),u&&si(this,d),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=pc(),u=ii(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:_i,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&si(this,d)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Wr(function(){var h,f=new gs(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,f),i=f.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=pc(),u=ii(this),d=u||a?{observableKind:"map",debugObjectName:this.name_,type:fs,object:this,name:n,newValue:i}:null;u&&si(this,d)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return Pc({next:function(){var a=i.next(),u=a.done,d=a.value;return{done:u,value:u?void 0:n.get(d)}}})},e.entries=function(){var n=this,i=this.keys();return Pc({next:function(){var a=i.next(),u=a.done,d=a.value;return{done:u,value:u?void 0:[d,n.get(d)]}}})},e[rS]=function(){return this.entries()},e.forEach=function(n,i){for(var s=Go(this),a;!(a=s()).done;){var u=a.value,d=u[0],h=u[1];n.call(i,h,d,this)}},e.merge=function(n){var i=this;return gn(n)&&(n=new Map(n)),Wr(function(){qi(n)?LL(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):Oa(n)?(n.constructor!==Map&&$e(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&$e(20,n)}),this},e.clear=function(){var n=this;Wr(function(){kg(function(){for(var i=Go(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Wr(function(){for(var s=BD(n),a=new Map,u=!1,d=Go(i.data_.keys()),h;!(h=d()).done;){var f=h.value;if(!s.has(f)){var m=i.delete(f);if(m)u=!0;else{var I=i.data_.get(f);a.set(f,I)}}}for(var P=Go(s.entries()),M;!(M=P()).done;){var S=M.value,T=S[0],C=S[1],Q=i.data_.has(T);if(i.set(T,C),i.data_.has(T)){var ce=i.data_.get(T);a.set(T,ce),Q||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var ae=i.data_.keys(),he=a.keys(),E=ae.next(),D=he.next();!E.done;){if(E.value!==D.value){i.keysAtom_.reportChanged();break}E=ae.next(),D=he.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Yc(this,n)},e.intercept_=function(n){return Hc(this,n)},wg(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:iS,get:function(){return"Map"}}]),r}(),gn=Is("ObservableMap",Ld);function BD(r){if(Oa(r)||gn(r))return r;if(Array.isArray(r))return new Map(r);if(qi(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return $e(21,r)}var sS,oS,MD={};sS=Symbol.iterator;oS=Symbol.toStringTag;var Pg=function(){function r(t,n,i){var s=this;n===void 0&&(n=ro),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ie]=MD,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Er(Set)||$e(22),this.enhancer_=function(a,u){return n(a,u,i)},Os(function(){s.atom_=Ed(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Wr(function(){kg(function(){for(var i=Go(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=Go(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Vr(this)){var s=zr(this,{type:fs,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Wr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=ii(this),d=u||a?{observableKind:"set",debugObjectName:this.name_,type:fs,object:this,newValue:n}:null;u&&si(this,d)}return this},e.delete=function(n){var i=this;if(Vr(this)){var s=zr(this,{type:Nl,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=ii(this),d=u||a?{observableKind:"set",debugObjectName:this.name_,type:Nl,object:this,oldValue:n}:null;return Wr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&si(this,d),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return Pc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return Pc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return qn(n)&&(n=new Set(n)),Wr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):Wc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&$e("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Yc(this,n)},e.intercept_=function(n){return Hc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[sS]=function(){return this.values()},wg(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:oS,get:function(){return"Set"}}]),r}(),qn=Is("ObservableSet",Pg),wv=Object.create(null),_v="remove",aS=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=gK),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new zc("ObservableObject.keys"),this.isPlainObject_=qi(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof da)return s.set(i),!0;if(Vr(this)){var a=zr(this,{type:_i,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=ii(this),d=!1,h=u||d?{type:_i,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&si(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!zi(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),zi(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new gs(n in this.target_,Pd,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[vi])!=null&&s[n])return;$e(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==Uc;){var u=Bl(a,n);if(u){var d=i.make_(this,n,u,a);if(d===0)return;if(d===1)break}a=Object.getPrototypeOf(a)}Sv(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&Sv(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{rr();var a=this.delete_(n);if(!a)return a;if(Vr(this)){var u=zr(this,{object:this.proxy_||this.target_,name:n,type:fs,newValue:i.value});if(!u)return null;var d=u.newValue;i.value!==d&&(i=vs({},i,{value:d}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else wi(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{ir()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{rr();var u=this.delete_(n);if(!u)return u;if(Vr(this)){var d=zr(this,{object:this.proxy_||this.target_,name:n,type:fs,newValue:i});if(!d)return null;i=d.newValue}var h=Av(n),f={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,f))return!1}else wi(this.target_,n,f);var m=new gs(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{ir()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{rr();var a=this.delete_(n);if(!a)return a;if(Vr(this)){var u=zr(this,{object:this.proxy_||this.target_,name:n,type:fs,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var d=Av(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:d.get,set:d.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else wi(this.target_,n,h);this.values_.set(n,new da(i)),this.notifyPropertyAddition_(n,void 0)}finally{ir()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!zi(this.target_,n))return!0;if(Vr(this)){var s=zr(this,{object:this.proxy_||this.target_,name:n,type:_v});if(!s)return null}try{var a,u;rr();var d=ii(this),h=!1,f=this.values_.get(n),m=void 0;if(!f&&(d||h)){var I;m=(I=Bl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(f&&(this.values_.delete(n),f instanceof gs&&(m=f.value_),CA(f)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),d||h){var P={type:_v,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};d&&si(this,P)}}finally{ir()}return!0},e.observe_=function(n,i){return Yc(this,n)},e.intercept_=function(n){return Hc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=ii(this),d=!1;if(u||d){var h=u||d?{type:fs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&si(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),ua(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function mo(r,e){var t;if(zi(r,Ie))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new aS(r,new Map,String(n),EK(e));return Fc(r,Ie,i),r}var CD=Is("ObservableObjectAdministration",aS);function Av(r){return wv[r]||(wv[r]={get:function(){return this[Ie].getObservablePropValue_(r)},set:function(t){return this[Ie].setObservablePropValue_(r,t)}})}function hn(r){return Id(r)?CD(r[Ie]):!1}function Sv(r,e,t){var n;(n=r.target_[vi])==null||delete n[t]}var LD=uS(0),KD=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),Uh=0,cS=function(){};function DD(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}DD(cS,Array.prototype);var Og=function(r,e,t){fA(n,r);function n(s,a,u,d){var h;return u===void 0&&(u="ObservableArray"),d===void 0&&(d=!1),h=r.call(this)||this,Os(function(){var f=new Eg(u,a,d,!0);f.proxy_=Dh(h),uA(Dh(h),Ie,f),s&&s.length&&h.spliceWithArray(0,0,s),KD&&Object.defineProperty(Dh(h),"0",LD)}),h}var i=n.prototype;return i.concat=function(){this[Ie].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return vn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return Pc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},wg(n,[{key:"length",get:function(){return this[Ie].getArrayLength_()},set:function(a){this[Ie].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(cS,Symbol.toStringTag,Symbol.iterator);Object.entries(Dl).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&Fc(Og.prototype,e,t)});function uS(r){return{enumerable:!1,configurable:!0,get:function(){return this[Ie].get_(r)},set:function(t){this[Ie].set_(r,t)}}}function ND(r){wi(Og.prototype,""+r,uS(r))}function lS(r){if(r>Uh){for(var e=Uh;e<r+100;e++)ND(e);Uh=r}}lS(1e3);function $D(r,e,t){return new Og(r,e,t)}function Si(r,e){if(typeof r=="object"&&r!==null){if(vn(r))return e!==void 0&&$e(23),r[Ie].atom_;if(qn(r))return r.atom_;if(gn(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||$e(25,e,$l(r)),t}if(hn(r)){if(!e)return $e(26);var n=r[Ie].values_.get(e);return n||$e(27,e,$l(r)),n}if(_g(r)||io(r)||Kl(r))return r}else if(Er(r)&&Kl(r[Ie]))return r[Ie];$e(28)}function ki(r,e){if(r||$e(29),e!==void 0)return ki(Si(r,e));if(_g(r)||io(r)||Kl(r)||gn(r)||qn(r))return r;if(r[Ie])return r[Ie];$e(24,r)}function $l(r,e){var t;if(e!==void 0)t=Si(r,e);else{if(Es(r))return r.name;hn(r)||gn(r)||qn(r)?t=ki(r):t=Si(r)}return t.name_}function Os(r){var e=yo(),t=xd(!0);rr();try{return r()}finally{ir(),Td(t),ji(e)}}var kv=Uc.toString;function xg(r,e,t){return t===void 0&&(t=-1),Ep(r,e,t)}function Ep(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=kv.call(r);if(a!==kv.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Iv(r),e=Iv(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var d=r.constructor,h=e.constructor;if(d!==h&&!(Er(d)&&d instanceof d&&Er(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var f=n.length;f--;)if(n[f]===r)return i[f]===e;if(n.push(r),i.push(e),u){if(f=r.length,f!==e.length)return!1;for(;f--;)if(!Ep(r[f],e[f],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(f=m.length,Object.keys(e).length!==f)return!1;for(;f--;)if(I=m[f],!(zi(e,I)&&Ep(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Iv(r){return vn(r)?r.slice():Oa(r)||gn(r)||Wc(r)||qn(r)?Array.from(r.entries()):r}function Pc(r){return r[Symbol.iterator]=UD,r}function UD(){return this}["Symbol","Map","Set"].forEach(function(r){var e=bg();typeof e[r]>"u"&&$e("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:KA,extras:{getDebugName:$l},$mobx:Ie});var FD=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ie,FlowCancellationError:Md,ObservableMap:Ld,ObservableSet:Pg,Reaction:Ic,_allowStateChanges:la,_allowStateChangesInsideComputed:Ec,_allowStateReadsEnd:ea,_allowStateReadsStart:Rd,_autoAction:fa,_endAction:kA,_getAdministration:ki,_getGlobalState:TA,_interceptReads:lD,_isComputingDerivation:qc,_resetGlobalState:KK,_startAction:SA,action:Gt,autorun:so,comparer:no,computed:jr,configure:nD,createAtom:Ed,defineProperty:mD,entries:JA,extendObservable:Bd,flow:oo,flowResult:uD,get:yD,getAtom:Si,getDebugName:$l,getDependencyTree:rD,getObserverTree:iD,has:ZA,intercept:dD,isAction:Es,isBoxedObservable:Sg,isComputed:HA,isComputedProp:vl,isFlow:ha,isFlowCancellationError:aD,isObservable:Cd,isObservableArray:vn,isObservableMap:gn,isObservableObject:hn,isObservableProp:pD,isObservableSet:qn,keys:pa,makeAutoObservable:ED,makeObservable:Ig,observable:Kt,observe:ga,onBecomeObserved:VA,onBecomeUnobserved:Gc,onReactionError:WK,override:GL,ownKeys:eS,reaction:WA,remove:gD,runInAction:Ec,set:XA,spy:KA,toJS:wD,trace:_D,transaction:Wr,untracked:kg,values:QA,when:AD},Symbol.toStringTag,{value:"Module"})),dS=Tc(FD);(function(r){var e=W&&W.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=wt,n=e(iA.exports),i=dS;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(d){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,d&&(this.id=d.id,this.orderType=d.orderType,this.orderMint=d.orderMint,this.currencyMint=d.currencyMint,this.currencyDecimals=d.currencyDecimals,this.price=d.price,this.orderQtyRemaining=d.orderQtyRemaining,this.orderOriginationQty=d.orderOriginationQty,this.owner=d.owner,this.ownerAssetTokenAccount=d.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=d.ownerCurrencyTokenAccount,this.createdAt=d.createdAt,this.slotContext=d.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(d=1){return this.bigNumberPrice.mul(d).div(this.decimalDivisor).toNumber()}}r.Order=a})(kd);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(kd,r)})(Sd);var WD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ad,"__esModule",{value:!0});Ad.createExchangeInstruction=void 0;const Zu=wt,el=Gi,VD=ur,Ev=Ss,zD=Ss,Fh=Gr,Wh=Sd;function jD({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:d,currencyMint:h,orderInitializer:f,saVault:m,stakingProgramId:I,registeredStake:P,stakingAccount:M,extraAccounts:S=[]}){return WD(this,void 0,void 0,function*(){const T=(0,VD.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Q=u===Wh.OrderSide.Sell?new el.PublicKey(d):new el.PublicKey(h),ce=u===Wh.OrderSide.Sell?new el.PublicKey(h):new el.PublicKey(d);let ae=null,he=null,E=null,D=yield(0,Fh.getTokenAccount)(r,f,Q,n);"createInstruction"in D?(C.instructions.push(...D.createInstruction),D.tokenAccount instanceof Zu.web3.Keypair?(ae=D.tokenAccount.publicKey,C.signers.push(D.tokenAccount)):ae=D.tokenAccount):ae=D.tokenAccount,D=yield(0,Fh.getTokenAccount)(r,f,ce,n),"createInstruction"in D?(C.instructions.push(...D.createInstruction),D.tokenAccount instanceof Zu.web3.Keypair?(he=D.tokenAccount.publicKey,C.signers.push(D.tokenAccount)):he=D.tokenAccount):he=D.tokenAccount;const[z]=yield(0,Ev.getOrderVault)(f,Q,s),[J]=yield(0,zD.getOpenOrdersCounter)(f,Q,s);D=yield(0,Fh.getTokenAccount)(r,n,Q),"createInstruction"in D?(C.instructions.push(...D.createInstruction),D.tokenAccount instanceof Zu.web3.Keypair?(E=D.tokenAccount.publicKey,C.signers.push(D.tokenAccount)):E=D.tokenAccount):E=D.tokenAccount;const K=u===Wh.OrderSide.Buy?n:f,[q]=yield(0,Ev.getFeeExemptAccount)(K,s),ne=yield T.methods.processExchange(new Zu.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:d,orderInitializer:f,initializerDepositTokenAccount:ae,initializerReceiveTokenAccount:he,orderVaultAccount:z,orderAccount:e,openOrdersCounter:J,saVault:m,atlasStaking:I,registeredStake:P,stakingAccount:M,feeReduction:q}).remainingAccounts(S).instruction();return C.instructions.push(ne),C})}Ad.createExchangeInstruction=jD;var Kd={},qD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.createInitializeMarketInstruction=void 0;const GD=ur;function HD({connection:r,updateAuthorityAccount:e,programId:t}){return qD(this,void 0,void 0,function*(){const i=[yield(0,GD.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}Kd.createInitializeMarketInstruction=HD;var Dd={},YD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.createRegisterCurrencyInstruction=void 0;const QD=wt,JD=ur;function XD({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return YD(this,void 0,void 0,function*(){const u=[yield(0,JD.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new QD.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}Dd.createRegisterCurrencyInstruction=XD;var ys={},Tg=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ys,"__esModule",{value:!0});ys.updateRoyaltyTier=ys.deleteRoyaltyTier=ys.addRoyaltyTier=void 0;const Oc=wt,Rg=ur;function ZD({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Tg(this,void 0,void 0,function*(){const a=(0,Rg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},d=yield a.methods.addRoyaltyTier(new Oc.BN(n),new Oc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(d),u})}ys.addRoyaltyTier=ZD;function eN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return Tg(this,void 0,void 0,function*(){const s=(0,Rg.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new Oc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}ys.deleteRoyaltyTier=eN;function tN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Tg(this,void 0,void 0,function*(){const a=(0,Rg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},d=yield a.methods.updateRoyaltyTier(new Oc.BN(n),new Oc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(d),u})}ys.updateRoyaltyTier=tN;var ya={},fS=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ya,"__esModule",{value:!0});ya.createUpdateRegisteredCurrencyVaultInstruction=ya.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const nN=wt,hS=ur;function rN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return fS(this,void 0,void 0,function*(){return[yield(0,hS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new nN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}ya.createUpdateRegisteredCurrencyRoyaltyInstruction=rN;function iN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return fS(this,void 0,void 0,function*(){return[yield(0,hS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}ya.createUpdateRegisteredCurrencyVaultInstruction=iN;var ma={},pS=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ma,"__esModule",{value:!0});ma.createRemoveFeeExemptionInstruction=ma.createAddFeeExemptionInstruction=void 0;const sN=wt,gS=ur,Ul=Ss;function oN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return pS(this,void 0,void 0,function*(){const s=(0,gS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[d]=yield(0,Ul.getFeeExemptAccount)(n,i),[h]=yield(0,Ul.getMarketVarsAccount)(i),f=[yield s.methods.addFeeExemption(new sN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:d,marketVarsAccount:h}).instruction()];return a.instructions.push(...f),a})}ma.createAddFeeExemptionInstruction=oN;function aN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return pS(this,void 0,void 0,function*(){const s=(0,gS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,Ul.getFeeExemptAccount)(n,i),[d]=yield(0,Ul.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:d}).instruction()];return a.instructions.push(...h),a})}ma.createRemoveFeeExemptionInstruction=aN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Y_,r),t(bd,r),t(ca,r),t(_d,r),t(Ad,r),t(Kd,r),t(Dd,r),t(ys,r),t(ya,r),t(ma,r)})(gg);var Ta={},yS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(yS);var mS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(mS);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Nc,r),t(yS,r),t(mS,r)})(Ta);var bS={},Nd={},vS=function(){},cN=function(r){return r};function wS(r){throw new Error("[mobx-utils] "+r)}function _s(r,e){e===void 0&&(e="Illegal state"),r||wS(e)}function _S(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var AS=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(AS(Object.getPrototypeOf(r))||[])},uN=function(r){var e=AS(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},Pp=function(r){return uN(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},Fl="pending",xc="fulfilled",$d="rejected";function lN(r){switch(this.state){case Fl:return r.pending&&r.pending(this.value);case $d:return r.rejected&&r.rejected(this.value);case xc:return r.fulfilled?r.fulfilled(this.value):this.value}}function Op(r,e){if(_s(arguments.length<=2,"fromPromise expects up to two arguments"),_s(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Gt("observableFromPromise-resolve",function(i){t.value=i,t.state=xc}),Gt("observableFromPromise-reject",function(i){t.value=i,t.state=$d})),t.isPromiseBasedObservable=!0,t.case=lN;var n=e&&(e.state===xc||e.state===Fl)?e.value:void 0;return Bd(t,{value:n,state:Fl},{},{deep:!1}),t}(function(r){r.reject=Gt("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=$d,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=xc,n.value=t,n}r.resolve=Gt("fromPromise.resolve",e)})(Op||(Op={}));function dN(r){return r&&r.isPromiseBasedObservable===!0}var Pv=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function fN(r,e,t){if(Ov(r,e),Ov(r,t),e!==t){var n=r.slice(),i;return e<t?i=Pv(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=Pv(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function Ov(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function hN(r,e){e===void 0&&(e=void 0);var t=!1,n=Kt.box(e,{deep:!1}),i=Kt.box(!1),s=function(){return t||(t=!0,la(!0,function(){i.set(!0)}),r(function(u){la(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Gt("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function Bg(r,e,t){e===void 0&&(e=vS),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=Ed("ResourceBasedObservable",function(){_s(!n&&!i),n=!0,r(function(d){la(!0,function(){s=d,u.reportChanged()})})},a);return{current:function(){_s(!i,"subscribingObservable has already been disposed");var d=u.reportObserved();return!d&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var tl=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function pN(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function gN(r,e){var t;e===void 0&&(e=!1);var n=jr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:ga(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:ga(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[pN()]=function(){return this},t}var yN=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Ig(this),Ec(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),tl([Kt.ref],r.prototype,"current",void 0),tl([Gt.bound],r.prototype,"next",null),tl([Gt.bound],r.prototype,"complete",null),tl([Gt.bound],r.prototype,"error",null),r}();function mN(r,e){return e===void 0&&(e=void 0),new yN(r,e)}var Wl=function(){return Wl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Wl.apply(this,arguments)},Za=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bN=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],SS=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:Kt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:Kt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),Ig(this),_s(hn(e),"createViewModel expects an observable object");var n=Pp(this);Pp(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Ie||i==="__mobxDidRunLazyInitializers")){if(_s(bN.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),vl(e,i)){var a=ki(e,i),u=a.derivation.bind(t),d=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,jr(u,{set:d}))}var h=Object.getOwnPropertyDescriptor(e,i),f=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,Wl(Wl({},f),{configurable:!0,get:function(){return vl(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Gt(function(m){vl(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;pa(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];vn(i)?i.replace(n):gn(i)?(i.clear(),i.merge(n)):HA(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Za([jr],r.prototype,"isDirty",null),Za([jr],r.prototype,"changedValues",null),Za([Gt.bound],r.prototype,"submit",null),Za([Gt.bound],r.prototype,"reset",null),Za([Gt.bound],r.prototype,"resetProperty",null),r}();function vN(r){return new SS(r)}function wN(r,e){var t=Si(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return ga(t,function(){})}function _N(r,e,t){if(t===void 0&&(t=0),!vn(r))throw new Error("Expected observable array as first argument");Es(e)||(e=Gt("queueProcessor",e));var n=function(){var i=r.slice(0);Ec(function(){return r.splice(0)}),i.forEach(e)};return t>0?so(n,{delay:t}):so(n)}function AN(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!vn(r))throw new Error("Expected observable array as first argument");Es(e)||(e=Gt("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);Ec(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?so(i,{delay:t}):so(i)}var Hs={};function SN(){for(var r=0,e=Object.getOwnPropertyNames(Hs);r<e.length;r++){var t=e[r];Hs[t].dispose(),delete Hs[t]}}function kN(r){return r===void 0&&(r=1e3),qc()?(Hs[r]||(typeof r=="number"?Hs[r]=IN(r):Hs[r]=EN()),Hs[r].current()):Date.now()}function IN(r){var e;return Bg(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function EN(){var r=Bg(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function PN(r){return qc()||console.warn("'expr' should only be used inside other reactive functions."),jr(r).get()}var Vl=function(){return Vl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Vl.apply(this,arguments)},ON=0;function xN(r,e){_s(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(d,h){var f,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+d,P=jr(function(){return f=r(h)},Vl(Vl({},m),{name:I}));if(!i)var M=Gc(P,function(){delete t[d],M(),n&&n(f,h)});return P}var u=!1;return function(d){var h=TN(d),f=t[h];if(f)return f.get();if(!i&&!qc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(d);return n&&n(m,d),m}return f=t[h]=a(h,d),f.get()}}function TN(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++ON,_S(r,"$transformId",t)),t}function Vh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function zh(r){return hn(r)||vn(r)||gn(r)}function RN(r,e){var t=new WeakMap;function n(u){var d=t.get(u.object);i(u,d),e(u,Vh(d),r)}function i(u,d){switch(u.type){case"add":s(u.newValue,d,u.name);break;case"update":a(u.oldValue),s(u.newValue,d,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,d,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(zh(u.object[h])){var f=t.get(u.object[h]);f&&(f.path=""+h)}break}}function s(u,d,h){if(zh(u)){var f=t.get(u);if(f){if(f.parent!==d||f.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+Vh(d)+"/"+h+"',")+(" but it already exists at '"+Vh(f.parent)+"/"+f.path+"'"))}else{var m={parent:d,path:h,dispose:ga(u,n)};t.set(u,m),JA(u).forEach(function(I){var P=I[0],M=I[1];return s(M,m,P)})}}}function a(u){if(zh(u)){var d=t.get(u);if(!d)return;t.delete(u),d.dispose(),QA(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var BN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),MN=function(r){BN(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,d=s.keyToName,h=d===void 0?function(I){return""+I}:d,f=r.call(this)||this;Object.defineProperty(f,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),f._keyToName=h,f._groupBy=n,f._ogmInfoKey=Symbol("ogmInfo"+u),f._base=t;for(var m=0;m<t.length;m++)f._addItem(t[m]);return f._disposeBaseObserver=ga(f._base,function(I){if(I.type==="splice")Wr(function(){for(var P=0,M=I.removed;P<M.length;P++){var S=M[P];f._removeItem(S)}for(var T=0,C=I.added;T<C.length;T++){var Q=C[T];f._addItem(Q)}});else if(I.type==="update")Wr(function(){f._removeItem(I.oldValue),f._addItem(I.newValue)});else throw new Error("illegal state")}),f}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=Kt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:WA(function(){return n._groupBy(t)},function(u,d){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var f=n._getGroupArr(u),m=f.length;f.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(Ld),CN=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),LN=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new CN(this.store,e)}}),r}(),zl=function(){return zl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},zl.apply(this,arguments)},KN=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function DN(r,e){if(e===void 0&&(e=!1),Es(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new LN;return function(){for(var a=this,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!qc())return!t&&TA().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var f,m=jr(function(){return f=r.apply(a,u)},zl(zl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||Gc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,KN([f],u)),f=void 0}),m.get()}}var NN=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:xc,IDENTITY:cN,NOOP:vS,ObservableGroupMap:MN,PENDING:Fl,REJECTED:$d,ViewModel:SS,addHiddenProp:_S,chunkProcessor:AN,computedFn:DN,createTransformer:xN,createViewModel:vN,deepObserve:RN,expr:PN,fail:wS,get fromPromise(){return Op},fromResource:Bg,fromStream:mN,getAllMethodsAndProperties:Pp,invariant:_s,isPromiseBasedObservable:dN,keepAlive:wN,lazyObservable:hN,moveItem:fN,now:kN,queueProcessor:_N,resetNowInternalState:SN,toStream:gN},Symbol.toStringTag,{value:"Module"})),$N=Tc(NN),jl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",m=1,I=2,P=4,M=1,S=2,T=1,C=2,Q=4,ce=8,ae=16,he=32,E=64,D=128,z=256,J=512,K=30,q="...",ne=800,x=16,V=1,Z=2,Ke=3,me=1/0,Oe=9007199254740991,Xt=17976931348623157e292,Zt=0/0,Ae=4294967295,Ge=Ae-1,on=Ae>>>1,yn=[["ary",D],["bind",T],["bindKey",C],["curry",ce],["curryRight",ae],["flip",J],["partial",he],["partialRight",E],["rearg",z]],xt="[object Arguments]",yt="[object Array]",Or="[object AsyncFunction]",Ht="[object Boolean]",On="[object Date]",ui="[object DOMException]",xr="[object Error]",lr="[object Function]",Pi="[object GeneratorFunction]",wn="[object Map]",Ts="[object Number]",rf="[object Null]",dr="[object Object]",Zc="[object Promise]",sf="[object Proxy]",Yi="[object RegExp]",xn="[object Set]",Tn="[object String]",Qi="[object Symbol]",of="[object Undefined]",Gn="[object WeakMap]",af="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",j="[object Int16Array]",ee="[object Int32Array]",Fe="[object Uint8Array]",kt="[object Uint8ClampedArray]",mt="[object Uint16Array]",It="[object Uint32Array]",pt=/\b__p \+= '';/g,DS=/\b(__p \+=) '' \+/g,NS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kg=/&(?:amp|lt|gt|quot|#39);/g,Dg=/[&<>"']/g,$S=RegExp(Kg.source),US=RegExp(Dg.source),FS=/<%-([\s\S]+?)%>/g,WS=/<%([\s\S]+?)%>/g,Ng=/<%=([\s\S]+?)%>/g,VS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zS=/^\w*$/,jS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cf=/[\\^$.*+?()[\]{}|]/g,qS=RegExp(cf.source),uf=/^\s+/,GS=/\s/,HS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,YS=/\{\n\/\* \[wrapped with (.+)\] \*/,QS=/,? & /,JS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,XS=/[()=,{}\[\]\/\s]/,ZS=/\\(\\)?/g,ek=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$g=/\w*$/,tk=/^[-+]0x[0-9a-f]+$/i,nk=/^0b[01]+$/i,rk=/^\[object .+?Constructor\]$/,ik=/^0o[0-7]+$/i,sk=/^(?:0|[1-9]\d*)$/,ok=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eu=/($^)/,ak=/['\n\r\u2028\u2029\\]/g,tu="\\ud800-\\udfff",ck="\\u0300-\\u036f",uk="\\ufe20-\\ufe2f",lk="\\u20d0-\\u20ff",Ug=ck+uk+lk,Fg="\\u2700-\\u27bf",Wg="a-z\\xdf-\\xf6\\xf8-\\xff",dk="\\xac\\xb1\\xd7\\xf7",fk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hk="\\u2000-\\u206f",pk=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vg="A-Z\\xc0-\\xd6\\xd8-\\xde",zg="\\ufe0e\\ufe0f",jg=dk+fk+hk+pk,lf="['\u2019]",gk="["+tu+"]",qg="["+jg+"]",nu="["+Ug+"]",Gg="\\d+",yk="["+Fg+"]",Hg="["+Wg+"]",Yg="[^"+tu+jg+Gg+Fg+Wg+Vg+"]",df="\\ud83c[\\udffb-\\udfff]",mk="(?:"+nu+"|"+df+")",Qg="[^"+tu+"]",ff="(?:\\ud83c[\\udde6-\\uddff]){2}",hf="[\\ud800-\\udbff][\\udc00-\\udfff]",bo="["+Vg+"]",Jg="\\u200d",Xg="(?:"+Hg+"|"+Yg+")",bk="(?:"+bo+"|"+Yg+")",Zg="(?:"+lf+"(?:d|ll|m|re|s|t|ve))?",ey="(?:"+lf+"(?:D|LL|M|RE|S|T|VE))?",ty=mk+"?",ny="["+zg+"]?",vk="(?:"+Jg+"(?:"+[Qg,ff,hf].join("|")+")"+ny+ty+")*",wk="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_k="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ry=ny+ty+vk,Ak="(?:"+[yk,ff,hf].join("|")+")"+ry,Sk="(?:"+[Qg+nu+"?",nu,ff,hf,gk].join("|")+")",kk=RegExp(lf,"g"),Ik=RegExp(nu,"g"),pf=RegExp(df+"(?="+df+")|"+Sk+ry,"g"),Ek=RegExp([bo+"?"+Hg+"+"+Zg+"(?="+[qg,bo,"$"].join("|")+")",bk+"+"+ey+"(?="+[qg,bo+Xg,"$"].join("|")+")",bo+"?"+Xg+"+"+Zg,bo+"+"+ey,_k,wk,Gg,Ak].join("|"),"g"),Pk=RegExp("["+Jg+tu+Ug+zg+"]"),Ok=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xk=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Tk=-1,Tt={};Tt[y]=Tt[k]=Tt[L]=Tt[j]=Tt[ee]=Tt[Fe]=Tt[kt]=Tt[mt]=Tt[It]=!0,Tt[xt]=Tt[yt]=Tt[v]=Tt[Ht]=Tt[g]=Tt[On]=Tt[xr]=Tt[lr]=Tt[wn]=Tt[Ts]=Tt[dr]=Tt[Yi]=Tt[xn]=Tt[Tn]=Tt[Gn]=!1;var Et={};Et[xt]=Et[yt]=Et[v]=Et[g]=Et[Ht]=Et[On]=Et[y]=Et[k]=Et[L]=Et[j]=Et[ee]=Et[wn]=Et[Ts]=Et[dr]=Et[Yi]=Et[xn]=Et[Tn]=Et[Qi]=Et[Fe]=Et[kt]=Et[mt]=Et[It]=!0,Et[xr]=Et[lr]=Et[Gn]=!1;var Rk={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Bk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mk={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ck={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Lk=parseFloat,Kk=parseInt,iy=typeof W=="object"&&W&&W.Object===Object&&W,Dk=typeof self=="object"&&self&&self.Object===Object&&self,_n=iy||Dk||Function("return this")(),gf=e&&!e.nodeType&&e,Rs=gf&&!0&&r&&!r.nodeType&&r,sy=Rs&&Rs.exports===gf,yf=sy&&iy.process,Tr=function(){try{var N=Rs&&Rs.require&&Rs.require("util").types;return N||yf&&yf.binding&&yf.binding("util")}catch{}}(),oy=Tr&&Tr.isArrayBuffer,ay=Tr&&Tr.isDate,cy=Tr&&Tr.isMap,uy=Tr&&Tr.isRegExp,ly=Tr&&Tr.isSet,dy=Tr&&Tr.isTypedArray;function fr(N,X,G){switch(G.length){case 0:return N.call(X);case 1:return N.call(X,G[0]);case 2:return N.call(X,G[0],G[1]);case 3:return N.call(X,G[0],G[1],G[2])}return N.apply(X,G)}function Nk(N,X,G,be){for(var Ne=-1,ct=N==null?0:N.length;++Ne<ct;){var an=N[Ne];X(be,an,G(an),N)}return be}function Rr(N,X){for(var G=-1,be=N==null?0:N.length;++G<be&&X(N[G],G,N)!==!1;);return N}function $k(N,X){for(var G=N==null?0:N.length;G--&&X(N[G],G,N)!==!1;);return N}function fy(N,X){for(var G=-1,be=N==null?0:N.length;++G<be;)if(!X(N[G],G,N))return!1;return!0}function Ji(N,X){for(var G=-1,be=N==null?0:N.length,Ne=0,ct=[];++G<be;){var an=N[G];X(an,G,N)&&(ct[Ne++]=an)}return ct}function ru(N,X){var G=N==null?0:N.length;return!!G&&vo(N,X,0)>-1}function mf(N,X,G){for(var be=-1,Ne=N==null?0:N.length;++be<Ne;)if(G(X,N[be]))return!0;return!1}function Bt(N,X){for(var G=-1,be=N==null?0:N.length,Ne=Array(be);++G<be;)Ne[G]=X(N[G],G,N);return Ne}function Xi(N,X){for(var G=-1,be=X.length,Ne=N.length;++G<be;)N[Ne+G]=X[G];return N}function bf(N,X,G,be){var Ne=-1,ct=N==null?0:N.length;for(be&&ct&&(G=N[++Ne]);++Ne<ct;)G=X(G,N[Ne],Ne,N);return G}function Uk(N,X,G,be){var Ne=N==null?0:N.length;for(be&&Ne&&(G=N[--Ne]);Ne--;)G=X(G,N[Ne],Ne,N);return G}function vf(N,X){for(var G=-1,be=N==null?0:N.length;++G<be;)if(X(N[G],G,N))return!0;return!1}var Fk=wf("length");function Wk(N){return N.split("")}function Vk(N){return N.match(JS)||[]}function hy(N,X,G){var be;return G(N,function(Ne,ct,an){if(X(Ne,ct,an))return be=ct,!1}),be}function iu(N,X,G,be){for(var Ne=N.length,ct=G+(be?1:-1);be?ct--:++ct<Ne;)if(X(N[ct],ct,N))return ct;return-1}function vo(N,X,G){return X===X?t0(N,X,G):iu(N,py,G)}function zk(N,X,G,be){for(var Ne=G-1,ct=N.length;++Ne<ct;)if(be(N[Ne],X))return Ne;return-1}function py(N){return N!==N}function gy(N,X){var G=N==null?0:N.length;return G?Af(N,X)/G:Zt}function wf(N){return function(X){return X==null?t:X[N]}}function _f(N){return function(X){return N==null?t:N[X]}}function yy(N,X,G,be,Ne){return Ne(N,function(ct,an,_t){G=be?(be=!1,ct):X(G,ct,an,_t)}),G}function jk(N,X){var G=N.length;for(N.sort(X);G--;)N[G]=N[G].value;return N}function Af(N,X){for(var G,be=-1,Ne=N.length;++be<Ne;){var ct=X(N[be]);ct!==t&&(G=G===t?ct:G+ct)}return G}function Sf(N,X){for(var G=-1,be=Array(N);++G<N;)be[G]=X(G);return be}function qk(N,X){return Bt(X,function(G){return[G,N[G]]})}function my(N){return N&&N.slice(0,_y(N)+1).replace(uf,"")}function hr(N){return function(X){return N(X)}}function kf(N,X){return Bt(X,function(G){return N[G]})}function Ma(N,X){return N.has(X)}function by(N,X){for(var G=-1,be=N.length;++G<be&&vo(X,N[G],0)>-1;);return G}function vy(N,X){for(var G=N.length;G--&&vo(X,N[G],0)>-1;);return G}function Gk(N,X){for(var G=N.length,be=0;G--;)N[G]===X&&++be;return be}var Hk=_f(Rk),Yk=_f(Bk);function Qk(N){return"\\"+Ck[N]}function Jk(N,X){return N==null?t:N[X]}function wo(N){return Pk.test(N)}function Xk(N){return Ok.test(N)}function Zk(N){for(var X,G=[];!(X=N.next()).done;)G.push(X.value);return G}function If(N){var X=-1,G=Array(N.size);return N.forEach(function(be,Ne){G[++X]=[Ne,be]}),G}function wy(N,X){return function(G){return N(X(G))}}function Zi(N,X){for(var G=-1,be=N.length,Ne=0,ct=[];++G<be;){var an=N[G];(an===X||an===f)&&(N[G]=f,ct[Ne++]=G)}return ct}function su(N){var X=-1,G=Array(N.size);return N.forEach(function(be){G[++X]=be}),G}function e0(N){var X=-1,G=Array(N.size);return N.forEach(function(be){G[++X]=[be,be]}),G}function t0(N,X,G){for(var be=G-1,Ne=N.length;++be<Ne;)if(N[be]===X)return be;return-1}function n0(N,X,G){for(var be=G+1;be--;)if(N[be]===X)return be;return be}function _o(N){return wo(N)?i0(N):Fk(N)}function Yr(N){return wo(N)?s0(N):Wk(N)}function _y(N){for(var X=N.length;X--&&GS.test(N.charAt(X)););return X}var r0=_f(Mk);function i0(N){for(var X=pf.lastIndex=0;pf.test(N);)++X;return X}function s0(N){return N.match(pf)||[]}function o0(N){return N.match(Ek)||[]}var a0=function N(X){X=X==null?_n:Ao.defaults(_n.Object(),X,Ao.pick(_n,xk));var G=X.Array,be=X.Date,Ne=X.Error,ct=X.Function,an=X.Math,_t=X.Object,Ef=X.RegExp,c0=X.String,Br=X.TypeError,ou=G.prototype,u0=ct.prototype,So=_t.prototype,au=X["__core-js_shared__"],cu=u0.toString,gt=So.hasOwnProperty,l0=0,Ay=function(){var o=/[^.]+$/.exec(au&&au.keys&&au.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),uu=So.toString,d0=cu.call(_t),f0=_n._,h0=Ef("^"+cu.call(gt).replace(cf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lu=sy?X.Buffer:t,es=X.Symbol,du=X.Uint8Array,Sy=lu?lu.allocUnsafe:t,fu=wy(_t.getPrototypeOf,_t),ky=_t.create,Iy=So.propertyIsEnumerable,hu=ou.splice,Ey=es?es.isConcatSpreadable:t,Ca=es?es.iterator:t,Bs=es?es.toStringTag:t,pu=function(){try{var o=Ds(_t,"defineProperty");return o({},"",{}),o}catch{}}(),p0=X.clearTimeout!==_n.clearTimeout&&X.clearTimeout,g0=be&&be.now!==_n.Date.now&&be.now,y0=X.setTimeout!==_n.setTimeout&&X.setTimeout,gu=an.ceil,yu=an.floor,Pf=_t.getOwnPropertySymbols,m0=lu?lu.isBuffer:t,Py=X.isFinite,b0=ou.join,v0=wy(_t.keys,_t),cn=an.max,Rn=an.min,w0=be.now,_0=X.parseInt,Oy=an.random,A0=ou.reverse,Of=Ds(X,"DataView"),La=Ds(X,"Map"),xf=Ds(X,"Promise"),ko=Ds(X,"Set"),Ka=Ds(X,"WeakMap"),Da=Ds(_t,"create"),mu=Ka&&new Ka,Io={},S0=Ns(Of),k0=Ns(La),I0=Ns(xf),E0=Ns(ko),P0=Ns(Ka),bu=es?es.prototype:t,Na=bu?bu.valueOf:t,xy=bu?bu.toString:t;function w(o){if(Vt(o)&&!Ue(o)&&!(o instanceof Xe)){if(o instanceof Mr)return o;if(gt.call(o,"__wrapped__"))return Tm(o)}return new Mr(o)}var Eo=function(){function o(){}return function(c){if(!Nt(c))return{};if(ky)return ky(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function vu(){}function Mr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}w.templateSettings={escape:FS,evaluate:WS,interpolate:Ng,variable:"",imports:{_:w}},w.prototype=vu.prototype,w.prototype.constructor=w,Mr.prototype=Eo(vu.prototype),Mr.prototype.constructor=Mr;function Xe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function O0(){var o=new Xe(this.__wrapped__);return o.__actions__=Hn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Hn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Hn(this.__views__),o}function x0(){if(this.__filtered__){var o=new Xe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function T0(){var o=this.__wrapped__.value(),c=this.__dir__,l=Ue(o),p=c<0,b=l?o.length:0,_=W1(0,b,this.__views__),O=_.start,R=_.end,U=R-O,re=p?R:O-1,ie=this.__iteratees__,ue=ie.length,ye=0,Se=Rn(U,this.__takeCount__);if(!l||!p&&b==U&&Se==U)return Zy(o,this.__actions__);var Me=[];e:for(;U--&&ye<Se;){re+=c;for(var ze=-1,Ce=o[re];++ze<ue;){var Qe=ie[ze],Ze=Qe.iteratee,yr=Qe.type,Wn=Ze(Ce);if(yr==Z)Ce=Wn;else if(!Wn){if(yr==V)continue e;break e}}Me[ye++]=Ce}return Me}Xe.prototype=Eo(vu.prototype),Xe.prototype.constructor=Xe;function Ms(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function R0(){this.__data__=Da?Da(null):{},this.size=0}function B0(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function M0(o){var c=this.__data__;if(Da){var l=c[o];return l===d?t:l}return gt.call(c,o)?c[o]:t}function C0(o){var c=this.__data__;return Da?c[o]!==t:gt.call(c,o)}function L0(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=Da&&c===t?d:c,this}Ms.prototype.clear=R0,Ms.prototype.delete=B0,Ms.prototype.get=M0,Ms.prototype.has=C0,Ms.prototype.set=L0;function Oi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function K0(){this.__data__=[],this.size=0}function D0(o){var c=this.__data__,l=wu(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():hu.call(c,l,1),--this.size,!0}function N0(o){var c=this.__data__,l=wu(c,o);return l<0?t:c[l][1]}function $0(o){return wu(this.__data__,o)>-1}function U0(o,c){var l=this.__data__,p=wu(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}Oi.prototype.clear=K0,Oi.prototype.delete=D0,Oi.prototype.get=N0,Oi.prototype.has=$0,Oi.prototype.set=U0;function xi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function F0(){this.size=0,this.__data__={hash:new Ms,map:new(La||Oi),string:new Ms}}function W0(o){var c=Bu(this,o).delete(o);return this.size-=c?1:0,c}function V0(o){return Bu(this,o).get(o)}function z0(o){return Bu(this,o).has(o)}function j0(o,c){var l=Bu(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}xi.prototype.clear=F0,xi.prototype.delete=W0,xi.prototype.get=V0,xi.prototype.has=z0,xi.prototype.set=j0;function Cs(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new xi;++c<l;)this.add(o[c])}function q0(o){return this.__data__.set(o,d),this}function G0(o){return this.__data__.has(o)}Cs.prototype.add=Cs.prototype.push=q0,Cs.prototype.has=G0;function Qr(o){var c=this.__data__=new Oi(o);this.size=c.size}function H0(){this.__data__=new Oi,this.size=0}function Y0(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function Q0(o){return this.__data__.get(o)}function J0(o){return this.__data__.has(o)}function X0(o,c){var l=this.__data__;if(l instanceof Oi){var p=l.__data__;if(!La||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new xi(p)}return l.set(o,c),this.size=l.size,this}Qr.prototype.clear=H0,Qr.prototype.delete=Y0,Qr.prototype.get=Q0,Qr.prototype.has=J0,Qr.prototype.set=X0;function Ty(o,c){var l=Ue(o),p=!l&&$s(o),b=!l&&!p&&ss(o),_=!l&&!p&&!b&&To(o),O=l||p||b||_,R=O?Sf(o.length,c0):[],U=R.length;for(var re in o)(c||gt.call(o,re))&&!(O&&(re=="length"||b&&(re=="offset"||re=="parent")||_&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||Mi(re,U)))&&R.push(re);return R}function Ry(o){var c=o.length;return c?o[Uf(0,c-1)]:t}function Z0(o,c){return Mu(Hn(o),Ls(c,0,o.length))}function e1(o){return Mu(Hn(o))}function Tf(o,c,l){(l!==t&&!Jr(o[c],l)||l===t&&!(c in o))&&Ti(o,c,l)}function $a(o,c,l){var p=o[c];(!(gt.call(o,c)&&Jr(p,l))||l===t&&!(c in o))&&Ti(o,c,l)}function wu(o,c){for(var l=o.length;l--;)if(Jr(o[l][0],c))return l;return-1}function t1(o,c,l,p){return ts(o,function(b,_,O){c(p,b,l(b),O)}),p}function By(o,c){return o&&di(c,mn(c),o)}function n1(o,c){return o&&di(c,Qn(c),o)}function Ti(o,c,l){c=="__proto__"&&pu?pu(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function Rf(o,c){for(var l=-1,p=c.length,b=G(p),_=o==null;++l<p;)b[l]=_?t:dh(o,c[l]);return b}function Ls(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Cr(o,c,l,p,b,_){var O,R=c&m,U=c&I,re=c&P;if(l&&(O=b?l(o,p,b,_):l(o)),O!==t)return O;if(!Nt(o))return o;var ie=Ue(o);if(ie){if(O=z1(o),!R)return Hn(o,O)}else{var ue=Bn(o),ye=ue==lr||ue==Pi;if(ss(o))return nm(o,R);if(ue==dr||ue==xt||ye&&!b){if(O=U||ye?{}:_m(o),!R)return U?M1(o,n1(O,o)):B1(o,By(O,o))}else{if(!Et[ue])return b?o:{};O=j1(o,ue,R)}}_||(_=new Qr);var Se=_.get(o);if(Se)return Se;_.set(o,O),Qm(o)?o.forEach(function(Ce){O.add(Cr(Ce,c,l,Ce,o,_))}):Hm(o)&&o.forEach(function(Ce,Qe){O.set(Qe,Cr(Ce,c,l,Qe,o,_))});var Me=re?U?Jf:Qf:U?Qn:mn,ze=ie?t:Me(o);return Rr(ze||o,function(Ce,Qe){ze&&(Qe=Ce,Ce=o[Qe]),$a(O,Qe,Cr(Ce,c,l,Qe,o,_))}),O}function r1(o){var c=mn(o);return function(l){return My(l,o,c)}}function My(o,c,l){var p=l.length;if(o==null)return!p;for(o=_t(o);p--;){var b=l[p],_=c[b],O=o[b];if(O===t&&!(b in o)||!_(O))return!1}return!0}function Cy(o,c,l){if(typeof o!="function")throw new Br(a);return qa(function(){o.apply(t,l)},c)}function Ua(o,c,l,p){var b=-1,_=ru,O=!0,R=o.length,U=[],re=c.length;if(!R)return U;l&&(c=Bt(c,hr(l))),p?(_=mf,O=!1):c.length>=i&&(_=Ma,O=!1,c=new Cs(c));e:for(;++b<R;){var ie=o[b],ue=l==null?ie:l(ie);if(ie=p||ie!==0?ie:0,O&&ue===ue){for(var ye=re;ye--;)if(c[ye]===ue)continue e;U.push(ie)}else _(c,ue,p)||U.push(ie)}return U}var ts=am(li),Ly=am(Mf,!0);function i1(o,c){var l=!0;return ts(o,function(p,b,_){return l=!!c(p,b,_),l}),l}function _u(o,c,l){for(var p=-1,b=o.length;++p<b;){var _=o[p],O=c(_);if(O!=null&&(R===t?O===O&&!gr(O):l(O,R)))var R=O,U=_}return U}function s1(o,c,l,p){var b=o.length;for(l=Ve(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:Ve(p),p<0&&(p+=b),p=l>p?0:Xm(p);l<p;)o[l++]=c;return o}function Ky(o,c){var l=[];return ts(o,function(p,b,_){c(p,b,_)&&l.push(p)}),l}function An(o,c,l,p,b){var _=-1,O=o.length;for(l||(l=G1),b||(b=[]);++_<O;){var R=o[_];c>0&&l(R)?c>1?An(R,c-1,l,p,b):Xi(b,R):p||(b[b.length]=R)}return b}var Bf=cm(),Dy=cm(!0);function li(o,c){return o&&Bf(o,c,mn)}function Mf(o,c){return o&&Dy(o,c,mn)}function Au(o,c){return Ji(c,function(l){return Ci(o[l])})}function Ks(o,c){c=rs(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[fi(c[l++])];return l&&l==p?o:t}function Ny(o,c,l){var p=c(o);return Ue(o)?p:Xi(p,l(o))}function Un(o){return o==null?o===t?of:rf:Bs&&Bs in _t(o)?F1(o):eI(o)}function Cf(o,c){return o>c}function o1(o,c){return o!=null&&gt.call(o,c)}function a1(o,c){return o!=null&&c in _t(o)}function c1(o,c,l){return o>=Rn(c,l)&&o<cn(c,l)}function Lf(o,c,l){for(var p=l?mf:ru,b=o[0].length,_=o.length,O=_,R=G(_),U=1/0,re=[];O--;){var ie=o[O];O&&c&&(ie=Bt(ie,hr(c))),U=Rn(ie.length,U),R[O]=!l&&(c||b>=120&&ie.length>=120)?new Cs(O&&ie):t}ie=o[0];var ue=-1,ye=R[0];e:for(;++ue<b&&re.length<U;){var Se=ie[ue],Me=c?c(Se):Se;if(Se=l||Se!==0?Se:0,!(ye?Ma(ye,Me):p(re,Me,l))){for(O=_;--O;){var ze=R[O];if(!(ze?Ma(ze,Me):p(o[O],Me,l)))continue e}ye&&ye.push(Me),re.push(Se)}}return re}function u1(o,c,l,p){return li(o,function(b,_,O){c(p,l(b),_,O)}),p}function Fa(o,c,l){c=rs(c,o),o=Im(o,c);var p=o==null?o:o[fi(Kr(c))];return p==null?t:fr(p,o,l)}function $y(o){return Vt(o)&&Un(o)==xt}function l1(o){return Vt(o)&&Un(o)==v}function d1(o){return Vt(o)&&Un(o)==On}function Wa(o,c,l,p,b){return o===c?!0:o==null||c==null||!Vt(o)&&!Vt(c)?o!==o&&c!==c:f1(o,c,l,p,Wa,b)}function f1(o,c,l,p,b,_){var O=Ue(o),R=Ue(c),U=O?yt:Bn(o),re=R?yt:Bn(c);U=U==xt?dr:U,re=re==xt?dr:re;var ie=U==dr,ue=re==dr,ye=U==re;if(ye&&ss(o)){if(!ss(c))return!1;O=!0,ie=!1}if(ye&&!ie)return _||(_=new Qr),O||To(o)?bm(o,c,l,p,b,_):$1(o,c,U,l,p,b,_);if(!(l&M)){var Se=ie&&gt.call(o,"__wrapped__"),Me=ue&&gt.call(c,"__wrapped__");if(Se||Me){var ze=Se?o.value():o,Ce=Me?c.value():c;return _||(_=new Qr),b(ze,Ce,l,p,_)}}return ye?(_||(_=new Qr),U1(o,c,l,p,b,_)):!1}function h1(o){return Vt(o)&&Bn(o)==wn}function Kf(o,c,l,p){var b=l.length,_=b,O=!p;if(o==null)return!_;for(o=_t(o);b--;){var R=l[b];if(O&&R[2]?R[1]!==o[R[0]]:!(R[0]in o))return!1}for(;++b<_;){R=l[b];var U=R[0],re=o[U],ie=R[1];if(O&&R[2]){if(re===t&&!(U in o))return!1}else{var ue=new Qr;if(p)var ye=p(re,ie,U,o,c,ue);if(!(ye===t?Wa(ie,re,M|S,p,ue):ye))return!1}}return!0}function Uy(o){if(!Nt(o)||Y1(o))return!1;var c=Ci(o)?h0:rk;return c.test(Ns(o))}function p1(o){return Vt(o)&&Un(o)==Yi}function g1(o){return Vt(o)&&Bn(o)==xn}function y1(o){return Vt(o)&&$u(o.length)&&!!Tt[Un(o)]}function Fy(o){return typeof o=="function"?o:o==null?Jn:typeof o=="object"?Ue(o)?zy(o[0],o[1]):Vy(o):ub(o)}function Df(o){if(!ja(o))return v0(o);var c=[];for(var l in _t(o))gt.call(o,l)&&l!="constructor"&&c.push(l);return c}function m1(o){if(!Nt(o))return Z1(o);var c=ja(o),l=[];for(var p in o)p=="constructor"&&(c||!gt.call(o,p))||l.push(p);return l}function Nf(o,c){return o<c}function Wy(o,c){var l=-1,p=Yn(o)?G(o.length):[];return ts(o,function(b,_,O){p[++l]=c(b,_,O)}),p}function Vy(o){var c=Zf(o);return c.length==1&&c[0][2]?Sm(c[0][0],c[0][1]):function(l){return l===o||Kf(l,o,c)}}function zy(o,c){return th(o)&&Am(c)?Sm(fi(o),c):function(l){var p=dh(l,o);return p===t&&p===c?fh(l,o):Wa(c,p,M|S)}}function Su(o,c,l,p,b){o!==c&&Bf(c,function(_,O){if(b||(b=new Qr),Nt(_))b1(o,c,O,l,Su,p,b);else{var R=p?p(rh(o,O),_,O+"",o,c,b):t;R===t&&(R=_),Tf(o,O,R)}},Qn)}function b1(o,c,l,p,b,_,O){var R=rh(o,l),U=rh(c,l),re=O.get(U);if(re){Tf(o,l,re);return}var ie=_?_(R,U,l+"",o,c,O):t,ue=ie===t;if(ue){var ye=Ue(U),Se=!ye&&ss(U),Me=!ye&&!Se&&To(U);ie=U,ye||Se||Me?Ue(R)?ie=R:Yt(R)?ie=Hn(R):Se?(ue=!1,ie=nm(U,!0)):Me?(ue=!1,ie=rm(U,!0)):ie=[]:Ga(U)||$s(U)?(ie=R,$s(R)?ie=Zm(R):(!Nt(R)||Ci(R))&&(ie=_m(U))):ue=!1}ue&&(O.set(U,ie),b(ie,U,p,_,O),O.delete(U)),Tf(o,l,ie)}function jy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,Mi(c,l)?o[c]:t}function qy(o,c,l){c.length?c=Bt(c,function(_){return Ue(_)?function(O){return Ks(O,_.length===1?_[0]:_)}:_}):c=[Jn];var p=-1;c=Bt(c,hr(Re()));var b=Wy(o,function(_,O,R){var U=Bt(c,function(re){return re(_)});return{criteria:U,index:++p,value:_}});return jk(b,function(_,O){return R1(_,O,l)})}function v1(o,c){return Gy(o,c,function(l,p){return fh(o,p)})}function Gy(o,c,l){for(var p=-1,b=c.length,_={};++p<b;){var O=c[p],R=Ks(o,O);l(R,O)&&Va(_,rs(O,o),R)}return _}function w1(o){return function(c){return Ks(c,o)}}function $f(o,c,l,p){var b=p?zk:vo,_=-1,O=c.length,R=o;for(o===c&&(c=Hn(c)),l&&(R=Bt(o,hr(l)));++_<O;)for(var U=0,re=c[_],ie=l?l(re):re;(U=b(R,ie,U,p))>-1;)R!==o&&hu.call(R,U,1),hu.call(o,U,1);return o}function Hy(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==_){var _=b;Mi(b)?hu.call(o,b,1):Vf(o,b)}}return o}function Uf(o,c){return o+yu(Oy()*(c-o+1))}function _1(o,c,l,p){for(var b=-1,_=cn(gu((c-o)/(l||1)),0),O=G(_);_--;)O[p?_:++b]=o,o+=l;return O}function Ff(o,c){var l="";if(!o||c<1||c>Oe)return l;do c%2&&(l+=o),c=yu(c/2),c&&(o+=o);while(c);return l}function He(o,c){return ih(km(o,c,Jn),o+"")}function A1(o){return Ry(Ro(o))}function S1(o,c){var l=Ro(o);return Mu(l,Ls(c,0,l.length))}function Va(o,c,l,p){if(!Nt(o))return o;c=rs(c,o);for(var b=-1,_=c.length,O=_-1,R=o;R!=null&&++b<_;){var U=fi(c[b]),re=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=O){var ie=R[U];re=p?p(ie,U,R):t,re===t&&(re=Nt(ie)?ie:Mi(c[b+1])?[]:{})}$a(R,U,re),R=R[U]}return o}var Yy=mu?function(o,c){return mu.set(o,c),o}:Jn,k1=pu?function(o,c){return pu(o,"toString",{configurable:!0,enumerable:!1,value:ph(c),writable:!0})}:Jn;function I1(o){return Mu(Ro(o))}function Lr(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var _=G(b);++p<b;)_[p]=o[p+c];return _}function E1(o,c){var l;return ts(o,function(p,b,_){return l=c(p,b,_),!l}),!!l}function ku(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=on){for(;p<b;){var _=p+b>>>1,O=o[_];O!==null&&!gr(O)&&(l?O<=c:O<c)?p=_+1:b=_}return b}return Wf(o,c,Jn,l)}function Wf(o,c,l,p){var b=0,_=o==null?0:o.length;if(_===0)return 0;c=l(c);for(var O=c!==c,R=c===null,U=gr(c),re=c===t;b<_;){var ie=yu((b+_)/2),ue=l(o[ie]),ye=ue!==t,Se=ue===null,Me=ue===ue,ze=gr(ue);if(O)var Ce=p||Me;else re?Ce=Me&&(p||ye):R?Ce=Me&&ye&&(p||!Se):U?Ce=Me&&ye&&!Se&&(p||!ze):Se||ze?Ce=!1:Ce=p?ue<=c:ue<c;Ce?b=ie+1:_=ie}return Rn(_,Ge)}function Qy(o,c){for(var l=-1,p=o.length,b=0,_=[];++l<p;){var O=o[l],R=c?c(O):O;if(!l||!Jr(R,U)){var U=R;_[b++]=O===0?0:O}}return _}function Jy(o){return typeof o=="number"?o:gr(o)?Zt:+o}function pr(o){if(typeof o=="string")return o;if(Ue(o))return Bt(o,pr)+"";if(gr(o))return xy?xy.call(o):"";var c=o+"";return c=="0"&&1/o==-me?"-0":c}function ns(o,c,l){var p=-1,b=ru,_=o.length,O=!0,R=[],U=R;if(l)O=!1,b=mf;else if(_>=i){var re=c?null:D1(o);if(re)return su(re);O=!1,b=Ma,U=new Cs}else U=c?[]:R;e:for(;++p<_;){var ie=o[p],ue=c?c(ie):ie;if(ie=l||ie!==0?ie:0,O&&ue===ue){for(var ye=U.length;ye--;)if(U[ye]===ue)continue e;c&&U.push(ue),R.push(ie)}else b(U,ue,l)||(U!==R&&U.push(ue),R.push(ie))}return R}function Vf(o,c){return c=rs(c,o),o=Im(o,c),o==null||delete o[fi(Kr(c))]}function Xy(o,c,l,p){return Va(o,c,l(Ks(o,c)),p)}function Iu(o,c,l,p){for(var b=o.length,_=p?b:-1;(p?_--:++_<b)&&c(o[_],_,o););return l?Lr(o,p?0:_,p?_+1:b):Lr(o,p?_+1:0,p?b:_)}function Zy(o,c){var l=o;return l instanceof Xe&&(l=l.value()),bf(c,function(p,b){return b.func.apply(b.thisArg,Xi([p],b.args))},l)}function zf(o,c,l){var p=o.length;if(p<2)return p?ns(o[0]):[];for(var b=-1,_=G(p);++b<p;)for(var O=o[b],R=-1;++R<p;)R!=b&&(_[b]=Ua(_[b]||O,o[R],c,l));return ns(An(_,1),c,l)}function em(o,c,l){for(var p=-1,b=o.length,_=c.length,O={};++p<b;){var R=p<_?c[p]:t;l(O,o[p],R)}return O}function jf(o){return Yt(o)?o:[]}function qf(o){return typeof o=="function"?o:Jn}function rs(o,c){return Ue(o)?o:th(o,c)?[o]:xm(dt(o))}var P1=He;function is(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Lr(o,c,l)}var tm=p0||function(o){return _n.clearTimeout(o)};function nm(o,c){if(c)return o.slice();var l=o.length,p=Sy?Sy(l):new o.constructor(l);return o.copy(p),p}function Gf(o){var c=new o.constructor(o.byteLength);return new du(c).set(new du(o)),c}function O1(o,c){var l=c?Gf(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function x1(o){var c=new o.constructor(o.source,$g.exec(o));return c.lastIndex=o.lastIndex,c}function T1(o){return Na?_t(Na.call(o)):{}}function rm(o,c){var l=c?Gf(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function im(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,_=gr(o),O=c!==t,R=c===null,U=c===c,re=gr(c);if(!R&&!re&&!_&&o>c||_&&O&&U&&!R&&!re||p&&O&&U||!l&&U||!b)return 1;if(!p&&!_&&!re&&o<c||re&&l&&b&&!p&&!_||R&&l&&b||!O&&b||!U)return-1}return 0}function R1(o,c,l){for(var p=-1,b=o.criteria,_=c.criteria,O=b.length,R=l.length;++p<O;){var U=im(b[p],_[p]);if(U){if(p>=R)return U;var re=l[p];return U*(re=="desc"?-1:1)}}return o.index-c.index}function sm(o,c,l,p){for(var b=-1,_=o.length,O=l.length,R=-1,U=c.length,re=cn(_-O,0),ie=G(U+re),ue=!p;++R<U;)ie[R]=c[R];for(;++b<O;)(ue||b<_)&&(ie[l[b]]=o[b]);for(;re--;)ie[R++]=o[b++];return ie}function om(o,c,l,p){for(var b=-1,_=o.length,O=-1,R=l.length,U=-1,re=c.length,ie=cn(_-R,0),ue=G(ie+re),ye=!p;++b<ie;)ue[b]=o[b];for(var Se=b;++U<re;)ue[Se+U]=c[U];for(;++O<R;)(ye||b<_)&&(ue[Se+l[O]]=o[b++]);return ue}function Hn(o,c){var l=-1,p=o.length;for(c||(c=G(p));++l<p;)c[l]=o[l];return c}function di(o,c,l,p){var b=!l;l||(l={});for(var _=-1,O=c.length;++_<O;){var R=c[_],U=p?p(l[R],o[R],R,l,o):t;U===t&&(U=o[R]),b?Ti(l,R,U):$a(l,R,U)}return l}function B1(o,c){return di(o,eh(o),c)}function M1(o,c){return di(o,vm(o),c)}function Eu(o,c){return function(l,p){var b=Ue(l)?Nk:t1,_=c?c():{};return b(l,o,Re(p,2),_)}}function Po(o){return He(function(c,l){var p=-1,b=l.length,_=b>1?l[b-1]:t,O=b>2?l[2]:t;for(_=o.length>3&&typeof _=="function"?(b--,_):t,O&&Fn(l[0],l[1],O)&&(_=b<3?t:_,b=1),c=_t(c);++p<b;){var R=l[p];R&&o(c,R,p,_)}return c})}function am(o,c){return function(l,p){if(l==null)return l;if(!Yn(l))return o(l,p);for(var b=l.length,_=c?b:-1,O=_t(l);(c?_--:++_<b)&&p(O[_],_,O)!==!1;);return l}}function cm(o){return function(c,l,p){for(var b=-1,_=_t(c),O=p(c),R=O.length;R--;){var U=O[o?R:++b];if(l(_[U],U,_)===!1)break}return c}}function C1(o,c,l){var p=c&T,b=za(o);function _(){var O=this&&this!==_n&&this instanceof _?b:o;return O.apply(p?l:this,arguments)}return _}function um(o){return function(c){c=dt(c);var l=wo(c)?Yr(c):t,p=l?l[0]:c.charAt(0),b=l?is(l,1).join(""):c.slice(1);return p[o]()+b}}function Oo(o){return function(c){return bf(ab(ob(c).replace(kk,"")),o,"")}}function za(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=Eo(o.prototype),p=o.apply(l,c);return Nt(p)?p:l}}function L1(o,c,l){var p=za(o);function b(){for(var _=arguments.length,O=G(_),R=_,U=xo(b);R--;)O[R]=arguments[R];var re=_<3&&O[0]!==U&&O[_-1]!==U?[]:Zi(O,U);if(_-=re.length,_<l)return pm(o,c,Pu,b.placeholder,t,O,re,t,t,l-_);var ie=this&&this!==_n&&this instanceof b?p:o;return fr(ie,this,O)}return b}function lm(o){return function(c,l,p){var b=_t(c);if(!Yn(c)){var _=Re(l,3);c=mn(c),l=function(R){return _(b[R],R,b)}}var O=o(c,l,p);return O>-1?b[_?c[O]:O]:t}}function dm(o){return Bi(function(c){var l=c.length,p=l,b=Mr.prototype.thru;for(o&&c.reverse();p--;){var _=c[p];if(typeof _!="function")throw new Br(a);if(b&&!O&&Ru(_)=="wrapper")var O=new Mr([],!0)}for(p=O?p:l;++p<l;){_=c[p];var R=Ru(_),U=R=="wrapper"?Xf(_):t;U&&nh(U[0])&&U[1]==(D|ce|he|z)&&!U[4].length&&U[9]==1?O=O[Ru(U[0])].apply(O,U[3]):O=_.length==1&&nh(_)?O[R]():O.thru(_)}return function(){var re=arguments,ie=re[0];if(O&&re.length==1&&Ue(ie))return O.plant(ie).value();for(var ue=0,ye=l?c[ue].apply(this,re):ie;++ue<l;)ye=c[ue].call(this,ye);return ye}})}function Pu(o,c,l,p,b,_,O,R,U,re){var ie=c&D,ue=c&T,ye=c&C,Se=c&(ce|ae),Me=c&J,ze=ye?t:za(o);function Ce(){for(var Qe=arguments.length,Ze=G(Qe),yr=Qe;yr--;)Ze[yr]=arguments[yr];if(Se)var Wn=xo(Ce),mr=Gk(Ze,Wn);if(p&&(Ze=sm(Ze,p,b,Se)),_&&(Ze=om(Ze,_,O,Se)),Qe-=mr,Se&&Qe<re){var Qt=Zi(Ze,Wn);return pm(o,c,Pu,Ce.placeholder,l,Ze,Qt,R,U,re-Qe)}var Xr=ue?l:this,Ki=ye?Xr[o]:o;return Qe=Ze.length,R?Ze=tI(Ze,R):Me&&Qe>1&&Ze.reverse(),ie&&U<Qe&&(Ze.length=U),this&&this!==_n&&this instanceof Ce&&(Ki=ze||za(Ki)),Ki.apply(Xr,Ze)}return Ce}function fm(o,c){return function(l,p){return u1(l,o,c(p),{})}}function Ou(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=pr(l),p=pr(p)):(l=Jy(l),p=Jy(p)),b=o(l,p)}return b}}function Hf(o){return Bi(function(c){return c=Bt(c,hr(Re())),He(function(l){var p=this;return o(c,function(b){return fr(b,p,l)})})})}function xu(o,c){c=c===t?" ":pr(c);var l=c.length;if(l<2)return l?Ff(c,o):c;var p=Ff(c,gu(o/_o(c)));return wo(c)?is(Yr(p),0,o).join(""):p.slice(0,o)}function K1(o,c,l,p){var b=c&T,_=za(o);function O(){for(var R=-1,U=arguments.length,re=-1,ie=p.length,ue=G(ie+U),ye=this&&this!==_n&&this instanceof O?_:o;++re<ie;)ue[re]=p[re];for(;U--;)ue[re++]=arguments[++R];return fr(ye,b?l:this,ue)}return O}function hm(o){return function(c,l,p){return p&&typeof p!="number"&&Fn(c,l,p)&&(l=p=t),c=Li(c),l===t?(l=c,c=0):l=Li(l),p=p===t?c<l?1:-1:Li(p),_1(c,l,p,o)}}function Tu(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Dr(c),l=Dr(l)),o(c,l)}}function pm(o,c,l,p,b,_,O,R,U,re){var ie=c&ce,ue=ie?O:t,ye=ie?t:O,Se=ie?_:t,Me=ie?t:_;c|=ie?he:E,c&=~(ie?E:he),c&Q||(c&=~(T|C));var ze=[o,c,b,Se,ue,Me,ye,R,U,re],Ce=l.apply(t,ze);return nh(o)&&Em(Ce,ze),Ce.placeholder=p,Pm(Ce,o,c)}function Yf(o){var c=an[o];return function(l,p){if(l=Dr(l),p=p==null?0:Rn(Ve(p),292),p&&Py(l)){var b=(dt(l)+"e").split("e"),_=c(b[0]+"e"+(+b[1]+p));return b=(dt(_)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var D1=ko&&1/su(new ko([,-0]))[1]==me?function(o){return new ko(o)}:mh;function gm(o){return function(c){var l=Bn(c);return l==wn?If(c):l==xn?e0(c):qk(c,o(c))}}function Ri(o,c,l,p,b,_,O,R){var U=c&C;if(!U&&typeof o!="function")throw new Br(a);var re=p?p.length:0;if(re||(c&=~(he|E),p=b=t),O=O===t?O:cn(Ve(O),0),R=R===t?R:Ve(R),re-=b?b.length:0,c&E){var ie=p,ue=b;p=b=t}var ye=U?t:Xf(o),Se=[o,c,l,p,b,ie,ue,_,O,R];if(ye&&X1(Se,ye),o=Se[0],c=Se[1],l=Se[2],p=Se[3],b=Se[4],R=Se[9]=Se[9]===t?U?0:o.length:cn(Se[9]-re,0),!R&&c&(ce|ae)&&(c&=~(ce|ae)),!c||c==T)var Me=C1(o,c,l);else c==ce||c==ae?Me=L1(o,c,R):(c==he||c==(T|he))&&!b.length?Me=K1(o,c,l,p):Me=Pu.apply(t,Se);var ze=ye?Yy:Em;return Pm(ze(Me,Se),o,c)}function ym(o,c,l,p){return o===t||Jr(o,So[l])&&!gt.call(p,l)?c:o}function mm(o,c,l,p,b,_){return Nt(o)&&Nt(c)&&(_.set(c,o),Su(o,c,t,mm,_),_.delete(c)),o}function N1(o){return Ga(o)?t:o}function bm(o,c,l,p,b,_){var O=l&M,R=o.length,U=c.length;if(R!=U&&!(O&&U>R))return!1;var re=_.get(o),ie=_.get(c);if(re&&ie)return re==c&&ie==o;var ue=-1,ye=!0,Se=l&S?new Cs:t;for(_.set(o,c),_.set(c,o);++ue<R;){var Me=o[ue],ze=c[ue];if(p)var Ce=O?p(ze,Me,ue,c,o,_):p(Me,ze,ue,o,c,_);if(Ce!==t){if(Ce)continue;ye=!1;break}if(Se){if(!vf(c,function(Qe,Ze){if(!Ma(Se,Ze)&&(Me===Qe||b(Me,Qe,l,p,_)))return Se.push(Ze)})){ye=!1;break}}else if(!(Me===ze||b(Me,ze,l,p,_))){ye=!1;break}}return _.delete(o),_.delete(c),ye}function $1(o,c,l,p,b,_,O){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!_(new du(o),new du(c)));case Ht:case On:case Ts:return Jr(+o,+c);case xr:return o.name==c.name&&o.message==c.message;case Yi:case Tn:return o==c+"";case wn:var R=If;case xn:var U=p&M;if(R||(R=su),o.size!=c.size&&!U)return!1;var re=O.get(o);if(re)return re==c;p|=S,O.set(o,c);var ie=bm(R(o),R(c),p,b,_,O);return O.delete(o),ie;case Qi:if(Na)return Na.call(o)==Na.call(c)}return!1}function U1(o,c,l,p,b,_){var O=l&M,R=Qf(o),U=R.length,re=Qf(c),ie=re.length;if(U!=ie&&!O)return!1;for(var ue=U;ue--;){var ye=R[ue];if(!(O?ye in c:gt.call(c,ye)))return!1}var Se=_.get(o),Me=_.get(c);if(Se&&Me)return Se==c&&Me==o;var ze=!0;_.set(o,c),_.set(c,o);for(var Ce=O;++ue<U;){ye=R[ue];var Qe=o[ye],Ze=c[ye];if(p)var yr=O?p(Ze,Qe,ye,c,o,_):p(Qe,Ze,ye,o,c,_);if(!(yr===t?Qe===Ze||b(Qe,Ze,l,p,_):yr)){ze=!1;break}Ce||(Ce=ye=="constructor")}if(ze&&!Ce){var Wn=o.constructor,mr=c.constructor;Wn!=mr&&"constructor"in o&&"constructor"in c&&!(typeof Wn=="function"&&Wn instanceof Wn&&typeof mr=="function"&&mr instanceof mr)&&(ze=!1)}return _.delete(o),_.delete(c),ze}function Bi(o){return ih(km(o,t,Mm),o+"")}function Qf(o){return Ny(o,mn,eh)}function Jf(o){return Ny(o,Qn,vm)}var Xf=mu?function(o){return mu.get(o)}:mh;function Ru(o){for(var c=o.name+"",l=Io[c],p=gt.call(Io,c)?l.length:0;p--;){var b=l[p],_=b.func;if(_==null||_==o)return b.name}return c}function xo(o){var c=gt.call(w,"placeholder")?w:o;return c.placeholder}function Re(){var o=w.iteratee||gh;return o=o===gh?Fy:o,arguments.length?o(arguments[0],arguments[1]):o}function Bu(o,c){var l=o.__data__;return H1(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Zf(o){for(var c=mn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,Am(b)]}return c}function Ds(o,c){var l=Jk(o,c);return Uy(l)?l:t}function F1(o){var c=gt.call(o,Bs),l=o[Bs];try{o[Bs]=t;var p=!0}catch{}var b=uu.call(o);return p&&(c?o[Bs]=l:delete o[Bs]),b}var eh=Pf?function(o){return o==null?[]:(o=_t(o),Ji(Pf(o),function(c){return Iy.call(o,c)}))}:bh,vm=Pf?function(o){for(var c=[];o;)Xi(c,eh(o)),o=fu(o);return c}:bh,Bn=Un;(Of&&Bn(new Of(new ArrayBuffer(1)))!=g||La&&Bn(new La)!=wn||xf&&Bn(xf.resolve())!=Zc||ko&&Bn(new ko)!=xn||Ka&&Bn(new Ka)!=Gn)&&(Bn=function(o){var c=Un(o),l=c==dr?o.constructor:t,p=l?Ns(l):"";if(p)switch(p){case S0:return g;case k0:return wn;case I0:return Zc;case E0:return xn;case P0:return Gn}return c});function W1(o,c,l){for(var p=-1,b=l.length;++p<b;){var _=l[p],O=_.size;switch(_.type){case"drop":o+=O;break;case"dropRight":c-=O;break;case"take":c=Rn(c,o+O);break;case"takeRight":o=cn(o,c-O);break}}return{start:o,end:c}}function V1(o){var c=o.match(YS);return c?c[1].split(QS):[]}function wm(o,c,l){c=rs(c,o);for(var p=-1,b=c.length,_=!1;++p<b;){var O=fi(c[p]);if(!(_=o!=null&&l(o,O)))break;o=o[O]}return _||++p!=b?_:(b=o==null?0:o.length,!!b&&$u(b)&&Mi(O,b)&&(Ue(o)||$s(o)))}function z1(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&gt.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function _m(o){return typeof o.constructor=="function"&&!ja(o)?Eo(fu(o)):{}}function j1(o,c,l){var p=o.constructor;switch(c){case v:return Gf(o);case Ht:case On:return new p(+o);case g:return O1(o,l);case y:case k:case L:case j:case ee:case Fe:case kt:case mt:case It:return rm(o,l);case wn:return new p;case Ts:case Tn:return new p(o);case Yi:return x1(o);case xn:return new p;case Qi:return T1(o)}}function q1(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(HS,`{
/* [wrapped with `+c+`] */
`)}function G1(o){return Ue(o)||$s(o)||!!(Ey&&o&&o[Ey])}function Mi(o,c){var l=typeof o;return c=c??Oe,!!c&&(l=="number"||l!="symbol"&&sk.test(o))&&o>-1&&o%1==0&&o<c}function Fn(o,c,l){if(!Nt(l))return!1;var p=typeof c;return(p=="number"?Yn(l)&&Mi(c,l.length):p=="string"&&c in l)?Jr(l[c],o):!1}function th(o,c){if(Ue(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||gr(o)?!0:zS.test(o)||!VS.test(o)||c!=null&&o in _t(c)}function H1(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function nh(o){var c=Ru(o),l=w[c];if(typeof l!="function"||!(c in Xe.prototype))return!1;if(o===l)return!0;var p=Xf(l);return!!p&&o===p[0]}function Y1(o){return!!Ay&&Ay in o}var Q1=au?Ci:vh;function ja(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||So;return o===l}function Am(o){return o===o&&!Nt(o)}function Sm(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in _t(l))}}function J1(o){var c=Du(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function X1(o,c){var l=o[1],p=c[1],b=l|p,_=b<(T|C|D),O=p==D&&l==ce||p==D&&l==z&&o[7].length<=c[8]||p==(D|z)&&c[7].length<=c[8]&&l==ce;if(!(_||O))return o;p&T&&(o[2]=c[2],b|=l&T?0:Q);var R=c[3];if(R){var U=o[3];o[3]=U?sm(U,R,c[4]):R,o[4]=U?Zi(o[3],f):c[4]}return R=c[5],R&&(U=o[5],o[5]=U?om(U,R,c[6]):R,o[6]=U?Zi(o[5],f):c[6]),R=c[7],R&&(o[7]=R),p&D&&(o[8]=o[8]==null?c[8]:Rn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function Z1(o){var c=[];if(o!=null)for(var l in _t(o))c.push(l);return c}function eI(o){return uu.call(o)}function km(o,c,l){return c=cn(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,_=cn(p.length-c,0),O=G(_);++b<_;)O[b]=p[c+b];b=-1;for(var R=G(c+1);++b<c;)R[b]=p[b];return R[c]=l(O),fr(o,this,R)}}function Im(o,c){return c.length<2?o:Ks(o,Lr(c,0,-1))}function tI(o,c){for(var l=o.length,p=Rn(c.length,l),b=Hn(o);p--;){var _=c[p];o[p]=Mi(_,l)?b[_]:t}return o}function rh(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var Em=Om(Yy),qa=y0||function(o,c){return _n.setTimeout(o,c)},ih=Om(k1);function Pm(o,c,l){var p=c+"";return ih(o,q1(p,nI(V1(p),l)))}function Om(o){var c=0,l=0;return function(){var p=w0(),b=x-(p-l);if(l=p,b>0){if(++c>=ne)return arguments[0]}else c=0;return o.apply(t,arguments)}}function Mu(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var _=Uf(l,b),O=o[_];o[_]=o[l],o[l]=O}return o.length=c,o}var xm=J1(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(jS,function(l,p,b,_){c.push(b?_.replace(ZS,"$1"):p||l)}),c});function fi(o){if(typeof o=="string"||gr(o))return o;var c=o+"";return c=="0"&&1/o==-me?"-0":c}function Ns(o){if(o!=null){try{return cu.call(o)}catch{}try{return o+""}catch{}}return""}function nI(o,c){return Rr(yn,function(l){var p="_."+l[0];c&l[1]&&!ru(o,p)&&o.push(p)}),o.sort()}function Tm(o){if(o instanceof Xe)return o.clone();var c=new Mr(o.__wrapped__,o.__chain__);return c.__actions__=Hn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function rI(o,c,l){(l?Fn(o,c,l):c===t)?c=1:c=cn(Ve(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,_=0,O=G(gu(p/c));b<p;)O[_++]=Lr(o,b,b+=c);return O}function iI(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var _=o[c];_&&(b[p++]=_)}return b}function sI(){var o=arguments.length;if(!o)return[];for(var c=G(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return Xi(Ue(l)?Hn(l):[l],An(c,1))}var oI=He(function(o,c){return Yt(o)?Ua(o,An(c,1,Yt,!0)):[]}),aI=He(function(o,c){var l=Kr(c);return Yt(l)&&(l=t),Yt(o)?Ua(o,An(c,1,Yt,!0),Re(l,2)):[]}),cI=He(function(o,c){var l=Kr(c);return Yt(l)&&(l=t),Yt(o)?Ua(o,An(c,1,Yt,!0),t,l):[]});function uI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),Lr(o,c<0?0:c,p)):[]}function lI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),c=p-c,Lr(o,0,c<0?0:c)):[]}function dI(o,c){return o&&o.length?Iu(o,Re(c,3),!0,!0):[]}function fI(o,c){return o&&o.length?Iu(o,Re(c,3),!0):[]}function hI(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Fn(o,c,l)&&(l=0,p=b),s1(o,c,l,p)):[]}function Rm(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ve(l);return b<0&&(b=cn(p+b,0)),iu(o,Re(c,3),b)}function Bm(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=Ve(l),b=l<0?cn(p+b,0):Rn(b,p-1)),iu(o,Re(c,3),b,!0)}function Mm(o){var c=o==null?0:o.length;return c?An(o,1):[]}function pI(o){var c=o==null?0:o.length;return c?An(o,me):[]}function gI(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:Ve(c),An(o,c)):[]}function yI(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function Cm(o){return o&&o.length?o[0]:t}function mI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ve(l);return b<0&&(b=cn(p+b,0)),vo(o,c,b)}function bI(o){var c=o==null?0:o.length;return c?Lr(o,0,-1):[]}var vI=He(function(o){var c=Bt(o,jf);return c.length&&c[0]===o[0]?Lf(c):[]}),wI=He(function(o){var c=Kr(o),l=Bt(o,jf);return c===Kr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?Lf(l,Re(c,2)):[]}),_I=He(function(o){var c=Kr(o),l=Bt(o,jf);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?Lf(l,t,c):[]});function AI(o,c){return o==null?"":b0.call(o,c)}function Kr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function SI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=Ve(l),b=b<0?cn(p+b,0):Rn(b,p-1)),c===c?n0(o,c,b):iu(o,py,b,!0)}function kI(o,c){return o&&o.length?jy(o,Ve(c)):t}var II=He(Lm);function Lm(o,c){return o&&o.length&&c&&c.length?$f(o,c):o}function EI(o,c,l){return o&&o.length&&c&&c.length?$f(o,c,Re(l,2)):o}function PI(o,c,l){return o&&o.length&&c&&c.length?$f(o,c,t,l):o}var OI=Bi(function(o,c){var l=o==null?0:o.length,p=Rf(o,c);return Hy(o,Bt(c,function(b){return Mi(b,l)?+b:b}).sort(im)),p});function xI(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],_=o.length;for(c=Re(c,3);++p<_;){var O=o[p];c(O,p,o)&&(l.push(O),b.push(p))}return Hy(o,b),l}function sh(o){return o==null?o:A0.call(o)}function TI(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Fn(o,c,l)?(c=0,l=p):(c=c==null?0:Ve(c),l=l===t?p:Ve(l)),Lr(o,c,l)):[]}function RI(o,c){return ku(o,c)}function BI(o,c,l){return Wf(o,c,Re(l,2))}function MI(o,c){var l=o==null?0:o.length;if(l){var p=ku(o,c);if(p<l&&Jr(o[p],c))return p}return-1}function CI(o,c){return ku(o,c,!0)}function LI(o,c,l){return Wf(o,c,Re(l,2),!0)}function KI(o,c){var l=o==null?0:o.length;if(l){var p=ku(o,c,!0)-1;if(Jr(o[p],c))return p}return-1}function DI(o){return o&&o.length?Qy(o):[]}function NI(o,c){return o&&o.length?Qy(o,Re(c,2)):[]}function $I(o){var c=o==null?0:o.length;return c?Lr(o,1,c):[]}function UI(o,c,l){return o&&o.length?(c=l||c===t?1:Ve(c),Lr(o,0,c<0?0:c)):[]}function FI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),c=p-c,Lr(o,c<0?0:c,p)):[]}function WI(o,c){return o&&o.length?Iu(o,Re(c,3),!1,!0):[]}function VI(o,c){return o&&o.length?Iu(o,Re(c,3)):[]}var zI=He(function(o){return ns(An(o,1,Yt,!0))}),jI=He(function(o){var c=Kr(o);return Yt(c)&&(c=t),ns(An(o,1,Yt,!0),Re(c,2))}),qI=He(function(o){var c=Kr(o);return c=typeof c=="function"?c:t,ns(An(o,1,Yt,!0),t,c)});function GI(o){return o&&o.length?ns(o):[]}function HI(o,c){return o&&o.length?ns(o,Re(c,2)):[]}function YI(o,c){return c=typeof c=="function"?c:t,o&&o.length?ns(o,t,c):[]}function oh(o){if(!(o&&o.length))return[];var c=0;return o=Ji(o,function(l){if(Yt(l))return c=cn(l.length,c),!0}),Sf(c,function(l){return Bt(o,wf(l))})}function Km(o,c){if(!(o&&o.length))return[];var l=oh(o);return c==null?l:Bt(l,function(p){return fr(c,t,p)})}var QI=He(function(o,c){return Yt(o)?Ua(o,c):[]}),JI=He(function(o){return zf(Ji(o,Yt))}),XI=He(function(o){var c=Kr(o);return Yt(c)&&(c=t),zf(Ji(o,Yt),Re(c,2))}),ZI=He(function(o){var c=Kr(o);return c=typeof c=="function"?c:t,zf(Ji(o,Yt),t,c)}),eE=He(oh);function tE(o,c){return em(o||[],c||[],$a)}function nE(o,c){return em(o||[],c||[],Va)}var rE=He(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,Km(o,l)});function Dm(o){var c=w(o);return c.__chain__=!0,c}function iE(o,c){return c(o),o}function Cu(o,c){return c(o)}var sE=Bi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(_){return Rf(_,o)};return c>1||this.__actions__.length||!(p instanceof Xe)||!Mi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:Cu,args:[b],thisArg:t}),new Mr(p,this.__chain__).thru(function(_){return c&&!_.length&&_.push(t),_}))});function oE(){return Dm(this)}function aE(){return new Mr(this.value(),this.__chain__)}function cE(){this.__values__===t&&(this.__values__=Jm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function uE(){return this}function lE(o){for(var c,l=this;l instanceof vu;){var p=Tm(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function dE(){var o=this.__wrapped__;if(o instanceof Xe){var c=o;return this.__actions__.length&&(c=new Xe(this)),c=c.reverse(),c.__actions__.push({func:Cu,args:[sh],thisArg:t}),new Mr(c,this.__chain__)}return this.thru(sh)}function fE(){return Zy(this.__wrapped__,this.__actions__)}var hE=Eu(function(o,c,l){gt.call(o,l)?++o[l]:Ti(o,l,1)});function pE(o,c,l){var p=Ue(o)?fy:i1;return l&&Fn(o,c,l)&&(c=t),p(o,Re(c,3))}function gE(o,c){var l=Ue(o)?Ji:Ky;return l(o,Re(c,3))}var yE=lm(Rm),mE=lm(Bm);function bE(o,c){return An(Lu(o,c),1)}function vE(o,c){return An(Lu(o,c),me)}function wE(o,c,l){return l=l===t?1:Ve(l),An(Lu(o,c),l)}function Nm(o,c){var l=Ue(o)?Rr:ts;return l(o,Re(c,3))}function $m(o,c){var l=Ue(o)?$k:Ly;return l(o,Re(c,3))}var _E=Eu(function(o,c,l){gt.call(o,l)?o[l].push(c):Ti(o,l,[c])});function AE(o,c,l,p){o=Yn(o)?o:Ro(o),l=l&&!p?Ve(l):0;var b=o.length;return l<0&&(l=cn(b+l,0)),Uu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&vo(o,c,l)>-1}var SE=He(function(o,c,l){var p=-1,b=typeof c=="function",_=Yn(o)?G(o.length):[];return ts(o,function(O){_[++p]=b?fr(c,O,l):Fa(O,c,l)}),_}),kE=Eu(function(o,c,l){Ti(o,l,c)});function Lu(o,c){var l=Ue(o)?Bt:Wy;return l(o,Re(c,3))}function IE(o,c,l,p){return o==null?[]:(Ue(c)||(c=c==null?[]:[c]),l=p?t:l,Ue(l)||(l=l==null?[]:[l]),qy(o,c,l))}var EE=Eu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function PE(o,c,l){var p=Ue(o)?bf:yy,b=arguments.length<3;return p(o,Re(c,4),l,b,ts)}function OE(o,c,l){var p=Ue(o)?Uk:yy,b=arguments.length<3;return p(o,Re(c,4),l,b,Ly)}function xE(o,c){var l=Ue(o)?Ji:Ky;return l(o,Nu(Re(c,3)))}function TE(o){var c=Ue(o)?Ry:A1;return c(o)}function RE(o,c,l){(l?Fn(o,c,l):c===t)?c=1:c=Ve(c);var p=Ue(o)?Z0:S1;return p(o,c)}function BE(o){var c=Ue(o)?e1:I1;return c(o)}function ME(o){if(o==null)return 0;if(Yn(o))return Uu(o)?_o(o):o.length;var c=Bn(o);return c==wn||c==xn?o.size:Df(o).length}function CE(o,c,l){var p=Ue(o)?vf:E1;return l&&Fn(o,c,l)&&(c=t),p(o,Re(c,3))}var LE=He(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Fn(o,c[0],c[1])?c=[]:l>2&&Fn(c[0],c[1],c[2])&&(c=[c[0]]),qy(o,An(c,1),[])}),Ku=g0||function(){return _n.Date.now()};function KE(o,c){if(typeof c!="function")throw new Br(a);return o=Ve(o),function(){if(--o<1)return c.apply(this,arguments)}}function Um(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,Ri(o,D,t,t,t,t,c)}function Fm(o,c){var l;if(typeof c!="function")throw new Br(a);return o=Ve(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var ah=He(function(o,c,l){var p=T;if(l.length){var b=Zi(l,xo(ah));p|=he}return Ri(o,p,c,l,b)}),Wm=He(function(o,c,l){var p=T|C;if(l.length){var b=Zi(l,xo(Wm));p|=he}return Ri(c,p,o,l,b)});function Vm(o,c,l){c=l?t:c;var p=Ri(o,ce,t,t,t,t,t,c);return p.placeholder=Vm.placeholder,p}function zm(o,c,l){c=l?t:c;var p=Ri(o,ae,t,t,t,t,t,c);return p.placeholder=zm.placeholder,p}function jm(o,c,l){var p,b,_,O,R,U,re=0,ie=!1,ue=!1,ye=!0;if(typeof o!="function")throw new Br(a);c=Dr(c)||0,Nt(l)&&(ie=!!l.leading,ue="maxWait"in l,_=ue?cn(Dr(l.maxWait)||0,c):_,ye="trailing"in l?!!l.trailing:ye);function Se(Qt){var Xr=p,Ki=b;return p=b=t,re=Qt,O=o.apply(Ki,Xr),O}function Me(Qt){return re=Qt,R=qa(Qe,c),ie?Se(Qt):O}function ze(Qt){var Xr=Qt-U,Ki=Qt-re,lb=c-Xr;return ue?Rn(lb,_-Ki):lb}function Ce(Qt){var Xr=Qt-U,Ki=Qt-re;return U===t||Xr>=c||Xr<0||ue&&Ki>=_}function Qe(){var Qt=Ku();if(Ce(Qt))return Ze(Qt);R=qa(Qe,ze(Qt))}function Ze(Qt){return R=t,ye&&p?Se(Qt):(p=b=t,O)}function yr(){R!==t&&tm(R),re=0,p=U=b=R=t}function Wn(){return R===t?O:Ze(Ku())}function mr(){var Qt=Ku(),Xr=Ce(Qt);if(p=arguments,b=this,U=Qt,Xr){if(R===t)return Me(U);if(ue)return tm(R),R=qa(Qe,c),Se(U)}return R===t&&(R=qa(Qe,c)),O}return mr.cancel=yr,mr.flush=Wn,mr}var DE=He(function(o,c){return Cy(o,1,c)}),NE=He(function(o,c,l){return Cy(o,Dr(c)||0,l)});function $E(o){return Ri(o,J)}function Du(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Br(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],_=l.cache;if(_.has(b))return _.get(b);var O=o.apply(this,p);return l.cache=_.set(b,O)||_,O};return l.cache=new(Du.Cache||xi),l}Du.Cache=xi;function Nu(o){if(typeof o!="function")throw new Br(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function UE(o){return Fm(2,o)}var FE=P1(function(o,c){c=c.length==1&&Ue(c[0])?Bt(c[0],hr(Re())):Bt(An(c,1),hr(Re()));var l=c.length;return He(function(p){for(var b=-1,_=Rn(p.length,l);++b<_;)p[b]=c[b].call(this,p[b]);return fr(o,this,p)})}),ch=He(function(o,c){var l=Zi(c,xo(ch));return Ri(o,he,t,c,l)}),qm=He(function(o,c){var l=Zi(c,xo(qm));return Ri(o,E,t,c,l)}),WE=Bi(function(o,c){return Ri(o,z,t,t,t,c)});function VE(o,c){if(typeof o!="function")throw new Br(a);return c=c===t?c:Ve(c),He(o,c)}function zE(o,c){if(typeof o!="function")throw new Br(a);return c=c==null?0:cn(Ve(c),0),He(function(l){var p=l[c],b=is(l,0,c);return p&&Xi(b,p),fr(o,this,b)})}function jE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new Br(a);return Nt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),jm(o,c,{leading:p,maxWait:c,trailing:b})}function qE(o){return Um(o,1)}function GE(o,c){return ch(qf(c),o)}function HE(){if(!arguments.length)return[];var o=arguments[0];return Ue(o)?o:[o]}function YE(o){return Cr(o,P)}function QE(o,c){return c=typeof c=="function"?c:t,Cr(o,P,c)}function JE(o){return Cr(o,m|P)}function XE(o,c){return c=typeof c=="function"?c:t,Cr(o,m|P,c)}function ZE(o,c){return c==null||My(o,c,mn(c))}function Jr(o,c){return o===c||o!==o&&c!==c}var eP=Tu(Cf),tP=Tu(function(o,c){return o>=c}),$s=$y(function(){return arguments}())?$y:function(o){return Vt(o)&&gt.call(o,"callee")&&!Iy.call(o,"callee")},Ue=G.isArray,nP=oy?hr(oy):l1;function Yn(o){return o!=null&&$u(o.length)&&!Ci(o)}function Yt(o){return Vt(o)&&Yn(o)}function rP(o){return o===!0||o===!1||Vt(o)&&Un(o)==Ht}var ss=m0||vh,iP=ay?hr(ay):d1;function sP(o){return Vt(o)&&o.nodeType===1&&!Ga(o)}function oP(o){if(o==null)return!0;if(Yn(o)&&(Ue(o)||typeof o=="string"||typeof o.splice=="function"||ss(o)||To(o)||$s(o)))return!o.length;var c=Bn(o);if(c==wn||c==xn)return!o.size;if(ja(o))return!Df(o).length;for(var l in o)if(gt.call(o,l))return!1;return!0}function aP(o,c){return Wa(o,c)}function cP(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?Wa(o,c,t,l):!!p}function uh(o){if(!Vt(o))return!1;var c=Un(o);return c==xr||c==ui||typeof o.message=="string"&&typeof o.name=="string"&&!Ga(o)}function uP(o){return typeof o=="number"&&Py(o)}function Ci(o){if(!Nt(o))return!1;var c=Un(o);return c==lr||c==Pi||c==Or||c==sf}function Gm(o){return typeof o=="number"&&o==Ve(o)}function $u(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Oe}function Nt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Vt(o){return o!=null&&typeof o=="object"}var Hm=cy?hr(cy):h1;function lP(o,c){return o===c||Kf(o,c,Zf(c))}function dP(o,c,l){return l=typeof l=="function"?l:t,Kf(o,c,Zf(c),l)}function fP(o){return Ym(o)&&o!=+o}function hP(o){if(Q1(o))throw new Ne(s);return Uy(o)}function pP(o){return o===null}function gP(o){return o==null}function Ym(o){return typeof o=="number"||Vt(o)&&Un(o)==Ts}function Ga(o){if(!Vt(o)||Un(o)!=dr)return!1;var c=fu(o);if(c===null)return!0;var l=gt.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&cu.call(l)==d0}var lh=uy?hr(uy):p1;function yP(o){return Gm(o)&&o>=-Oe&&o<=Oe}var Qm=ly?hr(ly):g1;function Uu(o){return typeof o=="string"||!Ue(o)&&Vt(o)&&Un(o)==Tn}function gr(o){return typeof o=="symbol"||Vt(o)&&Un(o)==Qi}var To=dy?hr(dy):y1;function mP(o){return o===t}function bP(o){return Vt(o)&&Bn(o)==Gn}function vP(o){return Vt(o)&&Un(o)==af}var wP=Tu(Nf),_P=Tu(function(o,c){return o<=c});function Jm(o){if(!o)return[];if(Yn(o))return Uu(o)?Yr(o):Hn(o);if(Ca&&o[Ca])return Zk(o[Ca]());var c=Bn(o),l=c==wn?If:c==xn?su:Ro;return l(o)}function Li(o){if(!o)return o===0?o:0;if(o=Dr(o),o===me||o===-me){var c=o<0?-1:1;return c*Xt}return o===o?o:0}function Ve(o){var c=Li(o),l=c%1;return c===c?l?c-l:c:0}function Xm(o){return o?Ls(Ve(o),0,Ae):0}function Dr(o){if(typeof o=="number")return o;if(gr(o))return Zt;if(Nt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Nt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=my(o);var l=nk.test(o);return l||ik.test(o)?Kk(o.slice(2),l?2:8):tk.test(o)?Zt:+o}function Zm(o){return di(o,Qn(o))}function AP(o){return o?Ls(Ve(o),-Oe,Oe):o===0?o:0}function dt(o){return o==null?"":pr(o)}var SP=Po(function(o,c){if(ja(c)||Yn(c)){di(c,mn(c),o);return}for(var l in c)gt.call(c,l)&&$a(o,l,c[l])}),eb=Po(function(o,c){di(c,Qn(c),o)}),Fu=Po(function(o,c,l,p){di(c,Qn(c),o,p)}),kP=Po(function(o,c,l,p){di(c,mn(c),o,p)}),IP=Bi(Rf);function EP(o,c){var l=Eo(o);return c==null?l:By(l,c)}var PP=He(function(o,c){o=_t(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Fn(c[0],c[1],b)&&(p=1);++l<p;)for(var _=c[l],O=Qn(_),R=-1,U=O.length;++R<U;){var re=O[R],ie=o[re];(ie===t||Jr(ie,So[re])&&!gt.call(o,re))&&(o[re]=_[re])}return o}),OP=He(function(o){return o.push(t,mm),fr(tb,t,o)});function xP(o,c){return hy(o,Re(c,3),li)}function TP(o,c){return hy(o,Re(c,3),Mf)}function RP(o,c){return o==null?o:Bf(o,Re(c,3),Qn)}function BP(o,c){return o==null?o:Dy(o,Re(c,3),Qn)}function MP(o,c){return o&&li(o,Re(c,3))}function CP(o,c){return o&&Mf(o,Re(c,3))}function LP(o){return o==null?[]:Au(o,mn(o))}function KP(o){return o==null?[]:Au(o,Qn(o))}function dh(o,c,l){var p=o==null?t:Ks(o,c);return p===t?l:p}function DP(o,c){return o!=null&&wm(o,c,o1)}function fh(o,c){return o!=null&&wm(o,c,a1)}var NP=fm(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=uu.call(c)),o[c]=l},ph(Jn)),$P=fm(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=uu.call(c)),gt.call(o,c)?o[c].push(l):o[c]=[l]},Re),UP=He(Fa);function mn(o){return Yn(o)?Ty(o):Df(o)}function Qn(o){return Yn(o)?Ty(o,!0):m1(o)}function FP(o,c){var l={};return c=Re(c,3),li(o,function(p,b,_){Ti(l,c(p,b,_),p)}),l}function WP(o,c){var l={};return c=Re(c,3),li(o,function(p,b,_){Ti(l,b,c(p,b,_))}),l}var VP=Po(function(o,c,l){Su(o,c,l)}),tb=Po(function(o,c,l,p){Su(o,c,l,p)}),zP=Bi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Bt(c,function(_){return _=rs(_,o),p||(p=_.length>1),_}),di(o,Jf(o),l),p&&(l=Cr(l,m|I|P,N1));for(var b=c.length;b--;)Vf(l,c[b]);return l});function jP(o,c){return nb(o,Nu(Re(c)))}var qP=Bi(function(o,c){return o==null?{}:v1(o,c)});function nb(o,c){if(o==null)return{};var l=Bt(Jf(o),function(p){return[p]});return c=Re(c),Gy(o,l,function(p,b){return c(p,b[0])})}function GP(o,c,l){c=rs(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var _=o==null?t:o[fi(c[p])];_===t&&(p=b,_=l),o=Ci(_)?_.call(o):_}return o}function HP(o,c,l){return o==null?o:Va(o,c,l)}function YP(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Va(o,c,l,p)}var rb=gm(mn),ib=gm(Qn);function QP(o,c,l){var p=Ue(o),b=p||ss(o)||To(o);if(c=Re(c,4),l==null){var _=o&&o.constructor;b?l=p?new _:[]:Nt(o)?l=Ci(_)?Eo(fu(o)):{}:l={}}return(b?Rr:li)(o,function(O,R,U){return c(l,O,R,U)}),l}function JP(o,c){return o==null?!0:Vf(o,c)}function XP(o,c,l){return o==null?o:Xy(o,c,qf(l))}function ZP(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Xy(o,c,qf(l),p)}function Ro(o){return o==null?[]:kf(o,mn(o))}function eO(o){return o==null?[]:kf(o,Qn(o))}function tO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Dr(l),l=l===l?l:0),c!==t&&(c=Dr(c),c=c===c?c:0),Ls(Dr(o),c,l)}function nO(o,c,l){return c=Li(c),l===t?(l=c,c=0):l=Li(l),o=Dr(o),c1(o,c,l)}function rO(o,c,l){if(l&&typeof l!="boolean"&&Fn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Li(o),c===t?(c=o,o=0):c=Li(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=Oy();return Rn(o+b*(c-o+Lk("1e-"+((b+"").length-1))),c)}return Uf(o,c)}var iO=Oo(function(o,c,l){return c=c.toLowerCase(),o+(l?sb(c):c)});function sb(o){return hh(dt(o).toLowerCase())}function ob(o){return o=dt(o),o&&o.replace(ok,Hk).replace(Ik,"")}function sO(o,c,l){o=dt(o),c=pr(c);var p=o.length;l=l===t?p:Ls(Ve(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function oO(o){return o=dt(o),o&&US.test(o)?o.replace(Dg,Yk):o}function aO(o){return o=dt(o),o&&qS.test(o)?o.replace(cf,"\\$&"):o}var cO=Oo(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),uO=Oo(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),lO=um("toLowerCase");function dO(o,c,l){o=dt(o),c=Ve(c);var p=c?_o(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return xu(yu(b),l)+o+xu(gu(b),l)}function fO(o,c,l){o=dt(o),c=Ve(c);var p=c?_o(o):0;return c&&p<c?o+xu(c-p,l):o}function hO(o,c,l){o=dt(o),c=Ve(c);var p=c?_o(o):0;return c&&p<c?xu(c-p,l)+o:o}function pO(o,c,l){return l||c==null?c=0:c&&(c=+c),_0(dt(o).replace(uf,""),c||0)}function gO(o,c,l){return(l?Fn(o,c,l):c===t)?c=1:c=Ve(c),Ff(dt(o),c)}function yO(){var o=arguments,c=dt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var mO=Oo(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function bO(o,c,l){return l&&typeof l!="number"&&Fn(o,c,l)&&(c=l=t),l=l===t?Ae:l>>>0,l?(o=dt(o),o&&(typeof c=="string"||c!=null&&!lh(c))&&(c=pr(c),!c&&wo(o))?is(Yr(o),0,l):o.split(c,l)):[]}var vO=Oo(function(o,c,l){return o+(l?" ":"")+hh(c)});function wO(o,c,l){return o=dt(o),l=l==null?0:Ls(Ve(l),0,o.length),c=pr(c),o.slice(l,l+c.length)==c}function _O(o,c,l){var p=w.templateSettings;l&&Fn(o,c,l)&&(c=t),o=dt(o),c=Fu({},c,p,ym);var b=Fu({},c.imports,p.imports,ym),_=mn(b),O=kf(b,_),R,U,re=0,ie=c.interpolate||eu,ue="__p += '",ye=Ef((c.escape||eu).source+"|"+ie.source+"|"+(ie===Ng?ek:eu).source+"|"+(c.evaluate||eu).source+"|$","g"),Se="//# sourceURL="+(gt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Tk+"]")+`
`;o.replace(ye,function(Ce,Qe,Ze,yr,Wn,mr){return Ze||(Ze=yr),ue+=o.slice(re,mr).replace(ak,Qk),Qe&&(R=!0,ue+=`' +
__e(`+Qe+`) +
'`),Wn&&(U=!0,ue+=`';
`+Wn+`;
__p += '`),Ze&&(ue+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),re=mr+Ce.length,Ce}),ue+=`';
`;var Me=gt.call(c,"variable")&&c.variable;if(!Me)ue=`with (obj) {
`+ue+`
}
`;else if(XS.test(Me))throw new Ne(u);ue=(U?ue.replace(pt,""):ue).replace(DS,"$1").replace(NS,"$1;"),ue="function("+(Me||"obj")+`) {
`+(Me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var ze=cb(function(){return ct(_,Se+"return "+ue).apply(t,O)});if(ze.source=ue,uh(ze))throw ze;return ze}function AO(o){return dt(o).toLowerCase()}function SO(o){return dt(o).toUpperCase()}function kO(o,c,l){if(o=dt(o),o&&(l||c===t))return my(o);if(!o||!(c=pr(c)))return o;var p=Yr(o),b=Yr(c),_=by(p,b),O=vy(p,b)+1;return is(p,_,O).join("")}function IO(o,c,l){if(o=dt(o),o&&(l||c===t))return o.slice(0,_y(o)+1);if(!o||!(c=pr(c)))return o;var p=Yr(o),b=vy(p,Yr(c))+1;return is(p,0,b).join("")}function EO(o,c,l){if(o=dt(o),o&&(l||c===t))return o.replace(uf,"");if(!o||!(c=pr(c)))return o;var p=Yr(o),b=by(p,Yr(c));return is(p,b).join("")}function PO(o,c){var l=K,p=q;if(Nt(c)){var b="separator"in c?c.separator:b;l="length"in c?Ve(c.length):l,p="omission"in c?pr(c.omission):p}o=dt(o);var _=o.length;if(wo(o)){var O=Yr(o);_=O.length}if(l>=_)return o;var R=l-_o(p);if(R<1)return p;var U=O?is(O,0,R).join(""):o.slice(0,R);if(b===t)return U+p;if(O&&(R+=U.length-R),lh(b)){if(o.slice(R).search(b)){var re,ie=U;for(b.global||(b=Ef(b.source,dt($g.exec(b))+"g")),b.lastIndex=0;re=b.exec(ie);)var ue=re.index;U=U.slice(0,ue===t?R:ue)}}else if(o.indexOf(pr(b),R)!=R){var ye=U.lastIndexOf(b);ye>-1&&(U=U.slice(0,ye))}return U+p}function OO(o){return o=dt(o),o&&$S.test(o)?o.replace(Kg,r0):o}var xO=Oo(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),hh=um("toUpperCase");function ab(o,c,l){return o=dt(o),c=l?t:c,c===t?Xk(o)?o0(o):Vk(o):o.match(c)||[]}var cb=He(function(o,c){try{return fr(o,t,c)}catch(l){return uh(l)?l:new Ne(l)}}),TO=Bi(function(o,c){return Rr(c,function(l){l=fi(l),Ti(o,l,ah(o[l],o))}),o});function RO(o){var c=o==null?0:o.length,l=Re();return o=c?Bt(o,function(p){if(typeof p[1]!="function")throw new Br(a);return[l(p[0]),p[1]]}):[],He(function(p){for(var b=-1;++b<c;){var _=o[b];if(fr(_[0],this,p))return fr(_[1],this,p)}})}function BO(o){return r1(Cr(o,m))}function ph(o){return function(){return o}}function MO(o,c){return o==null||o!==o?c:o}var CO=dm(),LO=dm(!0);function Jn(o){return o}function gh(o){return Fy(typeof o=="function"?o:Cr(o,m))}function KO(o){return Vy(Cr(o,m))}function DO(o,c){return zy(o,Cr(c,m))}var NO=He(function(o,c){return function(l){return Fa(l,o,c)}}),$O=He(function(o,c){return function(l){return Fa(o,l,c)}});function yh(o,c,l){var p=mn(c),b=Au(c,p);l==null&&!(Nt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=Au(c,mn(c)));var _=!(Nt(l)&&"chain"in l)||!!l.chain,O=Ci(o);return Rr(b,function(R){var U=c[R];o[R]=U,O&&(o.prototype[R]=function(){var re=this.__chain__;if(_||re){var ie=o(this.__wrapped__),ue=ie.__actions__=Hn(this.__actions__);return ue.push({func:U,args:arguments,thisArg:o}),ie.__chain__=re,ie}return U.apply(o,Xi([this.value()],arguments))})}),o}function UO(){return _n._===this&&(_n._=f0),this}function mh(){}function FO(o){return o=Ve(o),He(function(c){return jy(c,o)})}var WO=Hf(Bt),VO=Hf(fy),zO=Hf(vf);function ub(o){return th(o)?wf(fi(o)):w1(o)}function jO(o){return function(c){return o==null?t:Ks(o,c)}}var qO=hm(),GO=hm(!0);function bh(){return[]}function vh(){return!1}function HO(){return{}}function YO(){return""}function QO(){return!0}function JO(o,c){if(o=Ve(o),o<1||o>Oe)return[];var l=Ae,p=Rn(o,Ae);c=Re(c),o-=Ae;for(var b=Sf(p,c);++l<o;)c(l);return b}function XO(o){return Ue(o)?Bt(o,fi):gr(o)?[o]:Hn(xm(dt(o)))}function ZO(o){var c=++l0;return dt(o)+c}var ex=Ou(function(o,c){return o+c},0),tx=Yf("ceil"),nx=Ou(function(o,c){return o/c},1),rx=Yf("floor");function ix(o){return o&&o.length?_u(o,Jn,Cf):t}function sx(o,c){return o&&o.length?_u(o,Re(c,2),Cf):t}function ox(o){return gy(o,Jn)}function ax(o,c){return gy(o,Re(c,2))}function cx(o){return o&&o.length?_u(o,Jn,Nf):t}function ux(o,c){return o&&o.length?_u(o,Re(c,2),Nf):t}var lx=Ou(function(o,c){return o*c},1),dx=Yf("round"),fx=Ou(function(o,c){return o-c},0);function hx(o){return o&&o.length?Af(o,Jn):0}function px(o,c){return o&&o.length?Af(o,Re(c,2)):0}return w.after=KE,w.ary=Um,w.assign=SP,w.assignIn=eb,w.assignInWith=Fu,w.assignWith=kP,w.at=IP,w.before=Fm,w.bind=ah,w.bindAll=TO,w.bindKey=Wm,w.castArray=HE,w.chain=Dm,w.chunk=rI,w.compact=iI,w.concat=sI,w.cond=RO,w.conforms=BO,w.constant=ph,w.countBy=hE,w.create=EP,w.curry=Vm,w.curryRight=zm,w.debounce=jm,w.defaults=PP,w.defaultsDeep=OP,w.defer=DE,w.delay=NE,w.difference=oI,w.differenceBy=aI,w.differenceWith=cI,w.drop=uI,w.dropRight=lI,w.dropRightWhile=dI,w.dropWhile=fI,w.fill=hI,w.filter=gE,w.flatMap=bE,w.flatMapDeep=vE,w.flatMapDepth=wE,w.flatten=Mm,w.flattenDeep=pI,w.flattenDepth=gI,w.flip=$E,w.flow=CO,w.flowRight=LO,w.fromPairs=yI,w.functions=LP,w.functionsIn=KP,w.groupBy=_E,w.initial=bI,w.intersection=vI,w.intersectionBy=wI,w.intersectionWith=_I,w.invert=NP,w.invertBy=$P,w.invokeMap=SE,w.iteratee=gh,w.keyBy=kE,w.keys=mn,w.keysIn=Qn,w.map=Lu,w.mapKeys=FP,w.mapValues=WP,w.matches=KO,w.matchesProperty=DO,w.memoize=Du,w.merge=VP,w.mergeWith=tb,w.method=NO,w.methodOf=$O,w.mixin=yh,w.negate=Nu,w.nthArg=FO,w.omit=zP,w.omitBy=jP,w.once=UE,w.orderBy=IE,w.over=WO,w.overArgs=FE,w.overEvery=VO,w.overSome=zO,w.partial=ch,w.partialRight=qm,w.partition=EE,w.pick=qP,w.pickBy=nb,w.property=ub,w.propertyOf=jO,w.pull=II,w.pullAll=Lm,w.pullAllBy=EI,w.pullAllWith=PI,w.pullAt=OI,w.range=qO,w.rangeRight=GO,w.rearg=WE,w.reject=xE,w.remove=xI,w.rest=VE,w.reverse=sh,w.sampleSize=RE,w.set=HP,w.setWith=YP,w.shuffle=BE,w.slice=TI,w.sortBy=LE,w.sortedUniq=DI,w.sortedUniqBy=NI,w.split=bO,w.spread=zE,w.tail=$I,w.take=UI,w.takeRight=FI,w.takeRightWhile=WI,w.takeWhile=VI,w.tap=iE,w.throttle=jE,w.thru=Cu,w.toArray=Jm,w.toPairs=rb,w.toPairsIn=ib,w.toPath=XO,w.toPlainObject=Zm,w.transform=QP,w.unary=qE,w.union=zI,w.unionBy=jI,w.unionWith=qI,w.uniq=GI,w.uniqBy=HI,w.uniqWith=YI,w.unset=JP,w.unzip=oh,w.unzipWith=Km,w.update=XP,w.updateWith=ZP,w.values=Ro,w.valuesIn=eO,w.without=QI,w.words=ab,w.wrap=GE,w.xor=JI,w.xorBy=XI,w.xorWith=ZI,w.zip=eE,w.zipObject=tE,w.zipObjectDeep=nE,w.zipWith=rE,w.entries=rb,w.entriesIn=ib,w.extend=eb,w.extendWith=Fu,yh(w,w),w.add=ex,w.attempt=cb,w.camelCase=iO,w.capitalize=sb,w.ceil=tx,w.clamp=tO,w.clone=YE,w.cloneDeep=JE,w.cloneDeepWith=XE,w.cloneWith=QE,w.conformsTo=ZE,w.deburr=ob,w.defaultTo=MO,w.divide=nx,w.endsWith=sO,w.eq=Jr,w.escape=oO,w.escapeRegExp=aO,w.every=pE,w.find=yE,w.findIndex=Rm,w.findKey=xP,w.findLast=mE,w.findLastIndex=Bm,w.findLastKey=TP,w.floor=rx,w.forEach=Nm,w.forEachRight=$m,w.forIn=RP,w.forInRight=BP,w.forOwn=MP,w.forOwnRight=CP,w.get=dh,w.gt=eP,w.gte=tP,w.has=DP,w.hasIn=fh,w.head=Cm,w.identity=Jn,w.includes=AE,w.indexOf=mI,w.inRange=nO,w.invoke=UP,w.isArguments=$s,w.isArray=Ue,w.isArrayBuffer=nP,w.isArrayLike=Yn,w.isArrayLikeObject=Yt,w.isBoolean=rP,w.isBuffer=ss,w.isDate=iP,w.isElement=sP,w.isEmpty=oP,w.isEqual=aP,w.isEqualWith=cP,w.isError=uh,w.isFinite=uP,w.isFunction=Ci,w.isInteger=Gm,w.isLength=$u,w.isMap=Hm,w.isMatch=lP,w.isMatchWith=dP,w.isNaN=fP,w.isNative=hP,w.isNil=gP,w.isNull=pP,w.isNumber=Ym,w.isObject=Nt,w.isObjectLike=Vt,w.isPlainObject=Ga,w.isRegExp=lh,w.isSafeInteger=yP,w.isSet=Qm,w.isString=Uu,w.isSymbol=gr,w.isTypedArray=To,w.isUndefined=mP,w.isWeakMap=bP,w.isWeakSet=vP,w.join=AI,w.kebabCase=cO,w.last=Kr,w.lastIndexOf=SI,w.lowerCase=uO,w.lowerFirst=lO,w.lt=wP,w.lte=_P,w.max=ix,w.maxBy=sx,w.mean=ox,w.meanBy=ax,w.min=cx,w.minBy=ux,w.stubArray=bh,w.stubFalse=vh,w.stubObject=HO,w.stubString=YO,w.stubTrue=QO,w.multiply=lx,w.nth=kI,w.noConflict=UO,w.noop=mh,w.now=Ku,w.pad=dO,w.padEnd=fO,w.padStart=hO,w.parseInt=pO,w.random=rO,w.reduce=PE,w.reduceRight=OE,w.repeat=gO,w.replace=yO,w.result=GP,w.round=dx,w.runInContext=N,w.sample=TE,w.size=ME,w.snakeCase=mO,w.some=CE,w.sortedIndex=RI,w.sortedIndexBy=BI,w.sortedIndexOf=MI,w.sortedLastIndex=CI,w.sortedLastIndexBy=LI,w.sortedLastIndexOf=KI,w.startCase=vO,w.startsWith=wO,w.subtract=fx,w.sum=hx,w.sumBy=px,w.template=_O,w.times=JO,w.toFinite=Li,w.toInteger=Ve,w.toLength=Xm,w.toLower=AO,w.toNumber=Dr,w.toSafeInteger=AP,w.toString=dt,w.toUpper=SO,w.trim=kO,w.trimEnd=IO,w.trimStart=EO,w.truncate=PO,w.unescape=OO,w.uniqueId=ZO,w.upperCase=xO,w.upperFirst=hh,w.each=Nm,w.eachRight=$m,w.first=Cm,yh(w,function(){var o={};return li(w,function(c,l){gt.call(w.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),w.VERSION=n,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){w[o].placeholder=w}),Rr(["drop","take"],function(o,c){Xe.prototype[o]=function(l){l=l===t?1:cn(Ve(l),0);var p=this.__filtered__&&!c?new Xe(this):this.clone();return p.__filtered__?p.__takeCount__=Rn(l,p.__takeCount__):p.__views__.push({size:Rn(l,Ae),type:o+(p.__dir__<0?"Right":"")}),p},Xe.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),Rr(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==V||l==Ke;Xe.prototype[o]=function(b){var _=this.clone();return _.__iteratees__.push({iteratee:Re(b,3),type:l}),_.__filtered__=_.__filtered__||p,_}}),Rr(["head","last"],function(o,c){var l="take"+(c?"Right":"");Xe.prototype[o]=function(){return this[l](1).value()[0]}}),Rr(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Xe.prototype[o]=function(){return this.__filtered__?new Xe(this):this[l](1)}}),Xe.prototype.compact=function(){return this.filter(Jn)},Xe.prototype.find=function(o){return this.filter(o).head()},Xe.prototype.findLast=function(o){return this.reverse().find(o)},Xe.prototype.invokeMap=He(function(o,c){return typeof o=="function"?new Xe(this):this.map(function(l){return Fa(l,o,c)})}),Xe.prototype.reject=function(o){return this.filter(Nu(Re(o)))},Xe.prototype.slice=function(o,c){o=Ve(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Xe(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=Ve(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Xe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Xe.prototype.toArray=function(){return this.take(Ae)},li(Xe.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=w[p?"take"+(c=="last"?"Right":""):c],_=p||/^find/.test(c);!b||(w.prototype[c]=function(){var O=this.__wrapped__,R=p?[1]:arguments,U=O instanceof Xe,re=R[0],ie=U||Ue(O),ue=function(Qe){var Ze=b.apply(w,Xi([Qe],R));return p&&ye?Ze[0]:Ze};ie&&l&&typeof re=="function"&&re.length!=1&&(U=ie=!1);var ye=this.__chain__,Se=!!this.__actions__.length,Me=_&&!ye,ze=U&&!Se;if(!_&&ie){O=ze?O:new Xe(this);var Ce=o.apply(O,R);return Ce.__actions__.push({func:Cu,args:[ue],thisArg:t}),new Mr(Ce,ye)}return Me&&ze?o.apply(this,R):(Ce=this.thru(ue),Me?p?Ce.value()[0]:Ce.value():Ce)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(o){var c=ou[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);w.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var _=this.value();return c.apply(Ue(_)?_:[],b)}return this[l](function(O){return c.apply(Ue(O)?O:[],b)})}}),li(Xe.prototype,function(o,c){var l=w[c];if(l){var p=l.name+"";gt.call(Io,p)||(Io[p]=[]),Io[p].push({name:c,func:l})}}),Io[Pu(t,C).name]=[{name:"wrapper",func:t}],Xe.prototype.clone=O0,Xe.prototype.reverse=x0,Xe.prototype.value=T0,w.prototype.at=sE,w.prototype.chain=oE,w.prototype.commit=aE,w.prototype.next=cE,w.prototype.plant=lE,w.prototype.reverse=dE,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=fE,w.prototype.first=w.prototype.head,Ca&&(w.prototype[Ca]=uE),w},Ao=a0();Rs?((Rs.exports=Ao)._=Ao,gf._=Ao):_n._=Ao}).call(W)})(jl,jl.exports);var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.OrderCacheService=void 0;const xv=jl.exports,hi=dS,Tv=kd,nl=Ta;class UN{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,hi.observable)([]),this.observableData=(0,hi.makeAutoObservable)(this.observableData),(0,hi.makeObservable)(this,{buyOrdersCache:hi.computed,sellOrdersCache:hi.computed,allOrdersCache:hi.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,xv.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,hi.runInAction)(()=>{this.orderChanges.push({eventType:nl.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===Tv.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,hi.runInAction)(()=>{this.orderChanges.push({eventType:nl.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,xv.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,hi.runInAction)(()=>{this.orderChanges.push({eventType:nl.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,hi.runInAction)(()=>{this.orderChanges.push({eventType:nl.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===Tv.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}Ud.OrderCacheService=UN;var Ra={},Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.createTransactionFromInstructions=void 0;const FN=Gi,WN=r=>{const e=new FN.Transaction;return e.add(...r),e};Fd.createTransactionFromInstructions=WN;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.TEN_THOUSAND=ba.ONE_MILLION=void 0;ba.ONE_MILLION=1e6;ba.TEN_THOUSAND=1e4;var Xn=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.GmClientService=void 0;const as=Gi,rl=gg,Di=Ss,jh=Fd,Rv=Gr,Lo=kd,Bv=ba,VN=ur,zN=Yl;class jN{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return Xn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,Di.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:d,royalty:h,saVault:f}=u,m=yield e.getTokenSupply(d,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:d.toString(),royaltyPercentageAsDecimal:h.toNumber()/Bv.ONE_MILLION,saVault:f.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return Xn(this,void 0,void 0,function*(){const n=yield(0,Di.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return Xn(this,void 0,void 0,function*(){const i=yield(0,Di.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return Xn(this,void 0,void 0,function*(){const i=yield(0,Di.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return Xn(this,void 0,void 0,function*(){const i=yield(0,Di.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return Xn(this,void 0,void 0,function*(){const s=yield(0,Di.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return Xn(this,void 0,void 0,function*(){const s=yield(0,Di.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return Xn(this,void 0,void 0,function*(){const i=yield(0,Di.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,d){return Xn(this,void 0,void 0,function*(){let h=rl.createInitializeSellOrderInstruction,f=n,m=i;d===Lo.OrderSide.Buy&&(h=rl.createInitializeBuyOrderInstruction,f=i,m=n);const I=yield(0,Rv.getAssociatedTokenAddress)(t,f),{ixSet:P}=yield h({connection:e,depositMint:f,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:S}=P;return{transaction:(0,jh.createTransactionFromInstructions)(S),signers:M}})}getBnPriceForCurrency(e,t,n,i){return Xn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,VN.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return Xn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,rl.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,jh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new as.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new as.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return Xn(this,void 0,void 0,function*(){const d=new as.PublicKey(t.id),h=new as.PublicKey(t.orderMint),f=new as.PublicKey(t.currencyMint),m=new as.PublicKey(t.owner),I=t.orderType===Lo.OrderSide.Buy?n:new as.PublicKey(t.owner),P=yield(0,Rv.getAssociatedTokenAddress)(n,t.orderType===Lo.OrderSide.Buy?h:f),M=yield this.getRegisteredCurrencies(e,s),{saVault:S}=M.find(ae=>ae.mint===t.currencyMint),[T]=yield(0,zN.getStakingAccount)(a,I,u),{instructions:C,signers:Q}=yield(0,rl.createExchangeInstruction)({connection:e,orderAccount:d,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:P,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:f,orderInitializer:m,saVault:new as.PublicKey(S),stakingProgramId:a,registeredStake:u,stakingAccount:T});return{transaction:(0,jh.createTransactionFromInstructions)(C),signers:Q}})}accountItemsToOrders(e,t,n,i){return Xn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),d=Object.keys(a.account.orderSide)[0]==="buy"?Lo.OrderSide.Buy:Lo.OrderSide.Sell,h=a.account.assetMint.toString(),f=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),P=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),S=a.account.initializerAssetTokenAccount.toString(),T=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Q}=s.find(ce=>ce.mint.toString()===f);return new Lo.Order({id:u,orderType:d,orderMint:h,currencyMint:f,currencyDecimals:Q,price:m,orderQtyRemaining:I,orderOriginationQty:P,owner:M,ownerAssetTokenAccount:S,ownerCurrencyTokenAccount:T,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return Xn(this,void 0,void 0,function*(){const n=[],i=yield(0,Di.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/Bv.TEN_THOUSAND});return n})}}Ra.GmClientService=jN;var Qc={},il=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.GmEventService=void 0;const ec=wt,qh=Sd,Gh=Ta,qN=Ra,GN=ur,sl=Ta;class HN{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return il(this,void 0,void 0,function*(){this.idl=(0,GN.getGmLogsIDL)(this.programId),this.provider=new ec.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new ec.Program(this.idl,this.programId,this.provider,{instruction:new ec.BorshInstructionCoder(this.idl),accounts:new ec.BorshAccountsCoder(this.idl),state:null,events:new ec.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(sl.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(sl.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(sl.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(sl.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return il(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return il(this,void 0,void 0,function*(){const t=yield new qN.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new qh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?qh.OrderSide.Buy:qh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(Gh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(Gh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(Gh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return il(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Qc.GmEventService=HN;var Ko=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.GmOrderbookService=void 0;const YN=$N,QN=jl.exports,JN=Ud,Hh=Ta,Mv=Ra,Cv=Qc;class Wd{constructor(e,t,n=60){this.gmClientService=new Mv.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new JN.OrderCacheService,this.gmClientService=new Mv.GmClientService,this.gmEventService=new Cv.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return Ko(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,YN.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},Wd.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return Ko(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return Ko(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return Ko(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new Cv.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return Ko(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,QN.pull)(this.eventCallBacks,e)}loadInitialOrders(){return Ko(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case Hh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case Hh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case Hh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}Nd.GmOrderbookService=Wd;Wd.HEALTH_CHECK_RATE=5e3;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Nd,r),t(Ra,r),t(Qc,r)})(bS);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(gg,r),t(Ss,r),t(Ta,r),t(ur,r),t(Sd,r),t(bS,r)})(pg);var kS=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(eo,"__esModule",{value:!0});eo.createAccountTransaction=eo.createAccountInstruction=void 0;const ql=wt,xp=Gi,IS=pg;function XN(r,e,t,n){return kS(this,void 0,void 0,function*(){const i=(0,IS.getGmIDL)(n),s=new ql.AnchorProvider(r,null,null),a=new ql.Program(i,n,s);return xp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}eo.createAccountInstruction=XN;function ZN(r,e,t,n){return kS(this,void 0,void 0,function*(){const i=(0,IS.getGmIDL)(n),s=new ql.AnchorProvider(r,null,null),a=new ql.Program(i,n,s),u=new xp.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(xp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}eo.createAccountTransaction=ZN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ln,r),t(md,r),t(eo,r)})(Gr);var e2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(id,"__esModule",{value:!0});id.harvestRewardsInstruction=void 0;const t2=wt,n2=co,r2=Gr,i2=cr;function s2({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return e2(this,void 0,void 0,function*(){const a=(0,i2.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let d=null,h=null;const f=yield(0,r2.getTokenAccount)(r,e,t);d=f.tokenAccount,"createInstruction"in f&&u.instructions.push(...f.createInstruction),d instanceof t2.web3.Keypair?(h=d.publicKey,u.signers.push(d)):h=d;const m=yield(0,n2.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}id.harvestRewardsInstruction=s2;var Vd={},o2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.createInitializeStakingInstruction=void 0;const a2=cr;function c2({connection:r,updateAuthorityAccount:e,programId:t}){return o2(this,void 0,void 0,function*(){const n=(0,a2.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}Vd.createInitializeStakingInstruction=c2;var zd={},jd={},jn={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ESCROW_AUTH=Sn.STAKING_VARS=Sn.STAKING_ESCROW=Sn.STAKING_ACCOUNT=Sn.REWARD_AUTH=Sn.REWARD_ACCOUNT=Sn.REGISTERED_STAKE=void 0;Sn.REGISTERED_STAKE=Be.Buffer.from("registered-stake");Sn.REWARD_ACCOUNT=Be.Buffer.from("reward-account");Sn.REWARD_AUTH=Be.Buffer.from("reward-vault-authority");Sn.STAKING_ACCOUNT=Be.Buffer.from("staking-account");Sn.STAKING_ESCROW=Be.Buffer.from("staking-escrow");Sn.STAKING_VARS=Be.Buffer.from("staking-vars");Sn.ESCROW_AUTH=Be.Buffer.from("escrow-auth");var Ba=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(jn,"__esModule",{value:!0});jn.getRewardAuth=jn.getTokenEscrow=jn.getStakingVarsAccount=jn.getStakingAccountsForRegisteredStake=jn.getStakingAccount=jn.getRegisteredStake=void 0;const Lv=wt,Jc=Gi,u2=cr,Xc=Sn;function l2(r,e,t,n){return Ba(this,void 0,void 0,function*(){return Jc.PublicKey.findProgramAddress([Xc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}jn.getRegisteredStake=l2;function d2(r,e,t){return Ba(this,void 0,void 0,function*(){return Jc.PublicKey.findProgramAddress([Xc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}jn.getStakingAccount=d2;function f2(r,e,t){return Ba(this,void 0,void 0,function*(){const n=new Lv.AnchorProvider(r,null,null),i=(0,u2.getStakingIdl)(e),s=new Lv.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}jn.getStakingAccountsForRegisteredStake=f2;function h2(r){return Ba(this,void 0,void 0,function*(){return Jc.PublicKey.findProgramAddress([Xc.STAKING_VARS],r)})}jn.getStakingVarsAccount=h2;function p2(r,e,t){return Ba(this,void 0,void 0,function*(){return Jc.PublicKey.findProgramAddress([Xc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}jn.getTokenEscrow=p2;function g2(r,e){return Ba(this,void 0,void 0,function*(){return Jc.PublicKey.findProgramAddress([Xc.REWARD_AUTH,e.toBuffer()],r)})}jn.getRewardAuth=g2;var ms={},Mg=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ms,"__esModule",{value:!0});ms.getStakingVarsAccountInfo=ms.getStakingAccountInfo=ms.getRegisteredStakeAccountInfo=void 0;const Cg=Js,y2=jn;function m2(r,e,t){return Mg(this,void 0,void 0,function*(){return yield(0,Cg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}ms.getRegisteredStakeAccountInfo=m2;function b2(r,e,t){return Mg(this,void 0,void 0,function*(){return yield(0,Cg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}ms.getStakingAccountInfo=b2;function v2(r,e){return Mg(this,void 0,void 0,function*(){const t=(0,Cg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,y2.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}ms.getStakingVarsAccountInfo=v2;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(jn,r),t(ms,r),t(Sn,r)})(jd);var w2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(zd,"__esModule",{value:!0});zd.registerStakeInstruction=void 0;const Kv=wt,_2=co,A2=jd,S2=cr;function k2({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return w2(this,void 0,void 0,function*(){const u=(0,S2.getStakingProgram)({connection:r,programId:a}),d={instructions:[],signers:[]},[h]=yield(0,A2.getRegisteredStake)(a,e,n,i),f=yield(0,_2.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new Kv.BN(t),new Kv.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:f}).instruction();return d.instructions.push(m),d})}zd.registerStakeInstruction=k2;var qd={},I2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(qd,"__esModule",{value:!0});qd.createSettleStakingAccountInstruction=void 0;const E2=cr;function P2({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return I2(this,void 0,void 0,function*(){const a=(0,E2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},d=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(d),u})}qd.createSettleStakingAccountInstruction=P2;var Gd={},O2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.stakeTokensInstruction=void 0;const x2=co,T2=cr;function R2({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return O2(this,void 0,void 0,function*(){const d=(0,T2.getStakingProgram)({connection:r,programId:u}),h=yield(0,x2.associatedAddress)({owner:a,mint:t}),f={instructions:[],signers:[]},m=yield d.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return f.instructions.push(m),f})}Gd.stakeTokensInstruction=R2;var Hd={},B2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Hd,"__esModule",{value:!0});Hd.unstakeTokensInstruction=void 0;const M2=wt,C2=co,L2=Gr,K2=jd,D2=cr;function N2({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return B2(this,void 0,void 0,function*(){const s=(0,D2.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},d=(yield(0,K2.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,f=null;const m=yield(0,L2.getTokenAccount)(r,e,d);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof M2.web3.Keypair?(f=h.publicKey,a.signers.push(h)):f=h;const I=yield(0,C2.associatedAddress)({owner:t,mint:d}),P=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:d,registeredStake:t,stakingAccount:n,userRewardAccount:f,rewardAta:I}).instruction();return a.instructions.push(P),a})}Hd.unstakeTokensInstruction=N2;var Yd={},$2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.updateCooldownPeriodInstruction=void 0;const U2=wt,F2=cr;function W2({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return $2(this,void 0,void 0,function*(){const s=(0,F2.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new U2.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}Yd.updateCooldownPeriodInstruction=W2;var Qd={},V2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.updateRewardMultiplierInstruction=void 0;const z2=wt,j2=cr;function q2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return V2(this,void 0,void 0,function*(){const a=(0,j2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},d=yield a.methods.updateRewardMultiplier(new z2.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(d),u})}Qd.updateRewardMultiplierInstruction=q2;var Jd={},G2=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.withdrawTokensInstruction=void 0;const H2=wt,Y2=co,Q2=cr,J2=Gr;function X2({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return G2(this,void 0,void 0,function*(){const u=(0,Q2.getStakingProgram)({connection:r,programId:a}),d=yield(0,Y2.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let f=null,m=null;const I=yield(0,J2.getTokenAccount)(r,t,n);f=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),f instanceof H2.web3.Keypair?(m=f.publicKey,h.signers.push(f)):m=f;const P=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:d}).instruction();return h.instructions.push(P),h})}Jd.withdrawTokensInstruction=X2;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ow,r),t(Ql,r),t(rd,r),t(id,r),t(Vd,r),t(zd,r),t(qd,r),t(Gd,r),t(Hd,r),t(Yd,r),t(Qd,r),t(Jd,r)})(sw);var ES={},PS={};Object.defineProperty(PS,"__esModule",{value:!0});(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Lc,r),t(PS,r)})(ES);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(sw,r),t(jd,r),t(ES,r),t(cr,r)})(Yl);var OS={};(function(r){var e=W&&W.__awaiter||function(m,I,P,M){function S(T){return T instanceof P?T:new P(function(C){C(T)})}return new(P||(P=Promise))(function(T,C){function Q(he){try{ae(M.next(he))}catch(E){C(E)}}function ce(he){try{ae(M.throw(he))}catch(E){C(E)}}function ae(he){he.done?T(he.value):S(he.value).then(Q,ce)}ae((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=wt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Be.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,P,M){return e(this,void 0,void 0,function*(){const[S,T]=yield a(P,M),C=s(M),Q=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Q).instruction.processEnlistPlayer(T,I,{accounts:{playerFactionAccount:S,playerAccount:P,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function d(m,I,P){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),S=s(P),T=new t.Program(S,P,M),[C]=yield a(I,P);return yield T.account.playerFactionData.fetch(C)})}r.getPlayer=d;function h(m,I){return e(this,void 0,void 0,function*(){const P=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,P).account.playerFactionData.all()).map(Q=>Q.account)})}r.getAllPlayers=h;function f(m,I,P){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),S=s(P);return(yield new t.Program(S,P,M).account.playerFactionData.all()).map(ce=>ce.account).filter(ce=>ce.factionId==I)})}r.getPlayersOfFaction=f})(OS);var xS={},Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.gumDropIdl=void 0;Xd.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=W&&W.__createBinding||(Object.create?function(S,T,C,Q){Q===void 0&&(Q=C);var ce=Object.getOwnPropertyDescriptor(T,C);(!ce||("get"in ce?!T.__esModule:ce.writable||ce.configurable))&&(ce={enumerable:!0,get:function(){return T[C]}}),Object.defineProperty(S,Q,ce)}:function(S,T,C,Q){Q===void 0&&(Q=C),S[Q]=T[C]}),t=W&&W.__setModuleDefault||(Object.create?function(S,T){Object.defineProperty(S,"default",{enumerable:!0,value:T})}:function(S,T){S.default=T}),n=W&&W.__importStar||function(S){if(S&&S.__esModule)return S;var T={};if(S!=null)for(var C in S)C!=="default"&&Object.prototype.hasOwnProperty.call(S,C)&&e(T,S,C);return t(T,S),T},i=W&&W.__awaiter||function(S,T,C,Q){function ce(ae){return ae instanceof C?ae:new C(function(he){he(ae)})}return new(C||(C=Promise))(function(ae,he){function E(J){try{z(Q.next(J))}catch(K){he(K)}}function D(J){try{z(Q.throw(J))}catch(K){he(K)}}function z(J){J.done?ae(J.value):ce(J.value).then(E,D)}z((Q=Q.apply(S,T||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=wt,a=Dc,u=n(Ye),d=ln,h=Xd,f=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(S,T,C=f)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Be.Buffer.from("ClaimStatus"),S.toArrayLike(Be.Buffer,"le",8),T.toBuffer()],C)});r.getClaimStatusKey=m;const I=(S,T,C,Q=f)=>i(void 0,void 0,void 0,function*(){const ce=new s.AnchorProvider(S,null,null),ae=new s.Program(h.gumDropIdl,Q,ce),he=yield(0,r.getClaimStatusKey)(T,C,Q);try{return yield ae.account.claimStatus.fetch(he[0])}catch{return null}});r.getClaimStatusAccount=I;const P=(S,T,C,Q=f)=>i(void 0,void 0,void 0,function*(){const ce=new s.AnchorProvider(S,null,null),ae=new s.Program(h.gumDropIdl,Q,ce),he=T.map(z=>(0,r.getClaimStatusKey)(z,C,Q)),E=(yield Promise.all(he)).map(z=>z[0]);return yield ae.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=P;const M=S=>i(void 0,void 0,void 0,function*(){const{connection:T,claimUrl:C,playerPublicKey:Q,programId:ce}=S,ae=new URLSearchParams(C.split("?")[1]),he=ae.get("distributor"),E=ae.get("handle"),D=ae.get("amount"),z=ae.get("index"),J=ae.get("proof"),K=ae.get("tokenAcc");if(!he||!E||!D||!z||!J||!K)throw new Error("Invalid claim");const q=J===""?[]:J.split(",").map(Or=>{const Ht=Be.Buffer.from(u.decode(Or));if(Ht.length!==32)throw new Error("Invalid proof hash length");return Ht}),ne=new s.web3.PublicKey(he),x=new s.web3.PublicKey(K),V=yield T.getAccountInfo(x);if(V===null)throw new Error("Could not fetch distributor token account");const Z=a.AccountLayout.decode(V.data),Ke=new s.web3.PublicKey(Z.mint),me=new s.web3.PublicKey(E),Oe=yield(0,d.getAssociatedTokenAddress)(me,Ke),Xt=yield T.getParsedTokenAccountsByOwner(me,{mint:Ke}),Zt=new s.BN(z),Ae=new s.BN(D),[Ge,on]=yield(0,r.getClaimStatusKey)(Zt,ne,ce),yn=new s.AnchorProvider(T,null,null),xt=new s.Program(h.gumDropIdl,ce,yn),yt=[];return Xt.value.length===0&&yt.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Ke,Oe,me,Q)),yt.push(xt.instruction.claim(on,Zt,Ae,Q,q,{accounts:{distributor:ne,claimStatus:Ge,from:x,to:Oe,temporal:Q,payer:Q,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),yt});r.claimTokenInstructions=M})(xS);var ve={},Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.baseIdl=void 0;Zd.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.scoreLogBaseIdl=void 0;ef.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var lt=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ve,"__esModule",{value:!0});ve.closeAccountsInstruction=ve.createWithdrawShipsInstruction=ve.createWithdrawArmsInstruction=ve.createWithdrawFoodInstruction=ve.createWithdrawFuelInstruction=ve.createHarvestInstruction=ve.createSettleInstruction=ve.createRepairInstruction=ve.createRefuelInstruction=ve.createRefeedInstruction=ve.createRearmInstruction=ve.createPartialDepositInstruction=ve.createInitialDepositInstruction=ve.createUpdateRewardRateInstruction=ve.createDeregisterShipInstruction=ve.createRegisterShipInstruction=ve.createScoreVarsInitializeInstruction=ve.getAllFleetsForUserPublicKey=ve.getAllFleets=ve.getAllRegisteredShips=ve.getScoreTreasuryAuthAccount=ve.getScoreTreasuryTokenAccount=ve.getScoreVarsShipInfo=ve.decodeEvent=ve.getShipStakingAccountInfo=ve.getScoreVarsInfo=ve.getShipStakingAccount=ve.getScoreEscrowAuthAccount=ve.getScoreEscrowAccount=ve.getScoreVarsShipAccount=ve.getScoreVarsAccount=ve.getScoreIDL=void 0;const le=wt,Pr=Dc,TS=Gi,Z2=Vn,e6=Zd,t6=ef,Qs=Gr;function Dt(r){const e=e6.baseIdl;return e.metadata.address=r.toBase58(),e}ve.getScoreIDL=Dt;function Nn(r){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCOREVARS")],r)})}ve.getScoreVarsAccount=Nn;function Pn(r,e){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}ve.getScoreVarsShipAccount=Pn;function sr(r,e,t,n){return lt(this,void 0,void 0,function*(){const i=[Be.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),le.web3.PublicKey.findProgramAddress(i,r)})}ve.getScoreEscrowAccount=sr;function ci(r,e,t){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}ve.getScoreEscrowAuthAccount=ci;function $n(r,e,t){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}ve.getShipStakingAccount=$n;function n6(r,e){return lt(this,void 0,void 0,function*(){const t=new le.AnchorProvider(r,null,null),n=Dt(e),i=new le.Program(n,e,t),[s]=yield Nn(e);return yield i.account.scoreVars.fetch(s)})}ve.getScoreVarsInfo=n6;function r6(r,e,t,n){return lt(this,void 0,void 0,function*(){const i=new le.AnchorProvider(r,null,null),s=Dt(e),a=new le.Program(s,e,i),[u]=yield $n(e,t,n);return yield a.account.shipStaking.fetch(u)})}ve.getShipStakingAccountInfo=r6;function i6(r,e,t){return lt(this,void 0,void 0,function*(){const n=new le.AnchorProvider(r,null,null);return new le.Program(t6.scoreLogBaseIdl,e,n).coder.events.decode(t)})}ve.decodeEvent=i6;function s6(r,e,t){return lt(this,void 0,void 0,function*(){const n=new le.AnchorProvider(r,null,null),i=Dt(e),s=new le.Program(i,e,n),[a]=yield Pn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}ve.getScoreVarsShipInfo=s6;function tf(r){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCORE_TREASURY")],r)})}ve.getScoreTreasuryTokenAccount=tf;function nf(r){return lt(this,void 0,void 0,function*(){return le.web3.PublicKey.findProgramAddress([Be.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}ve.getScoreTreasuryAuthAccount=nf;function o6(r,e){return lt(this,void 0,void 0,function*(){const t=Dt(e),n=new le.AnchorProvider(r,null,null),s=yield new le.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}ve.getAllRegisteredShips=o6;function a6(r,e){return lt(this,void 0,void 0,function*(){const t=Dt(e),n=new le.AnchorProvider(r,null,null),s=yield new le.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}ve.getAllFleets=a6;function c6(r,e,t){return lt(this,void 0,void 0,function*(){const n=Dt(t),i=new le.AnchorProvider(r,null,null),s=new le.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const f of a){const[m]=yield $n(t,f.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(f=>f!==null).map(f=>f)})}ve.getAllFleetsForUserPublicKey=c6;function u6(r,e,t,n,i,s,a,u){return lt(this,void 0,void 0,function*(){const d=Dt(u),h=new le.AnchorProvider(r,null,null),f=new le.Program(d,u,h),[m,I]=yield tf(u),[P,M]=yield nf(u),[S,T]=yield Nn(u);return yield f.instruction.processInitialize(T,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:S,tokenProgram:Pr.TOKEN_PROGRAM_ID,systemProgram:TS.SystemProgram.programId,rent:le.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:P,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}ve.createScoreVarsInitializeInstruction=u6;function l6(r,e,t,n,i,s,a,u,d,h,f,m,I){return lt(this,void 0,void 0,function*(){const P=Dt(I),M=new le.AnchorProvider(r,null,null),S=new le.Program(P,I,M),[T,C]=yield Pn(I,t),[Q,ce]=yield Nn(I);return yield S.instruction.processRegisterShip(ce,C,new le.BN(m),n,i,s,a,u,d,h,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Q,scoreVarsShipAccount:T,shipMint:t,systemProgram:TS.SystemProgram.programId},signers:[]})})}ve.createRegisterShipInstruction=l6;function d6(r,e,t,n){return lt(this,void 0,void 0,function*(){const i=Dt(n),s=new le.AnchorProvider(r,null,null),a=new le.Program(i,n,s),[u,d]=yield Pn(n,t),[h,f]=yield Nn(n);return yield a.instruction.processDeregisterShip(f,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}ve.createDeregisterShipInstruction=d6;function f6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const s=Dt(i),a=new le.AnchorProvider(r,null,null),u=new le.Program(s,i,a),[d,h]=yield Pn(i,t),[f,m]=yield Nn(i);return yield u.instruction.processUpdateRewardRate(m,h,new le.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:f,scoreVarsShipAccount:d,shipMint:t},signers:[]})})}ve.createUpdateRewardRateInstruction=f6;function h6(r,e,t,n,i,s,a=new le.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return lt(this,void 0,void 0,function*(){const[u,d]=yield ci(s,n,e),[h,f]=yield sr(s,n,null,e),[m,I]=yield $n(s,n,e),[P,M]=yield Pn(s,n),[S]=yield(0,Z2.getPlayerFactionPDA)(e,a),T=Dt(s),C=new le.AnchorProvider(r,null,null);return yield new le.Program(T,s,C).instruction.processInitialDeposit(I,M,d,f,new le.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:P,playerFactionAccount:S,escrowAuthority:u,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,rent:le.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}ve.createInitialDepositInstruction=h6;function p6(r,e,t,n,i,s){return lt(this,void 0,void 0,function*(){const[a,u]=yield ci(s,n,e),[d,h]=yield sr(s,n,null,e),[f,m]=yield $n(s,n,e),[I,P]=yield Pn(s,n),M=Dt(s),S=new le.AnchorProvider(r,null,null);return yield new le.Program(M,s,S).instruction.processPartialDeposit(m,P,u,h,new le.BN(t),{accounts:{playerAccount:e,shipStakingAccount:f,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:d}})})}ve.createPartialDepositInstruction=p6;function g6(r,e,t,n,i,s,a,u){return lt(this,void 0,void 0,function*(){const[d,h]=yield ci(u,i,t),[f,m]=yield sr(u,i,s,t),[I,P]=yield $n(u,i,t),[M,S]=yield Pn(u,i),[T,C]=yield Nn(u),Q=Dt(u),ce=new le.AnchorProvider(r,null,null);return yield new le.Program(Q,u,ce).instruction.processRearm(P,C,S,h,m,new le.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:T,scoreVarsShipAccount:M,escrowAuthority:d,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,rent:le.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:f}})})}ve.createRearmInstruction=g6;function y6(r,e,t,n,i,s,a,u){return lt(this,void 0,void 0,function*(){const[d,h]=yield ci(u,i,t),[f,m]=yield sr(u,i,s,t),[I,P]=yield $n(u,i,t),[M,S]=yield Pn(u,i),[T,C]=yield Nn(u),Q=Dt(u),ce=new le.AnchorProvider(r,null,null);return yield new le.Program(Q,u,ce).instruction.processRefeed(P,C,S,h,m,new le.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:T,scoreVarsShipAccount:M,escrowAuthority:d,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,rent:le.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:f}})})}ve.createRefeedInstruction=y6;function m6(r,e,t,n,i,s,a,u){return lt(this,void 0,void 0,function*(){const[d,h]=yield ci(u,i,t),[f,m]=yield sr(u,i,s,t),[I,P]=yield $n(u,i,t),[M,S]=yield Pn(u,i),[T,C]=yield Nn(u),Q=Dt(u),ce=new le.AnchorProvider(r,null,null);return yield new le.Program(Q,u,ce).instruction.processRefuel(P,C,S,h,m,new le.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:T,scoreVarsShipAccount:M,escrowAuthority:d,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,rent:le.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:f}})})}ve.createRefuelInstruction=m6;function b6(r,e,t,n,i,s,a,u){return lt(this,void 0,void 0,function*(){const[d,h]=yield $n(u,i,t),[f,m]=yield Pn(u,i),[I,P]=yield Nn(u),M=Dt(u),S=new le.AnchorProvider(r,null,null);return yield new le.Program(M,u,S).instruction.processRepair(h,P,m,new le.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:d,scoreVarsAccount:I,scoreVarsShipAccount:f,systemProgram:le.web3.SystemProgram.programId,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,rent:le.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}ve.createRepairInstruction=b6;function v6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const[s,a]=yield $n(i,n,e),[u,d]=yield Pn(i,n),[h,f]=yield Nn(i),m=Dt(i),I=new le.AnchorProvider(r,null,null);return yield new le.Program(m,i,I).instruction.processSettle(a,f,d,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}ve.createSettleInstruction=v6;function w6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const[s,a]=yield $n(i,n,e),[u,d]=yield Pn(i,n),[h,f]=yield tf(i),[m,I]=yield nf(i),P=Dt(i),M=new le.AnchorProvider(r,null,null),S=new le.Program(P,i,M),T={signers:[],instructions:[]};let C;const Q=yield(0,Qs.getTokenAccount)(r,e,t),ce=Q.tokenAccount;"createInstruction"in Q&&T.instructions.push(...Q.createInstruction),ce instanceof le.web3.Keypair?(C=ce.publicKey,T.signers.push(ce)):C=ce;const ae=yield S.instruction.processHarvest(a,d,f,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return T.instructions.push(ae),T})}ve.createHarvestInstruction=w6;function _6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const[s,a]=yield ci(i,n,e),[u,d]=yield sr(i,n,t,e),[h,f]=yield $n(i,n,e),[m,I]=yield Pn(i,n),[P,M]=yield Nn(i),S=Dt(i),T=new le.AnchorProvider(r,null,null),C=new le.Program(S,i,T),Q={signers:[],instructions:[]};let ce;const ae=yield(0,Qs.getTokenAccount)(r,e,t),he=ae.tokenAccount;"createInstruction"in ae&&Q.instructions.push(...ae.createInstruction),he instanceof le.web3.Keypair?(ce=he.publicKey,Q.signers.push(he)):ce=he;const E=yield C.instruction.processWithdrawFuel(f,M,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:P,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ce,fuelMint:t,escrowAuthority:s,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Q.instructions.push(E),Q})}ve.createWithdrawFuelInstruction=_6;function A6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const[s,a]=yield ci(i,n,e),[u,d]=yield sr(i,n,t,e),[h,f]=yield $n(i,n,e),[m,I]=yield Pn(i,n),[P,M]=yield Nn(i),S=Dt(i),T=new le.AnchorProvider(r,null,null),C=new le.Program(S,i,T),Q={signers:[],instructions:[]};let ce;const ae=yield(0,Qs.getTokenAccount)(r,e,t),he=ae.tokenAccount;"createInstruction"in ae&&Q.instructions.push(...ae.createInstruction),he instanceof le.web3.Keypair?(ce=he.publicKey,Q.signers.push(he)):ce=he;const E=yield C.instruction.processWithdrawFood(f,M,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:P,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ce,foodMint:t,escrowAuthority:s,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Q.instructions.push(E),Q})}ve.createWithdrawFoodInstruction=A6;function S6(r,e,t,n,i){return lt(this,void 0,void 0,function*(){const[s,a]=yield ci(i,n,e),[u,d]=yield sr(i,n,t,e),[h,f]=yield $n(i,n,e),[m,I]=yield Pn(i,n),[P,M]=yield Nn(i),S=Dt(i),T=new le.AnchorProvider(r,null,null),C=new le.Program(S,i,T),Q={signers:[],instructions:[]};let ce;const ae=yield(0,Qs.getTokenAccount)(r,e,t),he=ae.tokenAccount;"createInstruction"in ae&&Q.instructions.push(...ae.createInstruction),he instanceof le.web3.Keypair?(ce=he.publicKey,Q.signers.push(he)):ce=he;const E=yield C.instruction.processWithdrawArms(f,M,I,a,d,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:P,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ce,armsMint:t,escrowAuthority:s,tokenProgram:Pr.TOKEN_PROGRAM_ID,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Q.instructions.push(E),Q})}ve.createWithdrawArmsInstruction=S6;function k6(r,e,t,n,i,s){return lt(this,void 0,void 0,function*(){const[a,u]=yield ci(s,t,e),[d,h]=yield sr(s,t,null,e),[f,m]=yield $n(s,t,e),[I,P]=yield Pn(s,t),[M,S]=yield Nn(s),[T,C]=yield tf(s),[Q,ce]=yield nf(s),ae={signers:[],instructions:[]},he=Dt(s),E=new le.AnchorProvider(r,null,null),D=new le.Program(he,s,E);let z;const J=yield(0,Qs.getTokenAccount)(r,e,n),K=J.tokenAccount;"createInstruction"in J&&ae.instructions.push(...J.createInstruction),K instanceof le.web3.Keypair?(z=K.publicKey,ae.signers.push(K)):z=K;let q;const ne=yield(0,Qs.getTokenAccount)(r,e,t),x=ne.tokenAccount;"createInstruction"in ne&&ae.instructions.push(...ne.createInstruction),x instanceof le.web3.Keypair?(q=x.publicKey,ae.signers.push(x)):q=x;let V;const Z=yield(0,Qs.getTokenAccount)(r,e,i),Ke=Z.tokenAccount;"createInstruction"in Z&&ae.instructions.push(...Z.createInstruction),Ke instanceof le.web3.Keypair?(V=Ke.publicKey,ae.signers.push(Ke)):V=Ke;const me=yield D.instruction.processWithdrawShips(m,S,P,u,h,ce,C,{accounts:{playerAccount:e,shipStakingAccount:f,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:z,shipTokenAccountEscrow:d,shipTokenAccountReturn:q,toolkitTokenAccountSource:V,treasuryTokenAccount:T,treasuryAuthorityAccount:Q,escrowAuthority:a,tokenProgram:Pr.TOKEN_PROGRAM_ID,systemProgram:le.web3.SystemProgram.programId,clock:le.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return ae.instructions.push(me),ae})}ve.createWithdrawShipsInstruction=k6;function I6(r,e,t,n,i,s,a){return lt(this,void 0,void 0,function*(){const[u,d]=yield ci(a,t,e),[h,f]=yield sr(a,t,null,e),[m,I]=yield sr(a,t,n,e),[P,M]=yield sr(a,t,i,e),[S,T]=yield sr(a,t,s,e),[C,Q]=yield Nn(a),[ce,ae]=yield $n(a,t,e),he=Dt(a),E=new le.AnchorProvider(r,null,null);return yield new le.Program(he,a,E).instruction.processCloseAccounts(ae,Q,f,I,M,T,d,{accounts:{playerAccount:e,shipStakingAccount:ce,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:P,armsTokenAccountEscrow:S,escrowAuthority:u,tokenProgram:Pr.TOKEN_PROGRAM_ID,systemProgram:le.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:le.web3.SYSVAR_CLOCK_PUBKEY}})})}ve.closeAccountsInstruction=I6;var RS={};Object.defineProperty(RS,"__esModule",{value:!0});var nn={},xs=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{h(n.next(f))}catch(m){a(m)}}function d(f){try{h(n.throw(f))}catch(m){a(m)}}function h(f){f.done?s(f.value):i(f.value).then(u,d)}h((n=n.apply(r,e||[])).next())})},E6=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nn,"__esModule",{value:!0});nn.sendTokens=nn.confirmTokenBalance=nn.createMint=nn.mintTokens=nn.createAssociatedTokenAccountInstruction=nn.createRequestUnitsInstruction=nn.Numberu32=nn.createATokenAccount=nn.getAtaForMint=void 0;const qr=wt,Ar=Dc,P6=Gr,Dv=Sl.exports,Nv=E6(zv.exports);function BS(r,e){return xs(this,void 0,void 0,function*(){return qr.web3.PublicKey.findProgramAddress([e.toBuffer(),Ar.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],Ar.ASSOCIATED_TOKEN_PROGRAM_ID)})}nn.getAtaForMint=BS;function O6(r,e,t,n){return xs(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield BS(e,n),s=new qr.web3.Transaction,a=yield CS(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}nn.createATokenAccount=O6;class MS extends Nv.default{toBuffer(){const e=super.toArray().reverse(),t=Be.Buffer.from(e);if(t.length===4)return t;const n=Be.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Nv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}nn.Numberu32=MS;function x6(r){return xs(this,void 0,void 0,function*(){const e=new MS(1e6),t=Be.Buffer.from([0]),n=e.toBuffer();return new qr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new qr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Be.Buffer.concat([t,n])})})}nn.createRequestUnitsInstruction=x6;function CS(r,e,t,n){return xs(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:qr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ar.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:qr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new qr.web3.TransactionInstruction({keys:i,programId:Ar.ASSOCIATED_TOKEN_PROGRAM_ID,data:Be.Buffer.from([])})})}nn.createAssociatedTokenAccountInstruction=CS;function T6(r,e,t,n,i){return xs(this,void 0,void 0,function*(){const s=new qr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(Ar.Token.createMintToInstruction(Ar.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}nn.mintTokens=T6;function R6(r,e,t,n){return xs(this,void 0,void 0,function*(){const i=qr.web3.Keypair.generate(),s=new qr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(Ar.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=qr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:Ar.MintLayout.span,programId:Ar.TOKEN_PROGRAM_ID});s.add(u);const d=Ar.Token.createInitMintInstruction(Ar.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(d),yield r.sendAndConfirm(s,[i]),i.publicKey})}nn.createMint=R6;function B6(r,e,t,n){return xs(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,Dv.strict)(i===null),i!==null){const s=(0,P6.byteArrayToLong)(i.data.slice(64,72));(0,Dv.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}nn.confirmTokenBalance=B6;function M6(r,e,t,n){return xs(this,void 0,void 0,function*(){const i=new qr.web3.Transaction;return i.add(Ar.Token.createTransferInstruction(Ar.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}nn.sendTokens=M6;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yl,r),t(OS,r),t(xS,r),t(pg,r),t(ve,r),t(RS,r),t(nn,r),t(eo,r),t(Gr,r)})(Vn);const ol=new Ee("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),$v=new Ee("poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk"),C6=new Ee("ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU"),cs=new Ee("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc");class L6{multisigPDA;vaultPDA;registeredStakeAtlas;stakingAccountAtlas;async init(e){this.multisigPDA=e,this._setVaultPDA(),await this._setRegisteredStakeAtlas(),await this._setStakingAccountAtlas()}_setVaultPDA(){const[e]=Al({multisigPda:new Ee(this.multisigPDA),index:0});this.vaultPDA=e}async _setRegisteredStakeAtlas(){const[e]=await Vn.getRegisteredStake(cs,C6,ol,$v);this.registeredStakeAtlas=e}async _setStakingAccountAtlas(){const[e]=await Vn.getStakingAccount(cs,this.vaultPDA,this.registeredStakeAtlas);this.stakingAccountAtlas=e}async buildCreateStatingAccount(){return await Vn.createStakingAccountInstruction({connection:kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,programId:cs})}async buildStakeTokens(e){const[t]=Ee.findProgramAddressSync([this.vaultPDA.toBuffer(),Us.toBuffer(),ol.toBuffer()],Rx.ASSOCIATED_PROGRAM_ID);return await Vn.stakeTokensInstruction({connection:kn().connection,user:this.vaultPDA,stakeMint:ol,tokenSource:t,stakingAccount:this.stakingAccountAtlas,stakeQuantity:new Ln(parseFloat(e.toString())*Math.pow(10,Lg)),registeredStake:this.registeredStakeAtlas,programId:cs})}async buildHarvestRewards(){return await Vn.harvestRewardsInstruction({connection:kn().connection,user:this.vaultPDA,rewardMint:$v,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:cs})}async buildWithdrawTokens(){return await Vn.withdrawTokensInstruction({connection:kn().connection,user:this.vaultPDA,authority:this.vaultPDA,stakeMint:ol,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:cs})}async buildUnstakeTokens(){return await Vn.unstakeTokensInstruction({connection:kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:cs})}async buildCancelUnstake(){return await Vn.cancelUnstakeInstruction({connection:kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,programId:cs})}}const Do="[ATLAS-LOCKER] ",Lg=8,gc=new Ee("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),Zr=new Ee("poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk"),al=new Ee("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),Uv=new Ee("ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU"),_e=tw("globalStarAtlasLockerStore",{state:()=>({multisigPDA:nw("multisigPDA",""),vaultPDA:{},multisigInfo:{},registeredStakeAtlas:{},registeredStakePolis:{},stakingAccountAtlas:{},stakingAccountAtlasInfo:{},atlas_balance_wallet:"0",polis_balance_wallet:"0",atlas_balance_squads:"0",polis_balance_squads:"0",atlas_balance_locker:"0",polis_balance_locker:"0",SAFactory_LockerAtlas:new L6}),getters:{getMultisigPDA(r){return new Ee(r.multisigPDA)},getVaultPDA(){try{const[r]=Al({multisigPda:new Ee(this.multisigPDA),index:0});return r}catch{return""}},getNewTransactionIndex(r){const e=Number(r.multisigInfo.transactionIndex);return BigInt(e+1)}},actions:{async setAccounts(){_e().atlas_balance_wallet="0",_e().polis_balance_wallet="0",_e().atlas_balance_squads="0",_e().polis_balance_squads="0",_e().atlas_balance_locker="0",_e().polis_balance_locker="0",_e().stakingAccountAtlasInfo=void 0;const[r]=Al({multisigPda:new Ee(this.multisigPDA),index:0});this.vaultPDA=r,this.multisigInfo=await Tx.fromAccountAddress(kn().connection,new Ee(this.multisigPDA));const[e]=await Vn.getRegisteredStake(al,Uv,gc,Zr);this.registeredStakeAtlas=e;const[t]=await Vn.getRegisteredStake(al,Uv,gc,Zr);this.registeredStakePolis=t;try{const[n]=await Vn.getStakingAccount(al,this.vaultPDA,this.registeredStakeAtlas);this.stakingAccountAtlas=n}catch{}try{this.stakingAccountAtlasInfo=await Vn.getStakingAccountInfo(kn().connection,this.stakingAccountAtlas,al)}catch{}await K6()},async build_CreateStatingAccount(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"CreateStatingAccount: "+Mx,[(await this.SAFactory_LockerAtlas.buildCreateStatingAccount()).instructions[0]])},async build_StakeTokens(r){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"StakeTokens: "+r,[(await this.SAFactory_LockerAtlas.buildStakeTokens(r)).instructions[0]])},async build_harvestRewards(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"HarvestRewards",[(await this.SAFactory_LockerAtlas.buildHarvestRewards()).instructions[0]])},async build_withdrawTokens(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"WithdrawTokens",[(await this.SAFactory_LockerAtlas.buildWithdrawTokens()).instructions[0]])},async build_unstakeTokens(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"UnstakeTokens",[(await this.SAFactory_LockerAtlas.buildUnstakeTokens()).instructions[0]])},async build_cancelUnstake(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await No(Do+"CancelUnstake",[(await this.SAFactory_LockerAtlas.buildCancelUnstake()).instructions[0]])}}});async function No(r,e){const{sendTransaction:t,publicKey:n}=Ai(),i=new Ix({payerKey:_e().vaultPDA,recentBlockhash:(await kn().connection.getLatestBlockhash()).blockhash,instructions:e}),s=Bx({multisigPda:new Ee(_e().multisigPDA),transactionIndex:_e().getNewTransactionIndex,creator:n.value,vaultIndex:0,ephemeralSigners:0,transactionMessage:i,memo:r});console.log("build: "+r);const a=await t(new Ws().add(s),kn().connection);await Cx(a)}async function K6(){const{publicKey:r}=Ai();if(!r.value)return;const e=await Qa(gc,r.value),t=await Qa(Zr,r.value),n=await Qa(gc,_e().vaultPDA,!0),i=await Qa(Zr,_e().vaultPDA,!0),s=await Qa(gc,_e().stakingAccountAtlas,!0);try{_e().atlas_balance_wallet=(await kn().connection.getTokenAccountBalance(e)).value.uiAmountString??"0"}catch{_e().atlas_balance_wallet="-"}try{_e().polis_balance_wallet=(await kn().connection.getTokenAccountBalance(t)).value.uiAmountString??"0"}catch{_e().polis_balance_wallet="-"}try{_e().atlas_balance_squads=(await kn().connection.getTokenAccountBalance(n)).value.uiAmountString??"0"}catch{_e().atlas_balance_squads="-"}try{_e().polis_balance_squads=(await kn().connection.getTokenAccountBalance(i)).value.uiAmountString??"0"}catch{_e().polis_balance_squads="-"}try{_e().atlas_balance_locker=(await kn().connection.getTokenAccountBalance(s)).value.uiAmountString??""}catch{_e().atlas_balance_locker="-"}}const D6=$("div",{class:"text-h6 text-weight-thin"}," This Tool is build for easy interaction between StarAtlasLockers using a Squads.so multi signature account! ",-1),N6=$("div",{class:"text-subtitle1"}," Please enter the required information so send instructions to your Squads Account ",-1),$6=$("div",{class:"text-subtitle2 text-weight-thin text-orange-5"}," You will still need to approve the transaction in you squads account! ",-1),U6={class:"row q-gutter-x-sm items-center"},F6={class:"col"},W6=$("div",{class:"col text-weight-light"}," Squads.so -> Settings -> Multisig Account ",-1),V6={class:"row q-gutter-x-sm items-center"},z6={class:"col"},j6=$("div",{class:"col text-weight-light"},"Your Squads Account",-1),q6={class:"row items-center"},G6=$("div",{class:"text-subtitle1"},"Squads Multisig Info",-1),H6={key:0},Y6=$("div",{class:"text-subtitle2"},"Members",-1),Q6=$("div",{class:"row"},[$("div",{class:"col"},"Member Address"),$("div",null,"Permission")],-1),J6={class:"row"},X6={class:"col"},Z6=Bc({__name:"SetupLockerView",setup(r){return(e,t)=>(st(),Vi(Hl,{flat:""},{default:zt(()=>[Te(ei,null,{default:zt(()=>[D6]),_:1}),Te(ei,null,{default:zt(()=>[N6,$6]),_:1}),Te(ei,{class:"q-gutter-y-sm"},{default:zt(()=>[$("div",U6,[$("div",F6,[Te(yc,{dense:"",standout:"",modelValue:Le(_e)().multisigPDA,"onUpdate:modelValue":t[0]||(t[0]=n=>Le(_e)().multisigPDA=n),label:"MultisigPDA"},null,8,["modelValue"])]),W6]),$("div",V6,[$("div",z6,[Te(yc,{disable:"",dense:"",standout:"",modelValue:Le(_e)().getVaultPDA,"onUpdate:modelValue":t[1]||(t[1]=n=>Le(_e)().getVaultPDA=n),label:"VaultPDA"},null,8,["modelValue"])]),j6])]),_:1}),Te(ei,null,{default:zt(()=>{var n,i;return[$("div",q6,[G6,Te(mx),Te(er,{square:"",color:"primary",label:"Update Squads info",onClick:t[2]||(t[2]=s=>Le(_e)().setAccounts())})]),(i=(n=Le(_e)().multisigInfo)==null?void 0:n.members)!=null&&i.length?(st(),Wt("div",H6,[Y6,Te(xx,{dense:"",bordered:"",padding:"",class:"rounded-borders"},{default:zt(()=>[hb((st(),Vi(yb,null,{default:zt(()=>[Te(mb,null,{default:zt(()=>[Q6]),_:1})]),_:1})),[[pb]]),(st(!0),Wt(_l,null,Bp(Le(_e)().multisigInfo.members,s=>hb((st(),Vi(yb,{clickable:"",key:s.key},{default:zt(()=>[Te(mb,null,{default:zt(()=>[$("div",J6,[$("div",X6,Ct(s.key),1),$("div",null,Ct(s.permissions.mask),1)])]),_:2},1024)]),_:2},1024)),[[pb]])),128))]),_:1})])):ul("",!0)]}),_:1})]),_:1}))}}),e$={class:"row"},t$={class:"col-1"},n$={class:"col"},r$={class:"row q-pr-md items-center"},i$=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Squads Vault Account")],-1),s$={class:"col text-right text-subtitle1"},o$={class:"row q-pr-md items-center"},a$=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Squads Registered Stake")],-1),c$={class:"col text-right text-subtitle1"},u$={class:"row q-pr-md items-center"},l$=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Squads Staking Account")],-1),d$={class:"col text-right text-subtitle1"},f$=$("div",{class:"row items-center q-mx-md"},[$("div",{class:"col"},[$("div",{class:"text-h4"},"Instruction")]),$("div",{class:"col-4"},[$("div",{class:"text-h4 text-center"},"Action")])],-1),h$={class:"row items-center q-mx-md"},p$=$("div",{class:"col"},[$("div",{class:"text-h6"},"Create Staking Account"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will create a new locker instance for you ")],-1),g$={class:"col-4"},y$={class:"row items-center q-mx-md"},m$=$("div",{class:"col"},[$("div",{class:"text-h6"},"Stake Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will stake additional tokens ")],-1),b$={class:"col-4"},v$={class:"row q-gutter-x-xs"},w$={class:"row items-center q-mx-md"},_$=$("div",{class:"col"},[$("div",{class:"col text-h6"},"Harvest"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will claim your rewards ")],-1),A$={class:"col-4"},S$={class:"row items-center q-mx-md"},k$=$("div",{class:"col"},[$("div",{class:"text-h6"},"Unstake Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will initiate unstake of all tokens ")],-1),I$={class:"col-4"},E$={class:"row items-center q-mx-md"},P$=$("div",{class:"col"},[$("div",{class:"text-h6"},"Cancel Unstake"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will cancel unstake of all tokens ")],-1),O$={class:"col-4"},x$={class:"row items-center q-mx-md"},T$=$("div",{class:"col"},[$("div",{class:"text-h6"},"Withdraw Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will withdraw of all tokens after unstake ")],-1),R$={class:"col-4"},B$={class:"row items-center"},M$=$("div",{class:"col-1 text-h5"},"Locker Info",-1),C$={key:0,class:"col"},L$={class:"col text-right text-subtitle2 text-weight-light"},K$={class:"col text-right text-subtitle1"},D$={key:0},N$={key:1},$$={key:0},U$={key:1},F$={key:2},W$={key:1,class:"text-subtitle2 text-center"},V$=Bc({__name:"AtlasLockerView",setup(r){const e=sc(0);return Mp(async()=>{await _e().setAccounts()}),(t,n)=>(st(),Vi(Hl,{flat:""},{default:zt(()=>[Te(ei,null,{default:zt(()=>[$("div",e$,[$("div",t$,[Te(iw,{src:"/currencies/ATLAS.webp"})]),Te(ls,{class:"q-mx-sm",vertical:""}),$("div",n$,[$("div",r$,[i$,$("div",s$,[$("div",null,Ct(Le(_e)().vaultPDA),1)])]),$("div",o$,[a$,$("div",c$,[$("div",null,Ct(Le(_e)().registeredStakeAtlas),1)])]),$("div",u$,[l$,$("div",d$,[$("div",null,Ct(Le(_e)().stakingAccountAtlas),1)])])])])]),_:1}),Te(ei,null,{default:zt(()=>[f$,Te(ls,{class:"q-my-sm"}),$("div",h$,[p$,$("div",g$,[Te(er,{class:"full-width",square:"",label:"Sign",color:"primary",onClick:n[0]||(n[0]=i=>Le(_e)().build_CreateStatingAccount())})])]),$("div",y$,[m$,$("div",b$,[$("div",v$,[Te(yc,{dense:"",square:"",class:"col",standout:"",type:"number",modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=i=>e.value=i),label:"Amount to stake"},null,8,["modelValue"]),Te(er,{square:"",class:"col-3",label:"Sign",color:"primary",onClick:n[2]||(n[2]=i=>Le(_e)().build_StakeTokens(e.value))})])])]),$("div",w$,[_$,$("div",A$,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:n[3]||(n[3]=i=>Le(_e)().build_harvestRewards())})])]),$("div",S$,[k$,$("div",I$,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:n[4]||(n[4]=i=>Le(_e)().build_unstakeTokens())})])]),$("div",E$,[P$,$("div",O$,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:n[5]||(n[5]=i=>Le(_e)().build_cancelUnstake())})])]),$("div",x$,[T$,$("div",R$,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:n[6]||(n[6]=i=>Le(_e)().build_withdrawTokens())})])])]),_:1}),Te(ei,null,{default:zt(()=>[Te(ls,{class:"q-my-sm"}),$("div",B$,[M$,Te(ls,{class:"q-mx-sm",vertical:""}),Le(_e)().stakingAccountAtlasInfo?(st(),Wt("div",C$,[(st(!0),Wt(_l,null,Bp(Object.keys(Le(_e)().stakingAccountAtlasInfo),(i,s)=>(st(),Wt("div",{class:"row q-pr-md items-center",key:s},[$("div",L$,[$("div",null,Ct(i),1)]),$("div",K$,[["totalStake","activeStake","paidRewards","pendingRewards"].includes(i)?(st(),Wt("div",D$,Ct(parseInt(Le(_e)().stakingAccountAtlasInfo[i])*Math.pow(10,-Le(Lg))),1)):["stakedAtTs","lastPendingRewardCalcTs","lastHarvestTs","unstakedTs"].includes(i)?(st(),Wt("div",N$,[parseInt(Le(_e)().stakingAccountAtlasInfo[i])==0?(st(),Wt("div",$$," - ")):(st(),Wt("div",U$,Ct(new Date(parseInt(Le(_e)().stakingAccountAtlasInfo[i])*1e3).toLocaleString()),1))])):(st(),Wt("div",F$,Ct(Le(_e)().stakingAccountAtlasInfo[i]),1))])]))),128))])):(st(),Wt("div",W$,"No Locker found!"))])]),_:1})]),_:1}))}}),z$="0.5.6",j$="proxy_rewarder",q$=[{name:"registerLocker",docs:["Registers a Locker from the locked_voter program"],accounts:[{name:"admin",isMut:!0,isSigner:!0,docs:["Admin key"]},{name:"locker",isMut:!1,isSigner:!1,docs:["[locked_voter::Locker]."]},{name:"registeredLocker",isMut:!0,isSigner:!1,docs:["New RegisteredLocker account"],pda:{seeds:[{kind:"const",type:"string",value:"RegisteredLocker"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}},{name:"tokenMint",isMut:!1,isSigner:!1,docs:["The token mint that matches the Locker token mint (ie POLIS)"]},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1,docs:["The treasury token account holding all tokens to reward users"],pda:{seeds:[{kind:"const",type:"string",value:"TreasuryTokenAccount"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}},{name:"treasuryAuthority",isMut:!0,isSigner:!1,docs:["The treasury authority PDA     /// CHECK: pda token account authority"],pda:{seeds:[{kind:"const",type:"string",value:"TreasuryAuthority"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"updateRegisteredLocker",docs:["Updates `rewards` arrays in registered_locker [proxy_rewarder::registered_locker]."],accounts:[{name:"admin",isMut:!1,isSigner:!0,docs:["Admin key"]},{name:"locker",isMut:!1,isSigner:!1,docs:["The [locked_voter::locker] being exited from."]},{name:"registeredLocker",isMut:!0,isSigner:!1,docs:["RegisteredLocker account"],pda:{seeds:[{kind:"const",type:"string",value:"RegisteredLocker"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}}],args:[{name:"era",type:"u16"},{name:"index",type:"u16"},{name:"periodRewardAmount",type:"u64"}]},{name:"newProxyEscrow",accounts:[{name:"escrowOwner",isMut:!0,isSigner:!0,docs:["[Owner]."]},{name:"proxyEscrow",isMut:!0,isSigner:!1,docs:["[Escrow]."],pda:{seeds:[{kind:"const",type:"string",value:"ProxyEscrow"},{kind:"account",type:"publicKey",path:"escrow_owner"}]}},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["System program."]}],args:[{name:"bump",type:"u8"}]},{name:"newProxy",docs:["Creates a new [Proxy] for an account.","","A Reward Escrow, or [Escrow] for short, is an agreement between a users=>proxy (known as the `authority`) and the Reward Program to","reward POLIS over specific periods of time. (curve)","proportional to the amount of stakers."],accounts:[{name:"proxyEscrow",isMut:!0,isSigner:!1,docs:["[ProxyEscrow]."]},{name:"proxy",isMut:!0,isSigner:!1,docs:["[Proxy]."],pda:{seeds:[{kind:"const",type:"string",value:"Proxy"},{kind:"account",type:"publicKey",account:"ProxyEscrow",path:"proxy_escrow"},{kind:"account",type:"publicKey",path:"proxy_owner"}]}},{name:"tokenMint",isMut:!1,isSigner:!1,docs:["Mint of the token that can be used to join the [LockedVoter::Locker]."]},{name:"proxyOwner",isMut:!0,isSigner:!0,docs:["Authority of the [Proxy] to be created."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["System program."]}],args:[{name:"bump",type:"u8"}]},{name:"proxyLock",docs:["Locks `amount` of POLIS into the [LockedVoter::Escrow]."],accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["[locked_voter::Locker]."]},{name:"escrow",isMut:!0,isSigner:!1},{name:"userTokenAccount",isMut:!0,isSigner:!1,docs:["The source of deposited tokens."]},{name:"proxyTokenAccount",isMut:!0,isSigner:!1,docs:["Token account used to transfer governance tokens into [locked_voter::lock] escrow"]},{name:"escrowTokenAccount",isMut:!0,isSigner:!1,docs:["Token account held by the [locked_voter::Escrow]."]},{name:"proxy",isMut:!0,isSigner:!1,docs:["Authority of the [locked_voter::escrow]."],pda:{seeds:[{kind:"const",type:"string",value:"Proxy"},{kind:"account",type:"publicKey",account:"Proxy",path:"proxy.escrow"},{kind:"account",type:"publicKey",path:"payer"}]}},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]},{name:"lockedVoterProgram",isMut:!1,isSigner:!1,docs:["The [LockedVoter] program."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]},{name:"instructionsSysvar",isMut:!1,isSigner:!1},{name:"whitelistEntry",isMut:!1,isSigner:!1,docs:["Whitelist entry."]},{name:"registeredLocker",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"duration",type:"i64"}]},{name:"proxyExit",docs:["Exits the POLIS DAO; i.e., withdraws all staked tokens in an [Escrow] if the [Escrow] is unlocked."],accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["The [locked_voter::locker] being exited from."]},{name:"escrow",isMut:!0,isSigner:!1,docs:["The [locked_voter::Escrow] that is being closed."]},{name:"proxy",isMut:!0,isSigner:!1,docs:["Authority of the [locked_voter::Escrow]."],pda:{seeds:[{kind:"const",type:"string",value:"Proxy"},{kind:"account",type:"publicKey",account:"Proxy",path:"proxy.escrow"},{kind:"account",type:"publicKey",path:"payer"}]}},{name:"escrowTokenAccount",isMut:!0,isSigner:!1,docs:["Tokens locked up in the [locked_voter::Escrow]."]},{name:"proxyTokenAccount",isMut:!0,isSigner:!1,docs:["Destination for the tokens to unlock."]},{name:"userTokenAccount",isMut:!0,isSigner:!1,docs:["Final destination for the tokens to unlock."]},{name:"payer",isMut:!0,isSigner:!0,docs:["The payer to receive the rent refund."]},{name:"lockedVoterProgram",isMut:!1,isSigner:!1,docs:["The [LockedVoter] program."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]},{name:"registeredLocker",isMut:!1,isSigner:!1}],args:[]},{name:"claimRewards",docs:["Proxy Activates a proposal.","Proxy Casts a vote.","Claims POLIS Rewards; i.e., withdraws reward tokens from a treasury if the [snapshots::escrow_history] is confirmed."],accounts:[{name:"escrow",isMut:!1,isSigner:!1,docs:["The [locked_voter::Escrow] being validated from."]},{name:"locker",isMut:!1,isSigner:!1,docs:["The [locked_voter::locker] being exited from."]},{name:"proxy",isMut:!1,isSigner:!1,docs:["Authority of the [locked_voter::Escrow]."]},{name:"proxyEscrow",isMut:!0,isSigner:!1,docs:["[proxy_rewarder::proxy_escrow]."]},{name:"escrowHistory",isMut:!1,isSigner:!1,docs:["The [snapshots::escrow_history] to read and validate."]},{name:"lockerHistory",isMut:!1,isSigner:!1,docs:["The [snapshots::locker_history] to read and validate."]},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1,docs:["Treasury tokens in the [proxy_rewarder::treasury_token_account]. The treasury token account holding all tokens to reward users"],pda:{seeds:[{kind:"const",type:"string",value:"TreasuryTokenAccount"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}},{name:"registeredLocker",isMut:!1,isSigner:!1,docs:["RegisteredLocker account"]},{name:"treasuryAuthority",isMut:!1,isSigner:!1,docs:["The treasury authority PDA"],pda:{seeds:[{kind:"const",type:"string",value:"TreasuryAuthority"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"}]}},{name:"userTokenAccount",isMut:!0,isSigner:!1,docs:["Final destination for the tokens to unlock."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["[Owner]"]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]}],args:[]}],G$=[{name:"Proxy",type:{kind:"struct",fields:[{name:"escrow",docs:["The [Escrow] that this [Proxy] is part of."],type:"publicKey"},{name:"owner",docs:["The key of the account that is authorized to cpi via this [Proxy]."],type:"publicKey"},{name:"tokenMint",docs:["Mint of the token that must be locked in the [LockedVoter::Locker]."],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"proxyTokenAccount",docs:["The token account holding the proxy tokens."],type:"publicKey"}]}},{name:"ProxyEscrow",docs:["records rewards state on a user."],type:{kind:"struct",fields:[{name:"escrowOwner",docs:["The key of the account that is authorized to withdraw from the [Treasury]."],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"amount",docs:["Amount of tokens staked."],type:"u64"},{name:"escrowStartedAt",docs:["When the [proxy_escrow::escrow_owner] started their escrow."],type:"i64"},{name:"escrowEndsAt",docs:["When the escrow unlocks; i.e. the [proxy_escrow::escrow_owner] is scheduled to be allowed to withdraw their governance tokens."],type:"i64"},{name:"rewardsLastClaimedAt",docs:["When the [proxy_escrow::escrow_owner] last claimed rewards from [Treasury]."],type:"i64"},{name:"amountClaimed",docs:["Amount of tokens claimed."],type:"u64"}]}},{name:"RegisteredLocker",docs:["Registered locker - needs to be created to earn rewards",'PDA unique to ["RegisteredLocker", locker.key]',"reprc- pack"],type:{kind:"struct",fields:[{name:"admin",docs:["The key of the admin account that is managing the registered locker"],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"tokenMint",docs:["The token mint aligned with the locker and for rewards paid to users"],type:"publicKey"},{name:"locker",docs:["The locker account on the locked_voter program being registered"],type:"publicKey"},{name:"padding",docs:["Padding for aligning the struct to an 8-byte boundary."],type:{array:["u8",7]}},{name:"rewardAmountPaidPerPeriodEra0",docs:["All tracked historical reward rate totals per period per era allocated to users."],type:{array:["u64",256]}},{name:"rewardAmountPaidPerPeriodEra1",type:{array:["u64",256]}},{name:"rewardAmountPaidPerPeriodEra2",type:{array:["u64",256]}}]}},{name:"TreasuryAuthority",docs:["Treasury Authority - PDA who has authority to withdraw rewards from the treasury."],type:{kind:"struct",fields:[{name:"locker",docs:["The locker account on the locked_voter program being registered"],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"}]}}],H$=[{name:"ClaimRewardsEvent",fields:[{name:"escrowOwner",type:"publicKey",index:!1},{name:"locker",type:"publicKey",index:!1},{name:"tokenMint",type:"publicKey",index:!1},{name:"amountClaimed",type:"u64",index:!1},{name:"prevRewardsLastClaimedAt",type:"i64",index:!1},{name:"rewardsLastClaimedAt",type:"i64",index:!1}]},{name:"NewProxyEscrowEvent",fields:[{name:"proxyEscrow",type:"publicKey",index:!1},{name:"owner",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewProxyEvent",fields:[{name:"proxy",type:"publicKey",index:!1},{name:"proxyOwner",type:"publicKey",index:!1},{name:"proxyEscrow",type:"publicKey",index:!1},{name:"tokenMint",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"ProxyExitEscrowEvent",fields:[{name:"escrowOwner",type:"publicKey",index:!1},{name:"locker",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1},{name:"lockerSupply",type:"u64",index:!1},{name:"releasedAmount",type:"u64",index:!1}]},{name:"ProxyLockEvent",fields:[{name:"locker",type:"publicKey",index:!1},{name:"escrowOwner",type:"publicKey",index:!1},{name:"tokenMint",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"lockerSupply",type:"u64",index:!1},{name:"duration",type:"i64",index:!1},{name:"prevEscrowEndsAt",type:"i64",index:!1},{name:"nextEscrowEndsAt",type:"i64",index:!1},{name:"nextEscrowStartedAt",type:"i64",index:!1}]}],Y$=[{code:6e3,name:"ProgramNotWhitelisted",msg:"CPI caller not whitelisted to invoke lock instruction."},{code:6001,name:"LockupDurationTooShort",msg:"Lockup duration must at least be the min stake duration."},{code:6002,name:"LockupDurationTooLong",msg:"Lockup duration must at most be the max stake duration."},{code:6003,name:"RefreshCannotShorten",msg:"A voting escrow refresh cannot shorten the escrow time remaining."},{code:6004,name:"EscrowNotEnded",msg:"Escrow has not ended."},{code:6005,name:"MustProvideWhitelist",msg:"Program whitelist enabled; please provide whitelist entry and instructions sysvar"},{code:6006,name:"EscrowOwnerNotWhitelisted",msg:"CPI caller not whitelisted for escrow owner to invoke lock instruction."},{code:6007,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6008,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6009,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6010,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6011,name:"EraMismatch",msg:"Era mismatch."},{code:6012,name:"WrongPDA",msg:"Wrong PDA proxy exit."},{code:6013,name:"YouHaveNoPendingRewards",msg:"You have no claimable rewards."},{code:6014,name:"MustCallProxyLockWithWhitelist",msg:"Must call `proxy_lock_with_whitelist` to lock via CPI."},{code:6015,name:"RewardsNotReady",msg:"rewards_last_claimed_at > now"},{code:6016,name:"InvalidAdmin",msg:"locker.base != to the admin signer"}],Q$={address:"gateVwTnKyFrE8nxUUgfzoZTPKgJQZUbLsEidpG4Dp2"};var Tp={version:z$,name:j$,instructions:q$,accounts:G$,events:H$,errors:Y$,metadata:Q$};const J$="0.1.1",X$="locked_voter",Z$=[{name:"newLocker",docs:["Creates a new [Locker]."],accounts:[{name:"base",isMut:!1,isSigner:!0,docs:["Base."]},{name:"locker",isMut:!0,isSigner:!1,docs:["[Locker]."],pda:{seeds:[{kind:"const",type:"string",value:"Locker"},{kind:"account",type:"publicKey",path:"base"}]}},{name:"tokenMint",isMut:!1,isSigner:!1,docs:["Mint of the token that can be used to join the [Locker]."]},{name:"governor",isMut:!1,isSigner:!1,docs:["[Governor] associated with the [Locker]."]},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["System program."]}],args:[{name:"bump",type:"u8"},{name:"params",type:{defined:"LockerParams"}}]},{name:"newEscrow",docs:["Creates a new [Escrow] for an account.","","A Vote Escrow, or [Escrow] for short, is an agreement between an account (known as the `authority`) and the DAO to","lock up tokens for a specific period of time, in exchange for voting rights","linearly proportional to the amount of votes given."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["[Locker]."]},{name:"escrow",isMut:!0,isSigner:!1,docs:["[Escrow]."],pda:{seeds:[{kind:"const",type:"string",value:"Escrow"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"},{kind:"account",type:"publicKey",path:"escrow_owner"}]}},{name:"escrowOwner",isMut:!1,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["System program."]}],args:[{name:"bump",type:"u8"}]},{name:"lock",docs:["Stakes `amount` tokens into the [Escrow].","WARNING: if the program has a whitelist, one should use [crate::locked_voter::lock_with_whitelist] instead.","This version of the instruction is deprecated."],accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["[Locker]."]},{name:"escrow",isMut:!0,isSigner:!1,docs:["[Escrow]."]},{name:"escrowTokens",isMut:!0,isSigner:!1,docs:["Token account held by the [Escrow]."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["Authority of the [Escrow] and [Self::source_tokens]."]},{name:"sourceTokens",isMut:!0,isSigner:!1,docs:["The source of deposited tokens."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]}],args:[{name:"amount",type:"u64"},{name:"duration",type:"i64"}]},{name:"lockWithWhitelistEntry",docs:["Stakes `amount` tokens into the [Escrow], if there is a whitelist.","Stakes `amount` tokens into the [Escrow] via CPI by using the provided [LockerWhitelistEntry]."],accounts:[{name:"lock",accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["[Locker]."]},{name:"escrow",isMut:!0,isSigner:!1,docs:["[Escrow]."]},{name:"escrowTokens",isMut:!0,isSigner:!1,docs:["Token account held by the [Escrow]."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["Authority of the [Escrow] and [Self::source_tokens]."]},{name:"sourceTokens",isMut:!0,isSigner:!1,docs:["The source of deposited tokens."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]}]},{name:"instructionsSysvar",isMut:!1,isSigner:!1},{name:"whitelistEntry",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"duration",type:"i64"}]},{name:"exit",docs:["Stakes `amount` tokens into the [Escrow] if there is no whitelist.","Exits the DAO; i.e., withdraws all staked tokens in an [Escrow] if the [Escrow] is unlocked."],accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["The [Locker] being exited from."]},{name:"escrow",isMut:!0,isSigner:!1,docs:["The [Escrow] that is being closed."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["Authority of the [Escrow]."]},{name:"escrowTokens",isMut:!0,isSigner:!1,docs:["Tokens locked up in the [Escrow]."]},{name:"destinationTokens",isMut:!0,isSigner:!1,docs:["Destination for the tokens to unlock."]},{name:"payer",isMut:!0,isSigner:!0,docs:["The payer to receive the rent refund."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["Token program."]}],args:[]},{name:"activateProposal",docs:["Activates a proposal."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"governor",isMut:!1,isSigner:!1,docs:["The [Governor]."]},{name:"proposal",isMut:!0,isSigner:!1,docs:["The [Proposal]."]},{name:"escrow",isMut:!1,isSigner:!1,docs:["The user's [Escrow]."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["The [Escrow]'s owner."]},{name:"governProgram",isMut:!1,isSigner:!1,docs:["The [govern] program."]}],args:[]},{name:"castVote",docs:["Casts a vote."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"escrow",isMut:!1,isSigner:!1,docs:["The [Escrow] that is voting."]},{name:"voteDelegate",isMut:!1,isSigner:!0,docs:["Vote delegate of the [Escrow]."]},{name:"proposal",isMut:!0,isSigner:!1,docs:["The [Proposal] being voted on."]},{name:"vote",isMut:!0,isSigner:!1,docs:["The [Vote]."]},{name:"governor",isMut:!1,isSigner:!1,docs:["The [Governor]."]},{name:"governProgram",isMut:!1,isSigner:!1,docs:["The [govern] program."]}],args:[{name:"side",type:"u8"}]},{name:"setVoteDelegate",docs:["Delegate escrow vote."],accounts:[{name:"escrow",isMut:!0,isSigner:!1,docs:["The [Escrow]."]},{name:"escrowOwner",isMut:!1,isSigner:!0,docs:["The owner of the [Escrow]."]}],args:[{name:"newDelegate",type:"publicKey"}]},{name:"setLockerParams",docs:["Set locker params."],accounts:[{name:"locker",isMut:!0,isSigner:!1,docs:["The [Locker]."]},{name:"governor",isMut:!1,isSigner:!1,docs:["The [Governor]."]},{name:"smartWallet",isMut:!1,isSigner:!0,docs:["The smart wallet on the [Governor]."]}],args:[{name:"params",type:{defined:"LockerParams"}}]},{name:"approveProgramLockPrivilege",docs:["Creates a new [LockerWhitelistEntry] to whitelist program from CPI."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"whitelistEntry",isMut:!0,isSigner:!1,docs:["[LockerWhitelistEntry]."],pda:{seeds:[{kind:"const",type:"string",value:"LockerWhitelistEntry"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"},{kind:"account",type:"publicKey",path:"executable_id"},{kind:"account",type:"publicKey",path:"whitelisted_owner"}]}},{name:"governor",isMut:!1,isSigner:!1,docs:["Governor for the [Locker]."]},{name:"smartWallet",isMut:!1,isSigner:!0,docs:["Smart wallet on the [Governor]."]},{name:"executableId",isMut:!1,isSigner:!1},{name:"whitelistedOwner",isMut:!1,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["System program."]}],args:[{name:"bump",type:"u8"}]},{name:"revokeProgramLockPrivilege",docs:["Close a [LockerWhitelistEntry] revoking program's CPI privilege."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"whitelistEntry",isMut:!0,isSigner:!1,docs:["[LockerWhitelistEntry]."]},{name:"governor",isMut:!1,isSigner:!1,docs:["Governor for the [Locker]."]},{name:"smartWallet",isMut:!1,isSigner:!0,docs:["Smart wallet on the [Governor]."]},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer of the initialization."]}],args:[]}],eU=[{name:"Locker",docs:["A group of [Escrow]s."],type:{kind:"struct",fields:[{name:"base",docs:["Base account used to generate signer seeds."],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"tokenMint",docs:["Mint of the token that must be locked in the [Locker]."],type:"publicKey"},{name:"lockedSupply",docs:["Total number of tokens locked in [Escrow]s."],type:"u64"},{name:"governor",docs:["Governor associated with the [Locker]."],type:"publicKey"},{name:"params",docs:["Mutable parameters of how a [Locker] should behave."],type:{defined:"LockerParams"}}]}},{name:"LockerWhitelistEntry",docs:["An entry in the [Locker]'s whitelist.","","The whitelist controls which programs are allowed to stake tokens into the system."],type:{kind:"struct",fields:[{name:"bump",docs:["Bump seed."],type:"u8"},{name:"locker",docs:["[Locker] this whitelist entry belongs to."],type:"publicKey"},{name:"programId",docs:["Key of the program_id allowed to call the `lock` CPI."],type:"publicKey"},{name:"owner",docs:["The account authorized to be the [Escrow::owner] with this CPI.","If set to [anchor_lang::solana_program::system_program::ID],","all accounts are allowed to be the [Escrow::owner]."],type:"publicKey"}]}},{name:"Escrow",docs:["Locks tokens on behalf of a user."],type:{kind:"struct",fields:[{name:"locker",docs:["The [Locker] that this [Escrow] is part of."],type:"publicKey"},{name:"owner",docs:["The key of the account that is authorized to stake into/withdraw from this [Escrow]."],type:"publicKey"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"tokens",docs:["The token account holding the escrow tokens."],type:"publicKey"},{name:"amount",docs:["Amount of tokens staked."],type:"u64"},{name:"escrowStartedAt",docs:["When the [Escrow::owner] started their escrow."],type:"i64"},{name:"escrowEndsAt",docs:["When the escrow unlocks; i.e. the [Escrow::owner] is scheduled to be allowed to withdraw their tokens."],type:"i64"},{name:"voteDelegate",docs:["Account that is authorized to vote on behalf of this [Escrow].","Defaults to the [Escrow::owner]."],type:"publicKey"}]}}],tU=[{name:"LockerParams",docs:["Contains parameters for the [Locker]."],type:{kind:"struct",fields:[{name:"whitelistEnabled",docs:["Whether or not the locking whitelist system is enabled."],type:"bool"},{name:"maxStakeVoteMultiplier",docs:["The weight of a maximum vote lock relative to the total number of tokens locked.","For example, veCRV is 10 because 1 CRV locked for 4 years = 10 veCRV."],type:"u8"},{name:"minStakeDuration",docs:["Minimum staking duration."],type:"u64"},{name:"maxStakeDuration",docs:["Maximum staking duration."],type:"u64"},{name:"proposalActivationMinVotes",docs:["Minimum number of votes required to activate a proposal."],type:"u64"}]}}],nU=[{name:"ApproveLockPrivilegeEvent",fields:[{name:"locker",type:"publicKey",index:!1},{name:"programId",type:"publicKey",index:!1},{name:"owner",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"ExitEscrowEvent",fields:[{name:"escrowOwner",type:"publicKey",index:!1},{name:"locker",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1},{name:"lockerSupply",type:"u64",index:!1},{name:"releasedAmount",type:"u64",index:!1}]},{name:"LockEvent",fields:[{name:"locker",type:"publicKey",index:!1},{name:"escrowOwner",type:"publicKey",index:!1},{name:"tokenMint",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"lockerSupply",type:"u64",index:!1},{name:"duration",type:"i64",index:!1},{name:"prevEscrowEndsAt",type:"i64",index:!1},{name:"nextEscrowEndsAt",type:"i64",index:!1},{name:"nextEscrowStartedAt",type:"i64",index:!1}]},{name:"NewEscrowEvent",fields:[{name:"escrow",type:"publicKey",index:!1},{name:"escrowOwner",type:"publicKey",index:!1},{name:"locker",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewLockerEvent",fields:[{name:"governor",type:"publicKey",index:!1},{name:"locker",type:"publicKey",index:!1},{name:"tokenMint",type:"publicKey",index:!1},{name:"params",type:{defined:"LockerParams"},index:!1}]},{name:"RevokeLockPrivilegeEvent",fields:[{name:"locker",type:"publicKey",index:!1},{name:"programId",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"LockerSetParamsEvent",fields:[{name:"locker",type:"publicKey",index:!1},{name:"prevParams",type:{defined:"LockerParams"},index:!1},{name:"params",type:{defined:"LockerParams"},index:!1}]},{name:"SetVoteDelegateEvent",fields:[{name:"escrowOwner",type:"publicKey",index:!1},{name:"oldDelegate",type:"publicKey",index:!1},{name:"newDelegate",type:"publicKey",index:!1}]}],rU=[{code:6e3,name:"ProgramNotWhitelisted",msg:"CPI caller not whitelisted to invoke lock instruction."},{code:6001,name:"LockupDurationTooShort",msg:"Lockup duration must at least be the min stake duration."},{code:6002,name:"LockupDurationTooLong",msg:"Lockup duration must at most be the max stake duration."},{code:6003,name:"RefreshCannotShorten",msg:"A voting escrow refresh cannot shorten the escrow time remaining."},{code:6004,name:"EscrowNotEnded",msg:"Escrow has not ended."},{code:6005,name:"MustProvideWhitelist",msg:"Program whitelist enabled; please provide whitelist entry and instructions sysvar or use the 'lock_with_whitelist' instruction."},{code:6006,name:"EscrowOwnerNotWhitelisted",msg:"CPI caller not whitelisted for escrow owner to invoke lock instruction."},{code:6007,name:"MustCallLockWithWhitelistEntry",msg:"Must call `lock_with_whitelist_entry` to lock via CPI."},{code:6008,name:"MustCallLockPermissionless",msg:"Must call `lock_permissionless` since this DAO does not have a CPI whitelist."}],iU={address:"Lock7kBijGCQLEFAmXcengzXKA88iDNQPriQ7TbgeyG"};var LS={version:J$,name:X$,instructions:Z$,accounts:eU,types:tU,events:nU,errors:rU,metadata:iU};const sU="0.1.1",oU="snapshots",aU=[{name:"createEscrowHistory",docs:["Creates a [EscrowHistory]."],accounts:[{name:"escrow",isMut:!1,isSigner:!1,docs:["The [Escrow]."]},{name:"escrowHistory",isMut:!0,isSigner:!1,docs:["The [EscrowHistory] to be created."],pda:{seeds:[{kind:"const",type:"string",value:"EscrowHistory"},{kind:"account",type:"publicKey",account:"Escrow",path:"escrow"},{kind:"arg",type:"u16",path:"era"}]}},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["[System] program."]}],args:[{name:"era",type:"u16"}]},{name:"createLockerHistory",docs:["Creates a [LockerHistory]."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"lockerHistory",isMut:!0,isSigner:!1,docs:["The [LockerHistory] to be created."],pda:{seeds:[{kind:"const",type:"string",value:"LockerHistory"},{kind:"account",type:"publicKey",account:"Locker",path:"locker"},{kind:"arg",type:"u16",path:"era"}]}},{name:"payer",isMut:!0,isSigner:!0,docs:["Payer."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["[System] program."]}],args:[{name:"era",type:"u16"}]},{name:"sync",docs:["Synchronize an [locked_voter::Escrow] with the [LockerHistory]/[EscrowHistory]."],accounts:[{name:"locker",isMut:!1,isSigner:!1,docs:["The [Locker]."]},{name:"escrow",isMut:!1,isSigner:!1,docs:["The [Escrow]."]},{name:"lockerHistory",isMut:!0,isSigner:!1,docs:["The [LockerHistory] to sync."]},{name:"escrowHistory",isMut:!0,isSigner:!1,docs:["The [EscrowHistory] to sync."]}],args:[]}],cU=[{name:"LockerHistory",docs:["Stores the total number of veTokens in circulation for each period.","","The [LockerHistory] account stores 256 periods, each 3 days each.","For a 5-year [locked_voter::Locker], there will be at least 3 of these accounts existing","at any given time, since the maximum lock period is 5 years."],type:{kind:"struct",fields:[{name:"locker",docs:["The [locked_voter::Locker] being tracked."],type:"publicKey"},{name:"era",docs:["The era. Multiplying this by [ERA_NUM_PERIODS] * [PERIOD_SECONDS];"],type:"u16"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"padding",docs:["Padding for aligning the struct to an 8-byte boundary."],type:{array:["u8",5]}},{name:"veBalances",docs:["The sum of all tracked historical vote escrow balances."],type:{array:["u64",256]}},{name:"veCounts",docs:["Number of voters with non-zero balances at each epoch."],type:{array:["u64",256]}}]}},{name:"EscrowHistory",docs:["Stores the total veToken balance of an [locked_voter::Escrow]","for the given epochs.","","Any time someone refreshes and/or modifies their vote [locked_voter::Escrow], they","should refresh their [EscrowHistory] accounts."],type:{kind:"struct",fields:[{name:"escrow",docs:["The [locked_voter::Escrow] being tracked."],type:"publicKey"},{name:"era",docs:["The era."],type:"u16"},{name:"bump",docs:["Bump seed."],type:"u8"},{name:"padding",docs:["Padding for aligning the struct to an 8-byte boundary."],type:{array:["u8",5]}},{name:"veBalances",docs:["All tracked historical vote escrow balances for this [locked_voter::Escrow]."],type:{array:["u64",256]}}]}}],uU=[{code:6e3,name:"LockerEscrowMismatch",msg:"Locker/escrow mismatch."},{code:6001,name:"EraMismatch",msg:"Era mismatch."},{code:6002,name:"EscrowBalanceDecreased",msg:"Escrow balances cannot decrease."}],lU={address:"snapNQkxsiqDWdbNfz8KVB7e3NPzLwtHHA6WV8kKgUc"};var KS={version:sU,name:oU,instructions:aU,accounts:cU,errors:uU,metadata:lU};const cl=new Ee("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Fv=new Ee(Tp.metadata.address),Yh=new Ee(LS.metadata.address),Qh=new Ee(KS.metadata.address),dU=new Ee("5WmM9c9WE71y78Ah8Bp8vgyoStscM1ZZyaaFqRf8b2Qa"),fU=new Ee("GW8UH9QYNyFd5zVQJ6srjG6DJSq3WkMdAD123Z7LdzwV"),hU=new Ee("EAgUhz4LG8fqtrShFo1NDrvEiNPxEi7kHe96D76NzkAj"),pU="processed",gU="confirmed";class yU{owner;payer;wallet;provider;pg_proxy_rewarder;pg_locked_voter;pg_snapshot;locker;whitelistEntry;registeredLocker;proxyEscrow;bump_proxyEscrow;proxy;bump_proxy;escrow;bump_escrow;ata_proxy;ata_proxy_bump;ata_escrow;ata_escrow_bump;init(e,t,n){this.wallet=e,this.owner=t,this.payer=n,this.locker=dU,this.whitelistEntry=fU,this.registeredLocker=hU;const i=kn().connection;this.provider=new Ex(i,this.wallet,{preflightCommitment:pU,commitment:gU}),this.pg_proxy_rewarder=new _h(Tp,new Ee(Tp.metadata.address),this.provider),this.pg_locked_voter=new _h(LS,Yh,this.provider),this.pg_snapshot=new _h(KS,Qh,this.provider)}async setAccounts(){[this.proxyEscrow,this.bump_proxyEscrow]=Ee.findProgramAddressSync([Ha("ProxyEscrow"),this.owner.toBuffer()],Fv),[this.proxy,this.bump_proxy]=Ee.findProgramAddressSync([Ha("Proxy"),this.proxyEscrow.toBuffer(),this.owner.toBuffer()],Fv),[this.escrow,this.bump_escrow]=Ee.findProgramAddressSync([Ha("Escrow"),this.locker.toBuffer(),this.proxy.toBuffer()],Yh),[this.ata_proxy,this.ata_proxy_bump]=Ee.findProgramAddressSync([this.proxy.toBuffer(),Us.toBuffer(),Zr.toBuffer()],cl),[this.ata_escrow,this.ata_escrow_bump]=Ee.findProgramAddressSync([this.escrow.toBuffer(),Us.toBuffer(),Zr.toBuffer()],cl)}async buildSync(e){await this.setAccounts();const t=new Ws;for(const n of Wv(e)){const i=(await this.pg_snapshot.account.lockerHistory.all()).find(a=>a.account.era==n).publicKey,[s]=Ee.findProgramAddressSync([Ha("EscrowHistory"),this.escrow.toBuffer(),new Ln(n).toBuffer("le",2)],Qh);t.add(await this.pg_snapshot.methods.sync().accounts({locker:this.locker,escrow:this.escrow,lockerHistory:i,escrowHistory:s}).instruction())}}async buildCreateAccounts(){await this.setAccounts();const e=new Ws;return e.add(await this.pg_proxy_rewarder.methods.newProxyEscrow(new Ln(this.bump_proxyEscrow)).accounts({escrowOwner:this.owner,proxyEscrow:this.proxyEscrow,payer:this.payer,systemProgram:Vs.programId}).instruction()),e.add(await this.pg_proxy_rewarder.methods.newProxy(new Ln(this.bump_proxy)).accounts({proxyEscrow:this.proxyEscrow,proxy:this.proxy,tokenMint:Zr,proxyOwner:this.owner,systemProgram:Vs.programId}).instruction()),e.add(await this.pg_locked_voter.methods.newEscrow(new Ln(this.bump_escrow)).accounts({locker:this.locker,escrow:this.escrow,escrowOwner:this.proxy,payer:this.payer,systemProgram:Vs.programId}).instruction()),e.add(bb(this.payer,this.ata_proxy,this.proxy,Zr)),e.add(bb(this.payer,this.ata_escrow,this.escrow,Zr)),e}async buildCreateLocker(e,t){await this.setAccounts();const n=new Ws;for(const s of Wv(e)){const[a]=Ee.findProgramAddressSync([Ha("EscrowHistory"),this.escrow.toBuffer(),new Ln(s).toBuffer("le",2)],Qh);n.add(await this.pg_snapshot.methods.createEscrowHistory(s).accounts({escrow:this.escrow,escrowHistory:a,payer:this.payer,systemProgram:Vs.programId}).instruction())}const[i]=Ee.findProgramAddressSync([this.owner.toBuffer(),Us.toBuffer(),Zr.toBuffer()],cl);return n.add(await this.pg_proxy_rewarder.methods.proxyLock(new Ln(t),new Ln(e)).accounts({locker:this.locker,escrow:this.escrow,userTokenAccount:i,proxyTokenAccount:this.ata_proxy,escrowTokenAccount:this.ata_escrow,proxy:this.proxy,payer:this.payer,lockedVoterProgram:Yh,tokenProgram:Us,instructionsSysvar:Px,whitelistEntry:this.whitelistEntry,registeredLocker:this.registeredLocker}).instruction()),n}async buildClaimLocker(){await this.setAccounts();const e=new Ws,[t]=Ee.findProgramAddressSync([this.owner.toBuffer(),Us.toBuffer(),Zr.toBuffer()],cl);return e.add(await this.pg_proxy_rewarder.methods.claimRewards().accounts({escrow:this.escrow,locker:this.locker,proxy:this.proxy,proxyEscrow:this.proxyEscrow,escrowHistory:void 0,lockerHistory:this.locker,treasuryTokenAccount:void 0,registeredLocker:void 0,treasuryAuthority:void 0,userTokenAccount:t,escrowOwner:this.owner,tokenProgram:Us}).instruction()),e}}function Wv(r){const t=r/60/60/24/255,n=[];for(let i=0;i<t;i++)n.push(3+i);return n}const Ni=tw("globalLockerPolisStore",{state:()=>({lockerFactory:new yU,multisigPDA:nw("multisigPDA",""),vaultPDA:{}}),getters:{},actions:{async init(){if(gb().value){const[r,e]=Al({multisigPda:new Ee(this.multisigPDA),index:0});this.vaultPDA=r,this.lockerFactory.init(gb().value,Ai().publicKey.value,Ai().publicKey.value),await this.lockerFactory.setAccounts()}},async make_createATAs(){const r=await this.lockerFactory.buildCreateAccounts();console.log(r),await Vv("Create Locker Accounts",r,this.vaultPDA,new Ee(this.multisigPDA))},async make_createLocker(r,e){const t=await this.lockerFactory.buildCreateLocker(r,e);console.log(t),await Vv("Create Locker",t,this.vaultPDA,new Ee(this.multisigPDA))}}});async function Vv(r,e,t,n){const{sendTransaction:i,publicKey:s}=Ai();await i(e,kn().connection)}const mU=$("div",{class:"text-h1 text-red"},"!Under construction!",-1),bU={class:"row"},vU={class:"col-1"},wU={class:"col"},_U={class:"row q-pr-md items-center"},AU=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Squads Vault Account")],-1),SU={class:"col text-right text-subtitle1"},kU={class:"row q-pr-md items-center"},IU=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Polis Escrow Account")],-1),EU={class:"col text-right text-subtitle1"},PU={class:"row q-pr-md items-center"},OU=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Polis Locker Account")],-1),xU={class:"col text-right text-subtitle1"},TU={class:"row q-pr-md items-center"},RU=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Polis Proxy Account")],-1),BU={class:"col text-right text-subtitle1"},MU={class:"row q-pr-md items-center"},CU=$("div",{class:"col text-right text-subtitle2 text-weight-light"},[$("div",null,"Polis Proxy Escrow Account")],-1),LU={class:"col text-right text-subtitle1"},KU=$("div",{class:"row items-center q-mx-md"},[$("div",{class:"col"},[$("div",{class:"text-h4"},"Instruction")])],-1),DU={class:"row items-center q-ma-md"},NU=$("div",{class:"col"},[$("div",{class:"col text-h6"},"1. Initialize"),$("div",{class:"text-subtitle2 text-weight-light"}," Instruction will initialize the ATA token accounts ")],-1),$U={class:"col-4"},UU={class:"row items-center q-ma-md"},FU=$("div",{class:"col"},[$("div",{class:"text-h6"},"2. Setup"),$("div",{class:"text-subtitle2 text-weight-light"}," Instruction will create a new locker instance ")],-1),WU={class:"col-4"},VU={class:"row items-center q-ma-md"},zU=$("div",{class:"col"},[$("div",{class:"text-h6"},"Stake Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will stake additional tokens ")],-1),jU={class:"col-4"},qU={class:""},GU={class:"row items-center q-ma-md"},HU=$("div",{class:"col"},[$("div",{class:"col text-h6"},"Harvest"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will claim your rewards ")],-1),YU={class:"col-4"},QU={class:"row items-center q-ma-md"},JU=$("div",{class:"col"},[$("div",{class:"text-h6"},"Unstake Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will initiate unstake of all tokens ")],-1),XU={class:"col-4"},ZU={class:"row items-center q-ma-md"},eF=$("div",{class:"col"},[$("div",{class:"text-h6"},"Cancel Unstake?"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will cancel unstake of all tokens ")],-1),tF={class:"col-4"},nF={class:"row items-center q-ma-md"},rF=$("div",{class:"col"},[$("div",{class:"text-h6"},"Withdraw Tokens"),$("div",{class:"text-subtitle2 text-weight-light"}," This instruction will withdraw of all tokens after unstake ")],-1),iF={class:"col-4"},sF={class:"row items-center"},oF=$("div",{class:"col-1 text-h5"},"Locker Info",-1),aF={key:0,class:"col"},cF={class:"col text-right text-subtitle2 text-weight-light"},uF={class:"col text-right text-subtitle1"},lF={key:0},dF={key:1},fF={key:0},hF={key:1},pF={key:2},gF={key:1,class:"text-subtitle2 text-center"},yF=Bc({__name:"PolisLockerView",setup(r){new Ee("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");const e=sc(1),t=sc([{label:"1 Day",value:1*24*60*60},{label:"1 Week",value:1*7*24*60*60},{label:"2 Weeks",value:2*7*24*60*60},{label:"1 months",value:1/12*365*24*60*60},{label:"3 months",value:.25*365*24*60*60},{label:"6 months",value:.5*365*24*60*60},{label:"9 months",value:.75*365*24*60*60},{label:"1 years",value:1*365*24*60*60},{label:"2 years",value:2*365*24*60*60},{label:"3 years",value:3*365*24*60*60},{label:"4 years",value:4*365*24*60*60},{label:"5 years",value:5*365*24*60*60}]),n=sc(t.value[0]);return Mp(async()=>{Ai().publicKey.value&&await Ni().init()}),rw(()=>Ai().publicKey.value,async()=>{await Ni().init()}),(i,s)=>(st(),Wt(_l,null,[mU,Te(Hl,{flat:""},{default:zt(()=>[Te(ei,null,{default:zt(()=>{var a,u,d,h;return[$("div",bU,[$("div",vU,[Te(iw,{src:"/currencies/POLIS.webp"})]),Te(ls,{class:"q-mx-sm",vertical:""}),$("div",wU,[$("div",_U,[AU,$("div",SU,[$("div",null,Ct(Le(Ni)().vaultPDA),1)])]),$("div",kU,[IU,$("div",EU,[$("div",null,Ct((a=Le(Ni)().lockerFactory)==null?void 0:a.escrow),1)])]),$("div",PU,[OU,$("div",xU,[$("div",null,Ct((u=Le(Ni)().lockerFactory)==null?void 0:u.locker),1)])]),$("div",TU,[RU,$("div",BU,[$("div",null,Ct((d=Le(Ni)().lockerFactory)==null?void 0:d.proxy),1)])]),$("div",MU,[CU,$("div",LU,[$("div",null,Ct((h=Le(Ni)().lockerFactory)==null?void 0:h.proxyEscrow),1)])])])])]}),_:1}),Te(ei,null,{default:zt(()=>[KU,Te(ls,{class:"q-my-sm"}),$("div",DU,[NU,$("div",$U,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:s[0]||(s[0]=a=>Le(Ni)().make_createATAs())})])]),$("div",UU,[FU,$("div",WU,[Te(Lx,{filled:"",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=a=>n.value=a),options:t.value,label:"Standard"},null,8,["modelValue","options"]),Te(yc,{dense:"",square:"",class:"col",standout:"",type:"number",modelValue:e.value,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value=a),label:"Amount to stake"},null,8,["modelValue"]),Te(er,{class:"full-width",square:"",label:"Sign",color:"primary",onClick:s[3]||(s[3]=a=>{var u;return Le(Ni)().make_createLocker(((u=n.value)==null?void 0:u.value)??0,e.value*Math.pow(10,8))})})])]),$("div",VU,[zU,$("div",jU,[$("div",qU,[Te(yc,{dense:"",square:"",class:"col",standout:"",type:"number",modelValue:e.value,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value=a),label:"Amount to stake"},null,8,["modelValue"]),Te(er,{class:"full-width",square:"",label:"Sign",color:"primary",onClick:s[5]||(s[5]=a=>Le(_e)().build_StakeTokens(e.value))})])])]),$("div",GU,[HU,$("div",YU,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:s[6]||(s[6]=a=>Le(_e)().build_harvestRewards())})])]),$("div",QU,[JU,$("div",XU,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:s[7]||(s[7]=a=>Le(_e)().build_unstakeTokens())})])]),$("div",ZU,[eF,$("div",tF,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:s[8]||(s[8]=a=>Le(_e)().build_cancelUnstake())})])]),$("div",nF,[rF,$("div",iF,[Te(er,{class:"full-width",label:"Sign",color:"primary",onClick:s[9]||(s[9]=a=>Le(_e)().build_withdrawTokens())})])])]),_:1}),Te(ei,null,{default:zt(()=>[Te(ls,{class:"q-my-sm"}),$("div",sF,[oF,Te(ls,{class:"q-mx-sm",vertical:""}),Le(_e)().stakingAccountAtlasInfo?(st(),Wt("div",aF,[(st(!0),Wt(_l,null,Bp(Object.keys(Le(_e)().stakingAccountAtlasInfo),(a,u)=>(st(),Wt("div",{class:"row q-pr-md items-center",key:u},[$("div",cF,[$("div",null,Ct(a),1)]),$("div",uF,[["totalStake","activeStake","paidRewards","pendingRewards"].includes(a)?(st(),Wt("div",lF,Ct(parseInt(Le(_e)().stakingAccountAtlasInfo[a])*Math.pow(10,-Le(Lg))),1)):["stakedAtTs","lastPendingRewardCalcTs","lastHarvestTs","unstakedTs"].includes(a)?(st(),Wt("div",dF,[parseInt(Le(_e)().stakingAccountAtlasInfo[a])==0?(st(),Wt("div",fF," - ")):(st(),Wt("div",hF,Ct(new Date(parseInt(Le(_e)().stakingAccountAtlasInfo[a])*1e3).toLocaleString()),1))])):(st(),Wt("div",pF,Ct(Le(_e)().stakingAccountAtlasInfo[a]),1))])]))),128))])):(st(),Wt("div",gF,"No Locker found!"))])]),_:1})]),_:1})],64))}}),mF={class:"row"},bF=$("div",{class:"col-3"},"Wallet",-1),vF={class:"col"},wF={class:"row q-gutter-x-xs no-wrap justify-end"},_F=$("div",null,"Atlas",-1),AF={class:"col"},SF={class:"row q-gutter-x-xs no-wrap justify-end"},kF=$("div",null,"Polis",-1),IF={class:"row"},EF=$("div",{class:"col-3"},"Squads",-1),PF={class:"col"},OF={class:"row q-gutter-x-xs no-wrap justify-end"},xF=$("div",null,"Atlas",-1),TF={class:"col"},RF={class:"row q-gutter-x-xs no-wrap justify-end"},BF=$("div",null,"Polis",-1),MF={class:"row"},CF=$("div",{class:"col-3"},"Locker",-1),LF={class:"col"},KF={class:"row q-gutter-x-xs no-wrap justify-end"},DF=$("div",null,"Atlas",-1),NF={class:"col"},$F={class:"row q-gutter-x-xs no-wrap justify-end"},UF=$("div",null,"Polis",-1),FF=Bc({__name:"TokenLockerBalances",setup(r){return Mp(async()=>{Ai().publicKey.value&&await _e().setAccounts()}),rw(()=>Ai().publicKey.value,async()=>{await _e().setAccounts()}),(e,t)=>(st(),Vi(Hl,{class:""},{default:zt(()=>[Te(ei,null,{default:zt(()=>[$("div",mF,[bF,$("div",vF,[$("div",wF,[$("div",null,Ct(Le(_e)().atlas_balance_wallet),1),_F])]),$("div",AF,[$("div",SF,[$("div",null,Ct(Le(_e)().polis_balance_wallet),1),kF])])]),$("div",IF,[EF,$("div",PF,[$("div",OF,[$("div",null,Ct(Le(_e)().atlas_balance_squads),1),xF])]),$("div",TF,[$("div",RF,[$("div",null,Ct(Le(_e)().polis_balance_squads),1),BF])])]),$("div",MF,[CF,$("div",LF,[$("div",KF,[$("div",null,Ct(Le(_e)().atlas_balance_locker),1),DF])]),$("div",NF,[$("div",$F,[$("div",null,Ct(Le(_e)().polis_balance_locker),1),UF])])])]),_:1})]),_:1}))}}),WF={key:0,class:"col absolute-center"},VF={key:1},zF=$("div",{class:"col"},null,-1),fW=Bc({__name:"StarAtlasLocker",setup(r){const e=sc("setup");return(t,n)=>(st(),Vi(yx,{class:"bg-black"},{default:zt(()=>{var i,s;return[(s=(i=Le(Ai)().publicKey)==null?void 0:i.value)!=null&&s.toString()?(st(),Wt("div",VF,[Te(gx,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=a=>e.value=a),align:"left",class:""},{default:zt(()=>[Te(wh,{name:"setup",label:"Setup"}),Te(wh,{name:"atlas",label:"Atlas"}),Te(wh,{name:"polis",label:"Polis"}),zF,Te(FF,{class:"q-pr-md col"})]),_:1},8,["modelValue"]),e.value=="setup"?(st(),Vi(Z6,{key:0})):ul("",!0),e.value=="atlas"?(st(),Vi(V$,{key:1})):ul("",!0),e.value=="polis"?(st(),Vi(yF,{key:2})):ul("",!0)])):(st(),Wt("div",WF,[Te(Le(Ox),{dark:""})]))]}),_:1}))}});export{fW as default};
