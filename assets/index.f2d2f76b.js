import{cQ as tt,cR as ae,P as K,cS as yn,cn as er,bV as ya,cT as ma,bW as mn,cU as ba,cV as ni,cW as ri,cX as va,cY as Ea,cZ as Aa,cJ as ii,c_ as xa,c$ as ka}from"./index.792fee82.js";var Qt;const st={}.ANCHOR_BROWSER||typeof window<"u"&&!(!((Qt=window.process)===null||Qt===void 0)&&Qt.hasOwnProperty("type"));function Sa(t,n){return Array.apply(0,new Array(Math.ceil(t.length/n))).map((e,r)=>t.slice(r*n,(r+1)*n))}const Xe=t=>"version"in t;function Ia(t){return(st?new TextDecoder("utf-8"):new(require("util")).TextDecoder("utf-8")).decode(t)}function Ta(t){return(st?new TextEncoder:new(require("util")).TextEncoder("utf-8")).encode(t)}function tr(t){return tt.encode(t)}function nr(t){return t.toString("base64")}function ai(t){return ae.Buffer.from(t,"base64")}function La(t){const n=new Map;return t.errors&&t.errors.forEach(e=>{var r;let i=(r=e.msg)!==null&&r!==void 0?r:e.name;n.set(e.code,i)}),n}function Ra(t,...n){if(t.args.length!=n.length)throw new Error("Invalid argument length");const e={};let r=0;return t.args.forEach(i=>{e[i.name]=n[r],r+=1}),e}function oi(t,n={}){t.forEach(e=>{if("accounts"in e)oi(e.accounts,n[e.name]);else if(n[e.name]===void 0)throw new Error(`Invalid arguments: ${e.name} not provided.`)})}function ne(t){return t instanceof K?t:new K(t)}class Ca extends TypeError{constructor(n,e){let r;const{message:i,...a}=n,{path:o}=n,s=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[n,...e()]}}}function Oa(t){return $e(t)&&typeof t[Symbol.iterator]=="function"}function $e(t){return typeof t=="object"&&t!=null}function xe(t){return typeof t=="string"?JSON.stringify(t):""+t}function Da(t){const{done:n,value:e}=t.next();return n?void 0:e}function Ba(t,n,e,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:a}=n,{type:o}=e,{refinement:s,message:d="Expected a value of type `"+o+"`"+(s?" with refinement `"+s+"`":"")+", but received: `"+xe(r)+"`"}=t;return{value:r,type:o,refinement:s,key:i[i.length-1],path:i,branch:a,...t,message:d}}function*rr(t,n,e,r){Oa(t)||(t=[t]);for(const i of t){const a=Ba(i,n,e,r);a&&(yield a)}}function*Pn(t,n,e){e===void 0&&(e={});const{path:r=[],branch:i=[t],coerce:a=!1,mask:o=!1}=e,s={path:r,branch:i};if(a&&(t=n.coercer(t,s),o&&n.type!=="type"&&$e(n.schema)&&$e(t)&&!Array.isArray(t)))for(const c in t)n.schema[c]===void 0&&delete t[c];let d=!0;for(const c of n.validator(t,s))d=!1,yield[c,void 0];for(let[c,u,w]of n.entries(t,s)){const h=Pn(u,w,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:a,mask:o});for(const f of h)f[0]?(d=!1,yield[f[0],void 0]):a&&(u=f[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):$e(t)&&(t[c]=u))}if(d)for(const c of n.refiner(t,s))d=!1,yield[c,void 0];d&&(yield[void 0,t])}class ke{constructor(n){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:i,refiner:a,coercer:o=d=>d,entries:s=function*(){}}=n;this.type=e,this.schema=r,this.entries=s,this.coercer=o,i?this.validator=(d,c)=>{const u=i(d,c);return rr(u,c,this,d)}:this.validator=()=>[],a?this.refiner=(d,c)=>{const u=a(d,c);return rr(u,c,this,d)}:this.refiner=()=>[]}assert(n){return Na(n,this)}create(n){return zn(n,this)}is(n){return si(n,this)}mask(n){return Pa(n,this)}validate(n,e){return e===void 0&&(e={}),yt(n,this,e)}}function Na(t,n){const e=yt(t,n);if(e[0])throw e[0]}function zn(t,n){const e=yt(t,n,{coerce:!0});if(e[0])throw e[0];return e[1]}function Pa(t,n){const e=yt(t,n,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function si(t,n){return!yt(t,n)[0]}function yt(t,n,e){e===void 0&&(e={});const r=Pn(t,n,e),i=Da(r);if(i[0])return[new Ca(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0];{const a=i[1];return[void 0,a]}}function mt(t,n){return new ke({type:t,schema:null,validator:n})}function za(){return mt("any",()=>!0)}function en(t){return new ke({type:"array",schema:t,*entries(n){if(t&&Array.isArray(n))for(const[e,r]of n.entries())yield[e,r,t]},coercer(n){return Array.isArray(n)?n.slice():n},validator(n){return Array.isArray(n)||"Expected an array value, but received: "+xe(n)}})}function Ua(){return mt("boolean",t=>typeof t=="boolean")}function ir(t){const n=xe(t),e=typeof t;return new ke({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?t:null,validator(r){return r===t||"Expected the literal `"+n+"`, but received: "+xe(r)}})}function It(t){return new ke({...t,validator:(n,e)=>n===null||t.validator(n,e),refiner:(n,e)=>n===null||t.refiner(n,e)})}function Bt(){return mt("number",t=>typeof t=="number"&&!isNaN(t)||"Expected a number, but received: "+xe(t))}function Nt(t){return new ke({...t,validator:(n,e)=>n===void 0||t.validator(n,e),refiner:(n,e)=>n===void 0||t.refiner(n,e)})}function Se(){return mt("string",t=>typeof t=="string"||"Expected a string, but received: "+xe(t))}function be(t){const n=Object.keys(t);return new ke({type:"type",schema:t,*entries(e){if($e(e))for(const r of n)yield[r,e[r],t[r]]},validator(e){return $e(e)||"Expected an object, but received: "+xe(e)}})}function ci(t){const n=t.map(e=>e.type).join(" | ");return new ke({type:"union",schema:null,coercer(e,r){return(t.find(a=>{const[o]=a.validate(e,{coerce:!0});return!o})||Un()).coercer(e,r)},validator(e,r){const i=[];for(const a of t){const[...o]=Pn(e,a,r),[s]=o;if(s[0])for(const[d]of o)d&&i.push(d);else return[]}return["Expected the value to satisfy a union of `"+n+"`, but received: "+xe(e),...i]}})}function Un(){return mt("unknown",()=>!0)}function Ma(t,n,e){return new ke({...t,coercer:(r,i)=>si(r,n)?t.coercer(e(r,i),i):t.coercer(r,i)})}const ar=99;async function $a(t,n,e){if(n.length<=ar)return await or(t,n,e);{const r=Sa(n,ar);return(await Promise.all(r.map(a=>or(t,a,e)))).flat()}}async function or(t,n,e){const r=e??t.commitment,{value:i,context:a}=await t.getMultipleAccountsInfoAndContext(n,r);return i.map((s,d)=>s===null?null:{publicKey:n[d],account:s,context:a})}async function Fa(t,n,e,r,i){var a;e&&e.length>0&&n.sign(...e);const o=n._compile(),s=o.serialize(),c=n._serialize(s).toString("base64"),u={encoding:"base64",commitment:r??t.commitment};if(i){const p=(Array.isArray(i)?i:o.nonProgramIds()).map(x=>x.toBase58());u.accounts={encoding:"base64",addresses:p}}e&&(u.sigVerify=!0);const w=[c,u],h=await t._rpcRequest("simulateTransaction",w),f=zn(h,Ha);if("error"in f){let p;if("data"in f.error&&(p=(a=f.error.data)===null||a===void 0?void 0:a.logs,p&&Array.isArray(p))){const x=`
    `,v=x+p.join(x);console.error(f.error.message,v)}throw new yn("failed to simulate transaction: "+f.error.message,p)}return f.result}function Za(t){return Ma(ui(t),Va,n=>"error"in n?n:{...n,result:zn(n.result,t)})}const Va=ui(Un());function ui(t){return ci([be({jsonrpc:ir("2.0"),id:Se(),result:t}),be({jsonrpc:ir("2.0"),id:Se(),error:be({code:Un(),message:Se(),data:Nt(za())})})])}function ja(t){return Za(be({context:be({slot:Bt()}),value:t}))}const Ha=ja(be({err:It(ci([be({}),Se()])),logs:It(en(Se())),accounts:Nt(It(en(It(be({executable:Ua(),owner:Se(),lamports:Bt(),data:en(Se()),rentEpoch:Nt(Bt())}))))),unitsConsumed:Nt(Bt())}));class Ue{constructor(n,e,r){this.connection=n,this.wallet=e,this.opts=r,this.publicKey=e==null?void 0:e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(n,e){if(st)throw new Error("Provider local is not available on browser.");e=e??Ue.defaultOptions();const r=new er(n??"http://localhost:8899",e.preflightCommitment),a=require("./nodewallet.js").default.local();return new Ue(r,a,e)}static env(){if(st)throw new Error("Provider env is not available on browser.");require("process");const n={}.ANCHOR_PROVIDER_URL;if(n===void 0)throw new Error("ANCHOR_PROVIDER_URL is not defined");const e=Ue.defaultOptions(),r=new er(n,e.commitment),a=require("./nodewallet.js").default.local();return new Ue(r,a,e)}async sendAndConfirm(n,e,r){var i,a,o,s;if(r===void 0&&(r=this.opts),Xe(n))e&&n.sign(e);else if(n.feePayer=(i=n.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,n.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,e)for(const c of e)n.partialSign(c);n=await this.wallet.signTransaction(n);const d=n.serialize();try{return await sr(this.connection,d,r)}catch(c){if(c instanceof bn){const u=tr(Xe(n)?((a=n.signatures)===null||a===void 0?void 0:a[0])||new Uint8Array:(o=n.signature)!==null&&o!==void 0?o:new Uint8Array),w=await this.connection.getTransaction(u,{commitment:"confirmed"});if(w){const h=(s=w.meta)===null||s===void 0?void 0:s.logMessages;throw h?new yn(c.message,h):c}else throw c}else throw c}}async sendAll(n,e){var r,i,a;e===void 0&&(e=this.opts);const o=(await this.connection.getLatestBlockhash(e.preflightCommitment)).blockhash;let s=n.map(u=>{var w,h;if(Xe(u.tx)){let f=u.tx;return u.signers&&f.sign(u.signers),f}else{let f=u.tx,p=(w=u.signers)!==null&&w!==void 0?w:[];return f.feePayer=(h=f.feePayer)!==null&&h!==void 0?h:this.wallet.publicKey,f.recentBlockhash=o,p.forEach(x=>{f.partialSign(x)}),f}});const d=await this.wallet.signAllTransactions(s),c=[];for(let u=0;u<s.length;u+=1){const w=d[u],h=w.serialize();try{c.push(await sr(this.connection,h,e))}catch(f){if(f instanceof bn){const p=tr(Xe(w)?((r=w.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(i=w.signature)!==null&&i!==void 0?i:new Uint8Array),x=await this.connection.getTransaction(p,{commitment:"confirmed"});if(x){const v=(a=x.meta)===null||a===void 0?void 0:a.logMessages;throw v?new yn(f.message,v):f}else throw f}else throw f}}return c}async simulate(n,e,r,i){let a=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,o;if(Xe(n)?(e&&(n.sign(e),n=await this.wallet.signTransaction(n)),o=await this.connection.simulateTransaction(n,{commitment:r})):(n.feePayer=n.feePayer||this.wallet.publicKey,n.recentBlockhash=a,e&&(n=await this.wallet.signTransaction(n)),o=await Fa(this.connection,n,e,r,i)),o.value.err)throw new qa(o.value);return o.value}}class qa extends Error{constructor(n,e){super(e),this.simulationResponse=n}}async function sr(t,n,e){const r=e&&{skipPreflight:e.skipPreflight,preflightCommitment:e.preflightCommitment||e.commitment},i=await t.sendRawTransaction(n,r),a=(await t.confirmTransaction(i,e&&e.commitment)).value;if(a.err)throw new bn(`Raw transaction ${i} failed (${JSON.stringify(a)})`);return i}class bn extends Error{constructor(n){super(n)}}function vn(){return Ue.local()}const Ka=new Map;function li(t){return Ka.get(t)!==void 0}class zt extends Error{constructor(n){super(n),this.name="IdlError"}}class bt{constructor(n){this.stack=n}static parse(n){var e;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,a=[];for(let o=0;o<n.length;o++){if(i.exec(n[o])){a.pop();continue}const s=(e=r.exec(n[o]))===null||e===void 0?void 0:e[1];!s||a.push(new K(s))}return new bt(a)}}class nt extends Error{constructor(n,e,r,i,a,o){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:n,errorMessage:e,comparedValues:o,origin:a},this._programErrorStack=bt.parse(i)}static parse(n){if(!n)return null;const e=n.findIndex(h=>h.startsWith("Program log: AnchorError"));if(e===-1)return null;const r=n[e],i=[r];let a;if(e+1<n.length){if(n[e+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,f=h.exec(n[e+2])[1],p=h.exec(n[e+4])[1];a=[new K(f),new K(p)],i.push(...n.slice(e+1,e+5))}else if(n[e+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,f=h.exec(n[e+1])[2],p=h.exec(n[e+2])[2];i.push(...n.slice(e+1,e+3)),a=[f,p]}}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),c=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),w=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[h,f,p]=s.slice(1,4),x={code:h,number:parseInt(f)};return new nt(x,p,i,n,void 0,a)}else if(c){const[h,f,p,x,v]=c.slice(1,6),k={code:p,number:parseInt(x)},O={file:h,line:parseInt(f)};return new nt(k,v,i,n,O,a)}else if(w){const[h,f,p,x]=w.slice(1,5),v=h,k={code:f,number:parseInt(p)};return new nt(k,x,i,n,v,a)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Ut extends Error{constructor(n,e,r){super(),this.code=n,this.msg=e,this.logs=r,r&&(this._programErrorStack=bt.parse(r))}static parse(n,e){const r=n.toString();let i;if(r.includes("custom program error:")){let s=r.split("custom program error: ");if(s.length!==2)return null;i=s[1]}else{const s=r.match(/"Custom":([0-9]+)}/g);if(!s||s.length>1)return null;i=s[0].match(/([0-9]+)/g)[0]}let a;try{a=parseInt(i)}catch{return null}let o=e.get(a);return o!==void 0?new Ut(a,o,n.logs):(o=Ga.get(a),o!==void 0?new Ut(a,o,n.logs):null)}get program(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack}toString(){return this.msg}}function di(t,n){li("debug-logs")&&console.log("Translating error:",t);const e=nt.parse(t.logs);if(e)return e;const r=Ut.parse(t,n);if(r)return r;if(t.logs){const i={get:function(a,o){return o==="programErrorStack"?a.programErrorStack.stack:o==="program"?a.programErrorStack.stack[t.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return t.programErrorStack=bt.parse(t.logs),new Proxy(t,i)}return t}const S={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Ga=new Map([[S.InstructionMissing,"8 byte instruction identifier not provided"],[S.InstructionFallbackNotFound,"Fallback functions are not supported"],[S.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[S.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[S.IdlInstructionStub,"The program was compiled without idl instructions"],[S.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[S.ConstraintMut,"A mut constraint was violated"],[S.ConstraintHasOne,"A has one constraint was violated"],[S.ConstraintSigner,"A signer constraint was violated"],[S.ConstraintRaw,"A raw constraint was violated"],[S.ConstraintOwner,"An owner constraint was violated"],[S.ConstraintRentExempt,"A rent exemption constraint was violated"],[S.ConstraintSeeds,"A seeds constraint was violated"],[S.ConstraintExecutable,"An executable constraint was violated"],[S.ConstraintState,"Deprecated Error, feel free to replace with something else"],[S.ConstraintAssociated,"An associated constraint was violated"],[S.ConstraintAssociatedInit,"An associated init constraint was violated"],[S.ConstraintClose,"A close constraint was violated"],[S.ConstraintAddress,"An address constraint was violated"],[S.ConstraintZero,"Expected zero account discriminant"],[S.ConstraintTokenMint,"A token mint constraint was violated"],[S.ConstraintTokenOwner,"A token owner constraint was violated"],[S.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[S.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[S.ConstraintMintDecimals,"A mint decimals constraint was violated"],[S.ConstraintSpace,"A space constraint was violated"],[S.ConstraintAccountIsNone,"A required account for the constraint is None"],[S.RequireViolated,"A require expression was violated"],[S.RequireEqViolated,"A require_eq expression was violated"],[S.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[S.RequireNeqViolated,"A require_neq expression was violated"],[S.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[S.RequireGtViolated,"A require_gt expression was violated"],[S.RequireGteViolated,"A require_gte expression was violated"],[S.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[S.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[S.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[S.AccountDidNotDeserialize,"Failed to deserialize the account"],[S.AccountDidNotSerialize,"Failed to serialize the account"],[S.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[S.AccountNotMutable,"The given account is not mutable"],[S.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[S.InvalidProgramId,"Program ID was not as expected"],[S.InvalidProgramExecutable,"Program account is not executable"],[S.AccountNotSigner,"The given account did not sign"],[S.AccountNotSystemOwned,"The given account is not owned by the system program"],[S.AccountNotInitialized,"The program expected this account to be already initialized"],[S.AccountNotProgramData,"The given account is not a program data account"],[S.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[S.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[S.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[S.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[S.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[S.Deprecated,"The API being used is deprecated and should no longer be used"]]);var Mn={exports:{}};const Wa=/[\p{Lu}]/u,Xa=/[\p{Ll}]/u,cr=/^[\p{Lu}](?![\p{Lu}])/gu,fi=/([\p{Alpha}\p{N}_]|$)/u,hi=/[_.\- ]+/,Ya=new RegExp("^"+hi.source),ur=new RegExp(hi.source+fi.source,"gu"),lr=new RegExp("\\d+"+fi.source,"gu"),Ja=(t,n,e)=>{let r=!1,i=!1,a=!1;for(let o=0;o<t.length;o++){const s=t[o];r&&Wa.test(s)?(t=t.slice(0,o)+"-"+t.slice(o),r=!1,a=i,i=!0,o++):i&&a&&Xa.test(s)?(t=t.slice(0,o-1)+"-"+t.slice(o-1),a=i,i=!1,r=!0):(r=n(s)===s&&e(s)!==s,a=i,i=e(s)===s&&n(s)!==s)}return t},Qa=(t,n)=>(cr.lastIndex=0,t.replace(cr,e=>n(e))),eo=(t,n)=>(ur.lastIndex=0,lr.lastIndex=0,t.replace(ur,(e,r)=>n(r)).replace(lr,e=>n(e))),_i=(t,n)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(n={pascalCase:!1,preserveConsecutiveUppercase:!1,...n},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";const e=n.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(n.locale),r=n.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(n.locale);return t.length===1?n.pascalCase?r(t):e(t):(t!==e(t)&&(t=Ja(t,e,r)),t=t.replace(Ya,""),n.preserveConsecutiveUppercase?t=Qa(t,e):t=e(t),n.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),eo(t,r))};Mn.exports=_i;Mn.exports.default=_i;var Z=Mn.exports,En=function(){return En=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},En.apply(this,arguments)};var An=function(){return An=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},An.apply(this,arguments)};function to(t){return t.toLowerCase()}var no=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ro=/[^A-Z0-9]+/gi;function io(t,n){n===void 0&&(n={});for(var e=n.splitRegexp,r=e===void 0?no:e,i=n.stripRegexp,a=i===void 0?ro:i,o=n.transform,s=o===void 0?to:o,d=n.delimiter,c=d===void 0?" ":d,u=dr(dr(t,r,"$1\0$2"),a,"\0"),w=0,h=u.length;u.charAt(w)==="\0";)w++;for(;u.charAt(h-1)==="\0";)h--;return u.slice(w,h).split("\0").map(s).join(c)}function dr(t,n,e){return n instanceof RegExp?t.replace(n,e):n.reduce(function(r,i){return r.replace(i,e)},t)}function ao(t,n){return n===void 0&&(n={}),io(t,An({delimiter:"."},n))}function oo(t,n){return n===void 0&&(n={}),ao(t,En({delimiter:"_"},n))}var C={},m={};class U{constructor(n,e){if(!Number.isInteger(n))throw new TypeError("span must be an integer");this.span=n,this.property=e}makeDestinationObject(){return{}}decode(n,e){throw new Error("Layout is abstract")}encode(n,e,r){throw new Error("Layout is abstract")}getSpan(n,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(n){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=n,e}fromArray(n){}}var jt=m.Layout=U;function $n(t,n){return n.property?t+"["+n.property+"]":t}m.nameWithProperty=$n;function so(t,n){if(typeof t!="function")throw new TypeError("Class must be constructor");if(t.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(n&&n instanceof U))throw new TypeError("layout must be a Layout");if(n.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=n,n.boundConstructor_=t,n.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value:function(e,r){return n.encode(this,e,r)},writable:!0}),Object.defineProperty(t,"decode",{value:function(e,r){return n.decode(e,r)},writable:!0})}m.bindConstructorLayout=so;class X extends U{isCount(){throw new Error("ExternalLayout is abstract")}}class pi extends X{constructor(n,e){if(n===void 0&&(n=1),!Number.isInteger(n)||0>=n)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=n}isCount(){return!0}decode(n,e){e===void 0&&(e=0);const r=n.length-e;return Math.floor(r/this.elementSpan)}encode(n,e,r){return 0}}class Fn extends X{constructor(n,e,r){if(!(n instanceof U))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(n.span,r||n.property),this.layout=n,this.offset=e}isCount(){return this.layout instanceof de||this.layout instanceof ge}decode(n,e){return e===void 0&&(e=0),this.layout.decode(n,e+this.offset)}encode(n,e,r){return r===void 0&&(r=0),this.layout.encode(n,e,r+this.offset)}}class de extends U{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntLE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntLE(n,r,this.span),this.span}}class ge extends U{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntBE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntBE(n,r,this.span),this.span}}class De extends U{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readIntLE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeIntLE(n,r,this.span),this.span}}class He extends U{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readIntBE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeIntBE(n,r,this.span),this.span}}const xn=Math.pow(2,32);function Ht(t){const n=Math.floor(t/xn),e=t-n*xn;return{hi32:n,lo32:e}}function qt(t,n){return t*xn+n}class co extends U{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return qt(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=Ht(n);return e.writeUInt32LE(i.lo32,r),e.writeUInt32LE(i.hi32,r+4),8}}class uo extends U{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return qt(r,i)}encode(n,e,r){r===void 0&&(r=0);const i=Ht(n);return e.writeUInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}class lo extends U{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readInt32LE(e+4);return qt(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=Ht(n);return e.writeUInt32LE(i.lo32,r),e.writeInt32LE(i.hi32,r+4),8}}class fo extends U{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readInt32BE(e),i=n.readUInt32BE(e+4);return qt(r,i)}encode(n,e,r){r===void 0&&(r=0);const i=Ht(n);return e.writeInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}class wi extends U{constructor(n){super(4,n)}decode(n,e){return e===void 0&&(e=0),n.readFloatLE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeFloatLE(n,r),4}}class gi extends U{constructor(n){super(4,n)}decode(n,e){return e===void 0&&(e=0),n.readFloatBE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeFloatBE(n,r),4}}class yi extends U{constructor(n){super(8,n)}decode(n,e){return e===void 0&&(e=0),n.readDoubleLE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeDoubleLE(n,r),8}}class mi extends U{constructor(n){super(8,n)}decode(n,e){return e===void 0&&(e=0),n.readDoubleBE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeDoubleBE(n,r),8}}class bi extends U{constructor(n,e,r){if(!(n instanceof U))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof X&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof X)&&0<n.span&&(i=e*n.span),super(i,r),this.elementLayout=n,this.count=e}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0,i=this.count;if(i instanceof X&&(i=i.decode(n,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let a=0;for(;a<i;)r+=this.elementLayout.getSpan(n,e+r),++a}return r}decode(n,e){e===void 0&&(e=0);const r=[];let i=0,a=this.count;for(a instanceof X&&(a=a.decode(n,e));i<a;)r.push(this.elementLayout.decode(n,e)),e+=this.elementLayout.getSpan(n,e),i+=1;return r}encode(n,e,r){r===void 0&&(r=0);const i=this.elementLayout,a=n.reduce((o,s)=>o+i.encode(s,e,r+o),0);return this.count instanceof X&&this.count.encode(n.length,e,r),a}}class vi extends U{constructor(n,e,r){if(!(Array.isArray(n)&&n.reduce((a,o)=>a&&o instanceof U,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const a of n)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=n.reduce((a,o)=>a+o.getSpan(),0)}catch{}super(i,e),this.fields=n,this.decodePrefixes=!!r}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((i,a)=>{const o=a.getSpan(n,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(n,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(n,e)),e+=i.getSpan(n,e),this.decodePrefixes&&n.length===e)break;return r}encode(n,e,r){r===void 0&&(r=0);const i=r;let a=0,o=0;for(const s of this.fields){let d=s.span;if(o=0<d?d:0,s.property!==void 0){const c=n[s.property];c!==void 0&&(o=s.encode(c,e,r),0>d&&(d=s.getSpan(e,r)))}a=r,r+=d}return a+o-i}fromArray(n){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<n.length&&(e[r.property]=n.shift());return e}layoutFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===n)return e}offsetOf(n){if(typeof n!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===n)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Zn{constructor(n){this.property=n}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Mt extends Zn{constructor(n,e){if(!(n instanceof X&&n.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||n.property||"variant"),this.layout=n}decode(n,e){return this.layout.decode(n,e)}encode(n,e,r){return this.layout.encode(n,e,r)}}class Vn extends U{constructor(n,e,r){const i=n instanceof de||n instanceof ge;if(i)n=new Mt(new Fn(n));else if(n instanceof X&&n.isCount())n=new Mt(n);else if(!(n instanceof Zn))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof U))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let a=-1;e&&(a=e.span,0<=a&&i&&(a+=n.layout.span)),super(a,r),this.discriminator=n,this.usesPrefixDiscriminator=i,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(s){return o(s)},this.configGetSourceVariant=function(s){o=s.bind(this)}}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(n,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(n,e)}defaultGetSourceVariant(n){if(n.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&n.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[n[this.discriminator.property]];if(e&&(!e.layout||n.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(n.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(n,e){e===void 0&&(e=0);let r;const i=this.discriminator,a=i.decode(n,e);let o=this.registry[a];if(o===void 0){let s=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(s=i.layout.span),r=this.makeDestinationObject(),r[i.property]=a,r[o.property]=this.defaultLayout.decode(n,e+s)}else r=o.decode(n,e);return r}encode(n,e,r){r===void 0&&(r=0);const i=this.getSourceVariant(n);if(i===void 0){const a=this.discriminator,o=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=a.layout.span),a.encode(n[a.property],e,r),s+o.encode(n[o.property],e,r+s)}return i.encode(n,e,r)}addVariant(n,e,r){const i=new Ei(this,n,e,r);return this.registry[n]=i,i}getVariant(n,e){let r=n;return Buffer.isBuffer(n)&&(e===void 0&&(e=0),r=this.discriminator.decode(n,e)),this.registry[r]}}class Ei extends U{constructor(n,e,r,i){if(!(n instanceof Vn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof U))throw new TypeError("layout must be a Layout");if(n.defaultLayout!==null&&0<=r.span&&r.span>n.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let a=n.span;0>n.span&&(a=r?r.span:0,0<=a&&n.usesPrefixDiscriminator&&(a+=n.discriminator.layout.span)),super(a,i),this.union=n,this.variant=e,this.layout=r||null}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(n,e+r)}decode(n,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(n,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(n,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(n,e,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!n.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let a=i;if(this.layout&&(this.layout.encode(n[this.property],e,r+i),a+=this.layout.getSpan(e,r+i),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(n){if(this.layout)return this.layout.fromArray(n)}}function ze(t){return 0>t&&(t+=4294967296),t}class jn extends U{constructor(n,e,r){if(!(n instanceof de||n instanceof ge))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),4<n.span)throw new RangeError("word cannot exceed 32 bits");super(n.span,r),this.word=n,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(a){return i=ze(a),this},this._packedGetValue=function(){return i}}decode(n,e){const r=this.makeDestinationObject();e===void 0&&(e=0);const i=this.word.decode(n,e);this._packedSetValue(i);for(const a of this.fields)a.property!==void 0&&(r[a.property]=a.decode(i));return r}encode(n,e,r){r===void 0&&(r=0);const i=this.word.decode(e,r);this._packedSetValue(i);for(const a of this.fields)if(a.property!==void 0){const o=n[a.property];o!==void 0&&a.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(n,e){const r=new rt(this,n,e);return this.fields.push(r),r}addBoolean(n){const e=new Ai(this,n);return this.fields.push(e),e}fieldFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===n)return e}}class rt{constructor(n,e,r){if(!(n instanceof jn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*n.span,a=n.fields.reduce((o,s)=>o+s.bits,0);if(e+a>i)throw new Error("bits too long for span remainder ("+(i-a)+" of "+i+" remain)");this.container=n,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=a,this.container.msb&&(this.start=i-a-e),this.wordMask=ze(this.valueMask<<this.start),this.property=r}decode(){const n=this.container._packedGetValue();return ze(n&this.wordMask)>>>this.start}encode(n){if(!Number.isInteger(n)||n!==ze(n&this.valueMask))throw new TypeError($n("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=ze(n<<this.start);this.container._packedSetValue(ze(e&~this.wordMask)|r)}}class Ai extends rt{constructor(n,e){super(n,1,e)}decode(n,e){return!!rt.prototype.decode.call(this,n,e)}encode(n){return typeof n=="boolean"&&(n=+n),rt.prototype.encode.call(this,n)}}class xi extends U{constructor(n,e){if(!(n instanceof X&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;n instanceof X||(r=n),super(r,e),this.length=n}getSpan(n,e){let r=this.span;return 0>r&&(r=this.length.decode(n,e)),r}decode(n,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(n,e)),n.slice(e,e+r)}encode(n,e,r){let i=this.length;if(this.length instanceof X&&(i=n.length),!(Buffer.isBuffer(n)&&i===n.length))throw new TypeError($n("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return e.write(n.toString("hex"),r,i,"hex"),this.length instanceof X&&this.length.encode(i,e,r),i}}class ki extends U{constructor(n){super(-1,n)}getSpan(n,e){if(!Buffer.isBuffer(n))throw new TypeError("b must be a Buffer");e===void 0&&(e=0);let r=e;for(;r<n.length&&n[r]!==0;)r+=1;return 1+r-e}decode(n,e,r){e===void 0&&(e=0);let i=this.getSpan(n,e);return n.slice(e,e+i-1).toString("utf-8")}encode(n,e,r){r===void 0&&(r=0),typeof n!="string"&&(n=n.toString());const i=new Buffer(n,"utf8"),a=i.length;if(r+a>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),e[r+a]=0,a+1}}class Si extends U{constructor(n,e){if(typeof n=="string"&&e===void 0&&(e=n,n=void 0),n===void 0)n=-1;else if(!Number.isInteger(n))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=n}getSpan(n,e){if(!Buffer.isBuffer(n))throw new TypeError("b must be a Buffer");return e===void 0&&(e=0),n.length-e}decode(n,e,r){e===void 0&&(e=0);let i=this.getSpan(n,e);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return n.slice(e,e+i).toString("utf-8")}encode(n,e,r){r===void 0&&(r=0),typeof n!="string"&&(n=n.toString());const i=new Buffer(n,"utf8"),a=i.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(r+a>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),a}}class Ii extends U{constructor(n,e){super(0,e),this.value=n}decode(n,e,r){return this.value}encode(n,e,r){return 0}}m.ExternalLayout=X;m.GreedyCount=pi;m.OffsetLayout=Fn;m.UInt=de;m.UIntBE=ge;m.Int=De;m.IntBE=He;m.Float=wi;m.FloatBE=gi;m.Double=yi;m.DoubleBE=mi;m.Sequence=bi;m.Structure=vi;m.UnionDiscriminator=Zn;m.UnionLayoutDiscriminator=Mt;m.Union=Vn;m.VariantLayout=Ei;m.BitStructure=jn;m.BitField=rt;m.Boolean=Ai;m.Blob=xi;m.CString=ki;m.UTF8=Si;m.Constant=Ii;m.greedy=(t,n)=>new pi(t,n);var ho=m.offset=(t,n,e)=>new Fn(t,n,e),_o=m.u8=t=>new de(1,t);m.u16=t=>new de(2,t);m.u24=t=>new de(3,t);var pe=m.u32=t=>new de(4,t);m.u40=t=>new de(5,t);m.u48=t=>new de(6,t);var po=m.nu64=t=>new co(t);m.u16be=t=>new ge(2,t);m.u24be=t=>new ge(3,t);m.u32be=t=>new ge(4,t);m.u40be=t=>new ge(5,t);m.u48be=t=>new ge(6,t);m.nu64be=t=>new uo(t);m.s8=t=>new De(1,t);m.s16=t=>new De(2,t);m.s24=t=>new De(3,t);m.s32=t=>new De(4,t);m.s40=t=>new De(5,t);m.s48=t=>new De(6,t);var we=m.ns64=t=>new lo(t);m.s16be=t=>new He(2,t);m.s24be=t=>new He(3,t);m.s32be=t=>new He(4,t);m.s40be=t=>new He(5,t);m.s48be=t=>new He(6,t);m.ns64be=t=>new fo(t);m.f32=t=>new wi(t);m.f32be=t=>new gi(t);m.f64=t=>new yi(t);m.f64be=t=>new mi(t);var j=m.struct=(t,n,e)=>new vi(t,n,e);m.bits=(t,n,e)=>new jn(t,n,e);m.seq=(t,n,e)=>new bi(t,n,e);var Ti=m.union=(t,n,e)=>new Vn(t,n,e);m.unionLayoutDiscriminator=(t,n)=>new Mt(t,n);var vt=m.blob=(t,n)=>new xi(t,n);m.cstr=t=>new ki(t);m.utf8=(t,n)=>new Si(t,n);m.const=(t,n)=>new Ii(t,n);var wo=ya(ma);(function(t){var n=mn&&mn.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.map=t.array=t.rustEnum=t.str=t.vecU8=t.tagged=t.vec=t.bool=t.option=t.publicKey=t.i256=t.u256=t.i128=t.u128=t.i64=t.u64=t.struct=t.f64=t.f32=t.i32=t.u32=t.i16=t.u16=t.i8=t.u8=void 0;const e=m,r=wo,i=n(ba.exports);var a=m;Object.defineProperty(t,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(t,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(t,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(t,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(t,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(t,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(t,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(t,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(t,"struct",{enumerable:!0,get:function(){return a.struct}});class o extends e.Layout{constructor(y,l,_){super(y,_),this.blob=(0,e.blob)(y),this.signed=l}decode(y,l=0){const _=new i.default(this.blob.decode(y,l),10,"le");return this.signed?_.fromTwos(this.span*8).clone():_}encode(y,l,_=0){return this.signed&&(y=y.toTwos(this.span*8)),this.blob.encode(y.toArrayLike(Buffer,"le",this.span),l,_)}}function s(E){return new o(8,!1,E)}t.u64=s;function d(E){return new o(8,!0,E)}t.i64=d;function c(E){return new o(16,!1,E)}t.u128=c;function u(E){return new o(16,!0,E)}t.i128=u;function w(E){return new o(32,!1,E)}t.u256=w;function h(E){return new o(32,!0,E)}t.i256=h;class f extends e.Layout{constructor(y,l,_,b){super(y.span,b),this.layout=y,this.decoder=l,this.encoder=_}decode(y,l){return this.decoder(this.layout.decode(y,l))}encode(y,l,_){return this.layout.encode(this.encoder(y),l,_)}getSpan(y,l){return this.layout.getSpan(y,l)}}function p(E){return new f((0,e.blob)(32),y=>new r.PublicKey(y),y=>y.toBuffer(),E)}t.publicKey=p;class x extends e.Layout{constructor(y,l){super(-1,l),this.layout=y,this.discriminator=(0,e.u8)()}encode(y,l,_=0){return y==null?this.discriminator.encode(0,l,_):(this.discriminator.encode(1,l,_),this.layout.encode(y,l,_+1)+1)}decode(y,l=0){const _=this.discriminator.decode(y,l);if(_===0)return null;if(_===1)return this.layout.decode(y,l+1);throw new Error("Invalid option "+this.property)}getSpan(y,l=0){const _=this.discriminator.decode(y,l);if(_===0)return 1;if(_===1)return this.layout.getSpan(y,l+1)+1;throw new Error("Invalid option "+this.property)}}function v(E,y){return new x(E,y)}t.option=v;function k(E){return new f((0,e.u8)(),O,L,E)}t.bool=k;function O(E){if(E===0)return!1;if(E===1)return!0;throw new Error("Invalid bool: "+E)}function L(E){return E?1:0}function g(E,y){const l=(0,e.u32)("length"),_=(0,e.struct)([l,(0,e.seq)(E,(0,e.offset)(l,-l.span),"values")]);return new f(_,({values:b})=>b,b=>({values:b}),y)}t.vec=g;function R(E,y,l){const _=(0,e.struct)([s("tag"),y.replicate("data")]);function b({tag:z,data:V}){if(!z.eq(E))throw new Error("Invalid tag, expected: "+E.toString("hex")+", got: "+z.toString("hex"));return V}return new f(_,b,z=>({tag:E,data:z}),l)}t.tagged=R;function $(E){const y=(0,e.u32)("length"),l=(0,e.struct)([y,(0,e.blob)((0,e.offset)(y,-y.span),"data")]);return new f(l,({data:_})=>_,_=>({data:_}),E)}t.vecU8=$;function A(E){return new f($(),y=>y.toString("utf-8"),y=>Buffer.from(y,"utf-8"),E)}t.str=A;function B(E,y,l){const _=(0,e.union)(l??(0,e.u8)(),y);return E.forEach((b,z)=>_.addVariant(z,b,b.property)),_}t.rustEnum=B;function D(E,y,l){const _=(0,e.struct)([(0,e.seq)(E,y,"values")]);return new f(_,({values:b})=>b,b=>({values:b}),l)}t.array=D;class T extends e.Layout{constructor(y,l,_){super(y.span+l.span,_),this.keyLayout=y,this.valueLayout=l}decode(y,l){l=l||0;const _=this.keyLayout.decode(y,l),b=this.valueLayout.decode(y,l+this.keyLayout.getSpan(y,l));return[_,b]}encode(y,l,_){_=_||0;const b=this.keyLayout.encode(y[0],l,_),z=this.valueLayout.encode(y[1],l,_+b);return b+z}getSpan(y,l){return this.keyLayout.getSpan(y,l)+this.valueLayout.getSpan(y,l)}}function I(E,y,l){const _=(0,e.u32)("length"),b=(0,e.struct)([_,(0,e.seq)(new T(E,y),(0,e.offset)(_,-_.span),"values")]);return new f(b,({values:z})=>new Map(z),z=>({values:Array.from(z.entries())}),l)}t.map=I})(C);class W{static fieldLayout(n,e){const r=n.name!==void 0?Z(n.name):void 0;switch(n.type){case"bool":return C.bool(r);case"u8":return C.u8(r);case"i8":return C.i8(r);case"u16":return C.u16(r);case"i16":return C.i16(r);case"u32":return C.u32(r);case"i32":return C.i32(r);case"f32":return C.f32(r);case"u64":return C.u64(r);case"i64":return C.i64(r);case"f64":return C.f64(r);case"u128":return C.u128(r);case"i128":return C.i128(r);case"u256":return C.u256(r);case"i256":return C.i256(r);case"bytes":return C.vecU8(r);case"string":return C.str(r);case"publicKey":return C.publicKey(r);default:{if("vec"in n.type)return C.vec(W.fieldLayout({name:void 0,type:n.type.vec},e),r);if("option"in n.type)return C.option(W.fieldLayout({name:void 0,type:n.type.option},e),r);if("defined"in n.type){if(!e)throw new zt("User defined types not provided");const i=n.type.defined,a=e.filter(o=>o.name===i);if(a.length!==1)throw new zt(`Type not found: ${JSON.stringify(n)}`);return W.typeDefLayout(a[0],e,r)}else if("array"in n.type){let i=n.type.array[0],a=n.type.array[1],o=W.fieldLayout({name:void 0,type:i},e);return C.array(o,a,r)}else throw new Error(`Not yet implemented: ${n}`)}}}static typeDefLayout(n,e=[],r){switch(n.type.kind){case"struct":{const i=n.type.fields.map(a=>W.fieldLayout(a,e));return C.struct(i,r)}case"enum":{let i=n.type.variants.map(a=>{const o=Z(a.name);if(!a.fields)return C.struct([],o);const s=a.fields.map((d,c)=>d!=null&&d.name?W.fieldLayout(d,e):W.fieldLayout({type:d,name:c.toString()},e));return C.struct(s,o)});return r!==void 0?C.rustEnum(i).replicate(r):C.rustEnum(i,r)}case"alias":return W.fieldLayout({type:n.type.value,name:n.name},e)}}}const fr="global";class Hn{constructor(n){this.idl=n,this.ixLayout=Hn.parseIxLayout(n);const e=new Map;n.instructions.forEach(r=>{const i=hr(fr,r.name);e.set(tt.encode(i),{layout:this.ixLayout.get(r.name),name:r.name})}),this.sighashLayouts=e}encode(n,e){return this._encode(fr,n,e)}_encode(n,e,r){const i=ae.Buffer.alloc(1e3),a=Z(e),o=this.ixLayout.get(a);if(!o)throw new Error(`Unknown method: ${a}`);const s=o.encode(r,i),d=i.slice(0,s);return ae.Buffer.concat([hr(n,e),d])}static parseIxLayout(n){const e=n.instructions.map(r=>{let i=r.args.map(o=>{var s,d;return W.fieldLayout(o,Array.from([...(s=n.accounts)!==null&&s!==void 0?s:[],...(d=n.types)!==null&&d!==void 0?d:[]]))});const a=Z(r.name);return[a,C.struct(i,a)]});return new Map(e)}decode(n,e="hex"){typeof n=="string"&&(n=e==="hex"?ae.Buffer.from(n,"hex"):tt.decode(n));let r=tt.encode(n.slice(0,8)),i=n.slice(8);const a=this.sighashLayouts.get(r);return a?{data:a.layout.decode(i),name:a.name}:null}format(n,e){return se.format(n,e,this.idl)}}class se{static format(n,e,r){const i=r.instructions.filter(d=>n.name===d.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const a=i.args.map(d=>({name:d.name,type:se.formatIdlType(d.type),data:se.formatIdlData(d,n.data[d.name],r.types)})),o=se.flattenIdlAccounts(i.accounts),s=e.map((d,c)=>c<o.length?{name:o[c].name,...d}:{name:void 0,...d});return{args:a,accounts:s}}static formatIdlType(n){if(typeof n=="string")return n;if("vec"in n)return`Vec<${this.formatIdlType(n.vec)}>`;if("option"in n)return`Option<${this.formatIdlType(n.option)}>`;if("defined"in n)return n.defined;if("array"in n)return`Array<${n.array[0]}; ${n.array[1]}>`;throw new Error(`Unknown IDL type: ${n}`)}static formatIdlData(n,e,r){if(typeof n.type=="string")return e.toString();if(n.type.hasOwnProperty("vec"))return"["+e.map(i=>this.formatIdlData({name:"",type:n.type.vec},i)).join(", ")+"]";if(n.type.hasOwnProperty("option"))return e===null?"null":this.formatIdlData({name:"",type:n.type.option},e,r);if(n.type.hasOwnProperty("defined")){if(r===void 0)throw new Error("User defined types not provided");const i=r.filter(a=>a.name===n.type.defined);if(i.length!==1)throw new Error(`Type not found: ${n.type.defined}`);return se.formatIdlDataDefined(i[0],e,r)}return"unknown"}static formatIdlDataDefined(n,e,r){switch(n.type.kind){case"struct":{const i=n.type,a=Object.keys(e).map(o=>{const s=i.fields.find(d=>d.name===o);if(!s)throw new Error("Unable to find type");return o+": "+se.formatIdlData(s,e[o],r)}).join(", ");return"{ "+a+" }"}case"enum":{if(n.type.variants.length===0)return"{}";if(n.type.variants[0].name){const i=n.type.variants,a=Object.keys(e)[0],o=e[a],s=Object.keys(o).map(c=>{var u;const w=o[c],h=(u=i[a])===null||u===void 0?void 0:u.find(f=>f.name===c);if(!h)throw new Error("Unable to find variant");return c+": "+se.formatIdlData(h,w,r)}).join(", "),d=Z(a,{pascalCase:!0});return s.length===0?d:`${d} { ${s} }`}else return"Tuple formatting not yet implemented"}case"alias":return se.formatIdlType(n.type.value)}}static flattenIdlAccounts(n,e){return n.map(r=>{const i=go(r.name);if(r.hasOwnProperty("accounts")){const a=e?`${e} > ${i}`:i;return se.flattenIdlAccounts(r.accounts,a)}else return{...r,name:e?`${e} > ${i}`:i}}).flat()}}function go(t){const n=t.replace(/([A-Z])/g," $1");return n.charAt(0).toUpperCase()+n.slice(1)}function hr(t,n){let e=oo(n),r=`${t}:${e}`;return ae.Buffer.from(ni(r).slice(0,8))}function Li(t,n){switch(n.type.kind){case"struct":return n.type.fields.map(e=>Ie(t,e.type)).reduce((e,r)=>e+r,0);case"enum":{const e=n.type.variants.map(r=>r.fields?r.fields.map(i=>typeof i=="object"&&"name"in i?Ie(t,i.type):Ie(t,i)).reduce((i,a)=>i+a,0):0);return Math.max(...e)+1}case"alias":return Ie(t,n.type.value)}}function Ie(t,n){var e,r;switch(n){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if("vec"in n)return 1;if("option"in n)return 1+Ie(t,n.option);if("coption"in n)return 4+Ie(t,n.coption);if("defined"in n){const i=(r=(e=t.types)===null||e===void 0?void 0:e.filter(o=>o.name===n.defined))!==null&&r!==void 0?r:[];if(i.length!==1)throw new zt(`Type not found: ${JSON.stringify(n)}`);let a=i[0];return Li(t,a)}if("array"in n){let i=n.array[0],a=n.array[1];return Ie(t,i)*a}throw new Error(`Invalid type ${JSON.stringify(n)}`)}}const kn=8;function Ri(t){return Buffer.from(ni(t).slice(0,kn))}class Me{constructor(n){if(n.accounts===void 0){this.accountLayouts=new Map;return}const e=n.accounts.map(r=>[r.name,W.typeDefLayout(r,n.types)]);this.accountLayouts=new Map(e),this.idl=n}async encode(n,e){const r=ae.Buffer.alloc(1e3),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);const a=i.encode(e,r);let o=r.slice(0,a),s=Me.accountDiscriminator(n);return ae.Buffer.concat([s,o])}decode(n,e){if(Me.accountDiscriminator(n).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(n,e)}decodeAny(n){const e=n.slice(0,8),r=Array.from(this.accountLayouts.keys()).find(i=>Me.accountDiscriminator(i).equals(e));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,n)}decodeUnchecked(n,e){const r=e.subarray(kn),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);return i.decode(r)}memcmp(n,e){const r=Me.accountDiscriminator(n);return{offset:0,bytes:tt.encode(e?ae.Buffer.concat([r,e]):r)}}size(n){var e;return kn+((e=Li(this.idl,n))!==null&&e!==void 0?e:0)}static accountDiscriminator(n){const e=`account:${Z(n,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`;return Ri(e)}}class yo{constructor(n){if(n.events===void 0){this.layouts=new Map;return}const e=n.events.map(r=>{let i={name:r.name,type:{kind:"struct",fields:r.fields.map(a=>({name:a.name,type:a.type}))}};return[r.name,W.typeDefLayout(i,n.types)]});this.layouts=new Map(e),this.discriminators=new Map(n.events===void 0?[]:n.events.map(r=>[nr(mo(r.name)),r.name]))}decode(n){let e;try{e=ai(n)}catch{return null}const r=nr(e.slice(0,8)),i=this.discriminators.get(r);if(i===void 0)return null;const a=this.layouts.get(i);if(!a)throw new Error(`Unknown event: ${i}`);return{data:a.decode(e.slice(8)),name:i}}}function mo(t){return Ri(`event:${t}`)}class bo{constructor(n){if(n.types===void 0){this.typeLayouts=new Map;return}const e=n.types.map(r=>[r.name,W.typeDefLayout(r,n.types)]);this.typeLayouts=new Map(e),this.idl=n}encode(n,e){const r=ae.Buffer.alloc(1e3),i=this.typeLayouts.get(n);if(!i)throw new Error(`Unknown type: ${n}`);const a=i.encode(e,r);return r.slice(0,a)}decode(n,e){const r=this.typeLayouts.get(n);if(!r)throw new Error(`Unknown type: ${n}`);return r.decode(e)}}class Ci{constructor(n){this.instruction=new Hn(n),this.accounts=new Me(n),this.events=new yo(n),this.types=new bo(n)}}class vo extends jt{constructor(n){super(-1,n),this.property=n,this.layout=j([pe("length"),pe("lengthPadding"),vt(ho(pe(),-8),"chars")],this.property)}encode(n,e,r=0){if(n==null)return this.layout.span;const i={chars:Buffer.from(n,"utf8")};return this.layout.encode(i,e,r)}decode(n,e=0){return this.layout.decode(n,e).chars.toString()}getSpan(n,e=0){return pe().span+pe().span+new ri(new Uint8Array(n).slice(e,e+4),10,"le").toNumber()}}function Kt(t){return new vo(t)}function re(t){return vt(32,t)}const ee=Ti(pe("instruction"));ee.addVariant(0,j([we("lamports"),we("space"),re("owner")]),"createAccount");ee.addVariant(1,j([re("owner")]),"assign");ee.addVariant(2,j([we("lamports")]),"transfer");ee.addVariant(3,j([re("base"),Kt("seed"),we("lamports"),we("space"),re("owner")]),"createAccountWithSeed");ee.addVariant(4,j([re("authorized")]),"advanceNonceAccount");ee.addVariant(5,j([we("lamports")]),"withdrawNonceAccount");ee.addVariant(6,j([re("authorized")]),"initializeNonceAccount");ee.addVariant(7,j([re("authorized")]),"authorizeNonceAccount");ee.addVariant(8,j([we("space")]),"allocate");ee.addVariant(9,j([re("base"),Kt("seed"),we("space"),re("owner")]),"allocateWithSeed");ee.addVariant(10,j([re("base"),Kt("seed"),re("owner")]),"assignWithSeed");ee.addVariant(11,j([we("lamports"),Kt("seed"),re("owner")]),"transferWithSeed");Math.max(...Object.values(ee.registry).map(t=>t.span));class Eo extends jt{constructor(n,e,r,i){super(n.span,i),this.layout=n,this.decoder=e,this.encoder=r}decode(n,e){return this.decoder(this.layout.decode(n,e))}encode(n,e,r){return this.layout.encode(this.encoder(n),e,r)}getSpan(n,e){return this.layout.getSpan(n,e)}}function _r(t){return new Eo(vt(32),n=>new K(n),n=>n.toBuffer(),t)}j([pe("version"),pe("state"),_r("authorizedPubkey"),_r("nonce"),j([po("lamportsPerSignature")],"feeCalculator")]);function Ao(t,...n){let e=[ae.Buffer.from([97,110,99,104,111,114])];n.forEach(i=>{e.push(i instanceof ae.Buffer?i:ne(i).toBuffer())});const[r]=K.findProgramAddressSync(e,ne(t));return r}const xo=new K("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ko=new K("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var pr={exports:{}};(function(t,n){var e=typeof self<"u"?self:mn,r=function(){function a(){this.fetch=!1,this.DOMException=e.DOMException}return a.prototype=e,new a}();(function(a){(function(o){var s={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function d(l){return l&&DataView.prototype.isPrototypeOf(l)}if(s.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(l){return l&&c.indexOf(Object.prototype.toString.call(l))>-1};function w(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()}function h(l){return typeof l!="string"&&(l=String(l)),l}function f(l){var _={next:function(){var b=l.shift();return{done:b===void 0,value:b}}};return s.iterable&&(_[Symbol.iterator]=function(){return _}),_}function p(l){this.map={},l instanceof p?l.forEach(function(_,b){this.append(b,_)},this):Array.isArray(l)?l.forEach(function(_){this.append(_[0],_[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(_){this.append(_,l[_])},this)}p.prototype.append=function(l,_){l=w(l),_=h(_);var b=this.map[l];this.map[l]=b?b+", "+_:_},p.prototype.delete=function(l){delete this.map[w(l)]},p.prototype.get=function(l){return l=w(l),this.has(l)?this.map[l]:null},p.prototype.has=function(l){return this.map.hasOwnProperty(w(l))},p.prototype.set=function(l,_){this.map[w(l)]=h(_)},p.prototype.forEach=function(l,_){for(var b in this.map)this.map.hasOwnProperty(b)&&l.call(_,this.map[b],b,this)},p.prototype.keys=function(){var l=[];return this.forEach(function(_,b){l.push(b)}),f(l)},p.prototype.values=function(){var l=[];return this.forEach(function(_){l.push(_)}),f(l)},p.prototype.entries=function(){var l=[];return this.forEach(function(_,b){l.push([b,_])}),f(l)},s.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function x(l){if(l.bodyUsed)return Promise.reject(new TypeError("Already read"));l.bodyUsed=!0}function v(l){return new Promise(function(_,b){l.onload=function(){_(l.result)},l.onerror=function(){b(l.error)}})}function k(l){var _=new FileReader,b=v(_);return _.readAsArrayBuffer(l),b}function O(l){var _=new FileReader,b=v(_);return _.readAsText(l),b}function L(l){for(var _=new Uint8Array(l),b=new Array(_.length),z=0;z<_.length;z++)b[z]=String.fromCharCode(_[z]);return b.join("")}function g(l){if(l.slice)return l.slice(0);var _=new Uint8Array(l.byteLength);return _.set(new Uint8Array(l)),_.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(l){this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:s.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:s.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():s.arrayBuffer&&s.blob&&d(l)?(this._bodyArrayBuffer=g(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||u(l))?this._bodyArrayBuffer=g(l):this._bodyText=l=Object.prototype.toString.call(l):this._bodyText="",this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var l=x(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var l=x(this);if(l)return l;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(l){var _=l.toUpperCase();return $.indexOf(_)>-1?_:l}function B(l,_){_=_||{};var b=_.body;if(l instanceof B){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,_.headers||(this.headers=new p(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,!b&&l._bodyInit!=null&&(b=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new p(_.headers)),this.method=A(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function D(l){var _=new FormData;return l.trim().split("&").forEach(function(b){if(b){var z=b.split("="),V=z.shift().replace(/\+/g," "),M=z.join("=").replace(/\+/g," ");_.append(decodeURIComponent(V),decodeURIComponent(M))}}),_}function T(l){var _=new p,b=l.replace(/\r?\n[\t ]+/g," ");return b.split(/\r?\n/).forEach(function(z){var V=z.split(":"),M=V.shift().trim();if(M){var St=V.join(":").trim();_.append(M,St)}}),_}R.call(B.prototype);function I(l,_){_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in _?_.statusText:"OK",this.headers=new p(_.headers),this.url=_.url||"",this._initBody(l)}R.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var l=new I(null,{status:0,statusText:""});return l.type="error",l};var E=[301,302,303,307,308];I.redirect=function(l,_){if(E.indexOf(_)===-1)throw new RangeError("Invalid status code");return new I(null,{status:_,headers:{location:l}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,b){this.message=_,this.name=b;var z=Error(_);this.stack=z.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function y(l,_){return new Promise(function(b,z){var V=new B(l,_);if(V.signal&&V.signal.aborted)return z(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function St(){M.abort()}M.onload=function(){var We={status:M.status,statusText:M.statusText,headers:T(M.getAllResponseHeaders()||"")};We.url="responseURL"in M?M.responseURL:We.headers.get("X-Request-URL");var Jt="response"in M?M.response:M.responseText;b(new I(Jt,We))},M.onerror=function(){z(new TypeError("Network request failed"))},M.ontimeout=function(){z(new TypeError("Network request failed"))},M.onabort=function(){z(new o.DOMException("Aborted","AbortError"))},M.open(V.method,V.url,!0),V.credentials==="include"?M.withCredentials=!0:V.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&s.blob&&(M.responseType="blob"),V.headers.forEach(function(We,Jt){M.setRequestHeader(Jt,We)}),V.signal&&(V.signal.addEventListener("abort",St),M.onreadystatechange=function(){M.readyState===4&&V.signal.removeEventListener("abort",St)}),M.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return y.polyfill=!0,a.fetch||(a.fetch=y,a.Headers=p,a.Request=B,a.Response=I),o.Headers=p,o.Request=B,o.Response=I,o.fetch=y,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;n=i.fetch,n.default=i.fetch,n.fetch=i.fetch,n.Headers=i.Headers,n.Request=i.Request,n.Response=i.Response,t.exports=n})(pr,pr.exports);C.rustEnum([C.struct([],"uninitialized"),C.struct([C.option(C.publicKey(),"authorityAddress")],"buffer"),C.struct([C.publicKey("programdataAddress")],"program"),C.struct([C.u64("slot"),C.option(C.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,C.u32());/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const So=4,wr=0,gr=1,Io=2;function qe(t){let n=t.length;for(;--n>=0;)t[n]=0}const To=0,Oi=1,Lo=2,Ro=3,Co=258,qn=29,Et=256,ct=Et+1+qn,Fe=30,Kn=19,Di=2*ct+1,Te=15,tn=16,Oo=7,Gn=256,Bi=16,Ni=17,Pi=18,Sn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Pt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Do=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),zi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bo=512,he=new Array((ct+2)*2);qe(he);const it=new Array(Fe*2);qe(it);const ut=new Array(Bo);qe(ut);const lt=new Array(Co-Ro+1);qe(lt);const Wn=new Array(qn);qe(Wn);const $t=new Array(Fe);qe($t);function nn(t,n,e,r,i){this.static_tree=t,this.extra_bits=n,this.extra_base=e,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let Ui,Mi,$i;function rn(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const Fi=t=>t<256?ut[t]:ut[256+(t>>>7)],dt=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},Y=(t,n,e)=>{t.bi_valid>tn-e?(t.bi_buf|=n<<t.bi_valid&65535,dt(t,t.bi_buf),t.bi_buf=n>>tn-t.bi_valid,t.bi_valid+=e-tn):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=e)},ce=(t,n,e)=>{Y(t,e[n*2],e[n*2+1])},Zi=(t,n)=>{let e=0;do e|=t&1,t>>>=1,e<<=1;while(--n>0);return e>>>1},No=t=>{t.bi_valid===16?(dt(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Po=(t,n)=>{const e=n.dyn_tree,r=n.max_code,i=n.stat_desc.static_tree,a=n.stat_desc.has_stree,o=n.stat_desc.extra_bits,s=n.stat_desc.extra_base,d=n.stat_desc.max_length;let c,u,w,h,f,p,x=0;for(h=0;h<=Te;h++)t.bl_count[h]=0;for(e[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<Di;c++)u=t.heap[c],h=e[e[u*2+1]*2+1]+1,h>d&&(h=d,x++),e[u*2+1]=h,!(u>r)&&(t.bl_count[h]++,f=0,u>=s&&(f=o[u-s]),p=e[u*2],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(i[u*2+1]+f)));if(x!==0){do{for(h=d-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[d]--,x-=2}while(x>0);for(h=d;h!==0;h--)for(u=t.bl_count[h];u!==0;)w=t.heap[--c],!(w>r)&&(e[w*2+1]!==h&&(t.opt_len+=(h-e[w*2+1])*e[w*2],e[w*2+1]=h),u--)}},Vi=(t,n,e)=>{const r=new Array(Te+1);let i=0,a,o;for(a=1;a<=Te;a++)i=i+e[a-1]<<1,r[a]=i;for(o=0;o<=n;o++){let s=t[o*2+1];s!==0&&(t[o*2]=Zi(r[s]++,s))}},zo=()=>{let t,n,e,r,i;const a=new Array(Te+1);for(e=0,r=0;r<qn-1;r++)for(Wn[r]=e,t=0;t<1<<Sn[r];t++)lt[e++]=r;for(lt[e-1]=r,i=0,r=0;r<16;r++)for($t[r]=i,t=0;t<1<<Pt[r];t++)ut[i++]=r;for(i>>=7;r<Fe;r++)for($t[r]=i<<7,t=0;t<1<<Pt[r]-7;t++)ut[256+i++]=r;for(n=0;n<=Te;n++)a[n]=0;for(t=0;t<=143;)he[t*2+1]=8,t++,a[8]++;for(;t<=255;)he[t*2+1]=9,t++,a[9]++;for(;t<=279;)he[t*2+1]=7,t++,a[7]++;for(;t<=287;)he[t*2+1]=8,t++,a[8]++;for(Vi(he,ct+1,a),t=0;t<Fe;t++)it[t*2+1]=5,it[t*2]=Zi(t,5);Ui=new nn(he,Sn,Et+1,ct,Te),Mi=new nn(it,Pt,0,Fe,Te),$i=new nn(new Array(0),Do,0,Kn,Oo)},ji=t=>{let n;for(n=0;n<ct;n++)t.dyn_ltree[n*2]=0;for(n=0;n<Fe;n++)t.dyn_dtree[n*2]=0;for(n=0;n<Kn;n++)t.bl_tree[n*2]=0;t.dyn_ltree[Gn*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Hi=t=>{t.bi_valid>8?dt(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},yr=(t,n,e,r)=>{const i=n*2,a=e*2;return t[i]<t[a]||t[i]===t[a]&&r[n]<=r[e]},an=(t,n,e)=>{const r=t.heap[e];let i=e<<1;for(;i<=t.heap_len&&(i<t.heap_len&&yr(n,t.heap[i+1],t.heap[i],t.depth)&&i++,!yr(n,r,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=r},mr=(t,n,e)=>{let r,i,a=0,o,s;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+a++]&255,r+=(t.pending_buf[t.sym_buf+a++]&255)<<8,i=t.pending_buf[t.sym_buf+a++],r===0?ce(t,i,n):(o=lt[i],ce(t,o+Et+1,n),s=Sn[o],s!==0&&(i-=Wn[o],Y(t,i,s)),r--,o=Fi(r),ce(t,o,e),s=Pt[o],s!==0&&(r-=$t[o],Y(t,r,s)));while(a<t.sym_next);ce(t,Gn,n)},In=(t,n)=>{const e=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let o,s,d=-1,c;for(t.heap_len=0,t.heap_max=Di,o=0;o<a;o++)e[o*2]!==0?(t.heap[++t.heap_len]=d=o,t.depth[o]=0):e[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=d<2?++d:0,e[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(n.max_code=d,o=t.heap_len>>1;o>=1;o--)an(t,e,o);c=a;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],an(t,e,1),s=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=s,e[c*2]=e[o*2]+e[s*2],t.depth[c]=(t.depth[o]>=t.depth[s]?t.depth[o]:t.depth[s])+1,e[o*2+1]=e[s*2+1]=c,t.heap[1]=c++,an(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Po(t,n),Vi(e,d,t.bl_count)},br=(t,n,e)=>{let r,i=-1,a,o=n[0*2+1],s=0,d=7,c=4;for(o===0&&(d=138,c=3),n[(e+1)*2+1]=65535,r=0;r<=e;r++)a=o,o=n[(r+1)*2+1],!(++s<d&&a===o)&&(s<c?t.bl_tree[a*2]+=s:a!==0?(a!==i&&t.bl_tree[a*2]++,t.bl_tree[Bi*2]++):s<=10?t.bl_tree[Ni*2]++:t.bl_tree[Pi*2]++,s=0,i=a,o===0?(d=138,c=3):a===o?(d=6,c=3):(d=7,c=4))},vr=(t,n,e)=>{let r,i=-1,a,o=n[0*2+1],s=0,d=7,c=4;for(o===0&&(d=138,c=3),r=0;r<=e;r++)if(a=o,o=n[(r+1)*2+1],!(++s<d&&a===o)){if(s<c)do ce(t,a,t.bl_tree);while(--s!==0);else a!==0?(a!==i&&(ce(t,a,t.bl_tree),s--),ce(t,Bi,t.bl_tree),Y(t,s-3,2)):s<=10?(ce(t,Ni,t.bl_tree),Y(t,s-3,3)):(ce(t,Pi,t.bl_tree),Y(t,s-11,7));s=0,i=a,o===0?(d=138,c=3):a===o?(d=6,c=3):(d=7,c=4)}},Uo=t=>{let n;for(br(t,t.dyn_ltree,t.l_desc.max_code),br(t,t.dyn_dtree,t.d_desc.max_code),In(t,t.bl_desc),n=Kn-1;n>=3&&t.bl_tree[zi[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},Mo=(t,n,e,r)=>{let i;for(Y(t,n-257,5),Y(t,e-1,5),Y(t,r-4,4),i=0;i<r;i++)Y(t,t.bl_tree[zi[i]*2+1],3);vr(t,t.dyn_ltree,n-1),vr(t,t.dyn_dtree,e-1)},$o=t=>{let n=4093624447,e;for(e=0;e<=31;e++,n>>>=1)if(n&1&&t.dyn_ltree[e*2]!==0)return wr;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return gr;for(e=32;e<Et;e++)if(t.dyn_ltree[e*2]!==0)return gr;return wr};let Er=!1;const Fo=t=>{Er||(zo(),Er=!0),t.l_desc=new rn(t.dyn_ltree,Ui),t.d_desc=new rn(t.dyn_dtree,Mi),t.bl_desc=new rn(t.bl_tree,$i),t.bi_buf=0,t.bi_valid=0,ji(t)},qi=(t,n,e,r)=>{Y(t,(To<<1)+(r?1:0),3),Hi(t),dt(t,e),dt(t,~e),e&&t.pending_buf.set(t.window.subarray(n,n+e),t.pending),t.pending+=e},Zo=t=>{Y(t,Oi<<1,3),ce(t,Gn,he),No(t)},Vo=(t,n,e,r)=>{let i,a,o=0;t.level>0?(t.strm.data_type===Io&&(t.strm.data_type=$o(t)),In(t,t.l_desc),In(t,t.d_desc),o=Uo(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=e+5,e+4<=i&&n!==-1?qi(t,n,e,r):t.strategy===So||a===i?(Y(t,(Oi<<1)+(r?1:0),3),mr(t,he,it)):(Y(t,(Lo<<1)+(r?1:0),3),Mo(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),mr(t,t.dyn_ltree,t.dyn_dtree)),ji(t),r&&Hi(t)},jo=(t,n,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,n===0?t.dyn_ltree[e*2]++:(t.matches++,n--,t.dyn_ltree[(lt[e]+Et+1)*2]++,t.dyn_dtree[Fi(n)*2]++),t.sym_next===t.sym_end);var Ho=Fo,qo=qi,Ko=Vo,Go=jo,Wo=Zo,Xo={_tr_init:Ho,_tr_stored_block:qo,_tr_flush_block:Ko,_tr_tally:Go,_tr_align:Wo};const Yo=(t,n,e,r)=>{let i=t&65535|0,a=t>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+n[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var ft=Yo;const Jo=()=>{let t,n=[];for(var e=0;e<256;e++){t=e;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n},Qo=new Uint32Array(Jo()),es=(t,n,e,r)=>{const i=Qo,a=r+e;t^=-1;for(let o=r;o<a;o++)t=t>>>8^i[(t^n[o])&255];return t^-1};var H=es,Ze={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},At={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ts,_tr_stored_block:Tn,_tr_flush_block:ns,_tr_tally:ve,_tr_align:rs}=Xo,{Z_NO_FLUSH:Ee,Z_PARTIAL_FLUSH:is,Z_FULL_FLUSH:as,Z_FINISH:te,Z_BLOCK:Ar,Z_OK:q,Z_STREAM_END:xr,Z_STREAM_ERROR:ue,Z_DATA_ERROR:os,Z_BUF_ERROR:on,Z_DEFAULT_COMPRESSION:ss,Z_FILTERED:cs,Z_HUFFMAN_ONLY:Tt,Z_RLE:us,Z_FIXED:ls,Z_DEFAULT_STRATEGY:ds,Z_UNKNOWN:fs,Z_DEFLATED:Gt}=At,hs=9,_s=15,ps=8,ws=29,gs=256,Ln=gs+1+ws,ys=30,ms=19,bs=2*Ln+1,vs=15,N=3,me=258,le=me+N+1,Es=32,Ve=42,Xn=57,Rn=69,Cn=73,On=91,Dn=103,Le=113,Qe=666,G=1,Ke=2,Ce=3,Ge=4,As=3,Re=(t,n)=>(t.msg=Ze[n],n),kr=t=>t*2-(t>4?9:0),ye=t=>{let n=t.length;for(;--n>=0;)t[n]=0},xs=t=>{let n,e,r,i=t.w_size;n=t.hash_size,r=n;do e=t.head[--r],t.head[r]=e>=i?e-i:0;while(--n);n=i,r=n;do e=t.prev[--r],t.prev[r]=e>=i?e-i:0;while(--n)};let ks=(t,n,e)=>(n<<t.hash_shift^e)&t.hash_mask,Ae=ks;const J=t=>{const n=t.state;let e=n.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+e),t.next_out),t.next_out+=e,n.pending_out+=e,t.total_out+=e,t.avail_out-=e,n.pending-=e,n.pending===0&&(n.pending_out=0))},Q=(t,n)=>{ns(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,J(t.strm)},P=(t,n)=>{t.pending_buf[t.pending++]=n},Ye=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},Bn=(t,n,e,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,n.set(t.input.subarray(t.next_in,t.next_in+i),e),t.state.wrap===1?t.adler=ft(t.adler,n,i,e):t.state.wrap===2&&(t.adler=H(t.adler,n,i,e)),t.next_in+=i,t.total_in+=i,i)},Ki=(t,n)=>{let e=t.max_chain_length,r=t.strstart,i,a,o=t.prev_length,s=t.nice_match;const d=t.strstart>t.w_size-le?t.strstart-(t.w_size-le):0,c=t.window,u=t.w_mask,w=t.prev,h=t.strstart+me;let f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(e>>=2),s>t.lookahead&&(s=t.lookahead);do if(i=n,!(c[i+o]!==p||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(a=me-(h-r),r=h-me,a>o){if(t.match_start=n,o=a,a>=s)break;f=c[r+o-1],p=c[r+o]}}while((n=w[n&u])>d&&--e!==0);return o<=t.lookahead?o:t.lookahead},je=t=>{const n=t.w_size;let e,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-le)&&(t.window.set(t.window.subarray(n,n+n-r),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),xs(t),r+=n),t.strm.avail_in===0)break;if(e=Bn(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=e,t.lookahead+t.insert>=N)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Ae(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Ae(t,t.ins_h,t.window[i+N-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<N)););}while(t.lookahead<le&&t.strm.avail_in!==0)},Gi=(t,n)=>{let e=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,i,a,o=0,s=t.strm.avail_in;do{if(r=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a||(a=t.strm.avail_out-a,i=t.strstart-t.block_start,r>i+t.strm.avail_in&&(r=i+t.strm.avail_in),r>a&&(r=a),r<e&&(r===0&&n!==te||n===Ee||r!==i+t.strm.avail_in)))break;o=n===te&&r===i+t.strm.avail_in?1:0,Tn(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,J(t.strm),i&&(i>r&&(i=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,r-=i),r&&(Bn(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(o===0);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?Ge:n!==Ee&&n!==te&&t.strm.avail_in===0&&t.strstart===t.block_start?Ke:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(Bn(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a,e=a>t.w_size?t.w_size:a,i=t.strstart-t.block_start,(i>=e||(i||n===te)&&n!==Ee&&t.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=n===te&&t.strm.avail_in===0&&r===i?1:0,Tn(t,t.block_start,r,o),t.block_start+=r,J(t.strm)),o?Ce:G)},sn=(t,n)=>{let e,r;for(;;){if(t.lookahead<le){if(je(t),t.lookahead<le&&n===Ee)return G;if(t.lookahead===0)break}if(e=0,t.lookahead>=N&&(t.ins_h=Ae(t,t.ins_h,t.window[t.strstart+N-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-le&&(t.match_length=Ki(t,e)),t.match_length>=N)if(r=ve(t,t.strstart-t.match_start,t.match_length-N),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=N){t.match_length--;do t.strstart++,t.ins_h=Ae(t,t.ins_h,t.window[t.strstart+N-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ae(t,t.ins_h,t.window[t.strstart+1]);else r=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Q(t,!1),t.strm.avail_out===0))return G}return t.insert=t.strstart<N-1?t.strstart:N-1,n===te?(Q(t,!0),t.strm.avail_out===0?Ce:Ge):t.sym_next&&(Q(t,!1),t.strm.avail_out===0)?G:Ke},Ne=(t,n)=>{let e,r,i;for(;;){if(t.lookahead<le){if(je(t),t.lookahead<le&&n===Ee)return G;if(t.lookahead===0)break}if(e=0,t.lookahead>=N&&(t.ins_h=Ae(t,t.ins_h,t.window[t.strstart+N-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=N-1,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-le&&(t.match_length=Ki(t,e),t.match_length<=5&&(t.strategy===cs||t.match_length===N&&t.strstart-t.match_start>4096)&&(t.match_length=N-1)),t.prev_length>=N&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-N,r=ve(t,t.strstart-1-t.prev_match,t.prev_length-N),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=Ae(t,t.ins_h,t.window[t.strstart+N-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=N-1,t.strstart++,r&&(Q(t,!1),t.strm.avail_out===0))return G}else if(t.match_available){if(r=ve(t,0,t.window[t.strstart-1]),r&&Q(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return G}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=ve(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<N-1?t.strstart:N-1,n===te?(Q(t,!0),t.strm.avail_out===0?Ce:Ge):t.sym_next&&(Q(t,!1),t.strm.avail_out===0)?G:Ke},Ss=(t,n)=>{let e,r,i,a;const o=t.window;for(;;){if(t.lookahead<=me){if(je(t),t.lookahead<=me&&n===Ee)return G;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=N&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=t.strstart+me;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);t.match_length=me-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=N?(e=ve(t,1,t.match_length-N),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(Q(t,!1),t.strm.avail_out===0))return G}return t.insert=0,n===te?(Q(t,!0),t.strm.avail_out===0?Ce:Ge):t.sym_next&&(Q(t,!1),t.strm.avail_out===0)?G:Ke},Is=(t,n)=>{let e;for(;;){if(t.lookahead===0&&(je(t),t.lookahead===0)){if(n===Ee)return G;break}if(t.match_length=0,e=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(Q(t,!1),t.strm.avail_out===0))return G}return t.insert=0,n===te?(Q(t,!0),t.strm.avail_out===0?Ce:Ge):t.sym_next&&(Q(t,!1),t.strm.avail_out===0)?G:Ke};function oe(t,n,e,r,i){this.good_length=t,this.max_lazy=n,this.nice_length=e,this.max_chain=r,this.func=i}const et=[new oe(0,0,0,0,Gi),new oe(4,4,8,4,sn),new oe(4,5,16,8,sn),new oe(4,6,32,32,sn),new oe(4,4,16,16,Ne),new oe(8,16,32,32,Ne),new oe(8,16,128,128,Ne),new oe(8,32,128,256,Ne),new oe(32,128,258,1024,Ne),new oe(32,258,258,4096,Ne)],Ts=t=>{t.window_size=2*t.w_size,ye(t.head),t.max_lazy_match=et[t.level].max_lazy,t.good_match=et[t.level].good_length,t.nice_match=et[t.level].nice_length,t.max_chain_length=et[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=N-1,t.match_available=0,t.ins_h=0};function Ls(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Gt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(bs*2),this.dyn_dtree=new Uint16Array((2*ys+1)*2),this.bl_tree=new Uint16Array((2*ms+1)*2),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(vs+1),this.heap=new Uint16Array(2*Ln+1),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ln+1),ye(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const xt=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==Ve&&n.status!==Xn&&n.status!==Rn&&n.status!==Cn&&n.status!==On&&n.status!==Dn&&n.status!==Le&&n.status!==Qe?1:0},Wi=t=>{if(xt(t))return Re(t,ue);t.total_in=t.total_out=0,t.data_type=fs;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?Xn:n.wrap?Ve:Le,t.adler=n.wrap===2?0:1,n.last_flush=-2,ts(n),q},Xi=t=>{const n=Wi(t);return n===q&&Ts(t.state),n},Rs=(t,n)=>xt(t)||t.state.wrap!==2?ue:(t.state.gzhead=n,q),Yi=(t,n,e,r,i,a)=>{if(!t)return ue;let o=1;if(n===ss&&(n=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>hs||e!==Gt||r<8||r>15||n<0||n>9||a<0||a>ls||r===8&&o!==1)return Re(t,ue);r===8&&(r=9);const s=new Ls;return t.state=s,s.strm=t,s.status=Ve,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+N-1)/N),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=n,s.strategy=a,s.method=e,Xi(t)},Cs=(t,n)=>Yi(t,n,Gt,_s,ps,ds),Os=(t,n)=>{if(xt(t)||n>Ar||n<0)return t?Re(t,ue):ue;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===Qe&&n!==te)return Re(t,t.avail_out===0?on:ue);const r=e.last_flush;if(e.last_flush=n,e.pending!==0){if(J(t),t.avail_out===0)return e.last_flush=-1,q}else if(t.avail_in===0&&kr(n)<=kr(r)&&n!==te)return Re(t,on);if(e.status===Qe&&t.avail_in!==0)return Re(t,on);if(e.status===Ve&&e.wrap===0&&(e.status=Le),e.status===Ve){let i=Gt+(e.w_bits-8<<4)<<8,a=-1;if(e.strategy>=Tt||e.level<2?a=0:e.level<6?a=1:e.level===6?a=2:a=3,i|=a<<6,e.strstart!==0&&(i|=Es),i+=31-i%31,Ye(e,i),e.strstart!==0&&(Ye(e,t.adler>>>16),Ye(e,t.adler&65535)),t.adler=1,e.status=Le,J(t),e.pending!==0)return e.last_flush=-1,q}if(e.status===Xn){if(t.adler=0,P(e,31),P(e,139),P(e,8),e.gzhead)P(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),P(e,e.gzhead.time&255),P(e,e.gzhead.time>>8&255),P(e,e.gzhead.time>>16&255),P(e,e.gzhead.time>>24&255),P(e,e.level===9?2:e.strategy>=Tt||e.level<2?4:0),P(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(P(e,e.gzhead.extra.length&255),P(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=H(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=Rn;else if(P(e,0),P(e,0),P(e,0),P(e,0),P(e,0),P(e,e.level===9?2:e.strategy>=Tt||e.level<2?4:0),P(e,As),e.status=Le,J(t),e.pending!==0)return e.last_flush=-1,q}if(e.status===Rn){if(e.gzhead.extra){let i=e.pending,a=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+a>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=s,J(t),e.pending!==0)return e.last_flush=-1,q;i=0,a-=s}let o=new Uint8Array(e.gzhead.extra);e.pending_buf.set(o.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending+=a,e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Cn}if(e.status===Cn){if(e.gzhead.name){let i=e.pending,a;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i)),J(t),e.pending!==0)return e.last_flush=-1,q;i=0}e.gzindex<e.gzhead.name.length?a=e.gzhead.name.charCodeAt(e.gzindex++)&255:a=0,P(e,a)}while(a!==0);e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=On}if(e.status===On){if(e.gzhead.comment){let i=e.pending,a;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i)),J(t),e.pending!==0)return e.last_flush=-1,q;i=0}e.gzindex<e.gzhead.comment.length?a=e.gzhead.comment.charCodeAt(e.gzindex++)&255:a=0,P(e,a)}while(a!==0);e.gzhead.hcrc&&e.pending>i&&(t.adler=H(t.adler,e.pending_buf,e.pending-i,i))}e.status=Dn}if(e.status===Dn){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(J(t),e.pending!==0))return e.last_flush=-1,q;P(e,t.adler&255),P(e,t.adler>>8&255),t.adler=0}if(e.status=Le,J(t),e.pending!==0)return e.last_flush=-1,q}if(t.avail_in!==0||e.lookahead!==0||n!==Ee&&e.status!==Qe){let i=e.level===0?Gi(e,n):e.strategy===Tt?Is(e,n):e.strategy===us?Ss(e,n):et[e.level].func(e,n);if((i===Ce||i===Ge)&&(e.status=Qe),i===G||i===Ce)return t.avail_out===0&&(e.last_flush=-1),q;if(i===Ke&&(n===is?rs(e):n!==Ar&&(Tn(e,0,0,!1),n===as&&(ye(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),J(t),t.avail_out===0))return e.last_flush=-1,q}return n!==te?q:e.wrap<=0?xr:(e.wrap===2?(P(e,t.adler&255),P(e,t.adler>>8&255),P(e,t.adler>>16&255),P(e,t.adler>>24&255),P(e,t.total_in&255),P(e,t.total_in>>8&255),P(e,t.total_in>>16&255),P(e,t.total_in>>24&255)):(Ye(e,t.adler>>>16),Ye(e,t.adler&65535)),J(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?q:xr)},Ds=t=>{if(xt(t))return ue;const n=t.state.status;return t.state=null,n===Le?Re(t,os):q},Bs=(t,n)=>{let e=n.length;if(xt(t))return ue;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==Ve||r.lookahead)return ue;if(i===1&&(t.adler=ft(t.adler,n,e,0)),r.wrap=0,e>=r.w_size){i===0&&(ye(r.head),r.strstart=0,r.block_start=0,r.insert=0);let d=new Uint8Array(r.w_size);d.set(n.subarray(e-r.w_size,e),0),n=d,e=r.w_size}const a=t.avail_in,o=t.next_in,s=t.input;for(t.avail_in=e,t.next_in=0,t.input=n,je(r);r.lookahead>=N;){let d=r.strstart,c=r.lookahead-(N-1);do r.ins_h=Ae(r,r.ins_h,r.window[d+N-1]),r.prev[d&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=d,d++;while(--c);r.strstart=d,r.lookahead=N-1,je(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=N-1,r.match_available=0,t.next_in=o,t.input=s,t.avail_in=a,r.wrap=i,q};var Ns=Cs,Ps=Yi,zs=Xi,Us=Wi,Ms=Rs,$s=Os,Fs=Ds,Zs=Bs,Vs="pako deflate (from Nodeca project)",at={deflateInit:Ns,deflateInit2:Ps,deflateReset:zs,deflateResetKeep:Us,deflateSetHeader:Ms,deflate:$s,deflateEnd:Fs,deflateSetDictionary:Zs,deflateInfo:Vs};const js=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var Hs=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)js(e,r)&&(t[r]=e[r])}}return t},qs=t=>{let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].length;const e=new Uint8Array(n);for(let r=0,i=0,a=t.length;r<a;r++){let o=t[r];e.set(o,i),i+=o.length}return e},Wt={assign:Hs,flattenChunks:qs};let Ji=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ji=!1}const ht=new Uint8Array(256);for(let t=0;t<256;t++)ht[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ht[254]=ht[254]=1;var Ks=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,e,r,i,a,o=t.length,s=0;for(i=0;i<o;i++)e=t.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(s),a=0,i=0;a<s;i++)e=t.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?n[a++]=e:e<2048?(n[a++]=192|e>>>6,n[a++]=128|e&63):e<65536?(n[a++]=224|e>>>12,n[a++]=128|e>>>6&63,n[a++]=128|e&63):(n[a++]=240|e>>>18,n[a++]=128|e>>>12&63,n[a++]=128|e>>>6&63,n[a++]=128|e&63);return n};const Gs=(t,n)=>{if(n<65534&&t.subarray&&Ji)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let e="";for(let r=0;r<n;r++)e+=String.fromCharCode(t[r]);return e};var Ws=(t,n)=>{const e=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let r,i;const a=new Array(e*2);for(i=0,r=0;r<e;){let o=t[r++];if(o<128){a[i++]=o;continue}let s=ht[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<e;)o=o<<6|t[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Gs(a,i)},Xs=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let e=n-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?n:e+ht[t[e]]>n?e:n},_t={string2buf:Ks,buf2string:Ws,utf8border:Xs};function Ys(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Qi=Ys;const ea=Object.prototype.toString,{Z_NO_FLUSH:Js,Z_SYNC_FLUSH:Qs,Z_FULL_FLUSH:ec,Z_FINISH:tc,Z_OK:Ft,Z_STREAM_END:nc,Z_DEFAULT_COMPRESSION:rc,Z_DEFAULT_STRATEGY:ic,Z_DEFLATED:ac}=At;function Yn(t){this.options=Wt.assign({level:rc,method:ac,chunkSize:16384,windowBits:15,memLevel:8,strategy:ic},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qi,this.strm.avail_out=0;let e=at.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==Ft)throw new Error(Ze[e]);if(n.header&&at.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=_t.string2buf(n.dictionary):ea.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,e=at.deflateSetDictionary(this.strm,r),e!==Ft)throw new Error(Ze[e]);this._dict_set=!0}}Yn.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?tc:Js,typeof t=="string"?e.input=_t.string2buf(t):ea.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(a===Qs||a===ec)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=at.deflate(e,a),i===nc)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=at.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ft;if(e.avail_out===0){this.onData(e.output);continue}if(a>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Yn.prototype.onData=function(t){this.chunks.push(t)};Yn.prototype.onEnd=function(t){t===Ft&&(this.result=Wt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const Lt=16209,oc=16191;var sc=function(n,e){let r,i,a,o,s,d,c,u,w,h,f,p,x,v,k,O,L,g,R,$,A,B,D,T;const I=n.state;r=n.next_in,D=n.input,i=r+(n.avail_in-5),a=n.next_out,T=n.output,o=a-(e-n.avail_out),s=a+(n.avail_out-257),d=I.dmax,c=I.wsize,u=I.whave,w=I.wnext,h=I.window,f=I.hold,p=I.bits,x=I.lencode,v=I.distcode,k=(1<<I.lenbits)-1,O=(1<<I.distbits)-1;e:do{p<15&&(f+=D[r++]<<p,p+=8,f+=D[r++]<<p,p+=8),L=x[f&k];t:for(;;){if(g=L>>>24,f>>>=g,p-=g,g=L>>>16&255,g===0)T[a++]=L&65535;else if(g&16){R=L&65535,g&=15,g&&(p<g&&(f+=D[r++]<<p,p+=8),R+=f&(1<<g)-1,f>>>=g,p-=g),p<15&&(f+=D[r++]<<p,p+=8,f+=D[r++]<<p,p+=8),L=v[f&O];n:for(;;){if(g=L>>>24,f>>>=g,p-=g,g=L>>>16&255,g&16){if($=L&65535,g&=15,p<g&&(f+=D[r++]<<p,p+=8,p<g&&(f+=D[r++]<<p,p+=8)),$+=f&(1<<g)-1,$>d){n.msg="invalid distance too far back",I.mode=Lt;break e}if(f>>>=g,p-=g,g=a-o,$>g){if(g=$-g,g>u&&I.sane){n.msg="invalid distance too far back",I.mode=Lt;break e}if(A=0,B=h,w===0){if(A+=c-g,g<R){R-=g;do T[a++]=h[A++];while(--g);A=a-$,B=T}}else if(w<g){if(A+=c+w-g,g-=w,g<R){R-=g;do T[a++]=h[A++];while(--g);if(A=0,w<R){g=w,R-=g;do T[a++]=h[A++];while(--g);A=a-$,B=T}}}else if(A+=w-g,g<R){R-=g;do T[a++]=h[A++];while(--g);A=a-$,B=T}for(;R>2;)T[a++]=B[A++],T[a++]=B[A++],T[a++]=B[A++],R-=3;R&&(T[a++]=B[A++],R>1&&(T[a++]=B[A++]))}else{A=a-$;do T[a++]=T[A++],T[a++]=T[A++],T[a++]=T[A++],R-=3;while(R>2);R&&(T[a++]=T[A++],R>1&&(T[a++]=T[A++]))}}else if((g&64)===0){L=v[(L&65535)+(f&(1<<g)-1)];continue n}else{n.msg="invalid distance code",I.mode=Lt;break e}break}}else if((g&64)===0){L=x[(L&65535)+(f&(1<<g)-1)];continue t}else if(g&32){I.mode=oc;break e}else{n.msg="invalid literal/length code",I.mode=Lt;break e}break}}while(r<i&&a<s);R=p>>3,r-=R,p-=R<<3,f&=(1<<p)-1,n.next_in=r,n.next_out=a,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=a<s?257+(s-a):257-(a-s),I.hold=f,I.bits=p};const Pe=15,Sr=852,Ir=592,Tr=0,cn=1,Lr=2,cc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),fc=(t,n,e,r,i,a,o,s)=>{const d=s.bits;let c=0,u=0,w=0,h=0,f=0,p=0,x=0,v=0,k=0,O=0,L,g,R,$,A,B=null,D;const T=new Uint16Array(Pe+1),I=new Uint16Array(Pe+1);let E=null,y,l,_;for(c=0;c<=Pe;c++)T[c]=0;for(u=0;u<r;u++)T[n[e+u]]++;for(f=d,h=Pe;h>=1&&T[h]===0;h--);if(f>h&&(f=h),h===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(w=1;w<h&&T[w]===0;w++);for(f<w&&(f=w),v=1,c=1;c<=Pe;c++)if(v<<=1,v-=T[c],v<0)return-1;if(v>0&&(t===Tr||h!==1))return-1;for(I[1]=0,c=1;c<Pe;c++)I[c+1]=I[c]+T[c];for(u=0;u<r;u++)n[e+u]!==0&&(o[I[n[e+u]]++]=u);if(t===Tr?(B=E=o,D=20):t===cn?(B=cc,E=uc,D=257):(B=lc,E=dc,D=0),O=0,u=0,c=w,A=a,p=f,x=0,R=-1,k=1<<f,$=k-1,t===cn&&k>Sr||t===Lr&&k>Ir)return 1;for(;;){y=c-x,o[u]+1<D?(l=0,_=o[u]):o[u]>=D?(l=E[o[u]-D],_=B[o[u]-D]):(l=32+64,_=0),L=1<<c-x,g=1<<p,w=g;do g-=L,i[A+(O>>x)+g]=y<<24|l<<16|_|0;while(g!==0);for(L=1<<c-1;O&L;)L>>=1;if(L!==0?(O&=L-1,O+=L):O=0,u++,--T[c]===0){if(c===h)break;c=n[e+o[u]]}if(c>f&&(O&$)!==R){for(x===0&&(x=f),A+=w,p=c-x,v=1<<p;p+x<h&&(v-=T[p+x],!(v<=0));)p++,v<<=1;if(k+=1<<p,t===cn&&k>Sr||t===Lr&&k>Ir)return 1;R=O&$,i[R]=f<<24|p<<16|A-a|0}}return O!==0&&(i[A+O]=c-x<<24|64<<16|0),s.bits=f,0};var ot=fc;const hc=0,ta=1,na=2,{Z_FINISH:Rr,Z_BLOCK:_c,Z_TREES:Rt,Z_OK:Oe,Z_STREAM_END:pc,Z_NEED_DICT:wc,Z_STREAM_ERROR:ie,Z_DATA_ERROR:ra,Z_MEM_ERROR:ia,Z_BUF_ERROR:gc,Z_DEFLATED:Cr}=At,Xt=16180,Or=16181,Dr=16182,Br=16183,Nr=16184,Pr=16185,zr=16186,Ur=16187,Mr=16188,$r=16189,Zt=16190,fe=16191,un=16192,Fr=16193,ln=16194,Zr=16195,Vr=16196,jr=16197,Hr=16198,Ct=16199,Ot=16200,qr=16201,Kr=16202,Gr=16203,Wr=16204,Xr=16205,dn=16206,Yr=16207,Jr=16208,F=16209,aa=16210,oa=16211,yc=852,mc=592,bc=15,vc=bc,Qr=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Ec(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Be=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<Xt||n.mode>oa?1:0},sa=t=>{if(Be(t))return ie;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=Xt,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(yc),n.distcode=n.distdyn=new Int32Array(mc),n.sane=1,n.back=-1,Oe},ca=t=>{if(Be(t))return ie;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,sa(t)},ua=(t,n)=>{let e;if(Be(t))return ie;const r=t.state;return n<0?(e=0,n=-n):(e=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?ie:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=e,r.wbits=n,ca(t))},la=(t,n)=>{if(!t)return ie;const e=new Ec;t.state=e,e.strm=t,e.window=null,e.mode=Xt;const r=ua(t,n);return r!==Oe&&(t.state=null),r},Ac=t=>la(t,vc);let ei=!0,fn,hn;const xc=t=>{if(ei){fn=new Int32Array(512),hn=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(ot(ta,t.lens,0,288,fn,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;ot(na,t.lens,0,32,hn,0,t.work,{bits:5}),ei=!1}t.lencode=fn,t.lenbits=9,t.distcode=hn,t.distbits=5},da=(t,n,e,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(e-r,e-r+i),a.wnext),r-=i,r?(a.window.set(n.subarray(e-r,e),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},kc=(t,n)=>{let e,r,i,a,o,s,d,c,u,w,h,f,p,x,v=0,k,O,L,g,R,$,A,B;const D=new Uint8Array(4);let T,I;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Be(t)||!t.output||!t.input&&t.avail_in!==0)return ie;e=t.state,e.mode===fe&&(e.mode=un),o=t.next_out,i=t.output,d=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,c=e.hold,u=e.bits,w=s,h=d,B=Oe;e:for(;;)switch(e.mode){case Xt:if(e.wrap===0){e.mode=un;break}for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,D[0]=c&255,D[1]=c>>>8&255,e.check=H(e.check,D,2,0),c=0,u=0,e.mode=Or;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",e.mode=F;break}if((c&15)!==Cr){t.msg="unknown compression method",e.mode=F;break}if(c>>>=4,u-=4,A=(c&15)+8,e.wbits===0&&(e.wbits=A),A>15||A>e.wbits){t.msg="invalid window size",e.mode=F;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=c&512?$r:fe,c=0,u=0;break;case Or:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==Cr){t.msg="unknown compression method",e.mode=F;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=F;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=H(e.check,D,2,0)),c=0,u=0,e.mode=Dr;case Dr:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,e.check=H(e.check,D,4,0)),c=0,u=0,e.mode=Br;case Br:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=H(e.check,D,2,0)),c=0,u=0,e.mode=Nr;case Nr:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=H(e.check,D,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=Pr;case Pr:if(e.flags&1024&&(f=e.length,f>s&&(f=s),f&&(e.head&&(A=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(a,a+f),A)),e.flags&512&&e.wrap&4&&(e.check=H(e.check,r,f,a)),s-=f,a+=f,e.length-=f),e.length))break e;e.length=0,e.mode=zr;case zr:if(e.flags&2048){if(s===0)break e;f=0;do A=r[a+f++],e.head&&A&&e.length<65536&&(e.head.name+=String.fromCharCode(A));while(A&&f<s);if(e.flags&512&&e.wrap&4&&(e.check=H(e.check,r,f,a)),s-=f,a+=f,A)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Ur;case Ur:if(e.flags&4096){if(s===0)break e;f=0;do A=r[a+f++],e.head&&A&&e.length<65536&&(e.head.comment+=String.fromCharCode(A));while(A&&f<s);if(e.flags&512&&e.wrap&4&&(e.check=H(e.check,r,f,a)),s-=f,a+=f,A)break e}else e.head&&(e.head.comment=null);e.mode=Mr;case Mr:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){t.msg="header crc mismatch",e.mode=F;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=fe;break;case $r:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}t.adler=e.check=Qr(c),c=0,u=0,e.mode=Zt;case Zt:if(e.havedict===0)return t.next_out=o,t.avail_out=d,t.next_in=a,t.avail_in=s,e.hold=c,e.bits=u,wc;t.adler=e.check=1,e.mode=fe;case fe:if(n===_c||n===Rt)break e;case un:if(e.last){c>>>=u&7,u-=u&7,e.mode=dn;break}for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=Fr;break;case 1:if(xc(e),e.mode=Ct,n===Rt){c>>>=2,u-=2;break e}break;case 2:e.mode=Vr;break;case 3:t.msg="invalid block type",e.mode=F}c>>>=2,u-=2;break;case Fr:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",e.mode=F;break}if(e.length=c&65535,c=0,u=0,e.mode=ln,n===Rt)break e;case ln:e.mode=Zr;case Zr:if(f=e.length,f){if(f>s&&(f=s),f>d&&(f=d),f===0)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,d-=f,o+=f,e.length-=f;break}e.mode=fe;break;case Vr:for(;u<14;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=F;break}e.have=0,e.mode=jr;case jr:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.lens[E[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[E[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,T={bits:e.lenbits},B=ot(hc,e.lens,0,19,e.lencode,0,e.work,T),e.lenbits=T.bits,B){t.msg="invalid code lengths set",e.mode=F;break}e.have=0,e.mode=Hr;case Hr:for(;e.have<e.nlen+e.ndist;){for(;v=e.lencode[c&(1<<e.lenbits)-1],k=v>>>24,O=v>>>16&255,L=v&65535,!(k<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(L<16)c>>>=k,u-=k,e.lens[e.have++]=L;else{if(L===16){for(I=k+2;u<I;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(c>>>=k,u-=k,e.have===0){t.msg="invalid bit length repeat",e.mode=F;break}A=e.lens[e.have-1],f=3+(c&3),c>>>=2,u-=2}else if(L===17){for(I=k+3;u<I;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=k,u-=k,A=0,f=3+(c&7),c>>>=3,u-=3}else{for(I=k+7;u<I;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=k,u-=k,A=0,f=11+(c&127),c>>>=7,u-=7}if(e.have+f>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=F;break}for(;f--;)e.lens[e.have++]=A}}if(e.mode===F)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=F;break}if(e.lenbits=9,T={bits:e.lenbits},B=ot(ta,e.lens,0,e.nlen,e.lencode,0,e.work,T),e.lenbits=T.bits,B){t.msg="invalid literal/lengths set",e.mode=F;break}if(e.distbits=6,e.distcode=e.distdyn,T={bits:e.distbits},B=ot(na,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,T),e.distbits=T.bits,B){t.msg="invalid distances set",e.mode=F;break}if(e.mode=Ct,n===Rt)break e;case Ct:e.mode=Ot;case Ot:if(s>=6&&d>=258){t.next_out=o,t.avail_out=d,t.next_in=a,t.avail_in=s,e.hold=c,e.bits=u,sc(t,h),o=t.next_out,i=t.output,d=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,c=e.hold,u=e.bits,e.mode===fe&&(e.back=-1);break}for(e.back=0;v=e.lencode[c&(1<<e.lenbits)-1],k=v>>>24,O=v>>>16&255,L=v&65535,!(k<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(O&&(O&240)===0){for(g=k,R=O,$=L;v=e.lencode[$+((c&(1<<g+R)-1)>>g)],k=v>>>24,O=v>>>16&255,L=v&65535,!(g+k<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,e.back+=g}if(c>>>=k,u-=k,e.back+=k,e.length=L,O===0){e.mode=Xr;break}if(O&32){e.back=-1,e.mode=fe;break}if(O&64){t.msg="invalid literal/length code",e.mode=F;break}e.extra=O&15,e.mode=qr;case qr:if(e.extra){for(I=e.extra;u<I;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Kr;case Kr:for(;v=e.distcode[c&(1<<e.distbits)-1],k=v>>>24,O=v>>>16&255,L=v&65535,!(k<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((O&240)===0){for(g=k,R=O,$=L;v=e.distcode[$+((c&(1<<g+R)-1)>>g)],k=v>>>24,O=v>>>16&255,L=v&65535,!(g+k<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,e.back+=g}if(c>>>=k,u-=k,e.back+=k,O&64){t.msg="invalid distance code",e.mode=F;break}e.offset=L,e.extra=O&15,e.mode=Gr;case Gr:if(e.extra){for(I=e.extra;u<I;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=F;break}e.mode=Wr;case Wr:if(d===0)break e;if(f=h-d,e.offset>f){if(f=e.offset-f,f>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=F;break}f>e.wnext?(f-=e.wnext,p=e.wsize-f):p=e.wnext-f,f>e.length&&(f=e.length),x=e.window}else x=i,p=o-e.offset,f=e.length;f>d&&(f=d),d-=f,e.length-=f;do i[o++]=x[p++];while(--f);e.length===0&&(e.mode=Ot);break;case Xr:if(d===0)break e;i[o++]=e.length,d--,e.mode=Ot;break;case dn:if(e.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[a++]<<u,u+=8}if(h-=d,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?H(e.check,i,h,o-h):ft(e.check,i,h,o-h)),h=d,e.wrap&4&&(e.flags?c:Qr(c))!==e.check){t.msg="incorrect data check",e.mode=F;break}c=0,u=0}e.mode=Yr;case Yr:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=F;break}c=0,u=0}e.mode=Jr;case Jr:B=pc;break e;case F:B=ra;break e;case aa:return ia;case oa:default:return ie}return t.next_out=o,t.avail_out=d,t.next_in=a,t.avail_in=s,e.hold=c,e.bits=u,(e.wsize||h!==t.avail_out&&e.mode<F&&(e.mode<dn||n!==Rr))&&da(t,t.output,t.next_out,h-t.avail_out),w-=t.avail_in,h-=t.avail_out,t.total_in+=w,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?H(e.check,i,h,t.next_out-h):ft(e.check,i,h,t.next_out-h)),t.data_type=e.bits+(e.last?64:0)+(e.mode===fe?128:0)+(e.mode===Ct||e.mode===ln?256:0),(w===0&&h===0||n===Rr)&&B===Oe&&(B=gc),B},Sc=t=>{if(Be(t))return ie;let n=t.state;return n.window&&(n.window=null),t.state=null,Oe},Ic=(t,n)=>{if(Be(t))return ie;const e=t.state;return(e.wrap&2)===0?ie:(e.head=n,n.done=!1,Oe)},Tc=(t,n)=>{const e=n.length;let r,i,a;return Be(t)||(r=t.state,r.wrap!==0&&r.mode!==Zt)?ie:r.mode===Zt&&(i=1,i=ft(i,n,e,0),i!==r.check)?ra:(a=da(t,n,e,e),a?(r.mode=aa,ia):(r.havedict=1,Oe))};var Lc=ca,Rc=ua,Cc=sa,Oc=Ac,Dc=la,Bc=kc,Nc=Sc,Pc=Ic,zc=Tc,Uc="pako inflate (from Nodeca project)",_e={inflateReset:Lc,inflateReset2:Rc,inflateResetKeep:Cc,inflateInit:Oc,inflateInit2:Dc,inflate:Bc,inflateEnd:Nc,inflateGetHeader:Pc,inflateSetDictionary:zc,inflateInfo:Uc};function Mc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $c=Mc;const fa=Object.prototype.toString,{Z_NO_FLUSH:Fc,Z_FINISH:Zc,Z_OK:pt,Z_STREAM_END:_n,Z_NEED_DICT:pn,Z_STREAM_ERROR:Vc,Z_DATA_ERROR:ti,Z_MEM_ERROR:jc}=At;function kt(t){this.options=Wt.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qi,this.strm.avail_out=0;let e=_e.inflateInit2(this.strm,n.windowBits);if(e!==pt)throw new Error(Ze[e]);if(this.header=new $c,_e.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=_t.string2buf(n.dictionary):fa.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=_e.inflateSetDictionary(this.strm,n.dictionary),e!==pt)))throw new Error(Ze[e])}kt.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?Zc:Fc,fa.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),a=_e.inflate(e,o),a===pn&&i&&(a=_e.inflateSetDictionary(e,i),a===pt?a=_e.inflate(e,o):a===ti&&(a=pn));e.avail_in>0&&a===_n&&e.state.wrap>0&&t[e.next_in]!==0;)_e.inflateReset(e),a=_e.inflate(e,o);switch(a){case Vc:case ti:case pn:case jc:return this.onEnd(a),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||a===_n))if(this.options.to==="string"){let d=_t.utf8border(e.output,e.next_out),c=e.next_out-d,u=_t.buf2string(e.output,d);e.next_out=c,e.avail_out=r-c,c&&e.output.set(e.output.subarray(d,d+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===pt&&s===0)){if(a===_n)return a=_e.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};kt.prototype.onData=function(t){this.chunks.push(t)};kt.prototype.onEnd=function(t){t===pt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Wt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Jn(t,n){const e=new kt(n);if(e.push(t),e.err)throw e.msg||Ze[e.err];return e.result}function Hc(t,n){return n=n||{},n.raw=!0,Jn(t,n)}var qc=kt,Kc=Jn,Gc=Hc,Wc=Jn,Xc=At,Yc={Inflate:qc,inflate:Kc,inflateRaw:Gc,ungzip:Wc,constants:Xc};const{Inflate:ku,inflate:Jc,inflateRaw:Su,ungzip:Iu}=Yc;var Qc=Jc;function eu(t){return"accounts"in t}async function tu(t){const n=(await K.findProgramAddress([],t))[0];return await K.createWithSeed(n,nu(),t)}function nu(){return"anchor:idl"}const ru=C.struct([C.publicKey("authority"),C.vecU8("data")]);function iu(t){return ru.decode(t)}function Yt(t,n){var e,r;let i={};const a=t.args?t.args.length:0;if(n.length>a){if(n.length!==a+1)throw new Error(`provided too many arguments ${n} to instruction ${t==null?void 0:t.name} expecting: ${(r=(e=t.args)===null||e===void 0?void 0:e.map(o=>o.name))!==null&&r!==void 0?r:[]}`);i=n.pop()}return[n,i]}class Vt{static build(n,e,r){if(n.name==="_inner")throw new zt("the _inner name is reserved");const i=(...a)=>{const[o,s]=Yt(n,[...a]);oi(n.accounts,s.accounts),au(n,...a);const d=i.accounts(s.accounts);return s.remainingAccounts!==void 0&&d.push(...s.remainingAccounts),li("debug-logs")&&console.log("Outgoing account metas:",d),new va({keys:d,programId:r,data:e(n.name,Ra(n,...o))})};return i.accounts=a=>Vt.accountsArray(a,n.accounts,r,n.name),i}static accountsArray(n,e,r,i){return n?e.map(a=>{if(("accounts"in a?a.accounts:void 0)!==void 0){const s=n[a.name];return Vt.accountsArray(s,a.accounts,r,i).flat()}else{const s=a;let d;try{d=ne(n[a.name])}catch{throw new Error(`Wrong input type for account "${a.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const c=s.isOptional&&d.equals(r),u=s.isMut&&!c,w=s.isSigner&&!c;return{pubkey:d,isWritable:u,isSigner:w}}}).flat():[]}}function au(t,...n){}class ou{static build(n,e){return(...i)=>{var a,o,s;const[,d]=Yt(n,[...i]),c=new Ea;if(d.preInstructions&&d.instructions)throw new Error("instructions is deprecated, use preInstructions");return(a=d.preInstructions)===null||a===void 0||a.forEach(u=>c.add(u)),(o=d.instructions)===null||o===void 0||o.forEach(u=>c.add(u)),c.add(e(...i)),(s=d.postInstructions)===null||s===void 0||s.forEach(u=>c.add(u)),c}}}class su{static build(n,e,r,i){return async(...o)=>{var s;const d=e(...o),[,c]=Yt(n,[...o]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(d,(s=c.signers)!==null&&s!==void 0?s:[],c.options)}catch(u){throw di(u,r)}}}}class cu{static build(n,e,r,i){var a;const o={};return(a=n.accounts)===null||a===void 0||a.forEach(s=>{const d=Z(s.name);o[d]=new uu(n,s,r,i,e)}),o}}class uu{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(n,e,r,i,a){this._idlAccount=e,this._programId=r,this._provider=i??vn(),this._coder=a??new Ci(n),this._size=this._coder.accounts.size(e)}async fetchNullable(n,e){const{data:r}=await this.fetchNullableAndContext(n,e);return r}async fetchNullableAndContext(n,e){const r=await this.getAccountInfoAndContext(n,e),{value:i,context:a}=r;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:a}}async fetch(n,e){const{data:r}=await this.fetchNullableAndContext(n,e);if(r===null)throw new Error(`Account does not exist or has no data ${n.toString()}`);return r}async fetchAndContext(n,e){const{data:r,context:i}=await this.fetchNullableAndContext(n,e);if(r===null)throw new Error(`Account does not exist ${n.toString()}`);return{data:r,context:i}}async fetchMultiple(n,e){return(await this.fetchMultipleAndContext(n,e)).map(i=>i?i.data:null)}async fetchMultipleAndContext(n,e){return(await $a(this._provider.connection,n.map(i=>ne(i)),e)).map(i=>{if(i==null)return null;const{account:a,context:o}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,a.data),context:o}})}async all(n){const e=this.coder.accounts.memcmp(this._idlAccount.name,n instanceof Buffer?n:void 0),r=[];return(e==null?void 0:e.offset)!=null&&(e==null?void 0:e.bytes)!=null&&r.push({memcmp:{offset:e.offset,bytes:e.bytes}}),(e==null?void 0:e.dataSize)!=null&&r.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(n)?n:[]]})).map(({pubkey:a,account:o})=>({publicKey:a,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(n,e){const r=Je.get(n.toString());if(r)return r.ee;const i=new Aa;n=ne(n);const a=this._provider.connection.onAccountChange(n,o=>{const s=this._coder.accounts.decode(this._idlAccount.name,o.data);i.emit("change",s)},e);return Je.set(n.toString(),{ee:i,listener:a}),i}async unsubscribe(n){let e=Je.get(n.toString());if(!e){console.warn("Address is not subscribed");return}Je&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{Je.delete(n.toString())}).catch(console.error)}async createInstruction(n,e){const r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return ii.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:n.publicKey,space:e??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(e??r),programId:this._programId})}async associated(...n){const e=await this.associatedAddress(...n);return await this.fetch(e)}async associatedAddress(...n){return await Ao(this._programId,...n)}async getAccountInfo(n,e){return await this._provider.connection.getAccountInfo(ne(n),e)}async getAccountInfoAndContext(n,e){return await this._provider.connection.getAccountInfoAndContext(ne(n),e)}}const Je=new Map,Nn="Program log: ",ha="Program data: ",lu=Nn.length,du=ha.length;class fu{constructor(n,e,r){this._programId=n,this._provider=e,this._eventParser=new _a(n,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(n,e){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(n)||this._eventListeners.set(n,[]),this._eventListeners.set(n,((r=this._eventListeners.get(n))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[n,e]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(a,o)=>{if(!a.err)for(const s of this._eventParser.parseLogs(a.logs)){const d=this._eventListeners.get(s.name);d&&d.forEach(c=>{const u=this._eventCallbacks.get(c);if(u){const[,w]=u;w(s.data,o.slot,a.signature)}})}})),i}async removeEventListener(n){const e=this._eventCallbacks.get(n);if(!e)throw new Error(`Event listener ${n} doesn't exist!`);const[r]=e;let i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(n),i=i.filter(a=>a!==n),this._eventListeners.set(r,i),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class _a{constructor(n,e){this.coder=e,this.programId=n}*parseLogs(n,e=!1){const r=new _u(n),i=new hu;let a=r.next();for(;a!==null;){let[o,s,d]=this.handleLog(i,a,e);o&&(yield o),s&&i.push(s),d&&i.pop(),a=r.next()}}handleLog(n,e,r){return n.stack.length>0&&n.program()===this.programId.toString()?this.handleProgramLog(e,r):[null,...this.handleSystemLog(e)]}handleProgramLog(n,e){if(n.startsWith(Nn)||n.startsWith(ha)){const r=n.startsWith(Nn)?n.slice(lu):n.slice(du),i=this.coder.events.decode(r);if(e&&i===null)throw new Error(`Unable to decode event ${r}`);return[i,null,!1]}else return[null,...this.handleSystemLog(n)]}handleSystemLog(n){const e=n.split(":")[0];return e.match(/^Program (.*) success/g)!==null?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class hu{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(n){this.stack.push(n)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class _u{constructor(n){this.logs=n}next(){if(this.logs.length===0)return null;let n=this.logs[0];return this.logs=this.logs.slice(1),n}}class pu{static build(n,e,r,i,a,o,s){return async(...c)=>{var u;const w=e(...c),[,h]=Yt(n,[...c]);let f;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{f=await i.simulate(w,h.signers,(u=h.options)===null||u===void 0?void 0:u.commitment)}catch(v){throw di(v,r)}if(f===void 0)throw new Error("Unable to simulate transaction");const p=f.logs;if(!p)throw new Error("Simulated logs not found");const x=[];if(s.events){let v=new _a(o,a);for(const k of v.parseLogs(p))x.push(k)}return{events:x,raw:p}}}}function wn(t){return new pa(vt(8),n=>Qn.fromBuffer(n),n=>n.toBuffer(),t)}function Dt(t){return new pa(vt(32),n=>new K(n),n=>n.toBuffer(),t)}function gn(t,n){return new wu(t,n)}class pa extends jt{constructor(n,e,r,i){super(n.span,i),this.layout=n,this.decoder=e,this.encoder=r}decode(n,e){return this.decoder(this.layout.decode(n,e))}encode(n,e,r){return this.layout.encode(this.encoder(n),e,r)}getSpan(n,e){return this.layout.getSpan(n,e)}}class wu extends jt{constructor(n,e){super(-1,e),this.layout=n,this.discriminator=pe()}encode(n,e,r=0){return n==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(n,e,r+4)+4)}decode(n,e=0){const r=this.discriminator.decode(n,e);if(r===0)return null;if(r===1)return this.layout.decode(n,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(n,e=0){return this.layout.getSpan(n,e+4)+4}}class Qn extends ri{toBuffer(){const n=super.toArray().reverse(),e=Buffer.from(n);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return e.copy(r),r}static fromBuffer(n){if(n.length!==8)throw new Error(`Invalid buffer length: ${n.length}`);return new Qn([...n].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}const gu=j([Dt("mint"),Dt("owner"),wn("amount"),gn(Dt(),"delegate"),(t=>{const n=Ti(_o("discriminator"),null,t);return n.addVariant(0,j([]),"uninitialized"),n.addVariant(1,j([]),"initialized"),n.addVariant(2,j([]),"frozen"),n})("state"),gn(wn(),"isNative"),wn("delegatedAmount"),gn(Dt(),"closeAuthority")]);function yu(t){return gu.decode(t)}class wt{constructor(n,e,r,i,a,o,s,d){this._accounts=e,this._provider=r,this._programId=i,this._idlIx=a,this._idlTypes=s,this._customResolver=d,this._args=n,this._accountStore=new mu(r,o,this._programId)}args(n){this._args=n}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:n,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=n,e}return 0}resolveOptionalsHelper(n,e){const r={};for(const i of e){const a=i.name,o=n[a];o!==void 0&&(wa(o)?eu(i)?r[a]=this.resolveOptionalsHelper(o,i.accounts):r[a]=ga(o,!0):o!==null?r[a]=ne(o):i.isOptional&&(r[a]=this._programId))}return r}resolveOptionals(n){Object.assign(this._accounts,this.resolveOptionalsHelper(n,this._idlIx.accounts))}get(n){const e=n.reduce((r,i)=>r&&r[i],this._accounts);if(e&&e.toBase58)return e}set(n,e){let r=this._accounts;n.forEach((i,a)=>{a==n.length-1&&(r[i]=e),r[i]=r[i]||{},r=r[i]})}async resolveConst(n,e=[]){for(let r=0;r<n.length;r+=1){const i=n[r],a=i.accounts;a&&await this.resolveConst(a,[...e,Z(i.name)]);const o=i,s=Z(i.name);if(o.isSigner&&!this.get([...e,s])){if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...e,s],this._provider.wallet.publicKey)}Reflect.has(wt.CONST_ACCOUNTS,s)&&!this.get([...e,s])&&this.set([...e,s],wt.CONST_ACCOUNTS[s])}}_resolveEventCpi(n,e=[]){for(const r in n){const i=n[r],a=i.accounts;a&&this._resolveEventCpi(a,[...e,Z(i.name)]);const o=+r+1;if(o===n.length)return;const s=Z(n[r].name),d=Z(n[o].name);if(s==="eventAuthority"&&d==="program"){const c=[...e,s],u=[...e,d];this.get(c)||this.set(c,K.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(u)||this.set(u,this._programId);return}}}async resolvePdas(n,e=[]){let r=0;for(let i=0;i<n.length;i+=1){const a=n[i],o=a.accounts;o&&(r+=await this.resolvePdas(o,[...e,Z(a.name)]));const s=a,d=Z(a.name);s.pda&&s.pda.seeds.length>0&&!this.get([...e,d])&&Boolean(await this.autoPopulatePda(s,e))&&(r+=1)}return r}async resolveRelations(n,e=[]){let r=0;for(let i=0;i<n.length;i+=1){const a=n[i],o=a.accounts;o&&(r+=await this.resolveRelations(o,[...e,Z(a.name)]));const s=a.relations||[],d=Z(a.name),c=[...e,d],u=this.get(c);if(u){const w=s.filter(h=>!this.get([...e,Z(h)]));if(r+=w.length,w.length>0){const h=await this._accountStore.fetchAccount({publicKey:u});await Promise.all(w.map(async f=>{const p=Z(f);return this.set([...e,p],h[p]),h[p]}))}}}return r}async autoPopulatePda(n,e=[]){if(!n.pda||!n.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(n.pda.seeds.map(o=>this.toBuffer(o,e)));if(r.some(o=>typeof o>"u"))return;const i=await this.parseProgramId(n,e);if(!i)return;const[a]=await K.findProgramAddress(r,i);this.set([...e,Z(n.name)],a)}async parseProgramId(n,e=[]){var r;if(!(!((r=n.pda)===null||r===void 0)&&r.programId))return this._programId;switch(n.pda.programId.kind){case"const":return new K(this.toBufferConst(n.pda.programId.value));case"arg":return this.argValue(n.pda.programId);case"account":return await this.accountValue(n.pda.programId,e);default:throw new Error(`Unexpected program seed kind: ${n.pda.programId.kind}`)}}async toBuffer(n,e=[]){switch(n.kind){case"const":return this.toBufferConst(n);case"arg":return await this.toBufferArg(n);case"account":return await this.toBufferAccount(n,e);default:throw new Error(`Unexpected seed kind: ${n.kind}`)}}getType(n,e=[]){if(e.length>0&&n.defined){const r=this._idlTypes.find(o=>o.name===n.defined);if(!r)throw new Error(`Cannot find type ${n.defined}`);const a=r.type.fields.find(o=>o.name===e[0]);return this.getType(a.type,e.slice(1))}return n}toBufferConst(n){return this.toBufferValue(this.getType(n.type,(n.path||"").split(".").slice(1)),n.value)}async toBufferArg(n){const e=this.argValue(n);if(!(typeof e>"u"))return this.toBufferValue(this.getType(n.type,(n.path||"").split(".").slice(1)),e)}argValue(n){const e=n.path.split("."),r=Z(e[0]),i=this._idlIx.args.findIndex(a=>a.name===r);if(i===-1)throw new Error(`Unable to find argument for seed: ${r}`);return e.slice(1).reduce((a,o)=>(a||{})[o],this._args[i])}async toBufferAccount(n,e=[]){const r=await this.accountValue(n,e);if(!!r)return this.toBufferValue(n.type,r)}async accountValue(n,e=[]){const r=n.path.split("."),i=r[0],a=this.get([...e,Z(i)]);if(a===null)throw new Error("fieldPubkey is null");if(r.length===1)return a;const o=await this._accountStore.fetchAccount({publicKey:a,name:n.account});return this.parseAccountValue(o,r.slice(1))}parseAccountValue(n,e){let r;for(;e.length>0;)r=n[Z(e[0])],e=e.slice(1);return r}toBufferValue(n,e){switch(n){case"u8":return Buffer.from([e]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(e),r;case"u32":let i=Buffer.alloc(4);return i.writeUInt32LE(e),i;case"u64":let a=Buffer.alloc(8);return a.writeBigUInt64LE(BigInt(e)),a;case"string":return Buffer.from(Ta(e));case"publicKey":return e.toBuffer();default:if(n.array)return Buffer.from(e);throw new Error(`Unexpected seed type: ${n}`)}}}wt.CONST_ACCOUNTS={associatedTokenProgram:ko,rent:xa,systemProgram:ii.programId,tokenProgram:xo,clock:ka};class mu{constructor(n,e,r){this._provider=n,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=e}async ensureIdl(n){if(!this._idls[n.toBase58()]){const e=await gt.fetchIdl(n,this._provider);if(e){const r=new gt(e,n,this._provider);this._idls[n.toBase58()]=r.account}}return this._idls[n.toBase58()]}async fetchAccount({publicKey:n,name:e,programId:r=this._programId}){const i=n.toString();if(!this._cache.has(i))if(e==="TokenAccount"){const a=await this._provider.connection.getAccountInfo(n);if(a===null)throw new Error(`invalid account info for ${i}`);const o=yu(a.data);this._cache.set(i,o)}else if(e){const a=await this.ensureIdl(r);if(a){const o=a[Z(e)];if(o){const s=await o.fetch(n);this._cache.set(i,s)}}}else{const a=await this._provider.connection.getAccountInfo(n);if(a===null)throw new Error(`invalid account info for ${i}`);const o=a.data,s=await this.ensureIdl(a.owner);if(s){const d=Object.values(s)[0];if(!d)throw new Error("No accounts for this program");const c=d.coder.accounts.decodeAny(o);this._cache.set(i,c)}}return this._cache.get(i)}}class bu{static build(n,e,r,i,a,o,s,d,c,u,w){return(...h)=>new vu(h,i,a,o,s,d,n,e,r,c,u,w)}}function wa(t){return typeof t=="object"&&t!==null&&!("_bn"in t)}function ga(t,n){const e={};for(const r in t){const i=t[r];if(i===null){if(n)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");continue}e[r]=wa(i)?ga(i,!0):ne(i)}return e}class vu{constructor(n,e,r,i,a,o,s,d,c,u,w,h){this._ixFn=e,this._txFn=r,this._rpcFn=i,this._simulateFn=a,this._viewFn=o,this._programId=d,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=n,this._accountsResolver=new wt(n,this._accounts,s,d,c,u,w,h)}args(n){this._args=n,this._accountsResolver.args(n)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(n){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(n),this}accountsStrict(n){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(n),this}signers(n){return this._signers=this._signers.concat(n),this}remainingAccounts(n){return this._remainingAccounts=this._remainingAccounts.concat(n),this}preInstructions(n){return this._preInstructions=this._preInstructions.concat(n),this}postInstructions(n){return this._postInstructions=this._postInstructions.concat(n),this}async rpc(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async rpcAndKeys(n){return{pubkeys:await this.pubkeys(),signature:await this.rpc(n)}}async view(n){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async simulate(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Eu{static build(n,e,r,i){const a=e.accounts.find(d=>d.isMut),o=!!e.returns;return a||!o?void 0:async(...d)=>{var c,u;let w=await r(...d);const h=`Program return: ${n} `;let f=w.raw.find(k=>k.startsWith(h));if(!f)throw new Error("View expected return log");let p=ai(f.slice(h.length)),x=e.returns;if(!x)throw new Error("View expected return type");return W.fieldLayout({type:x},Array.from([...(c=i.accounts)!==null&&c!==void 0?c:[],...(u=i.types)!==null&&u!==void 0?u:[]])).decode(p)}}}class Au{static build(n,e,r,i,a){const o={},s={},d={},c={},u={},w={},h=La(n),f=n.accounts?cu.build(n,e,r,i):{};return n.instructions.forEach(p=>{const x=Vt.build(p,($,A)=>e.instruction.encode($,A),r),v=ou.build(p,x),k=su.build(p,v,h,i),O=pu.build(p,v,h,i,e,r,n),L=Eu.build(r,p,O,n),g=bu.build(i,r,p,x,v,k,O,L,f,n.types||[],a&&a(p)),R=Z(p.name);s[R]=x,d[R]=v,o[R]=k,c[R]=O,u[R]=g,L&&(w[R]=L)}),[o,s,d,f,c,u,w]}}class gt{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(n,e,r,i,a){e=ne(e),r||(r=vn()),this._idl=n,this._provider=r,this._programId=e,this._coder=i??new Ci(n),this._events=new fu(this._programId,r,this._coder);const[o,s,d,c,u,w,h]=Au.build(n,this._coder,e,r,a??(()=>{}));this.rpc=o,this.instruction=s,this.transaction=d,this.account=c,this.simulate=u,this.methods=w,this.views=h}static async at(n,e){const r=ne(n),i=await gt.fetchIdl(r,e);if(!i)throw new Error(`IDL not found for program: ${n.toString()}`);return new gt(i,r,e)}static async fetchIdl(n,e){e=e??vn();const r=ne(n),i=await tu(r),a=await e.connection.getAccountInfo(i);if(!a)return null;let o=iu(a.data.slice(8));const s=Qc(o.data);return JSON.parse(Ia(s))}addEventListener(n,e){return this._events.addEventListener(n,e)}async removeEventListener(n){return await this._events.removeEventListener(n)}}new K("11111111111111111111111111111111");st||(exports.workspace=require("./workspace.js").default,exports.Wallet=require("./nodewallet.js").default);export{Ue as A,gt as P,Ta as e,wo as r};
