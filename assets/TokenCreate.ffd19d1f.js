import{d2 as g,d3 as m,d4 as P,d5 as T,d6 as C,d7 as c,d8 as v,d9 as S,da as _,db as M,dL as E,dM as x,dN as Q,au as q,J as I,dO as V,b1 as z,ai as L,bx as y,as as u,al as k,cm as K,V as U,bV as D,ar as R,cP as W,P as O,dr as $,cS as l,de as Y,dP as j,dQ as F,cp as G,dt as J,cU as Z}from"./index.86d09f09.js";import{a as N,T as p}from"./internal.b70d5e1e.js";import{a as A,Q as b}from"./QInput.886a13ca.js";import{Q as H}from"./QSeparator.e863aad7.js";import{Q as X}from"./use-key-composition.7526a148.js";import{h as ee}from"./handleTransaction.7aec7b9e.js";const f=g([m("instruction"),P("amount"),m("decimals")]);function we(o,e,t,a,i,s=[],n=c){const r=N([{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,s),d=T.Buffer.alloc(f.span);return f.encode({instruction:p.BurnChecked,amount:BigInt(a),decimals:i},d),new C({keys:r,programId:n,data:d})}function Ie(o,e=c){if(!o.programId.equals(e))throw new v;if(o.data.length!==f.span)throw new S;const{keys:{account:t,mint:a,owner:i,multiSigners:s},data:n}=te(o);if(n.instruction!==p.BurnChecked)throw new _;if(!t||!a||!i)throw new M;return{programId:e,keys:{account:t,mint:a,owner:i,multiSigners:s},data:n}}function te({programId:o,keys:[e,t,a,...i],data:s}){return{programId:o,keys:{account:e,mint:t,owner:a,multiSigners:i},data:f.decode(s)}}class ne extends E{constructor(e){super(-1,e),this.publicKeyLayout=x()}decode(e,t=0){return e[t]===0?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,a=0){return e===null?(t[a]=0,1):(t[a]=1,this.publicKeyLayout.encode(e,t,a+1),33)}getSpan(e,t=0){return e?e[t]===0?1:1+this.publicKeyLayout.span:1+this.publicKeyLayout.span}}const h=g([m("instruction"),P("amount"),m("decimals")]);function ae(o,e,t,a,i,s=[],n=c){const r=N([{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,s),d=T.Buffer.alloc(h.span);return h.encode({instruction:p.MintToChecked,amount:BigInt(a),decimals:i},d),new C({keys:r,programId:n,data:d})}function be(o,e=c){if(!o.programId.equals(e))throw new v;if(o.data.length!==h.span)throw new S;const{keys:{mint:t,destination:a,authority:i,multiSigners:s},data:n}=oe(o);if(n.instruction!==p.MintToChecked)throw new _;if(!t||!a||!i)throw new M;return{programId:e,keys:{mint:t,destination:a,authority:i,multiSigners:s},data:n}}function oe({programId:o,keys:[e,t,a,...i],data:s}){return{programId:o,keys:{mint:e,destination:t,authority:a,multiSigners:i},data:h.decode(s)}}const w=g([m("instruction"),m("decimals"),x("mintAuthority"),new ne("freezeAuthority")]);function se(o,e,t,a,i=c){const s=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1}],n=T.Buffer.alloc(w.span);return w.encode({instruction:p.InitializeMint,decimals:e,mintAuthority:t,freezeAuthority:a},n),new C({keys:s,programId:i,data:n})}function ge(o,e=c){if(!o.programId.equals(e))throw new v;if(o.data.length!==w.span)throw new S;const{keys:{mint:t,rent:a},data:i}=ie(o);if(i.instruction!==p.InitializeMint)throw new _;if(!t||!a)throw new M;return{programId:e,keys:{mint:t,rent:a},data:i}}function ie({programId:o,keys:[e,t],data:a}){const{instruction:i,decimals:s,mintAuthority:n,freezeAuthority:r}=w.decode(a);return{programId:o,keys:{mint:e,rent:t},data:{instruction:i,decimals:s,mintAuthority:n,freezeAuthority:r}}}const re=k("p",{class:"text-h6"},"Create a new Token",-1),ue={class:"col q-gutter-y-sm"},ce={class:"row q-gutter-x-sm"},de={class:"row"},le=k("div",{class:"col"},null,-1),Te=q({__name:"TokenCreate",setup(o){const e=I(V.generate().publicKey.toString()),t=I(0),a=I(1);async function i(){try{const s=new W,n=new O(e.value),r=parseInt(t.value.toString(),10),d=a.value;if(isNaN(r)||r<0||r>9)throw new Error("Invalid decimals value. It must be between 0 and 9.");let B=await $(n,l(),!0);s.add(Y.createAccount({fromPubkey:l(),newAccountPubkey:n,space:j,lamports:await F(G().connection),programId:c})),s.add(se(n,r,l(),l(),c)),s.add(J(l(),B,l(),n)),s.add(ae(n,B,l(),d,r)),await ee(s,"[Token] Create")}catch(s){Z.create({position:"bottom-right",color:"red",message:`${s}`,timeout:5e3})}}return(s,n)=>(z(),L(X,{flat:"",bordered:""},{default:y(()=>[u(A,null,{default:y(()=>[re]),_:1}),u(H),u(A,null,{default:y(()=>[k("div",ue,[k("div",ce,[u(b,{class:"col",filled:"",square:"",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=r=>e.value=r),type:"text",disable:"",label:"New Token Mint",dense:""},null,8,["modelValue"]),u(K,{color:"primary",icon:"refresh",onClick:n[1]||(n[1]=r=>e.value=U(V).generate().publicKey.toString())})]),u(b,{filled:"",square:"",modelValue:t.value,"onUpdate:modelValue":n[2]||(n[2]=r=>t.value=r),type:"number",label:"Decimals",dense:""},null,8,["modelValue"]),u(b,{square:"",filled:"",modelValue:a.value,"onUpdate:modelValue":n[3]||(n[3]=r=>a.value=r),type:"number",label:"Initial amount",dense:""},null,8,["modelValue"]),k("div",de,[le,u(K,{color:"primary",onClick:n[4]||(n[4]=D(r=>i().then(()=>{}),["prevent"]))},{default:y(()=>[R("Create ")]),_:1})])])]),_:1})]),_:1}))}});export{ne as C,Te as _,we as a,se as b,ae as c,ge as d,be as e,Ie as f,ie as g,oe as h,w as i,f as j,te as k,h as m};
