import{Q as cl,a as ib,b as nT}from"./QInput.cbf32538.js";import{Q as sb,a as rT}from"./QTabPanels.a89187bd.js";import{Q as iT}from"./QPage.16192c18.js";import{Q as sT}from"./QSpace.92e1c22e.js";import{bZ as Sp,ah as ul,aF as Uo,cl as Ap,cg as Vh,aC as oT,au as Zs,b1 as hi,ai as ll,cj as pi,J as Bn,ak as Go,as as _e,bx as He,ds as kp,al as an,a1 as Dn,bz as Tv,a6 as Ip,d1 as ac,P as Ce,co as rn,cm as ts,cJ as Fh,ar as ai,cL as cc,aX as Rv,bs as Ep,aj as aT,V as Cu,Z as cT,bX as F,dt as Bv,du as ob,dg as Te,db as xv,dq as ee,dv as qe,dw as zh,dp as Cv,cX as uT,dx as Mv,dy as Lv,cW as fs,dz as Kv,dA as lT,dB as fT,bW as Sc,dC as nt,dj as ie,dk as se,dl as Bt,di as Ie,dD as Pt,dE as br,dF as _i,dG as V,dH as ha,dI as pa,dJ as Me,dK as wi,dL as x,dM as S,dN as H,dO as G,dP as le,dQ as Jt,dR as Kl,dS as yt,dT as he,dn as Vt,dU as Ac,de as Xe,dV as fl,dW as Nv,dX as ei,dY as Dv,dZ as Uv,d_ as Vv,df as Fv,dh as Op,d$ as ab,e0 as dT,e1 as hT,e2 as pT,e3 as gT}from"./index.4021630d.js";import{u as yT,b as mT,c as bT,h as Wh}from"./QSlideTransition.5a3faa2f.js";import{c as zv,u as ch,Q as vT,f as uh,b as _T,t as wT}from"./format_address.7124ddc0.js";import{Q as Wv,a as $v}from"./QToolbar.d081c958.js";import{a as jv,Q as qv,T as ST}from"./constants.01d4734b.js";import{C as Gv}from"./ClosePopup.0bac0ded.js";import{c as AT,a as kT,b as cb,_ as za}from"./defineProperty.434c561c.js";import{g as Ho,c as IT,a as dl}from"./assert.fa7bedaa.js";import{Q as ET}from"./QTree.a9c3e818.js";import{s as eo}from"./sha256.d30965c6.js";import"./uid.1311a7d3.js";import"./QSeparator.82965811.js";import"./use-prevent-scroll.eaab016d.js";var Ms=Sp({name:"QToggle",props:{...yT,icon:String,iconColor:String},emits:mT,setup(r){function e(t,n){const i=ul(()=>(t.value===!0?r.checkedIcon:n.value===!0?r.indeterminateIcon:r.uncheckedIcon)||r.icon),s=ul(()=>t.value===!0?r.iconColor:null);return()=>[Uo("div",{class:"q-toggle__track"}),Uo("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},i.value!==void 0?[Uo(Ap,{name:i.value,color:s.value})]:void 0)]}return bT("toggle",e)}}),Gr=Sp({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(r,{slots:e}){const t=oT(),n=ul(()=>"q-td"+(r.autoWidth===!0?" q-table--col-auto-width":"")+(r.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(r.props===void 0)return Uo("td",{class:n.value},Vh(e.default));const i=t.vnode.key,s=(r.props.colsMap!==void 0?r.props.colsMap[i]:null)||r.props.col;if(s===void 0)return;const{row:a}=r.props;return Uo("td",{class:n.value+s.__tdClass(a),style:s.__tdStyle(a)},Vh(e.default))}}}),OT=Sp({name:"QTr",props:{props:Object,noHover:Boolean},setup(r,{slots:e}){const t=ul(()=>"q-tr"+(r.props===void 0||r.props.header===!0?"":" "+r.props.__trClass)+(r.noHover===!0?" q-tr--no-hover":""));return()=>Uo("tr",{class:t.value},Vh(e.default))}});const lh=Zs({__name:"SolscanLink",props:["address"],setup(r){return(e,t)=>(hi(),ll(pi,{size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+r.address},null,8,["href"]))}}),PT=an("span",{class:"text-weight-bold"},"Send Token",-1),TT={class:"text-overline"},RT={class:"row q-gutter-x-md"},BT=Zs({__name:"SendTokenButton",props:["mint","decimals"],setup(r){const e=Bn(!1),t=r,n=Bn("6AzZCoxBrJnfWejYZmqcdKUvzdG6yTbRLyuqVYizHWy4"),i=Bn(0);async function s(){const a=new ac,u=await Ho(new Ce(t.mint),new Ce(n.value));console.log(u);const f=await Ho(new Ce(t.mint),rn().publicKey.value);await ts().connection.getAccountInfo(u)===null&&a.add(IT(rn().publicKey.value,u,new Ce(n.value),new Ce(t.mint))),a.add(AT(f,u,rn().publicKey.value,i.value*Math.pow(10,t.decimals)));try{const d=await rn().sendTransaction(a,ts().connection);await Wh(d)}catch(d){Fh.create({color:"red",message:`${d}`,timeout:5e3})}}return(a,u)=>(hi(),Go(Ip,null,[_e(pi,{color:"primary",size:"sm",icon:"send",onClick:u[0]||(u[0]=f=>e.value=!0)}),_e(zv,{modelValue:e.value,"onUpdate:modelValue":u[4]||(u[4]=f=>e.value=f)},{default:He(()=>[_e(jv,null,{default:He(()=>[_e(Wv,{class:"q-mt-md"},{default:He(()=>[_e(kp,null,{default:He(()=>[_e(Ap,{name:"send"})]),_:1}),_e($v,null,{default:He(()=>[PT,an("div",TT,Dn(r.mint),1)]),_:1}),Tv(_e(pi,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Gv]])]),_:1}),_e(qv,{class:"q-gutter-y-md"},{default:He(()=>[an("div",null,[_e(cl,{label:"Receiver",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f)},null,8,["modelValue"])]),an("div",RT,[_e(cl,{class:"col",label:"Amount",modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=f=>i.value=f)},null,8,["modelValue"]),_e(pi,{color:"primary",icon:"send",onClick:u[3]||(u[3]=f=>s())})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),xT=an("span",{class:"text-weight-bold"},"Close/Burn Account",-1),CT={class:"text-overline"},MT={class:"row"},LT=an("div",{class:"col"},"Amount left:",-1),KT={class:"col"},NT=an("div",{class:"q-ma-md text-right text-weight-light"},"fee: 0.001sol",-1),DT=Zs({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(r){const e=Bn(!1),t=r;Bn(""),Bn(0);async function n(){const s=new ac,a=await Ho(new Ce(t.mint),rn().publicKey.value);s.add(kT(a,new Ce(t.mint),rn().publicKey.value,t.amount*Math.pow(10,t.decimals))),s.add(cb(a,rn().publicKey.value,rn().publicKey.value)),ts().fee_wallet&&s.add(cc.transfer({fromPubkey:rn().publicKey.value,toPubkey:new Ce(ts().fee_wallet),lamports:1e6}));try{const u=await rn().sendTransaction(s,ts().connection);await Wh(u)}catch(u){Fh.create({color:"red",message:`${u}`,timeout:5e3})}}async function i(){const s=new ac,a=await Ho(new Ce(t.mint),rn().publicKey.value);s.add(cb(a,rn().publicKey.value,rn().publicKey.value)),ts().fee_wallet&&s.add(cc.transfer({fromPubkey:rn().publicKey.value,toPubkey:new Ce(ts().fee_wallet),lamports:1e6}));try{const u=await rn().sendTransaction(s,ts().connection);await Wh(u)}catch(u){Fh.create({color:"red",message:`${u}`,timeout:5e3})}}return(s,a)=>(hi(),Go(Ip,null,[_e(pi,{color:"primary",size:"sm",icon:"edit",onClick:a[0]||(a[0]=u=>e.value=!0)}),_e(zv,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=u=>e.value=u)},{default:He(()=>[_e(jv,null,{default:He(()=>[_e(Wv,{class:"q-mt-md"},{default:He(()=>[_e(kp,null,{default:He(()=>[_e(Ap,{name:"edit"})]),_:1}),_e($v,null,{default:He(()=>[xT,an("div",CT,Dn(r.mint),1)]),_:1}),Tv(_e(pi,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Gv]])]),_:1}),_e(qv,{class:"q-gutter-y-md col justify-around"},{default:He(()=>[an("div",MT,[LT,an("div",KT,Dn(r.amount),1)]),_e(pi,{disabled:r.amount==0,class:"full-width",color:"red",onClick:a[1]||(a[1]=u=>n())},{default:He(()=>[ai(" Burn and close Account ")]),_:1},8,["disabled"]),_e(pi,{disabled:r.amount>0,class:"full-width",color:"orange",onClick:a[2]||(a[2]=u=>i())},{default:He(()=>[ai(" Close Account")]),_:1},8,["disabled"])]),_:1}),NT]),_:1})]),_:1},8,["modelValue"])],64))}}),UT=an("div",{class:"col-2 q-table__title"},"Accounts",-1),VT={key:0,class:"col"},FT=["src"],zT=Zs({__name:"AccountWalletAccounts",setup(r){Bn();const e=Bn(["account","decimals","amount","edit","send"]),t=[{name:"image",required:!0,align:"left"},{name:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"account",label:"Account",align:"left",sortable:!0},{name:"mint",label:"Mint",align:"left",sortable:!0},{name:"owner",align:"left",label:"Owner",sortable:!0},{name:"state",align:"center",label:"State",sortable:!0},{name:"space",label:"Space",sortable:!0},{name:"lamports",label:"Lamports",sortable:!0},{name:"decimals",label:"Decimals",sortable:!0},{name:"amount",label:"Amount",sortable:!0},{label:"",align:"right",name:"send"}];Rv(async()=>{await ch().update_accounts()}),Ep(()=>rn().publicKey.value,async()=>{await ch().update_accounts()});const n=Bn({rowsPerPage:0});return(i,s)=>(hi(),Go("div",null,[_e(_T,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:n.value,"onUpdate:pagination":s[8]||(s[8]=a=>n.value=a),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:Cu(ch)().get_account_map,columns:t,"row-key":"name"},{top:He(a=>[UT,_e(sT),i.$q.screen.gt.xs?(hi(),Go("div",VT,[_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=u=>e.value=u),val:"account",label:"Account"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=u=>e.value=u),val:"mint",label:"Mint"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[2]||(s[2]=u=>e.value=u),val:"owner",label:"Owner"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[3]||(s[3]=u=>e.value=u),val:"space",label:"Space"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[4]||(s[4]=u=>e.value=u),val:"lamports",label:"Lamports"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[5]||(s[5]=u=>e.value=u),val:"state",label:"State"},null,8,["modelValue"]),_e(Ms,{size:"sm",modelValue:e.value,"onUpdate:modelValue":s[6]||(s[6]=u=>e.value=u),val:"decimals",label:"Decimals"},null,8,["modelValue"])])):(hi(),ll(vT,{key:1,modelValue:e.value,"onUpdate:modelValue":s[7]||(s[7]=u=>e.value=u),multiple:"",borderless:"",dense:"","options-dense":"","display-value":i.$q.lang.table.columns,"emit-value":"","map-options":"",options:t,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"])),_e(pi,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:He(a=>[_e(OT,{props:a},{default:He(()=>[_e(Gr,{key:"image",props:a},{default:He(()=>{var u;return[(u=a.row.meta)!=null&&u.logoURI?(hi(),ll(kp,{key:0,color:"",size:"sm"},{default:He(()=>{var f;return[an("img",{src:(f=a.row.meta)==null?void 0:f.logoURI},null,8,FT)]}),_:2},1024)):aT("",!0)]}),_:2},1032,["props"]),_e(Gr,{key:"name",props:a},{default:He(()=>{var u;return[ai(Dn(((u=a.row.meta)==null?void 0:u.name)??"-"),1)]}),_:2},1032,["props"]),_e(Gr,{key:"account",props:a},{default:He(()=>[_e(lh,{address:a.row.pubkey},null,8,["address"]),ai(" "+Dn(Cu(uh)(a.row.pubkey.toString())),1)]),_:2},1032,["props"]),_e(Gr,{key:"mint",props:a,class:""},{default:He(()=>[_e(lh,{address:a.row.info.mint},null,8,["address"]),ai(" "+Dn(Cu(uh)(a.row.info.mint)),1)]),_:2},1032,["props"]),_e(Gr,{key:"owner",props:a},{default:He(()=>[_e(lh,{address:a.row.info.owner},null,8,["address"]),ai(" "+Dn(Cu(uh)(a.row.info.owner)),1)]),_:2},1032,["props"]),_e(Gr,{key:"state",props:a},{default:He(()=>[ai(Dn(a.row.account.account.data.parsed.info.state),1)]),_:2},1032,["props"]),_e(Gr,{key:"space",props:a},{default:He(()=>[ai(Dn(a.row.account.account.space),1)]),_:2},1032,["props"]),_e(Gr,{key:"lamports",props:a},{default:He(()=>[ai(Dn(a.row.account.account.lamports),1)]),_:2},1032,["props"]),_e(Gr,{key:"decimals",props:a},{default:He(()=>[ai(Dn(a.row.info.tokenAmount.decimals),1)]),_:2},1032,["props"]),_e(Gr,{key:"amount",class:"text-overline",props:a},{default:He(()=>[an("div",{class:cT(a.row.info.tokenAmount.uiAmount>0?"text-white":"text-yellow")},Dn(a.row.info.tokenAmount.uiAmount.toFixed(2)),3)]),_:2},1032,["props"]),_e(Gr,{key:"send",props:a,class:"q-gutter-x-sm"},{default:He(()=>[_e(DT,{amount:a.row.info.tokenAmount.uiAmount,mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),_e(BT,{mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["mint","decimals"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","visible-columns","rows"])]))}});var ns={},Nl={},Hv={},Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});var Dl={},nr={},Ws={},Pp={exports:{}};const WT=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},Qv=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=WT(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};Pp.exports=Qv;Pp.exports.default=Qv;var _n=Pp.exports,Ue={};(function(r){var e=F&&F.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=ob,n=xv,i=e(Bv.exports);var s=ob;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Te.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,z){super(j.span,z),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function C(K,j){return new O(K,j)}r.option=C;function A(K){return new m(t.u8(),R,M,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function M(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:z})=>z,z=>({values:z}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function z({tag:X,data:xe}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return xe}return new m(T,z,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Te.Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((z,X)=>T.addVariant(X,z,z.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:z})=>z,z=>({values:z}),te)}r.array=N;class W extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),z=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,z]}encode(j,te,T){T=T||0;const z=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+z);return z+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function Q(K,j,te){const T=t.u32("length"),z=t.struct([T,t.seq(new W(K,j),t.offset(T,-T.span),"values")]);return new m(z,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=Q})(Ue);var $T=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function Jv(r){return new TextDecoder("utf-8").decode(r)}function Xv(r){return new TextEncoder().encode(r)}var jT=Object.freeze({__proto__:null,decode:Jv,encode:Xv});function Zv(r){return qe.encode(r)}var qT=Object.freeze({__proto__:null,encode:Zv,decode:function(r){return qe.decode(r)}});function e_(r){return ee.Buffer.from(Mv(r))}var GT=Object.freeze({__proto__:null,encode:function(r){return zh(r)},decode:e_}),HT=Object.freeze({__proto__:null,hex:$T,utf8:jT,bs58:qT,base64:GT});function Tp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function t_(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function Ul(r,e={}){r.forEach(t=>{if("accounts"in t)Ul(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Hr(r){return r instanceof Ce?r:new Ce(r)}class YT extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Vo(r){return typeof r=="object"&&r!=null}function ds(r){return typeof r=="string"?JSON.stringify(r):""+r}function QT(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+ds(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*ub(r,e,t,n){var i;Vo(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=QT(s,e,t,n);a&&(yield a)}}function*Rp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Vo(e.schema)&&Vo(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=Rp(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):Vo(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class ys{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>ub(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>ub(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=Xa(t,n);if(i[0])throw i[0]}(e,this)}create(e){return Bp(e,this)}is(e){return n_(e,this)}mask(e){return function(t,n){const i=Xa(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return Xa(e,this,t)}}function Bp(r,e){const t=Xa(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function n_(r,e){return!Xa(r,e)[0]}function Xa(r,e,t={}){const n=Rp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new YT(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function kc(r,e){return new ys({type:r,schema:null,validator:e})}function fh(r){return new ys({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+ds(e)})}function lb(r){const e=ds(r),t=typeof r;return new ys({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+ds(n)})}function Mu(r){return new ys({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Lu(){return kc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+ds(r))}function Xu(r){return new ys({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Ks(){return kc("string",r=>typeof r=="string"||"Expected a string, but received: "+ds(r))}function rs(r){const e=Object.keys(r);return new ys({type:"type",schema:r,*entries(t){if(Vo(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Vo(t)||"Expected an object, but received: "+ds(t)})}function r_(r){const e=r.map(t=>t.type).join(" | ");return new ys({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=Rp(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+ds(t),...i]}})}function i_(){return kc("unknown",()=>!0)}async function s_(r,e,t){if(e.length<=99)return await fb(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>fb(r,i,t)))).flat()}}async function fb(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function o_(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=Bp(await r._rpcRequest("simulateTransaction",h),ZT);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new Lv("failed to simulate transaction: "+d.error.message,m)}return d.result}function JT(r){return function(e,t,n){return new ys({...e,coercer:(i,s)=>n_(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(a_(r),XT,e=>"error"in e?e:{...e,result:Bp(e.result,r)})}const XT=a_(i_());function a_(r){return r_([rs({jsonrpc:lb("2.0"),id:Ks(),result:r}),rs({jsonrpc:lb("2.0"),id:Ks(),error:rs({code:i_(),message:Ks(),data:Xu(kc("any",()=>!0))})})])}const ZT=(db=rs({err:Mu(r_([rs({}),Ks()])),logs:Mu(fh(Ks())),accounts:Xu(Mu(fh(Mu(rs({executable:kc("boolean",r=>typeof r=="boolean"),owner:Ks(),lamports:Lu(),data:fh(Ks()),rentEpoch:Xu(Lu())}))))),unitsConsumed:Xu(Lu())}),JT(rs({context:rs({slot:Lu()}),value:db})));var db,eR=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=Hr(r),n||(n=Yo());const i=new ac;if(i.add(new Cv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:s_,simulateTransaction:o_});class c_{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await hb(this.connection,s,n)}catch(a){if(a instanceof u_){const u=await this.connection.getTransaction(Zv(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new Lv(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await hb(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await o_(this.connection,e,t,n,i);if(s.value.err)throw new tR(s.value);return s.value}}class tR extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function hb(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new u_(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class u_ extends Error{constructor(e){super(e)}}function nR(r){$h=r}function Yo(){return $h===null?c_.local():$h}let $h=null;const rR=new Set(["anchor-deprecated-state","debug-logs"]),l_=new Map;function Vl(r){return l_.get(r)!==void 0}var iR=Object.freeze({__proto__:null,set:function(r){if(!rR.has(r))throw new Error("Invalid feature");l_.set(r,!0)},isSet:Vl});class uc extends Error{constructor(e){super(e),this.name="IdlError"}}class ga{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new Ce(u))}return new ga(s)}}class Fo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=ga.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new Ce(d),new Ce(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Fo(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),C={code:m,number:parseInt(I)},A={file:h,line:parseInt(d)};return new Fo(C,O,i,e,A,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,C={code:d,number:parseInt(m)};return new Fo(C,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class lc extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=ga.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new lc(s,a,e.logs):(a=f_.get(s),a!==void 0?new lc(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function xp(r,e){Vl("debug-logs")&&console.log("Translating error:",r);const t=Fo.parse(r.logs);if(t)return t;const n=lc.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=ga.parse(r.logs),new Proxy(r,i)}return r}const Oe={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},f_=new Map([[Oe.InstructionMissing,"8 byte instruction identifier not provided"],[Oe.InstructionFallbackNotFound,"Fallback functions are not supported"],[Oe.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Oe.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Oe.IdlInstructionStub,"The program was compiled without idl instructions"],[Oe.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Oe.ConstraintMut,"A mut constraint was violated"],[Oe.ConstraintHasOne,"A has_one constraint was violated"],[Oe.ConstraintSigner,"A signer constraint was violated"],[Oe.ConstraintRaw,"A raw constraint was violated"],[Oe.ConstraintOwner,"An owner constraint was violated"],[Oe.ConstraintRentExempt,"A rent exemption constraint was violated"],[Oe.ConstraintSeeds,"A seeds constraint was violated"],[Oe.ConstraintExecutable,"An executable constraint was violated"],[Oe.ConstraintState,"A state constraint was violated"],[Oe.ConstraintAssociated,"An associated constraint was violated"],[Oe.ConstraintAssociatedInit,"An associated init constraint was violated"],[Oe.ConstraintClose,"A close constraint was violated"],[Oe.ConstraintAddress,"An address constraint was violated"],[Oe.ConstraintZero,"Expected zero account discriminant"],[Oe.ConstraintTokenMint,"A token mint constraint was violated"],[Oe.ConstraintTokenOwner,"A token owner constraint was violated"],[Oe.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Oe.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Oe.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Oe.ConstraintSpace,"A space constraint was violated"],[Oe.RequireViolated,"A require expression was violated"],[Oe.RequireEqViolated,"A require_eq expression was violated"],[Oe.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Oe.RequireNeqViolated,"A require_neq expression was violated"],[Oe.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Oe.RequireGtViolated,"A require_gt expression was violated"],[Oe.RequireGteViolated,"A require_gte expression was violated"],[Oe.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Oe.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Oe.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Oe.AccountDidNotDeserialize,"Failed to deserialize the account"],[Oe.AccountDidNotSerialize,"Failed to serialize the account"],[Oe.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Oe.AccountNotMutable,"The given account is not mutable"],[Oe.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Oe.InvalidProgramId,"Program ID was not as expected"],[Oe.InvalidProgramExecutable,"Program account is not executable"],[Oe.AccountNotSigner,"The given account did not sign"],[Oe.AccountNotSystemOwned,"The given account is not owned by the system program"],[Oe.AccountNotInitialized,"The program expected this account to be already initialized"],[Oe.AccountNotProgramData,"The given account is not a program data account"],[Oe.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Oe.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Oe.StateInvalidAddress,"The given state account does not have the correct address"],[Oe.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Oe.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hl=function(){return hl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},hl.apply(this,arguments)};function sR(r){return r.toLowerCase()}var oR=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],aR=/[^A-Z0-9]+/gi;function pb(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function cR(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?oR:i,a=n.stripRegexp,u=a===void 0?aR:a,f=n.transform,h=f===void 0?sR:f,d=n.delimiter,m=d===void 0?" ":d,I=pb(pb(t,s,"$1\0$2"),u,"\0"),O=0,C=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(C-1)==="\0";)C--;return I.slice(O,C).split("\0").map(h).join(m)}(r,hl({delimiter:"."},e))}class gr{static fieldLayout(e,t){const n=e.name!==void 0?_n(e.name):void 0;switch(e.type){case"bool":return Ue.bool(n);case"u8":return Ue.u8(n);case"i8":return Ue.i8(n);case"u16":return Ue.u16(n);case"i16":return Ue.i16(n);case"u32":return Ue.u32(n);case"i32":return Ue.i32(n);case"f32":return Ue.f32(n);case"u64":return Ue.u64(n);case"i64":return Ue.i64(n);case"f64":return Ue.f64(n);case"u128":return Ue.u128(n);case"i128":return Ue.i128(n);case"bytes":return Ue.vecU8(n);case"string":return Ue.str(n);case"publicKey":return Ue.publicKey(n);default:if("vec"in e.type)return Ue.vec(gr.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ue.option(gr.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new uc("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new uc(`Type not found: ${JSON.stringify(e)}`);return gr.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=gr.fieldLayout({name:void 0,type:i},t);return Ue.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>gr.fieldLayout(s,t));return Ue.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=_n(s.name);if(s.fields===void 0)return Ue.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return gr.fieldLayout(f,t)});return Ue.struct(u,a)});return n!==void 0?Ue.rustEnum(i).replicate(n):Ue.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Fl{constructor(e){this.idl=e,this.ixLayout=Fl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=dh("global",n.name);t.set(qe.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=dh("state",n.name);t.set(qe.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=_n(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([dh(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return gr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=_n(n.name);return[s,Ue.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return gr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=_n(n.name);return[s,Ue.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):qe.decode(e));let n=qe.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Mi.format(e,t,this.idl)}}class Mi{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Mi.formatIdlType(u.type),data:Mi.formatIdlData(u,e.data[u.name],n.types)})),a=Mi.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Mi.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Mi.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Mi.formatIdlData(I,m,n)}).join(", "),f=_n(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Mi.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function dh(r,e){var t;let n=`${r}:${t===void 0&&(t={}),cR(e,hl({delimiter:"_"},t))}`;return ee.Buffer.from(eo.exports.sha256.digest(n)).slice(0,8)}function Cp(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return Za(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>Za(r,t.type)).reduce((t,n)=>t+n,0)}function Za(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Za(r,e.option);if("coption"in e)return 4+Za(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new uc(`Type not found: ${JSON.stringify(e)}`);return Cp(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return Za(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const uR=8;class zo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,gr.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=zo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(zo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=zo.accountDiscriminator(e);return{offset:0,bytes:qe.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=Cp(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(eo.exports.sha256.digest(`account:${_n(e,{pascalCase:!0})}`)).slice(0,8)}}class d_{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,gr.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[zh(h_(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(Mv(e))}catch{return null}const n=zh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function h_(r){return ee.Buffer.from(eo.exports.sha256.digest(`event:${r}`)).slice(0,8)}class p_{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=gr.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await Mp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function Mp(r){let e=Vl("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(eo.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class zl{constructor(e){this.instruction=new Fl(e),this.accounts=new zo(e),this.events=new d_(e),e.state&&(this.state=new p_(e))}}var lR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te.global<"u"?Te.global:typeof self<"u"?self:{};function fR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class vr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var g_=vr;class Ns extends vr{isCount(){throw new Error("ExternalLayout is abstract")}}class dR extends Ns{constructor(e,t,n){if(!(e instanceof vr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Wl||this.layout instanceof y_}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Wl extends vr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class y_ extends vr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const hh=Math.pow(2,32);class hR extends vr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*hh+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/hh);return{hi32:a,lo32:s-a*hh}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class pR extends vr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof vr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class m_{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class gb extends m_{constructor(e,t){if(!(e instanceof Ns&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class b_ extends vr{constructor(e,t,n){const i=e instanceof Wl||e instanceof y_;if(i)e=new gb(new dR(e));else if(e instanceof Ns&&e.isCount())e=new gb(e);else if(!(e instanceof m_))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof vr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new gR(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Te.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class gR extends vr{constructor(e,t,n,i){if(!(e instanceof b_))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof vr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class yR extends vr{constructor(e,t){if(!(e instanceof Ns&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ns||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Ns&&(i=e.length),!Te.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Ns&&this.length.encode(i,t,n),i}}var Tn=r=>new Wl(1,r),Zi=r=>new hR(r),Lt=(r,e,t)=>new pR(r,e,t),$l=(r,e)=>new yR(r,e);class mR{constructor(e){}encode(e,t){switch(_n(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||Ce.default).toBuffer()}})}(t);case"initializeAccount":return jt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return jt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return jt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return jt({approve:{amount:n}})}(t);case"revoke":return jt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return jt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return jt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return jt({burn:{amount:n}})}(t);case"closeAccount":return jt({closeAccount:{}});case"freezeAccount":return jt({freezeAccount:{}});case"thawAccount":return jt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return jt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return jt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return jt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return jt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return jt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return jt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return jt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return jt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Kt=(yb=Tn("instruction"),new b_(yb,bR,vR));var yb,bR,vR;function Io(r){return $l(32,r)}function jt(r){let e=Te.Buffer.alloc(_R),t=Kt.encode(r,e);return e.slice(0,t)}Kt.addVariant(0,Lt([Tn("decimals"),$l(32,"mintAuthority"),Tn("freezeAuthorityOption"),Io("freezeAuthority")]),"initializeMint"),Kt.addVariant(1,Lt([]),"initializeAccount"),Kt.addVariant(2,Lt([Tn("m")]),"initializeMultisig"),Kt.addVariant(3,Lt([Zi("amount")]),"transfer"),Kt.addVariant(4,Lt([Zi("amount")]),"approve"),Kt.addVariant(5,Lt([]),"revoke"),Kt.addVariant(6,Lt([Tn("authorityType"),Tn("newAuthorityOption"),Io("newAuthority")]),"setAuthority"),Kt.addVariant(7,Lt([Zi("amount")]),"mintTo"),Kt.addVariant(8,Lt([Zi("amount")]),"burn"),Kt.addVariant(9,Lt([]),"closeAccount"),Kt.addVariant(10,Lt([]),"freezeAccount"),Kt.addVariant(11,Lt([]),"thawAccount"),Kt.addVariant(12,Lt([Zi("amount"),Tn("decimals")]),"transferChecked"),Kt.addVariant(13,Lt([Zi("amount"),Tn("decimals")]),"approvedChecked"),Kt.addVariant(14,Lt([Zi("amount"),Tn("decimals")]),"mintToChecked"),Kt.addVariant(15,Lt([Zi("amount"),Tn("decimals")]),"burnedChecked"),Kt.addVariant(16,Lt([Io("authority")]),"InitializeAccount2"),Kt.addVariant(17,Lt([]),"syncNative"),Kt.addVariant(18,Lt([Io("authority")]),"initializeAccount3"),Kt.addVariant(19,Lt([Tn("m")]),"initializeMultisig2"),Kt.addVariant(20,Lt([Tn("decimals"),Io("mintAuthority"),Tn("freezeAuthorityOption"),Io("freezeAuthority")]),"initializeMint2");const _R=Math.max(...Object.values(Kt.registry).map(r=>r.span));class wR{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Zu(r){return new Lp($l(8),e=>Kp.fromBuffer(e),e=>e.toBuffer(),r)}function xo(r){return new Lp($l(32),e=>new Ce(e),e=>e.toBuffer(),r)}function ec(r,e){return new SR(r,e)}class Lp extends g_{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class SR extends g_{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Wl(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function AR(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function kR(r){return r?1:0}class Kp extends fs{toBuffer(){const e=super.toArray().reverse(),t=Te.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Te.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Kp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class IR{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Te.Buffer.alloc(165),i=bb.encode(t,n);return n.slice(0,i)}case"mint":{const n=Te.Buffer.alloc(82),i=mb.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return bb.decode(n)}(t);case"mint":return function(n){return mb.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=Cp(this.idl,e))!==null&&t!==void 0?t:0}}const mb=Lt([ec(xo(),"mintAuthority"),Zu("supply"),Tn("decimals"),function(r){return new Lp(Tn(),AR,kR,r)}("isInitialized"),ec(xo(),"freezeAuthority")]),bb=Lt([xo("mint"),xo("authority"),Zu("amount"),ec(xo(),"delegate"),Tn("state"),ec(Zu(),"isNative"),Zu("delegatedAmount"),ec(xo(),"closeAuthority")]);class ER{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class v_{constructor(e){this.instruction=new mR(e),this.accounts=new IR(e),this.events=new ER(e),this.state=new wR(e)}}var OR=Object.freeze({__proto__:null,hash:function(r){return eo.exports.sha256(r)}});function __(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=eo.exports.sha256.digest(n);return new Ce(ee.Buffer.from(i))}function w_(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,PR(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=eo.exports.sha256(new Uint8Array(t)),i=new fs(n,16).toArray(void 0,32);if(Ce.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new Ce(i)}function Np(r,e){let t,n=255;for(;n!=0;){try{t=w_(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const PR=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function S_(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:Hr(i).toBuffer())});const[n]=await Ce.findProgramAddress(t,Hr(r));return n}var TR=Object.freeze({__proto__:null,createWithSeedSync:__,createProgramAddressSync:w_,findProgramAddressSync:Np,associated:S_});const jh=new Ce("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),qh=new Ce("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var RR=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:jh,ASSOCIATED_PROGRAM_ID:qh,associatedAddress:async function({mint:r,owner:e}){return(await Ce.findProgramAddress([e.toBuffer(),jh.toBuffer(),r.toBuffer()],qh))[0]}}),Gh={exports:{}};(function(r,e){var t=typeof self<"u"?self:lR,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function C(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var z={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(z[Symbol.iterator]=function(){return z}),z}function M(T){this.map={},T instanceof M?T.forEach(function(z,X){this.append(X,z)},this):Array.isArray(T)?T.forEach(function(z){this.append(z[0],z[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(z){this.append(z,T[z])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(z,X){T.onload=function(){z(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var z=new FileReader,X=ae(z);return z.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var z=new Uint8Array(T.byteLength);return z.set(new Uint8Array(T)),z.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var z;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(z=T)&&DataView.prototype.isPrototypeOf(z)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(z){var X=new FileReader,xe=ae(X);return X.readAsText(z),xe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(z){for(var X=new Uint8Array(z),xe=new Array(X.length),ye=0;ye<X.length;ye++)xe[ye]=String.fromCharCode(X[ye]);return xe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}M.prototype.append=function(T,z){T=C(T),z=A(z);var X=this.map[T];this.map[T]=X?X+", "+z:z},M.prototype.delete=function(T){delete this.map[C(T)]},M.prototype.get=function(T){return T=C(T),this.has(T)?this.map[T]:null},M.prototype.has=function(T){return this.map.hasOwnProperty(C(T))},M.prototype.set=function(T,z){this.map[C(T)]=A(z)},M.prototype.forEach=function(T,z){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(z,this.map[X],X,this)},M.prototype.keys=function(){var T=[];return this.forEach(function(z,X){T.push(X)}),R(T)},M.prototype.values=function(){var T=[];return this.forEach(function(z){T.push(z)}),R(T)},M.prototype.entries=function(){var T=[];return this.forEach(function(z,X){T.push([X,z])}),R(T)},f&&(M.prototype[Symbol.iterator]=M.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function W(T,z){var X,xe,ye=(z=z||{}).body;if(T instanceof W){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,z.headers||(this.headers=new M(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=z.credentials||this.credentials||"same-origin",!z.headers&&this.headers||(this.headers=new M(z.headers)),this.method=(X=z.method||this.method||"GET",xe=X.toUpperCase(),N.indexOf(xe)>-1?xe:X),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function Q(T){var z=new FormData;return T.trim().split("&").forEach(function(X){if(X){var xe=X.split("="),ye=xe.shift().replace(/\+/g," "),Ee=xe.join("=").replace(/\+/g," ");z.append(decodeURIComponent(ye),decodeURIComponent(Ee))}}),z}function K(T,z){z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new M(z.headers),this.url=z.url||"",this._initBody(T)}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})},E.call(W.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new M(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,z){if(j.indexOf(z)===-1)throw new RangeError("Invalid status code");return new K(null,{status:z,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(z,X){this.message=z,this.name=X;var xe=Error(z);this.stack=xe.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,z){return new Promise(function(X,xe){var ye=new W(T,z);if(ye.signal&&ye.signal.aborted)return xe(new a.DOMException("Aborted","AbortError"));var Ee=new XMLHttpRequest;function qt(){Ee.abort()}Ee.onload=function(){var Gt,we,$e={status:Ee.status,statusText:Ee.statusText,headers:(Gt=Ee.getAllResponseHeaders()||"",we=new M,Gt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(dn){var Et=dn.split(":"),ht=Et.shift().trim();if(ht){var Sr=Et.join(":").trim();we.append(ht,Sr)}}),we)};$e.url="responseURL"in Ee?Ee.responseURL:$e.headers.get("X-Request-URL");var Zt="response"in Ee?Ee.response:Ee.responseText;X(new K(Zt,$e))},Ee.onerror=function(){xe(new TypeError("Network request failed"))},Ee.ontimeout=function(){xe(new TypeError("Network request failed"))},Ee.onabort=function(){xe(new a.DOMException("Aborted","AbortError"))},Ee.open(ye.method,ye.url,!0),ye.credentials==="include"?Ee.withCredentials=!0:ye.credentials==="omit"&&(Ee.withCredentials=!1),"responseType"in Ee&&h&&(Ee.responseType="blob"),ye.headers.forEach(function(Gt,we){Ee.setRequestHeader(we,Gt)}),ye.signal&&(ye.signal.addEventListener("abort",qt),Ee.onreadystatechange=function(){Ee.readyState===4&&ye.signal.removeEventListener("abort",qt)}),Ee.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=M,s.Request=W,s.Response=K),a.Headers=M,a.Request=W,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Gh,Gh.exports);var BR=fR(Gh.exports);async function vb(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=Hh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=Hh(i.data);return s}const xR=Ue.rustEnum([Ue.struct([],"uninitialized"),Ue.struct([Ue.option(Ue.publicKey(),"authorityAddress")],"buffer"),Ue.struct([Ue.publicKey("programdataAddress")],"program"),Ue.struct([Ue.u64("slot"),Ue.option(Ue.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ue.u32());function Hh(r){return xR.decode(r)}var CR=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([vb(r,e),BR(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:vb,decodeUpgradeableLoaderState:Hh}),MR=Object.freeze({__proto__:null,sha256:OR,rpc:eR,publicKey:TR,bytes:HT,token:RR,features:iR,registry:CR});const LR=Ue.struct([Ue.publicKey("authority"),Ue.vecU8("data")]);function Ic(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Qo{static build(e,t,n){if(e.name==="_inner")throw new uc("the _inner name is reserved");const i=(...s)=>{const[a,u]=Ic(e,[...s]);Ul(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),Vl("debug-logs")&&console.log("Outgoing account metas:",f),new Cv({keys:f,programId:n,data:t(e.name,t_(e,...a))})};return i.accounts=s=>Qo.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Qo.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=Hr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class A_{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=Ic(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw xp(h,n)}}}}class k_{static build(e,t){return(...n)=>{var i,s,a;const[,u]=Ic(e,[...n]),f=new ac;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class I_{constructor(e,t,n=Yo(),i=new zl(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=ph(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=Qo.build(I,(M,Y)=>i.instruction.encodeState(M,Y),t);O.accounts=M=>function(ae,oe,de,E){if(de.name==="new"){const[N]=Np([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:ph(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:cc.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return Ul(de.accounts,E),[{pubkey:ph(ae),isWritable:!0,isSigner:!1}]}(t,n,I,M).concat(Qo.accountsArray(M,I.accounts,I.name));const C=k_.build(I,O),A=A_.build(I,C,Tp(e),n),R=_n(I.name);h[R]=O,d[R]=C,m[R]=A}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await Mp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new Kv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function ph(r){let[e]=Np([],r);return __(e,"unversioned",r)}class E_{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??Yo(),this._coder=s??new zl(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await s_(this._provider.connection,e.map(n=>Hr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Te.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Wa.get(e.toString());if(n)return n.ee;const i=new Kv;e=Hr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Wa.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Wa.get(e.toString());t?Wa&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Wa.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return cc.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await S_(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Hr(e),t)}}const Wa=new Map,KR=13,NR=14;class O_{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new Dp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(dl.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class Dp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new UR(e),i=new DR;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(KR):e.slice(NR);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class DR{constructor(){this.stack=[]}program(){return dl.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){dl.exports.ok(this.stack.length>0),this.stack.pop()}}class UR{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const VR=new Ce("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function P_(){return new v_(T_)}const T_={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class fc{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new FR(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=_n(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(fc.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=fc.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await Ce.findProgramAddress(t,n);this._accounts[_n(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new Ce(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=_n(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[_n(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[_n(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Te.Buffer.from([t]);case"u16":let n=Te.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Te.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Te.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Te.Buffer.from(Xv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Te.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}fc.CONST_ACCOUNTS={systemProgram:cc.programId,tokenProgram:jh,associatedTokenProgram:qh,rent:uT};class FR{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=P_().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[_n(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class R_{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new zR(d,i,s,a,u,f,e,t,n,h)}}class zR{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new fc(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class dc{constructor(e,t,n,i){t=Hr(t),n||(n=Yo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new zl(e),this._events=new O_(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,C,A,R){const M={},Y={},ae={},oe={},de={},E={},N=Tp(O),W=O.accounts?class{static build(K,j,te,T){var z;const X={};return(z=K.accounts)===null||z===void 0||z.forEach(xe=>{const ye=_n(xe.name);X[ye]=new E_(K,xe,te,T,j)}),X}}.build(O,C,A,R):{},Q=class{static build(K,j,te,T){if(K.state!==void 0)return new I_(K,te,T,j)}}.build(O,C,A,R);return O.instructions.forEach(K=>{const j=Qo.build(K,(Ee,qt)=>C.instruction.encode(Ee,qt),A),te=k_.build(K,j),T=A_.build(K,te,N,R),z=class{static build(Ee,qt,Gt,we,$e,Zt,dn){return async(...Et)=>{var ht;const Sr=qt(...Et),[,zt]=Ic(Ee,[...Et]);let An;if(we.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{An=await we.simulate(Sr,zt.signers,(ht=zt.options)===null||ht===void 0?void 0:ht.commitment)}catch(ir){throw xp(ir,Gt)}if(An===void 0)throw new Error("Unable to simulate transaction");const ni=An.logs;if(!ni)throw new Error("Simulated logs not found");const Ar=[];return dn.events&&new Dp(Zt,$e).parseLogs(ni,ir=>{Ar.push(ir)}),{events:Ar,raw:ni}}}}.build(K,te,N,R,C,A,O),X=class{static build(Ee,qt,Gt,we){const $e=qt.accounts.find(dn=>dn.isMut),Zt=!!qt.returns;if(!$e&&Zt)return async(...dn)=>{var Et,ht;let Sr=await Gt(...dn);const zt=`Program return: ${Ee} `;let An=Sr.raw.find(ir=>ir.startsWith(zt));if(!An)throw new Error("View expected return log");let ni=e_(An.slice(zt.length)),Ar=qt.returns;if(!Ar)throw new Error("View expected return type");return gr.fieldLayout({type:Ar},Array.from([...(Et=we.accounts)!==null&&Et!==void 0?Et:[],...(ht=we.types)!==null&&ht!==void 0?ht:[]])).decode(ni)}}}.build(A,K,z,O),xe=R_.build(R,A,K,j,te,T,z,X,W),ye=_n(K.name);Y[ye]=j,ae[ye]=te,M[ye]=T,oe[ye]=z,de[ye]=xe,X&&(E[ye]=X)}),[M,Y,ae,W,oe,de,Q,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=Hr(e),i=await dc.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new dc(i,n,t)}static async fetchIdl(e,t){t=t??Yo();const n=Hr(e),i=await async function(h){const d=(await Ce.findProgramAddress([],h))[0];return await Ce.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),LR.decode(u));var u;const f=lT(a.data);return JSON.parse(Jv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class WR{static token(e){return function(t){return new dc(T_,VR,t,P_())}(e)}}var $R=Object.freeze(Object.defineProperty({__proto__:null,web3:fT,ACCOUNT_DISCRIMINATOR_SIZE:uR,AccountClient:E_,AnchorError:Fo,AnchorProvider:c_,BorshAccountsCoder:zo,BorshCoder:zl,BorshEventCoder:d_,BorshInstructionCoder:Fl,BorshStateCoder:p_,EventManager:O_,EventParser:Dp,IdlError:uc,LangErrorCode:Oe,LangErrorMessage:f_,MethodsBuilderFactory:R_,Program:dc,ProgramError:lc,ProgramErrorStack:ga,Spl:WR,SplTokenCoder:v_,StateClient:I_,eventDiscriminator:h_,getProvider:Yo,parseIdlErrors:Tp,setProvider:nR,splitArgsAndCtx:Ic,stateDiscriminator:Mp,toInstruction:t_,translateAddress:Hr,translateError:xp,utils:MR,validateAccounts:Ul,BN:fs},Symbol.toStringTag,{value:"Module"})),mt=Sc($R),Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.stakingIdl=void 0;Ec.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.getStakingProgram=Ws.getStakingIdl=void 0;const _b=mt,jR=Ec;function B_(r){const e=jR.stakingIdl;return e.metadata.address=r.toBase58(),e}Ws.getStakingIdl=B_;function qR({connection:r,programId:e}){const t=B_(e),n=new _b.AnchorProvider(r,null,null);return new _b.Program(t,e,n)}Ws.getStakingProgram=qR;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ws,r)})(nr);var GR=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.cancelUnstakeInstruction=void 0;const HR=nr;function YR({connection:r,user:e,registeredStake:t,programId:n}){return GR(this,void 0,void 0,function*(){const i=(0,HR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Dl.cancelUnstakeInstruction=YR;var jl={},QR=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(jl,"__esModule",{value:!0});jl.createStakingAccountInstruction=void 0;const JR=nr;function XR({connection:r,user:e,registeredStake:t,programId:n}){return QR(this,void 0,void 0,function*(){const i=(0,JR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}jl.createStakingAccountInstruction=XR;var ql={},to={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=xv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(to);var Fr={},sn={};const ZR=ei.utils.randomPrivateKey,wb=()=>{const r=ei.utils.randomPrivateKey(),e=pl(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},pl=ei.getPublicKey;function Sb(r){try{return ei.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Up=(r,e)=>ei.sign(r,e.slice(0,32)),eB=ei.verify,We=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class Vp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Dv(tc,this))}static decode(e){return Uv(tc,this,e)}static decodeUnchecked(e){return Vv(tc,this,e)}}class tB extends Vp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const tc=new Map;var x_;let C_;const M_=32,mr=32;function nB(r){return r._bn!==void 0}let Ab=1;C_=Symbol.toStringTag;class pe extends Vp{constructor(e){if(super({}),this._bn=void 0,nB(e))this._bn=e._bn;else{if(typeof e=="string"){const t=qe.decode(e);if(t.length!=mr)throw new Error("Invalid public key input");this._bn=new fs(t)}else this._bn=new fs(e);if(this._bn.byteLength()>mr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(Ab);return Ab+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return qe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===mr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[C_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=fl(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>M_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,We(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=fl(n);if(Sb(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return Sb(t.toBytes())}}x_=pe;pe.default=new x_("11111111111111111111111111111111");tc.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class rB{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=We(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=We(ZR()),this._publicKey=We(pl(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const iB=new pe("BPFLoader1111111111111111111111111111111111"),os=1280-40-8,Gl=127,Jo=64;class Fp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Fp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class zp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(zp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Co extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Co.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class hc{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Ye=(r="publicKey")=>Xe(32,r),sB=(r="signature")=>Xe(64,r),Ds=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(br(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},oB=(r="authorized")=>ie([Ye("staker"),Ye("withdrawer")],r),aB=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),Ye("custodian")],r),cB=(r="voteInit")=>ie([Ye("nodePubkey"),Ye("authorizedVoter"),Ye("authorizedWithdrawer"),Ie("commission")],r),uB=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Ye("currentAuthorityDerivedKeyOwnerPubkey"),Ds("currentAuthorityDerivedKeySeed"),Ye("newAuthorized")],r);function L_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return L_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Yn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function pr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function rt(r,e){if(!r)throw new Error(e||"Assertion failed")}class Hl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Hl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];rt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{rt(t.length>0,"Expected at least one writable signer key");const[f]=t[0];rt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(rt(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Zr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:qe.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new hc(this.staticAccountKeys)}static compile(e){const t=Hl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new hc(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:qe.encode(u.data)}));return new Zr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];pr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,C=Array.from(qe.decode(m.data));let A=[];pr(A,I.length);let R=[];return pr(R,C.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:C}});let i=[];pr(i,n.length);let s=ee.Buffer.alloc(os);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ie("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Pt(Ie("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Pt(Ie("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Pt(Ye("key"),e,"keys"),Ye("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>We(m.toBytes())),recentBlockhash:qe.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Gl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Yn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,mr);t=t.slice(mr),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,mr);t=t.slice(mr);const h=Yn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),C=Yn(t),A=t.slice(0,C);t=t.slice(C);const R=Yn(t),M=t.slice(0,R),Y=qe.encode(ee.Buffer.from(M));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:qe.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new Zr(m)}}class $s{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new hc(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Hl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:C}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...C)}}const[a,u]=t.getMessageComponents(),h=new hc(u,i).compileInstructions(e.instructions);return new $s({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();pr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();pr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();pr(s,this.addressTableLookups.length);const a=ie([Ie("prefix"),ie([Ie("numRequiredSignatures"),Ie("numReadonlySignedAccounts"),Ie("numReadonlyUnsignedAccounts")],"header"),Xe(e.length,"staticAccountKeysLength"),Pt(Ye(),this.staticAccountKeys.length,"staticAccountKeys"),Ye("recentBlockhash"),Xe(n.length,"instructionsLength"),Xe(t.length,"serializedInstructions"),Xe(s.length,"addressTableLookupsLength"),Xe(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(os),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:qe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(os);for(const n of this.compiledInstructions){const i=Array();pr(i,n.accountKeyIndexes.length);const s=Array();pr(s,n.data.length),e+=ie([Ie("programIdIndex"),Xe(i.length,"encodedAccountKeyIndexesLength"),Pt(Ie(),n.accountKeyIndexes.length,"accountKeyIndexes"),Xe(s.length,"encodedDataLength"),Xe(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(os);for(const n of this.addressTableLookups){const i=Array();pr(i,n.writableIndexes.length);const s=Array();pr(s,n.readonlyIndexes.length),e+=ie([Ye("accountKey"),Xe(i.length,"encodedWritableIndexesLength"),Pt(Ie(),n.writableIndexes.length,"writableIndexes"),Xe(s.length,"encodedReadonlyIndexesLength"),Pt(Ie(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Gl;rt(n!==i,"Expected versioned message but received legacy message");const s=i;rt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=Yn(t);for(let C=0;C<f;C++)u.push(new pe(t.splice(0,mr)));const h=qe.encode(t.splice(0,mr)),d=Yn(t),m=[];for(let C=0;C<d;C++){const A=t.shift(),R=Yn(t),M=t.splice(0,R),Y=Yn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:M,data:ae})}const I=Yn(t),O=[];for(let C=0;C<I;C++){const A=new pe(t.splice(0,mr)),R=Yn(t),M=t.splice(0,R),Y=Yn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:M,readonlyIndexes:ae})}return new $s({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const Wp={deserializeMessageVersion(r){const e=r[0],t=e&Gl;return t===e?"legacy":t},deserialize:r=>{const e=Wp.deserializeMessageVersion(r);if(e==="legacy")return Zr.from(r);if(e===0)return $s.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ci=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const lB=ee.Buffer.alloc(Jo).fill(0);class _t{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new _t(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(M=>{s.push({...M})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new pe(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),M=a.findIndex(Y=>Y.pubkey.toString()===R);M>-1?(a[M].isWritable=a[M].isWritable||A.isWritable,a[M].isSigner=a[M].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",M)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(M=>M.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:M})=>{R?(m.push(A.toString()),f+=1,M||(h+=1)):(I.push(A.toString()),M||(d+=1))});const O=m.concat(I),C=t.map(A=>{const{data:R,programId:M}=A;return{programIdIndex:O.indexOf(M.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:qe.encode(R)}});return C.forEach(A=>{rt(A.programIdIndex>=0),A.accounts.forEach(R=>rt(R>=0))}),new Zr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Up(n,i.secretKey);this._addSignature(i.publicKey,We(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){rt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!eB(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];pr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return rt(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(rt(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),rt(s.length<=os,`Transaction too large: ${s.length} > ${os}`),s}get keys(){return rt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return rt(this.instructions.length===1),this.instructions[0].programId}get data(){return rt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Yn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Jo);t=t.slice(Jo),i.push(qe.encode(ee.Buffer.from(a)))}return lt.populate(Zr.from(t),i)}static populate(e,t=[]){const n=new lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==qe.encode(lB)?null:qe.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new _t({keys:s,programId:e.accountKeys[i.programIdIndex],data:qe.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class $p{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;rt(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;rt(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const C of i){const A=[];for(const M of C.accountKeyIndexes){const Y=m.get(M);if(Y===void 0)throw new Error(`Failed to find key for account key index ${M}`);const ae=M<a;let oe;ae?oe=M<h:M<m.staticAccountKeys.length?oe=M-a<d:oe=M-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:M<n.numRequiredSignatures,isWritable:oe})}const R=m.get(C.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${C.programIdIndex}`);O.push(new _t({programId:R,data:We(C.data),keys:A}))}return new $p({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return Zr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return $s.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class jp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)rt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Jo));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();pr(t,this.signatures.length);const n=ie([Xe(t.length,"encodedSignaturesLength"),Pt(sB(),this.signatures.length,"signatures"),Xe(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Yn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Jo)));const s=Wp.deserialize(new Uint8Array(t));return new jp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));rt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Up(t,i.secretKey)}}addSignature(e,t){rt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));rt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const fB=160,dB=64,hB=fB/dB,K_=1e3/hB,ui=new pe("SysvarC1ock11111111111111111111111111111111"),pB=new pe("SysvarEpochSchedu1e111111111111111111111111"),gB=new pe("Sysvar1nstructions1111111111111111111111111"),el=new pe("SysvarRecentB1ockHashes11111111111111111111"),Xo=new pe("SysvarRent111111111111111111111111111111111"),yB=new pe("SysvarRewards111111111111111111111111111111"),mB=new pe("SysvarS1otHashes111111111111111111111111111"),bB=new pe("SysvarS1otHistory11111111111111111111111111"),tl=new pe("SysvarStakeHistory1111111111111111111111111");async function Yh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ls(r){return new Promise(e=>setTimeout(e,r))}function Ze(r,e){const t=r.layout.span>=0?r.layout.span:L_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ut(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const N_=nt("lamportsPerSignature"),D_=ie([se("version"),se("state"),Ye("authorizedPubkey"),Ye("nonce"),ie([N_],"feeCalculator")]),Qh=D_.span;class Yl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=D_.decode(We(e),0);return new Yl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const vB=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},_B=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=vB(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return Fv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Op(a,r);return n(h,u,f)},s},Zo=_B(8);class wB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(kt))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ut(kt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ut(kt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ut(kt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ut(kt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ut(kt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ut(kt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ut(kt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ut(kt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ut(kt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(kt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(kt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ut(kt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(wn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const kt=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),Ye("programId")])},Assign:{index:1,layout:ie([se("instruction"),Ye("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Zo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Ye("base"),Ds("seed"),Bt("lamports"),Bt("space"),Ye("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Ye("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Ye("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Ye("base"),Ds("seed"),Bt("space"),Ye("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Ye("base"),Ds("seed"),Ye("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Zo("lamports"),Ds("seed"),Ye("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class wn{constructor(){}static createAccount(e){const t=kt.Create,n=Ze(t,{lamports:e.lamports,space:e.space,programId:We(e.programId.toBuffer())});return new _t({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=kt.TransferWithSeed;t=Ze(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=kt.Transfer;t=Ze(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=kt.AssignWithSeed;t=Ze(i,{base:We(e.basePubkey.toBuffer()),seed:e.seed,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Assign;t=Ze(i,{programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=kt.CreateWithSeed,n=Ze(t,{base:We(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:We(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _t({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new lt;"basePubkey"in e&&"seed"in e?t.add(wn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Qh,programId:this.programId})):t.add(wn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Qh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=kt.InitializeNonceAccount,n=Ze(t,{authorized:We(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:el,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceAdvance(e){const t=kt.AdvanceNonceAccount,n=Ze(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:el,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceWithdraw(e){const t=kt.WithdrawNonceAccount,n=Ze(t,{lamports:e.lamports});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:el,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=kt.AuthorizeNonceAccount,n=Ze(t,{authorized:We(e.newAuthorizedPubkey.toBuffer())});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=kt.AllocateWithSeed;t=Ze(i,{base:We(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Allocate;t=Ze(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}}wn.programId=new pe("11111111111111111111111111111111");const SB=os-300;class js{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/js.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new lt,O.add(wn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new lt,O.add(wn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new lt,O.add(wn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new lt().add(wn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Yh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Pt(Ie("byte"),br(se(),-8),"bytes")]),u=js.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(Yh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ls(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Xo,isSigner:!1,isWritable:!1}],programId:i,data:I}),C="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:C}),{context:R,value:M}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},C);if(M.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(M)})`);for(;;){try{if(await e.getSlot({commitment:C})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(K_/2)))}}return!0}}js.chunkSize=SB;const AB=new pe("BPFLoader2111111111111111111111111111111111");class kB{static getMinNumSignatures(e){return js.getMinNumSignatures(e)}static load(e,t,n,i,s){return js.load(e,t,n,s,i)}}function IB(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var EB=Object.prototype.toString,OB=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Ha(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Ha(r.toJSON(),e);if(f=EB.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Ha(r[t],!0)+",";return n>-1&&(i+=Ha(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=OB(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=Ha(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var PB=function(r){var e=Ha(r,!1);if(e!==void 0)return""+e},kb=IB(PB);const $a=32;function gh(r){let e=0;for(;r>1;)r/=2,e++;return e}function TB(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class U_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=gh(TB(e+$a+1))-gh($a)-1,n=this.getSlotsInEpoch(t),i=e-(n-$a);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*$a:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+gh($a)):this.slotsPerEpoch}}class Jh extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const RB={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Ae extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var BB=globalThis.fetch;class xB extends dT{constructor(e,t,n){const i=s=>{const a=gT(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function CB(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Ib=56;class Xh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=CB(MB,e),n=e.length-Ib;rt(n>=0,"lookup table is invalid"),rt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Pt(Ye(),i,"addresses")]).decode(e.slice(Ib));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const MB={index:1,layout:ie([se("typeIndex"),Zo("deactivationSlot"),nt("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Pt(Ye(),br(Ie(),-1),"authority")])},LB=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function KB(r){const e=r.match(LB);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Xt=_i(ha(pe),V(),r=>new pe(r)),V_=pa([V(),Me("base64")]),qp=_i(ha(ee.Buffer),V_,r=>ee.Buffer.from(r[0],"base64")),F_=30*1e3;function NB(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Rt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function z_(r){return yt([x({jsonrpc:Me("2.0"),id:V(),result:r}),x({jsonrpc:Me("2.0"),id:V(),error:x({code:wi(),message:V(),data:le(Nv())})})])}const DB=z_(wi());function ze(r){return _i(z_(r),DB,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Ut(r){return ze(x({context:x({slot:S()}),value:r}))}function Ql(r){return x({context:x({slot:S()}),value:r})}function yh(r,e){return r===0?new $s({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qe.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Zr(e)}const UB=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),VB=ze(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),FB=H(x({slot:S(),prioritizationFee:S()})),zB=x({total:S(),validator:S(),foundation:S(),epoch:S()}),WB=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),$B=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Jt(),firstNormalEpoch:S(),firstNormalSlot:S()}),jB=Kl(V(),H(S())),no=G(yt([x({}),V()])),qB=x({err:no}),GB=Me("receivedSignature"),HB=x({"solana-core":V(),"feature-set":le(S())}),Eb=Ut(x({err:G(yt([x({}),V()])),logs:G(H(V())),accounts:le(G(H(G(x({executable:Jt(),owner:V(),lamports:S(),data:H(V()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:V(),data:pa([V(),Me("base64")])})))})),YB=Ut(x({byIdentity:Kl(V(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function QB(r,e,t,n,i,s){const a=t||BB;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,C)=>{try{n(d,m,(A,R)=>O([A,R]))}catch(A){C(A)}});return await a(...I)}),new hT(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},Jx)};try{let O=5,C,A=500;for(;f?C=await f(r,I):C=await a(r,I),!(C.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${C.status} ${C.statusText}.  Retrying after ${A}ms delay...`),await Ls(A),A*=2;const R=await C.text();C.ok?m(null,R):m(new Error(`${C.status} ${C.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function JB(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function XB(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const ZB=ze(UB),ex=ze(zB),tx=ze(FB),nx=ze(WB),rx=ze($B),ix=ze(jB),sx=ze(S()),ox=Ut(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(Xt)})),Zh=x({amount:V(),uiAmount:G(S()),decimals:S(),uiAmountString:le(V())}),ax=Ut(H(x({address:Xt,amount:V(),uiAmount:G(S()),decimals:S(),uiAmountString:le(V())}))),cx=Ut(H(x({pubkey:Xt,account:x({executable:Jt(),owner:Xt,lamports:S(),data:qp,rentEpoch:S()})}))),ep=x({program:V(),parsed:wi(),space:S()}),ux=Ut(H(x({pubkey:Xt,account:x({executable:Jt(),owner:Xt,lamports:S(),data:ep,rentEpoch:S()})}))),lx=Ut(H(x({lamports:S(),address:Xt}))),pc=x({executable:Jt(),owner:Xt,lamports:S(),data:qp,rentEpoch:S()}),fx=x({pubkey:Xt,account:pc}),dx=_i(yt([ha(ee.Buffer),ep]),yt([V_,ep]),r=>Array.isArray(r)?he(r,qp):r),tp=x({executable:Jt(),owner:Xt,lamports:S(),data:dx,rentEpoch:S()}),hx=x({pubkey:Xt,account:tp}),px=x({state:yt([Me("active"),Me("inactive"),Me("activating"),Me("deactivating")]),active:S(),inactive:S()}),gx=ze(H(x({signature:V(),slot:S(),err:no,memo:G(V()),blockTime:le(G(S()))}))),yx=ze(H(x({signature:V(),slot:S(),err:no,memo:G(V()),blockTime:le(G(S()))}))),mx=x({subscription:S(),result:Ql(pc)}),bx=x({pubkey:Xt,account:pc}),vx=x({subscription:S(),result:Ql(bx)}),_x=x({parent:S(),slot:S(),root:S()}),wx=x({subscription:S(),result:_x}),Sx=yt([x({type:yt([Me("firstShredReceived"),Me("completed"),Me("optimisticConfirmation"),Me("root")]),slot:S(),timestamp:S()}),x({type:Me("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Me("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Me("dead"),slot:S(),timestamp:S(),err:V()})]),Ax=x({subscription:S(),result:Sx}),kx=x({subscription:S(),result:Ql(yt([qB,GB]))}),Ix=x({subscription:S(),result:S()}),Ex=x({pubkey:V(),gossip:G(V()),tpu:G(V()),rpc:G(V()),version:G(V())}),Ob=x({votePubkey:V(),nodePubkey:V(),activatedStake:S(),epochVoteAccount:Jt(),epochCredits:H(pa([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),Ox=ze(x({current:H(Ob),delinquent:H(Ob)})),Px=yt([Me("processed"),Me("confirmed"),Me("finalized")]),Tx=x({slot:S(),confirmations:G(S()),err:no,confirmationStatus:le(Px)}),Rx=Ut(H(G(Tx))),Bx=ze(S()),W_=x({accountKey:Xt,writableIndexes:H(S()),readonlyIndexes:H(S())}),Gp=x({signatures:H(V()),message:x({accountKeys:H(V()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:V(),programIdIndex:S()})),recentBlockhash:V(),addressTableLookups:le(H(W_))})}),$_=x({pubkey:Xt,signer:Jt(),writable:Jt(),source:le(yt([Me("transaction"),Me("lookupTable")]))}),j_=x({accountKeys:H($_),signatures:H(V())}),q_=x({parsed:wi(),program:V(),programId:Xt}),G_=x({accounts:H(Xt),data:V(),programId:Xt}),xx=yt([G_,q_]),Cx=yt([x({parsed:wi(),program:V(),programId:V()}),x({accounts:H(V()),data:V(),programId:V()})]),H_=_i(xx,Cx,r=>"accounts"in r?he(r,G_):he(r,q_)),Y_=x({signatures:H(V()),message:x({accountKeys:H($_),instructions:H(H_),recentBlockhash:V(),addressTableLookups:le(G(H(W_)))})}),gl=x({accountIndex:S(),mint:V(),owner:le(V()),uiTokenAmount:Zh}),Q_=x({writable:H(Xt),readonly:H(Xt)}),Jl=x({err:no,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:V(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(V()))),preTokenBalances:le(G(H(gl))),postTokenBalances:le(G(H(gl))),loadedAddresses:le(Q_),computeUnitsConsumed:le(S())}),Hp=x({err:no,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(H_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(V()))),preTokenBalances:le(G(H(gl))),postTokenBalances:le(G(H(gl))),loadedAddresses:le(Q_),computeUnitsConsumed:le(S())}),ya=yt([Me(0),Me("legacy")]),ro=x({pubkey:V(),lamports:S(),postBalance:G(S()),rewardType:G(V()),commission:le(G(S()))}),Mx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:Gp,meta:G(Jl),version:le(ya)})),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Lx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Kx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:j_,meta:G(Jl),version:le(ya)})),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Nx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:Y_,meta:G(Hp),version:le(ya)})),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Dx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:j_,meta:G(Hp),version:le(ya)})),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Ux=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),rewards:le(H(ro)),blockTime:G(S()),blockHeight:G(S())}))),Vx=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:Gp,meta:G(Jl)})),rewards:le(H(ro)),blockTime:G(S())}))),Pb=ze(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),signatures:H(V()),blockTime:G(S())}))),mh=ze(G(x({slot:S(),meta:G(Jl),blockTime:le(G(S())),transaction:Gp,version:le(ya)}))),Ku=ze(G(x({slot:S(),transaction:Y_,meta:G(Hp),blockTime:le(G(S())),version:le(ya)}))),Fx=Ut(x({blockhash:V(),feeCalculator:x({lamportsPerSignature:S()})})),zx=Ut(x({blockhash:V(),lastValidBlockHeight:S()})),Wx=Ut(Jt()),$x=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),jx=ze(H($x)),qx=Ut(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),Gx=ze(V()),Hx=ze(V()),Yx=x({err:no,logs:H(V()),signature:V()}),Qx=x({result:Ql(Yx),subscription:S()}),Jx={"solana-client":"js/0.0.0-development"};class Xx{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Rt(d),O=this._buildArgs([],m,void 0,I),C=kb(O);return h[C]=h[C]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,ze(S()));if("error"in R)throw new Ae(R.error,"failed to get block height information");return R.result}finally{delete h[C]}})(),await h[C]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=NB(e),this._rpcWsEndpoint=n||KB(e),this._rpcClient=QB(e,i,s,a,u,f),this._rpcRequest=JB(this._rpcClient),this._rpcBatchRequest=XB(this._rpcClient),this._rpcWebSocket=new xB(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Ut(S()));if("error"in u)throw new Ae(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,ze(G(S())));if("error"in n)throw new Ae(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,ze(S()));if("error"in t)throw new Ae(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,sx);if("error"in t)throw new Ae(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,ox);if("error"in i)throw new Ae(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Ut(Zh));if("error"in s)throw new Ae(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Ut(Zh));if("error"in s)throw new Ae(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Rt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,cx);if("error"in h)throw new Ae(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,ux);if("error"in u)throw new Ae(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,lx);if("error"in s)throw new Ae(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,ax);if("error"in s)throw new Ae(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ut(G(pc)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ut(G(tp)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ut(H(G(tp))));if("error"in f)throw new Ae(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ut(H(G(pc))));if("error"in f)throw new Ae(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Rt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,ze(px));if("error"in f)throw new Ae(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(fx),d=a.withContext===!0?he(f,Ut(h)):he(f,ze(h));if("error"in d)throw new Ae(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,ze(H(hx)));if("error"in u)throw new Ae(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=qe.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return rt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:Ci.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:Ci.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Ls(1e3),s||(O=await I(),s))return;m({__type:Ci.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===Ci.PROCESSED)d=m.response;else throw new Fp(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let C=s,A=null;const R=async()=>{try{const{context:M,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=M.slot,Y==null?void 0:Y.nonce}catch{return C}};(async()=>{if(C=await R(),!u)for(;;){if(s!==C){O({__type:Ci.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Ls(2e3),u||(C=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===Ci.PROCESSED)I=O.response;else{let C;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Ls(400);continue}C=A;break}if(C!=null&&C.value){const A=e||"finalized",{confirmationStatus:R}=C.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new Co(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new Co(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new Co(a);break;default:(M=>{})(A)}I={context:C.context,value:{err:C.value.err}}}else throw new Co(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Ci.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===Ci.PROCESSED)u=f.response;else throw new zp(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,ze(H(Ex)));if("error"in t)throw new Ae(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,Ox);if("error"in i)throw new Ae(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,ze(S()));if("error"in a)throw new Ae(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,ze(V()));if("error"in a)throw new Ae(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,ze(H(Xt)));if("error"in s)throw new Ae(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);rt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,Rx);if("error"in s)throw new Ae(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,ze(S()));if("error"in a)throw new Ae(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,ZB);if("error"in i)throw new Ae(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Rt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,VB);if("error"in f)throw new Ae(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,ex);if("error"in t)throw new Ae(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,nx);if("error"in a)throw new Ae(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,rx);if("error"in t)throw new Ae(t.error,"failed to get epoch schedule");const n=t.result;return new U_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,ix);if("error"in t)throw new Ae(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,Bx);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,Fx);if("error"in i)throw new Ae(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,jx);if("error"in n)throw new Ae(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,qx);if("error"in s)throw new Ae(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=We(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Ut(G(S())));if("error"in a)throw new Ae(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,tx);if("error"in s)throw new Ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,zx);if("error"in a)throw new Ae(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,Wx);if("error"in u)throw new Ae(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,ze(HB));if("error"in t)throw new Ae(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,ze(V()));if("error"in t)throw new Ae(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,Kx);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Lx);if("error"in u)throw u.error;return u.result}default:{const u=he(a,Mx);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:yh(m,h.message)},version:m}))}:null}}}catch(u){throw new Ae(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,Dx);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,Ux);if("error"in u)throw u.error;return u.result}default:{const u=he(a,Nx);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Ae(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,YB);if("error"in a)throw new Ae(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,mh);if("error"in u)throw new Ae(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:yh(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,Ku);if("error"in u)throw new Ae(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Ku);if("error"in h)throw new Ae(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,mh);if("error"in h)throw new Ae(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:yh(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Vx);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new Zr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:lt.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,ze(H(S())));if("error"in a)throw new Ae(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,Pb);if("error"in s)throw new Ae(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Pb);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,mh);if("error"in s)throw new Ae(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new Zr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:lt.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Ku);if("error"in s)throw new Ae(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,Ku);if("error"in u)throw new Ae(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,gx);if("error"in a)throw new Ae(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,yx);if("error"in a)throw new Ae(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Xh({key:e,state:Xh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Yl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,Gx);if("error"in i)throw new Ae(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ls(100);const n=Date.now()-this._blockhashInfo.lastFetch>=F_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ls(K_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Ut(S()));if("error"in a)throw new Ae(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const M=t||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment);const Y=[R,M],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,Eb);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof lt){let C=e;i=new lt,i.feePayer=C.feePayer,i.instructions=e.instructions,i.nonceInfo=C.nonceInfo,i.signatures=C.signatures}else i=lt.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let C=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(C);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else C=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const C=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());d.accounts={encoding:"base64",addresses:C}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,Eb);if("error"in O){let C;if("data"in O.error&&(C=O.error.data.logs,C&&Array.isArray(C))){const A=`
    `,R=A+C.join(A);console.error(O.error.message,R)}throw new Jh("failed to simulate transaction: "+O.error.message,C)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=We(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,Hx);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new Jh("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,mx);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=kb([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];rt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,vx);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,Qx);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,wx);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,Ax);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,kx);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,Ix);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Wo{constructor(e){this._keypair=void 0,this._keypair=e??wb()}static generate(){return new Wo(wb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=pl(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Wo({publicKey:n,secretKey:e})}static fromSeed(e){const t=pl(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Wo({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Li=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Zo("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Zo(),Pt(Ye(),br(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class Zx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Li))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ut(Li.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ut(Li.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Yp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Yp{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),Op(BigInt(e.recentSlot),8)],this.programId),i=Li.CreateLookupTable,s=Ze(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:wn.programId,isSigner:!1,isWritable:!1}];return[new _t({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Li.FreezeLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Li.ExtendLookupTable,n=Ze(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:wn.programId,isSigner:!1,isWritable:!1}),new _t({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Li.DeactivateLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Li.CloseLookupTable,n=Ze(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new _t({programId:this.programId,keys:i,data:n})}}Yp.programId=new pe("AddressLookupTab1e1111111111111111111111111");class eC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ie("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(fi))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ut(fi.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ut(fi.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ut(fi.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ut(fi.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Qp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const fi=Object.freeze({RequestUnits:{index:0,layout:ie([Ie("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ie("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ie("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ie("instruction"),Zo("microLamports")])}});class Qp{constructor(){}static requestUnits(e){const t=fi.RequestUnits,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=fi.RequestHeapFrame,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=fi.SetComputeUnitLimit,n=Ze(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=fi.SetComputeUnitPrice,n=Ze(t,{microLamports:BigInt(e.microLamports)});return new _t({keys:[],programId:this.programId,data:n})}}Qp.programId=new pe("ComputeBudget111111111111111111111111111111");const Tb=64,Rb=32,Bb=64,xb=ie([Ie("numSignatures"),Ie("padding"),Vt("signatureOffset"),Vt("signatureInstructionIndex"),Vt("publicKeyOffset"),Vt("publicKeyInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Vt("messageInstructionIndex")]);class Xl{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;rt(t.length===Rb,`Public Key must be ${Rb} bytes but received ${t.length} bytes`),rt(i.length===Bb,`Signature must be ${Bb} bytes but received ${i.length} bytes`);const a=xb.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return xb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new _t({keys:[],programId:Xl.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Tb,`Private key must be ${Tb} bytes but received ${t.length} bytes`);try{const s=Wo.fromSecretKey(t),a=s.publicKey.toBytes(),u=Up(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Xl.programId=new pe("Ed25519SigVerify111111111111111111111111111");const tC=(r,e)=>{const t=Ac.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Ac.utils.isValidPrivateKey;const nC=Ac.getPublicKey,Cb=32,bh=20,Mb=64,rC=11,vh=ie([Ie("numSignatures"),Vt("signatureOffset"),Ie("signatureInstructionIndex"),Vt("ethAddressOffset"),Ie("ethAddressInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Ie("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ie("recoveryId")]);class $o{constructor(){}static publicKeyToEthAddress(e){rt(e.length===Mb,`Public key must be ${Mb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(ab(We(e))).slice(-bh)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return $o.createInstructionWithEthAddress({ethAddress:$o.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,rt(u.length===bh,`Address must be ${bh} bytes but received ${u.length} bytes`);const f=1+rC,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(vh.span+n.length);return vh.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:We(i),ethAddress:We(u),recoveryId:s},O),O.fill(We(n),vh.span),new _t({keys:[],programId:$o.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;rt(t.length===Cb,`Private key must be ${Cb} bytes but received ${t.length} bytes`);try{const s=We(t),a=nC(s,!1).slice(1),u=ee.Buffer.from(ab(We(n))),[f,h]=tC(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}$o.programId=new pe("KeccakSecp256k11111111111111111111111111111");var J_;const X_=new pe("StakeConfig11111111111111111111111111111111");class Z_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Oc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}J_=Oc;Oc.default=new J_(0,0,pe.default);class iC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(pn))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ut(pn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Z_(new pe(t.staker),new pe(t.withdrawer)),lockup:new Oc(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ut(pn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ut(pn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ut(pn.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(pn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(pn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(pn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(pn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Zl.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const pn=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),oB(),aB()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Ye("newAuthorized"),se("stakeAuthorizationType"),Ds("authoritySeed"),Ye("authorityOwner")])}}),sC=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Zl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Oc.default,a=pn.Initialize,u=Ze(a,{authorized:{staker:We(n.staker.toBuffer()),withdrawer:We(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:We(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Xo,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new _t(f)}static createAccountWithSeed(e){const t=new lt;t.add(wn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new lt;t.add(wn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=pn.Delegate,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:tl,isSigner:!1,isWritable:!1},{pubkey:X_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=pn.Authorize,f=Ze(u,{newAuthorized:We(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=pn.AuthorizeWithSeed,d=Ze(h,{newAuthorized:We(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:We(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new lt().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=pn.Split,u=Ze(a,{lamports:s});return new _t({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new lt;return t.add(wn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new lt;return f.add(wn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=pn.Merge,a=Ze(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:tl,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=pn.Withdraw,f=Ze(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:tl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=pn.Deactivate,s=Ze(i);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Zl.programId=new pe("Stake11111111111111111111111111111111111111");Zl.space=200;class ew{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class oC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ki))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ut(Ki.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ew(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ut(Ki.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ut(Ki.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(Ki.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ma.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ki=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),cB()])},Authorize:{index:1,layout:ie([se("instruction"),Ye("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),uB()])}}),aC=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ma{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Ki.InitializeAccount,a=Ze(s,{voteInit:{nodePubkey:We(i.nodePubkey.toBuffer()),authorizedVoter:We(i.authorizedVoter.toBuffer()),authorizedWithdrawer:We(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Xo,isSigner:!1,isWritable:!1},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new _t(u)}static createAccount(e){const t=new lt;return t.add(wn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Ki.Authorize,u=Ze(a,{newAuthorized:We(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Ki.AuthorizeWithSeed,h=Ze(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:We(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:We(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ui,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new lt().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Ki.Withdraw,u=Ze(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return ma.withdraw(e)}}ma.programId=new pe("Vote111111111111111111111111111111111111111");ma.space=3731;const tw=new pe("Va1idator1nfo111111111111111111111111111111"),cC=x({name:V(),website:le(V()),details:le(V()),keybaseUsername:le(V())});class Jp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Yn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,mr));t=t.slice(mr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(tw)&&i[1].isSigner){const s=Ds().decode(ee.Buffer.from(t)),a=JSON.parse(s);return pT(a,cC),new Jp(i[1].publicKey,a)}return null}}const uC=new pe("Vote111111111111111111111111111111111111111"),lC=ie([Ye("nodePubkey"),Ye("authorizedWithdrawer"),Ie("commission"),nt(),Pt(ie([nt("slot"),se("confirmationCount")]),br(se(),-8),"votes"),Ie("rootSlotValid"),nt("rootSlot"),nt(),Pt(ie([nt("epoch"),Ye("authorizedVoter")]),br(se(),-8),"authorizedVoters"),ie([Pt(ie([Ye("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ie("isEmpty")],"priorVoters"),nt(),Pt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),br(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);class Xp{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=lC.decode(We(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Xp({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(fC),priorVoters:dC(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function fC({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function Lb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function dC({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(Lb),...r.slice(0,e).map(Lb)]}const Kb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function hC(r,e){const t=e===!1?"http":"https";if(!r)return Kb[t].devnet;const n=Kb[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function pC(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const gC=1e9;var yC=Object.freeze(Object.defineProperty({__proto__:null,Account:rB,AddressLookupTableAccount:Xh,AddressLookupTableInstruction:Zx,AddressLookupTableProgram:Yp,Authorized:Z_,BLOCKHASH_CACHE_TIMEOUT_MS:F_,BPF_LOADER_DEPRECATED_PROGRAM_ID:iB,BPF_LOADER_PROGRAM_ID:AB,BpfLoader:kB,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:fi,ComputeBudgetInstruction:eC,ComputeBudgetProgram:Qp,Connection:Xx,Ed25519Program:Xl,Enum:tB,EpochSchedule:U_,FeeCalculatorLayout:N_,Keypair:Wo,LAMPORTS_PER_SOL:gC,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Li,Loader:js,Lockup:Oc,MAX_SEED_LENGTH:M_,Message:Zr,MessageAccountKeys:hc,MessageV0:$s,NONCE_ACCOUNT_LENGTH:Qh,NonceAccount:Yl,PACKET_DATA_SIZE:os,PUBLIC_KEY_LENGTH:mr,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:Jo,SOLANA_SCHEMA:tc,STAKE_CONFIG_ID:X_,STAKE_INSTRUCTION_LAYOUTS:pn,SYSTEM_INSTRUCTION_LAYOUTS:kt,SYSVAR_CLOCK_PUBKEY:ui,SYSVAR_EPOCH_SCHEDULE_PUBKEY:pB,SYSVAR_INSTRUCTIONS_PUBKEY:gB,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:el,SYSVAR_RENT_PUBKEY:Xo,SYSVAR_REWARDS_PUBKEY:yB,SYSVAR_SLOT_HASHES_PUBKEY:mB,SYSVAR_SLOT_HISTORY_PUBKEY:bB,SYSVAR_STAKE_HISTORY_PUBKEY:tl,Secp256k1Program:$o,SendTransactionError:Jh,SolanaJSONRPCError:Ae,SolanaJSONRPCErrorCode:RB,StakeAuthorizationLayout:sC,StakeInstruction:iC,StakeProgram:Zl,Struct:Vp,SystemInstruction:wB,SystemProgram:wn,Transaction:lt,TransactionExpiredBlockheightExceededError:Fp,TransactionExpiredNonceInvalidError:Co,TransactionExpiredTimeoutError:zp,TransactionInstruction:_t,TransactionMessage:$p,TransactionStatus:Ci,VALIDATOR_INFO_KEY:tw,VERSION_PREFIX_MASK:Gl,VOTE_PROGRAM_ID:uC,ValidatorInfo:Jp,VersionedMessage:Wp,VersionedTransaction:jp,VoteAccount:Xp,VoteAuthorizationLayout:aC,VoteInit:ew,VoteInstruction:oC,VoteProgram:ma,clusterApiUrl:hC,sendAndConfirmRawTransaction:pC,sendAndConfirmTransaction:Yh},Symbol.toStringTag,{value:"Module"})),Vi=Sc(yC);const Nb=()=>{const r=ei.utils.randomPrivateKey(),e=np(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},np=ei.getPublicKey;function Db(r){try{return ei.ExtendedPoint.fromHex(r),!0}catch{return!1}}const mC=(r,e)=>ei.sign(r,e.slice(0,32)),bC=ei.verify,Hn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class vC{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(Dv(nl,this))}static decode(e){return Uv(nl,this,e)}static decodeUnchecked(e){return Vv(nl,this,e)}}const nl=new Map;var nw;let rw;const _C=32,Us=32;function wC(r){return r._bn!==void 0}let Ub=1;rw=Symbol.toStringTag;class ve extends vC{constructor(e){if(super({}),this._bn=void 0,wC(e))this._bn=e._bn;else{if(typeof e=="string"){const t=qe.decode(e);if(t.length!=Us)throw new Error("Invalid public key input");this._bn=new fs(t)}else this._bn=new fs(e);if(this._bn.byteLength()>Us)throw new Error("Invalid public key input")}}static unique(){const e=new ve(Ub);return Ub+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return qe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Us)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[rw](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=fl(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>_C)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,Hn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=fl(n);if(Db(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return Db(t.toBytes())}}nw=ve;ve.default=new nw("11111111111111111111111111111111");nl.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const rp=1280-40-8,SC=127,ip=64;class Vb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const et=(r="publicKey")=>Xe(32,r),Mo=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Xe(br(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},AC=(r="authorized")=>ie([et("staker"),et("withdrawer")],r),kC=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),et("custodian")],r),IC=(r="voteInit")=>ie([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),Ie("commission")],r),EC=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),Mo("currentAuthorityDerivedKeySeed"),et("newAuthorized")],r);function iw(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return iw({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Ya(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Qa(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function hr(r,e){if(!r)throw new Error(e||"Assertion failed")}class Zp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Zp(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];hr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{hr(t.length>0,"Expected at least one writable signer key");const[f]=t[0];hr(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(hr(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class gc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:qe.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Vb(this.staticAccountKeys)}static compile(e){const t=Zp.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Vb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:qe.encode(u.data)}));return new gc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Qa(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,C=Array.from(qe.decode(m.data));let A=[];Qa(A,I.length);let R=[];return Qa(R,C.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:C}});let i=[];Qa(i,n.length);let s=ee.Buffer.alloc(rp);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([Ie("programIdIndex"),Xe(m.keyIndicesCount.length,"keyIndicesCount"),Pt(Ie("keyIndex"),m.keyIndices.length,"keyIndices"),Xe(m.dataLength.length,"dataLength"),Pt(Ie("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Xe(1,"numRequiredSignatures"),Xe(1,"numReadonlySignedAccounts"),Xe(1,"numReadonlyUnsignedAccounts"),Xe(t.length,"keyCount"),Pt(et("key"),e,"keys"),et("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>Hn(m.toBytes())),recentBlockhash:qe.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&SC))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Ya(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Us);t=t.slice(Us),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Us);t=t.slice(Us);const h=Ya(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),C=Ya(t),A=t.slice(0,C);t=t.slice(C);const R=Ya(t),M=t.slice(0,R),Y=qe.encode(ee.Buffer.from(M));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:qe.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new gc(m)}}const OC=ee.Buffer.alloc(ip).fill(0);class gt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Nt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(M=>{s.push({...M})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ve(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),M=a.findIndex(Y=>Y.pubkey.toString()===R);M>-1?(a[M].isWritable=a[M].isWritable||A.isWritable,a[M].isSigner=a[M].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",M)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(M=>M.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:M})=>{R?(m.push(A.toString()),f+=1,M||(h+=1)):(I.push(A.toString()),M||(d+=1))});const O=m.concat(I),C=t.map(A=>{const{data:R,programId:M}=A;return{programIdIndex:O.indexOf(M.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:qe.encode(R)}});return C.forEach(A=>{hr(A.programIdIndex>=0),A.accounts.forEach(R=>hr(R>=0))}),new gc({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:C})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=mC(n,i.secretKey);this._addSignature(i.publicKey,Hn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){hr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!bC(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Qa(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return hr(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(hr(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),hr(s.length<=rp,`Transaction too large: ${s.length} > ${rp}`),s}get keys(){return hr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return hr(this.instructions.length===1),this.instructions[0].programId}get data(){return hr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ya(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,ip);t=t.slice(ip),i.push(qe.encode(ee.Buffer.from(a)))}return Nt.populate(gc.from(t),i)}static populate(e,t=[]){const n=new Nt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==qe.encode(OC)?null:qe.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new gt({keys:s,programId:e.accountKeys[i.programIdIndex],data:qe.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const _h=new ve("SysvarRecentB1ockHashes11111111111111111111"),Lo=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function PC(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function xr(r,e){const t=r.layout.span>=0?r.layout.span:iw(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const TC=nt("lamportsPerSignature"),RC=ie([se("version"),se("state"),et("authorizedPubkey"),et("nonce"),ie([TC],"feeCalculator")]),Fb=RC.span,BC=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},xC=r=>e=>{const t=Xe(r,e),{encode:n,decode:i}=BC(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return Fv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Op(a,r);return n(h,u,f)},s},ea=xC(8),Cr=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),et("programId")])},Assign:{index:1,layout:ie([se("instruction"),et("programId")])},Transfer:{index:2,layout:ie([se("instruction"),ea("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),et("base"),Mo("seed"),Bt("lamports"),Bt("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),et("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),et("base"),Mo("seed"),Bt("space"),et("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),et("base"),Mo("seed"),et("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),ea("lamports"),Mo("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class li{constructor(){}static createAccount(e){const t=Cr.Create,n=xr(t,{lamports:e.lamports,space:e.space,programId:Hn(e.programId.toBuffer())});return new gt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Cr.TransferWithSeed;t=xr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Hn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Cr.Transfer;t=xr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Cr.AssignWithSeed;t=xr(i,{base:Hn(e.basePubkey.toBuffer()),seed:e.seed,programId:Hn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Cr.Assign;t=xr(i,{programId:Hn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Cr.CreateWithSeed,n=xr(t,{base:Hn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Hn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Nt;"basePubkey"in e&&"seed"in e?t.add(li.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Fb,programId:this.programId})):t.add(li.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Fb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Cr.InitializeNonceAccount,n=xr(t,{authorized:Hn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_h,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceAdvance(e){const t=Cr.AdvanceNonceAccount,n=xr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_h,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceWithdraw(e){const t=Cr.WithdrawNonceAccount,n=xr(t,{lamports:e.lamports});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:_h,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Cr.AuthorizeNonceAccount,n=xr(t,{authorized:Hn(e.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Cr.AllocateWithSeed;t=xr(i,{base:Hn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Hn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Cr.Allocate;t=xr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}}li.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),ea("deactivationSlot"),nt("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Pt(et(),br(Ie(),-1),"authority")]);const cn=_i(ha(ve),V(),r=>new ve(r)),sw=pa([V(),Me("base64")]),eg=_i(ha(ee.Buffer),sw,r=>ee.Buffer.from(r[0],"base64"));function ow(r){return yt([x({jsonrpc:Me("2.0"),id:V(),result:r}),x({jsonrpc:Me("2.0"),id:V(),error:x({code:wi(),message:V(),data:le(Nv())})})])}const CC=ow(wi());function It(r){return _i(ow(r),CC,e=>"error"in e?e:{...e,result:he(e.result,r)})}function zr(r){return It(x({context:x({slot:S()}),value:r}))}function ef(r){return x({context:x({slot:S()}),value:r})}const MC=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});It(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const LC=H(x({slot:S(),prioritizationFee:S()})),KC=x({total:S(),validator:S(),foundation:S(),epoch:S()}),NC=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),DC=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Jt(),firstNormalEpoch:S(),firstNormalSlot:S()}),UC=Kl(V(),H(S())),io=G(yt([x({}),V()])),VC=x({err:io}),FC=Me("receivedSignature");x({"solana-core":V(),"feature-set":le(S())});zr(x({err:G(yt([x({}),V()])),logs:G(H(V())),accounts:le(G(H(G(x({executable:Jt(),owner:V(),lamports:S(),data:H(V()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:V(),data:pa([V(),Me("base64")])})))}));zr(x({byIdentity:Kl(V(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));It(MC);It(KC);It(LC);It(NC);It(DC);It(UC);It(S());zr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(cn)}));const zC=x({amount:V(),uiAmount:G(S()),decimals:S(),uiAmountString:le(V())});zr(H(x({address:cn,amount:V(),uiAmount:G(S()),decimals:S(),uiAmountString:le(V())})));zr(H(x({pubkey:cn,account:x({executable:Jt(),owner:cn,lamports:S(),data:eg,rentEpoch:S()})})));const sp=x({program:V(),parsed:wi(),space:S()});zr(H(x({pubkey:cn,account:x({executable:Jt(),owner:cn,lamports:S(),data:sp,rentEpoch:S()})})));zr(H(x({lamports:S(),address:cn})));const tg=x({executable:Jt(),owner:cn,lamports:S(),data:eg,rentEpoch:S()});x({pubkey:cn,account:tg});const WC=_i(yt([ha(ee.Buffer),sp]),yt([sw,sp]),r=>Array.isArray(r)?he(r,eg):r),$C=x({executable:Jt(),owner:cn,lamports:S(),data:WC,rentEpoch:S()});x({pubkey:cn,account:$C});x({state:yt([Me("active"),Me("inactive"),Me("activating"),Me("deactivating")]),active:S(),inactive:S()});It(H(x({signature:V(),slot:S(),err:io,memo:G(V()),blockTime:le(G(S()))})));It(H(x({signature:V(),slot:S(),err:io,memo:G(V()),blockTime:le(G(S()))})));x({subscription:S(),result:ef(tg)});const jC=x({pubkey:cn,account:tg});x({subscription:S(),result:ef(jC)});const qC=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:qC});const GC=yt([x({type:yt([Me("firstShredReceived"),Me("completed"),Me("optimisticConfirmation"),Me("root")]),slot:S(),timestamp:S()}),x({type:Me("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:Me("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:Me("dead"),slot:S(),timestamp:S(),err:V()})]);x({subscription:S(),result:GC});x({subscription:S(),result:ef(yt([VC,FC]))});x({subscription:S(),result:S()});x({pubkey:V(),gossip:G(V()),tpu:G(V()),rpc:G(V()),version:G(V())});const zb=x({votePubkey:V(),nodePubkey:V(),activatedStake:S(),epochVoteAccount:Jt(),epochCredits:H(pa([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});It(x({current:H(zb),delinquent:H(zb)}));const HC=yt([Me("processed"),Me("confirmed"),Me("finalized")]),YC=x({slot:S(),confirmations:G(S()),err:io,confirmationStatus:le(HC)});zr(H(G(YC)));It(S());const aw=x({accountKey:cn,writableIndexes:H(S()),readonlyIndexes:H(S())}),ng=x({signatures:H(V()),message:x({accountKeys:H(V()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:V(),programIdIndex:S()})),recentBlockhash:V(),addressTableLookups:le(H(aw))})}),cw=x({pubkey:cn,signer:Jt(),writable:Jt(),source:le(yt([Me("transaction"),Me("lookupTable")]))}),uw=x({accountKeys:H(cw),signatures:H(V())}),lw=x({parsed:wi(),program:V(),programId:cn}),fw=x({accounts:H(cn),data:V(),programId:cn}),QC=yt([fw,lw]),JC=yt([x({parsed:wi(),program:V(),programId:V()}),x({accounts:H(V()),data:V(),programId:V()})]),dw=_i(QC,JC,r=>"accounts"in r?he(r,fw):he(r,lw)),hw=x({signatures:H(V()),message:x({accountKeys:H(cw),instructions:H(dw),recentBlockhash:V(),addressTableLookups:le(G(H(aw)))})}),yl=x({accountIndex:S(),mint:V(),owner:le(V()),uiTokenAmount:zC}),pw=x({writable:H(cn),readonly:H(cn)}),tf=x({err:io,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:V(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(V()))),preTokenBalances:le(G(H(yl))),postTokenBalances:le(G(H(yl))),loadedAddresses:le(pw),computeUnitsConsumed:le(S())}),rg=x({err:io,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(dw)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(V()))),preTokenBalances:le(G(H(yl))),postTokenBalances:le(G(H(yl))),loadedAddresses:le(pw),computeUnitsConsumed:le(S())}),ba=yt([Me(0),Me("legacy")]),so=x({pubkey:V(),lamports:S(),postBalance:G(S()),rewardType:G(V()),commission:le(G(S()))});It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:ng,meta:G(tf),version:le(ba)})),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:uw,meta:G(tf),version:le(ba)})),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:hw,meta:G(rg),version:le(ba)})),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:uw,meta:G(rg),version:le(ba)})),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),rewards:le(H(so)),blockTime:G(S()),blockHeight:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),transactions:H(x({transaction:ng,meta:G(tf)})),rewards:le(H(so)),blockTime:G(S())})));It(G(x({blockhash:V(),previousBlockhash:V(),parentSlot:S(),signatures:H(V()),blockTime:G(S())})));It(G(x({slot:S(),meta:tf,blockTime:le(G(S())),transaction:ng,version:le(ba)})));It(G(x({slot:S(),transaction:hw,meta:G(rg),blockTime:le(G(S())),version:le(ba)})));zr(x({blockhash:V(),feeCalculator:x({lamportsPerSignature:S()})}));zr(x({blockhash:V(),lastValidBlockHeight:S()}));zr(Jt());const XC=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});It(H(XC));zr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));It(V());It(V());const ZC=x({err:io,logs:H(V()),signature:V()});x({result:ef(ZC),subscription:S()});class is{constructor(e){this._keypair=void 0,this._keypair=e??Nb()}static generate(){return new is(Nb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=np(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new is({publicKey:n,secretKey:e})}static fromSeed(e){const t=np(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new is({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),ea("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),ea(),Pt(et(),br(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([Ie("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([Ie("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([Ie("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([Ie("instruction"),ea("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([Ie("numSignatures"),Ie("padding"),Vt("signatureOffset"),Vt("signatureInstructionIndex"),Vt("publicKeyOffset"),Vt("publicKeyInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Vt("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");Ac.utils.isValidPrivateKey;Ac.getPublicKey;ie([Ie("numSignatures"),Vt("signatureOffset"),Ie("signatureInstructionIndex"),Vt("ethAddressOffset"),Ie("ethAddressInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Ie("messageInstructionIndex"),Xe(20,"ethAddress"),Xe(64,"signature"),Ie("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var gw;new ve("StakeConfig11111111111111111111111111111111");class yw{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}gw=yw;yw.default=new gw(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),AC(),kC()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),et("newAuthorized"),se("stakeAuthorizationType"),Mo("authoritySeed"),et("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),IC()])},Authorize:{index:1,layout:ie([se("instruction"),et("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),EC()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:V(),website:le(V()),details:le(V()),keybaseUsername:le(V())});new ve("Vote111111111111111111111111111111111111111");ie([et("nodePubkey"),et("authorizedWithdrawer"),Ie("commission"),nt(),Pt(ie([nt("slot"),se("confirmationCount")]),br(se(),-8),"votes"),Ie("rootSlotValid"),nt("rootSlot"),nt(),Pt(ie([nt("epoch"),et("authorizedVoter")]),br(se(),-8),"authorizedVoters"),ie([Pt(ie([et("authorizedPubkey"),nt("epochOfLastAuthorizedSwitch"),nt("targetEpoch")]),32,"buf"),nt("idx"),Ie("isEmpty")],"priorVoters"),nt(),Pt(ie([nt("epoch"),nt("credits"),nt("prevCredits")]),br(se(),-8),"epochCredits"),ie([nt("slot"),nt("timestamp")],"lastTimestamp")]);var ot={},nf={};nf.byteLength=nM;nf.toByteArray=iM;nf.fromByteArray=aM;var di=[],Mr=[],eM=typeof Uint8Array<"u"?Uint8Array:Array,wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Eo=0,tM=wh.length;Eo<tM;++Eo)di[Eo]=wh[Eo],Mr[wh.charCodeAt(Eo)]=Eo;Mr["-".charCodeAt(0)]=62;Mr["_".charCodeAt(0)]=63;function mw(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function nM(r){var e=mw(r),t=e[0],n=e[1];return(t+n)*3/4-n}function rM(r,e,t){return(e+t)*3/4-t}function iM(r){var e,t=mw(r),n=t[0],i=t[1],s=new eM(rM(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Mr[r.charCodeAt(f)]<<18|Mr[r.charCodeAt(f+1)]<<12|Mr[r.charCodeAt(f+2)]<<6|Mr[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Mr[r.charCodeAt(f)]<<2|Mr[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=Mr[r.charCodeAt(f)]<<10|Mr[r.charCodeAt(f+1)]<<4|Mr[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function sM(r){return di[r>>18&63]+di[r>>12&63]+di[r>>6&63]+di[r&63]}function oM(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(sM(n));return i.join("")}function aM(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(oM(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(di[e>>2]+di[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(di[e>>10]+di[e>>4&63]+di[e<<2&63]+"=")),i.join("")}var ig={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ig.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};ig.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,C=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=C,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=C,a/=256,h-=8);r[t+O-C]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=nf,t=ig,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return C(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(In(v,ArrayBuffer)||v&&In(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(In(v,SharedArrayBuffer)||v&&In(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:M(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:M(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function C(v){if(In(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=M(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Wi(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function M(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(In(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),In(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(In(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||In(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return sr(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return zi(v).length;default:if(L)return k?-1:sr(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return qt(this,g,y);case"utf8":case"utf-8":return z(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ee(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?z(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(In(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,De=k-y;const wt=Math.min(Z,De),pt=this.slice(L,$),St=g.slice(y,k);for(let ft=0;ft<wt;++ft)if(pt[ft]!==St[ft]){Z=pt[ft],De=St[ft];break}return Z<De?-1:De<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Wi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,De=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,De/=2,y/=2}function wt(St,ft){return $===1?St[ft]:St.readUInt16BE(ft*$)}let pt;if(L){let St=-1;for(pt=y;pt<Z;pt++)if(wt(v,pt)===wt(g,St===-1?0:pt-St)){if(St===-1&&(St=pt),pt-St+1===De)return St*$}else St!==-1&&(pt-=pt-St),St=-1}else for(y+De>Z&&(y=Z-De),pt=y;pt>=0;pt--){let St=!0;for(let ft=0;ft<De;ft++)if(wt(v,pt+ft)!==wt(g,ft)){St=!1;break}if(St)return pt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function W(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const De=parseInt(g.substr(Z*2,2),16);if(Wi(De))return Z;v[y+Z]=De}return Z}function Q(v,g,y,k){return kn(sr(g,v.length-y),v,y,k)}function K(v,g,y,k){return kn($c(g),v,y,k)}function j(v,g,y,k){return kn(zi(g),v,y,k)}function te(v,g,y,k){return kn(Gf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return W(this,g,y,k);case"utf8":case"utf-8":return Q(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function z(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,De=$>239?4:$>223?3:$>191?2:1;if(L+De<=y){let wt,pt,St,ft;switch(De){case 1:$<128&&(Z=$);break;case 2:wt=v[L+1],(wt&192)===128&&(ft=($&31)<<6|wt&63,ft>127&&(Z=ft));break;case 3:wt=v[L+1],pt=v[L+2],(wt&192)===128&&(pt&192)===128&&(ft=($&15)<<12|(wt&63)<<6|pt&63,ft>2047&&(ft<55296||ft>57343)&&(Z=ft));break;case 4:wt=v[L+1],pt=v[L+2],St=v[L+3],(wt&192)===128&&(pt&192)===128&&(St&192)===128&&(ft=($&15)<<18|(wt&63)<<12|(pt&63)<<6|St&63,ft>65535&&ft<1114112&&(Z=ft))}}Z===null?(Z=65533,De=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=De}return xe(k)}const X=4096;function xe(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ee(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function qt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Hf[v[$]];return L}function Gt(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function we(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||we(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||we(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||we(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||we(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=zn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&yn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=zn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&yn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||we(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||we(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||we(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||we(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||we(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=zn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&yn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=zn(function(g){g=g>>>0,Si(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&yn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||we(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||we(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||we(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||we(g,8,this.length),t.read(this,g,!1,52,8)};function $e(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const De=Math.pow(2,8*k)-1;$e(this,g,y,k,De,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const De=Math.pow(2,8*k)-1;$e(this,g,y,k,De,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function Zt(v,g,y,k,L){ir(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function dn(v,g,y,k,L){ir(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=zn(function(g,y=0){return Zt(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=zn(function(g,y=0){return dn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);$e(this,g,y,k,wt-1,-wt)}let $=0,Z=1,De=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&De===0&&this[y+$-1]!==0&&(De=1),this[y+$]=(g/Z>>0)-De&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);$e(this,g,y,k,wt-1,-wt)}let $=k-1,Z=1,De=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&De===0&&this[y+$+1]!==0&&(De=1),this[y+$]=(g/Z>>0)-De&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||$e(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=zn(function(g,y=0){return Zt(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=zn(function(g,y=0){return dn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ht(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return ht(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return ht(this,g,y,!1,k)};function Sr(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return Sr(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return Sr(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),De=Z.length;if(De===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%De]}return this};const zt={};function An(v,g,y){zt[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}An("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),An("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),An("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=ni(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=ni(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function ni(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function Ar(v,g,y){Si(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&yn(g,v.length-(y+1))}function ir(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let De;throw $>3?g===0||g===BigInt(0)?De=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:De=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:De=`>= ${g}${Z} and <= ${y}${Z}`,new zt.ERR_OUT_OF_RANGE("value",De,v)}Ar(k,L,$)}function Si(v,g){if(typeof v!="number")throw new zt.ERR_INVALID_ARG_TYPE(g,"number",v)}function yn(v,g,y){throw Math.floor(v)!==v?(Si(v,y),new zt.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new zt.ERR_BUFFER_OUT_OF_BOUNDS:new zt.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const ks=/[^+/0-9A-Za-z-_]/g;function qf(v){if(v=v.split("=")[0],v=v.trim().replace(ks,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function sr(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function $c(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Gf(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function zi(v){return e.toByteArray(qf(v))}function kn(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function In(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Wi(v){return v!==v}const Hf=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function zn(v){return typeof BigInt>"u"?Yf:v}function Yf(){throw new Error("BigInt not supported")}})(ot);var cM=typeof Te.global<"u"?Te.global:typeof self<"u"?self:typeof window<"u"?window:{},op;typeof Object.create=="function"?op=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:op=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var uM=op;function Fs(r,e){var t={seen:[],stylize:fM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),bw(e)?t.showHidden=e:e&&bM(t,e),Ko(t.showHidden)&&(t.showHidden=!1),Ko(t.depth)&&(t.depth=2),Ko(t.colors)&&(t.colors=!1),Ko(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=lM),ml(t,r,t.depth)}Fs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Fs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function lM(r,e){var t=Fs.styles[e];return t?"\x1B["+Fs.colors[t][0]+"m"+r+"\x1B["+Fs.colors[t][1]+"m":r}function fM(r,e){return r}function dM(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function ml(r,e,t){if(r.customInspect&&e&&rc(e.inspect)&&e.inspect!==Fs&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return _w(n)||(n=ml(r,n,t)),n}var i=hM(r,e);if(i)return i;var s=Object.keys(e),a=dM(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),rl(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Sh(e);if(s.length===0){if(rc(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(nc(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(bl(e))return r.stylize(Date.prototype.toString.call(e),"date");if(rl(e))return Sh(e)}var f="",h=!1,d=["{","}"];if(yM(e)&&(h=!0,d=["[","]"]),rc(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if(nc(e)&&(f=" "+RegExp.prototype.toString.call(e)),bl(e)&&(f=" "+Date.prototype.toUTCString.call(e)),rl(e)&&(f=" "+Sh(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return nc(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=pM(r,e,t,a,s):I=s.map(function(O){return ap(r,e,t,a,O,h)}),r.seen.pop(),gM(I,f,d)}function hM(r,e){if(Ko(e))return r.stylize("undefined","undefined");if(_w(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(mM(e))return r.stylize(""+e,"number");if(bw(e))return r.stylize(""+e,"boolean");if(vw(e))return r.stylize("null","null")}function Sh(r){return"["+Error.prototype.toString.call(r)+"]"}function pM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)ww(e,String(a))?s.push(ap(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(ap(r,e,t,n,f,!0))}),s}function ap(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),ww(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(vw(t)?u=ml(r,f.value,null):u=ml(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),Ko(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function gM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function yM(r){return Array.isArray(r)}function bw(r){return typeof r=="boolean"}function vw(r){return r===null}function mM(r){return typeof r=="number"}function _w(r){return typeof r=="string"}function Ko(r){return r===void 0}function nc(r){return rf(r)&&sg(r)==="[object RegExp]"}function rf(r){return typeof r=="object"&&r!==null}function bl(r){return rf(r)&&sg(r)==="[object Date]"}function rl(r){return rf(r)&&(sg(r)==="[object Error]"||r instanceof Error)}function rc(r){return typeof r=="function"}function Wb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function sg(r){return Object.prototype.toString.call(r)}function bM(r,e){if(!e||!rf(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function ww(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function $b(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var vM=Object.prototype.hasOwnProperty,jb=Object.keys||function(r){var e=[];for(var t in r)vM.call(r,t)&&e.push(t);return e},qb=Array.prototype.slice,Ah;function Sw(){return typeof Ah<"u"?Ah:Ah=function(){return function(){}.name==="foo"}()}function Gb(r){return Object.prototype.toString.call(r)}function Hb(r){return ot.isBuffer(r)||typeof cM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function xn(r,e){r||er(r,!0,e,"==",ag)}var _M=/\s*function\s+([^\(\s]*)\s*/;function Aw(r){if(!!rc(r)){if(Sw())return r.name;var e=r.toString(),t=e.match(_M);return t&&t[1]}}xn.AssertionError=og;function og(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=wM(this),this.generatedMessage=!0);var e=r.stackStartFunction||er;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=Aw(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}uM(og,Error);function Yb(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function Qb(r){if(Sw()||!rc(r))return Fs(r);var e=Aw(r),t=e?": "+e:"";return"[Function"+t+"]"}function wM(r){return Yb(Qb(r.actual),128)+" "+r.operator+" "+Yb(Qb(r.expected),128)}function er(r,e,t,n,i){throw new og({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}xn.fail=er;function ag(r,e){r||er(r,!0,e,"==",ag)}xn.ok=ag;xn.equal=kw;function kw(r,e,t){r!=e&&er(r,e,t,"==",kw)}xn.notEqual=Iw;function Iw(r,e,t){r==e&&er(r,e,t,"!=",Iw)}xn.deepEqual=Ew;function Ew(r,e,t){ta(r,e,!1)||er(r,e,t,"deepEqual",Ew)}xn.deepStrictEqual=Ow;function Ow(r,e,t){ta(r,e,!0)||er(r,e,t,"deepStrictEqual",Ow)}function ta(r,e,t,n){if(r===e)return!0;if(ot.isBuffer(r)&&ot.isBuffer(e))return $b(r,e)===0;if(bl(r)&&bl(e))return r.getTime()===e.getTime();if(nc(r)&&nc(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(Hb(r)&&Hb(e)&&Gb(r)===Gb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return $b(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(ot.isBuffer(r)!==ot.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),SM(r,e,t,n))}function Jb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function SM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(Wb(r)||Wb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Jb(r),s=Jb(e);if(i&&!s||!i&&s)return!1;if(i)return r=qb.call(r),e=qb.call(e),ta(r,e,t);var a=jb(r),u=jb(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!ta(r[f],e[f],t,n))return!1;return!0}xn.notDeepEqual=Pw;function Pw(r,e,t){ta(r,e,!1)&&er(r,e,t,"notDeepEqual",Pw)}xn.notDeepStrictEqual=Tw;function Tw(r,e,t){ta(r,e,!0)&&er(r,e,t,"notDeepStrictEqual",Tw)}xn.strictEqual=Rw;function Rw(r,e,t){r!==e&&er(r,e,t,"===",Rw)}xn.notStrictEqual=Bw;function Bw(r,e,t){r===e&&er(r,e,t,"!==",Bw)}function Xb(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function AM(r){var e;try{r()}catch(t){e=t}return e}function xw(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=AM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&er(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&rl(i),u=!r&&i&&!t;if((a&&s&&Xb(i,t)||u)&&er(i,t,"Got unwanted exception"+n),r&&i&&t&&!Xb(i,t)||!r&&i)throw i}xn.throws=kM;function kM(r,e,t){xw(!0,r,e,t)}xn.doesNotThrow=IM;function IM(r,e,t){xw(!1,r,e,t)}xn.ifError=EM;function EM(r){if(r)throw r}class yc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function OM(r,e){return e.property?r+"["+e.property+"]":r}class Nu extends yc{isCount(){throw new Error("ExternalLayout is abstract")}}class Cw extends yc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class PM extends yc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof yc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class TM extends yc{constructor(e,t){if(!(e instanceof Nu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Nu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Nu&&(i=e.length),!(ot.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(OM("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Nu&&this.length.encode(i,t,n),i}}var tt=r=>new Cw(1,r),ic=r=>new Cw(4,r),Ht=(r,e,t)=>new PM(r,e,t),Mw=(r,e)=>new TM(r,e);const Yt=(r="publicKey")=>Mw(32,r),Lr=(r="uint64")=>Mw(8,r);function nn(r,e,t,...n){return PC(e,t,n,{skipPreflight:!1})}const RM=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Lw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Zb="Failed to find account",ev="Invalid account owner";function kh(r){return ot.Buffer.from(r.toBuffer())}class Pn extends fs{toBuffer(){const e=super.toArray().reverse(),t=ot.Buffer.from(e);if(t.length===8)return t;xn(t.length<8,"u64 too large");const n=ot.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return xn(e.length===8,`Invalid buffer length: ${e.length}`),new Pn([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function dr(r){return"publicKey"in r}const BM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},Kw=new ve("So11111111111111111111111111111111111111112"),Ja=Ht([ic("mintAuthorityOption"),Yt("mintAuthority"),Lr("supply"),tt("decimals"),tt("isInitialized"),ic("freezeAuthorityOption"),Yt("freezeAuthority")]),Ro=Ht([Yt("mint"),Yt("owner"),Lr("amount"),ic("delegateOption"),Yt("delegate"),tt("state"),ic("isNativeOption"),Lr("isNative"),Lr("delegatedAmount"),ic("closeAuthorityOption"),Yt("closeAuthority")]),Du=Ht([tt("m"),tt("n"),tt("is_initialized"),Yt("signer1"),Yt("signer2"),Yt("signer3"),Yt("signer4"),Yt("signer5"),Yt("signer6"),Yt("signer7"),Yt("signer8"),Yt("signer9"),Yt("signer10"),Yt("signer11")]);class vt{constructor(e,t,n,i){za(this,"connection",void 0),za(this,"publicKey",void 0),za(this,"programId",void 0),za(this,"associatedProgramId",void 0),za(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:Lw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Ja.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(Ro.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Du.span)}static async createMint(e,t,n,i,s,a){const u=is.generate(),f=new vt(e,u.publicKey,a,t),h=await vt.getMinBalanceRentForExemptMint(e),d=new Nt;return d.add(li.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Ja.span,programId:a})),d.add(vt.createInitMintInstruction(a,u.publicKey,s,n,i)),await nn("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await vt.getMinBalanceRentForExemptAccount(this.connection),n=is.generate(),i=new Nt;i.add(li.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:Ro.span,programId:this.programId}));const s=this.publicKey;return i.add(vt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await nn("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await nn("CreateAssociatedTokenAccount",this.connection,new Nt().add(vt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===Zb||n.message===ev){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await vt.getMinBalanceRentForExemptAccount(e),u=is.generate(),f=new Nt;return f.add(li.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:Ro.span,programId:t})),f.add(li.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(vt.createInitAccountInstruction(t,Kw,u.publicKey,n)),await nn("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=is.generate(),i=await vt.getMinBalanceRentForExemptMultisig(this.connection),s=new Nt;s.add(li.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:Du.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:Lo,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=Ht([tt("instruction"),tt("m")]),f=ot.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await nn("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Ja.span)throw new Error("Invalid mint size");const t=ot.Buffer.from(e.data),n=Ja.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=Pn.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(Zb);if(!n.owner.equals(this.programId))throw new Error(ev);if(n.data.length!=Ro.span)throw new Error("Invalid account size");const i=ot.Buffer.from(n.data),s=Ro.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=Pn.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new Pn):(s.delegate=new ve(s.delegate),s.delegatedAmount=Pn.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=Pn.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Du.span)throw new Error("Invalid multisig size");const n=ot.Buffer.from(t.data),i=Du.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return dr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await nn("Transfer",this.connection,new Nt().add(vt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;dr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await nn("Approve",this.connection,new Nt().add(vt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;dr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("Revoke",this.connection,new Nt().add(vt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;dr(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await nn("SetAuthority",this.connection,new Nt().add(vt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;dr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await nn("MintTo",this.connection,new Nt().add(vt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;dr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await nn("Burn",this.connection,new Nt().add(vt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;dr(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await nn("CloseAccount",this.connection,new Nt().add(vt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;dr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("FreezeAccount",this.connection,new Nt().add(vt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;dr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("ThawAccount",this.connection,new Nt().add(vt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return dr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await nn("TransferChecked",this.connection,new Nt().add(vt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;dr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await nn("ApproveChecked",this.connection,new Nt().add(vt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;dr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await nn("MintToChecked",this.connection,new Nt().add(vt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;dr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await nn("BurnChecked",this.connection,new Nt().add(vt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await nn("SyncNative",this.connection,new Nt().add(vt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Lo,isSigner:!1,isWritable:!1}];const u=Ht([tt("instruction"),tt("decimals"),Yt("mintAuthority"),tt("option"),Yt("freezeAuthority")]);let f=ot.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:kh(i),option:s===null?0:1,freezeAuthority:kh(s||new ve(0))},f);f=f.slice(0,h)}return new gt({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1}],a=Ht([tt("instruction")]),u=ot.Buffer.alloc(a.span);return a.encode({instruction:1},u),new gt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=Ht([tt("instruction"),Lr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:3,amount:new Pn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=Ht([tt("instruction"),Lr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:4,amount:new Pn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=Ht([tt("instruction")]),a=ot.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=Ht([tt("instruction"),tt("authorityType"),tt("option"),Yt("newAuthority")]);let f=ot.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:BM[i],option:n===null?0:1,newAuthority:kh(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=Ht([tt("instruction"),Lr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:7,amount:new Pn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=Ht([tt("instruction"),Lr("amount")]),f=ot.Buffer.alloc(u.span);u.encode({instruction:8,amount:new Pn(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=Ht([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=Ht([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=Ht([tt("instruction")]),u=ot.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=Ht([tt("instruction"),Lr("amount"),tt("decimals")]),d=ot.Buffer.alloc(h.span);h.encode({instruction:12,amount:new Pn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=Ht([tt("instruction"),Lr("amount"),tt("decimals")]),d=ot.Buffer.alloc(h.span);h.encode({instruction:13,amount:new Pn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=Ht([tt("instruction"),Lr("amount"),tt("decimals")]),h=ot.Buffer.alloc(f.span);f.encode({instruction:14,amount:new Pn(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=Ht([tt("instruction"),Lr("amount"),tt("decimals")]),h=ot.Buffer.alloc(f.span);f.encode({instruction:15,amount:new Pn(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=Ht([tt("instruction")]),i=ot.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new gt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=ot.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:li.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1}];return new gt({keys:f,programId:e,data:u})}}var xM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:Lw,AccountLayout:Ro,MintLayout:Ja,NATIVE_MINT:Kw,TOKEN_PROGRAM_ID:RM,Token:vt,u64:Pn},Symbol.toStringTag,{value:"Module"})),Pc=Sc(xM),sf=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(sn,"__esModule",{value:!0});sn.getAccountInfo=sn.getTokenAccount=sn.getAssociatedTokenAddress=sn.convertFactionStringToNum=sn.longToByteArray=sn.byteArrayToLong=sn.stringToByteArray=sn.byteArrayToString=void 0;const Uu=ns,Vu=mt,il=Vi,ci=Pc;function CM(r){return String.fromCharCode(...r)}sn.byteArrayToString=CM;function MM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}sn.stringToByteArray=MM;function LM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}sn.byteArrayToLong=LM;function KM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}sn.longToByteArray=KM;function NM(r){return sf(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return Uu.FactionType.MUD;case"oni":return Uu.FactionType.ONI;case"ustur":return Uu.FactionType.Ustur;default:return Uu.FactionType.Unenlisted}})}sn.convertFactionStringToNum=NM;function Nw(r,e){return sf(this,void 0,void 0,function*(){const[t]=yield il.PublicKey.findProgramAddress([r.toBuffer(),ci.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],ci.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}sn.getAssociatedTokenAddress=Nw;function DM(r,e,t,n=e,i){return sf(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Vu.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Vu.BN(h.info.tokenAmount.amount);d.gt(new Vu.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield Nw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(il.SystemProgram.programId))return{tokenAccount:u,createInstruction:[ci.Token.createAssociatedTokenAccountInstruction(ci.ASSOCIATED_TOKEN_PROGRAM_ID,ci.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new il.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Vu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[il.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield ci.Token.getMinBalanceRentForExemptAccount(r),space:ci.AccountLayout.span,programId:ci.TOKEN_PROGRAM_ID}),ci.Token.createInitAccountInstruction(ci.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}sn.getTokenAccount=DM;function UM(r,e){return sf(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}sn.getAccountInfo=UM;var of={},VM=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(of,"__esModule",{value:!0});of.sendAndConfirmTransaction=void 0;const FM=Vi;function zM(r,e,...t){return VM(this,void 0,void 0,function*(){let n="";try{n=yield(0,FM.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}of.sendAndConfirmTransaction=zM;var qs={},cg={},ug={},Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});var af={},ms={},Rn={},Yr={},Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.baseIdl=void 0;Tc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.baseIdl=void 0;cf.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var WM=F&&F.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$M=F&&F.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jM=F&&F.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&WM(e,r,t);return $M(e,r),e};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.getMarketplaceProgram=Yr.getGmLogsIDL=Yr.getGmIDL=void 0;const tv=mt,qM=Tc,GM=jM(cf);function Uw(r){const e=qM.baseIdl;return e.metadata.address=r.toBase58(),e}Yr.getGmIDL=Uw;function HM(r){const e=GM.baseIdl;return e.metadata.address=r.toBase58(),e}Yr.getGmLogsIDL=HM;function YM({connection:r,programId:e}){const t=Uw(e),n=new tv.AnchorProvider(r,null,null);return new tv.Program(t,e,n)}Yr.getMarketplaceProgram=YM;var oo=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.getSingleOrder=Rn.getOpenOrdersForPlayerAndAsset=Rn.getOpenOrdersForPlayerAndCurrency=Rn.getOpenOrdersForAsset=Rn.getOpenOrdersForCurrency=Rn.getOpenOrdersForPlayer=Rn.getAllOpenOrders=void 0;const tr=mt,ao=Yr;function QM(r,e){return oo(this,void 0,void 0,function*(){const t=new tr.AnchorProvider(r,null,null),n=(0,ao.getGmIDL)(e),i=new tr.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}Rn.getAllOpenOrders=QM;function JM(r,e,t){return oo(this,void 0,void 0,function*(){const n=new tr.AnchorProvider(r,null,null),i=(0,ao.getGmIDL)(t),s=new tr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Rn.getOpenOrdersForPlayer=JM;function XM(r,e,t){return oo(this,void 0,void 0,function*(){const n=new tr.AnchorProvider(r,null,null),i=(0,ao.getGmIDL)(t),s=new tr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Rn.getOpenOrdersForCurrency=XM;function ZM(r,e,t){return oo(this,void 0,void 0,function*(){const n=new tr.AnchorProvider(r,null,null),i=(0,ao.getGmIDL)(t),s=new tr.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Rn.getOpenOrdersForAsset=ZM;function eL(r,e,t,n){return oo(this,void 0,void 0,function*(){const i=new tr.AnchorProvider(r,null,null),s=(0,ao.getGmIDL)(n),a=new tr.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Rn.getOpenOrdersForPlayerAndCurrency=eL;function tL(r,e,t,n){return oo(this,void 0,void 0,function*(){const i=new tr.AnchorProvider(r,null,null),s=(0,ao.getGmIDL)(n),a=new tr.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Rn.getOpenOrdersForPlayerAndAsset=tL;function nL(r,e,t){return oo(this,void 0,void 0,function*(){const n=new tr.AnchorProvider(r,null,null),i=(0,ao.getGmIDL)(t);return yield new tr.Program(i,t,n).account.orderAccount.fetch(e)})}Rn.getSingleOrder=nL;var on={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.FEE_EXEMPT_SEED=Un.OPEN_ORDERS_COUNTER=Un.REGISTERED_CURRENCY_SEED=Un.ORDER_VAULT_AUTH_SEED=Un.ORDER_VAULT_SEED=Un.MARKET_VARS_SEED=void 0;Un.MARKET_VARS_SEED=Te.Buffer.from("market-vars");Un.ORDER_VAULT_SEED=Te.Buffer.from("order-vault-account");Un.ORDER_VAULT_AUTH_SEED=Te.Buffer.from("order-vault-auth");Un.REGISTERED_CURRENCY_SEED=Te.Buffer.from("registered-currency");Un.OPEN_ORDERS_COUNTER=Te.Buffer.from("open-orders-counter");Un.FEE_EXEMPT_SEED=Te.Buffer.from("fee_exempt");var rL=F&&F.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),iL=F&&F.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sL=F&&F.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&rL(e,r,t);return iL(e,r),e},bs=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(on,"__esModule",{value:!0});on.getAllFeeExemptAccounts=on.getFeeExemptAccount=on.getOpenOrdersCounter=on.getAllRegisteredCurrencies=on.getRegisteredCurrencyAccount=on.getOrderVaultAuth=on.getOrderVault=on.getMarketVarsAccount=void 0;const vl=mt,va=Vi,_a=sL(Un),Vw=Yr;function oL(r){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.MARKET_VARS_SEED],r)})}on.getMarketVarsAccount=oL;function aL(r,e,t){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}on.getOrderVault=aL;function cL(r,e){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}on.getOrderVaultAuth=cL;function uL(r,e){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}on.getRegisteredCurrencyAccount=uL;function lL(r,e){return bs(this,void 0,void 0,function*(){const t=new vl.AnchorProvider(r,null,null),n=(0,Vw.getGmIDL)(e),i=new vl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}on.getAllRegisteredCurrencies=lL;function fL(r,e,t){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}on.getOpenOrdersCounter=fL;function dL(r,e){return bs(this,void 0,void 0,function*(){return va.PublicKey.findProgramAddress([_a.FEE_EXEMPT_SEED,r.toBuffer()],e)})}on.getFeeExemptAccount=dL;function hL(r,e){return bs(this,void 0,void 0,function*(){const t=new vl.AnchorProvider(r,null,null),n=(0,Vw.getGmIDL)(e);return yield new vl.Program(n,e,t).account.feeReduction.all()})}on.getAllFeeExemptAccounts=hL;var Qn={},wa=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getRoyaltyReductionForStakingAccount=Qn.getRoyaltyReductionForUserAndMint=Qn.getRegisteredCurrencyInfoFromPubkey=Qn.getRegisteredCurrencyAccountInfo=Qn.getFeeExemptAccountInfo=Qn.getMarketVarsAccountInfo=void 0;const _l=mt,lg=on,uf=Yr,cp=Nl;function pL(r,e){return wa(this,void 0,void 0,function*(){const t=(0,uf.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,lg.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}Qn.getMarketVarsAccountInfo=pL;function gL(r,e,t){return wa(this,void 0,void 0,function*(){const n=(0,uf.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,lg.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}Qn.getFeeExemptAccountInfo=gL;function yL(r,e,t){return wa(this,void 0,void 0,function*(){const n=(0,uf.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,lg.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}Qn.getRegisteredCurrencyAccountInfo=yL;function fg(r,e,t){return wa(this,void 0,void 0,function*(){return yield(0,uf.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}Qn.getRegisteredCurrencyInfoFromPubkey=fg;function mL(r,e,t,n,i,s){return wa(this,void 0,void 0,function*(){let a=0;const u=yield fg(r,e,i),[f]=yield(0,cp.getStakingAccount)(t,n,s),h=yield(0,cp.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new _l.BN(0))){const d=u.royaltyTiers;let m=new _l.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}Qn.getRoyaltyReductionForUserAndMint=mL;function bL(r,e,t,n,i){return wa(this,void 0,void 0,function*(){let s=0;const a=yield fg(r,e,i),u=yield(0,cp.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new _l.BN(0))){const f=a.royaltyTiers;let h=new _l.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}Qn.getRoyaltyReductionForStakingAccount=bL;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Rn,r),t(on,r),t(Qn,r),t(Un,r)})(ms);var Rc={},rr={},as={},vL=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(as,"__esModule",{value:!0});as.convertDecimalPriceToBn=as.initializeAtaForMint=as.getOrderSide=void 0;const _L=mt,wL=to,Ih=Pc,SL=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";as.getOrderSide=SL;function AL({mint:r,owner:e,connection:t}){return vL(this,void 0,void 0,function*(){const n=[],i=yield(0,wL.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(Ih.Token.createAssociatedTokenAccountInstruction(Ih.ASSOCIATED_TOKEN_PROGRAM_ID,Ih.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}as.initializeAtaForMint=AL;const kL=(r,e)=>new _L.BN(r*Math.pow(10,e));as.convertDecimalPriceToBn=kL;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yr,r),t(as,r)})(rr);var IL=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.createOrderCounterInstruction=void 0;const EL=rr;function OL({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return IL(this,void 0,void 0,function*(){return yield(0,EL.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}Rc.createOrderCounterInstruction=OL;var PL=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(af,"__esModule",{value:!0});af.createCancelOrderInstruction=void 0;const TL=mt,RL=ms,BL=Rc,nv=rr,xL=Fr;function CL({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return PL(this,void 0,void 0,function*(){const s=(0,nv.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,nv.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,xL.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof TL.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,RL.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,BL.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}af.createCancelOrderInstruction=CL;var na={},Fw=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(na,"__esModule",{value:!0});na.createInitializeSellOrderInstruction=na.createInitializeBuyOrderInstruction=void 0;const jo=mt,zw=rr,Ww=Fr,$w=ms,jw=Rc,qw=Fr;function ML({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return Fw(this,void 0,void 0,function*(){const f=(0,zw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Ww.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof jo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,$w.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=jo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,qw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const M=yield f.methods.processInitializeBuy(n,new jo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(M),{orderAccount:A.publicKey,ixSet:h}})}na.createInitializeBuyOrderInstruction=ML;function LL({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return Fw(this,void 0,void 0,function*(){const f=(0,zw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Ww.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof jo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,$w.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,jw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=jo.web3.Keypair.generate();h.signers.push(A);const R=yield(0,qw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const M=yield f.methods.processInitializeSell(n,new jo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(M),{orderAccount:A.publicKey,ixSet:h}})}na.createInitializeSellOrderInstruction=LL;var lf={},KL=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(lf,"__esModule",{value:!0});lf.createDeregisterCurrencyInstruction=void 0;const NL=rr;function DL({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return KL(this,void 0,void 0,function*(){const s=[yield(0,NL.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}lf.createDeregisterCurrencyInstruction=DL;var ff={},df={},hf={},Gw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",C=d+"Division by zero",A={},R=void 0,M=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var W=this;if(!(W instanceof E))return N===R?Y():new E(N);if(N instanceof E)W.s=N.s,W.e=N.e,W.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(W,N)}W.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var W,Q,K;if(!M.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(W=N.indexOf("."))>-1&&(N=N.replace(".","")),(Q=N.search(/e/i))>0?(W<0&&(W=Q),W+=+N.slice(Q+1),N=N.substring(0,Q)):W<0&&(W=N.length),K=N.length,Q=0;Q<K&&N.charAt(Q)=="0";)++Q;if(Q==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=W-Q-1,E.c=[],W=0;Q<=K;)E.c[W++]=+N.charAt(Q++)}return E}function oe(E,N,W,Q){var K=E.c;if(W===R&&(W=E.constructor.RM),W!==0&&W!==1&&W!==2&&W!==3)throw Error(O);if(N<1)Q=W===3&&(Q||!!K[0])||N===0&&(W===1&&K[0]>=5||W===2&&(K[0]>5||K[0]===5&&(Q||K[1]!==R))),K.length=1,Q?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(Q=W===1&&K[N]>=5||W===2&&(K[N]>5||K[N]===5&&(Q||K[N+1]!==R||K[N-1]&1))||W===3&&(Q||!!K[0]),K.length=N,Q){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,W){var Q=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(Q<0?"e":"e+")+Q;else if(Q<0){for(;++Q;)K="0"+K;K="0."+K}else if(Q>0)if(++Q>j)for(Q-=j;Q--;)K+="0";else Q<j&&(K=K.slice(0,Q)+"."+K.slice(Q));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&W?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,W=this,Q=W.c,K=(E=new W.constructor(E)).c,j=W.s,te=E.s,T=W.e,z=E.e;if(!Q[0]||!K[0])return Q[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=z)return T>z^N?1:-1;for(te=(T=Q.length)<(z=K.length)?T:z,j=-1;++j<te;)if(Q[j]!=K[j])return Q[j]>K[j]^N?1:-1;return T==z?0:T>z^N?1:-1},A.div=function(E){var N=this,W=N.constructor,Q=N.c,K=(E=new W(E)).c,j=N.s==E.s?1:-1,te=W.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(C);if(!Q[0])return E.s=j,E.c=[E.e=0],E;var T,z,X,xe,ye,Ee=K.slice(),qt=T=K.length,Gt=Q.length,we=Q.slice(0,T),$e=we.length,Zt=E,dn=Zt.c=[],Et=0,ht=te+(Zt.e=N.e-E.e)+1;for(Zt.s=j,j=ht<0?0:ht,Ee.unshift(0);$e++<T;)we.push(0);do{for(X=0;X<10;X++){if(T!=($e=we.length))xe=T>$e?1:-1;else for(ye=-1,xe=0;++ye<T;)if(K[ye]!=we[ye]){xe=K[ye]>we[ye]?1:-1;break}if(xe<0){for(z=$e==T?K:Ee;$e;){if(we[--$e]<z[$e]){for(ye=$e;ye&&!we[--ye];)we[ye]=9;--we[ye],we[$e]+=10}we[$e]-=z[$e]}for(;!we[0];)we.shift()}else break}dn[Et++]=xe?X:++X,we[0]&&xe?we[$e]=Q[qt]||0:we=[Q[qt]]}while((qt++<Gt||we[0]!==R)&&j--);return!dn[0]&&Et!=1&&(dn.shift(),Zt.e--,ht--),Et>ht&&oe(Zt,ht,W.RM,we[0]!==R),Zt},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,W,Q,K,j=this,te=j.constructor,T=j.s,z=(E=new te(E)).s;if(T!=z)return E.s=-z,j.plus(E);var X=j.c.slice(),xe=j.e,ye=E.c,Ee=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-z:X[0]?E=new te(j):E.s=1,E;if(T=xe-Ee){for((K=T<0)?(T=-T,Q=X):(Ee=xe,Q=ye),Q.reverse(),z=T;z--;)Q.push(0);Q.reverse()}else for(W=((K=X.length<ye.length)?X:ye).length,T=z=0;z<W;z++)if(X[z]!=ye[z]){K=X[z]<ye[z];break}if(K&&(Q=X,X=ye,ye=Q,E.s=-E.s),(z=(W=ye.length)-(N=X.length))>0)for(;z--;)X[N++]=0;for(z=N;W>T;){if(X[--W]<ye[W]){for(N=W;N&&!X[--N];)X[N]=9;--X[N],X[W]+=10}X[W]-=ye[W]}for(;X[--z]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ee;return X[0]||(E.s=1,X=[Ee=0]),E.c=X,E.e=Ee,E},A.mod=function(E){var N,W=this,Q=W.constructor,K=W.s,j=(E=new Q(E)).s;if(!E.c[0])throw Error(C);return W.s=E.s=1,N=E.cmp(W)==1,W.s=K,E.s=j,N?new Q(W):(K=Q.DP,j=Q.RM,Q.DP=Q.RM=0,W=W.div(E),Q.DP=K,Q.RM=j,this.minus(W.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,W,Q,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,z=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-z){for(N>0?(z=te,Q=X):(N=-N,Q=T),Q.reverse();N--;)Q.push(0);Q.reverse()}for(T.length-X.length<0&&(Q=X,X=T,T=Q),N=X.length,W=0;N;T[N]%=10)W=(T[--N]=T[N]+X[N]+W)/10|0;for(W&&(T.unshift(W),++z),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=z,E},A.pow=function(E){var N=this,W=new N.constructor("1"),Q=W,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(Q=Q.times(N)),E>>=1,!!E;)N=N.times(N);return K?W.div(Q):Q},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,W,Q=this,K=Q.constructor,j=Q.s,te=Q.e,T=new K("0.5");if(!Q.c[0])return new K(Q);if(j<0)throw Error(d+"No square root");j=Math.sqrt(Q+""),j===0||j===1/0?(N=Q.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do W=E,E=T.times(W.plus(Q.div(W)));while(W.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,W=this,Q=W.constructor,K=W.c,j=(E=new Q(E)).c,te=K.length,T=j.length,z=W.e,X=E.e;if(E.s=W.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=z+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(z=T;z--;){for(T=0,X=te+z;X>z;)T=N[X]+j[z]*K[X-z-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),z=N.length;!N[--z];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var W=this,Q=W.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(W=oe(new W.constructor(W),++E,N);W.c.length<E;)W.c.push(0)}return de(W,!0,!!Q)},A.toFixed=function(E,N){var W=this,Q=W.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(W=oe(new W.constructor(W),E+W.e+1,N),E=E+W.e+1;W.c.length<E;)W.c.push(0)}return de(W,!1,!!Q)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},A.toPrecision=function(E,N){var W=this,Q=W.constructor,K=W.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(W=oe(new Q(W),E,N);W.c.length<E;)W.c.push(0)}return de(W,E<=W.e||W.e<=Q.NE||W.e>=Q.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(F)})(Gw);function Ke(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var UL={};function dg(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te.global<"u"?Te.global:typeof self<"u"?self:UL}var Hw=Object.assign,wl=Object.getOwnPropertyDescriptor,yi=Object.defineProperty,Bc=Object.prototype,up=[];Object.freeze(up);var hg={};Object.freeze(hg);var VL=typeof Proxy<"u",FL=Object.toString();function Yw(){VL||Ke("Proxy not available")}function Qw(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var No=function(){};function _r(r){return typeof r=="function"}function Gs(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function pf(r){return r!==null&&typeof r=="object"}function Ui(r){if(!pf(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===FL}function Jw(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function xc(r,e,t){yi(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Xw(r,e,t){yi(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function vs(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return pf(n)&&n[t]===!0}}function Sa(r){return r instanceof Map}function Cc(r){return r instanceof Set}var Zw=typeof Object.getOwnPropertySymbols<"u";function zL(r){var e=Object.keys(r);if(!Zw)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return Bc.propertyIsEnumerable.call(r,n)})):e}var ra=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Zw?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function e0(r){return r===null?null:typeof r=="object"?""+r:r}function Ni(r,e){return Bc.hasOwnProperty.call(r,e)}var WL=Object.getOwnPropertyDescriptors||function(e){var t={};return ra(e).forEach(function(n){t[n]=wl(e,n)}),t};function rv(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,qL(n.key),n)}}function pg(r,e,t){return e&&rv(r.prototype,e),t&&rv(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function hs(){return hs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hs.apply(this,arguments)}function t0(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,lp(r,e)}function lp(r,e){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lp(r,e)}function Eh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function $L(r,e){if(!!r){if(typeof r=="string")return iv(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return iv(r,e)}}function iv(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Do(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=$L(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jL(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function qL(r){var e=jL(r,"string");return typeof e=="symbol"?e:String(e)}var gi=Symbol("mobx-stored-annotations");function Qr(r){function e(t,n){if(Mc(n))return r.decorate_20223_(t,n);Aa(t,n,r)}return Object.assign(e,r)}function Aa(r,e,t){Ni(r,gi)||xc(r,gi,hs({},r[gi])),tK(t)||(r[gi][e]=t)}function GL(r){return Ni(r,gi)||xc(r,gi,hs({},r[gi])),r[gi]}function Mc(r){return typeof r=="object"&&typeof r.kind=="string"}var ke=Symbol("mobx administration"),Lc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return S0(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),Jn(),A0(this),Xn()},e.toString=function(){return this.name_},r}(),gg=vs("Atom",Lc);function gf(r,e,t){e===void 0&&(e=No),t===void 0&&(t=No);var n=new Lc(r);return e!==No&&x0(n,e),t!==No&&Dc(n,t),n}function HL(r,e){return r===e}function YL(r,e){return Ag(r,e)}function QL(r,e){return Ag(r,e,1)}function JL(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Hs={identity:HL,structural:YL,default:JL,shallow:QL};function Ys(r,e,t){return Af(r)?r:Array.isArray(r)?xt.array(r,{name:t}):Ui(r)?xt.object(r,void 0,{name:t}):Sa(r)?xt.map(r,{name:t}):Cc(r)?xt.set(r,{name:t}):typeof r=="function"&&!_s(r)&&!aa(r)?Jw(r)?Xs(r):oa(t,r):r}function XL(r,e,t){if(r==null||un(r)||gn(r)||fn(r)||Fn(r))return r;if(Array.isArray(r))return xt.array(r,{name:t,deep:!1});if(Ui(r))return xt.object(r,void 0,{name:t,deep:!1});if(Sa(r))return xt.map(r,{name:t,deep:!1});if(Cc(r))return xt.set(r,{name:t,deep:!1})}function yf(r){return r}function ZL(r,e){return Ag(r,e)?e:r}var n0="override",eK=Qr({annotationType_:n0,make_:nK,extend_:rK,decorate_20223_:iK});function tK(r){return r.annotationType_===n0}function nK(r,e){return 0}function rK(r,e,t,n){Ke("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function iK(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Kc(r,e){return{annotationType_:r,options_:e,make_:sK,extend_:oK,decorate_20223_:aK}}function sK(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(_s(t.value))return 1;var s=r0(r,this,e,t,!1);return yi(n,e,s),2}function oK(r,e,t,n){var i=r0(r,this,e,t);return r.defineProperty_(e,i,n)}function aK(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return ps((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){Aa(this,n,s)});return}if(t=="method"){var u;return _s(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Ke("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function cK(r,e,t,n){e.annotationType_,n.value}function r0(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),cK(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:ps((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function i0(r,e){return{annotationType_:r,options_:e,make_:uK,extend_:lK,decorate_20223_:fK}}function uK(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Ni(r.target_,e)||!aa(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(aa(t.value))return 1;var s=s0(r,this,e,t,!1,!1);return yi(n,e,s),2}function lK(r,e,t,n){var i,s=s0(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function fK(r,e){var t,n=e.name,i=e.addInitializer;return aa(r)||(r=Xs(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function dK(r,e,t,n){e.annotationType_,n.value}function s0(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),dK(r,e,t,n);var a=n.value;if(aa(a)||(a=Xs(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function yg(r,e){return{annotationType_:r,options_:e,make_:hK,extend_:pK,decorate_20223_:gK}}function hK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function pK(r,e,t,n){return yK(r,this,e,t),r.defineComputedProperty_(e,hs({},this.options_,{get:t.get,set:t.set}),n)}function gK(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=uo(this)[ke],a=hs({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new sa(a))}),function(){return this[ke].getObservablePropValue_(n)}}function yK(r,e,t,n){e.annotationType_,n.get}function mf(r,e){return{annotationType_:r,options_:e,make_:mK,extend_:bK,decorate_20223_:vK}}function mK(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function bK(r,e,t,n){var i,s;return _K(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Ys,n)}function vK(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=uo(u)[ke],I=new cs(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Ys,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[ke].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[ke].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function _K(r,e,t,n){e.annotationType_}var wK="true",SK=o0();function o0(r){return{annotationType_:wK,options_:r,make_:AK,extend_:kK,decorate_20223_:IK}}function AK(r,e,t,n){var i,s;if(t.get)return Ur.make_(r,e,t,n);if(t.set){var a=ps(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(yi(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(Jw(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?Xs.bound:Xs;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?oa.bound:oa;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?xt.ref:xt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function kK(r,e,t,n){var i,s;if(t.get)return Ur.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:ps(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?xt.ref:xt;return u.extend_(r,e,t,n)}function IK(r,e){Ke("'"+this.annotationType_+"' cannot be used as a decorator")}var EK="observable",OK="observable.ref",PK="observable.shallow",TK="observable.struct",a0={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(a0);function Fu(r){return r||a0}var fp=mf(EK),RK=mf(OK,{enhancer:yf}),BK=mf(PK,{enhancer:XL}),xK=mf(TK,{enhancer:ZL}),c0=Qr(fp);function zu(r){return r.deep===!0?Ys:r.deep===!1?yf:MK(r.defaultDecorator)}function CK(r){var e;return r?(e=r.defaultDecorator)!=null?e:o0(r):void 0}function MK(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Ys}function u0(r,e,t){if(Mc(e))return fp.decorate_20223_(r,e);if(Gs(e)){Aa(r,e,fp);return}return Af(r)?r:Ui(r)?xt.object(r,e,t):Array.isArray(r)?xt.array(r,e):Sa(r)?xt.map(r,e):Cc(r)?xt.set(r,e):typeof r=="object"&&r!==null?r:xt.box(r,e)}Hw(u0,c0);var LK={box:function(e,t){var n=Fu(t);return new cs(e,zu(n),n.name,!0,n.equals)},array:function(e,t){var n=Fu(t);return(fe.useProxies===!1||n.proxy===!1?qN:KN)(e,zu(n),n.name)},map:function(e,t){var n=Fu(t);return new kf(e,zu(n),n.name)},set:function(e,t){var n=Fu(t);return new wg(e,zu(n),n.name)},object:function(e,t,n){return Ss(function(){return wf(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?uo({},n):xN({},n),e,t)})},ref:Qr(RK),shallow:Qr(BK),deep:c0,struct:Qr(xK)},xt=Hw(u0,LK),l0="computed",KK="computed.struct",dp=yg(l0),NK=yg(KK,{equals:Hs.structural}),Ur=function(e,t){if(Mc(t))return dp.decorate_20223_(e,t);if(Gs(t))return Aa(e,t,dp);if(Ui(e))return Qr(yg(l0,e));var n=Ui(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new sa(n)};Object.assign(Ur,dp);Ur.struct=Qr(NK);var sv,ov,Sl=0,DK=1,UK=(sv=(ov=wl(function(){},"name"))==null?void 0:ov.configurable)!=null?sv:!1,av={value:"action",configurable:!0,writable:!1,enumerable:!1};function ps(r,e,t,n){t===void 0&&(t=!1);function i(){return f0(r,t,e,n||this,arguments)}return i.isMobxAction=!0,UK&&(av.value=r,yi(i,"name",av)),i}function f0(r,e,t,n,i){var s=d0(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{h0(s)}}function d0(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;Jn();var f=fe.allowStateChanges;u&&(co(),f=bf(!0));var h=_f(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:DK++,parentActionId_:Sl};return Sl=d.actionId_,d}function h0(r){Sl!==r.actionId_&&Ke(30),Sl=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),vf(r.prevAllowStateChanges_),qo(r.prevAllowStateReads_),Xn(),r.runAsAction_&&Di(r.prevDerivation_),fe.suppressReactionErrors=!1}function ia(r,e){var t=bf(r);try{return e()}finally{vf(t)}}function bf(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function vf(r){fe.allowStateChanges=r}var p0;p0=Symbol.toPrimitive;var cs=function(r){t0(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Hs.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Nr(this)){var s=Dr(this,{object:this,type:mi,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Jr(this)&&Xr(this,{type:mi,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Uc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:mi,newValue:this.value_,oldValue:void 0}),Vc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return e0(this.get())},t[p0]=function(){return this.valueOf()},e}(Lc),mg=vs("ObservableValue",cs),g0;g0=Symbol.toPrimitive;var sa=function(){function r(t){this.dependenciesState_=it.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new kl(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Al.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ke(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ps("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Hs.structural:Hs.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){HK(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ke(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)hp(this)&&(this.warnAboutUntrackedRead_(),Jn(),this.value_=this.computeValue_(!1),Xn());else if(S0(this),hp(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&GK(this),fe.trackingContext=n}var i=this.value_;if(sl(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ke(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ke(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===it.NOT_TRACKING_,s=this.computeValue_(!0),a=i||sl(n)||sl(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=bf(!1),s;if(n)s=y0(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new kl(a)}return vf(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(pp(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Js(function(){var f=s.get();if(!a||i){var h=co();n({observableKind:"computed",debugObjectName:s.name_,type:mi,object:s,newValue:f,oldValue:u}),Di(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return e0(this.get())},e[g0]=function(){return this.valueOf()},r}(),Qs=vs("ComputedValue",sa),it;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(it||(it={}));var Al;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Al||(Al={}));var kl=function(e){this.cause=void 0,this.cause=e};function sl(r){return r instanceof kl}function hp(r){switch(r.dependenciesState_){case it.UP_TO_DATE_:return!1;case it.NOT_TRACKING_:case it.STALE_:return!0;case it.POSSIBLY_STALE_:{for(var e=_f(!0),t=co(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(Qs(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Di(t),qo(e),!0}if(r.dependenciesState_===it.STALE_)return Di(t),qo(e),!0}}return m0(r),Di(t),qo(e),!1}}}function Nc(){return fe.trackingDerivation!==null}function y0(r,e,t){var n=_f(!0);m0(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new kl(a)}return fe.inBatch--,fe.trackingDerivation=i,VK(r),qo(n),s}function VK(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=it.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&_0(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,qK(h,r))}n!==it.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function pp(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)_0(e[t],r);r.dependenciesState_=it.NOT_TRACKING_}function bg(r){var e=co();try{return r()}finally{Di(e)}}function co(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function Di(r){fe.trackingDerivation=r}function _f(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function qo(r){fe.allowStateReads=r}function m0(r){if(r.dependenciesState_!==it.UP_TO_DATE_){r.dependenciesState_=it.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=it.UP_TO_DATE_}}var FK=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],sc=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},ol=!0,b0=!1,fe=function(){var r=dg();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(ol=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new sc().version&&(ol=!1),ol?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new sc):(setTimeout(function(){b0||Ke(35)},1),new sc)}();function zK(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Ke(36),b0=!0,ol){var r=dg();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new sc}}function v0(){return fe}function WK(){var r=new sc;for(var e in r)FK.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function $K(r){return r.observers_&&r.observers_.size>0}function jK(r){return r.observers_}function qK(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function _0(r,e){r.observers_.delete(e),r.observers_.size===0&&w0(r)}function w0(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function Jn(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function Xn(){if(--fe.inBatch===0){k0();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof sa&&t.suspend_())}fe.pendingUnobservations=[]}}function S0(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&w0(r),!1)}function A0(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=it.STALE_}))}function GK(r){r.lowestObserverState_!==it.STALE_&&(r.lowestObserverState_=it.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.POSSIBLY_STALE_?e.dependenciesState_=it.STALE_:e.dependenciesState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.UP_TO_DATE_)}))}function HK(r){r.lowestObserverState_===it.UP_TO_DATE_&&(r.lowestObserverState_=it.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===it.UP_TO_DATE_&&(e.dependenciesState_=it.POSSIBLY_STALE_,e.onBecomeStale_())}))}var mc=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=it.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Al.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),k0())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Jn(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,hp(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,Xn()}},e.track=function(n){if(!this.isDisposed_){Jn(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=y0(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&pp(this),sl(s)&&this.reportExceptionInDerivation_(s.cause),Xn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Jn(),pp(this),Xn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[ke]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function YK(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var QK=100,gp=function(e){return e()};function k0(){fe.inBatch>0||fe.isRunningReactions||gp(JK)}function JK(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===QK&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var Il=vs("Reaction",mc);function XK(r){var e=gp;gp=function(n){return r(function(){return e(n)})}}function oc(){return!1}function I0(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var E0="action",ZK="action.bound",O0="autoAction",eN="autoAction.bound",P0="<unnamed action>",yp=Kc(E0),tN=Kc(ZK,{bound:!0}),mp=Kc(O0,{autoAction:!0}),nN=Kc(eN,{autoAction:!0,bound:!0});function T0(r){var e=function(n,i){if(_r(n))return ps(n.name||P0,n,r);if(_r(i))return ps(n,i,r);if(Mc(i))return(r?mp:yp).decorate_20223_(n,i);if(Gs(i))return Aa(n,i,r?mp:yp);if(Gs(n))return Qr(Kc(r?O0:E0,{name:n,autoAction:r}))};return e}var Ft=T0(!1);Object.assign(Ft,yp);var oa=T0(!0);Object.assign(oa,mp);Ft.bound=Qr(tN);oa.bound=Qr(nN);function bc(r){return f0(r.name||P0,!1,r,this,void 0)}function _s(r){return _r(r)&&r.isMobxAction===!0}function Js(r,e){var t,n,i,s,a;e===void 0&&(e=hg);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new mc(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=R0(e),m=!1;h=new mc(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var rN=function(e){return e()};function R0(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:rN}function B0(r,e,t){var n,i,s,a;t===void 0&&(t=hg);var u=(n=t.name)!=null?n:"Reaction",f=Ft(u,t.onError?iN(t.onError,e):e),h=!t.scheduler&&!t.delay,d=R0(t),m=!0,I=!1,O,C,A=t.compareStructural?Hs.structural:t.equals||Hs.default,R=new mc(u,function(){m||h?M():I||(I=!0,d(M))},t.onError,t.requiresObservable);function M(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=ia(!1,function(){return r(R)});Y=m||!A(O,ae),C=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,C,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function iN(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var sN="onBO",oN="onBUO";function x0(r,e,t){return C0(sN,r,e,t)}function Dc(r,e,t){return C0(oN,r,e,t)}function C0(r,e,t,n){var i=typeof n=="function"?bi(e,t):bi(e),s=_r(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var aN="never",Wu="always",cN="observed";function uN(r){r.isolateGlobalState===!0&&zK();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===Wu?!0:e===aN?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===Wu?Wu:t===cN;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===Wu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&XK(r.reactionScheduler)}function wf(r,e,t,n){var i=WL(e);return Ss(function(){var s=uo(r,n)[ke];ra(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function lN(r,e){return M0(bi(r,e))}function M0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=dN(r.observing_).map(M0)),e}function fN(r,e){return L0(bi(r,e))}function L0(r){var e={name:r.name_};return $K(r)&&(e.observers=Array.from(jK(r)).map(L0)),e}function dN(r){return Array.from(new Set(r))}var hN=0;function Sf(){this.message="FLOW_CANCELLED"}Sf.prototype=Object.create(Error.prototype);function pN(r){return r instanceof Sf}var Oh=i0("flow"),gN=i0("flow.bound",{bound:!0}),Xs=Object.assign(function(e,t){if(Mc(t))return Oh.decorate_20223_(e,t);if(Gs(t))return Aa(e,t,Oh);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++hN,d=Ft(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(C,A){var R=0;m=A;function M(oe){I=void 0;var de;try{de=Ft(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return A(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=Ft(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return A(E)}ae(de)}function ae(oe){if(_r(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?C(oe.value):(I=Promise.resolve(oe.value),I.then(M,Y))}M(void 0)});return O.cancel=Ft(i+" - runid: "+h+" - cancel",function(){try{I&&cv(I);var C=d.return(void 0),A=Promise.resolve(C.value);A.then(No,No),cv(A),m(new Sf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},Oh);Xs.bound=Qr(gN);function cv(r){_r(r.cancel)&&r.cancel()}function yN(r){return r}function aa(r){return(r==null?void 0:r.isMobXFlow)===!0}function mN(r,e,t){var n;return fn(r)||gn(r)||mg(r)?n=vi(r):un(r)&&(n=vi(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function bN(r,e,t){return _r(t)?_N(r,e,t):vN(r,e)}function vN(r,e){return vi(r).intercept_(e)}function _N(r,e,t){return vi(r,e).intercept_(t)}function K0(r,e){if(e===void 0)return Qs(r);if(un(r)===!1||!r[ke].values_.has(e))return!1;var t=bi(r,e);return Qs(t)}function N0(r){return K0(r)}function al(r,e){return K0(r,e)}function D0(r,e){return r?e!==void 0?un(r)?r[ke].values_.has(e):!1:un(r)||!!r[ke]||gg(r)||Il(r)||Qs(r):!1}function Af(r){return D0(r)}function wN(r,e){return D0(r,e)}function ca(r){if(un(r))return r[ke].keys_();if(fn(r)||Fn(r))return Array.from(r.keys());if(gn(r))return r.map(function(e,t){return t});Ke(5)}function U0(r){if(un(r))return ca(r).map(function(e){return r[e]});if(fn(r))return ca(r).map(function(e){return r.get(e)});if(Fn(r))return Array.from(r.values());if(gn(r))return r.slice();Ke(6)}function V0(r){if(un(r))return ca(r).map(function(e){return[e,r[e]]});if(fn(r))return ca(r).map(function(e){return[e,r.get(e)]});if(Fn(r))return Array.from(r.entries());if(gn(r))return r.map(function(e,t){return[t,e]});Ke(7)}function F0(r,e,t){if(arguments.length===2&&!Fn(r)){Jn();var n=e;try{for(var i in n)F0(r,i,n[i])}finally{Xn()}return}un(r)?r[ke].set_(e,t):fn(r)?r.set(e,t):Fn(r)?r.add(e):gn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ke("Invalid index: '"+e+"'"),Jn(),e>=r.length&&(r.length=e+1),r[e]=t,Xn()):Ke(8)}function SN(r,e){un(r)?r[ke].delete_(e):fn(r)||Fn(r)?r.delete(e):gn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ke(9)}function z0(r,e){if(un(r))return r[ke].has_(e);if(fn(r))return r.has(e);if(Fn(r))return r.has(e);if(gn(r))return e>=0&&e<r.length;Ke(10)}function AN(r,e){if(!!z0(r,e)){if(un(r))return r[ke].get_(e);if(fn(r))return r.get(e);if(gn(r))return r[e];Ke(11)}}function kN(r,e,t){if(un(r))return r[ke].defineProperty_(e,t);Ke(39)}function W0(r){if(un(r))return r[ke].ownKeys_();Ke(38)}function ua(r,e,t,n){return _r(t)?EN(r,e,t,n):IN(r,e,t)}function IN(r,e,t){return vi(r).observe_(e,t)}function EN(r,e,t,n){return vi(r,e).observe_(t,n)}function $u(r,e,t){return r.set(e,t),t}function Bo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!Af(r))return r;if(mg(r)||Qs(r))return Bo(r.get(),e);if(e.has(r))return e.get(r);if(gn(r)){var t=$u(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=Bo(a,e)}),t}if(Fn(r)){var n=$u(e,r,new Set);return r.forEach(function(a){n.add(Bo(a,e))}),n}if(fn(r)){var i=$u(e,r,new Map);return r.forEach(function(a,u){i.set(u,Bo(a,e))}),i}else{var s=$u(e,r,{});return W0(r).forEach(function(a){Bc.propertyIsEnumerable.call(r,a)&&(s[a]=Bo(r[a],e))}),s}}function ON(r,e){return Bo(r,new Map)}function PN(){}function Kr(r,e){e===void 0&&(e=void 0),Jn();try{return r.apply(e)}finally{Xn()}}function TN(r,e,t){return arguments.length===1||e&&typeof e=="object"?RN(r,e):$0(r,e,t||{})}function $0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[ke].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=ps("When-effect",e),a=Js(function(u){var f=ia(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function RN(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=$0(r,a,hs({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function Oo(r){return r[ke]}var BN={has:function(e,t){return Oo(e).has_(t)},get:function(e,t){return Oo(e).get_(t)},set:function(e,t,n){var i;return Gs(t)?(i=Oo(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return Gs(t)?(n=Oo(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=Oo(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return Oo(e).ownKeys_()},preventExtensions:function(e){Ke(13)}};function xN(r,e){var t,n;return Yw(),r=uo(r,e),(n=(t=r[ke]).proxy_)!=null?n:t.proxy_=new Proxy(r,BN)}function Nr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Uc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),Qw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Dr(r,e){var t=co();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ke(14),!!e);i++);return e}finally{Di(t)}}function Jr(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Vc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),Qw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Xr(r,e){var t=co(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Di(t)}}function vg(r,e,t){return Ss(function(){var n,i=uo(r,t)[ke];(n=e)!=null||(e=GL(r)),ra(e).forEach(function(s){return i.make_(s,e[s])})}),r}var Ph=Symbol("mobx-keys");function CN(r,e,t){return Ui(r)?wf(r,r,e,t):(Ss(function(){var n=uo(r,t)[ke];if(!r[Ph]){var i=Object.getPrototypeOf(r),s=new Set([].concat(ra(r),ra(i)));s.delete("constructor"),s.delete(ke),xc(i,Ph,s)}r[Ph].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var uv="splice",mi="update",MN=1e4,LN={get:function(e,t){var n=e[ke];return t===ke?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Ni(El,t)?El[t]:e[t]},set:function(e,t,n){var i=e[ke];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ke(15)}},_g=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new Lc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return Uc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Vc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ke("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ke(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&Z0(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=up),Nr(this)){var f=Dr(this,{object:this.proxy_,type:uv,index:n,removedCount:i,added:s});if(!f)return up;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<MN){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&oc(),u=Jr(this),f=u||a?{observableKind:"array",object:this.proxy_,type:mi,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&Xr(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&oc(),u=Jr(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:uv,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&Xr(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ke(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Nr(this)){var u=Dr(this,{type:mi,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function KN(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),Yw(),Ss(function(){var i=new _g(t,e,n,!1);Xw(i.values_,ke,i);var s=new Proxy(i.values_,LN);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var El={clear:function(){return this.splice(0)},replace:function(e){var t=this[ke];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[ke];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[ke].spliceWithArray_(e,t,n)},push:function(){for(var e=this[ke],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[ke].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ke],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Ke(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Ke(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[ke],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};ln("concat",Fi);ln("flat",Fi);ln("includes",Fi);ln("indexOf",Fi);ln("join",Fi);ln("lastIndexOf",Fi);ln("slice",Fi);ln("toString",Fi);ln("toLocaleString",Fi);ln("every",ws);ln("filter",ws);ln("find",ws);ln("findIndex",ws);ln("flatMap",ws);ln("forEach",ws);ln("map",ws);ln("some",ws);ln("reduce",j0);ln("reduceRight",j0);function ln(r,e){typeof Array.prototype[r]=="function"&&(El[r]=e(r))}function Fi(r){return function(){var e=this[ke];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function ws(r){return function(e,t){var n=this,i=this[ke];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function j0(r){return function(){var e=this,t=this[ke];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var NN=vs("ObservableArrayAdministration",_g);function gn(r){return pf(r)&&NN(r[ke])}var q0,G0,DN={},ss="add",Ol="delete";q0=Symbol.iterator;G0=Symbol.toStringTag;var kf=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ys),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ke]=DN,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,_r(Map)||Ke(18),Ss(function(){s.keysAtom_=gf("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new cs(this.has_(n),yf,"ObservableMap.key?",!1);this.hasMap_.set(n,a),Dc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Nr(this)){var a=Dr(this,{type:s?mi:ss,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Nr(this)){var s=Dr(this,{type:Ol,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=oc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:Ol,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Kr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&Xr(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=oc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:mi,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Xr(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Kr(function(){var h,d=new cs(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=oc(),u=Jr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:ss,object:this,name:n,newValue:i}:null;u&&Xr(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return vc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return vc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[q0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=Do(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return fn(n)&&(n=new Map(n)),Kr(function(){Ui(n)?zL(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):Sa(n)?(n.constructor!==Map&&Ke(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ke(20,n)}),this},e.clear=function(){var n=this;Kr(function(){bg(function(){for(var i=Do(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Kr(function(){for(var s=UN(n),a=new Map,u=!1,f=Do(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=Do(s.entries()),C;!(C=O()).done;){var A=C.value,R=A[0],M=A[1],Y=i.data_.has(R);if(i.set(R,M),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return Uc(this,n)},pg(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:G0,get:function(){return"Map"}}]),r}(),fn=vs("ObservableMap",kf);function UN(r){if(Sa(r)||fn(r))return r;if(Array.isArray(r))return new Map(r);if(Ui(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ke(21,r)}var H0,Y0,VN={};H0=Symbol.iterator;Y0=Symbol.toStringTag;var wg=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ys),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[ke]=VN,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,_r(Set)||Ke(22),this.enhancer_=function(a,u){return n(a,u,i)},Ss(function(){s.atom_=gf(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Kr(function(){bg(function(){for(var i=Do(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=Do(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Nr(this)){var s=Dr(this,{type:ss,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Kr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=Jr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:ss,object:this,newValue:n}:null;u&&Xr(this,f)}return this},e.delete=function(n){var i=this;if(Nr(this)){var s=Dr(this,{type:Ol,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=Jr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:Ol,object:this,oldValue:n}:null;return Kr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&Xr(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return vc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return vc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Fn(n)&&(n=new Set(n)),Kr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):Cc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ke("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return Uc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[H0]=function(){return this.values()},pg(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Y0,get:function(){return"Set"}}]),r}(),Fn=vs("ObservableSet",wg),lv=Object.create(null),fv="remove",Q0=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=SK),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new Lc("ObservableObject.keys"),this.isPlainObject_=Ui(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof sa)return s.set(i),!0;if(Nr(this)){var a=Dr(this,{type:mi,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=Jr(this),f=!1,h=u||f?{type:mi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Xr(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Ni(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Ni(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new cs(n in this.target_,yf,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[gi])!=null&&s[n])return;Ke(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==Bc;){var u=wl(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}hv(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&hv(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Jn();var a=this.delete_(n);if(!a)return a;if(Nr(this)){var u=Dr(this,{object:this.proxy_||this.target_,name:n,type:ss,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=hs({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else yi(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Xn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{Jn();var u=this.delete_(n);if(!u)return u;if(Nr(this)){var f=Dr(this,{object:this.proxy_||this.target_,name:n,type:ss,newValue:i});if(!f)return null;i=f.newValue}var h=dv(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else yi(this.target_,n,d);var m=new cs(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{Xn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Jn();var a=this.delete_(n);if(!a)return a;if(Nr(this)){var u=Dr(this,{object:this.proxy_||this.target_,name:n,type:ss,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=dv(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else yi(this.target_,n,h);this.values_.set(n,new sa(i)),this.notifyPropertyAddition_(n,void 0)}finally{Xn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Ni(this.target_,n))return!0;if(Nr(this)){var s=Dr(this,{object:this.proxy_||this.target_,name:n,type:fv});if(!s)return null}try{var a,u;Jn();var f=Jr(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=wl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof cs&&(m=d.value_),A0(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:fv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&Xr(this,O)}}finally{Xn()}return!0},e.observe_=function(n,i){return Vc(this,n)},e.intercept_=function(n){return Uc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=Jr(this),f=!1;if(u||f){var h=u||f?{type:ss,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&Xr(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),ra(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function uo(r,e){var t;if(Ni(r,ke))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new Q0(r,new Map,String(n),CK(e));return xc(r,ke,i),r}var FN=vs("ObservableObjectAdministration",Q0);function dv(r){return lv[r]||(lv[r]={get:function(){return this[ke].getObservablePropValue_(r)},set:function(t){return this[ke].setObservablePropValue_(r,t)}})}function un(r){return pf(r)?FN(r[ke]):!1}function hv(r,e,t){var n;(n=r.target_[gi])==null||delete n[t]}var zN=X0(0),WN=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),Th=0,J0=function(){};function $N(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}$N(J0,Array.prototype);var Sg=function(r,e,t){t0(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,Ss(function(){var d=new _g(u,a,f,!0);d.proxy_=Eh(h),Xw(Eh(h),ke,d),s&&s.length&&h.spliceWithArray(0,0,s),WN&&Object.defineProperty(Eh(h),"0",zN)}),h}var i=n.prototype;return i.concat=function(){this[ke].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return gn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return vc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},pg(n,[{key:"length",get:function(){return this[ke].getArrayLength_()},set:function(a){this[ke].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(J0,Symbol.toStringTag,Symbol.iterator);Object.entries(El).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&xc(Sg.prototype,e,t)});function X0(r){return{enumerable:!1,configurable:!0,get:function(){return this[ke].get_(r)},set:function(t){this[ke].set_(r,t)}}}function jN(r){yi(Sg.prototype,""+r,X0(r))}function Z0(r){if(r>Th){for(var e=Th;e<r+100;e++)jN(e);Th=r}}Z0(1e3);function qN(r,e,t){return new Sg(r,e,t)}function bi(r,e){if(typeof r=="object"&&r!==null){if(gn(r))return e!==void 0&&Ke(23),r[ke].atom_;if(Fn(r))return r.atom_;if(fn(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ke(25,e,Pl(r)),t}if(un(r)){if(!e)return Ke(26);var n=r[ke].values_.get(e);return n||Ke(27,e,Pl(r)),n}if(gg(r)||Qs(r)||Il(r))return r}else if(_r(r)&&Il(r[ke]))return r[ke];Ke(28)}function vi(r,e){if(r||Ke(29),e!==void 0)return vi(bi(r,e));if(gg(r)||Qs(r)||Il(r)||fn(r)||Fn(r))return r;if(r[ke])return r[ke];Ke(24,r)}function Pl(r,e){var t;if(e!==void 0)t=bi(r,e);else{if(_s(r))return r.name;un(r)||fn(r)||Fn(r)?t=vi(r):t=bi(r)}return t.name_}function Ss(r){var e=co(),t=bf(!0);Jn();try{return r()}finally{Xn(),vf(t),Di(e)}}var pv=Bc.toString;function Ag(r,e,t){return t===void 0&&(t=-1),bp(r,e,t)}function bp(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=pv.call(r);if(a!==pv.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=gv(r),e=gv(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(_r(f)&&f instanceof f&&_r(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!bp(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Ni(e,I)&&bp(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function gv(r){return gn(r)?r.slice():Sa(r)||fn(r)||Cc(r)||Fn(r)?Array.from(r.entries()):r}function vc(r){return r[Symbol.iterator]=GN,r}function GN(){return this}["Symbol","Map","Set"].forEach(function(r){var e=dg();typeof e[r]>"u"&&Ke("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:I0,extras:{getDebugName:Pl},$mobx:ke});var HN=Object.freeze(Object.defineProperty({__proto__:null,$mobx:ke,FlowCancellationError:Sf,ObservableMap:kf,ObservableSet:wg,Reaction:mc,_allowStateChanges:ia,_allowStateChangesInsideComputed:bc,_allowStateReadsEnd:qo,_allowStateReadsStart:_f,_autoAction:oa,_endAction:h0,_getAdministration:vi,_getGlobalState:v0,_interceptReads:mN,_isComputingDerivation:Nc,_resetGlobalState:WK,_startAction:d0,action:Ft,autorun:Js,comparer:Hs,computed:Ur,configure:uN,createAtom:gf,defineProperty:kN,entries:V0,extendObservable:wf,flow:Xs,flowResult:yN,get:AN,getAtom:bi,getDebugName:Pl,getDependencyTree:lN,getObserverTree:fN,has:z0,intercept:bN,isAction:_s,isBoxedObservable:mg,isComputed:N0,isComputedProp:al,isFlow:aa,isFlowCancellationError:pN,isObservable:Af,isObservableArray:gn,isObservableMap:fn,isObservableObject:un,isObservableProp:wN,isObservableSet:Fn,keys:ca,makeAutoObservable:CN,makeObservable:vg,observable:xt,observe:ua,onBecomeObserved:x0,onBecomeUnobserved:Dc,onReactionError:YK,override:eK,ownKeys:W0,reaction:B0,remove:SN,runInAction:bc,set:F0,spy:I0,toJS:ON,trace:PN,transaction:Kr,untracked:bg,values:U0,when:TN},Symbol.toStringTag,{value:"Module"})),eS=Sc(HN);(function(r){var e=F&&F.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=mt,n=e(Gw.exports),i=eS;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(hf);(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(hf,r)})(df);var YN=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ff,"__esModule",{value:!0});ff.createExchangeInstruction=void 0;const ju=mt,qu=Vi,QN=rr,yv=ms,JN=ms,Rh=Fr,Bh=df;function XN({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:C,extraAccounts:A=[]}){return YN(this,void 0,void 0,function*(){const R=(0,QN.getMarketplaceProgram)({connection:r,programId:s}),M={signers:[],instructions:[]},Y=u===Bh.OrderSide.Sell?new qu.PublicKey(f):new qu.PublicKey(h),ae=u===Bh.OrderSide.Sell?new qu.PublicKey(h):new qu.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,Rh.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof ju.web3.Keypair?(oe=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,Rh.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof ju.web3.Keypair?(de=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[W]=yield(0,yv.getOrderVault)(d,Y,s),[Q]=yield(0,JN.getOpenOrdersCounter)(d,Y,s);N=yield(0,Rh.getTokenAccount)(r,n,Y),"createInstruction"in N?(M.instructions.push(...N.createInstruction),N.tokenAccount instanceof ju.web3.Keypair?(E=N.tokenAccount.publicKey,M.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===Bh.OrderSide.Buy?n:d,[j]=yield(0,yv.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new ju.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:W,orderAccount:e,openOrdersCounter:Q,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:C,feeReduction:j}).remainingAccounts(A).instruction();return M.instructions.push(te),M})}ff.createExchangeInstruction=XN;var If={},ZN=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(If,"__esModule",{value:!0});If.createInitializeMarketInstruction=void 0;const eD=rr;function tD({connection:r,updateAuthorityAccount:e,programId:t}){return ZN(this,void 0,void 0,function*(){const i=[yield(0,eD.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}If.createInitializeMarketInstruction=tD;var Ef={},nD=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.createRegisterCurrencyInstruction=void 0;const rD=mt,iD=rr;function sD({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return nD(this,void 0,void 0,function*(){const u=[yield(0,iD.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new rD.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}Ef.createRegisterCurrencyInstruction=sD;var us={},kg=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(us,"__esModule",{value:!0});us.updateRoyaltyTier=us.deleteRoyaltyTier=us.addRoyaltyTier=void 0;const _c=mt,Ig=rr;function oD({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return kg(this,void 0,void 0,function*(){const a=(0,Ig.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new _c.BN(n),new _c.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}us.addRoyaltyTier=oD;function aD({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return kg(this,void 0,void 0,function*(){const s=(0,Ig.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new _c.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}us.deleteRoyaltyTier=aD;function cD({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return kg(this,void 0,void 0,function*(){const a=(0,Ig.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new _c.BN(n),new _c.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}us.updateRoyaltyTier=cD;var la={},tS=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(la,"__esModule",{value:!0});la.createUpdateRegisteredCurrencyVaultInstruction=la.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const uD=mt,nS=rr;function lD({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return tS(this,void 0,void 0,function*(){return[yield(0,nS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new uD.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}la.createUpdateRegisteredCurrencyRoyaltyInstruction=lD;function fD({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return tS(this,void 0,void 0,function*(){return[yield(0,nS.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}la.createUpdateRegisteredCurrencyVaultInstruction=fD;var fa={},rS=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(fa,"__esModule",{value:!0});fa.createRemoveFeeExemptionInstruction=fa.createAddFeeExemptionInstruction=void 0;const dD=mt,iS=rr,Tl=ms;function hD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return rS(this,void 0,void 0,function*(){const s=(0,iS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,Tl.getFeeExemptAccount)(n,i),[h]=yield(0,Tl.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new dD.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}fa.createAddFeeExemptionInstruction=hD;function pD({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return rS(this,void 0,void 0,function*(){const s=(0,iS.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,Tl.getFeeExemptAccount)(n,i),[f]=yield(0,Tl.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}fa.createRemoveFeeExemptionInstruction=pD;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Dw,r),t(af,r),t(na,r),t(lf,r),t(ff,r),t(If,r),t(Ef,r),t(us,r),t(la,r),t(fa,r)})(ug);var ka={},sS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(sS);var oS={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(oS);(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Tc,r),t(sS,r),t(oS,r)})(ka);var aS={},Of={},cS=function(){},gD=function(r){return r};function uS(r){throw new Error("[mobx-utils] "+r)}function gs(r,e){e===void 0&&(e="Illegal state"),r||uS(e)}function lS(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var fS=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(fS(Object.getPrototypeOf(r))||[])},yD=function(r){var e=fS(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},vp=function(r){return yD(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},Rl="pending",wc="fulfilled",Pf="rejected";function mD(r){switch(this.state){case Rl:return r.pending&&r.pending(this.value);case Pf:return r.rejected&&r.rejected(this.value);case wc:return r.fulfilled?r.fulfilled(this.value):this.value}}function _p(r,e){if(gs(arguments.length<=2,"fromPromise expects up to two arguments"),gs(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Ft("observableFromPromise-resolve",function(i){t.value=i,t.state=wc}),Ft("observableFromPromise-reject",function(i){t.value=i,t.state=Pf})),t.isPromiseBasedObservable=!0,t.case=mD;var n=e&&(e.state===wc||e.state===Rl)?e.value:void 0;return wf(t,{value:n,state:Rl},{},{deep:!1}),t}(function(r){r.reject=Ft("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=Pf,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=wc,n.value=t,n}r.resolve=Ft("fromPromise.resolve",e)})(_p||(_p={}));function bD(r){return r&&r.isPromiseBasedObservable===!0}var mv=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function vD(r,e,t){if(bv(r,e),bv(r,t),e!==t){var n=r.slice(),i;return e<t?i=mv(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=mv(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function bv(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function _D(r,e){e===void 0&&(e=void 0);var t=!1,n=xt.box(e,{deep:!1}),i=xt.box(!1),s=function(){return t||(t=!0,ia(!0,function(){i.set(!0)}),r(function(u){ia(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Ft("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function Eg(r,e,t){e===void 0&&(e=cS),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=gf("ResourceBasedObservable",function(){gs(!n&&!i),n=!0,r(function(f){ia(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){gs(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var Gu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function wD(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function SD(r,e){var t;e===void 0&&(e=!1);var n=Ur(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:ua(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:ua(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[wD()]=function(){return this},t}var AD=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),vg(this),bc(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),Gu([xt.ref],r.prototype,"current",void 0),Gu([Ft.bound],r.prototype,"next",null),Gu([Ft.bound],r.prototype,"complete",null),Gu([Ft.bound],r.prototype,"error",null),r}();function kD(r,e){return e===void 0&&(e=void 0),new AD(r,e)}var Bl=function(){return Bl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Bl.apply(this,arguments)},ja=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ID=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],dS=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),vg(this),gs(un(e),"createViewModel expects an observable object");var n=vp(this);vp(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===ke||i==="__mobxDidRunLazyInitializers")){if(gs(ID.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),al(e,i)){var a=vi(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Ur(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,Bl(Bl({},d),{configurable:!0,get:function(){return al(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Ft(function(m){al(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ca(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];gn(i)?i.replace(n):fn(i)?(i.clear(),i.merge(n)):N0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),ja([Ur],r.prototype,"isDirty",null),ja([Ur],r.prototype,"changedValues",null),ja([Ft.bound],r.prototype,"submit",null),ja([Ft.bound],r.prototype,"reset",null),ja([Ft.bound],r.prototype,"resetProperty",null),r}();function ED(r){return new dS(r)}function OD(r,e){var t=bi(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return ua(t,function(){})}function PD(r,e,t){if(t===void 0&&(t=0),!gn(r))throw new Error("Expected observable array as first argument");_s(e)||(e=Ft("queueProcessor",e));var n=function(){var i=r.slice(0);bc(function(){return r.splice(0)}),i.forEach(e)};return t>0?Js(n,{delay:t}):Js(n)}function TD(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!gn(r))throw new Error("Expected observable array as first argument");_s(e)||(e=Ft("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);bc(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Js(i,{delay:t}):Js(i)}var Vs={};function RD(){for(var r=0,e=Object.getOwnPropertyNames(Vs);r<e.length;r++){var t=e[r];Vs[t].dispose(),delete Vs[t]}}function BD(r){return r===void 0&&(r=1e3),Nc()?(Vs[r]||(typeof r=="number"?Vs[r]=xD(r):Vs[r]=CD()),Vs[r].current()):Date.now()}function xD(r){var e;return Eg(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function CD(){var r=Eg(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function MD(r){return Nc()||console.warn("'expr' should only be used inside other reactive functions."),Ur(r).get()}var xl=function(){return xl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},xl.apply(this,arguments)},LD=0;function KD(r,e){gs(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=Ur(function(){return d=r(h)},xl(xl({},m),{name:I}));if(!i)var C=Dc(O,function(){delete t[f],C(),n&&n(d,h)});return O}var u=!1;return function(f){var h=ND(f),d=t[h];if(d)return d.get();if(!i&&!Nc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function ND(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++LD,lS(r,"$transformId",t)),t}function xh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function Ch(r){return un(r)||gn(r)||fn(r)}function DD(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,xh(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(Ch(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(Ch(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+xh(f)+"/"+h+"',")+(" but it already exists at '"+xh(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:ua(u,n)};t.set(u,m),V0(u).forEach(function(I){var O=I[0],C=I[1];return s(C,m,O)})}}}function a(u){if(Ch(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),U0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var UD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),VD=function(r){UD(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=ua(d._base,function(I){if(I.type==="splice")Kr(function(){for(var O=0,C=I.removed;O<C.length;O++){var A=C[O];d._removeItem(A)}for(var R=0,M=I.added;R<M.length;R++){var Y=M[R];d._addItem(Y)}});else if(I.type==="update")Kr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=xt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:B0(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(kf),FD=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),zD=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new FD(this.store,e)}}),r}(),Cl=function(){return Cl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cl.apply(this,arguments)},WD=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function $D(r,e){if(e===void 0&&(e=!1),_s(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new zD;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!Nc())return!t&&v0().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=Ur(function(){return d=r.apply(a,u)},Cl(Cl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||Dc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,WD([d],u)),d=void 0}),m.get()}}var jD=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:wc,IDENTITY:gD,NOOP:cS,ObservableGroupMap:VD,PENDING:Rl,REJECTED:Pf,ViewModel:dS,addHiddenProp:lS,chunkProcessor:TD,computedFn:$D,createTransformer:KD,createViewModel:ED,deepObserve:DD,expr:MD,fail:uS,get fromPromise(){return _p},fromResource:Eg,fromStream:kD,getAllMethodsAndProperties:vp,invariant:gs,isPromiseBasedObservable:bD,keepAlive:OD,lazyObservable:_D,moveItem:vD,now:BD,queueProcessor:PD,resetNowInternalState:RD,toStream:SD},Symbol.toStringTag,{value:"Module"})),qD=Sc(jD),Ml={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,C=1,A=2,R=1,M=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,W=256,Q=512,K=30,j="...",te=800,T=16,z=1,X=2,xe=3,ye=1/0,Ee=9007199254740991,qt=17976931348623157e292,Gt=0/0,we=4294967295,$e=we-1,Zt=we>>>1,dn=[["ary",N],["bind",R],["bindKey",M],["curry",ae],["curryRight",oe],["flip",Q],["partial",de],["partialRight",E],["rearg",W]],Et="[object Arguments]",ht="[object Array]",Sr="[object AsyncFunction]",zt="[object Boolean]",An="[object Date]",ni="[object DOMException]",Ar="[object Error]",ir="[object Function]",Si="[object GeneratorFunction]",yn="[object Map]",ks="[object Number]",qf="[object Null]",sr="[object Object]",$c="[object Promise]",Gf="[object Proxy]",zi="[object RegExp]",kn="[object Set]",In="[object String]",Wi="[object Symbol]",Hf="[object Undefined]",zn="[object WeakMap]",Yf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",De="[object Uint8Array]",wt="[object Uint8ClampedArray]",pt="[object Uint16Array]",St="[object Uint32Array]",ft=/\b__p \+= '';/g,kS=/\b(__p \+=) '' \+/g,IS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tg=/&(?:amp|lt|gt|quot|#39);/g,Rg=/[&<>"']/g,ES=RegExp(Tg.source),OS=RegExp(Rg.source),PS=/<%-([\s\S]+?)%>/g,TS=/<%([\s\S]+?)%>/g,Bg=/<%=([\s\S]+?)%>/g,RS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,BS=/^\w*$/,xS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qf=/[\\^$.*+?()[\]{}|]/g,CS=RegExp(Qf.source),Jf=/^\s+/,MS=/\s/,LS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,KS=/\{\n\/\* \[wrapped with (.+)\] \*/,NS=/,? & /,DS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,US=/[()=,{}\[\]\/\s]/,VS=/\\(\\)?/g,FS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xg=/\w*$/,zS=/^[-+]0x[0-9a-f]+$/i,WS=/^0b[01]+$/i,$S=/^\[object .+?Constructor\]$/,jS=/^0o[0-7]+$/i,qS=/^(?:0|[1-9]\d*)$/,GS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jc=/($^)/,HS=/['\n\r\u2028\u2029\\]/g,qc="\\ud800-\\udfff",YS="\\u0300-\\u036f",QS="\\ufe20-\\ufe2f",JS="\\u20d0-\\u20ff",Cg=YS+QS+JS,Mg="\\u2700-\\u27bf",Lg="a-z\\xdf-\\xf6\\xf8-\\xff",XS="\\xac\\xb1\\xd7\\xf7",ZS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eA="\\u2000-\\u206f",tA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kg="A-Z\\xc0-\\xd6\\xd8-\\xde",Ng="\\ufe0e\\ufe0f",Dg=XS+ZS+eA+tA,Xf="['\u2019]",nA="["+qc+"]",Ug="["+Dg+"]",Gc="["+Cg+"]",Vg="\\d+",rA="["+Mg+"]",Fg="["+Lg+"]",zg="[^"+qc+Dg+Vg+Mg+Lg+Kg+"]",Zf="\\ud83c[\\udffb-\\udfff]",iA="(?:"+Gc+"|"+Zf+")",Wg="[^"+qc+"]",ed="(?:\\ud83c[\\udde6-\\uddff]){2}",td="[\\ud800-\\udbff][\\udc00-\\udfff]",lo="["+Kg+"]",$g="\\u200d",jg="(?:"+Fg+"|"+zg+")",sA="(?:"+lo+"|"+zg+")",qg="(?:"+Xf+"(?:d|ll|m|re|s|t|ve))?",Gg="(?:"+Xf+"(?:D|LL|M|RE|S|T|VE))?",Hg=iA+"?",Yg="["+Ng+"]?",oA="(?:"+$g+"(?:"+[Wg,ed,td].join("|")+")"+Yg+Hg+")*",aA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qg=Yg+Hg+oA,uA="(?:"+[rA,ed,td].join("|")+")"+Qg,lA="(?:"+[Wg+Gc+"?",Gc,ed,td,nA].join("|")+")",fA=RegExp(Xf,"g"),dA=RegExp(Gc,"g"),nd=RegExp(Zf+"(?="+Zf+")|"+lA+Qg,"g"),hA=RegExp([lo+"?"+Fg+"+"+qg+"(?="+[Ug,lo,"$"].join("|")+")",sA+"+"+Gg+"(?="+[Ug,lo+jg,"$"].join("|")+")",lo+"?"+jg+"+"+qg,lo+"+"+Gg,cA,aA,Vg,uA].join("|"),"g"),pA=RegExp("["+$g+qc+Cg+Ng+"]"),gA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yA=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mA=-1,Ot={};Ot[y]=Ot[k]=Ot[L]=Ot[$]=Ot[Z]=Ot[De]=Ot[wt]=Ot[pt]=Ot[St]=!0,Ot[Et]=Ot[ht]=Ot[v]=Ot[zt]=Ot[g]=Ot[An]=Ot[Ar]=Ot[ir]=Ot[yn]=Ot[ks]=Ot[sr]=Ot[zi]=Ot[kn]=Ot[In]=Ot[zn]=!1;var At={};At[Et]=At[ht]=At[v]=At[g]=At[zt]=At[An]=At[y]=At[k]=At[L]=At[$]=At[Z]=At[yn]=At[ks]=At[sr]=At[zi]=At[kn]=At[In]=At[Wi]=At[De]=At[wt]=At[pt]=At[St]=!0,At[Ar]=At[ir]=At[zn]=!1;var bA={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_A={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wA={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},SA=parseFloat,AA=parseInt,Jg=typeof F=="object"&&F&&F.Object===Object&&F,kA=typeof self=="object"&&self&&self.Object===Object&&self,mn=Jg||kA||Function("return this")(),rd=e&&!e.nodeType&&e,Is=rd&&!0&&r&&!r.nodeType&&r,Xg=Is&&Is.exports===rd,id=Xg&&Jg.process,kr=function(){try{var D=Is&&Is.require&&Is.require("util").types;return D||id&&id.binding&&id.binding("util")}catch{}}(),Zg=kr&&kr.isArrayBuffer,ey=kr&&kr.isDate,ty=kr&&kr.isMap,ny=kr&&kr.isRegExp,ry=kr&&kr.isSet,iy=kr&&kr.isTypedArray;function or(D,J,q){switch(q.length){case 0:return D.call(J);case 1:return D.call(J,q[0]);case 2:return D.call(J,q[0],q[1]);case 3:return D.call(J,q[0],q[1],q[2])}return D.apply(J,q)}function IA(D,J,q,me){for(var Le=-1,st=D==null?0:D.length;++Le<st;){var en=D[Le];J(me,en,q(en),D)}return me}function Ir(D,J){for(var q=-1,me=D==null?0:D.length;++q<me&&J(D[q],q,D)!==!1;);return D}function EA(D,J){for(var q=D==null?0:D.length;q--&&J(D[q],q,D)!==!1;);return D}function sy(D,J){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!J(D[q],q,D))return!1;return!0}function $i(D,J){for(var q=-1,me=D==null?0:D.length,Le=0,st=[];++q<me;){var en=D[q];J(en,q,D)&&(st[Le++]=en)}return st}function Hc(D,J){var q=D==null?0:D.length;return!!q&&fo(D,J,0)>-1}function sd(D,J,q){for(var me=-1,Le=D==null?0:D.length;++me<Le;)if(q(J,D[me]))return!0;return!1}function Tt(D,J){for(var q=-1,me=D==null?0:D.length,Le=Array(me);++q<me;)Le[q]=J(D[q],q,D);return Le}function ji(D,J){for(var q=-1,me=J.length,Le=D.length;++q<me;)D[Le+q]=J[q];return D}function od(D,J,q,me){var Le=-1,st=D==null?0:D.length;for(me&&st&&(q=D[++Le]);++Le<st;)q=J(q,D[Le],Le,D);return q}function OA(D,J,q,me){var Le=D==null?0:D.length;for(me&&Le&&(q=D[--Le]);Le--;)q=J(q,D[Le],Le,D);return q}function ad(D,J){for(var q=-1,me=D==null?0:D.length;++q<me;)if(J(D[q],q,D))return!0;return!1}var PA=cd("length");function TA(D){return D.split("")}function RA(D){return D.match(DS)||[]}function oy(D,J,q){var me;return q(D,function(Le,st,en){if(J(Le,st,en))return me=st,!1}),me}function Yc(D,J,q,me){for(var Le=D.length,st=q+(me?1:-1);me?st--:++st<Le;)if(J(D[st],st,D))return st;return-1}function fo(D,J,q){return J===J?zA(D,J,q):Yc(D,ay,q)}function BA(D,J,q,me){for(var Le=q-1,st=D.length;++Le<st;)if(me(D[Le],J))return Le;return-1}function ay(D){return D!==D}function cy(D,J){var q=D==null?0:D.length;return q?ld(D,J)/q:Gt}function cd(D){return function(J){return J==null?t:J[D]}}function ud(D){return function(J){return D==null?t:D[J]}}function uy(D,J,q,me,Le){return Le(D,function(st,en,bt){q=me?(me=!1,st):J(q,st,en,bt)}),q}function xA(D,J){var q=D.length;for(D.sort(J);q--;)D[q]=D[q].value;return D}function ld(D,J){for(var q,me=-1,Le=D.length;++me<Le;){var st=J(D[me]);st!==t&&(q=q===t?st:q+st)}return q}function fd(D,J){for(var q=-1,me=Array(D);++q<D;)me[q]=J(q);return me}function CA(D,J){return Tt(J,function(q){return[q,D[q]]})}function ly(D){return D&&D.slice(0,py(D)+1).replace(Jf,"")}function ar(D){return function(J){return D(J)}}function dd(D,J){return Tt(J,function(q){return D[q]})}function Oa(D,J){return D.has(J)}function fy(D,J){for(var q=-1,me=D.length;++q<me&&fo(J,D[q],0)>-1;);return q}function dy(D,J){for(var q=D.length;q--&&fo(J,D[q],0)>-1;);return q}function MA(D,J){for(var q=D.length,me=0;q--;)D[q]===J&&++me;return me}var LA=ud(bA),KA=ud(vA);function NA(D){return"\\"+wA[D]}function DA(D,J){return D==null?t:D[J]}function ho(D){return pA.test(D)}function UA(D){return gA.test(D)}function VA(D){for(var J,q=[];!(J=D.next()).done;)q.push(J.value);return q}function hd(D){var J=-1,q=Array(D.size);return D.forEach(function(me,Le){q[++J]=[Le,me]}),q}function hy(D,J){return function(q){return D(J(q))}}function qi(D,J){for(var q=-1,me=D.length,Le=0,st=[];++q<me;){var en=D[q];(en===J||en===d)&&(D[q]=d,st[Le++]=q)}return st}function Qc(D){var J=-1,q=Array(D.size);return D.forEach(function(me){q[++J]=me}),q}function FA(D){var J=-1,q=Array(D.size);return D.forEach(function(me){q[++J]=[me,me]}),q}function zA(D,J,q){for(var me=q-1,Le=D.length;++me<Le;)if(D[me]===J)return me;return-1}function WA(D,J,q){for(var me=q+1;me--;)if(D[me]===J)return me;return me}function po(D){return ho(D)?jA(D):PA(D)}function Wr(D){return ho(D)?qA(D):TA(D)}function py(D){for(var J=D.length;J--&&MS.test(D.charAt(J)););return J}var $A=ud(_A);function jA(D){for(var J=nd.lastIndex=0;nd.test(D);)++J;return J}function qA(D){return D.match(nd)||[]}function GA(D){return D.match(hA)||[]}var HA=function D(J){J=J==null?mn:go.defaults(mn.Object(),J,go.pick(mn,yA));var q=J.Array,me=J.Date,Le=J.Error,st=J.Function,en=J.Math,bt=J.Object,pd=J.RegExp,YA=J.String,Er=J.TypeError,Jc=q.prototype,QA=st.prototype,yo=bt.prototype,Xc=J["__core-js_shared__"],Zc=QA.toString,dt=yo.hasOwnProperty,JA=0,gy=function(){var o=/[^.]+$/.exec(Xc&&Xc.keys&&Xc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),eu=yo.toString,XA=Zc.call(bt),ZA=mn._,e1=pd("^"+Zc.call(dt).replace(Qf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tu=Xg?J.Buffer:t,Gi=J.Symbol,nu=J.Uint8Array,yy=tu?tu.allocUnsafe:t,ru=hy(bt.getPrototypeOf,bt),my=bt.create,by=yo.propertyIsEnumerable,iu=Jc.splice,vy=Gi?Gi.isConcatSpreadable:t,Pa=Gi?Gi.iterator:t,Es=Gi?Gi.toStringTag:t,su=function(){try{var o=Bs(bt,"defineProperty");return o({},"",{}),o}catch{}}(),t1=J.clearTimeout!==mn.clearTimeout&&J.clearTimeout,n1=me&&me.now!==mn.Date.now&&me.now,r1=J.setTimeout!==mn.setTimeout&&J.setTimeout,ou=en.ceil,au=en.floor,gd=bt.getOwnPropertySymbols,i1=tu?tu.isBuffer:t,_y=J.isFinite,s1=Jc.join,o1=hy(bt.keys,bt),tn=en.max,En=en.min,a1=me.now,c1=J.parseInt,wy=en.random,u1=Jc.reverse,yd=Bs(J,"DataView"),Ta=Bs(J,"Map"),md=Bs(J,"Promise"),mo=Bs(J,"Set"),Ra=Bs(J,"WeakMap"),Ba=Bs(bt,"create"),cu=Ra&&new Ra,bo={},l1=xs(yd),f1=xs(Ta),d1=xs(md),h1=xs(mo),p1=xs(Ra),uu=Gi?Gi.prototype:t,xa=uu?uu.valueOf:t,Sy=uu?uu.toString:t;function _(o){if(Dt(o)&&!Ne(o)&&!(o instanceof Qe)){if(o instanceof Or)return o;if(dt.call(o,"__wrapped__"))return Am(o)}return new Or(o)}var vo=function(){function o(){}return function(c){if(!Mt(c))return{};if(my)return my(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function lu(){}function Or(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:PS,evaluate:TS,interpolate:Bg,variable:"",imports:{_}},_.prototype=lu.prototype,_.prototype.constructor=_,Or.prototype=vo(lu.prototype),Or.prototype.constructor=Or;function Qe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=we,this.__views__=[]}function g1(){var o=new Qe(this.__wrapped__);return o.__actions__=Wn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Wn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Wn(this.__views__),o}function y1(){if(this.__filtered__){var o=new Qe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function m1(){var o=this.__wrapped__.value(),c=this.__dir__,l=Ne(o),p=c<0,b=l?o.length:0,w=Tk(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,Se=En(U,this.__takeCount__);if(!l||!p&&b==U&&Se==U)return qy(o,this.__actions__);var Re=[];e:for(;U--&&ge<Se;){ne+=c;for(var Fe=-1,Be=o[ne];++Fe<ce;){var Ge=re[Fe],Je=Ge.iteratee,lr=Ge.type,Nn=Je(Be);if(lr==X)Be=Nn;else if(!Nn){if(lr==z)continue e;break e}}Re[ge++]=Be}return Re}Qe.prototype=vo(lu.prototype),Qe.prototype.constructor=Qe;function Os(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function b1(){this.__data__=Ba?Ba(null):{},this.size=0}function v1(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function _1(o){var c=this.__data__;if(Ba){var l=c[o];return l===f?t:l}return dt.call(c,o)?c[o]:t}function w1(o){var c=this.__data__;return Ba?c[o]!==t:dt.call(c,o)}function S1(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=Ba&&c===t?f:c,this}Os.prototype.clear=b1,Os.prototype.delete=v1,Os.prototype.get=_1,Os.prototype.has=w1,Os.prototype.set=S1;function Ai(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function A1(){this.__data__=[],this.size=0}function k1(o){var c=this.__data__,l=fu(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():iu.call(c,l,1),--this.size,!0}function I1(o){var c=this.__data__,l=fu(c,o);return l<0?t:c[l][1]}function E1(o){return fu(this.__data__,o)>-1}function O1(o,c){var l=this.__data__,p=fu(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}Ai.prototype.clear=A1,Ai.prototype.delete=k1,Ai.prototype.get=I1,Ai.prototype.has=E1,Ai.prototype.set=O1;function ki(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function P1(){this.size=0,this.__data__={hash:new Os,map:new(Ta||Ai),string:new Os}}function T1(o){var c=Au(this,o).delete(o);return this.size-=c?1:0,c}function R1(o){return Au(this,o).get(o)}function B1(o){return Au(this,o).has(o)}function x1(o,c){var l=Au(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}ki.prototype.clear=P1,ki.prototype.delete=T1,ki.prototype.get=R1,ki.prototype.has=B1,ki.prototype.set=x1;function Ps(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new ki;++c<l;)this.add(o[c])}function C1(o){return this.__data__.set(o,f),this}function M1(o){return this.__data__.has(o)}Ps.prototype.add=Ps.prototype.push=C1,Ps.prototype.has=M1;function $r(o){var c=this.__data__=new Ai(o);this.size=c.size}function L1(){this.__data__=new Ai,this.size=0}function K1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function N1(o){return this.__data__.get(o)}function D1(o){return this.__data__.has(o)}function U1(o,c){var l=this.__data__;if(l instanceof Ai){var p=l.__data__;if(!Ta||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new ki(p)}return l.set(o,c),this.size=l.size,this}$r.prototype.clear=L1,$r.prototype.delete=K1,$r.prototype.get=N1,$r.prototype.has=D1,$r.prototype.set=U1;function Ay(o,c){var l=Ne(o),p=!l&&Cs(o),b=!l&&!p&&Xi(o),w=!l&&!p&&!b&&Ao(o),P=l||p||b||w,B=P?fd(o.length,YA):[],U=B.length;for(var ne in o)(c||dt.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Pi(ne,U)))&&B.push(ne);return B}function ky(o){var c=o.length;return c?o[Pd(0,c-1)]:t}function V1(o,c){return ku(Wn(o),Ts(c,0,o.length))}function F1(o){return ku(Wn(o))}function bd(o,c,l){(l!==t&&!jr(o[c],l)||l===t&&!(c in o))&&Ii(o,c,l)}function Ca(o,c,l){var p=o[c];(!(dt.call(o,c)&&jr(p,l))||l===t&&!(c in o))&&Ii(o,c,l)}function fu(o,c){for(var l=o.length;l--;)if(jr(o[l][0],c))return l;return-1}function z1(o,c,l,p){return Hi(o,function(b,w,P){c(p,b,l(b),P)}),p}function Iy(o,c){return o&&ii(c,hn(c),o)}function W1(o,c){return o&&ii(c,jn(c),o)}function Ii(o,c,l){c=="__proto__"&&su?su(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function vd(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Zd(o,c[l]);return b}function Ts(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Pr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!Mt(o))return o;var re=Ne(o);if(re){if(P=Bk(o),!B)return Wn(o,P)}else{var ce=On(o),ge=ce==ir||ce==Si;if(Xi(o))return Yy(o,B);if(ce==sr||ce==Et||ge&&!b){if(P=U||ge?{}:pm(o),!B)return U?_k(o,W1(P,o)):vk(o,Iy(P,o))}else{if(!At[ce])return b?o:{};P=xk(o,ce,B)}}w||(w=new $r);var Se=w.get(o);if(Se)return Se;w.set(o,P),Wm(o)?o.forEach(function(Be){P.add(Pr(Be,c,l,Be,o,w))}):Fm(o)&&o.forEach(function(Be,Ge){P.set(Ge,Pr(Be,c,l,Ge,o,w))});var Re=ne?U?Ud:Dd:U?jn:hn,Fe=re?t:Re(o);return Ir(Fe||o,function(Be,Ge){Fe&&(Ge=Be,Be=o[Ge]),Ca(P,Ge,Pr(Be,c,l,Ge,o,w))}),P}function $1(o){var c=hn(o);return function(l){return Ey(l,o,c)}}function Ey(o,c,l){var p=l.length;if(o==null)return!p;for(o=bt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function Oy(o,c,l){if(typeof o!="function")throw new Er(a);return Va(function(){o.apply(t,l)},c)}function Ma(o,c,l,p){var b=-1,w=Hc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Tt(c,ar(l))),p?(w=sd,P=!1):c.length>=i&&(w=Oa,P=!1,c=new Ps(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Hi=em(ri),Py=em(wd,!0);function j1(o,c){var l=!0;return Hi(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function du(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!ur(P):l(P,B)))var B=P,U=w}return U}function q1(o,c,l,p){var b=o.length;for(l=Ve(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:Ve(p),p<0&&(p+=b),p=l>p?0:jm(p);l<p;)o[l++]=c;return o}function Ty(o,c){var l=[];return Hi(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function bn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=Mk),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?bn(B,c-1,l,p,b):ji(b,B):p||(b[b.length]=B)}return b}var _d=tm(),Ry=tm(!0);function ri(o,c){return o&&_d(o,c,hn)}function wd(o,c){return o&&Ry(o,c,hn)}function hu(o,c){return $i(c,function(l){return Ti(o[l])})}function Rs(o,c){c=Qi(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[si(c[l++])];return l&&l==p?o:t}function By(o,c,l){var p=c(o);return Ne(o)?p:ji(p,l(o))}function Ln(o){return o==null?o===t?Hf:qf:Es&&Es in bt(o)?Pk(o):Fk(o)}function Sd(o,c){return o>c}function G1(o,c){return o!=null&&dt.call(o,c)}function H1(o,c){return o!=null&&c in bt(o)}function Y1(o,c,l){return o>=En(c,l)&&o<tn(c,l)}function Ad(o,c,l){for(var p=l?sd:Hc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Tt(re,ar(c))),U=En(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new Ps(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<U;){var Se=re[ce],Re=c?c(Se):Se;if(Se=l||Se!==0?Se:0,!(ge?Oa(ge,Re):p(ne,Re,l))){for(P=w;--P;){var Fe=B[P];if(!(Fe?Oa(Fe,Re):p(o[P],Re,l)))continue e}ge&&ge.push(Re),ne.push(Se)}}return ne}function Q1(o,c,l,p){return ri(o,function(b,w,P){c(p,l(b),w,P)}),p}function La(o,c,l){c=Qi(c,o),o=bm(o,c);var p=o==null?o:o[si(Rr(c))];return p==null?t:or(p,o,l)}function xy(o){return Dt(o)&&Ln(o)==Et}function J1(o){return Dt(o)&&Ln(o)==v}function X1(o){return Dt(o)&&Ln(o)==An}function Ka(o,c,l,p,b){return o===c?!0:o==null||c==null||!Dt(o)&&!Dt(c)?o!==o&&c!==c:Z1(o,c,l,p,Ka,b)}function Z1(o,c,l,p,b,w){var P=Ne(o),B=Ne(c),U=P?ht:On(o),ne=B?ht:On(c);U=U==Et?sr:U,ne=ne==Et?sr:ne;var re=U==sr,ce=ne==sr,ge=U==ne;if(ge&&Xi(o)){if(!Xi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new $r),P||Ao(o)?fm(o,c,l,p,b,w):Ek(o,c,U,l,p,b,w);if(!(l&C)){var Se=re&&dt.call(o,"__wrapped__"),Re=ce&&dt.call(c,"__wrapped__");if(Se||Re){var Fe=Se?o.value():o,Be=Re?c.value():c;return w||(w=new $r),b(Fe,Be,l,p,w)}}return ge?(w||(w=new $r),Ok(o,c,l,p,b,w)):!1}function ek(o){return Dt(o)&&On(o)==yn}function kd(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=bt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new $r;if(p)var ge=p(ne,re,U,o,c,ce);if(!(ge===t?Ka(re,ne,C|A,p,ce):ge))return!1}}return!0}function Cy(o){if(!Mt(o)||Kk(o))return!1;var c=Ti(o)?e1:$S;return c.test(xs(o))}function tk(o){return Dt(o)&&Ln(o)==zi}function nk(o){return Dt(o)&&On(o)==kn}function rk(o){return Dt(o)&&Ru(o.length)&&!!Ot[Ln(o)]}function My(o){return typeof o=="function"?o:o==null?qn:typeof o=="object"?Ne(o)?Ny(o[0],o[1]):Ky(o):nb(o)}function Id(o){if(!Ua(o))return o1(o);var c=[];for(var l in bt(o))dt.call(o,l)&&l!="constructor"&&c.push(l);return c}function ik(o){if(!Mt(o))return Vk(o);var c=Ua(o),l=[];for(var p in o)p=="constructor"&&(c||!dt.call(o,p))||l.push(p);return l}function Ed(o,c){return o<c}function Ly(o,c){var l=-1,p=$n(o)?q(o.length):[];return Hi(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function Ky(o){var c=Fd(o);return c.length==1&&c[0][2]?ym(c[0][0],c[0][1]):function(l){return l===o||kd(l,o,c)}}function Ny(o,c){return Wd(o)&&gm(c)?ym(si(o),c):function(l){var p=Zd(l,o);return p===t&&p===c?eh(l,o):Ka(c,p,C|A)}}function pu(o,c,l,p,b){o!==c&&_d(c,function(w,P){if(b||(b=new $r),Mt(w))sk(o,c,P,l,pu,p,b);else{var B=p?p(jd(o,P),w,P+"",o,c,b):t;B===t&&(B=w),bd(o,P,B)}},jn)}function sk(o,c,l,p,b,w,P){var B=jd(o,l),U=jd(c,l),ne=P.get(U);if(ne){bd(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Ne(U),Se=!ge&&Xi(U),Re=!ge&&!Se&&Ao(U);re=U,ge||Se||Re?Ne(B)?re=B:Wt(B)?re=Wn(B):Se?(ce=!1,re=Yy(U,!0)):Re?(ce=!1,re=Qy(U,!0)):re=[]:Fa(U)||Cs(U)?(re=B,Cs(B)?re=qm(B):(!Mt(B)||Ti(B))&&(re=pm(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),bd(o,l,re)}function Dy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,Pi(c,l)?o[c]:t}function Uy(o,c,l){c.length?c=Tt(c,function(w){return Ne(w)?function(P){return Rs(P,w.length===1?w[0]:w)}:w}):c=[qn];var p=-1;c=Tt(c,ar(Pe()));var b=Ly(o,function(w,P,B){var U=Tt(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return xA(b,function(w,P){return bk(w,P,l)})}function ok(o,c){return Vy(o,c,function(l,p){return eh(o,p)})}function Vy(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=Rs(o,P);l(B,P)&&Na(w,Qi(P,o),B)}return w}function ak(o){return function(c){return Rs(c,o)}}function Od(o,c,l,p){var b=p?BA:fo,w=-1,P=c.length,B=o;for(o===c&&(c=Wn(c)),l&&(B=Tt(o,ar(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&iu.call(B,U,1),iu.call(o,U,1);return o}function Fy(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;Pi(b)?iu.call(o,b,1):Bd(o,b)}}return o}function Pd(o,c){return o+au(wy()*(c-o+1))}function ck(o,c,l,p){for(var b=-1,w=tn(ou((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function Td(o,c){var l="";if(!o||c<1||c>Ee)return l;do c%2&&(l+=o),c=au(c/2),c&&(o+=o);while(c);return l}function je(o,c){return qd(mm(o,c,qn),o+"")}function uk(o){return ky(ko(o))}function lk(o,c){var l=ko(o);return ku(l,Ts(c,0,l.length))}function Na(o,c,l,p){if(!Mt(o))return o;c=Qi(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=si(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=Mt(re)?re:Pi(c[b+1])?[]:{})}Ca(B,U,ne),B=B[U]}return o}var zy=cu?function(o,c){return cu.set(o,c),o}:qn,fk=su?function(o,c){return su(o,"toString",{configurable:!0,enumerable:!1,value:nh(c),writable:!0})}:qn;function dk(o){return ku(ko(o))}function Tr(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function hk(o,c){var l;return Hi(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function gu(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=Zt){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!ur(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return Rd(o,c,qn,l)}function Rd(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=ur(c),ne=c===t;b<w;){var re=au((b+w)/2),ce=l(o[re]),ge=ce!==t,Se=ce===null,Re=ce===ce,Fe=ur(ce);if(P)var Be=p||Re;else ne?Be=Re&&(p||ge):B?Be=Re&&ge&&(p||!Se):U?Be=Re&&ge&&!Se&&(p||!Fe):Se||Fe?Be=!1:Be=p?ce<=c:ce<c;Be?b=re+1:w=re}return En(w,$e)}function Wy(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!jr(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function $y(o){return typeof o=="number"?o:ur(o)?Gt:+o}function cr(o){if(typeof o=="string")return o;if(Ne(o))return Tt(o,cr)+"";if(ur(o))return Sy?Sy.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Yi(o,c,l){var p=-1,b=Hc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=sd;else if(w>=i){var ne=c?null:kk(o);if(ne)return Qc(ne);P=!1,b=Oa,U=new Ps}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=U.length;ge--;)if(U[ge]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function Bd(o,c){return c=Qi(c,o),o=bm(o,c),o==null||delete o[si(Rr(c))]}function jy(o,c,l,p){return Na(o,c,l(Rs(o,c)),p)}function yu(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Tr(o,p?0:w,p?w+1:b):Tr(o,p?w+1:0,p?b:w)}function qy(o,c){var l=o;return l instanceof Qe&&(l=l.value()),od(c,function(p,b){return b.func.apply(b.thisArg,ji([p],b.args))},l)}function xd(o,c,l){var p=o.length;if(p<2)return p?Yi(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=Ma(w[b]||P,o[B],c,l));return Yi(bn(w,1),c,l)}function Gy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function Cd(o){return Wt(o)?o:[]}function Md(o){return typeof o=="function"?o:qn}function Qi(o,c){return Ne(o)?o:Wd(o,c)?[o]:Sm(ct(o))}var pk=je;function Ji(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Tr(o,c,l)}var Hy=t1||function(o){return mn.clearTimeout(o)};function Yy(o,c){if(c)return o.slice();var l=o.length,p=yy?yy(l):new o.constructor(l);return o.copy(p),p}function Ld(o){var c=new o.constructor(o.byteLength);return new nu(c).set(new nu(o)),c}function gk(o,c){var l=c?Ld(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function yk(o){var c=new o.constructor(o.source,xg.exec(o));return c.lastIndex=o.lastIndex,c}function mk(o){return xa?bt(xa.call(o)):{}}function Qy(o,c){var l=c?Ld(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function Jy(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=ur(o),P=c!==t,B=c===null,U=c===c,ne=ur(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function bk(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=Jy(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function Xy(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=tn(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Zy(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=tn(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var Se=b;++U<ne;)ce[Se+U]=c[U];for(;++P<B;)(ge||b<w)&&(ce[Se+l[P]]=o[b++]);return ce}function Wn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function ii(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?Ii(l,B,U):Ca(l,B,U)}return l}function vk(o,c){return ii(o,zd(o),c)}function _k(o,c){return ii(o,dm(o),c)}function mu(o,c){return function(l,p){var b=Ne(l)?IA:z1,w=c?c():{};return b(l,o,Pe(p,2),w)}}function _o(o){return je(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Kn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=bt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function em(o,c){return function(l,p){if(l==null)return l;if(!$n(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=bt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function tm(o){return function(c,l,p){for(var b=-1,w=bt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function wk(o,c,l){var p=c&R,b=Da(o);function w(){var P=this&&this!==mn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function nm(o){return function(c){c=ct(c);var l=ho(c)?Wr(c):t,p=l?l[0]:c.charAt(0),b=l?Ji(l,1).join(""):c.slice(1);return p[o]()+b}}function wo(o){return function(c){return od(eb(Zm(c).replace(fA,"")),o,"")}}function Da(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=vo(o.prototype),p=o.apply(l,c);return Mt(p)?p:l}}function Sk(o,c,l){var p=Da(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=So(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:qi(P,U);if(w-=ne.length,w<l)return am(o,c,bu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==mn&&this instanceof b?p:o;return or(re,this,P)}return b}function rm(o){return function(c,l,p){var b=bt(c);if(!$n(c)){var w=Pe(l,3);c=hn(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function im(o){return Oi(function(c){var l=c.length,p=l,b=Or.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new Er(a);if(b&&!P&&Su(w)=="wrapper")var P=new Or([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=Su(w),U=B=="wrapper"?Vd(w):t;U&&$d(U[0])&&U[1]==(N|ae|de|W)&&!U[4].length&&U[9]==1?P=P[Su(U[0])].apply(P,U[3]):P=w.length==1&&$d(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Ne(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function bu(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ge=c&M,Se=c&(ae|oe),Re=c&Q,Fe=ge?t:Da(o);function Be(){for(var Ge=arguments.length,Je=q(Ge),lr=Ge;lr--;)Je[lr]=arguments[lr];if(Se)var Nn=So(Be),fr=MA(Je,Nn);if(p&&(Je=Xy(Je,p,b,Se)),w&&(Je=Zy(Je,w,P,Se)),Ge-=fr,Se&&Ge<ne){var $t=qi(Je,Nn);return am(o,c,bu,Be.placeholder,l,Je,$t,B,U,ne-Ge)}var qr=ce?l:this,Bi=ge?qr[o]:o;return Ge=Je.length,B?Je=zk(Je,B):Re&&Ge>1&&Je.reverse(),re&&U<Ge&&(Je.length=U),this&&this!==mn&&this instanceof Be&&(Bi=Fe||Da(Bi)),Bi.apply(qr,Je)}return Be}function sm(o,c){return function(l,p){return Q1(l,o,c(p),{})}}function vu(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=cr(l),p=cr(p)):(l=$y(l),p=$y(p)),b=o(l,p)}return b}}function Kd(o){return Oi(function(c){return c=Tt(c,ar(Pe())),je(function(l){var p=this;return o(c,function(b){return or(b,p,l)})})})}function _u(o,c){c=c===t?" ":cr(c);var l=c.length;if(l<2)return l?Td(c,o):c;var p=Td(c,ou(o/po(c)));return ho(c)?Ji(Wr(p),0,o).join(""):p.slice(0,o)}function Ak(o,c,l,p){var b=c&R,w=Da(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ge=this&&this!==mn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return or(ge,b?l:this,ce)}return P}function om(o){return function(c,l,p){return p&&typeof p!="number"&&Kn(c,l,p)&&(l=p=t),c=Ri(c),l===t?(l=c,c=0):l=Ri(l),p=p===t?c<l?1:-1:Ri(p),ck(c,l,p,o)}}function wu(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Br(c),l=Br(l)),o(c,l)}}function am(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,Se=re?w:t,Re=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|M));var Fe=[o,c,b,Se,ce,Re,ge,B,U,ne],Be=l.apply(t,Fe);return $d(o)&&vm(Be,Fe),Be.placeholder=p,_m(Be,o,c)}function Nd(o){var c=en[o];return function(l,p){if(l=Br(l),p=p==null?0:En(Ve(p),292),p&&_y(l)){var b=(ct(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(ct(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var kk=mo&&1/Qc(new mo([,-0]))[1]==ye?function(o){return new mo(o)}:sh;function cm(o){return function(c){var l=On(c);return l==yn?hd(c):l==kn?FA(c):CA(c,o(c))}}function Ei(o,c,l,p,b,w,P,B){var U=c&M;if(!U&&typeof o!="function")throw new Er(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:tn(Ve(P),0),B=B===t?B:Ve(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=U?t:Vd(o),Se=[o,c,l,p,b,re,ce,w,P,B];if(ge&&Uk(Se,ge),o=Se[0],c=Se[1],l=Se[2],p=Se[3],b=Se[4],B=Se[9]=Se[9]===t?U?0:o.length:tn(Se[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Re=wk(o,c,l);else c==ae||c==oe?Re=Sk(o,c,B):(c==de||c==(R|de))&&!b.length?Re=Ak(o,c,l,p):Re=bu.apply(t,Se);var Fe=ge?zy:vm;return _m(Fe(Re,Se),o,c)}function um(o,c,l,p){return o===t||jr(o,yo[l])&&!dt.call(p,l)?c:o}function lm(o,c,l,p,b,w){return Mt(o)&&Mt(c)&&(w.set(c,o),pu(o,c,t,lm,w),w.delete(c)),o}function Ik(o){return Fa(o)?t:o}function fm(o,c,l,p,b,w){var P=l&C,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,Se=l&A?new Ps:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Re=o[ce],Fe=c[ce];if(p)var Be=P?p(Fe,Re,ce,c,o,w):p(Re,Fe,ce,o,c,w);if(Be!==t){if(Be)continue;ge=!1;break}if(Se){if(!ad(c,function(Ge,Je){if(!Oa(Se,Je)&&(Re===Ge||b(Re,Ge,l,p,w)))return Se.push(Je)})){ge=!1;break}}else if(!(Re===Fe||b(Re,Fe,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function Ek(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new nu(o),new nu(c)));case zt:case An:case ks:return jr(+o,+c);case Ar:return o.name==c.name&&o.message==c.message;case zi:case In:return o==c+"";case yn:var B=hd;case kn:var U=p&C;if(B||(B=Qc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=fm(B(o),B(c),p,b,w,P);return P.delete(o),re;case Wi:if(xa)return xa.call(o)==xa.call(c)}return!1}function Ok(o,c,l,p,b,w){var P=l&C,B=Dd(o),U=B.length,ne=Dd(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ge=B[ce];if(!(P?ge in c:dt.call(c,ge)))return!1}var Se=w.get(o),Re=w.get(c);if(Se&&Re)return Se==c&&Re==o;var Fe=!0;w.set(o,c),w.set(c,o);for(var Be=P;++ce<U;){ge=B[ce];var Ge=o[ge],Je=c[ge];if(p)var lr=P?p(Je,Ge,ge,c,o,w):p(Ge,Je,ge,o,c,w);if(!(lr===t?Ge===Je||b(Ge,Je,l,p,w):lr)){Fe=!1;break}Be||(Be=ge=="constructor")}if(Fe&&!Be){var Nn=o.constructor,fr=c.constructor;Nn!=fr&&"constructor"in o&&"constructor"in c&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof fr=="function"&&fr instanceof fr)&&(Fe=!1)}return w.delete(o),w.delete(c),Fe}function Oi(o){return qd(mm(o,t,Em),o+"")}function Dd(o){return By(o,hn,zd)}function Ud(o){return By(o,jn,dm)}var Vd=cu?function(o){return cu.get(o)}:sh;function Su(o){for(var c=o.name+"",l=bo[c],p=dt.call(bo,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function So(o){var c=dt.call(_,"placeholder")?_:o;return c.placeholder}function Pe(){var o=_.iteratee||rh;return o=o===rh?My:o,arguments.length?o(arguments[0],arguments[1]):o}function Au(o,c){var l=o.__data__;return Lk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Fd(o){for(var c=hn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,gm(b)]}return c}function Bs(o,c){var l=DA(o,c);return Cy(l)?l:t}function Pk(o){var c=dt.call(o,Es),l=o[Es];try{o[Es]=t;var p=!0}catch{}var b=eu.call(o);return p&&(c?o[Es]=l:delete o[Es]),b}var zd=gd?function(o){return o==null?[]:(o=bt(o),$i(gd(o),function(c){return by.call(o,c)}))}:oh,dm=gd?function(o){for(var c=[];o;)ji(c,zd(o)),o=ru(o);return c}:oh,On=Ln;(yd&&On(new yd(new ArrayBuffer(1)))!=g||Ta&&On(new Ta)!=yn||md&&On(md.resolve())!=$c||mo&&On(new mo)!=kn||Ra&&On(new Ra)!=zn)&&(On=function(o){var c=Ln(o),l=c==sr?o.constructor:t,p=l?xs(l):"";if(p)switch(p){case l1:return g;case f1:return yn;case d1:return $c;case h1:return kn;case p1:return zn}return c});function Tk(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=En(c,o+P);break;case"takeRight":o=tn(o,c-P);break}}return{start:o,end:c}}function Rk(o){var c=o.match(KS);return c?c[1].split(NS):[]}function hm(o,c,l){c=Qi(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=si(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&Ru(b)&&Pi(P,b)&&(Ne(o)||Cs(o)))}function Bk(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&dt.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function pm(o){return typeof o.constructor=="function"&&!Ua(o)?vo(ru(o)):{}}function xk(o,c,l){var p=o.constructor;switch(c){case v:return Ld(o);case zt:case An:return new p(+o);case g:return gk(o,l);case y:case k:case L:case $:case Z:case De:case wt:case pt:case St:return Qy(o,l);case yn:return new p;case ks:case In:return new p(o);case zi:return yk(o);case kn:return new p;case Wi:return mk(o)}}function Ck(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(LS,`{
/* [wrapped with `+c+`] */
`)}function Mk(o){return Ne(o)||Cs(o)||!!(vy&&o&&o[vy])}function Pi(o,c){var l=typeof o;return c=c??Ee,!!c&&(l=="number"||l!="symbol"&&qS.test(o))&&o>-1&&o%1==0&&o<c}function Kn(o,c,l){if(!Mt(l))return!1;var p=typeof c;return(p=="number"?$n(l)&&Pi(c,l.length):p=="string"&&c in l)?jr(l[c],o):!1}function Wd(o,c){if(Ne(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||ur(o)?!0:BS.test(o)||!RS.test(o)||c!=null&&o in bt(c)}function Lk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function $d(o){var c=Su(o),l=_[c];if(typeof l!="function"||!(c in Qe.prototype))return!1;if(o===l)return!0;var p=Vd(l);return!!p&&o===p[0]}function Kk(o){return!!gy&&gy in o}var Nk=Xc?Ti:ah;function Ua(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||yo;return o===l}function gm(o){return o===o&&!Mt(o)}function ym(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in bt(l))}}function Dk(o){var c=Pu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function Uk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|M|N),P=p==N&&l==ae||p==N&&l==W&&o[7].length<=c[8]||p==(N|W)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?Xy(U,B,c[4]):B,o[4]=U?qi(o[3],d):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?Zy(U,B,c[6]):B,o[6]=U?qi(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:En(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function Vk(o){var c=[];if(o!=null)for(var l in bt(o))c.push(l);return c}function Fk(o){return eu.call(o)}function mm(o,c,l){return c=tn(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=tn(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),or(o,this,B)}}function bm(o,c){return c.length<2?o:Rs(o,Tr(c,0,-1))}function zk(o,c){for(var l=o.length,p=En(c.length,l),b=Wn(o);p--;){var w=c[p];o[p]=Pi(w,l)?b[w]:t}return o}function jd(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var vm=wm(zy),Va=r1||function(o,c){return mn.setTimeout(o,c)},qd=wm(fk);function _m(o,c,l){var p=c+"";return qd(o,Ck(p,Wk(Rk(p),l)))}function wm(o){var c=0,l=0;return function(){var p=a1(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function ku(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=Pd(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var Sm=Dk(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(xS,function(l,p,b,w){c.push(b?w.replace(VS,"$1"):p||l)}),c});function si(o){if(typeof o=="string"||ur(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function xs(o){if(o!=null){try{return Zc.call(o)}catch{}try{return o+""}catch{}}return""}function Wk(o,c){return Ir(dn,function(l){var p="_."+l[0];c&l[1]&&!Hc(o,p)&&o.push(p)}),o.sort()}function Am(o){if(o instanceof Qe)return o.clone();var c=new Or(o.__wrapped__,o.__chain__);return c.__actions__=Wn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function $k(o,c,l){(l?Kn(o,c,l):c===t)?c=1:c=tn(Ve(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(ou(p/c));b<p;)P[w++]=Tr(o,b,b+=c);return P}function jk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function qk(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return ji(Ne(l)?Wn(l):[l],bn(c,1))}var Gk=je(function(o,c){return Wt(o)?Ma(o,bn(c,1,Wt,!0)):[]}),Hk=je(function(o,c){var l=Rr(c);return Wt(l)&&(l=t),Wt(o)?Ma(o,bn(c,1,Wt,!0),Pe(l,2)):[]}),Yk=je(function(o,c){var l=Rr(c);return Wt(l)&&(l=t),Wt(o)?Ma(o,bn(c,1,Wt,!0),t,l):[]});function Qk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),Tr(o,c<0?0:c,p)):[]}function Jk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),c=p-c,Tr(o,0,c<0?0:c)):[]}function Xk(o,c){return o&&o.length?yu(o,Pe(c,3),!0,!0):[]}function Zk(o,c){return o&&o.length?yu(o,Pe(c,3),!0):[]}function eI(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Kn(o,c,l)&&(l=0,p=b),q1(o,c,l,p)):[]}function km(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ve(l);return b<0&&(b=tn(p+b,0)),Yc(o,Pe(c,3),b)}function Im(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=Ve(l),b=l<0?tn(p+b,0):En(b,p-1)),Yc(o,Pe(c,3),b,!0)}function Em(o){var c=o==null?0:o.length;return c?bn(o,1):[]}function tI(o){var c=o==null?0:o.length;return c?bn(o,ye):[]}function nI(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:Ve(c),bn(o,c)):[]}function rI(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function Om(o){return o&&o.length?o[0]:t}function iI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:Ve(l);return b<0&&(b=tn(p+b,0)),fo(o,c,b)}function sI(o){var c=o==null?0:o.length;return c?Tr(o,0,-1):[]}var oI=je(function(o){var c=Tt(o,Cd);return c.length&&c[0]===o[0]?Ad(c):[]}),aI=je(function(o){var c=Rr(o),l=Tt(o,Cd);return c===Rr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?Ad(l,Pe(c,2)):[]}),cI=je(function(o){var c=Rr(o),l=Tt(o,Cd);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?Ad(l,t,c):[]});function uI(o,c){return o==null?"":s1.call(o,c)}function Rr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function lI(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=Ve(l),b=b<0?tn(p+b,0):En(b,p-1)),c===c?WA(o,c,b):Yc(o,ay,b,!0)}function fI(o,c){return o&&o.length?Dy(o,Ve(c)):t}var dI=je(Pm);function Pm(o,c){return o&&o.length&&c&&c.length?Od(o,c):o}function hI(o,c,l){return o&&o.length&&c&&c.length?Od(o,c,Pe(l,2)):o}function pI(o,c,l){return o&&o.length&&c&&c.length?Od(o,c,t,l):o}var gI=Oi(function(o,c){var l=o==null?0:o.length,p=vd(o,c);return Fy(o,Tt(c,function(b){return Pi(b,l)?+b:b}).sort(Jy)),p});function yI(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Pe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return Fy(o,b),l}function Gd(o){return o==null?o:u1.call(o)}function mI(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Kn(o,c,l)?(c=0,l=p):(c=c==null?0:Ve(c),l=l===t?p:Ve(l)),Tr(o,c,l)):[]}function bI(o,c){return gu(o,c)}function vI(o,c,l){return Rd(o,c,Pe(l,2))}function _I(o,c){var l=o==null?0:o.length;if(l){var p=gu(o,c);if(p<l&&jr(o[p],c))return p}return-1}function wI(o,c){return gu(o,c,!0)}function SI(o,c,l){return Rd(o,c,Pe(l,2),!0)}function AI(o,c){var l=o==null?0:o.length;if(l){var p=gu(o,c,!0)-1;if(jr(o[p],c))return p}return-1}function kI(o){return o&&o.length?Wy(o):[]}function II(o,c){return o&&o.length?Wy(o,Pe(c,2)):[]}function EI(o){var c=o==null?0:o.length;return c?Tr(o,1,c):[]}function OI(o,c,l){return o&&o.length?(c=l||c===t?1:Ve(c),Tr(o,0,c<0?0:c)):[]}function PI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:Ve(c),c=p-c,Tr(o,c<0?0:c,p)):[]}function TI(o,c){return o&&o.length?yu(o,Pe(c,3),!1,!0):[]}function RI(o,c){return o&&o.length?yu(o,Pe(c,3)):[]}var BI=je(function(o){return Yi(bn(o,1,Wt,!0))}),xI=je(function(o){var c=Rr(o);return Wt(c)&&(c=t),Yi(bn(o,1,Wt,!0),Pe(c,2))}),CI=je(function(o){var c=Rr(o);return c=typeof c=="function"?c:t,Yi(bn(o,1,Wt,!0),t,c)});function MI(o){return o&&o.length?Yi(o):[]}function LI(o,c){return o&&o.length?Yi(o,Pe(c,2)):[]}function KI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Yi(o,t,c):[]}function Hd(o){if(!(o&&o.length))return[];var c=0;return o=$i(o,function(l){if(Wt(l))return c=tn(l.length,c),!0}),fd(c,function(l){return Tt(o,cd(l))})}function Tm(o,c){if(!(o&&o.length))return[];var l=Hd(o);return c==null?l:Tt(l,function(p){return or(c,t,p)})}var NI=je(function(o,c){return Wt(o)?Ma(o,c):[]}),DI=je(function(o){return xd($i(o,Wt))}),UI=je(function(o){var c=Rr(o);return Wt(c)&&(c=t),xd($i(o,Wt),Pe(c,2))}),VI=je(function(o){var c=Rr(o);return c=typeof c=="function"?c:t,xd($i(o,Wt),t,c)}),FI=je(Hd);function zI(o,c){return Gy(o||[],c||[],Ca)}function WI(o,c){return Gy(o||[],c||[],Na)}var $I=je(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,Tm(o,l)});function Rm(o){var c=_(o);return c.__chain__=!0,c}function jI(o,c){return c(o),o}function Iu(o,c){return c(o)}var qI=Oi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return vd(w,o)};return c>1||this.__actions__.length||!(p instanceof Qe)||!Pi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:Iu,args:[b],thisArg:t}),new Or(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function GI(){return Rm(this)}function HI(){return new Or(this.value(),this.__chain__)}function YI(){this.__values__===t&&(this.__values__=$m(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function QI(){return this}function JI(o){for(var c,l=this;l instanceof lu;){var p=Am(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function XI(){var o=this.__wrapped__;if(o instanceof Qe){var c=o;return this.__actions__.length&&(c=new Qe(this)),c=c.reverse(),c.__actions__.push({func:Iu,args:[Gd],thisArg:t}),new Or(c,this.__chain__)}return this.thru(Gd)}function ZI(){return qy(this.__wrapped__,this.__actions__)}var eE=mu(function(o,c,l){dt.call(o,l)?++o[l]:Ii(o,l,1)});function tE(o,c,l){var p=Ne(o)?sy:j1;return l&&Kn(o,c,l)&&(c=t),p(o,Pe(c,3))}function nE(o,c){var l=Ne(o)?$i:Ty;return l(o,Pe(c,3))}var rE=rm(km),iE=rm(Im);function sE(o,c){return bn(Eu(o,c),1)}function oE(o,c){return bn(Eu(o,c),ye)}function aE(o,c,l){return l=l===t?1:Ve(l),bn(Eu(o,c),l)}function Bm(o,c){var l=Ne(o)?Ir:Hi;return l(o,Pe(c,3))}function xm(o,c){var l=Ne(o)?EA:Py;return l(o,Pe(c,3))}var cE=mu(function(o,c,l){dt.call(o,l)?o[l].push(c):Ii(o,l,[c])});function uE(o,c,l,p){o=$n(o)?o:ko(o),l=l&&!p?Ve(l):0;var b=o.length;return l<0&&(l=tn(b+l,0)),Bu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&fo(o,c,l)>-1}var lE=je(function(o,c,l){var p=-1,b=typeof c=="function",w=$n(o)?q(o.length):[];return Hi(o,function(P){w[++p]=b?or(c,P,l):La(P,c,l)}),w}),fE=mu(function(o,c,l){Ii(o,l,c)});function Eu(o,c){var l=Ne(o)?Tt:Ly;return l(o,Pe(c,3))}function dE(o,c,l,p){return o==null?[]:(Ne(c)||(c=c==null?[]:[c]),l=p?t:l,Ne(l)||(l=l==null?[]:[l]),Uy(o,c,l))}var hE=mu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function pE(o,c,l){var p=Ne(o)?od:uy,b=arguments.length<3;return p(o,Pe(c,4),l,b,Hi)}function gE(o,c,l){var p=Ne(o)?OA:uy,b=arguments.length<3;return p(o,Pe(c,4),l,b,Py)}function yE(o,c){var l=Ne(o)?$i:Ty;return l(o,Tu(Pe(c,3)))}function mE(o){var c=Ne(o)?ky:uk;return c(o)}function bE(o,c,l){(l?Kn(o,c,l):c===t)?c=1:c=Ve(c);var p=Ne(o)?V1:lk;return p(o,c)}function vE(o){var c=Ne(o)?F1:dk;return c(o)}function _E(o){if(o==null)return 0;if($n(o))return Bu(o)?po(o):o.length;var c=On(o);return c==yn||c==kn?o.size:Id(o).length}function wE(o,c,l){var p=Ne(o)?ad:hk;return l&&Kn(o,c,l)&&(c=t),p(o,Pe(c,3))}var SE=je(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Kn(o,c[0],c[1])?c=[]:l>2&&Kn(c[0],c[1],c[2])&&(c=[c[0]]),Uy(o,bn(c,1),[])}),Ou=n1||function(){return mn.Date.now()};function AE(o,c){if(typeof c!="function")throw new Er(a);return o=Ve(o),function(){if(--o<1)return c.apply(this,arguments)}}function Cm(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,Ei(o,N,t,t,t,t,c)}function Mm(o,c){var l;if(typeof c!="function")throw new Er(a);return o=Ve(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Yd=je(function(o,c,l){var p=R;if(l.length){var b=qi(l,So(Yd));p|=de}return Ei(o,p,c,l,b)}),Lm=je(function(o,c,l){var p=R|M;if(l.length){var b=qi(l,So(Lm));p|=de}return Ei(c,p,o,l,b)});function Km(o,c,l){c=l?t:c;var p=Ei(o,ae,t,t,t,t,t,c);return p.placeholder=Km.placeholder,p}function Nm(o,c,l){c=l?t:c;var p=Ei(o,oe,t,t,t,t,t,c);return p.placeholder=Nm.placeholder,p}function Dm(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new Er(a);c=Br(c)||0,Mt(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?tn(Br(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function Se($t){var qr=p,Bi=b;return p=b=t,ne=$t,P=o.apply(Bi,qr),P}function Re($t){return ne=$t,B=Va(Ge,c),re?Se($t):P}function Fe($t){var qr=$t-U,Bi=$t-ne,rb=c-qr;return ce?En(rb,w-Bi):rb}function Be($t){var qr=$t-U,Bi=$t-ne;return U===t||qr>=c||qr<0||ce&&Bi>=w}function Ge(){var $t=Ou();if(Be($t))return Je($t);B=Va(Ge,Fe($t))}function Je($t){return B=t,ge&&p?Se($t):(p=b=t,P)}function lr(){B!==t&&Hy(B),ne=0,p=U=b=B=t}function Nn(){return B===t?P:Je(Ou())}function fr(){var $t=Ou(),qr=Be($t);if(p=arguments,b=this,U=$t,qr){if(B===t)return Re(U);if(ce)return Hy(B),B=Va(Ge,c),Se(U)}return B===t&&(B=Va(Ge,c)),P}return fr.cancel=lr,fr.flush=Nn,fr}var kE=je(function(o,c){return Oy(o,1,c)}),IE=je(function(o,c,l){return Oy(o,Br(c)||0,l)});function EE(o){return Ei(o,Q)}function Pu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Er(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(Pu.Cache||ki),l}Pu.Cache=ki;function Tu(o){if(typeof o!="function")throw new Er(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function OE(o){return Mm(2,o)}var PE=pk(function(o,c){c=c.length==1&&Ne(c[0])?Tt(c[0],ar(Pe())):Tt(bn(c,1),ar(Pe()));var l=c.length;return je(function(p){for(var b=-1,w=En(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return or(o,this,p)})}),Qd=je(function(o,c){var l=qi(c,So(Qd));return Ei(o,de,t,c,l)}),Um=je(function(o,c){var l=qi(c,So(Um));return Ei(o,E,t,c,l)}),TE=Oi(function(o,c){return Ei(o,W,t,t,t,c)});function RE(o,c){if(typeof o!="function")throw new Er(a);return c=c===t?c:Ve(c),je(o,c)}function BE(o,c){if(typeof o!="function")throw new Er(a);return c=c==null?0:tn(Ve(c),0),je(function(l){var p=l[c],b=Ji(l,0,c);return p&&ji(b,p),or(o,this,b)})}function xE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new Er(a);return Mt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),Dm(o,c,{leading:p,maxWait:c,trailing:b})}function CE(o){return Cm(o,1)}function ME(o,c){return Qd(Md(c),o)}function LE(){if(!arguments.length)return[];var o=arguments[0];return Ne(o)?o:[o]}function KE(o){return Pr(o,O)}function NE(o,c){return c=typeof c=="function"?c:t,Pr(o,O,c)}function DE(o){return Pr(o,m|O)}function UE(o,c){return c=typeof c=="function"?c:t,Pr(o,m|O,c)}function VE(o,c){return c==null||Ey(o,c,hn(c))}function jr(o,c){return o===c||o!==o&&c!==c}var FE=wu(Sd),zE=wu(function(o,c){return o>=c}),Cs=xy(function(){return arguments}())?xy:function(o){return Dt(o)&&dt.call(o,"callee")&&!by.call(o,"callee")},Ne=q.isArray,WE=Zg?ar(Zg):J1;function $n(o){return o!=null&&Ru(o.length)&&!Ti(o)}function Wt(o){return Dt(o)&&$n(o)}function $E(o){return o===!0||o===!1||Dt(o)&&Ln(o)==zt}var Xi=i1||ah,jE=ey?ar(ey):X1;function qE(o){return Dt(o)&&o.nodeType===1&&!Fa(o)}function GE(o){if(o==null)return!0;if($n(o)&&(Ne(o)||typeof o=="string"||typeof o.splice=="function"||Xi(o)||Ao(o)||Cs(o)))return!o.length;var c=On(o);if(c==yn||c==kn)return!o.size;if(Ua(o))return!Id(o).length;for(var l in o)if(dt.call(o,l))return!1;return!0}function HE(o,c){return Ka(o,c)}function YE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?Ka(o,c,t,l):!!p}function Jd(o){if(!Dt(o))return!1;var c=Ln(o);return c==Ar||c==ni||typeof o.message=="string"&&typeof o.name=="string"&&!Fa(o)}function QE(o){return typeof o=="number"&&_y(o)}function Ti(o){if(!Mt(o))return!1;var c=Ln(o);return c==ir||c==Si||c==Sr||c==Gf}function Vm(o){return typeof o=="number"&&o==Ve(o)}function Ru(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ee}function Mt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Dt(o){return o!=null&&typeof o=="object"}var Fm=ty?ar(ty):ek;function JE(o,c){return o===c||kd(o,c,Fd(c))}function XE(o,c,l){return l=typeof l=="function"?l:t,kd(o,c,Fd(c),l)}function ZE(o){return zm(o)&&o!=+o}function eO(o){if(Nk(o))throw new Le(s);return Cy(o)}function tO(o){return o===null}function nO(o){return o==null}function zm(o){return typeof o=="number"||Dt(o)&&Ln(o)==ks}function Fa(o){if(!Dt(o)||Ln(o)!=sr)return!1;var c=ru(o);if(c===null)return!0;var l=dt.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&Zc.call(l)==XA}var Xd=ny?ar(ny):tk;function rO(o){return Vm(o)&&o>=-Ee&&o<=Ee}var Wm=ry?ar(ry):nk;function Bu(o){return typeof o=="string"||!Ne(o)&&Dt(o)&&Ln(o)==In}function ur(o){return typeof o=="symbol"||Dt(o)&&Ln(o)==Wi}var Ao=iy?ar(iy):rk;function iO(o){return o===t}function sO(o){return Dt(o)&&On(o)==zn}function oO(o){return Dt(o)&&Ln(o)==Yf}var aO=wu(Ed),cO=wu(function(o,c){return o<=c});function $m(o){if(!o)return[];if($n(o))return Bu(o)?Wr(o):Wn(o);if(Pa&&o[Pa])return VA(o[Pa]());var c=On(o),l=c==yn?hd:c==kn?Qc:ko;return l(o)}function Ri(o){if(!o)return o===0?o:0;if(o=Br(o),o===ye||o===-ye){var c=o<0?-1:1;return c*qt}return o===o?o:0}function Ve(o){var c=Ri(o),l=c%1;return c===c?l?c-l:c:0}function jm(o){return o?Ts(Ve(o),0,we):0}function Br(o){if(typeof o=="number")return o;if(ur(o))return Gt;if(Mt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Mt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=ly(o);var l=WS.test(o);return l||jS.test(o)?AA(o.slice(2),l?2:8):zS.test(o)?Gt:+o}function qm(o){return ii(o,jn(o))}function uO(o){return o?Ts(Ve(o),-Ee,Ee):o===0?o:0}function ct(o){return o==null?"":cr(o)}var lO=_o(function(o,c){if(Ua(c)||$n(c)){ii(c,hn(c),o);return}for(var l in c)dt.call(c,l)&&Ca(o,l,c[l])}),Gm=_o(function(o,c){ii(c,jn(c),o)}),xu=_o(function(o,c,l,p){ii(c,jn(c),o,p)}),fO=_o(function(o,c,l,p){ii(c,hn(c),o,p)}),dO=Oi(vd);function hO(o,c){var l=vo(o);return c==null?l:Iy(l,c)}var pO=je(function(o,c){o=bt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Kn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=jn(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||jr(re,yo[ne])&&!dt.call(o,ne))&&(o[ne]=w[ne])}return o}),gO=je(function(o){return o.push(t,lm),or(Hm,t,o)});function yO(o,c){return oy(o,Pe(c,3),ri)}function mO(o,c){return oy(o,Pe(c,3),wd)}function bO(o,c){return o==null?o:_d(o,Pe(c,3),jn)}function vO(o,c){return o==null?o:Ry(o,Pe(c,3),jn)}function _O(o,c){return o&&ri(o,Pe(c,3))}function wO(o,c){return o&&wd(o,Pe(c,3))}function SO(o){return o==null?[]:hu(o,hn(o))}function AO(o){return o==null?[]:hu(o,jn(o))}function Zd(o,c,l){var p=o==null?t:Rs(o,c);return p===t?l:p}function kO(o,c){return o!=null&&hm(o,c,G1)}function eh(o,c){return o!=null&&hm(o,c,H1)}var IO=sm(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),o[c]=l},nh(qn)),EO=sm(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),dt.call(o,c)?o[c].push(l):o[c]=[l]},Pe),OO=je(La);function hn(o){return $n(o)?Ay(o):Id(o)}function jn(o){return $n(o)?Ay(o,!0):ik(o)}function PO(o,c){var l={};return c=Pe(c,3),ri(o,function(p,b,w){Ii(l,c(p,b,w),p)}),l}function TO(o,c){var l={};return c=Pe(c,3),ri(o,function(p,b,w){Ii(l,b,c(p,b,w))}),l}var RO=_o(function(o,c,l){pu(o,c,l)}),Hm=_o(function(o,c,l,p){pu(o,c,l,p)}),BO=Oi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Tt(c,function(w){return w=Qi(w,o),p||(p=w.length>1),w}),ii(o,Ud(o),l),p&&(l=Pr(l,m|I|O,Ik));for(var b=c.length;b--;)Bd(l,c[b]);return l});function xO(o,c){return Ym(o,Tu(Pe(c)))}var CO=Oi(function(o,c){return o==null?{}:ok(o,c)});function Ym(o,c){if(o==null)return{};var l=Tt(Ud(o),function(p){return[p]});return c=Pe(c),Vy(o,l,function(p,b){return c(p,b[0])})}function MO(o,c,l){c=Qi(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[si(c[p])];w===t&&(p=b,w=l),o=Ti(w)?w.call(o):w}return o}function LO(o,c,l){return o==null?o:Na(o,c,l)}function KO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Na(o,c,l,p)}var Qm=cm(hn),Jm=cm(jn);function NO(o,c,l){var p=Ne(o),b=p||Xi(o)||Ao(o);if(c=Pe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:Mt(o)?l=Ti(w)?vo(ru(o)):{}:l={}}return(b?Ir:ri)(o,function(P,B,U){return c(l,P,B,U)}),l}function DO(o,c){return o==null?!0:Bd(o,c)}function UO(o,c,l){return o==null?o:jy(o,c,Md(l))}function VO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:jy(o,c,Md(l),p)}function ko(o){return o==null?[]:dd(o,hn(o))}function FO(o){return o==null?[]:dd(o,jn(o))}function zO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Br(l),l=l===l?l:0),c!==t&&(c=Br(c),c=c===c?c:0),Ts(Br(o),c,l)}function WO(o,c,l){return c=Ri(c),l===t?(l=c,c=0):l=Ri(l),o=Br(o),Y1(o,c,l)}function $O(o,c,l){if(l&&typeof l!="boolean"&&Kn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Ri(o),c===t?(c=o,o=0):c=Ri(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=wy();return En(o+b*(c-o+SA("1e-"+((b+"").length-1))),c)}return Pd(o,c)}var jO=wo(function(o,c,l){return c=c.toLowerCase(),o+(l?Xm(c):c)});function Xm(o){return th(ct(o).toLowerCase())}function Zm(o){return o=ct(o),o&&o.replace(GS,LA).replace(dA,"")}function qO(o,c,l){o=ct(o),c=cr(c);var p=o.length;l=l===t?p:Ts(Ve(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function GO(o){return o=ct(o),o&&OS.test(o)?o.replace(Rg,KA):o}function HO(o){return o=ct(o),o&&CS.test(o)?o.replace(Qf,"\\$&"):o}var YO=wo(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),QO=wo(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),JO=nm("toLowerCase");function XO(o,c,l){o=ct(o),c=Ve(c);var p=c?po(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return _u(au(b),l)+o+_u(ou(b),l)}function ZO(o,c,l){o=ct(o),c=Ve(c);var p=c?po(o):0;return c&&p<c?o+_u(c-p,l):o}function eP(o,c,l){o=ct(o),c=Ve(c);var p=c?po(o):0;return c&&p<c?_u(c-p,l)+o:o}function tP(o,c,l){return l||c==null?c=0:c&&(c=+c),c1(ct(o).replace(Jf,""),c||0)}function nP(o,c,l){return(l?Kn(o,c,l):c===t)?c=1:c=Ve(c),Td(ct(o),c)}function rP(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var iP=wo(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function sP(o,c,l){return l&&typeof l!="number"&&Kn(o,c,l)&&(c=l=t),l=l===t?we:l>>>0,l?(o=ct(o),o&&(typeof c=="string"||c!=null&&!Xd(c))&&(c=cr(c),!c&&ho(o))?Ji(Wr(o),0,l):o.split(c,l)):[]}var oP=wo(function(o,c,l){return o+(l?" ":"")+th(c)});function aP(o,c,l){return o=ct(o),l=l==null?0:Ts(Ve(l),0,o.length),c=cr(c),o.slice(l,l+c.length)==c}function cP(o,c,l){var p=_.templateSettings;l&&Kn(o,c,l)&&(c=t),o=ct(o),c=xu({},c,p,um);var b=xu({},c.imports,p.imports,um),w=hn(b),P=dd(b,w),B,U,ne=0,re=c.interpolate||jc,ce="__p += '",ge=pd((c.escape||jc).source+"|"+re.source+"|"+(re===Bg?FS:jc).source+"|"+(c.evaluate||jc).source+"|$","g"),Se="//# sourceURL="+(dt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mA+"]")+`
`;o.replace(ge,function(Be,Ge,Je,lr,Nn,fr){return Je||(Je=lr),ce+=o.slice(ne,fr).replace(HS,NA),Ge&&(B=!0,ce+=`' +
__e(`+Ge+`) +
'`),Nn&&(U=!0,ce+=`';
`+Nn+`;
__p += '`),Je&&(ce+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),ne=fr+Be.length,Be}),ce+=`';
`;var Re=dt.call(c,"variable")&&c.variable;if(!Re)ce=`with (obj) {
`+ce+`
}
`;else if(US.test(Re))throw new Le(u);ce=(U?ce.replace(ft,""):ce).replace(kS,"$1").replace(IS,"$1;"),ce="function("+(Re||"obj")+`) {
`+(Re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Fe=tb(function(){return st(w,Se+"return "+ce).apply(t,P)});if(Fe.source=ce,Jd(Fe))throw Fe;return Fe}function uP(o){return ct(o).toLowerCase()}function lP(o){return ct(o).toUpperCase()}function fP(o,c,l){if(o=ct(o),o&&(l||c===t))return ly(o);if(!o||!(c=cr(c)))return o;var p=Wr(o),b=Wr(c),w=fy(p,b),P=dy(p,b)+1;return Ji(p,w,P).join("")}function dP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.slice(0,py(o)+1);if(!o||!(c=cr(c)))return o;var p=Wr(o),b=dy(p,Wr(c))+1;return Ji(p,0,b).join("")}function hP(o,c,l){if(o=ct(o),o&&(l||c===t))return o.replace(Jf,"");if(!o||!(c=cr(c)))return o;var p=Wr(o),b=fy(p,Wr(c));return Ji(p,b).join("")}function pP(o,c){var l=K,p=j;if(Mt(c)){var b="separator"in c?c.separator:b;l="length"in c?Ve(c.length):l,p="omission"in c?cr(c.omission):p}o=ct(o);var w=o.length;if(ho(o)){var P=Wr(o);w=P.length}if(l>=w)return o;var B=l-po(p);if(B<1)return p;var U=P?Ji(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),Xd(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=pd(b.source,ct(xg.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(cr(b),B)!=B){var ge=U.lastIndexOf(b);ge>-1&&(U=U.slice(0,ge))}return U+p}function gP(o){return o=ct(o),o&&ES.test(o)?o.replace(Tg,$A):o}var yP=wo(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),th=nm("toUpperCase");function eb(o,c,l){return o=ct(o),c=l?t:c,c===t?UA(o)?GA(o):RA(o):o.match(c)||[]}var tb=je(function(o,c){try{return or(o,t,c)}catch(l){return Jd(l)?l:new Le(l)}}),mP=Oi(function(o,c){return Ir(c,function(l){l=si(l),Ii(o,l,Yd(o[l],o))}),o});function bP(o){var c=o==null?0:o.length,l=Pe();return o=c?Tt(o,function(p){if(typeof p[1]!="function")throw new Er(a);return[l(p[0]),p[1]]}):[],je(function(p){for(var b=-1;++b<c;){var w=o[b];if(or(w[0],this,p))return or(w[1],this,p)}})}function vP(o){return $1(Pr(o,m))}function nh(o){return function(){return o}}function _P(o,c){return o==null||o!==o?c:o}var wP=im(),SP=im(!0);function qn(o){return o}function rh(o){return My(typeof o=="function"?o:Pr(o,m))}function AP(o){return Ky(Pr(o,m))}function kP(o,c){return Ny(o,Pr(c,m))}var IP=je(function(o,c){return function(l){return La(l,o,c)}}),EP=je(function(o,c){return function(l){return La(o,l,c)}});function ih(o,c,l){var p=hn(c),b=hu(c,p);l==null&&!(Mt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=hu(c,hn(c)));var w=!(Mt(l)&&"chain"in l)||!!l.chain,P=Ti(o);return Ir(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=Wn(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,ji([this.value()],arguments))})}),o}function OP(){return mn._===this&&(mn._=ZA),this}function sh(){}function PP(o){return o=Ve(o),je(function(c){return Dy(c,o)})}var TP=Kd(Tt),RP=Kd(sy),BP=Kd(ad);function nb(o){return Wd(o)?cd(si(o)):ak(o)}function xP(o){return function(c){return o==null?t:Rs(o,c)}}var CP=om(),MP=om(!0);function oh(){return[]}function ah(){return!1}function LP(){return{}}function KP(){return""}function NP(){return!0}function DP(o,c){if(o=Ve(o),o<1||o>Ee)return[];var l=we,p=En(o,we);c=Pe(c),o-=we;for(var b=fd(p,c);++l<o;)c(l);return b}function UP(o){return Ne(o)?Tt(o,si):ur(o)?[o]:Wn(Sm(ct(o)))}function VP(o){var c=++JA;return ct(o)+c}var FP=vu(function(o,c){return o+c},0),zP=Nd("ceil"),WP=vu(function(o,c){return o/c},1),$P=Nd("floor");function jP(o){return o&&o.length?du(o,qn,Sd):t}function qP(o,c){return o&&o.length?du(o,Pe(c,2),Sd):t}function GP(o){return cy(o,qn)}function HP(o,c){return cy(o,Pe(c,2))}function YP(o){return o&&o.length?du(o,qn,Ed):t}function QP(o,c){return o&&o.length?du(o,Pe(c,2),Ed):t}var JP=vu(function(o,c){return o*c},1),XP=Nd("round"),ZP=vu(function(o,c){return o-c},0);function eT(o){return o&&o.length?ld(o,qn):0}function tT(o,c){return o&&o.length?ld(o,Pe(c,2)):0}return _.after=AE,_.ary=Cm,_.assign=lO,_.assignIn=Gm,_.assignInWith=xu,_.assignWith=fO,_.at=dO,_.before=Mm,_.bind=Yd,_.bindAll=mP,_.bindKey=Lm,_.castArray=LE,_.chain=Rm,_.chunk=$k,_.compact=jk,_.concat=qk,_.cond=bP,_.conforms=vP,_.constant=nh,_.countBy=eE,_.create=hO,_.curry=Km,_.curryRight=Nm,_.debounce=Dm,_.defaults=pO,_.defaultsDeep=gO,_.defer=kE,_.delay=IE,_.difference=Gk,_.differenceBy=Hk,_.differenceWith=Yk,_.drop=Qk,_.dropRight=Jk,_.dropRightWhile=Xk,_.dropWhile=Zk,_.fill=eI,_.filter=nE,_.flatMap=sE,_.flatMapDeep=oE,_.flatMapDepth=aE,_.flatten=Em,_.flattenDeep=tI,_.flattenDepth=nI,_.flip=EE,_.flow=wP,_.flowRight=SP,_.fromPairs=rI,_.functions=SO,_.functionsIn=AO,_.groupBy=cE,_.initial=sI,_.intersection=oI,_.intersectionBy=aI,_.intersectionWith=cI,_.invert=IO,_.invertBy=EO,_.invokeMap=lE,_.iteratee=rh,_.keyBy=fE,_.keys=hn,_.keysIn=jn,_.map=Eu,_.mapKeys=PO,_.mapValues=TO,_.matches=AP,_.matchesProperty=kP,_.memoize=Pu,_.merge=RO,_.mergeWith=Hm,_.method=IP,_.methodOf=EP,_.mixin=ih,_.negate=Tu,_.nthArg=PP,_.omit=BO,_.omitBy=xO,_.once=OE,_.orderBy=dE,_.over=TP,_.overArgs=PE,_.overEvery=RP,_.overSome=BP,_.partial=Qd,_.partialRight=Um,_.partition=hE,_.pick=CO,_.pickBy=Ym,_.property=nb,_.propertyOf=xP,_.pull=dI,_.pullAll=Pm,_.pullAllBy=hI,_.pullAllWith=pI,_.pullAt=gI,_.range=CP,_.rangeRight=MP,_.rearg=TE,_.reject=yE,_.remove=yI,_.rest=RE,_.reverse=Gd,_.sampleSize=bE,_.set=LO,_.setWith=KO,_.shuffle=vE,_.slice=mI,_.sortBy=SE,_.sortedUniq=kI,_.sortedUniqBy=II,_.split=sP,_.spread=BE,_.tail=EI,_.take=OI,_.takeRight=PI,_.takeRightWhile=TI,_.takeWhile=RI,_.tap=jI,_.throttle=xE,_.thru=Iu,_.toArray=$m,_.toPairs=Qm,_.toPairsIn=Jm,_.toPath=UP,_.toPlainObject=qm,_.transform=NO,_.unary=CE,_.union=BI,_.unionBy=xI,_.unionWith=CI,_.uniq=MI,_.uniqBy=LI,_.uniqWith=KI,_.unset=DO,_.unzip=Hd,_.unzipWith=Tm,_.update=UO,_.updateWith=VO,_.values=ko,_.valuesIn=FO,_.without=NI,_.words=eb,_.wrap=ME,_.xor=DI,_.xorBy=UI,_.xorWith=VI,_.zip=FI,_.zipObject=zI,_.zipObjectDeep=WI,_.zipWith=$I,_.entries=Qm,_.entriesIn=Jm,_.extend=Gm,_.extendWith=xu,ih(_,_),_.add=FP,_.attempt=tb,_.camelCase=jO,_.capitalize=Xm,_.ceil=zP,_.clamp=zO,_.clone=KE,_.cloneDeep=DE,_.cloneDeepWith=UE,_.cloneWith=NE,_.conformsTo=VE,_.deburr=Zm,_.defaultTo=_P,_.divide=WP,_.endsWith=qO,_.eq=jr,_.escape=GO,_.escapeRegExp=HO,_.every=tE,_.find=rE,_.findIndex=km,_.findKey=yO,_.findLast=iE,_.findLastIndex=Im,_.findLastKey=mO,_.floor=$P,_.forEach=Bm,_.forEachRight=xm,_.forIn=bO,_.forInRight=vO,_.forOwn=_O,_.forOwnRight=wO,_.get=Zd,_.gt=FE,_.gte=zE,_.has=kO,_.hasIn=eh,_.head=Om,_.identity=qn,_.includes=uE,_.indexOf=iI,_.inRange=WO,_.invoke=OO,_.isArguments=Cs,_.isArray=Ne,_.isArrayBuffer=WE,_.isArrayLike=$n,_.isArrayLikeObject=Wt,_.isBoolean=$E,_.isBuffer=Xi,_.isDate=jE,_.isElement=qE,_.isEmpty=GE,_.isEqual=HE,_.isEqualWith=YE,_.isError=Jd,_.isFinite=QE,_.isFunction=Ti,_.isInteger=Vm,_.isLength=Ru,_.isMap=Fm,_.isMatch=JE,_.isMatchWith=XE,_.isNaN=ZE,_.isNative=eO,_.isNil=nO,_.isNull=tO,_.isNumber=zm,_.isObject=Mt,_.isObjectLike=Dt,_.isPlainObject=Fa,_.isRegExp=Xd,_.isSafeInteger=rO,_.isSet=Wm,_.isString=Bu,_.isSymbol=ur,_.isTypedArray=Ao,_.isUndefined=iO,_.isWeakMap=sO,_.isWeakSet=oO,_.join=uI,_.kebabCase=YO,_.last=Rr,_.lastIndexOf=lI,_.lowerCase=QO,_.lowerFirst=JO,_.lt=aO,_.lte=cO,_.max=jP,_.maxBy=qP,_.mean=GP,_.meanBy=HP,_.min=YP,_.minBy=QP,_.stubArray=oh,_.stubFalse=ah,_.stubObject=LP,_.stubString=KP,_.stubTrue=NP,_.multiply=JP,_.nth=fI,_.noConflict=OP,_.noop=sh,_.now=Ou,_.pad=XO,_.padEnd=ZO,_.padStart=eP,_.parseInt=tP,_.random=$O,_.reduce=pE,_.reduceRight=gE,_.repeat=nP,_.replace=rP,_.result=MO,_.round=XP,_.runInContext=D,_.sample=mE,_.size=_E,_.snakeCase=iP,_.some=wE,_.sortedIndex=bI,_.sortedIndexBy=vI,_.sortedIndexOf=_I,_.sortedLastIndex=wI,_.sortedLastIndexBy=SI,_.sortedLastIndexOf=AI,_.startCase=oP,_.startsWith=aP,_.subtract=ZP,_.sum=eT,_.sumBy=tT,_.template=cP,_.times=DP,_.toFinite=Ri,_.toInteger=Ve,_.toLength=jm,_.toLower=uP,_.toNumber=Br,_.toSafeInteger=uO,_.toString=ct,_.toUpper=lP,_.trim=fP,_.trimEnd=dP,_.trimStart=hP,_.truncate=pP,_.unescape=gP,_.uniqueId=VP,_.upperCase=yP,_.upperFirst=th,_.each=Bm,_.eachRight=xm,_.first=Om,ih(_,function(){var o={};return ri(_,function(c,l){dt.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,Ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),Ir(["drop","take"],function(o,c){Qe.prototype[o]=function(l){l=l===t?1:tn(Ve(l),0);var p=this.__filtered__&&!c?new Qe(this):this.clone();return p.__filtered__?p.__takeCount__=En(l,p.__takeCount__):p.__views__.push({size:En(l,we),type:o+(p.__dir__<0?"Right":"")}),p},Qe.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),Ir(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==z||l==xe;Qe.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Pe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),Ir(["head","last"],function(o,c){var l="take"+(c?"Right":"");Qe.prototype[o]=function(){return this[l](1).value()[0]}}),Ir(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Qe.prototype[o]=function(){return this.__filtered__?new Qe(this):this[l](1)}}),Qe.prototype.compact=function(){return this.filter(qn)},Qe.prototype.find=function(o){return this.filter(o).head()},Qe.prototype.findLast=function(o){return this.reverse().find(o)},Qe.prototype.invokeMap=je(function(o,c){return typeof o=="function"?new Qe(this):this.map(function(l){return La(l,o,c)})}),Qe.prototype.reject=function(o){return this.filter(Tu(Pe(o)))},Qe.prototype.slice=function(o,c){o=Ve(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Qe(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=Ve(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Qe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qe.prototype.toArray=function(){return this.take(we)},ri(Qe.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof Qe,ne=B[0],re=U||Ne(P),ce=function(Ge){var Je=b.apply(_,ji([Ge],B));return p&&ge?Je[0]:Je};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ge=this.__chain__,Se=!!this.__actions__.length,Re=w&&!ge,Fe=U&&!Se;if(!w&&re){P=Fe?P:new Qe(this);var Be=o.apply(P,B);return Be.__actions__.push({func:Iu,args:[ce],thisArg:t}),new Or(Be,ge)}return Re&&Fe?o.apply(this,B):(Be=this.thru(ce),Re?p?Be.value()[0]:Be.value():Be)})}),Ir(["pop","push","shift","sort","splice","unshift"],function(o){var c=Jc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Ne(w)?w:[],b)}return this[l](function(P){return c.apply(Ne(P)?P:[],b)})}}),ri(Qe.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";dt.call(bo,p)||(bo[p]=[]),bo[p].push({name:c,func:l})}}),bo[bu(t,M).name]=[{name:"wrapper",func:t}],Qe.prototype.clone=g1,Qe.prototype.reverse=y1,Qe.prototype.value=m1,_.prototype.at=qI,_.prototype.chain=GI,_.prototype.commit=HI,_.prototype.next=YI,_.prototype.plant=JI,_.prototype.reverse=XI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=ZI,_.prototype.first=_.prototype.head,Pa&&(_.prototype[Pa]=QI),_},go=HA();Is?((Is.exports=go)._=go,rd._=go):mn._=go}).call(F)})(Ml,Ml.exports);var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.OrderCacheService=void 0;const vv=Ml.exports,oi=eS,_v=hf,Hu=ka;class GD{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,oi.observable)([]),this.observableData=(0,oi.makeAutoObservable)(this.observableData),(0,oi.makeObservable)(this,{buyOrdersCache:oi.computed,sellOrdersCache:oi.computed,allOrdersCache:oi.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,vv.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:Hu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===_v.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:Hu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,vv.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,oi.runInAction)(()=>{this.orderChanges.push({eventType:Hu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,oi.runInAction)(()=>{this.orderChanges.push({eventType:Hu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===_v.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}Tf.OrderCacheService=GD;var Ia={},Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.createTransactionFromInstructions=void 0;const HD=Vi,YD=r=>{const e=new HD.Transaction;return e.add(...r),e};Rf.createTransactionFromInstructions=YD;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.TEN_THOUSAND=da.ONE_MILLION=void 0;da.ONE_MILLION=1e6;da.TEN_THOUSAND=1e4;var Gn=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.GmClientService=void 0;const es=Vi,Yu=ug,xi=ms,Mh=Rf,wv=Fr,Po=hf,Sv=da,QD=rr,JD=Nl;class XD{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return Gn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,xi.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/Sv.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return Gn(this,void 0,void 0,function*(){const n=yield(0,xi.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return Gn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return Gn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return Gn(this,void 0,void 0,function*(){const i=yield(0,xi.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return Gn(this,void 0,void 0,function*(){const s=yield(0,xi.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return Gn(this,void 0,void 0,function*(){const s=yield(0,xi.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return Gn(this,void 0,void 0,function*(){const i=yield(0,xi.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return Gn(this,void 0,void 0,function*(){let h=Yu.createInitializeSellOrderInstruction,d=n,m=i;f===Po.OrderSide.Buy&&(h=Yu.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,wv.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:C,instructions:A}=O;return{transaction:(0,Mh.createTransactionFromInstructions)(A),signers:C}})}getBnPriceForCurrency(e,t,n,i){return Gn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,QD.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return Gn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Yu.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,Mh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new es.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new es.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return Gn(this,void 0,void 0,function*(){const f=new es.PublicKey(t.id),h=new es.PublicKey(t.orderMint),d=new es.PublicKey(t.currencyMint),m=new es.PublicKey(t.owner),I=t.orderType===Po.OrderSide.Buy?n:new es.PublicKey(t.owner),O=yield(0,wv.getAssociatedTokenAddress)(n,t.orderType===Po.OrderSide.Buy?h:d),C=yield this.getRegisteredCurrencies(e,s),{saVault:A}=C.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,JD.getStakingAccount)(a,I,u),{instructions:M,signers:Y}=yield(0,Yu.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new es.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,Mh.createTransactionFromInstructions)(M),signers:Y}})}accountItemsToOrders(e,t,n,i){return Gn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?Po.OrderSide.Buy:Po.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),C=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),M=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new Po.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:C,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:M,slotContext:i})})})}getAllFeeExemptions(e,t){return Gn(this,void 0,void 0,function*(){const n=[],i=yield(0,xi.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/Sv.TEN_THOUSAND});return n})}}Ia.GmClientService=XD;var Fc={},Qu=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.GmEventService=void 0;const qa=mt,Lh=df,Kh=ka,ZD=Ia,e2=rr,Ju=ka;class t2{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Qu(this,void 0,void 0,function*(){this.idl=(0,e2.getGmLogsIDL)(this.programId),this.provider=new qa.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new qa.Program(this.idl,this.programId,this.provider,{instruction:new qa.BorshInstructionCoder(this.idl),accounts:new qa.BorshAccountsCoder(this.idl),state:null,events:new qa.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Ju.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Ju.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Ju.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Ju.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Qu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Qu(this,void 0,void 0,function*(){const t=yield new ZD.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new Lh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?Lh.OrderSide.Buy:Lh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(Kh.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(Kh.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(Kh.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Qu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Fc.GmEventService=t2;var To=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Of,"__esModule",{value:!0});Of.GmOrderbookService=void 0;const n2=qD,r2=Ml.exports,i2=Tf,Nh=ka,Av=Ia,kv=Fc;class Bf{constructor(e,t,n=60){this.gmClientService=new Av.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new i2.OrderCacheService,this.gmClientService=new Av.GmClientService,this.gmEventService=new kv.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return To(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,n2.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},Bf.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return To(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return To(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return To(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new kv.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return To(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,r2.pull)(this.eventCallBacks,e)}loadInitialOrders(){return To(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case Nh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case Nh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case Nh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}Of.GmOrderbookService=Bf;Bf.HEALTH_CHECK_RATE=5e3;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Of,r),t(Ia,r),t(Fc,r)})(aS);(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ug,r),t(ms,r),t(ka,r),t(rr,r),t(df,r),t(aS,r)})(cg);var hS=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(qs,"__esModule",{value:!0});qs.createAccountTransaction=qs.createAccountInstruction=void 0;const Ll=mt,wp=Vi,pS=cg;function s2(r,e,t,n){return hS(this,void 0,void 0,function*(){const i=(0,pS.getGmIDL)(n),s=new Ll.AnchorProvider(r,null,null),a=new Ll.Program(i,n,s);return wp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}qs.createAccountInstruction=s2;function o2(r,e,t,n){return hS(this,void 0,void 0,function*(){const i=(0,pS.getGmIDL)(n),s=new Ll.AnchorProvider(r,null,null),a=new Ll.Program(i,n,s),u=new wp.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(wp.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}qs.createAccountTransaction=o2;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(sn,r),t(of,r),t(qs,r)})(Fr);var a2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ql,"__esModule",{value:!0});ql.harvestRewardsInstruction=void 0;const c2=mt,u2=to,l2=Fr,f2=nr;function d2({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return a2(this,void 0,void 0,function*(){const a=(0,f2.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,l2.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof c2.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,u2.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}ql.harvestRewardsInstruction=d2;var xf={},h2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xf,"__esModule",{value:!0});xf.createInitializeStakingInstruction=void 0;const p2=nr;function g2({connection:r,updateAuthorityAccount:e,programId:t}){return h2(this,void 0,void 0,function*(){const n=(0,p2.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}xf.createInitializeStakingInstruction=g2;var Cf={},Mf={},Vn={},vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.ESCROW_AUTH=vn.STAKING_VARS=vn.STAKING_ESCROW=vn.STAKING_ACCOUNT=vn.REWARD_AUTH=vn.REWARD_ACCOUNT=vn.REGISTERED_STAKE=void 0;vn.REGISTERED_STAKE=Te.Buffer.from("registered-stake");vn.REWARD_ACCOUNT=Te.Buffer.from("reward-account");vn.REWARD_AUTH=Te.Buffer.from("reward-vault-authority");vn.STAKING_ACCOUNT=Te.Buffer.from("staking-account");vn.STAKING_ESCROW=Te.Buffer.from("staking-escrow");vn.STAKING_VARS=Te.Buffer.from("staking-vars");vn.ESCROW_AUTH=Te.Buffer.from("escrow-auth");var Ea=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.getRewardAuth=Vn.getTokenEscrow=Vn.getStakingVarsAccount=Vn.getStakingAccountsForRegisteredStake=Vn.getStakingAccount=Vn.getRegisteredStake=void 0;const Iv=mt,zc=Vi,y2=nr,Wc=vn;function m2(r,e,t,n){return Ea(this,void 0,void 0,function*(){return zc.PublicKey.findProgramAddress([Wc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Vn.getRegisteredStake=m2;function b2(r,e,t){return Ea(this,void 0,void 0,function*(){return zc.PublicKey.findProgramAddress([Wc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Vn.getStakingAccount=b2;function v2(r,e,t){return Ea(this,void 0,void 0,function*(){const n=new Iv.AnchorProvider(r,null,null),i=(0,y2.getStakingIdl)(e),s=new Iv.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Vn.getStakingAccountsForRegisteredStake=v2;function _2(r){return Ea(this,void 0,void 0,function*(){return zc.PublicKey.findProgramAddress([Wc.STAKING_VARS],r)})}Vn.getStakingVarsAccount=_2;function w2(r,e,t){return Ea(this,void 0,void 0,function*(){return zc.PublicKey.findProgramAddress([Wc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Vn.getTokenEscrow=w2;function S2(r,e){return Ea(this,void 0,void 0,function*(){return zc.PublicKey.findProgramAddress([Wc.REWARD_AUTH,e.toBuffer()],r)})}Vn.getRewardAuth=S2;var ls={},Og=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ls,"__esModule",{value:!0});ls.getStakingVarsAccountInfo=ls.getStakingAccountInfo=ls.getRegisteredStakeAccountInfo=void 0;const Pg=Ws,A2=Vn;function k2(r,e,t){return Og(this,void 0,void 0,function*(){return yield(0,Pg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}ls.getRegisteredStakeAccountInfo=k2;function I2(r,e,t){return Og(this,void 0,void 0,function*(){return yield(0,Pg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}ls.getStakingAccountInfo=I2;function E2(r,e){return Og(this,void 0,void 0,function*(){const t=(0,Pg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,A2.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}ls.getStakingVarsAccountInfo=E2;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Vn,r),t(ls,r),t(vn,r)})(Mf);var O2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.registerStakeInstruction=void 0;const Ev=mt,P2=to,T2=Mf,R2=nr;function B2({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return O2(this,void 0,void 0,function*(){const u=(0,R2.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,T2.getRegisteredStake)(a,e,n,i),d=yield(0,P2.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new Ev.BN(t),new Ev.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}Cf.registerStakeInstruction=B2;var Lf={},x2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.createSettleStakingAccountInstruction=void 0;const C2=nr;function M2({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return x2(this,void 0,void 0,function*(){const a=(0,C2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}Lf.createSettleStakingAccountInstruction=M2;var Kf={},L2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.stakeTokensInstruction=void 0;const K2=to,N2=nr;function D2({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return L2(this,void 0,void 0,function*(){const f=(0,N2.getStakingProgram)({connection:r,programId:u}),h=yield(0,K2.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}Kf.stakeTokensInstruction=D2;var Nf={},U2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.unstakeTokensInstruction=void 0;const V2=mt,F2=to,z2=Fr,W2=Mf,$2=nr;function j2({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return U2(this,void 0,void 0,function*(){const s=(0,$2.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,W2.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,z2.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof V2.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,F2.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}Nf.unstakeTokensInstruction=j2;var Df={},q2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Df,"__esModule",{value:!0});Df.updateCooldownPeriodInstruction=void 0;const G2=mt,H2=nr;function Y2({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return q2(this,void 0,void 0,function*(){const s=(0,H2.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new G2.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}Df.updateCooldownPeriodInstruction=Y2;var Uf={},Q2=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.updateRewardMultiplierInstruction=void 0;const J2=mt,X2=nr;function Z2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return Q2(this,void 0,void 0,function*(){const a=(0,X2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new J2.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}Uf.updateRewardMultiplierInstruction=Z2;var Vf={},eU=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.withdrawTokensInstruction=void 0;const tU=mt,nU=to,rU=nr,iU=Fr;function sU({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return eU(this,void 0,void 0,function*(){const u=(0,rU.getStakingProgram)({connection:r,programId:a}),f=yield(0,nU.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,iU.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof tU.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}Vf.withdrawTokensInstruction=sU;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yv,r),t(Dl,r),t(jl,r),t(ql,r),t(xf,r),t(Cf,r),t(Lf,r),t(Kf,r),t(Nf,r),t(Df,r),t(Uf,r),t(Vf,r)})(Hv);var gS={},yS={};Object.defineProperty(yS,"__esModule",{value:!0});(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ec,r),t(yS,r)})(gS);(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Hv,r),t(Mf,r),t(gS,r),t(nr,r)})(Nl);var mS={};(function(r){var e=F&&F.__awaiter||function(m,I,O,C){function A(R){return R instanceof O?R:new O(function(M){M(R)})}return new(O||(O=Promise))(function(R,M){function Y(de){try{oe(C.next(de))}catch(E){M(E)}}function ae(de){try{oe(C.throw(de))}catch(E){M(E)}}function oe(de){de.done?R(de.value):A(de.value).then(Y,ae)}oe((C=C.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=mt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Te.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,C){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,C),M=s(C),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(M,C,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const C=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,C),[M]=yield a(I,O);return yield R.account.playerFactionData.fetch(M)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),C=s(I);return(yield new t.Program(C,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const C=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,C).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(mS);var bS={},Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.gumDropIdl=void 0;Ff.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=F&&F.__createBinding||(Object.create?function(A,R,M,Y){Y===void 0&&(Y=M);var ae=Object.getOwnPropertyDescriptor(R,M);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[M]}}),Object.defineProperty(A,Y,ae)}:function(A,R,M,Y){Y===void 0&&(Y=M),A[Y]=R[M]}),t=F&&F.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=F&&F.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var M in A)M!=="default"&&Object.prototype.hasOwnProperty.call(A,M)&&e(R,A,M);return t(R,A),R},i=F&&F.__awaiter||function(A,R,M,Y){function ae(oe){return oe instanceof M?oe:new M(function(de){de(oe)})}return new(M||(M=Promise))(function(oe,de){function E(Q){try{W(Y.next(Q))}catch(K){de(K)}}function N(Q){try{W(Y.throw(Q))}catch(K){de(K)}}function W(Q){Q.done?oe(Q.value):ae(Q.value).then(E,N)}W((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=mt,a=Pc,u=n(qe),f=sn,h=Ff,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,M=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Te.Buffer.from("ClaimStatus"),A.toArrayLike(Te.Buffer,"le",8),R.toBuffer()],M)});r.getClaimStatusKey=m;const I=(A,R,M,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,M,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,M,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(W=>(0,r.getClaimStatusKey)(W,M,Y)),E=(yield Promise.all(de)).map(W=>W[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const C=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:M,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(M.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),W=oe.get("index"),Q=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!W||!Q||!K)throw new Error("Invalid claim");const j=Q===""?[]:Q.split(",").map(Sr=>{const zt=Te.Buffer.from(u.decode(Sr));if(zt.length!==32)throw new Error("Invalid proof hash length");return zt}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),z=yield R.getAccountInfo(T);if(z===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(z.data),xe=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ee=yield(0,f.getAssociatedTokenAddress)(ye,xe),qt=yield R.getParsedTokenAccountsByOwner(ye,{mint:xe}),Gt=new s.BN(W),we=new s.BN(N),[$e,Zt]=yield(0,r.getClaimStatusKey)(Gt,te,ae),dn=new s.AnchorProvider(R,null,null),Et=new s.Program(h.gumDropIdl,ae,dn),ht=[];return qt.value.length===0&&ht.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,xe,Ee,ye,Y)),ht.push(Et.instruction.claim(Zt,Gt,we,Y,j,{accounts:{distributor:te,claimStatus:$e,from:T,to:Ee,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),ht});r.claimTokenInstructions=C})(bS);var be={},zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.baseIdl=void 0;zf.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.scoreLogBaseIdl=void 0;Wf.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var at=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=mt,wr=Pc,vS=Vi,oU=ns,aU=zf,cU=Wf,zs=Fr;function Ct(r){const e=aU.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Ct;function Cn(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=Cn;function Sn(r,e){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=Sn;function Zn(r,e,t,n){return at(this,void 0,void 0,function*(){const i=[Te.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=Zn;function ti(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=ti;function Mn(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=Mn;function uU(r,e){return at(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Ct(e),i=new ue.Program(n,e,t),[s]=yield Cn(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=uU;function lU(r,e,t,n){return at(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Ct(e),a=new ue.Program(s,e,i),[u]=yield Mn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=lU;function fU(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(cU.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=fU;function dU(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Ct(e),s=new ue.Program(i,e,n),[a]=yield Sn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=dU;function $f(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=$f;function jf(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Te.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=jf;function hU(r,e){return at(this,void 0,void 0,function*(){const t=Ct(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=hU;function pU(r,e){return at(this,void 0,void 0,function*(){const t=Ct(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=pU;function gU(r,e,t){return at(this,void 0,void 0,function*(){const n=Ct(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield Mn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=gU;function yU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const f=Ct(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield $f(u),[O,C]=yield jf(u),[A,R]=yield Cn(u);return yield d.instruction.processInitialize(R,I,C,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:wr.TOKEN_PROGRAM_ID,systemProgram:vS.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=yU;function mU(r,e,t,n,i,s,a,u,f,h,d,m,I){return at(this,void 0,void 0,function*(){const O=Ct(I),C=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,C),[R,M]=yield Sn(I,t),[Y,ae]=yield Cn(I);return yield A.instruction.processRegisterShip(ae,M,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:vS.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=mU;function bU(r,e,t,n){return at(this,void 0,void 0,function*(){const i=Ct(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield Sn(n,t),[h,d]=yield Cn(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=bU;function vU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const s=Ct(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield Sn(i,t),[d,m]=yield Cn(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=vU;function _U(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return at(this,void 0,void 0,function*(){const[u,f]=yield ti(s,n,e),[h,d]=yield Zn(s,n,null,e),[m,I]=yield Mn(s,n,e),[O,C]=yield Sn(s,n),[A]=yield(0,oU.getPlayerFactionPDA)(e,a),R=Ct(s),M=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,M).instruction.processInitialDeposit(I,C,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=_U;function wU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ti(s,n,e),[f,h]=yield Zn(s,n,null,e),[d,m]=yield Mn(s,n,e),[I,O]=yield Sn(s,n),C=Ct(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(C,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=wU;function SU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Zn(u,i,s,t),[I,O]=yield Mn(u,i,t),[C,A]=yield Sn(u,i),[R,M]=yield Cn(u),Y=Ct(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=SU;function AU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Zn(u,i,s,t),[I,O]=yield Mn(u,i,t),[C,A]=yield Sn(u,i),[R,M]=yield Cn(u),Y=Ct(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=AU;function kU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield ti(u,i,t),[d,m]=yield Zn(u,i,s,t),[I,O]=yield Mn(u,i,t),[C,A]=yield Sn(u,i),[R,M]=yield Cn(u),Y=Ct(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,M,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:C,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=kU;function IU(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield Mn(u,i,t),[d,m]=yield Sn(u,i),[I,O]=yield Cn(u),C=Ct(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(C,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=IU;function EU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Mn(i,n,e),[u,f]=yield Sn(i,n),[h,d]=yield Cn(i),m=Ct(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=EU;function OU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Mn(i,n,e),[u,f]=yield Sn(i,n),[h,d]=yield $f(i),[m,I]=yield jf(i),O=Ct(i),C=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,C),R={signers:[],instructions:[]};let M;const Y=yield(0,zs.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(M=ae.publicKey,R.signers.push(ae)):M=ae;const oe=yield A.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:M,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=OU;function PU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Zn(i,n,t,e),[h,d]=yield Mn(i,n,e),[m,I]=yield Sn(i,n),[O,C]=yield Cn(i),A=Ct(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,zs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield M.instruction.processWithdrawFuel(d,C,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=PU;function TU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Zn(i,n,t,e),[h,d]=yield Mn(i,n,e),[m,I]=yield Sn(i,n),[O,C]=yield Cn(i),A=Ct(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,zs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield M.instruction.processWithdrawFood(d,C,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=TU;function RU(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield ti(i,n,e),[u,f]=yield Zn(i,n,t,e),[h,d]=yield Mn(i,n,e),[m,I]=yield Sn(i,n),[O,C]=yield Cn(i),A=Ct(i),R=new ue.AnchorProvider(r,null,null),M=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,zs.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield M.instruction.processWithdrawArms(d,C,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:wr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=RU;function BU(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield ti(s,t,e),[f,h]=yield Zn(s,t,null,e),[d,m]=yield Mn(s,t,e),[I,O]=yield Sn(s,t),[C,A]=yield Cn(s),[R,M]=yield $f(s),[Y,ae]=yield jf(s),oe={signers:[],instructions:[]},de=Ct(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let W;const Q=yield(0,zs.getTokenAccount)(r,e,n),K=Q.tokenAccount;"createInstruction"in Q&&oe.instructions.push(...Q.createInstruction),K instanceof ue.web3.Keypair?(W=K.publicKey,oe.signers.push(K)):W=K;let j;const te=yield(0,zs.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let z;const X=yield(0,zs.getTokenAccount)(r,e,i),xe=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),xe instanceof ue.web3.Keypair?(z=xe.publicKey,oe.signers.push(xe)):z=xe;const ye=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,M,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:C,scoreVarsShipAccount:I,playerAtlasTokenAccount:W,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:z,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:wr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=BU;function xU(r,e,t,n,i,s,a){return at(this,void 0,void 0,function*(){const[u,f]=yield ti(a,t,e),[h,d]=yield Zn(a,t,null,e),[m,I]=yield Zn(a,t,n,e),[O,C]=yield Zn(a,t,i,e),[A,R]=yield Zn(a,t,s,e),[M,Y]=yield Cn(a),[ae,oe]=yield Mn(a,t,e),de=Ct(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,C,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:M,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:wr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=xU;var _S={};Object.defineProperty(_S,"__esModule",{value:!0});var Qt={},As=F&&F.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},CU=F&&F.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.sendTokens=Qt.confirmTokenBalance=Qt.createMint=Qt.mintTokens=Qt.createAssociatedTokenAccountInstruction=Qt.createRequestUnitsInstruction=Qt.Numberu32=Qt.createATokenAccount=Qt.getAtaForMint=void 0;const Vr=mt,yr=Pc,MU=Fr,Ov=dl.exports,Pv=CU(Bv.exports);function wS(r,e){return As(this,void 0,void 0,function*(){return Vr.web3.PublicKey.findProgramAddress([e.toBuffer(),yr.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],yr.ASSOCIATED_TOKEN_PROGRAM_ID)})}Qt.getAtaForMint=wS;function LU(r,e,t,n){return As(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield wS(e,n),s=new Vr.web3.Transaction,a=yield AS(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Qt.createATokenAccount=LU;class SS extends Pv.default{toBuffer(){const e=super.toArray().reverse(),t=Te.Buffer.from(e);if(t.length===4)return t;const n=Te.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Pv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Qt.Numberu32=SS;function KU(r){return As(this,void 0,void 0,function*(){const e=new SS(1e6),t=Te.Buffer.from([0]),n=e.toBuffer();return new Vr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Vr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Te.Buffer.concat([t,n])})})}Qt.createRequestUnitsInstruction=KU;function AS(r,e,t,n){return As(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Vr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:yr.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Vr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Vr.web3.TransactionInstruction({keys:i,programId:yr.ASSOCIATED_TOKEN_PROGRAM_ID,data:Te.Buffer.from([])})})}Qt.createAssociatedTokenAccountInstruction=AS;function NU(r,e,t,n,i){return As(this,void 0,void 0,function*(){const s=new Vr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(yr.Token.createMintToInstruction(yr.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Qt.mintTokens=NU;function DU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=Vr.web3.Keypair.generate(),s=new Vr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(yr.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Vr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:yr.MintLayout.span,programId:yr.TOKEN_PROGRAM_ID});s.add(u);const f=yr.Token.createInitMintInstruction(yr.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Qt.createMint=DU;function UU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,Ov.strict)(i===null),i!==null){const s=(0,MU.byteArrayToLong)(i.data.slice(64,72));(0,Ov.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Qt.confirmTokenBalance=UU;function VU(r,e,t,n){return As(this,void 0,void 0,function*(){const i=new Vr.web3.Transaction;return i.add(yr.Token.createTransferInstruction(yr.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Qt.sendTokens=VU;(function(r){var e=F&&F.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Nl,r),t(mS,r),t(bS,r),t(cg,r),t(be,r),t(_S,r),t(Qt,r),t(qs,r),t(Fr,r)})(ns);const FU={class:"text-overline"},Ga="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",Dh="ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU",Uh="poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",zU=Zs({__name:"AccountTemplate",props:["count","function_name","publicKey","mint","program"],setup(r){const e=r,t=Bn("[empty]");async function n(){switch(e.function_name){case"getRegisteredStake":{const[i]=await ns.getRegisteredStake(new Ce(Ga),new Ce(Dh),new Ce(e.mint),new Ce(Uh));t.value=i}break;case"getStakingAccount":{const[i]=await ns.getRegisteredStake(new Ce(Ga),new Ce(Dh),new Ce(e.mint),new Ce(Uh)),[s]=await ns.getStakingAccount(new Ce(Ga),new Ce(e.publicKey),i);t.value=s}break;case"getTokenEscrow":{const[i]=await ns.getRegisteredStake(new Ce(Ga),new Ce(Dh),new Ce(e.mint),new Ce(Uh)),[s]=await ns.getStakingAccount(new Ce(Ga),new Ce(e.publicKey),i);t.value=await Ho(new Ce(e.mint),s,!0)}break;case"getAssociatedTokenAddress(mint)":t.value=await Ho(new Ce(e.mint),new Ce(e.publicKey),!0,ST,wT.ASSOCIATED_PROGRAM_ID);break;default:t.value="No function called";break}}return Ep(()=>e.count,async()=>{await n()}),(i,s)=>(hi(),Go("div",FU,Dn(t.value),1))}}),WU={class:"row shadow-3 q-pa-md"},$U={class:"col"},jU={class:"row items-center text-h6"},qU={class:"text-primary"},GU={class:"row items-center"},HU={class:"text-weight-bold"},YU=Zs({__name:"AccountSolana",setup(r){const e=Bn(0),t=Bn("none"),n=Bn("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),i=Bn([{label:"Solana",header:"root",children:[{label:"Tokens",header:"generic",children:[{label:"getAssociatedTokenAddress() by mint",function_name:"getAssociatedTokenAddress(mint)",header:"generic",body:"story"}]}]},{label:"StarAtlas-Factory",header:"root",children:[{label:"Staking (Atlas/Polis)",icon:"restaurant_menu",header:"generic",children:[{label:"getRegisteredStake()",function_name:"getRegisteredStake",header:"generic",body:"story"},{label:"getStakingAccount()",function_name:"getStakingAccount",body:"story"},{label:"getTokenEscrow()",function_name:"getTokenEscrow",body:"story"}]}]}]);Rv(()=>{var a;t.value=((a=rn().publicKey.value)==null?void 0:a.toString())??"none"});const s=()=>{e.value++};return Ep(()=>rn().publicKey.value,()=>{var a;t.value=((a=rn().publicKey.value)==null?void 0:a.toString())??"none"}),(a,u)=>(hi(),Go(Ip,null,[an("div",WU,[an("div",$U,[_e(cl,{class:"col",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=f=>t.value=f),label:"Wallet Address"},null,8,["modelValue"]),_e(cl,{class:"col",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f),label:"Token Mint"},null,8,["modelValue"])]),_e(pi,{color:"primary",icon:"send",class:"q-ml-xl",onClick:s})]),_e(ET,{color:"primary",dark:"",nodes:i.value,"node-key":"label",class:"q-pt-md"},{"header-root":He(f=>[an("div",jU,[an("div",qU,Dn(f.node.label),1)])]),"default-header":He(f=>[an("div",GU,[an("div",HU,Dn(f.node.label),1)])]),"body-story":He(f=>[_e(zU,{count:e.value,function_name:f.node.function_name,"public-key":t.value,mint:n.value},null,8,["count","function_name","public-key","mint"])]),_:1},8,["nodes"])],64))}}),pV=Zs({__name:"AccountsPage",setup(r){Bn();const e=Bn("wallet");return(t,n)=>(hi(),ll(iT,{class:"col items-center justify-evenly"},{default:He(()=>[_e(nT,{"no-caps":"","outside-arrows":"","mobile-arrows":"",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i),class:"shadow-2",align:"justify"},{default:He(()=>[_e(ib,{name:"wallet",label:"Wallet"}),_e(ib,{name:"solana",label:"Solana"})]),_:1},8,["modelValue"]),_e(rT,{dark:"",modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=i=>e.value=i),animated:"",class:""},{default:He(()=>[_e(sb,{name:"wallet"},{default:He(()=>[_e(zT)]),_:1}),_e(sb,{name:"solana",class:"q-gutter-md"},{default:He(()=>[_e(YU)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{pV as default};
