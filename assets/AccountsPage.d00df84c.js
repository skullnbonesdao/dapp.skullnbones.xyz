import{Q as AP}from"./QInput.c55b3801.js";import{bX as W,cU as nv,d as Pe,cS as ee,cR as $e,dr as mh,cY as rv,cX as iv,P as St,ds as sv,cT as ov,cW as Zi,cK as Jh,c_ as kP,cZ as av,d2 as IP,bW as sc,dt as Ze,dk as ie,dl as se,dn as Tt,dj as ke,du as Et,dv as dr,dw as li,dx as F,dy as Jo,dz as Qo,dA as xe,dB as fi,dC as x,dD as S,dE as H,dF as G,dG as le,dH as Yt,dI as ml,dJ as ht,dK as he,dq as Dt,dL as oc,dg as Ye,cV as ju,dM as cv,dN as Gr,dO as uv,dP as lv,dQ as fv,dh as dv,di as Qh,dR as xm,dS as EP,dT as OP,dU as PP,dV as TP,au as Xh,J as Cu,bs as RP,b1 as Zh,ai as ep,bx as tp,al as $a,a1 as qu,aX as BP,cJ as xP,as as Ia,cj as MP}from"./index.d567c69a.js";import{Q as CP}from"./QPage.877b9662.js";import{Q as hv}from"./QCard.942a1006.js";import{s as Fs}from"./sha256.7e81bf7a.js";import{L as Mm,r as pv,i as LP}from"./pako.esm.065d9feb.js";import{a as Gu,_ as Ea}from"./defineProperty.4c7ecd84.js";import"./uid.18e34e7d.js";var ja={},bl={},gv={},yv={};Object.defineProperty(yv,"__esModule",{value:!0});var vl={},Jn={},Rs={},np={exports:{}};const KP=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},mv=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=KP(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};np.exports=mv;np.exports.default=mv;var yn=np.exports,Ne={};(function(r){var e=W&&W.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=Mm,n=pv,i=e(nv.exports);var s=Mm;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Pe.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,z){super(j.span,z),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,j){return new O(K,j)}r.option=M;function A(K){return new m(t.u8(),R,C,K)}r.bool=A;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:z})=>z,z=>({values:z}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function z({tag:X,data:Be}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Be}return new m(T,z,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Pe.Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((z,X)=>T.addVariant(X,z,z.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:z})=>z,z=>({values:z}),te)}r.array=N;class V extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),z=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,z]}encode(j,te,T){T=T||0;const z=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+z);return z+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function J(K,j,te){const T=t.u32("length"),z=t.struct([T,t.seq(new V(K,j),t.offset(T,-T.span),"values")]);return new m(z,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=J})(Ne);var NP=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function bv(r){return new TextDecoder("utf-8").decode(r)}function vv(r){return new TextEncoder().encode(r)}var DP=Object.freeze({__proto__:null,decode:bv,encode:vv});function _v(r){return $e.encode(r)}var UP=Object.freeze({__proto__:null,encode:_v,decode:function(r){return $e.decode(r)}});function wv(r){return ee.Buffer.from(sv(r))}var FP=Object.freeze({__proto__:null,encode:function(r){return mh(r)},decode:wv}),WP=Object.freeze({__proto__:null,hex:NP,utf8:DP,bs58:UP,base64:FP});function rp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function Sv(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function _l(r,e={}){r.forEach(t=>{if("accounts"in t)_l(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Wr(r){return r instanceof St?r:new St(r)}class zP extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Io(r){return typeof r=="object"&&r!=null}function es(r){return typeof r=="string"?JSON.stringify(r):""+r}function VP(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+es(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*Cm(r,e,t,n){var i;Io(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=VP(s,e,t,n);a&&(yield a)}}function*ip(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Io(e.schema)&&Io(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=ip(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):Io(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class is{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>Cm(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>Cm(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=La(t,n);if(i[0])throw i[0]}(e,this)}create(e){return sp(e,this)}is(e){return Av(e,this)}mask(e){return function(t,n){const i=La(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return La(e,this,t)}}function sp(r,e){const t=La(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Av(r,e){return!La(r,e)[0]}function La(r,e,t={}){const n=ip(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new zP(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function ac(r,e){return new is({type:r,schema:null,validator:e})}function Vd(r){return new is({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+es(e)})}function Lm(r){const e=es(r),t=typeof r;return new is({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+es(n)})}function yu(r){return new is({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function mu(){return ac("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+es(r))}function Lu(r){return new is({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function As(){return ac("string",r=>typeof r=="string"||"Expected a string, but received: "+es(r))}function ji(r){const e=Object.keys(r);return new is({type:"type",schema:r,*entries(t){if(Io(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Io(t)||"Expected an object, but received: "+es(t)})}function kv(r){const e=r.map(t=>t.type).join(" | ");return new is({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=ip(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+es(t),...i]}})}function Iv(){return ac("unknown",()=>!0)}async function Ev(r,e,t){if(e.length<=99)return await Km(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>Km(r,i,t)))).flat()}}async function Km(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function Ov(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=sp(await r._rpcRequest("simulateTransaction",h),qP);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new ov("failed to simulate transaction: "+d.error.message,m)}return d.result}function $P(r){return function(e,t,n){return new is({...e,coercer:(i,s)=>Av(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(Pv(r),jP,e=>"error"in e?e:{...e,result:sp(e.result,r)})}const jP=Pv(Iv());function Pv(r){return kv([ji({jsonrpc:Lm("2.0"),id:As(),result:r}),ji({jsonrpc:Lm("2.0"),id:As(),error:ji({code:Iv(),message:As(),data:Lu(ac("any",()=>!0))})})])}const qP=(Nm=ji({err:yu(kv([ji({}),As()])),logs:yu(Vd(As())),accounts:Lu(yu(Vd(yu(ji({executable:ac("boolean",r=>typeof r=="boolean"),owner:As(),lamports:mu(),data:Vd(As()),rentEpoch:Lu(mu())}))))),unitsConsumed:Lu(mu())}),$P(ji({context:ji({slot:mu()}),value:Nm})));var Nm,GP=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=Wr(r),n||(n=xo());const i=new rv;if(i.add(new iv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:Ev,simulateTransaction:Ov});class Tv{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await Dm(this.connection,s,n)}catch(a){if(a instanceof Rv){const u=await this.connection.getTransaction(_v(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new ov(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await Dm(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await Ov(this.connection,e,t,n,i);if(s.value.err)throw new HP(s.value);return s.value}}class HP extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Dm(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new Rv(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class Rv extends Error{constructor(e){super(e)}}function YP(r){bh=r}function xo(){return bh===null?Tv.local():bh}let bh=null;const JP=new Set(["anchor-deprecated-state","debug-logs"]),Bv=new Map;function wl(r){return Bv.get(r)!==void 0}var QP=Object.freeze({__proto__:null,set:function(r){if(!JP.has(r))throw new Error("Invalid feature");Bv.set(r,!0)},isSet:wl});class qa extends Error{constructor(e){super(e),this.name="IdlError"}}class Xo{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new St(u))}return new Xo(s)}}class Eo extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=Xo.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new St(d),new St(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Eo(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),M={code:m,number:parseInt(I)},A={file:h,line:parseInt(d)};return new Eo(M,O,i,e,A,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,M={code:d,number:parseInt(m)};return new Eo(M,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Ga extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=Xo.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new Ga(s,a,e.logs):(a=xv.get(s),a!==void 0?new Ga(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function op(r,e){wl("debug-logs")&&console.log("Translating error:",r);const t=Eo.parse(r.logs);if(t)return t;const n=Ga.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=Xo.parse(r.logs),new Proxy(r,i)}return r}const Ee={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},xv=new Map([[Ee.InstructionMissing,"8 byte instruction identifier not provided"],[Ee.InstructionFallbackNotFound,"Fallback functions are not supported"],[Ee.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Ee.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Ee.IdlInstructionStub,"The program was compiled without idl instructions"],[Ee.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Ee.ConstraintMut,"A mut constraint was violated"],[Ee.ConstraintHasOne,"A has_one constraint was violated"],[Ee.ConstraintSigner,"A signer constraint was violated"],[Ee.ConstraintRaw,"A raw constraint was violated"],[Ee.ConstraintOwner,"An owner constraint was violated"],[Ee.ConstraintRentExempt,"A rent exemption constraint was violated"],[Ee.ConstraintSeeds,"A seeds constraint was violated"],[Ee.ConstraintExecutable,"An executable constraint was violated"],[Ee.ConstraintState,"A state constraint was violated"],[Ee.ConstraintAssociated,"An associated constraint was violated"],[Ee.ConstraintAssociatedInit,"An associated init constraint was violated"],[Ee.ConstraintClose,"A close constraint was violated"],[Ee.ConstraintAddress,"An address constraint was violated"],[Ee.ConstraintZero,"Expected zero account discriminant"],[Ee.ConstraintTokenMint,"A token mint constraint was violated"],[Ee.ConstraintTokenOwner,"A token owner constraint was violated"],[Ee.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Ee.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Ee.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Ee.ConstraintSpace,"A space constraint was violated"],[Ee.RequireViolated,"A require expression was violated"],[Ee.RequireEqViolated,"A require_eq expression was violated"],[Ee.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Ee.RequireNeqViolated,"A require_neq expression was violated"],[Ee.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Ee.RequireGtViolated,"A require_gt expression was violated"],[Ee.RequireGteViolated,"A require_gte expression was violated"],[Ee.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Ee.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Ee.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Ee.AccountDidNotDeserialize,"Failed to deserialize the account"],[Ee.AccountDidNotSerialize,"Failed to serialize the account"],[Ee.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Ee.AccountNotMutable,"The given account is not mutable"],[Ee.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Ee.InvalidProgramId,"Program ID was not as expected"],[Ee.InvalidProgramExecutable,"Program account is not executable"],[Ee.AccountNotSigner,"The given account did not sign"],[Ee.AccountNotSystemOwned,"The given account is not owned by the system program"],[Ee.AccountNotInitialized,"The program expected this account to be already initialized"],[Ee.AccountNotProgramData,"The given account is not a program data account"],[Ee.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Ee.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Ee.StateInvalidAddress,"The given state account does not have the correct address"],[Ee.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Ee.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hu=function(){return Hu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Hu.apply(this,arguments)};function XP(r){return r.toLowerCase()}var ZP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],eT=/[^A-Z0-9]+/gi;function Um(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function tT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?ZP:i,a=n.stripRegexp,u=a===void 0?eT:a,f=n.transform,h=f===void 0?XP:f,d=n.delimiter,m=d===void 0?" ":d,I=Um(Um(t,s,"$1\0$2"),u,"\0"),O=0,M=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(O,M).split("\0").map(h).join(m)}(r,Hu({delimiter:"."},e))}class ur{static fieldLayout(e,t){const n=e.name!==void 0?yn(e.name):void 0;switch(e.type){case"bool":return Ne.bool(n);case"u8":return Ne.u8(n);case"i8":return Ne.i8(n);case"u16":return Ne.u16(n);case"i16":return Ne.i16(n);case"u32":return Ne.u32(n);case"i32":return Ne.i32(n);case"f32":return Ne.f32(n);case"u64":return Ne.u64(n);case"i64":return Ne.i64(n);case"f64":return Ne.f64(n);case"u128":return Ne.u128(n);case"i128":return Ne.i128(n);case"bytes":return Ne.vecU8(n);case"string":return Ne.str(n);case"publicKey":return Ne.publicKey(n);default:if("vec"in e.type)return Ne.vec(ur.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ne.option(ur.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new qa("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new qa(`Type not found: ${JSON.stringify(e)}`);return ur.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=ur.fieldLayout({name:void 0,type:i},t);return Ne.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>ur.fieldLayout(s,t));return Ne.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=yn(s.name);if(s.fields===void 0)return Ne.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return ur.fieldLayout(f,t)});return Ne.struct(u,a)});return n!==void 0?Ne.rustEnum(i).replicate(n):Ne.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Sl{constructor(e){this.idl=e,this.ixLayout=Sl.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=$d("global",n.name);t.set($e.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=$d("state",n.name);t.set($e.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=yn(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([$d(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return ur.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=yn(n.name);return[s,Ne.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return ur.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=yn(n.name);return[s,Ne.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):$e.decode(e));let n=$e.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return ki.format(e,t,this.idl)}}class ki{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:ki.formatIdlType(u.type),data:ki.formatIdlData(u,e.data[u.name],n.types)})),a=ki.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return ki.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+ki.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+ki.formatIdlData(I,m,n)}).join(", "),f=yn(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return ki.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function $d(r,e){var t;let n=`${r}:${t===void 0&&(t={}),tT(e,Hu({delimiter:"_"},t))}`;return ee.Buffer.from(Fs.exports.sha256.digest(n)).slice(0,8)}function ap(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return Ka(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>Ka(r,t.type)).reduce((t,n)=>t+n,0)}function Ka(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Ka(r,e.option);if("coption"in e)return 4+Ka(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new qa(`Type not found: ${JSON.stringify(e)}`);return ap(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return Ka(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const nT=8;class Oo{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,ur.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=Oo.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(Oo.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=Oo.accountDiscriminator(e);return{offset:0,bytes:$e.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=ap(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(Fs.exports.sha256.digest(`account:${yn(e,{pascalCase:!0})}`)).slice(0,8)}}class Mv{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,ur.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[mh(Cv(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(sv(e))}catch{return null}const n=mh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function Cv(r){return ee.Buffer.from(Fs.exports.sha256.digest(`event:${r}`)).slice(0,8)}class Lv{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=ur.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await cp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function cp(r){let e=wl("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(Fs.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class Al{constructor(e){this.instruction=new Sl(e),this.accounts=new Oo(e),this.events=new Mv(e),e.state&&(this.state=new Lv(e))}}var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:{};function iT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class hr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Kv=hr;class ks extends hr{isCount(){throw new Error("ExternalLayout is abstract")}}class sT extends ks{constructor(e,t,n){if(!(e instanceof hr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof kl||this.layout instanceof Nv}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class kl extends hr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Nv extends hr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const jd=Math.pow(2,32);class oT extends hr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*jd+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/jd);return{hi32:a,lo32:s-a*jd}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class aT extends hr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof hr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Dv{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Fm extends Dv{constructor(e,t){if(!(e instanceof ks&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Uv extends hr{constructor(e,t,n){const i=e instanceof kl||e instanceof Nv;if(i)e=new Fm(new sT(e));else if(e instanceof ks&&e.isCount())e=new Fm(e);else if(!(e instanceof Dv))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof hr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new cT(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Pe.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class cT extends hr{constructor(e,t,n,i){if(!(e instanceof Uv))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof hr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class uT extends hr{constructor(e,t){if(!(e instanceof ks&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ks||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof ks&&(i=e.length),!Pe.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof ks&&this.length.encode(i,t,n),i}}var In=r=>new kl(1,r),Vi=r=>new oT(r),Mt=(r,e,t)=>new aT(r,e,t),Il=(r,e)=>new uT(r,e);class lT{constructor(e){}encode(e,t){switch(yn(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Vt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||St.default).toBuffer()}})}(t);case"initializeAccount":return Vt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return Vt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return Vt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return Vt({approve:{amount:n}})}(t);case"revoke":return Vt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return Vt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return Vt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return Vt({burn:{amount:n}})}(t);case"closeAccount":return Vt({closeAccount:{}});case"freezeAccount":return Vt({freezeAccount:{}});case"thawAccount":return Vt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return Vt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return Vt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return Vt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return Vt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return Vt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return Vt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return Vt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return Vt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return Vt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Ct=(Wm=In("instruction"),new Uv(Wm,fT,dT));var Wm,fT,dT;function lo(r){return Il(32,r)}function Vt(r){let e=Pe.Buffer.alloc(hT),t=Ct.encode(r,e);return e.slice(0,t)}Ct.addVariant(0,Mt([In("decimals"),Il(32,"mintAuthority"),In("freezeAuthorityOption"),lo("freezeAuthority")]),"initializeMint"),Ct.addVariant(1,Mt([]),"initializeAccount"),Ct.addVariant(2,Mt([In("m")]),"initializeMultisig"),Ct.addVariant(3,Mt([Vi("amount")]),"transfer"),Ct.addVariant(4,Mt([Vi("amount")]),"approve"),Ct.addVariant(5,Mt([]),"revoke"),Ct.addVariant(6,Mt([In("authorityType"),In("newAuthorityOption"),lo("newAuthority")]),"setAuthority"),Ct.addVariant(7,Mt([Vi("amount")]),"mintTo"),Ct.addVariant(8,Mt([Vi("amount")]),"burn"),Ct.addVariant(9,Mt([]),"closeAccount"),Ct.addVariant(10,Mt([]),"freezeAccount"),Ct.addVariant(11,Mt([]),"thawAccount"),Ct.addVariant(12,Mt([Vi("amount"),In("decimals")]),"transferChecked"),Ct.addVariant(13,Mt([Vi("amount"),In("decimals")]),"approvedChecked"),Ct.addVariant(14,Mt([Vi("amount"),In("decimals")]),"mintToChecked"),Ct.addVariant(15,Mt([Vi("amount"),In("decimals")]),"burnedChecked"),Ct.addVariant(16,Mt([lo("authority")]),"InitializeAccount2"),Ct.addVariant(17,Mt([]),"syncNative"),Ct.addVariant(18,Mt([lo("authority")]),"initializeAccount3"),Ct.addVariant(19,Mt([In("m")]),"initializeMultisig2"),Ct.addVariant(20,Mt([In("decimals"),lo("mintAuthority"),In("freezeAuthorityOption"),lo("freezeAuthority")]),"initializeMint2");const hT=Math.max(...Object.values(Ct.registry).map(r=>r.span));class pT{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Ku(r){return new up(Il(8),e=>lp.fromBuffer(e),e=>e.toBuffer(),r)}function bo(r){return new up(Il(32),e=>new St(e),e=>e.toBuffer(),r)}function Na(r,e){return new gT(r,e)}class up extends Kv{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class gT extends Kv{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new kl(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function yT(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function mT(r){return r?1:0}class lp extends Zi{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Pe.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new lp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class bT{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Pe.Buffer.alloc(165),i=Vm.encode(t,n);return n.slice(0,i)}case"mint":{const n=Pe.Buffer.alloc(82),i=zm.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return Vm.decode(n)}(t);case"mint":return function(n){return zm.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=ap(this.idl,e))!==null&&t!==void 0?t:0}}const zm=Mt([Na(bo(),"mintAuthority"),Ku("supply"),In("decimals"),function(r){return new up(In(),yT,mT,r)}("isInitialized"),Na(bo(),"freezeAuthority")]),Vm=Mt([bo("mint"),bo("authority"),Ku("amount"),Na(bo(),"delegate"),In("state"),Na(Ku(),"isNative"),Ku("delegatedAmount"),Na(bo(),"closeAuthority")]);class vT{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class Fv{constructor(e){this.instruction=new lT(e),this.accounts=new bT(e),this.events=new vT(e),this.state=new pT(e)}}var _T=Object.freeze({__proto__:null,hash:function(r){return Fs.exports.sha256(r)}});function Wv(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=Fs.exports.sha256.digest(n);return new St(ee.Buffer.from(i))}function zv(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,wT(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=Fs.exports.sha256(new Uint8Array(t)),i=new Zi(n,16).toArray(void 0,32);if(St.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new St(i)}function fp(r,e){let t,n=255;for(;n!=0;){try{t=zv(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const wT=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function Vv(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:Wr(i).toBuffer())});const[n]=await St.findProgramAddress(t,Wr(r));return n}var ST=Object.freeze({__proto__:null,createWithSeedSync:Wv,createProgramAddressSync:zv,findProgramAddressSync:fp,associated:Vv});const vh=new St("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),_h=new St("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var AT=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:vh,ASSOCIATED_PROGRAM_ID:_h,associatedAddress:async function({mint:r,owner:e}){return(await St.findProgramAddress([e.toBuffer(),vh.toBuffer(),r.toBuffer()],_h))[0]}}),wh={exports:{}};(function(r,e){var t=typeof self<"u"?self:rT,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function M(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function A(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var z={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(z[Symbol.iterator]=function(){return z}),z}function C(T){this.map={},T instanceof C?T.forEach(function(z,X){this.append(X,z)},this):Array.isArray(T)?T.forEach(function(z){this.append(z[0],z[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(z){this.append(z,T[z])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(z,X){T.onload=function(){z(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var z=new FileReader,X=ae(z);return z.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var z=new Uint8Array(T.byteLength);return z.set(new Uint8Array(T)),z.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var z;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(z=T)&&DataView.prototype.isPrototypeOf(z)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(z){var X=new FileReader,Be=ae(X);return X.readAsText(z),Be}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(z){for(var X=new Uint8Array(z),Be=new Array(X.length),ye=0;ye<X.length;ye++)Be[ye]=String.fromCharCode(X[ye]);return Be.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(T,z){T=M(T),z=A(z);var X=this.map[T];this.map[T]=X?X+", "+z:z},C.prototype.delete=function(T){delete this.map[M(T)]},C.prototype.get=function(T){return T=M(T),this.has(T)?this.map[T]:null},C.prototype.has=function(T){return this.map.hasOwnProperty(M(T))},C.prototype.set=function(T,z){this.map[M(T)]=A(z)},C.prototype.forEach=function(T,z){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(z,this.map[X],X,this)},C.prototype.keys=function(){var T=[];return this.forEach(function(z,X){T.push(X)}),R(T)},C.prototype.values=function(){var T=[];return this.forEach(function(z){T.push(z)}),R(T)},C.prototype.entries=function(){var T=[];return this.forEach(function(z,X){T.push([X,z])}),R(T)},f&&(C.prototype[Symbol.iterator]=C.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(T,z){var X,Be,ye=(z=z||{}).body;if(T instanceof V){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,z.headers||(this.headers=new C(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=z.credentials||this.credentials||"same-origin",!z.headers&&this.headers||(this.headers=new C(z.headers)),this.method=(X=z.method||this.method||"GET",Be=X.toUpperCase(),N.indexOf(Be)>-1?Be:X),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function J(T){var z=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Be=X.split("="),ye=Be.shift().replace(/\+/g," "),Ie=Be.join("=").replace(/\+/g," ");z.append(decodeURIComponent(ye),decodeURIComponent(Ie))}}),z}function K(T,z){z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new C(z.headers),this.url=z.url||"",this._initBody(T)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},E.call(V.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,z){if(j.indexOf(z)===-1)throw new RangeError("Invalid status code");return new K(null,{status:z,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(z,X){this.message=z,this.name=X;var Be=Error(z);this.stack=Be.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,z){return new Promise(function(X,Be){var ye=new V(T,z);if(ye.signal&&ye.signal.aborted)return Be(new a.DOMException("Aborted","AbortError"));var Ie=new XMLHttpRequest;function $t(){Ie.abort()}Ie.onload=function(){var jt,_e,ze={status:Ie.status,statusText:Ie.statusText,headers:(jt=Ie.getAllResponseHeaders()||"",_e=new C,jt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(cn){var kt=cn.split(":"),lt=kt.shift().trim();if(lt){var yr=kt.join(":").trim();_e.append(lt,yr)}}),_e)};ze.url="responseURL"in Ie?Ie.responseURL:ze.headers.get("X-Request-URL");var Qt="response"in Ie?Ie.response:Ie.responseText;X(new K(Qt,ze))},Ie.onerror=function(){Be(new TypeError("Network request failed"))},Ie.ontimeout=function(){Be(new TypeError("Network request failed"))},Ie.onabort=function(){Be(new a.DOMException("Aborted","AbortError"))},Ie.open(ye.method,ye.url,!0),ye.credentials==="include"?Ie.withCredentials=!0:ye.credentials==="omit"&&(Ie.withCredentials=!1),"responseType"in Ie&&h&&(Ie.responseType="blob"),ye.headers.forEach(function(jt,_e){Ie.setRequestHeader(_e,jt)}),ye.signal&&(ye.signal.addEventListener("abort",$t),Ie.onreadystatechange=function(){Ie.readyState===4&&ye.signal.removeEventListener("abort",$t)}),Ie.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=C,s.Request=V,s.Response=K),a.Headers=C,a.Request=V,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(wh,wh.exports);var kT=iT(wh.exports);async function $m(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=Sh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=Sh(i.data);return s}const IT=Ne.rustEnum([Ne.struct([],"uninitialized"),Ne.struct([Ne.option(Ne.publicKey(),"authorityAddress")],"buffer"),Ne.struct([Ne.publicKey("programdataAddress")],"program"),Ne.struct([Ne.u64("slot"),Ne.option(Ne.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ne.u32());function Sh(r){return IT.decode(r)}var ET=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([$m(r,e),kT(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:$m,decodeUpgradeableLoaderState:Sh}),OT=Object.freeze({__proto__:null,sha256:_T,rpc:GP,publicKey:ST,bytes:WP,token:AT,features:QP,registry:ET});const PT=Ne.struct([Ne.publicKey("authority"),Ne.vecU8("data")]);function cc(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Mo{static build(e,t,n){if(e.name==="_inner")throw new qa("the _inner name is reserved");const i=(...s)=>{const[a,u]=cc(e,[...s]);_l(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),wl("debug-logs")&&console.log("Outgoing account metas:",f),new iv({keys:f,programId:n,data:t(e.name,Sv(e,...a))})};return i.accounts=s=>Mo.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Mo.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=Wr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class $v{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=cc(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw op(h,n)}}}}class jv{static build(e,t){return(...n)=>{var i,s,a;const[,u]=cc(e,[...n]),f=new rv;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class qv{constructor(e,t,n=xo(),i=new Al(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=qd(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=Mo.build(I,(C,Y)=>i.instruction.encodeState(C,Y),t);O.accounts=C=>function(ae,oe,de,E){if(de.name==="new"){const[N]=fp([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:qd(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:Jh.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return _l(de.accounts,E),[{pubkey:qd(ae),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(Mo.accountsArray(C,I.accounts,I.name));const M=jv.build(I,O),A=$v.build(I,M,rp(e),n),R=yn(I.name);h[R]=O,d[R]=M,m[R]=A}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await cp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new av,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function qd(r){let[e]=fp([],r);return Wv(e,"unversioned",r)}class Gv{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??xo(),this._coder=s??new Al(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await Ev(this._provider.connection,e.map(n=>Wr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Pe.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Oa.get(e.toString());if(n)return n.ee;const i=new av;e=Wr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Oa.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Oa.get(e.toString());t?Oa&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Oa.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return Jh.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await Vv(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Wr(e),t)}}const Oa=new Map,TT=13,RT=14;class Hv{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new dp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(Gu.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class dp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new xT(e),i=new BT;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(TT):e.slice(RT);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class BT{constructor(){this.stack=[]}program(){return Gu.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){Gu.exports.ok(this.stack.length>0),this.stack.pop()}}class xT{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const MT=new St("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Yv(){return new Fv(Jv)}const Jv={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class Ha{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new CT(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=yn(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(Ha.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=Ha.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await St.findProgramAddress(t,n);this._accounts[yn(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new St(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=yn(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[yn(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[yn(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Pe.Buffer.from([t]);case"u16":let n=Pe.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Pe.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Pe.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Pe.Buffer.from(vv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Pe.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}Ha.CONST_ACCOUNTS={systemProgram:Jh.programId,tokenProgram:vh,associatedTokenProgram:_h,rent:kP};class CT{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=Yv().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[yn(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class Qv{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new LT(d,i,s,a,u,f,e,t,n,h)}}class LT{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new Ha(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Ya{constructor(e,t,n,i){t=Wr(t),n||(n=xo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new Al(e),this._events=new Hv(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,M,A,R){const C={},Y={},ae={},oe={},de={},E={},N=rp(O),V=O.accounts?class{static build(K,j,te,T){var z;const X={};return(z=K.accounts)===null||z===void 0||z.forEach(Be=>{const ye=yn(Be.name);X[ye]=new Gv(K,Be,te,T,j)}),X}}.build(O,M,A,R):{},J=class{static build(K,j,te,T){if(K.state!==void 0)return new qv(K,te,T,j)}}.build(O,M,A,R);return O.instructions.forEach(K=>{const j=Mo.build(K,(Ie,$t)=>M.instruction.encode(Ie,$t),A),te=jv.build(K,j),T=$v.build(K,te,N,R),z=class{static build(Ie,$t,jt,_e,ze,Qt,cn){return async(...kt)=>{var lt;const yr=$t(...kt),[,Ft]=cc(Ie,[...kt]);let vn;if(_e.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{vn=await _e.simulate(yr,Ft.signers,(lt=Ft.options)===null||lt===void 0?void 0:lt.commitment)}catch(Xn){throw op(Xn,jt)}if(vn===void 0)throw new Error("Unable to simulate transaction");const Yr=vn.logs;if(!Yr)throw new Error("Simulated logs not found");const mr=[];return cn.events&&new dp(Qt,ze).parseLogs(Yr,Xn=>{mr.push(Xn)}),{events:mr,raw:Yr}}}}.build(K,te,N,R,M,A,O),X=class{static build(Ie,$t,jt,_e){const ze=$t.accounts.find(cn=>cn.isMut),Qt=!!$t.returns;if(!ze&&Qt)return async(...cn)=>{var kt,lt;let yr=await jt(...cn);const Ft=`Program return: ${Ie} `;let vn=yr.raw.find(Xn=>Xn.startsWith(Ft));if(!vn)throw new Error("View expected return log");let Yr=wv(vn.slice(Ft.length)),mr=$t.returns;if(!mr)throw new Error("View expected return type");return ur.fieldLayout({type:mr},Array.from([...(kt=_e.accounts)!==null&&kt!==void 0?kt:[],...(lt=_e.types)!==null&&lt!==void 0?lt:[]])).decode(Yr)}}}.build(A,K,z,O),Be=Qv.build(R,A,K,j,te,T,z,X,V),ye=yn(K.name);Y[ye]=j,ae[ye]=te,C[ye]=T,oe[ye]=z,de[ye]=Be,X&&(E[ye]=X)}),[C,Y,ae,V,oe,de,J,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=Wr(e),i=await Ya.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new Ya(i,n,t)}static async fetchIdl(e,t){t=t??xo();const n=Wr(e),i=await async function(h){const d=(await St.findProgramAddress([],h))[0];return await St.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),PT.decode(u));var u;const f=LP(a.data);return JSON.parse(bv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class KT{static token(e){return function(t){return new Ya(Jv,MT,t,Yv())}(e)}}var NT=Object.freeze(Object.defineProperty({__proto__:null,web3:IP,ACCOUNT_DISCRIMINATOR_SIZE:nT,AccountClient:Gv,AnchorError:Eo,AnchorProvider:Tv,BorshAccountsCoder:Oo,BorshCoder:Al,BorshEventCoder:Mv,BorshInstructionCoder:Sl,BorshStateCoder:Lv,EventManager:Hv,EventParser:dp,IdlError:qa,LangErrorCode:Ee,LangErrorMessage:xv,MethodsBuilderFactory:Qv,Program:Ya,ProgramError:Ga,ProgramErrorStack:Xo,Spl:KT,SplTokenCoder:Fv,StateClient:qv,eventDiscriminator:Cv,getProvider:xo,parseIdlErrors:rp,setProvider:YP,splitArgsAndCtx:cc,stateDiscriminator:cp,toInstruction:Sv,translateAddress:Wr,translateError:op,utils:OT,validateAccounts:_l,BN:Zi},Symbol.toStringTag,{value:"Module"})),pt=sc(NT),uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.stakingIdl=void 0;uc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.getStakingProgram=Rs.getStakingIdl=void 0;const jm=pt,DT=uc;function Xv(r){const e=DT.stakingIdl;return e.metadata.address=r.toBase58(),e}Rs.getStakingIdl=Xv;function UT({connection:r,programId:e}){const t=Xv(e),n=new jm.AnchorProvider(r,null,null);return new jm.Program(t,e,n)}Rs.getStakingProgram=UT;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Rs,r)})(Jn);var FT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(vl,"__esModule",{value:!0});vl.cancelUnstakeInstruction=void 0;const WT=Jn;function zT({connection:r,user:e,registeredStake:t,programId:n}){return FT(this,void 0,void 0,function*(){const i=(0,WT.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}vl.cancelUnstakeInstruction=zT;var El={},VT=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(El,"__esModule",{value:!0});El.createStakingAccountInstruction=void 0;const $T=Jn;function jT({connection:r,user:e,registeredStake:t,programId:n}){return VT(this,void 0,void 0,function*(){const i=(0,$T.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}El.createStakingAccountInstruction=jT;var Ol={},Ws={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=pv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(Ws);var Lr={},tn={};const qT=Gr.utils.randomPrivateKey,qm=()=>{const r=Gr.utils.randomPrivateKey(),e=Yu(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Yu=Gr.getPublicKey;function Gm(r){try{return Gr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const hp=(r,e)=>Gr.sign(r,e.slice(0,32)),GT=Gr.verify,We=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class pp{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(uv(Da,this))}static decode(e){return lv(Da,this,e)}static decodeUnchecked(e){return fv(Da,this,e)}}class HT extends pp{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Da=new Map;var Zv;let e_;const t_=32,fr=32;function YT(r){return r._bn!==void 0}let Hm=1;e_=Symbol.toStringTag;class pe extends pp{constructor(e){if(super({}),this._bn=void 0,YT(e))this._bn=e._bn;else{if(typeof e=="string"){const t=$e.decode(e);if(t.length!=fr)throw new Error("Invalid public key input");this._bn=new Zi(t)}else this._bn=new Zi(e);if(this._bn.byteLength()>fr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(Hm);return Hm+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return $e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===fr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[e_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=ju(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>t_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,We(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=ju(n);if(Gm(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return Gm(t.toBytes())}}Zv=pe;pe.default=new Zv("11111111111111111111111111111111");Da.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class JT{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=We(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=We(qT()),this._publicKey=We(Yu(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const QT=new pe("BPFLoader1111111111111111111111111111111111"),Hi=1280-40-8,Pl=127,Co=64;class gp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class yp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(yp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class vo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(vo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ja{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const qe=(r="publicKey")=>Ye(32,r),XT=(r="signature")=>Ye(64,r),Is=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Ye(dr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},ZT=(r="authorized")=>ie([qe("staker"),qe("withdrawer")],r),eR=(r="lockup")=>ie([Tt("unixTimestamp"),Tt("epoch"),qe("custodian")],r),tR=(r="voteInit")=>ie([qe("nodePubkey"),qe("authorizedVoter"),qe("authorizedWithdrawer"),ke("commission")],r),nR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),qe("currentAuthorityDerivedKeyOwnerPubkey"),Is("currentAuthorityDerivedKeySeed"),qe("newAuthorized")],r);function n_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return n_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Vn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function cr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function et(r,e){if(!r)throw new Error(e||"Assertion failed")}class Tl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Tl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];et(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{et(t.length>0,"Expected at least one writable signer key");const[f]=t[0];et(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(et(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class qr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:$e.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ja(this.staticAccountKeys)}static compile(e){const t=Tl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Ja(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:$e.encode(u.data)}));return new qr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];cr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from($e.decode(m.data));let A=[];cr(A,I.length);let R=[];return cr(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];cr(i,n.length);let s=ee.Buffer.alloc(Hi);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Ye(m.keyIndicesCount.length,"keyIndicesCount"),Et(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Ye(m.dataLength.length,"dataLength"),Et(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Ye(1,"numRequiredSignatures"),Ye(1,"numReadonlySignedAccounts"),Ye(1,"numReadonlyUnsignedAccounts"),Ye(t.length,"keyCount"),Et(qe("key"),e,"keys"),qe("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>We(m.toBytes())),recentBlockhash:$e.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Pl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Vn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,fr);t=t.slice(fr),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,fr);t=t.slice(fr);const h=Vn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Vn(t),A=t.slice(0,M);t=t.slice(M);const R=Vn(t),C=t.slice(0,R),Y=$e.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:$e.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new qr(m)}}class Bs{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ja(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Tl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:M}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new Ja(u,i).compileInstructions(e.instructions);return new Bs({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();cr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();cr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();cr(s,this.addressTableLookups.length);const a=ie([ke("prefix"),ie([ke("numRequiredSignatures"),ke("numReadonlySignedAccounts"),ke("numReadonlyUnsignedAccounts")],"header"),Ye(e.length,"staticAccountKeysLength"),Et(qe(),this.staticAccountKeys.length,"staticAccountKeys"),qe("recentBlockhash"),Ye(n.length,"instructionsLength"),Ye(t.length,"serializedInstructions"),Ye(s.length,"addressTableLookupsLength"),Ye(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(Hi),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:$e.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(Hi);for(const n of this.compiledInstructions){const i=Array();cr(i,n.accountKeyIndexes.length);const s=Array();cr(s,n.data.length),e+=ie([ke("programIdIndex"),Ye(i.length,"encodedAccountKeyIndexesLength"),Et(ke(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ye(s.length,"encodedDataLength"),Ye(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Hi);for(const n of this.addressTableLookups){const i=Array();cr(i,n.writableIndexes.length);const s=Array();cr(s,n.readonlyIndexes.length),e+=ie([qe("accountKey"),Ye(i.length,"encodedWritableIndexesLength"),Et(ke(),n.writableIndexes.length,"writableIndexes"),Ye(s.length,"encodedReadonlyIndexesLength"),Et(ke(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Pl;et(n!==i,"Expected versioned message but received legacy message");const s=i;et(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=Vn(t);for(let M=0;M<f;M++)u.push(new pe(t.splice(0,fr)));const h=$e.encode(t.splice(0,fr)),d=Vn(t),m=[];for(let M=0;M<d;M++){const A=t.shift(),R=Vn(t),C=t.splice(0,R),Y=Vn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:A,accountKeyIndexes:C,data:ae})}const I=Vn(t),O=[];for(let M=0;M<I;M++){const A=new pe(t.splice(0,fr)),R=Vn(t),C=t.splice(0,R),Y=Vn(t),ae=t.splice(0,Y);O.push({accountKey:A,writableIndexes:C,readonlyIndexes:ae})}return new Bs({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const mp={deserializeMessageVersion(r){const e=r[0],t=e&Pl;return t===e?"legacy":t},deserialize:r=>{const e=mp.deserializeMessageVersion(r);if(e==="legacy")return qr.from(r);if(e===0)return Bs.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ai=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const rR=ee.Buffer.alloc(Co).fill(0);class mt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class at{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new mt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new pe(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:$e.encode(R)}});return M.forEach(A=>{et(A.programIdIndex>=0),A.accounts.forEach(R=>et(R>=0))}),new qr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=hp(n,i.secretKey);this._addSignature(i.publicKey,We(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){et(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!GT(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];cr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return et(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(et(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),et(s.length<=Hi,`Transaction too large: ${s.length} > ${Hi}`),s}get keys(){return et(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return et(this.instructions.length===1),this.instructions[0].programId}get data(){return et(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Vn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,Co);t=t.slice(Co),i.push($e.encode(ee.Buffer.from(a)))}return at.populate(qr.from(t),i)}static populate(e,t=[]){const n=new at;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==$e.encode(rR)?null:$e.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new mt({keys:s,programId:e.accountKeys[i.programIdIndex],data:$e.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class bp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;et(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;et(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const M of i){const A=[];for(const C of M.accountKeyIndexes){const Y=m.get(C);if(Y===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ae=C<a;let oe;ae?oe=C<h:C<m.staticAccountKeys.length?oe=C-a<d:oe=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:Y,isSigner:C<n.numRequiredSignatures,isWritable:oe})}const R=m.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);O.push(new mt({programId:R,data:We(M.data),keys:A}))}return new bp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return qr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Bs.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class vp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)et(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Co));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();cr(t,this.signatures.length);const n=ie([Ye(t.length,"encodedSignaturesLength"),Et(XT(),this.signatures.length,"signatures"),Ye(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Vn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,Co)));const s=mp.deserialize(new Uint8Array(t));return new vp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));et(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=hp(t,i.secretKey)}}addSignature(e,t){et(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));et(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const iR=160,sR=64,oR=iR/sR,r_=1e3/oR,ti=new pe("SysvarC1ock11111111111111111111111111111111"),aR=new pe("SysvarEpochSchedu1e111111111111111111111111"),cR=new pe("Sysvar1nstructions1111111111111111111111111"),Nu=new pe("SysvarRecentB1ockHashes11111111111111111111"),Lo=new pe("SysvarRent111111111111111111111111111111111"),uR=new pe("SysvarRewards111111111111111111111111111111"),lR=new pe("SysvarS1otHashes111111111111111111111111111"),fR=new pe("SysvarS1otHistory11111111111111111111111111"),Du=new pe("SysvarStakeHistory1111111111111111111111111");async function Ah(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ss(r){return new Promise(e=>setTimeout(e,r))}function Je(r,e){const t=r.layout.span>=0?r.layout.span:n_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ot(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const i_=Ze("lamportsPerSignature"),s_=ie([se("version"),se("state"),qe("authorizedPubkey"),qe("nonce"),ie([i_],"feeCalculator")]),kh=s_.span;class Rl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=s_.decode(We(e),0);return new Rl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const dR=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},hR=r=>e=>{const t=Ye(r,e),{encode:n,decode:i}=dR(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return dv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Qh(a,r);return n(h,u,f)},s},Ko=hR(8);class pR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(wt))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ot(wt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ot(wt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ot(wt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ot(wt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ot(wt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ot(wt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ot(wt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ot(wt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ot(wt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ot(wt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ot(wt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ot(wt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(mn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const wt=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Tt("lamports"),Tt("space"),qe("programId")])},Assign:{index:1,layout:ie([se("instruction"),qe("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Ko("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),qe("base"),Is("seed"),Tt("lamports"),Tt("space"),qe("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Tt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),qe("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),qe("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Tt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),qe("base"),Is("seed"),Tt("space"),qe("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),qe("base"),Is("seed"),qe("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Ko("lamports"),Is("seed"),qe("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class mn{constructor(){}static createAccount(e){const t=wt.Create,n=Je(t,{lamports:e.lamports,space:e.space,programId:We(e.programId.toBuffer())});return new mt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=wt.TransferWithSeed;t=Je(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=wt.Transfer;t=Je(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=wt.AssignWithSeed;t=Je(i,{base:We(e.basePubkey.toBuffer()),seed:e.seed,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=wt.Assign;t=Je(i,{programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=wt.CreateWithSeed,n=Je(t,{base:We(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:We(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new mt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new at;"basePubkey"in e&&"seed"in e?t.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:kh,programId:this.programId})):t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:kh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=wt.InitializeNonceAccount,n=Je(t,{authorized:We(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new mt(i)}static nonceAdvance(e){const t=wt.AdvanceNonceAccount,n=Je(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new mt(i)}static nonceWithdraw(e){const t=wt.WithdrawNonceAccount,n=Je(t,{lamports:e.lamports});return new mt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Nu,isSigner:!1,isWritable:!1},{pubkey:Lo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=wt.AuthorizeNonceAccount,n=Je(t,{authorized:We(e.newAuthorizedPubkey.toBuffer())});return new mt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=wt.AllocateWithSeed;t=Je(i,{base:We(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:We(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=wt.Allocate;t=Je(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:t})}}mn.programId=new pe("11111111111111111111111111111111");const gR=Hi-300;class xs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/xs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new at,O.add(mn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new at,O.add(mn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new at,O.add(mn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new at().add(mn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Ah(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Et(ke("byte"),dr(se(),-8),"bytes")]),u=xs.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new at().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(Ah(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ss(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new at().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Lo,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",A=await e.sendTransaction(O,[t,n],{preflightCommitment:M}),{context:R,value:C}=await e.confirmTransaction({signature:A,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(r_/2)))}}return!0}}xs.chunkSize=gR;const yR=new pe("BPFLoader2111111111111111111111111111111111");class mR{static getMinNumSignatures(e){return xs.getMinNumSignatures(e)}static load(e,t,n,i,s){return xs.load(e,t,n,s,i)}}function bR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vR=Object.prototype.toString,_R=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Ba(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Ba(r.toJSON(),e);if(f=vR.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Ba(r[t],!0)+",";return n>-1&&(i+=Ba(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=_R(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=Ba(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var wR=function(r){var e=Ba(r,!1);if(e!==void 0)return""+e},Ym=bR(wR);const Pa=32;function Gd(r){let e=0;for(;r>1;)r/=2,e++;return e}function SR(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class o_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Gd(SR(e+Pa+1))-Gd(Pa)-1,n=this.getSlotsInEpoch(t),i=e-(n-Pa);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Pa:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Gd(Pa)):this.slotsPerEpoch}}class Ih extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const AR={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Se extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var kR=globalThis.fetch;class IR extends EP{constructor(e,t,n){const i=s=>{const a=TP(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function ER(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Jm=56;class Eh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=ER(OR,e),n=e.length-Jm;et(n>=0,"lookup table is invalid"),et(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Et(qe(),i,"addresses")]).decode(e.slice(Jm));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const OR={index:1,layout:ie([se("typeIndex"),Ko("deactivationSlot"),Ze("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Et(qe(),dr(ke(),-1),"authority")])},PR=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function TR(r){const e=r.match(PR);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Jt=li(Jo(pe),F(),r=>new pe(r)),a_=Qo([F(),xe("base64")]),_p=li(Jo(ee.Buffer),a_,r=>ee.Buffer.from(r[0],"base64")),c_=30*1e3;function RR(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Pt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function u_(r){return ht([x({jsonrpc:xe("2.0"),id:F(),result:r}),x({jsonrpc:xe("2.0"),id:F(),error:x({code:fi(),message:F(),data:le(cv())})})])}const BR=u_(fi());function Fe(r){return li(u_(r),BR,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Nt(r){return Fe(x({context:x({slot:S()}),value:r}))}function Bl(r){return x({context:x({slot:S()}),value:r})}function Hd(r,e){return r===0?new Bs({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:$e.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new qr(e)}const xR=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),MR=Fe(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))})))),CR=H(x({slot:S(),prioritizationFee:S()})),LR=x({total:S(),validator:S(),foundation:S(),epoch:S()}),KR=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),NR=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Yt(),firstNormalEpoch:S(),firstNormalSlot:S()}),DR=ml(F(),H(S())),zs=G(ht([x({}),F()])),UR=x({err:zs}),FR=xe("receivedSignature"),WR=x({"solana-core":F(),"feature-set":le(S())}),Qm=Nt(x({err:G(ht([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Yt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:Qo([F(),xe("base64")])})))})),zR=Nt(x({byIdentity:ml(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));function VR(r,e,t,n,i,s){const a=t||kR;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,M)=>{try{n(d,m,(A,R)=>O([A,R]))}catch(A){M(A)}});return await a(...I)}),new OP(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},$B)};try{let O=5,M,A=500;for(;f?M=await f(r,I):M=await a(r,I),!(M.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await Ss(A),A*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function $R(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function jR(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const qR=Fe(xR),GR=Fe(LR),HR=Fe(CR),YR=Fe(KR),JR=Fe(NR),QR=Fe(DR),XR=Fe(S()),ZR=Nt(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(Jt)})),Oh=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}),eB=Nt(H(x({address:Jt,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())}))),tB=Nt(H(x({pubkey:Jt,account:x({executable:Yt(),owner:Jt,lamports:S(),data:_p,rentEpoch:S()})}))),Ph=x({program:F(),parsed:fi(),space:S()}),nB=Nt(H(x({pubkey:Jt,account:x({executable:Yt(),owner:Jt,lamports:S(),data:Ph,rentEpoch:S()})}))),rB=Nt(H(x({lamports:S(),address:Jt}))),Qa=x({executable:Yt(),owner:Jt,lamports:S(),data:_p,rentEpoch:S()}),iB=x({pubkey:Jt,account:Qa}),sB=li(ht([Jo(ee.Buffer),Ph]),ht([a_,Ph]),r=>Array.isArray(r)?he(r,_p):r),Th=x({executable:Yt(),owner:Jt,lamports:S(),data:sB,rentEpoch:S()}),oB=x({pubkey:Jt,account:Th}),aB=x({state:ht([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:S(),inactive:S()}),cB=Fe(H(x({signature:F(),slot:S(),err:zs,memo:G(F()),blockTime:le(G(S()))}))),uB=Fe(H(x({signature:F(),slot:S(),err:zs,memo:G(F()),blockTime:le(G(S()))}))),lB=x({subscription:S(),result:Bl(Qa)}),fB=x({pubkey:Jt,account:Qa}),dB=x({subscription:S(),result:Bl(fB)}),hB=x({parent:S(),slot:S(),root:S()}),pB=x({subscription:S(),result:hB}),gB=ht([x({type:ht([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:S(),timestamp:S()}),x({type:xe("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:xe("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:xe("dead"),slot:S(),timestamp:S(),err:F()})]),yB=x({subscription:S(),result:gB}),mB=x({subscription:S(),result:Bl(ht([UR,FR]))}),bB=x({subscription:S(),result:S()}),vB=x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())}),Xm=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Yt(),epochCredits:H(Qo([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())}),_B=Fe(x({current:H(Xm),delinquent:H(Xm)})),wB=ht([xe("processed"),xe("confirmed"),xe("finalized")]),SB=x({slot:S(),confirmations:G(S()),err:zs,confirmationStatus:le(wB)}),AB=Nt(H(G(SB))),kB=Fe(S()),l_=x({accountKey:Jt,writableIndexes:H(S()),readonlyIndexes:H(S())}),wp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(l_))})}),f_=x({pubkey:Jt,signer:Yt(),writable:Yt(),source:le(ht([xe("transaction"),xe("lookupTable")]))}),d_=x({accountKeys:H(f_),signatures:H(F())}),h_=x({parsed:fi(),program:F(),programId:Jt}),p_=x({accounts:H(Jt),data:F(),programId:Jt}),IB=ht([p_,h_]),EB=ht([x({parsed:fi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),g_=li(IB,EB,r=>"accounts"in r?he(r,p_):he(r,h_)),y_=x({signatures:H(F()),message:x({accountKeys:H(f_),instructions:H(g_),recentBlockhash:F(),addressTableLookups:le(G(H(l_)))})}),Ju=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Oh}),m_=x({writable:H(Jt),readonly:H(Jt)}),xl=x({err:zs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Ju))),postTokenBalances:le(G(H(Ju))),loadedAddresses:le(m_),computeUnitsConsumed:le(S())}),Sp=x({err:zs,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(g_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Ju))),postTokenBalances:le(G(H(Ju))),loadedAddresses:le(m_),computeUnitsConsumed:le(S())}),Zo=ht([xe(0),xe("legacy")]),Vs=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))}),OB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:wp,meta:G(xl),version:le(Zo)})),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),PB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),TB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:d_,meta:G(xl),version:le(Zo)})),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),RB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:y_,meta:G(Sp),version:le(Zo)})),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),BB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:d_,meta:G(Sp),version:le(Zo)})),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),xB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(Vs)),blockTime:G(S()),blockHeight:G(S())}))),MB=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:wp,meta:G(xl)})),rewards:le(H(Vs)),blockTime:G(S())}))),Zm=Fe(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())}))),Yd=Fe(G(x({slot:S(),meta:G(xl),blockTime:le(G(S())),transaction:wp,version:le(Zo)}))),bu=Fe(G(x({slot:S(),transaction:y_,meta:G(Sp),blockTime:le(G(S())),version:le(Zo)}))),CB=Nt(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})})),LB=Nt(x({blockhash:F(),lastValidBlockHeight:S()})),KB=Nt(Yt()),NB=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),DB=Fe(H(NB)),UB=Nt(G(x({feeCalculator:x({lamportsPerSignature:S()})}))),FB=Fe(F()),WB=Fe(F()),zB=x({err:zs,logs:H(F()),signature:F()}),VB=x({result:Bl(zB),subscription:S()}),$B={"solana-client":"js/0.0.0-development"};class jB{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Pt(d),O=this._buildArgs([],m,void 0,I),M=Ym(O);return h[M]=h[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",O),R=he(A,Fe(S()));if("error"in R)throw new Se(R.error,"failed to get block height information");return R.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=RR(e),this._rpcWsEndpoint=n||TR(e),this._rpcClient=VR(e,i,s,a,u,f),this._rpcRequest=$R(this._rpcClient),this._rpcBatchRequest=jR(this._rpcClient),this._rpcWebSocket=new IR(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Nt(S()));if("error"in u)throw new Se(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,Fe(G(S())));if("error"in n)throw new Se(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,Fe(S()));if("error"in t)throw new Se(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,XR);if("error"in t)throw new Se(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,ZR);if("error"in i)throw new Se(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Nt(Oh));if("error"in s)throw new Se(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Nt(Oh));if("error"in s)throw new Se(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Pt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,tB);if("error"in h)throw new Se(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,nB);if("error"in u)throw new Se(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,rB);if("error"in s)throw new Se(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,eB);if("error"in s)throw new Se(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Nt(G(Qa)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Nt(G(Th)));if("error"in u)throw new Se(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Nt(H(G(Th))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Nt(H(G(Qa))));if("error"in f)throw new Se(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Pt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,Fe(aB));if("error"in f)throw new Se(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Pt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(iB),d=a.withContext===!0?he(f,Nt(h)):he(f,Fe(h));if("error"in d)throw new Se(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,Fe(H(oB)));if("error"in u)throw new Se(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=$e.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return et(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:Ai.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:Ai.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Ss(1e3),s||(O=await I(),s))return;m({__type:Ai.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===Ai.PROCESSED)d=m.response;else throw new gp(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let M=s,A=null;const R=async()=>{try{const{context:C,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=C.slot,Y==null?void 0:Y.nonce}catch{return M}};(async()=>{if(M=await R(),!u)for(;;){if(s!==M){O({__type:Ai.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Ss(2e3),u||(M=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===Ai.PROCESSED)I=O.response;else{let M;for(;;){const A=await this.getSignatureStatus(a);if(A==null)break;if(A.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Ss(400);continue}M=A;break}if(M!=null&&M.value){const A=e||"finalized",{confirmationStatus:R}=M.value;switch(A){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new vo(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new vo(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new vo(a);break;default:(C=>{})(A)}I={context:M.context,value:{err:M.value.err}}}else throw new vo(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Ai.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===Ai.PROCESSED)u=f.response;else throw new yp(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,Fe(H(vB)));if("error"in t)throw new Se(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,_B);if("error"in i)throw new Se(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,Fe(S()));if("error"in a)throw new Se(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,Fe(F()));if("error"in a)throw new Se(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,Fe(H(Jt)));if("error"in s)throw new Se(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);et(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,AB);if("error"in s)throw new Se(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,Fe(S()));if("error"in a)throw new Se(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,qR);if("error"in i)throw new Se(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Pt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,MR);if("error"in f)throw new Se(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,GR);if("error"in t)throw new Se(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,YR);if("error"in a)throw new Se(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,JR);if("error"in t)throw new Se(t.error,"failed to get epoch schedule");const n=t.result;return new o_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,QR);if("error"in t)throw new Se(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,kB);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,CB);if("error"in i)throw new Se(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,DB);if("error"in n)throw new Se(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,UB);if("error"in s)throw new Se(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=We(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Nt(G(S())));if("error"in a)throw new Se(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,HR);if("error"in s)throw new Se(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,LB);if("error"in a)throw new Se(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,KB);if("error"in u)throw new Se(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,Fe(WR));if("error"in t)throw new Se(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,Fe(F()));if("error"in t)throw new Se(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,TB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,PB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,OB);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:Hd(m,h.message)},version:m}))}:null}}}catch(u){throw new Se(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,BB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,xB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,RB);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Se(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,zR);if("error"in a)throw new Se(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,Yd);if("error"in u)throw new Se(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Hd(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Pt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,bu);if("error"in u)throw new Se(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,bu);if("error"in h)throw new Se(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Pt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Yd);if("error"in h)throw new Se(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:Hd(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,MB);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new qr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:at.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,Fe(H(S())));if("error"in a)throw new Se(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,Zm);if("error"in s)throw new Se(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,Zm);if("error"in s)throw new Se(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Yd);if("error"in s)throw new Se(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new qr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:at.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,bu);if("error"in s)throw new Se(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,bu);if("error"in u)throw new Se(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,cB);if("error"in a)throw new Se(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,uB);if("error"in a)throw new Se(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Eh({key:e,state:Eh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Rl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,FB);if("error"in i)throw new Se(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ss(100);const n=Date.now()-this._blockhashInfo.lastFetch>=c_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ss(r_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Pt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Nt(S()));if("error"in a)throw new Se(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),R=ee.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Y=[R,C],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,Qm);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof at){let M=e;i=new at,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=at.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(A=>A.toBase58());d.accounts={encoding:"base64",addresses:M}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,Qm);if("error"in O){let M;if("data"in O.error&&(M=O.error.data.logs,M&&Array.isArray(M))){const A=`
    `,R=A+M.join(A);console.error(O.error.message,R)}throw new Ih("failed to simulate transaction: "+O.error.message,M)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=We(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,WB);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new Ih("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,lB);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Ym([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];et(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,dB);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,VB);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,pB);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,yB);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,mB);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,bB);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Po{constructor(e){this._keypair=void 0,this._keypair=e??qm()}static generate(){return new Po(qm())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Yu(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Po({publicKey:n,secretKey:e})}static fromSeed(e){const t=Yu(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Po({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Ii=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Ko("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Ko(),Et(qe(),dr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class qB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ii))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ot(Ii.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ot(Ii.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Ap.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Ap{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),Qh(BigInt(e.recentSlot),8)],this.programId),i=Ii.CreateLookupTable,s=Je(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}];return[new mt({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Ii.FreezeLookupTable,n=Je(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Ii.ExtendLookupTable,n=Je(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}),new mt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Ii.DeactivateLookupTable,n=Je(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Ii.CloseLookupTable,n=Je(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new mt({programId:this.programId,keys:i,data:n})}}Ap.programId=new pe("AddressLookupTab1e1111111111111111111111111");class GB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ke("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ri))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ot(ri.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ot(ri.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ot(ri.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ot(ri.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(kp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ri=Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),Ko("microLamports")])}});class kp{constructor(){}static requestUnits(e){const t=ri.RequestUnits,n=Je(t,e);return new mt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=ri.RequestHeapFrame,n=Je(t,e);return new mt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=ri.SetComputeUnitLimit,n=Je(t,e);return new mt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=ri.SetComputeUnitPrice,n=Je(t,{microLamports:BigInt(e.microLamports)});return new mt({keys:[],programId:this.programId,data:n})}}kp.programId=new pe("ComputeBudget111111111111111111111111111111");const eb=64,tb=32,nb=64,rb=ie([ke("numSignatures"),ke("padding"),Dt("signatureOffset"),Dt("signatureInstructionIndex"),Dt("publicKeyOffset"),Dt("publicKeyInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),Dt("messageInstructionIndex")]);class Ml{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;et(t.length===tb,`Public Key must be ${tb} bytes but received ${t.length} bytes`),et(i.length===nb,`Signature must be ${nb} bytes but received ${i.length} bytes`);const a=rb.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return rb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new mt({keys:[],programId:Ml.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;et(t.length===eb,`Private key must be ${eb} bytes but received ${t.length} bytes`);try{const s=Po.fromSecretKey(t),a=s.publicKey.toBytes(),u=hp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Ml.programId=new pe("Ed25519SigVerify111111111111111111111111111");const HB=(r,e)=>{const t=oc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};oc.utils.isValidPrivateKey;const YB=oc.getPublicKey,ib=32,Jd=20,sb=64,JB=11,Qd=ie([ke("numSignatures"),Dt("signatureOffset"),ke("signatureInstructionIndex"),Dt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),ke("messageInstructionIndex"),Ye(20,"ethAddress"),Ye(64,"signature"),ke("recoveryId")]);class To{constructor(){}static publicKeyToEthAddress(e){et(e.length===sb,`Public key must be ${sb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from(xm(We(e))).slice(-Jd)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return To.createInstructionWithEthAddress({ethAddress:To.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,et(u.length===Jd,`Address must be ${Jd} bytes but received ${u.length} bytes`);const f=1+JB,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(Qd.span+n.length);return Qd.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:We(i),ethAddress:We(u),recoveryId:s},O),O.fill(We(n),Qd.span),new mt({keys:[],programId:To.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;et(t.length===ib,`Private key must be ${ib} bytes but received ${t.length} bytes`);try{const s=We(t),a=YB(s,!1).slice(1),u=ee.Buffer.from(xm(We(n))),[f,h]=HB(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}To.programId=new pe("KeccakSecp256k11111111111111111111111111111");var b_;const v_=new pe("StakeConfig11111111111111111111111111111111");class __{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class lc{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}b_=lc;lc.default=new b_(0,0,pe.default);class QB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ln))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ot(ln.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new __(new pe(t.staker),new pe(t.withdrawer)),lockup:new lc(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ot(ln.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ot(ln.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ot(ln.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ot(ln.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ot(ln.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ot(ln.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ot(ln.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Cl.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const ln=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),ZT(),eR()])},Authorize:{index:1,layout:ie([se("instruction"),qe("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Tt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Tt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),qe("newAuthorized"),se("stakeAuthorizationType"),Is("authoritySeed"),qe("authorityOwner")])}}),XB=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||lc.default,a=ln.Initialize,u=Je(a,{authorized:{staker:We(n.staker.toBuffer()),withdrawer:We(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:We(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Lo,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new mt(f)}static createAccountWithSeed(e){const t=new at;t.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new at;t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=ln.Delegate,a=Je(s);return new at().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:Du,isSigner:!1,isWritable:!1},{pubkey:v_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=ln.Authorize,f=Je(u,{newAuthorized:We(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new at().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=ln.AuthorizeWithSeed,d=Je(h,{newAuthorized:We(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:We(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ti,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new at().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=ln.Split,u=Je(a,{lamports:s});return new mt({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new at;return t.add(mn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new at;return f.add(mn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=ln.Merge,a=Je(s);return new at().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:Du,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=ln.Withdraw,f=Je(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:Du,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new at().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=ln.Deactivate,s=Je(i);return new at().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Cl.programId=new pe("Stake11111111111111111111111111111111111111");Cl.space=200;class w_{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class ZB{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ei))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ot(Ei.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new w_(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ot(Ei.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ot(Ei.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ot(Ei.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ea.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ei=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),tR()])},Authorize:{index:1,layout:ie([se("instruction"),qe("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Tt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),nR()])}}),ex=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ea{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Ei.InitializeAccount,a=Je(s,{voteInit:{nodePubkey:We(i.nodePubkey.toBuffer()),authorizedVoter:We(i.authorizedVoter.toBuffer()),authorizedWithdrawer:We(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Lo,isSigner:!1,isWritable:!1},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new mt(u)}static createAccount(e){const t=new at;return t.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Ei.Authorize,u=Je(a,{newAuthorized:We(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new at().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Ei.AuthorizeWithSeed,h=Je(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:We(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:We(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ti,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new at().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Ei.Withdraw,u=Je(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new at().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return ea.withdraw(e)}}ea.programId=new pe("Vote111111111111111111111111111111111111111");ea.space=3731;const S_=new pe("Va1idator1nfo111111111111111111111111111111"),tx=x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});class Ip{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Vn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,fr));t=t.slice(fr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(S_)&&i[1].isSigner){const s=Is().decode(ee.Buffer.from(t)),a=JSON.parse(s);return PP(a,tx),new Ip(i[1].publicKey,a)}return null}}const nx=new pe("Vote111111111111111111111111111111111111111"),rx=ie([qe("nodePubkey"),qe("authorizedWithdrawer"),ke("commission"),Ze(),Et(ie([Ze("slot"),se("confirmationCount")]),dr(se(),-8),"votes"),ke("rootSlotValid"),Ze("rootSlot"),Ze(),Et(ie([Ze("epoch"),qe("authorizedVoter")]),dr(se(),-8),"authorizedVoters"),ie([Et(ie([qe("authorizedPubkey"),Ze("epochOfLastAuthorizedSwitch"),Ze("targetEpoch")]),32,"buf"),Ze("idx"),ke("isEmpty")],"priorVoters"),Ze(),Et(ie([Ze("epoch"),Ze("credits"),Ze("prevCredits")]),dr(se(),-8),"epochCredits"),ie([Ze("slot"),Ze("timestamp")],"lastTimestamp")]);class Ep{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=rx.decode(We(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Ep({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(ix),priorVoters:sx(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function ix({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function ob({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function sx({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(ob),...r.slice(0,e).map(ob)]}const ab={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ox(r,e){const t=e===!1?"http":"https";if(!r)return ab[t].devnet;const n=ab[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function ax(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const cx=1e9;var ux=Object.freeze(Object.defineProperty({__proto__:null,Account:JT,AddressLookupTableAccount:Eh,AddressLookupTableInstruction:qB,AddressLookupTableProgram:Ap,Authorized:__,BLOCKHASH_CACHE_TIMEOUT_MS:c_,BPF_LOADER_DEPRECATED_PROGRAM_ID:QT,BPF_LOADER_PROGRAM_ID:yR,BpfLoader:mR,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ri,ComputeBudgetInstruction:GB,ComputeBudgetProgram:kp,Connection:jB,Ed25519Program:Ml,Enum:HT,EpochSchedule:o_,FeeCalculatorLayout:i_,Keypair:Po,LAMPORTS_PER_SOL:cx,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Ii,Loader:xs,Lockup:lc,MAX_SEED_LENGTH:t_,Message:qr,MessageAccountKeys:Ja,MessageV0:Bs,NONCE_ACCOUNT_LENGTH:kh,NonceAccount:Rl,PACKET_DATA_SIZE:Hi,PUBLIC_KEY_LENGTH:fr,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:Co,SOLANA_SCHEMA:Da,STAKE_CONFIG_ID:v_,STAKE_INSTRUCTION_LAYOUTS:ln,SYSTEM_INSTRUCTION_LAYOUTS:wt,SYSVAR_CLOCK_PUBKEY:ti,SYSVAR_EPOCH_SCHEDULE_PUBKEY:aR,SYSVAR_INSTRUCTIONS_PUBKEY:cR,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Nu,SYSVAR_RENT_PUBKEY:Lo,SYSVAR_REWARDS_PUBKEY:uR,SYSVAR_SLOT_HASHES_PUBKEY:lR,SYSVAR_SLOT_HISTORY_PUBKEY:fR,SYSVAR_STAKE_HISTORY_PUBKEY:Du,Secp256k1Program:To,SendTransactionError:Ih,SolanaJSONRPCError:Se,SolanaJSONRPCErrorCode:AR,StakeAuthorizationLayout:XB,StakeInstruction:QB,StakeProgram:Cl,Struct:pp,SystemInstruction:pR,SystemProgram:mn,Transaction:at,TransactionExpiredBlockheightExceededError:gp,TransactionExpiredNonceInvalidError:vo,TransactionExpiredTimeoutError:yp,TransactionInstruction:mt,TransactionMessage:bp,TransactionStatus:Ai,VALIDATOR_INFO_KEY:S_,VERSION_PREFIX_MASK:Pl,VOTE_PROGRAM_ID:nx,ValidatorInfo:Ip,VersionedMessage:mp,VersionedTransaction:vp,VoteAccount:Ep,VoteAuthorizationLayout:ex,VoteInit:w_,VoteInstruction:ZB,VoteProgram:ea,clusterApiUrl:ox,sendAndConfirmRawTransaction:ax,sendAndConfirmTransaction:Ah},Symbol.toStringTag,{value:"Module"})),Ri=sc(ux);const cb=()=>{const r=Gr.utils.randomPrivateKey(),e=Rh(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Rh=Gr.getPublicKey;function ub(r){try{return Gr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const lx=(r,e)=>Gr.sign(r,e.slice(0,32)),fx=Gr.verify,zn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class dx{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(uv(Uu,this))}static decode(e){return lv(Uu,this,e)}static decodeUnchecked(e){return fv(Uu,this,e)}}const Uu=new Map;var A_;let k_;const hx=32,Es=32;function px(r){return r._bn!==void 0}let lb=1;k_=Symbol.toStringTag;class ve extends dx{constructor(e){if(super({}),this._bn=void 0,px(e))this._bn=e._bn;else{if(typeof e=="string"){const t=$e.decode(e);if(t.length!=Es)throw new Error("Invalid public key input");this._bn=new Zi(t)}else this._bn=new Zi(e);if(this._bn.byteLength()>Es)throw new Error("Invalid public key input")}}static unique(){const e=new ve(lb);return lb+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return $e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Es)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[k_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=ju(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>hx)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,zn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=ju(n);if(ub(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return ub(t.toBytes())}}A_=ve;ve.default=new A_("11111111111111111111111111111111");Uu.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const Bh=1280-40-8,gx=127,xh=64;class fb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Qe=(r="publicKey")=>Ye(32,r),_o=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Ye(dr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},yx=(r="authorized")=>ie([Qe("staker"),Qe("withdrawer")],r),mx=(r="lockup")=>ie([Tt("unixTimestamp"),Tt("epoch"),Qe("custodian")],r),bx=(r="voteInit")=>ie([Qe("nodePubkey"),Qe("authorizedVoter"),Qe("authorizedWithdrawer"),ke("commission")],r),vx=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Qe("currentAuthorityDerivedKeyOwnerPubkey"),_o("currentAuthorityDerivedKeySeed"),Qe("newAuthorized")],r);function I_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return I_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function xa(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Ma(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function ar(r,e){if(!r)throw new Error(e||"Assertion failed")}class Op{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Op(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ar(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{ar(t.length>0,"Expected at least one writable signer key");const[f]=t[0];ar(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(ar(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Xa{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:$e.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new fb(this.staticAccountKeys)}static compile(e){const t=Op.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new fb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:$e.encode(u.data)}));return new Xa({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ma(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from($e.decode(m.data));let A=[];Ma(A,I.length);let R=[];return Ma(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(A),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];Ma(i,n.length);let s=ee.Buffer.alloc(Bh);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Ye(m.keyIndicesCount.length,"keyIndicesCount"),Et(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Ye(m.dataLength.length,"dataLength"),Et(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Ye(1,"numRequiredSignatures"),Ye(1,"numReadonlySignedAccounts"),Ye(1,"numReadonlyUnsignedAccounts"),Ye(t.length,"keyCount"),Et(Qe("key"),e,"keys"),Qe("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>zn(m.toBytes())),recentBlockhash:$e.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&gx))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=xa(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Es);t=t.slice(Es),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Es);t=t.slice(Es);const h=xa(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=xa(t),A=t.slice(0,M);t=t.slice(M);const R=xa(t),C=t.slice(0,R),Y=$e.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:A,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:$e.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new Xa(m)}}const _x=ee.Buffer.alloc(xh).fill(0);class dt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new dt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(C=>{s.push({...C})});const R=A.programId.toString();i.includes(R)||i.push(R)}),i.forEach(A=>{s.push({pubkey:new ve(A),isSigner:!1,isWritable:!1})});const a=[];s.forEach(A=>{const R=A.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||A.isWritable,a[C].isSigner=a[C].isSigner||A.isSigner):a.push(A)}),a.sort(function(A,R){if(A.isSigner!==R.isSigner)return A.isSigner?-1:1;if(A.isWritable!==R.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=a.splice(u,1);A.isSigner=!0,A.isWritable=!0,a.unshift(A)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(A.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:A,isSigner:R,isWritable:C})=>{R?(m.push(A.toString()),f+=1,C||(h+=1)):(I.push(A.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(A=>{const{data:R,programId:C}=A;return{programIdIndex:O.indexOf(C.toString()),accounts:A.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:$e.encode(R)}});return M.forEach(A=>{ar(A.programIdIndex>=0),A.accounts.forEach(R=>ar(R>=0))}),new Xa({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=lx(n,i.secretKey);this._addSignature(i.publicKey,zn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ar(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!fx(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Ma(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return ar(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(ar(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),ar(s.length<=Bh,`Transaction too large: ${s.length} > ${Bh}`),s}get keys(){return ar(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ar(this.instructions.length===1),this.instructions[0].programId}get data(){return ar(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=xa(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,xh);t=t.slice(xh),i.push($e.encode(ee.Buffer.from(a)))}return Lt.populate(Xa.from(t),i)}static populate(e,t=[]){const n=new Lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==$e.encode(_x)?null:$e.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new dt({keys:s,programId:e.accountKeys[i.programIdIndex],data:$e.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const Xd=new ve("SysvarRecentB1ockHashes11111111111111111111"),wo=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function wx(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Er(r,e){const t=r.layout.span>=0?r.layout.span:I_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const Sx=Ze("lamportsPerSignature"),Ax=ie([se("version"),se("state"),Qe("authorizedPubkey"),Qe("nonce"),ie([Sx],"feeCalculator")]),db=Ax.span,kx=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},Ix=r=>e=>{const t=Ye(r,e),{encode:n,decode:i}=kx(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return dv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=Qh(a,r);return n(h,u,f)},s},No=Ix(8),Or=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Tt("lamports"),Tt("space"),Qe("programId")])},Assign:{index:1,layout:ie([se("instruction"),Qe("programId")])},Transfer:{index:2,layout:ie([se("instruction"),No("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Qe("base"),_o("seed"),Tt("lamports"),Tt("space"),Qe("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Tt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Qe("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Qe("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Tt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Qe("base"),_o("seed"),Tt("space"),Qe("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Qe("base"),_o("seed"),Qe("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),No("lamports"),_o("seed"),Qe("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class ni{constructor(){}static createAccount(e){const t=Or.Create,n=Er(t,{lamports:e.lamports,space:e.space,programId:zn(e.programId.toBuffer())});return new dt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Or.TransferWithSeed;t=Er(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:zn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Or.Transfer;t=Er(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new dt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Or.AssignWithSeed;t=Er(i,{base:zn(e.basePubkey.toBuffer()),seed:e.seed,programId:zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Or.Assign;t=Er(i,{programId:zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new dt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Or.CreateWithSeed,n=Er(t,{base:zn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:zn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new dt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Lt;"basePubkey"in e&&"seed"in e?t.add(ni.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:db,programId:this.programId})):t.add(ni.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:db,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Or.InitializeNonceAccount,n=Er(t,{authorized:zn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:wo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new dt(i)}static nonceAdvance(e){const t=Or.AdvanceNonceAccount,n=Er(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new dt(i)}static nonceWithdraw(e){const t=Or.WithdrawNonceAccount,n=Er(t,{lamports:e.lamports});return new dt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:wo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Or.AuthorizeNonceAccount,n=Er(t,{authorized:zn(e.newAuthorizedPubkey.toBuffer())});return new dt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Or.AllocateWithSeed;t=Er(i,{base:zn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:zn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Or.Allocate;t=Er(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new dt({keys:n,programId:this.programId,data:t})}}ni.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),No("deactivationSlot"),Ze("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Et(Qe(),dr(ke(),-1),"authority")]);const rn=li(Jo(ve),F(),r=>new ve(r)),E_=Qo([F(),xe("base64")]),Pp=li(Jo(ee.Buffer),E_,r=>ee.Buffer.from(r[0],"base64"));function O_(r){return ht([x({jsonrpc:xe("2.0"),id:F(),result:r}),x({jsonrpc:xe("2.0"),id:F(),error:x({code:fi(),message:F(),data:le(cv())})})])}const Ex=O_(fi());function At(r){return li(O_(r),Ex,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Kr(r){return At(x({context:x({slot:S()}),value:r}))}function Ll(r){return x({context:x({slot:S()}),value:r})}const Ox=x({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()});At(H(G(x({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:le(G(S()))}))));const Px=H(x({slot:S(),prioritizationFee:S()})),Tx=x({total:S(),validator:S(),foundation:S(),epoch:S()}),Rx=x({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:le(S()),transactionCount:le(S())}),Bx=x({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Yt(),firstNormalEpoch:S(),firstNormalSlot:S()}),xx=ml(F(),H(S())),$s=G(ht([x({}),F()])),Mx=x({err:$s}),Cx=xe("receivedSignature");x({"solana-core":F(),"feature-set":le(S())});Kr(x({err:G(ht([x({}),F()])),logs:G(H(F())),accounts:le(G(H(G(x({executable:Yt(),owner:F(),lamports:S(),data:H(F()),rentEpoch:le(S())}))))),unitsConsumed:le(S()),returnData:le(G(x({programId:F(),data:Qo([F(),xe("base64")])})))}));Kr(x({byIdentity:ml(F(),H(S())),range:x({firstSlot:S(),lastSlot:S()})}));At(Ox);At(Tx);At(Px);At(Rx);At(Bx);At(xx);At(S());Kr(x({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:H(rn)}));const Lx=x({amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())});Kr(H(x({address:rn,amount:F(),uiAmount:G(S()),decimals:S(),uiAmountString:le(F())})));Kr(H(x({pubkey:rn,account:x({executable:Yt(),owner:rn,lamports:S(),data:Pp,rentEpoch:S()})})));const Mh=x({program:F(),parsed:fi(),space:S()});Kr(H(x({pubkey:rn,account:x({executable:Yt(),owner:rn,lamports:S(),data:Mh,rentEpoch:S()})})));Kr(H(x({lamports:S(),address:rn})));const Tp=x({executable:Yt(),owner:rn,lamports:S(),data:Pp,rentEpoch:S()});x({pubkey:rn,account:Tp});const Kx=li(ht([Jo(ee.Buffer),Mh]),ht([E_,Mh]),r=>Array.isArray(r)?he(r,Pp):r),Nx=x({executable:Yt(),owner:rn,lamports:S(),data:Kx,rentEpoch:S()});x({pubkey:rn,account:Nx});x({state:ht([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:S(),inactive:S()});At(H(x({signature:F(),slot:S(),err:$s,memo:G(F()),blockTime:le(G(S()))})));At(H(x({signature:F(),slot:S(),err:$s,memo:G(F()),blockTime:le(G(S()))})));x({subscription:S(),result:Ll(Tp)});const Dx=x({pubkey:rn,account:Tp});x({subscription:S(),result:Ll(Dx)});const Ux=x({parent:S(),slot:S(),root:S()});x({subscription:S(),result:Ux});const Fx=ht([x({type:ht([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:S(),timestamp:S()}),x({type:xe("createdBank"),parent:S(),slot:S(),timestamp:S()}),x({type:xe("frozen"),slot:S(),timestamp:S(),stats:x({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),x({type:xe("dead"),slot:S(),timestamp:S(),err:F()})]);x({subscription:S(),result:Fx});x({subscription:S(),result:Ll(ht([Mx,Cx]))});x({subscription:S(),result:S()});x({pubkey:F(),gossip:G(F()),tpu:G(F()),rpc:G(F()),version:G(F())});const hb=x({votePubkey:F(),nodePubkey:F(),activatedStake:S(),epochVoteAccount:Yt(),epochCredits:H(Qo([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:G(S())});At(x({current:H(hb),delinquent:H(hb)}));const Wx=ht([xe("processed"),xe("confirmed"),xe("finalized")]),zx=x({slot:S(),confirmations:G(S()),err:$s,confirmationStatus:le(Wx)});Kr(H(G(zx)));At(S());const P_=x({accountKey:rn,writableIndexes:H(S()),readonlyIndexes:H(S())}),Rp=x({signatures:H(F()),message:x({accountKeys:H(F()),header:x({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()})),recentBlockhash:F(),addressTableLookups:le(H(P_))})}),T_=x({pubkey:rn,signer:Yt(),writable:Yt(),source:le(ht([xe("transaction"),xe("lookupTable")]))}),R_=x({accountKeys:H(T_),signatures:H(F())}),B_=x({parsed:fi(),program:F(),programId:rn}),x_=x({accounts:H(rn),data:F(),programId:rn}),Vx=ht([x_,B_]),$x=ht([x({parsed:fi(),program:F(),programId:F()}),x({accounts:H(F()),data:F(),programId:F()})]),M_=li(Vx,$x,r=>"accounts"in r?he(r,x_):he(r,B_)),C_=x({signatures:H(F()),message:x({accountKeys:H(T_),instructions:H(M_),recentBlockhash:F(),addressTableLookups:le(G(H(P_)))})}),Qu=x({accountIndex:S(),mint:F(),owner:le(F()),uiTokenAmount:Lx}),L_=x({writable:H(rn),readonly:H(rn)}),Kl=x({err:$s,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(x({accounts:H(S()),data:F(),programIdIndex:S()}))})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Qu))),postTokenBalances:le(G(H(Qu))),loadedAddresses:le(L_),computeUnitsConsumed:le(S())}),Bp=x({err:$s,fee:S(),innerInstructions:le(G(H(x({index:S(),instructions:H(M_)})))),preBalances:H(S()),postBalances:H(S()),logMessages:le(G(H(F()))),preTokenBalances:le(G(H(Qu))),postTokenBalances:le(G(H(Qu))),loadedAddresses:le(L_),computeUnitsConsumed:le(S())}),ta=ht([xe(0),xe("legacy")]),js=x({pubkey:F(),lamports:S(),postBalance:G(S()),rewardType:G(F()),commission:le(G(S()))});At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Rp,meta:G(Kl),version:le(ta)})),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:R_,meta:G(Kl),version:le(ta)})),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:C_,meta:G(Bp),version:le(ta)})),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:R_,meta:G(Bp),version:le(ta)})),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),rewards:le(H(js)),blockTime:G(S()),blockHeight:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),transactions:H(x({transaction:Rp,meta:G(Kl)})),rewards:le(H(js)),blockTime:G(S())})));At(G(x({blockhash:F(),previousBlockhash:F(),parentSlot:S(),signatures:H(F()),blockTime:G(S())})));At(G(x({slot:S(),meta:Kl,blockTime:le(G(S())),transaction:Rp,version:le(ta)})));At(G(x({slot:S(),transaction:C_,meta:G(Bp),blockTime:le(G(S())),version:le(ta)})));Kr(x({blockhash:F(),feeCalculator:x({lamportsPerSignature:S()})}));Kr(x({blockhash:F(),lastValidBlockHeight:S()}));Kr(Yt());const jx=x({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()});At(H(jx));Kr(G(x({feeCalculator:x({lamportsPerSignature:S()})})));At(F());At(F());const qx=x({err:$s,logs:H(F()),signature:F()});x({result:Ll(qx),subscription:S()});class qi{constructor(e){this._keypair=void 0,this._keypair=e??cb()}static generate(){return new qi(cb())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Rh(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new qi({publicKey:n,secretKey:e})}static fromSeed(e){const t=Rh(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new qi({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),No("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),No(),Et(Qe(),dr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),No("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([ke("numSignatures"),ke("padding"),Dt("signatureOffset"),Dt("signatureInstructionIndex"),Dt("publicKeyOffset"),Dt("publicKeyInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),Dt("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");oc.utils.isValidPrivateKey;oc.getPublicKey;ie([ke("numSignatures"),Dt("signatureOffset"),ke("signatureInstructionIndex"),Dt("ethAddressOffset"),ke("ethAddressInstructionIndex"),Dt("messageDataOffset"),Dt("messageDataSize"),ke("messageInstructionIndex"),Ye(20,"ethAddress"),Ye(64,"signature"),ke("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var K_;new ve("StakeConfig11111111111111111111111111111111");class N_{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}K_=N_;N_.default=new K_(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),yx(),mx()])},Authorize:{index:1,layout:ie([se("instruction"),Qe("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Tt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Tt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Qe("newAuthorized"),se("stakeAuthorizationType"),_o("authoritySeed"),Qe("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),bx()])},Authorize:{index:1,layout:ie([se("instruction"),Qe("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Tt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),vx()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:F(),website:le(F()),details:le(F()),keybaseUsername:le(F())});new ve("Vote111111111111111111111111111111111111111");ie([Qe("nodePubkey"),Qe("authorizedWithdrawer"),ke("commission"),Ze(),Et(ie([Ze("slot"),se("confirmationCount")]),dr(se(),-8),"votes"),ke("rootSlotValid"),Ze("rootSlot"),Ze(),Et(ie([Ze("epoch"),Qe("authorizedVoter")]),dr(se(),-8),"authorizedVoters"),ie([Et(ie([Qe("authorizedPubkey"),Ze("epochOfLastAuthorizedSwitch"),Ze("targetEpoch")]),32,"buf"),Ze("idx"),ke("isEmpty")],"priorVoters"),Ze(),Et(ie([Ze("epoch"),Ze("credits"),Ze("prevCredits")]),dr(se(),-8),"epochCredits"),ie([Ze("slot"),Ze("timestamp")],"lastTimestamp")]);var rt={},Nl={};Nl.byteLength=Yx;Nl.toByteArray=Qx;Nl.fromByteArray=eM;var ii=[],Pr=[],Gx=typeof Uint8Array<"u"?Uint8Array:Array,Zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fo=0,Hx=Zd.length;fo<Hx;++fo)ii[fo]=Zd[fo],Pr[Zd.charCodeAt(fo)]=fo;Pr["-".charCodeAt(0)]=62;Pr["_".charCodeAt(0)]=63;function D_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Yx(r){var e=D_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Jx(r,e,t){return(e+t)*3/4-t}function Qx(r){var e,t=D_(r),n=t[0],i=t[1],s=new Gx(Jx(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Pr[r.charCodeAt(f)]<<18|Pr[r.charCodeAt(f+1)]<<12|Pr[r.charCodeAt(f+2)]<<6|Pr[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Pr[r.charCodeAt(f)]<<2|Pr[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=Pr[r.charCodeAt(f)]<<10|Pr[r.charCodeAt(f+1)]<<4|Pr[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Xx(r){return ii[r>>18&63]+ii[r>>12&63]+ii[r>>6&63]+ii[r&63]}function Zx(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Xx(n));return i.join("")}function eM(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(Zx(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(ii[e>>2]+ii[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ii[e>>10]+ii[e>>4&63]+ii[e<<2&63]+"=")),i.join("")}var xp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xp.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};xp.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,M=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=M,a/=256,h-=8);r[t+O-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Nl,t=xp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(wn(v,ArrayBuffer)||v&&wn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(wn(v,SharedArrayBuffer)||v&&wn(v.buffer,SharedArrayBuffer)))return A(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(wn(v,Uint8Array)){const g=new Uint8Array(v);return A(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function A(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Mi(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(wn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),wn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(wn(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||wn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Zn(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return xi(v).length;default:if(L)return k?-1:Zn(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return $t(this,g,y);case"utf8":case"utf-8":return z(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ie(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?z(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(wn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,Ke=k-y;const bt=Math.min(Z,Ke),ft=this.slice(L,$),vt=g.slice(y,k);for(let ct=0;ct<bt;++ct)if(ft[ct]!==vt[ct]){Z=ft[ct],Ke=vt[ct];break}return Z<Ke?-1:Ke<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Mi(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,Ke=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,Ke/=2,y/=2}function bt(vt,ct){return $===1?vt[ct]:vt.readUInt16BE(ct*$)}let ft;if(L){let vt=-1;for(ft=y;ft<Z;ft++)if(bt(v,ft)===bt(g,vt===-1?0:ft-vt)){if(vt===-1&&(vt=ft),ft-vt+1===Ke)return vt*$}else vt!==-1&&(ft-=ft-vt),vt=-1}else for(y+Ke>Z&&(y=Z-Ke),ft=y;ft>=0;ft--){let vt=!0;for(let ct=0;ct<Ke;ct++)if(bt(v,ft+ct)!==bt(g,ct)){vt=!1;break}if(vt)return ft}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function V(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const Ke=parseInt(g.substr(Z*2,2),16);if(Mi(Ke))return Z;v[y+Z]=Ke}return Z}function J(v,g,y,k){return _n(Zn(g,v.length-y),v,y,k)}function K(v,g,y,k){return _n(Oc(g),v,y,k)}function j(v,g,y,k){return _n(xi(g),v,y,k)}function te(v,g,y,k){return _n(Pf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return V(this,g,y,k);case"utf8":case"utf-8":return J(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function z(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,Ke=$>239?4:$>223?3:$>191?2:1;if(L+Ke<=y){let bt,ft,vt,ct;switch(Ke){case 1:$<128&&(Z=$);break;case 2:bt=v[L+1],(bt&192)===128&&(ct=($&31)<<6|bt&63,ct>127&&(Z=ct));break;case 3:bt=v[L+1],ft=v[L+2],(bt&192)===128&&(ft&192)===128&&(ct=($&15)<<12|(bt&63)<<6|ft&63,ct>2047&&(ct<55296||ct>57343)&&(Z=ct));break;case 4:bt=v[L+1],ft=v[L+2],vt=v[L+3],(bt&192)===128&&(ft&192)===128&&(vt&192)===128&&(ct=($&15)<<18|(bt&63)<<12|(ft&63)<<6|vt&63,ct>65535&&ct<1114112&&(Z=ct))}}Z===null?(Z=65533,Ke=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=Ke}return Be(k)}const X=4096;function Be(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ie(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function $t(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Tf[v[$]];return L}function jt(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function _e(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Kn(function(g){g=g>>>0,di(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Kn(function(g){g=g>>>0,di(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Kn(function(g){g=g>>>0,di(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Kn(function(g){g=g>>>0,di(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&dn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!1,52,8)};function ze(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;ze(this,g,y,k,Ke,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;ze(this,g,y,k,Ke,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function Qt(v,g,y,k,L){Xn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function cn(v,g,y,k,L){Xn(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Kn(function(g,y=0){return Qt(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Kn(function(g,y=0){return cn(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const bt=Math.pow(2,8*k-1);ze(this,g,y,k,bt-1,-bt)}let $=0,Z=1,Ke=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&Ke===0&&this[y+$-1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const bt=Math.pow(2,8*k-1);ze(this,g,y,k,bt-1,-bt)}let $=k-1,Z=1,Ke=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&Ke===0&&this[y+$+1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||ze(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Kn(function(g,y=0){return Qt(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Kn(function(g,y=0){return cn(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kt(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function lt(v,g,y,k,L){return g=+g,y=y>>>0,L||kt(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return lt(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return lt(this,g,y,!1,k)};function yr(v,g,y,k,L){return g=+g,y=y>>>0,L||kt(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return yr(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return yr(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),Ke=Z.length;if(Ke===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%Ke]}return this};const Ft={};function vn(v,g,y){Ft[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}vn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vn("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),vn("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=Yr(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=Yr(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function Yr(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function mr(v,g,y){di(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&dn(g,v.length-(y+1))}function Xn(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let Ke;throw $>3?g===0||g===BigInt(0)?Ke=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:Ke=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:Ke=`>= ${g}${Z} and <= ${y}${Z}`,new Ft.ERR_OUT_OF_RANGE("value",Ke,v)}mr(k,L,$)}function di(v,g){if(typeof v!="number")throw new Ft.ERR_INVALID_ARG_TYPE(g,"number",v)}function dn(v,g,y){throw Math.floor(v)!==v?(di(v,y),new Ft.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Ft.ERR_BUFFER_OUT_OF_BOUNDS:new Ft.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const ds=/[^+/0-9A-Za-z-_]/g;function Of(v){if(v=v.split("=")[0],v=v.trim().replace(ds,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Zn(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function Oc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function Pf(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function xi(v){return e.toByteArray(Of(v))}function _n(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function wn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Mi(v){return v!==v}const Tf=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Kn(v){return typeof BigInt>"u"?Rf:v}function Rf(){throw new Error("BigInt not supported")}})(rt);var tM=typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:typeof window<"u"?window:{},Ch;typeof Object.create=="function"?Ch=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Ch=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var nM=Ch;function Ps(r,e){var t={seen:[],stylize:iM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),U_(e)?t.showHidden=e:e&&fM(t,e),So(t.showHidden)&&(t.showHidden=!1),So(t.depth)&&(t.depth=2),So(t.colors)&&(t.colors=!1),So(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=rM),Xu(t,r,t.depth)}Ps.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Ps.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function rM(r,e){var t=Ps.styles[e];return t?"\x1B["+Ps.colors[t][0]+"m"+r+"\x1B["+Ps.colors[t][1]+"m":r}function iM(r,e){return r}function sM(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Xu(r,e,t){if(r.customInspect&&e&&Fa(e.inspect)&&e.inspect!==Ps&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return W_(n)||(n=Xu(r,n,t)),n}var i=oM(r,e);if(i)return i;var s=Object.keys(e),a=sM(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),Fu(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return eh(e);if(s.length===0){if(Fa(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(Ua(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Zu(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Fu(e))return eh(e)}var f="",h=!1,d=["{","}"];if(uM(e)&&(h=!0,d=["[","]"]),Fa(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if(Ua(e)&&(f=" "+RegExp.prototype.toString.call(e)),Zu(e)&&(f=" "+Date.prototype.toUTCString.call(e)),Fu(e)&&(f=" "+eh(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return Ua(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=aM(r,e,t,a,s):I=s.map(function(O){return Lh(r,e,t,a,O,h)}),r.seen.pop(),cM(I,f,d)}function oM(r,e){if(So(e))return r.stylize("undefined","undefined");if(W_(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(lM(e))return r.stylize(""+e,"number");if(U_(e))return r.stylize(""+e,"boolean");if(F_(e))return r.stylize("null","null")}function eh(r){return"["+Error.prototype.toString.call(r)+"]"}function aM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)z_(e,String(a))?s.push(Lh(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(Lh(r,e,t,n,f,!0))}),s}function Lh(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),z_(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(F_(t)?u=Xu(r,f.value,null):u=Xu(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),So(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function cM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function uM(r){return Array.isArray(r)}function U_(r){return typeof r=="boolean"}function F_(r){return r===null}function lM(r){return typeof r=="number"}function W_(r){return typeof r=="string"}function So(r){return r===void 0}function Ua(r){return Dl(r)&&Mp(r)==="[object RegExp]"}function Dl(r){return typeof r=="object"&&r!==null}function Zu(r){return Dl(r)&&Mp(r)==="[object Date]"}function Fu(r){return Dl(r)&&(Mp(r)==="[object Error]"||r instanceof Error)}function Fa(r){return typeof r=="function"}function pb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function Mp(r){return Object.prototype.toString.call(r)}function fM(r,e){if(!e||!Dl(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function z_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function gb(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var dM=Object.prototype.hasOwnProperty,yb=Object.keys||function(r){var e=[];for(var t in r)dM.call(r,t)&&e.push(t);return e},mb=Array.prototype.slice,th;function V_(){return typeof th<"u"?th:th=function(){return function(){}.name==="foo"}()}function bb(r){return Object.prototype.toString.call(r)}function vb(r){return rt.isBuffer(r)||typeof tM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function On(r,e){r||Hn(r,!0,e,"==",Lp)}var hM=/\s*function\s+([^\(\s]*)\s*/;function $_(r){if(!!Fa(r)){if(V_())return r.name;var e=r.toString(),t=e.match(hM);return t&&t[1]}}On.AssertionError=Cp;function Cp(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=pM(this),this.generatedMessage=!0);var e=r.stackStartFunction||Hn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=$_(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}nM(Cp,Error);function _b(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function wb(r){if(V_()||!Fa(r))return Ps(r);var e=$_(r),t=e?": "+e:"";return"[Function"+t+"]"}function pM(r){return _b(wb(r.actual),128)+" "+r.operator+" "+_b(wb(r.expected),128)}function Hn(r,e,t,n,i){throw new Cp({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}On.fail=Hn;function Lp(r,e){r||Hn(r,!0,e,"==",Lp)}On.ok=Lp;On.equal=j_;function j_(r,e,t){r!=e&&Hn(r,e,t,"==",j_)}On.notEqual=q_;function q_(r,e,t){r==e&&Hn(r,e,t,"!=",q_)}On.deepEqual=G_;function G_(r,e,t){Do(r,e,!1)||Hn(r,e,t,"deepEqual",G_)}On.deepStrictEqual=H_;function H_(r,e,t){Do(r,e,!0)||Hn(r,e,t,"deepStrictEqual",H_)}function Do(r,e,t,n){if(r===e)return!0;if(rt.isBuffer(r)&&rt.isBuffer(e))return gb(r,e)===0;if(Zu(r)&&Zu(e))return r.getTime()===e.getTime();if(Ua(r)&&Ua(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(vb(r)&&vb(e)&&bb(r)===bb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return gb(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(rt.isBuffer(r)!==rt.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),gM(r,e,t,n))}function Sb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function gM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(pb(r)||pb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Sb(r),s=Sb(e);if(i&&!s||!i&&s)return!1;if(i)return r=mb.call(r),e=mb.call(e),Do(r,e,t);var a=yb(r),u=yb(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!Do(r[f],e[f],t,n))return!1;return!0}On.notDeepEqual=Y_;function Y_(r,e,t){Do(r,e,!1)&&Hn(r,e,t,"notDeepEqual",Y_)}On.notDeepStrictEqual=J_;function J_(r,e,t){Do(r,e,!0)&&Hn(r,e,t,"notDeepStrictEqual",J_)}On.strictEqual=Q_;function Q_(r,e,t){r!==e&&Hn(r,e,t,"===",Q_)}On.notStrictEqual=X_;function X_(r,e,t){r===e&&Hn(r,e,t,"!==",X_)}function Ab(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function yM(r){var e;try{r()}catch(t){e=t}return e}function Z_(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=yM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&Hn(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&Fu(i),u=!r&&i&&!t;if((a&&s&&Ab(i,t)||u)&&Hn(i,t,"Got unwanted exception"+n),r&&i&&t&&!Ab(i,t)||!r&&i)throw i}On.throws=mM;function mM(r,e,t){Z_(!0,r,e,t)}On.doesNotThrow=bM;function bM(r,e,t){Z_(!1,r,e,t)}On.ifError=vM;function vM(r){if(r)throw r}class Za{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function _M(r,e){return e.property?r+"["+e.property+"]":r}class vu extends Za{isCount(){throw new Error("ExternalLayout is abstract")}}class ew extends Za{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class wM extends Za{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof Za,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class SM extends Za{constructor(e,t){if(!(e instanceof vu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof vu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof vu&&(i=e.length),!(rt.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(_M("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof vu&&this.length.encode(i,t,n),i}}var Xe=r=>new ew(1,r),Wa=r=>new ew(4,r),qt=(r,e,t)=>new wM(r,e,t),tw=(r,e)=>new SM(r,e);const Gt=(r="publicKey")=>tw(32,r),Tr=(r="uint64")=>tw(8,r);function en(r,e,t,...n){return wx(e,t,n,{skipPreflight:!1})}const AM=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),nw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),kb="Failed to find account",Ib="Invalid account owner";function nh(r){return rt.Buffer.from(r.toBuffer())}class kn extends Zi{toBuffer(){const e=super.toArray().reverse(),t=rt.Buffer.from(e);if(t.length===8)return t;On(t.length<8,"u64 too large");const n=rt.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return On(e.length===8,`Invalid buffer length: ${e.length}`),new kn([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function or(r){return"publicKey"in r}const kM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},rw=new ve("So11111111111111111111111111111111111111112"),Ca=qt([Wa("mintAuthorityOption"),Gt("mintAuthority"),Tr("supply"),Xe("decimals"),Xe("isInitialized"),Wa("freezeAuthorityOption"),Gt("freezeAuthority")]),yo=qt([Gt("mint"),Gt("owner"),Tr("amount"),Wa("delegateOption"),Gt("delegate"),Xe("state"),Wa("isNativeOption"),Tr("isNative"),Tr("delegatedAmount"),Wa("closeAuthorityOption"),Gt("closeAuthority")]),_u=qt([Xe("m"),Xe("n"),Xe("is_initialized"),Gt("signer1"),Gt("signer2"),Gt("signer3"),Gt("signer4"),Gt("signer5"),Gt("signer6"),Gt("signer7"),Gt("signer8"),Gt("signer9"),Gt("signer10"),Gt("signer11")]);class yt{constructor(e,t,n,i){Ea(this,"connection",void 0),Ea(this,"publicKey",void 0),Ea(this,"programId",void 0),Ea(this,"associatedProgramId",void 0),Ea(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:nw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(Ca.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(yo.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(_u.span)}static async createMint(e,t,n,i,s,a){const u=qi.generate(),f=new yt(e,u.publicKey,a,t),h=await yt.getMinBalanceRentForExemptMint(e),d=new Lt;return d.add(ni.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:Ca.span,programId:a})),d.add(yt.createInitMintInstruction(a,u.publicKey,s,n,i)),await en("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await yt.getMinBalanceRentForExemptAccount(this.connection),n=qi.generate(),i=new Lt;i.add(ni.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:yo.span,programId:this.programId}));const s=this.publicKey;return i.add(yt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await en("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await yt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await en("CreateAssociatedTokenAccount",this.connection,new Lt().add(yt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await yt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===kb||n.message===Ib){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await yt.getMinBalanceRentForExemptAccount(e),u=qi.generate(),f=new Lt;return f.add(ni.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:yo.span,programId:t})),f.add(ni.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(yt.createInitAccountInstruction(t,rw,u.publicKey,n)),await en("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=qi.generate(),i=await yt.getMinBalanceRentForExemptMultisig(this.connection),s=new Lt;s.add(ni.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:_u.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:wo,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=qt([Xe("instruction"),Xe("m")]),f=rt.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await en("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=Ca.span)throw new Error("Invalid mint size");const t=rt.Buffer.from(e.data),n=Ca.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=kn.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(kb);if(!n.owner.equals(this.programId))throw new Error(Ib);if(n.data.length!=yo.span)throw new Error("Invalid account size");const i=rt.Buffer.from(n.data),s=yo.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=kn.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new kn):(s.delegate=new ve(s.delegate),s.delegatedAmount=kn.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=kn.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=_u.span)throw new Error("Invalid multisig size");const n=rt.Buffer.from(t.data),i=_u.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return or(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await en("Transfer",this.connection,new Lt().add(yt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;or(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await en("Approve",this.connection,new Lt().add(yt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("Revoke",this.connection,new Lt().add(yt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;or(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await en("SetAuthority",this.connection,new Lt().add(yt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;or(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await en("MintTo",this.connection,new Lt().add(yt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;or(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await en("Burn",this.connection,new Lt().add(yt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;or(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await en("CloseAccount",this.connection,new Lt().add(yt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("FreezeAccount",this.connection,new Lt().add(yt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;or(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await en("ThawAccount",this.connection,new Lt().add(yt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return or(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await en("TransferChecked",this.connection,new Lt().add(yt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;or(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await en("ApproveChecked",this.connection,new Lt().add(yt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;or(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await en("MintToChecked",this.connection,new Lt().add(yt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;or(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await en("BurnChecked",this.connection,new Lt().add(yt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await en("SyncNative",this.connection,new Lt().add(yt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:wo,isSigner:!1,isWritable:!1}];const u=qt([Xe("instruction"),Xe("decimals"),Gt("mintAuthority"),Xe("option"),Gt("freezeAuthority")]);let f=rt.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:nh(i),option:s===null?0:1,freezeAuthority:nh(s||new ve(0))},f);f=f.slice(0,h)}return new dt({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:wo,isSigner:!1,isWritable:!1}],a=qt([Xe("instruction")]),u=rt.Buffer.alloc(a.span);return a.encode({instruction:1},u),new dt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=qt([Xe("instruction"),Tr("amount")]),f=rt.Buffer.alloc(u.span);u.encode({instruction:3,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=qt([Xe("instruction"),Tr("amount")]),f=rt.Buffer.alloc(u.span);u.encode({instruction:4,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=qt([Xe("instruction")]),a=rt.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=qt([Xe("instruction"),Xe("authorityType"),Xe("option"),Gt("newAuthority")]);let f=rt.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:kM[i],option:n===null?0:1,newAuthority:nh(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=qt([Xe("instruction"),Tr("amount")]),f=rt.Buffer.alloc(u.span);u.encode({instruction:7,amount:new kn(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=qt([Xe("instruction"),Tr("amount")]),f=rt.Buffer.alloc(u.span);u.encode({instruction:8,amount:new kn(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=qt([Xe("instruction")]),u=rt.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=qt([Xe("instruction")]),u=rt.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=qt([Xe("instruction")]),u=rt.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=qt([Xe("instruction"),Tr("amount"),Xe("decimals")]),d=rt.Buffer.alloc(h.span);h.encode({instruction:12,amount:new kn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=qt([Xe("instruction"),Tr("amount"),Xe("decimals")]),d=rt.Buffer.alloc(h.span);h.encode({instruction:13,amount:new kn(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=qt([Xe("instruction"),Tr("amount"),Xe("decimals")]),h=rt.Buffer.alloc(f.span);f.encode({instruction:14,amount:new kn(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=qt([Xe("instruction"),Tr("amount"),Xe("decimals")]),h=rt.Buffer.alloc(f.span);f.encode({instruction:15,amount:new kn(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new dt({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=qt([Xe("instruction")]),i=rt.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new dt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=rt.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ni.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:wo,isSigner:!1,isWritable:!1}];return new dt({keys:f,programId:e,data:u})}}var IM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:nw,AccountLayout:yo,MintLayout:Ca,NATIVE_MINT:rw,TOKEN_PROGRAM_ID:AM,Token:yt,u64:kn},Symbol.toStringTag,{value:"Module"})),fc=sc(IM),Ul=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.getAccountInfo=tn.getTokenAccount=tn.getAssociatedTokenAddress=tn.convertFactionStringToNum=tn.longToByteArray=tn.byteArrayToLong=tn.stringToByteArray=tn.byteArrayToString=void 0;const wu=ja,Su=pt,Wu=Ri,ei=fc;function EM(r){return String.fromCharCode(...r)}tn.byteArrayToString=EM;function OM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}tn.stringToByteArray=OM;function PM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}tn.byteArrayToLong=PM;function TM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}tn.longToByteArray=TM;function RM(r){return Ul(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return wu.FactionType.MUD;case"oni":return wu.FactionType.ONI;case"ustur":return wu.FactionType.Ustur;default:return wu.FactionType.Unenlisted}})}tn.convertFactionStringToNum=RM;function iw(r,e){return Ul(this,void 0,void 0,function*(){const[t]=yield Wu.PublicKey.findProgramAddress([r.toBuffer(),ei.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],ei.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}tn.getAssociatedTokenAddress=iw;function BM(r,e,t,n=e,i){return Ul(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Su.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new Su.BN(h.info.tokenAmount.amount);d.gt(new Su.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield iw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(Wu.SystemProgram.programId))return{tokenAccount:u,createInstruction:[ei.Token.createAssociatedTokenAccountInstruction(ei.ASSOCIATED_TOKEN_PROGRAM_ID,ei.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new Wu.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=Su.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[Wu.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield ei.Token.getMinBalanceRentForExemptAccount(r),space:ei.AccountLayout.span,programId:ei.TOKEN_PROGRAM_ID}),ei.Token.createInitAccountInstruction(ei.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}tn.getTokenAccount=BM;function xM(r,e){return Ul(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}tn.getAccountInfo=xM;var Fl={},MM=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.sendAndConfirmTransaction=void 0;const CM=Ri;function LM(r,e,...t){return MM(this,void 0,void 0,function*(){let n="";try{n=yield(0,CM.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}Fl.sendAndConfirmTransaction=LM;var Ms={},Kp={},Np={},sw={};Object.defineProperty(sw,"__esModule",{value:!0});var Wl={},ss={},En={},zr={},dc={};Object.defineProperty(dc,"__esModule",{value:!0});dc.baseIdl=void 0;dc.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.baseIdl=void 0;zl.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var KM=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),NM=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),DM=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&KM(e,r,t);return NM(e,r),e};Object.defineProperty(zr,"__esModule",{value:!0});zr.getMarketplaceProgram=zr.getGmLogsIDL=zr.getGmIDL=void 0;const Eb=pt,UM=dc,FM=DM(zl);function ow(r){const e=UM.baseIdl;return e.metadata.address=r.toBase58(),e}zr.getGmIDL=ow;function WM(r){const e=FM.baseIdl;return e.metadata.address=r.toBase58(),e}zr.getGmLogsIDL=WM;function zM({connection:r,programId:e}){const t=ow(e),n=new Eb.AnchorProvider(r,null,null);return new Eb.Program(t,e,n)}zr.getMarketplaceProgram=zM;var qs=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(En,"__esModule",{value:!0});En.getSingleOrder=En.getOpenOrdersForPlayerAndAsset=En.getOpenOrdersForPlayerAndCurrency=En.getOpenOrdersForAsset=En.getOpenOrdersForCurrency=En.getOpenOrdersForPlayer=En.getAllOpenOrders=void 0;const Yn=pt,Gs=zr;function VM(r,e){return qs(this,void 0,void 0,function*(){const t=new Yn.AnchorProvider(r,null,null),n=(0,Gs.getGmIDL)(e),i=new Yn.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}En.getAllOpenOrders=VM;function $M(r,e,t){return qs(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Gs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForPlayer=$M;function jM(r,e,t){return qs(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Gs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForCurrency=jM;function qM(r,e,t){return qs(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Gs.getGmIDL)(t),s=new Yn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}En.getOpenOrdersForAsset=qM;function GM(r,e,t,n){return qs(this,void 0,void 0,function*(){const i=new Yn.AnchorProvider(r,null,null),s=(0,Gs.getGmIDL)(n),a=new Yn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}En.getOpenOrdersForPlayerAndCurrency=GM;function HM(r,e,t,n){return qs(this,void 0,void 0,function*(){const i=new Yn.AnchorProvider(r,null,null),s=(0,Gs.getGmIDL)(n),a=new Yn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}En.getOpenOrdersForPlayerAndAsset=HM;function YM(r,e,t){return qs(this,void 0,void 0,function*(){const n=new Yn.AnchorProvider(r,null,null),i=(0,Gs.getGmIDL)(t);return yield new Yn.Program(i,t,n).account.orderAccount.fetch(e)})}En.getSingleOrder=YM;var nn={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.FEE_EXEMPT_SEED=Mn.OPEN_ORDERS_COUNTER=Mn.REGISTERED_CURRENCY_SEED=Mn.ORDER_VAULT_AUTH_SEED=Mn.ORDER_VAULT_SEED=Mn.MARKET_VARS_SEED=void 0;Mn.MARKET_VARS_SEED=Pe.Buffer.from("market-vars");Mn.ORDER_VAULT_SEED=Pe.Buffer.from("order-vault-account");Mn.ORDER_VAULT_AUTH_SEED=Pe.Buffer.from("order-vault-auth");Mn.REGISTERED_CURRENCY_SEED=Pe.Buffer.from("registered-currency");Mn.OPEN_ORDERS_COUNTER=Pe.Buffer.from("open-orders-counter");Mn.FEE_EXEMPT_SEED=Pe.Buffer.from("fee_exempt");var JM=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),QM=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XM=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&JM(e,r,t);return QM(e,r),e},os=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(nn,"__esModule",{value:!0});nn.getAllFeeExemptAccounts=nn.getFeeExemptAccount=nn.getOpenOrdersCounter=nn.getAllRegisteredCurrencies=nn.getRegisteredCurrencyAccount=nn.getOrderVaultAuth=nn.getOrderVault=nn.getMarketVarsAccount=void 0;const el=pt,na=Ri,ra=XM(Mn),aw=zr;function ZM(r){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.MARKET_VARS_SEED],r)})}nn.getMarketVarsAccount=ZM;function eC(r,e,t){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}nn.getOrderVault=eC;function tC(r,e){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}nn.getOrderVaultAuth=tC;function nC(r,e){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}nn.getRegisteredCurrencyAccount=nC;function rC(r,e){return os(this,void 0,void 0,function*(){const t=new el.AnchorProvider(r,null,null),n=(0,aw.getGmIDL)(e),i=new el.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}nn.getAllRegisteredCurrencies=rC;function iC(r,e,t){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}nn.getOpenOrdersCounter=iC;function sC(r,e){return os(this,void 0,void 0,function*(){return na.PublicKey.findProgramAddress([ra.FEE_EXEMPT_SEED,r.toBuffer()],e)})}nn.getFeeExemptAccount=sC;function oC(r,e){return os(this,void 0,void 0,function*(){const t=new el.AnchorProvider(r,null,null),n=(0,aw.getGmIDL)(e);return yield new el.Program(n,e,t).account.feeReduction.all()})}nn.getAllFeeExemptAccounts=oC;var $n={},ia=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($n,"__esModule",{value:!0});$n.getRoyaltyReductionForStakingAccount=$n.getRoyaltyReductionForUserAndMint=$n.getRegisteredCurrencyInfoFromPubkey=$n.getRegisteredCurrencyAccountInfo=$n.getFeeExemptAccountInfo=$n.getMarketVarsAccountInfo=void 0;const tl=pt,Dp=nn,Vl=zr,Kh=bl;function aC(r,e){return ia(this,void 0,void 0,function*(){const t=(0,Vl.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,Dp.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}$n.getMarketVarsAccountInfo=aC;function cC(r,e,t){return ia(this,void 0,void 0,function*(){const n=(0,Vl.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,Dp.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}$n.getFeeExemptAccountInfo=cC;function uC(r,e,t){return ia(this,void 0,void 0,function*(){const n=(0,Vl.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,Dp.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}$n.getRegisteredCurrencyAccountInfo=uC;function Up(r,e,t){return ia(this,void 0,void 0,function*(){return yield(0,Vl.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}$n.getRegisteredCurrencyInfoFromPubkey=Up;function lC(r,e,t,n,i,s){return ia(this,void 0,void 0,function*(){let a=0;const u=yield Up(r,e,i),[f]=yield(0,Kh.getStakingAccount)(t,n,s),h=yield(0,Kh.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new tl.BN(0))){const d=u.royaltyTiers;let m=new tl.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}$n.getRoyaltyReductionForUserAndMint=lC;function fC(r,e,t,n,i){return ia(this,void 0,void 0,function*(){let s=0;const a=yield Up(r,e,i),u=yield(0,Kh.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new tl.BN(0))){const f=a.royaltyTiers;let h=new tl.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}$n.getRoyaltyReductionForStakingAccount=fC;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(En,r),t(nn,r),t($n,r),t(Mn,r)})(ss);var hc={},Qn={},Yi={},dC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.convertDecimalPriceToBn=Yi.initializeAtaForMint=Yi.getOrderSide=void 0;const hC=pt,pC=Ws,rh=fc,gC=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";Yi.getOrderSide=gC;function yC({mint:r,owner:e,connection:t}){return dC(this,void 0,void 0,function*(){const n=[],i=yield(0,pC.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(rh.Token.createAssociatedTokenAccountInstruction(rh.ASSOCIATED_TOKEN_PROGRAM_ID,rh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}Yi.initializeAtaForMint=yC;const mC=(r,e)=>new hC.BN(r*Math.pow(10,e));Yi.convertDecimalPriceToBn=mC;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(zr,r),t(Yi,r)})(Qn);var bC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(hc,"__esModule",{value:!0});hc.createOrderCounterInstruction=void 0;const vC=Qn;function _C({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return bC(this,void 0,void 0,function*(){return yield(0,vC.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}hc.createOrderCounterInstruction=_C;var wC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.createCancelOrderInstruction=void 0;const SC=pt,AC=ss,kC=hc,Ob=Qn,IC=Lr;function EC({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return wC(this,void 0,void 0,function*(){const s=(0,Ob.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,Ob.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,IC.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof SC.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,AC.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,kC.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const A=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(A),a})}Wl.createCancelOrderInstruction=EC;var Uo={},cw=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.createInitializeSellOrderInstruction=Uo.createInitializeBuyOrderInstruction=void 0;const Ro=pt,uw=Qn,lw=Lr,fw=ss,dw=hc,hw=Lr;function OC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return cw(this,void 0,void 0,function*(){const f=(0,uw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,lw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Ro.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,fw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,dw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Ro.web3.Keypair.generate();h.signers.push(A);const R=yield(0,hw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeBuy(n,new Ro.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Uo.createInitializeBuyOrderInstruction=OC;function PC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return cw(this,void 0,void 0,function*(){const f=(0,uw.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,lw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Ro.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,fw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,dw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const A=Ro.web3.Keypair.generate();h.signers.push(A);const R=yield(0,hw.createAccountInstruction)(r,e,A,u);h.instructions.push(R);const C=yield f.methods.processInitializeSell(n,new Ro.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:A.publicKey,depositMint:s,receiveMint:a}).signers([A]).instruction();return h.instructions.push(C),{orderAccount:A.publicKey,ixSet:h}})}Uo.createInitializeSellOrderInstruction=PC;var $l={},TC=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty($l,"__esModule",{value:!0});$l.createDeregisterCurrencyInstruction=void 0;const RC=Qn;function BC({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return TC(this,void 0,void 0,function*(){const s=[yield(0,RC.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}$l.createDeregisterCurrencyInstruction=BC;var jl={},ql={},Gl={},pw={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",M=d+"Division by zero",A={},R=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var V=this;if(!(V instanceof E))return N===R?Y():new E(N);if(N instanceof E)V.s=N.s,V.e=N.e,V.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(V,N)}V.constructor=E}return E.prototype=A,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var V,J,K;if(!C.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(V=N.indexOf("."))>-1&&(N=N.replace(".","")),(J=N.search(/e/i))>0?(V<0&&(V=J),V+=+N.slice(J+1),N=N.substring(0,J)):V<0&&(V=N.length),K=N.length,J=0;J<K&&N.charAt(J)=="0";)++J;if(J==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=V-J-1,E.c=[],V=0;J<=K;)E.c[V++]=+N.charAt(J++)}return E}function oe(E,N,V,J){var K=E.c;if(V===R&&(V=E.constructor.RM),V!==0&&V!==1&&V!==2&&V!==3)throw Error(O);if(N<1)J=V===3&&(J||!!K[0])||N===0&&(V===1&&K[0]>=5||V===2&&(K[0]>5||K[0]===5&&(J||K[1]!==R))),K.length=1,J?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(J=V===1&&K[N]>=5||V===2&&(K[N]>5||K[N]===5&&(J||K[N+1]!==R||K[N-1]&1))||V===3&&(J||!!K[0]),K.length=N,J){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,V){var J=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(J<0?"e":"e+")+J;else if(J<0){for(;++J;)K="0"+K;K="0."+K}else if(J>0)if(++J>j)for(J-=j;J--;)K+="0";else J<j&&(K=K.slice(0,J)+"."+K.slice(J));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&V?"-"+K:K}A.abs=function(){var E=new this.constructor(this);return E.s=1,E},A.cmp=function(E){var N,V=this,J=V.c,K=(E=new V.constructor(E)).c,j=V.s,te=E.s,T=V.e,z=E.e;if(!J[0]||!K[0])return J[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=z)return T>z^N?1:-1;for(te=(T=J.length)<(z=K.length)?T:z,j=-1;++j<te;)if(J[j]!=K[j])return J[j]>K[j]^N?1:-1;return T==z?0:T>z^N?1:-1},A.div=function(E){var N=this,V=N.constructor,J=N.c,K=(E=new V(E)).c,j=N.s==E.s?1:-1,te=V.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(M);if(!J[0])return E.s=j,E.c=[E.e=0],E;var T,z,X,Be,ye,Ie=K.slice(),$t=T=K.length,jt=J.length,_e=J.slice(0,T),ze=_e.length,Qt=E,cn=Qt.c=[],kt=0,lt=te+(Qt.e=N.e-E.e)+1;for(Qt.s=j,j=lt<0?0:lt,Ie.unshift(0);ze++<T;)_e.push(0);do{for(X=0;X<10;X++){if(T!=(ze=_e.length))Be=T>ze?1:-1;else for(ye=-1,Be=0;++ye<T;)if(K[ye]!=_e[ye]){Be=K[ye]>_e[ye]?1:-1;break}if(Be<0){for(z=ze==T?K:Ie;ze;){if(_e[--ze]<z[ze]){for(ye=ze;ye&&!_e[--ye];)_e[ye]=9;--_e[ye],_e[ze]+=10}_e[ze]-=z[ze]}for(;!_e[0];)_e.shift()}else break}cn[kt++]=Be?X:++X,_e[0]&&Be?_e[ze]=J[$t]||0:_e=[J[$t]]}while(($t++<jt||_e[0]!==R)&&j--);return!cn[0]&&kt!=1&&(cn.shift(),Qt.e--,lt--),kt>lt&&oe(Qt,lt,V.RM,_e[0]!==R),Qt},A.eq=function(E){return this.cmp(E)===0},A.gt=function(E){return this.cmp(E)>0},A.gte=function(E){return this.cmp(E)>-1},A.lt=function(E){return this.cmp(E)<0},A.lte=function(E){return this.cmp(E)<1},A.minus=A.sub=function(E){var N,V,J,K,j=this,te=j.constructor,T=j.s,z=(E=new te(E)).s;if(T!=z)return E.s=-z,j.plus(E);var X=j.c.slice(),Be=j.e,ye=E.c,Ie=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-z:X[0]?E=new te(j):E.s=1,E;if(T=Be-Ie){for((K=T<0)?(T=-T,J=X):(Ie=Be,J=ye),J.reverse(),z=T;z--;)J.push(0);J.reverse()}else for(V=((K=X.length<ye.length)?X:ye).length,T=z=0;z<V;z++)if(X[z]!=ye[z]){K=X[z]<ye[z];break}if(K&&(J=X,X=ye,ye=J,E.s=-E.s),(z=(V=ye.length)-(N=X.length))>0)for(;z--;)X[N++]=0;for(z=N;V>T;){if(X[--V]<ye[V]){for(N=V;N&&!X[--N];)X[N]=9;--X[N],X[V]+=10}X[V]-=ye[V]}for(;X[--z]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ie;return X[0]||(E.s=1,X=[Ie=0]),E.c=X,E.e=Ie,E},A.mod=function(E){var N,V=this,J=V.constructor,K=V.s,j=(E=new J(E)).s;if(!E.c[0])throw Error(M);return V.s=E.s=1,N=E.cmp(V)==1,V.s=K,E.s=j,N?new J(V):(K=J.DP,j=J.RM,J.DP=J.RM=0,V=V.div(E),J.DP=K,J.RM=j,this.minus(V.times(E)))},A.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},A.plus=A.add=function(E){var N,V,J,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,z=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-z){for(N>0?(z=te,J=X):(N=-N,J=T),J.reverse();N--;)J.push(0);J.reverse()}for(T.length-X.length<0&&(J=X,X=T,T=J),N=X.length,V=0;N;T[N]%=10)V=(T[--N]=T[N]+X[N]+V)/10|0;for(V&&(T.unshift(V),++z),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=z,E},A.pow=function(E){var N=this,V=new N.constructor("1"),J=V,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(J=J.times(N)),E>>=1,!!E;)N=N.times(N);return K?V.div(J):J},A.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},A.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},A.sqrt=function(){var E,N,V,J=this,K=J.constructor,j=J.s,te=J.e,T=new K("0.5");if(!J.c[0])return new K(J);if(j<0)throw Error(d+"No square root");j=Math.sqrt(J+""),j===0||j===1/0?(N=J.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do V=E,E=T.times(V.plus(J.div(V)));while(V.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},A.times=A.mul=function(E){var N,V=this,J=V.constructor,K=V.c,j=(E=new J(E)).c,te=K.length,T=j.length,z=V.e,X=E.e;if(E.s=V.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=z+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(z=T;z--;){for(T=0,X=te+z;X>z;)T=N[X]+j[z]*K[X-z-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),z=N.length;!N[--z];)N.pop();return E.c=N,E},A.toExponential=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),++E,N);V.c.length<E;)V.c.push(0)}return de(V,!0,!!J)},A.toFixed=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),E+V.e+1,N),E=E+V.e+1;V.c.length<E;)V.c.push(0)}return de(V,!1,!!J)},A.toJSON=A.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},A.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},A.toPrecision=function(E,N){var V=this,J=V.constructor,K=V.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(V=oe(new J(V),E,N);V.c.length<E;)V.c.push(0)}return de(V,E<=V.e||V.e<=J.NE||V.e>=J.PE,!!K)},A.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(W)})(pw);function Ce(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var xC={};function Fp(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:xC}var gw=Object.assign,nl=Object.getOwnPropertyDescriptor,oi=Object.defineProperty,pc=Object.prototype,Nh=[];Object.freeze(Nh);var Wp={};Object.freeze(Wp);var MC=typeof Proxy<"u",CC=Object.toString();function yw(){MC||Ce("Proxy not available")}function mw(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Ao=function(){};function pr(r){return typeof r=="function"}function Cs(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Hl(r){return r!==null&&typeof r=="object"}function Ti(r){if(!Hl(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===CC}function bw(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function gc(r,e,t){oi(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function vw(r,e,t){oi(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function as(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return Hl(n)&&n[t]===!0}}function sa(r){return r instanceof Map}function yc(r){return r instanceof Set}var _w=typeof Object.getOwnPropertySymbols<"u";function LC(r){var e=Object.keys(r);if(!_w)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return pc.propertyIsEnumerable.call(r,n)})):e}var Fo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:_w?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function ww(r){return r===null?null:typeof r=="object"?""+r:r}function Oi(r,e){return pc.hasOwnProperty.call(r,e)}var KC=Object.getOwnPropertyDescriptors||function(e){var t={};return Fo(e).forEach(function(n){t[n]=nl(e,n)}),t};function Pb(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,UC(n.key),n)}}function zp(r,e,t){return e&&Pb(r.prototype,e),t&&Pb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ts(){return ts=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ts.apply(this,arguments)}function Sw(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Dh(r,e)}function Dh(r,e){return Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Dh(r,e)}function ih(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function NC(r,e){if(!!r){if(typeof r=="string")return Tb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tb(r,e)}}function Tb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ko(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=NC(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DC(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function UC(r){var e=DC(r,"string");return typeof e=="symbol"?e:String(e)}var si=Symbol("mobx-stored-annotations");function Vr(r){function e(t,n){if(mc(n))return r.decorate_20223_(t,n);oa(t,n,r)}return Object.assign(e,r)}function oa(r,e,t){Oi(r,si)||gc(r,si,ts({},r[si])),HC(t)||(r[si][e]=t)}function FC(r){return Oi(r,si)||gc(r,si,ts({},r[si])),r[si]}function mc(r){return typeof r=="object"&&typeof r.kind=="string"}var Ae=Symbol("mobx administration"),bc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return Vw(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),jn(),$w(this),qn()},e.toString=function(){return this.name_},r}(),Vp=as("Atom",bc);function Yl(r,e,t){e===void 0&&(e=Ao),t===void 0&&(t=Ao);var n=new bc(r);return e!==Ao&&Zw(n,e),t!==Ao&&wc(n,t),n}function WC(r,e){return r===e}function zC(r,e){return Qp(r,e)}function VC(r,e){return Qp(r,e,1)}function $C(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Ls={identity:WC,structural:zC,default:$C,shallow:VC};function Ks(r,e,t){return rf(r)?r:Array.isArray(r)?Rt.array(r,{name:t}):Ti(r)?Rt.object(r,void 0,{name:t}):sa(r)?Rt.map(r,{name:t}):yc(r)?Rt.set(r,{name:t}):typeof r=="function"&&!cs(r)&&!$o(r)?bw(r)?Us(r):Vo(t,r):r}function jC(r,e,t){if(r==null||sn(r)||fn(r)||an(r)||Ln(r))return r;if(Array.isArray(r))return Rt.array(r,{name:t,deep:!1});if(Ti(r))return Rt.object(r,void 0,{name:t,deep:!1});if(sa(r))return Rt.map(r,{name:t,deep:!1});if(yc(r))return Rt.set(r,{name:t,deep:!1})}function Jl(r){return r}function qC(r,e){return Qp(r,e)?e:r}var Aw="override",GC=Vr({annotationType_:Aw,make_:YC,extend_:JC,decorate_20223_:QC});function HC(r){return r.annotationType_===Aw}function YC(r,e){return 0}function JC(r,e,t,n){Ce("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function QC(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function vc(r,e){return{annotationType_:r,options_:e,make_:XC,extend_:ZC,decorate_20223_:eL}}function XC(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(cs(t.value))return 1;var s=kw(r,this,e,t,!1);return oi(n,e,s),2}function ZC(r,e,t,n){var i=kw(r,this,e,t);return r.defineProperty_(e,i,n)}function eL(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return ns((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){oa(this,n,s)});return}if(t=="method"){var u;return cs(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Ce("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function tL(r,e,t,n){e.annotationType_,n.value}function kw(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),tL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:ns((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function Iw(r,e){return{annotationType_:r,options_:e,make_:nL,extend_:rL,decorate_20223_:iL}}function nL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Oi(r.target_,e)||!$o(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if($o(t.value))return 1;var s=Ew(r,this,e,t,!1,!1);return oi(n,e,s),2}function rL(r,e,t,n){var i,s=Ew(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function iL(r,e){var t,n=e.name,i=e.addInitializer;return $o(r)||(r=Us(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function sL(r,e,t,n){e.annotationType_,n.value}function Ew(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),sL(r,e,t,n);var a=n.value;if($o(a)||(a=Us(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function $p(r,e){return{annotationType_:r,options_:e,make_:oL,extend_:aL,decorate_20223_:cL}}function oL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function aL(r,e,t,n){return uL(r,this,e,t),r.defineComputedProperty_(e,ts({},this.options_,{get:t.get,set:t.set}),n)}function cL(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=Ys(this)[Ae],a=ts({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new zo(a))}),function(){return this[Ae].getObservablePropValue_(n)}}function uL(r,e,t,n){e.annotationType_,n.get}function Ql(r,e){return{annotationType_:r,options_:e,make_:lL,extend_:fL,decorate_20223_:dL}}function lL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function fL(r,e,t,n){var i,s;return hL(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Ks,n)}function dL(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=Ys(u)[Ae],I=new Ji(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Ks,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Ae].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[Ae].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function hL(r,e,t,n){e.annotationType_}var pL="true",gL=Ow();function Ow(r){return{annotationType_:pL,options_:r,make_:yL,extend_:mL,decorate_20223_:bL}}function yL(r,e,t,n){var i,s;if(t.get)return Mr.make_(r,e,t,n);if(t.set){var a=ns(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(oi(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(bw(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?Us.bound:Us;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?Vo.bound:Vo;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?Rt.ref:Rt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function mL(r,e,t,n){var i,s;if(t.get)return Mr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:ns(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?Rt.ref:Rt;return u.extend_(r,e,t,n)}function bL(r,e){Ce("'"+this.annotationType_+"' cannot be used as a decorator")}var vL="observable",_L="observable.ref",wL="observable.shallow",SL="observable.struct",Pw={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Pw);function Au(r){return r||Pw}var Uh=Ql(vL),AL=Ql(_L,{enhancer:Jl}),kL=Ql(wL,{enhancer:jC}),IL=Ql(SL,{enhancer:qC}),Tw=Vr(Uh);function ku(r){return r.deep===!0?Ks:r.deep===!1?Jl:OL(r.defaultDecorator)}function EL(r){var e;return r?(e=r.defaultDecorator)!=null?e:Ow(r):void 0}function OL(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Ks}function Rw(r,e,t){if(mc(e))return Uh.decorate_20223_(r,e);if(Cs(e)){oa(r,e,Uh);return}return rf(r)?r:Ti(r)?Rt.object(r,e,t):Array.isArray(r)?Rt.array(r,e):sa(r)?Rt.map(r,e):yc(r)?Rt.set(r,e):typeof r=="object"&&r!==null?r:Rt.box(r,e)}gw(Rw,Tw);var PL={box:function(e,t){var n=Au(t);return new Ji(e,ku(n),n.name,!0,n.equals)},array:function(e,t){var n=Au(t);return(fe.useProxies===!1||n.proxy===!1?UK:TK)(e,ku(n),n.name)},map:function(e,t){var n=Au(t);return new sf(e,ku(n),n.name)},set:function(e,t){var n=Au(t);return new Yp(e,ku(n),n.name)},object:function(e,t,n){return ls(function(){return tf(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?Ys({},n):IK({},n),e,t)})},ref:Vr(AL),shallow:Vr(kL),deep:Tw,struct:Vr(IL)},Rt=gw(Rw,PL),Bw="computed",TL="computed.struct",Fh=$p(Bw),RL=$p(TL,{equals:Ls.structural}),Mr=function(e,t){if(mc(t))return Fh.decorate_20223_(e,t);if(Cs(t))return oa(e,t,Fh);if(Ti(e))return Vr($p(Bw,e));var n=Ti(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new zo(n)};Object.assign(Mr,Fh);Mr.struct=Vr(RL);var Rb,Bb,rl=0,BL=1,xL=(Rb=(Bb=nl(function(){},"name"))==null?void 0:Bb.configurable)!=null?Rb:!1,xb={value:"action",configurable:!0,writable:!1,enumerable:!1};function ns(r,e,t,n){t===void 0&&(t=!1);function i(){return xw(r,t,e,n||this,arguments)}return i.isMobxAction=!0,xL&&(xb.value=r,oi(i,"name",xb)),i}function xw(r,e,t,n,i){var s=Mw(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{Cw(s)}}function Mw(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;jn();var f=fe.allowStateChanges;u&&(Hs(),f=Xl(!0));var h=ef(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:BL++,parentActionId_:rl};return rl=d.actionId_,d}function Cw(r){rl!==r.actionId_&&Ce(30),rl=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),Zl(r.prevAllowStateChanges_),Bo(r.prevAllowStateReads_),qn(),r.runAsAction_&&Pi(r.prevDerivation_),fe.suppressReactionErrors=!1}function Wo(r,e){var t=Xl(r);try{return e()}finally{Zl(t)}}function Xl(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function Zl(r){fe.allowStateChanges=r}var Lw;Lw=Symbol.toPrimitive;var Ji=function(r){Sw(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Ls.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Br(this)){var s=xr(this,{object:this,type:ai,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),$r(this)&&jr(this,{type:ai,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Sc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:ai,newValue:this.value_,oldValue:void 0}),Ac(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return ww(this.get())},t[Lw]=function(){return this.valueOf()},e}(bc),jp=as("ObservableValue",Ji),Kw;Kw=Symbol.toPrimitive;var zo=function(){function r(t){this.dependenciesState_=tt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new sl(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=il.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ce(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ns("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Ls.structural:Ls.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){WL(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ce(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Wh(this)&&(this.warnAboutUntrackedRead_(),jn(),this.value_=this.computeValue_(!1),qn());else if(Vw(this),Wh(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&FL(this),fe.trackingContext=n}var i=this.value_;if(zu(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ce(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ce(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===tt.NOT_TRACKING_,s=this.computeValue_(!0),a=i||zu(n)||zu(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=Xl(!1),s;if(n)s=Nw(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new sl(a)}return Zl(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(zh(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return Ds(function(){var f=s.get();if(!a||i){var h=Hs();n({observableKind:"computed",debugObjectName:s.name_,type:ai,object:s,newValue:f,oldValue:u}),Pi(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return ww(this.get())},e[Kw]=function(){return this.valueOf()},r}(),Ns=as("ComputedValue",zo),tt;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(tt||(tt={}));var il;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(il||(il={}));var sl=function(e){this.cause=void 0,this.cause=e};function zu(r){return r instanceof sl}function Wh(r){switch(r.dependenciesState_){case tt.UP_TO_DATE_:return!1;case tt.NOT_TRACKING_:case tt.STALE_:return!0;case tt.POSSIBLY_STALE_:{for(var e=ef(!0),t=Hs(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if(Ns(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Pi(t),Bo(e),!0}if(r.dependenciesState_===tt.STALE_)return Pi(t),Bo(e),!0}}return Dw(r),Pi(t),Bo(e),!1}}}function _c(){return fe.trackingDerivation!==null}function Nw(r,e,t){var n=ef(!0);Dw(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new sl(a)}return fe.inBatch--,fe.trackingDerivation=i,ML(r),Bo(n),s}function ML(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=tt.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&Ww(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,UL(h,r))}n!==tt.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function zh(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)Ww(e[t],r);r.dependenciesState_=tt.NOT_TRACKING_}function qp(r){var e=Hs();try{return r()}finally{Pi(e)}}function Hs(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function Pi(r){fe.trackingDerivation=r}function ef(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function Bo(r){fe.allowStateReads=r}function Dw(r){if(r.dependenciesState_!==tt.UP_TO_DATE_){r.dependenciesState_=tt.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=tt.UP_TO_DATE_}}var CL=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],za=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},Vu=!0,Uw=!1,fe=function(){var r=Fp();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(Vu=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new za().version&&(Vu=!1),Vu?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new za):(setTimeout(function(){Uw||Ce(35)},1),new za)}();function LL(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Ce(36),Uw=!0,Vu){var r=Fp();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new za}}function Fw(){return fe}function KL(){var r=new za;for(var e in r)CL.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function NL(r){return r.observers_&&r.observers_.size>0}function DL(r){return r.observers_}function UL(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function Ww(r,e){r.observers_.delete(e),r.observers_.size===0&&zw(r)}function zw(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function jn(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function qn(){if(--fe.inBatch===0){jw();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof zo&&t.suspend_())}fe.pendingUnobservations=[]}}function Vw(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&zw(r),!1)}function $w(r){r.lowestObserverState_!==tt.STALE_&&(r.lowestObserverState_=tt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===tt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=tt.STALE_}))}function FL(r){r.lowestObserverState_!==tt.STALE_&&(r.lowestObserverState_=tt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===tt.POSSIBLY_STALE_?e.dependenciesState_=tt.STALE_:e.dependenciesState_===tt.UP_TO_DATE_&&(r.lowestObserverState_=tt.UP_TO_DATE_)}))}function WL(r){r.lowestObserverState_===tt.UP_TO_DATE_&&(r.lowestObserverState_=tt.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===tt.UP_TO_DATE_&&(e.dependenciesState_=tt.POSSIBLY_STALE_,e.onBecomeStale_())}))}var ec=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=tt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=il.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),jw())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){jn(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,Wh(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,qn()}},e.track=function(n){if(!this.isDisposed_){jn(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=Nw(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&zh(this),zu(s)&&this.reportExceptionInDerivation_(s.cause),qn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(jn(),zh(this),qn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Ae]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function zL(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var VL=100,Vh=function(e){return e()};function jw(){fe.inBatch>0||fe.isRunningReactions||Vh($L)}function $L(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===VL&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var ol=as("Reaction",ec);function jL(r){var e=Vh;Vh=function(n){return r(function(){return e(n)})}}function Va(){return!1}function qw(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Gw="action",qL="action.bound",Hw="autoAction",GL="autoAction.bound",Yw="<unnamed action>",$h=vc(Gw),HL=vc(qL,{bound:!0}),jh=vc(Hw,{autoAction:!0}),YL=vc(GL,{autoAction:!0,bound:!0});function Jw(r){var e=function(n,i){if(pr(n))return ns(n.name||Yw,n,r);if(pr(i))return ns(n,i,r);if(mc(i))return(r?jh:$h).decorate_20223_(n,i);if(Cs(i))return oa(n,i,r?jh:$h);if(Cs(n))return Vr(vc(r?Hw:Gw,{name:n,autoAction:r}))};return e}var Ut=Jw(!1);Object.assign(Ut,$h);var Vo=Jw(!0);Object.assign(Vo,jh);Ut.bound=Vr(HL);Vo.bound=Vr(YL);function tc(r){return xw(r.name||Yw,!1,r,this,void 0)}function cs(r){return pr(r)&&r.isMobxAction===!0}function Ds(r,e){var t,n,i,s,a;e===void 0&&(e=Wp);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new ec(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=Qw(e),m=!1;h=new ec(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var JL=function(e){return e()};function Qw(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:JL}function Xw(r,e,t){var n,i,s,a;t===void 0&&(t=Wp);var u=(n=t.name)!=null?n:"Reaction",f=Ut(u,t.onError?QL(t.onError,e):e),h=!t.scheduler&&!t.delay,d=Qw(t),m=!0,I=!1,O,M,A=t.compareStructural?Ls.structural:t.equals||Ls.default,R=new ec(u,function(){m||h?C():I||(I=!0,d(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=Wo(!1,function(){return r(R)});Y=m||!A(O,ae),M=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,M,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function QL(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var XL="onBO",ZL="onBUO";function Zw(r,e,t){return e0(XL,r,e,t)}function wc(r,e,t){return e0(ZL,r,e,t)}function e0(r,e,t,n){var i=typeof n=="function"?ci(e,t):ci(e),s=pr(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var eK="never",Iu="always",tK="observed";function nK(r){r.isolateGlobalState===!0&&LL();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===Iu?!0:e===eK?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===Iu?Iu:t===tK;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===Iu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&jL(r.reactionScheduler)}function tf(r,e,t,n){var i=KC(e);return ls(function(){var s=Ys(r,n)[Ae];Fo(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function rK(r,e){return t0(ci(r,e))}function t0(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=sK(r.observing_).map(t0)),e}function iK(r,e){return n0(ci(r,e))}function n0(r){var e={name:r.name_};return NL(r)&&(e.observers=Array.from(DL(r)).map(n0)),e}function sK(r){return Array.from(new Set(r))}var oK=0;function nf(){this.message="FLOW_CANCELLED"}nf.prototype=Object.create(Error.prototype);function aK(r){return r instanceof nf}var sh=Iw("flow"),cK=Iw("flow.bound",{bound:!0}),Us=Object.assign(function(e,t){if(mc(t))return sh.decorate_20223_(e,t);if(Cs(t))return oa(e,t,sh);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++oK,d=Ut(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(M,A){var R=0;m=A;function C(oe){I=void 0;var de;try{de=Ut(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return A(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=Ut(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return A(E)}ae(de)}function ae(oe){if(pr(oe==null?void 0:oe.then)){oe.then(ae,A);return}return oe.done?M(oe.value):(I=Promise.resolve(oe.value),I.then(C,Y))}C(void 0)});return O.cancel=Ut(i+" - runid: "+h+" - cancel",function(){try{I&&Mb(I);var M=d.return(void 0),A=Promise.resolve(M.value);A.then(Ao,Ao),Mb(A),m(new nf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},sh);Us.bound=Vr(cK);function Mb(r){pr(r.cancel)&&r.cancel()}function uK(r){return r}function $o(r){return(r==null?void 0:r.isMobXFlow)===!0}function lK(r,e,t){var n;return an(r)||fn(r)||jp(r)?n=ui(r):sn(r)&&(n=ui(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function fK(r,e,t){return pr(t)?hK(r,e,t):dK(r,e)}function dK(r,e){return ui(r).intercept_(e)}function hK(r,e,t){return ui(r,e).intercept_(t)}function r0(r,e){if(e===void 0)return Ns(r);if(sn(r)===!1||!r[Ae].values_.has(e))return!1;var t=ci(r,e);return Ns(t)}function i0(r){return r0(r)}function $u(r,e){return r0(r,e)}function s0(r,e){return r?e!==void 0?sn(r)?r[Ae].values_.has(e):!1:sn(r)||!!r[Ae]||Vp(r)||ol(r)||Ns(r):!1}function rf(r){return s0(r)}function pK(r,e){return s0(r,e)}function jo(r){if(sn(r))return r[Ae].keys_();if(an(r)||Ln(r))return Array.from(r.keys());if(fn(r))return r.map(function(e,t){return t});Ce(5)}function o0(r){if(sn(r))return jo(r).map(function(e){return r[e]});if(an(r))return jo(r).map(function(e){return r.get(e)});if(Ln(r))return Array.from(r.values());if(fn(r))return r.slice();Ce(6)}function a0(r){if(sn(r))return jo(r).map(function(e){return[e,r[e]]});if(an(r))return jo(r).map(function(e){return[e,r.get(e)]});if(Ln(r))return Array.from(r.entries());if(fn(r))return r.map(function(e,t){return[t,e]});Ce(7)}function c0(r,e,t){if(arguments.length===2&&!Ln(r)){jn();var n=e;try{for(var i in n)c0(r,i,n[i])}finally{qn()}return}sn(r)?r[Ae].set_(e,t):an(r)?r.set(e,t):Ln(r)?r.add(e):fn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ce("Invalid index: '"+e+"'"),jn(),e>=r.length&&(r.length=e+1),r[e]=t,qn()):Ce(8)}function gK(r,e){sn(r)?r[Ae].delete_(e):an(r)||Ln(r)?r.delete(e):fn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ce(9)}function u0(r,e){if(sn(r))return r[Ae].has_(e);if(an(r))return r.has(e);if(Ln(r))return r.has(e);if(fn(r))return e>=0&&e<r.length;Ce(10)}function yK(r,e){if(!!u0(r,e)){if(sn(r))return r[Ae].get_(e);if(an(r))return r.get(e);if(fn(r))return r[e];Ce(11)}}function mK(r,e,t){if(sn(r))return r[Ae].defineProperty_(e,t);Ce(39)}function l0(r){if(sn(r))return r[Ae].ownKeys_();Ce(38)}function qo(r,e,t,n){return pr(t)?vK(r,e,t,n):bK(r,e,t)}function bK(r,e,t){return ui(r).observe_(e,t)}function vK(r,e,t,n){return ui(r,e).observe_(t,n)}function Eu(r,e,t){return r.set(e,t),t}function mo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!rf(r))return r;if(jp(r)||Ns(r))return mo(r.get(),e);if(e.has(r))return e.get(r);if(fn(r)){var t=Eu(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=mo(a,e)}),t}if(Ln(r)){var n=Eu(e,r,new Set);return r.forEach(function(a){n.add(mo(a,e))}),n}if(an(r)){var i=Eu(e,r,new Map);return r.forEach(function(a,u){i.set(u,mo(a,e))}),i}else{var s=Eu(e,r,{});return l0(r).forEach(function(a){pc.propertyIsEnumerable.call(r,a)&&(s[a]=mo(r[a],e))}),s}}function _K(r,e){return mo(r,new Map)}function wK(){}function Rr(r,e){e===void 0&&(e=void 0),jn();try{return r.apply(e)}finally{qn()}}function SK(r,e,t){return arguments.length===1||e&&typeof e=="object"?AK(r,e):f0(r,e,t||{})}function f0(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Ae].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=ns("When-effect",e),a=Ds(function(u){var f=Wo(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function AK(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=f0(r,a,ts({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function ho(r){return r[Ae]}var kK={has:function(e,t){return ho(e).has_(t)},get:function(e,t){return ho(e).get_(t)},set:function(e,t,n){var i;return Cs(t)?(i=ho(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return Cs(t)?(n=ho(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=ho(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return ho(e).ownKeys_()},preventExtensions:function(e){Ce(13)}};function IK(r,e){var t,n;return yw(),r=Ys(r,e),(n=(t=r[Ae]).proxy_)!=null?n:t.proxy_=new Proxy(r,kK)}function Br(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Sc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),mw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function xr(r,e){var t=Hs();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ce(14),!!e);i++);return e}finally{Pi(t)}}function $r(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Ac(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),mw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function jr(r,e){var t=Hs(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);Pi(t)}}function Gp(r,e,t){return ls(function(){var n,i=Ys(r,t)[Ae];(n=e)!=null||(e=FC(r)),Fo(e).forEach(function(s){return i.make_(s,e[s])})}),r}var oh=Symbol("mobx-keys");function EK(r,e,t){return Ti(r)?tf(r,r,e,t):(ls(function(){var n=Ys(r,t)[Ae];if(!r[oh]){var i=Object.getPrototypeOf(r),s=new Set([].concat(Fo(r),Fo(i)));s.delete("constructor"),s.delete(Ae),gc(i,oh,s)}r[oh].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var Cb="splice",ai="update",OK=1e4,PK={get:function(e,t){var n=e[Ae];return t===Ae?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Oi(al,t)?al[t]:e[t]},set:function(e,t,n){var i=e[Ae];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ce(15)}},Hp=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new bc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return Sc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ac(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ce("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ce(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&_0(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=Nh),Br(this)){var f=xr(this,{object:this.proxy_,type:Cb,index:n,removedCount:i,added:s});if(!f)return Nh;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<OK){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&Va(),u=$r(this),f=u||a?{observableKind:"array",object:this.proxy_,type:ai,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&jr(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&Va(),u=$r(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Cb,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&jr(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ce(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Br(this)){var u=xr(this,{type:ai,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function TK(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),yw(),ls(function(){var i=new Hp(t,e,n,!1);vw(i.values_,Ae,i);var s=new Proxy(i.values_,PK);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var al={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ae];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Ae];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Ae].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ae].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ae],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Ce(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Ce(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ae],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};on("concat",Bi);on("flat",Bi);on("includes",Bi);on("indexOf",Bi);on("join",Bi);on("lastIndexOf",Bi);on("slice",Bi);on("toString",Bi);on("toLocaleString",Bi);on("every",us);on("filter",us);on("find",us);on("findIndex",us);on("flatMap",us);on("forEach",us);on("map",us);on("some",us);on("reduce",d0);on("reduceRight",d0);function on(r,e){typeof Array.prototype[r]=="function"&&(al[r]=e(r))}function Bi(r){return function(){var e=this[Ae];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function us(r){return function(e,t){var n=this,i=this[Ae];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function d0(r){return function(){var e=this,t=this[Ae];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var RK=as("ObservableArrayAdministration",Hp);function fn(r){return Hl(r)&&RK(r[Ae])}var h0,p0,BK={},Gi="add",cl="delete";h0=Symbol.iterator;p0=Symbol.toStringTag;var sf=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ks),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ae]=BK,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,pr(Map)||Ce(18),ls(function(){s.keysAtom_=Yl("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new Ji(this.has_(n),Jl,"ObservableMap.key?",!1);this.hasMap_.set(n,a),wc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Br(this)){var a=xr(this,{type:s?ai:Gi,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Br(this)){var s=xr(this,{type:cl,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=Va(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:cl,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Rr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&jr(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=Va(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:ai,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&jr(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Rr(function(){var h,d=new Ji(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=Va(),u=$r(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:Gi,object:this,name:n,newValue:i}:null;u&&jr(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return nc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return nc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[h0]=function(){return this.entries()},e.forEach=function(n,i){for(var s=ko(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return an(n)&&(n=new Map(n)),Rr(function(){Ti(n)?LC(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):sa(n)?(n.constructor!==Map&&Ce(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ce(20,n)}),this},e.clear=function(){var n=this;Rr(function(){qp(function(){for(var i=ko(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Rr(function(){for(var s=xK(n),a=new Map,u=!1,f=ko(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=ko(s.entries()),M;!(M=O()).done;){var A=M.value,R=A[0],C=A[1],Y=i.data_.has(R);if(i.set(R,C),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Ac(this,n)},e.intercept_=function(n){return Sc(this,n)},zp(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:p0,get:function(){return"Map"}}]),r}(),an=as("ObservableMap",sf);function xK(r){if(sa(r)||an(r))return r;if(Array.isArray(r))return new Map(r);if(Ti(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ce(21,r)}var g0,y0,MK={};g0=Symbol.iterator;y0=Symbol.toStringTag;var Yp=function(){function r(t,n,i){var s=this;n===void 0&&(n=Ks),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ae]=MK,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,pr(Set)||Ce(22),this.enhancer_=function(a,u){return n(a,u,i)},ls(function(){s.atom_=Yl(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Rr(function(){qp(function(){for(var i=ko(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=ko(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Br(this)){var s=xr(this,{type:Gi,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Rr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=$r(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:Gi,object:this,newValue:n}:null;u&&jr(this,f)}return this},e.delete=function(n){var i=this;if(Br(this)){var s=xr(this,{type:cl,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=$r(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:cl,object:this,oldValue:n}:null;return Rr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&jr(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return nc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return nc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Ln(n)&&(n=new Set(n)),Rr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):yc(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ce("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Ac(this,n)},e.intercept_=function(n){return Sc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[g0]=function(){return this.values()},zp(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:y0,get:function(){return"Set"}}]),r}(),Ln=as("ObservableSet",Yp),Lb=Object.create(null),Kb="remove",m0=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=gL),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new bc("ObservableObject.keys"),this.isPlainObject_=Ti(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof zo)return s.set(i),!0;if(Br(this)){var a=xr(this,{type:ai,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=$r(this),f=!1,h=u||f?{type:ai,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&jr(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Oi(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Oi(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Ji(n in this.target_,Jl,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[si])!=null&&s[n])return;Ce(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==pc;){var u=nl(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}Db(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&Db(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{jn();var a=this.delete_(n);if(!a)return a;if(Br(this)){var u=xr(this,{object:this.proxy_||this.target_,name:n,type:Gi,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=ts({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else oi(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{qn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{jn();var u=this.delete_(n);if(!u)return u;if(Br(this)){var f=xr(this,{object:this.proxy_||this.target_,name:n,type:Gi,newValue:i});if(!f)return null;i=f.newValue}var h=Nb(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else oi(this.target_,n,d);var m=new Ji(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{qn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{jn();var a=this.delete_(n);if(!a)return a;if(Br(this)){var u=xr(this,{object:this.proxy_||this.target_,name:n,type:Gi,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=Nb(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else oi(this.target_,n,h);this.values_.set(n,new zo(i)),this.notifyPropertyAddition_(n,void 0)}finally{qn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Oi(this.target_,n))return!0;if(Br(this)){var s=xr(this,{object:this.proxy_||this.target_,name:n,type:Kb});if(!s)return null}try{var a,u;jn();var f=$r(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=nl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof Ji&&(m=d.value_),$w(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:Kb,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&jr(this,O)}}finally{qn()}return!0},e.observe_=function(n,i){return Ac(this,n)},e.intercept_=function(n){return Sc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=$r(this),f=!1;if(u||f){var h=u||f?{type:Gi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&jr(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Fo(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function Ys(r,e){var t;if(Oi(r,Ae))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new m0(r,new Map,String(n),EL(e));return gc(r,Ae,i),r}var CK=as("ObservableObjectAdministration",m0);function Nb(r){return Lb[r]||(Lb[r]={get:function(){return this[Ae].getObservablePropValue_(r)},set:function(t){return this[Ae].setObservablePropValue_(r,t)}})}function sn(r){return Hl(r)?CK(r[Ae]):!1}function Db(r,e,t){var n;(n=r.target_[si])==null||delete n[t]}var LK=v0(0),KK=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),ah=0,b0=function(){};function NK(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}NK(b0,Array.prototype);var Jp=function(r,e,t){Sw(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,ls(function(){var d=new Hp(u,a,f,!0);d.proxy_=ih(h),vw(ih(h),Ae,d),s&&s.length&&h.spliceWithArray(0,0,s),KK&&Object.defineProperty(ih(h),"0",LK)}),h}var i=n.prototype;return i.concat=function(){this[Ae].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return fn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return nc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},zp(n,[{key:"length",get:function(){return this[Ae].getArrayLength_()},set:function(a){this[Ae].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(b0,Symbol.toStringTag,Symbol.iterator);Object.entries(al).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&gc(Jp.prototype,e,t)});function v0(r){return{enumerable:!1,configurable:!0,get:function(){return this[Ae].get_(r)},set:function(t){this[Ae].set_(r,t)}}}function DK(r){oi(Jp.prototype,""+r,v0(r))}function _0(r){if(r>ah){for(var e=ah;e<r+100;e++)DK(e);ah=r}}_0(1e3);function UK(r,e,t){return new Jp(r,e,t)}function ci(r,e){if(typeof r=="object"&&r!==null){if(fn(r))return e!==void 0&&Ce(23),r[Ae].atom_;if(Ln(r))return r.atom_;if(an(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ce(25,e,ul(r)),t}if(sn(r)){if(!e)return Ce(26);var n=r[Ae].values_.get(e);return n||Ce(27,e,ul(r)),n}if(Vp(r)||Ns(r)||ol(r))return r}else if(pr(r)&&ol(r[Ae]))return r[Ae];Ce(28)}function ui(r,e){if(r||Ce(29),e!==void 0)return ui(ci(r,e));if(Vp(r)||Ns(r)||ol(r)||an(r)||Ln(r))return r;if(r[Ae])return r[Ae];Ce(24,r)}function ul(r,e){var t;if(e!==void 0)t=ci(r,e);else{if(cs(r))return r.name;sn(r)||an(r)||Ln(r)?t=ui(r):t=ci(r)}return t.name_}function ls(r){var e=Hs(),t=Xl(!0);jn();try{return r()}finally{qn(),Zl(t),Pi(e)}}var Ub=pc.toString;function Qp(r,e,t){return t===void 0&&(t=-1),qh(r,e,t)}function qh(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=Ub.call(r);if(a!==Ub.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Fb(r),e=Fb(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(pr(f)&&f instanceof f&&pr(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!qh(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Oi(e,I)&&qh(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Fb(r){return fn(r)?r.slice():sa(r)||an(r)||yc(r)||Ln(r)?Array.from(r.entries()):r}function nc(r){return r[Symbol.iterator]=FK,r}function FK(){return this}["Symbol","Map","Set"].forEach(function(r){var e=Fp();typeof e[r]>"u"&&Ce("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:qw,extras:{getDebugName:ul},$mobx:Ae});var WK=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ae,FlowCancellationError:nf,ObservableMap:sf,ObservableSet:Yp,Reaction:ec,_allowStateChanges:Wo,_allowStateChangesInsideComputed:tc,_allowStateReadsEnd:Bo,_allowStateReadsStart:ef,_autoAction:Vo,_endAction:Cw,_getAdministration:ui,_getGlobalState:Fw,_interceptReads:lK,_isComputingDerivation:_c,_resetGlobalState:KL,_startAction:Mw,action:Ut,autorun:Ds,comparer:Ls,computed:Mr,configure:nK,createAtom:Yl,defineProperty:mK,entries:a0,extendObservable:tf,flow:Us,flowResult:uK,get:yK,getAtom:ci,getDebugName:ul,getDependencyTree:rK,getObserverTree:iK,has:u0,intercept:fK,isAction:cs,isBoxedObservable:jp,isComputed:i0,isComputedProp:$u,isFlow:$o,isFlowCancellationError:aK,isObservable:rf,isObservableArray:fn,isObservableMap:an,isObservableObject:sn,isObservableProp:pK,isObservableSet:Ln,keys:jo,makeAutoObservable:EK,makeObservable:Gp,observable:Rt,observe:qo,onBecomeObserved:Zw,onBecomeUnobserved:wc,onReactionError:zL,override:GC,ownKeys:l0,reaction:Xw,remove:gK,runInAction:tc,set:c0,spy:qw,toJS:_K,trace:wK,transaction:Rr,untracked:qp,values:o0,when:SK},Symbol.toStringTag,{value:"Module"})),w0=sc(WK);(function(r){var e=W&&W.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=pt,n=e(pw.exports),i=w0;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(Gl);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Gl,r)})(ql);var zK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(jl,"__esModule",{value:!0});jl.createExchangeInstruction=void 0;const Ou=pt,Pu=Ri,VK=Qn,Wb=ss,$K=ss,ch=Lr,uh=ql;function jK({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:M,extraAccounts:A=[]}){return zK(this,void 0,void 0,function*(){const R=(0,VK.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Y=u===uh.OrderSide.Sell?new Pu.PublicKey(f):new Pu.PublicKey(h),ae=u===uh.OrderSide.Sell?new Pu.PublicKey(h):new Pu.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,ch.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ou.web3.Keypair?(oe=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,ch.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ou.web3.Keypair?(de=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[V]=yield(0,Wb.getOrderVault)(d,Y,s),[J]=yield(0,$K.getOpenOrdersCounter)(d,Y,s);N=yield(0,ch.getTokenAccount)(r,n,Y),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Ou.web3.Keypair?(E=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===uh.OrderSide.Buy?n:d,[j]=yield(0,Wb.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Ou.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:V,orderAccount:e,openOrdersCounter:J,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:M,feeReduction:j}).remainingAccounts(A).instruction();return C.instructions.push(te),C})}jl.createExchangeInstruction=jK;var of={},qK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(of,"__esModule",{value:!0});of.createInitializeMarketInstruction=void 0;const GK=Qn;function HK({connection:r,updateAuthorityAccount:e,programId:t}){return qK(this,void 0,void 0,function*(){const i=[yield(0,GK.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}of.createInitializeMarketInstruction=HK;var af={},YK=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(af,"__esModule",{value:!0});af.createRegisterCurrencyInstruction=void 0;const JK=pt,QK=Qn;function XK({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return YK(this,void 0,void 0,function*(){const u=[yield(0,QK.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new JK.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}af.createRegisterCurrencyInstruction=XK;var Qi={},Xp=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.updateRoyaltyTier=Qi.deleteRoyaltyTier=Qi.addRoyaltyTier=void 0;const rc=pt,Zp=Qn;function ZK({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Xp(this,void 0,void 0,function*(){const a=(0,Zp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new rc.BN(n),new rc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Qi.addRoyaltyTier=ZK;function eN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return Xp(this,void 0,void 0,function*(){const s=(0,Zp.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new rc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}Qi.deleteRoyaltyTier=eN;function tN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return Xp(this,void 0,void 0,function*(){const a=(0,Zp.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new rc.BN(n),new rc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}Qi.updateRoyaltyTier=tN;var Go={},S0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Go,"__esModule",{value:!0});Go.createUpdateRegisteredCurrencyVaultInstruction=Go.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const nN=pt,A0=Qn;function rN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return S0(this,void 0,void 0,function*(){return[yield(0,A0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new nN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}Go.createUpdateRegisteredCurrencyRoyaltyInstruction=rN;function iN({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return S0(this,void 0,void 0,function*(){return[yield(0,A0.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}Go.createUpdateRegisteredCurrencyVaultInstruction=iN;var Ho={},k0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.createRemoveFeeExemptionInstruction=Ho.createAddFeeExemptionInstruction=void 0;const sN=pt,I0=Qn,ll=ss;function oN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return k0(this,void 0,void 0,function*(){const s=(0,I0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,ll.getFeeExemptAccount)(n,i),[h]=yield(0,ll.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new sN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}Ho.createAddFeeExemptionInstruction=oN;function aN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return k0(this,void 0,void 0,function*(){const s=(0,I0.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,ll.getFeeExemptAccount)(n,i),[f]=yield(0,ll.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}Ho.createRemoveFeeExemptionInstruction=aN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(sw,r),t(Wl,r),t(Uo,r),t($l,r),t(jl,r),t(of,r),t(af,r),t(Qi,r),t(Go,r),t(Ho,r)})(Np);var aa={},E0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(E0);var O0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(O0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(dc,r),t(E0,r),t(O0,r)})(aa);var P0={},cf={},T0=function(){},cN=function(r){return r};function R0(r){throw new Error("[mobx-utils] "+r)}function rs(r,e){e===void 0&&(e="Illegal state"),r||R0(e)}function B0(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var x0=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(x0(Object.getPrototypeOf(r))||[])},uN=function(r){var e=x0(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},Gh=function(r){return uN(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},fl="pending",ic="fulfilled",uf="rejected";function lN(r){switch(this.state){case fl:return r.pending&&r.pending(this.value);case uf:return r.rejected&&r.rejected(this.value);case ic:return r.fulfilled?r.fulfilled(this.value):this.value}}function Hh(r,e){if(rs(arguments.length<=2,"fromPromise expects up to two arguments"),rs(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(Ut("observableFromPromise-resolve",function(i){t.value=i,t.state=ic}),Ut("observableFromPromise-reject",function(i){t.value=i,t.state=uf})),t.isPromiseBasedObservable=!0,t.case=lN;var n=e&&(e.state===ic||e.state===fl)?e.value:void 0;return tf(t,{value:n,state:fl},{},{deep:!1}),t}(function(r){r.reject=Ut("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=uf,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=ic,n.value=t,n}r.resolve=Ut("fromPromise.resolve",e)})(Hh||(Hh={}));function fN(r){return r&&r.isPromiseBasedObservable===!0}var zb=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function dN(r,e,t){if(Vb(r,e),Vb(r,t),e!==t){var n=r.slice(),i;return e<t?i=zb(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=zb(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function Vb(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function hN(r,e){e===void 0&&(e=void 0);var t=!1,n=Rt.box(e,{deep:!1}),i=Rt.box(!1),s=function(){return t||(t=!0,Wo(!0,function(){i.set(!0)}),r(function(u){Wo(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=Ut("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function eg(r,e,t){e===void 0&&(e=T0),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=Yl("ResourceBasedObservable",function(){rs(!n&&!i),n=!0,r(function(f){Wo(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){rs(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var Tu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function pN(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function gN(r,e){var t;e===void 0&&(e=!1);var n=Mr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:qo(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:qo(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[pN()]=function(){return this},t}var yN=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Gp(this),tc(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),Tu([Rt.ref],r.prototype,"current",void 0),Tu([Ut.bound],r.prototype,"next",null),Tu([Ut.bound],r.prototype,"complete",null),Tu([Ut.bound],r.prototype,"error",null),r}();function mN(r,e){return e===void 0&&(e=void 0),new yN(r,e)}var dl=function(){return dl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},dl.apply(this,arguments)},Ta=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bN=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],M0=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:Rt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:Rt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),Gp(this),rs(sn(e),"createViewModel expects an observable object");var n=Gh(this);Gh(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Ae||i==="__mobxDidRunLazyInitializers")){if(rs(bN.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),$u(e,i)){var a=ui(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Mr(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,dl(dl({},d),{configurable:!0,get:function(){return $u(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:Ut(function(m){$u(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;jo(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];fn(i)?i.replace(n):an(i)?(i.clear(),i.merge(n)):i0(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Ta([Mr],r.prototype,"isDirty",null),Ta([Mr],r.prototype,"changedValues",null),Ta([Ut.bound],r.prototype,"submit",null),Ta([Ut.bound],r.prototype,"reset",null),Ta([Ut.bound],r.prototype,"resetProperty",null),r}();function vN(r){return new M0(r)}function _N(r,e){var t=ci(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return qo(t,function(){})}function wN(r,e,t){if(t===void 0&&(t=0),!fn(r))throw new Error("Expected observable array as first argument");cs(e)||(e=Ut("queueProcessor",e));var n=function(){var i=r.slice(0);tc(function(){return r.splice(0)}),i.forEach(e)};return t>0?Ds(n,{delay:t}):Ds(n)}function SN(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!fn(r))throw new Error("Expected observable array as first argument");cs(e)||(e=Ut("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);tc(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?Ds(i,{delay:t}):Ds(i)}var Os={};function AN(){for(var r=0,e=Object.getOwnPropertyNames(Os);r<e.length;r++){var t=e[r];Os[t].dispose(),delete Os[t]}}function kN(r){return r===void 0&&(r=1e3),_c()?(Os[r]||(typeof r=="number"?Os[r]=IN(r):Os[r]=EN()),Os[r].current()):Date.now()}function IN(r){var e;return eg(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function EN(){var r=eg(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function ON(r){return _c()||console.warn("'expr' should only be used inside other reactive functions."),Mr(r).get()}var hl=function(){return hl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},hl.apply(this,arguments)},PN=0;function TN(r,e){rs(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=Mr(function(){return d=r(h)},hl(hl({},m),{name:I}));if(!i)var M=wc(O,function(){delete t[f],M(),n&&n(d,h)});return O}var u=!1;return function(f){var h=RN(f),d=t[h];if(d)return d.get();if(!i&&!_c()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function RN(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++PN,B0(r,"$transformId",t)),t}function lh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function fh(r){return sn(r)||fn(r)||an(r)}function BN(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,lh(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(fh(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(fh(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+lh(f)+"/"+h+"',")+(" but it already exists at '"+lh(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:qo(u,n)};t.set(u,m),a0(u).forEach(function(I){var O=I[0],M=I[1];return s(M,m,O)})}}}function a(u){if(fh(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),o0(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var xN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),MN=function(r){xN(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=qo(d._base,function(I){if(I.type==="splice")Rr(function(){for(var O=0,M=I.removed;O<M.length;O++){var A=M[O];d._removeItem(A)}for(var R=0,C=I.added;R<C.length;R++){var Y=C[R];d._addItem(Y)}});else if(I.type==="update")Rr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=Rt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:Xw(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(sf),CN=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),LN=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new CN(this.store,e)}}),r}(),pl=function(){return pl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},pl.apply(this,arguments)},KN=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function NN(r,e){if(e===void 0&&(e=!1),cs(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new LN;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!_c())return!t&&Fw().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=Mr(function(){return d=r.apply(a,u)},pl(pl({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||wc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,KN([d],u)),d=void 0}),m.get()}}var DN=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:ic,IDENTITY:cN,NOOP:T0,ObservableGroupMap:MN,PENDING:fl,REJECTED:uf,ViewModel:M0,addHiddenProp:B0,chunkProcessor:SN,computedFn:NN,createTransformer:TN,createViewModel:vN,deepObserve:BN,expr:ON,fail:R0,get fromPromise(){return Hh},fromResource:eg,fromStream:mN,getAllMethodsAndProperties:Gh,invariant:rs,isPromiseBasedObservable:fN,keepAlive:_N,lazyObservable:hN,moveItem:dN,now:kN,queueProcessor:wN,resetNowInternalState:AN,toStream:gN},Symbol.toStringTag,{value:"Module"})),UN=sc(DN),gl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,M=1,A=2,R=1,C=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,V=256,J=512,K=30,j="...",te=800,T=16,z=1,X=2,Be=3,ye=1/0,Ie=9007199254740991,$t=17976931348623157e292,jt=0/0,_e=4294967295,ze=_e-1,Qt=_e>>>1,cn=[["ary",N],["bind",R],["bindKey",C],["curry",ae],["curryRight",oe],["flip",J],["partial",de],["partialRight",E],["rearg",V]],kt="[object Arguments]",lt="[object Array]",yr="[object AsyncFunction]",Ft="[object Boolean]",vn="[object Date]",Yr="[object DOMException]",mr="[object Error]",Xn="[object Function]",di="[object GeneratorFunction]",dn="[object Map]",ds="[object Number]",Of="[object Null]",Zn="[object Object]",Oc="[object Promise]",Pf="[object Proxy]",xi="[object RegExp]",_n="[object Set]",wn="[object String]",Mi="[object Symbol]",Tf="[object Undefined]",Kn="[object WeakMap]",Rf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",Ke="[object Uint8Array]",bt="[object Uint8ClampedArray]",ft="[object Uint16Array]",vt="[object Uint32Array]",ct=/\b__p \+= '';/g,j0=/\b(__p \+=) '' \+/g,q0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rg=/&(?:amp|lt|gt|quot|#39);/g,ig=/[&<>"']/g,G0=RegExp(rg.source),H0=RegExp(ig.source),Y0=/<%-([\s\S]+?)%>/g,J0=/<%([\s\S]+?)%>/g,sg=/<%=([\s\S]+?)%>/g,Q0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X0=/^\w*$/,Z0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bf=/[\\^$.*+?()[\]{}|]/g,eS=RegExp(Bf.source),xf=/^\s+/,tS=/\s/,nS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rS=/\{\n\/\* \[wrapped with (.+)\] \*/,iS=/,? & /,sS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oS=/[()=,{}\[\]\/\s]/,aS=/\\(\\)?/g,cS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,og=/\w*$/,uS=/^[-+]0x[0-9a-f]+$/i,lS=/^0b[01]+$/i,fS=/^\[object .+?Constructor\]$/,dS=/^0o[0-7]+$/i,hS=/^(?:0|[1-9]\d*)$/,pS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pc=/($^)/,gS=/['\n\r\u2028\u2029\\]/g,Tc="\\ud800-\\udfff",yS="\\u0300-\\u036f",mS="\\ufe20-\\ufe2f",bS="\\u20d0-\\u20ff",ag=yS+mS+bS,cg="\\u2700-\\u27bf",ug="a-z\\xdf-\\xf6\\xf8-\\xff",vS="\\xac\\xb1\\xd7\\xf7",_S="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wS="\\u2000-\\u206f",SS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lg="A-Z\\xc0-\\xd6\\xd8-\\xde",fg="\\ufe0e\\ufe0f",dg=vS+_S+wS+SS,Mf="['\u2019]",AS="["+Tc+"]",hg="["+dg+"]",Rc="["+ag+"]",pg="\\d+",kS="["+cg+"]",gg="["+ug+"]",yg="[^"+Tc+dg+pg+cg+ug+lg+"]",Cf="\\ud83c[\\udffb-\\udfff]",IS="(?:"+Rc+"|"+Cf+")",mg="[^"+Tc+"]",Lf="(?:\\ud83c[\\udde6-\\uddff]){2}",Kf="[\\ud800-\\udbff][\\udc00-\\udfff]",Js="["+lg+"]",bg="\\u200d",vg="(?:"+gg+"|"+yg+")",ES="(?:"+Js+"|"+yg+")",_g="(?:"+Mf+"(?:d|ll|m|re|s|t|ve))?",wg="(?:"+Mf+"(?:D|LL|M|RE|S|T|VE))?",Sg=IS+"?",Ag="["+fg+"]?",OS="(?:"+bg+"(?:"+[mg,Lf,Kf].join("|")+")"+Ag+Sg+")*",PS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",TS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kg=Ag+Sg+OS,RS="(?:"+[kS,Lf,Kf].join("|")+")"+kg,BS="(?:"+[mg+Rc+"?",Rc,Lf,Kf,AS].join("|")+")",xS=RegExp(Mf,"g"),MS=RegExp(Rc,"g"),Nf=RegExp(Cf+"(?="+Cf+")|"+BS+kg,"g"),CS=RegExp([Js+"?"+gg+"+"+_g+"(?="+[hg,Js,"$"].join("|")+")",ES+"+"+wg+"(?="+[hg,Js+vg,"$"].join("|")+")",Js+"?"+vg+"+"+_g,Js+"+"+wg,TS,PS,pg,RS].join("|"),"g"),LS=RegExp("["+bg+Tc+ag+fg+"]"),KS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,NS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],DS=-1,It={};It[y]=It[k]=It[L]=It[$]=It[Z]=It[Ke]=It[bt]=It[ft]=It[vt]=!0,It[kt]=It[lt]=It[v]=It[Ft]=It[g]=It[vn]=It[mr]=It[Xn]=It[dn]=It[ds]=It[Zn]=It[xi]=It[_n]=It[wn]=It[Kn]=!1;var _t={};_t[kt]=_t[lt]=_t[v]=_t[g]=_t[Ft]=_t[vn]=_t[y]=_t[k]=_t[L]=_t[$]=_t[Z]=_t[dn]=_t[ds]=_t[Zn]=_t[xi]=_t[_n]=_t[wn]=_t[Mi]=_t[Ke]=_t[bt]=_t[ft]=_t[vt]=!0,_t[mr]=_t[Xn]=_t[Kn]=!1;var US={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},FS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},WS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},VS=parseFloat,$S=parseInt,Ig=typeof W=="object"&&W&&W.Object===Object&&W,jS=typeof self=="object"&&self&&self.Object===Object&&self,hn=Ig||jS||Function("return this")(),Df=e&&!e.nodeType&&e,hs=Df&&!0&&r&&!r.nodeType&&r,Eg=hs&&hs.exports===Df,Uf=Eg&&Ig.process,br=function(){try{var D=hs&&hs.require&&hs.require("util").types;return D||Uf&&Uf.binding&&Uf.binding("util")}catch{}}(),Og=br&&br.isArrayBuffer,Pg=br&&br.isDate,Tg=br&&br.isMap,Rg=br&&br.isRegExp,Bg=br&&br.isSet,xg=br&&br.isTypedArray;function er(D,Q,q){switch(q.length){case 0:return D.call(Q);case 1:return D.call(Q,q[0]);case 2:return D.call(Q,q[0],q[1]);case 3:return D.call(Q,q[0],q[1],q[2])}return D.apply(Q,q)}function qS(D,Q,q,me){for(var Me=-1,nt=D==null?0:D.length;++Me<nt;){var Xt=D[Me];Q(me,Xt,q(Xt),D)}return me}function vr(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me&&Q(D[q],q,D)!==!1;);return D}function GS(D,Q){for(var q=D==null?0:D.length;q--&&Q(D[q],q,D)!==!1;);return D}function Mg(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!Q(D[q],q,D))return!1;return!0}function Ci(D,Q){for(var q=-1,me=D==null?0:D.length,Me=0,nt=[];++q<me;){var Xt=D[q];Q(Xt,q,D)&&(nt[Me++]=Xt)}return nt}function Bc(D,Q){var q=D==null?0:D.length;return!!q&&Qs(D,Q,0)>-1}function Ff(D,Q,q){for(var me=-1,Me=D==null?0:D.length;++me<Me;)if(q(Q,D[me]))return!0;return!1}function Ot(D,Q){for(var q=-1,me=D==null?0:D.length,Me=Array(me);++q<me;)Me[q]=Q(D[q],q,D);return Me}function Li(D,Q){for(var q=-1,me=Q.length,Me=D.length;++q<me;)D[Me+q]=Q[q];return D}function Wf(D,Q,q,me){var Me=-1,nt=D==null?0:D.length;for(me&&nt&&(q=D[++Me]);++Me<nt;)q=Q(q,D[Me],Me,D);return q}function HS(D,Q,q,me){var Me=D==null?0:D.length;for(me&&Me&&(q=D[--Me]);Me--;)q=Q(q,D[Me],Me,D);return q}function zf(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(Q(D[q],q,D))return!0;return!1}var YS=Vf("length");function JS(D){return D.split("")}function QS(D){return D.match(sS)||[]}function Cg(D,Q,q){var me;return q(D,function(Me,nt,Xt){if(Q(Me,nt,Xt))return me=nt,!1}),me}function xc(D,Q,q,me){for(var Me=D.length,nt=q+(me?1:-1);me?nt--:++nt<Me;)if(Q(D[nt],nt,D))return nt;return-1}function Qs(D,Q,q){return Q===Q?uA(D,Q,q):xc(D,Lg,q)}function XS(D,Q,q,me){for(var Me=q-1,nt=D.length;++Me<nt;)if(me(D[Me],Q))return Me;return-1}function Lg(D){return D!==D}function Kg(D,Q){var q=D==null?0:D.length;return q?jf(D,Q)/q:jt}function Vf(D){return function(Q){return Q==null?t:Q[D]}}function $f(D){return function(Q){return D==null?t:D[Q]}}function Ng(D,Q,q,me,Me){return Me(D,function(nt,Xt,gt){q=me?(me=!1,nt):Q(q,nt,Xt,gt)}),q}function ZS(D,Q){var q=D.length;for(D.sort(Q);q--;)D[q]=D[q].value;return D}function jf(D,Q){for(var q,me=-1,Me=D.length;++me<Me;){var nt=Q(D[me]);nt!==t&&(q=q===t?nt:q+nt)}return q}function qf(D,Q){for(var q=-1,me=Array(D);++q<D;)me[q]=Q(q);return me}function eA(D,Q){return Ot(Q,function(q){return[q,D[q]]})}function Dg(D){return D&&D.slice(0,zg(D)+1).replace(xf,"")}function tr(D){return function(Q){return D(Q)}}function Gf(D,Q){return Ot(Q,function(q){return D[q]})}function la(D,Q){return D.has(Q)}function Ug(D,Q){for(var q=-1,me=D.length;++q<me&&Qs(Q,D[q],0)>-1;);return q}function Fg(D,Q){for(var q=D.length;q--&&Qs(Q,D[q],0)>-1;);return q}function tA(D,Q){for(var q=D.length,me=0;q--;)D[q]===Q&&++me;return me}var nA=$f(US),rA=$f(FS);function iA(D){return"\\"+zS[D]}function sA(D,Q){return D==null?t:D[Q]}function Xs(D){return LS.test(D)}function oA(D){return KS.test(D)}function aA(D){for(var Q,q=[];!(Q=D.next()).done;)q.push(Q.value);return q}function Hf(D){var Q=-1,q=Array(D.size);return D.forEach(function(me,Me){q[++Q]=[Me,me]}),q}function Wg(D,Q){return function(q){return D(Q(q))}}function Ki(D,Q){for(var q=-1,me=D.length,Me=0,nt=[];++q<me;){var Xt=D[q];(Xt===Q||Xt===d)&&(D[q]=d,nt[Me++]=q)}return nt}function Mc(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=me}),q}function cA(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=[me,me]}),q}function uA(D,Q,q){for(var me=q-1,Me=D.length;++me<Me;)if(D[me]===Q)return me;return-1}function lA(D,Q,q){for(var me=q+1;me--;)if(D[me]===Q)return me;return me}function Zs(D){return Xs(D)?dA(D):YS(D)}function Nr(D){return Xs(D)?hA(D):JS(D)}function zg(D){for(var Q=D.length;Q--&&tS.test(D.charAt(Q)););return Q}var fA=$f(WS);function dA(D){for(var Q=Nf.lastIndex=0;Nf.test(D);)++Q;return Q}function hA(D){return D.match(Nf)||[]}function pA(D){return D.match(CS)||[]}var gA=function D(Q){Q=Q==null?hn:eo.defaults(hn.Object(),Q,eo.pick(hn,NS));var q=Q.Array,me=Q.Date,Me=Q.Error,nt=Q.Function,Xt=Q.Math,gt=Q.Object,Yf=Q.RegExp,yA=Q.String,_r=Q.TypeError,Cc=q.prototype,mA=nt.prototype,to=gt.prototype,Lc=Q["__core-js_shared__"],Kc=mA.toString,ut=to.hasOwnProperty,bA=0,Vg=function(){var o=/[^.]+$/.exec(Lc&&Lc.keys&&Lc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Nc=to.toString,vA=Kc.call(gt),_A=hn._,wA=Yf("^"+Kc.call(ut).replace(Bf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dc=Eg?Q.Buffer:t,Ni=Q.Symbol,Uc=Q.Uint8Array,$g=Dc?Dc.allocUnsafe:t,Fc=Wg(gt.getPrototypeOf,gt),jg=gt.create,qg=to.propertyIsEnumerable,Wc=Cc.splice,Gg=Ni?Ni.isConcatSpreadable:t,fa=Ni?Ni.iterator:t,ps=Ni?Ni.toStringTag:t,zc=function(){try{var o=vs(gt,"defineProperty");return o({},"",{}),o}catch{}}(),SA=Q.clearTimeout!==hn.clearTimeout&&Q.clearTimeout,AA=me&&me.now!==hn.Date.now&&me.now,kA=Q.setTimeout!==hn.setTimeout&&Q.setTimeout,Vc=Xt.ceil,$c=Xt.floor,Jf=gt.getOwnPropertySymbols,IA=Dc?Dc.isBuffer:t,Hg=Q.isFinite,EA=Cc.join,OA=Wg(gt.keys,gt),Zt=Xt.max,Sn=Xt.min,PA=me.now,TA=Q.parseInt,Yg=Xt.random,RA=Cc.reverse,Qf=vs(Q,"DataView"),da=vs(Q,"Map"),Xf=vs(Q,"Promise"),no=vs(Q,"Set"),ha=vs(Q,"WeakMap"),pa=vs(gt,"create"),jc=ha&&new ha,ro={},BA=_s(Qf),xA=_s(da),MA=_s(Xf),CA=_s(no),LA=_s(ha),qc=Ni?Ni.prototype:t,ga=qc?qc.valueOf:t,Jg=qc?qc.toString:t;function _(o){if(Kt(o)&&!Le(o)&&!(o instanceof Ge)){if(o instanceof wr)return o;if(ut.call(o,"__wrapped__"))return Qy(o)}return new wr(o)}var io=function(){function o(){}return function(c){if(!xt(c))return{};if(jg)return jg(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function Gc(){}function wr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:Y0,evaluate:J0,interpolate:sg,variable:"",imports:{_}},_.prototype=Gc.prototype,_.prototype.constructor=_,wr.prototype=io(Gc.prototype),wr.prototype.constructor=wr;function Ge(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function KA(){var o=new Ge(this.__wrapped__);return o.__actions__=Nn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Nn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Nn(this.__views__),o}function NA(){if(this.__filtered__){var o=new Ge(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function DA(){var o=this.__wrapped__.value(),c=this.__dir__,l=Le(o),p=c<0,b=l?o.length:0,w=J1(0,b,this.__views__),P=w.start,B=w.end,U=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,we=Sn(U,this.__takeCount__);if(!l||!p&&b==U&&we==U)return _y(o,this.__actions__);var Te=[];e:for(;U--&&ge<we;){ne+=c;for(var Ue=-1,Re=o[ne];++Ue<ce;){var je=re[Ue],He=je.iteratee,ir=je.type,xn=He(Re);if(ir==X)Re=xn;else if(!xn){if(ir==z)continue e;break e}}Te[ge++]=Re}return Te}Ge.prototype=io(Gc.prototype),Ge.prototype.constructor=Ge;function gs(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function UA(){this.__data__=pa?pa(null):{},this.size=0}function FA(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function WA(o){var c=this.__data__;if(pa){var l=c[o];return l===f?t:l}return ut.call(c,o)?c[o]:t}function zA(o){var c=this.__data__;return pa?c[o]!==t:ut.call(c,o)}function VA(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=pa&&c===t?f:c,this}gs.prototype.clear=UA,gs.prototype.delete=FA,gs.prototype.get=WA,gs.prototype.has=zA,gs.prototype.set=VA;function hi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function $A(){this.__data__=[],this.size=0}function jA(o){var c=this.__data__,l=Hc(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():Wc.call(c,l,1),--this.size,!0}function qA(o){var c=this.__data__,l=Hc(c,o);return l<0?t:c[l][1]}function GA(o){return Hc(this.__data__,o)>-1}function HA(o,c){var l=this.__data__,p=Hc(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}hi.prototype.clear=$A,hi.prototype.delete=jA,hi.prototype.get=qA,hi.prototype.has=GA,hi.prototype.set=HA;function pi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function YA(){this.size=0,this.__data__={hash:new gs,map:new(da||hi),string:new gs}}function JA(o){var c=ou(this,o).delete(o);return this.size-=c?1:0,c}function QA(o){return ou(this,o).get(o)}function XA(o){return ou(this,o).has(o)}function ZA(o,c){var l=ou(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}pi.prototype.clear=YA,pi.prototype.delete=JA,pi.prototype.get=QA,pi.prototype.has=XA,pi.prototype.set=ZA;function ys(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new pi;++c<l;)this.add(o[c])}function e1(o){return this.__data__.set(o,f),this}function t1(o){return this.__data__.has(o)}ys.prototype.add=ys.prototype.push=e1,ys.prototype.has=t1;function Dr(o){var c=this.__data__=new hi(o);this.size=c.size}function n1(){this.__data__=new hi,this.size=0}function r1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function i1(o){return this.__data__.get(o)}function s1(o){return this.__data__.has(o)}function o1(o,c){var l=this.__data__;if(l instanceof hi){var p=l.__data__;if(!da||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new pi(p)}return l.set(o,c),this.size=l.size,this}Dr.prototype.clear=n1,Dr.prototype.delete=r1,Dr.prototype.get=i1,Dr.prototype.has=s1,Dr.prototype.set=o1;function Qg(o,c){var l=Le(o),p=!l&&ws(o),b=!l&&!p&&zi(o),w=!l&&!p&&!b&&co(o),P=l||p||b||w,B=P?qf(o.length,yA):[],U=B.length;for(var ne in o)(c||ut.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||bi(ne,U)))&&B.push(ne);return B}function Xg(o){var c=o.length;return c?o[ud(0,c-1)]:t}function a1(o,c){return au(Nn(o),ms(c,0,o.length))}function c1(o){return au(Nn(o))}function Zf(o,c,l){(l!==t&&!Ur(o[c],l)||l===t&&!(c in o))&&gi(o,c,l)}function ya(o,c,l){var p=o[c];(!(ut.call(o,c)&&Ur(p,l))||l===t&&!(c in o))&&gi(o,c,l)}function Hc(o,c){for(var l=o.length;l--;)if(Ur(o[l][0],c))return l;return-1}function u1(o,c,l,p){return Di(o,function(b,w,P){c(p,b,l(b),P)}),p}function Zg(o,c){return o&&Qr(c,un(c),o)}function l1(o,c){return o&&Qr(c,Un(c),o)}function gi(o,c,l){c=="__proto__"&&zc?zc(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function ed(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Cd(o,c[l]);return b}function ms(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Sr(o,c,l,p,b,w){var P,B=c&m,U=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!xt(o))return o;var re=Le(o);if(re){if(P=X1(o),!B)return Nn(o,P)}else{var ce=An(o),ge=ce==Xn||ce==di;if(zi(o))return Ay(o,B);if(ce==Zn||ce==kt||ge&&!b){if(P=U||ge?{}:zy(o),!B)return U?W1(o,l1(P,o)):F1(o,Zg(P,o))}else{if(!_t[ce])return b?o:{};P=Z1(o,ce,B)}}w||(w=new Dr);var we=w.get(o);if(we)return we;w.set(o,P),mm(o)?o.forEach(function(Re){P.add(Sr(Re,c,l,Re,o,w))}):gm(o)&&o.forEach(function(Re,je){P.set(je,Sr(Re,c,l,je,o,w))});var Te=ne?U?_d:vd:U?Un:un,Ue=re?t:Te(o);return vr(Ue||o,function(Re,je){Ue&&(je=Re,Re=o[je]),ya(P,je,Sr(Re,c,l,je,o,w))}),P}function f1(o){var c=un(o);return function(l){return ey(l,o,c)}}function ey(o,c,l){var p=l.length;if(o==null)return!p;for(o=gt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function ty(o,c,l){if(typeof o!="function")throw new _r(a);return Aa(function(){o.apply(t,l)},c)}function ma(o,c,l,p){var b=-1,w=Bc,P=!0,B=o.length,U=[],ne=c.length;if(!B)return U;l&&(c=Ot(c,tr(l))),p?(w=Ff,P=!1):c.length>=i&&(w=la,P=!1,c=new ys(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;U.push(re)}else w(c,ce,p)||U.push(re)}return U}var Di=Py(Jr),ny=Py(nd,!0);function d1(o,c){var l=!0;return Di(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function Yc(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!rr(P):l(P,B)))var B=P,U=w}return U}function h1(o,c,l,p){var b=o.length;for(l=De(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:De(p),p<0&&(p+=b),p=l>p?0:vm(p);l<p;)o[l++]=c;return o}function ry(o,c){var l=[];return Di(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function pn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=tk),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?pn(B,c-1,l,p,b):Li(b,B):p||(b[b.length]=B)}return b}var td=Ty(),iy=Ty(!0);function Jr(o,c){return o&&td(o,c,un)}function nd(o,c){return o&&iy(o,c,un)}function Jc(o,c){return Ci(c,function(l){return vi(o[l])})}function bs(o,c){c=Fi(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[Xr(c[l++])];return l&&l==p?o:t}function sy(o,c,l){var p=c(o);return Le(o)?p:Li(p,l(o))}function Rn(o){return o==null?o===t?Tf:Of:ps&&ps in gt(o)?Y1(o):ck(o)}function rd(o,c){return o>c}function p1(o,c){return o!=null&&ut.call(o,c)}function g1(o,c){return o!=null&&c in gt(o)}function y1(o,c,l){return o>=Sn(c,l)&&o<Zt(c,l)}function id(o,c,l){for(var p=l?Ff:Bc,b=o[0].length,w=o.length,P=w,B=q(w),U=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Ot(re,tr(c))),U=Sn(re.length,U),B[P]=!l&&(c||b>=120&&re.length>=120)?new ys(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<U;){var we=re[ce],Te=c?c(we):we;if(we=l||we!==0?we:0,!(ge?la(ge,Te):p(ne,Te,l))){for(P=w;--P;){var Ue=B[P];if(!(Ue?la(Ue,Te):p(o[P],Te,l)))continue e}ge&&ge.push(Te),ne.push(we)}}return ne}function m1(o,c,l,p){return Jr(o,function(b,w,P){c(p,l(b),w,P)}),p}function ba(o,c,l){c=Fi(c,o),o=qy(o,c);var p=o==null?o:o[Xr(kr(c))];return p==null?t:er(p,o,l)}function oy(o){return Kt(o)&&Rn(o)==kt}function b1(o){return Kt(o)&&Rn(o)==v}function v1(o){return Kt(o)&&Rn(o)==vn}function va(o,c,l,p,b){return o===c?!0:o==null||c==null||!Kt(o)&&!Kt(c)?o!==o&&c!==c:_1(o,c,l,p,va,b)}function _1(o,c,l,p,b,w){var P=Le(o),B=Le(c),U=P?lt:An(o),ne=B?lt:An(c);U=U==kt?Zn:U,ne=ne==kt?Zn:ne;var re=U==Zn,ce=ne==Zn,ge=U==ne;if(ge&&zi(o)){if(!zi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new Dr),P||co(o)?Uy(o,c,l,p,b,w):G1(o,c,U,l,p,b,w);if(!(l&M)){var we=re&&ut.call(o,"__wrapped__"),Te=ce&&ut.call(c,"__wrapped__");if(we||Te){var Ue=we?o.value():o,Re=Te?c.value():c;return w||(w=new Dr),b(Ue,Re,l,p,w)}}return ge?(w||(w=new Dr),H1(o,c,l,p,b,w)):!1}function w1(o){return Kt(o)&&An(o)==dn}function sd(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=gt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var U=B[0],ne=o[U],re=B[1];if(P&&B[2]){if(ne===t&&!(U in o))return!1}else{var ce=new Dr;if(p)var ge=p(ne,re,U,o,c,ce);if(!(ge===t?va(re,ne,M|A,p,ce):ge))return!1}}return!0}function ay(o){if(!xt(o)||rk(o))return!1;var c=vi(o)?wA:fS;return c.test(_s(o))}function S1(o){return Kt(o)&&Rn(o)==xi}function A1(o){return Kt(o)&&An(o)==_n}function k1(o){return Kt(o)&&hu(o.length)&&!!It[Rn(o)]}function cy(o){return typeof o=="function"?o:o==null?Fn:typeof o=="object"?Le(o)?fy(o[0],o[1]):ly(o):Rm(o)}function od(o){if(!Sa(o))return OA(o);var c=[];for(var l in gt(o))ut.call(o,l)&&l!="constructor"&&c.push(l);return c}function I1(o){if(!xt(o))return ak(o);var c=Sa(o),l=[];for(var p in o)p=="constructor"&&(c||!ut.call(o,p))||l.push(p);return l}function ad(o,c){return o<c}function uy(o,c){var l=-1,p=Dn(o)?q(o.length):[];return Di(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function ly(o){var c=Sd(o);return c.length==1&&c[0][2]?$y(c[0][0],c[0][1]):function(l){return l===o||sd(l,o,c)}}function fy(o,c){return kd(o)&&Vy(c)?$y(Xr(o),c):function(l){var p=Cd(l,o);return p===t&&p===c?Ld(l,o):va(c,p,M|A)}}function Qc(o,c,l,p,b){o!==c&&td(c,function(w,P){if(b||(b=new Dr),xt(w))E1(o,c,P,l,Qc,p,b);else{var B=p?p(Ed(o,P),w,P+"",o,c,b):t;B===t&&(B=w),Zf(o,P,B)}},Un)}function E1(o,c,l,p,b,w,P){var B=Ed(o,l),U=Ed(c,l),ne=P.get(U);if(ne){Zf(o,l,ne);return}var re=w?w(B,U,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Le(U),we=!ge&&zi(U),Te=!ge&&!we&&co(U);re=U,ge||we||Te?Le(B)?re=B:Wt(B)?re=Nn(B):we?(ce=!1,re=Ay(U,!0)):Te?(ce=!1,re=ky(U,!0)):re=[]:ka(U)||ws(U)?(re=B,ws(B)?re=_m(B):(!xt(B)||vi(B))&&(re=zy(U))):ce=!1}ce&&(P.set(U,re),b(re,U,p,w,P),P.delete(U)),Zf(o,l,re)}function dy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,bi(c,l)?o[c]:t}function hy(o,c,l){c.length?c=Ot(c,function(w){return Le(w)?function(P){return bs(P,w.length===1?w[0]:w)}:w}):c=[Fn];var p=-1;c=Ot(c,tr(Oe()));var b=uy(o,function(w,P,B){var U=Ot(c,function(ne){return ne(w)});return{criteria:U,index:++p,value:w}});return ZS(b,function(w,P){return U1(w,P,l)})}function O1(o,c){return py(o,c,function(l,p){return Ld(o,p)})}function py(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=bs(o,P);l(B,P)&&_a(w,Fi(P,o),B)}return w}function P1(o){return function(c){return bs(c,o)}}function cd(o,c,l,p){var b=p?XS:Qs,w=-1,P=c.length,B=o;for(o===c&&(c=Nn(c)),l&&(B=Ot(o,tr(l)));++w<P;)for(var U=0,ne=c[w],re=l?l(ne):ne;(U=b(B,re,U,p))>-1;)B!==o&&Wc.call(B,U,1),Wc.call(o,U,1);return o}function gy(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;bi(b)?Wc.call(o,b,1):dd(o,b)}}return o}function ud(o,c){return o+$c(Yg()*(c-o+1))}function T1(o,c,l,p){for(var b=-1,w=Zt(Vc((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function ld(o,c){var l="";if(!o||c<1||c>Ie)return l;do c%2&&(l+=o),c=$c(c/2),c&&(o+=o);while(c);return l}function Ve(o,c){return Od(jy(o,c,Fn),o+"")}function R1(o){return Xg(uo(o))}function B1(o,c){var l=uo(o);return au(l,ms(c,0,l.length))}function _a(o,c,l,p){if(!xt(o))return o;c=Fi(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var U=Xr(c[b]),ne=l;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(b!=P){var re=B[U];ne=p?p(re,U,B):t,ne===t&&(ne=xt(re)?re:bi(c[b+1])?[]:{})}ya(B,U,ne),B=B[U]}return o}var yy=jc?function(o,c){return jc.set(o,c),o}:Fn,x1=zc?function(o,c){return zc(o,"toString",{configurable:!0,enumerable:!1,value:Nd(c),writable:!0})}:Fn;function M1(o){return au(uo(o))}function Ar(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function C1(o,c){var l;return Di(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function Xc(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=Qt){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!rr(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return fd(o,c,Fn,l)}function fd(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,U=rr(c),ne=c===t;b<w;){var re=$c((b+w)/2),ce=l(o[re]),ge=ce!==t,we=ce===null,Te=ce===ce,Ue=rr(ce);if(P)var Re=p||Te;else ne?Re=Te&&(p||ge):B?Re=Te&&ge&&(p||!we):U?Re=Te&&ge&&!we&&(p||!Ue):we||Ue?Re=!1:Re=p?ce<=c:ce<c;Re?b=re+1:w=re}return Sn(w,ze)}function my(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!Ur(B,U)){var U=B;w[b++]=P===0?0:P}}return w}function by(o){return typeof o=="number"?o:rr(o)?jt:+o}function nr(o){if(typeof o=="string")return o;if(Le(o))return Ot(o,nr)+"";if(rr(o))return Jg?Jg.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Ui(o,c,l){var p=-1,b=Bc,w=o.length,P=!0,B=[],U=B;if(l)P=!1,b=Ff;else if(w>=i){var ne=c?null:j1(o);if(ne)return Mc(ne);P=!1,b=la,U=new ys}else U=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=U.length;ge--;)if(U[ge]===ce)continue e;c&&U.push(ce),B.push(re)}else b(U,ce,l)||(U!==B&&U.push(ce),B.push(re))}return B}function dd(o,c){return c=Fi(c,o),o=qy(o,c),o==null||delete o[Xr(kr(c))]}function vy(o,c,l,p){return _a(o,c,l(bs(o,c)),p)}function Zc(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Ar(o,p?0:w,p?w+1:b):Ar(o,p?w+1:0,p?b:w)}function _y(o,c){var l=o;return l instanceof Ge&&(l=l.value()),Wf(c,function(p,b){return b.func.apply(b.thisArg,Li([p],b.args))},l)}function hd(o,c,l){var p=o.length;if(p<2)return p?Ui(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=ma(w[b]||P,o[B],c,l));return Ui(pn(w,1),c,l)}function wy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function pd(o){return Wt(o)?o:[]}function gd(o){return typeof o=="function"?o:Fn}function Fi(o,c){return Le(o)?o:kd(o,c)?[o]:Jy(st(o))}var L1=Ve;function Wi(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Ar(o,c,l)}var Sy=SA||function(o){return hn.clearTimeout(o)};function Ay(o,c){if(c)return o.slice();var l=o.length,p=$g?$g(l):new o.constructor(l);return o.copy(p),p}function yd(o){var c=new o.constructor(o.byteLength);return new Uc(c).set(new Uc(o)),c}function K1(o,c){var l=c?yd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function N1(o){var c=new o.constructor(o.source,og.exec(o));return c.lastIndex=o.lastIndex,c}function D1(o){return ga?gt(ga.call(o)):{}}function ky(o,c){var l=c?yd(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function Iy(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=rr(o),P=c!==t,B=c===null,U=c===c,ne=rr(c);if(!B&&!ne&&!w&&o>c||w&&P&&U&&!B&&!ne||p&&P&&U||!l&&U||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!U)return-1}return 0}function U1(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var U=Iy(b[p],w[p]);if(U){if(p>=B)return U;var ne=l[p];return U*(ne=="desc"?-1:1)}}return o.index-c.index}function Ey(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,U=c.length,ne=Zt(w-P,0),re=q(U+ne),ce=!p;++B<U;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Oy(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,U=-1,ne=c.length,re=Zt(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var we=b;++U<ne;)ce[we+U]=c[U];for(;++P<B;)(ge||b<w)&&(ce[we+l[P]]=o[b++]);return ce}function Nn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function Qr(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],U=p?p(l[B],o[B],B,l,o):t;U===t&&(U=o[B]),b?gi(l,B,U):ya(l,B,U)}return l}function F1(o,c){return Qr(o,Ad(o),c)}function W1(o,c){return Qr(o,Fy(o),c)}function eu(o,c){return function(l,p){var b=Le(l)?qS:u1,w=c?c():{};return b(l,o,Oe(p,2),w)}}function so(o){return Ve(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Bn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=gt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function Py(o,c){return function(l,p){if(l==null)return l;if(!Dn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=gt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function Ty(o){return function(c,l,p){for(var b=-1,w=gt(c),P=p(c),B=P.length;B--;){var U=P[o?B:++b];if(l(w[U],U,w)===!1)break}return c}}function z1(o,c,l){var p=c&R,b=wa(o);function w(){var P=this&&this!==hn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function Ry(o){return function(c){c=st(c);var l=Xs(c)?Nr(c):t,p=l?l[0]:c.charAt(0),b=l?Wi(l,1).join(""):c.slice(1);return p[o]()+b}}function oo(o){return function(c){return Wf(Pm(Om(c).replace(xS,"")),o,"")}}function wa(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=io(o.prototype),p=o.apply(l,c);return xt(p)?p:l}}function V1(o,c,l){var p=wa(o);function b(){for(var w=arguments.length,P=q(w),B=w,U=ao(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==U&&P[w-1]!==U?[]:Ki(P,U);if(w-=ne.length,w<l)return Ly(o,c,tu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==hn&&this instanceof b?p:o;return er(re,this,P)}return b}function By(o){return function(c,l,p){var b=gt(c);if(!Dn(c)){var w=Oe(l,3);c=un(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function xy(o){return mi(function(c){var l=c.length,p=l,b=wr.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new _r(a);if(b&&!P&&su(w)=="wrapper")var P=new wr([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=su(w),U=B=="wrapper"?wd(w):t;U&&Id(U[0])&&U[1]==(N|ae|de|V)&&!U[4].length&&U[9]==1?P=P[su(U[0])].apply(P,U[3]):P=w.length==1&&Id(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Le(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function tu(o,c,l,p,b,w,P,B,U,ne){var re=c&N,ce=c&R,ge=c&C,we=c&(ae|oe),Te=c&J,Ue=ge?t:wa(o);function Re(){for(var je=arguments.length,He=q(je),ir=je;ir--;)He[ir]=arguments[ir];if(we)var xn=ao(Re),sr=tA(He,xn);if(p&&(He=Ey(He,p,b,we)),w&&(He=Oy(He,w,P,we)),je-=sr,we&&je<ne){var zt=Ki(He,xn);return Ly(o,c,tu,Re.placeholder,l,He,zt,B,U,ne-je)}var Fr=ce?l:this,wi=ge?Fr[o]:o;return je=He.length,B?He=uk(He,B):Te&&je>1&&He.reverse(),re&&U<je&&(He.length=U),this&&this!==hn&&this instanceof Re&&(wi=Ue||wa(wi)),wi.apply(Fr,He)}return Re}function My(o,c){return function(l,p){return m1(l,o,c(p),{})}}function nu(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=nr(l),p=nr(p)):(l=by(l),p=by(p)),b=o(l,p)}return b}}function md(o){return mi(function(c){return c=Ot(c,tr(Oe())),Ve(function(l){var p=this;return o(c,function(b){return er(b,p,l)})})})}function ru(o,c){c=c===t?" ":nr(c);var l=c.length;if(l<2)return l?ld(c,o):c;var p=ld(c,Vc(o/Zs(c)));return Xs(c)?Wi(Nr(p),0,o).join(""):p.slice(0,o)}function $1(o,c,l,p){var b=c&R,w=wa(o);function P(){for(var B=-1,U=arguments.length,ne=-1,re=p.length,ce=q(re+U),ge=this&&this!==hn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;U--;)ce[ne++]=arguments[++B];return er(ge,b?l:this,ce)}return P}function Cy(o){return function(c,l,p){return p&&typeof p!="number"&&Bn(c,l,p)&&(l=p=t),c=_i(c),l===t?(l=c,c=0):l=_i(l),p=p===t?c<l?1:-1:_i(p),T1(c,l,p,o)}}function iu(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Ir(c),l=Ir(l)),o(c,l)}}function Ly(o,c,l,p,b,w,P,B,U,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,we=re?w:t,Te=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|C));var Ue=[o,c,b,we,ce,Te,ge,B,U,ne],Re=l.apply(t,Ue);return Id(o)&&Gy(Re,Ue),Re.placeholder=p,Hy(Re,o,c)}function bd(o){var c=Xt[o];return function(l,p){if(l=Ir(l),p=p==null?0:Sn(De(p),292),p&&Hg(l)){var b=(st(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(st(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var j1=no&&1/Mc(new no([,-0]))[1]==ye?function(o){return new no(o)}:Fd;function Ky(o){return function(c){var l=An(c);return l==dn?Hf(c):l==_n?cA(c):eA(c,o(c))}}function yi(o,c,l,p,b,w,P,B){var U=c&C;if(!U&&typeof o!="function")throw new _r(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:Zt(De(P),0),B=B===t?B:De(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=U?t:wd(o),we=[o,c,l,p,b,re,ce,w,P,B];if(ge&&ok(we,ge),o=we[0],c=we[1],l=we[2],p=we[3],b=we[4],B=we[9]=we[9]===t?U?0:o.length:Zt(we[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Te=z1(o,c,l);else c==ae||c==oe?Te=V1(o,c,B):(c==de||c==(R|de))&&!b.length?Te=$1(o,c,l,p):Te=tu.apply(t,we);var Ue=ge?yy:Gy;return Hy(Ue(Te,we),o,c)}function Ny(o,c,l,p){return o===t||Ur(o,to[l])&&!ut.call(p,l)?c:o}function Dy(o,c,l,p,b,w){return xt(o)&&xt(c)&&(w.set(c,o),Qc(o,c,t,Dy,w),w.delete(c)),o}function q1(o){return ka(o)?t:o}function Uy(o,c,l,p,b,w){var P=l&M,B=o.length,U=c.length;if(B!=U&&!(P&&U>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,we=l&A?new ys:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Te=o[ce],Ue=c[ce];if(p)var Re=P?p(Ue,Te,ce,c,o,w):p(Te,Ue,ce,o,c,w);if(Re!==t){if(Re)continue;ge=!1;break}if(we){if(!zf(c,function(je,He){if(!la(we,He)&&(Te===je||b(Te,je,l,p,w)))return we.push(He)})){ge=!1;break}}else if(!(Te===Ue||b(Te,Ue,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function G1(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new Uc(o),new Uc(c)));case Ft:case vn:case ds:return Ur(+o,+c);case mr:return o.name==c.name&&o.message==c.message;case xi:case wn:return o==c+"";case dn:var B=Hf;case _n:var U=p&M;if(B||(B=Mc),o.size!=c.size&&!U)return!1;var ne=P.get(o);if(ne)return ne==c;p|=A,P.set(o,c);var re=Uy(B(o),B(c),p,b,w,P);return P.delete(o),re;case Mi:if(ga)return ga.call(o)==ga.call(c)}return!1}function H1(o,c,l,p,b,w){var P=l&M,B=vd(o),U=B.length,ne=vd(c),re=ne.length;if(U!=re&&!P)return!1;for(var ce=U;ce--;){var ge=B[ce];if(!(P?ge in c:ut.call(c,ge)))return!1}var we=w.get(o),Te=w.get(c);if(we&&Te)return we==c&&Te==o;var Ue=!0;w.set(o,c),w.set(c,o);for(var Re=P;++ce<U;){ge=B[ce];var je=o[ge],He=c[ge];if(p)var ir=P?p(He,je,ge,c,o,w):p(je,He,ge,o,c,w);if(!(ir===t?je===He||b(je,He,l,p,w):ir)){Ue=!1;break}Re||(Re=ge=="constructor")}if(Ue&&!Re){var xn=o.constructor,sr=c.constructor;xn!=sr&&"constructor"in o&&"constructor"in c&&!(typeof xn=="function"&&xn instanceof xn&&typeof sr=="function"&&sr instanceof sr)&&(Ue=!1)}return w.delete(o),w.delete(c),Ue}function mi(o){return Od(jy(o,t,em),o+"")}function vd(o){return sy(o,un,Ad)}function _d(o){return sy(o,Un,Fy)}var wd=jc?function(o){return jc.get(o)}:Fd;function su(o){for(var c=o.name+"",l=ro[c],p=ut.call(ro,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function ao(o){var c=ut.call(_,"placeholder")?_:o;return c.placeholder}function Oe(){var o=_.iteratee||Dd;return o=o===Dd?cy:o,arguments.length?o(arguments[0],arguments[1]):o}function ou(o,c){var l=o.__data__;return nk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Sd(o){for(var c=un(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,Vy(b)]}return c}function vs(o,c){var l=sA(o,c);return ay(l)?l:t}function Y1(o){var c=ut.call(o,ps),l=o[ps];try{o[ps]=t;var p=!0}catch{}var b=Nc.call(o);return p&&(c?o[ps]=l:delete o[ps]),b}var Ad=Jf?function(o){return o==null?[]:(o=gt(o),Ci(Jf(o),function(c){return qg.call(o,c)}))}:Wd,Fy=Jf?function(o){for(var c=[];o;)Li(c,Ad(o)),o=Fc(o);return c}:Wd,An=Rn;(Qf&&An(new Qf(new ArrayBuffer(1)))!=g||da&&An(new da)!=dn||Xf&&An(Xf.resolve())!=Oc||no&&An(new no)!=_n||ha&&An(new ha)!=Kn)&&(An=function(o){var c=Rn(o),l=c==Zn?o.constructor:t,p=l?_s(l):"";if(p)switch(p){case BA:return g;case xA:return dn;case MA:return Oc;case CA:return _n;case LA:return Kn}return c});function J1(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=Sn(c,o+P);break;case"takeRight":o=Zt(o,c-P);break}}return{start:o,end:c}}function Q1(o){var c=o.match(rS);return c?c[1].split(iS):[]}function Wy(o,c,l){c=Fi(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=Xr(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&hu(b)&&bi(P,b)&&(Le(o)||ws(o)))}function X1(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&ut.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function zy(o){return typeof o.constructor=="function"&&!Sa(o)?io(Fc(o)):{}}function Z1(o,c,l){var p=o.constructor;switch(c){case v:return yd(o);case Ft:case vn:return new p(+o);case g:return K1(o,l);case y:case k:case L:case $:case Z:case Ke:case bt:case ft:case vt:return ky(o,l);case dn:return new p;case ds:case wn:return new p(o);case xi:return N1(o);case _n:return new p;case Mi:return D1(o)}}function ek(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(nS,`{
/* [wrapped with `+c+`] */
`)}function tk(o){return Le(o)||ws(o)||!!(Gg&&o&&o[Gg])}function bi(o,c){var l=typeof o;return c=c??Ie,!!c&&(l=="number"||l!="symbol"&&hS.test(o))&&o>-1&&o%1==0&&o<c}function Bn(o,c,l){if(!xt(l))return!1;var p=typeof c;return(p=="number"?Dn(l)&&bi(c,l.length):p=="string"&&c in l)?Ur(l[c],o):!1}function kd(o,c){if(Le(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||rr(o)?!0:X0.test(o)||!Q0.test(o)||c!=null&&o in gt(c)}function nk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Id(o){var c=su(o),l=_[c];if(typeof l!="function"||!(c in Ge.prototype))return!1;if(o===l)return!0;var p=wd(l);return!!p&&o===p[0]}function rk(o){return!!Vg&&Vg in o}var ik=Lc?vi:zd;function Sa(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||to;return o===l}function Vy(o){return o===o&&!xt(o)}function $y(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in gt(l))}}function sk(o){var c=fu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function ok(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|C|N),P=p==N&&l==ae||p==N&&l==V&&o[7].length<=c[8]||p==(N|V)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var U=o[3];o[3]=U?Ey(U,B,c[4]):B,o[4]=U?Ki(o[3],d):c[4]}return B=c[5],B&&(U=o[5],o[5]=U?Oy(U,B,c[6]):B,o[6]=U?Ki(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:Sn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function ak(o){var c=[];if(o!=null)for(var l in gt(o))c.push(l);return c}function ck(o){return Nc.call(o)}function jy(o,c,l){return c=Zt(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=Zt(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),er(o,this,B)}}function qy(o,c){return c.length<2?o:bs(o,Ar(c,0,-1))}function uk(o,c){for(var l=o.length,p=Sn(c.length,l),b=Nn(o);p--;){var w=c[p];o[p]=bi(w,l)?b[w]:t}return o}function Ed(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var Gy=Yy(yy),Aa=kA||function(o,c){return hn.setTimeout(o,c)},Od=Yy(x1);function Hy(o,c,l){var p=c+"";return Od(o,ek(p,lk(Q1(p),l)))}function Yy(o){var c=0,l=0;return function(){var p=PA(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function au(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=ud(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var Jy=sk(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(Z0,function(l,p,b,w){c.push(b?w.replace(aS,"$1"):p||l)}),c});function Xr(o){if(typeof o=="string"||rr(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function _s(o){if(o!=null){try{return Kc.call(o)}catch{}try{return o+""}catch{}}return""}function lk(o,c){return vr(cn,function(l){var p="_."+l[0];c&l[1]&&!Bc(o,p)&&o.push(p)}),o.sort()}function Qy(o){if(o instanceof Ge)return o.clone();var c=new wr(o.__wrapped__,o.__chain__);return c.__actions__=Nn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function fk(o,c,l){(l?Bn(o,c,l):c===t)?c=1:c=Zt(De(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(Vc(p/c));b<p;)P[w++]=Ar(o,b,b+=c);return P}function dk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function hk(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return Li(Le(l)?Nn(l):[l],pn(c,1))}var pk=Ve(function(o,c){return Wt(o)?ma(o,pn(c,1,Wt,!0)):[]}),gk=Ve(function(o,c){var l=kr(c);return Wt(l)&&(l=t),Wt(o)?ma(o,pn(c,1,Wt,!0),Oe(l,2)):[]}),yk=Ve(function(o,c){var l=kr(c);return Wt(l)&&(l=t),Wt(o)?ma(o,pn(c,1,Wt,!0),t,l):[]});function mk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),Ar(o,c<0?0:c,p)):[]}function bk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Ar(o,0,c<0?0:c)):[]}function vk(o,c){return o&&o.length?Zc(o,Oe(c,3),!0,!0):[]}function _k(o,c){return o&&o.length?Zc(o,Oe(c,3),!0):[]}function wk(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Bn(o,c,l)&&(l=0,p=b),h1(o,c,l,p)):[]}function Xy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=Zt(p+b,0)),xc(o,Oe(c,3),b)}function Zy(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=De(l),b=l<0?Zt(p+b,0):Sn(b,p-1)),xc(o,Oe(c,3),b,!0)}function em(o){var c=o==null?0:o.length;return c?pn(o,1):[]}function Sk(o){var c=o==null?0:o.length;return c?pn(o,ye):[]}function Ak(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:De(c),pn(o,c)):[]}function kk(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function tm(o){return o&&o.length?o[0]:t}function Ik(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=Zt(p+b,0)),Qs(o,c,b)}function Ek(o){var c=o==null?0:o.length;return c?Ar(o,0,-1):[]}var Ok=Ve(function(o){var c=Ot(o,pd);return c.length&&c[0]===o[0]?id(c):[]}),Pk=Ve(function(o){var c=kr(o),l=Ot(o,pd);return c===kr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?id(l,Oe(c,2)):[]}),Tk=Ve(function(o){var c=kr(o),l=Ot(o,pd);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?id(l,t,c):[]});function Rk(o,c){return o==null?"":EA.call(o,c)}function kr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function Bk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=De(l),b=b<0?Zt(p+b,0):Sn(b,p-1)),c===c?lA(o,c,b):xc(o,Lg,b,!0)}function xk(o,c){return o&&o.length?dy(o,De(c)):t}var Mk=Ve(nm);function nm(o,c){return o&&o.length&&c&&c.length?cd(o,c):o}function Ck(o,c,l){return o&&o.length&&c&&c.length?cd(o,c,Oe(l,2)):o}function Lk(o,c,l){return o&&o.length&&c&&c.length?cd(o,c,t,l):o}var Kk=mi(function(o,c){var l=o==null?0:o.length,p=ed(o,c);return gy(o,Ot(c,function(b){return bi(b,l)?+b:b}).sort(Iy)),p});function Nk(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Oe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return gy(o,b),l}function Pd(o){return o==null?o:RA.call(o)}function Dk(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Bn(o,c,l)?(c=0,l=p):(c=c==null?0:De(c),l=l===t?p:De(l)),Ar(o,c,l)):[]}function Uk(o,c){return Xc(o,c)}function Fk(o,c,l){return fd(o,c,Oe(l,2))}function Wk(o,c){var l=o==null?0:o.length;if(l){var p=Xc(o,c);if(p<l&&Ur(o[p],c))return p}return-1}function zk(o,c){return Xc(o,c,!0)}function Vk(o,c,l){return fd(o,c,Oe(l,2),!0)}function $k(o,c){var l=o==null?0:o.length;if(l){var p=Xc(o,c,!0)-1;if(Ur(o[p],c))return p}return-1}function jk(o){return o&&o.length?my(o):[]}function qk(o,c){return o&&o.length?my(o,Oe(c,2)):[]}function Gk(o){var c=o==null?0:o.length;return c?Ar(o,1,c):[]}function Hk(o,c,l){return o&&o.length?(c=l||c===t?1:De(c),Ar(o,0,c<0?0:c)):[]}function Yk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Ar(o,c<0?0:c,p)):[]}function Jk(o,c){return o&&o.length?Zc(o,Oe(c,3),!1,!0):[]}function Qk(o,c){return o&&o.length?Zc(o,Oe(c,3)):[]}var Xk=Ve(function(o){return Ui(pn(o,1,Wt,!0))}),Zk=Ve(function(o){var c=kr(o);return Wt(c)&&(c=t),Ui(pn(o,1,Wt,!0),Oe(c,2))}),eI=Ve(function(o){var c=kr(o);return c=typeof c=="function"?c:t,Ui(pn(o,1,Wt,!0),t,c)});function tI(o){return o&&o.length?Ui(o):[]}function nI(o,c){return o&&o.length?Ui(o,Oe(c,2)):[]}function rI(o,c){return c=typeof c=="function"?c:t,o&&o.length?Ui(o,t,c):[]}function Td(o){if(!(o&&o.length))return[];var c=0;return o=Ci(o,function(l){if(Wt(l))return c=Zt(l.length,c),!0}),qf(c,function(l){return Ot(o,Vf(l))})}function rm(o,c){if(!(o&&o.length))return[];var l=Td(o);return c==null?l:Ot(l,function(p){return er(c,t,p)})}var iI=Ve(function(o,c){return Wt(o)?ma(o,c):[]}),sI=Ve(function(o){return hd(Ci(o,Wt))}),oI=Ve(function(o){var c=kr(o);return Wt(c)&&(c=t),hd(Ci(o,Wt),Oe(c,2))}),aI=Ve(function(o){var c=kr(o);return c=typeof c=="function"?c:t,hd(Ci(o,Wt),t,c)}),cI=Ve(Td);function uI(o,c){return wy(o||[],c||[],ya)}function lI(o,c){return wy(o||[],c||[],_a)}var fI=Ve(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,rm(o,l)});function im(o){var c=_(o);return c.__chain__=!0,c}function dI(o,c){return c(o),o}function cu(o,c){return c(o)}var hI=mi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return ed(w,o)};return c>1||this.__actions__.length||!(p instanceof Ge)||!bi(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:cu,args:[b],thisArg:t}),new wr(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function pI(){return im(this)}function gI(){return new wr(this.value(),this.__chain__)}function yI(){this.__values__===t&&(this.__values__=bm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function mI(){return this}function bI(o){for(var c,l=this;l instanceof Gc;){var p=Qy(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function vI(){var o=this.__wrapped__;if(o instanceof Ge){var c=o;return this.__actions__.length&&(c=new Ge(this)),c=c.reverse(),c.__actions__.push({func:cu,args:[Pd],thisArg:t}),new wr(c,this.__chain__)}return this.thru(Pd)}function _I(){return _y(this.__wrapped__,this.__actions__)}var wI=eu(function(o,c,l){ut.call(o,l)?++o[l]:gi(o,l,1)});function SI(o,c,l){var p=Le(o)?Mg:d1;return l&&Bn(o,c,l)&&(c=t),p(o,Oe(c,3))}function AI(o,c){var l=Le(o)?Ci:ry;return l(o,Oe(c,3))}var kI=By(Xy),II=By(Zy);function EI(o,c){return pn(uu(o,c),1)}function OI(o,c){return pn(uu(o,c),ye)}function PI(o,c,l){return l=l===t?1:De(l),pn(uu(o,c),l)}function sm(o,c){var l=Le(o)?vr:Di;return l(o,Oe(c,3))}function om(o,c){var l=Le(o)?GS:ny;return l(o,Oe(c,3))}var TI=eu(function(o,c,l){ut.call(o,l)?o[l].push(c):gi(o,l,[c])});function RI(o,c,l,p){o=Dn(o)?o:uo(o),l=l&&!p?De(l):0;var b=o.length;return l<0&&(l=Zt(b+l,0)),pu(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&Qs(o,c,l)>-1}var BI=Ve(function(o,c,l){var p=-1,b=typeof c=="function",w=Dn(o)?q(o.length):[];return Di(o,function(P){w[++p]=b?er(c,P,l):ba(P,c,l)}),w}),xI=eu(function(o,c,l){gi(o,l,c)});function uu(o,c){var l=Le(o)?Ot:uy;return l(o,Oe(c,3))}function MI(o,c,l,p){return o==null?[]:(Le(c)||(c=c==null?[]:[c]),l=p?t:l,Le(l)||(l=l==null?[]:[l]),hy(o,c,l))}var CI=eu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function LI(o,c,l){var p=Le(o)?Wf:Ng,b=arguments.length<3;return p(o,Oe(c,4),l,b,Di)}function KI(o,c,l){var p=Le(o)?HS:Ng,b=arguments.length<3;return p(o,Oe(c,4),l,b,ny)}function NI(o,c){var l=Le(o)?Ci:ry;return l(o,du(Oe(c,3)))}function DI(o){var c=Le(o)?Xg:R1;return c(o)}function UI(o,c,l){(l?Bn(o,c,l):c===t)?c=1:c=De(c);var p=Le(o)?a1:B1;return p(o,c)}function FI(o){var c=Le(o)?c1:M1;return c(o)}function WI(o){if(o==null)return 0;if(Dn(o))return pu(o)?Zs(o):o.length;var c=An(o);return c==dn||c==_n?o.size:od(o).length}function zI(o,c,l){var p=Le(o)?zf:C1;return l&&Bn(o,c,l)&&(c=t),p(o,Oe(c,3))}var VI=Ve(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Bn(o,c[0],c[1])?c=[]:l>2&&Bn(c[0],c[1],c[2])&&(c=[c[0]]),hy(o,pn(c,1),[])}),lu=AA||function(){return hn.Date.now()};function $I(o,c){if(typeof c!="function")throw new _r(a);return o=De(o),function(){if(--o<1)return c.apply(this,arguments)}}function am(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,yi(o,N,t,t,t,t,c)}function cm(o,c){var l;if(typeof c!="function")throw new _r(a);return o=De(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Rd=Ve(function(o,c,l){var p=R;if(l.length){var b=Ki(l,ao(Rd));p|=de}return yi(o,p,c,l,b)}),um=Ve(function(o,c,l){var p=R|C;if(l.length){var b=Ki(l,ao(um));p|=de}return yi(c,p,o,l,b)});function lm(o,c,l){c=l?t:c;var p=yi(o,ae,t,t,t,t,t,c);return p.placeholder=lm.placeholder,p}function fm(o,c,l){c=l?t:c;var p=yi(o,oe,t,t,t,t,t,c);return p.placeholder=fm.placeholder,p}function dm(o,c,l){var p,b,w,P,B,U,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new _r(a);c=Ir(c)||0,xt(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?Zt(Ir(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function we(zt){var Fr=p,wi=b;return p=b=t,ne=zt,P=o.apply(wi,Fr),P}function Te(zt){return ne=zt,B=Aa(je,c),re?we(zt):P}function Ue(zt){var Fr=zt-U,wi=zt-ne,Bm=c-Fr;return ce?Sn(Bm,w-wi):Bm}function Re(zt){var Fr=zt-U,wi=zt-ne;return U===t||Fr>=c||Fr<0||ce&&wi>=w}function je(){var zt=lu();if(Re(zt))return He(zt);B=Aa(je,Ue(zt))}function He(zt){return B=t,ge&&p?we(zt):(p=b=t,P)}function ir(){B!==t&&Sy(B),ne=0,p=U=b=B=t}function xn(){return B===t?P:He(lu())}function sr(){var zt=lu(),Fr=Re(zt);if(p=arguments,b=this,U=zt,Fr){if(B===t)return Te(U);if(ce)return Sy(B),B=Aa(je,c),we(U)}return B===t&&(B=Aa(je,c)),P}return sr.cancel=ir,sr.flush=xn,sr}var jI=Ve(function(o,c){return ty(o,1,c)}),qI=Ve(function(o,c,l){return ty(o,Ir(c)||0,l)});function GI(o){return yi(o,J)}function fu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new _r(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(fu.Cache||pi),l}fu.Cache=pi;function du(o){if(typeof o!="function")throw new _r(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function HI(o){return cm(2,o)}var YI=L1(function(o,c){c=c.length==1&&Le(c[0])?Ot(c[0],tr(Oe())):Ot(pn(c,1),tr(Oe()));var l=c.length;return Ve(function(p){for(var b=-1,w=Sn(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return er(o,this,p)})}),Bd=Ve(function(o,c){var l=Ki(c,ao(Bd));return yi(o,de,t,c,l)}),hm=Ve(function(o,c){var l=Ki(c,ao(hm));return yi(o,E,t,c,l)}),JI=mi(function(o,c){return yi(o,V,t,t,t,c)});function QI(o,c){if(typeof o!="function")throw new _r(a);return c=c===t?c:De(c),Ve(o,c)}function XI(o,c){if(typeof o!="function")throw new _r(a);return c=c==null?0:Zt(De(c),0),Ve(function(l){var p=l[c],b=Wi(l,0,c);return p&&Li(b,p),er(o,this,b)})}function ZI(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new _r(a);return xt(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),dm(o,c,{leading:p,maxWait:c,trailing:b})}function eE(o){return am(o,1)}function tE(o,c){return Bd(gd(c),o)}function nE(){if(!arguments.length)return[];var o=arguments[0];return Le(o)?o:[o]}function rE(o){return Sr(o,O)}function iE(o,c){return c=typeof c=="function"?c:t,Sr(o,O,c)}function sE(o){return Sr(o,m|O)}function oE(o,c){return c=typeof c=="function"?c:t,Sr(o,m|O,c)}function aE(o,c){return c==null||ey(o,c,un(c))}function Ur(o,c){return o===c||o!==o&&c!==c}var cE=iu(rd),uE=iu(function(o,c){return o>=c}),ws=oy(function(){return arguments}())?oy:function(o){return Kt(o)&&ut.call(o,"callee")&&!qg.call(o,"callee")},Le=q.isArray,lE=Og?tr(Og):b1;function Dn(o){return o!=null&&hu(o.length)&&!vi(o)}function Wt(o){return Kt(o)&&Dn(o)}function fE(o){return o===!0||o===!1||Kt(o)&&Rn(o)==Ft}var zi=IA||zd,dE=Pg?tr(Pg):v1;function hE(o){return Kt(o)&&o.nodeType===1&&!ka(o)}function pE(o){if(o==null)return!0;if(Dn(o)&&(Le(o)||typeof o=="string"||typeof o.splice=="function"||zi(o)||co(o)||ws(o)))return!o.length;var c=An(o);if(c==dn||c==_n)return!o.size;if(Sa(o))return!od(o).length;for(var l in o)if(ut.call(o,l))return!1;return!0}function gE(o,c){return va(o,c)}function yE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?va(o,c,t,l):!!p}function xd(o){if(!Kt(o))return!1;var c=Rn(o);return c==mr||c==Yr||typeof o.message=="string"&&typeof o.name=="string"&&!ka(o)}function mE(o){return typeof o=="number"&&Hg(o)}function vi(o){if(!xt(o))return!1;var c=Rn(o);return c==Xn||c==di||c==yr||c==Pf}function pm(o){return typeof o=="number"&&o==De(o)}function hu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ie}function xt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Kt(o){return o!=null&&typeof o=="object"}var gm=Tg?tr(Tg):w1;function bE(o,c){return o===c||sd(o,c,Sd(c))}function vE(o,c,l){return l=typeof l=="function"?l:t,sd(o,c,Sd(c),l)}function _E(o){return ym(o)&&o!=+o}function wE(o){if(ik(o))throw new Me(s);return ay(o)}function SE(o){return o===null}function AE(o){return o==null}function ym(o){return typeof o=="number"||Kt(o)&&Rn(o)==ds}function ka(o){if(!Kt(o)||Rn(o)!=Zn)return!1;var c=Fc(o);if(c===null)return!0;var l=ut.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&Kc.call(l)==vA}var Md=Rg?tr(Rg):S1;function kE(o){return pm(o)&&o>=-Ie&&o<=Ie}var mm=Bg?tr(Bg):A1;function pu(o){return typeof o=="string"||!Le(o)&&Kt(o)&&Rn(o)==wn}function rr(o){return typeof o=="symbol"||Kt(o)&&Rn(o)==Mi}var co=xg?tr(xg):k1;function IE(o){return o===t}function EE(o){return Kt(o)&&An(o)==Kn}function OE(o){return Kt(o)&&Rn(o)==Rf}var PE=iu(ad),TE=iu(function(o,c){return o<=c});function bm(o){if(!o)return[];if(Dn(o))return pu(o)?Nr(o):Nn(o);if(fa&&o[fa])return aA(o[fa]());var c=An(o),l=c==dn?Hf:c==_n?Mc:uo;return l(o)}function _i(o){if(!o)return o===0?o:0;if(o=Ir(o),o===ye||o===-ye){var c=o<0?-1:1;return c*$t}return o===o?o:0}function De(o){var c=_i(o),l=c%1;return c===c?l?c-l:c:0}function vm(o){return o?ms(De(o),0,_e):0}function Ir(o){if(typeof o=="number")return o;if(rr(o))return jt;if(xt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=xt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=Dg(o);var l=lS.test(o);return l||dS.test(o)?$S(o.slice(2),l?2:8):uS.test(o)?jt:+o}function _m(o){return Qr(o,Un(o))}function RE(o){return o?ms(De(o),-Ie,Ie):o===0?o:0}function st(o){return o==null?"":nr(o)}var BE=so(function(o,c){if(Sa(c)||Dn(c)){Qr(c,un(c),o);return}for(var l in c)ut.call(c,l)&&ya(o,l,c[l])}),wm=so(function(o,c){Qr(c,Un(c),o)}),gu=so(function(o,c,l,p){Qr(c,Un(c),o,p)}),xE=so(function(o,c,l,p){Qr(c,un(c),o,p)}),ME=mi(ed);function CE(o,c){var l=io(o);return c==null?l:Zg(l,c)}var LE=Ve(function(o,c){o=gt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Bn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=Un(w),B=-1,U=P.length;++B<U;){var ne=P[B],re=o[ne];(re===t||Ur(re,to[ne])&&!ut.call(o,ne))&&(o[ne]=w[ne])}return o}),KE=Ve(function(o){return o.push(t,Dy),er(Sm,t,o)});function NE(o,c){return Cg(o,Oe(c,3),Jr)}function DE(o,c){return Cg(o,Oe(c,3),nd)}function UE(o,c){return o==null?o:td(o,Oe(c,3),Un)}function FE(o,c){return o==null?o:iy(o,Oe(c,3),Un)}function WE(o,c){return o&&Jr(o,Oe(c,3))}function zE(o,c){return o&&nd(o,Oe(c,3))}function VE(o){return o==null?[]:Jc(o,un(o))}function $E(o){return o==null?[]:Jc(o,Un(o))}function Cd(o,c,l){var p=o==null?t:bs(o,c);return p===t?l:p}function jE(o,c){return o!=null&&Wy(o,c,p1)}function Ld(o,c){return o!=null&&Wy(o,c,g1)}var qE=My(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Nc.call(c)),o[c]=l},Nd(Fn)),GE=My(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Nc.call(c)),ut.call(o,c)?o[c].push(l):o[c]=[l]},Oe),HE=Ve(ba);function un(o){return Dn(o)?Qg(o):od(o)}function Un(o){return Dn(o)?Qg(o,!0):I1(o)}function YE(o,c){var l={};return c=Oe(c,3),Jr(o,function(p,b,w){gi(l,c(p,b,w),p)}),l}function JE(o,c){var l={};return c=Oe(c,3),Jr(o,function(p,b,w){gi(l,b,c(p,b,w))}),l}var QE=so(function(o,c,l){Qc(o,c,l)}),Sm=so(function(o,c,l,p){Qc(o,c,l,p)}),XE=mi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Ot(c,function(w){return w=Fi(w,o),p||(p=w.length>1),w}),Qr(o,_d(o),l),p&&(l=Sr(l,m|I|O,q1));for(var b=c.length;b--;)dd(l,c[b]);return l});function ZE(o,c){return Am(o,du(Oe(c)))}var eO=mi(function(o,c){return o==null?{}:O1(o,c)});function Am(o,c){if(o==null)return{};var l=Ot(_d(o),function(p){return[p]});return c=Oe(c),py(o,l,function(p,b){return c(p,b[0])})}function tO(o,c,l){c=Fi(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[Xr(c[p])];w===t&&(p=b,w=l),o=vi(w)?w.call(o):w}return o}function nO(o,c,l){return o==null?o:_a(o,c,l)}function rO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:_a(o,c,l,p)}var km=Ky(un),Im=Ky(Un);function iO(o,c,l){var p=Le(o),b=p||zi(o)||co(o);if(c=Oe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:xt(o)?l=vi(w)?io(Fc(o)):{}:l={}}return(b?vr:Jr)(o,function(P,B,U){return c(l,P,B,U)}),l}function sO(o,c){return o==null?!0:dd(o,c)}function oO(o,c,l){return o==null?o:vy(o,c,gd(l))}function aO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:vy(o,c,gd(l),p)}function uo(o){return o==null?[]:Gf(o,un(o))}function cO(o){return o==null?[]:Gf(o,Un(o))}function uO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Ir(l),l=l===l?l:0),c!==t&&(c=Ir(c),c=c===c?c:0),ms(Ir(o),c,l)}function lO(o,c,l){return c=_i(c),l===t?(l=c,c=0):l=_i(l),o=Ir(o),y1(o,c,l)}function fO(o,c,l){if(l&&typeof l!="boolean"&&Bn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=_i(o),c===t?(c=o,o=0):c=_i(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=Yg();return Sn(o+b*(c-o+VS("1e-"+((b+"").length-1))),c)}return ud(o,c)}var dO=oo(function(o,c,l){return c=c.toLowerCase(),o+(l?Em(c):c)});function Em(o){return Kd(st(o).toLowerCase())}function Om(o){return o=st(o),o&&o.replace(pS,nA).replace(MS,"")}function hO(o,c,l){o=st(o),c=nr(c);var p=o.length;l=l===t?p:ms(De(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function pO(o){return o=st(o),o&&H0.test(o)?o.replace(ig,rA):o}function gO(o){return o=st(o),o&&eS.test(o)?o.replace(Bf,"\\$&"):o}var yO=oo(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),mO=oo(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),bO=Ry("toLowerCase");function vO(o,c,l){o=st(o),c=De(c);var p=c?Zs(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return ru($c(b),l)+o+ru(Vc(b),l)}function _O(o,c,l){o=st(o),c=De(c);var p=c?Zs(o):0;return c&&p<c?o+ru(c-p,l):o}function wO(o,c,l){o=st(o),c=De(c);var p=c?Zs(o):0;return c&&p<c?ru(c-p,l)+o:o}function SO(o,c,l){return l||c==null?c=0:c&&(c=+c),TA(st(o).replace(xf,""),c||0)}function AO(o,c,l){return(l?Bn(o,c,l):c===t)?c=1:c=De(c),ld(st(o),c)}function kO(){var o=arguments,c=st(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var IO=oo(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function EO(o,c,l){return l&&typeof l!="number"&&Bn(o,c,l)&&(c=l=t),l=l===t?_e:l>>>0,l?(o=st(o),o&&(typeof c=="string"||c!=null&&!Md(c))&&(c=nr(c),!c&&Xs(o))?Wi(Nr(o),0,l):o.split(c,l)):[]}var OO=oo(function(o,c,l){return o+(l?" ":"")+Kd(c)});function PO(o,c,l){return o=st(o),l=l==null?0:ms(De(l),0,o.length),c=nr(c),o.slice(l,l+c.length)==c}function TO(o,c,l){var p=_.templateSettings;l&&Bn(o,c,l)&&(c=t),o=st(o),c=gu({},c,p,Ny);var b=gu({},c.imports,p.imports,Ny),w=un(b),P=Gf(b,w),B,U,ne=0,re=c.interpolate||Pc,ce="__p += '",ge=Yf((c.escape||Pc).source+"|"+re.source+"|"+(re===sg?cS:Pc).source+"|"+(c.evaluate||Pc).source+"|$","g"),we="//# sourceURL="+(ut.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++DS+"]")+`
`;o.replace(ge,function(Re,je,He,ir,xn,sr){return He||(He=ir),ce+=o.slice(ne,sr).replace(gS,iA),je&&(B=!0,ce+=`' +
__e(`+je+`) +
'`),xn&&(U=!0,ce+=`';
`+xn+`;
__p += '`),He&&(ce+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),ne=sr+Re.length,Re}),ce+=`';
`;var Te=ut.call(c,"variable")&&c.variable;if(!Te)ce=`with (obj) {
`+ce+`
}
`;else if(oS.test(Te))throw new Me(u);ce=(U?ce.replace(ct,""):ce).replace(j0,"$1").replace(q0,"$1;"),ce="function("+(Te||"obj")+`) {
`+(Te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Ue=Tm(function(){return nt(w,we+"return "+ce).apply(t,P)});if(Ue.source=ce,xd(Ue))throw Ue;return Ue}function RO(o){return st(o).toLowerCase()}function BO(o){return st(o).toUpperCase()}function xO(o,c,l){if(o=st(o),o&&(l||c===t))return Dg(o);if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Nr(c),w=Ug(p,b),P=Fg(p,b)+1;return Wi(p,w,P).join("")}function MO(o,c,l){if(o=st(o),o&&(l||c===t))return o.slice(0,zg(o)+1);if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Fg(p,Nr(c))+1;return Wi(p,0,b).join("")}function CO(o,c,l){if(o=st(o),o&&(l||c===t))return o.replace(xf,"");if(!o||!(c=nr(c)))return o;var p=Nr(o),b=Ug(p,Nr(c));return Wi(p,b).join("")}function LO(o,c){var l=K,p=j;if(xt(c)){var b="separator"in c?c.separator:b;l="length"in c?De(c.length):l,p="omission"in c?nr(c.omission):p}o=st(o);var w=o.length;if(Xs(o)){var P=Nr(o);w=P.length}if(l>=w)return o;var B=l-Zs(p);if(B<1)return p;var U=P?Wi(P,0,B).join(""):o.slice(0,B);if(b===t)return U+p;if(P&&(B+=U.length-B),Md(b)){if(o.slice(B).search(b)){var ne,re=U;for(b.global||(b=Yf(b.source,st(og.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;U=U.slice(0,ce===t?B:ce)}}else if(o.indexOf(nr(b),B)!=B){var ge=U.lastIndexOf(b);ge>-1&&(U=U.slice(0,ge))}return U+p}function KO(o){return o=st(o),o&&G0.test(o)?o.replace(rg,fA):o}var NO=oo(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),Kd=Ry("toUpperCase");function Pm(o,c,l){return o=st(o),c=l?t:c,c===t?oA(o)?pA(o):QS(o):o.match(c)||[]}var Tm=Ve(function(o,c){try{return er(o,t,c)}catch(l){return xd(l)?l:new Me(l)}}),DO=mi(function(o,c){return vr(c,function(l){l=Xr(l),gi(o,l,Rd(o[l],o))}),o});function UO(o){var c=o==null?0:o.length,l=Oe();return o=c?Ot(o,function(p){if(typeof p[1]!="function")throw new _r(a);return[l(p[0]),p[1]]}):[],Ve(function(p){for(var b=-1;++b<c;){var w=o[b];if(er(w[0],this,p))return er(w[1],this,p)}})}function FO(o){return f1(Sr(o,m))}function Nd(o){return function(){return o}}function WO(o,c){return o==null||o!==o?c:o}var zO=xy(),VO=xy(!0);function Fn(o){return o}function Dd(o){return cy(typeof o=="function"?o:Sr(o,m))}function $O(o){return ly(Sr(o,m))}function jO(o,c){return fy(o,Sr(c,m))}var qO=Ve(function(o,c){return function(l){return ba(l,o,c)}}),GO=Ve(function(o,c){return function(l){return ba(o,l,c)}});function Ud(o,c,l){var p=un(c),b=Jc(c,p);l==null&&!(xt(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=Jc(c,un(c)));var w=!(xt(l)&&"chain"in l)||!!l.chain,P=vi(o);return vr(b,function(B){var U=c[B];o[B]=U,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=Nn(this.__actions__);return ce.push({func:U,args:arguments,thisArg:o}),re.__chain__=ne,re}return U.apply(o,Li([this.value()],arguments))})}),o}function HO(){return hn._===this&&(hn._=_A),this}function Fd(){}function YO(o){return o=De(o),Ve(function(c){return dy(c,o)})}var JO=md(Ot),QO=md(Mg),XO=md(zf);function Rm(o){return kd(o)?Vf(Xr(o)):P1(o)}function ZO(o){return function(c){return o==null?t:bs(o,c)}}var eP=Cy(),tP=Cy(!0);function Wd(){return[]}function zd(){return!1}function nP(){return{}}function rP(){return""}function iP(){return!0}function sP(o,c){if(o=De(o),o<1||o>Ie)return[];var l=_e,p=Sn(o,_e);c=Oe(c),o-=_e;for(var b=qf(p,c);++l<o;)c(l);return b}function oP(o){return Le(o)?Ot(o,Xr):rr(o)?[o]:Nn(Jy(st(o)))}function aP(o){var c=++bA;return st(o)+c}var cP=nu(function(o,c){return o+c},0),uP=bd("ceil"),lP=nu(function(o,c){return o/c},1),fP=bd("floor");function dP(o){return o&&o.length?Yc(o,Fn,rd):t}function hP(o,c){return o&&o.length?Yc(o,Oe(c,2),rd):t}function pP(o){return Kg(o,Fn)}function gP(o,c){return Kg(o,Oe(c,2))}function yP(o){return o&&o.length?Yc(o,Fn,ad):t}function mP(o,c){return o&&o.length?Yc(o,Oe(c,2),ad):t}var bP=nu(function(o,c){return o*c},1),vP=bd("round"),_P=nu(function(o,c){return o-c},0);function wP(o){return o&&o.length?jf(o,Fn):0}function SP(o,c){return o&&o.length?jf(o,Oe(c,2)):0}return _.after=$I,_.ary=am,_.assign=BE,_.assignIn=wm,_.assignInWith=gu,_.assignWith=xE,_.at=ME,_.before=cm,_.bind=Rd,_.bindAll=DO,_.bindKey=um,_.castArray=nE,_.chain=im,_.chunk=fk,_.compact=dk,_.concat=hk,_.cond=UO,_.conforms=FO,_.constant=Nd,_.countBy=wI,_.create=CE,_.curry=lm,_.curryRight=fm,_.debounce=dm,_.defaults=LE,_.defaultsDeep=KE,_.defer=jI,_.delay=qI,_.difference=pk,_.differenceBy=gk,_.differenceWith=yk,_.drop=mk,_.dropRight=bk,_.dropRightWhile=vk,_.dropWhile=_k,_.fill=wk,_.filter=AI,_.flatMap=EI,_.flatMapDeep=OI,_.flatMapDepth=PI,_.flatten=em,_.flattenDeep=Sk,_.flattenDepth=Ak,_.flip=GI,_.flow=zO,_.flowRight=VO,_.fromPairs=kk,_.functions=VE,_.functionsIn=$E,_.groupBy=TI,_.initial=Ek,_.intersection=Ok,_.intersectionBy=Pk,_.intersectionWith=Tk,_.invert=qE,_.invertBy=GE,_.invokeMap=BI,_.iteratee=Dd,_.keyBy=xI,_.keys=un,_.keysIn=Un,_.map=uu,_.mapKeys=YE,_.mapValues=JE,_.matches=$O,_.matchesProperty=jO,_.memoize=fu,_.merge=QE,_.mergeWith=Sm,_.method=qO,_.methodOf=GO,_.mixin=Ud,_.negate=du,_.nthArg=YO,_.omit=XE,_.omitBy=ZE,_.once=HI,_.orderBy=MI,_.over=JO,_.overArgs=YI,_.overEvery=QO,_.overSome=XO,_.partial=Bd,_.partialRight=hm,_.partition=CI,_.pick=eO,_.pickBy=Am,_.property=Rm,_.propertyOf=ZO,_.pull=Mk,_.pullAll=nm,_.pullAllBy=Ck,_.pullAllWith=Lk,_.pullAt=Kk,_.range=eP,_.rangeRight=tP,_.rearg=JI,_.reject=NI,_.remove=Nk,_.rest=QI,_.reverse=Pd,_.sampleSize=UI,_.set=nO,_.setWith=rO,_.shuffle=FI,_.slice=Dk,_.sortBy=VI,_.sortedUniq=jk,_.sortedUniqBy=qk,_.split=EO,_.spread=XI,_.tail=Gk,_.take=Hk,_.takeRight=Yk,_.takeRightWhile=Jk,_.takeWhile=Qk,_.tap=dI,_.throttle=ZI,_.thru=cu,_.toArray=bm,_.toPairs=km,_.toPairsIn=Im,_.toPath=oP,_.toPlainObject=_m,_.transform=iO,_.unary=eE,_.union=Xk,_.unionBy=Zk,_.unionWith=eI,_.uniq=tI,_.uniqBy=nI,_.uniqWith=rI,_.unset=sO,_.unzip=Td,_.unzipWith=rm,_.update=oO,_.updateWith=aO,_.values=uo,_.valuesIn=cO,_.without=iI,_.words=Pm,_.wrap=tE,_.xor=sI,_.xorBy=oI,_.xorWith=aI,_.zip=cI,_.zipObject=uI,_.zipObjectDeep=lI,_.zipWith=fI,_.entries=km,_.entriesIn=Im,_.extend=wm,_.extendWith=gu,Ud(_,_),_.add=cP,_.attempt=Tm,_.camelCase=dO,_.capitalize=Em,_.ceil=uP,_.clamp=uO,_.clone=rE,_.cloneDeep=sE,_.cloneDeepWith=oE,_.cloneWith=iE,_.conformsTo=aE,_.deburr=Om,_.defaultTo=WO,_.divide=lP,_.endsWith=hO,_.eq=Ur,_.escape=pO,_.escapeRegExp=gO,_.every=SI,_.find=kI,_.findIndex=Xy,_.findKey=NE,_.findLast=II,_.findLastIndex=Zy,_.findLastKey=DE,_.floor=fP,_.forEach=sm,_.forEachRight=om,_.forIn=UE,_.forInRight=FE,_.forOwn=WE,_.forOwnRight=zE,_.get=Cd,_.gt=cE,_.gte=uE,_.has=jE,_.hasIn=Ld,_.head=tm,_.identity=Fn,_.includes=RI,_.indexOf=Ik,_.inRange=lO,_.invoke=HE,_.isArguments=ws,_.isArray=Le,_.isArrayBuffer=lE,_.isArrayLike=Dn,_.isArrayLikeObject=Wt,_.isBoolean=fE,_.isBuffer=zi,_.isDate=dE,_.isElement=hE,_.isEmpty=pE,_.isEqual=gE,_.isEqualWith=yE,_.isError=xd,_.isFinite=mE,_.isFunction=vi,_.isInteger=pm,_.isLength=hu,_.isMap=gm,_.isMatch=bE,_.isMatchWith=vE,_.isNaN=_E,_.isNative=wE,_.isNil=AE,_.isNull=SE,_.isNumber=ym,_.isObject=xt,_.isObjectLike=Kt,_.isPlainObject=ka,_.isRegExp=Md,_.isSafeInteger=kE,_.isSet=mm,_.isString=pu,_.isSymbol=rr,_.isTypedArray=co,_.isUndefined=IE,_.isWeakMap=EE,_.isWeakSet=OE,_.join=Rk,_.kebabCase=yO,_.last=kr,_.lastIndexOf=Bk,_.lowerCase=mO,_.lowerFirst=bO,_.lt=PE,_.lte=TE,_.max=dP,_.maxBy=hP,_.mean=pP,_.meanBy=gP,_.min=yP,_.minBy=mP,_.stubArray=Wd,_.stubFalse=zd,_.stubObject=nP,_.stubString=rP,_.stubTrue=iP,_.multiply=bP,_.nth=xk,_.noConflict=HO,_.noop=Fd,_.now=lu,_.pad=vO,_.padEnd=_O,_.padStart=wO,_.parseInt=SO,_.random=fO,_.reduce=LI,_.reduceRight=KI,_.repeat=AO,_.replace=kO,_.result=tO,_.round=vP,_.runInContext=D,_.sample=DI,_.size=WI,_.snakeCase=IO,_.some=zI,_.sortedIndex=Uk,_.sortedIndexBy=Fk,_.sortedIndexOf=Wk,_.sortedLastIndex=zk,_.sortedLastIndexBy=Vk,_.sortedLastIndexOf=$k,_.startCase=OO,_.startsWith=PO,_.subtract=_P,_.sum=wP,_.sumBy=SP,_.template=TO,_.times=sP,_.toFinite=_i,_.toInteger=De,_.toLength=vm,_.toLower=RO,_.toNumber=Ir,_.toSafeInteger=RE,_.toString=st,_.toUpper=BO,_.trim=xO,_.trimEnd=MO,_.trimStart=CO,_.truncate=LO,_.unescape=KO,_.uniqueId=aP,_.upperCase=NO,_.upperFirst=Kd,_.each=sm,_.eachRight=om,_.first=tm,Ud(_,function(){var o={};return Jr(_,function(c,l){ut.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,vr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),vr(["drop","take"],function(o,c){Ge.prototype[o]=function(l){l=l===t?1:Zt(De(l),0);var p=this.__filtered__&&!c?new Ge(this):this.clone();return p.__filtered__?p.__takeCount__=Sn(l,p.__takeCount__):p.__views__.push({size:Sn(l,_e),type:o+(p.__dir__<0?"Right":"")}),p},Ge.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),vr(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==z||l==Be;Ge.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Oe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),vr(["head","last"],function(o,c){var l="take"+(c?"Right":"");Ge.prototype[o]=function(){return this[l](1).value()[0]}}),vr(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Ge.prototype[o]=function(){return this.__filtered__?new Ge(this):this[l](1)}}),Ge.prototype.compact=function(){return this.filter(Fn)},Ge.prototype.find=function(o){return this.filter(o).head()},Ge.prototype.findLast=function(o){return this.reverse().find(o)},Ge.prototype.invokeMap=Ve(function(o,c){return typeof o=="function"?new Ge(this):this.map(function(l){return ba(l,o,c)})}),Ge.prototype.reject=function(o){return this.filter(du(Oe(o)))},Ge.prototype.slice=function(o,c){o=De(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Ge(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=De(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Ge.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ge.prototype.toArray=function(){return this.take(_e)},Jr(Ge.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,U=P instanceof Ge,ne=B[0],re=U||Le(P),ce=function(je){var He=b.apply(_,Li([je],B));return p&&ge?He[0]:He};re&&l&&typeof ne=="function"&&ne.length!=1&&(U=re=!1);var ge=this.__chain__,we=!!this.__actions__.length,Te=w&&!ge,Ue=U&&!we;if(!w&&re){P=Ue?P:new Ge(this);var Re=o.apply(P,B);return Re.__actions__.push({func:cu,args:[ce],thisArg:t}),new wr(Re,ge)}return Te&&Ue?o.apply(this,B):(Re=this.thru(ce),Te?p?Re.value()[0]:Re.value():Re)})}),vr(["pop","push","shift","sort","splice","unshift"],function(o){var c=Cc[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Le(w)?w:[],b)}return this[l](function(P){return c.apply(Le(P)?P:[],b)})}}),Jr(Ge.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";ut.call(ro,p)||(ro[p]=[]),ro[p].push({name:c,func:l})}}),ro[tu(t,C).name]=[{name:"wrapper",func:t}],Ge.prototype.clone=KA,Ge.prototype.reverse=NA,Ge.prototype.value=DA,_.prototype.at=hI,_.prototype.chain=pI,_.prototype.commit=gI,_.prototype.next=yI,_.prototype.plant=bI,_.prototype.reverse=vI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=_I,_.prototype.first=_.prototype.head,fa&&(_.prototype[fa]=mI),_},eo=gA();hs?((hs.exports=eo)._=eo,Df._=eo):hn._=eo}).call(W)})(gl,gl.exports);var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.OrderCacheService=void 0;const $b=gl.exports,Zr=w0,jb=Gl,Ru=aa;class FN{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,Zr.observable)([]),this.observableData=(0,Zr.makeAutoObservable)(this.observableData),(0,Zr.makeObservable)(this,{buyOrdersCache:Zr.computed,sellOrdersCache:Zr.computed,allOrdersCache:Zr.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,$b.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,Zr.runInAction)(()=>{this.orderChanges.push({eventType:Ru.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===jb.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,Zr.runInAction)(()=>{this.orderChanges.push({eventType:Ru.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,$b.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,Zr.runInAction)(()=>{this.orderChanges.push({eventType:Ru.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,Zr.runInAction)(()=>{this.orderChanges.push({eventType:Ru.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===jb.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}lf.OrderCacheService=FN;var ca={},ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.createTransactionFromInstructions=void 0;const WN=Ri,zN=r=>{const e=new WN.Transaction;return e.add(...r),e};ff.createTransactionFromInstructions=zN;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.TEN_THOUSAND=Yo.ONE_MILLION=void 0;Yo.ONE_MILLION=1e6;Yo.TEN_THOUSAND=1e4;var Wn=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ca,"__esModule",{value:!0});ca.GmClientService=void 0;const $i=Ri,Bu=Np,Si=ss,dh=ff,qb=Lr,po=Gl,Gb=Yo,VN=Qn,$N=bl;class jN{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return Wn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,Si.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/Gb.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return Wn(this,void 0,void 0,function*(){const n=yield(0,Si.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return Wn(this,void 0,void 0,function*(){const i=yield(0,Si.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return Wn(this,void 0,void 0,function*(){const i=yield(0,Si.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return Wn(this,void 0,void 0,function*(){const i=yield(0,Si.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return Wn(this,void 0,void 0,function*(){const s=yield(0,Si.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return Wn(this,void 0,void 0,function*(){const s=yield(0,Si.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return Wn(this,void 0,void 0,function*(){const i=yield(0,Si.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return Wn(this,void 0,void 0,function*(){let h=Bu.createInitializeSellOrderInstruction,d=n,m=i;f===po.OrderSide.Buy&&(h=Bu.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,qb.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:A}=O;return{transaction:(0,dh.createTransactionFromInstructions)(A),signers:M}})}getBnPriceForCurrency(e,t,n,i){return Wn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,VN.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return Wn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,Bu.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,dh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new $i.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new $i.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return Wn(this,void 0,void 0,function*(){const f=new $i.PublicKey(t.id),h=new $i.PublicKey(t.orderMint),d=new $i.PublicKey(t.currencyMint),m=new $i.PublicKey(t.owner),I=t.orderType===po.OrderSide.Buy?n:new $i.PublicKey(t.owner),O=yield(0,qb.getAssociatedTokenAddress)(n,t.orderType===po.OrderSide.Buy?h:d),M=yield this.getRegisteredCurrencies(e,s),{saVault:A}=M.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,$N.getStakingAccount)(a,I,u),{instructions:C,signers:Y}=yield(0,Bu.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new $i.PublicKey(A),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,dh.createTransactionFromInstructions)(C),signers:Y}})}accountItemsToOrders(e,t,n,i){return Wn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?po.OrderSide.Buy:po.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),A=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new po.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:M,ownerAssetTokenAccount:A,ownerCurrencyTokenAccount:R,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return Wn(this,void 0,void 0,function*(){const n=[],i=yield(0,Si.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/Gb.TEN_THOUSAND});return n})}}ca.GmClientService=jN;var kc={},xu=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(kc,"__esModule",{value:!0});kc.GmEventService=void 0;const Ra=pt,hh=ql,ph=aa,qN=ca,GN=Qn,Mu=aa;class HN{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return xu(this,void 0,void 0,function*(){this.idl=(0,GN.getGmLogsIDL)(this.programId),this.provider=new Ra.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Ra.Program(this.idl,this.programId,this.provider,{instruction:new Ra.BorshInstructionCoder(this.idl),accounts:new Ra.BorshAccountsCoder(this.idl),state:null,events:new Ra.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Mu.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Mu.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Mu.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Mu.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return xu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return xu(this,void 0,void 0,function*(){const t=yield new qN.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new hh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?hh.OrderSide.Buy:hh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(ph.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(ph.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(ph.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return xu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}kc.GmEventService=HN;var go=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(cf,"__esModule",{value:!0});cf.GmOrderbookService=void 0;const YN=UN,JN=gl.exports,QN=lf,gh=aa,Hb=ca,Yb=kc;class df{constructor(e,t,n=60){this.gmClientService=new Hb.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new QN.OrderCacheService,this.gmClientService=new Hb.GmClientService,this.gmEventService=new Yb.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return go(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,YN.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},df.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return go(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return go(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return go(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new Yb.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return go(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,JN.pull)(this.eventCallBacks,e)}loadInitialOrders(){return go(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case gh.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case gh.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case gh.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}cf.GmOrderbookService=df;df.HEALTH_CHECK_RATE=5e3;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(cf,r),t(ca,r),t(kc,r)})(P0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Np,r),t(ss,r),t(aa,r),t(Qn,r),t(ql,r),t(P0,r)})(Kp);var C0=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.createAccountTransaction=Ms.createAccountInstruction=void 0;const yl=pt,Yh=Ri,L0=Kp;function XN(r,e,t,n){return C0(this,void 0,void 0,function*(){const i=(0,L0.getGmIDL)(n),s=new yl.AnchorProvider(r,null,null),a=new yl.Program(i,n,s);return Yh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}Ms.createAccountInstruction=XN;function ZN(r,e,t,n){return C0(this,void 0,void 0,function*(){const i=(0,L0.getGmIDL)(n),s=new yl.AnchorProvider(r,null,null),a=new yl.Program(i,n,s),u=new Yh.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(Yh.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}Ms.createAccountTransaction=ZN;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(tn,r),t(Fl,r),t(Ms,r)})(Lr);var eD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.harvestRewardsInstruction=void 0;const tD=pt,nD=Ws,rD=Lr,iD=Jn;function sD({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return eD(this,void 0,void 0,function*(){const a=(0,iD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,rD.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof tD.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,nD.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}Ol.harvestRewardsInstruction=sD;var hf={},oD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(hf,"__esModule",{value:!0});hf.createInitializeStakingInstruction=void 0;const aD=Jn;function cD({connection:r,updateAuthorityAccount:e,programId:t}){return oD(this,void 0,void 0,function*(){const n=(0,aD.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}hf.createInitializeStakingInstruction=cD;var pf={},gf={},Cn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.ESCROW_AUTH=gn.STAKING_VARS=gn.STAKING_ESCROW=gn.STAKING_ACCOUNT=gn.REWARD_AUTH=gn.REWARD_ACCOUNT=gn.REGISTERED_STAKE=void 0;gn.REGISTERED_STAKE=Pe.Buffer.from("registered-stake");gn.REWARD_ACCOUNT=Pe.Buffer.from("reward-account");gn.REWARD_AUTH=Pe.Buffer.from("reward-vault-authority");gn.STAKING_ACCOUNT=Pe.Buffer.from("staking-account");gn.STAKING_ESCROW=Pe.Buffer.from("staking-escrow");gn.STAKING_VARS=Pe.Buffer.from("staking-vars");gn.ESCROW_AUTH=Pe.Buffer.from("escrow-auth");var ua=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.getRewardAuth=Cn.getTokenEscrow=Cn.getStakingVarsAccount=Cn.getStakingAccountsForRegisteredStake=Cn.getStakingAccount=Cn.getRegisteredStake=void 0;const Jb=pt,Ic=Ri,uD=Jn,Ec=gn;function lD(r,e,t,n){return ua(this,void 0,void 0,function*(){return Ic.PublicKey.findProgramAddress([Ec.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Cn.getRegisteredStake=lD;function fD(r,e,t){return ua(this,void 0,void 0,function*(){return Ic.PublicKey.findProgramAddress([Ec.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Cn.getStakingAccount=fD;function dD(r,e,t){return ua(this,void 0,void 0,function*(){const n=new Jb.AnchorProvider(r,null,null),i=(0,uD.getStakingIdl)(e),s=new Jb.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Cn.getStakingAccountsForRegisteredStake=dD;function hD(r){return ua(this,void 0,void 0,function*(){return Ic.PublicKey.findProgramAddress([Ec.STAKING_VARS],r)})}Cn.getStakingVarsAccount=hD;function pD(r,e,t){return ua(this,void 0,void 0,function*(){return Ic.PublicKey.findProgramAddress([Ec.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Cn.getTokenEscrow=pD;function gD(r,e){return ua(this,void 0,void 0,function*(){return Ic.PublicKey.findProgramAddress([Ec.REWARD_AUTH,e.toBuffer()],r)})}Cn.getRewardAuth=gD;var Xi={},tg=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.getStakingVarsAccountInfo=Xi.getStakingAccountInfo=Xi.getRegisteredStakeAccountInfo=void 0;const ng=Rs,yD=Cn;function mD(r,e,t){return tg(this,void 0,void 0,function*(){return yield(0,ng.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}Xi.getRegisteredStakeAccountInfo=mD;function bD(r,e,t){return tg(this,void 0,void 0,function*(){return yield(0,ng.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}Xi.getStakingAccountInfo=bD;function vD(r,e){return tg(this,void 0,void 0,function*(){const t=(0,ng.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,yD.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}Xi.getStakingVarsAccountInfo=vD;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Cn,r),t(Xi,r),t(gn,r)})(gf);var _D=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(pf,"__esModule",{value:!0});pf.registerStakeInstruction=void 0;const Qb=pt,wD=Ws,SD=gf,AD=Jn;function kD({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return _D(this,void 0,void 0,function*(){const u=(0,AD.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,SD.getRegisteredStake)(a,e,n,i),d=yield(0,wD.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new Qb.BN(t),new Qb.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}pf.registerStakeInstruction=kD;var yf={},ID=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(yf,"__esModule",{value:!0});yf.createSettleStakingAccountInstruction=void 0;const ED=Jn;function OD({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return ID(this,void 0,void 0,function*(){const a=(0,ED.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}yf.createSettleStakingAccountInstruction=OD;var mf={},PD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(mf,"__esModule",{value:!0});mf.stakeTokensInstruction=void 0;const TD=Ws,RD=Jn;function BD({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return PD(this,void 0,void 0,function*(){const f=(0,RD.getStakingProgram)({connection:r,programId:u}),h=yield(0,TD.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}mf.stakeTokensInstruction=BD;var bf={},xD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(bf,"__esModule",{value:!0});bf.unstakeTokensInstruction=void 0;const MD=pt,CD=Ws,LD=Lr,KD=gf,ND=Jn;function DD({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return xD(this,void 0,void 0,function*(){const s=(0,ND.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,KD.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,LD.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof MD.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,CD.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}bf.unstakeTokensInstruction=DD;var vf={},UD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(vf,"__esModule",{value:!0});vf.updateCooldownPeriodInstruction=void 0;const FD=pt,WD=Jn;function zD({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return UD(this,void 0,void 0,function*(){const s=(0,WD.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new FD.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}vf.updateCooldownPeriodInstruction=zD;var _f={},VD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_f,"__esModule",{value:!0});_f.updateRewardMultiplierInstruction=void 0;const $D=pt,jD=Jn;function qD({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return VD(this,void 0,void 0,function*(){const a=(0,jD.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new $D.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}_f.updateRewardMultiplierInstruction=qD;var wf={},GD=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(wf,"__esModule",{value:!0});wf.withdrawTokensInstruction=void 0;const HD=pt,YD=Ws,JD=Jn,QD=Lr;function XD({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return GD(this,void 0,void 0,function*(){const u=(0,JD.getStakingProgram)({connection:r,programId:a}),f=yield(0,YD.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,QD.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof HD.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}wf.withdrawTokensInstruction=XD;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(yv,r),t(vl,r),t(El,r),t(Ol,r),t(hf,r),t(pf,r),t(yf,r),t(mf,r),t(bf,r),t(vf,r),t(_f,r),t(wf,r)})(gv);var K0={},N0={};Object.defineProperty(N0,"__esModule",{value:!0});(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(uc,r),t(N0,r)})(K0);(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(gv,r),t(gf,r),t(K0,r),t(Jn,r)})(bl);var D0={};(function(r){var e=W&&W.__awaiter||function(m,I,O,M){function A(R){return R instanceof O?R:new O(function(C){C(R)})}return new(O||(O=Promise))(function(R,C){function Y(de){try{oe(M.next(de))}catch(E){C(E)}}function ae(de){try{oe(M.throw(de))}catch(E){C(E)}}function oe(de){de.done?R(de.value):A(de.value).then(Y,ae)}oe((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=pt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Pe.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,M){return e(this,void 0,void 0,function*(){const[A,R]=yield a(O,M),C=s(M),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:A,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O),R=new t.Program(A,O,M),[C]=yield a(I,O);return yield R.account.playerFactionData.fetch(C)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),A=s(O);return(yield new t.Program(A,O,M).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(D0);var U0={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.gumDropIdl=void 0;Sf.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=W&&W.__createBinding||(Object.create?function(A,R,C,Y){Y===void 0&&(Y=C);var ae=Object.getOwnPropertyDescriptor(R,C);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(A,Y,ae)}:function(A,R,C,Y){Y===void 0&&(Y=C),A[Y]=R[C]}),t=W&&W.__setModuleDefault||(Object.create?function(A,R){Object.defineProperty(A,"default",{enumerable:!0,value:R})}:function(A,R){A.default=R}),n=W&&W.__importStar||function(A){if(A&&A.__esModule)return A;var R={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(R,A,C);return t(R,A),R},i=W&&W.__awaiter||function(A,R,C,Y){function ae(oe){return oe instanceof C?oe:new C(function(de){de(oe)})}return new(C||(C=Promise))(function(oe,de){function E(J){try{V(Y.next(J))}catch(K){de(K)}}function N(J){try{V(Y.throw(J))}catch(K){de(K)}}function V(J){J.done?oe(J.value):ae(J.value).then(E,N)}V((Y=Y.apply(A,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=pt,a=fc,u=n($e),f=tn,h=Sf,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(A,R,C=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Pe.Buffer.from("ClaimStatus"),A.toArrayLike(Pe.Buffer,"le",8),R.toBuffer()],C)});r.getClaimStatusKey=m;const I=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,C,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(A,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(A,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(V=>(0,r.getClaimStatusKey)(V,C,Y)),E=(yield Promise.all(de)).map(V=>V[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const M=A=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:C,playerPublicKey:Y,programId:ae}=A,oe=new URLSearchParams(C.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),V=oe.get("index"),J=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!V||!J||!K)throw new Error("Invalid claim");const j=J===""?[]:J.split(",").map(yr=>{const Ft=Pe.Buffer.from(u.decode(yr));if(Ft.length!==32)throw new Error("Invalid proof hash length");return Ft}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),z=yield R.getAccountInfo(T);if(z===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(z.data),Be=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ie=yield(0,f.getAssociatedTokenAddress)(ye,Be),$t=yield R.getParsedTokenAccountsByOwner(ye,{mint:Be}),jt=new s.BN(V),_e=new s.BN(N),[ze,Qt]=yield(0,r.getClaimStatusKey)(jt,te,ae),cn=new s.AnchorProvider(R,null,null),kt=new s.Program(h.gumDropIdl,ae,cn),lt=[];return $t.value.length===0&&lt.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Be,Ie,ye,Y)),lt.push(kt.instruction.claim(Qt,jt,_e,Y,j,{accounts:{distributor:te,claimStatus:ze,from:T,to:Ie,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),lt});r.claimTokenInstructions=M})(U0);var be={},Af={};Object.defineProperty(Af,"__esModule",{value:!0});Af.baseIdl=void 0;Af.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.scoreLogBaseIdl=void 0;kf.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var it=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=pt,gr=fc,F0=Ri,ZD=ja,e2=Af,t2=kf,Ts=Lr;function Bt(r){const e=e2.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Bt;function Pn(r){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=Pn;function bn(r,e){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=bn;function Gn(r,e,t,n){return it(this,void 0,void 0,function*(){const i=[Pe.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=Gn;function Hr(r,e,t){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=Hr;function Tn(r,e,t){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=Tn;function n2(r,e){return it(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Bt(e),i=new ue.Program(n,e,t),[s]=yield Pn(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=n2;function r2(r,e,t,n){return it(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Bt(e),a=new ue.Program(s,e,i),[u]=yield Tn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=r2;function i2(r,e,t){return it(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(t2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=i2;function s2(r,e,t){return it(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Bt(e),s=new ue.Program(i,e,n),[a]=yield bn(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=s2;function If(r){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=If;function Ef(r){return it(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=Ef;function o2(r,e){return it(this,void 0,void 0,function*(){const t=Bt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=o2;function a2(r,e){return it(this,void 0,void 0,function*(){const t=Bt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=a2;function c2(r,e,t){return it(this,void 0,void 0,function*(){const n=Bt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield Tn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=c2;function u2(r,e,t,n,i,s,a,u){return it(this,void 0,void 0,function*(){const f=Bt(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield If(u),[O,M]=yield Ef(u),[A,R]=yield Pn(u);return yield d.instruction.processInitialize(R,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:A,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:F0.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=u2;function l2(r,e,t,n,i,s,a,u,f,h,d,m,I){return it(this,void 0,void 0,function*(){const O=Bt(I),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,I,M),[R,C]=yield bn(I,t),[Y,ae]=yield Pn(I);return yield A.instruction.processRegisterShip(ae,C,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:F0.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=l2;function f2(r,e,t,n){return it(this,void 0,void 0,function*(){const i=Bt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield bn(n,t),[h,d]=yield Pn(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=f2;function d2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const s=Bt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield bn(i,t),[d,m]=yield Pn(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=d2;function h2(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return it(this,void 0,void 0,function*(){const[u,f]=yield Hr(s,n,e),[h,d]=yield Gn(s,n,null,e),[m,I]=yield Tn(s,n,e),[O,M]=yield bn(s,n),[A]=yield(0,ZD.getPlayerFactionPDA)(e,a),R=Bt(s),C=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,C).instruction.processInitialDeposit(I,M,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:A,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=h2;function p2(r,e,t,n,i,s){return it(this,void 0,void 0,function*(){const[a,u]=yield Hr(s,n,e),[f,h]=yield Gn(s,n,null,e),[d,m]=yield Tn(s,n,e),[I,O]=yield bn(s,n),M=Bt(s),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,s,A).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=p2;function g2(r,e,t,n,i,s,a,u){return it(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=g2;function y2(r,e,t,n,i,s,a,u){return it(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=y2;function m2(r,e,t,n,i,s,a,u){return it(this,void 0,void 0,function*(){const[f,h]=yield Hr(u,i,t),[d,m]=yield Gn(u,i,s,t),[I,O]=yield Tn(u,i,t),[M,A]=yield bn(u,i),[R,C]=yield Pn(u),Y=Bt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,C,A,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=m2;function b2(r,e,t,n,i,s,a,u){return it(this,void 0,void 0,function*(){const[f,h]=yield Tn(u,i,t),[d,m]=yield bn(u,i),[I,O]=yield Pn(u),M=Bt(u),A=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,u,A).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=b2;function v2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const[s,a]=yield Tn(i,n,e),[u,f]=yield bn(i,n),[h,d]=yield Pn(i),m=Bt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=v2;function _2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const[s,a]=yield Tn(i,n,e),[u,f]=yield bn(i,n),[h,d]=yield If(i),[m,I]=yield Ef(i),O=Bt(i),M=new ue.AnchorProvider(r,null,null),A=new ue.Program(O,i,M),R={signers:[],instructions:[]};let C;const Y=yield(0,Ts.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(C=ae.publicKey,R.signers.push(ae)):C=ae;const oe=yield A.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=_2;function w2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ts.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFuel(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=w2;function S2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ts.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFood(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=S2;function A2(r,e,t,n,i){return it(this,void 0,void 0,function*(){const[s,a]=yield Hr(i,n,e),[u,f]=yield Gn(i,n,t,e),[h,d]=yield Tn(i,n,e),[m,I]=yield bn(i,n),[O,M]=yield Pn(i),A=Bt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(A,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ts.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawArms(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:gr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=A2;function k2(r,e,t,n,i,s){return it(this,void 0,void 0,function*(){const[a,u]=yield Hr(s,t,e),[f,h]=yield Gn(s,t,null,e),[d,m]=yield Tn(s,t,e),[I,O]=yield bn(s,t),[M,A]=yield Pn(s),[R,C]=yield If(s),[Y,ae]=yield Ef(s),oe={signers:[],instructions:[]},de=Bt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let V;const J=yield(0,Ts.getTokenAccount)(r,e,n),K=J.tokenAccount;"createInstruction"in J&&oe.instructions.push(...J.createInstruction),K instanceof ue.web3.Keypair?(V=K.publicKey,oe.signers.push(K)):V=K;let j;const te=yield(0,Ts.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let z;const X=yield(0,Ts.getTokenAccount)(r,e,i),Be=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Be instanceof ue.web3.Keypair?(z=Be.publicKey,oe.signers.push(Be)):z=Be;const ye=yield N.instruction.processWithdrawShips(m,A,O,u,h,ae,C,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:V,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:z,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=k2;function I2(r,e,t,n,i,s,a){return it(this,void 0,void 0,function*(){const[u,f]=yield Hr(a,t,e),[h,d]=yield Gn(a,t,null,e),[m,I]=yield Gn(a,t,n,e),[O,M]=yield Gn(a,t,i,e),[A,R]=yield Gn(a,t,s,e),[C,Y]=yield Pn(a),[ae,oe]=yield Tn(a,t,e),de=Bt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,M,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:A,escrowAuthority:u,tokenProgram:gr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=I2;var W0={};Object.defineProperty(W0,"__esModule",{value:!0});var Ht={},fs=W&&W.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},E2=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.sendTokens=Ht.confirmTokenBalance=Ht.createMint=Ht.mintTokens=Ht.createAssociatedTokenAccountInstruction=Ht.createRequestUnitsInstruction=Ht.Numberu32=Ht.createATokenAccount=Ht.getAtaForMint=void 0;const Cr=pt,lr=fc,O2=Lr,Xb=Gu.exports,Zb=E2(nv.exports);function z0(r,e){return fs(this,void 0,void 0,function*(){return Cr.web3.PublicKey.findProgramAddress([e.toBuffer(),lr.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],lr.ASSOCIATED_TOKEN_PROGRAM_ID)})}Ht.getAtaForMint=z0;function P2(r,e,t,n){return fs(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield z0(e,n),s=new Cr.web3.Transaction,a=yield $0(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Ht.createATokenAccount=P2;class V0 extends Zb.default{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===4)return t;const n=Pe.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new Zb.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Ht.Numberu32=V0;function T2(r){return fs(this,void 0,void 0,function*(){const e=new V0(1e6),t=Pe.Buffer.from([0]),n=e.toBuffer();return new Cr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Cr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Pe.Buffer.concat([t,n])})})}Ht.createRequestUnitsInstruction=T2;function $0(r,e,t,n){return fs(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Cr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:lr.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Cr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Cr.web3.TransactionInstruction({keys:i,programId:lr.ASSOCIATED_TOKEN_PROGRAM_ID,data:Pe.Buffer.from([])})})}Ht.createAssociatedTokenAccountInstruction=$0;function R2(r,e,t,n,i){return fs(this,void 0,void 0,function*(){const s=new Cr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(lr.Token.createMintToInstruction(lr.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Ht.mintTokens=R2;function B2(r,e,t,n){return fs(this,void 0,void 0,function*(){const i=Cr.web3.Keypair.generate(),s=new Cr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(lr.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Cr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:lr.MintLayout.span,programId:lr.TOKEN_PROGRAM_ID});s.add(u);const f=lr.Token.createInitMintInstruction(lr.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Ht.createMint=B2;function x2(r,e,t,n){return fs(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,Xb.strict)(i===null),i!==null){const s=(0,O2.byteArrayToLong)(i.data.slice(64,72));(0,Xb.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Ht.confirmTokenBalance=x2;function M2(r,e,t,n){return fs(this,void 0,void 0,function*(){const i=new Cr.web3.Transaction;return i.add(lr.Token.createTransferInstruction(lr.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Ht.sendTokens=M2;(function(r){var e=W&&W.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=W&&W.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(bl,r),t(D0,r),t(U0,r),t(Kp,r),t(be,r),t(W0,r),t(Ht,r),t(Ms,r),t(Lr,r)})(ja);const C2={class:"col text-h6"},L2={class:"text-overline"},yh="ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc",ev="ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",tv=Xh({__name:"AccountTemplate",props:["count","function_name","publicKey"],setup(r){const e=r,t=Cu();async function n(){switch(e.function_name){case"getStakingAccount":t.value=await ja.getStakingAccount(new St(yh),new St(e.publicKey),new St("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E"));break;case"getRegisteredStake":t.value=await ja.getRegisteredStake(new St(yh),new St(yh),new St(ev),new St(ev));break;default:t.value="No function called";break}}return RP(()=>e.count,async()=>{await n()}),(i,s)=>(Zh(),ep(hv,{class:"row q-pa-md"},{default:tp(()=>[$a("div",C2,qu(r.function_name)+":",1),$a("div",L2,qu(t.value),1)]),_:1}))}}),K2={class:"col text-h6"},N2={class:"text-overline"},D2=Xh({__name:"AccountStatic",props:["count","function_name","data"],setup(r){return(e,t)=>(Zh(),ep(hv,{class:"row q-pa-md"},{default:tp(()=>[$a("div",K2,qu(r.function_name)+":",1),$a("div",N2,qu(r.data),1)]),_:1}))}}),U2={class:"row"},Y2=Xh({__name:"AccountsPage",setup(r){const e=Cu(0);Cu();const t=Cu("none");BP(()=>{var i;t.value=((i=xP().publicKey.value)==null?void 0:i.toString())??"none"});const n=()=>{e.value++};return(i,s)=>(Zh(),ep(CP,{class:"col items-center justify-evenly q-mx-sm q-pt-sm q-gutter-y-md"},{default:tp(()=>[$a("div",U2,[Ia(AP,{class:"col",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),label:"Wallet Address"},null,8,["modelValue"]),Ia(MP,{color:"primary",icon:"send",onClick:n})]),Ia(D2,{function_name:"getRegisteredStake(Atlas)",data:"J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E"}),Ia(tv,{count:e.value,function_name:"getRegisteredStake","public-key":t.value},null,8,["count","public-key"]),Ia(tv,{count:e.value,function_name:"getStakingAccount","public-key":t.value},null,8,["count","public-key"])]),_:1}))}});export{Y2 as default};
