import{a as nh,Q as LP}from"./QTabs.d5beeddf.js";import{Q as KP}from"./QPage.e6f9fad7.js";import{Q as NP}from"./QCardSection.3eeb44cb.js";import{Q as DP}from"./QCard.08d4d8dd.js";import{bX as z,dD as pv,dE as Vm,cZ as Pe,d7 as gv,dF as ee,dG as $e,dH as Rh,cQ as lp,d1 as yv,P as Je,db as fp,dI as FP,dJ as mv,dK as bv,dk as Mi,dL as vv,dM as rl,dN as UP,dO as zP,bW as gc,dP as et,c$ as ie,dy as se,dz as Bt,d0 as ke,dQ as Pt,dR as yr,dS as pi,dT as U,dU as oa,dV as aa,dW as xe,dX as gi,dY as x,dZ as A,d_ as H,d$ as G,e0 as le,e1 as Qt,e2 as Rl,e3 as yt,e4 as he,dB as Ut,e5 as yc,d8 as Ye,e6 as il,e7 as _v,e8 as Qr,e9 as wv,ea as Av,eb as Sv,d9 as kv,da as dp,ec as $m,ed as WP,ee as VP,ef as $P,eg as jP,d2 as Bh,co as Kn,c_ as qP,dj as GP,eh as HP,ei as YP,cV as tc,cW as JP,au as Iv,aX as QP,bs as XP,b1 as qu,ai as Ev,bx as sl,as as Ps,al as it,a1 as bo,V as Qi,J as ZP,ak as jm,cm as eT}from"./index.2f67b66f.js";import{t as tT,v as nT}from"./token.07e14955.js";import{s as Gs}from"./sha256.6921019d.js";import{_ as La,a as rT}from"./Amount.bcabf91e.js";import{h as iT}from"./handle_confirmation.c273542b.js";import{g as Ka}from"./extensionType.2bba6591.js";import"./uid.42677368.js";import"./rtl.115a30e7.js";import"./errors.9f32686e.js";var Ln={},Bl={},Ov={},Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});var xl={},er={},Ns={},hp={exports:{}};const sT=r=>{let e=!1,t=!1,n=!1;for(let i=0;i<r.length;i++){const s=r[i];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,i)+"-"+r.slice(i),e=!1,n=t,t=!0,i++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,i-1)+"-"+r.slice(i-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},Tv=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=i=>e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i;return Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=sT(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(i,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,i=>i.toUpperCase()),t(r))};hp.exports=Tv;hp.exports.default=Tv;var bn=hp.exports,Ne={};(function(r){var e=z&&z.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=Vm,n=gv,i=e(pv.exports);var s=Vm;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends t.Layout{constructor(j,te,T){super(j,T),this.blob=t.blob(j),this.signed=te}decode(j,te=0){const T=new i.default(this.blob.decode(j,te),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(j,te,T=0){return this.signed&&(j=j.toTwos(this.span*8)),this.blob.encode(j.toArrayLike(Pe.Buffer,"le",this.span),te,T)}}function u(K){return new a(8,!1,K)}r.u64=u;function f(K){return new a(8,!0,K)}r.i64=f;function h(K){return new a(16,!1,K)}r.u128=h;function d(K){return new a(16,!0,K)}r.i128=d;class m extends t.Layout{constructor(j,te,T,W){super(j.span,W),this.layout=j,this.decoder=te,this.encoder=T}decode(j,te){return this.decoder(this.layout.decode(j,te))}encode(j,te,T){return this.layout.encode(this.encoder(j),te,T)}getSpan(j,te){return this.layout.getSpan(j,te)}}function I(K){return new m(t.blob(32),j=>new n.PublicKey(j),j=>j.toBuffer(),K)}r.publicKey=I;class O extends t.Layout{constructor(j,te){super(-1,te),this.layout=j,this.discriminator=t.u8()}encode(j,te,T=0){return j==null?this.discriminator.encode(0,te,T):(this.discriminator.encode(1,te,T),this.layout.encode(j,te,T+1)+1)}decode(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return null;if(T===1)return this.layout.decode(j,te+1);throw new Error("Invalid option "+this.property)}getSpan(j,te=0){const T=this.discriminator.decode(j,te);if(T===0)return 1;if(T===1)return this.layout.getSpan(j,te+1)+1;throw new Error("Invalid option "+this.property)}}function M(K,j){return new O(K,j)}r.option=M;function S(K){return new m(t.u8(),R,C,K)}r.bool=S;function R(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function C(K){return K?1:0}function Y(K,j){const te=t.u32("length"),T=t.struct([te,t.seq(K,t.offset(te,-te.span),"values")]);return new m(T,({values:W})=>W,W=>({values:W}),j)}r.vec=Y;function ae(K,j,te){const T=t.struct([u("tag"),j.replicate("data")]);function W({tag:X,data:Be}){if(!X.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+X.toString("hex"));return Be}return new m(T,W,X=>({tag:K,data:X}),te)}r.tagged=ae;function oe(K){const j=t.u32("length"),te=t.struct([j,t.blob(t.offset(j,-j.span),"data")]);return new m(te,({data:T})=>T,T=>({data:T}),K)}r.vecU8=oe;function de(K){return new m(oe(),j=>j.toString("utf-8"),j=>Pe.Buffer.from(j,"utf-8"),K)}r.str=de;function E(K,j,te){const T=t.union(te??t.u8(),j);return K.forEach((W,X)=>T.addVariant(X,W,W.property)),T}r.rustEnum=E;function N(K,j,te){const T=t.struct([t.seq(K,j,"values")]);return new m(T,({values:W})=>W,W=>({values:W}),te)}r.array=N;class V extends t.Layout{constructor(j,te,T){super(j.span+te.span,T),this.keyLayout=j,this.valueLayout=te}decode(j,te){te=te||0;const T=this.keyLayout.decode(j,te),W=this.valueLayout.decode(j,te+this.keyLayout.getSpan(j,te));return[T,W]}encode(j,te,T){T=T||0;const W=this.keyLayout.encode(j[0],te,T),X=this.valueLayout.encode(j[1],te,T+W);return W+X}getSpan(j,te){return this.keyLayout.getSpan(j,te)+this.valueLayout.getSpan(j,te)}}function J(K,j,te){const T=t.u32("length"),W=t.struct([T,t.seq(new V(K,j),t.offset(T,-T.span),"values")]);return new m(W,({values:X})=>new Map(X),X=>({values:Array.from(X.entries())}),te)}r.map=J})(Ne);var oT=Object.freeze({__proto__:null,encode:function(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")},decode:function(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2==1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?ee.Buffer.from([]):ee.Buffer.from(e.map(t=>parseInt(t,16)))}});function Rv(r){return new TextDecoder("utf-8").decode(r)}function Bv(r){return new TextEncoder().encode(r)}var aT=Object.freeze({__proto__:null,decode:Rv,encode:Bv});function xv(r){return $e.encode(r)}var cT=Object.freeze({__proto__:null,encode:xv,decode:function(r){return $e.decode(r)}});function Mv(r){return ee.Buffer.from(mv(r))}var uT=Object.freeze({__proto__:null,encode:function(r){return Rh(r)},decode:Mv}),lT=Object.freeze({__proto__:null,hex:oT,utf8:aT,bs58:cT,base64:uT});function pp(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function Cv(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function Ml(r,e={}){r.forEach(t=>{if("accounts"in t)Ml(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function jr(r){return r instanceof Je?r:new Je(r)}class fT extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:a}=e;super(a.length===0?i:"At path: "+a.join(".")+" -- "+i),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Lo(r){return typeof r=="object"&&r!=null}function os(r){return typeof r=="string"?JSON.stringify(r):""+r}function dT(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:u,message:f="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+os(n)+"`"}=r;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*qm(r,e,t,n){var i;Lo(i=r)&&typeof i[Symbol.iterator]=="function"||(r=[r]);for(const s of r){const a=dT(s,e,t,n);a&&(yield a)}}function*gp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,u={path:n,branch:i};if(s&&(r=e.coercer(r,u),a&&e.type!=="type"&&Lo(e.schema)&&Lo(r)&&!Array.isArray(r)))for(const h in r)e.schema[h]===void 0&&delete r[h];let f=!0;for(const h of e.validator(r,u))f=!1,yield[h,void 0];for(let[h,d,m]of e.entries(r,u)){const I=gp(d,m,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,d],coerce:s,mask:a});for(const O of I)O[0]?(f=!1,yield[O[0],void 0]):s&&(d=O[1],h===void 0?r=d:r instanceof Map?r.set(h,d):r instanceof Set?r.add(d):Lo(r)&&(r[h]=d))}if(f)for(const h of e.refiner(r,u))f=!1,yield[h,void 0];f&&(yield[void 0,r])}class ls{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=a,this.validator=i?(f,h)=>qm(i(f,h),h,this,f):()=>[],this.refiner=s?(f,h)=>qm(s(f,h),h,this,f):()=>[]}assert(e){return function(t,n){const i=ja(t,n);if(i[0])throw i[0]}(e,this)}create(e){return yp(e,this)}is(e){return Lv(e,this)}mask(e){return function(t,n){const i=ja(t,n,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(e,this)}validate(e,t={}){return ja(e,this,t)}}function yp(r,e){const t=ja(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Lv(r,e){return!ja(r,e)[0]}function ja(r,e,t={}){const n=gp(r,e,t),i=function(s){const{done:a,value:u}=s.next();return a?void 0:u}(n);return i[0]?[new fT(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function mc(r,e){return new ls({type:r,schema:null,validator:e})}function rh(r){return new ls({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+os(e)})}function Gm(r){const e=os(r),t=typeof r;return new ls({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator:n=>n===r||"Expected the literal `"+e+"`, but received: "+os(n)})}function Eu(r){return new ls({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Ou(){return mc("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+os(r))}function Gu(r){return new ls({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Rs(){return mc("string",r=>typeof r=="string"||"Expected a string, but received: "+os(r))}function Xi(r){const e=Object.keys(r);return new ls({type:"type",schema:r,*entries(t){if(Lo(t))for(const n of e)yield[n,t[n],r[n]]},validator:t=>Lo(t)||"Expected an object, but received: "+os(t)})}function Kv(r){const e=r.map(t=>t.type).join(" | ");return new ls({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...a]=gp(t,s,n),[u]=a;if(!u[0])return[];for(const[f]of a)f&&i.push(f)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+os(t),...i]}})}function Nv(){return mc("unknown",()=>!0)}async function Dv(r,e,t){if(e.length<=99)return await Hm(r,e,t);{const n=function(i,s){return Array.apply(0,new Array(Math.ceil(i.length/s))).map((a,u)=>i.slice(u*s,(u+1)*s))}(e,99);return(await Promise.all(n.map(i=>Hm(r,i,t)))).flat()}}async function Hm(r,e,t){const n=t??r.commitment;return(await r.getMultipleAccountsInfo(e,n)).map((i,s)=>i===null?null:{publicKey:e[s],account:i})}async function Fv(r,e,t,n,i){t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),f={encoding:"base64",commitment:n??r.commitment};if(i){const m=(Array.isArray(i)?i:s.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:m}}t&&(f.sigVerify=!0);const h=[u,f],d=yp(await r._rpcRequest("simulateTransaction",h),gT);if("error"in d){let m;if("data"in d.error&&(m=d.error.data.logs,m&&Array.isArray(m))){const I=`
    `,O=I+m.join(I);console.error(d.error.message,O)}throw new bv("failed to simulate transaction: "+d.error.message,m)}return d.result}function hT(r){return function(e,t,n){return new ls({...e,coercer:(i,s)=>Lv(i,t)?e.coercer(n(i,s),s):e.coercer(i,s)})}(Uv(r),pT,e=>"error"in e?e:{...e,result:yp(e.result,r)})}const pT=Uv(Nv());function Uv(r){return Kv([Xi({jsonrpc:Gm("2.0"),id:Rs(),result:r}),Xi({jsonrpc:Gm("2.0"),id:Rs(),error:Xi({code:Nv(),message:Rs(),data:Gu(mc("any",()=>!0))})})])}const gT=(Ym=Xi({err:Eu(Kv([Xi({}),Rs()])),logs:Eu(rh(Rs())),accounts:Gu(Eu(rh(Eu(Xi({executable:mc("boolean",r=>typeof r=="boolean"),owner:Rs(),lamports:Ou(),data:rh(Rs()),rentEpoch:Gu(Ou())}))))),unitsConsumed:Gu(Ou())}),hT(Xi({context:Xi({slot:Ou()}),value:Ym})));var Ym,yT=Object.freeze({__proto__:null,invoke:async function(r,e,t,n){r=jr(r),n||(n=Wo());const i=new lp;if(i.add(new yv({programId:r,keys:e??[],data:t})),n.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:Dv,simulateTransaction:Fv});class zv{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i;n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(t??[]).forEach(a=>{e.partialSign(a)});const s=e.serialize();try{return await Jm(this.connection,s,n)}catch(a){if(a instanceof Wv){const u=await this.connection.getTransaction(xv(e.signature),{commitment:"confirmed"});if(u){const f=(i=u.meta)===null||i===void 0?void 0:i.logMessages;throw f?new bv(a.message,f):a}throw a}throw a}}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let i=e.map(u=>{var f;let h=u.tx,d=(f=u.signers)!==null&&f!==void 0?f:[];return h.feePayer=this.wallet.publicKey,h.recentBlockhash=n.blockhash,d.forEach(m=>{h.partialSign(m)}),h});const s=await this.wallet.signAllTransactions(i),a=[];for(let u=0;u<i.length;u+=1){const f=s[u].serialize();a.push(await Jm(this.connection,f,t))}return a}async simulate(e,t,n,i){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const s=await Fv(this.connection,e,t,n,i);if(s.value.err)throw new mT(s.value);return s.value}}class mT extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Jm(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await r.sendRawTransaction(e,n),s=(await r.confirmTransaction(i,t&&t.commitment)).value;if(s.err)throw new Wv(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class Wv extends Error{constructor(e){super(e)}}function bT(r){xh=r}function Wo(){return xh===null?zv.local():xh}let xh=null;const vT=new Set(["anchor-deprecated-state","debug-logs"]),Vv=new Map;function Cl(r){return Vv.get(r)!==void 0}var _T=Object.freeze({__proto__:null,set:function(r){if(!vT.has(r))throw new Error("Invalid feature");Vv.set(r,!0)},isSet:Cl});class nc extends Error{constructor(e){super(e),this.name="IdlError"}}class ca{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let a=0;a<e.length;a++){if(i.exec(e[a])){s.pop();continue}const u=(t=n.exec(e[a]))===null||t===void 0?void 0:t[1];u&&s.push(new Je(u))}return new ca(s)}}class Ko extends Error{constructor(e,t,n,i,s,a){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:s},this._programErrorStack=ca.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(h=>h.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,d=h.exec(e[t+2])[1],m=h.exec(e[t+4])[1];s=[new Je(d),new Je(m)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,d=h.exec(e[t+1])[2],m=h.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[d,m]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),f=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(a){const[h,d,m]=a.slice(1,4),I={code:h,number:parseInt(d)};return new Ko(I,m,i,e,void 0,s)}if(u){const[h,d,m,I,O]=u.slice(1,6),M={code:m,number:parseInt(I)},S={file:h,line:parseInt(d)};return new Ko(M,O,i,e,S,s)}if(f){const[h,d,m,I]=f.slice(1,5),O=h,M={code:d,number:parseInt(m)};return new Ko(M,I,i,e,O,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class rc extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=ca.parse(n))}static parse(e,t){const n=e.toString();let i,s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;i=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;i=u[0].match(/([0-9]+)/g)[0]}try{s=parseInt(i)}catch{return null}let a=t.get(s);return a!==void 0?new rc(s,a,e.logs):(a=$v.get(s),a!==void 0?new rc(s,a,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function mp(r,e){Cl("debug-logs")&&console.log("Translating error:",r);const t=Ko.parse(r.logs);if(t)return t;const n=rc.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,a){return a==="programErrorStack"?s.programErrorStack.stack:a==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=ca.parse(r.logs),new Proxy(r,i)}return r}const Ee={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},$v=new Map([[Ee.InstructionMissing,"8 byte instruction identifier not provided"],[Ee.InstructionFallbackNotFound,"Fallback functions are not supported"],[Ee.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Ee.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Ee.IdlInstructionStub,"The program was compiled without idl instructions"],[Ee.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Ee.ConstraintMut,"A mut constraint was violated"],[Ee.ConstraintHasOne,"A has_one constraint was violated"],[Ee.ConstraintSigner,"A signer constraint was violated"],[Ee.ConstraintRaw,"A raw constraint was violated"],[Ee.ConstraintOwner,"An owner constraint was violated"],[Ee.ConstraintRentExempt,"A rent exemption constraint was violated"],[Ee.ConstraintSeeds,"A seeds constraint was violated"],[Ee.ConstraintExecutable,"An executable constraint was violated"],[Ee.ConstraintState,"A state constraint was violated"],[Ee.ConstraintAssociated,"An associated constraint was violated"],[Ee.ConstraintAssociatedInit,"An associated init constraint was violated"],[Ee.ConstraintClose,"A close constraint was violated"],[Ee.ConstraintAddress,"An address constraint was violated"],[Ee.ConstraintZero,"Expected zero account discriminant"],[Ee.ConstraintTokenMint,"A token mint constraint was violated"],[Ee.ConstraintTokenOwner,"A token owner constraint was violated"],[Ee.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Ee.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Ee.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Ee.ConstraintSpace,"A space constraint was violated"],[Ee.RequireViolated,"A require expression was violated"],[Ee.RequireEqViolated,"A require_eq expression was violated"],[Ee.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Ee.RequireNeqViolated,"A require_neq expression was violated"],[Ee.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Ee.RequireGtViolated,"A require_gt expression was violated"],[Ee.RequireGteViolated,"A require_gte expression was violated"],[Ee.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Ee.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[Ee.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[Ee.AccountDidNotDeserialize,"Failed to deserialize the account"],[Ee.AccountDidNotSerialize,"Failed to serialize the account"],[Ee.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Ee.AccountNotMutable,"The given account is not mutable"],[Ee.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Ee.InvalidProgramId,"Program ID was not as expected"],[Ee.InvalidProgramExecutable,"Program account is not executable"],[Ee.AccountNotSigner,"The given account did not sign"],[Ee.AccountNotSystemOwned,"The given account is not owned by the system program"],[Ee.AccountNotInitialized,"The program expected this account to be already initialized"],[Ee.AccountNotProgramData,"The given account is not a program data account"],[Ee.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Ee.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Ee.StateInvalidAddress,"The given state account does not have the correct address"],[Ee.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Ee.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ol=function(){return ol=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},ol.apply(this,arguments)};function wT(r){return r.toLowerCase()}var AT=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ST=/[^A-Z0-9]+/gi;function Qm(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,i){return n.replace(i,t)},r)}function kT(r,e){return e===void 0&&(e={}),function(t,n){n===void 0&&(n={});for(var i=n.splitRegexp,s=i===void 0?AT:i,a=n.stripRegexp,u=a===void 0?ST:a,f=n.transform,h=f===void 0?wT:f,d=n.delimiter,m=d===void 0?" ":d,I=Qm(Qm(t,s,"$1\0$2"),u,"\0"),O=0,M=I.length;I.charAt(O)==="\0";)O++;for(;I.charAt(M-1)==="\0";)M--;return I.slice(O,M).split("\0").map(h).join(m)}(r,ol({delimiter:"."},e))}class hr{static fieldLayout(e,t){const n=e.name!==void 0?bn(e.name):void 0;switch(e.type){case"bool":return Ne.bool(n);case"u8":return Ne.u8(n);case"i8":return Ne.i8(n);case"u16":return Ne.u16(n);case"i16":return Ne.i16(n);case"u32":return Ne.u32(n);case"i32":return Ne.i32(n);case"f32":return Ne.f32(n);case"u64":return Ne.u64(n);case"i64":return Ne.i64(n);case"f64":return Ne.f64(n);case"u128":return Ne.u128(n);case"i128":return Ne.i128(n);case"bytes":return Ne.vecU8(n);case"string":return Ne.str(n);case"publicKey":return Ne.publicKey(n);default:if("vec"in e.type)return Ne.vec(hr.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return Ne.option(hr.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const i=e.type.defined;if(t===void 0)throw new nc("User defined types not provided");const s=t.filter(a=>a.name===i);if(s.length!==1)throw new nc(`Type not found: ${JSON.stringify(e)}`);return hr.typeDefLayout(s[0],t,n)}if("array"in e.type){let i=e.type.array[0],s=e.type.array[1],a=hr.fieldLayout({name:void 0,type:i},t);return Ne.array(a,s,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if(e.type.kind==="struct"){const i=e.type.fields.map(s=>hr.fieldLayout(s,t));return Ne.struct(i,n)}if(e.type.kind==="enum"){let i=e.type.variants.map(s=>{const a=bn(s.name);if(s.fields===void 0)return Ne.struct([],a);const u=s.fields.map(f=>{if(!f.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return hr.fieldLayout(f,t)});return Ne.struct(u,a)});return n!==void 0?Ne.rustEnum(i).replicate(n):Ne.rustEnum(i,n)}throw new Error(`Unknown type kint: ${e}`)}}class Ll{constructor(e){this.idl=e,this.ixLayout=Ll.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const i=ih("global",n.name);t.set($e.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const i=ih("state",n.name);t.set($e.encode(i),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const i=ee.Buffer.alloc(1e3),s=bn(t),a=this.ixLayout.get(s);if(!a)throw new Error(`Unknown method: ${s}`);const u=a.encode(n,i),f=i.slice(0,u);return ee.Buffer.concat([ih(e,t),f])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map(n=>{let i=n.args.map(a=>{var u,f;return hr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=bn(n.name);return[s,Ne.struct(i,s)]}).concat(e.instructions.map(n=>{let i=n.args.map(a=>{var u,f;return hr.fieldLayout(a,Array.from([...(u=e.accounts)!==null&&u!==void 0?u:[],...(f=e.types)!==null&&f!==void 0?f:[]]))});const s=bn(n.name);return[s,Ne.struct(i,s)]}));return new Map(t)}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ee.Buffer.from(e,"hex"):$e.decode(e));let n=$e.encode(e.slice(0,8)),i=e.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(e,t){return Pi.format(e,t,this.idl)}}class Pi{static format(e,t,n){const i=n.instructions.filter(u=>e.name===u.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:Pi.formatIdlType(u.type),data:Pi.formatIdlData(u,e.data[u.name],n.types)})),a=Pi.flattenIdlAccounts(i.accounts);return{args:s,accounts:t.map((u,f)=>f<a.length?{name:a[f].name,...u}:{name:void 0,...u})}}static formatIdlType(e){if(typeof e=="string")return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i)).join(", ")+"]";if(e.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const i=n.filter(s=>s.name===e.type.defined);if(i.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return Pi.formatIdlDataDefined(i[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct"){const i=e.type;return"{ "+Object.keys(t).map(s=>{const a=i.fields.filter(u=>u.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+Pi.formatIdlData(a,t[s],n)}).join(", ")+" }"}if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const i=e.type.variants,s=Object.keys(t)[0],a=t[s],u=Object.keys(a).map(h=>{var d;const m=a[h],I=(d=i[s])===null||d===void 0?void 0:d.filter(O=>O.name===h)[0];if(I===void 0)throw new Error("Unable to find variant");return h+": "+Pi.formatIdlData(I,m,n)}).join(", "),f=bn(s,{pascalCase:!0});return u.length===0?f:`${f} { ${u} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const i=function(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Pi.flattenIdlAccounts(n.accounts,s)}return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function ih(r,e){var t;let n=`${r}:${t===void 0&&(t={}),kT(e,ol({delimiter:"_"},t))}`;return ee.Buffer.from(Gs.exports.sha256.digest(n)).slice(0,8)}function bp(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return qa(r,i.type)}).reduce((i,s)=>i+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>qa(r,t.type)).reduce((t,n)=>t+n,0)}function qa(r,e){var t,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+qa(r,e.option);if("coption"in e)return 4+qa(r,e.coption);if("defined"in e){const i=(n=(t=r.types)===null||t===void 0?void 0:t.filter(s=>s.name===e.defined))!==null&&n!==void 0?n:[];if(i.length!==1)throw new nc(`Type not found: ${JSON.stringify(e)}`);return bp(r,i[0])}if("array"in e){let i=e.array[0],s=e.array[1];return qa(r,i)*s}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}const IT=8;class No{constructor(e){if(e.accounts===void 0)return void(this.accountLayouts=new Map);const t=e.accounts.map(n=>[n.name,hr.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.encode(t,n);let a=n.slice(0,s),u=No.accountDiscriminator(e);return ee.Buffer.concat([u,a])}decode(e,t){if(No.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(n)}memcmp(e,t){const n=No.accountDiscriminator(e);return{offset:0,bytes:$e.encode(t?ee.Buffer.concat([n,t]):n)}}size(e){var t;return 8+((t=bp(this.idl,e))!==null&&t!==void 0?t:0)}static accountDiscriminator(e){return ee.Buffer.from(Gs.exports.sha256.digest(`account:${bn(e,{pascalCase:!0})}`)).slice(0,8)}}class jv{constructor(e){if(e.events===void 0)return void(this.layouts=new Map);const t=e.events.map(n=>{let i={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,hr.typeDefLayout(i,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[Rh(qv(n.name)),n.name]))}decode(e){let t;try{t=ee.Buffer.from(mv(e))}catch{return null}const n=Rh(t.slice(0,8)),i=this.discriminators.get(n);if(i===void 0)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(t.slice(8)),name:i}}}function qv(r){return ee.Buffer.from(Gs.exports.sha256.digest(`event:${r}`)).slice(0,8)}class Gv{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=hr.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=ee.Buffer.alloc(1e3),i=this.layout.encode(t,n),s=await vp(e),a=n.slice(0,i);return ee.Buffer.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function vp(r){let e=Cl("anchor-deprecated-state")?"account":"state";return ee.Buffer.from(Gs.exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class Kl{constructor(e){this.instruction=new Ll(e),this.accounts=new No(e),this.events=new jv(e),e.state&&(this.state=new Gv(e))}}var ET=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:{};function OT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}class mr{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Hv=mr;class Bs extends mr{isCount(){throw new Error("ExternalLayout is abstract")}}class PT extends Bs{constructor(e,t,n){if(!(e instanceof mr))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Nl||this.layout instanceof Yv}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Nl extends mr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Yv extends mr{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const sh=Math.pow(2,32);class TT extends mr{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t);return function(i,s){return i*sh+s}(e.readUInt32LE(t+4),n)}encode(e,t,n){n===void 0&&(n=0);const i=function(s){const a=Math.floor(s/sh);return{hi32:a,lo32:s-a*sh}}(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class RT extends mr{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((s,a)=>s&&a instanceof mr,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Jv{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Xm extends Jv{constructor(e,t){if(!(e instanceof Bs&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Qv extends mr{constructor(e,t,n){const i=e instanceof Nl||e instanceof Yv;if(i)e=new Xm(new PT(e));else if(e instanceof Bs&&e.isCount())e=new Xm(e);else if(!(e instanceof Jv))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof mr))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;t===void 0&&(t=0);const i=this.discriminator,s=i.decode(e,t);let a=this.registry[s];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=this.defaultLayout.decode(e,t+u)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(e[s.property],t,n),u+a.encode(e[a.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new BT(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return Pe.Buffer.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class BT extends mr{constructor(e,t,n,i){if(!(e instanceof Qv))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof mr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class xT extends mr{constructor(e,t){if(!(e instanceof Bs&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Bs||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Bs&&(i=e.length),!Pe.Buffer.isBuffer(e)||i!==e.length)throw new TypeError((s="Blob.encode",((a=this).property?s+"["+a.property+"]":s)+" requires (length "+i+") Buffer as src"));var s,a;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Bs&&this.length.encode(i,t,n),i}}var On=r=>new Nl(1,r),Hi=r=>new TT(r),Lt=(r,e,t)=>new RT(r,e,t),Dl=(r,e)=>new xT(r,e);class MT{constructor(e){}encode(e,t){switch(bn(e)){case"initializeMint":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({initializeMint:{decimals:n,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!s,freezeAuthority:(s||Je.default).toBuffer()}})}(t);case"initializeAccount":return jt({initializeAccount:{}});case"initializeMultisig":return function({m:n}){return jt({initializeMultisig:{m:n}})}(t);case"transfer":return function({amount:n}){return jt({transfer:{amount:n}})}(t);case"approve":return function({amount:n}){return jt({approve:{amount:n}})}(t);case"revoke":return jt({revoke:{}});case"setAuthority":return function({authorityType:n,newAuthority:i}){return jt({setAuthority:{authorityType:n,newAuthority:i}})}(t);case"mintTo":return function({amount:n}){return jt({mintTo:{amount:n}})}(t);case"burn":return function({amount:n}){return jt({burn:{amount:n}})}(t);case"closeAccount":return jt({closeAccount:{}});case"freezeAccount":return jt({freezeAccount:{}});case"thawAccount":return jt({thawAccount:{}});case"transferChecked":return function({amount:n,decimals:i}){return jt({transferChecked:{amount:n,decimals:i}})}(t);case"approvedChecked":return function({amount:n,decimals:i}){return jt({approveChecked:{amount:n,decimals:i}})}(t);case"mintToChecked":return function({amount:n,decimals:i}){return jt({mintToChecked:{amount:n,decimals:i}})}(t);case"burnChecked":return function({amount:n,decimals:i}){return jt({burnChecked:{amount:n,decimals:i}})}(t);case"intializeAccount2":return function({authority:n}){return jt({initilaizeAccount2:{authority:n}})}(t);case"syncNative":return jt({syncNative:{}});case"initializeAccount3":return function({authority:n}){return jt({initializeAccount3:{authority:n}})}(t);case"initializeMultisig2":return function({m:n}){return jt({initializeMultisig2:{m:n}})}(t);case"initializeMint2":return function({decimals:n,mintAuthority:i,freezeAuthority:s}){return jt({encodeInitializeMint2:{decimals:n,mintAuthority:i,freezeAuthority:s}})}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const Kt=(Zm=On("instruction"),new Qv(Zm,CT,LT));var Zm,CT,LT;function vo(r){return Dl(32,r)}function jt(r){let e=Pe.Buffer.alloc(KT),t=Kt.encode(r,e);return e.slice(0,t)}Kt.addVariant(0,Lt([On("decimals"),Dl(32,"mintAuthority"),On("freezeAuthorityOption"),vo("freezeAuthority")]),"initializeMint"),Kt.addVariant(1,Lt([]),"initializeAccount"),Kt.addVariant(2,Lt([On("m")]),"initializeMultisig"),Kt.addVariant(3,Lt([Hi("amount")]),"transfer"),Kt.addVariant(4,Lt([Hi("amount")]),"approve"),Kt.addVariant(5,Lt([]),"revoke"),Kt.addVariant(6,Lt([On("authorityType"),On("newAuthorityOption"),vo("newAuthority")]),"setAuthority"),Kt.addVariant(7,Lt([Hi("amount")]),"mintTo"),Kt.addVariant(8,Lt([Hi("amount")]),"burn"),Kt.addVariant(9,Lt([]),"closeAccount"),Kt.addVariant(10,Lt([]),"freezeAccount"),Kt.addVariant(11,Lt([]),"thawAccount"),Kt.addVariant(12,Lt([Hi("amount"),On("decimals")]),"transferChecked"),Kt.addVariant(13,Lt([Hi("amount"),On("decimals")]),"approvedChecked"),Kt.addVariant(14,Lt([Hi("amount"),On("decimals")]),"mintToChecked"),Kt.addVariant(15,Lt([Hi("amount"),On("decimals")]),"burnedChecked"),Kt.addVariant(16,Lt([vo("authority")]),"InitializeAccount2"),Kt.addVariant(17,Lt([]),"syncNative"),Kt.addVariant(18,Lt([vo("authority")]),"initializeAccount3"),Kt.addVariant(19,Lt([On("m")]),"initializeMultisig2"),Kt.addVariant(20,Lt([On("decimals"),vo("mintAuthority"),On("freezeAuthorityOption"),vo("freezeAuthority")]),"initializeMint2");const KT=Math.max(...Object.values(Kt.registry).map(r=>r.span));class NT{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function Hu(r){return new _p(Dl(8),e=>wp.fromBuffer(e),e=>e.toBuffer(),r)}function Po(r){return new _p(Dl(32),e=>new Je(e),e=>e.toBuffer(),r)}function Ga(r,e){return new DT(r,e)}class _p extends Hv{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class DT extends Hv{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(n=>new Nl(4,n))()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}function FT(r){if(r===0)return!1;if(r===1)return!0;throw new Error("Invalid bool: "+r)}function UT(r){return r?1:0}class wp extends Mi{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=Pe.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new wp([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class zT{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const n=Pe.Buffer.alloc(165),i=tb.encode(t,n);return n.slice(0,i)}case"mint":{const n=Pe.Buffer.alloc(82),i=eb.encode(t,n);return n.slice(0,i)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(n){return tb.decode(n)}(t);case"mint":return function(n){return eb.decode(n)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return(t=bp(this.idl,e))!==null&&t!==void 0?t:0}}const eb=Lt([Ga(Po(),"mintAuthority"),Hu("supply"),On("decimals"),function(r){return new _p(On(),FT,UT,r)}("isInitialized"),Ga(Po(),"freezeAuthority")]),tb=Lt([Po("mint"),Po("authority"),Hu("amount"),Ga(Po(),"delegate"),On("state"),Ga(Hu(),"isNative"),Hu("delegatedAmount"),Ga(Po(),"closeAuthority")]);class WT{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class Xv{constructor(e){this.instruction=new MT(e),this.accounts=new zT(e),this.events=new WT(e),this.state=new NT(e)}}var VT=Object.freeze({__proto__:null,hash:function(r){return Gs.exports.sha256(r)}});function Zv(r,e,t){const n=ee.Buffer.concat([r.toBuffer(),ee.Buffer.from(e),t.toBuffer()]),i=Gs.exports.sha256.digest(n);return new Je(ee.Buffer.from(i))}function e_(r,e){let t=ee.Buffer.alloc(0);r.forEach(function(s){if(s.length>32)throw new TypeError("Max seed length exceeded");t=ee.Buffer.concat([t,$T(s)])}),t=ee.Buffer.concat([t,e.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);let n=Gs.exports.sha256(new Uint8Array(t)),i=new Mi(n,16).toArray(void 0,32);if(Je.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new Je(i)}function Ap(r,e){let t,n=255;for(;n!=0;){try{t=e_(r.concat(ee.Buffer.from([n])),e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[t,n]}throw new Error("Unable to find a viable program address nonce")}const $T=r=>r instanceof ee.Buffer?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);async function t_(r,...e){let t=[ee.Buffer.from([97,110,99,104,111,114])];e.forEach(i=>{t.push(i instanceof ee.Buffer?i:jr(i).toBuffer())});const[n]=await Je.findProgramAddress(t,jr(r));return n}var jT=Object.freeze({__proto__:null,createWithSeedSync:Zv,createProgramAddressSync:e_,findProgramAddressSync:Ap,associated:t_});const Mh=new Je("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Ch=new Je("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var qT=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Mh,ASSOCIATED_PROGRAM_ID:Ch,associatedAddress:async function({mint:r,owner:e}){return(await Je.findProgramAddress([e.toBuffer(),Mh.toBuffer(),r.toBuffer()],Ch))[0]}}),Lh={exports:{}};(function(r,e){var t=typeof self<"u"?self:ET,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var u="URLSearchParams"in s,f="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in s,m="ArrayBuffer"in s;if(m)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(T){return T&&I.indexOf(Object.prototype.toString.call(T))>-1};function M(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function S(T){return typeof T!="string"&&(T=String(T)),T}function R(T){var W={next:function(){var X=T.shift();return{done:X===void 0,value:X}}};return f&&(W[Symbol.iterator]=function(){return W}),W}function C(T){this.map={},T instanceof C?T.forEach(function(W,X){this.append(X,W)},this):Array.isArray(T)?T.forEach(function(W){this.append(W[0],W[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(W){this.append(W,T[W])},this)}function Y(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function ae(T){return new Promise(function(W,X){T.onload=function(){W(T.result)},T.onerror=function(){X(T.error)}})}function oe(T){var W=new FileReader,X=ae(W);return W.readAsArrayBuffer(T),X}function de(T){if(T.slice)return T.slice(0);var W=new Uint8Array(T.byteLength);return W.set(new Uint8Array(T)),W.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(T){var W;this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:h&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():m&&h&&(W=T)&&DataView.prototype.isPrototypeOf(W)?(this._bodyArrayBuffer=de(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m&&(ArrayBuffer.prototype.isPrototypeOf(T)||O(T))?this._bodyArrayBuffer=de(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(oe)}),this.text=function(){var T=Y(this);if(T)return T;if(this._bodyBlob)return function(W){var X=new FileReader,Be=ae(X);return X.readAsText(W),Be}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var X=new Uint8Array(W),Be=new Array(X.length),ye=0;ye<X.length;ye++)Be[ye]=String.fromCharCode(X[ye]);return Be.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(T,W){T=M(T),W=S(W);var X=this.map[T];this.map[T]=X?X+", "+W:W},C.prototype.delete=function(T){delete this.map[M(T)]},C.prototype.get=function(T){return T=M(T),this.has(T)?this.map[T]:null},C.prototype.has=function(T){return this.map.hasOwnProperty(M(T))},C.prototype.set=function(T,W){this.map[M(T)]=S(W)},C.prototype.forEach=function(T,W){for(var X in this.map)this.map.hasOwnProperty(X)&&T.call(W,this.map[X],X,this)},C.prototype.keys=function(){var T=[];return this.forEach(function(W,X){T.push(X)}),R(T)},C.prototype.values=function(){var T=[];return this.forEach(function(W){T.push(W)}),R(T)},C.prototype.entries=function(){var T=[];return this.forEach(function(W,X){T.push([X,W])}),R(T)},f&&(C.prototype[Symbol.iterator]=C.prototype.entries);var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(T,W){var X,Be,ye=(W=W||{}).body;if(T instanceof V){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,W.headers||(this.headers=new C(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,ye||T._bodyInit==null||(ye=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=W.credentials||this.credentials||"same-origin",!W.headers&&this.headers||(this.headers=new C(W.headers)),this.method=(X=W.method||this.method||"GET",Be=X.toUpperCase(),N.indexOf(Be)>-1?Be:X),this.mode=W.mode||this.mode||null,this.signal=W.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}function J(T){var W=new FormData;return T.trim().split("&").forEach(function(X){if(X){var Be=X.split("="),ye=Be.shift().replace(/\+/g," "),Ie=Be.join("=").replace(/\+/g," ");W.append(decodeURIComponent(ye),decodeURIComponent(Ie))}}),W}function K(T,W){W||(W={}),this.type="default",this.status=W.status===void 0?200:W.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new C(W.headers),this.url=W.url||"",this._initBody(T)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},E.call(V.prototype),E.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:0,statusText:""});return T.type="error",T};var j=[301,302,303,307,308];K.redirect=function(T,W){if(j.indexOf(W)===-1)throw new RangeError("Invalid status code");return new K(null,{status:W,headers:{location:T}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(W,X){this.message=W,this.name=X;var Be=Error(W);this.stack=Be.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function te(T,W){return new Promise(function(X,Be){var ye=new V(T,W);if(ye.signal&&ye.signal.aborted)return Be(new a.DOMException("Aborted","AbortError"));var Ie=new XMLHttpRequest;function qt(){Ie.abort()}Ie.onload=function(){var Gt,_e,We={status:Ie.status,statusText:Ie.statusText,headers:(Gt=Ie.getAllResponseHeaders()||"",_e=new C,Gt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ln){var Et=ln.split(":"),ht=Et.shift().trim();if(ht){var _r=Et.join(":").trim();_e.append(ht,_r)}}),_e)};We.url="responseURL"in Ie?Ie.responseURL:We.headers.get("X-Request-URL");var Zt="response"in Ie?Ie.response:Ie.responseText;X(new K(Zt,We))},Ie.onerror=function(){Be(new TypeError("Network request failed"))},Ie.ontimeout=function(){Be(new TypeError("Network request failed"))},Ie.onabort=function(){Be(new a.DOMException("Aborted","AbortError"))},Ie.open(ye.method,ye.url,!0),ye.credentials==="include"?Ie.withCredentials=!0:ye.credentials==="omit"&&(Ie.withCredentials=!1),"responseType"in Ie&&h&&(Ie.responseType="blob"),ye.headers.forEach(function(Gt,_e){Ie.setRequestHeader(_e,Gt)}),ye.signal&&(ye.signal.addEventListener("abort",qt),Ie.onreadystatechange=function(){Ie.readyState===4&&ye.signal.removeEventListener("abort",qt)}),Ie.send(ye._bodyInit===void 0?null:ye._bodyInit)})}te.polyfill=!0,s.fetch||(s.fetch=te,s.Headers=C,s.Request=V,s.Response=K),a.Headers=C,a.Request=V,a.Response=K,a.fetch=te,Object.defineProperty(a,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Lh,Lh.exports);var GT=OT(Lh.exports);async function nb(r,e){const t=await r.getAccountInfo(e);if(t===null)throw new Error("program account not found");const{program:n}=Kh(t.data),i=await r.getAccountInfo(n.programdataAddress);if(i===null)throw new Error("program data account not found");const{programData:s}=Kh(i.data);return s}const HT=Ne.rustEnum([Ne.struct([],"uninitialized"),Ne.struct([Ne.option(Ne.publicKey(),"authorityAddress")],"buffer"),Ne.struct([Ne.publicKey("programdataAddress")],"program"),Ne.struct([Ne.u64("slot"),Ne.option(Ne.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ne.u32());function Kh(r){return HT.decode(r)}var YT=Object.freeze({__proto__:null,verifiedBuild:async function(r,e,t=5){const n=`https://anchor.projectserum.com/api/v0/program/${e.toString()}/latest?limit=${t}`,[i,s]=await Promise.all([nb(r,e),GT(n)]),a=(await s.json()).filter(f=>!f.aborted&&f.state==="Built"&&f.verified==="Verified");if(a.length===0)return null;const u=a[0];return i.slot.toNumber()!==u.verified_slot?null:u},fetchData:nb,decodeUpgradeableLoaderState:Kh}),JT=Object.freeze({__proto__:null,sha256:VT,rpc:yT,publicKey:jT,bytes:lT,token:qT,features:_T,registry:YT});const QT=Ne.struct([Ne.publicKey("authority"),Ne.vecU8("data")]);function bc(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(a=>a.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class Vo{static build(e,t,n){if(e.name==="_inner")throw new nc("the _inner name is reserved");const i=(...s)=>{const[a,u]=bc(e,[...s]);Ml(e.accounts,u.accounts);const f=i.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),Cl("debug-logs")&&console.log("Outgoing account metas:",f),new yv({keys:f,programId:n,data:t(e.name,Cv(e,...a))})};return i.accounts=s=>Vo.accountsArray(s,e.accounts,e.name),i}static accountsArray(e,t,n){return e?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const s=e[i.name];return Vo.accountsArray(s,i.accounts,n).flat()}{const s=i;let a;try{a=jr(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${n!==void 0?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:a,isWritable:s.isMut,isSigner:s.isSigner}}}).flat():[]}}class n_{static build(e,t,n,i){return async(...s)=>{var a;const u=t(...s),[,f]=bc(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=f.signers)!==null&&a!==void 0?a:[],f.options)}catch(h){throw mp(h,n)}}}}class r_{static build(e,t){return(...n)=>{var i,s,a;const[,u]=bc(e,[...n]),f=new lp;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=u.preInstructions)===null||i===void 0||i.forEach(h=>f.add(h)),(s=u.instructions)===null||s===void 0||s.forEach(h=>f.add(h)),f.add(t(...n)),(a=u.postInstructions)===null||a===void 0||a.forEach(h=>f.add(h)),f}}}class i_{constructor(e,t,n=Wo(),i=new Kl(e)){this.provider=n,this.coder=i,this._idl=e,this._programId=t,this._address=oh(t),this._sub=null;const[s,a,u]=(()=>{var f;let h={},d={},m={};return(f=e.state)===null||f===void 0||f.methods.forEach(I=>{const O=Vo.build(I,(C,Y)=>i.instruction.encodeState(C,Y),t);O.accounts=C=>function(ae,oe,de,E){if(de.name==="new"){const[N]=Ap([],ae);if(oe.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:oe.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:oh(ae),isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!1,isSigner:!1},{pubkey:fp.programId,isWritable:!1,isSigner:!1},{pubkey:ae,isWritable:!1,isSigner:!1}]}return Ml(de.accounts,E),[{pubkey:oh(ae),isWritable:!0,isSigner:!1}]}(t,n,I,C).concat(Vo.accountsArray(C,I.accounts,I.name));const M=r_.build(I,O),S=n_.build(I,M,pp(e),n),R=bn(I.name);h[R]=O,d[R]=M,m[R]=S}),[h,d,m]})();this.instruction=s,this.transaction=a,this.rpc=u}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await vp(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new vv,n=this.provider.connection.onAccountChange(this.address(),i=>{const s=this.coder.state.decode(i.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function oh(r){let[e]=Ap([],r);return Zv(e,"unversioned",r)}class s_{constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??Wo(),this._coder=s??new Kl(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return n===null?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await Dv(this._provider.connection,e.map(n=>jr(n)),t)).map(n=>n==null?null:this._coder.accounts.decode(this._idlAccount.name,n==null?void 0:n.account.data))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Pe.Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map(({pubkey:t,account:n})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,n.data)}))}subscribe(e,t){const n=Na.get(e.toString());if(n)return n.ee;const i=new vv;e=jr(e);const s=this._provider.connection.onAccountChange(e,a=>{const u=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",u)},t);return Na.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Na.get(e.toString());t?Na&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Na.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return fp.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await t_(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(jr(e),t)}}const Na=new Map,XT=13,ZT=14;class o_{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new Sp(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let i=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,a)=>{s.err||this._eventParser.parseLogs(s.logs,u=>{const f=this._eventListeners.get(u.name);f&&f.forEach(h=>{const d=this._eventCallbacks.get(h);if(d){const[,m]=d;m(u.data,a.slot)}})})})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size==0&&(rl.exports.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class Sp{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e,t){const n=new tR(e),i=new eR;let s=n.next();for(;s!==null;){let[a,u,f]=this.handleLog(i,s);a&&t(a),u&&i.push(u),f&&i.pop(),s=n.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(XT):e.slice(ZT);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class eR{constructor(){this.stack=[]}program(){return rl.exports.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){rl.exports.ok(this.stack.length>0),this.stack.pop()}}class tR{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}const nR=new Je("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function a_(){return new Xv(c_)}const c_={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class ic{constructor(e,t,n,i,s,a){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._accountStore=new rR(n,a)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=bn(t.name);if(t.pda&&t.pda.seeds.length>0&&!this._accounts[n])await this.autoPopulatePda(t);else if(!t.isSigner||this._accounts[n])Reflect.has(ic.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=ic.CONST_ACCOUNTS[n]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(e.pda.seeds.map(s=>this.toBuffer(s))),n=await this.parseProgramId(e),[i]=await Je.findProgramAddress(t,n);this._accounts[bn(e.name)]=i}async parseProgramId(e){var t;if(!(!((t=e.pda)===null||t===void 0)&&t.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new Je(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=bn(e.path.split(".")[0]),n=this._idlIx.args.findIndex(i=>i.name===t);if(n===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],i=this._accounts[bn(n)];if(t.length===1)return i;const s=await this._accountStore.fetchAccount(e.account,i);return this.parseAccountValue(s,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[bn(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Pe.Buffer.from([t]);case"u16":let n=Pe.Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let i=Pe.Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let s=Pe.Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(t)),s;case"string":return Pe.Buffer.from(Bv(t));case"publicKey":return t.toBuffer();default:if(e.array)return Pe.Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}ic.CONST_ACCOUNTS={systemProgram:fp.programId,tokenProgram:Mh,associatedTokenProgram:Ch,rent:FP};class rR{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${n}`);const s=a_().accounts.decode("token",i.data);this._cache.set(n,s)}else{const i=this._accounts[bn(e)].fetch(t);this._cache.set(n,i)}return this._cache.get(n)}}class u_{static build(e,t,n,i,s,a,u,f,h){return(...d)=>new iR(d,i,s,a,u,f,e,t,n,h)}}class iR{constructor(e,t,n,i,s,a,u,f,h,d){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._accountsResolver=new ic(e,this._accounts,u,f,h,d)}async pubkeys(){return await this._accountsResolver.resolve(),this._accounts}accounts(e){return Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class sc{constructor(e,t,n,i){t=jr(t),n||(n=Wo()),this._idl=e,this._provider=n,this._programId=t,this._coder=i??new Kl(e),this._events=new o_(this._programId,n,this._coder);const[s,a,u,f,h,d,m,I]=class{static build(O,M,S,R){const C={},Y={},ae={},oe={},de={},E={},N=pp(O),V=O.accounts?class{static build(K,j,te,T){var W;const X={};return(W=K.accounts)===null||W===void 0||W.forEach(Be=>{const ye=bn(Be.name);X[ye]=new s_(K,Be,te,T,j)}),X}}.build(O,M,S,R):{},J=class{static build(K,j,te,T){if(K.state!==void 0)return new i_(K,te,T,j)}}.build(O,M,S,R);return O.instructions.forEach(K=>{const j=Vo.build(K,(Ie,qt)=>M.instruction.encode(Ie,qt),S),te=r_.build(K,j),T=n_.build(K,te,N,R),W=class{static build(Ie,qt,Gt,_e,We,Zt,ln){return async(...Et)=>{var ht;const _r=qt(...Et),[,Wt]=bc(Ie,[...Et]);let wn;if(_e.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{wn=await _e.simulate(_r,Wt.signers,(ht=Wt.options)===null||ht===void 0?void 0:ht.commitment)}catch(nr){throw mp(nr,Gt)}if(wn===void 0)throw new Error("Unable to simulate transaction");const Zr=wn.logs;if(!Zr)throw new Error("Simulated logs not found");const wr=[];return ln.events&&new Sp(Zt,We).parseLogs(Zr,nr=>{wr.push(nr)}),{events:wr,raw:Zr}}}}.build(K,te,N,R,M,S,O),X=class{static build(Ie,qt,Gt,_e){const We=qt.accounts.find(ln=>ln.isMut),Zt=!!qt.returns;if(!We&&Zt)return async(...ln)=>{var Et,ht;let _r=await Gt(...ln);const Wt=`Program return: ${Ie} `;let wn=_r.raw.find(nr=>nr.startsWith(Wt));if(!wn)throw new Error("View expected return log");let Zr=Mv(wn.slice(Wt.length)),wr=qt.returns;if(!wr)throw new Error("View expected return type");return hr.fieldLayout({type:wr},Array.from([...(Et=_e.accounts)!==null&&Et!==void 0?Et:[],...(ht=_e.types)!==null&&ht!==void 0?ht:[]])).decode(Zr)}}}.build(S,K,W,O),Be=u_.build(R,S,K,j,te,T,W,X,V),ye=bn(K.name);Y[ye]=j,ae[ye]=te,C[ye]=T,oe[ye]=W,de[ye]=Be,X&&(E[ye]=X)}),[C,Y,ae,V,oe,de,J,E]}}.build(e,this._coder,t,n);this.rpc=s,this.instruction=a,this.transaction=u,this.account=f,this.simulate=h,this.methods=d,this.state=m,this.views=I}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=jr(e),i=await sc.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new sc(i,n,t)}static async fetchIdl(e,t){t=t??Wo();const n=jr(e),i=await async function(h){const d=(await Je.findProgramAddress([],h))[0];return await Je.createWithSeed(d,"anchor:idl",h)}(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let a=(u=s.data.slice(8),QT.decode(u));var u;const f=UP(a.data);return JSON.parse(Rv(f))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}class sR{static token(e){return function(t){return new sc(c_,nR,t,a_())}(e)}}var oR=Object.freeze(Object.defineProperty({__proto__:null,web3:zP,ACCOUNT_DISCRIMINATOR_SIZE:IT,AccountClient:s_,AnchorError:Ko,AnchorProvider:zv,BorshAccountsCoder:No,BorshCoder:Kl,BorshEventCoder:jv,BorshInstructionCoder:Ll,BorshStateCoder:Gv,EventManager:o_,EventParser:Sp,IdlError:nc,LangErrorCode:Ee,LangErrorMessage:$v,MethodsBuilderFactory:u_,Program:sc,ProgramError:rc,ProgramErrorStack:ca,Spl:sR,SplTokenCoder:Xv,StateClient:i_,eventDiscriminator:qv,getProvider:Wo,parseIdlErrors:pp,setProvider:bT,splitArgsAndCtx:bc,stateDiscriminator:vp,toInstruction:Cv,translateAddress:jr,translateError:mp,utils:JT,validateAccounts:Ml,BN:Mi},Symbol.toStringTag,{value:"Module"})),mt=gc(oR),vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.stakingIdl=void 0;vc.stakingIdl={version:"0.1.0",name:"atlas_staking",instructions:[{name:"cancelUnstake",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[]},{name:"createStakingAccount",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"harvest",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeStaking",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerStake",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"stakingVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-vars"}]}},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"Mint",path:"stake_mint"},{kind:"account",type:"publicKey",account:"Mint",path:"reward_mint"}]}},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"}]},{name:"settle",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}}],args:[{name:"updatedStakingPeriod",type:"u16"}]},{name:"stakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"stakeAmount",type:"u64"}]},{name:"unstakeTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"rewardMint",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"userRewardAccount",isMut:!0,isSigner:!1},{name:"rewardAta",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCooldownPeriod",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"cooldownPeriod",type:"u64"}]},{name:"updateRewardMultiplier",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"registeredStake",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",path:"authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}}],args:[{name:"rewardMultiplier",type:"u64"},{name:"newStakingPeriod",type:"u16"}]},{name:"withdrawTokens",accounts:[{name:"user",isMut:!0,isSigner:!0},{name:"stakeMint",isMut:!1,isSigner:!1},{name:"tokenSource",isMut:!0,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-stake"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.authority"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.stake_mint"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake.reward_mint"}]}},{name:"stakingAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"staking-account"},{kind:"account",type:"publicKey",account:"StakingAccount",path:"staking_account.owner"},{kind:"account",type:"publicKey",account:"RegisteredStake",path:"registered_stake"}]}},{name:"tokenEscrow",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"RegisteredStake",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"rewardMint",type:"publicKey"},{name:"currentPeriod",type:"u16"},{name:"rewardMultiplier",type:"u64"},{name:"cooldownPeriod",type:"u64"},{name:"bump",type:"u8"}]}},{name:"StakingAccount",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"registeredStake",type:"publicKey"},{name:"stakeMint",type:"publicKey"},{name:"totalStake",type:"u64"},{name:"activeStake",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"paidRewards",type:"u64"},{name:"currentPeriod",type:"u16"},{name:"stakedAtTs",type:"i64"},{name:"lastPendingRewardCalcTs",type:"i64"},{name:"lastHarvestTs",type:"i64"},{name:"unstakedTs",type:"i64"},{name:"bump",type:"u8"}]}},{name:"StakingVars",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"InvalidMint",msg:"Invalid Token Mint"},{code:6001,name:"InvalidOwner",msg:"Account now owned by user"},{code:6002,name:"InsufficientFunds",msg:"Insufficient token balance"},{code:6003,name:"InvalidAuthority",msg:"Invalid authority for this account"},{code:6004,name:"InvalidDepositQty",msg:"Invalid deposit quantity"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"StakeOnCooldown",msg:"Cannot stake while account is on cooldown"},{code:6007,name:"InvalidEscrowAuth",msg:"Invalid escrow authority"},{code:6008,name:"WithdrawOnCooldown",msg:"Cannot withdraw before cooldown period has elapsed"},{code:6009,name:"InvalidPeriod",msg:"Staking account must be in the same period as the Registered Stake"},{code:6010,name:"NotOnCooldown",msg:"Staking account is not on cooldown"}],metadata:{}};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.getStakingProgram=Ns.getStakingIdl=void 0;const rb=mt,aR=vc;function l_(r){const e=aR.stakingIdl;return e.metadata.address=r.toBase58(),e}Ns.getStakingIdl=l_;function cR({connection:r,programId:e}){const t=l_(e),n=new rb.AnchorProvider(r,null,null);return new rb.Program(t,e,n)}Ns.getStakingProgram=cR;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ns,r)})(er);var uR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xl,"__esModule",{value:!0});xl.cancelUnstakeInstruction=void 0;const lR=er;function fR({connection:r,user:e,registeredStake:t,programId:n}){return uR(this,void 0,void 0,function*(){const i=(0,lR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.cancelUnstake().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}xl.cancelUnstakeInstruction=fR;var Fl={},dR=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.createStakingAccountInstruction=void 0;const hR=er;function pR({connection:r,user:e,registeredStake:t,programId:n}){return dR(this,void 0,void 0,function*(){const i=(0,hR.getStakingProgram)({connection:r,programId:n}),s={instructions:[],signers:[]},a=yield i.methods.createStakingAccount().accounts({user:e,registeredStake:t}).instruction();return s.instructions.push(a),s})}Fl.createStakingAccountInstruction=pR;var Ul={},Hs={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.associatedAddress=r.ASSOCIATED_PROGRAM_ID=r.TOKEN_PROGRAM_ID=void 0;const e=gv;r.TOKEN_PROGRAM_ID=new e.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.ASSOCIATED_PROGRAM_ID=new e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:n,owner:i}){return(await e.PublicKey.findProgramAddress([i.toBuffer(),r.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],r.ASSOCIATED_PROGRAM_ID))[0]}r.associatedAddress=t})(Hs);var Fr={},rn={};const gR=Qr.utils.randomPrivateKey,ib=()=>{const r=Qr.utils.randomPrivateKey(),e=al(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},al=Qr.getPublicKey;function sb(r){try{return Qr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const kp=(r,e)=>Qr.sign(r,e.slice(0,32)),yR=Qr.verify,ze=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class Ip{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(wv(Ha,this))}static decode(e){return Av(Ha,this,e)}static decodeUnchecked(e){return Sv(Ha,this,e)}}class mR extends Ip{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Ha=new Map;var f_;let d_;const h_=32,gr=32;function bR(r){return r._bn!==void 0}let ob=1;d_=Symbol.toStringTag;class pe extends Ip{constructor(e){if(super({}),this._bn=void 0,bR(e))this._bn=e._bn;else{if(typeof e=="string"){const t=$e.decode(e);if(t.length!=gr)throw new Error("Invalid public key input");this._bn=new Mi(t)}else this._bn=new Mi(e);if(this._bn.byteLength()>gr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(ob);return ob+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return $e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===gr)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[d_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=il(i);return new pe(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>h_)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,ze(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=il(n);if(sb(i))throw new Error("Invalid seeds, address must fall off the curve");return new pe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return sb(t.toBytes())}}f_=pe;pe.default=new f_("11111111111111111111111111111111");Ha.set(pe,{kind:"struct",fields:[["_bn","u256"]]});class vR{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=ze(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ze(gR()),this._publicKey=ze(al(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return ee.Buffer.concat([this._secretKey,this._publicKey],64)}}const _R=new pe("BPFLoader1111111111111111111111111111111111"),ts=1280-40-8,zl=127,$o=64;class Ep extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ep.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Op extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Op.prototype,"name",{value:"TransactionExpiredTimeoutError"});class To extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(To.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class oc{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const qe=(r="publicKey")=>Ye(32,r),wR=(r="signature")=>Ye(64,r),xs=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Ye(yr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},AR=(r="authorized")=>ie([qe("staker"),qe("withdrawer")],r),SR=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),qe("custodian")],r),kR=(r="voteInit")=>ie([qe("nodePubkey"),qe("authorizedVoter"),qe("authorizedWithdrawer"),ke("commission")],r),IR=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),qe("currentAuthorityDerivedKeyOwnerPubkey"),xs("currentAuthorityDerivedKeySeed"),qe("newAuthorized")],r);function p_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return p_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Gn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function dr(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function tt(r,e){if(!r)throw new Error(e||"Assertion failed")}class Wl{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Wl(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];tt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{tt(t.length>0,"Expected at least one writable signer key");const[f]=t[0];tt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new pe(f)),...n.map(([f])=>new pe(f)),...i.map(([f])=>new pe(f)),...s.map(([f])=>new pe(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new pe(s),f=e.findIndex(h=>h.equals(u));f>=0&&(tt(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class Jr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:$e.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new oc(this.staticAccountKeys)}static compile(e){const t=Wl.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new oc(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:$e.encode(u.data)}));return new Jr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];dr(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from($e.decode(m.data));let S=[];dr(S,I.length);let R=[];return dr(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(S),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];dr(i,n.length);let s=ee.Buffer.alloc(ts);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Ye(m.keyIndicesCount.length,"keyIndicesCount"),Pt(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Ye(m.dataLength.length,"dataLength"),Pt(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Ye(1,"numRequiredSignatures"),Ye(1,"numReadonlySignedAccounts"),Ye(1,"numReadonlyUnsignedAccounts"),Ye(t.length,"keyCount"),Pt(qe("key"),e,"keys"),qe("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>ze(m.toBytes())),recentBlockhash:$e.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&zl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Gn(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,gr);t=t.slice(gr),u.push(new pe(ee.Buffer.from(O)))}const f=t.slice(0,gr);t=t.slice(gr);const h=Gn(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Gn(t),S=t.slice(0,M);t=t.slice(M);const R=Gn(t),C=t.slice(0,R),Y=$e.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:S,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:$e.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new Jr(m)}}class Ds{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new oc(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Wl.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const m=t.extractTableLookup(d);if(m!==void 0){const[I,{writable:O,readonly:M}]=m;n.push(I),i.writable.push(...O),i.readonly.push(...M)}}const[a,u]=t.getMessageComponents(),h=new oc(u,i).compileInstructions(e.instructions);return new Ds({header:a,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();dr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();dr(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();dr(s,this.addressTableLookups.length);const a=ie([ke("prefix"),ie([ke("numRequiredSignatures"),ke("numReadonlySignedAccounts"),ke("numReadonlyUnsignedAccounts")],"header"),Ye(e.length,"staticAccountKeysLength"),Pt(qe(),this.staticAccountKeys.length,"staticAccountKeys"),qe("recentBlockhash"),Ye(n.length,"instructionsLength"),Ye(t.length,"serializedInstructions"),Ye(s.length,"addressTableLookupsLength"),Ye(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(ts),f=1<<7,h=a.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:$e.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,h)}serializeInstructions(){let e=0;const t=new Uint8Array(ts);for(const n of this.compiledInstructions){const i=Array();dr(i,n.accountKeyIndexes.length);const s=Array();dr(s,n.data.length),e+=ie([ke("programIdIndex"),Ye(i.length,"encodedAccountKeyIndexesLength"),Pt(ke(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ye(s.length,"encodedDataLength"),Ye(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ts);for(const n of this.addressTableLookups){const i=Array();dr(i,n.writableIndexes.length);const s=Array();dr(s,n.readonlyIndexes.length),e+=ie([qe("accountKey"),Ye(i.length,"encodedWritableIndexesLength"),Pt(ke(),n.writableIndexes.length,"writableIndexes"),Ye(s.length,"encodedReadonlyIndexesLength"),Pt(ke(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&zl;tt(n!==i,"Expected versioned message but received legacy message");const s=i;tt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],f=Gn(t);for(let M=0;M<f;M++)u.push(new pe(t.splice(0,gr)));const h=$e.encode(t.splice(0,gr)),d=Gn(t),m=[];for(let M=0;M<d;M++){const S=t.shift(),R=Gn(t),C=t.splice(0,R),Y=Gn(t),ae=new Uint8Array(t.splice(0,Y));m.push({programIdIndex:S,accountKeyIndexes:C,data:ae})}const I=Gn(t),O=[];for(let M=0;M<I;M++){const S=new pe(t.splice(0,gr)),R=Gn(t),C=t.splice(0,R),Y=Gn(t),ae=t.splice(0,Y);O.push({accountKey:S,writableIndexes:C,readonlyIndexes:ae})}return new Ds({header:a,staticAccountKeys:u,recentBlockhash:h,compiledInstructions:m,addressTableLookups:O})}}const Pp={deserializeMessageVersion(r){const e=r[0],t=e&zl;return t===e?"legacy":t},deserialize:r=>{const e=Pp.deserializeMessageVersion(r);if(e==="legacy")return Jr.from(r);if(e===0)return Ds.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Oi=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const ER=ee.Buffer.alloc($o).fill(0);class _t{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new _t(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],s=[];t.forEach(S=>{S.keys.forEach(C=>{s.push({...C})});const R=S.programId.toString();i.includes(R)||i.push(R)}),i.forEach(S=>{s.push({pubkey:new pe(S),isSigner:!1,isWritable:!1})});const a=[];s.forEach(S=>{const R=S.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||S.isWritable,a[C].isSigner=a[C].isSigner||S.isSigner):a.push(S)}),a.sort(function(S,R){if(S.isSigner!==R.isSigner)return S.isSigner?-1:1;if(S.isWritable!==R.isWritable)return S.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(S=>S.pubkey.equals(n));if(u>-1){const[S]=a.splice(u,1);S.isSigner=!0,S.isWritable=!0,a.unshift(S)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const S of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(S.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:S,isSigner:R,isWritable:C})=>{R?(m.push(S.toString()),f+=1,C||(h+=1)):(I.push(S.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(S=>{const{data:R,programId:C}=S;return{programIdIndex:O.indexOf(C.toString()),accounts:S.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:$e.encode(R)}});return M.forEach(S=>{tt(S.programIdIndex>=0),S.accounts.forEach(R=>tt(R>=0))}),new Jr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=kp(n,i.secretKey);this._addSignature(i.publicKey,ze(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){tt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!yR(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];dr(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return tt(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(tt(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),tt(s.length<=ts,`Transaction too large: ${s.length} > ${ts}`),s}get keys(){return tt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return tt(this.instructions.length===1),this.instructions[0].programId}get data(){return tt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Gn(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,$o);t=t.slice($o),i.push($e.encode(ee.Buffer.from(a)))}return lt.populate(Jr.from(t),i)}static populate(e,t=[]){const n=new lt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==$e.encode(ER)?null:$e.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new _t({keys:s,programId:e.accountKeys[i.programIdIndex],data:$e.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Tp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,h=a-u;tt(h>0,"Message header is invalid");const d=e.staticAccountKeys.length-a-f;tt(d>=0,"Message header is invalid");const m=e.getAccountKeys(t),I=m.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const O=[];for(const M of i){const S=[];for(const C of M.accountKeyIndexes){const Y=m.get(C);if(Y===void 0)throw new Error(`Failed to find key for account key index ${C}`);const ae=C<a;let oe;ae?oe=C<h:C<m.staticAccountKeys.length?oe=C-a<d:oe=C-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,S.push({pubkey:Y,isSigner:C<n.numRequiredSignatures,isWritable:oe})}const R=m.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);O.push(new _t({programId:R,data:ze(M.data),keys:S}))}return new Tp({payerKey:I,instructions:O,recentBlockhash:s})}compileToLegacyMessage(){return Jr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Ds.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Rp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)tt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array($o));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();dr(t,this.signatures.length);const n=ie([Ye(t.length,"encodedSignaturesLength"),Pt(wR(),this.signatures.length,"signatures"),Ye(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Gn(t);for(let a=0;a<i;a++)n.push(new Uint8Array(t.splice(0,$o)));const s=Pp.deserialize(new Uint8Array(t));return new Rp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(a=>a.equals(i.publicKey));tt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=kp(t,i.secretKey)}}addSignature(e,t){tt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));tt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const OR=160,PR=64,TR=OR/PR,g_=1e3/TR,si=new pe("SysvarC1ock11111111111111111111111111111111"),RR=new pe("SysvarEpochSchedu1e111111111111111111111111"),BR=new pe("Sysvar1nstructions1111111111111111111111111"),Yu=new pe("SysvarRecentB1ockHashes11111111111111111111"),jo=new pe("SysvarRent111111111111111111111111111111111"),xR=new pe("SysvarRewards111111111111111111111111111111"),MR=new pe("SysvarS1otHashes111111111111111111111111111"),CR=new pe("SysvarS1otHistory11111111111111111111111111"),Ju=new pe("SysvarStakeHistory1111111111111111111111111");async function Nh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Ts(r){return new Promise(e=>setTimeout(e,r))}function Qe(r,e){const t=r.layout.span>=0?r.layout.span:p_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function ut(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const y_=et("lamportsPerSignature"),m_=ie([se("version"),se("state"),qe("authorizedPubkey"),qe("nonce"),ie([y_],"feeCalculator")]),Dh=m_.span;class Vl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=m_.decode(ze(e),0);return new Vl({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const LR=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},KR=r=>e=>{const t=Ye(r,e),{encode:n,decode:i}=LR(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return kv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=dp(a,r);return n(h,u,f)},s},qo=KR(8);class NR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(kt))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=ut(kt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new pe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ut(kt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=ut(kt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new pe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ut(kt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=ut(kt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,space:i,programId:new pe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ut(kt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new pe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=ut(kt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new pe(t),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:a}=ut(kt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new pe(t),seed:n,lamports:i,space:s,programId:new pe(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ut(kt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new pe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(kt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(kt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ut(kt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new pe(t)}}static checkProgramId(e){if(!e.equals(vn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const kt=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),qe("programId")])},Assign:{index:1,layout:ie([se("instruction"),qe("programId")])},Transfer:{index:2,layout:ie([se("instruction"),qo("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),qe("base"),xs("seed"),Bt("lamports"),Bt("space"),qe("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),qe("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),qe("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),qe("base"),xs("seed"),Bt("space"),qe("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),qe("base"),xs("seed"),qe("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),qo("lamports"),xs("seed"),qe("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class vn{constructor(){}static createAccount(e){const t=kt.Create,n=Qe(t,{lamports:e.lamports,space:e.space,programId:ze(e.programId.toBuffer())});return new _t({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=kt.TransferWithSeed;t=Qe(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=kt.Transfer;t=Qe(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=kt.AssignWithSeed;t=Qe(i,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Assign;t=Qe(i,{programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=kt.CreateWithSeed,n=Qe(t,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ze(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _t({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new lt;"basePubkey"in e&&"seed"in e?t.add(vn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Dh,programId:this.programId})):t.add(vn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Dh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=kt.InitializeNonceAccount,n=Qe(t,{authorized:ze(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yu,isSigner:!1,isWritable:!1},{pubkey:jo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceAdvance(e){const t=kt.AdvanceNonceAccount,n=Qe(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yu,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new _t(i)}static nonceWithdraw(e){const t=kt.WithdrawNonceAccount,n=Qe(t,{lamports:e.lamports});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Yu,isSigner:!1,isWritable:!1},{pubkey:jo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=kt.AuthorizeNonceAccount,n=Qe(t,{authorized:ze(e.newAuthorizedPubkey.toBuffer())});return new _t({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=kt.AllocateWithSeed;t=Qe(i,{base:ze(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ze(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=kt.Allocate;t=Qe(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _t({keys:n,programId:this.programId,data:t})}}vn.programId=new pe("11111111111111111111111111111111");const DR=ts-300;class Fs{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Fs.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let O=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(O=O||new lt,O.add(vn.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(i)||(O=O||new lt,O.add(vn.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<m&&(O=O||new lt,O.add(vn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-I.lamports})))}else O=new lt().add(vn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));O!==null&&await Nh(e,O,[t,n],{commitment:"confirmed"})}const a=ie([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Pt(ke("byte"),yr(se(),-8),"bytes")]),u=Fs.chunkSize;let f=0,h=s,d=[];for(;h.length>0;){const m=h.slice(0,u),I=ee.Buffer.alloc(u+16);a.encode({instruction:0,offset:f,bytes:m,bytesLength:0,bytesLengthPadding:0},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});d.push(Nh(e,O,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ts(1e3/4),f+=u,h=h.slice(u)}await Promise.all(d);{const m=ie([se("instruction")]),I=ee.Buffer.alloc(m.span);m.encode({instruction:1},I);const O=new lt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:jo,isSigner:!1,isWritable:!1}],programId:i,data:I}),M="processed",S=await e.sendTransaction(O,[t,n],{preflightCommitment:M}),{context:R,value:C}=await e.confirmTransaction({signature:S,lastValidBlockHeight:O.lastValidBlockHeight,blockhash:O.recentBlockhash},M);if(C.err)throw new Error(`Transaction ${S} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:M})>R.slot)break}catch{}await new Promise(Y=>setTimeout(Y,Math.round(g_/2)))}}return!0}}Fs.chunkSize=DR;const FR=new pe("BPFLoader2111111111111111111111111111111111");class UR{static getMinNumSignatures(e){return Fs.getMinNumSignatures(e)}static load(e,t,n,i,s){return Fs.load(e,t,n,s,i)}}function zR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var WR=Object.prototype.toString,VR=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function za(r,e){var t,n,i,s,a,u,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return za(r.toJSON(),e);if(f=WR.call(r),f==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=za(r[t],!0)+",";return n>-1&&(i+=za(r[t],!0)),i+"]"}else if(f==="[object Object]"){for(s=VR(r).sort(),n=s.length,i="",t=0;t<n;)a=s[t],u=za(r[a],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(a)+":"+u),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var $R=function(r){var e=za(r,!1);if(e!==void 0)return""+e},ab=zR($R);const Da=32;function ah(r){let e=0;for(;r>1;)r/=2,e++;return e}function jR(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class b_{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=ah(jR(e+Da+1))-ah(Da)-1,n=this.getSlotsInEpoch(t),i=e-(n-Da);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Da:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+ah(Da)):this.slotsPerEpoch}}class Fh extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const qR={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Ae extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var GR=globalThis.fetch;class HR extends WP{constructor(e,t,n){const i=s=>{const a=jP(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function YR(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const cb=56;class Uh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=YR(JR,e),n=e.length-cb;tt(n>=0,"lookup table is invalid"),tt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=ie([Pt(qe(),i,"addresses")]).decode(e.slice(cb));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:s.map(a=>new pe(a))}}}const JR={index:1,layout:ie([se("typeIndex"),qo("deactivationSlot"),et("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Pt(qe(),yr(ke(),-1),"authority")])},QR=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function XR(r){const e=r.match(QR);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${a}//${n}${f}${s}`}const Xt=pi(oa(pe),U(),r=>new pe(r)),v_=aa([U(),xe("base64")]),Bp=pi(oa(ee.Buffer),v_,r=>ee.Buffer.from(r[0],"base64")),__=30*1e3;function ZR(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Rt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function w_(r){return yt([x({jsonrpc:xe("2.0"),id:U(),result:r}),x({jsonrpc:xe("2.0"),id:U(),error:x({code:gi(),message:U(),data:le(_v())})})])}const eB=w_(gi());function Ue(r){return pi(w_(r),eB,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Ft(r){return Ue(x({context:x({slot:A()}),value:r}))}function $l(r){return x({context:x({slot:A()}),value:r})}function ch(r,e){return r===0?new Ds({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:$e.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Jr(e)}const tB=x({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()}),nB=Ue(H(G(x({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:le(G(A()))})))),rB=H(x({slot:A(),prioritizationFee:A()})),iB=x({total:A(),validator:A(),foundation:A(),epoch:A()}),sB=x({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:le(A()),transactionCount:le(A())}),oB=x({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:Qt(),firstNormalEpoch:A(),firstNormalSlot:A()}),aB=Rl(U(),H(A())),Ys=G(yt([x({}),U()])),cB=x({err:Ys}),uB=xe("receivedSignature"),lB=x({"solana-core":U(),"feature-set":le(A())}),ub=Ft(x({err:G(yt([x({}),U()])),logs:G(H(U())),accounts:le(G(H(G(x({executable:Qt(),owner:U(),lamports:A(),data:H(U()),rentEpoch:le(A())}))))),unitsConsumed:le(A()),returnData:le(G(x({programId:U(),data:aa([U(),xe("base64")])})))})),fB=Ft(x({byIdentity:Rl(U(),H(A())),range:x({firstSlot:A(),lastSlot:A()})}));function dB(r,e,t,n,i,s){const a=t||GR;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(d,m)=>{const I=await new Promise((O,M)=>{try{n(d,m,(S,R)=>O([S,R]))}catch(S){M(S)}});return await a(...I)}),new VP(async(d,m)=>{const I={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},hx)};try{let O=5,M,S=500;for(;f?M=await f(r,I):M=await a(r,I),!(M.status!==429||i===!0||(O-=1,O===0));)console.log(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${S}ms delay...`),await Ts(S),S*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(O){O instanceof Error&&m(O)}},{})}function hB(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function pB(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const gB=Ue(tB),yB=Ue(iB),mB=Ue(rB),bB=Ue(sB),vB=Ue(oB),_B=Ue(aB),wB=Ue(A()),AB=Ft(x({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:H(Xt)})),zh=x({amount:U(),uiAmount:G(A()),decimals:A(),uiAmountString:le(U())}),SB=Ft(H(x({address:Xt,amount:U(),uiAmount:G(A()),decimals:A(),uiAmountString:le(U())}))),kB=Ft(H(x({pubkey:Xt,account:x({executable:Qt(),owner:Xt,lamports:A(),data:Bp,rentEpoch:A()})}))),Wh=x({program:U(),parsed:gi(),space:A()}),IB=Ft(H(x({pubkey:Xt,account:x({executable:Qt(),owner:Xt,lamports:A(),data:Wh,rentEpoch:A()})}))),EB=Ft(H(x({lamports:A(),address:Xt}))),ac=x({executable:Qt(),owner:Xt,lamports:A(),data:Bp,rentEpoch:A()}),OB=x({pubkey:Xt,account:ac}),PB=pi(yt([oa(ee.Buffer),Wh]),yt([v_,Wh]),r=>Array.isArray(r)?he(r,Bp):r),Vh=x({executable:Qt(),owner:Xt,lamports:A(),data:PB,rentEpoch:A()}),TB=x({pubkey:Xt,account:Vh}),RB=x({state:yt([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:A(),inactive:A()}),BB=Ue(H(x({signature:U(),slot:A(),err:Ys,memo:G(U()),blockTime:le(G(A()))}))),xB=Ue(H(x({signature:U(),slot:A(),err:Ys,memo:G(U()),blockTime:le(G(A()))}))),MB=x({subscription:A(),result:$l(ac)}),CB=x({pubkey:Xt,account:ac}),LB=x({subscription:A(),result:$l(CB)}),KB=x({parent:A(),slot:A(),root:A()}),NB=x({subscription:A(),result:KB}),DB=yt([x({type:yt([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:A(),timestamp:A()}),x({type:xe("createdBank"),parent:A(),slot:A(),timestamp:A()}),x({type:xe("frozen"),slot:A(),timestamp:A(),stats:x({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),x({type:xe("dead"),slot:A(),timestamp:A(),err:U()})]),FB=x({subscription:A(),result:DB}),UB=x({subscription:A(),result:$l(yt([cB,uB]))}),zB=x({subscription:A(),result:A()}),WB=x({pubkey:U(),gossip:G(U()),tpu:G(U()),rpc:G(U()),version:G(U())}),lb=x({votePubkey:U(),nodePubkey:U(),activatedStake:A(),epochVoteAccount:Qt(),epochCredits:H(aa([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:G(A())}),VB=Ue(x({current:H(lb),delinquent:H(lb)})),$B=yt([xe("processed"),xe("confirmed"),xe("finalized")]),jB=x({slot:A(),confirmations:G(A()),err:Ys,confirmationStatus:le($B)}),qB=Ft(H(G(jB))),GB=Ue(A()),A_=x({accountKey:Xt,writableIndexes:H(A()),readonlyIndexes:H(A())}),xp=x({signatures:H(U()),message:x({accountKeys:H(U()),header:x({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:H(x({accounts:H(A()),data:U(),programIdIndex:A()})),recentBlockhash:U(),addressTableLookups:le(H(A_))})}),S_=x({pubkey:Xt,signer:Qt(),writable:Qt(),source:le(yt([xe("transaction"),xe("lookupTable")]))}),k_=x({accountKeys:H(S_),signatures:H(U())}),I_=x({parsed:gi(),program:U(),programId:Xt}),E_=x({accounts:H(Xt),data:U(),programId:Xt}),HB=yt([E_,I_]),YB=yt([x({parsed:gi(),program:U(),programId:U()}),x({accounts:H(U()),data:U(),programId:U()})]),O_=pi(HB,YB,r=>"accounts"in r?he(r,E_):he(r,I_)),P_=x({signatures:H(U()),message:x({accountKeys:H(S_),instructions:H(O_),recentBlockhash:U(),addressTableLookups:le(G(H(A_)))})}),cl=x({accountIndex:A(),mint:U(),owner:le(U()),uiTokenAmount:zh}),T_=x({writable:H(Xt),readonly:H(Xt)}),jl=x({err:Ys,fee:A(),innerInstructions:le(G(H(x({index:A(),instructions:H(x({accounts:H(A()),data:U(),programIdIndex:A()}))})))),preBalances:H(A()),postBalances:H(A()),logMessages:le(G(H(U()))),preTokenBalances:le(G(H(cl))),postTokenBalances:le(G(H(cl))),loadedAddresses:le(T_),computeUnitsConsumed:le(A())}),Mp=x({err:Ys,fee:A(),innerInstructions:le(G(H(x({index:A(),instructions:H(O_)})))),preBalances:H(A()),postBalances:H(A()),logMessages:le(G(H(U()))),preTokenBalances:le(G(H(cl))),postTokenBalances:le(G(H(cl))),loadedAddresses:le(T_),computeUnitsConsumed:le(A())}),ua=yt([xe(0),xe("legacy")]),Js=x({pubkey:U(),lamports:A(),postBalance:G(A()),rewardType:G(U()),commission:le(G(A()))}),JB=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:xp,meta:G(jl),version:le(ua)})),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),QB=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),XB=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:k_,meta:G(jl),version:le(ua)})),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),ZB=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:P_,meta:G(Mp),version:le(ua)})),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),ex=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:k_,meta:G(Mp),version:le(ua)})),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),tx=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),rewards:le(H(Js)),blockTime:G(A()),blockHeight:G(A())}))),nx=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:xp,meta:G(jl)})),rewards:le(H(Js)),blockTime:G(A())}))),fb=Ue(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),signatures:H(U()),blockTime:G(A())}))),uh=Ue(G(x({slot:A(),meta:G(jl),blockTime:le(G(A())),transaction:xp,version:le(ua)}))),Pu=Ue(G(x({slot:A(),transaction:P_,meta:G(Mp),blockTime:le(G(A())),version:le(ua)}))),rx=Ft(x({blockhash:U(),feeCalculator:x({lamportsPerSignature:A()})})),ix=Ft(x({blockhash:U(),lastValidBlockHeight:A()})),sx=Ft(Qt()),ox=x({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()}),ax=Ue(H(ox)),cx=Ft(G(x({feeCalculator:x({lamportsPerSignature:A()})}))),ux=Ue(U()),lx=Ue(U()),fx=x({err:Ys,logs:H(U()),signature:U()}),dx=x({result:$l(fx),subscription:A()}),hx={"solana-client":"js/0.0.0-development"};class px{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async d=>{const{commitment:m,config:I}=Rt(d),O=this._buildArgs([],m,void 0,I),M=ab(O);return h[M]=h[M]??(async()=>{try{const S=await this._rpcRequest("getBlockHeight",O),R=he(S,Ue(A()));if("error"in R)throw new Ae(R.error,"failed to get block height information");return R.result}finally{delete h[M]}})(),await h[M]}})();let n,i,s,a,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=ZR(e),this._rpcWsEndpoint=n||XR(e),this._rpcClient=dB(e,i,s,a,u,f),this._rpcRequest=hB(this._rpcClient),this._rpcBatchRequest=pB(this._rpcClient),this._rpcWebSocket=new HR(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),u=he(a,Ft(A()));if("error"in u)throw new Ae(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=he(t,Ue(G(A())));if("error"in n)throw new Ae(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=he(e,Ue(A()));if("error"in t)throw new Ae(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=he(e,wB);if("error"in t)throw new Ae(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=he(n,AB);if("error"in i)throw new Ae(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=he(i,Ft(zh));if("error"in s)throw new Ae(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=he(i,Ft(zh));if("error"in s)throw new Ae(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Rt(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const u=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",u),h=he(f,kB);if("error"in h)throw new Ae(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=he(a,IB);if("error"in u)throw new Ae(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=he(i,EB);if("error"in s)throw new Ae(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=he(i,SB);if("error"in s)throw new Ae(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ft(G(ac)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),u=he(a,Ft(G(Vh)));if("error"in u)throw new Ae(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ft(H(G(Vh))));if("error"in f)throw new Ae(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(h=>h.toBase58()),a=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",a),f=he(u,Ft(H(G(ac))));if("error"in f)throw new Ae(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Rt(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",a),f=he(u,Ue(RB));if("error"in f)throw new Ae(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),{encoding:s,...a}=i||{},u=this._buildArgs([e.toBase58()],n,s||"base64",a),f=await this._rpcRequest("getProgramAccounts",u),h=H(OB),d=a.withContext===!0?he(f,Ft(h)):he(f,Ue(h));if("error"in d)throw new Ae(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),u=he(a,Ue(H(TB)));if("error"in u)throw new Ae(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const a=e;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=$e.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return tt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((f,h)=>{try{n=this.onSignature(t,(m,I)=>{n=void 0;const O={context:I,value:m};f({__type:Oi.PROCESSED,response:O})},e);const d=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&m()})});(async()=>{if(await d,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:I,value:O}=m;if(O!=null)if(O!=null&&O.err)h(O.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(O.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(O.confirmationStatus==="processed"||O.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:Oi.PROCESSED,response:{context:I,value:O}})}})()}catch(d){h(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(m=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let O=await I();if(!s){for(;O<=n;)if(await Ts(1e3),s||(O=await I(),s))return;m({__type:Oi.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(t);let d;try{const m=await Promise.race([h,f,a]);if(m.__type===Oi.PROCESSED)d=m.response;else throw new Ep(i)}finally{s=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let u=!1;const f=new Promise(O=>{let M=s,S=null;const R=async()=>{try{const{context:C,value:Y}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return S=C.slot,Y==null?void 0:Y.nonce}catch{return M}};(async()=>{if(M=await R(),!u)for(;;){if(s!==M){O({__type:Oi.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await Ts(2e3),u||(M=await R(),u))return}})()}),{abortConfirmation:h,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),m=this.getCancellationPromise(t);let I;try{const O=await Promise.race([m,d,f]);if(O.__type===Oi.PROCESSED)I=O.response;else{let M;for(;;){const S=await this.getSignatureStatus(a);if(S==null)break;if(S.context.slot<(O.slotInWhichNonceDidAdvance??n)){await Ts(400);continue}M=S;break}if(M!=null&&M.value){const S=e||"finalized",{confirmationStatus:R}=M.value;switch(S){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new To(a);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new To(a);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new To(a);break;default:(C=>{})(S)}I={context:M.context,value:{err:M.value.err}}}else throw new To(a)}}finally{u=!0,h()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(f=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Oi.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([a,i]);if(f.__type===Oi.PROCESSED)u=f.response;else throw new Op(t,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=he(e,Ue(H(WB)));if("error"in t)throw new Ae(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=he(n,VB);if("error"in i)throw new Ae(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=he(s,Ue(A()));if("error"in a)throw new Ae(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=he(s,Ue(U()));if("error"in a)throw new Ae(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=he(i,Ue(H(Xt)));if("error"in s)throw new Ae(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);tt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=he(i,qB);if("error"in s)throw new Ae(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=he(s,Ue(A()));if("error"in a)throw new Ae(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=he(n,gB);if("error"in i)throw new Ae(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Rt(n),a=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",a),f=he(u,nB);if("error"in f)throw new Ae(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=he(e,yB);if("error"in t)throw new Ae(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=he(s,bB);if("error"in a)throw new Ae(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=he(e,vB);if("error"in t)throw new Ae(t.error,"failed to get epoch schedule");const n=t.result;return new b_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=he(e,_B);if("error"in t)throw new Ae(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=he(i,GB);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=he(n,rx);if("error"in i)throw new Ae(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=he(t,ax);if("error"in n)throw new Ae(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=he(i,cx);if("error"in s)throw new Ae(s.error,"failed to get fee calculator");const{context:a,value:u}=s.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=ze(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=he(s,Ft(G(A())));if("error"in a)throw new Ae(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=he(i,mB);if("error"in s)throw new Ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=he(s,ix);if("error"in a)throw new Ae(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),u=he(a,sx);if("error"in u)throw new Ae(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=he(e,Ue(lB));if("error"in t)throw new Ae(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=he(e,Ue(U()));if("error"in t)throw new Ae(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,XB);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,QB);if("error"in u)throw u.error;return u.result}default:{const u=he(a,JB);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:h,meta:d,version:m})=>({meta:d,transaction:{...h,message:ch(m,h.message)},version:m}))}:null}}}catch(u){throw new Ae(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=he(a,ex);if("error"in u)throw u.error;return u.result}case"none":{const u=he(a,tx);if("error"in u)throw u.error;return u.result}default:{const u=he(a,ZB);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Ae(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=he(s,fB);if("error"in a)throw new Ae(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),u=he(a,uh);if("error"in u)throw new Ae(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:ch(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Rt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),u=he(a,Pu);if("error"in u)throw new Ae(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,Pu);if("error"in h)throw new Ae(h.error,"failed to get transactions");return h.result})}async getTransactions(e,t){const{commitment:n,config:i}=Rt(t),s=e.map(f=>{const h=this._buildArgsAtLeastConfirmed([f],n,void 0,i);return{methodName:"getTransaction",args:h}});return(await this._rpcBatchRequest(s)).map(f=>{const h=he(f,uh);if("error"in h)throw new Ae(h.error,"failed to get transactions");const d=h.result;return d&&{...d,transaction:{...d.transaction,message:ch(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,nx);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const u={...a,transactions:a.transactions.map(({transaction:f,meta:h})=>{const d=new Jr(f.message);return{meta:h,transaction:{...f,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:h})=>({meta:h,transaction:lt.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=he(s,Ue(H(A())));if("error"in a)throw new Ae(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=he(i,fb);if("error"in s)throw new Ae(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=he(i,fb);if("error"in s)throw new Ae(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,uh);if("error"in s)throw new Ae(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const u=new Jr(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:lt.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=he(i,Pu);if("error"in s)throw new Ae(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>{const u=this._buildArgsAtLeastConfirmed([a],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(n)).map(a=>{const u=he(a,Pu);if("error"in u)throw new Ae(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=he(s,BB);if("error"in a)throw new Ae(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=he(s,xB);if("error"in a)throw new Ae(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Uh({key:e,state:Uh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Vl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=he(n,ux);if("error"in i)throw new Ae(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ts(100);const n=Date.now()-this._blockhashInfo.lastFetch>=__;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ts(g_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Rt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=he(s,Ft(A()));if("error"in a)throw new Ae(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const S=e.serialize(),R=ee.Buffer.from(S).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment);const Y=[R,C],ae=await this._rpcRequest("simulateTransaction",Y),oe=he(ae,ub);if("error"in oe)throw new Error("failed to simulate transaction: "+oe.error.message);return oe.result}let i;if(e instanceof lt){let M=e;i=new lt,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=lt.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const S=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const a=i._compile(),u=a.serialize(),h=i._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:M}}s&&(d.sigVerify=!0);const m=[h,d],I=await this._rpcRequest("simulateTransaction",m),O=he(I,ub);if("error"in O){let M;if("data"in O.error&&(M=O.error.data.logs,M&&Array.isArray(M))){const S=`
    `,R=S+M.join(S);console.error(O.error.message,R)}throw new Fh("failed to simulate transaction: "+O.error.message,M)}return O.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=ze(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],u=await this._rpcRequest("sendTransaction",a),f=he(u,lx);if("error"in f){let h;throw"data"in f.error&&(h=f.error.data.logs),new Fh("failed to send transaction: "+f.error.message,h)}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${a} error for argument`,s,u.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=he(e,MB);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=ab([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];tt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=he(e,LB);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=he(e,dx);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=he(e,NB);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=he(e,FB);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=he(e,UB);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){t(a.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),u=this._makeSubscription({callback:(f,h)=>{t(f,h);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=he(e,zB);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Do{constructor(e){this._keypair=void 0,this._keypair=e??ib()}static generate(){return new Do(ib())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=al(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Do({publicKey:n,secretKey:e})}static fromSeed(e){const t=al(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Do({publicKey:t,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Ti=Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),qo("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),qo(),Pt(qe(),yr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});class gx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ti))if(a.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ut(Ti.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ut(Ti.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new pe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Cp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Cp{constructor(){}static createLookupTable(e){const[t,n]=pe.findProgramAddressSync([e.authority.toBuffer(),dp(BigInt(e.recentSlot),8)],this.programId),i=Ti.CreateLookupTable,s=Qe(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:vn.programId,isSigner:!1,isWritable:!1}];return[new _t({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=Ti.FreezeLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Ti.ExtendLookupTable,n=Qe(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:vn.programId,isSigner:!1,isWritable:!1}),new _t({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Ti.DeactivateLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _t({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Ti.CloseLookupTable,n=Qe(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new _t({programId:this.programId,keys:i,data:n})}}Cp.programId=new pe("AddressLookupTab1e1111111111111111111111111");class yx{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ke("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(ai))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=ut(ai.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ut(ai.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ut(ai.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ut(ai.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Lp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ai=Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),qo("microLamports")])}});class Lp{constructor(){}static requestUnits(e){const t=ai.RequestUnits,n=Qe(t,e);return new _t({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=ai.RequestHeapFrame,n=Qe(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=ai.SetComputeUnitLimit,n=Qe(t,e);return new _t({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=ai.SetComputeUnitPrice,n=Qe(t,{microLamports:BigInt(e.microLamports)});return new _t({keys:[],programId:this.programId,data:n})}}Lp.programId=new pe("ComputeBudget111111111111111111111111111111");const db=64,hb=32,pb=64,gb=ie([ke("numSignatures"),ke("padding"),Ut("signatureOffset"),Ut("signatureInstructionIndex"),Ut("publicKeyOffset"),Ut("publicKeyInstructionIndex"),Ut("messageDataOffset"),Ut("messageDataSize"),Ut("messageInstructionIndex")]);class ql{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;tt(t.length===hb,`Public Key must be ${hb} bytes but received ${t.length} bytes`),tt(i.length===pb,`Signature must be ${pb} bytes but received ${i.length} bytes`);const a=gb.span,u=a+t.length,f=u+i.length,h=1,d=ee.Buffer.alloc(f+n.length),m=s??65535;return gb.encode({numSignatures:h,padding:0,signatureOffset:u,signatureInstructionIndex:m,publicKeyOffset:a,publicKeyInstructionIndex:m,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:m},d),d.fill(t,a),d.fill(i,u),d.fill(n,f),new _t({keys:[],programId:ql.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;tt(t.length===db,`Private key must be ${db} bytes but received ${t.length} bytes`);try{const s=Do.fromSecretKey(t),a=s.publicKey.toBytes(),u=kp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:u,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ql.programId=new pe("Ed25519SigVerify111111111111111111111111111");const mx=(r,e)=>{const t=yc.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};yc.utils.isValidPrivateKey;const bx=yc.getPublicKey,yb=32,lh=20,mb=64,vx=11,fh=ie([ke("numSignatures"),Ut("signatureOffset"),ke("signatureInstructionIndex"),Ut("ethAddressOffset"),ke("ethAddressInstructionIndex"),Ut("messageDataOffset"),Ut("messageDataSize"),ke("messageInstructionIndex"),Ye(20,"ethAddress"),Ye(64,"signature"),ke("recoveryId")]);class Fo{constructor(){}static publicKeyToEthAddress(e){tt(e.length===mb,`Public key must be ${mb} bytes but received ${e.length} bytes`);try{return ee.Buffer.from($m(ze(e))).slice(-lh)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:a}=e;return Fo.createInstructionWithEthAddress({ethAddress:Fo.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:a=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=ee.Buffer.from(t.substr(2),"hex"):u=ee.Buffer.from(t,"hex"):u=t,tt(u.length===lh,`Address must be ${lh} bytes but received ${u.length} bytes`);const f=1+vx,h=f,d=f+u.length,m=d+i.length+1,I=1,O=ee.Buffer.alloc(fh.span+n.length);return fh.encode({numSignatures:I,signatureOffset:d,signatureInstructionIndex:a,ethAddressOffset:h,ethAddressInstructionIndex:a,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:a,signature:ze(i),ethAddress:ze(u),recoveryId:s},O),O.fill(ze(n),fh.span),new _t({keys:[],programId:Fo.programId,data:O})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;tt(t.length===yb,`Private key must be ${yb} bytes but received ${t.length} bytes`);try{const s=ze(t),a=bx(s,!1).slice(1),u=ee.Buffer.from($m(ze(n))),[f,h]=mx(u,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:f,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Fo.programId=new pe("KeccakSecp256k11111111111111111111111111111");var R_;const B_=new pe("StakeConfig11111111111111111111111111111111");class x_{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class _c{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}R_=_c;_c.default=new R_(0,0,pe.default);class _x{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(dn))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=ut(dn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new x_(new pe(t.staker),new pe(t.withdrawer)),lockup:new _c(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ut(dn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=ut(dn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=ut(dn.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(s),newAuthorizedPubkey:new pe(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(dn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(dn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ut(dn.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ut(dn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Gl.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const dn=Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),AR(),SR()])},Authorize:{index:1,layout:ie([se("instruction"),qe("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),qe("newAuthorized"),se("stakeAuthorizationType"),xs("authoritySeed"),qe("authorityOwner")])}}),wx=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Gl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||_c.default,a=dn.Initialize,u=Qe(a,{authorized:{staker:ze(n.staker.toBuffer()),withdrawer:ze(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:ze(s.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:jo,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new _t(f)}static createAccountWithSeed(e){const t=new lt;t.add(vn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new lt;t.add(vn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=dn.Delegate,a=Qe(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:Ju,isSigner:!1,isWritable:!1},{pubkey:B_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=e,u=dn.Authorize,f=Qe(u,{newAuthorized:ze(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:f}=e,h=dn.AuthorizeWithSeed,d=Qe(h,{newAuthorized:ze(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:ze(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:si,isSigner:!1,isWritable:!1}];return f&&m.push({pubkey:f,isSigner:!1,isWritable:!1}),new lt().add({keys:m,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,a=dn.Split,u=Qe(a,{lamports:s});return new _t({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e){const t=new lt;return t.add(vn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:a,lamports:u}=e,f=new lt;return f.add(vn.allocate({accountPubkey:i,basePubkey:s,seed:a,space:this.space,programId:this.programId})),f.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=dn.Merge,a=Qe(s);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:Ju,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:a}=e,u=dn.Withdraw,f=Qe(u,{lamports:s}),h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:Ju,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&h.push({pubkey:a,isSigner:!1,isWritable:!1}),new lt().add({keys:h,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=dn.Deactivate,s=Qe(i);return new lt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Gl.programId=new pe("Stake11111111111111111111111111111111111111");Gl.space=200;class M_{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class Ax{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let i;for(const[s,a]of Object.entries(Ri))if(a.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ut(Ri.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new M_(new pe(t.nodePubkey),new pe(t.authorizedVoter),new pe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=ut(Ri.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new pe(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=ut(Ri.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ut(Ri.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(la.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ri=Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),kR()])},Authorize:{index:1,layout:ie([se("instruction"),qe("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),IR()])}}),Sx=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class la{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Ri.InitializeAccount,a=Qe(s,{voteInit:{nodePubkey:ze(i.nodePubkey.toBuffer()),authorizedVoter:ze(i.authorizedVoter.toBuffer()),authorizedWithdrawer:ze(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:jo,isSigner:!1,isWritable:!1},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new _t(u)}static createAccount(e){const t=new lt;return t.add(vn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,a=Ri.Authorize,u=Qe(a,{newAuthorized:ze(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:u}=e,f=Ri.AuthorizeWithSeed,h=Qe(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ze(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:ze(s.toBuffer()),voteAuthorizationType:a.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:si,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new lt().add({keys:d,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,a=Ri.Withdraw,u=Qe(a,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new lt().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return la.withdraw(e)}}la.programId=new pe("Vote111111111111111111111111111111111111111");la.space=3731;const C_=new pe("Va1idator1nfo111111111111111111111111111111"),kx=x({name:U(),website:le(U()),details:le(U()),keybaseUsername:le(U())});class Kp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Gn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const a=new pe(t.slice(0,gr));t=t.slice(gr);const u=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:a,isSigner:u})}if(i[0].publicKey.equals(C_)&&i[1].isSigner){const s=xs().decode(ee.Buffer.from(t)),a=JSON.parse(s);return $P(a,kx),new Kp(i[1].publicKey,a)}return null}}const Ix=new pe("Vote111111111111111111111111111111111111111"),Ex=ie([qe("nodePubkey"),qe("authorizedWithdrawer"),ke("commission"),et(),Pt(ie([et("slot"),se("confirmationCount")]),yr(se(),-8),"votes"),ke("rootSlotValid"),et("rootSlot"),et(),Pt(ie([et("epoch"),qe("authorizedVoter")]),yr(se(),-8),"authorizedVoters"),ie([Pt(ie([qe("authorizedPubkey"),et("epochOfLastAuthorizedSwitch"),et("targetEpoch")]),32,"buf"),et("idx"),ke("isEmpty")],"priorVoters"),et(),Pt(ie([et("epoch"),et("credits"),et("prevCredits")]),yr(se(),-8),"epochCredits"),ie([et("slot"),et("timestamp")],"lastTimestamp")]);class Np{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Ex.decode(ze(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Np({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(Ox),priorVoters:Px(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Ox({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new pe(r)}}function bb({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new pe(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Px({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(bb),...r.slice(0,e).map(bb)]}const vb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Tx(r,e){const t=e===!1?"http":"https";if(!r)return vb[t].devnet;const n=vb[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function Rx(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},u=await r.sendRawTransaction(e,a),f=s&&s.commitment,d=(await(i?r.confirmTransaction(i,f):r.confirmTransaction(u,f))).value;if(d.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const Bx=1e9;var xx=Object.freeze(Object.defineProperty({__proto__:null,Account:vR,AddressLookupTableAccount:Uh,AddressLookupTableInstruction:gx,AddressLookupTableProgram:Cp,Authorized:x_,BLOCKHASH_CACHE_TIMEOUT_MS:__,BPF_LOADER_DEPRECATED_PROGRAM_ID:_R,BPF_LOADER_PROGRAM_ID:FR,BpfLoader:UR,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ai,ComputeBudgetInstruction:yx,ComputeBudgetProgram:Lp,Connection:px,Ed25519Program:ql,Enum:mR,EpochSchedule:b_,FeeCalculatorLayout:y_,Keypair:Do,LAMPORTS_PER_SOL:Bx,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Ti,Loader:Fs,Lockup:_c,MAX_SEED_LENGTH:h_,Message:Jr,MessageAccountKeys:oc,MessageV0:Ds,NONCE_ACCOUNT_LENGTH:Dh,NonceAccount:Vl,PACKET_DATA_SIZE:ts,PUBLIC_KEY_LENGTH:gr,PublicKey:pe,SIGNATURE_LENGTH_IN_BYTES:$o,SOLANA_SCHEMA:Ha,STAKE_CONFIG_ID:B_,STAKE_INSTRUCTION_LAYOUTS:dn,SYSTEM_INSTRUCTION_LAYOUTS:kt,SYSVAR_CLOCK_PUBKEY:si,SYSVAR_EPOCH_SCHEDULE_PUBKEY:RR,SYSVAR_INSTRUCTIONS_PUBKEY:BR,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Yu,SYSVAR_RENT_PUBKEY:jo,SYSVAR_REWARDS_PUBKEY:xR,SYSVAR_SLOT_HASHES_PUBKEY:MR,SYSVAR_SLOT_HISTORY_PUBKEY:CR,SYSVAR_STAKE_HISTORY_PUBKEY:Ju,Secp256k1Program:Fo,SendTransactionError:Fh,SolanaJSONRPCError:Ae,SolanaJSONRPCErrorCode:qR,StakeAuthorizationLayout:wx,StakeInstruction:_x,StakeProgram:Gl,Struct:Ip,SystemInstruction:NR,SystemProgram:vn,Transaction:lt,TransactionExpiredBlockheightExceededError:Ep,TransactionExpiredNonceInvalidError:To,TransactionExpiredTimeoutError:Op,TransactionInstruction:_t,TransactionMessage:Tp,TransactionStatus:Oi,VALIDATOR_INFO_KEY:C_,VERSION_PREFIX_MASK:zl,VOTE_PROGRAM_ID:Ix,ValidatorInfo:Kp,VersionedMessage:Pp,VersionedTransaction:Rp,VoteAccount:Np,VoteAuthorizationLayout:Sx,VoteInit:M_,VoteInstruction:Ax,VoteProgram:la,clusterApiUrl:Tx,sendAndConfirmRawTransaction:Rx,sendAndConfirmTransaction:Nh},Symbol.toStringTag,{value:"Module"})),Li=gc(xx);const _b=()=>{const r=Qr.utils.randomPrivateKey(),e=$h(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},$h=Qr.getPublicKey;function wb(r){try{return Qr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Mx=(r,e)=>Qr.sign(r,e.slice(0,32)),Cx=Qr.verify,qn=r=>ee.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ee.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ee.Buffer.from(r);class Lx{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(wv(Qu,this))}static decode(e){return Av(Qu,this,e)}static decodeUnchecked(e){return Sv(Qu,this,e)}}const Qu=new Map;var L_;let K_;const Kx=32,Ms=32;function Nx(r){return r._bn!==void 0}let Ab=1;K_=Symbol.toStringTag;class ve extends Lx{constructor(e){if(super({}),this._bn=void 0,Nx(e))this._bn=e._bn;else{if(typeof e=="string"){const t=$e.decode(e);if(t.length!=Ms)throw new Error("Invalid public key input");this._bn=new Mi(t)}else this._bn=new Mi(e);if(this._bn.byteLength()>Ms)throw new Error("Invalid public key input")}}static unique(){const e=new ve(Ab);return Ab+=1,new ve(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return $e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===Ms)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[K_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),n.toBuffer()]),s=il(i);return new ve(s)}static createProgramAddressSync(e,t){let n=ee.Buffer.alloc(0);e.forEach(function(s){if(s.length>Kx)throw new TypeError("Max seed length exceeded");n=ee.Buffer.concat([n,qn(s)])}),n=ee.Buffer.concat([n,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const i=il(n);if(wb(i))throw new Error("Invalid seeds, address must fall off the curve");return new ve(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ee.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ve(e);return wb(t.toBytes())}}L_=ve;ve.default=new L_("11111111111111111111111111111111");Qu.set(ve,{kind:"struct",fields:[["_bn","u256"]]});new ve("BPFLoader1111111111111111111111111111111111");const jh=1280-40-8,Dx=127,qh=64;class Sb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Xe=(r="publicKey")=>Ye(32,r),Ro=(r="string")=>{const e=ie([se("length"),se("lengthPadding"),Ye(yr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,u)=>{const f={chars:ee.Buffer.from(s,"utf8")};return n(f,a,u)},i.alloc=s=>se().span+se().span+ee.Buffer.from(s,"utf8").length,i},Fx=(r="authorized")=>ie([Xe("staker"),Xe("withdrawer")],r),Ux=(r="lockup")=>ie([Bt("unixTimestamp"),Bt("epoch"),Xe("custodian")],r),zx=(r="voteInit")=>ie([Xe("nodePubkey"),Xe("authorizedVoter"),Xe("authorizedWithdrawer"),ke("commission")],r),Wx=(r="voteAuthorizeWithSeedArgs")=>ie([se("voteAuthorizationType"),Xe("currentAuthorityDerivedKeyOwnerPubkey"),Ro("currentAuthorityDerivedKeySeed"),Xe("newAuthorized")],r);function N_(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return N_({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Wa(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Va(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function fr(r,e){if(!r)throw new Error(e||"Assertion failed")}class Dp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const u=a.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const u of a.keys){const f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new Dp(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];fr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),s=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{fr(t.length>0,"Expected at least one writable signer key");const[f]=t[0];fr(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ve(f)),...n.map(([f])=>new ve(f)),...i.map(([f])=>new ve(f)),...s.map(([f])=>new ve(f))];return[a,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const u=new ve(s),f=e.findIndex(h=>h.equals(u));f>=0&&(fr(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}class cc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ve(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:$e.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Sb(this.staticAccountKeys)}static compile(e){const t=Dp.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new Sb(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:$e.encode(u.data)}));return new cc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Va(t,e);const n=this.instructions.map(m=>{const{accounts:I,programIdIndex:O}=m,M=Array.from($e.decode(m.data));let S=[];Va(S,I.length);let R=[];return Va(R,M.length),{programIdIndex:O,keyIndicesCount:ee.Buffer.from(S),keyIndices:I,dataLength:ee.Buffer.from(R),data:M}});let i=[];Va(i,n.length);let s=ee.Buffer.alloc(jh);ee.Buffer.from(i).copy(s);let a=i.length;n.forEach(m=>{a+=ie([ke("programIdIndex"),Ye(m.keyIndicesCount.length,"keyIndicesCount"),Pt(ke("keyIndex"),m.keyIndices.length,"keyIndices"),Ye(m.dataLength.length,"dataLength"),Pt(ke("userdatum"),m.data.length,"data")]).encode(m,s,a)}),s=s.slice(0,a);const u=ie([Ye(1,"numRequiredSignatures"),Ye(1,"numReadonlySignedAccounts"),Ye(1,"numReadonlyUnsignedAccounts"),Ye(t.length,"keyCount"),Pt(Xe("key"),e,"keys"),Xe("recentBlockhash")]),f={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(m=>qn(m.toBytes())),recentBlockhash:$e.decode(this.recentBlockhash)};let h=ee.Buffer.alloc(2048);const d=u.encode(f,h);return s.copy(h,d),h.slice(0,d+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Dx))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),a=Wa(t);let u=[];for(let I=0;I<a;I++){const O=t.slice(0,Ms);t=t.slice(Ms),u.push(new ve(ee.Buffer.from(O)))}const f=t.slice(0,Ms);t=t.slice(Ms);const h=Wa(t);let d=[];for(let I=0;I<h;I++){const O=t.shift(),M=Wa(t),S=t.slice(0,M);t=t.slice(M);const R=Wa(t),C=t.slice(0,R),Y=$e.encode(ee.Buffer.from(C));t=t.slice(R),d.push({programIdIndex:O,accounts:S,data:Y})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:$e.encode(ee.Buffer.from(f)),accountKeys:u,instructions:d};return new cc(m)}}const Vx=ee.Buffer.alloc(qh).fill(0);class gt{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Nt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],s=[];t.forEach(S=>{S.keys.forEach(C=>{s.push({...C})});const R=S.programId.toString();i.includes(R)||i.push(R)}),i.forEach(S=>{s.push({pubkey:new ve(S),isSigner:!1,isWritable:!1})});const a=[];s.forEach(S=>{const R=S.pubkey.toString(),C=a.findIndex(Y=>Y.pubkey.toString()===R);C>-1?(a[C].isWritable=a[C].isWritable||S.isWritable,a[C].isSigner=a[C].isSigner||S.isSigner):a.push(S)}),a.sort(function(S,R){if(S.isSigner!==R.isSigner)return S.isSigner?-1:1;if(S.isWritable!==R.isWritable)return S.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const u=a.findIndex(S=>S.pubkey.equals(n));if(u>-1){const[S]=a.splice(u,1);S.isSigner=!0,S.isWritable=!0,a.unshift(S)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const S of this.signatures){const R=a.findIndex(C=>C.pubkey.equals(S.publicKey));if(R>-1)a[R].isSigner||(a[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let f=0,h=0,d=0;const m=[],I=[];a.forEach(({pubkey:S,isSigner:R,isWritable:C})=>{R?(m.push(S.toString()),f+=1,C||(h+=1)):(I.push(S.toString()),C||(d+=1))});const O=m.concat(I),M=t.map(S=>{const{data:R,programId:C}=S;return{programIdIndex:O.indexOf(C.toString()),accounts:S.keys.map(Y=>O.indexOf(Y.pubkey.toString())),data:$e.encode(R)}});return M.forEach(S=>{fr(S.programIdIndex>=0),S.accounts.forEach(R=>fr(R>=0))}),new cc({header:{numRequiredSignatures:f,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:d},accountKeys:O,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Mx(n,i.secretKey);this._addSignature(i.publicKey,qn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){fr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!Cx(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Va(n,t.length);const i=n.length+t.length*64+e.length,s=ee.Buffer.alloc(i);return fr(t.length<256),ee.Buffer.from(n).copy(s,0),t.forEach(({signature:a},u)=>{a!==null&&(fr(a.length===64,"signature has invalid length"),ee.Buffer.from(a).copy(s,n.length+u*64))}),e.copy(s,n.length+t.length*64),fr(s.length<=jh,`Transaction too large: ${s.length} > ${jh}`),s}get keys(){return fr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return fr(this.instructions.length===1),this.instructions[0].programId}get data(){return fr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Wa(t);let i=[];for(let s=0;s<n;s++){const a=t.slice(0,qh);t=t.slice(qh),i.push($e.encode(ee.Buffer.from(a)))}return Nt.populate(cc.from(t),i)}static populate(e,t=[]){const n=new Nt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==$e.encode(Vx)?null:$e.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const u=e.accountKeys[a];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new gt({keys:s,programId:e.accountKeys[i.programIdIndex],data:$e.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}new ve("SysvarC1ock11111111111111111111111111111111");new ve("SysvarEpochSchedu1e111111111111111111111111");new ve("Sysvar1nstructions1111111111111111111111111");const dh=new ve("SysvarRecentB1ockHashes11111111111111111111"),Bo=new ve("SysvarRent111111111111111111111111111111111");new ve("SysvarRewards111111111111111111111111111111");new ve("SysvarS1otHashes111111111111111111111111111");new ve("SysvarS1otHistory11111111111111111111111111");new ve("SysvarStakeHistory1111111111111111111111111");async function $x(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function Rr(r,e){const t=r.layout.span>=0?r.layout.span:N_(r,e),n=ee.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const jx=et("lamportsPerSignature"),qx=ie([se("version"),se("state"),Xe("authorizedPubkey"),Xe("nonce"),ie([jx],"feeCalculator")]),kb=qx.span,Gx=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},Hx=r=>e=>{const t=Ye(r,e),{encode:n,decode:i}=Gx(t),s=t;return s.decode=(a,u)=>{const f=i(a,u);return kv(ee.Buffer.from(f))},s.encode=(a,u,f)=>{const h=dp(a,r);return n(h,u,f)},s},Go=Hx(8),Br=Object.freeze({Create:{index:0,layout:ie([se("instruction"),Bt("lamports"),Bt("space"),Xe("programId")])},Assign:{index:1,layout:ie([se("instruction"),Xe("programId")])},Transfer:{index:2,layout:ie([se("instruction"),Go("lamports")])},CreateWithSeed:{index:3,layout:ie([se("instruction"),Xe("base"),Ro("seed"),Bt("lamports"),Bt("space"),Xe("programId")])},AdvanceNonceAccount:{index:4,layout:ie([se("instruction")])},WithdrawNonceAccount:{index:5,layout:ie([se("instruction"),Bt("lamports")])},InitializeNonceAccount:{index:6,layout:ie([se("instruction"),Xe("authorized")])},AuthorizeNonceAccount:{index:7,layout:ie([se("instruction"),Xe("authorized")])},Allocate:{index:8,layout:ie([se("instruction"),Bt("space")])},AllocateWithSeed:{index:9,layout:ie([se("instruction"),Xe("base"),Ro("seed"),Bt("space"),Xe("programId")])},AssignWithSeed:{index:10,layout:ie([se("instruction"),Xe("base"),Ro("seed"),Xe("programId")])},TransferWithSeed:{index:11,layout:ie([se("instruction"),Go("lamports"),Ro("seed"),Xe("programId")])},UpgradeNonceAccount:{index:12,layout:ie([se("instruction")])}});class oi{constructor(){}static createAccount(e){const t=Br.Create,n=Rr(t,{lamports:e.lamports,space:e.space,programId:qn(e.programId.toBuffer())});return new gt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Br.TransferWithSeed;t=Rr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:qn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Br.Transfer;t=Rr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Br.AssignWithSeed;t=Rr(i,{base:qn(e.basePubkey.toBuffer()),seed:e.seed,programId:qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Br.Assign;t=Rr(i,{programId:qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Br.CreateWithSeed,n=Rr(t,{base:qn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:qn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Nt;"basePubkey"in e&&"seed"in e?t.add(oi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:kb,programId:this.programId})):t.add(oi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:kb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Br.InitializeNonceAccount,n=Rr(t,{authorized:qn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dh,isSigner:!1,isWritable:!1},{pubkey:Bo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceAdvance(e){const t=Br.AdvanceNonceAccount,n=Rr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new gt(i)}static nonceWithdraw(e){const t=Br.WithdrawNonceAccount,n=Rr(t,{lamports:e.lamports});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dh,isSigner:!1,isWritable:!1},{pubkey:Bo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Br.AuthorizeNonceAccount,n=Rr(t,{authorized:qn(e.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Br.AllocateWithSeed;t=Rr(i,{base:qn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Br.Allocate;t=Rr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:n,programId:this.programId,data:t})}}oi.programId=new ve("11111111111111111111111111111111");new ve("BPFLoader2111111111111111111111111111111111");ie([se("typeIndex"),Go("deactivationSlot"),et("lastExtendedSlot"),ke("lastExtendedStartIndex"),ke(),Pt(Xe(),yr(ke(),-1),"authority")]);const on=pi(oa(ve),U(),r=>new ve(r)),D_=aa([U(),xe("base64")]),Fp=pi(oa(ee.Buffer),D_,r=>ee.Buffer.from(r[0],"base64"));function F_(r){return yt([x({jsonrpc:xe("2.0"),id:U(),result:r}),x({jsonrpc:xe("2.0"),id:U(),error:x({code:gi(),message:U(),data:le(_v())})})])}const Yx=F_(gi());function It(r){return pi(F_(r),Yx,e=>"error"in e?e:{...e,result:he(e.result,r)})}function Ur(r){return It(x({context:x({slot:A()}),value:r}))}function Hl(r){return x({context:x({slot:A()}),value:r})}const Jx=x({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()});It(H(G(x({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:le(G(A()))}))));const Qx=H(x({slot:A(),prioritizationFee:A()})),Xx=x({total:A(),validator:A(),foundation:A(),epoch:A()}),Zx=x({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:le(A()),transactionCount:le(A())}),eM=x({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:Qt(),firstNormalEpoch:A(),firstNormalSlot:A()}),tM=Rl(U(),H(A())),Qs=G(yt([x({}),U()])),nM=x({err:Qs}),rM=xe("receivedSignature");x({"solana-core":U(),"feature-set":le(A())});Ur(x({err:G(yt([x({}),U()])),logs:G(H(U())),accounts:le(G(H(G(x({executable:Qt(),owner:U(),lamports:A(),data:H(U()),rentEpoch:le(A())}))))),unitsConsumed:le(A()),returnData:le(G(x({programId:U(),data:aa([U(),xe("base64")])})))}));Ur(x({byIdentity:Rl(U(),H(A())),range:x({firstSlot:A(),lastSlot:A()})}));It(Jx);It(Xx);It(Qx);It(Zx);It(eM);It(tM);It(A());Ur(x({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:H(on)}));const iM=x({amount:U(),uiAmount:G(A()),decimals:A(),uiAmountString:le(U())});Ur(H(x({address:on,amount:U(),uiAmount:G(A()),decimals:A(),uiAmountString:le(U())})));Ur(H(x({pubkey:on,account:x({executable:Qt(),owner:on,lamports:A(),data:Fp,rentEpoch:A()})})));const Gh=x({program:U(),parsed:gi(),space:A()});Ur(H(x({pubkey:on,account:x({executable:Qt(),owner:on,lamports:A(),data:Gh,rentEpoch:A()})})));Ur(H(x({lamports:A(),address:on})));const Up=x({executable:Qt(),owner:on,lamports:A(),data:Fp,rentEpoch:A()});x({pubkey:on,account:Up});const sM=pi(yt([oa(ee.Buffer),Gh]),yt([D_,Gh]),r=>Array.isArray(r)?he(r,Fp):r),oM=x({executable:Qt(),owner:on,lamports:A(),data:sM,rentEpoch:A()});x({pubkey:on,account:oM});x({state:yt([xe("active"),xe("inactive"),xe("activating"),xe("deactivating")]),active:A(),inactive:A()});It(H(x({signature:U(),slot:A(),err:Qs,memo:G(U()),blockTime:le(G(A()))})));It(H(x({signature:U(),slot:A(),err:Qs,memo:G(U()),blockTime:le(G(A()))})));x({subscription:A(),result:Hl(Up)});const aM=x({pubkey:on,account:Up});x({subscription:A(),result:Hl(aM)});const cM=x({parent:A(),slot:A(),root:A()});x({subscription:A(),result:cM});const uM=yt([x({type:yt([xe("firstShredReceived"),xe("completed"),xe("optimisticConfirmation"),xe("root")]),slot:A(),timestamp:A()}),x({type:xe("createdBank"),parent:A(),slot:A(),timestamp:A()}),x({type:xe("frozen"),slot:A(),timestamp:A(),stats:x({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),x({type:xe("dead"),slot:A(),timestamp:A(),err:U()})]);x({subscription:A(),result:uM});x({subscription:A(),result:Hl(yt([nM,rM]))});x({subscription:A(),result:A()});x({pubkey:U(),gossip:G(U()),tpu:G(U()),rpc:G(U()),version:G(U())});const Ib=x({votePubkey:U(),nodePubkey:U(),activatedStake:A(),epochVoteAccount:Qt(),epochCredits:H(aa([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:G(A())});It(x({current:H(Ib),delinquent:H(Ib)}));const lM=yt([xe("processed"),xe("confirmed"),xe("finalized")]),fM=x({slot:A(),confirmations:G(A()),err:Qs,confirmationStatus:le(lM)});Ur(H(G(fM)));It(A());const U_=x({accountKey:on,writableIndexes:H(A()),readonlyIndexes:H(A())}),zp=x({signatures:H(U()),message:x({accountKeys:H(U()),header:x({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:H(x({accounts:H(A()),data:U(),programIdIndex:A()})),recentBlockhash:U(),addressTableLookups:le(H(U_))})}),z_=x({pubkey:on,signer:Qt(),writable:Qt(),source:le(yt([xe("transaction"),xe("lookupTable")]))}),W_=x({accountKeys:H(z_),signatures:H(U())}),V_=x({parsed:gi(),program:U(),programId:on}),$_=x({accounts:H(on),data:U(),programId:on}),dM=yt([$_,V_]),hM=yt([x({parsed:gi(),program:U(),programId:U()}),x({accounts:H(U()),data:U(),programId:U()})]),j_=pi(dM,hM,r=>"accounts"in r?he(r,$_):he(r,V_)),q_=x({signatures:H(U()),message:x({accountKeys:H(z_),instructions:H(j_),recentBlockhash:U(),addressTableLookups:le(G(H(U_)))})}),ul=x({accountIndex:A(),mint:U(),owner:le(U()),uiTokenAmount:iM}),G_=x({writable:H(on),readonly:H(on)}),Yl=x({err:Qs,fee:A(),innerInstructions:le(G(H(x({index:A(),instructions:H(x({accounts:H(A()),data:U(),programIdIndex:A()}))})))),preBalances:H(A()),postBalances:H(A()),logMessages:le(G(H(U()))),preTokenBalances:le(G(H(ul))),postTokenBalances:le(G(H(ul))),loadedAddresses:le(G_),computeUnitsConsumed:le(A())}),Wp=x({err:Qs,fee:A(),innerInstructions:le(G(H(x({index:A(),instructions:H(j_)})))),preBalances:H(A()),postBalances:H(A()),logMessages:le(G(H(U()))),preTokenBalances:le(G(H(ul))),postTokenBalances:le(G(H(ul))),loadedAddresses:le(G_),computeUnitsConsumed:le(A())}),fa=yt([xe(0),xe("legacy")]),Xs=x({pubkey:U(),lamports:A(),postBalance:G(A()),rewardType:G(U()),commission:le(G(A()))});It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:zp,meta:G(Yl),version:le(fa)})),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:W_,meta:G(Yl),version:le(fa)})),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:q_,meta:G(Wp),version:le(fa)})),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:W_,meta:G(Wp),version:le(fa)})),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),rewards:le(H(Xs)),blockTime:G(A()),blockHeight:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),transactions:H(x({transaction:zp,meta:G(Yl)})),rewards:le(H(Xs)),blockTime:G(A())})));It(G(x({blockhash:U(),previousBlockhash:U(),parentSlot:A(),signatures:H(U()),blockTime:G(A())})));It(G(x({slot:A(),meta:Yl,blockTime:le(G(A())),transaction:zp,version:le(fa)})));It(G(x({slot:A(),transaction:q_,meta:G(Wp),blockTime:le(G(A())),version:le(fa)})));Ur(x({blockhash:U(),feeCalculator:x({lamportsPerSignature:A()})}));Ur(x({blockhash:U(),lastValidBlockHeight:A()}));Ur(Qt());const pM=x({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()});It(H(pM));Ur(G(x({feeCalculator:x({lamportsPerSignature:A()})})));It(U());It(U());const gM=x({err:Qs,logs:H(U()),signature:U()});x({result:Hl(gM),subscription:A()});class Zi{constructor(e){this._keypair=void 0,this._keypair=e??_b()}static generate(){return new Zi(_b())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=$h(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Zi({publicKey:n,secretKey:e})}static fromSeed(e){const t=$h(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Zi({publicKey:t,secretKey:n})}get publicKey(){return new ve(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ie([se("instruction"),Go("recentSlot"),ke("bumpSeed")])},FreezeLookupTable:{index:1,layout:ie([se("instruction")])},ExtendLookupTable:{index:2,layout:ie([se("instruction"),Go(),Pt(Xe(),yr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ie([se("instruction")])},CloseLookupTable:{index:4,layout:ie([se("instruction")])}});new ve("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ie([ke("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:ie([ke("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:ie([ke("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:ie([ke("instruction"),Go("microLamports")])}});new ve("ComputeBudget111111111111111111111111111111");ie([ke("numSignatures"),ke("padding"),Ut("signatureOffset"),Ut("signatureInstructionIndex"),Ut("publicKeyOffset"),Ut("publicKeyInstructionIndex"),Ut("messageDataOffset"),Ut("messageDataSize"),Ut("messageInstructionIndex")]);new ve("Ed25519SigVerify111111111111111111111111111");yc.utils.isValidPrivateKey;yc.getPublicKey;ie([ke("numSignatures"),Ut("signatureOffset"),ke("signatureInstructionIndex"),Ut("ethAddressOffset"),ke("ethAddressInstructionIndex"),Ut("messageDataOffset"),Ut("messageDataSize"),ke("messageInstructionIndex"),Ye(20,"ethAddress"),Ye(64,"signature"),ke("recoveryId")]);new ve("KeccakSecp256k11111111111111111111111111111");var H_;new ve("StakeConfig11111111111111111111111111111111");class Y_{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}H_=Y_;Y_.default=new H_(0,0,ve.default);Object.freeze({Initialize:{index:0,layout:ie([se("instruction"),Fx(),Ux()])},Authorize:{index:1,layout:ie([se("instruction"),Xe("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:ie([se("instruction")])},Split:{index:3,layout:ie([se("instruction"),Bt("lamports")])},Withdraw:{index:4,layout:ie([se("instruction"),Bt("lamports")])},Deactivate:{index:5,layout:ie([se("instruction")])},Merge:{index:7,layout:ie([se("instruction")])},AuthorizeWithSeed:{index:8,layout:ie([se("instruction"),Xe("newAuthorized"),se("stakeAuthorizationType"),Ro("authoritySeed"),Xe("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new ve("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ie([se("instruction"),zx()])},Authorize:{index:1,layout:ie([se("instruction"),Xe("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:ie([se("instruction"),Bt("lamports")])},AuthorizeWithSeed:{index:10,layout:ie([se("instruction"),Wx()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new ve("Vote111111111111111111111111111111111111111");new ve("Va1idator1nfo111111111111111111111111111111");x({name:U(),website:le(U()),details:le(U()),keybaseUsername:le(U())});new ve("Vote111111111111111111111111111111111111111");ie([Xe("nodePubkey"),Xe("authorizedWithdrawer"),ke("commission"),et(),Pt(ie([et("slot"),se("confirmationCount")]),yr(se(),-8),"votes"),ke("rootSlotValid"),et("rootSlot"),et(),Pt(ie([et("epoch"),Xe("authorizedVoter")]),yr(se(),-8),"authorizedVoters"),ie([Pt(ie([Xe("authorizedPubkey"),et("epochOfLastAuthorizedSwitch"),et("targetEpoch")]),32,"buf"),et("idx"),ke("isEmpty")],"priorVoters"),et(),Pt(ie([et("epoch"),et("credits"),et("prevCredits")]),yr(se(),-8),"epochCredits"),ie([et("slot"),et("timestamp")],"lastTimestamp")]);var st={},Jl={};Jl.byteLength=bM;Jl.toByteArray=_M;Jl.fromByteArray=SM;var ci=[],xr=[],yM=typeof Uint8Array<"u"?Uint8Array:Array,hh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _o=0,mM=hh.length;_o<mM;++_o)ci[_o]=hh[_o],xr[hh.charCodeAt(_o)]=_o;xr["-".charCodeAt(0)]=62;xr["_".charCodeAt(0)]=63;function J_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function bM(r){var e=J_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function vM(r,e,t){return(e+t)*3/4-t}function _M(r){var e,t=J_(r),n=t[0],i=t[1],s=new yM(vM(r,n,i)),a=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=xr[r.charCodeAt(f)]<<18|xr[r.charCodeAt(f+1)]<<12|xr[r.charCodeAt(f+2)]<<6|xr[r.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=xr[r.charCodeAt(f)]<<2|xr[r.charCodeAt(f+1)]>>4,s[a++]=e&255),i===1&&(e=xr[r.charCodeAt(f)]<<10|xr[r.charCodeAt(f+1)]<<4|xr[r.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function wM(r){return ci[r>>18&63]+ci[r>>12&63]+ci[r>>6&63]+ci[r&63]}function AM(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(wM(n));return i.join("")}function SM(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,u=t-n;a<u;a+=s)i.push(AM(r,a,a+s>u?u:a+s));return n===1?(e=r[t-1],i.push(ci[e>>2]+ci[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ci[e>>10]+ci[e>>4&63]+ci[e<<2&63]+"=")),i.join("")}var Vp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Vp.read=function(r,e,t,n,i){var s,a,u=i*8-n-1,f=(1<<u)-1,h=f>>1,d=-7,m=t?i-1:0,I=t?-1:1,O=r[e+m];for(m+=I,s=O&(1<<-d)-1,O>>=-d,d+=u;d>0;s=s*256+r[e+m],m+=I,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+r[e+m],m+=I,d-=8);if(s===0)s=1-h;else{if(s===f)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-h}return(O?-1:1)*a*Math.pow(2,s-n)};Vp.write=function(r,e,t,n,i,s){var a,u,f,h=s*8-i-1,d=(1<<h)-1,m=d>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,M=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+m>=1?e+=I/f:e+=I*Math.pow(2,1-m),e*f>=2&&(a++,f/=2),a+m>=d?(u=0,a=d):a+m>=1?(u=(e*f-1)*Math.pow(2,i),a=a+m):(u=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;r[t+O]=u&255,O+=M,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+O]=a&255,O+=M,a/=256,h-=8);r[t+O-M]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Jl,t=Vp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=Y,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const v=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(v,g),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function a(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');const g=new Uint8Array(v);return Object.setPrototypeOf(g,u.prototype),g}function u(v,g,y){if(typeof v=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return f(v,g,y)}u.poolSize=8192;function f(v,g,y){if(typeof v=="string")return I(v,g);if(ArrayBuffer.isView(v))return M(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Sn(v,ArrayBuffer)||v&&Sn(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Sn(v,SharedArrayBuffer)||v&&Sn(v.buffer,SharedArrayBuffer)))return S(v,g,y);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return u.from(k,g,y);const L=R(v);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,g,y){return f(v,g,y)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,g,y){return h(v),v<=0?a(v):g!==void 0?typeof y=="string"?a(v).fill(g,y):a(v).fill(g):a(v)}u.alloc=function(v,g,y){return d(v,g,y)};function m(v){return h(v),a(v<0?0:C(v)|0)}u.allocUnsafe=function(v){return m(v)},u.allocUnsafeSlow=function(v){return m(v)};function I(v,g){if((typeof g!="string"||g==="")&&(g="utf8"),!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=ae(v,g)|0;let k=a(y);const L=k.write(v,g);return L!==y&&(k=k.slice(0,L)),k}function O(v){const g=v.length<0?0:C(v.length)|0,y=a(g);for(let k=0;k<g;k+=1)y[k]=v[k]&255;return y}function M(v){if(Sn(v,Uint8Array)){const g=new Uint8Array(v);return S(g.buffer,g.byteOffset,g.byteLength)}return O(v)}function S(v,g,y){if(g<0||v.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return g===void 0&&y===void 0?k=new Uint8Array(v):y===void 0?k=new Uint8Array(v,g):k=new Uint8Array(v,g,y),Object.setPrototypeOf(k,u.prototype),k}function R(v){if(u.isBuffer(v)){const g=C(v.length)|0,y=a(g);return y.length===0||v.copy(y,0,0,g),y}if(v.length!==void 0)return typeof v.length!="number"||Di(v.length)?a(0):O(v);if(v.type==="Buffer"&&Array.isArray(v.data))return O(v.data)}function C(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==u.prototype},u.compare=function(g,y){if(Sn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),Sn(y,Uint8Array)&&(y=u.from(y,y.offset,y.byteLength)),!u.isBuffer(g)||!u.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let k=g.length,L=y.length;for(let $=0,Z=Math.min(k,L);$<Z;++$)if(g[$]!==y[$]){k=g[$],L=y[$];break}return k<L?-1:L<k?1:0},u.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return u.alloc(0);let k;if(y===void 0)for(y=0,k=0;k<g.length;++k)y+=g[k].length;const L=u.allocUnsafe(y);let $=0;for(k=0;k<g.length;++k){let Z=g[k];if(Sn(Z,Uint8Array))$+Z.length>L.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(L,$)):Uint8Array.prototype.set.call(L,Z,$);else if(u.isBuffer(Z))Z.copy(L,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Z.length}return L};function ae(v,g){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Sn(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const y=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let L=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return rr(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Ni(v).length;default:if(L)return k?-1:rr(v).length;g=(""+g).toLowerCase(),L=!0}}u.byteLength=ae;function oe(v,g,y){let k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(v||(v="utf8");;)switch(v){case"hex":return qt(this,g,y);case"utf8":case"utf-8":return W(this,g,y);case"ascii":return ye(this,g,y);case"latin1":case"binary":return Ie(this,g,y);case"base64":return T(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,g,y);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function de(v,g,y){const k=v[g];v[g]=v[y],v[y]=k}u.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)de(this,y,y+1);return this},u.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)de(this,y,y+3),de(this,y+1,y+2);return this},u.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)de(this,y,y+7),de(this,y+1,y+6),de(this,y+2,y+5),de(this,y+3,y+4);return this},u.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?W(this,0,g):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(g){if(!u.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:u.compare(this,g)===0},u.prototype.inspect=function(){let g="";const y=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(g,y,k,L,$){if(Sn(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),k===void 0&&(k=g?g.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),y<0||k>g.length||L<0||$>this.length)throw new RangeError("out of range index");if(L>=$&&y>=k)return 0;if(L>=$)return-1;if(y>=k)return 1;if(y>>>=0,k>>>=0,L>>>=0,$>>>=0,this===g)return 0;let Z=$-L,Ke=k-y;const wt=Math.min(Z,Ke),pt=this.slice(L,$),At=g.slice(y,k);for(let ft=0;ft<wt;++ft)if(pt[ft]!==At[ft]){Z=pt[ft],Ke=At[ft];break}return Z<Ke?-1:Ke<Z?1:0};function E(v,g,y,k,L){if(v.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Di(y)&&(y=L?0:v.length-1),y<0&&(y=v.length+y),y>=v.length){if(L)return-1;y=v.length-1}else if(y<0)if(L)y=0;else return-1;if(typeof g=="string"&&(g=u.from(g,k)),u.isBuffer(g))return g.length===0?-1:N(v,g,y,k,L);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(v,g,y):Uint8Array.prototype.lastIndexOf.call(v,g,y):N(v,[g],y,k,L);throw new TypeError("val must be string, number or Buffer")}function N(v,g,y,k,L){let $=1,Z=v.length,Ke=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||g.length<2)return-1;$=2,Z/=2,Ke/=2,y/=2}function wt(At,ft){return $===1?At[ft]:At.readUInt16BE(ft*$)}let pt;if(L){let At=-1;for(pt=y;pt<Z;pt++)if(wt(v,pt)===wt(g,At===-1?0:pt-At)){if(At===-1&&(At=pt),pt-At+1===Ke)return At*$}else At!==-1&&(pt-=pt-At),At=-1}else for(y+Ke>Z&&(y=Z-Ke),pt=y;pt>=0;pt--){let At=!0;for(let ft=0;ft<Ke;ft++)if(wt(v,pt+ft)!==wt(g,ft)){At=!1;break}if(At)return pt}return-1}u.prototype.includes=function(g,y,k){return this.indexOf(g,y,k)!==-1},u.prototype.indexOf=function(g,y,k){return E(this,g,y,k,!0)},u.prototype.lastIndexOf=function(g,y,k){return E(this,g,y,k,!1)};function V(v,g,y,k){y=Number(y)||0;const L=v.length-y;k?(k=Number(k),k>L&&(k=L)):k=L;const $=g.length;k>$/2&&(k=$/2);let Z;for(Z=0;Z<k;++Z){const Ke=parseInt(g.substr(Z*2,2),16);if(Di(Ke))return Z;v[y+Z]=Ke}return Z}function J(v,g,y,k){return An(rr(g,v.length-y),v,y,k)}function K(v,g,y,k){return An(Nc(g),v,y,k)}function j(v,g,y,k){return An(Ni(g),v,y,k)}function te(v,g,y,k){return An(zf(g,v.length-y),v,y,k)}u.prototype.write=function(g,y,k,L){if(y===void 0)L="utf8",k=this.length,y=0;else if(k===void 0&&typeof y=="string")L=y,k=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(k)?(k=k>>>0,L===void 0&&(L="utf8")):(L=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((k===void 0||k>$)&&(k=$),g.length>0&&(k<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return V(this,g,y,k);case"utf8":case"utf-8":return J(this,g,y,k);case"ascii":case"latin1":case"binary":return K(this,g,y,k);case"base64":return j(this,g,y,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,g,y,k);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(v,g,y){return g===0&&y===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(g,y))}function W(v,g,y){y=Math.min(v.length,y);const k=[];let L=g;for(;L<y;){const $=v[L];let Z=null,Ke=$>239?4:$>223?3:$>191?2:1;if(L+Ke<=y){let wt,pt,At,ft;switch(Ke){case 1:$<128&&(Z=$);break;case 2:wt=v[L+1],(wt&192)===128&&(ft=($&31)<<6|wt&63,ft>127&&(Z=ft));break;case 3:wt=v[L+1],pt=v[L+2],(wt&192)===128&&(pt&192)===128&&(ft=($&15)<<12|(wt&63)<<6|pt&63,ft>2047&&(ft<55296||ft>57343)&&(Z=ft));break;case 4:wt=v[L+1],pt=v[L+2],At=v[L+3],(wt&192)===128&&(pt&192)===128&&(At&192)===128&&(ft=($&15)<<18|(wt&63)<<12|(pt&63)<<6|At&63,ft>65535&&ft<1114112&&(Z=ft))}}Z===null?(Z=65533,Ke=1):Z>65535&&(Z-=65536,k.push(Z>>>10&1023|55296),Z=56320|Z&1023),k.push(Z),L+=Ke}return Be(k)}const X=4096;function Be(v){const g=v.length;if(g<=X)return String.fromCharCode.apply(String,v);let y="",k=0;for(;k<g;)y+=String.fromCharCode.apply(String,v.slice(k,k+=X));return y}function ye(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]&127);return k}function Ie(v,g,y){let k="";y=Math.min(v.length,y);for(let L=g;L<y;++L)k+=String.fromCharCode(v[L]);return k}function qt(v,g,y){const k=v.length;(!g||g<0)&&(g=0),(!y||y<0||y>k)&&(y=k);let L="";for(let $=g;$<y;++$)L+=Wf[v[$]];return L}function Gt(v,g,y){const k=v.slice(g,y);let L="";for(let $=0;$<k.length-1;$+=2)L+=String.fromCharCode(k[$]+k[$+1]*256);return L}u.prototype.slice=function(g,y){const k=this.length;g=~~g,y=y===void 0?k:~~y,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),y<g&&(y=g);const L=this.subarray(g,y);return Object.setPrototypeOf(L,u.prototype),L};function _e(v,g,y){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+g>y)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g+--y],$=1;for(;y>0&&($*=256);)L+=this[g+--y]*$;return L},u.prototype.readUint8=u.prototype.readUInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]|this[g+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||_e(g,2,this.length),this[g]<<8|this[g+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},u.prototype.readBigUInt64LE=Un(function(g){g=g>>>0,yi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&pn(g,this.length-8);const L=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,$=this[++g]+this[++g]*2**8+this[++g]*2**16+k*2**24;return BigInt(L)+(BigInt($)<<BigInt(32))}),u.prototype.readBigUInt64BE=Un(function(g){g=g>>>0,yi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&pn(g,this.length-8);const L=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],$=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k;return(BigInt(L)<<BigInt(32))+BigInt($)}),u.prototype.readIntLE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=this[g],$=1,Z=0;for(;++Z<y&&($*=256);)L+=this[g+Z]*$;return $*=128,L>=$&&(L-=Math.pow(2,8*y)),L},u.prototype.readIntBE=function(g,y,k){g=g>>>0,y=y>>>0,k||_e(g,y,this.length);let L=y,$=1,Z=this[g+--L];for(;L>0&&($*=256);)Z+=this[g+--L]*$;return $*=128,Z>=$&&(Z-=Math.pow(2,8*y)),Z},u.prototype.readInt8=function(g,y){return g=g>>>0,y||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},u.prototype.readInt16LE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(g,y){g=g>>>0,y||_e(g,2,this.length);const k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},u.prototype.readInt32BE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},u.prototype.readBigInt64LE=Un(function(g){g=g>>>0,yi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&pn(g,this.length-8);const L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(k<<24);return(BigInt(L)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),u.prototype.readBigInt64BE=Un(function(g){g=g>>>0,yi(g,"offset");const y=this[g],k=this[g+7];(y===void 0||k===void 0)&&pn(g,this.length-8);const L=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+k)}),u.prototype.readFloatLE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!0,23,4)},u.prototype.readFloatBE=function(g,y){return g=g>>>0,y||_e(g,4,this.length),t.read(this,g,!1,23,4)},u.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!0,52,8)},u.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||_e(g,8,this.length),t.read(this,g,!1,52,8)};function We(v,g,y,k,L,$){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>L||g<$)throw new RangeError('"value" argument is out of bounds');if(y+k>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;We(this,g,y,k,Ke,0)}let $=1,Z=0;for(this[y]=g&255;++Z<k&&($*=256);)this[y+Z]=g/$&255;return y+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,k=k>>>0,!L){const Ke=Math.pow(2,8*k)-1;We(this,g,y,k,Ke,0)}let $=k-1,Z=1;for(this[y+$]=g&255;--$>=0&&(Z*=256);)this[y+$]=g/Z&255;return y+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,255,0),this[y]=g&255,y+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function Zt(v,g,y,k,L){nr(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$,$=$>>8,v[y++]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,Z=Z>>8,v[y++]=Z,y}function ln(v,g,y,k,L){nr(g,k,L,v,y,7);let $=Number(g&BigInt(4294967295));v[y+7]=$,$=$>>8,v[y+6]=$,$=$>>8,v[y+5]=$,$=$>>8,v[y+4]=$;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return v[y+3]=Z,Z=Z>>8,v[y+2]=Z,Z=Z>>8,v[y+1]=Z,Z=Z>>8,v[y]=Z,y+8}u.prototype.writeBigUInt64LE=Un(function(g,y=0){return Zt(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Un(function(g,y=0){return ln(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);We(this,g,y,k,wt-1,-wt)}let $=0,Z=1,Ke=0;for(this[y]=g&255;++$<k&&(Z*=256);)g<0&&Ke===0&&this[y+$-1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeIntBE=function(g,y,k,L){if(g=+g,y=y>>>0,!L){const wt=Math.pow(2,8*k-1);We(this,g,y,k,wt-1,-wt)}let $=k-1,Z=1,Ke=0;for(this[y+$]=g&255;--$>=0&&(Z*=256);)g<0&&Ke===0&&this[y+$+1]!==0&&(Ke=1),this[y+$]=(g/Z>>0)-Ke&255;return y+k},u.prototype.writeInt8=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},u.prototype.writeInt16LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},u.prototype.writeInt16BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},u.prototype.writeInt32LE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},u.prototype.writeInt32BE=function(g,y,k){return g=+g,y=y>>>0,k||We(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},u.prototype.writeBigInt64LE=Un(function(g,y=0){return Zt(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Un(function(g,y=0){return ln(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(v,g,y,k,L,$){if(y+k>v.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ht(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,4),t.write(v,g,y,k,23,4),y+4}u.prototype.writeFloatLE=function(g,y,k){return ht(this,g,y,!0,k)},u.prototype.writeFloatBE=function(g,y,k){return ht(this,g,y,!1,k)};function _r(v,g,y,k,L){return g=+g,y=y>>>0,L||Et(v,g,y,8),t.write(v,g,y,k,52,8),y+8}u.prototype.writeDoubleLE=function(g,y,k){return _r(this,g,y,!0,k)},u.prototype.writeDoubleBE=function(g,y,k){return _r(this,g,y,!1,k)},u.prototype.copy=function(g,y,k,L){if(!u.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!L&&L!==0&&(L=this.length),y>=g.length&&(y=g.length),y||(y=0),L>0&&L<k&&(L=k),L===k||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-y<L-k&&(L=g.length-y+k);const $=L-k;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,k,L):Uint8Array.prototype.set.call(g,this.subarray(k,L),y),$},u.prototype.fill=function(g,y,k,L){if(typeof g=="string"){if(typeof y=="string"?(L=y,y=0,k=this.length):typeof k=="string"&&(L=k,k=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){const Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<k)throw new RangeError("Out of range index");if(k<=y)return this;y=y>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);let $;if(typeof g=="number")for($=y;$<k;++$)this[$]=g;else{const Z=u.isBuffer(g)?g:u.from(g,L),Ke=Z.length;if(Ke===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for($=0;$<k-y;++$)this[$+y]=Z[$%Ke]}return this};const Wt={};function wn(v,g,y){Wt[v]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}wn("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wn("ERR_INVALID_ARG_TYPE",function(v,g){return`The "${v}" argument must be of type number. Received type ${typeof g}`},TypeError),wn("ERR_OUT_OF_RANGE",function(v,g,y){let k=`The value of "${v}" is out of range.`,L=y;return Number.isInteger(y)&&Math.abs(y)>2**32?L=Zr(String(y)):typeof y=="bigint"&&(L=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(L=Zr(L)),L+="n"),k+=` It must be ${g}. Received ${L}`,k},RangeError);function Zr(v){let g="",y=v.length;const k=v[0]==="-"?1:0;for(;y>=k+4;y-=3)g=`_${v.slice(y-3,y)}${g}`;return`${v.slice(0,y)}${g}`}function wr(v,g,y){yi(g,"offset"),(v[g]===void 0||v[g+y]===void 0)&&pn(g,v.length-(y+1))}function nr(v,g,y,k,L,$){if(v>y||v<g){const Z=typeof g=="bigint"?"n":"";let Ke;throw $>3?g===0||g===BigInt(0)?Ke=`>= 0${Z} and < 2${Z} ** ${($+1)*8}${Z}`:Ke=`>= -(2${Z} ** ${($+1)*8-1}${Z}) and < 2 ** ${($+1)*8-1}${Z}`:Ke=`>= ${g}${Z} and <= ${y}${Z}`,new Wt.ERR_OUT_OF_RANGE("value",Ke,v)}wr(k,L,$)}function yi(v,g){if(typeof v!="number")throw new Wt.ERR_INVALID_ARG_TYPE(g,"number",v)}function pn(v,g,y){throw Math.floor(v)!==v?(yi(v,y),new Wt.ERR_OUT_OF_RANGE(y||"offset","an integer",v)):g<0?new Wt.ERR_BUFFER_OUT_OF_BOUNDS:new Wt.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${g}`,v)}const bs=/[^+/0-9A-Za-z-_]/g;function Uf(v){if(v=v.split("=")[0],v=v.trim().replace(bs,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function rr(v,g){g=g||1/0;let y;const k=v.length;let L=null;const $=[];for(let Z=0;Z<k;++Z){if(y=v.charCodeAt(Z),y>55295&&y<57344){if(!L){if(y>56319){(g-=3)>-1&&$.push(239,191,189);continue}else if(Z+1===k){(g-=3)>-1&&$.push(239,191,189);continue}L=y;continue}if(y<56320){(g-=3)>-1&&$.push(239,191,189),L=y;continue}y=(L-55296<<10|y-56320)+65536}else L&&(g-=3)>-1&&$.push(239,191,189);if(L=null,y<128){if((g-=1)<0)break;$.push(y)}else if(y<2048){if((g-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function Nc(v){const g=[];for(let y=0;y<v.length;++y)g.push(v.charCodeAt(y)&255);return g}function zf(v,g){let y,k,L;const $=[];for(let Z=0;Z<v.length&&!((g-=2)<0);++Z)y=v.charCodeAt(Z),k=y>>8,L=y%256,$.push(L),$.push(k);return $}function Ni(v){return e.toByteArray(Uf(v))}function An(v,g,y,k){let L;for(L=0;L<k&&!(L+y>=g.length||L>=v.length);++L)g[L+y]=v[L];return L}function Sn(v,g){return v instanceof g||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===g.name}function Di(v){return v!==v}const Wf=function(){const v="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const k=y*16;for(let L=0;L<16;++L)g[k+L]=v[y]+v[L]}return g}();function Un(v){return typeof BigInt>"u"?Vf:v}function Vf(){throw new Error("BigInt not supported")}})(st);var kM=typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:typeof window<"u"?window:{},Hh;typeof Object.create=="function"?Hh=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Hh=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var IM=Hh;function Ls(r,e){var t={seen:[],stylize:OM};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Q_(e)?t.showHidden=e:e&&CM(t,e),xo(t.showHidden)&&(t.showHidden=!1),xo(t.depth)&&(t.depth=2),xo(t.colors)&&(t.colors=!1),xo(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=EM),ll(t,r,t.depth)}Ls.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Ls.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function EM(r,e){var t=Ls.styles[e];return t?"\x1B["+Ls.colors[t][0]+"m"+r+"\x1B["+Ls.colors[t][1]+"m":r}function OM(r,e){return r}function PM(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function ll(r,e,t){if(r.customInspect&&e&&Ja(e.inspect)&&e.inspect!==Ls&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return Z_(n)||(n=ll(r,n,t)),n}var i=TM(r,e);if(i)return i;var s=Object.keys(e),a=PM(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),Xu(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return ph(e);if(s.length===0){if(Ja(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(Ya(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(fl(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Xu(e))return ph(e)}var f="",h=!1,d=["{","}"];if(xM(e)&&(h=!0,d=["[","]"]),Ja(e)){var m=e.name?": "+e.name:"";f=" [Function"+m+"]"}if(Ya(e)&&(f=" "+RegExp.prototype.toString.call(e)),fl(e)&&(f=" "+Date.prototype.toUTCString.call(e)),Xu(e)&&(f=" "+ph(e)),s.length===0&&(!h||e.length==0))return d[0]+f+d[1];if(t<0)return Ya(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return h?I=RM(r,e,t,a,s):I=s.map(function(O){return Yh(r,e,t,a,O,h)}),r.seen.pop(),BM(I,f,d)}function TM(r,e){if(xo(e))return r.stylize("undefined","undefined");if(Z_(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(MM(e))return r.stylize(""+e,"number");if(Q_(e))return r.stylize(""+e,"boolean");if(X_(e))return r.stylize("null","null")}function ph(r){return"["+Error.prototype.toString.call(r)+"]"}function RM(r,e,t,n,i){for(var s=[],a=0,u=e.length;a<u;++a)ew(e,String(a))?s.push(Yh(r,e,t,n,String(a),!0)):s.push("");return i.forEach(function(f){f.match(/^\d+$/)||s.push(Yh(r,e,t,n,f,!0))}),s}function Yh(r,e,t,n,i,s){var a,u,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?f.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):f.set&&(u=r.stylize("[Setter]","special")),ew(n,i)||(a="["+i+"]"),u||(r.seen.indexOf(f.value)<0?(X_(t)?u=ll(r,f.value,null):u=ll(r,f.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=r.stylize("[Circular]","special")),xo(a)){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+u}function BM(r,e,t){var n=r.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function xM(r){return Array.isArray(r)}function Q_(r){return typeof r=="boolean"}function X_(r){return r===null}function MM(r){return typeof r=="number"}function Z_(r){return typeof r=="string"}function xo(r){return r===void 0}function Ya(r){return Ql(r)&&$p(r)==="[object RegExp]"}function Ql(r){return typeof r=="object"&&r!==null}function fl(r){return Ql(r)&&$p(r)==="[object Date]"}function Xu(r){return Ql(r)&&($p(r)==="[object Error]"||r instanceof Error)}function Ja(r){return typeof r=="function"}function Eb(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function $p(r){return Object.prototype.toString.call(r)}function CM(r,e){if(!e||!Ql(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function ew(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ob(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}var LM=Object.prototype.hasOwnProperty,Pb=Object.keys||function(r){var e=[];for(var t in r)LM.call(r,t)&&e.push(t);return e},Tb=Array.prototype.slice,gh;function tw(){return typeof gh<"u"?gh:gh=function(){return function(){}.name==="foo"}()}function Rb(r){return Object.prototype.toString.call(r)}function Bb(r){return st.isBuffer(r)||typeof kM.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function Tn(r,e){r||Xn(r,!0,e,"==",qp)}var KM=/\s*function\s+([^\(\s]*)\s*/;function nw(r){if(!!Ja(r)){if(tw())return r.name;var e=r.toString(),t=e.match(KM);return t&&t[1]}}Tn.AssertionError=jp;function jp(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=NM(this),this.generatedMessage=!0);var e=r.stackStartFunction||Xn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var n=t.stack,i=nw(e),s=n.indexOf(`
`+i);if(s>=0){var a=n.indexOf(`
`,s+1);n=n.substring(a+1)}this.stack=n}}}IM(jp,Error);function xb(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function Mb(r){if(tw()||!Ja(r))return Ls(r);var e=nw(r),t=e?": "+e:"";return"[Function"+t+"]"}function NM(r){return xb(Mb(r.actual),128)+" "+r.operator+" "+xb(Mb(r.expected),128)}function Xn(r,e,t,n,i){throw new jp({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}Tn.fail=Xn;function qp(r,e){r||Xn(r,!0,e,"==",qp)}Tn.ok=qp;Tn.equal=rw;function rw(r,e,t){r!=e&&Xn(r,e,t,"==",rw)}Tn.notEqual=iw;function iw(r,e,t){r==e&&Xn(r,e,t,"!=",iw)}Tn.deepEqual=sw;function sw(r,e,t){Ho(r,e,!1)||Xn(r,e,t,"deepEqual",sw)}Tn.deepStrictEqual=ow;function ow(r,e,t){Ho(r,e,!0)||Xn(r,e,t,"deepStrictEqual",ow)}function Ho(r,e,t,n){if(r===e)return!0;if(st.isBuffer(r)&&st.isBuffer(e))return Ob(r,e)===0;if(fl(r)&&fl(e))return r.getTime()===e.getTime();if(Ya(r)&&Ya(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(Bb(r)&&Bb(e)&&Rb(r)===Rb(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return Ob(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(st.isBuffer(r)!==st.isBuffer(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),DM(r,e,t,n))}function Cb(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function DM(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(Eb(r)||Eb(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Cb(r),s=Cb(e);if(i&&!s||!i&&s)return!1;if(i)return r=Tb.call(r),e=Tb.call(e),Ho(r,e,t);var a=Pb(r),u=Pb(e),f,h;if(a.length!==u.length)return!1;for(a.sort(),u.sort(),h=a.length-1;h>=0;h--)if(a[h]!==u[h])return!1;for(h=a.length-1;h>=0;h--)if(f=a[h],!Ho(r[f],e[f],t,n))return!1;return!0}Tn.notDeepEqual=aw;function aw(r,e,t){Ho(r,e,!1)&&Xn(r,e,t,"notDeepEqual",aw)}Tn.notDeepStrictEqual=cw;function cw(r,e,t){Ho(r,e,!0)&&Xn(r,e,t,"notDeepStrictEqual",cw)}Tn.strictEqual=uw;function uw(r,e,t){r!==e&&Xn(r,e,t,"===",uw)}Tn.notStrictEqual=lw;function lw(r,e,t){r===e&&Xn(r,e,t,"!==",lw)}function Lb(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function FM(r){var e;try{r()}catch(t){e=t}return e}function fw(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=FM(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&Xn(i,t,"Missing expected exception"+n);var s=typeof n=="string",a=!r&&Xu(i),u=!r&&i&&!t;if((a&&s&&Lb(i,t)||u)&&Xn(i,t,"Got unwanted exception"+n),r&&i&&t&&!Lb(i,t)||!r&&i)throw i}Tn.throws=UM;function UM(r,e,t){fw(!0,r,e,t)}Tn.doesNotThrow=zM;function zM(r,e,t){fw(!1,r,e,t)}Tn.ifError=WM;function WM(r){if(r)throw r}class uc{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function VM(r,e){return e.property?r+"["+e.property+"]":r}class Tu extends uc{isCount(){throw new Error("ExternalLayout is abstract")}}class dw extends uc{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class $M extends uc{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof uc,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(e,t);return t+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,a=0;for(const u of this.fields){let f=u.span;if(a=0<f?f:0,u.property!==void 0){const h=e[u.property];h!==void 0&&(a=u.encode(h,t,n),0>f&&(f=u.getSpan(t,n)))}s=n,n+=f}return s+a-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class jM extends uc{constructor(e,t){if(!(e instanceof Tu&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Tu||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Tu&&(i=e.length),!(st.Buffer.isBuffer(e)&&i===e.length))throw new TypeError(VM("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Tu&&this.length.encode(i,t,n),i}}var Ze=r=>new dw(1,r),Qa=r=>new dw(4,r),Ht=(r,e,t)=>new $M(r,e,t),hw=(r,e)=>new jM(r,e);const Yt=(r="publicKey")=>hw(32,r),Mr=(r="uint64")=>hw(8,r);function nn(r,e,t,...n){return $x(e,t,n,{skipPreflight:!1})}const qM=new ve("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),pw=new ve("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Kb="Failed to find account",Nb="Invalid account owner";function yh(r){return st.Buffer.from(r.toBuffer())}class En extends Mi{toBuffer(){const e=super.toArray().reverse(),t=st.Buffer.from(e);if(t.length===8)return t;Tn(t.length<8,"u64 too large");const n=st.Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){return Tn(e.length===8,`Invalid buffer length: ${e.length}`),new En([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function lr(r){return"publicKey"in r}const GM={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},gw=new ve("So11111111111111111111111111111111111111112"),$a=Ht([Qa("mintAuthorityOption"),Yt("mintAuthority"),Mr("supply"),Ze("decimals"),Ze("isInitialized"),Qa("freezeAuthorityOption"),Yt("freezeAuthority")]),Eo=Ht([Yt("mint"),Yt("owner"),Mr("amount"),Qa("delegateOption"),Yt("delegate"),Ze("state"),Qa("isNativeOption"),Mr("isNative"),Mr("delegatedAmount"),Qa("closeAuthorityOption"),Yt("closeAuthority")]),Ru=Ht([Ze("m"),Ze("n"),Ze("is_initialized"),Yt("signer1"),Yt("signer2"),Yt("signer3"),Yt("signer4"),Yt("signer5"),Yt("signer6"),Yt("signer7"),Yt("signer8"),Yt("signer9"),Yt("signer10"),Yt("signer11")]);class vt{constructor(e,t,n,i){La(this,"connection",void 0),La(this,"publicKey",void 0),La(this,"programId",void 0),La(this,"associatedProgramId",void 0),La(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:n,payer:i,associatedProgramId:pw})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption($a.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(Eo.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Ru.span)}static async createMint(e,t,n,i,s,a){const u=Zi.generate(),f=new vt(e,u.publicKey,a,t),h=await vt.getMinBalanceRentForExemptMint(e),d=new Nt;return d.add(oi.createAccount({fromPubkey:t.publicKey,newAccountPubkey:u.publicKey,lamports:h,space:$a.span,programId:a})),d.add(vt.createInitMintInstruction(a,u.publicKey,s,n,i)),await nn("createAccount and InitializeMint",e,d,t,u),f}async createAccount(e){const t=await vt.getMinBalanceRentForExemptAccount(this.connection),n=Zi.generate(),i=new Nt;i.add(oi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:t,space:Eo.span,programId:this.programId}));const s=this.publicKey;return i.add(vt.createInitAccountInstruction(this.programId,s,n.publicKey,e)),await nn("createAccount and InitializeAccount",this.connection,i,this.payer,n),n.publicKey}async createAssociatedTokenAccount(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await nn("CreateAssociatedTokenAccount",this.connection,new Nt().add(vt.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await vt.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(n){if(n.message===Kb||n.message===Nb){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw n}}static async createWrappedNativeAccount(e,t,n,i,s){const a=await vt.getMinBalanceRentForExemptAccount(e),u=Zi.generate(),f=new Nt;return f.add(oi.createAccount({fromPubkey:i.publicKey,newAccountPubkey:u.publicKey,lamports:a,space:Eo.span,programId:t})),f.add(oi.transfer({fromPubkey:i.publicKey,toPubkey:u.publicKey,lamports:s})),f.add(vt.createInitAccountInstruction(t,gw,u.publicKey,n)),await nn("createAccount, transfer, and initializeAccount",e,f,i,u),u.publicKey}async createMultisig(e,t){const n=Zi.generate(),i=await vt.getMinBalanceRentForExemptMultisig(this.connection),s=new Nt;s.add(oi.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:n.publicKey,lamports:i,space:Ru.span,programId:this.programId}));let a=[{pubkey:n.publicKey,isSigner:!1,isWritable:!0},{pubkey:Bo,isSigner:!1,isWritable:!1}];t.forEach(h=>a.push({pubkey:h,isSigner:!1,isWritable:!1}));const u=Ht([Ze("instruction"),Ze("m")]),f=st.Buffer.alloc(u.span);return u.encode({instruction:2,m:e},f),s.add({keys:a,programId:this.programId,data:f}),await nn("createAccount and InitializeMultisig",this.connection,s,this.payer,n),n.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=$a.span)throw new Error("Invalid mint size");const t=st.Buffer.from(e.data),n=$a.decode(t);return n.mintAuthorityOption===0?n.mintAuthority=null:n.mintAuthority=new ve(n.mintAuthority),n.supply=En.fromBuffer(n.supply),n.isInitialized=n.isInitialized!=0,n.freezeAuthorityOption===0?n.freezeAuthority=null:n.freezeAuthority=new ve(n.freezeAuthority),n}async getAccountInfo(e,t){const n=await this.connection.getAccountInfo(e,t);if(n===null)throw new Error(Kb);if(!n.owner.equals(this.programId))throw new Error(Nb);if(n.data.length!=Eo.span)throw new Error("Invalid account size");const i=st.Buffer.from(n.data),s=Eo.decode(i);if(s.address=e,s.mint=new ve(s.mint),s.owner=new ve(s.owner),s.amount=En.fromBuffer(s.amount),s.delegateOption===0?(s.delegate=null,s.delegatedAmount=new En):(s.delegate=new ve(s.delegate),s.delegatedAmount=En.fromBuffer(s.delegatedAmount)),s.isInitialized=s.state!==0,s.isFrozen=s.state===2,s.isNativeOption===1?(s.rentExemptReserve=En.fromBuffer(s.isNative),s.isNative=!0):(s.rentExemptReserve=null,s.isNative=!1),s.closeAuthorityOption===0?s.closeAuthority=null:s.closeAuthority=new ve(s.closeAuthority),!s.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(s.mint)} !== ${JSON.stringify(this.publicKey)}`);return s}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Ru.span)throw new Error("Invalid multisig size");const n=st.Buffer.from(t.data),i=Ru.decode(n);return i.signer1=new ve(i.signer1),i.signer2=new ve(i.signer2),i.signer3=new ve(i.signer3),i.signer4=new ve(i.signer4),i.signer5=new ve(i.signer5),i.signer6=new ve(i.signer6),i.signer7=new ve(i.signer7),i.signer8=new ve(i.signer8),i.signer9=new ve(i.signer9),i.signer10=new ve(i.signer10),i.signer11=new ve(i.signer11),i}async transfer(e,t,n,i,s){let a,u;return lr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await nn("Transfer",this.connection,new Nt().add(vt.createTransferInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async approve(e,t,n,i,s){let a,u;lr(n)?(a=n.publicKey,u=[n]):(a=n,u=i),await nn("Approve",this.connection,new Nt().add(vt.createApproveInstruction(this.programId,e,t,a,i,s)),this.payer,...u)}async revoke(e,t,n){let i,s;lr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("Revoke",this.connection,new Nt().add(vt.createRevokeInstruction(this.programId,e,i,n)),this.payer,...s)}async setAuthority(e,t,n,i,s){let a,u;lr(i)?(a=i.publicKey,u=[i]):(a=i,u=s),await nn("SetAuthority",this.connection,new Nt().add(vt.createSetAuthorityInstruction(this.programId,e,t,n,a,s)),this.payer,...u)}async mintTo(e,t,n,i){let s,a;lr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await nn("MintTo",this.connection,new Nt().add(vt.createMintToInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async burn(e,t,n,i){let s,a;lr(t)?(s=t.publicKey,a=[t]):(s=t,a=n),await nn("Burn",this.connection,new Nt().add(vt.createBurnInstruction(this.programId,this.publicKey,e,s,n,i)),this.payer,...a)}async closeAccount(e,t,n,i){let s,a;lr(n)?(s=n.publicKey,a=[n]):(s=n,a=i),await nn("CloseAccount",this.connection,new Nt().add(vt.createCloseAccountInstruction(this.programId,e,t,s,i)),this.payer,...a)}async freezeAccount(e,t,n){let i,s;lr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("FreezeAccount",this.connection,new Nt().add(vt.createFreezeAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async thawAccount(e,t,n){let i,s;lr(t)?(i=t.publicKey,s=[t]):(i=t,s=n),await nn("ThawAccount",this.connection,new Nt().add(vt.createThawAccountInstruction(this.programId,e,this.publicKey,i,n)),this.payer,...s)}async transferChecked(e,t,n,i,s,a){let u,f;return lr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await nn("TransferChecked",this.connection,new Nt().add(vt.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async approveChecked(e,t,n,i,s,a){let u,f;lr(n)?(u=n.publicKey,f=[n]):(u=n,f=i),await nn("ApproveChecked",this.connection,new Nt().add(vt.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,u,i,s,a)),this.payer,...f)}async mintToChecked(e,t,n,i,s){let a,u;lr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await nn("MintToChecked",this.connection,new Nt().add(vt.createMintToCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async burnChecked(e,t,n,i,s){let a,u;lr(t)?(a=t.publicKey,u=[t]):(a=t,u=n),await nn("BurnChecked",this.connection,new Nt().add(vt.createBurnCheckedInstruction(this.programId,this.publicKey,e,a,n,i,s)),this.payer,...u)}async syncNative(e){await nn("SyncNative",this.connection,new Nt().add(vt.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,n,i,s){let a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Bo,isSigner:!1,isWritable:!1}];const u=Ht([Ze("instruction"),Ze("decimals"),Yt("mintAuthority"),Ze("option"),Yt("freezeAuthority")]);let f=st.Buffer.alloc(1024);{const h=u.encode({instruction:0,decimals:n,mintAuthority:yh(i),option:s===null?0:1,freezeAuthority:yh(s||new ve(0))},f);f=f.slice(0,h)}return new gt({keys:a,programId:e,data:f})}static createInitAccountInstruction(e,t,n,i){const s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Bo,isSigner:!1,isWritable:!1}],a=Ht([Ze("instruction")]),u=st.Buffer.alloc(a.span);return a.encode({instruction:1},u),new gt({keys:s,programId:e,data:u})}static createTransferInstruction(e,t,n,i,s,a){const u=Ht([Ze("instruction"),Mr("amount")]),f=st.Buffer.alloc(u.span);u.encode({instruction:3,amount:new En(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createApproveInstruction(e,t,n,i,s,a){const u=Ht([Ze("instruction"),Mr("amount")]),f=st.Buffer.alloc(u.span);u.encode({instruction:4,amount:new En(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createRevokeInstruction(e,t,n,i){const s=Ht([Ze("instruction")]),a=st.Buffer.alloc(s.span);s.encode({instruction:5},a);let u=[{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?u.push({pubkey:n,isSigner:!0,isWritable:!1}):(u.push({pubkey:n,isSigner:!1,isWritable:!1}),i.forEach(f=>u.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:u,programId:e,data:a})}static createSetAuthorityInstruction(e,t,n,i,s,a){const u=Ht([Ze("instruction"),Ze("authorityType"),Ze("option"),Yt("newAuthority")]);let f=st.Buffer.alloc(1024);{const d=u.encode({instruction:6,authorityType:GM[i],option:n===null?0:1,newAuthority:yh(n||new ve(0))},f);f=f.slice(0,d)}let h=[{pubkey:t,isSigner:!1,isWritable:!0}];return a.length===0?h.push({pubkey:s,isSigner:!0,isWritable:!1}):(h.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createMintToInstruction(e,t,n,i,s,a){const u=Ht([Ze("instruction"),Mr("amount")]),f=st.Buffer.alloc(u.span);u.encode({instruction:7,amount:new En(a).toBuffer()},f);let h=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createBurnInstruction(e,t,n,i,s,a){const u=Ht([Ze("instruction"),Mr("amount")]),f=st.Buffer.alloc(u.span);u.encode({instruction:8,amount:new En(a).toBuffer()},f);let h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?h.push({pubkey:i,isSigner:!0,isWritable:!1}):(h.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(d=>h.push({pubkey:d.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:h,programId:e,data:f})}static createCloseAccountInstruction(e,t,n,i,s){const a=Ht([Ze("instruction")]),u=st.Buffer.alloc(a.span);a.encode({instruction:9},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createFreezeAccountInstruction(e,t,n,i,s){const a=Ht([Ze("instruction")]),u=st.Buffer.alloc(a.span);a.encode({instruction:10},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createThawAccountInstruction(e,t,n,i,s){const a=Ht([Ze("instruction")]),u=st.Buffer.alloc(a.span);a.encode({instruction:11},u);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return s.length===0?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(h=>f.push({pubkey:h.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:f,programId:e,data:u})}static createTransferCheckedInstruction(e,t,n,i,s,a,u,f){const h=Ht([Ze("instruction"),Mr("amount"),Ze("decimals")]),d=st.Buffer.alloc(h.span);h.encode({instruction:12,amount:new En(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createApproveCheckedInstruction(e,t,n,i,s,a,u,f){const h=Ht([Ze("instruction"),Mr("amount"),Ze("decimals")]),d=st.Buffer.alloc(h.span);h.encode({instruction:13,amount:new En(u).toBuffer(),decimals:f},d);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return a.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),a.forEach(I=>m.push({pubkey:I.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:m,programId:e,data:d})}static createMintToCheckedInstruction(e,t,n,i,s,a,u){const f=Ht([Ze("instruction"),Mr("amount"),Ze("decimals")]),h=st.Buffer.alloc(f.span);f.encode({instruction:14,amount:new En(a).toBuffer(),decimals:u},h);let d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createBurnCheckedInstruction(e,t,n,i,s,a,u){const f=Ht([Ze("instruction"),Mr("amount"),Ze("decimals")]),h=st.Buffer.alloc(f.span);f.encode({instruction:15,amount:new En(a).toBuffer(),decimals:u},h);let d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?d.push({pubkey:i,isSigner:!0,isWritable:!1}):(d.push({pubkey:i,isSigner:!1,isWritable:!1}),s.forEach(m=>d.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new gt({keys:d,programId:e,data:h})}static createSyncNativeInstruction(e,t){const n=Ht([Ze("instruction")]),i=st.Buffer.alloc(n.span);n.encode({instruction:17},i);let s=[{pubkey:t,isSigner:!1,isWritable:!0}];return new gt({keys:s,programId:e,data:i})}static async getAssociatedTokenAddress(e,t,n,i,s=!1){if(!s&&!ve.isOnCurve(i.toBuffer()))throw new Error(`Owner cannot sign: ${i.toString()}`);return(await ve.findProgramAddress([i.toBuffer(),t.toBuffer(),n.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,n,i,s,a){const u=st.Buffer.alloc(0);let f=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:oi.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:Bo,isSigner:!1,isWritable:!1}];return new gt({keys:f,programId:e,data:u})}}var HM=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:pw,AccountLayout:Eo,MintLayout:$a,NATIVE_MINT:gw,TOKEN_PROGRAM_ID:qM,Token:vt,u64:En},Symbol.toStringTag,{value:"Module"})),wc=gc(HM),Xl=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(rn,"__esModule",{value:!0});rn.getAccountInfo=rn.getTokenAccount=rn.getAssociatedTokenAddress=rn.convertFactionStringToNum=rn.longToByteArray=rn.byteArrayToLong=rn.stringToByteArray=rn.byteArrayToString=void 0;const Bu=Ln,xu=mt,Zu=Li,ii=wc;function YM(r){return String.fromCharCode(...r)}rn.byteArrayToString=YM;function JM(r,e){if(r.length>e)return null;let t=[];for(let n=0;n<e;n+=1){let i=32;n<r.length&&(i=r.charCodeAt(n)),t=t.concat([i])}return t}rn.stringToByteArray=JM;function QM(r){let e=0;for(let t=r.length-1;t>=0;t-=1)e=e*256+r[t];return e}rn.byteArrayToLong=QM;function XM(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t+=1){const n=r&255;e[t]=n,r=(r-n)/256}return e}rn.longToByteArray=XM;function ZM(r){return Xl(this,void 0,void 0,function*(){switch(r.toLowerCase()){case"mud":return Bu.FactionType.MUD;case"oni":return Bu.FactionType.ONI;case"ustur":return Bu.FactionType.Ustur;default:return Bu.FactionType.Unenlisted}})}rn.convertFactionStringToNum=ZM;function yw(r,e){return Xl(this,void 0,void 0,function*(){const[t]=yield Zu.PublicKey.findProgramAddress([r.toBuffer(),ii.TOKEN_PROGRAM_ID.toBuffer(),e.toBuffer()],ii.ASSOCIATED_TOKEN_PROGRAM_ID);return t})}rn.getAssociatedTokenAddress=yw;function eC(r,e,t,n=e,i){return Xl(this,void 0,void 0,function*(){const{value:s}=yield r.getParsedTokenAccountsByOwner(e,{mint:t});let a=null;if(i===void 0){let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new xu.BN(h.info.tokenAmount.amount);(u===null||d.gt(u))&&(a=f.pubkey,u=d)}}else{let u=null;for(const f of s)if(f.account.data.parsed.type==="account"){const h=f.account.data.parsed,d=new xu.BN(h.info.tokenAmount.amount);d.gt(new xu.BN(i))&&(u===null||d.lt(u))&&(a=f.pubkey,u=d)}}if(a===null){const u=yield yw(e,t),{value:f}=yield r.getParsedAccountInfo(u,"confirmed");if(f===null||f.owner.equals(Zu.SystemProgram.programId))return{tokenAccount:u,createInstruction:[ii.Token.createAssociatedTokenAccountInstruction(ii.ASSOCIATED_TOKEN_PROGRAM_ID,ii.TOKEN_PROGRAM_ID,t,u,e,n)]};if("program"in f.data&&f.data.parsed.type==="account"&&new Zu.PublicKey(f.data.parsed.info.owner).equals(e))return{tokenAccount:u};{const h=xu.web3.Keypair.generate();return{tokenAccount:h,createInstruction:[Zu.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:h.publicKey,lamports:yield ii.Token.getMinBalanceRentForExemptAccount(r),space:ii.AccountLayout.span,programId:ii.TOKEN_PROGRAM_ID}),ii.Token.createInitAccountInstruction(ii.TOKEN_PROGRAM_ID,t,h.publicKey,e)]}}}else return{tokenAccount:a}})}rn.getTokenAccount=eC;function tC(r,e){return Xl(this,void 0,void 0,function*(){const{value:t}=yield r.getParsedAccountInfo(e);return t.data})}rn.getAccountInfo=tC;var Zl={},nC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.sendAndConfirmTransaction=void 0;const rC=Li;function iC(r,e,...t){return nC(this,void 0,void 0,function*(){let n="";try{n=yield(0,rC.sendAndConfirmTransaction)(r,e,t,{skipPreflight:!0,commitment:"singleGossip",preflightCommitment:null})}catch(i){console.log(i)}return n})}Zl.sendAndConfirmTransaction=iC;var Us={},Gp={},Hp={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});var ef={},fs={},Pn={},qr={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.baseIdl=void 0;Ac.baseIdl={version:"0.1.0",name:"marketplace",instructions:[{name:"addRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"deleteRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"}]},{name:"deregisterCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMarketplace",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"registerCurrency",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateCurrencyVault",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"saCurrencyVault",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updateCurrencyRoyalty",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"royalty",type:"u64"}]},{name:"updateRoyaltyTier",accounts:[{name:"updateAuthorityAccount",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"registeredCurrency",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"RegisteredCurrency",path:"registered_currency.token_mint"}]}}],args:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]},{name:"addFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptTarget",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"discount",type:"u64"}]},{name:"removeFeeExemption",accounts:[{name:"updateAuthorityMaster",isMut:!1,isSigner:!0},{name:"funder",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1},{name:"feeExemptAccount",isMut:!0,isSigner:!1}],args:[]},{name:"processInitializeBuy",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processInitializeSell",accounts:[{name:"orderInitializer",isMut:!0,isSigner:!0},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"receiveMint",isMut:!1,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!1,isSigner:!1},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"receive_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"originationQty",type:"u64"}]},{name:"processExchange",accounts:[{name:"orderTaker",isMut:!0,isSigner:!0},{name:"orderTakerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderTakerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"currencyMint",isMut:!1,isSigner:!1},{name:"assetMint",isMut:!1,isSigner:!1},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"initializerReceiveTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",account:"OrderAccount",path:"order_account.order_initializer_pubkey"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"saVault",isMut:!0,isSigner:!1},{name:"registeredCurrency",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"registered-currency"},{kind:"account",type:"publicKey",account:"Mint",path:"currency_mint"}]}},{name:"openOrdersCounter",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"atlasStaking",isMut:!1,isSigner:!1},{name:"registeredStake",isMut:!1,isSigner:!1},{name:"stakingAccount",isMut:!1,isSigner:!1},{name:"feeReduction",isMut:!1,isSigner:!1}],args:[{name:"purchaseQuantity",type:"u64"},{name:"expectedPrice",type:"u64"},{name:"seller",type:"publicKey"}]},{name:"processCancel",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"orderInitializer",isMut:!0,isSigner:!1},{name:"marketVarsAccount",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"market-vars"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"initializerDepositTokenAccount",isMut:!0,isSigner:!1},{name:"orderVaultAccount",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-account"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"orderVaultAuthority",isMut:!1,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"order-vault-auth"},{kind:"account",type:"publicKey",path:"order_initializer"}]}},{name:"orderAccount",isMut:!0,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"order_initializer"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOpenOrdersCounter",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"user",isMut:!1,isSigner:!1},{name:"openOrdersCounter",isMut:!0,isSigner:!1,pda:{seeds:[{kind:"const",type:"string",value:"open-orders-counter"},{kind:"account",type:"publicKey",path:"user"},{kind:"account",type:"publicKey",account:"Mint",path:"deposit_mint"}]}},{name:"depositMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"FeeReduction",type:{kind:"struct",fields:[{name:"account",type:"publicKey"},{name:"bump",type:"u8"},{name:"discount",type:"u64"}]}},{name:"MarketVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"bump",type:"u8"}]}},{name:"OpenOrdersCounter",type:{kind:"struct",fields:[{name:"openOrderCount",type:"u64"},{name:"bump",type:"u8"}]}},{name:"OrderAccount",type:{kind:"struct",fields:[{name:"orderInitializerPubkey",type:"publicKey"},{name:"currencyMint",type:"publicKey"},{name:"assetMint",type:"publicKey"},{name:"initializerCurrencyTokenAccount",type:"publicKey"},{name:"initializerAssetTokenAccount",type:"publicKey"},{name:"orderSide",type:{defined:"OrderSide"}},{name:"price",type:"u64"},{name:"orderOriginationQty",type:"u64"},{name:"orderRemainingQty",type:"u64"},{name:"createdAtTimestamp",type:"i64"}]}},{name:"RegisteredCurrency",type:{kind:"struct",fields:[{name:"tokenMint",type:"publicKey"},{name:"saCurrencyVault",type:"publicKey"},{name:"royalty",type:"u64"},{name:"bump",type:"u8"},{name:"royaltyTiers",type:{vec:{defined:"RoyaltyTier"}}}]}}],types:[{name:"RoyaltyTier",type:{kind:"struct",fields:[{name:"stakeAmount",type:"u64"},{name:"discount",type:"u64"}]}},{name:"OrderSide",type:{kind:"enum",variants:[{name:"Buy"},{name:"Sell"}]}},{name:"TokenType",type:{kind:"enum",variants:[{name:"Asset"},{name:"Currency"}]}}],errors:[{code:6e3,name:"InvalidDestinationAccount",msg:"Invalid Destination Token Account"},{code:6001,name:"InvalidInstruction",msg:"Invalid instruction."},{code:6002,name:"InvalidMint",msg:"Invalid SPL Token mint"},{code:6003,name:"InvalidOfferAccountOwner",msg:"Invalid Offer Account Owner"},{code:6004,name:"InvalidTokenAccount",msg:"Invalid SPL Token account"},{code:6005,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:6006,name:"InvalidUpdateAuthorityAccount",msg:"Invalid Update Authority account"},{code:6007,name:"InvalidOrderVaultAuthorityAccount",msg:"Invalid Order Vault Authority account"},{code:6008,name:"UninitializedTokenAccount",msg:"Uninitialized Token Account"},{code:6009,name:"InsufficientBalance",msg:"Insufficient Balance"},{code:6010,name:"InvalidOrderDuration",msg:"Invalid Order Duration"},{code:6011,name:"InvalidOriginationQty",msg:"Origination quantity must be greater than 0"},{code:6012,name:"InsufficientOrderQty",msg:"Insufficient Order Quantity Remaining"},{code:6013,name:"InvalidRoyalty",msg:"Invalid Royalty Value"},{code:6014,name:"InvalidCounter",msg:"Invalid Open Order Counter"},{code:6015,name:"MintDecimalError",msg:"Mint must be zero decimal"},{code:6016,name:"InvalidOrderAccountError",msg:"Order Account does not match provided account"},{code:6017,name:"InvalidRoyaltyTier",msg:"No royalty tier exists with provided stake amount"},{code:6018,name:"RoyaltyTierLength",msg:"Royalty Tier vector cannot hold any additional tiers"},{code:6019,name:"InvalidOrderPrice",msg:"Order price did not match expected price"},{code:6020,name:"DuplicateRoyaltyTier",msg:"Royalty tier already exists"},{code:6021,name:"InvalidSeller",msg:"Order seller did not match expected seller"}],metadata:{}};var tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.baseIdl=void 0;tf.baseIdl={version:"0.1.0",name:"gm_logs",instructions:[],events:[{name:"RegisterCurrencyMemo",fields:[{name:"updateAuthorityAccount",type:"publicKey",index:!1},{name:"registeredCurrency",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"saCurrencyVault",type:"publicKey",index:!1},{name:"royalty",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"InitializeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"ExchangeMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"CancelOrderMemo",fields:[{name:"orderInitializerPubkey",type:"publicKey",index:!1},{name:"currencyMint",type:"publicKey",index:!1},{name:"assetMint",type:"publicKey",index:!1},{name:"initializerCurrencyTokenAccount",type:"publicKey",index:!1},{name:"initializerAssetTokenAccount",type:"publicKey",index:!1},{name:"orderSide",type:"u8",index:!1},{name:"price",type:"u64",index:!1},{name:"orderOriginationQty",type:"u64",index:!1},{name:"orderRemainingQty",type:"u64",index:!1},{name:"createdAtTimestamp",type:"i64",index:!1},{name:"orderId",type:"publicKey",index:!1}]},{name:"StakeMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"stakeAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"TransferMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"transferAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"WithdrawMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"withdrawAmount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"SettleMemo",fields:[{name:"user",type:"publicKey",index:!1},{name:"registeredStake",type:"publicKey",index:!1},{name:"stakingAccount",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],metadata:{}};var sC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oC=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),aC=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sC(e,r,t);return oC(e,r),e};Object.defineProperty(qr,"__esModule",{value:!0});qr.getMarketplaceProgram=qr.getGmLogsIDL=qr.getGmIDL=void 0;const Db=mt,cC=Ac,uC=aC(tf);function bw(r){const e=cC.baseIdl;return e.metadata.address=r.toBase58(),e}qr.getGmIDL=bw;function lC(r){const e=uC.baseIdl;return e.metadata.address=r.toBase58(),e}qr.getGmLogsIDL=lC;function fC({connection:r,programId:e}){const t=bw(e),n=new Db.AnchorProvider(r,null,null);return new Db.Program(t,e,n)}qr.getMarketplaceProgram=fC;var Zs=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.getSingleOrder=Pn.getOpenOrdersForPlayerAndAsset=Pn.getOpenOrdersForPlayerAndCurrency=Pn.getOpenOrdersForAsset=Pn.getOpenOrdersForCurrency=Pn.getOpenOrdersForPlayer=Pn.getAllOpenOrders=void 0;const Zn=mt,eo=qr;function dC(r,e){return Zs(this,void 0,void 0,function*(){const t=new Zn.AnchorProvider(r,null,null),n=(0,eo.getGmIDL)(e),i=new Zn.Program(n,e,t),s=[{dataSize:201}];return yield i.account.orderAccount.all(s)})}Pn.getAllOpenOrders=dC;function hC(r,e,t){return Zs(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,eo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Pn.getOpenOrdersForPlayer=hC;function pC(r,e,t){return Zs(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,eo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:40,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Pn.getOpenOrdersForCurrency=pC;function gC(r,e,t){return Zs(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,eo.getGmIDL)(t),s=new Zn.Program(i,t,n),a=[{dataSize:201},{memcmp:{offset:72,bytes:e.toBase58()}}];return yield s.account.orderAccount.all(a)})}Pn.getOpenOrdersForAsset=gC;function yC(r,e,t,n){return Zs(this,void 0,void 0,function*(){const i=new Zn.AnchorProvider(r,null,null),s=(0,eo.getGmIDL)(n),a=new Zn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:40,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Pn.getOpenOrdersForPlayerAndCurrency=yC;function mC(r,e,t,n){return Zs(this,void 0,void 0,function*(){const i=new Zn.AnchorProvider(r,null,null),s=(0,eo.getGmIDL)(n),a=new Zn.Program(s,n,i),u=[{dataSize:201},{memcmp:{offset:72,bytes:t.toBase58()}},{memcmp:{offset:8,bytes:e.toBase58()}}];return yield a.account.orderAccount.all(u)})}Pn.getOpenOrdersForPlayerAndAsset=mC;function bC(r,e,t){return Zs(this,void 0,void 0,function*(){const n=new Zn.AnchorProvider(r,null,null),i=(0,eo.getGmIDL)(t);return yield new Zn.Program(i,t,n).account.orderAccount.fetch(e)})}Pn.getSingleOrder=bC;var sn={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.FEE_EXEMPT_SEED=Nn.OPEN_ORDERS_COUNTER=Nn.REGISTERED_CURRENCY_SEED=Nn.ORDER_VAULT_AUTH_SEED=Nn.ORDER_VAULT_SEED=Nn.MARKET_VARS_SEED=void 0;Nn.MARKET_VARS_SEED=Pe.Buffer.from("market-vars");Nn.ORDER_VAULT_SEED=Pe.Buffer.from("order-vault-account");Nn.ORDER_VAULT_AUTH_SEED=Pe.Buffer.from("order-vault-auth");Nn.REGISTERED_CURRENCY_SEED=Pe.Buffer.from("registered-currency");Nn.OPEN_ORDERS_COUNTER=Pe.Buffer.from("open-orders-counter");Nn.FEE_EXEMPT_SEED=Pe.Buffer.from("fee_exempt");var vC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_C=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wC=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&vC(e,r,t);return _C(e,r),e},ds=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(sn,"__esModule",{value:!0});sn.getAllFeeExemptAccounts=sn.getFeeExemptAccount=sn.getOpenOrdersCounter=sn.getAllRegisteredCurrencies=sn.getRegisteredCurrencyAccount=sn.getOrderVaultAuth=sn.getOrderVault=sn.getMarketVarsAccount=void 0;const dl=mt,da=Li,ha=wC(Nn),vw=qr;function AC(r){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.MARKET_VARS_SEED],r)})}sn.getMarketVarsAccount=AC;function SC(r,e,t){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.ORDER_VAULT_SEED,r.toBuffer(),e.toBuffer()],t)})}sn.getOrderVault=SC;function kC(r,e){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.ORDER_VAULT_AUTH_SEED,r.toBuffer()],e)})}sn.getOrderVaultAuth=kC;function IC(r,e){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.REGISTERED_CURRENCY_SEED,e.toBuffer()],r)})}sn.getRegisteredCurrencyAccount=IC;function EC(r,e){return ds(this,void 0,void 0,function*(){const t=new dl.AnchorProvider(r,null,null),n=(0,vw.getGmIDL)(e),i=new dl.Program(n,e,t),s=[{dataSize:1686}],a=yield i.account.registeredCurrency.all(s),u=[];for(const f of a){const h={mint:f.account.tokenMint,royalty:f.account.royalty,saVault:f.account.saCurrencyVault};u.push(h)}return u})}sn.getAllRegisteredCurrencies=EC;function OC(r,e,t){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.OPEN_ORDERS_COUNTER,r.toBuffer(),e.toBuffer()],t)})}sn.getOpenOrdersCounter=OC;function PC(r,e){return ds(this,void 0,void 0,function*(){return da.PublicKey.findProgramAddress([ha.FEE_EXEMPT_SEED,r.toBuffer()],e)})}sn.getFeeExemptAccount=PC;function TC(r,e){return ds(this,void 0,void 0,function*(){const t=new dl.AnchorProvider(r,null,null),n=(0,vw.getGmIDL)(e);return yield new dl.Program(n,e,t).account.feeReduction.all()})}sn.getAllFeeExemptAccounts=TC;var Hn={},pa=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.getRoyaltyReductionForStakingAccount=Hn.getRoyaltyReductionForUserAndMint=Hn.getRegisteredCurrencyInfoFromPubkey=Hn.getRegisteredCurrencyAccountInfo=Hn.getFeeExemptAccountInfo=Hn.getMarketVarsAccountInfo=void 0;const hl=mt,Yp=sn,nf=qr,Jh=Bl;function RC(r,e){return pa(this,void 0,void 0,function*(){const t=(0,nf.getMarketplaceProgram)({connection:r,programId:e}),[n]=yield(0,Yp.getMarketVarsAccount)(e);return yield t.account.marketVars.fetch(n)})}Hn.getMarketVarsAccountInfo=RC;function BC(r,e,t){return pa(this,void 0,void 0,function*(){const n=(0,nf.getMarketplaceProgram)({connection:r,programId:t}),[i]=yield(0,Yp.getFeeExemptAccount)(e,t);return yield n.account.feeExempt.fetch(i)})}Hn.getFeeExemptAccountInfo=BC;function xC(r,e,t){return pa(this,void 0,void 0,function*(){const n=(0,nf.getMarketplaceProgram)({connection:r,programId:e}),[i]=yield(0,Yp.getRegisteredCurrencyAccount)(e,t);return yield n.account.registeredCurrency.fetch(i)})}Hn.getRegisteredCurrencyAccountInfo=xC;function Jp(r,e,t){return pa(this,void 0,void 0,function*(){return yield(0,nf.getMarketplaceProgram)({connection:r,programId:e}).account.registeredCurrency.fetch(t)})}Hn.getRegisteredCurrencyInfoFromPubkey=Jp;function MC(r,e,t,n,i,s){return pa(this,void 0,void 0,function*(){let a=0;const u=yield Jp(r,e,i),[f]=yield(0,Jh.getStakingAccount)(t,n,s),h=yield(0,Jh.getStakingAccountInfo)(r,f,t);if(h.unstakedTs.eq(new hl.BN(0))){const d=u.royaltyTiers;let m=new hl.BN(0);for(const I of d)h.totalStake.gte(I.stakeAmount)&&(m=I.discount);a=m.toNumber()/1e4}return a})}Hn.getRoyaltyReductionForUserAndMint=MC;function CC(r,e,t,n,i){return pa(this,void 0,void 0,function*(){let s=0;const a=yield Jp(r,e,i),u=yield(0,Jh.getStakingAccountInfo)(r,n,t);if(u.unstakedTs.eq(new hl.BN(0))){const f=a.royaltyTiers;let h=new hl.BN(0);for(const d of f)u.totalStake.gte(d.stakeAmount)&&(h=d.discount);s=h.toNumber()/1e4}return s})}Hn.getRoyaltyReductionForStakingAccount=CC;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Pn,r),t(sn,r),t(Hn,r),t(Nn,r)})(fs);var Sc={},tr={},ns={},LC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ns,"__esModule",{value:!0});ns.convertDecimalPriceToBn=ns.initializeAtaForMint=ns.getOrderSide=void 0;const KC=mt,NC=Hs,mh=wc,DC=r=>JSON.stringify(r.orderSide)===JSON.stringify({buy:{}})?"BuySide":"SellSide";ns.getOrderSide=DC;function FC({mint:r,owner:e,connection:t}){return LC(this,void 0,void 0,function*(){const n=[],i=yield(0,NC.associatedAddress)({mint:r,owner:e});return(yield t.getAccountInfo(i))===null&&n.push(mh.Token.createAssociatedTokenAccountInstruction(mh.ASSOCIATED_TOKEN_PROGRAM_ID,mh.TOKEN_PROGRAM_ID,r,i,e,e)),{account:i,instructions:n}})}ns.initializeAtaForMint=FC;const UC=(r,e)=>new KC.BN(r*Math.pow(10,e));ns.convertDecimalPriceToBn=UC;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(qr,r),t(ns,r)})(tr);var zC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.createOrderCounterInstruction=void 0;const WC=tr;function VC({connection:r,payer:e,initializerMainAccount:t,depositMint:n,programId:i}){return zC(this,void 0,void 0,function*(){return yield(0,WC.getMarketplaceProgram)({connection:r,programId:i}).methods.initializeOpenOrdersCounter().accounts({payer:e,user:t,depositMint:n}).instruction()})}Sc.createOrderCounterInstruction=VC;var $C=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ef,"__esModule",{value:!0});ef.createCancelOrderInstruction=void 0;const jC=mt,qC=fs,GC=Sc,Fb=tr,HC=Fr;function YC({connection:r,orderInitializer:e,orderAccount:t,programId:n,payer:i=e}){return $C(this,void 0,void 0,function*(){const s=(0,Fb.getMarketplaceProgram)({connection:r,programId:n}),a={signers:[],instructions:[]},u=yield s.account.orderAccount.fetch(t),h=(0,Fb.getOrderSide)(u)==="SellSide"?u.assetMint:u.currencyMint;let d=null,m=null;const I=yield(0,HC.getTokenAccount)(r,e,h);d=I.tokenAccount,"createInstruction"in I&&a.instructions.push(...I.createInstruction),d instanceof jC.web3.Keypair?(m=d.publicKey,a.signers.push(d)):m=d;const[O]=yield(0,qC.getOpenOrdersCounter)(e,h,n);if((yield r.getAccountInfo(O))===null){const R=yield(0,GC.createOrderCounterInstruction)({connection:r,payer:i,initializerMainAccount:e,depositMint:h,programId:n});a.instructions.push(R)}const S=yield s.methods.processCancel().accounts({signer:i,depositMint:h,orderInitializer:e,initializerDepositTokenAccount:m,orderAccount:t}).instruction();return a.instructions.push(S),a})}ef.createCancelOrderInstruction=YC;var Yo={},_w=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.createInitializeSellOrderInstruction=Yo.createInitializeBuyOrderInstruction=void 0;const Uo=mt,ww=tr,Aw=Fr,Sw=fs,kw=Sc,Iw=Fr;function JC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return _w(this,void 0,void 0,function*(){const f=(0,ww.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Aw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Uo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,Sw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,kw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const S=Uo.web3.Keypair.generate();h.signers.push(S);const R=yield(0,Iw.createAccountInstruction)(r,e,S,u);h.instructions.push(R);const C=yield f.methods.processInitializeBuy(n,new Uo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:S.publicKey,depositMint:s,receiveMint:a}).signers([S]).instruction();return h.instructions.push(C),{orderAccount:S.publicKey,ixSet:h}})}Yo.createInitializeBuyOrderInstruction=JC;function QC({connection:r,initializerMainAccount:e,initializerDepositTokenAccount:t,price:n,originationQty:i,depositMint:s,receiveMint:a,programId:u}){return _w(this,void 0,void 0,function*(){const f=(0,ww.getMarketplaceProgram)({connection:r,programId:u}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,Aw.getTokenAccount)(r,e,a);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof Uo.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const[O]=yield(0,Sw.getOpenOrdersCounter)(e,s,u);if((yield r.getAccountInfo(O))===null){const Y=yield(0,kw.createOrderCounterInstruction)({connection:r,payer:e,initializerMainAccount:e,depositMint:s,programId:u});h.instructions.push(Y)}const S=Uo.web3.Keypair.generate();h.signers.push(S);const R=yield(0,Iw.createAccountInstruction)(r,e,S,u);h.instructions.push(R);const C=yield f.methods.processInitializeSell(n,new Uo.BN(i)).accounts({orderInitializer:e,initializerDepositTokenAccount:t,initializerReceiveTokenAccount:m,orderAccount:S.publicKey,depositMint:s,receiveMint:a}).signers([S]).instruction();return h.instructions.push(C),{orderAccount:S.publicKey,ixSet:h}})}Yo.createInitializeSellOrderInstruction=QC;var rf={},XC=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(rf,"__esModule",{value:!0});rf.createDeregisterCurrencyInstruction=void 0;const ZC=tr;function eL({connection:r,updateAuthorityAccount:e,currencyMint:t,programId:n}){return XC(this,void 0,void 0,function*(){const s=[yield(0,ZC.getMarketplaceProgram)({connection:r,programId:n}).methods.deregisterCurrency().accounts({updateAuthorityAccount:e,currencyMint:t}).instruction()];return{accounts:[],instructions:s}})}rf.createDeregisterCurrencyInstruction=eL;var sf={},of={},af={},Ew={exports:{}};(function(r){(function(e){var t,n=20,i=1,s=1e6,a=1e6,u=-7,f=21,h=!1,d="[big.js] ",m=d+"Invalid ",I=m+"decimal places",O=m+"rounding mode",M=d+"Division by zero",S={},R=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Y(){function E(N){var V=this;if(!(V instanceof E))return N===R?Y():new E(N);if(N instanceof E)V.s=N.s,V.e=N.e,V.c=N.c.slice();else{if(typeof N!="string"){if(E.strict===!0&&typeof N!="bigint")throw TypeError(m+"value");N=N===0&&1/N<0?"-0":String(N)}ae(V,N)}V.constructor=E}return E.prototype=S,E.DP=n,E.RM=i,E.NE=u,E.PE=f,E.strict=h,E.roundDown=0,E.roundHalfUp=1,E.roundHalfEven=2,E.roundUp=3,E}function ae(E,N){var V,J,K;if(!C.test(N))throw Error(m+"number");for(E.s=N.charAt(0)=="-"?(N=N.slice(1),-1):1,(V=N.indexOf("."))>-1&&(N=N.replace(".","")),(J=N.search(/e/i))>0?(V<0&&(V=J),V+=+N.slice(J+1),N=N.substring(0,J)):V<0&&(V=N.length),K=N.length,J=0;J<K&&N.charAt(J)=="0";)++J;if(J==K)E.c=[E.e=0];else{for(;K>0&&N.charAt(--K)=="0";);for(E.e=V-J-1,E.c=[],V=0;J<=K;)E.c[V++]=+N.charAt(J++)}return E}function oe(E,N,V,J){var K=E.c;if(V===R&&(V=E.constructor.RM),V!==0&&V!==1&&V!==2&&V!==3)throw Error(O);if(N<1)J=V===3&&(J||!!K[0])||N===0&&(V===1&&K[0]>=5||V===2&&(K[0]>5||K[0]===5&&(J||K[1]!==R))),K.length=1,J?(E.e=E.e-N+1,K[0]=1):K[0]=E.e=0;else if(N<K.length){if(J=V===1&&K[N]>=5||V===2&&(K[N]>5||K[N]===5&&(J||K[N+1]!==R||K[N-1]&1))||V===3&&(J||!!K[0]),K.length=N,J){for(;++K[--N]>9;)if(K[N]=0,N===0){++E.e,K.unshift(1);break}}for(N=K.length;!K[--N];)K.pop()}return E}function de(E,N,V){var J=E.e,K=E.c.join(""),j=K.length;if(N)K=K.charAt(0)+(j>1?"."+K.slice(1):"")+(J<0?"e":"e+")+J;else if(J<0){for(;++J;)K="0"+K;K="0."+K}else if(J>0)if(++J>j)for(J-=j;J--;)K+="0";else J<j&&(K=K.slice(0,J)+"."+K.slice(J));else j>1&&(K=K.charAt(0)+"."+K.slice(1));return E.s<0&&V?"-"+K:K}S.abs=function(){var E=new this.constructor(this);return E.s=1,E},S.cmp=function(E){var N,V=this,J=V.c,K=(E=new V.constructor(E)).c,j=V.s,te=E.s,T=V.e,W=E.e;if(!J[0]||!K[0])return J[0]?j:K[0]?-te:0;if(j!=te)return j;if(N=j<0,T!=W)return T>W^N?1:-1;for(te=(T=J.length)<(W=K.length)?T:W,j=-1;++j<te;)if(J[j]!=K[j])return J[j]>K[j]^N?1:-1;return T==W?0:T>W^N?1:-1},S.div=function(E){var N=this,V=N.constructor,J=N.c,K=(E=new V(E)).c,j=N.s==E.s?1:-1,te=V.DP;if(te!==~~te||te<0||te>s)throw Error(I);if(!K[0])throw Error(M);if(!J[0])return E.s=j,E.c=[E.e=0],E;var T,W,X,Be,ye,Ie=K.slice(),qt=T=K.length,Gt=J.length,_e=J.slice(0,T),We=_e.length,Zt=E,ln=Zt.c=[],Et=0,ht=te+(Zt.e=N.e-E.e)+1;for(Zt.s=j,j=ht<0?0:ht,Ie.unshift(0);We++<T;)_e.push(0);do{for(X=0;X<10;X++){if(T!=(We=_e.length))Be=T>We?1:-1;else for(ye=-1,Be=0;++ye<T;)if(K[ye]!=_e[ye]){Be=K[ye]>_e[ye]?1:-1;break}if(Be<0){for(W=We==T?K:Ie;We;){if(_e[--We]<W[We]){for(ye=We;ye&&!_e[--ye];)_e[ye]=9;--_e[ye],_e[We]+=10}_e[We]-=W[We]}for(;!_e[0];)_e.shift()}else break}ln[Et++]=Be?X:++X,_e[0]&&Be?_e[We]=J[qt]||0:_e=[J[qt]]}while((qt++<Gt||_e[0]!==R)&&j--);return!ln[0]&&Et!=1&&(ln.shift(),Zt.e--,ht--),Et>ht&&oe(Zt,ht,V.RM,_e[0]!==R),Zt},S.eq=function(E){return this.cmp(E)===0},S.gt=function(E){return this.cmp(E)>0},S.gte=function(E){return this.cmp(E)>-1},S.lt=function(E){return this.cmp(E)<0},S.lte=function(E){return this.cmp(E)<1},S.minus=S.sub=function(E){var N,V,J,K,j=this,te=j.constructor,T=j.s,W=(E=new te(E)).s;if(T!=W)return E.s=-W,j.plus(E);var X=j.c.slice(),Be=j.e,ye=E.c,Ie=E.e;if(!X[0]||!ye[0])return ye[0]?E.s=-W:X[0]?E=new te(j):E.s=1,E;if(T=Be-Ie){for((K=T<0)?(T=-T,J=X):(Ie=Be,J=ye),J.reverse(),W=T;W--;)J.push(0);J.reverse()}else for(V=((K=X.length<ye.length)?X:ye).length,T=W=0;W<V;W++)if(X[W]!=ye[W]){K=X[W]<ye[W];break}if(K&&(J=X,X=ye,ye=J,E.s=-E.s),(W=(V=ye.length)-(N=X.length))>0)for(;W--;)X[N++]=0;for(W=N;V>T;){if(X[--V]<ye[V]){for(N=V;N&&!X[--N];)X[N]=9;--X[N],X[V]+=10}X[V]-=ye[V]}for(;X[--W]===0;)X.pop();for(;X[0]===0;)X.shift(),--Ie;return X[0]||(E.s=1,X=[Ie=0]),E.c=X,E.e=Ie,E},S.mod=function(E){var N,V=this,J=V.constructor,K=V.s,j=(E=new J(E)).s;if(!E.c[0])throw Error(M);return V.s=E.s=1,N=E.cmp(V)==1,V.s=K,E.s=j,N?new J(V):(K=J.DP,j=J.RM,J.DP=J.RM=0,V=V.div(E),J.DP=K,J.RM=j,this.minus(V.times(E)))},S.neg=function(){var E=new this.constructor(this);return E.s=-E.s,E},S.plus=S.add=function(E){var N,V,J,K=this,j=K.constructor;if(E=new j(E),K.s!=E.s)return E.s=-E.s,K.minus(E);var te=K.e,T=K.c,W=E.e,X=E.c;if(!T[0]||!X[0])return X[0]||(T[0]?E=new j(K):E.s=K.s),E;if(T=T.slice(),N=te-W){for(N>0?(W=te,J=X):(N=-N,J=T),J.reverse();N--;)J.push(0);J.reverse()}for(T.length-X.length<0&&(J=X,X=T,T=J),N=X.length,V=0;N;T[N]%=10)V=(T[--N]=T[N]+X[N]+V)/10|0;for(V&&(T.unshift(V),++W),N=T.length;T[--N]===0;)T.pop();return E.c=T,E.e=W,E},S.pow=function(E){var N=this,V=new N.constructor("1"),J=V,K=E<0;if(E!==~~E||E<-a||E>a)throw Error(m+"exponent");for(K&&(E=-E);E&1&&(J=J.times(N)),E>>=1,!!E;)N=N.times(N);return K?V.div(J):J},S.prec=function(E,N){if(E!==~~E||E<1||E>s)throw Error(m+"precision");return oe(new this.constructor(this),E,N)},S.round=function(E,N){if(E===R)E=0;else if(E!==~~E||E<-s||E>s)throw Error(I);return oe(new this.constructor(this),E+this.e+1,N)},S.sqrt=function(){var E,N,V,J=this,K=J.constructor,j=J.s,te=J.e,T=new K("0.5");if(!J.c[0])return new K(J);if(j<0)throw Error(d+"No square root");j=Math.sqrt(J+""),j===0||j===1/0?(N=J.c.join(""),N.length+te&1||(N+="0"),j=Math.sqrt(N),te=((te+1)/2|0)-(te<0||te&1),E=new K((j==1/0?"5e":(j=j.toExponential()).slice(0,j.indexOf("e")+1))+te)):E=new K(j+""),te=E.e+(K.DP+=4);do V=E,E=T.times(V.plus(J.div(V)));while(V.c.slice(0,te).join("")!==E.c.slice(0,te).join(""));return oe(E,(K.DP-=4)+E.e+1,K.RM)},S.times=S.mul=function(E){var N,V=this,J=V.constructor,K=V.c,j=(E=new J(E)).c,te=K.length,T=j.length,W=V.e,X=E.e;if(E.s=V.s==E.s?1:-1,!K[0]||!j[0])return E.c=[E.e=0],E;for(E.e=W+X,te<T&&(N=K,K=j,j=N,X=te,te=T,T=X),N=new Array(X=te+T);X--;)N[X]=0;for(W=T;W--;){for(T=0,X=te+W;X>W;)T=N[X]+j[W]*K[X-W-1]+T,N[X--]=T%10,T=T/10|0;N[X]=T}for(T?++E.e:N.shift(),W=N.length;!N[--W];)N.pop();return E.c=N,E},S.toExponential=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),++E,N);V.c.length<E;)V.c.push(0)}return de(V,!0,!!J)},S.toFixed=function(E,N){var V=this,J=V.c[0];if(E!==R){if(E!==~~E||E<0||E>s)throw Error(I);for(V=oe(new V.constructor(V),E+V.e+1,N),E=E+V.e+1;V.c.length<E;)V.c.push(0)}return de(V,!1,!!J)},S.toJSON=S.toString=function(){var E=this,N=E.constructor;return de(E,E.e<=N.NE||E.e>=N.PE,!!E.c[0])},S.toNumber=function(){var E=Number(de(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(E.toString()))throw Error(d+"Imprecise conversion");return E},S.toPrecision=function(E,N){var V=this,J=V.constructor,K=V.c[0];if(E!==R){if(E!==~~E||E<1||E>s)throw Error(m+"precision");for(V=oe(new J(V),E,N);V.c.length<E;)V.c.push(0)}return de(V,E<=V.e||V.e<=J.NE||V.e>=J.PE,!!K)},S.valueOf=function(){var E=this,N=E.constructor;if(N.strict===!0)throw Error(d+"valueOf disallowed");return de(E,E.e<=N.NE||E.e>=N.PE,!0)},t=Y(),t.default=t.Big=t,r.exports?r.exports=t:e.Big=t})(z)})(Ew);function Ce(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var tL={};function Qp(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Pe.global<"u"?Pe.global:typeof self<"u"?self:tL}var Ow=Object.assign,pl=Object.getOwnPropertyDescriptor,li=Object.defineProperty,kc=Object.prototype,Qh=[];Object.freeze(Qh);var Xp={};Object.freeze(Xp);var nL=typeof Proxy<"u",rL=Object.toString();function Pw(){nL||Ce("Proxy not available")}function Tw(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Mo=function(){};function br(r){return typeof r=="function"}function zs(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function cf(r){return r!==null&&typeof r=="object"}function Ci(r){if(!cf(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===rL}function Rw(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Ic(r,e,t){li(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Bw(r,e,t){li(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function hs(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return cf(n)&&n[t]===!0}}function ga(r){return r instanceof Map}function Ec(r){return r instanceof Set}var xw=typeof Object.getOwnPropertySymbols<"u";function iL(r){var e=Object.keys(r);if(!xw)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(n){return kc.propertyIsEnumerable.call(r,n)})):e}var Jo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:xw?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function Mw(r){return r===null?null:typeof r=="object"?""+r:r}function Bi(r,e){return kc.hasOwnProperty.call(r,e)}var sL=Object.getOwnPropertyDescriptors||function(e){var t={};return Jo(e).forEach(function(n){t[n]=pl(e,n)}),t};function Ub(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,cL(n.key),n)}}function Zp(r,e,t){return e&&Ub(r.prototype,e),t&&Ub(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function as(){return as=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},as.apply(this,arguments)}function Cw(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Xh(r,e)}function Xh(r,e){return Xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Xh(r,e)}function bh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function oL(r,e){if(!!r){if(typeof r=="string")return zb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zb(r,e)}}function zb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Co(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=oL(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aL(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cL(r){var e=aL(r,"string");return typeof e=="symbol"?e:String(e)}var ui=Symbol("mobx-stored-annotations");function Gr(r){function e(t,n){if(Oc(n))return r.decorate_20223_(t,n);ya(t,n,r)}return Object.assign(e,r)}function ya(r,e,t){Bi(r,ui)||Ic(r,ui,as({},r[ui])),mL(t)||(r[ui][e]=t)}function uL(r){return Bi(r,ui)||Ic(r,ui,as({},r[ui])),r[ui]}function Oc(r){return typeof r=="object"&&typeof r.kind=="string"}var Se=Symbol("mobx administration"),Pc=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=nt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t,this.batchId_=fe.inBatch?fe.batchId:NaN}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.reportObserved=function(){return tA(this)},e.reportChanged=function(){(!fe.inBatch||this.batchId_!==fe.batchId)&&(fe.stateVersion=fe.stateVersion<Number.MAX_SAFE_INTEGER?fe.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),Yn(),nA(this),Jn()},e.toString=function(){return this.name_},r}(),eg=hs("Atom",Pc);function uf(r,e,t){e===void 0&&(e=Mo),t===void 0&&(t=Mo);var n=new Pc(r);return e!==Mo&&fA(n,e),t!==Mo&&Bc(n,t),n}function lL(r,e){return r===e}function fL(r,e){return cg(r,e)}function dL(r,e){return cg(r,e,1)}function hL(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Ws={identity:lL,structural:fL,default:hL,shallow:dL};function Vs(r,e,t){return mf(r)?r:Array.isArray(r)?xt.array(r,{name:t}):Ci(r)?xt.object(r,void 0,{name:t}):ga(r)?xt.map(r,{name:t}):Ec(r)?xt.set(r,{name:t}):typeof r=="function"&&!ps(r)&&!ea(r)?Rw(r)?qs(r):Zo(t,r):r}function pL(r,e,t){if(r==null||an(r)||hn(r)||un(r)||Fn(r))return r;if(Array.isArray(r))return xt.array(r,{name:t,deep:!1});if(Ci(r))return xt.object(r,void 0,{name:t,deep:!1});if(ga(r))return xt.map(r,{name:t,deep:!1});if(Ec(r))return xt.set(r,{name:t,deep:!1})}function lf(r){return r}function gL(r,e){return cg(r,e)?e:r}var Lw="override",yL=Gr({annotationType_:Lw,make_:bL,extend_:vL,decorate_20223_:_L});function mL(r){return r.annotationType_===Lw}function bL(r,e){return 0}function vL(r,e,t,n){Ce("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function _L(r,e){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Tc(r,e){return{annotationType_:r,options_:e,make_:wL,extend_:AL,decorate_20223_:SL}}function wL(r,e,t,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(ps(t.value))return 1;var s=Kw(r,this,e,t,!1);return li(n,e,s),2}function AL(r,e,t,n){var i=Kw(r,this,e,t);return r.defineProperty_(e,i,n)}function SL(r,e){var t=e.kind,n=e.name,i=e.addInitializer,s=this,a=function(h){var d,m,I,O;return cs((d=(m=s.options_)==null?void 0:m.name)!=null?d:n.toString(),h,(I=(O=s.options_)==null?void 0:O.autoAction)!=null?I:!1)};if(t=="field"){i(function(){ya(this,n,s)});return}if(t=="method"){var u;return ps(r)||(r=a(r)),(u=this.options_)!=null&&u.bound&&i(function(){var f=this,h=f[n].bind(f);h.isMobxAction=!0,f[n]=h}),r}Ce("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+t+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function kL(r,e,t,n){e.annotationType_,n.value}function Kw(r,e,t,n,i){var s,a,u,f,h,d,m;i===void 0&&(i=fe.safeDescriptors),kL(r,e,t,n);var I=n.value;if((s=e.options_)!=null&&s.bound){var O;I=I.bind((O=r.proxy_)!=null?O:r.target_)}return{value:cs((a=(u=e.options_)==null?void 0:u.name)!=null?a:t.toString(),I,(f=(h=e.options_)==null?void 0:h.autoAction)!=null?f:!1,(d=e.options_)!=null&&d.bound?(m=r.proxy_)!=null?m:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function Nw(r,e){return{annotationType_:r,options_:e,make_:IL,extend_:EL,decorate_20223_:OL}}function IL(r,e,t,n){var i;if(n===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Bi(r.target_,e)||!ea(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(ea(t.value))return 1;var s=Dw(r,this,e,t,!1,!1);return li(n,e,s),2}function EL(r,e,t,n){var i,s=Dw(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,s,n)}function OL(r,e){var t,n=e.name,i=e.addInitializer;return ea(r)||(r=qs(r)),(t=this.options_)!=null&&t.bound&&i(function(){var s=this,a=s[n].bind(s);a.isMobXFlow=!0,s[n]=a}),r}function PL(r,e,t,n){e.annotationType_,n.value}function Dw(r,e,t,n,i,s){s===void 0&&(s=fe.safeDescriptors),PL(r,e,t,n);var a=n.value;if(ea(a)||(a=qs(a)),i){var u;a=a.bind((u=r.proxy_)!=null?u:r.target_),a.isMobXFlow=!0}return{value:a,configurable:s?r.isPlainObject_:!0,enumerable:!1,writable:!s}}function tg(r,e){return{annotationType_:r,options_:e,make_:TL,extend_:RL,decorate_20223_:BL}}function TL(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function RL(r,e,t,n){return xL(r,this,e,t),r.defineComputedProperty_(e,as({},this.options_,{get:t.get,set:t.set}),n)}function BL(r,e){var t=this,n=e.name,i=e.addInitializer;return i(function(){var s=no(this)[Se],a=as({},t.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),s.values_.set(n,new Xo(a))}),function(){return this[Se].getObservablePropValue_(n)}}function xL(r,e,t,n){e.annotationType_,n.get}function ff(r,e){return{annotationType_:r,options_:e,make_:ML,extend_:CL,decorate_20223_:LL}}function ML(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function CL(r,e,t,n){var i,s;return KL(r,this),r.defineObservableProperty_(e,t.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Vs,n)}function LL(r,e){var t=this,n=e.kind,i=e.name,s=new WeakSet;function a(u,f){var h,d,m=no(u)[Se],I=new rs(f,(h=(d=t.options_)==null?void 0:d.enhancer)!=null?h:Vs,"ObservableObject."+i.toString(),!1);m.values_.set(i,I),s.add(u)}if(n=="accessor")return{get:function(){return s.has(this)||a(this,r.get.call(this)),this[Se].getObservablePropValue_(i)},set:function(f){return s.has(this)||a(this,f),this[Se].setObservablePropValue_(i,f)},init:function(f){return s.has(this)||a(this,f),f}}}function KL(r,e,t,n){e.annotationType_}var NL="true",DL=Fw();function Fw(r){return{annotationType_:NL,options_:r,make_:FL,extend_:UL,decorate_20223_:zL}}function FL(r,e,t,n){var i,s;if(t.get)return Nr.make_(r,e,t,n);if(t.set){var a=cs(e.toString(),t.set);return n===r.target_?r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(li(n,e,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof t.value=="function"){var u;if(Rw(t.value)){var f,h=(f=this.options_)!=null&&f.autoBind?qs.bound:qs;return h.make_(r,e,t,n)}var d=(u=this.options_)!=null&&u.autoBind?Zo.bound:Zo;return d.make_(r,e,t,n)}var m=((i=this.options_)==null?void 0:i.deep)===!1?xt.ref:xt;if(typeof t.value=="function"&&(s=this.options_)!=null&&s.autoBind){var I;t.value=t.value.bind((I=r.proxy_)!=null?I:r.target_)}return m.make_(r,e,t,n)}function UL(r,e,t,n){var i,s;if(t.get)return Nr.extend_(r,e,t,n);if(t.set)return r.defineProperty_(e,{configurable:fe.safeDescriptors?r.isPlainObject_:!0,set:cs(e.toString(),t.set)},n);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var u=((s=this.options_)==null?void 0:s.deep)===!1?xt.ref:xt;return u.extend_(r,e,t,n)}function zL(r,e){Ce("'"+this.annotationType_+"' cannot be used as a decorator")}var WL="observable",VL="observable.ref",$L="observable.shallow",jL="observable.struct",Uw={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Uw);function Mu(r){return r||Uw}var Zh=ff(WL),qL=ff(VL,{enhancer:lf}),GL=ff($L,{enhancer:pL}),HL=ff(jL,{enhancer:gL}),zw=Gr(Zh);function Cu(r){return r.deep===!0?Vs:r.deep===!1?lf:JL(r.defaultDecorator)}function YL(r){var e;return r?(e=r.defaultDecorator)!=null?e:Fw(r):void 0}function JL(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:Vs}function Ww(r,e,t){if(Oc(e))return Zh.decorate_20223_(r,e);if(zs(e)){ya(r,e,Zh);return}return mf(r)?r:Ci(r)?xt.object(r,e,t):Array.isArray(r)?xt.array(r,e):ga(r)?xt.map(r,e):Ec(r)?xt.set(r,e):typeof r=="object"&&r!==null?r:xt.box(r,e)}Ow(Ww,zw);var QL={box:function(e,t){var n=Mu(t);return new rs(e,Cu(n),n.name,!0,n.equals)},array:function(e,t){var n=Mu(t);return(fe.useProxies===!1||n.proxy===!1?cN:XK)(e,Cu(n),n.name)},map:function(e,t){var n=Mu(t);return new bf(e,Cu(n),n.name)},set:function(e,t){var n=Mu(t);return new og(e,Cu(n),n.name)},object:function(e,t,n){return ys(function(){return gf(fe.useProxies===!1||(n==null?void 0:n.proxy)===!1?no({},n):HK({},n),e,t)})},ref:Gr(qL),shallow:Gr(GL),deep:zw,struct:Gr(HL)},xt=Ow(Ww,QL),Vw="computed",XL="computed.struct",ep=tg(Vw),ZL=tg(XL,{equals:Ws.structural}),Nr=function(e,t){if(Oc(t))return ep.decorate_20223_(e,t);if(zs(t))return ya(e,t,ep);if(Ci(e))return Gr(tg(Vw,e));var n=Ci(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Xo(n)};Object.assign(Nr,ep);Nr.struct=Gr(ZL);var Wb,Vb,gl=0,eK=1,tK=(Wb=(Vb=pl(function(){},"name"))==null?void 0:Vb.configurable)!=null?Wb:!1,$b={value:"action",configurable:!0,writable:!1,enumerable:!1};function cs(r,e,t,n){t===void 0&&(t=!1);function i(){return $w(r,t,e,n||this,arguments)}return i.isMobxAction=!0,tK&&($b.value=r,li(i,"name",$b)),i}function $w(r,e,t,n,i){var s=jw(r,e);try{return t.apply(n,i)}catch(a){throw s.error_=a,a}finally{qw(s)}}function jw(r,e,t,n){var i=!1,s=0,a=fe.trackingDerivation,u=!e||!a;Yn();var f=fe.allowStateChanges;u&&(to(),f=df(!0));var h=pf(!0),d={runAsAction_:u,prevDerivation_:a,prevAllowStateChanges_:f,prevAllowStateReads_:h,notifySpy_:i,startTime_:s,actionId_:eK++,parentActionId_:gl};return gl=d.actionId_,d}function qw(r){gl!==r.actionId_&&Ce(30),gl=r.parentActionId_,r.error_!==void 0&&(fe.suppressReactionErrors=!0),hf(r.prevAllowStateChanges_),zo(r.prevAllowStateReads_),Jn(),r.runAsAction_&&xi(r.prevDerivation_),fe.suppressReactionErrors=!1}function Qo(r,e){var t=df(r);try{return e()}finally{hf(t)}}function df(r){var e=fe.allowStateChanges;return fe.allowStateChanges=r,e}function hf(r){fe.allowStateChanges=r}var Gw;Gw=Symbol.toPrimitive;var rs=function(r){Cw(e,r);function e(n,i,s,a,u){var f;return s===void 0&&(s="ObservableValue"),u===void 0&&(u=Ws.default),f=r.call(this,s)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=i,f.name_=s,f.equals=u,f.value_=i(n,void 0,s),f}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==fe.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(Lr(this)){var s=Kr(this,{object:this,type:fi,newValue:i});if(!s)return fe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?fe.UNCHANGED:i},t.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Hr(this)&&Yr(this,{type:fi,object:this,newValue:i,oldValue:s})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return xc(this,i)},t.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:fi,newValue:this.value_,oldValue:void 0}),Mc(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return Mw(this.get())},t[Gw]=function(){return this.valueOf()},e}(Pc),ng=hs("ObservableValue",rs),Hw;Hw=Symbol.toPrimitive;var Xo=function(){function r(t){this.dependenciesState_=nt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=nt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ml(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=yl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Ce(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=cs("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Ws.structural:Ws.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=r.prototype;return e.onBecomeStale_=function(){lK(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},e.get=function(){if(this.isComputing_&&Ce(32,this.name_,this.derivation),fe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)tp(this)&&(this.warnAboutUntrackedRead_(),Yn(),this.value_=this.computeValue_(!1),Jn());else if(tA(this),tp(this)){var n=fe.trackingContext;this.keepAlive_&&!n&&(fe.trackingContext=this),this.trackAndCompute()&&uK(this),fe.trackingContext=n}var i=this.value_;if(el(i))throw i.cause;return i},e.set=function(n){if(this.setter_){this.isRunningSetter_&&Ce(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else Ce(34,this.name_)},e.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===nt.NOT_TRACKING_,s=this.computeValue_(!0),a=i||el(n)||el(s)||!this.equals_(n,s);return a&&(this.value_=s),a},e.computeValue_=function(n){this.isComputing_=!0;var i=df(!1),s;if(n)s=Yw(this,this.derivation,this.scope_);else if(fe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(a){s=new ml(a)}return hf(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(np(this),this.value_=void 0)},e.observe_=function(n,i){var s=this,a=!0,u=void 0;return js(function(){var f=s.get();if(!a||i){var h=to();n({observableKind:"computed",debugObjectName:s.name_,type:fi,object:s,newValue:f,oldValue:u}),xi(h)}a=!1,u=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return Mw(this.get())},e[Hw]=function(){return this.valueOf()},r}(),$s=hs("ComputedValue",Xo),nt;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(nt||(nt={}));var yl;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(yl||(yl={}));var ml=function(e){this.cause=void 0,this.cause=e};function el(r){return r instanceof ml}function tp(r){switch(r.dependenciesState_){case nt.UP_TO_DATE_:return!1;case nt.NOT_TRACKING_:case nt.STALE_:return!0;case nt.POSSIBLY_STALE_:{for(var e=pf(!0),t=to(),n=r.observing_,i=n.length,s=0;s<i;s++){var a=n[s];if($s(a)){if(fe.disableErrorBoundaries)a.get();else try{a.get()}catch{return xi(t),zo(e),!0}if(r.dependenciesState_===nt.STALE_)return xi(t),zo(e),!0}}return Jw(r),xi(t),zo(e),!1}}}function Rc(){return fe.trackingDerivation!==null}function Yw(r,e,t){var n=pf(!0);Jw(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++fe.runId;var i=fe.trackingDerivation;fe.trackingDerivation=r,fe.inBatch++;var s;if(fe.disableErrorBoundaries===!0)s=e.call(t);else try{s=e.call(t)}catch(a){s=new ml(a)}return fe.inBatch--,fe.trackingDerivation=i,nK(r),zo(n),s}function nK(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,n=nt.UP_TO_DATE_,i=0,s=r.unboundDepsCount_,a=0;a<s;a++){var u=t[a];u.diffValue_===0&&(u.diffValue_=1,i!==a&&(t[i]=u),i++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(t.length=i,r.newObserving_=null,s=e.length;s--;){var f=e[s];f.diffValue_===0&&Zw(f,r),f.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,cK(h,r))}n!==nt.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function np(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)Zw(e[t],r);r.dependenciesState_=nt.NOT_TRACKING_}function rg(r){var e=to();try{return r()}finally{xi(e)}}function to(){var r=fe.trackingDerivation;return fe.trackingDerivation=null,r}function xi(r){fe.trackingDerivation=r}function pf(r){var e=fe.allowStateReads;return fe.allowStateReads=r,e}function zo(r){fe.allowStateReads=r}function Jw(r){if(r.dependenciesState_!==nt.UP_TO_DATE_){r.dependenciesState_=nt.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=nt.UP_TO_DATE_}}var rK=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Xa=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},tl=!0,Qw=!1,fe=function(){var r=Qp();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(tl=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new Xa().version&&(tl=!1),tl?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new Xa):(setTimeout(function(){Qw||Ce(35)},1),new Xa)}();function iK(){if((fe.pendingReactions.length||fe.inBatch||fe.isRunningReactions)&&Ce(36),Qw=!0,tl){var r=Qp();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),fe=new Xa}}function Xw(){return fe}function sK(){var r=new Xa;for(var e in r)rK.indexOf(e)===-1&&(fe[e]=r[e]);fe.allowStateChanges=!fe.enforceActions}function oK(r){return r.observers_&&r.observers_.size>0}function aK(r){return r.observers_}function cK(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function Zw(r,e){r.observers_.delete(e),r.observers_.size===0&&eA(r)}function eA(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,fe.pendingUnobservations.push(r))}function Yn(){fe.inBatch===0&&(fe.batchId=fe.batchId<Number.MAX_SAFE_INTEGER?fe.batchId+1:Number.MIN_SAFE_INTEGER),fe.inBatch++}function Jn(){if(--fe.inBatch===0){rA();for(var r=fe.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof Xo&&t.suspend_())}fe.pendingUnobservations=[]}}function tA(r){var e=fe.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&fe.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&fe.inBatch>0&&eA(r),!1)}function nA(r){r.lowestObserverState_!==nt.STALE_&&(r.lowestObserverState_=nt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=nt.STALE_}))}function uK(r){r.lowestObserverState_!==nt.STALE_&&(r.lowestObserverState_=nt.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.POSSIBLY_STALE_?e.dependenciesState_=nt.STALE_:e.dependenciesState_===nt.UP_TO_DATE_&&(r.lowestObserverState_=nt.UP_TO_DATE_)}))}function lK(r){r.lowestObserverState_===nt.UP_TO_DATE_&&(r.lowestObserverState_=nt.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===nt.UP_TO_DATE_&&(e.dependenciesState_=nt.POSSIBLY_STALE_,e.onBecomeStale_())}))}var lc=function(){function r(t,n,i,s){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=nt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=yl.NONE,this.name_=t,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=s}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fe.pendingReactions.push(this),rA())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Yn(),this.isScheduled_=!1;var n=fe.trackingContext;if(fe.trackingContext=this,tp(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}fe.trackingContext=n,Jn()}},e.track=function(n){if(!this.isDisposed_){Yn(),this.isRunning_=!0;var i=fe.trackingContext;fe.trackingContext=this;var s=Yw(this,n,void 0);fe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&np(this),el(s)&&this.reportExceptionInDerivation_(s.cause),Jn()}},e.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(fe.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";fe.suppressReactionErrors||console.error(s,n),fe.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Yn(),np(this),Jn()))},e.getDisposer_=function(n){var i=this,s=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[Se]=this,s},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(n){},r}();function fK(r){return fe.globalReactionErrorHandlers.push(r),function(){var e=fe.globalReactionErrorHandlers.indexOf(r);e>=0&&fe.globalReactionErrorHandlers.splice(e,1)}}var dK=100,rp=function(e){return e()};function rA(){fe.inBatch>0||fe.isRunningReactions||rp(hK)}function hK(){fe.isRunningReactions=!0;for(var r=fe.pendingReactions,e=0;r.length>0;){++e===dK&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction_()}fe.isRunningReactions=!1}var bl=hs("Reaction",lc);function pK(r){var e=rp;rp=function(n){return r(function(){return e(n)})}}function Za(){return!1}function iA(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var sA="action",gK="action.bound",oA="autoAction",yK="autoAction.bound",aA="<unnamed action>",ip=Tc(sA),mK=Tc(gK,{bound:!0}),sp=Tc(oA,{autoAction:!0}),bK=Tc(yK,{autoAction:!0,bound:!0});function cA(r){var e=function(n,i){if(br(n))return cs(n.name||aA,n,r);if(br(i))return cs(n,i,r);if(Oc(i))return(r?sp:ip).decorate_20223_(n,i);if(zs(i))return ya(n,i,r?sp:ip);if(zs(n))return Gr(Tc(r?oA:sA,{name:n,autoAction:r}))};return e}var zt=cA(!1);Object.assign(zt,ip);var Zo=cA(!0);Object.assign(Zo,sp);zt.bound=Gr(mK);Zo.bound=Gr(bK);function fc(r){return $w(r.name||aA,!1,r,this,void 0)}function ps(r){return br(r)&&r.isMobxAction===!0}function js(r,e){var t,n,i,s,a;e===void 0&&(e=Xp);var u=(t=(n=e)==null?void 0:n.name)!=null?t:"Autorun",f=!e.scheduler&&!e.delay,h;if(f)h=new lc(u,function(){this.track(I)},e.onError,e.requiresObservable);else{var d=uA(e),m=!1;h=new lc(u,function(){m||(m=!0,d(function(){m=!1,h.isDisposed_||h.track(I)}))},e.onError,e.requiresObservable)}function I(){r(h)}return(i=e)!=null&&(s=i.signal)!=null&&s.aborted||h.schedule_(),h.getDisposer_((a=e)==null?void 0:a.signal)}var vK=function(e){return e()};function uA(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:vK}function lA(r,e,t){var n,i,s,a;t===void 0&&(t=Xp);var u=(n=t.name)!=null?n:"Reaction",f=zt(u,t.onError?_K(t.onError,e):e),h=!t.scheduler&&!t.delay,d=uA(t),m=!0,I=!1,O,M,S=t.compareStructural?Ws.structural:t.equals||Ws.default,R=new lc(u,function(){m||h?C():I||(I=!0,d(C))},t.onError,t.requiresObservable);function C(){if(I=!1,!R.isDisposed_){var Y=!1;R.track(function(){var ae=Qo(!1,function(){return r(R)});Y=m||!S(O,ae),M=O,O=ae}),(m&&t.fireImmediately||!m&&Y)&&f(O,M,R),m=!1}}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||R.schedule_(),R.getDisposer_((a=t)==null?void 0:a.signal)}function _K(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}var wK="onBO",AK="onBUO";function fA(r,e,t){return dA(wK,r,e,t)}function Bc(r,e,t){return dA(AK,r,e,t)}function dA(r,e,t,n){var i=typeof n=="function"?di(e,t):di(e),s=br(n)?n:t,a=r+"L";return i[a]?i[a].add(s):i[a]=new Set([s]),function(){var u=i[a];u&&(u.delete(s),u.size===0&&delete i[a])}}var SK="never",Lu="always",kK="observed";function IK(r){r.isolateGlobalState===!0&&iK();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(fe.useProxies=e===Lu?!0:e===SK?!1:typeof Proxy<"u"),e==="ifavailable"&&(fe.verifyProxies=!0),t!==void 0){var n=t===Lu?Lu:t===kK;fe.enforceActions=n,fe.allowStateChanges=!(n===!0||n===Lu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(fe[i]=!!r[i])}),fe.allowStateReads=!fe.observableRequiresReaction,r.reactionScheduler&&pK(r.reactionScheduler)}function gf(r,e,t,n){var i=sL(e);return ys(function(){var s=no(r,n)[Se];Jo(i).forEach(function(a){s.extend_(a,i[a],t&&a in t?t[a]:!0)})}),r}function EK(r,e){return hA(di(r,e))}function hA(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=PK(r.observing_).map(hA)),e}function OK(r,e){return pA(di(r,e))}function pA(r){var e={name:r.name_};return oK(r)&&(e.observers=Array.from(aK(r)).map(pA)),e}function PK(r){return Array.from(new Set(r))}var TK=0;function yf(){this.message="FLOW_CANCELLED"}yf.prototype=Object.create(Error.prototype);function RK(r){return r instanceof yf}var vh=Nw("flow"),BK=Nw("flow.bound",{bound:!0}),qs=Object.assign(function(e,t){if(Oc(t))return vh.decorate_20223_(e,t);if(zs(t))return ya(e,t,vh);var n=e,i=n.name||"<unnamed flow>",s=function(){var u=this,f=arguments,h=++TK,d=zt(i+" - runid: "+h+" - init",n).apply(u,f),m,I=void 0,O=new Promise(function(M,S){var R=0;m=S;function C(oe){I=void 0;var de;try{de=zt(i+" - runid: "+h+" - yield "+R++,d.next).call(d,oe)}catch(E){return S(E)}ae(de)}function Y(oe){I=void 0;var de;try{de=zt(i+" - runid: "+h+" - yield "+R++,d.throw).call(d,oe)}catch(E){return S(E)}ae(de)}function ae(oe){if(br(oe==null?void 0:oe.then)){oe.then(ae,S);return}return oe.done?M(oe.value):(I=Promise.resolve(oe.value),I.then(C,Y))}C(void 0)});return O.cancel=zt(i+" - runid: "+h+" - cancel",function(){try{I&&jb(I);var M=d.return(void 0),S=Promise.resolve(M.value);S.then(Mo,Mo),jb(S),m(new yf)}catch(R){m(R)}}),O};return s.isMobXFlow=!0,s},vh);qs.bound=Gr(BK);function jb(r){br(r.cancel)&&r.cancel()}function xK(r){return r}function ea(r){return(r==null?void 0:r.isMobXFlow)===!0}function MK(r,e,t){var n;return un(r)||hn(r)||ng(r)?n=hi(r):an(r)&&(n=hi(r,e)),n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0}}function CK(r,e,t){return br(t)?KK(r,e,t):LK(r,e)}function LK(r,e){return hi(r).intercept_(e)}function KK(r,e,t){return hi(r,e).intercept_(t)}function gA(r,e){if(e===void 0)return $s(r);if(an(r)===!1||!r[Se].values_.has(e))return!1;var t=di(r,e);return $s(t)}function yA(r){return gA(r)}function nl(r,e){return gA(r,e)}function mA(r,e){return r?e!==void 0?an(r)?r[Se].values_.has(e):!1:an(r)||!!r[Se]||eg(r)||bl(r)||$s(r):!1}function mf(r){return mA(r)}function NK(r,e){return mA(r,e)}function ta(r){if(an(r))return r[Se].keys_();if(un(r)||Fn(r))return Array.from(r.keys());if(hn(r))return r.map(function(e,t){return t});Ce(5)}function bA(r){if(an(r))return ta(r).map(function(e){return r[e]});if(un(r))return ta(r).map(function(e){return r.get(e)});if(Fn(r))return Array.from(r.values());if(hn(r))return r.slice();Ce(6)}function vA(r){if(an(r))return ta(r).map(function(e){return[e,r[e]]});if(un(r))return ta(r).map(function(e){return[e,r.get(e)]});if(Fn(r))return Array.from(r.entries());if(hn(r))return r.map(function(e,t){return[t,e]});Ce(7)}function _A(r,e,t){if(arguments.length===2&&!Fn(r)){Yn();var n=e;try{for(var i in n)_A(r,i,n[i])}finally{Jn()}return}an(r)?r[Se].set_(e,t):un(r)?r.set(e,t):Fn(r)?r.add(e):hn(r)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Ce("Invalid index: '"+e+"'"),Yn(),e>=r.length&&(r.length=e+1),r[e]=t,Jn()):Ce(8)}function DK(r,e){an(r)?r[Se].delete_(e):un(r)||Fn(r)?r.delete(e):hn(r)?(typeof e!="number"&&(e=parseInt(e,10)),r.splice(e,1)):Ce(9)}function wA(r,e){if(an(r))return r[Se].has_(e);if(un(r))return r.has(e);if(Fn(r))return r.has(e);if(hn(r))return e>=0&&e<r.length;Ce(10)}function FK(r,e){if(!!wA(r,e)){if(an(r))return r[Se].get_(e);if(un(r))return r.get(e);if(hn(r))return r[e];Ce(11)}}function UK(r,e,t){if(an(r))return r[Se].defineProperty_(e,t);Ce(39)}function AA(r){if(an(r))return r[Se].ownKeys_();Ce(38)}function na(r,e,t,n){return br(t)?WK(r,e,t,n):zK(r,e,t)}function zK(r,e,t){return hi(r).observe_(e,t)}function WK(r,e,t,n){return hi(r,e).observe_(t,n)}function Ku(r,e,t){return r.set(e,t),t}function Oo(r,e){if(r==null||typeof r!="object"||r instanceof Date||!mf(r))return r;if(ng(r)||$s(r))return Oo(r.get(),e);if(e.has(r))return e.get(r);if(hn(r)){var t=Ku(e,r,new Array(r.length));return r.forEach(function(a,u){t[u]=Oo(a,e)}),t}if(Fn(r)){var n=Ku(e,r,new Set);return r.forEach(function(a){n.add(Oo(a,e))}),n}if(un(r)){var i=Ku(e,r,new Map);return r.forEach(function(a,u){i.set(u,Oo(a,e))}),i}else{var s=Ku(e,r,{});return AA(r).forEach(function(a){kc.propertyIsEnumerable.call(r,a)&&(s[a]=Oo(r[a],e))}),s}}function VK(r,e){return Oo(r,new Map)}function $K(){}function Cr(r,e){e===void 0&&(e=void 0),Yn();try{return r.apply(e)}finally{Jn()}}function jK(r,e,t){return arguments.length===1||e&&typeof e=="object"?qK(r,e):SA(r,e,t||{})}function SA(r,e,t){var n;if(typeof t.timeout=="number"){var i=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!a[Se].isDisposed_)if(a(),t.onError)t.onError(i);else throw i},t.timeout)}t.name="When";var s=cs("When-effect",e),a=js(function(u){var f=Qo(!1,r);f&&(u.dispose(),n&&clearTimeout(n),s())},t);return a}function qK(r,e){var t;if(e!=null&&(t=e.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,i,s=new Promise(function(a,u){var f,h=SA(r,a,as({},e,{onError:u}));n=function(){h(),u(new Error("WHEN_CANCELLED"))},i=function(){h(),u(new Error("WHEN_ABORTED"))},e==null||(f=e.signal)==null||f.addEventListener==null||f.addEventListener("abort",i)}).finally(function(){var a;return e==null||(a=e.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return s.cancel=n,s}function wo(r){return r[Se]}var GK={has:function(e,t){return wo(e).has_(t)},get:function(e,t){return wo(e).get_(t)},set:function(e,t,n){var i;return zs(t)?(i=wo(e).set_(t,n,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var n;return zs(t)?(n=wo(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var i;return(i=wo(e).defineProperty_(t,n))!=null?i:!0},ownKeys:function(e){return wo(e).ownKeys_()},preventExtensions:function(e){Ce(13)}};function HK(r,e){var t,n;return Pw(),r=no(r,e),(n=(t=r[Se]).proxy_)!=null?n:t.proxy_=new Proxy(r,GK)}function Lr(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function xc(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),Tw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Kr(r,e){var t=to();try{for(var n=[].concat(r.interceptors_||[]),i=0,s=n.length;i<s&&(e=n[i](e),e&&!e.type&&Ce(14),!!e);i++);return e}finally{xi(t)}}function Hr(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Mc(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),Tw(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Yr(r,e){var t=to(),n=r.changeListeners_;if(!!n){n=n.slice();for(var i=0,s=n.length;i<s;i++)n[i](e);xi(t)}}function ig(r,e,t){return ys(function(){var n,i=no(r,t)[Se];(n=e)!=null||(e=uL(r)),Jo(e).forEach(function(s){return i.make_(s,e[s])})}),r}var _h=Symbol("mobx-keys");function YK(r,e,t){return Ci(r)?gf(r,r,e,t):(ys(function(){var n=no(r,t)[Se];if(!r[_h]){var i=Object.getPrototypeOf(r),s=new Set([].concat(Jo(r),Jo(i)));s.delete("constructor"),s.delete(Se),Ic(i,_h,s)}r[_h].forEach(function(a){return n.make_(a,e&&a in e?e[a]:!0)})}),r)}var qb="splice",fi="update",JK=1e4,QK={get:function(e,t){var n=e[Se];return t===Se?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Bi(vl,t)?vl[t]:e[t]},set:function(e,t,n){var i=e[Se];return t==="length"&&i.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ce(15)}},sg=function(){function r(t,n,i,s){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new Pc(t),this.enhancer_=function(a,u){return n(a,u,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},e.intercept_=function(n){return xc(this,n)},e.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Mc(this,n)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&Ce("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var s=new Array(n-i),a=0;a<n-i;a++)s[a]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(n,i-n)},e.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&Ce(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&xA(n+i+1)},e.spliceWithArray_=function(n,i,s){var a=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?i=u-n:i==null?i=0:i=Math.max(0,Math.min(i,u-n)),s===void 0&&(s=Qh),Lr(this)){var f=Kr(this,{object:this.proxy_,type:qb,index:n,removedCount:i,added:s});if(!f)return Qh;i=f.removedCount,s=f.added}if(s=s.length===0?s:s.map(function(m){return a.enhancer_(m,void 0)}),this.legacyMode_){var h=s.length-i;this.updateArrayLength_(u,h)}var d=this.spliceItemsIntoValues_(n,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(n,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(n,i,s){if(s.length<JK){var a;return(a=this.values_).splice.apply(a,[n,i].concat(s))}else{var u=this.values_.slice(n,n+i),f=this.values_.slice(n+i);this.values_.length+=s.length-i;for(var h=0;h<s.length;h++)this.values_[n+h]=s[h];for(var d=0;d<f.length;d++)this.values_[n+s.length+d]=f[d];return u}},e.notifyArrayChildUpdate_=function(n,i,s){var a=!this.owned_&&Za(),u=Hr(this),f=u||a?{observableKind:"array",object:this.proxy_,type:fi,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),u&&Yr(this,f)},e.notifyArraySplice_=function(n,i,s){var a=!this.owned_&&Za(),u=Hr(this),f=u||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:qb,index:n,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),u&&Yr(this,f)},e.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},e.set_=function(n,i){var s=this.values_;if(this.legacyMode_&&n>s.length&&Ce(17,n,s.length),n<s.length){this.atom_;var a=s[n];if(Lr(this)){var u=Kr(this,{type:fi,object:this.proxy_,index:n,newValue:i});if(!u)return;i=u.newValue}i=this.enhancer_(i,a);var f=i!==a;f&&(s[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var h=new Array(n+1-s.length),d=0;d<h.length-1;d++)h[d]=void 0;h[h.length-1]=i,this.spliceWithArray_(s.length,0,h)}},r}();function XK(r,e,t,n){return t===void 0&&(t="ObservableArray"),n===void 0&&(n=!1),Pw(),ys(function(){var i=new sg(t,e,n,!1);Bw(i.values_,Se,i);var s=new Proxy(i.values_,QK);return i.proxy_=s,r&&r.length&&i.spliceWithArray_(0,0,r),s})}var vl={clear:function(){return this.splice(0)},replace:function(e){var t=this[Se];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var a=this[Se];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[Se].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Se],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Se].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Se],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fe.trackingDerivation&&Ce(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fe.trackingDerivation&&Ce(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Se],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};cn("concat",Ki);cn("flat",Ki);cn("includes",Ki);cn("indexOf",Ki);cn("join",Ki);cn("lastIndexOf",Ki);cn("slice",Ki);cn("toString",Ki);cn("toLocaleString",Ki);cn("every",gs);cn("filter",gs);cn("find",gs);cn("findIndex",gs);cn("flatMap",gs);cn("forEach",gs);cn("map",gs);cn("some",gs);cn("reduce",kA);cn("reduceRight",kA);function cn(r,e){typeof Array.prototype[r]=="function"&&(vl[r]=e(r))}function Ki(r){return function(){var e=this[Se];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function gs(r){return function(e,t){var n=this,i=this[Se];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[r](function(a,u){return e.call(t,a,u,n)})}}function kA(r){return function(){var e=this,t=this[Se];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(s,a,u){return i(s,a,u,e)},n[r].apply(n,arguments)}}var ZK=hs("ObservableArrayAdministration",sg);function hn(r){return cf(r)&&ZK(r[Se])}var IA,EA,eN={},es="add",_l="delete";IA=Symbol.iterator;EA=Symbol.toStringTag;var bf=function(){function r(t,n,i){var s=this;n===void 0&&(n=Vs),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Se]=eN,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,br(Map)||Ce(18),ys(function(){s.keysAtom_=uf("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=r.prototype;return e.has_=function(n){return this.data_.has(n)},e.has=function(n){var i=this;if(!fe.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var a=s=new rs(this.has_(n),lf,"ObservableMap.key?",!1);this.hasMap_.set(n,a),Bc(a,function(){return i.hasMap_.delete(n)})}return s.get()},e.set=function(n,i){var s=this.has_(n);if(Lr(this)){var a=Kr(this,{type:s?fi:es,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return s?this.updateValue_(n,i):this.addValue_(n,i),this},e.delete=function(n){var i=this;if(this.keysAtom_,Lr(this)){var s=Kr(this,{type:_l,object:this,name:n});if(!s)return!1}if(this.has_(n)){var a=Za(),u=Hr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:_l,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Cr(function(){var h;i.keysAtom_.reportChanged(),(h=i.hasMap_.get(n))==null||h.setNewValue_(!1);var d=i.data_.get(n);d.setNewValue_(void 0),i.data_.delete(n)}),u&&Yr(this,f),!0}return!1},e.updateValue_=function(n,i){var s=this.data_.get(n);if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var a=Za(),u=Hr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:fi,object:this,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Yr(this,f)}},e.addValue_=function(n,i){var s=this;this.keysAtom_,Cr(function(){var h,d=new rs(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,d),i=d.value_,(h=s.hasMap_.get(n))==null||h.setNewValue_(!0),s.keysAtom_.reportChanged()});var a=Za(),u=Hr(this),f=u||a?{observableKind:"map",debugObjectName:this.name_,type:es,object:this,name:n,newValue:i}:null;u&&Yr(this,f)},e.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var n=this,i=this.keys();return dc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:n.get(f)}}})},e.entries=function(){var n=this,i=this.keys();return dc({next:function(){var a=i.next(),u=a.done,f=a.value;return{done:u,value:u?void 0:[f,n.get(f)]}}})},e[IA]=function(){return this.entries()},e.forEach=function(n,i){for(var s=Co(this),a;!(a=s()).done;){var u=a.value,f=u[0],h=u[1];n.call(i,h,f,this)}},e.merge=function(n){var i=this;return un(n)&&(n=new Map(n)),Cr(function(){Ci(n)?iL(n).forEach(function(s){return i.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var a=s[0],u=s[1];return i.set(a,u)}):ga(n)?(n.constructor!==Map&&Ce(19,n),n.forEach(function(s,a){return i.set(a,s)})):n!=null&&Ce(20,n)}),this},e.clear=function(){var n=this;Cr(function(){rg(function(){for(var i=Co(n.keys()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.replace=function(n){var i=this;return Cr(function(){for(var s=tN(n),a=new Map,u=!1,f=Co(i.data_.keys()),h;!(h=f()).done;){var d=h.value;if(!s.has(d)){var m=i.delete(d);if(m)u=!0;else{var I=i.data_.get(d);a.set(d,I)}}}for(var O=Co(s.entries()),M;!(M=O()).done;){var S=M.value,R=S[0],C=S[1],Y=i.data_.has(R);if(i.set(R,C),i.data_.has(R)){var ae=i.data_.get(R);a.set(R,ae),Y||(u=!0)}}if(!u)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var oe=i.data_.keys(),de=a.keys(),E=oe.next(),N=de.next();!E.done;){if(E.value!==N.value){i.keysAtom_.reportChanged();break}E=oe.next(),N=de.next()}i.data_=a}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(n,i){return Mc(this,n)},e.intercept_=function(n){return xc(this,n)},Zp(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:EA,get:function(){return"Map"}}]),r}(),un=hs("ObservableMap",bf);function tN(r){if(ga(r)||un(r))return r;if(Array.isArray(r))return new Map(r);if(Ci(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ce(21,r)}var OA,PA,nN={};OA=Symbol.iterator;PA=Symbol.toStringTag;var og=function(){function r(t,n,i){var s=this;n===void 0&&(n=Vs),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Se]=nN,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,br(Set)||Ce(22),this.enhancer_=function(a,u){return n(a,u,i)},ys(function(){s.atom_=uf(s.name_),t&&s.replace(t)})}var e=r.prototype;return e.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.clear=function(){var n=this;Cr(function(){rg(function(){for(var i=Co(n.data_.values()),s;!(s=i()).done;){var a=s.value;n.delete(a)}})})},e.forEach=function(n,i){for(var s=Co(this),a;!(a=s()).done;){var u=a.value;n.call(i,u,u,this)}},e.add=function(n){var i=this;if(this.atom_,Lr(this)){var s=Kr(this,{type:es,object:this,newValue:n});if(!s)return this}if(!this.has(n)){Cr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,u=Hr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:es,object:this,newValue:n}:null;u&&Yr(this,f)}return this},e.delete=function(n){var i=this;if(Lr(this)){var s=Kr(this,{type:_l,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var a=!1,u=Hr(this),f=u||a?{observableKind:"set",debugObjectName:this.name_,type:_l,object:this,oldValue:n}:null;return Cr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),u&&Yr(this,f),!0}return!1},e.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},e.entries=function(){var n=0,i=Array.from(this.keys()),s=Array.from(this.values());return dc({next:function(){var u=n;return n+=1,u<s.length?{value:[i[u],s[u]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var n=this,i=0,s=Array.from(this.data_.values());return dc({next:function(){return i<s.length?{value:n.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(n){var i=this;return Fn(n)&&(n=new Set(n)),Cr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):Ec(n)?(i.clear(),n.forEach(function(s){return i.add(s)})):n!=null&&Ce("Cannot initialize set from "+n)}),this},e.observe_=function(n,i){return Mc(this,n)},e.intercept_=function(n){return xc(this,n)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[OA]=function(){return this.values()},Zp(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:PA,get:function(){return"Set"}}]),r}(),Fn=hs("ObservableSet",og),Gb=Object.create(null),Hb="remove",TA=function(){function r(t,n,i,s){n===void 0&&(n=new Map),s===void 0&&(s=DL),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=n,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new Pc("ObservableObject.keys"),this.isPlainObject_=Ci(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(n){return this.values_.get(n).get()},e.setObservablePropValue_=function(n,i){var s=this.values_.get(n);if(s instanceof Xo)return s.set(i),!0;if(Lr(this)){var a=Kr(this,{type:fi,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=s.prepareNewValue_(i),i!==fe.UNCHANGED){var u=Hr(this),f=!1,h=u||f?{type:fi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:i}:null;s.setNewValue_(i),u&&Yr(this,h)}return!0},e.get_=function(n){return fe.trackingDerivation&&!Bi(this.target_,n)&&this.has_(n),this.target_[n]},e.set_=function(n,i,s){return s===void 0&&(s=!1),Bi(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):s?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(n){if(!fe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new rs(n in this.target_,lf,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},e.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var s;if((s=this.target_[ui])!=null&&s[n])return;Ce(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==kc;){var u=pl(a,n);if(u){var f=i.make_(this,n,u,a);if(f===0)return;if(f===1)break}a=Object.getPrototypeOf(a)}Jb(this,i,n)}},e.extend_=function(n,i,s,a){if(a===void 0&&(a=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,i,a);var u=s.extend_(this,n,i,a);return u&&Jb(this,s,n),u},e.defineProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Yn();var a=this.delete_(n);if(!a)return a;if(Lr(this)){var u=Kr(this,{object:this.proxy_||this.target_,name:n,type:es,newValue:i.value});if(!u)return null;var f=u.newValue;i.value!==f&&(i=as({},i,{value:f}))}if(s){if(!Reflect.defineProperty(this.target_,n,i))return!1}else li(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Jn()}return!0},e.defineObservableProperty_=function(n,i,s,a){a===void 0&&(a=!1),this.keysAtom_;try{Yn();var u=this.delete_(n);if(!u)return u;if(Lr(this)){var f=Kr(this,{object:this.proxy_||this.target_,name:n,type:es,newValue:i});if(!f)return null;i=f.newValue}var h=Yb(n),d={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,n,d))return!1}else li(this.target_,n,d);var m=new rs(i,s,"ObservableObject.key",!1);this.values_.set(n,m),this.notifyPropertyAddition_(n,m.value_)}finally{Jn()}return!0},e.defineComputedProperty_=function(n,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Yn();var a=this.delete_(n);if(!a)return a;if(Lr(this)){var u=Kr(this,{object:this.proxy_||this.target_,name:n,type:es,newValue:void 0});if(!u)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var f=Yb(n),h={configurable:fe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(s){if(!Reflect.defineProperty(this.target_,n,h))return!1}else li(this.target_,n,h);this.values_.set(n,new Xo(i)),this.notifyPropertyAddition_(n,void 0)}finally{Jn()}return!0},e.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Bi(this.target_,n))return!0;if(Lr(this)){var s=Kr(this,{object:this.proxy_||this.target_,name:n,type:Hb});if(!s)return null}try{var a,u;Yn();var f=Hr(this),h=!1,d=this.values_.get(n),m=void 0;if(!d&&(f||h)){var I;m=(I=pl(this.target_,n))==null?void 0:I.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(d&&(this.values_.delete(n),d instanceof rs&&(m=d.value_),nA(d)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(u=a.get(n))==null||u.set(n in this.target_),f||h){var O={type:Hb,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:m,name:n};f&&Yr(this,O)}}finally{Jn()}return!0},e.observe_=function(n,i){return Mc(this,n)},e.intercept_=function(n){return xc(this,n)},e.notifyPropertyAddition_=function(n,i){var s,a,u=Hr(this),f=!1;if(u||f){var h=u||f?{type:es,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&Yr(this,h)}(s=this.pendingKeys_)==null||(a=s.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Jo(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function no(r,e){var t;if(Bi(r,Se))return r;var n=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new TA(r,new Map,String(n),YL(e));return Ic(r,Se,i),r}var rN=hs("ObservableObjectAdministration",TA);function Yb(r){return Gb[r]||(Gb[r]={get:function(){return this[Se].getObservablePropValue_(r)},set:function(t){return this[Se].setObservablePropValue_(r,t)}})}function an(r){return cf(r)?rN(r[Se]):!1}function Jb(r,e,t){var n;(n=r.target_[ui])==null||delete n[t]}var iN=BA(0),sN=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),wh=0,RA=function(){};function oN(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}oN(RA,Array.prototype);var ag=function(r,e,t){Cw(n,r);function n(s,a,u,f){var h;return u===void 0&&(u="ObservableArray"),f===void 0&&(f=!1),h=r.call(this)||this,ys(function(){var d=new sg(u,a,f,!0);d.proxy_=bh(h),Bw(bh(h),Se,d),s&&s.length&&h.spliceWithArray(0,0,s),sN&&Object.defineProperty(bh(h),"0",iN)}),h}var i=n.prototype;return i.concat=function(){this[Se].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return hn(h)?h.slice():h}))},i[t]=function(){var s=this,a=0;return dc({next:function(){return a<s.length?{value:s[a++],done:!1}:{done:!0,value:void 0}}})},Zp(n,[{key:"length",get:function(){return this[Se].getArrayLength_()},set:function(a){this[Se].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),n}(RA,Symbol.toStringTag,Symbol.iterator);Object.entries(vl).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&Ic(ag.prototype,e,t)});function BA(r){return{enumerable:!1,configurable:!0,get:function(){return this[Se].get_(r)},set:function(t){this[Se].set_(r,t)}}}function aN(r){li(ag.prototype,""+r,BA(r))}function xA(r){if(r>wh){for(var e=wh;e<r+100;e++)aN(e);wh=r}}xA(1e3);function cN(r,e,t){return new ag(r,e,t)}function di(r,e){if(typeof r=="object"&&r!==null){if(hn(r))return e!==void 0&&Ce(23),r[Se].atom_;if(Fn(r))return r.atom_;if(un(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||Ce(25,e,wl(r)),t}if(an(r)){if(!e)return Ce(26);var n=r[Se].values_.get(e);return n||Ce(27,e,wl(r)),n}if(eg(r)||$s(r)||bl(r))return r}else if(br(r)&&bl(r[Se]))return r[Se];Ce(28)}function hi(r,e){if(r||Ce(29),e!==void 0)return hi(di(r,e));if(eg(r)||$s(r)||bl(r)||un(r)||Fn(r))return r;if(r[Se])return r[Se];Ce(24,r)}function wl(r,e){var t;if(e!==void 0)t=di(r,e);else{if(ps(r))return r.name;an(r)||un(r)||Fn(r)?t=hi(r):t=di(r)}return t.name_}function ys(r){var e=to(),t=df(!0);Yn();try{return r()}finally{Jn(),hf(t),xi(e)}}var Qb=kc.toString;function cg(r,e,t){return t===void 0&&(t=-1),op(r,e,t)}function op(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var s=typeof r;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var a=Qb.call(r);if(a!==Qb.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Xb(r),e=Xb(e);var u=a==="[object Array]";if(!u){if(typeof r!="object"||typeof e!="object")return!1;var f=r.constructor,h=e.constructor;if(f!==h&&!(br(f)&&f instanceof f&&br(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),u){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!op(r[d],e[d],t-1,n,i))return!1}else{var m=Object.keys(r),I;if(d=m.length,Object.keys(e).length!==d)return!1;for(;d--;)if(I=m[d],!(Bi(e,I)&&op(r[I],e[I],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Xb(r){return hn(r)?r.slice():ga(r)||un(r)||Ec(r)||Fn(r)?Array.from(r.entries()):r}function dc(r){return r[Symbol.iterator]=uN,r}function uN(){return this}["Symbol","Map","Set"].forEach(function(r){var e=Qp();typeof e[r]>"u"&&Ce("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:iA,extras:{getDebugName:wl},$mobx:Se});var lN=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Se,FlowCancellationError:yf,ObservableMap:bf,ObservableSet:og,Reaction:lc,_allowStateChanges:Qo,_allowStateChangesInsideComputed:fc,_allowStateReadsEnd:zo,_allowStateReadsStart:pf,_autoAction:Zo,_endAction:qw,_getAdministration:hi,_getGlobalState:Xw,_interceptReads:MK,_isComputingDerivation:Rc,_resetGlobalState:sK,_startAction:jw,action:zt,autorun:js,comparer:Ws,computed:Nr,configure:IK,createAtom:uf,defineProperty:UK,entries:vA,extendObservable:gf,flow:qs,flowResult:xK,get:FK,getAtom:di,getDebugName:wl,getDependencyTree:EK,getObserverTree:OK,has:wA,intercept:CK,isAction:ps,isBoxedObservable:ng,isComputed:yA,isComputedProp:nl,isFlow:ea,isFlowCancellationError:RK,isObservable:mf,isObservableArray:hn,isObservableMap:un,isObservableObject:an,isObservableProp:NK,isObservableSet:Fn,keys:ta,makeAutoObservable:YK,makeObservable:ig,observable:xt,observe:na,onBecomeObserved:fA,onBecomeUnobserved:Bc,onReactionError:fK,override:yL,ownKeys:AA,reaction:lA,remove:DK,runInAction:fc,set:_A,spy:iA,toJS:VK,trace:$K,transaction:Cr,untracked:rg,values:bA,when:jK},Symbol.toStringTag,{value:"Module"})),MA=gc(lN);(function(r){var e=z&&z.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.Order=r.OrderSide=void 0;const t=mt,n=e(Ew.exports),i=MA;var s;(function(u){u.Buy="buy",u.Sell="sell"})(s=r.OrderSide||(r.OrderSide={}));class a{constructor(f){this.id="",this.orderType=s.Buy,this.orderMint="",this.currencyMint="",this.currencyDecimals=0,this.price=new t.BN(0),this.orderQtyRemaining=0,this.orderOriginationQty=0,this.owner="",this.ownerAssetTokenAccount="",this.ownerCurrencyTokenAccount="",this.createdAt=0,this.slotContext=0,f&&(this.id=f.id,this.orderType=f.orderType,this.orderMint=f.orderMint,this.currencyMint=f.currencyMint,this.currencyDecimals=f.currencyDecimals,this.price=f.price,this.orderQtyRemaining=f.orderQtyRemaining,this.orderOriginationQty=f.orderOriginationQty,this.owner=f.owner,this.ownerAssetTokenAccount=f.ownerAssetTokenAccount,this.ownerCurrencyTokenAccount=f.ownerCurrencyTokenAccount,this.createdAt=f.createdAt,this.slotContext=f.slotContext),(0,i.makeObservable)(this,{orderQtyRemaining:i.observable})}get decimalDivisor(){return new n.default(10).pow(this.currencyDecimals)}get bigNumberPrice(){return new n.default(this.price.toString())}get uiPrice(){return this.bigNumberPrice.div(this.decimalDivisor).toNumber()}priceForQuantity(f=1){return this.bigNumberPrice.mul(f).div(this.decimalDivisor).toNumber()}}r.Order=a})(af);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(af,r)})(of);var fN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(sf,"__esModule",{value:!0});sf.createExchangeInstruction=void 0;const Nu=mt,Du=Li,dN=tr,Zb=fs,hN=fs,Ah=Fr,Sh=of;function pN({connection:r,orderAccount:e,purchaseQty:t,orderTaker:n,orderTakerDepositTokenAccount:i,programId:s,expectedPrice:a,orderType:u,assetMint:f,currencyMint:h,orderInitializer:d,saVault:m,stakingProgramId:I,registeredStake:O,stakingAccount:M,extraAccounts:S=[]}){return fN(this,void 0,void 0,function*(){const R=(0,dN.getMarketplaceProgram)({connection:r,programId:s}),C={signers:[],instructions:[]},Y=u===Sh.OrderSide.Sell?new Du.PublicKey(f):new Du.PublicKey(h),ae=u===Sh.OrderSide.Sell?new Du.PublicKey(h):new Du.PublicKey(f);let oe=null,de=null,E=null,N=yield(0,Ah.getTokenAccount)(r,d,Y,n);"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Nu.web3.Keypair?(oe=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):oe=N.tokenAccount):oe=N.tokenAccount,N=yield(0,Ah.getTokenAccount)(r,d,ae,n),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Nu.web3.Keypair?(de=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):de=N.tokenAccount):de=N.tokenAccount;const[V]=yield(0,Zb.getOrderVault)(d,Y,s),[J]=yield(0,hN.getOpenOrdersCounter)(d,Y,s);N=yield(0,Ah.getTokenAccount)(r,n,Y),"createInstruction"in N?(C.instructions.push(...N.createInstruction),N.tokenAccount instanceof Nu.web3.Keypair?(E=N.tokenAccount.publicKey,C.signers.push(N.tokenAccount)):E=N.tokenAccount):E=N.tokenAccount;const K=u===Sh.OrderSide.Buy?n:d,[j]=yield(0,Zb.getFeeExemptAccount)(K,s),te=yield R.methods.processExchange(new Nu.BN(t),a,K).accounts({orderTaker:n,orderTakerDepositTokenAccount:i,orderTakerReceiveTokenAccount:E,currencyMint:h,assetMint:f,orderInitializer:d,initializerDepositTokenAccount:oe,initializerReceiveTokenAccount:de,orderVaultAccount:V,orderAccount:e,openOrdersCounter:J,saVault:m,atlasStaking:I,registeredStake:O,stakingAccount:M,feeReduction:j}).remainingAccounts(S).instruction();return C.instructions.push(te),C})}sf.createExchangeInstruction=pN;var vf={},gN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(vf,"__esModule",{value:!0});vf.createInitializeMarketInstruction=void 0;const yN=tr;function mN({connection:r,updateAuthorityAccount:e,programId:t}){return gN(this,void 0,void 0,function*(){const i=[yield(0,yN.getMarketplaceProgram)({connection:r,programId:t}).methods.initializeMarketplace().accounts({updateAuthorityAccount:e}).instruction()];return{accounts:[],instructions:i}})}vf.createInitializeMarketInstruction=mN;var _f={},bN=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(_f,"__esModule",{value:!0});_f.createRegisterCurrencyInstruction=void 0;const vN=mt,_N=tr;function wN({connection:r,updateAuthorityAccount:e,royalty:t,saCurrencyVault:n,currencyMint:i,programId:s}){return bN(this,void 0,void 0,function*(){const u=[yield(0,_N.getMarketplaceProgram)({connection:r,programId:s}).methods.registerCurrency(new vN.BN(t)).accounts({updateAuthorityAccount:e,saCurrencyVault:n,currencyMint:i}).instruction()];return{accounts:[],instructions:u}})}_f.createRegisterCurrencyInstruction=wN;var is={},ug=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(is,"__esModule",{value:!0});is.updateRoyaltyTier=is.deleteRoyaltyTier=is.addRoyaltyTier=void 0;const hc=mt,lg=tr;function AN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return ug(this,void 0,void 0,function*(){const a=(0,lg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.addRoyaltyTier(new hc.BN(n),new hc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}is.addRoyaltyTier=AN;function SN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,programId:i}){return ug(this,void 0,void 0,function*(){const s=(0,lg.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=yield s.methods.deleteRoyaltyTier(new hc.BN(n)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return a.instructions.push(u),a})}is.deleteRoyaltyTier=SN;function kN({connection:r,updateAuthorityAccount:e,registeredCurrency:t,stakeAmount:n,discount:i,programId:s}){return ug(this,void 0,void 0,function*(){const a=(0,lg.getMarketplaceProgram)({connection:r,programId:s}),u={signers:[],instructions:[]},f=yield a.methods.updateRoyaltyTier(new hc.BN(n),new hc.BN(i)).accounts({updateAuthorityAccount:e,registeredCurrency:t}).instruction();return u.instructions.push(f),u})}is.updateRoyaltyTier=kN;var ra={},CA=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ra,"__esModule",{value:!0});ra.createUpdateRegisteredCurrencyVaultInstruction=ra.createUpdateRegisteredCurrencyRoyaltyInstruction=void 0;const IN=mt,LA=tr;function EN({connection:r,updateAuthorityAccount:e,royalty:t,currencyMint:n,programId:i}){return CA(this,void 0,void 0,function*(){return[yield(0,LA.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyRoyalty(new IN.BN(t)).accounts({updateAuthorityAccount:e,currencyMint:n}).instruction()]})}ra.createUpdateRegisteredCurrencyRoyaltyInstruction=EN;function ON({connection:r,updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n,programId:i}){return CA(this,void 0,void 0,function*(){return[yield(0,LA.getMarketplaceProgram)({connection:r,programId:i}).methods.updateCurrencyVault().accounts({updateAuthorityAccount:e,saCurrencyVault:t,currencyMint:n}).instruction()]})}ra.createUpdateRegisteredCurrencyVaultInstruction=ON;var ia={},KA=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ia,"__esModule",{value:!0});ia.createRemoveFeeExemptionInstruction=ia.createAddFeeExemptionInstruction=void 0;const PN=mt,NA=tr,Al=fs;function TN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return KA(this,void 0,void 0,function*(){const s=(0,NA.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},u=1e6,[f]=yield(0,Al.getFeeExemptAccount)(n,i),[h]=yield(0,Al.getMarketVarsAccount)(i),d=[yield s.methods.addFeeExemption(new PN.BN(u)).accounts({updateAuthorityMaster:e,funder:t,feeExemptTarget:n,feeExemptAccount:f,marketVarsAccount:h}).instruction()];return a.instructions.push(...d),a})}ia.createAddFeeExemptionInstruction=TN;function RN({connection:r,updateAuthorityAccount:e,funder:t,feeExemptTarget:n,programId:i}){return KA(this,void 0,void 0,function*(){const s=(0,NA.getMarketplaceProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},[u]=yield(0,Al.getFeeExemptAccount)(n,i),[f]=yield(0,Al.getMarketVarsAccount)(i),h=[yield s.methods.removeFeeExemption().accounts({updateAuthorityMaster:e,funder:t,feeExemptAccount:u,feeExemptTarget:n,marketVarsAccount:f}).instruction()];return a.instructions.push(...h),a})}ia.createRemoveFeeExemptionInstruction=RN;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(mw,r),t(ef,r),t(Yo,r),t(rf,r),t(sf,r),t(vf,r),t(_f,r),t(is,r),t(ra,r),t(ia,r)})(Hp);var ma={},DA={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmLogs=void 0,function(e){e.CancelOrderMemo="CancelOrderMemo",e.ExchangeMemo="ExchangeMemo",e.InitializeMemo="InitializeMemo",e.RegisterCurrencyMemo="RegisterCurrencyMemo"}(r.GmLogs||(r.GmLogs={}))})(DA);var FA={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.GmEventType=void 0,function(e){e[e.orderAdded=0]="orderAdded",e[e.orderRemoved=1]="orderRemoved",e[e.orderModified=2]="orderModified"}(r.GmEventType||(r.GmEventType={}))})(FA);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ac,r),t(DA,r),t(FA,r)})(ma);var UA={},wf={},zA=function(){},BN=function(r){return r};function WA(r){throw new Error("[mobx-utils] "+r)}function us(r,e){e===void 0&&(e="Illegal state"),r||WA(e)}function VA(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}var $A=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat($A(Object.getPrototypeOf(r))||[])},xN=function(r){var e=$A(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},ap=function(r){return xN(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},Sl="pending",pc="fulfilled",Af="rejected";function MN(r){switch(this.state){case Sl:return r.pending&&r.pending(this.value);case Af:return r.rejected&&r.rejected(this.value);case pc:return r.fulfilled?r.fulfilled(this.value):this.value}}function cp(r,e){if(us(arguments.length<=2,"fromPromise expects up to two arguments"),us(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(zt("observableFromPromise-resolve",function(i){t.value=i,t.state=pc}),zt("observableFromPromise-reject",function(i){t.value=i,t.state=Af})),t.isPromiseBasedObservable=!0,t.case=MN;var n=e&&(e.state===pc||e.state===Sl)?e.value:void 0;return gf(t,{value:n,state:Sl},{},{deep:!1}),t}(function(r){r.reject=zt("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=Af,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=pc,n.value=t,n}r.resolve=zt("fromPromise.resolve",e)})(cp||(cp={}));function CN(r){return r&&r.isPromiseBasedObservable===!0}var ev=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function LN(r,e,t){if(tv(r,e),tv(r,t),e!==t){var n=r.slice(),i;return e<t?i=ev(n.slice(0,e),n.slice(e+1,t+1),[n[e]],n.slice(t+1)):i=ev(n.slice(0,t),[n[e]],n.slice(t,e),n.slice(e+1)),r.replace(i),r}}function tv(r,e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=r.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}function KN(r,e){e===void 0&&(e=void 0);var t=!1,n=xt.box(e,{deep:!1}),i=xt.box(!1),s=function(){return t||(t=!0,Qo(!0,function(){i.set(!0)}),r(function(u){Qo(!0,function(){n.set(u),i.set(!1)})})),n.get()},a=zt("lazyObservable-reset",function(){return t=!1,n.set(e),n.get()});return{current:s,refresh:function(){return t?(t=!1,s()):n.get()},reset:function(){return a()},get pending(){return i.get()}}}function fg(r,e,t){e===void 0&&(e=zA),t===void 0&&(t=void 0);var n=!1,i=!1,s=t,a=function(){n&&(n=!1,e())},u=uf("ResourceBasedObservable",function(){us(!n&&!i),n=!0,r(function(f){Qo(!0,function(){s=f,u.reportChanged()})})},a);return{current:function(){us(!i,"subscribingObservable has already been disposed");var f=u.reportObserved();return!f&&!n&&console.warn("Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started"),s},dispose:function(){i=!0,a()},isAlive:function(){return n}}}var Fu=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};function NN(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}function DN(r,e){var t;e===void 0&&(e=!1);var n=Nr(r);return t={subscribe:function(i){return typeof i=="function"?{unsubscribe:na(n,function(s){var a=s.newValue;return i(a)},e)}:i&&typeof i=="object"&&i.next?{unsubscribe:na(n,function(s){var a=s.newValue;return i.next(a)},e)}:{unsubscribe:function(){}}}},t[NN()]=function(){return this},t}var FN=function(){function r(e,t){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ig(this),fc(function(){n.current=t,n.subscription=e.subscribe(n)})}return Object.defineProperty(r.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(r.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e}}),Object.defineProperty(r.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(r.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.current=e,this.dispose()}}),Fu([xt.ref],r.prototype,"current",void 0),Fu([zt.bound],r.prototype,"next",null),Fu([zt.bound],r.prototype,"complete",null),Fu([zt.bound],r.prototype,"error",null),r}();function UN(r,e){return e===void 0&&(e=void 0),new FN(r,e)}var kl=function(){return kl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},kl.apply(this,arguments)},Fa=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zN=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"],jA=function(){function r(e){var t=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:xt.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.localValues.has(i)}}),ig(this),us(an(e),"createViewModel expects an observable object");var n=ap(this);ap(e).forEach(function(i){var s;if(!n.includes(i)&&!(i===Se||i==="__mobxDidRunLazyInitializers")){if(us(zN.indexOf(i)===-1,"The propertyname "+i+" is reserved and cannot be used with viewModels"),nl(e,i)){var a=hi(e,i),u=a.derivation.bind(t),f=(s=a.setter_)===null||s===void 0?void 0:s.bind(t);t.localComputedValues.set(i,Nr(u,{set:f}))}var h=Object.getOwnPropertyDescriptor(e,i),d=h?{enumerable:h.enumerable}:{};Object.defineProperty(t,i,kl(kl({},d),{configurable:!0,get:function(){return nl(e,i)?t.localComputedValues.get(i).get():t.isPropertyDirty(i)?t.localValues.get(i):t.model[i]},set:zt(function(m){nl(e,i)?t.localComputedValues.get(i).set(m):m!==t.model[i]?t.localValues.set(i,m):t.localValues.delete(i)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ta(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];hn(i)?i.replace(n):un(i)?(i.clear(),i.merge(n)):yA(n)||(e.model[t]=n)}),this.localValues.clear()}}),Object.defineProperty(r.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(r.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localValues.delete(e)}}),Fa([Nr],r.prototype,"isDirty",null),Fa([Nr],r.prototype,"changedValues",null),Fa([zt.bound],r.prototype,"submit",null),Fa([zt.bound],r.prototype,"reset",null),Fa([zt.bound],r.prototype,"resetProperty",null),r}();function WN(r){return new jA(r)}function VN(r,e){var t=di(r,e);if(!t)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return na(t,function(){})}function $N(r,e,t){if(t===void 0&&(t=0),!hn(r))throw new Error("Expected observable array as first argument");ps(e)||(e=zt("queueProcessor",e));var n=function(){var i=r.slice(0);fc(function(){return r.splice(0)}),i.forEach(e)};return t>0?js(n,{delay:t}):js(n)}function jN(r,e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=0),!hn(r))throw new Error("Expected observable array as first argument");ps(e)||(e=zt("chunkProcessor",e));var i=function(){for(var s=function(){var a=n===0?r.length:Math.min(r.length,n),u=r.slice(0,a);fc(function(){return r.splice(0,a)}),e(u)};r.length>0;)s()};return t>0?js(i,{delay:t}):js(i)}var Cs={};function qN(){for(var r=0,e=Object.getOwnPropertyNames(Cs);r<e.length;r++){var t=e[r];Cs[t].dispose(),delete Cs[t]}}function GN(r){return r===void 0&&(r=1e3),Rc()?(Cs[r]||(typeof r=="number"?Cs[r]=HN(r):Cs[r]=YN()),Cs[r].current()):Date.now()}function HN(r){var e;return fg(function(t){t(Date.now()),e=setInterval(function(){return t(Date.now())},r)},function(){clearInterval(e)},Date.now())}function YN(){var r=fg(function(e){e(Date.now());function t(){window.requestAnimationFrame(function(){e(Date.now()),r.isAlive()&&t()})}t()},function(){},Date.now());return r}function JN(r){return Rc()||console.warn("'expr' should only be used inside other reactive functions."),Nr(r).get()}var Il=function(){return Il=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Il.apply(this,arguments)},QN=0;function XN(r,e){us(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=void 0,i=!1,s=void 0;typeof e=="object"?(n=e.onCleanup,i=e.keepAlive!==void 0?e.keepAlive:!1,s=e.debugNameGenerator):typeof e=="function"&&(n=e);function a(f,h){var d,m={};typeof e=="object"?(n=e.onCleanup,s=e.debugNameGenerator,m=e):typeof e=="function"?n=e:(n=void 0,s=void 0);var I=s?s(h):"Transformer-"+r.name+"-"+f,O=Nr(function(){return d=r(h)},Il(Il({},m),{name:I}));if(!i)var M=Bc(O,function(){delete t[f],M(),n&&n(d,h)});return O}var u=!1;return function(f){var h=ZN(f),d=t[h];if(d)return d.get();if(!i&&!Rc()){u||(console.warn("invoking a transformer from outside a reactive context won't memorized and is cleaned up immediately, unless keepAlive is set"),u=!0);var m=r(f);return n&&n(m,f),m}return d=t[h]=a(h,f),d.get()}}function ZN(r){var e=typeof r;if(e==="string")return"string:"+r;if(e==="number")return"number:"+r;if(r===null||e!=="object"&&e!=="function")throw new Error("[mobx-utils] transform expected an object, function, string or number, got: "+String(r));var t=r.$transformId;return t===void 0&&(t="memoizationId:"+ ++QN,VA(r,"$transformId",t)),t}function kh(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function Ih(r){return an(r)||hn(r)||un(r)}function eD(r,e){var t=new WeakMap;function n(u){var f=t.get(u.object);i(u,f),e(u,kh(f),r)}function i(u,f){switch(u.type){case"add":s(u.newValue,f,u.name);break;case"update":a(u.oldValue),s(u.newValue,f,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(m,I){return s(m,f,""+(u.index+I))});for(var h=u.index+u.addedCount;h<u.object.length;h++)if(Ih(u.object[h])){var d=t.get(u.object[h]);d&&(d.path=""+h)}break}}function s(u,f,h){if(Ih(u)){var d=t.get(u);if(d){if(d.parent!==f||d.path!==h)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+kh(f)+"/"+h+"',")+(" but it already exists at '"+kh(d.parent)+"/"+d.path+"'"))}else{var m={parent:f,path:h,dispose:na(u,n)};t.set(u,m),vA(u).forEach(function(I){var O=I[0],M=I[1];return s(M,m,O)})}}}function a(u){if(Ih(u)){var f=t.get(u);if(!f)return;t.delete(u),f.dispose(),bA(u).forEach(a)}}return s(r,void 0,""),function(){a(r)}}var tD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nD=function(r){tD(e,r);function e(t,n,i){var s=i===void 0?{}:i,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,f=s.keyToName,h=f===void 0?function(I){return""+I}:f,d=r.call(this)||this;Object.defineProperty(d,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(d,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d._keyToName=h,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+u),d._base=t;for(var m=0;m<t.length;m++)d._addItem(t[m]);return d._disposeBaseObserver=na(d._base,function(I){if(I.type==="splice")Cr(function(){for(var O=0,M=I.removed;O<M.length;O++){var S=M[O];d._removeItem(S)}for(var R=0,C=I.added;R<C.length;R++){var Y=C[R];d._addItem(Y)}});else if(I.type==="update")Cr(function(){d._removeItem(I.oldValue),d._addItem(I.newValue)});else throw new Error("illegal state")}),d}return Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw new Error("not supported")}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(e.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=xt([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n}}),Object.defineProperty(e.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)}}),Object.defineProperty(e.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=this._groupBy(t),s=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:s.length,reaction:lA(function(){return n._groupBy(t)},function(u,f){var h=t[n._ogmInfoKey];n._removeFromGroupArr(h.groupByValue,h.groupArrIndex);var d=n._getGroupArr(u),m=d.length;d.push(t),h.groupByValue=u,h.groupArrIndex=m})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)}}),Object.defineProperty(e.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]}}),e}(bf),rD=function(){function r(e,t){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});for(var n=this.closest=this.root=e,i=0;i<this.args.length-1&&(n=n.get(t[i]),n);i++)this.closest=n;this.closestIdx=i}return Object.defineProperty(r.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertNotDisposed();var e=this.args.length;return this.closestIdx>=e-1&&this.closest.has(this.args[e-1])}}),Object.defineProperty(r.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(r.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertNotDisposed();for(var t=this.args.length,n=this.closest,i=this.closestIdx;i<t-1;i++){var s=new Map;n.set(this.args[i],s),n=s}this.closestIdx=t-1,this.closest=n,n.set(this.args[t-1],e)}}),Object.defineProperty(r.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var e=this.args.length;this.closest.delete(this.args[e-1]);for(var t=this.root,n=[t],i=0;i<e-1;i++)t=t.get(this.args[i]),n.push(t);for(var i=n.length-1;i>0;i--)n[i].size===0&&n[i-1].delete(this.args[i-1]);this.isDisposed=!0}}),Object.defineProperty(r.prototype,"assertNotDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDisposed)throw new Error("Concurrent modification exception")}}),r}(),iD=function(){function r(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.argsLength===-1)this.argsLength=e.length;else if(this.argsLength!==e.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+e.length);return this.last&&(this.last.isDisposed=!0),this.last=new rD(this.store,e)}}),r}(),El=function(){return El=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},El.apply(this,arguments)},sD=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)n[i]=s[a];return n};function oD(r,e){if(e===void 0&&(e=!1),ps(r))throw new Error("computedFn shouldn't be used on actions");var t=!1,n=0,i=typeof e=="boolean"?{keepAlive:e}:e,s=new iD;return function(){for(var a=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var h=s.entry(u);if(h.exists())return h.get().get();if(!i.keepAlive&&!Rc())return!t&&Xw().computedRequiresReaction&&(console.warn("invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set"),t=!0),r.apply(this,u);var d,m=Nr(function(){return d=r.apply(a,u)},El(El({},i),{name:"computedFn("+(i.name||r.name)+"#"+ ++n+")"}));return h.set(m),i.keepAlive||Bc(m,function(){s.entry(u).delete(),i.onCleanup&&i.onCleanup.apply(i,sD([d],u)),d=void 0}),m.get()}}var aD=Object.freeze(Object.defineProperty({__proto__:null,FULFILLED:pc,IDENTITY:BN,NOOP:zA,ObservableGroupMap:nD,PENDING:Sl,REJECTED:Af,ViewModel:jA,addHiddenProp:VA,chunkProcessor:jN,computedFn:oD,createTransformer:XN,createViewModel:WN,deepObserve:eD,expr:JN,fail:WA,get fromPromise(){return cp},fromResource:fg,fromStream:UN,getAllMethodsAndProperties:ap,invariant:us,isPromiseBasedObservable:CN,keepAlive:VN,lazyObservable:KN,moveItem:LN,now:GN,queueProcessor:$N,resetNowInternalState:qN,toStream:DN},Symbol.toStringTag,{value:"Module"})),cD=gc(aD),Ol={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,I=2,O=4,M=1,S=2,R=1,C=2,Y=4,ae=8,oe=16,de=32,E=64,N=128,V=256,J=512,K=30,j="...",te=800,T=16,W=1,X=2,Be=3,ye=1/0,Ie=9007199254740991,qt=17976931348623157e292,Gt=0/0,_e=4294967295,We=_e-1,Zt=_e>>>1,ln=[["ary",N],["bind",R],["bindKey",C],["curry",ae],["curryRight",oe],["flip",J],["partial",de],["partialRight",E],["rearg",V]],Et="[object Arguments]",ht="[object Array]",_r="[object AsyncFunction]",Wt="[object Boolean]",wn="[object Date]",Zr="[object DOMException]",wr="[object Error]",nr="[object Function]",yi="[object GeneratorFunction]",pn="[object Map]",bs="[object Number]",Uf="[object Null]",rr="[object Object]",Nc="[object Promise]",zf="[object Proxy]",Ni="[object RegExp]",An="[object Set]",Sn="[object String]",Di="[object Symbol]",Wf="[object Undefined]",Un="[object WeakMap]",Vf="[object WeakSet]",v="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",Z="[object Int32Array]",Ke="[object Uint8Array]",wt="[object Uint8ClampedArray]",pt="[object Uint16Array]",At="[object Uint32Array]",ft=/\b__p \+= '';/g,rS=/\b(__p \+=) '' \+/g,iS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pg=/&(?:amp|lt|gt|quot|#39);/g,gg=/[&<>"']/g,sS=RegExp(pg.source),oS=RegExp(gg.source),aS=/<%-([\s\S]+?)%>/g,cS=/<%([\s\S]+?)%>/g,yg=/<%=([\s\S]+?)%>/g,uS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lS=/^\w*$/,fS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$f=/[\\^$.*+?()[\]{}|]/g,dS=RegExp($f.source),jf=/^\s+/,hS=/\s/,pS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gS=/\{\n\/\* \[wrapped with (.+)\] \*/,yS=/,? & /,mS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bS=/[()=,{}\[\]\/\s]/,vS=/\\(\\)?/g,_S=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mg=/\w*$/,wS=/^[-+]0x[0-9a-f]+$/i,AS=/^0b[01]+$/i,SS=/^\[object .+?Constructor\]$/,kS=/^0o[0-7]+$/i,IS=/^(?:0|[1-9]\d*)$/,ES=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dc=/($^)/,OS=/['\n\r\u2028\u2029\\]/g,Fc="\\ud800-\\udfff",PS="\\u0300-\\u036f",TS="\\ufe20-\\ufe2f",RS="\\u20d0-\\u20ff",bg=PS+TS+RS,vg="\\u2700-\\u27bf",_g="a-z\\xdf-\\xf6\\xf8-\\xff",BS="\\xac\\xb1\\xd7\\xf7",xS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",MS="\\u2000-\\u206f",CS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wg="A-Z\\xc0-\\xd6\\xd8-\\xde",Ag="\\ufe0e\\ufe0f",Sg=BS+xS+MS+CS,qf="['\u2019]",LS="["+Fc+"]",kg="["+Sg+"]",Uc="["+bg+"]",Ig="\\d+",KS="["+vg+"]",Eg="["+_g+"]",Og="[^"+Fc+Sg+Ig+vg+_g+wg+"]",Gf="\\ud83c[\\udffb-\\udfff]",NS="(?:"+Uc+"|"+Gf+")",Pg="[^"+Fc+"]",Hf="(?:\\ud83c[\\udde6-\\uddff]){2}",Yf="[\\ud800-\\udbff][\\udc00-\\udfff]",ro="["+wg+"]",Tg="\\u200d",Rg="(?:"+Eg+"|"+Og+")",DS="(?:"+ro+"|"+Og+")",Bg="(?:"+qf+"(?:d|ll|m|re|s|t|ve))?",xg="(?:"+qf+"(?:D|LL|M|RE|S|T|VE))?",Mg=NS+"?",Cg="["+Ag+"]?",FS="(?:"+Tg+"(?:"+[Pg,Hf,Yf].join("|")+")"+Cg+Mg+")*",US="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lg=Cg+Mg+FS,WS="(?:"+[KS,Hf,Yf].join("|")+")"+Lg,VS="(?:"+[Pg+Uc+"?",Uc,Hf,Yf,LS].join("|")+")",$S=RegExp(qf,"g"),jS=RegExp(Uc,"g"),Jf=RegExp(Gf+"(?="+Gf+")|"+VS+Lg,"g"),qS=RegExp([ro+"?"+Eg+"+"+Bg+"(?="+[kg,ro,"$"].join("|")+")",DS+"+"+xg+"(?="+[kg,ro+Rg,"$"].join("|")+")",ro+"?"+Rg+"+"+Bg,ro+"+"+xg,zS,US,Ig,WS].join("|"),"g"),GS=RegExp("["+Tg+Fc+bg+Ag+"]"),HS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,YS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],JS=-1,Ot={};Ot[y]=Ot[k]=Ot[L]=Ot[$]=Ot[Z]=Ot[Ke]=Ot[wt]=Ot[pt]=Ot[At]=!0,Ot[Et]=Ot[ht]=Ot[v]=Ot[Wt]=Ot[g]=Ot[wn]=Ot[wr]=Ot[nr]=Ot[pn]=Ot[bs]=Ot[rr]=Ot[Ni]=Ot[An]=Ot[Sn]=Ot[Un]=!1;var St={};St[Et]=St[ht]=St[v]=St[g]=St[Wt]=St[wn]=St[y]=St[k]=St[L]=St[$]=St[Z]=St[pn]=St[bs]=St[rr]=St[Ni]=St[An]=St[Sn]=St[Di]=St[Ke]=St[wt]=St[pt]=St[At]=!0,St[wr]=St[nr]=St[Un]=!1;var QS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},XS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ZS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},e0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t0=parseFloat,n0=parseInt,Kg=typeof z=="object"&&z&&z.Object===Object&&z,r0=typeof self=="object"&&self&&self.Object===Object&&self,gn=Kg||r0||Function("return this")(),Qf=e&&!e.nodeType&&e,vs=Qf&&!0&&r&&!r.nodeType&&r,Ng=vs&&vs.exports===Qf,Xf=Ng&&Kg.process,Ar=function(){try{var D=vs&&vs.require&&vs.require("util").types;return D||Xf&&Xf.binding&&Xf.binding("util")}catch{}}(),Dg=Ar&&Ar.isArrayBuffer,Fg=Ar&&Ar.isDate,Ug=Ar&&Ar.isMap,zg=Ar&&Ar.isRegExp,Wg=Ar&&Ar.isSet,Vg=Ar&&Ar.isTypedArray;function ir(D,Q,q){switch(q.length){case 0:return D.call(Q);case 1:return D.call(Q,q[0]);case 2:return D.call(Q,q[0],q[1]);case 3:return D.call(Q,q[0],q[1],q[2])}return D.apply(Q,q)}function i0(D,Q,q,me){for(var Me=-1,rt=D==null?0:D.length;++Me<rt;){var en=D[Me];Q(me,en,q(en),D)}return me}function Sr(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me&&Q(D[q],q,D)!==!1;);return D}function s0(D,Q){for(var q=D==null?0:D.length;q--&&Q(D[q],q,D)!==!1;);return D}function $g(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(!Q(D[q],q,D))return!1;return!0}function Fi(D,Q){for(var q=-1,me=D==null?0:D.length,Me=0,rt=[];++q<me;){var en=D[q];Q(en,q,D)&&(rt[Me++]=en)}return rt}function zc(D,Q){var q=D==null?0:D.length;return!!q&&io(D,Q,0)>-1}function Zf(D,Q,q){for(var me=-1,Me=D==null?0:D.length;++me<Me;)if(q(Q,D[me]))return!0;return!1}function Tt(D,Q){for(var q=-1,me=D==null?0:D.length,Me=Array(me);++q<me;)Me[q]=Q(D[q],q,D);return Me}function Ui(D,Q){for(var q=-1,me=Q.length,Me=D.length;++q<me;)D[Me+q]=Q[q];return D}function ed(D,Q,q,me){var Me=-1,rt=D==null?0:D.length;for(me&&rt&&(q=D[++Me]);++Me<rt;)q=Q(q,D[Me],Me,D);return q}function o0(D,Q,q,me){var Me=D==null?0:D.length;for(me&&Me&&(q=D[--Me]);Me--;)q=Q(q,D[Me],Me,D);return q}function td(D,Q){for(var q=-1,me=D==null?0:D.length;++q<me;)if(Q(D[q],q,D))return!0;return!1}var a0=nd("length");function c0(D){return D.split("")}function u0(D){return D.match(mS)||[]}function jg(D,Q,q){var me;return q(D,function(Me,rt,en){if(Q(Me,rt,en))return me=rt,!1}),me}function Wc(D,Q,q,me){for(var Me=D.length,rt=q+(me?1:-1);me?rt--:++rt<Me;)if(Q(D[rt],rt,D))return rt;return-1}function io(D,Q,q){return Q===Q?w0(D,Q,q):Wc(D,qg,q)}function l0(D,Q,q,me){for(var Me=q-1,rt=D.length;++Me<rt;)if(me(D[Me],Q))return Me;return-1}function qg(D){return D!==D}function Gg(D,Q){var q=D==null?0:D.length;return q?id(D,Q)/q:Gt}function nd(D){return function(Q){return Q==null?t:Q[D]}}function rd(D){return function(Q){return D==null?t:D[Q]}}function Hg(D,Q,q,me,Me){return Me(D,function(rt,en,bt){q=me?(me=!1,rt):Q(q,rt,en,bt)}),q}function f0(D,Q){var q=D.length;for(D.sort(Q);q--;)D[q]=D[q].value;return D}function id(D,Q){for(var q,me=-1,Me=D.length;++me<Me;){var rt=Q(D[me]);rt!==t&&(q=q===t?rt:q+rt)}return q}function sd(D,Q){for(var q=-1,me=Array(D);++q<D;)me[q]=Q(q);return me}function d0(D,Q){return Tt(Q,function(q){return[q,D[q]]})}function Yg(D){return D&&D.slice(0,Zg(D)+1).replace(jf,"")}function sr(D){return function(Q){return D(Q)}}function od(D,Q){return Tt(Q,function(q){return D[q]})}function _a(D,Q){return D.has(Q)}function Jg(D,Q){for(var q=-1,me=D.length;++q<me&&io(Q,D[q],0)>-1;);return q}function Qg(D,Q){for(var q=D.length;q--&&io(Q,D[q],0)>-1;);return q}function h0(D,Q){for(var q=D.length,me=0;q--;)D[q]===Q&&++me;return me}var p0=rd(QS),g0=rd(XS);function y0(D){return"\\"+e0[D]}function m0(D,Q){return D==null?t:D[Q]}function so(D){return GS.test(D)}function b0(D){return HS.test(D)}function v0(D){for(var Q,q=[];!(Q=D.next()).done;)q.push(Q.value);return q}function ad(D){var Q=-1,q=Array(D.size);return D.forEach(function(me,Me){q[++Q]=[Me,me]}),q}function Xg(D,Q){return function(q){return D(Q(q))}}function zi(D,Q){for(var q=-1,me=D.length,Me=0,rt=[];++q<me;){var en=D[q];(en===Q||en===d)&&(D[q]=d,rt[Me++]=q)}return rt}function Vc(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=me}),q}function _0(D){var Q=-1,q=Array(D.size);return D.forEach(function(me){q[++Q]=[me,me]}),q}function w0(D,Q,q){for(var me=q-1,Me=D.length;++me<Me;)if(D[me]===Q)return me;return-1}function A0(D,Q,q){for(var me=q+1;me--;)if(D[me]===Q)return me;return me}function oo(D){return so(D)?k0(D):a0(D)}function zr(D){return so(D)?I0(D):c0(D)}function Zg(D){for(var Q=D.length;Q--&&hS.test(D.charAt(Q)););return Q}var S0=rd(ZS);function k0(D){for(var Q=Jf.lastIndex=0;Jf.test(D);)++Q;return Q}function I0(D){return D.match(Jf)||[]}function E0(D){return D.match(qS)||[]}var O0=function D(Q){Q=Q==null?gn:ao.defaults(gn.Object(),Q,ao.pick(gn,YS));var q=Q.Array,me=Q.Date,Me=Q.Error,rt=Q.Function,en=Q.Math,bt=Q.Object,cd=Q.RegExp,P0=Q.String,kr=Q.TypeError,$c=q.prototype,T0=rt.prototype,co=bt.prototype,jc=Q["__core-js_shared__"],qc=T0.toString,dt=co.hasOwnProperty,R0=0,ey=function(){var o=/[^.]+$/.exec(jc&&jc.keys&&jc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Gc=co.toString,B0=qc.call(bt),x0=gn._,M0=cd("^"+qc.call(dt).replace($f,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hc=Ng?Q.Buffer:t,Wi=Q.Symbol,Yc=Q.Uint8Array,ty=Hc?Hc.allocUnsafe:t,Jc=Xg(bt.getPrototypeOf,bt),ny=bt.create,ry=co.propertyIsEnumerable,Qc=$c.splice,iy=Wi?Wi.isConcatSpreadable:t,wa=Wi?Wi.iterator:t,_s=Wi?Wi.toStringTag:t,Xc=function(){try{var o=Is(bt,"defineProperty");return o({},"",{}),o}catch{}}(),C0=Q.clearTimeout!==gn.clearTimeout&&Q.clearTimeout,L0=me&&me.now!==gn.Date.now&&me.now,K0=Q.setTimeout!==gn.setTimeout&&Q.setTimeout,Zc=en.ceil,eu=en.floor,ud=bt.getOwnPropertySymbols,N0=Hc?Hc.isBuffer:t,sy=Q.isFinite,D0=$c.join,F0=Xg(bt.keys,bt),tn=en.max,kn=en.min,U0=me.now,z0=Q.parseInt,oy=en.random,W0=$c.reverse,ld=Is(Q,"DataView"),Aa=Is(Q,"Map"),fd=Is(Q,"Promise"),uo=Is(Q,"Set"),Sa=Is(Q,"WeakMap"),ka=Is(bt,"create"),tu=Sa&&new Sa,lo={},V0=Es(ld),$0=Es(Aa),j0=Es(fd),q0=Es(uo),G0=Es(Sa),nu=Wi?Wi.prototype:t,Ia=nu?nu.valueOf:t,ay=nu?nu.toString:t;function _(o){if(Dt(o)&&!Le(o)&&!(o instanceof Ge)){if(o instanceof Ir)return o;if(dt.call(o,"__wrapped__"))return cm(o)}return new Ir(o)}var fo=function(){function o(){}return function(c){if(!Ct(c))return{};if(ny)return ny(c);o.prototype=c;var l=new o;return o.prototype=t,l}}();function ru(){}function Ir(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}_.templateSettings={escape:aS,evaluate:cS,interpolate:yg,variable:"",imports:{_}},_.prototype=ru.prototype,_.prototype.constructor=_,Ir.prototype=fo(ru.prototype),Ir.prototype.constructor=Ir;function Ge(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function H0(){var o=new Ge(this.__wrapped__);return o.__actions__=zn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=zn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=zn(this.__views__),o}function Y0(){if(this.__filtered__){var o=new Ge(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function J0(){var o=this.__wrapped__.value(),c=this.__dir__,l=Le(o),p=c<0,b=l?o.length:0,w=ck(0,b,this.__views__),P=w.start,B=w.end,F=B-P,ne=p?B:P-1,re=this.__iteratees__,ce=re.length,ge=0,we=kn(F,this.__takeCount__);if(!l||!p&&b==F&&we==F)return By(o,this.__actions__);var Te=[];e:for(;F--&&ge<we;){ne+=c;for(var Fe=-1,Re=o[ne];++Fe<ce;){var je=re[Fe],He=je.iteratee,cr=je.type,Cn=He(Re);if(cr==X)Re=Cn;else if(!Cn){if(cr==W)continue e;break e}}Te[ge++]=Re}return Te}Ge.prototype=fo(ru.prototype),Ge.prototype.constructor=Ge;function ws(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function Q0(){this.__data__=ka?ka(null):{},this.size=0}function X0(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function Z0(o){var c=this.__data__;if(ka){var l=c[o];return l===f?t:l}return dt.call(c,o)?c[o]:t}function e1(o){var c=this.__data__;return ka?c[o]!==t:dt.call(c,o)}function t1(o,c){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=ka&&c===t?f:c,this}ws.prototype.clear=Q0,ws.prototype.delete=X0,ws.prototype.get=Z0,ws.prototype.has=e1,ws.prototype.set=t1;function mi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function n1(){this.__data__=[],this.size=0}function r1(o){var c=this.__data__,l=iu(c,o);if(l<0)return!1;var p=c.length-1;return l==p?c.pop():Qc.call(c,l,1),--this.size,!0}function i1(o){var c=this.__data__,l=iu(c,o);return l<0?t:c[l][1]}function s1(o){return iu(this.__data__,o)>-1}function o1(o,c){var l=this.__data__,p=iu(l,o);return p<0?(++this.size,l.push([o,c])):l[p][1]=c,this}mi.prototype.clear=n1,mi.prototype.delete=r1,mi.prototype.get=i1,mi.prototype.has=s1,mi.prototype.set=o1;function bi(o){var c=-1,l=o==null?0:o.length;for(this.clear();++c<l;){var p=o[c];this.set(p[0],p[1])}}function a1(){this.size=0,this.__data__={hash:new ws,map:new(Aa||mi),string:new ws}}function c1(o){var c=yu(this,o).delete(o);return this.size-=c?1:0,c}function u1(o){return yu(this,o).get(o)}function l1(o){return yu(this,o).has(o)}function f1(o,c){var l=yu(this,o),p=l.size;return l.set(o,c),this.size+=l.size==p?0:1,this}bi.prototype.clear=a1,bi.prototype.delete=c1,bi.prototype.get=u1,bi.prototype.has=l1,bi.prototype.set=f1;function As(o){var c=-1,l=o==null?0:o.length;for(this.__data__=new bi;++c<l;)this.add(o[c])}function d1(o){return this.__data__.set(o,f),this}function h1(o){return this.__data__.has(o)}As.prototype.add=As.prototype.push=d1,As.prototype.has=h1;function Wr(o){var c=this.__data__=new mi(o);this.size=c.size}function p1(){this.__data__=new mi,this.size=0}function g1(o){var c=this.__data__,l=c.delete(o);return this.size=c.size,l}function y1(o){return this.__data__.get(o)}function m1(o){return this.__data__.has(o)}function b1(o,c){var l=this.__data__;if(l instanceof mi){var p=l.__data__;if(!Aa||p.length<i-1)return p.push([o,c]),this.size=++l.size,this;l=this.__data__=new bi(p)}return l.set(o,c),this.size=l.size,this}Wr.prototype.clear=p1,Wr.prototype.delete=g1,Wr.prototype.get=y1,Wr.prototype.has=m1,Wr.prototype.set=b1;function cy(o,c){var l=Le(o),p=!l&&Os(o),b=!l&&!p&&Gi(o),w=!l&&!p&&!b&&yo(o),P=l||p||b||w,B=P?sd(o.length,P0):[],F=B.length;for(var ne in o)(c||dt.call(o,ne))&&!(P&&(ne=="length"||b&&(ne=="offset"||ne=="parent")||w&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Ai(ne,F)))&&B.push(ne);return B}function uy(o){var c=o.length;return c?o[Ad(0,c-1)]:t}function v1(o,c){return mu(zn(o),Ss(c,0,o.length))}function _1(o){return mu(zn(o))}function dd(o,c,l){(l!==t&&!Vr(o[c],l)||l===t&&!(c in o))&&vi(o,c,l)}function Ea(o,c,l){var p=o[c];(!(dt.call(o,c)&&Vr(p,l))||l===t&&!(c in o))&&vi(o,c,l)}function iu(o,c){for(var l=o.length;l--;)if(Vr(o[l][0],c))return l;return-1}function w1(o,c,l,p){return Vi(o,function(b,w,P){c(p,b,l(b),P)}),p}function ly(o,c){return o&&ti(c,fn(c),o)}function A1(o,c){return o&&ti(c,Vn(c),o)}function vi(o,c,l){c=="__proto__"&&Xc?Xc(o,c,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[c]=l}function hd(o,c){for(var l=-1,p=c.length,b=q(p),w=o==null;++l<p;)b[l]=w?t:Gd(o,c[l]);return b}function Ss(o,c,l){return o===o&&(l!==t&&(o=o<=l?o:l),c!==t&&(o=o>=c?o:c)),o}function Er(o,c,l,p,b,w){var P,B=c&m,F=c&I,ne=c&O;if(l&&(P=b?l(o,p,b,w):l(o)),P!==t)return P;if(!Ct(o))return o;var re=Le(o);if(re){if(P=lk(o),!B)return zn(o,P)}else{var ce=In(o),ge=ce==nr||ce==yi;if(Gi(o))return Cy(o,B);if(ce==rr||ce==Et||ge&&!b){if(P=F||ge?{}:Zy(o),!B)return F?Z1(o,A1(P,o)):X1(o,ly(P,o))}else{if(!St[ce])return b?o:{};P=fk(o,ce,B)}}w||(w=new Wr);var we=w.get(o);if(we)return we;w.set(o,P),Pm(o)?o.forEach(function(Re){P.add(Er(Re,c,l,Re,o,w))}):Em(o)&&o.forEach(function(Re,je){P.set(je,Er(Re,c,l,je,o,w))});var Te=ne?F?Md:xd:F?Vn:fn,Fe=re?t:Te(o);return Sr(Fe||o,function(Re,je){Fe&&(je=Re,Re=o[je]),Ea(P,je,Er(Re,c,l,je,o,w))}),P}function S1(o){var c=fn(o);return function(l){return fy(l,o,c)}}function fy(o,c,l){var p=l.length;if(o==null)return!p;for(o=bt(o);p--;){var b=l[p],w=c[b],P=o[b];if(P===t&&!(b in o)||!w(P))return!1}return!0}function dy(o,c,l){if(typeof o!="function")throw new kr(a);return Ma(function(){o.apply(t,l)},c)}function Oa(o,c,l,p){var b=-1,w=zc,P=!0,B=o.length,F=[],ne=c.length;if(!B)return F;l&&(c=Tt(c,sr(l))),p?(w=Zf,P=!1):c.length>=i&&(w=_a,P=!1,c=new As(c));e:for(;++b<B;){var re=o[b],ce=l==null?re:l(re);if(re=p||re!==0?re:0,P&&ce===ce){for(var ge=ne;ge--;)if(c[ge]===ce)continue e;F.push(re)}else w(c,ce,p)||F.push(re)}return F}var Vi=Fy(ei),hy=Fy(gd,!0);function k1(o,c){var l=!0;return Vi(o,function(p,b,w){return l=!!c(p,b,w),l}),l}function su(o,c,l){for(var p=-1,b=o.length;++p<b;){var w=o[p],P=c(w);if(P!=null&&(B===t?P===P&&!ar(P):l(P,B)))var B=P,F=w}return F}function I1(o,c,l,p){var b=o.length;for(l=De(l),l<0&&(l=-l>b?0:b+l),p=p===t||p>b?b:De(p),p<0&&(p+=b),p=l>p?0:Rm(p);l<p;)o[l++]=c;return o}function py(o,c){var l=[];return Vi(o,function(p,b,w){c(p,b,w)&&l.push(p)}),l}function yn(o,c,l,p,b){var w=-1,P=o.length;for(l||(l=hk),b||(b=[]);++w<P;){var B=o[w];c>0&&l(B)?c>1?yn(B,c-1,l,p,b):Ui(b,B):p||(b[b.length]=B)}return b}var pd=Uy(),gy=Uy(!0);function ei(o,c){return o&&pd(o,c,fn)}function gd(o,c){return o&&gy(o,c,fn)}function ou(o,c){return Fi(c,function(l){return Si(o[l])})}function ks(o,c){c=ji(c,o);for(var l=0,p=c.length;o!=null&&l<p;)o=o[ni(c[l++])];return l&&l==p?o:t}function yy(o,c,l){var p=c(o);return Le(o)?p:Ui(p,l(o))}function xn(o){return o==null?o===t?Wf:Uf:_s&&_s in bt(o)?ak(o):_k(o)}function yd(o,c){return o>c}function E1(o,c){return o!=null&&dt.call(o,c)}function O1(o,c){return o!=null&&c in bt(o)}function P1(o,c,l){return o>=kn(c,l)&&o<tn(c,l)}function md(o,c,l){for(var p=l?Zf:zc,b=o[0].length,w=o.length,P=w,B=q(w),F=1/0,ne=[];P--;){var re=o[P];P&&c&&(re=Tt(re,sr(c))),F=kn(re.length,F),B[P]=!l&&(c||b>=120&&re.length>=120)?new As(P&&re):t}re=o[0];var ce=-1,ge=B[0];e:for(;++ce<b&&ne.length<F;){var we=re[ce],Te=c?c(we):we;if(we=l||we!==0?we:0,!(ge?_a(ge,Te):p(ne,Te,l))){for(P=w;--P;){var Fe=B[P];if(!(Fe?_a(Fe,Te):p(o[P],Te,l)))continue e}ge&&ge.push(Te),ne.push(we)}}return ne}function T1(o,c,l,p){return ei(o,function(b,w,P){c(p,l(b),w,P)}),p}function Pa(o,c,l){c=ji(c,o),o=rm(o,c);var p=o==null?o:o[ni(Pr(c))];return p==null?t:ir(p,o,l)}function my(o){return Dt(o)&&xn(o)==Et}function R1(o){return Dt(o)&&xn(o)==v}function B1(o){return Dt(o)&&xn(o)==wn}function Ta(o,c,l,p,b){return o===c?!0:o==null||c==null||!Dt(o)&&!Dt(c)?o!==o&&c!==c:x1(o,c,l,p,Ta,b)}function x1(o,c,l,p,b,w){var P=Le(o),B=Le(c),F=P?ht:In(o),ne=B?ht:In(c);F=F==Et?rr:F,ne=ne==Et?rr:ne;var re=F==rr,ce=ne==rr,ge=F==ne;if(ge&&Gi(o)){if(!Gi(c))return!1;P=!0,re=!1}if(ge&&!re)return w||(w=new Wr),P||yo(o)?Jy(o,c,l,p,b,w):sk(o,c,F,l,p,b,w);if(!(l&M)){var we=re&&dt.call(o,"__wrapped__"),Te=ce&&dt.call(c,"__wrapped__");if(we||Te){var Fe=we?o.value():o,Re=Te?c.value():c;return w||(w=new Wr),b(Fe,Re,l,p,w)}}return ge?(w||(w=new Wr),ok(o,c,l,p,b,w)):!1}function M1(o){return Dt(o)&&In(o)==pn}function bd(o,c,l,p){var b=l.length,w=b,P=!p;if(o==null)return!w;for(o=bt(o);b--;){var B=l[b];if(P&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<w;){B=l[b];var F=B[0],ne=o[F],re=B[1];if(P&&B[2]){if(ne===t&&!(F in o))return!1}else{var ce=new Wr;if(p)var ge=p(ne,re,F,o,c,ce);if(!(ge===t?Ta(re,ne,M|S,p,ce):ge))return!1}}return!0}function by(o){if(!Ct(o)||gk(o))return!1;var c=Si(o)?M0:SS;return c.test(Es(o))}function C1(o){return Dt(o)&&xn(o)==Ni}function L1(o){return Dt(o)&&In(o)==An}function K1(o){return Dt(o)&&Su(o.length)&&!!Ot[xn(o)]}function vy(o){return typeof o=="function"?o:o==null?$n:typeof o=="object"?Le(o)?Ay(o[0],o[1]):wy(o):zm(o)}function vd(o){if(!xa(o))return F0(o);var c=[];for(var l in bt(o))dt.call(o,l)&&l!="constructor"&&c.push(l);return c}function N1(o){if(!Ct(o))return vk(o);var c=xa(o),l=[];for(var p in o)p=="constructor"&&(c||!dt.call(o,p))||l.push(p);return l}function _d(o,c){return o<c}function _y(o,c){var l=-1,p=Wn(o)?q(o.length):[];return Vi(o,function(b,w,P){p[++l]=c(b,w,P)}),p}function wy(o){var c=Ld(o);return c.length==1&&c[0][2]?tm(c[0][0],c[0][1]):function(l){return l===o||bd(l,o,c)}}function Ay(o,c){return Nd(o)&&em(c)?tm(ni(o),c):function(l){var p=Gd(l,o);return p===t&&p===c?Hd(l,o):Ta(c,p,M|S)}}function au(o,c,l,p,b){o!==c&&pd(c,function(w,P){if(b||(b=new Wr),Ct(w))D1(o,c,P,l,au,p,b);else{var B=p?p(Fd(o,P),w,P+"",o,c,b):t;B===t&&(B=w),dd(o,P,B)}},Vn)}function D1(o,c,l,p,b,w,P){var B=Fd(o,l),F=Fd(c,l),ne=P.get(F);if(ne){dd(o,l,ne);return}var re=w?w(B,F,l+"",o,c,P):t,ce=re===t;if(ce){var ge=Le(F),we=!ge&&Gi(F),Te=!ge&&!we&&yo(F);re=F,ge||we||Te?Le(B)?re=B:Vt(B)?re=zn(B):we?(ce=!1,re=Cy(F,!0)):Te?(ce=!1,re=Ly(F,!0)):re=[]:Ca(F)||Os(F)?(re=B,Os(B)?re=Bm(B):(!Ct(B)||Si(B))&&(re=Zy(F))):ce=!1}ce&&(P.set(F,re),b(re,F,p,w,P),P.delete(F)),dd(o,l,re)}function Sy(o,c){var l=o.length;if(!!l)return c+=c<0?l:0,Ai(c,l)?o[c]:t}function ky(o,c,l){c.length?c=Tt(c,function(w){return Le(w)?function(P){return ks(P,w.length===1?w[0]:w)}:w}):c=[$n];var p=-1;c=Tt(c,sr(Oe()));var b=_y(o,function(w,P,B){var F=Tt(c,function(ne){return ne(w)});return{criteria:F,index:++p,value:w}});return f0(b,function(w,P){return Q1(w,P,l)})}function F1(o,c){return Iy(o,c,function(l,p){return Hd(o,p)})}function Iy(o,c,l){for(var p=-1,b=c.length,w={};++p<b;){var P=c[p],B=ks(o,P);l(B,P)&&Ra(w,ji(P,o),B)}return w}function U1(o){return function(c){return ks(c,o)}}function wd(o,c,l,p){var b=p?l0:io,w=-1,P=c.length,B=o;for(o===c&&(c=zn(c)),l&&(B=Tt(o,sr(l)));++w<P;)for(var F=0,ne=c[w],re=l?l(ne):ne;(F=b(B,re,F,p))>-1;)B!==o&&Qc.call(B,F,1),Qc.call(o,F,1);return o}function Ey(o,c){for(var l=o?c.length:0,p=l-1;l--;){var b=c[l];if(l==p||b!==w){var w=b;Ai(b)?Qc.call(o,b,1):Id(o,b)}}return o}function Ad(o,c){return o+eu(oy()*(c-o+1))}function z1(o,c,l,p){for(var b=-1,w=tn(Zc((c-o)/(l||1)),0),P=q(w);w--;)P[p?w:++b]=o,o+=l;return P}function Sd(o,c){var l="";if(!o||c<1||c>Ie)return l;do c%2&&(l+=o),c=eu(c/2),c&&(o+=o);while(c);return l}function Ve(o,c){return Ud(nm(o,c,$n),o+"")}function W1(o){return uy(mo(o))}function V1(o,c){var l=mo(o);return mu(l,Ss(c,0,l.length))}function Ra(o,c,l,p){if(!Ct(o))return o;c=ji(c,o);for(var b=-1,w=c.length,P=w-1,B=o;B!=null&&++b<w;){var F=ni(c[b]),ne=l;if(F==="__proto__"||F==="constructor"||F==="prototype")return o;if(b!=P){var re=B[F];ne=p?p(re,F,B):t,ne===t&&(ne=Ct(re)?re:Ai(c[b+1])?[]:{})}Ea(B,F,ne),B=B[F]}return o}var Oy=tu?function(o,c){return tu.set(o,c),o}:$n,$1=Xc?function(o,c){return Xc(o,"toString",{configurable:!0,enumerable:!1,value:Jd(c),writable:!0})}:$n;function j1(o){return mu(mo(o))}function Or(o,c,l){var p=-1,b=o.length;c<0&&(c=-c>b?0:b+c),l=l>b?b:l,l<0&&(l+=b),b=c>l?0:l-c>>>0,c>>>=0;for(var w=q(b);++p<b;)w[p]=o[p+c];return w}function q1(o,c){var l;return Vi(o,function(p,b,w){return l=c(p,b,w),!l}),!!l}function cu(o,c,l){var p=0,b=o==null?p:o.length;if(typeof c=="number"&&c===c&&b<=Zt){for(;p<b;){var w=p+b>>>1,P=o[w];P!==null&&!ar(P)&&(l?P<=c:P<c)?p=w+1:b=w}return b}return kd(o,c,$n,l)}function kd(o,c,l,p){var b=0,w=o==null?0:o.length;if(w===0)return 0;c=l(c);for(var P=c!==c,B=c===null,F=ar(c),ne=c===t;b<w;){var re=eu((b+w)/2),ce=l(o[re]),ge=ce!==t,we=ce===null,Te=ce===ce,Fe=ar(ce);if(P)var Re=p||Te;else ne?Re=Te&&(p||ge):B?Re=Te&&ge&&(p||!we):F?Re=Te&&ge&&!we&&(p||!Fe):we||Fe?Re=!1:Re=p?ce<=c:ce<c;Re?b=re+1:w=re}return kn(w,We)}function Py(o,c){for(var l=-1,p=o.length,b=0,w=[];++l<p;){var P=o[l],B=c?c(P):P;if(!l||!Vr(B,F)){var F=B;w[b++]=P===0?0:P}}return w}function Ty(o){return typeof o=="number"?o:ar(o)?Gt:+o}function or(o){if(typeof o=="string")return o;if(Le(o))return Tt(o,or)+"";if(ar(o))return ay?ay.call(o):"";var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function $i(o,c,l){var p=-1,b=zc,w=o.length,P=!0,B=[],F=B;if(l)P=!1,b=Zf;else if(w>=i){var ne=c?null:rk(o);if(ne)return Vc(ne);P=!1,b=_a,F=new As}else F=c?[]:B;e:for(;++p<w;){var re=o[p],ce=c?c(re):re;if(re=l||re!==0?re:0,P&&ce===ce){for(var ge=F.length;ge--;)if(F[ge]===ce)continue e;c&&F.push(ce),B.push(re)}else b(F,ce,l)||(F!==B&&F.push(ce),B.push(re))}return B}function Id(o,c){return c=ji(c,o),o=rm(o,c),o==null||delete o[ni(Pr(c))]}function Ry(o,c,l,p){return Ra(o,c,l(ks(o,c)),p)}function uu(o,c,l,p){for(var b=o.length,w=p?b:-1;(p?w--:++w<b)&&c(o[w],w,o););return l?Or(o,p?0:w,p?w+1:b):Or(o,p?w+1:0,p?b:w)}function By(o,c){var l=o;return l instanceof Ge&&(l=l.value()),ed(c,function(p,b){return b.func.apply(b.thisArg,Ui([p],b.args))},l)}function Ed(o,c,l){var p=o.length;if(p<2)return p?$i(o[0]):[];for(var b=-1,w=q(p);++b<p;)for(var P=o[b],B=-1;++B<p;)B!=b&&(w[b]=Oa(w[b]||P,o[B],c,l));return $i(yn(w,1),c,l)}function xy(o,c,l){for(var p=-1,b=o.length,w=c.length,P={};++p<b;){var B=p<w?c[p]:t;l(P,o[p],B)}return P}function Od(o){return Vt(o)?o:[]}function Pd(o){return typeof o=="function"?o:$n}function ji(o,c){return Le(o)?o:Nd(o,c)?[o]:am(ct(o))}var G1=Ve;function qi(o,c,l){var p=o.length;return l=l===t?p:l,!c&&l>=p?o:Or(o,c,l)}var My=C0||function(o){return gn.clearTimeout(o)};function Cy(o,c){if(c)return o.slice();var l=o.length,p=ty?ty(l):new o.constructor(l);return o.copy(p),p}function Td(o){var c=new o.constructor(o.byteLength);return new Yc(c).set(new Yc(o)),c}function H1(o,c){var l=c?Td(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)}function Y1(o){var c=new o.constructor(o.source,mg.exec(o));return c.lastIndex=o.lastIndex,c}function J1(o){return Ia?bt(Ia.call(o)):{}}function Ly(o,c){var l=c?Td(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)}function Ky(o,c){if(o!==c){var l=o!==t,p=o===null,b=o===o,w=ar(o),P=c!==t,B=c===null,F=c===c,ne=ar(c);if(!B&&!ne&&!w&&o>c||w&&P&&F&&!B&&!ne||p&&P&&F||!l&&F||!b)return 1;if(!p&&!w&&!ne&&o<c||ne&&l&&b&&!p&&!w||B&&l&&b||!P&&b||!F)return-1}return 0}function Q1(o,c,l){for(var p=-1,b=o.criteria,w=c.criteria,P=b.length,B=l.length;++p<P;){var F=Ky(b[p],w[p]);if(F){if(p>=B)return F;var ne=l[p];return F*(ne=="desc"?-1:1)}}return o.index-c.index}function Ny(o,c,l,p){for(var b=-1,w=o.length,P=l.length,B=-1,F=c.length,ne=tn(w-P,0),re=q(F+ne),ce=!p;++B<F;)re[B]=c[B];for(;++b<P;)(ce||b<w)&&(re[l[b]]=o[b]);for(;ne--;)re[B++]=o[b++];return re}function Dy(o,c,l,p){for(var b=-1,w=o.length,P=-1,B=l.length,F=-1,ne=c.length,re=tn(w-B,0),ce=q(re+ne),ge=!p;++b<re;)ce[b]=o[b];for(var we=b;++F<ne;)ce[we+F]=c[F];for(;++P<B;)(ge||b<w)&&(ce[we+l[P]]=o[b++]);return ce}function zn(o,c){var l=-1,p=o.length;for(c||(c=q(p));++l<p;)c[l]=o[l];return c}function ti(o,c,l,p){var b=!l;l||(l={});for(var w=-1,P=c.length;++w<P;){var B=c[w],F=p?p(l[B],o[B],B,l,o):t;F===t&&(F=o[B]),b?vi(l,B,F):Ea(l,B,F)}return l}function X1(o,c){return ti(o,Kd(o),c)}function Z1(o,c){return ti(o,Qy(o),c)}function lu(o,c){return function(l,p){var b=Le(l)?i0:w1,w=c?c():{};return b(l,o,Oe(p,2),w)}}function ho(o){return Ve(function(c,l){var p=-1,b=l.length,w=b>1?l[b-1]:t,P=b>2?l[2]:t;for(w=o.length>3&&typeof w=="function"?(b--,w):t,P&&Mn(l[0],l[1],P)&&(w=b<3?t:w,b=1),c=bt(c);++p<b;){var B=l[p];B&&o(c,B,p,w)}return c})}function Fy(o,c){return function(l,p){if(l==null)return l;if(!Wn(l))return o(l,p);for(var b=l.length,w=c?b:-1,P=bt(l);(c?w--:++w<b)&&p(P[w],w,P)!==!1;);return l}}function Uy(o){return function(c,l,p){for(var b=-1,w=bt(c),P=p(c),B=P.length;B--;){var F=P[o?B:++b];if(l(w[F],F,w)===!1)break}return c}}function ek(o,c,l){var p=c&R,b=Ba(o);function w(){var P=this&&this!==gn&&this instanceof w?b:o;return P.apply(p?l:this,arguments)}return w}function zy(o){return function(c){c=ct(c);var l=so(c)?zr(c):t,p=l?l[0]:c.charAt(0),b=l?qi(l,1).join(""):c.slice(1);return p[o]()+b}}function po(o){return function(c){return ed(Fm(Dm(c).replace($S,"")),o,"")}}function Ba(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var l=fo(o.prototype),p=o.apply(l,c);return Ct(p)?p:l}}function tk(o,c,l){var p=Ba(o);function b(){for(var w=arguments.length,P=q(w),B=w,F=go(b);B--;)P[B]=arguments[B];var ne=w<3&&P[0]!==F&&P[w-1]!==F?[]:zi(P,F);if(w-=ne.length,w<l)return qy(o,c,fu,b.placeholder,t,P,ne,t,t,l-w);var re=this&&this!==gn&&this instanceof b?p:o;return ir(re,this,P)}return b}function Wy(o){return function(c,l,p){var b=bt(c);if(!Wn(c)){var w=Oe(l,3);c=fn(c),l=function(B){return w(b[B],B,b)}}var P=o(c,l,p);return P>-1?b[w?c[P]:P]:t}}function Vy(o){return wi(function(c){var l=c.length,p=l,b=Ir.prototype.thru;for(o&&c.reverse();p--;){var w=c[p];if(typeof w!="function")throw new kr(a);if(b&&!P&&gu(w)=="wrapper")var P=new Ir([],!0)}for(p=P?p:l;++p<l;){w=c[p];var B=gu(w),F=B=="wrapper"?Cd(w):t;F&&Dd(F[0])&&F[1]==(N|ae|de|V)&&!F[4].length&&F[9]==1?P=P[gu(F[0])].apply(P,F[3]):P=w.length==1&&Dd(w)?P[B]():P.thru(w)}return function(){var ne=arguments,re=ne[0];if(P&&ne.length==1&&Le(re))return P.plant(re).value();for(var ce=0,ge=l?c[ce].apply(this,ne):re;++ce<l;)ge=c[ce].call(this,ge);return ge}})}function fu(o,c,l,p,b,w,P,B,F,ne){var re=c&N,ce=c&R,ge=c&C,we=c&(ae|oe),Te=c&J,Fe=ge?t:Ba(o);function Re(){for(var je=arguments.length,He=q(je),cr=je;cr--;)He[cr]=arguments[cr];if(we)var Cn=go(Re),ur=h0(He,Cn);if(p&&(He=Ny(He,p,b,we)),w&&(He=Dy(He,w,P,we)),je-=ur,we&&je<ne){var $t=zi(He,Cn);return qy(o,c,fu,Re.placeholder,l,He,$t,B,F,ne-je)}var $r=ce?l:this,Ii=ge?$r[o]:o;return je=He.length,B?He=wk(He,B):Te&&je>1&&He.reverse(),re&&F<je&&(He.length=F),this&&this!==gn&&this instanceof Re&&(Ii=Fe||Ba(Ii)),Ii.apply($r,He)}return Re}function $y(o,c){return function(l,p){return T1(l,o,c(p),{})}}function du(o,c){return function(l,p){var b;if(l===t&&p===t)return c;if(l!==t&&(b=l),p!==t){if(b===t)return p;typeof l=="string"||typeof p=="string"?(l=or(l),p=or(p)):(l=Ty(l),p=Ty(p)),b=o(l,p)}return b}}function Rd(o){return wi(function(c){return c=Tt(c,sr(Oe())),Ve(function(l){var p=this;return o(c,function(b){return ir(b,p,l)})})})}function hu(o,c){c=c===t?" ":or(c);var l=c.length;if(l<2)return l?Sd(c,o):c;var p=Sd(c,Zc(o/oo(c)));return so(c)?qi(zr(p),0,o).join(""):p.slice(0,o)}function nk(o,c,l,p){var b=c&R,w=Ba(o);function P(){for(var B=-1,F=arguments.length,ne=-1,re=p.length,ce=q(re+F),ge=this&&this!==gn&&this instanceof P?w:o;++ne<re;)ce[ne]=p[ne];for(;F--;)ce[ne++]=arguments[++B];return ir(ge,b?l:this,ce)}return P}function jy(o){return function(c,l,p){return p&&typeof p!="number"&&Mn(c,l,p)&&(l=p=t),c=ki(c),l===t?(l=c,c=0):l=ki(l),p=p===t?c<l?1:-1:ki(p),z1(c,l,p,o)}}function pu(o){return function(c,l){return typeof c=="string"&&typeof l=="string"||(c=Tr(c),l=Tr(l)),o(c,l)}}function qy(o,c,l,p,b,w,P,B,F,ne){var re=c&ae,ce=re?P:t,ge=re?t:P,we=re?w:t,Te=re?t:w;c|=re?de:E,c&=~(re?E:de),c&Y||(c&=~(R|C));var Fe=[o,c,b,we,ce,Te,ge,B,F,ne],Re=l.apply(t,Fe);return Dd(o)&&im(Re,Fe),Re.placeholder=p,sm(Re,o,c)}function Bd(o){var c=en[o];return function(l,p){if(l=Tr(l),p=p==null?0:kn(De(p),292),p&&sy(l)){var b=(ct(l)+"e").split("e"),w=c(b[0]+"e"+(+b[1]+p));return b=(ct(w)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return c(l)}}var rk=uo&&1/Vc(new uo([,-0]))[1]==ye?function(o){return new uo(o)}:Zd;function Gy(o){return function(c){var l=In(c);return l==pn?ad(c):l==An?_0(c):d0(c,o(c))}}function _i(o,c,l,p,b,w,P,B){var F=c&C;if(!F&&typeof o!="function")throw new kr(a);var ne=p?p.length:0;if(ne||(c&=~(de|E),p=b=t),P=P===t?P:tn(De(P),0),B=B===t?B:De(B),ne-=b?b.length:0,c&E){var re=p,ce=b;p=b=t}var ge=F?t:Cd(o),we=[o,c,l,p,b,re,ce,w,P,B];if(ge&&bk(we,ge),o=we[0],c=we[1],l=we[2],p=we[3],b=we[4],B=we[9]=we[9]===t?F?0:o.length:tn(we[9]-ne,0),!B&&c&(ae|oe)&&(c&=~(ae|oe)),!c||c==R)var Te=ek(o,c,l);else c==ae||c==oe?Te=tk(o,c,B):(c==de||c==(R|de))&&!b.length?Te=nk(o,c,l,p):Te=fu.apply(t,we);var Fe=ge?Oy:im;return sm(Fe(Te,we),o,c)}function Hy(o,c,l,p){return o===t||Vr(o,co[l])&&!dt.call(p,l)?c:o}function Yy(o,c,l,p,b,w){return Ct(o)&&Ct(c)&&(w.set(c,o),au(o,c,t,Yy,w),w.delete(c)),o}function ik(o){return Ca(o)?t:o}function Jy(o,c,l,p,b,w){var P=l&M,B=o.length,F=c.length;if(B!=F&&!(P&&F>B))return!1;var ne=w.get(o),re=w.get(c);if(ne&&re)return ne==c&&re==o;var ce=-1,ge=!0,we=l&S?new As:t;for(w.set(o,c),w.set(c,o);++ce<B;){var Te=o[ce],Fe=c[ce];if(p)var Re=P?p(Fe,Te,ce,c,o,w):p(Te,Fe,ce,o,c,w);if(Re!==t){if(Re)continue;ge=!1;break}if(we){if(!td(c,function(je,He){if(!_a(we,He)&&(Te===je||b(Te,je,l,p,w)))return we.push(He)})){ge=!1;break}}else if(!(Te===Fe||b(Te,Fe,l,p,w))){ge=!1;break}}return w.delete(o),w.delete(c),ge}function sk(o,c,l,p,b,w,P){switch(l){case g:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case v:return!(o.byteLength!=c.byteLength||!w(new Yc(o),new Yc(c)));case Wt:case wn:case bs:return Vr(+o,+c);case wr:return o.name==c.name&&o.message==c.message;case Ni:case Sn:return o==c+"";case pn:var B=ad;case An:var F=p&M;if(B||(B=Vc),o.size!=c.size&&!F)return!1;var ne=P.get(o);if(ne)return ne==c;p|=S,P.set(o,c);var re=Jy(B(o),B(c),p,b,w,P);return P.delete(o),re;case Di:if(Ia)return Ia.call(o)==Ia.call(c)}return!1}function ok(o,c,l,p,b,w){var P=l&M,B=xd(o),F=B.length,ne=xd(c),re=ne.length;if(F!=re&&!P)return!1;for(var ce=F;ce--;){var ge=B[ce];if(!(P?ge in c:dt.call(c,ge)))return!1}var we=w.get(o),Te=w.get(c);if(we&&Te)return we==c&&Te==o;var Fe=!0;w.set(o,c),w.set(c,o);for(var Re=P;++ce<F;){ge=B[ce];var je=o[ge],He=c[ge];if(p)var cr=P?p(He,je,ge,c,o,w):p(je,He,ge,o,c,w);if(!(cr===t?je===He||b(je,He,l,p,w):cr)){Fe=!1;break}Re||(Re=ge=="constructor")}if(Fe&&!Re){var Cn=o.constructor,ur=c.constructor;Cn!=ur&&"constructor"in o&&"constructor"in c&&!(typeof Cn=="function"&&Cn instanceof Cn&&typeof ur=="function"&&ur instanceof ur)&&(Fe=!1)}return w.delete(o),w.delete(c),Fe}function wi(o){return Ud(nm(o,t,fm),o+"")}function xd(o){return yy(o,fn,Kd)}function Md(o){return yy(o,Vn,Qy)}var Cd=tu?function(o){return tu.get(o)}:Zd;function gu(o){for(var c=o.name+"",l=lo[c],p=dt.call(lo,c)?l.length:0;p--;){var b=l[p],w=b.func;if(w==null||w==o)return b.name}return c}function go(o){var c=dt.call(_,"placeholder")?_:o;return c.placeholder}function Oe(){var o=_.iteratee||Qd;return o=o===Qd?vy:o,arguments.length?o(arguments[0],arguments[1]):o}function yu(o,c){var l=o.__data__;return pk(c)?l[typeof c=="string"?"string":"hash"]:l.map}function Ld(o){for(var c=fn(o),l=c.length;l--;){var p=c[l],b=o[p];c[l]=[p,b,em(b)]}return c}function Is(o,c){var l=m0(o,c);return by(l)?l:t}function ak(o){var c=dt.call(o,_s),l=o[_s];try{o[_s]=t;var p=!0}catch{}var b=Gc.call(o);return p&&(c?o[_s]=l:delete o[_s]),b}var Kd=ud?function(o){return o==null?[]:(o=bt(o),Fi(ud(o),function(c){return ry.call(o,c)}))}:eh,Qy=ud?function(o){for(var c=[];o;)Ui(c,Kd(o)),o=Jc(o);return c}:eh,In=xn;(ld&&In(new ld(new ArrayBuffer(1)))!=g||Aa&&In(new Aa)!=pn||fd&&In(fd.resolve())!=Nc||uo&&In(new uo)!=An||Sa&&In(new Sa)!=Un)&&(In=function(o){var c=xn(o),l=c==rr?o.constructor:t,p=l?Es(l):"";if(p)switch(p){case V0:return g;case $0:return pn;case j0:return Nc;case q0:return An;case G0:return Un}return c});function ck(o,c,l){for(var p=-1,b=l.length;++p<b;){var w=l[p],P=w.size;switch(w.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=kn(c,o+P);break;case"takeRight":o=tn(o,c-P);break}}return{start:o,end:c}}function uk(o){var c=o.match(gS);return c?c[1].split(yS):[]}function Xy(o,c,l){c=ji(c,o);for(var p=-1,b=c.length,w=!1;++p<b;){var P=ni(c[p]);if(!(w=o!=null&&l(o,P)))break;o=o[P]}return w||++p!=b?w:(b=o==null?0:o.length,!!b&&Su(b)&&Ai(P,b)&&(Le(o)||Os(o)))}function lk(o){var c=o.length,l=new o.constructor(c);return c&&typeof o[0]=="string"&&dt.call(o,"index")&&(l.index=o.index,l.input=o.input),l}function Zy(o){return typeof o.constructor=="function"&&!xa(o)?fo(Jc(o)):{}}function fk(o,c,l){var p=o.constructor;switch(c){case v:return Td(o);case Wt:case wn:return new p(+o);case g:return H1(o,l);case y:case k:case L:case $:case Z:case Ke:case wt:case pt:case At:return Ly(o,l);case pn:return new p;case bs:case Sn:return new p(o);case Ni:return Y1(o);case An:return new p;case Di:return J1(o)}}function dk(o,c){var l=c.length;if(!l)return o;var p=l-1;return c[p]=(l>1?"& ":"")+c[p],c=c.join(l>2?", ":" "),o.replace(pS,`{
/* [wrapped with `+c+`] */
`)}function hk(o){return Le(o)||Os(o)||!!(iy&&o&&o[iy])}function Ai(o,c){var l=typeof o;return c=c??Ie,!!c&&(l=="number"||l!="symbol"&&IS.test(o))&&o>-1&&o%1==0&&o<c}function Mn(o,c,l){if(!Ct(l))return!1;var p=typeof c;return(p=="number"?Wn(l)&&Ai(c,l.length):p=="string"&&c in l)?Vr(l[c],o):!1}function Nd(o,c){if(Le(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||ar(o)?!0:lS.test(o)||!uS.test(o)||c!=null&&o in bt(c)}function pk(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Dd(o){var c=gu(o),l=_[c];if(typeof l!="function"||!(c in Ge.prototype))return!1;if(o===l)return!0;var p=Cd(l);return!!p&&o===p[0]}function gk(o){return!!ey&&ey in o}var yk=jc?Si:th;function xa(o){var c=o&&o.constructor,l=typeof c=="function"&&c.prototype||co;return o===l}function em(o){return o===o&&!Ct(o)}function tm(o,c){return function(l){return l==null?!1:l[o]===c&&(c!==t||o in bt(l))}}function mk(o){var c=wu(o,function(p){return l.size===h&&l.clear(),p}),l=c.cache;return c}function bk(o,c){var l=o[1],p=c[1],b=l|p,w=b<(R|C|N),P=p==N&&l==ae||p==N&&l==V&&o[7].length<=c[8]||p==(N|V)&&c[7].length<=c[8]&&l==ae;if(!(w||P))return o;p&R&&(o[2]=c[2],b|=l&R?0:Y);var B=c[3];if(B){var F=o[3];o[3]=F?Ny(F,B,c[4]):B,o[4]=F?zi(o[3],d):c[4]}return B=c[5],B&&(F=o[5],o[5]=F?Dy(F,B,c[6]):B,o[6]=F?zi(o[5],d):c[6]),B=c[7],B&&(o[7]=B),p&N&&(o[8]=o[8]==null?c[8]:kn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=b,o}function vk(o){var c=[];if(o!=null)for(var l in bt(o))c.push(l);return c}function _k(o){return Gc.call(o)}function nm(o,c,l){return c=tn(c===t?o.length-1:c,0),function(){for(var p=arguments,b=-1,w=tn(p.length-c,0),P=q(w);++b<w;)P[b]=p[c+b];b=-1;for(var B=q(c+1);++b<c;)B[b]=p[b];return B[c]=l(P),ir(o,this,B)}}function rm(o,c){return c.length<2?o:ks(o,Or(c,0,-1))}function wk(o,c){for(var l=o.length,p=kn(c.length,l),b=zn(o);p--;){var w=c[p];o[p]=Ai(w,l)?b[w]:t}return o}function Fd(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var im=om(Oy),Ma=K0||function(o,c){return gn.setTimeout(o,c)},Ud=om($1);function sm(o,c,l){var p=c+"";return Ud(o,dk(p,Ak(uk(p),l)))}function om(o){var c=0,l=0;return function(){var p=U0(),b=T-(p-l);if(l=p,b>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function mu(o,c){var l=-1,p=o.length,b=p-1;for(c=c===t?p:c;++l<c;){var w=Ad(l,b),P=o[w];o[w]=o[l],o[l]=P}return o.length=c,o}var am=mk(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(fS,function(l,p,b,w){c.push(b?w.replace(vS,"$1"):p||l)}),c});function ni(o){if(typeof o=="string"||ar(o))return o;var c=o+"";return c=="0"&&1/o==-ye?"-0":c}function Es(o){if(o!=null){try{return qc.call(o)}catch{}try{return o+""}catch{}}return""}function Ak(o,c){return Sr(ln,function(l){var p="_."+l[0];c&l[1]&&!zc(o,p)&&o.push(p)}),o.sort()}function cm(o){if(o instanceof Ge)return o.clone();var c=new Ir(o.__wrapped__,o.__chain__);return c.__actions__=zn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function Sk(o,c,l){(l?Mn(o,c,l):c===t)?c=1:c=tn(De(c),0);var p=o==null?0:o.length;if(!p||c<1)return[];for(var b=0,w=0,P=q(Zc(p/c));b<p;)P[w++]=Or(o,b,b+=c);return P}function kk(o){for(var c=-1,l=o==null?0:o.length,p=0,b=[];++c<l;){var w=o[c];w&&(b[p++]=w)}return b}function Ik(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),l=arguments[0],p=o;p--;)c[p-1]=arguments[p];return Ui(Le(l)?zn(l):[l],yn(c,1))}var Ek=Ve(function(o,c){return Vt(o)?Oa(o,yn(c,1,Vt,!0)):[]}),Ok=Ve(function(o,c){var l=Pr(c);return Vt(l)&&(l=t),Vt(o)?Oa(o,yn(c,1,Vt,!0),Oe(l,2)):[]}),Pk=Ve(function(o,c){var l=Pr(c);return Vt(l)&&(l=t),Vt(o)?Oa(o,yn(c,1,Vt,!0),t,l):[]});function Tk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),Or(o,c<0?0:c,p)):[]}function Rk(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Or(o,0,c<0?0:c)):[]}function Bk(o,c){return o&&o.length?uu(o,Oe(c,3),!0,!0):[]}function xk(o,c){return o&&o.length?uu(o,Oe(c,3),!0):[]}function Mk(o,c,l,p){var b=o==null?0:o.length;return b?(l&&typeof l!="number"&&Mn(o,c,l)&&(l=0,p=b),I1(o,c,l,p)):[]}function um(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=tn(p+b,0)),Wc(o,Oe(c,3),b)}function lm(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p-1;return l!==t&&(b=De(l),b=l<0?tn(p+b,0):kn(b,p-1)),Wc(o,Oe(c,3),b,!0)}function fm(o){var c=o==null?0:o.length;return c?yn(o,1):[]}function Ck(o){var c=o==null?0:o.length;return c?yn(o,ye):[]}function Lk(o,c){var l=o==null?0:o.length;return l?(c=c===t?1:De(c),yn(o,c)):[]}function Kk(o){for(var c=-1,l=o==null?0:o.length,p={};++c<l;){var b=o[c];p[b[0]]=b[1]}return p}function dm(o){return o&&o.length?o[0]:t}function Nk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=l==null?0:De(l);return b<0&&(b=tn(p+b,0)),io(o,c,b)}function Dk(o){var c=o==null?0:o.length;return c?Or(o,0,-1):[]}var Fk=Ve(function(o){var c=Tt(o,Od);return c.length&&c[0]===o[0]?md(c):[]}),Uk=Ve(function(o){var c=Pr(o),l=Tt(o,Od);return c===Pr(l)?c=t:l.pop(),l.length&&l[0]===o[0]?md(l,Oe(c,2)):[]}),zk=Ve(function(o){var c=Pr(o),l=Tt(o,Od);return c=typeof c=="function"?c:t,c&&l.pop(),l.length&&l[0]===o[0]?md(l,t,c):[]});function Wk(o,c){return o==null?"":D0.call(o,c)}function Pr(o){var c=o==null?0:o.length;return c?o[c-1]:t}function Vk(o,c,l){var p=o==null?0:o.length;if(!p)return-1;var b=p;return l!==t&&(b=De(l),b=b<0?tn(p+b,0):kn(b,p-1)),c===c?A0(o,c,b):Wc(o,qg,b,!0)}function $k(o,c){return o&&o.length?Sy(o,De(c)):t}var jk=Ve(hm);function hm(o,c){return o&&o.length&&c&&c.length?wd(o,c):o}function qk(o,c,l){return o&&o.length&&c&&c.length?wd(o,c,Oe(l,2)):o}function Gk(o,c,l){return o&&o.length&&c&&c.length?wd(o,c,t,l):o}var Hk=wi(function(o,c){var l=o==null?0:o.length,p=hd(o,c);return Ey(o,Tt(c,function(b){return Ai(b,l)?+b:b}).sort(Ky)),p});function Yk(o,c){var l=[];if(!(o&&o.length))return l;var p=-1,b=[],w=o.length;for(c=Oe(c,3);++p<w;){var P=o[p];c(P,p,o)&&(l.push(P),b.push(p))}return Ey(o,b),l}function zd(o){return o==null?o:W0.call(o)}function Jk(o,c,l){var p=o==null?0:o.length;return p?(l&&typeof l!="number"&&Mn(o,c,l)?(c=0,l=p):(c=c==null?0:De(c),l=l===t?p:De(l)),Or(o,c,l)):[]}function Qk(o,c){return cu(o,c)}function Xk(o,c,l){return kd(o,c,Oe(l,2))}function Zk(o,c){var l=o==null?0:o.length;if(l){var p=cu(o,c);if(p<l&&Vr(o[p],c))return p}return-1}function eI(o,c){return cu(o,c,!0)}function tI(o,c,l){return kd(o,c,Oe(l,2),!0)}function nI(o,c){var l=o==null?0:o.length;if(l){var p=cu(o,c,!0)-1;if(Vr(o[p],c))return p}return-1}function rI(o){return o&&o.length?Py(o):[]}function iI(o,c){return o&&o.length?Py(o,Oe(c,2)):[]}function sI(o){var c=o==null?0:o.length;return c?Or(o,1,c):[]}function oI(o,c,l){return o&&o.length?(c=l||c===t?1:De(c),Or(o,0,c<0?0:c)):[]}function aI(o,c,l){var p=o==null?0:o.length;return p?(c=l||c===t?1:De(c),c=p-c,Or(o,c<0?0:c,p)):[]}function cI(o,c){return o&&o.length?uu(o,Oe(c,3),!1,!0):[]}function uI(o,c){return o&&o.length?uu(o,Oe(c,3)):[]}var lI=Ve(function(o){return $i(yn(o,1,Vt,!0))}),fI=Ve(function(o){var c=Pr(o);return Vt(c)&&(c=t),$i(yn(o,1,Vt,!0),Oe(c,2))}),dI=Ve(function(o){var c=Pr(o);return c=typeof c=="function"?c:t,$i(yn(o,1,Vt,!0),t,c)});function hI(o){return o&&o.length?$i(o):[]}function pI(o,c){return o&&o.length?$i(o,Oe(c,2)):[]}function gI(o,c){return c=typeof c=="function"?c:t,o&&o.length?$i(o,t,c):[]}function Wd(o){if(!(o&&o.length))return[];var c=0;return o=Fi(o,function(l){if(Vt(l))return c=tn(l.length,c),!0}),sd(c,function(l){return Tt(o,nd(l))})}function pm(o,c){if(!(o&&o.length))return[];var l=Wd(o);return c==null?l:Tt(l,function(p){return ir(c,t,p)})}var yI=Ve(function(o,c){return Vt(o)?Oa(o,c):[]}),mI=Ve(function(o){return Ed(Fi(o,Vt))}),bI=Ve(function(o){var c=Pr(o);return Vt(c)&&(c=t),Ed(Fi(o,Vt),Oe(c,2))}),vI=Ve(function(o){var c=Pr(o);return c=typeof c=="function"?c:t,Ed(Fi(o,Vt),t,c)}),_I=Ve(Wd);function wI(o,c){return xy(o||[],c||[],Ea)}function AI(o,c){return xy(o||[],c||[],Ra)}var SI=Ve(function(o){var c=o.length,l=c>1?o[c-1]:t;return l=typeof l=="function"?(o.pop(),l):t,pm(o,l)});function gm(o){var c=_(o);return c.__chain__=!0,c}function kI(o,c){return c(o),o}function bu(o,c){return c(o)}var II=wi(function(o){var c=o.length,l=c?o[0]:0,p=this.__wrapped__,b=function(w){return hd(w,o)};return c>1||this.__actions__.length||!(p instanceof Ge)||!Ai(l)?this.thru(b):(p=p.slice(l,+l+(c?1:0)),p.__actions__.push({func:bu,args:[b],thisArg:t}),new Ir(p,this.__chain__).thru(function(w){return c&&!w.length&&w.push(t),w}))});function EI(){return gm(this)}function OI(){return new Ir(this.value(),this.__chain__)}function PI(){this.__values__===t&&(this.__values__=Tm(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function TI(){return this}function RI(o){for(var c,l=this;l instanceof ru;){var p=cm(l);p.__index__=0,p.__values__=t,c?b.__wrapped__=p:c=p;var b=p;l=l.__wrapped__}return b.__wrapped__=o,c}function BI(){var o=this.__wrapped__;if(o instanceof Ge){var c=o;return this.__actions__.length&&(c=new Ge(this)),c=c.reverse(),c.__actions__.push({func:bu,args:[zd],thisArg:t}),new Ir(c,this.__chain__)}return this.thru(zd)}function xI(){return By(this.__wrapped__,this.__actions__)}var MI=lu(function(o,c,l){dt.call(o,l)?++o[l]:vi(o,l,1)});function CI(o,c,l){var p=Le(o)?$g:k1;return l&&Mn(o,c,l)&&(c=t),p(o,Oe(c,3))}function LI(o,c){var l=Le(o)?Fi:py;return l(o,Oe(c,3))}var KI=Wy(um),NI=Wy(lm);function DI(o,c){return yn(vu(o,c),1)}function FI(o,c){return yn(vu(o,c),ye)}function UI(o,c,l){return l=l===t?1:De(l),yn(vu(o,c),l)}function ym(o,c){var l=Le(o)?Sr:Vi;return l(o,Oe(c,3))}function mm(o,c){var l=Le(o)?s0:hy;return l(o,Oe(c,3))}var zI=lu(function(o,c,l){dt.call(o,l)?o[l].push(c):vi(o,l,[c])});function WI(o,c,l,p){o=Wn(o)?o:mo(o),l=l&&!p?De(l):0;var b=o.length;return l<0&&(l=tn(b+l,0)),ku(o)?l<=b&&o.indexOf(c,l)>-1:!!b&&io(o,c,l)>-1}var VI=Ve(function(o,c,l){var p=-1,b=typeof c=="function",w=Wn(o)?q(o.length):[];return Vi(o,function(P){w[++p]=b?ir(c,P,l):Pa(P,c,l)}),w}),$I=lu(function(o,c,l){vi(o,l,c)});function vu(o,c){var l=Le(o)?Tt:_y;return l(o,Oe(c,3))}function jI(o,c,l,p){return o==null?[]:(Le(c)||(c=c==null?[]:[c]),l=p?t:l,Le(l)||(l=l==null?[]:[l]),ky(o,c,l))}var qI=lu(function(o,c,l){o[l?0:1].push(c)},function(){return[[],[]]});function GI(o,c,l){var p=Le(o)?ed:Hg,b=arguments.length<3;return p(o,Oe(c,4),l,b,Vi)}function HI(o,c,l){var p=Le(o)?o0:Hg,b=arguments.length<3;return p(o,Oe(c,4),l,b,hy)}function YI(o,c){var l=Le(o)?Fi:py;return l(o,Au(Oe(c,3)))}function JI(o){var c=Le(o)?uy:W1;return c(o)}function QI(o,c,l){(l?Mn(o,c,l):c===t)?c=1:c=De(c);var p=Le(o)?v1:V1;return p(o,c)}function XI(o){var c=Le(o)?_1:j1;return c(o)}function ZI(o){if(o==null)return 0;if(Wn(o))return ku(o)?oo(o):o.length;var c=In(o);return c==pn||c==An?o.size:vd(o).length}function eE(o,c,l){var p=Le(o)?td:q1;return l&&Mn(o,c,l)&&(c=t),p(o,Oe(c,3))}var tE=Ve(function(o,c){if(o==null)return[];var l=c.length;return l>1&&Mn(o,c[0],c[1])?c=[]:l>2&&Mn(c[0],c[1],c[2])&&(c=[c[0]]),ky(o,yn(c,1),[])}),_u=L0||function(){return gn.Date.now()};function nE(o,c){if(typeof c!="function")throw new kr(a);return o=De(o),function(){if(--o<1)return c.apply(this,arguments)}}function bm(o,c,l){return c=l?t:c,c=o&&c==null?o.length:c,_i(o,N,t,t,t,t,c)}function vm(o,c){var l;if(typeof c!="function")throw new kr(a);return o=De(o),function(){return--o>0&&(l=c.apply(this,arguments)),o<=1&&(c=t),l}}var Vd=Ve(function(o,c,l){var p=R;if(l.length){var b=zi(l,go(Vd));p|=de}return _i(o,p,c,l,b)}),_m=Ve(function(o,c,l){var p=R|C;if(l.length){var b=zi(l,go(_m));p|=de}return _i(c,p,o,l,b)});function wm(o,c,l){c=l?t:c;var p=_i(o,ae,t,t,t,t,t,c);return p.placeholder=wm.placeholder,p}function Am(o,c,l){c=l?t:c;var p=_i(o,oe,t,t,t,t,t,c);return p.placeholder=Am.placeholder,p}function Sm(o,c,l){var p,b,w,P,B,F,ne=0,re=!1,ce=!1,ge=!0;if(typeof o!="function")throw new kr(a);c=Tr(c)||0,Ct(l)&&(re=!!l.leading,ce="maxWait"in l,w=ce?tn(Tr(l.maxWait)||0,c):w,ge="trailing"in l?!!l.trailing:ge);function we($t){var $r=p,Ii=b;return p=b=t,ne=$t,P=o.apply(Ii,$r),P}function Te($t){return ne=$t,B=Ma(je,c),re?we($t):P}function Fe($t){var $r=$t-F,Ii=$t-ne,Wm=c-$r;return ce?kn(Wm,w-Ii):Wm}function Re($t){var $r=$t-F,Ii=$t-ne;return F===t||$r>=c||$r<0||ce&&Ii>=w}function je(){var $t=_u();if(Re($t))return He($t);B=Ma(je,Fe($t))}function He($t){return B=t,ge&&p?we($t):(p=b=t,P)}function cr(){B!==t&&My(B),ne=0,p=F=b=B=t}function Cn(){return B===t?P:He(_u())}function ur(){var $t=_u(),$r=Re($t);if(p=arguments,b=this,F=$t,$r){if(B===t)return Te(F);if(ce)return My(B),B=Ma(je,c),we(F)}return B===t&&(B=Ma(je,c)),P}return ur.cancel=cr,ur.flush=Cn,ur}var rE=Ve(function(o,c){return dy(o,1,c)}),iE=Ve(function(o,c,l){return dy(o,Tr(c)||0,l)});function sE(o){return _i(o,J)}function wu(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new kr(a);var l=function(){var p=arguments,b=c?c.apply(this,p):p[0],w=l.cache;if(w.has(b))return w.get(b);var P=o.apply(this,p);return l.cache=w.set(b,P)||w,P};return l.cache=new(wu.Cache||bi),l}wu.Cache=bi;function Au(o){if(typeof o!="function")throw new kr(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function oE(o){return vm(2,o)}var aE=G1(function(o,c){c=c.length==1&&Le(c[0])?Tt(c[0],sr(Oe())):Tt(yn(c,1),sr(Oe()));var l=c.length;return Ve(function(p){for(var b=-1,w=kn(p.length,l);++b<w;)p[b]=c[b].call(this,p[b]);return ir(o,this,p)})}),$d=Ve(function(o,c){var l=zi(c,go($d));return _i(o,de,t,c,l)}),km=Ve(function(o,c){var l=zi(c,go(km));return _i(o,E,t,c,l)}),cE=wi(function(o,c){return _i(o,V,t,t,t,c)});function uE(o,c){if(typeof o!="function")throw new kr(a);return c=c===t?c:De(c),Ve(o,c)}function lE(o,c){if(typeof o!="function")throw new kr(a);return c=c==null?0:tn(De(c),0),Ve(function(l){var p=l[c],b=qi(l,0,c);return p&&Ui(b,p),ir(o,this,b)})}function fE(o,c,l){var p=!0,b=!0;if(typeof o!="function")throw new kr(a);return Ct(l)&&(p="leading"in l?!!l.leading:p,b="trailing"in l?!!l.trailing:b),Sm(o,c,{leading:p,maxWait:c,trailing:b})}function dE(o){return bm(o,1)}function hE(o,c){return $d(Pd(c),o)}function pE(){if(!arguments.length)return[];var o=arguments[0];return Le(o)?o:[o]}function gE(o){return Er(o,O)}function yE(o,c){return c=typeof c=="function"?c:t,Er(o,O,c)}function mE(o){return Er(o,m|O)}function bE(o,c){return c=typeof c=="function"?c:t,Er(o,m|O,c)}function vE(o,c){return c==null||fy(o,c,fn(c))}function Vr(o,c){return o===c||o!==o&&c!==c}var _E=pu(yd),wE=pu(function(o,c){return o>=c}),Os=my(function(){return arguments}())?my:function(o){return Dt(o)&&dt.call(o,"callee")&&!ry.call(o,"callee")},Le=q.isArray,AE=Dg?sr(Dg):R1;function Wn(o){return o!=null&&Su(o.length)&&!Si(o)}function Vt(o){return Dt(o)&&Wn(o)}function SE(o){return o===!0||o===!1||Dt(o)&&xn(o)==Wt}var Gi=N0||th,kE=Fg?sr(Fg):B1;function IE(o){return Dt(o)&&o.nodeType===1&&!Ca(o)}function EE(o){if(o==null)return!0;if(Wn(o)&&(Le(o)||typeof o=="string"||typeof o.splice=="function"||Gi(o)||yo(o)||Os(o)))return!o.length;var c=In(o);if(c==pn||c==An)return!o.size;if(xa(o))return!vd(o).length;for(var l in o)if(dt.call(o,l))return!1;return!0}function OE(o,c){return Ta(o,c)}function PE(o,c,l){l=typeof l=="function"?l:t;var p=l?l(o,c):t;return p===t?Ta(o,c,t,l):!!p}function jd(o){if(!Dt(o))return!1;var c=xn(o);return c==wr||c==Zr||typeof o.message=="string"&&typeof o.name=="string"&&!Ca(o)}function TE(o){return typeof o=="number"&&sy(o)}function Si(o){if(!Ct(o))return!1;var c=xn(o);return c==nr||c==yi||c==_r||c==zf}function Im(o){return typeof o=="number"&&o==De(o)}function Su(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ie}function Ct(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Dt(o){return o!=null&&typeof o=="object"}var Em=Ug?sr(Ug):M1;function RE(o,c){return o===c||bd(o,c,Ld(c))}function BE(o,c,l){return l=typeof l=="function"?l:t,bd(o,c,Ld(c),l)}function xE(o){return Om(o)&&o!=+o}function ME(o){if(yk(o))throw new Me(s);return by(o)}function CE(o){return o===null}function LE(o){return o==null}function Om(o){return typeof o=="number"||Dt(o)&&xn(o)==bs}function Ca(o){if(!Dt(o)||xn(o)!=rr)return!1;var c=Jc(o);if(c===null)return!0;var l=dt.call(c,"constructor")&&c.constructor;return typeof l=="function"&&l instanceof l&&qc.call(l)==B0}var qd=zg?sr(zg):C1;function KE(o){return Im(o)&&o>=-Ie&&o<=Ie}var Pm=Wg?sr(Wg):L1;function ku(o){return typeof o=="string"||!Le(o)&&Dt(o)&&xn(o)==Sn}function ar(o){return typeof o=="symbol"||Dt(o)&&xn(o)==Di}var yo=Vg?sr(Vg):K1;function NE(o){return o===t}function DE(o){return Dt(o)&&In(o)==Un}function FE(o){return Dt(o)&&xn(o)==Vf}var UE=pu(_d),zE=pu(function(o,c){return o<=c});function Tm(o){if(!o)return[];if(Wn(o))return ku(o)?zr(o):zn(o);if(wa&&o[wa])return v0(o[wa]());var c=In(o),l=c==pn?ad:c==An?Vc:mo;return l(o)}function ki(o){if(!o)return o===0?o:0;if(o=Tr(o),o===ye||o===-ye){var c=o<0?-1:1;return c*qt}return o===o?o:0}function De(o){var c=ki(o),l=c%1;return c===c?l?c-l:c:0}function Rm(o){return o?Ss(De(o),0,_e):0}function Tr(o){if(typeof o=="number")return o;if(ar(o))return Gt;if(Ct(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Ct(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=Yg(o);var l=AS.test(o);return l||kS.test(o)?n0(o.slice(2),l?2:8):wS.test(o)?Gt:+o}function Bm(o){return ti(o,Vn(o))}function WE(o){return o?Ss(De(o),-Ie,Ie):o===0?o:0}function ct(o){return o==null?"":or(o)}var VE=ho(function(o,c){if(xa(c)||Wn(c)){ti(c,fn(c),o);return}for(var l in c)dt.call(c,l)&&Ea(o,l,c[l])}),xm=ho(function(o,c){ti(c,Vn(c),o)}),Iu=ho(function(o,c,l,p){ti(c,Vn(c),o,p)}),$E=ho(function(o,c,l,p){ti(c,fn(c),o,p)}),jE=wi(hd);function qE(o,c){var l=fo(o);return c==null?l:ly(l,c)}var GE=Ve(function(o,c){o=bt(o);var l=-1,p=c.length,b=p>2?c[2]:t;for(b&&Mn(c[0],c[1],b)&&(p=1);++l<p;)for(var w=c[l],P=Vn(w),B=-1,F=P.length;++B<F;){var ne=P[B],re=o[ne];(re===t||Vr(re,co[ne])&&!dt.call(o,ne))&&(o[ne]=w[ne])}return o}),HE=Ve(function(o){return o.push(t,Yy),ir(Mm,t,o)});function YE(o,c){return jg(o,Oe(c,3),ei)}function JE(o,c){return jg(o,Oe(c,3),gd)}function QE(o,c){return o==null?o:pd(o,Oe(c,3),Vn)}function XE(o,c){return o==null?o:gy(o,Oe(c,3),Vn)}function ZE(o,c){return o&&ei(o,Oe(c,3))}function eO(o,c){return o&&gd(o,Oe(c,3))}function tO(o){return o==null?[]:ou(o,fn(o))}function nO(o){return o==null?[]:ou(o,Vn(o))}function Gd(o,c,l){var p=o==null?t:ks(o,c);return p===t?l:p}function rO(o,c){return o!=null&&Xy(o,c,E1)}function Hd(o,c){return o!=null&&Xy(o,c,O1)}var iO=$y(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Gc.call(c)),o[c]=l},Jd($n)),sO=$y(function(o,c,l){c!=null&&typeof c.toString!="function"&&(c=Gc.call(c)),dt.call(o,c)?o[c].push(l):o[c]=[l]},Oe),oO=Ve(Pa);function fn(o){return Wn(o)?cy(o):vd(o)}function Vn(o){return Wn(o)?cy(o,!0):N1(o)}function aO(o,c){var l={};return c=Oe(c,3),ei(o,function(p,b,w){vi(l,c(p,b,w),p)}),l}function cO(o,c){var l={};return c=Oe(c,3),ei(o,function(p,b,w){vi(l,b,c(p,b,w))}),l}var uO=ho(function(o,c,l){au(o,c,l)}),Mm=ho(function(o,c,l,p){au(o,c,l,p)}),lO=wi(function(o,c){var l={};if(o==null)return l;var p=!1;c=Tt(c,function(w){return w=ji(w,o),p||(p=w.length>1),w}),ti(o,Md(o),l),p&&(l=Er(l,m|I|O,ik));for(var b=c.length;b--;)Id(l,c[b]);return l});function fO(o,c){return Cm(o,Au(Oe(c)))}var dO=wi(function(o,c){return o==null?{}:F1(o,c)});function Cm(o,c){if(o==null)return{};var l=Tt(Md(o),function(p){return[p]});return c=Oe(c),Iy(o,l,function(p,b){return c(p,b[0])})}function hO(o,c,l){c=ji(c,o);var p=-1,b=c.length;for(b||(b=1,o=t);++p<b;){var w=o==null?t:o[ni(c[p])];w===t&&(p=b,w=l),o=Si(w)?w.call(o):w}return o}function pO(o,c,l){return o==null?o:Ra(o,c,l)}function gO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Ra(o,c,l,p)}var Lm=Gy(fn),Km=Gy(Vn);function yO(o,c,l){var p=Le(o),b=p||Gi(o)||yo(o);if(c=Oe(c,4),l==null){var w=o&&o.constructor;b?l=p?new w:[]:Ct(o)?l=Si(w)?fo(Jc(o)):{}:l={}}return(b?Sr:ei)(o,function(P,B,F){return c(l,P,B,F)}),l}function mO(o,c){return o==null?!0:Id(o,c)}function bO(o,c,l){return o==null?o:Ry(o,c,Pd(l))}function vO(o,c,l,p){return p=typeof p=="function"?p:t,o==null?o:Ry(o,c,Pd(l),p)}function mo(o){return o==null?[]:od(o,fn(o))}function _O(o){return o==null?[]:od(o,Vn(o))}function wO(o,c,l){return l===t&&(l=c,c=t),l!==t&&(l=Tr(l),l=l===l?l:0),c!==t&&(c=Tr(c),c=c===c?c:0),Ss(Tr(o),c,l)}function AO(o,c,l){return c=ki(c),l===t?(l=c,c=0):l=ki(l),o=Tr(o),P1(o,c,l)}function SO(o,c,l){if(l&&typeof l!="boolean"&&Mn(o,c,l)&&(c=l=t),l===t&&(typeof c=="boolean"?(l=c,c=t):typeof o=="boolean"&&(l=o,o=t)),o===t&&c===t?(o=0,c=1):(o=ki(o),c===t?(c=o,o=0):c=ki(c)),o>c){var p=o;o=c,c=p}if(l||o%1||c%1){var b=oy();return kn(o+b*(c-o+t0("1e-"+((b+"").length-1))),c)}return Ad(o,c)}var kO=po(function(o,c,l){return c=c.toLowerCase(),o+(l?Nm(c):c)});function Nm(o){return Yd(ct(o).toLowerCase())}function Dm(o){return o=ct(o),o&&o.replace(ES,p0).replace(jS,"")}function IO(o,c,l){o=ct(o),c=or(c);var p=o.length;l=l===t?p:Ss(De(l),0,p);var b=l;return l-=c.length,l>=0&&o.slice(l,b)==c}function EO(o){return o=ct(o),o&&oS.test(o)?o.replace(gg,g0):o}function OO(o){return o=ct(o),o&&dS.test(o)?o.replace($f,"\\$&"):o}var PO=po(function(o,c,l){return o+(l?"-":"")+c.toLowerCase()}),TO=po(function(o,c,l){return o+(l?" ":"")+c.toLowerCase()}),RO=zy("toLowerCase");function BO(o,c,l){o=ct(o),c=De(c);var p=c?oo(o):0;if(!c||p>=c)return o;var b=(c-p)/2;return hu(eu(b),l)+o+hu(Zc(b),l)}function xO(o,c,l){o=ct(o),c=De(c);var p=c?oo(o):0;return c&&p<c?o+hu(c-p,l):o}function MO(o,c,l){o=ct(o),c=De(c);var p=c?oo(o):0;return c&&p<c?hu(c-p,l)+o:o}function CO(o,c,l){return l||c==null?c=0:c&&(c=+c),z0(ct(o).replace(jf,""),c||0)}function LO(o,c,l){return(l?Mn(o,c,l):c===t)?c=1:c=De(c),Sd(ct(o),c)}function KO(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var NO=po(function(o,c,l){return o+(l?"_":"")+c.toLowerCase()});function DO(o,c,l){return l&&typeof l!="number"&&Mn(o,c,l)&&(c=l=t),l=l===t?_e:l>>>0,l?(o=ct(o),o&&(typeof c=="string"||c!=null&&!qd(c))&&(c=or(c),!c&&so(o))?qi(zr(o),0,l):o.split(c,l)):[]}var FO=po(function(o,c,l){return o+(l?" ":"")+Yd(c)});function UO(o,c,l){return o=ct(o),l=l==null?0:Ss(De(l),0,o.length),c=or(c),o.slice(l,l+c.length)==c}function zO(o,c,l){var p=_.templateSettings;l&&Mn(o,c,l)&&(c=t),o=ct(o),c=Iu({},c,p,Hy);var b=Iu({},c.imports,p.imports,Hy),w=fn(b),P=od(b,w),B,F,ne=0,re=c.interpolate||Dc,ce="__p += '",ge=cd((c.escape||Dc).source+"|"+re.source+"|"+(re===yg?_S:Dc).source+"|"+(c.evaluate||Dc).source+"|$","g"),we="//# sourceURL="+(dt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++JS+"]")+`
`;o.replace(ge,function(Re,je,He,cr,Cn,ur){return He||(He=cr),ce+=o.slice(ne,ur).replace(OS,y0),je&&(B=!0,ce+=`' +
__e(`+je+`) +
'`),Cn&&(F=!0,ce+=`';
`+Cn+`;
__p += '`),He&&(ce+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),ne=ur+Re.length,Re}),ce+=`';
`;var Te=dt.call(c,"variable")&&c.variable;if(!Te)ce=`with (obj) {
`+ce+`
}
`;else if(bS.test(Te))throw new Me(u);ce=(F?ce.replace(ft,""):ce).replace(rS,"$1").replace(iS,"$1;"),ce="function("+(Te||"obj")+`) {
`+(Te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(F?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Fe=Um(function(){return rt(w,we+"return "+ce).apply(t,P)});if(Fe.source=ce,jd(Fe))throw Fe;return Fe}function WO(o){return ct(o).toLowerCase()}function VO(o){return ct(o).toUpperCase()}function $O(o,c,l){if(o=ct(o),o&&(l||c===t))return Yg(o);if(!o||!(c=or(c)))return o;var p=zr(o),b=zr(c),w=Jg(p,b),P=Qg(p,b)+1;return qi(p,w,P).join("")}function jO(o,c,l){if(o=ct(o),o&&(l||c===t))return o.slice(0,Zg(o)+1);if(!o||!(c=or(c)))return o;var p=zr(o),b=Qg(p,zr(c))+1;return qi(p,0,b).join("")}function qO(o,c,l){if(o=ct(o),o&&(l||c===t))return o.replace(jf,"");if(!o||!(c=or(c)))return o;var p=zr(o),b=Jg(p,zr(c));return qi(p,b).join("")}function GO(o,c){var l=K,p=j;if(Ct(c)){var b="separator"in c?c.separator:b;l="length"in c?De(c.length):l,p="omission"in c?or(c.omission):p}o=ct(o);var w=o.length;if(so(o)){var P=zr(o);w=P.length}if(l>=w)return o;var B=l-oo(p);if(B<1)return p;var F=P?qi(P,0,B).join(""):o.slice(0,B);if(b===t)return F+p;if(P&&(B+=F.length-B),qd(b)){if(o.slice(B).search(b)){var ne,re=F;for(b.global||(b=cd(b.source,ct(mg.exec(b))+"g")),b.lastIndex=0;ne=b.exec(re);)var ce=ne.index;F=F.slice(0,ce===t?B:ce)}}else if(o.indexOf(or(b),B)!=B){var ge=F.lastIndexOf(b);ge>-1&&(F=F.slice(0,ge))}return F+p}function HO(o){return o=ct(o),o&&sS.test(o)?o.replace(pg,S0):o}var YO=po(function(o,c,l){return o+(l?" ":"")+c.toUpperCase()}),Yd=zy("toUpperCase");function Fm(o,c,l){return o=ct(o),c=l?t:c,c===t?b0(o)?E0(o):u0(o):o.match(c)||[]}var Um=Ve(function(o,c){try{return ir(o,t,c)}catch(l){return jd(l)?l:new Me(l)}}),JO=wi(function(o,c){return Sr(c,function(l){l=ni(l),vi(o,l,Vd(o[l],o))}),o});function QO(o){var c=o==null?0:o.length,l=Oe();return o=c?Tt(o,function(p){if(typeof p[1]!="function")throw new kr(a);return[l(p[0]),p[1]]}):[],Ve(function(p){for(var b=-1;++b<c;){var w=o[b];if(ir(w[0],this,p))return ir(w[1],this,p)}})}function XO(o){return S1(Er(o,m))}function Jd(o){return function(){return o}}function ZO(o,c){return o==null||o!==o?c:o}var eP=Vy(),tP=Vy(!0);function $n(o){return o}function Qd(o){return vy(typeof o=="function"?o:Er(o,m))}function nP(o){return wy(Er(o,m))}function rP(o,c){return Ay(o,Er(c,m))}var iP=Ve(function(o,c){return function(l){return Pa(l,o,c)}}),sP=Ve(function(o,c){return function(l){return Pa(o,l,c)}});function Xd(o,c,l){var p=fn(c),b=ou(c,p);l==null&&!(Ct(c)&&(b.length||!p.length))&&(l=c,c=o,o=this,b=ou(c,fn(c)));var w=!(Ct(l)&&"chain"in l)||!!l.chain,P=Si(o);return Sr(b,function(B){var F=c[B];o[B]=F,P&&(o.prototype[B]=function(){var ne=this.__chain__;if(w||ne){var re=o(this.__wrapped__),ce=re.__actions__=zn(this.__actions__);return ce.push({func:F,args:arguments,thisArg:o}),re.__chain__=ne,re}return F.apply(o,Ui([this.value()],arguments))})}),o}function oP(){return gn._===this&&(gn._=x0),this}function Zd(){}function aP(o){return o=De(o),Ve(function(c){return Sy(c,o)})}var cP=Rd(Tt),uP=Rd($g),lP=Rd(td);function zm(o){return Nd(o)?nd(ni(o)):U1(o)}function fP(o){return function(c){return o==null?t:ks(o,c)}}var dP=jy(),hP=jy(!0);function eh(){return[]}function th(){return!1}function pP(){return{}}function gP(){return""}function yP(){return!0}function mP(o,c){if(o=De(o),o<1||o>Ie)return[];var l=_e,p=kn(o,_e);c=Oe(c),o-=_e;for(var b=sd(p,c);++l<o;)c(l);return b}function bP(o){return Le(o)?Tt(o,ni):ar(o)?[o]:zn(am(ct(o)))}function vP(o){var c=++R0;return ct(o)+c}var _P=du(function(o,c){return o+c},0),wP=Bd("ceil"),AP=du(function(o,c){return o/c},1),SP=Bd("floor");function kP(o){return o&&o.length?su(o,$n,yd):t}function IP(o,c){return o&&o.length?su(o,Oe(c,2),yd):t}function EP(o){return Gg(o,$n)}function OP(o,c){return Gg(o,Oe(c,2))}function PP(o){return o&&o.length?su(o,$n,_d):t}function TP(o,c){return o&&o.length?su(o,Oe(c,2),_d):t}var RP=du(function(o,c){return o*c},1),BP=Bd("round"),xP=du(function(o,c){return o-c},0);function MP(o){return o&&o.length?id(o,$n):0}function CP(o,c){return o&&o.length?id(o,Oe(c,2)):0}return _.after=nE,_.ary=bm,_.assign=VE,_.assignIn=xm,_.assignInWith=Iu,_.assignWith=$E,_.at=jE,_.before=vm,_.bind=Vd,_.bindAll=JO,_.bindKey=_m,_.castArray=pE,_.chain=gm,_.chunk=Sk,_.compact=kk,_.concat=Ik,_.cond=QO,_.conforms=XO,_.constant=Jd,_.countBy=MI,_.create=qE,_.curry=wm,_.curryRight=Am,_.debounce=Sm,_.defaults=GE,_.defaultsDeep=HE,_.defer=rE,_.delay=iE,_.difference=Ek,_.differenceBy=Ok,_.differenceWith=Pk,_.drop=Tk,_.dropRight=Rk,_.dropRightWhile=Bk,_.dropWhile=xk,_.fill=Mk,_.filter=LI,_.flatMap=DI,_.flatMapDeep=FI,_.flatMapDepth=UI,_.flatten=fm,_.flattenDeep=Ck,_.flattenDepth=Lk,_.flip=sE,_.flow=eP,_.flowRight=tP,_.fromPairs=Kk,_.functions=tO,_.functionsIn=nO,_.groupBy=zI,_.initial=Dk,_.intersection=Fk,_.intersectionBy=Uk,_.intersectionWith=zk,_.invert=iO,_.invertBy=sO,_.invokeMap=VI,_.iteratee=Qd,_.keyBy=$I,_.keys=fn,_.keysIn=Vn,_.map=vu,_.mapKeys=aO,_.mapValues=cO,_.matches=nP,_.matchesProperty=rP,_.memoize=wu,_.merge=uO,_.mergeWith=Mm,_.method=iP,_.methodOf=sP,_.mixin=Xd,_.negate=Au,_.nthArg=aP,_.omit=lO,_.omitBy=fO,_.once=oE,_.orderBy=jI,_.over=cP,_.overArgs=aE,_.overEvery=uP,_.overSome=lP,_.partial=$d,_.partialRight=km,_.partition=qI,_.pick=dO,_.pickBy=Cm,_.property=zm,_.propertyOf=fP,_.pull=jk,_.pullAll=hm,_.pullAllBy=qk,_.pullAllWith=Gk,_.pullAt=Hk,_.range=dP,_.rangeRight=hP,_.rearg=cE,_.reject=YI,_.remove=Yk,_.rest=uE,_.reverse=zd,_.sampleSize=QI,_.set=pO,_.setWith=gO,_.shuffle=XI,_.slice=Jk,_.sortBy=tE,_.sortedUniq=rI,_.sortedUniqBy=iI,_.split=DO,_.spread=lE,_.tail=sI,_.take=oI,_.takeRight=aI,_.takeRightWhile=cI,_.takeWhile=uI,_.tap=kI,_.throttle=fE,_.thru=bu,_.toArray=Tm,_.toPairs=Lm,_.toPairsIn=Km,_.toPath=bP,_.toPlainObject=Bm,_.transform=yO,_.unary=dE,_.union=lI,_.unionBy=fI,_.unionWith=dI,_.uniq=hI,_.uniqBy=pI,_.uniqWith=gI,_.unset=mO,_.unzip=Wd,_.unzipWith=pm,_.update=bO,_.updateWith=vO,_.values=mo,_.valuesIn=_O,_.without=yI,_.words=Fm,_.wrap=hE,_.xor=mI,_.xorBy=bI,_.xorWith=vI,_.zip=_I,_.zipObject=wI,_.zipObjectDeep=AI,_.zipWith=SI,_.entries=Lm,_.entriesIn=Km,_.extend=xm,_.extendWith=Iu,Xd(_,_),_.add=_P,_.attempt=Um,_.camelCase=kO,_.capitalize=Nm,_.ceil=wP,_.clamp=wO,_.clone=gE,_.cloneDeep=mE,_.cloneDeepWith=bE,_.cloneWith=yE,_.conformsTo=vE,_.deburr=Dm,_.defaultTo=ZO,_.divide=AP,_.endsWith=IO,_.eq=Vr,_.escape=EO,_.escapeRegExp=OO,_.every=CI,_.find=KI,_.findIndex=um,_.findKey=YE,_.findLast=NI,_.findLastIndex=lm,_.findLastKey=JE,_.floor=SP,_.forEach=ym,_.forEachRight=mm,_.forIn=QE,_.forInRight=XE,_.forOwn=ZE,_.forOwnRight=eO,_.get=Gd,_.gt=_E,_.gte=wE,_.has=rO,_.hasIn=Hd,_.head=dm,_.identity=$n,_.includes=WI,_.indexOf=Nk,_.inRange=AO,_.invoke=oO,_.isArguments=Os,_.isArray=Le,_.isArrayBuffer=AE,_.isArrayLike=Wn,_.isArrayLikeObject=Vt,_.isBoolean=SE,_.isBuffer=Gi,_.isDate=kE,_.isElement=IE,_.isEmpty=EE,_.isEqual=OE,_.isEqualWith=PE,_.isError=jd,_.isFinite=TE,_.isFunction=Si,_.isInteger=Im,_.isLength=Su,_.isMap=Em,_.isMatch=RE,_.isMatchWith=BE,_.isNaN=xE,_.isNative=ME,_.isNil=LE,_.isNull=CE,_.isNumber=Om,_.isObject=Ct,_.isObjectLike=Dt,_.isPlainObject=Ca,_.isRegExp=qd,_.isSafeInteger=KE,_.isSet=Pm,_.isString=ku,_.isSymbol=ar,_.isTypedArray=yo,_.isUndefined=NE,_.isWeakMap=DE,_.isWeakSet=FE,_.join=Wk,_.kebabCase=PO,_.last=Pr,_.lastIndexOf=Vk,_.lowerCase=TO,_.lowerFirst=RO,_.lt=UE,_.lte=zE,_.max=kP,_.maxBy=IP,_.mean=EP,_.meanBy=OP,_.min=PP,_.minBy=TP,_.stubArray=eh,_.stubFalse=th,_.stubObject=pP,_.stubString=gP,_.stubTrue=yP,_.multiply=RP,_.nth=$k,_.noConflict=oP,_.noop=Zd,_.now=_u,_.pad=BO,_.padEnd=xO,_.padStart=MO,_.parseInt=CO,_.random=SO,_.reduce=GI,_.reduceRight=HI,_.repeat=LO,_.replace=KO,_.result=hO,_.round=BP,_.runInContext=D,_.sample=JI,_.size=ZI,_.snakeCase=NO,_.some=eE,_.sortedIndex=Qk,_.sortedIndexBy=Xk,_.sortedIndexOf=Zk,_.sortedLastIndex=eI,_.sortedLastIndexBy=tI,_.sortedLastIndexOf=nI,_.startCase=FO,_.startsWith=UO,_.subtract=xP,_.sum=MP,_.sumBy=CP,_.template=zO,_.times=mP,_.toFinite=ki,_.toInteger=De,_.toLength=Rm,_.toLower=WO,_.toNumber=Tr,_.toSafeInteger=WE,_.toString=ct,_.toUpper=VO,_.trim=$O,_.trimEnd=jO,_.trimStart=qO,_.truncate=GO,_.unescape=HO,_.uniqueId=vP,_.upperCase=YO,_.upperFirst=Yd,_.each=ym,_.eachRight=mm,_.first=dm,Xd(_,function(){var o={};return ei(_,function(c,l){dt.call(_.prototype,l)||(o[l]=c)}),o}(),{chain:!1}),_.VERSION=n,Sr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){_[o].placeholder=_}),Sr(["drop","take"],function(o,c){Ge.prototype[o]=function(l){l=l===t?1:tn(De(l),0);var p=this.__filtered__&&!c?new Ge(this):this.clone();return p.__filtered__?p.__takeCount__=kn(l,p.__takeCount__):p.__views__.push({size:kn(l,_e),type:o+(p.__dir__<0?"Right":"")}),p},Ge.prototype[o+"Right"]=function(l){return this.reverse()[o](l).reverse()}}),Sr(["filter","map","takeWhile"],function(o,c){var l=c+1,p=l==W||l==Be;Ge.prototype[o]=function(b){var w=this.clone();return w.__iteratees__.push({iteratee:Oe(b,3),type:l}),w.__filtered__=w.__filtered__||p,w}}),Sr(["head","last"],function(o,c){var l="take"+(c?"Right":"");Ge.prototype[o]=function(){return this[l](1).value()[0]}}),Sr(["initial","tail"],function(o,c){var l="drop"+(c?"":"Right");Ge.prototype[o]=function(){return this.__filtered__?new Ge(this):this[l](1)}}),Ge.prototype.compact=function(){return this.filter($n)},Ge.prototype.find=function(o){return this.filter(o).head()},Ge.prototype.findLast=function(o){return this.reverse().find(o)},Ge.prototype.invokeMap=Ve(function(o,c){return typeof o=="function"?new Ge(this):this.map(function(l){return Pa(l,o,c)})}),Ge.prototype.reject=function(o){return this.filter(Au(Oe(o)))},Ge.prototype.slice=function(o,c){o=De(o);var l=this;return l.__filtered__&&(o>0||c<0)?new Ge(l):(o<0?l=l.takeRight(-o):o&&(l=l.drop(o)),c!==t&&(c=De(c),l=c<0?l.dropRight(-c):l.take(c-o)),l)},Ge.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ge.prototype.toArray=function(){return this.take(_e)},ei(Ge.prototype,function(o,c){var l=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),b=_[p?"take"+(c=="last"?"Right":""):c],w=p||/^find/.test(c);!b||(_.prototype[c]=function(){var P=this.__wrapped__,B=p?[1]:arguments,F=P instanceof Ge,ne=B[0],re=F||Le(P),ce=function(je){var He=b.apply(_,Ui([je],B));return p&&ge?He[0]:He};re&&l&&typeof ne=="function"&&ne.length!=1&&(F=re=!1);var ge=this.__chain__,we=!!this.__actions__.length,Te=w&&!ge,Fe=F&&!we;if(!w&&re){P=Fe?P:new Ge(this);var Re=o.apply(P,B);return Re.__actions__.push({func:bu,args:[ce],thisArg:t}),new Ir(Re,ge)}return Te&&Fe?o.apply(this,B):(Re=this.thru(ce),Te?p?Re.value()[0]:Re.value():Re)})}),Sr(["pop","push","shift","sort","splice","unshift"],function(o){var c=$c[o],l=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",p=/^(?:pop|shift)$/.test(o);_.prototype[o]=function(){var b=arguments;if(p&&!this.__chain__){var w=this.value();return c.apply(Le(w)?w:[],b)}return this[l](function(P){return c.apply(Le(P)?P:[],b)})}}),ei(Ge.prototype,function(o,c){var l=_[c];if(l){var p=l.name+"";dt.call(lo,p)||(lo[p]=[]),lo[p].push({name:c,func:l})}}),lo[fu(t,C).name]=[{name:"wrapper",func:t}],Ge.prototype.clone=H0,Ge.prototype.reverse=Y0,Ge.prototype.value=J0,_.prototype.at=II,_.prototype.chain=EI,_.prototype.commit=OI,_.prototype.next=PI,_.prototype.plant=RI,_.prototype.reverse=BI,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=xI,_.prototype.first=_.prototype.head,wa&&(_.prototype[wa]=TI),_},ao=O0();vs?((vs.exports=ao)._=ao,Qf._=ao):gn._=ao}).call(z)})(Ol,Ol.exports);var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.OrderCacheService=void 0;const nv=Ol.exports,ri=MA,rv=af,Uu=ma;class uD{constructor(){this.endTriggered=!1,this.observableData={buyOrdersCache:new Map,sellOrdersCache:new Map},this.orderChanges=(0,ri.observable)([]),this.observableData=(0,ri.makeAutoObservable)(this.observableData),(0,ri.makeObservable)(this,{buyOrdersCache:ri.computed,sellOrdersCache:ri.computed,allOrdersCache:ri.computed})}get buyOrdersCache(){return this.observableData.buyOrdersCache}get sellOrdersCache(){return this.observableData.sellOrdersCache}get allOrdersCache(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),this.sellOrdersCache.forEach(t=>{t.forEach((n,i)=>{e.set(i,n)})}),e}get mints(){return(0,nv.union)(Array.from(this.buyOrdersCache.keys()),Array.from(this.sellOrdersCache.keys()))}get orders(){return this.allOrdersCache}get buyOrders(){const e=new Map;return this.buyOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}get sellOrders(){const e=new Map;return this.sellOrdersCache.forEach(t=>{t.forEach(n=>{e.set(n.id,n)})}),e}clearOrders(){const{allOrdersCache:e}=this;e.forEach(t=>{(0,ri.runInAction)(()=>{this.orderChanges.push({eventType:Uu.GmEventType.orderRemoved,order:t})})}),this.buyOrdersCache.clear(),this.sellOrdersCache.clear()}getAllOrdersCache(){return this.allOrdersCache}getOrderCacheByType(e){return e===rv.OrderSide.Buy?this.getBuyOrderCache():this.getSellOrderCache()}getBuyOrderCache(){return new Map(this.buyOrdersCache)}getSellOrderCache(){return new Map(this.sellOrdersCache)}getOrderById(e){return this.allOrdersCache.get(e)}addOrder(e){const t=this.getOrdersForType(e.orderType);t.get(e.orderMint)||t.set(e.orderMint,new Map);const n=t.get(e.orderMint),i=n.get(e.id);return i&&i.slotContext>e.slotContext?i:(n.set(e.id,e),(0,ri.runInAction)(()=>{this.orderChanges.push({eventType:Uu.GmEventType.orderAdded,order:e})}),e)}updateOrder(e){const n=this.getOrdersForType(e.orderType).get(e.orderMint),i=n.get(e.id);if(!!i){if(i.orderQtyRemaining!==e.orderQtyRemaining&&e.slotContext>i.slotContext){const s=(0,nv.clone)(i);s.orderQtyRemaining=e.orderQtyRemaining,n.set(e.id,s),(0,ri.runInAction)(()=>{this.orderChanges.push({eventType:Uu.GmEventType.orderModified,order:e})})}return e}}cancelOrder(e){return this.getOrdersForType(e.orderType).get(e.orderMint).delete(e.id)?((0,ri.runInAction)(()=>{this.orderChanges.push({eventType:Uu.GmEventType.orderRemoved,order:e})}),!0):!1}getOrdersForType(e){return e===rv.OrderSide.Buy?this.buyOrdersCache:this.sellOrdersCache}}Sf.OrderCacheService=uD;var ba={},kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.createTransactionFromInstructions=void 0;const lD=Li,fD=r=>{const e=new lD.Transaction;return e.add(...r),e};kf.createTransactionFromInstructions=fD;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.TEN_THOUSAND=sa.ONE_MILLION=void 0;sa.ONE_MILLION=1e6;sa.TEN_THOUSAND=1e4;var jn=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ba,"__esModule",{value:!0});ba.GmClientService=void 0;const Yi=Li,zu=Hp,Ei=fs,Eh=kf,iv=Fr,Ao=af,sv=sa,dD=tr,hD=Bl;class pD{constructor(){this.currencyInfo=[]}getRegisteredCurrencies(e,t,n=!1){var i;return jn(this,void 0,void 0,function*(){if(((i=this.currencyInfo)===null||i===void 0?void 0:i.length)&&!n)return this.currencyInfo;const s=[],a=yield(0,Ei.getAllRegisteredCurrencies)(e,t);for(const u of a){const{mint:f,royalty:h,saVault:d}=u,m=yield e.getTokenSupply(f,"recent"),{decimals:I}=m.value;s.push({decimals:I,mint:f.toString(),royaltyPercentageAsDecimal:h.toNumber()/sv.ONE_MILLION,saVault:d.toString()})}return this.currencyInfo=s,this.currencyInfo})}getAllOpenOrders(e,t){return jn(this,void 0,void 0,function*(){const n=yield(0,Ei.getAllOpenOrders)(e,t),i=yield e.getSlot();return this.accountItemsToOrders(e,t,n,i)})}getOpenOrdersForPlayer(e,t,n){return jn(this,void 0,void 0,function*(){const i=yield(0,Ei.getOpenOrdersForPlayer)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForCurrency(e,t,n){return jn(this,void 0,void 0,function*(){const i=yield(0,Ei.getOpenOrdersForCurrency)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForAsset(e,t,n){return jn(this,void 0,void 0,function*(){const i=yield(0,Ei.getOpenOrdersForAsset)(e,t,n),s=yield e.getSlot();return this.accountItemsToOrders(e,n,i,s)})}getOpenOrdersForPlayerAndCurrency(e,t,n,i){return jn(this,void 0,void 0,function*(){const s=yield(0,Ei.getOpenOrdersForPlayerAndCurrency)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrdersForPlayerAndAsset(e,t,n,i){return jn(this,void 0,void 0,function*(){const s=yield(0,Ei.getOpenOrdersForPlayerAndAsset)(e,t,n,i),a=yield e.getSlot();return this.accountItemsToOrders(e,i,s,a)})}getOpenOrder(e,t,n){return jn(this,void 0,void 0,function*(){const i=yield(0,Ei.getSingleOrder)(e,t,n),s={publicKey:t,account:i},a=yield e.getSlot(),[u]=yield this.accountItemsToOrders(e,n,[s],a);return u})}getInitializeOrderTransaction(e,t,n,i,s,a,u,f){return jn(this,void 0,void 0,function*(){let h=zu.createInitializeSellOrderInstruction,d=n,m=i;f===Ao.OrderSide.Buy&&(h=zu.createInitializeBuyOrderInstruction,d=i,m=n);const I=yield(0,iv.getAssociatedTokenAddress)(t,d),{ixSet:O}=yield h({connection:e,depositMint:d,initializerDepositTokenAccount:I,initializerMainAccount:t,originationQty:s,price:a,programId:u,receiveMint:m}),{signers:M,instructions:S}=O;return{transaction:(0,Eh.createTransactionFromInstructions)(S),signers:M}})}getBnPriceForCurrency(e,t,n,i){return jn(this,void 0,void 0,function*(){const s=yield this.getRegisteredCurrencies(e,i),{decimals:a}=s.find(u=>u.mint.toString()===n.toString());return(0,dD.convertDecimalPriceToBn)(t,a)})}getCancelOrderTransaction(e,t,n,i){return jn(this,void 0,void 0,function*(){const{instructions:s,signers:a}=yield(0,zu.createCancelOrderInstruction)({connection:e,orderAccount:t,orderInitializer:n,programId:i});return{transaction:(0,Eh.createTransactionFromInstructions)(s),signers:a}})}getCreateExchangeTransaction(e,t,n,i,s,a=new Yi.PublicKey("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),u=new Yi.PublicKey("J5GhV1WKcEU98c1kZt36ixjaErrrPNWbZhg3JQDg114E")){return jn(this,void 0,void 0,function*(){const f=new Yi.PublicKey(t.id),h=new Yi.PublicKey(t.orderMint),d=new Yi.PublicKey(t.currencyMint),m=new Yi.PublicKey(t.owner),I=t.orderType===Ao.OrderSide.Buy?n:new Yi.PublicKey(t.owner),O=yield(0,iv.getAssociatedTokenAddress)(n,t.orderType===Ao.OrderSide.Buy?h:d),M=yield this.getRegisteredCurrencies(e,s),{saVault:S}=M.find(oe=>oe.mint===t.currencyMint),[R]=yield(0,hD.getStakingAccount)(a,I,u),{instructions:C,signers:Y}=yield(0,zu.createExchangeInstruction)({connection:e,orderAccount:f,purchaseQty:i,orderTaker:n,orderTakerDepositTokenAccount:O,programId:s,expectedPrice:t.price,orderType:t.orderType,assetMint:h,currencyMint:d,orderInitializer:m,saVault:new Yi.PublicKey(S),stakingProgramId:a,registeredStake:u,stakingAccount:R});return{transaction:(0,Eh.createTransactionFromInstructions)(C),signers:Y}})}accountItemsToOrders(e,t,n,i){return jn(this,void 0,void 0,function*(){if(!n.length)return[];const s=yield this.getRegisteredCurrencies(e,t);return n.map(a=>{const u=a.publicKey.toString(),f=Object.keys(a.account.orderSide)[0]==="buy"?Ao.OrderSide.Buy:Ao.OrderSide.Sell,h=a.account.assetMint.toString(),d=a.account.currencyMint.toString(),m=a.account.price,I=a.account.orderRemainingQty.toNumber(),O=a.account.orderOriginationQty.toNumber(),M=a.account.orderInitializerPubkey.toString(),S=a.account.initializerAssetTokenAccount.toString(),R=a.account.initializerCurrencyTokenAccount.toString(),C=a.account.createdAtTimestamp.toNumber(),{decimals:Y}=s.find(ae=>ae.mint.toString()===d);return new Ao.Order({id:u,orderType:f,orderMint:h,currencyMint:d,currencyDecimals:Y,price:m,orderQtyRemaining:I,orderOriginationQty:O,owner:M,ownerAssetTokenAccount:S,ownerCurrencyTokenAccount:R,createdAt:C,slotContext:i})})})}getAllFeeExemptions(e,t){return jn(this,void 0,void 0,function*(){const n=[],i=yield(0,Ei.getAllFeeExemptAccounts)(e,t);for(const s of i)n.push({publicKey:s.account.account.toString(),feeReductionPercentageAsDecimal:s.account.discount.toNumber()/sv.TEN_THOUSAND});return n})}}ba.GmClientService=pD;var Cc={},Wu=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.GmEventService=void 0;const Ua=mt,Oh=of,Ph=ma,gD=ba,yD=tr,Vu=ma;class mD{constructor(e,t,n){this.registeredCurrencyInfo={},this.eventListeners=[],this.queuedEvents=[],this.connection=e,this.programId=t,this.commitment=n||e.commitment,this.handleOrderCreated=this.handleOrderCreated.bind(this),this.handleOrderExchanged=this.handleOrderExchanged.bind(this),this.handleOrderCanceled=this.handleOrderCanceled.bind(this),this.setCurrencyInfo=this.setCurrencyInfo.bind(this),this.handleCurrencyRegistered=this.handleCurrencyRegistered.bind(this)}initialize(){return Wu(this,void 0,void 0,function*(){this.idl=(0,yD.getGmLogsIDL)(this.programId),this.provider=new Ua.AnchorProvider(this.connection,null,{commitment:this.commitment}),this.program=new Ua.Program(this.idl,this.programId,this.provider,{instruction:new Ua.BorshInstructionCoder(this.idl),accounts:new Ua.BorshAccountsCoder(this.idl),state:null,events:new Ua.BorshEventCoder(this.idl)}),yield this.setCurrencyInfo();const e=this.program.addEventListener(Vu.GmLogs.InitializeMemo,this.handleOrderCreated),t=this.program.addEventListener(Vu.GmLogs.ExchangeMemo,this.handleOrderExchanged),n=this.program.addEventListener(Vu.GmLogs.CancelOrderMemo,this.handleOrderCanceled),i=this.program.addEventListener(Vu.GmLogs.RegisterCurrencyMemo,this.handleCurrencyRegistered);this.eventListeners.push(e,t,n,i)})}end(){return Wu(this,void 0,void 0,function*(){for(const e of this.eventListeners)yield this.program.removeEventListener(e);this.eventListeners=[],this.onEvent=null})}setEventHandler(e){this.onEvent=e;for(const t of this.queuedEvents)this.onEvent(t.eventType,t.order,t.slotContext)}setCurrencyInfo(){return Wu(this,void 0,void 0,function*(){const t=yield new gD.GmClientService().getRegisteredCurrencies(this.connection,this.programId,!0);for(const n of t)this.registeredCurrencyInfo[n.mint]=n})}getParsedOrderFromEvent(e,t){const n=this.registeredCurrencyInfo[e.currencyMint.toString()];if(!n)return null;const{decimals:i}=n;return new Oh.Order({id:e.orderId.toString(),orderType:e.orderSide===0?Oh.OrderSide.Buy:Oh.OrderSide.Sell,orderMint:e.assetMint.toString(),currencyMint:e.currencyMint.toString(),currencyDecimals:i,price:e.price,orderQtyRemaining:e.orderRemainingQty.toNumber(),orderOriginationQty:e.orderOriginationQty.toNumber(),owner:e.orderInitializerPubkey.toString(),ownerAssetTokenAccount:e.initializerAssetTokenAccount.toString(),ownerCurrencyTokenAccount:e.initializerCurrencyTokenAccount.toString(),createdAt:e.createdAtTimestamp.toNumber(),slotContext:t})}handleOrderCreated(e,t){this.processEvent(Ph.GmEventType.orderAdded,this.getParsedOrderFromEvent(e,t),t)}handleOrderExchanged(e,t){this.processEvent(Ph.GmEventType.orderModified,this.getParsedOrderFromEvent(e,t),t)}handleOrderCanceled(e,t){this.processEvent(Ph.GmEventType.orderRemoved,this.getParsedOrderFromEvent(e,t),t)}processEvent(e,t,n){if(!this.onEvent){this.queuedEvents.push({eventType:e,order:t,slotContext:n});return}this.onEvent(e,t,n)}handleCurrencyRegistered(){return Wu(this,void 0,void 0,function*(){yield this.setCurrencyInfo()})}}Cc.GmEventService=mD;var So=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(wf,"__esModule",{value:!0});wf.GmOrderbookService=void 0;const bD=cD,vD=Ol.exports,_D=Sf,Th=ma,ov=ba,av=Cc;class If{constructor(e,t,n=60){this.gmClientService=new ov.GmClientService,this.eventCallBacks=[],this.changeObserverDisposer=null,this.lastEventTimestamp=this.getNow(),this.isReloading=!1,this.connection=e,this.marketplaceProgramId=t,this.healthcheckThreshold=n,this.orderCacheService=new _D.OrderCacheService,this.gmClientService=new ov.GmClientService,this.gmEventService=new av.GmEventService(this.connection,this.marketplaceProgramId),this.handleMarketplaceEvent=this.handleMarketplaceEvent.bind(this)}initialize(){return So(this,void 0,void 0,function*(){return yield this.gmEventService.initialize(),this.changeObserverDisposer=(0,bD.queueProcessor)(this.orderCacheService.orderChanges,e=>{this.eventCallBacks.forEach(t=>t.onEvent(e))},250),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.loadInitialOrders(),this.healthcheckTimer=setInterval(()=>{!this.getIsServiceHealthy()&&!this.isReloading&&this.resetOrdersData()},If.HEALTH_CHECK_RATE),this.orderCacheService.mints.length})}end(){return So(this,void 0,void 0,function*(){return yield this.gmEventService.end(),this.eventCallBacks=[],this.changeObserverDisposer=null,!0})}getIsServiceHealthy(){return this.getNow()-this.lastEventTimestamp<=this.healthcheckThreshold}resetOrdersData(){return So(this,void 0,void 0,function*(){this.isReloading||(this.isReloading=!0,yield this.resetEventService(),yield this.refetchOrderData(),this.lastEventTimestamp=this.getNow(),this.isReloading=!1)})}resetEventService(){return So(this,void 0,void 0,function*(){yield this.gmEventService.end(),this.gmEventService=new av.GmEventService(this.connection,this.marketplaceProgramId),this.gmEventService.setEventHandler(this.handleMarketplaceEvent),yield this.gmEventService.initialize()})}refetchOrderData(){return So(this,void 0,void 0,function*(){const e=this.orderCacheService.getAllOrdersCache();try{const t=yield this.connection.getSlot("confirmed"),n=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId),i=new Map;for(const s of n){i.set(s.id,s);const a=e.get(s.id);a?a&&a.orderQtyRemaining!==s.orderQtyRemaining&&this.updateOrderInCache(s):this.addOrderToCache(s)}for(const s of Array.from(e.values()))s.slotContext<t&&!i.get(s.id)&&this.removeOrderFromCache(s)}catch(t){console.log("There was an error refreshing all marketplace data",t)}})}addOnEventHandler(e){this.eventCallBacks.push(e)}removeOnEventHandler(e){(0,vD.pull)(this.eventCallBacks,e)}loadInitialOrders(){return So(this,void 0,void 0,function*(){try{const e=yield this.gmClientService.getAllOpenOrders(this.connection,this.marketplaceProgramId);for(const t of e)this.addOrderToCache(t)}catch(e){console.log(e)}return this.orderCacheService.getAllOrdersCache().size})}addOrderToCache(e){return this.orderCacheService.addOrder(e)}removeOrderFromCache(e){return this.orderCacheService.cancelOrder(e)}updateOrderInCache(e){return this.orderCacheService.updateOrder(e)}getBuyOrders(){return this.orderCacheService.buyOrdersCache}getBuyOrdersForMint(e){return this.orderCacheService.buyOrdersCache.get(e)}getSellOrders(){return this.orderCacheService.sellOrdersCache}getSellOrdersForMint(e){return this.orderCacheService.sellOrdersCache.get(e)}getOrdersByType(e){return e==="buy"?this.getBuyOrders():this.getSellOrders()}getBuyOrdersByCurrencyAndItem(e,t){const n=this.getBuyOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}getSellOrdersByCurrencyAndItem(e,t){const n=this.getSellOrdersForMint(t);if(!n)return[];const i=[...n.values()];return i.length?this.filterOrdersByCurrency(e,i):[]}filterOrdersByCurrency(e,t){return t.length?t.filter(n=>n.currencyMint===e):[]}getOrderById(e){return this.orderCacheService.getOrderById(e)}getAllOrdersByItemMint(e){const t=new Map,n=this.getSellOrdersForMint(e),i=this.getBuyOrdersForMint(e);if(n)for(const s of n.values())t.set(s.id,s);if(i)for(const s of i.values())t.set(s.id,s);return t}getAllMints(){return this.orderCacheService.mints}getAllOrdersForUserAddress(e){const t=this.orderCacheService.getAllOrdersCache();return Array.from(t.values()).filter(s=>s.owner===e)}handleOrderAddedEvent(e){this.addOrderToCache(e)}handleOrderModifiedEvent(e){if(e.orderQtyRemaining===0){this.removeOrderFromCache(e);return}this.updateOrderInCache(e)}handleOrderCanceledEvent(e){this.removeOrderFromCache(e)}handleMarketplaceEvent(e,t){if(!!t)switch(this.lastEventTimestamp=this.getNow(),e){case Th.GmEventType.orderAdded:this.handleOrderAddedEvent(t);break;case Th.GmEventType.orderModified:this.handleOrderModifiedEvent(t);break;case Th.GmEventType.orderRemoved:this.handleOrderCanceledEvent(t);break}}getNow(){return new Date().getTime()/1e3}}wf.GmOrderbookService=If;If.HEALTH_CHECK_RATE=5e3;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(wf,r),t(ba,r),t(Cc,r)})(UA);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Hp,r),t(fs,r),t(ma,r),t(tr,r),t(of,r),t(UA,r)})(Gp);var qA=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Us,"__esModule",{value:!0});Us.createAccountTransaction=Us.createAccountInstruction=void 0;const Pl=mt,up=Li,GA=Gp;function wD(r,e,t,n){return qA(this,void 0,void 0,function*(){const i=(0,GA.getGmIDL)(n),s=new Pl.AnchorProvider(r,null,null),a=new Pl.Program(i,n,s);return up.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})})}Us.createAccountInstruction=wD;function AD(r,e,t,n){return qA(this,void 0,void 0,function*(){const i=(0,GA.getGmIDL)(n),s=new Pl.AnchorProvider(r,null,null),a=new Pl.Program(i,n,s),u=new up.Transaction({recentBlockhash:(yield r.getLatestBlockhash()).blockhash,feePayer:e});return u.add(up.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:t.publicKey,space:a.account.orderAccount.size,lamports:yield r.getMinimumBalanceForRentExemption(a.account.orderAccount.size),programId:n})),u})}Us.createAccountTransaction=AD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(rn,r),t(Zl,r),t(Us,r)})(Fr);var SD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.harvestRewardsInstruction=void 0;const kD=mt,ID=Hs,ED=Fr,OD=er;function PD({connection:r,user:e,rewardMint:t,registeredStake:n,stakingAccount:i,programId:s}){return SD(this,void 0,void 0,function*(){const a=(0,OD.getStakingProgram)({connection:r,programId:s}),u={signers:[],instructions:[]};let f=null,h=null;const d=yield(0,ED.getTokenAccount)(r,e,t);f=d.tokenAccount,"createInstruction"in d&&u.instructions.push(...d.createInstruction),f instanceof kD.web3.Keypair?(h=f.publicKey,u.signers.push(f)):h=f;const m=yield(0,ID.associatedAddress)({owner:n,mint:t}),I=yield a.methods.harvest().accounts({user:e,rewardMint:t,registeredStake:n,stakingAccount:i,userRewardAccount:h,rewardAta:m}).instruction();return u.instructions.push(I),u})}Ul.harvestRewardsInstruction=PD;var Ef={},TD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.createInitializeStakingInstruction=void 0;const RD=er;function BD({connection:r,updateAuthorityAccount:e,programId:t}){return TD(this,void 0,void 0,function*(){const n=(0,RD.getStakingProgram)({connection:r,programId:t}),i={signers:[],instructions:[]},s=yield n.methods.initializeStaking().accounts({updateAuthorityAccount:e}).instruction();return i.instructions.push(s),i})}Ef.createInitializeStakingInstruction=BD;var Of={},Pf={},Dn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.ESCROW_AUTH=mn.STAKING_VARS=mn.STAKING_ESCROW=mn.STAKING_ACCOUNT=mn.REWARD_AUTH=mn.REWARD_ACCOUNT=mn.REGISTERED_STAKE=void 0;mn.REGISTERED_STAKE=Pe.Buffer.from("registered-stake");mn.REWARD_ACCOUNT=Pe.Buffer.from("reward-account");mn.REWARD_AUTH=Pe.Buffer.from("reward-vault-authority");mn.STAKING_ACCOUNT=Pe.Buffer.from("staking-account");mn.STAKING_ESCROW=Pe.Buffer.from("staking-escrow");mn.STAKING_VARS=Pe.Buffer.from("staking-vars");mn.ESCROW_AUTH=Pe.Buffer.from("escrow-auth");var va=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getRewardAuth=Dn.getTokenEscrow=Dn.getStakingVarsAccount=Dn.getStakingAccountsForRegisteredStake=Dn.getStakingAccount=Dn.getRegisteredStake=void 0;const cv=mt,Lc=Li,xD=er,Kc=mn;function MD(r,e,t,n){return va(this,void 0,void 0,function*(){return Lc.PublicKey.findProgramAddress([Kc.REGISTERED_STAKE,e.toBuffer(),t.toBuffer(),n.toBuffer()],r)})}Dn.getRegisteredStake=MD;function CD(r,e,t){return va(this,void 0,void 0,function*(){return Lc.PublicKey.findProgramAddress([Kc.STAKING_ACCOUNT,e.toBuffer(),t.toBuffer()],r)})}Dn.getStakingAccount=CD;function LD(r,e,t){return va(this,void 0,void 0,function*(){const n=new cv.AnchorProvider(r,null,null),i=(0,xD.getStakingIdl)(e),s=new cv.Program(i,e,n),a=[{dataSize:171},{memcmp:{offset:40,bytes:t.toBase58()}}];return yield s.account.stakingAccount.all(a)})}Dn.getStakingAccountsForRegisteredStake=LD;function KD(r){return va(this,void 0,void 0,function*(){return Lc.PublicKey.findProgramAddress([Kc.STAKING_VARS],r)})}Dn.getStakingVarsAccount=KD;function ND(r,e,t){return va(this,void 0,void 0,function*(){return Lc.PublicKey.findProgramAddress([Kc.STAKING_ESCROW,e.toBuffer(),t.toBuffer()],r)})}Dn.getTokenEscrow=ND;function DD(r,e){return va(this,void 0,void 0,function*(){return Lc.PublicKey.findProgramAddress([Kc.REWARD_AUTH,e.toBuffer()],r)})}Dn.getRewardAuth=DD;var ss={},dg=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(ss,"__esModule",{value:!0});ss.getStakingVarsAccountInfo=ss.getStakingAccountInfo=ss.getRegisteredStakeAccountInfo=void 0;const hg=Ns,FD=Dn;function UD(r,e,t){return dg(this,void 0,void 0,function*(){return yield(0,hg.getStakingProgram)({connection:r,programId:t}).account.registeredStake.fetch(e)})}ss.getRegisteredStakeAccountInfo=UD;function zD(r,e,t){return dg(this,void 0,void 0,function*(){return yield(0,hg.getStakingProgram)({connection:r,programId:t}).account.stakingAccount.fetch(e)})}ss.getStakingAccountInfo=zD;function WD(r,e){return dg(this,void 0,void 0,function*(){const t=(0,hg.getStakingProgram)({connection:r,programId:e}),[n]=yield(0,FD.getStakingVarsAccount)(e);return yield t.account.stakingVars.fetch(n)})}ss.getStakingVarsAccountInfo=WD;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Dn,r),t(ss,r),t(mn,r)})(Pf);var VD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Of,"__esModule",{value:!0});Of.registerStakeInstruction=void 0;const uv=mt,$D=Hs,jD=Pf,qD=er;function GD({connection:r,authority:e,rewardMultiplier:t,stakeMint:n,rewardMint:i,cooldownPeriod:s,programId:a}){return VD(this,void 0,void 0,function*(){const u=(0,qD.getStakingProgram)({connection:r,programId:a}),f={instructions:[],signers:[]},[h]=yield(0,jD.getRegisteredStake)(a,e,n,i),d=yield(0,$D.associatedAddress)({owner:h,mint:i}),m=yield u.methods.registerStake(new uv.BN(t),new uv.BN(s)).accounts({authority:e,stakeMint:n,rewardMint:i,rewardAta:d}).instruction();return f.instructions.push(m),f})}Of.registerStakeInstruction=GD;var Tf={},HD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.createSettleStakingAccountInstruction=void 0;const YD=er;function JD({connection:r,authority:e,registeredStake:t,stakingAccount:n,updatedStakingPeriod:i,programId:s}){return HD(this,void 0,void 0,function*(){const a=(0,YD.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.settle(i).accounts({authority:e,registeredStake:t,stakingAccount:n}).instruction();return u.instructions.push(f),u})}Tf.createSettleStakingAccountInstruction=JD;var Rf={},QD=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.stakeTokensInstruction=void 0;const XD=Hs,ZD=er;function e2({connection:r,user:e,stakeMint:t,tokenSource:n,stakeQuantity:i,registeredStake:s,stakingAccount:a,programId:u}){return QD(this,void 0,void 0,function*(){const f=(0,ZD.getStakingProgram)({connection:r,programId:u}),h=yield(0,XD.associatedAddress)({owner:a,mint:t}),d={instructions:[],signers:[]},m=yield f.methods.stakeTokens(i).accounts({user:e,stakeMint:t,tokenSource:n,registeredStake:s,tokenEscrow:h}).instruction();return d.instructions.push(m),d})}Rf.stakeTokensInstruction=e2;var Bf={},t2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.unstakeTokensInstruction=void 0;const n2=mt,r2=Hs,i2=Fr,s2=Pf,o2=er;function a2({connection:r,user:e,registeredStake:t,stakingAccount:n,programId:i}){return t2(this,void 0,void 0,function*(){const s=(0,o2.getStakingProgram)({connection:r,programId:i}),a={signers:[],instructions:[]},f=(yield(0,s2.getRegisteredStakeAccountInfo)(r,t,i)).rewardMint;let h=null,d=null;const m=yield(0,i2.getTokenAccount)(r,e,f);h=m.tokenAccount,"createInstruction"in m&&a.instructions.push(...m.createInstruction),h instanceof n2.web3.Keypair?(d=h.publicKey,a.signers.push(h)):d=h;const I=yield(0,r2.associatedAddress)({owner:t,mint:f}),O=yield s.methods.unstakeTokens().accounts({user:e,rewardMint:f,registeredStake:t,stakingAccount:n,userRewardAccount:d,rewardAta:I}).instruction();return a.instructions.push(O),a})}Bf.unstakeTokensInstruction=a2;var xf={},c2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(xf,"__esModule",{value:!0});xf.updateCooldownPeriodInstruction=void 0;const u2=mt,l2=er;function f2({connection:r,authority:e,registeredStake:t,cooldownPeriod:n,programId:i}){return c2(this,void 0,void 0,function*(){const s=(0,l2.getStakingProgram)({connection:r,programId:i}),a={instructions:[],signers:[]},u=yield s.methods.updateCooldownPeriod(new u2.BN(n)).accounts({authority:e,registeredStake:t}).instruction();return a.instructions.push(u),a})}xf.updateCooldownPeriodInstruction=f2;var Mf={},d2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.updateRewardMultiplierInstruction=void 0;const h2=mt,p2=er;function g2({connection:r,authority:e,rewardMultiplier:t,registeredStake:n,newStakingPeriod:i,programId:s}){return d2(this,void 0,void 0,function*(){const a=(0,p2.getStakingProgram)({connection:r,programId:s}),u={instructions:[],signers:[]},f=yield a.methods.updateRewardMultiplier(new h2.BN(t),i).accounts({authority:e,registeredStake:n}).instruction();return u.instructions.push(f),u})}Mf.updateRewardMultiplierInstruction=g2;var Cf={},y2=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.withdrawTokensInstruction=void 0;const m2=mt,b2=Hs,v2=er,_2=Fr;function w2({connection:r,authority:e,user:t,stakeMint:n,registeredStake:i,stakingAccount:s,programId:a}){return y2(this,void 0,void 0,function*(){const u=(0,v2.getStakingProgram)({connection:r,programId:a}),f=yield(0,b2.associatedAddress)({owner:s,mint:n}),h={signers:[],instructions:[]};let d=null,m=null;const I=yield(0,_2.getTokenAccount)(r,t,n);d=I.tokenAccount,"createInstruction"in I&&h.instructions.push(...I.createInstruction),d instanceof m2.web3.Keypair?(m=d.publicKey,h.signers.push(d)):m=d;const O=yield u.methods.withdrawTokens().accounts({user:t,authority:e,stakeMint:n,tokenSource:m,registeredStake:i,stakingAccount:s,tokenEscrow:f}).instruction();return h.instructions.push(O),h})}Cf.withdrawTokensInstruction=w2;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Pv,r),t(xl,r),t(Fl,r),t(Ul,r),t(Ef,r),t(Of,r),t(Tf,r),t(Rf,r),t(Bf,r),t(xf,r),t(Mf,r),t(Cf,r)})(Ov);var HA={},YA={};Object.defineProperty(YA,"__esModule",{value:!0});(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(vc,r),t(YA,r)})(HA);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ov,r),t(Pf,r),t(HA,r),t(er,r)})(Bl);var JA={};(function(r){var e=z&&z.__awaiter||function(m,I,O,M){function S(R){return R instanceof O?R:new O(function(C){C(R)})}return new(O||(O=Promise))(function(R,C){function Y(de){try{oe(M.next(de))}catch(E){C(E)}}function ae(de){try{oe(M.throw(de))}catch(E){C(E)}}function oe(de){de.done?R(de.value):S(de.value).then(Y,ae)}oe((M=M.apply(m,I||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.getPlayersOfFaction=r.getAllPlayers=r.getPlayer=r.enlistToFaction=r.getPlayerFactionPDA=r.getIDL=r.FactionType=void 0;const t=mt,n={version:"0.0.0",name:"enlist_to_faction",instructions:[{name:"processEnlistPlayer",accounts:[{name:"playerFactionAccount",isMut:!0,isSigner:!1},{name:"playerAccount",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"factionId",type:"u8"}]}],accounts:[{name:"PlayerFactionData",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"enlistedAtTimestamp",type:"i64"},{name:"factionId",type:"u8"},{name:"bump",type:"u8"},{name:"padding",type:{array:["u64",5]}}]}}],errors:[{code:300,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."}],metadata:{}},i="FACTION_ENLISTMENT";(function(m){m[m.Unenlisted=-1]="Unenlisted",m[m.MUD=0]="MUD",m[m.ONI=1]="ONI",m[m.Ustur=2]="Ustur"})(r.FactionType||(r.FactionType={}));function s(m){const I=n;return I.metadata.address=m.toBase58(),I}r.getIDL=s;function a(m,I){return e(this,void 0,void 0,function*(){return t.web3.PublicKey.findProgramAddress([Pe.Buffer.from(i,"utf8"),m.toBuffer()],I)})}r.getPlayerFactionPDA=a;function u(m,I,O,M){return e(this,void 0,void 0,function*(){const[S,R]=yield a(O,M),C=s(M),Y=new t.AnchorProvider(m,null,null);return yield new t.Program(C,M,Y).instruction.processEnlistPlayer(R,I,{accounts:{playerFactionAccount:S,playerAccount:O,systemProgram:t.web3.SystemProgram.programId,clock:t.web3.SYSVAR_CLOCK_PUBKEY}})})}r.enlistToFaction=u;function f(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),S=s(O),R=new t.Program(S,O,M),[C]=yield a(I,O);return yield R.account.playerFactionData.fetch(C)})}r.getPlayer=f;function h(m,I){return e(this,void 0,void 0,function*(){const O=new t.AnchorProvider(m,null,null),M=s(I);return(yield new t.Program(M,I,O).account.playerFactionData.all()).map(Y=>Y.account)})}r.getAllPlayers=h;function d(m,I,O){return e(this,void 0,void 0,function*(){const M=new t.AnchorProvider(m,null,null),S=s(O);return(yield new t.Program(S,O,M).account.playerFactionData.all()).map(ae=>ae.account).filter(ae=>ae.factionId==I)})}r.getPlayersOfFaction=d})(JA);var QA={},Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.gumDropIdl=void 0;Lf.gumDropIdl={version:"0.0.0",name:"merkle_distributor",instructions:[{name:"newDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]},{name:"closeDistributor",accounts:[{name:"base",isMut:!1,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"receiver",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"walletBump",type:"u8"}]},{name:"claim",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"claimStatus",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]},{name:"claimCandy",accounts:[{name:"distributor",isMut:!0,isSigner:!1},{name:"distributorWallet",isMut:!0,isSigner:!1},{name:"claimCount",isMut:!0,isSigner:!1},{name:"temporal",isMut:!1,isSigner:!0},{name:"payer",isMut:!1,isSigner:!0},{name:"candyMachineConfig",isMut:!1,isSigner:!1},{name:"candyMachine",isMut:!0,isSigner:!1},{name:"candyMachineWallet",isMut:!0,isSigner:!1},{name:"candyMachineMint",isMut:!0,isSigner:!1},{name:"candyMachineMetadata",isMut:!0,isSigner:!1},{name:"candyMachineMasterEdition",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenMetadataProgram",isMut:!1,isSigner:!1},{name:"candyMachineProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"walletBump",type:"u8"},{name:"claimBump",type:"u8"},{name:"index",type:"u64"},{name:"amount",type:"u64"},{name:"claimantSecret",type:"publicKey"},{name:"proof",type:{vec:{array:["u8",32]}}}]}],accounts:[{name:"MerkleDistributor",type:{kind:"struct",fields:[{name:"base",type:"publicKey"},{name:"bump",type:"u8"},{name:"root",type:{array:["u8",32]}},{name:"temporal",type:"publicKey"}]}},{name:"ClaimStatus",type:{kind:"struct",fields:[{name:"isClaimed",type:"bool"},{name:"claimant",type:"publicKey"},{name:"claimedAt",type:"i64"},{name:"amount",type:"u64"}]}},{name:"ClaimCount",type:{kind:"struct",fields:[{name:"count",type:"u64"},{name:"claimant",type:"publicKey"}]}},{name:"CandyMachine",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"wallet",type:"publicKey"},{name:"tokenMint",type:{option:"publicKey"}},{name:"config",type:"publicKey"},{name:"data",type:{defined:"CandyMachineData"}},{name:"itemsRedeemed",type:"u64"},{name:"bump",type:"u8"}]}}],types:[{name:"CandyMachineData",type:{kind:"struct",fields:[{name:"uuid",type:"string"},{name:"price",type:"u64"},{name:"itemsAvailable",type:"u64"},{name:"goLiveDate",type:{option:"i64"}}]}}],events:[{name:"ClaimedEvent",fields:[{name:"index",type:"u64",index:!1},{name:"claimant",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:300,name:"InvalidProof",msg:"Invalid Merkle proof."},{code:301,name:"DropAlreadyClaimed",msg:"Drop already claimed."},{code:302,name:"Unauthorized",msg:"Account is not authorized to execute this instruction"},{code:303,name:"OwnerMismatch",msg:"Token account owner did not match intended owner"},{code:304,name:"TemporalMismatch",msg:"Temporal signer did not match distributor"}]};(function(r){var e=z&&z.__createBinding||(Object.create?function(S,R,C,Y){Y===void 0&&(Y=C);var ae=Object.getOwnPropertyDescriptor(R,C);(!ae||("get"in ae?!R.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(S,Y,ae)}:function(S,R,C,Y){Y===void 0&&(Y=C),S[Y]=R[C]}),t=z&&z.__setModuleDefault||(Object.create?function(S,R){Object.defineProperty(S,"default",{enumerable:!0,value:R})}:function(S,R){S.default=R}),n=z&&z.__importStar||function(S){if(S&&S.__esModule)return S;var R={};if(S!=null)for(var C in S)C!=="default"&&Object.prototype.hasOwnProperty.call(S,C)&&e(R,S,C);return t(R,S),R},i=z&&z.__awaiter||function(S,R,C,Y){function ae(oe){return oe instanceof C?oe:new C(function(de){de(oe)})}return new(C||(C=Promise))(function(oe,de){function E(J){try{V(Y.next(J))}catch(K){de(K)}}function N(J){try{V(Y.throw(J))}catch(K){de(K)}}function V(J){J.done?oe(J.value):ae(J.value).then(E,N)}V((Y=Y.apply(S,R||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.claimTokenInstructions=r.getMultipleClaimStatusAccounts=r.getClaimStatusAccount=r.getClaimStatusKey=void 0;const s=mt,a=wc,u=n($e),f=rn,h=Lf,d=new s.web3.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),m=(S,R,C=d)=>i(void 0,void 0,void 0,function*(){return yield s.web3.PublicKey.findProgramAddress([Pe.Buffer.from("ClaimStatus"),S.toArrayLike(Pe.Buffer,"le",8),R.toBuffer()],C)});r.getClaimStatusKey=m;const I=(S,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(S,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=yield(0,r.getClaimStatusKey)(R,C,Y);try{return yield oe.account.claimStatus.fetch(de[0])}catch{return null}});r.getClaimStatusAccount=I;const O=(S,R,C,Y=d)=>i(void 0,void 0,void 0,function*(){const ae=new s.AnchorProvider(S,null,null),oe=new s.Program(h.gumDropIdl,Y,ae),de=R.map(V=>(0,r.getClaimStatusKey)(V,C,Y)),E=(yield Promise.all(de)).map(V=>V[0]);return yield oe.account.claimStatus.fetchMultiple(E)});r.getMultipleClaimStatusAccounts=O;const M=S=>i(void 0,void 0,void 0,function*(){const{connection:R,claimUrl:C,playerPublicKey:Y,programId:ae}=S,oe=new URLSearchParams(C.split("?")[1]),de=oe.get("distributor"),E=oe.get("handle"),N=oe.get("amount"),V=oe.get("index"),J=oe.get("proof"),K=oe.get("tokenAcc");if(!de||!E||!N||!V||!J||!K)throw new Error("Invalid claim");const j=J===""?[]:J.split(",").map(_r=>{const Wt=Pe.Buffer.from(u.decode(_r));if(Wt.length!==32)throw new Error("Invalid proof hash length");return Wt}),te=new s.web3.PublicKey(de),T=new s.web3.PublicKey(K),W=yield R.getAccountInfo(T);if(W===null)throw new Error("Could not fetch distributor token account");const X=a.AccountLayout.decode(W.data),Be=new s.web3.PublicKey(X.mint),ye=new s.web3.PublicKey(E),Ie=yield(0,f.getAssociatedTokenAddress)(ye,Be),qt=yield R.getParsedTokenAccountsByOwner(ye,{mint:Be}),Gt=new s.BN(V),_e=new s.BN(N),[We,Zt]=yield(0,r.getClaimStatusKey)(Gt,te,ae),ln=new s.AnchorProvider(R,null,null),Et=new s.Program(h.gumDropIdl,ae,ln),ht=[];return qt.value.length===0&&ht.push(a.Token.createAssociatedTokenAccountInstruction(a.ASSOCIATED_TOKEN_PROGRAM_ID,a.TOKEN_PROGRAM_ID,Be,Ie,ye,Y)),ht.push(Et.instruction.claim(Zt,Gt,_e,Y,j,{accounts:{distributor:te,claimStatus:We,from:T,to:Ie,temporal:Y,payer:Y,tokenProgram:a.TOKEN_PROGRAM_ID,systemProgram:s.web3.SystemProgram.programId}})),ht});r.claimTokenInstructions=M})(QA);var be={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.baseIdl=void 0;Kf.baseIdl={version:"0.0.0",name:"score",instructions:[{name:"processInitialize",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"atlasMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processRegisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"scorevarsShipBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]},{name:"processDeregisterShip",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processUpdateRewardRate",accounts:[{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!0,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"newRewardRatePerSecond",type:"u64"}]},{name:"processInitialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerFactionAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processPartialDeposit",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"shipTokenAccountSource",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"shipQuantity",type:"u64"}]},{name:"processRefuel",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"fuelTokenAccountSource",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"fuelQuantity",type:"u64"}]},{name:"processRefeed",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"foodTokenAccountSource",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"foodQuantity",type:"u64"}]},{name:"processRearm",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"armsTokenAccountSource",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"armsQuantity",type:"u64"}]},{name:"processRepair",accounts:[{name:"tokenOwnerAccount",isMut:!1,isSigner:!0},{name:"playerAccount",isMut:!1,isSigner:!1},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"toolkitQuantity",type:"u64"}]},{name:"processSettle",accounts:[{name:"playerAccount",isMut:!1,isSigner:!1},{name:"updateAuthorityAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"}]},{name:"processHarvest",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"treasuryBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"}]},{name:"processWithdrawFuel",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountReturn",isMut:!0,isSigner:!1},{name:"fuelMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawFood",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountReturn",isMut:!0,isSigner:!1},{name:"foodMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawArms",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountReturn",isMut:!0,isSigner:!1},{name:"armsMint",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"}]},{name:"processWithdrawShips",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"scoreVarsShipAccount",isMut:!1,isSigner:!1},{name:"playerAtlasTokenAccount",isMut:!0,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"shipTokenAccountReturn",isMut:!0,isSigner:!1},{name:"toolkitTokenAccountSource",isMut:!0,isSigner:!1},{name:"treasuryTokenAccount",isMut:!0,isSigner:!1},{name:"treasuryAuthorityAccount",isMut:!1,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"toolkitMint",isMut:!0,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"scorevarsShipBump",type:"u8"},{name:"escrowAuthBump",type:"u8"},{name:"escrowBump",type:"u8"},{name:"treasuryAuthBump",type:"u8"},{name:"treasuryBump",type:"u8"}]},{name:"processCloseAccounts",accounts:[{name:"playerAccount",isMut:!1,isSigner:!0},{name:"shipStakingAccount",isMut:!0,isSigner:!1},{name:"scoreVarsAccount",isMut:!1,isSigner:!1},{name:"shipTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"fuelTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"foodTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"armsTokenAccountEscrow",isMut:!0,isSigner:!1},{name:"escrowAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"shipMint",isMut:!1,isSigner:!1},{name:"fuelMint",isMut:!1,isSigner:!1},{name:"foodMint",isMut:!1,isSigner:!1},{name:"armsMint",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"stakingBump",type:"u8"},{name:"scorevarsBump",type:"u8"},{name:"shipBump",type:"u8"},{name:"fuelBump",type:"u8"},{name:"foodBump",type:"u8"},{name:"armsBump",type:"u8"},{name:"escrowAuthBump",type:"u8"}]}],accounts:[{name:"ScoreVars",type:{kind:"struct",fields:[{name:"updateAuthorityMaster",type:"publicKey"},{name:"fuelMint",type:"publicKey"},{name:"foodMint",type:"publicKey"},{name:"armsMint",type:"publicKey"},{name:"toolkitMint",type:"publicKey"}]}},{name:"ScoreVarsShip",type:{kind:"struct",fields:[{name:"shipMint",type:"publicKey"},{name:"rewardRatePerSecond",type:"u64"},{name:"fuelMaxReserve",type:"u32"},{name:"foodMaxReserve",type:"u32"},{name:"armsMaxReserve",type:"u32"},{name:"toolkitMaxReserve",type:"u32"},{name:"millisecondsToBurnOneFuel",type:"u32"},{name:"millisecondsToBurnOneFood",type:"u32"},{name:"millisecondsToBurnOneArms",type:"u32"},{name:"millisecondsToBurnOneToolkit",type:"u32"}]}},{name:"ShipStaking",type:{kind:"struct",fields:[{name:"owner",type:"publicKey"},{name:"factionId",type:"u8"},{name:"shipMint",type:"publicKey"},{name:"shipQuantityInEscrow",type:"u64"},{name:"fuelQuantityInEscrow",type:"u64"},{name:"foodQuantityInEscrow",type:"u64"},{name:"armsQuantityInEscrow",type:"u64"},{name:"fuelCurrentCapacity",type:"u64"},{name:"foodCurrentCapacity",type:"u64"},{name:"armsCurrentCapacity",type:"u64"},{name:"healthCurrentCapacity",type:"u64"},{name:"stakedAtTimestamp",type:"i64"},{name:"fueledAtTimestamp",type:"i64"},{name:"fedAtTimestamp",type:"i64"},{name:"armedAtTimestamp",type:"i64"},{name:"repairedAtTimestamp",type:"i64"},{name:"currentCapacityTimestamp",type:"i64"},{name:"totalTimeStaked",type:"u64"},{name:"stakedTimePaid",type:"u64"},{name:"pendingRewards",type:"u64"},{name:"totalRewardsPaid",type:"u64"}]}}],types:[{name:"Resource",type:{kind:"enum",variants:[{name:"Arms"},{name:"Fuel"},{name:"Food"},{name:"Toolkits"}]}}],errors:[{code:300,name:"ScorevarsNotInitialized",msg:"Scorevars auth is not initialized"},{code:301,name:"ScorevarsAuthInvalid",msg:"Scorevars auth invalid"},{code:302,name:"FactionTypeError",msg:"Faction ID must be 0, 1, or 2."},{code:303,name:"InvalidShipError",msg:"Invalid Ship Mint"},{code:304,name:"InvalidResourceError",msg:"Invalid Resource Mint"},{code:305,name:"ZeroResourceError",msg:"Resource Quantity must be >0."},{code:306,name:"ZeroShipError",msg:"Ship Quantity must be >0."},{code:307,name:"NumericalOverflowError",msg:"Numerical overflow error"},{code:308,name:"ResourceAmountTooSmall",msg:"Resource Amount Too Small, would add 0 seconds to capacity"},{code:309,name:"InvalidScoreVarsAccount",msg:"Invalid ScoreVars account for ship Staking Account given"},{code:310,name:"InvalidResourceWithdraw",msg:"Invalid Resource Withdraw, nothing to withdraw"},{code:311,name:"InvalidShipStakingOwner",msg:"Invalid Ship Staking Owner"},{code:312,name:"InvalidShipWithdraw",msg:"Invalid Ship Withdraw"},{code:313,name:"NotEnoughToolkits",msg:"Not enough toolkits for Ship Withdraw"},{code:314,name:"EscrowAccountNotZero",msg:"Escrow account must be 0 to close accounts"},{code:315,name:"IncorrectTokenAccountOwner",msg:"Token account does not have correct owner!"},{code:316,name:"UninitializedTokenAccount",msg:"Token or Mint Account is not initialized!"},{code:317,name:"IncorrectTokenAccountMint",msg:"Token or Mint Account mint is not correct!"}],metadata:{}};var Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.scoreLogBaseIdl=void 0;Nf.scoreLogBaseIdl={version:"0.0.0",name:"score_logs",instructions:[],events:[{name:"ProcessInitialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"factionId",type:"u8",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessPartialDepositMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"previousShipQuantity",type:"u64",index:!1},{name:"addedShipQuantity",type:"u64",index:!1},{name:"newShipQuantity",type:"u64",index:!1},{name:"partialDepositTimestamp",type:"i64",index:!1}]},{name:"ProcessRearmMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityToDeposit",type:"u64",index:!1},{name:"armedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefeedMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityToDeposit",type:"u64",index:!1},{name:"fedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRefuelMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityToDeposit",type:"u64",index:!1},{name:"fueledAtTimestamp",type:"i64",index:!1}]},{name:"ProcessRepairMemo",fields:[{name:"tokenOwnerAccount",type:"publicKey",index:!1},{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"toolkitQuantityToDeposit",type:"u64",index:!1},{name:"repairedAtTimestamp",type:"i64",index:!1}]},{name:"ProcessHarvestMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"rewardPayout",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"harvestTimestamp",type:"i64",index:!1}]},{name:"ProcessSettleMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"settleTimestamp",type:"i64",index:!1}]},{name:"ProcessArmsWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"armsQuantityWithdrawn",type:"u64",index:!1},{name:"armsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFoodWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"foodQuantityWithdrawn",type:"u64",index:!1},{name:"foodWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessFuelWithdrawMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"fuelQuantityWithdrawn",type:"u64",index:!1},{name:"fuelWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessWithdrawShipsMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"shipQuantity",type:"u64",index:!1},{name:"stakedTimePaid",type:"u64",index:!1},{name:"totalRewardsPaid",type:"u64",index:!1},{name:"shipsWithdrawTimestamp",type:"i64",index:!1}]},{name:"ProcessCloseAccountMemo",fields:[{name:"playerAccount",type:"publicKey",index:!1},{name:"shipMint",type:"publicKey",index:!1},{name:"accountClosedTimestamp",type:"i64",index:!1}]}]};var at=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.closeAccountsInstruction=be.createWithdrawShipsInstruction=be.createWithdrawArmsInstruction=be.createWithdrawFoodInstruction=be.createWithdrawFuelInstruction=be.createHarvestInstruction=be.createSettleInstruction=be.createRepairInstruction=be.createRefuelInstruction=be.createRefeedInstruction=be.createRearmInstruction=be.createPartialDepositInstruction=be.createInitialDepositInstruction=be.createUpdateRewardRateInstruction=be.createDeregisterShipInstruction=be.createRegisterShipInstruction=be.createScoreVarsInitializeInstruction=be.getAllFleetsForUserPublicKey=be.getAllFleets=be.getAllRegisteredShips=be.getScoreTreasuryAuthAccount=be.getScoreTreasuryTokenAccount=be.getScoreVarsShipInfo=be.decodeEvent=be.getShipStakingAccountInfo=be.getScoreVarsInfo=be.getShipStakingAccount=be.getScoreEscrowAuthAccount=be.getScoreEscrowAccount=be.getScoreVarsShipAccount=be.getScoreVarsAccount=be.getScoreIDL=void 0;const ue=mt,vr=wc,XA=Li,A2=Ln,S2=Kf,k2=Nf,Ks=Fr;function Mt(r){const e=S2.baseIdl;return e.metadata.address=r.toBase58(),e}be.getScoreIDL=Mt;function Rn(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS")],r)})}be.getScoreVarsAccount=Rn;function _n(r,e){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCOREVARS_SHIP"),e.toBuffer()],r)})}be.getScoreVarsShipAccount=_n;function Qn(r,e,t,n){return at(this,void 0,void 0,function*(){const i=[Pe.Buffer.from("SCORE_ESCROW"),n.toBuffer(),e.toBuffer()];return t!==null&&i.push(t.toBuffer()),ue.web3.PublicKey.findProgramAddress(i,r)})}be.getScoreEscrowAccount=Qn;function Xr(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_ESCROW_AUTHORITY"),t.toBuffer(),e.toBuffer()],r)})}be.getScoreEscrowAuthAccount=Xr;function Bn(r,e,t){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_INFO"),t.toBuffer(),e.toBuffer()],r)})}be.getShipStakingAccount=Bn;function I2(r,e){return at(this,void 0,void 0,function*(){const t=new ue.AnchorProvider(r,null,null),n=Mt(e),i=new ue.Program(n,e,t),[s]=yield Rn(e);return yield i.account.scoreVars.fetch(s)})}be.getScoreVarsInfo=I2;function E2(r,e,t,n){return at(this,void 0,void 0,function*(){const i=new ue.AnchorProvider(r,null,null),s=Mt(e),a=new ue.Program(s,e,i),[u]=yield Bn(e,t,n);return yield a.account.shipStaking.fetch(u)})}be.getShipStakingAccountInfo=E2;function O2(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null);return new ue.Program(k2.scoreLogBaseIdl,e,n).coder.events.decode(t)})}be.decodeEvent=O2;function P2(r,e,t){return at(this,void 0,void 0,function*(){const n=new ue.AnchorProvider(r,null,null),i=Mt(e),s=new ue.Program(i,e,n),[a]=yield _n(e,t);return yield s.account.scoreVarsShip.fetch(a)})}be.getScoreVarsShipInfo=P2;function Df(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY")],r)})}be.getScoreTreasuryTokenAccount=Df;function Ff(r){return at(this,void 0,void 0,function*(){return ue.web3.PublicKey.findProgramAddress([Pe.Buffer.from("SCORE_TREASURY_AUTHORITY")],r)})}be.getScoreTreasuryAuthAccount=Ff;function T2(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.scoreVarsShip.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllRegisteredShips=T2;function R2(r,e){return at(this,void 0,void 0,function*(){const t=Mt(e),n=new ue.AnchorProvider(r,null,null),s=yield new ue.Program(t,e,n).account.shipStaking.all(),a=[];for(const u of s)a.push(u.account);return a})}be.getAllFleets=R2;function B2(r,e,t){return at(this,void 0,void 0,function*(){const n=Mt(t),i=new ue.AnchorProvider(r,null,null),s=new ue.Program(n,t,i),a=yield s.account.scoreVarsShip.all(),u=[];for(const d of a){const[m]=yield Bn(t,d.account.shipMint,e);u.push(m)}return(yield s.account.shipStaking.fetchMultiple(u)).filter(d=>d!==null).map(d=>d)})}be.getAllFleetsForUserPublicKey=B2;function x2(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const f=Mt(u),h=new ue.AnchorProvider(r,null,null),d=new ue.Program(f,u,h),[m,I]=yield Df(u),[O,M]=yield Ff(u),[S,R]=yield Rn(u);return yield d.instruction.processInitialize(R,I,M,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:S,tokenProgram:vr.TOKEN_PROGRAM_ID,systemProgram:XA.SystemProgram.programId,rent:ue.web3.SYSVAR_RENT_PUBKEY,treasuryTokenAccount:m,treasuryAuthorityAccount:O,atlasMint:t,fuelMint:n,foodMint:i,armsMint:s,toolkitMint:a},signers:[]})})}be.createScoreVarsInitializeInstruction=x2;function M2(r,e,t,n,i,s,a,u,f,h,d,m,I){return at(this,void 0,void 0,function*(){const O=Mt(I),M=new ue.AnchorProvider(r,null,null),S=new ue.Program(O,I,M),[R,C]=yield _n(I,t),[Y,ae]=yield Rn(I);return yield S.instruction.processRegisterShip(ae,C,new ue.BN(m),n,i,s,a,u,f,h,d,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:Y,scoreVarsShipAccount:R,shipMint:t,systemProgram:XA.SystemProgram.programId},signers:[]})})}be.createRegisterShipInstruction=M2;function C2(r,e,t,n){return at(this,void 0,void 0,function*(){const i=Mt(n),s=new ue.AnchorProvider(r,null,null),a=new ue.Program(i,n,s),[u,f]=yield _n(n,t),[h,d]=yield Rn(n);return yield a.instruction.processDeregisterShip(d,f,{accounts:{updateAuthorityAccount:e,scoreVarsAccount:h,scoreVarsShipAccount:u,shipMint:t},signers:[]})})}be.createDeregisterShipInstruction=C2;function L2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const s=Mt(i),a=new ue.AnchorProvider(r,null,null),u=new ue.Program(s,i,a),[f,h]=yield _n(i,t),[d,m]=yield Rn(i);return yield u.instruction.processUpdateRewardRate(m,h,new ue.BN(n),{accounts:{updateAuthorityAccount:e,scoreVarsAccount:d,scoreVarsShipAccount:f,shipMint:t},signers:[]})})}be.createUpdateRewardRateInstruction=L2;function K2(r,e,t,n,i,s,a=new ue.web3.PublicKey("FACTNmq2FhA2QNTnGM2aWJH3i7zT3cND5CgvjYTjyVYe")){return at(this,void 0,void 0,function*(){const[u,f]=yield Xr(s,n,e),[h,d]=yield Qn(s,n,null,e),[m,I]=yield Bn(s,n,e),[O,M]=yield _n(s,n),[S]=yield(0,A2.getPlayerFactionPDA)(e,a),R=Mt(s),C=new ue.AnchorProvider(r,null,null);return yield new ue.Program(R,s,C).instruction.processInitialDeposit(I,M,f,d,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:m,scoreVarsShipAccount:O,playerFactionAccount:S,escrowAuthority:u,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:h}})})}be.createInitialDepositInstruction=K2;function N2(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield Xr(s,n,e),[f,h]=yield Qn(s,n,null,e),[d,m]=yield Bn(s,n,e),[I,O]=yield _n(s,n),M=Mt(s),S=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,s,S).instruction.processPartialDeposit(m,O,u,h,new ue.BN(t),{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsShipAccount:I,escrowAuthority:a,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n,shipTokenAccountSource:i,shipTokenAccountEscrow:f}})})}be.createPartialDepositInstruction=N2;function D2(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield Xr(u,i,t),[d,m]=yield Qn(u,i,s,t),[I,O]=yield Bn(u,i,t),[M,S]=yield _n(u,i),[R,C]=yield Rn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRearm(O,C,S,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,armsMint:s,armsTokenAccountSource:a,armsTokenAccountEscrow:d}})})}be.createRearmInstruction=D2;function F2(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield Xr(u,i,t),[d,m]=yield Qn(u,i,s,t),[I,O]=yield Bn(u,i,t),[M,S]=yield _n(u,i),[R,C]=yield Rn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefeed(O,C,S,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,foodMint:s,foodTokenAccountSource:a,foodTokenAccountEscrow:d}})})}be.createRefeedInstruction=F2;function U2(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield Xr(u,i,t),[d,m]=yield Qn(u,i,s,t),[I,O]=yield Bn(u,i,t),[M,S]=yield _n(u,i),[R,C]=yield Rn(u),Y=Mt(u),ae=new ue.AnchorProvider(r,null,null);return yield new ue.Program(Y,u,ae).instruction.processRefuel(O,C,S,h,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:I,scoreVarsAccount:R,scoreVarsShipAccount:M,escrowAuthority:f,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,fuelMint:s,fuelTokenAccountSource:a,fuelTokenAccountEscrow:d}})})}be.createRefuelInstruction=U2;function z2(r,e,t,n,i,s,a,u){return at(this,void 0,void 0,function*(){const[f,h]=yield Bn(u,i,t),[d,m]=yield _n(u,i),[I,O]=yield Rn(u),M=Mt(u),S=new ue.AnchorProvider(r,null,null);return yield new ue.Program(M,u,S).instruction.processRepair(h,O,m,new ue.BN(n),{accounts:{tokenOwnerAccount:e,playerAccount:t,shipStakingAccount:f,scoreVarsAccount:I,scoreVarsShipAccount:d,systemProgram:ue.web3.SystemProgram.programId,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,rent:ue.web3.SYSVAR_RENT_PUBKEY,shipMint:i,toolkitMint:s,toolkitTokenAccountSource:a}})})}be.createRepairInstruction=z2;function W2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Bn(i,n,e),[u,f]=yield _n(i,n),[h,d]=yield Rn(i),m=Mt(i),I=new ue.AnchorProvider(r,null,null);return yield new ue.Program(m,i,I).instruction.processSettle(a,d,f,{accounts:{playerAccount:e,updateAuthorityAccount:t,shipStakingAccount:s,scoreVarsShipAccount:u,scoreVarsAccount:h,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}})})}be.createSettleInstruction=W2;function V2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Bn(i,n,e),[u,f]=yield _n(i,n),[h,d]=yield Df(i),[m,I]=yield Ff(i),O=Mt(i),M=new ue.AnchorProvider(r,null,null),S=new ue.Program(O,i,M),R={signers:[],instructions:[]};let C;const Y=yield(0,Ks.getTokenAccount)(r,e,t),ae=Y.tokenAccount;"createInstruction"in Y&&R.instructions.push(...Y.createInstruction),ae instanceof ue.web3.Keypair?(C=ae.publicKey,R.signers.push(ae)):C=ae;const oe=yield S.instruction.processHarvest(a,f,d,I,{accounts:{playerAccount:e,shipStakingAccount:s,scoreVarsShipAccount:u,playerAtlasTokenAccount:C,treasuryTokenAccount:h,treasuryAuthorityAccount:m,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return R.instructions.push(oe),R})}be.createHarvestInstruction=V2;function $2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Xr(i,n,e),[u,f]=yield Qn(i,n,t,e),[h,d]=yield Bn(i,n,e),[m,I]=yield _n(i,n),[O,M]=yield Rn(i),S=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(S,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ks.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFuel(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,fuelTokenAccountEscrow:u,fuelTokenAccountReturn:ae,fuelMint:t,escrowAuthority:s,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFuelInstruction=$2;function j2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Xr(i,n,e),[u,f]=yield Qn(i,n,t,e),[h,d]=yield Bn(i,n,e),[m,I]=yield _n(i,n),[O,M]=yield Rn(i),S=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(S,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ks.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawFood(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,foodTokenAccountEscrow:u,foodTokenAccountReturn:ae,foodMint:t,escrowAuthority:s,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawFoodInstruction=j2;function q2(r,e,t,n,i){return at(this,void 0,void 0,function*(){const[s,a]=yield Xr(i,n,e),[u,f]=yield Qn(i,n,t,e),[h,d]=yield Bn(i,n,e),[m,I]=yield _n(i,n),[O,M]=yield Rn(i),S=Mt(i),R=new ue.AnchorProvider(r,null,null),C=new ue.Program(S,i,R),Y={signers:[],instructions:[]};let ae;const oe=yield(0,Ks.getTokenAccount)(r,e,t),de=oe.tokenAccount;"createInstruction"in oe&&Y.instructions.push(...oe.createInstruction),de instanceof ue.web3.Keypair?(ae=de.publicKey,Y.signers.push(de)):ae=de;const E=yield C.instruction.processWithdrawArms(d,M,I,a,f,{accounts:{playerAccount:e,shipStakingAccount:h,scoreVarsAccount:O,scoreVarsShipAccount:m,armsTokenAccountEscrow:u,armsTokenAccountReturn:ae,armsMint:t,escrowAuthority:s,tokenProgram:vr.TOKEN_PROGRAM_ID,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:n}});return Y.instructions.push(E),Y})}be.createWithdrawArmsInstruction=q2;function G2(r,e,t,n,i,s){return at(this,void 0,void 0,function*(){const[a,u]=yield Xr(s,t,e),[f,h]=yield Qn(s,t,null,e),[d,m]=yield Bn(s,t,e),[I,O]=yield _n(s,t),[M,S]=yield Rn(s),[R,C]=yield Df(s),[Y,ae]=yield Ff(s),oe={signers:[],instructions:[]},de=Mt(s),E=new ue.AnchorProvider(r,null,null),N=new ue.Program(de,s,E);let V;const J=yield(0,Ks.getTokenAccount)(r,e,n),K=J.tokenAccount;"createInstruction"in J&&oe.instructions.push(...J.createInstruction),K instanceof ue.web3.Keypair?(V=K.publicKey,oe.signers.push(K)):V=K;let j;const te=yield(0,Ks.getTokenAccount)(r,e,t),T=te.tokenAccount;"createInstruction"in te&&oe.instructions.push(...te.createInstruction),T instanceof ue.web3.Keypair?(j=T.publicKey,oe.signers.push(T)):j=T;let W;const X=yield(0,Ks.getTokenAccount)(r,e,i),Be=X.tokenAccount;"createInstruction"in X&&oe.instructions.push(...X.createInstruction),Be instanceof ue.web3.Keypair?(W=Be.publicKey,oe.signers.push(Be)):W=Be;const ye=yield N.instruction.processWithdrawShips(m,S,O,u,h,ae,C,{accounts:{playerAccount:e,shipStakingAccount:d,scoreVarsAccount:M,scoreVarsShipAccount:I,playerAtlasTokenAccount:V,shipTokenAccountEscrow:f,shipTokenAccountReturn:j,toolkitTokenAccountSource:W,treasuryTokenAccount:R,treasuryAuthorityAccount:Y,escrowAuthority:a,tokenProgram:vr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,clock:ue.web3.SYSVAR_CLOCK_PUBKEY,shipMint:t,toolkitMint:i}});return oe.instructions.push(ye),oe})}be.createWithdrawShipsInstruction=G2;function H2(r,e,t,n,i,s,a){return at(this,void 0,void 0,function*(){const[u,f]=yield Xr(a,t,e),[h,d]=yield Qn(a,t,null,e),[m,I]=yield Qn(a,t,n,e),[O,M]=yield Qn(a,t,i,e),[S,R]=yield Qn(a,t,s,e),[C,Y]=yield Rn(a),[ae,oe]=yield Bn(a,t,e),de=Mt(a),E=new ue.AnchorProvider(r,null,null);return yield new ue.Program(de,a,E).instruction.processCloseAccounts(oe,Y,d,I,M,R,f,{accounts:{playerAccount:e,shipStakingAccount:ae,scoreVarsAccount:C,shipTokenAccountEscrow:h,fuelTokenAccountEscrow:m,foodTokenAccountEscrow:O,armsTokenAccountEscrow:S,escrowAuthority:u,tokenProgram:vr.TOKEN_PROGRAM_ID,systemProgram:ue.web3.SystemProgram.programId,shipMint:t,fuelMint:n,foodMint:i,armsMint:s,clock:ue.web3.SYSVAR_CLOCK_PUBKEY}})})}be.closeAccountsInstruction=H2;var ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});var Jt={},ms=z&&z.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(d){try{h(n.next(d))}catch(m){a(m)}}function f(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?s(d.value):i(d.value).then(u,f)}h((n=n.apply(r,e||[])).next())})},Y2=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.sendTokens=Jt.confirmTokenBalance=Jt.createMint=Jt.mintTokens=Jt.createAssociatedTokenAccountInstruction=Jt.createRequestUnitsInstruction=Jt.Numberu32=Jt.createATokenAccount=Jt.getAtaForMint=void 0;const Dr=mt,pr=wc,J2=Fr,lv=rl.exports,fv=Y2(pv.exports);function eS(r,e){return ms(this,void 0,void 0,function*(){return Dr.web3.PublicKey.findProgramAddress([e.toBuffer(),pr.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],pr.ASSOCIATED_TOKEN_PROGRAM_ID)})}Jt.getAtaForMint=eS;function Q2(r,e,t,n){return ms(this,void 0,void 0,function*(){t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const[i]=yield eS(e,n),s=new Dr.web3.Transaction,a=yield nS(i,t,n,e);return s.add(a),yield r.sendAndConfirm(s),i})}Jt.createATokenAccount=Q2;class tS extends fv.default{toBuffer(){const e=super.toArray().reverse(),t=Pe.Buffer.from(e);if(t.length===4)return t;const n=Pe.Buffer.alloc(4);return t.copy(n),n}static fromBuffer(e){return new fv.default([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}Jt.Numberu32=tS;function X2(r){return ms(this,void 0,void 0,function*(){const e=new tS(1e6),t=Pe.Buffer.from([0]),n=e.toBuffer();return new Dr.web3.TransactionInstruction({keys:[{pubkey:r,isSigner:!0,isWritable:!0}],programId:new Dr.web3.PublicKey("ComputeBudget111111111111111111111111111111"),data:Pe.Buffer.concat([t,n])})})}Jt.createRequestUnitsInstruction=X2;function nS(r,e,t,n){return ms(this,void 0,void 0,function*(){const i=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Dr.web3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:pr.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:Dr.web3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Dr.web3.TransactionInstruction({keys:i,programId:pr.ASSOCIATED_TOKEN_PROGRAM_ID,data:Pe.Buffer.from([])})})}Jt.createAssociatedTokenAccountInstruction=nS;function Z2(r,e,t,n,i){return ms(this,void 0,void 0,function*(){const s=new Dr.web3.Transaction;return i=i||r.wallet.publicKey,s.add(pr.Token.createMintToInstruction(pr.TOKEN_PROGRAM_ID,e,t,i,[],n)),yield r.sendAndConfirm(s)})}Jt.mintTokens=Z2;function eF(r,e,t,n){return ms(this,void 0,void 0,function*(){const i=Dr.web3.Keypair.generate(),s=new Dr.web3.Transaction,a=yield r.connection.getMinimumBalanceForRentExemption(pr.MintLayout.span);t=t||r.wallet.publicKey,n=n||r.wallet.publicKey;const u=Dr.web3.SystemProgram.createAccount({fromPubkey:r.wallet.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:pr.MintLayout.span,programId:pr.TOKEN_PROGRAM_ID});s.add(u);const f=pr.Token.createInitMintInstruction(pr.TOKEN_PROGRAM_ID,i.publicKey,e,t,n);return s.add(f),yield r.sendAndConfirm(s,[i]),i.publicKey})}Jt.createMint=eF;function tF(r,e,t,n){return ms(this,void 0,void 0,function*(){const i=yield r.connection.getAccountInfo(e,"recent");if(n===!0&&(0,lv.strict)(i===null),i!==null){const s=(0,J2.byteArrayToLong)(i.data.slice(64,72));(0,lv.strict)(s==t,`On-chain Token amount of ${s} does not match expected amount ${t}`)}else console.log("Token account %s does not exist",e.toString())})}Jt.confirmTokenBalance=tF;function nF(r,e,t,n){return ms(this,void 0,void 0,function*(){const i=new Dr.web3.Transaction;return i.add(pr.Token.createTransferInstruction(pr.TOKEN_PROGRAM_ID,e,t,r.wallet.publicKey,[],n)),yield r.sendAndConfirm(i)})}Jt.sendTokens=nF;(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(i,s);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,u)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Bl,r),t(JA,r),t(QA,r),t(Gp,r),t(be,r),t(ZA,r),t(Jt,r),t(Us,r),t(Fr,r)})(Ln);const $u=new Je("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),dv=new Je("poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk"),rF=new Je("ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU"),Ji=new Je("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc");class iF{multisigPDA;vaultPDA;registeredStakeAtlas;stakingAccountAtlas;async init(e){this.multisigPDA=e,this._setVaultPDA(),await this._setRegisteredStakeAtlas(),await this._setStakingAccountAtlas()}_setVaultPDA(){const[e]=Bh({multisigPda:new Je(this.multisigPDA),index:0});this.vaultPDA=e}async _setRegisteredStakeAtlas(){const[e]=await Ln.getRegisteredStake(Ji,rF,$u,dv);this.registeredStakeAtlas=e}async _setStakingAccountAtlas(){const[e]=await Ln.getStakingAccount(Ji,this.vaultPDA,this.registeredStakeAtlas);this.stakingAccountAtlas=e}async buildCreateStatingAccount(){return await Ln.createStakingAccountInstruction({connection:Kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,programId:Ji})}async buildStakeTokens(e){const[t]=Je.findProgramAddressSync([this.vaultPDA.toBuffer(),qP.toBuffer(),$u.toBuffer()],tT.ASSOCIATED_PROGRAM_ID);return await Ln.stakeTokensInstruction({connection:Kn().connection,user:this.vaultPDA,stakeMint:$u,tokenSource:t,stakingAccount:this.stakingAccountAtlas,stakeQuantity:new Mi(parseFloat(e.toString())*Math.pow(10,sF)),registeredStake:this.registeredStakeAtlas,programId:Ji})}async buildHarvestRewards(){return await Ln.harvestRewardsInstruction({connection:Kn().connection,user:this.vaultPDA,rewardMint:dv,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:Ji})}async buildWithdrawTokens(){return await Ln.withdrawTokensInstruction({connection:Kn().connection,user:this.vaultPDA,authority:this.vaultPDA,stakeMint:$u,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:Ji})}async buildUnstakeTokens(){return await Ln.unstakeTokensInstruction({connection:Kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,stakingAccount:this.stakingAccountAtlas,programId:Ji})}async buildCancelUnstake(){return await Ln.cancelUnstakeInstruction({connection:Kn().connection,user:this.vaultPDA,registeredStake:this.registeredStakeAtlas,programId:Ji})}}const ko="[ATLAS-LOCKER] ",sF=8,ec=new Je("ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx"),Tl=new Je("poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk"),ju=new Je("ATLocKpzDbTokxgvnLew3d7drZkEzLzDpzwgrgWKDbmc"),hv=new Je("ATLkZsBofSKG845dNFpNoUyMciGpeH29BCbMqYFUoxzU"),ot=GP("globalStarAtlasLockerStore",{state:()=>({multisigPDA:HP("multisigPDA",""),vaultPDA:{},multisigInfo:{},registeredStakeAtlas:{},registeredStakePolis:{},stakingAccountAtlas:{},stakingAccountAtlasInfo:{},atlas_balance_wallet:"0",polis_balance_wallet:"0",atlas_balance_squads:"0",polis_balance_squads:"0",atlas_balance_locker:"0",polis_balance_locker:"0",SAFactory_LockerAtlas:new iF}),getters:{getMultisigPDA(r){return new Je(r.multisigPDA)},getVaultPDA(){try{const[r]=Bh({multisigPda:new Je(this.multisigPDA),index:0});return r}catch{return""}},getNewTransactionIndex(r){const e=Number(r.multisigInfo.transactionIndex);return BigInt(e+1)}},actions:{async setAccounts(){ot().atlas_balance_wallet="0",ot().polis_balance_wallet="0",ot().atlas_balance_squads="0",ot().polis_balance_squads="0",ot().atlas_balance_locker="0",ot().polis_balance_locker="0",ot().stakingAccountAtlasInfo=void 0;const[r]=Bh({multisigPda:new Je(this.multisigPDA),index:0});this.vaultPDA=r,this.multisigInfo=await YP.fromAccountAddress(Kn().connection,new Je(this.multisigPDA));const[e]=await Ln.getRegisteredStake(ju,hv,ec,Tl);this.registeredStakeAtlas=e;const[t]=await Ln.getRegisteredStake(ju,hv,ec,Tl);this.registeredStakePolis=t;try{const[n]=await Ln.getStakingAccount(ju,this.vaultPDA,this.registeredStakeAtlas);this.stakingAccountAtlas=n}catch{}try{this.stakingAccountAtlasInfo=await Ln.getStakingAccountInfo(Kn().connection,this.stakingAccountAtlas,ju)}catch{}await oF()},async build_CreateStatingAccount(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"CreateStatingAccount: "+rT,[(await this.SAFactory_LockerAtlas.buildCreateStatingAccount()).instructions[0]])},async build_StakeTokens(r){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"StakeTokens: "+r,[(await this.SAFactory_LockerAtlas.buildStakeTokens(r)).instructions[0]])},async build_harvestRewards(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"HarvestRewards",[(await this.SAFactory_LockerAtlas.buildHarvestRewards()).instructions[0]])},async build_withdrawTokens(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"WithdrawTokens",[(await this.SAFactory_LockerAtlas.buildWithdrawTokens()).instructions[0]])},async build_unstakeTokens(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"UnstakeTokens",[(await this.SAFactory_LockerAtlas.buildUnstakeTokens()).instructions[0]])},async build_cancelUnstake(){await this.SAFactory_LockerAtlas.init(this.multisigPDA),await Io(ko+"CancelUnstake",[(await this.SAFactory_LockerAtlas.buildCancelUnstake()).instructions[0]])}}});async function Io(r,e){const{sendTransaction:t,publicKey:n}=tc(),i=new JP({payerKey:ot().vaultPDA,recentBlockhash:(await Kn().connection.getLatestBlockhash()).blockhash,instructions:e}),s=nT({multisigPda:new Je(ot().multisigPDA),transactionIndex:ot().getNewTransactionIndex,creator:n.value,vaultIndex:0,ephemeralSigners:0,transactionMessage:i,memo:r});console.log("build: "+r);const a=await t(new lp().add(s),Kn().connection);await iT(a)}async function oF(){const{publicKey:r}=tc();if(!r.value)return;const e=await Ka(ec,r.value),t=await Ka(Tl,r.value),n=await Ka(ec,ot().vaultPDA,!0),i=await Ka(Tl,ot().vaultPDA,!0),s=await Ka(ec,ot().stakingAccountAtlas,!0);try{ot().atlas_balance_wallet=(await Kn().connection.getTokenAccountBalance(e)).value.uiAmountString??"0"}catch{ot().atlas_balance_wallet="-"}try{ot().polis_balance_wallet=(await Kn().connection.getTokenAccountBalance(t)).value.uiAmountString??"0"}catch{ot().polis_balance_wallet="-"}try{ot().atlas_balance_squads=(await Kn().connection.getTokenAccountBalance(n)).value.uiAmountString??"0"}catch{ot().atlas_balance_squads="-"}try{ot().polis_balance_squads=(await Kn().connection.getTokenAccountBalance(i)).value.uiAmountString??"0"}catch{ot().polis_balance_squads="-"}try{ot().atlas_balance_locker=(await Kn().connection.getTokenAccountBalance(s)).value.uiAmountString??""}catch{ot().atlas_balance_locker="-"}}const aF={class:"row"},cF=it("div",{class:"col-3"},"Wallet",-1),uF={class:"col"},lF={class:"row q-gutter-x-xs no-wrap justify-end"},fF=it("div",null,"Atlas",-1),dF={class:"col"},hF={class:"row q-gutter-x-xs no-wrap justify-end"},pF=it("div",null,"Polis",-1),gF={class:"row"},yF=it("div",{class:"col-3"},"Squads",-1),mF={class:"col"},bF={class:"row q-gutter-x-xs no-wrap justify-end"},vF=it("div",null,"Atlas",-1),_F={class:"col"},wF={class:"row q-gutter-x-xs no-wrap justify-end"},AF=it("div",null,"Polis",-1),SF={class:"row"},kF=it("div",{class:"col-3"},"Locker",-1),IF={class:"col"},EF={class:"row q-gutter-x-xs no-wrap justify-end"},OF=it("div",null,"Atlas",-1),PF={class:"col"},TF={class:"row q-gutter-x-xs no-wrap justify-end"},RF=it("div",null,"Polis",-1),BF=Iv({__name:"TokenLockerBalances",setup(r){return QP(async()=>{tc().publicKey.value&&await ot().setAccounts()}),XP(()=>tc().publicKey.value,async()=>{await ot().setAccounts()}),(e,t)=>(qu(),Ev(DP,{class:""},{default:sl(()=>[Ps(NP,null,{default:sl(()=>[it("div",aF,[cF,it("div",uF,[it("div",lF,[it("div",null,bo(Qi(ot)().atlas_balance_wallet),1),fF])]),it("div",dF,[it("div",hF,[it("div",null,bo(Qi(ot)().polis_balance_wallet),1),pF])])]),it("div",gF,[yF,it("div",mF,[it("div",bF,[it("div",null,bo(Qi(ot)().atlas_balance_squads),1),vF])]),it("div",_F,[it("div",wF,[it("div",null,bo(Qi(ot)().polis_balance_squads),1),AF])])]),it("div",SF,[kF,it("div",IF,[it("div",EF,[it("div",null,bo(Qi(ot)().atlas_balance_locker),1),OF])]),it("div",PF,[it("div",TF,[it("div",null,bo(Qi(ot)().polis_balance_locker),1),RF])])])]),_:1})]),_:1}))}}),xF={key:0,class:"col absolute-center"},MF={key:1},CF=it("div",{class:"col"},null,-1),YF=Iv({__name:"StarAtlasLocker",setup(r){const e=ZP("setup");return(t,n)=>(qu(),Ev(KP,{class:"bg-black"},{default:sl(()=>{var i,s;return[(s=(i=Qi(tc)().publicKey)==null?void 0:i.value)!=null&&s.toString()?(qu(),jm("div",MF,[Ps(LP,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=a=>e.value=a),align:"left",class:""},{default:sl(()=>[Ps(nh,{name:"setup",label:"Setup"}),Ps(nh,{name:"atlas",label:"Atlas"}),Ps(nh,{name:"polis",label:"Polis"}),CF,Ps(BF,{class:"q-pr-md col"})]),_:1},8,["modelValue"])])):(qu(),jm("div",xF,[Ps(Qi(eT),{dark:""})]))]}),_:1}))}});export{YF as default};
