import{d6 as J,bX as z,hd as Um,bW as Kf,gD as Ka,gC as Ve,gF as Fm,dq as vt,h8 as Nr,gG as jv,he as zv,hf as qv,gE as Hv,hg as Eh,gH as Km,gI as Wv,gJ as Gv,gK as Vv,gL as $m,gM as jm,gN as zm,gO as qm,gP as Hm,gQ as Wm,gR as Gm,bY as Sh,gS as yn,d2 as Ne,gT as Oe,gU as di,d3 as Jt,fd as xn,gV as Ao,eC as Ei,gW as kh,eY as pr,gX as Jv,gY as Yv,gZ as Xv,g_ as eg,g$ as Vm,h0 as tg,h1 as $a,h2 as Zv}from"./index.8163ada5.js";import{b as Qv,c as Qs,e as Jm,s as $f,l as e_,a as t_,d as r_,r as Ym,f as n_,h as Mn,g as i_}from"./TokenManagePage.3112f801.js";function s_(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in r)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var Th={},xf={},Ih={},Ph={exports:{}},Xm=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},o_=Xm,eo=Object.prototype.toString;function Rh(r){return Array.isArray(r)}function $d(r){return typeof r>"u"}function a_(r){return r!==null&&!$d(r)&&r.constructor!==null&&!$d(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Zm(r){return eo.call(r)==="[object ArrayBuffer]"}function c_(r){return eo.call(r)==="[object FormData]"}function u_(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Zm(r.buffer),e}function f_(r){return typeof r=="string"}function l_(r){return typeof r=="number"}function Qm(r){return r!==null&&typeof r=="object"}function ef(r){if(eo.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function d_(r){return eo.call(r)==="[object Date]"}function h_(r){return eo.call(r)==="[object File]"}function p_(r){return eo.call(r)==="[object Blob]"}function eb(r){return eo.call(r)==="[object Function]"}function g_(r){return Qm(r)&&eb(r.pipe)}function y_(r){return eo.call(r)==="[object URLSearchParams]"}function m_(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function b_(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ch(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Rh(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function jd(){var r={};function e(i,s){ef(r[s])&&ef(i)?r[s]=jd(r[s],i):ef(i)?r[s]=jd({},i):Rh(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)Ch(arguments[t],e);return r}function x_(r,e,t){return Ch(e,function(i,s){t&&typeof i=="function"?r[s]=o_(i,t):r[s]=i}),r}function w_(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var Un={isArray:Rh,isArrayBuffer:Zm,isBuffer:a_,isFormData:c_,isArrayBufferView:u_,isString:f_,isNumber:l_,isObject:Qm,isPlainObject:ef,isUndefined:$d,isDate:d_,isFile:h_,isBlob:p_,isFunction:eb,isStream:g_,isURLSearchParams:y_,isStandardBrowserEnv:b_,forEach:Ch,merge:jd,extend:x_,trim:m_,stripBOM:w_},Zo=Un;function rg(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tb=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Zo.isURLSearchParams(t))i=t.toString();else{var s=[];Zo.forEach(t,function(u,d){u===null||typeof u>"u"||(Zo.isArray(u)?d=d+"[]":u=[u],Zo.forEach(u,function(m){Zo.isDate(m)?m=m.toISOString():Zo.isObject(m)&&(m=JSON.stringify(m)),s.push(rg(d)+"="+rg(m))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},v_=Un;function jf(){this.handlers=[]}jf.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};jf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};jf.prototype.forEach=function(e){v_.forEach(this.handlers,function(n){n!==null&&e(n)})};var __=jf,A_=Un,E_=function(e,t){A_.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},rb=function(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},S_=rb,nb=function(e,t,n,i,s){var o=new Error(e);return S_(o,t,n,i,s)},k_=nb,T_=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(k_("Request failed with status code "+n.status,n.config,null,n.request,n))},Nu=Un,I_=Nu.isStandardBrowserEnv()?function(){return{write:function(t,n,i,s,o,a){var u=[];u.push(t+"="+encodeURIComponent(n)),Nu.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Nu.isString(s)&&u.push("path="+s),Nu.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),P_=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},R_=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},C_=P_,M_=R_,B_=function(e,t){return e&&!C_(t)?M_(e,t):t},Hl=Un,N_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],O_=function(e){var t={},n,i,s;return e&&Hl.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=Hl.trim(a.substr(0,s)).toLowerCase(),i=Hl.trim(a.substr(s+1)),n){if(t[n]&&N_.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t},ng=Un,L_=ng.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(o){var a=ng.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Mh(r){this.message=r}Mh.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Mh.prototype.__CANCEL__=!0;var zf=Mh,Ou=Un,D_=T_,U_=I_,F_=tb,K_=B_,$_=O_,j_=L_,Wl=nb,z_=Hf,q_=zf,ig=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType,u;function d(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}Ou.isFormData(s)&&delete o["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(m+":"+v)}var _=K_(e.baseURL,e.url);h.open(e.method.toUpperCase(),F_(_,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function P(){if(!!h){var E="getAllResponseHeaders"in h?$_(h.getAllResponseHeaders()):null,T=!a||a==="text"||a==="json"?h.responseText:h.response,C={data:T,status:h.status,statusText:h.statusText,headers:E,config:e,request:h};D_(function(K){n(K),d()},function(K){i(K),d()},C),h=null}}if("onloadend"in h?h.onloadend=P:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(P)},h.onabort=function(){!h||(i(Wl("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){i(Wl("Network Error",e,null,h)),h=null},h.ontimeout=function(){var T=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",C=e.transitional||z_.transitional;e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),i(Wl(T,e,C.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},Ou.isStandardBrowserEnv()){var A=(e.withCredentials||j_(_))&&e.xsrfCookieName?U_.read(e.xsrfCookieName):void 0;A&&(o[e.xsrfHeaderName]=A)}"setRequestHeader"in h&&Ou.forEach(o,function(T,C){typeof s>"u"&&C.toLowerCase()==="content-type"?delete o[C]:h.setRequestHeader(C,T)}),Ou.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),a&&a!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(E){!h||(i(!E||E&&E.type?new q_("canceled"):E),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),s||(s=null),h.send(s)})},Qr=Un,sg=E_,H_=rb,W_={"Content-Type":"application/x-www-form-urlencoded"};function og(r,e){!Qr.isUndefined(r)&&Qr.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function G_(){var r;return(typeof XMLHttpRequest<"u"||typeof J.process<"u"&&Object.prototype.toString.call(J.process)==="[object process]")&&(r=ig),r}function V_(r,e,t){if(Qr.isString(r))try{return(e||JSON.parse)(r),Qr.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var qf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:G_(),transformRequest:[function(e,t){return sg(t,"Accept"),sg(t,"Content-Type"),Qr.isFormData(e)||Qr.isArrayBuffer(e)||Qr.isBuffer(e)||Qr.isStream(e)||Qr.isFile(e)||Qr.isBlob(e)?e:Qr.isArrayBufferView(e)?e.buffer:Qr.isURLSearchParams(e)?(og(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Qr.isObject(e)||t&&t["Content-Type"]==="application/json"?(og(t,"application/json"),V_(e)):e}],transformResponse:[function(e){var t=this.transitional||qf.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Qr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?H_(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qr.forEach(["delete","get","head"],function(e){qf.headers[e]={}});Qr.forEach(["post","put","patch"],function(e){qf.headers[e]=Qr.merge(W_)});var Hf=qf,J_=Un,Y_=Hf,X_=function(e,t,n){var i=this||Y_;return J_.forEach(n,function(o){e=o.call(i,e,t)}),e},ib=function(e){return!!(e&&e.__CANCEL__)},ag=Un,Gl=X_,Z_=ib,Q_=Hf,e2=zf;function Vl(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new e2("canceled")}var t2=function(e){Vl(e),e.headers=e.headers||{},e.data=Gl.call(e,e.data,e.headers,e.transformRequest),e.headers=ag.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ag.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||Q_.adapter;return t(e).then(function(i){return Vl(e),i.data=Gl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Z_(i)||(Vl(e),i&&i.response&&(i.response.data=Gl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Hn=Un,sb=function(e,t){t=t||{};var n={};function i(h,m){return Hn.isPlainObject(h)&&Hn.isPlainObject(m)?Hn.merge(h,m):Hn.isPlainObject(m)?Hn.merge({},m):Hn.isArray(m)?m.slice():m}function s(h){if(Hn.isUndefined(t[h])){if(!Hn.isUndefined(e[h]))return i(void 0,e[h])}else return i(e[h],t[h])}function o(h){if(!Hn.isUndefined(t[h]))return i(void 0,t[h])}function a(h){if(Hn.isUndefined(t[h])){if(!Hn.isUndefined(e[h]))return i(void 0,e[h])}else return i(void 0,t[h])}function u(h){if(h in t)return i(e[h],t[h]);if(h in e)return i(void 0,e[h])}var d={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Hn.forEach(Object.keys(e).concat(Object.keys(t)),function(m){var v=d[m]||s,_=v(m);Hn.isUndefined(_)&&v!==u||(n[m]=_)}),n},ob={version:"0.25.0"},r2=ob.version,Bh={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Bh[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var cg={};Bh.transitional=function(e,t,n){function i(s,o){return"[Axios v"+r2+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(t?" in "+t:"")));return t&&!cg[o]&&(cg[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function n2(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],u=a===void 0||o(a,s,r);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(t!==!0)throw Error("Unknown option "+s)}}var i2={assertOptions:n2,validators:Bh},ab=Un,s2=tb,ug=__,fg=t2,Wf=sb,cb=i2,Qo=cb.validators;function Qc(r){this.defaults=r,this.interceptors={request:new ug,response:new ug}}Qc.prototype.request=function(e,t){if(typeof e=="string"?(t=t||{},t.url=e):t=e||{},!t.url)throw new Error("Provided config url is not valid");t=Wf(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&cb.assertOptions(n,{silentJSONParsing:Qo.transitional(Qo.boolean),forcedJSONParsing:Qo.transitional(Qo.boolean),clarifyTimeoutError:Qo.transitional(Qo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(s=s&&_.synchronous,i.unshift(_.fulfilled,_.rejected))});var o=[];this.interceptors.response.forEach(function(_){o.push(_.fulfilled,_.rejected)});var a;if(!s){var u=[fg,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(o),a=Promise.resolve(t);u.length;)a=a.then(u.shift(),u.shift());return a}for(var d=t;i.length;){var h=i.shift(),m=i.shift();try{d=h(d)}catch(v){m(v);break}}try{a=fg(d)}catch(v){return Promise.reject(v)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Qc.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Wf(this.defaults,e),s2(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ab.forEach(["delete","get","head","options"],function(e){Qc.prototype[e]=function(t,n){return this.request(Wf(n||{},{method:e,url:t,data:(n||{}).data}))}});ab.forEach(["post","put","patch"],function(e){Qc.prototype[e]=function(t,n,i){return this.request(Wf(i||{},{method:e,url:t,data:n}))}});var o2=Qc,a2=zf;function Ta(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(!!t._listeners){var i,s=t._listeners.length;for(i=0;i<s;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){t.subscribe(o),i=o}).then(n);return s.cancel=function(){t.unsubscribe(i)},s},r(function(i){t.reason||(t.reason=new a2(i),e(t.reason))})}Ta.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ta.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Ta.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Ta.source=function(){var e,t=new Ta(function(i){e=i});return{token:t,cancel:e}};var c2=Ta,u2=function(e){return function(n){return e.apply(null,n)}},f2=Un,l2=function(e){return f2.isObject(e)&&e.isAxiosError===!0},lg=Un,d2=Xm,tf=o2,h2=sb,p2=Hf;function ub(r){var e=new tf(r),t=d2(tf.prototype.request,e);return lg.extend(t,tf.prototype,e),lg.extend(t,e),t.create=function(i){return ub(h2(r,i))},t}var ss=ub(p2);ss.Axios=tf;ss.Cancel=zf;ss.CancelToken=c2;ss.isCancel=ib;ss.VERSION=ob.version;ss.all=function(e){return Promise.all(e)};ss.spread=u2;ss.isAxiosError=l2;Ph.exports=ss;Ph.exports.default=ss;var Nh=Ph.exports,g2=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ih,"__esModule",{value:!0});const y2=g2(Nh);class m2{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=y2.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(t=>(this.config.logger(`Requesting: ${t.baseURL}/${t.url}`),t)),e.interceptors.response.use(t=>(this.config.logger(`Response:   ${t.config.url} - ${t.status}`),t))),e}}Ih.default=m2;var Oh={},Gf={},eu={},Ii={},tu={},mr={},b2=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),x2=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),w2=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&b2(e,r,t);return x2(e,r),e};Object.defineProperty(mr,"__esModule",{value:!0});mr.b64UrlDecode=mr.b64UrlEncode=mr.bufferTob64Url=mr.bufferTob64=mr.b64UrlToBuffer=mr.stringToB64Url=mr.stringToBuffer=mr.bufferToString=mr.b64UrlToString=mr.concatBuffers=void 0;const fb=w2(Um);function v2(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}mr.concatBuffers=v2;function _2(r){let e=hb(r);return lb(e)}mr.b64UrlToString=_2;function lb(r){return new TextDecoder("utf-8",{fatal:!0}).decode(r)}mr.bufferToString=lb;function db(r){return new TextEncoder().encode(r)}mr.stringToBuffer=db;function A2(r){return gb(db(r))}mr.stringToB64Url=A2;function hb(r){return new Uint8Array(fb.toByteArray(mb(r)))}mr.b64UrlToBuffer=hb;function pb(r){return fb.fromByteArray(new Uint8Array(r))}mr.bufferTob64=pb;function gb(r){return yb(pb(r))}mr.bufferTob64Url=gb;function yb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}mr.b64UrlEncode=yb;function mb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}mr.b64UrlDecode=mb;var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.isBrowser=Kr.arraybufferEqual=Kr.byteArrayToLong=Kr.longTo32ByteArray=Kr.longTo16ByteArray=Kr.shortTo2ByteArray=Kr.longTo8ByteArray=void 0;function E2(r){const e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){const n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}Kr.longTo8ByteArray=E2;function S2(r){if(r>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let t=0;t<e.length;t++){const n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}Kr.shortTo2ByteArray=S2;function k2(r){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){const n=r&255;e[t]=n,r=(r-n)/256}return e}Kr.longTo16ByteArray=k2;function T2(r){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){const n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}Kr.longTo32ByteArray=T2;function I2(r){let e=0;for(let t=r.length-1;t>=0;t--)e=e*256+r[t];return e}Kr.byteArrayToLong=I2;function P2(r,e){const t=r.buffer,n=e.buffer;if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;const i=new DataView(t),s=new DataView(n);let o=t.byteLength;for(;o--;)if(i.getUint8(o)!==s.getUint8(o))return!1;return!0}Kr.arraybufferEqual=P2;Kr.isBrowser=typeof window<"u"&&typeof window.document<"u";var vs={},Bo={},Ia={},Lh={},to=Kf(Qv);Object.defineProperty(Lh,"__esModule",{value:!0});const R2=to;class C2{BigNum;constructor(){this.BigNum=(e,t)=>{let n=R2.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return t?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e);return this.stringToBigNum(t),n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e);return this.stringToBigNum(t),n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}}Lh.default=C2;var Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});class M2{METHOD_GET="GET";METHOD_POST="POST";config;constructor(e){this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){return await this.request(e,{...t,method:this.METHOD_GET})}async post(e,t,n){var s;const i=new Headers((n==null?void 0:n.headers)||{});return(s=i.get("content-type"))!=null&&s.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof t!="string"?JSON.stringify(t):t,headers:i})}async request(e,t){var m;const n=new Headers((t==null?void 0:t.headers)||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=t==null?void 0:t.responseType;t==null||delete t.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let o=await fetch(`${i}/${e}`,{...t||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${o.url} - ${o.status}`);const a=o.headers.get("content-type"),u=(m=a==null?void 0:a.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i))==null?void 0:m[1],d=o,h=async()=>{if(u)try{d.data=new TextDecoder(u).decode(await o.arrayBuffer())}catch{d.data=await o.text()}else d.data=await o.text()};if(s==="arraybuffer")d.data=await o.arrayBuffer();else if(s==="text")await h();else if(s==="webstream")d.data=B2(o.body);else try{let v=await o.clone().json();typeof v!="object"?await h():d.data=await o.json(),v=null}catch{await h()}return d}}Dh.default=M2;const B2=r=>{const e=r;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=N2(r),e):r},N2=function(r){return async function*(){const t=r.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)return;yield i}}finally{t.releaseLock()}}};var Uh={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.b64UrlDecode=Yt.b64UrlEncode=Yt.bufferTob64Url=Yt.bufferTob64=Yt.b64UrlToBuffer=Yt.stringToB64Url=Yt.stringToBuffer=Yt.bufferToString=Yt.b64UrlToString=Yt.concatBuffers=void 0;const bb=Um;function O2(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}Yt.concatBuffers=O2;function L2(r){let e=vb(r);return xb(e)}Yt.b64UrlToString=L2;function xb(r){return new TextDecoder("utf-8",{fatal:!0}).decode(r)}Yt.bufferToString=xb;function wb(r){return new TextEncoder().encode(r)}Yt.stringToBuffer=wb;function D2(r){return Ab(wb(r))}Yt.stringToB64Url=D2;function vb(r){return new Uint8Array(bb.toByteArray(Sb(r)))}Yt.b64UrlToBuffer=vb;function _b(r){return bb.fromByteArray(new Uint8Array(r))}Yt.bufferTob64=_b;function Ab(r){return Eb(_b(r))}Yt.bufferTob64Url=Ab;function Eb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Yt.b64UrlEncode=Eb;function Sb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}Yt.b64UrlDecode=Sb;Object.defineProperty(Uh,"__esModule",{value:!0});const Ms=Yt;class U2{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),t);return new Uint8Array(i)}async hash(e,t="SHA-256"){let n=await this.driver.digest(t,e);return new Uint8Array(n)}async verify(e,t,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),o=await this.driver.digest("SHA-256",t),a=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,t),u=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,t),d=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-o.byteLength-2},s,n,t);return a||u||d}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,t,n){const i=await this.driver.importKey("raw",typeof t=="string"?Ms.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Ms.stringToBuffer(n):Ms.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=new Uint8Array(16);crypto.getRandomValues(o);const a=await this.driver.encrypt({name:"AES-CBC",iv:o},s,e);return Ms.concatBuffers([o,a])}async decrypt(e,t,n){const i=await this.driver.importKey("raw",typeof t=="string"?Ms.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Ms.stringToBuffer(n):Ms.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=e.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:o},s,e.slice(16));return Ms.concatBuffers([a])}}Uh.default=U2;var Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});class F2{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}Fh.default=F2;var Kh={},ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.getError=void 0;class K2 extends Error{type;response;constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}}ro.default=K2;function $2(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}ro.getError=$2;var No={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});const Wn=Ia;async function kb(r){if(Array.isArray(r)){const n=Wn.default.utils.concatBuffers([Wn.default.utils.stringToBuffer("list"),Wn.default.utils.stringToBuffer(r.length.toString())]);return await Tb(r,await Wn.default.crypto.hash(n,"SHA-384"))}const e=Wn.default.utils.concatBuffers([Wn.default.utils.stringToBuffer("blob"),Wn.default.utils.stringToBuffer(r.byteLength.toString())]),t=Wn.default.utils.concatBuffers([await Wn.default.crypto.hash(e,"SHA-384"),await Wn.default.crypto.hash(r,"SHA-384")]);return await Wn.default.crypto.hash(t,"SHA-384")}Vf.default=kb;async function Tb(r,e){if(r.length<1)return e;const t=Wn.default.utils.concatBuffers([e,await kb(r[0])]),n=await Wn.default.crypto.hash(t,"SHA-384");return await Tb(r.slice(1),n)}var $h={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.debug=r.validatePath=r.arrayCompare=r.bufferToInt=r.intToBuffer=r.arrayFlatten=r.generateProofs=r.buildLayers=r.generateTransactionChunks=r.generateTree=r.computeRootHash=r.generateLeaves=r.chunkData=r.MIN_CHUNK_SIZE=r.MAX_CHUNK_SIZE=void 0;const e=Ia,t=Yt;r.MAX_CHUNK_SIZE=256*1024,r.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(O){let F=[],H=O,V=0;for(;H.byteLength>=r.MAX_CHUNK_SIZE;){let ie=r.MAX_CHUNK_SIZE,xe=H.byteLength-r.MAX_CHUNK_SIZE;xe>0&&xe<r.MIN_CHUNK_SIZE&&(ie=Math.ceil(H.byteLength/2));const ae=H.slice(0,ie),te=await e.default.crypto.hash(ae);V+=ae.byteLength,F.push({dataHash:te,minByteRange:V-ae.byteLength,maxByteRange:V}),H=H.slice(ie)}return F.push({dataHash:await e.default.crypto.hash(H),minByteRange:V,maxByteRange:V+H.byteLength}),F}r.chunkData=s;async function o(O){return Promise.all(O.map(async({dataHash:F,minByteRange:H,maxByteRange:V})=>({type:"leaf",id:await A(await Promise.all([A(F),A(E(V))])),dataHash:F,minByteRange:H,maxByteRange:V})))}r.generateLeaves=o;async function a(O){return(await u(O)).id}r.computeRootHash=a;async function u(O){return await h(await o(await s(O)))}r.generateTree=u;async function d(O){const F=await s(O),H=await o(F),V=await h(H),ie=await m(V),xe=F.slice(-1)[0];return xe.maxByteRange-xe.minByteRange===0&&(F.splice(F.length-1,1),ie.splice(ie.length-1,1)),{data_root:V.id,chunks:F,proofs:ie}}r.generateTransactionChunks=d;async function h(O,F=0){if(O.length<2)return O[0];const H=[];for(let V=0;V<O.length;V+=2)H.push(await P(O[V],O[V+1]));return h(H,F+1)}r.buildLayers=h;function m(O){const F=v(O);return Array.isArray(F)?_(F):[F]}r.generateProofs=m;function v(O,F=new Uint8Array,H=0){if(O.type=="leaf")return{offset:O.maxByteRange-1,proof:(0,t.concatBuffers)([F,O.dataHash,E(O.maxByteRange)])};if(O.type=="branch"){const V=(0,t.concatBuffers)([F,O.leftChild.id,O.rightChild.id,E(O.byteRange)]);return[v(O.leftChild,V,H+1),v(O.rightChild,V,H+1)]}throw new Error("Unexpected node type")}function _(O){const F=[];return O.forEach(H=>{Array.isArray(H)?F.push(..._(H)):F.push(H)}),F}r.arrayFlatten=_;async function P(O,F){return F?{type:"branch",id:await A([await A(O.id),await A(F.id),await A(E(O.maxByteRange))]),byteRange:O.maxByteRange,maxByteRange:F.maxByteRange,leftChild:O,rightChild:F}:O}async function A(O){return Array.isArray(O)&&(O=e.default.utils.concatBuffers(O)),new Uint8Array(await e.default.crypto.hash(O))}function E(O){const F=new Uint8Array(n);for(var H=F.length-1;H>=0;H--){var V=O%256;F[H]=V,O=(O-V)/256}return F}r.intToBuffer=E;function T(O){let F=0;for(var H=0;H<O.length;H++)F*=256,F+=O[H];return F}r.bufferToInt=T;const C=(O,F)=>O.every((H,V)=>F[V]===H);r.arrayCompare=C;async function L(O,F,H,V,ie){if(V<=0)return!1;if(F>=V)return L(O,0,V-1,V,ie);if(F<0)return L(O,0,0,V,ie);if(ie.length==i+n){const y=ie.slice(0,i),w=ie.slice(y.length,y.length+n),S=await A([await A(y),await A(w)]);return(0,r.arrayCompare)(O,S)?{offset:V-1,leftBound:H,rightBound:V,chunkSize:V-H}:!1}const xe=ie.slice(0,i),ae=ie.slice(xe.length,xe.length+i),te=ie.slice(xe.length+ae.length,xe.length+ae.length+n),x=T(te),c=ie.slice(xe.length+ae.length+te.length),l=await A([await A(xe),await A(ae),await A(te)]);return(0,r.arrayCompare)(O,l)?F<x?await L(xe,F,H,Math.min(V,x),c):await L(ae,F,Math.max(H,x),V,c):!1}r.validatePath=L;async function K(O,F=""){if(O.byteLength<1)return F;const H=O.slice(0,i),V=O.slice(H.length,H.length+i),ie=O.slice(H.length+V.length,H.length+V.length+n),xe=T(ie),ae=O.slice(H.length+V.length+ie.length),te=await A([await A(H),await A(V),await A(ie)]),x=`${F}
${JSON.stringify(J.Buffer.from(H))},${JSON.stringify(J.Buffer.from(V))},${xe} => ${JSON.stringify(te)}`;return K(ae,x)}r.debug=K})($h);Object.defineProperty(No,"__esModule",{value:!0});No.Tag=void 0;const Hr=Yt,j2=Vf,z2=$h;class Ib{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return t&&t.decode&&t.string?Hr.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:Hr.bufferTob64Url(this[e]);if(this[e]instanceof Array){if((t==null?void 0:t.decode)!==void 0||(t==null?void 0:t.string)!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return t&&t.decode==!0?t&&t.string?Hr.b64UrlToString(this[e]):Hr.b64UrlToBuffer(this[e]):this[e]}}class zd extends Ib{name;value;constructor(e,t,n=!1){super(),this.name=e,this.value=t}}No.Tag=zd;class q2 extends Ib{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(e={}){super(),Object.assign(this,e),typeof this.data=="string"&&(this.data=Hr.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new zd(t.name,t.value)))}addTag(e,t){this.tags.push(new zd(Hr.stringToB64Url(e),Hr.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Hr.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:s}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=s}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,z2.generateTransactionChunks)(e),this.data_root=Hr.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:Hr.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:Hr.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>Hr.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return Hr.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),Hr.stringToBuffer(this.quantity),Hr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,j2.default)([Hr.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),Hr.stringToBuffer(this.quantity),Hr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,Hr.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}No.default=q2;var Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});Jf.TransactionUploader=void 0;const dg=No,H2=Yt,Jl=ro,W2=$h,hg=1,G2=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],pg=1e3*40;class jh{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,t){if(this.api=e,!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new dg.default(Object.assign({},t,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+pg-Date.now(),pg);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(o=>setTimeout(o,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,W2.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),H2.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(o=>(console.error(o.message),{status:-1,data:{error:o.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,Jl.getError)(s),G2.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new dg.default(t.transaction);i.chunks||await i.prepareChunks(n);const s=new jh(e,i);if(s.chunkIndex=t.chunkIndex,s.lastRequestTimeEnd=t.lastRequestTimeEnd,s.lastResponseError=t.lastResponseError,s.lastResponseStatus=t.lastResponseStatus,s.txPosted=t.txPosted,s.data=n,s.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,t){const n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=hg){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=hg;return}throw this.lastResponseError=(0,Jl.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,Jl.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}Jf.TransactionUploader=jh;Object.defineProperty(Kh,"__esModule",{value:!0});const Yl=ro,ds=No,ic=Yt,Xl=Jf;class V2{api;crypto;chunks;constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}async getTransactionAnchor(){const e=await this.api.get("tx_anchor");if(!e.data.match(/^[a-z0-9_-]{43,}/i)||!e.ok)throw new Error(`Could not getTransactionAnchor. Received: ${e.data}. Status: ${e.status}, ${e.statusText}`);return e.data}async getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;const i=await this.api.get(n);if(!/^\d+$/.test(i.data)||!i.ok)throw new Error(`Could not getPrice. Received: ${i.data}. Status: ${i.status}, ${i.statusText}`);return i.data}async get(e){const t=await this.api.get(`tx/${e}`);if(t.status==200){const n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new ds.default({...t.data,data:i})}return new ds.default({...t.data,format:t.data.format||1})}throw t.status==404?new Yl.default("TX_NOT_FOUND"):t.status==410?new Yl.default("TX_FAILED"):new Yl.default("TX_INVALID")}fromRaw(e){return new ds.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{const{data:i,ok:s,status:o,statusText:a}=await this.api.get(`/${e}`,{responseType:"arraybuffer"});if(!s)throw new Error("Bad http status code",{cause:{status:o,statusText:a}});n=i}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} data was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?ic.bufferToString(n):ic.bufferTob64Url(n)}async sign(e,t,n){const s=typeof t=="object"&&(a=>{let u=!0;return["n","e","d","p","q","dp","dq","qi"].map(d=>!(d in a)&&(u=!1)),u})(t),o=typeof arweaveWallet=="object";if(!s&&!o)throw new Error("No valid JWK or external wallet found to sign transaction.");if(s){e.setOwner(t.n);let a=await e.getSignatureData(),u=await this.crypto.sign(t,a,n),d=await this.crypto.hash(u);e.setSignature({id:ic.bufferTob64Url(d),owner:t.n,signature:ic.bufferTob64Url(u)})}else if(o){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const a=await arweaveWallet.sign(e,n);e.setSignature({id:a.id,owner:a.owner,reward:a.reward,tags:a.tags,signature:a.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=ic.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new ds.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new ds.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof ds.default)&&(e=new ds.default(e)),!(e instanceof ds.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof ds.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new Xl.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await Xl.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Xl.TransactionUploader.fromSerialized(this.api,e,t)}return n}async*upload(e,t){const n=await this.getUploader(e,t);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}Kh.default=V2;var zh={};Object.defineProperty(zh,"__esModule",{value:!0});const gg=Yt;class J2{api;crypto;constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return gg.bufferTob64Url(await this.crypto.hash(gg.b64UrlToBuffer(e)))}}zh.default=J2;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.SiloResource=void 0;const yg=Yt;class Y2{api;crypto;transactions;constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");const n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=t[1],i=Math.pow(2,parseInt(t[2])),s=await this.hash(yg.stringToBuffer(n),i),o=yg.bufferTob64(s.slice(0,15)),a=await this.hash(s.slice(16,31),1);return new Pb(e,o,a)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}}ru.default=Y2;class Pb{uri;accessKey;encryptionKey;constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}ru.SiloResource=Pb;var qh={};Object.defineProperty(qh,"__esModule",{value:!0});const mg=ro,X2=Yt;class Z2{api;constructor(e){this.api=e}async getTransactionOffset(e){const t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,mg.getError)(t)}`)}async getChunk(e){const t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,mg.getError)(t)}`)}async getChunkData(e){const t=await this.getChunk(e);return X2.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const t=await this.getTransactionOffset(e),n=parseInt(t.size),s=parseInt(t.offset)-n+1,o=new Uint8Array(n);let a=0;for(;a<n;){this.api.config.logging&&console.log(`[chunk] ${a}/${n}`);let u;try{u=await this.getChunkData(s+a)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+a}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(u)o.set(u,a),a+=u.length;else throw new Error(`Couldn't complete data download at ${a}/${n}`)}return o}}qh.default=Z2;var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});const bg=ro;class wf{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(e,t){this.api=e,this.network=t}async get(e){const t=await this.api.get(`${wf.HASH_ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new bg.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getByHeight(e){const t=await this.api.get(`${wf.HEIGHT_ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new bg.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}Hh.default=wf;Object.defineProperty(Ia,"__esModule",{value:!0});const Q2=Lh,e3=Dh,t3=Uh,r3=Fh,n3=Kh,i3=zh,xg=No,sc=Yt,s3=ru,o3=qh,a3=Hh;class ga{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new t3.default;static utils=sc;constructor(e){this.api=new e3.default(e),this.wallets=new i3.default(this.api,ga.crypto),this.chunks=new o3.default(this.api),this.transactions=new n3.default(this.api,ga.crypto,this.chunks),this.silo=new s3.default(this.api,this.crypto,this.transactions),this.network=new r3.default(this.api),this.blocks=new a3.default(this.api,this.network),this.ar=new Q2.default}get crypto(){return ga.crypto}get utils(){return ga.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=sc.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new xg.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){const i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());const s=await this.silo.parseUri(n);if(typeof e.data=="string"){const a=await this.crypto.encrypt(sc.stringToBuffer(e.data),s.getEncryptionKey());i.reward=await this.transactions.getPrice(a.byteLength),i.data=sc.bufferTob64Url(a)}if(e.data instanceof Uint8Array){const a=await this.crypto.encrypt(e.data,s.getEncryptionKey());i.reward=await this.transactions.getPrice(a.byteLength),i.data=sc.bufferTob64Url(a)}const o=new xg.default(i);return o.addTag("Silo-Name",s.getAccessKey()),o.addTag("Silo-Version","0.1.0"),o}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}}Ia.default=ga;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});Yf.getDefaultConfig=void 0;const c3=(r,e)=>{const t=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||r=="file"||s.includes(i)||!!e.match(t)||!!i.match(t)},u3=r=>{const e=r.charAt(0)==="[",t=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!r.match(t)||e},f3=(r,e)=>{if(c3(r,e))return{protocol:"https",host:"arweave.net",port:443};if(!u3(e)){let t=e.split(".");if(t.length>=3){t.shift();const n=t.join(".");return{protocol:r,host:n}}}return{protocol:r,host:e}};Yf.getDefaultConfig=f3;(function(r){var e=z&&z.__createBinding||(Object.create?function(s,o,a,u){u===void 0&&(u=a);var d=Object.getOwnPropertyDescriptor(o,a);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,u,d)}:function(s,o,a,u){u===void 0&&(u=a),s[u]=o[a]}),t=z&&z.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(r,"__esModule",{value:!0});const n=Ia,i=Yf;n.default.init=function(s={}){const o={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...o});const a=location.protocol.replace(":",""),u=location.hostname,d=location.port?parseInt(location.port):a=="https"?443:80,h=(0,i.getDefaultConfig)(a,u),m=s.protocol||h.protocol,v=s.host||h.host,_=s.port||h.port||d;return new n.default({...s,host:v,protocol:m,port:_})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),t(Ia,r),r.default=n.default})(Bo);var l3=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});vs.hashStream=vs.deepHashChunks=vs.deepHash=void 0;const qr=l3(Bo),Rb=Qs;async function Cb(r){if(typeof r[Symbol.asyncIterator]=="function"){const i=r,s=Rb.createHash("sha384");let o=0;for await(const d of i)o+=d.byteLength,s.update(d);const a=qr.default.utils.concatBuffers([qr.default.utils.stringToBuffer("blob"),qr.default.utils.stringToBuffer(o.toString())]),u=qr.default.utils.concatBuffers([await qr.default.crypto.hash(a,"SHA-384"),s.digest()]);return await qr.default.crypto.hash(u,"SHA-384")}else if(Array.isArray(r)){const i=qr.default.utils.concatBuffers([qr.default.utils.stringToBuffer("list"),qr.default.utils.stringToBuffer(r.length.toString())]);return await Wh(r,await qr.default.crypto.hash(i,"SHA-384"))}const e=r,t=qr.default.utils.concatBuffers([qr.default.utils.stringToBuffer("blob"),qr.default.utils.stringToBuffer(e.byteLength.toString())]),n=qr.default.utils.concatBuffers([await qr.default.crypto.hash(t,"SHA-384"),await qr.default.crypto.hash(e,"SHA-384")]);return await qr.default.crypto.hash(n,"SHA-384")}vs.deepHash=Cb;async function Wh(r,e){if(r.length<1)return e;const t=qr.default.utils.concatBuffers([e,await Cb(r[0])]),n=await qr.default.crypto.hash(t,"SHA-384");return await Wh(r.slice(1),n)}vs.deepHashChunks=Wh;async function d3(r){const e=Rb.createHash("sha384");for await(const t of r)e.update(t);return e.digest()}vs.hashStream=d3;var h3=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),p3=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),g3=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&h3(e,r,t);return p3(e,r),e};Object.defineProperty(tu,"__esModule",{value:!0});tu.getSignatureData=void 0;const ea=mr,y3=Kr,m3=vs;async function b3(r){return y3.isBrowser?(await Promise.resolve().then(()=>g3(Vf))).default([ea.stringToBuffer("dataitem"),ea.stringToBuffer("1"),ea.stringToBuffer(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData]):m3.deepHash([ea.stringToBuffer("dataitem"),ea.stringToBuffer("1"),ea.stringToBuffer(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData])}tu.getSignatureData=b3;var Xf={},Oi={exports:{}},Gh={},Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});function x3(r){var e=4,t=r.length,n=t%e;if(!n)return r;var i=t,s=e-n,o=t+s,a=J.Buffer.alloc(o);for(a.write(r);s--;)a.write("=",i++);return a.toString()}Vh.default=x3;Object.defineProperty(Gh,"__esModule",{value:!0});var w3=Vh;function Mb(r,e){return e===void 0&&(e="utf8"),J.Buffer.isBuffer(r)?qd(r.toString("base64")):qd(J.Buffer.from(r,e).toString("base64"))}function v3(r,e){return e===void 0&&(e="utf8"),J.Buffer.from(Jh(r),"base64").toString(e)}function Jh(r){return r=r.toString(),w3.default(r).replace(/\-/g,"+").replace(/_/g,"/")}function qd(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _3(r){return J.Buffer.from(Jh(r),"base64")}var ja=Mb;ja.encode=Mb;ja.decode=v3;ja.toBase64=Jh;ja.fromBase64=qd;ja.toBuffer=_3;Gh.default=ja;(function(r){r.exports=Gh.default,r.exports.default=r.exports})(Oi);var Zf={},Yh={},Bb={exports:{}},Nb={exports:{}},A3=Qs,E3=Ka,S3=new Db(4096);function Uc(r){return typeof J.Buffer.alloc=="function"?J.Buffer.alloc(r):new J.Buffer(r)}function Ob(r,e){return typeof J.Buffer.from=="function"?J.Buffer.from(r,e):new J.Buffer(r,e)}function Lb(r){return r.charAt(0).toUpperCase()+r.slice(1)}function k3(r,e){return r===e?0:r<e?-1:1}function T3(r,e,t){var n=r[e];return n===void 0?t:n}function I3(r,e){e=e||"md5";var t=A3.createHash(e);return t.end(r),t.read()}function P3(r,e){var t=-1,n,i;if(!r)return-1;for(n=0,i=r.length;n<i;n++)if(r[n]===e){if(t>=0)return-2;t=n}return t}function R3(r,e){var t={},n,i;for(n=0;n<r.length;n++)i=r[n],t[e(i)]=i;return t}function C3(r){return Object.keys(r).map(function(e){return r[e]})}function M3(r,e){var t={},n,i,s;for(n=0,i=r.length;n<i;n++){if(s=r[n],e&&(s=e(s)),t[s])return!0;t[s]=!0}return!1}function B3(r,e,t){var n=Object.getOwnPropertyNames(r),i,s,o;for(i=0,s=n.length;i<s;i++)if(o=n[i],!e.hasOwnProperty(o)||t){var a=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,a)}return e}function N3(r,e){e=e|0;var t=r.charAt(e++);if(/[\d-]/.test(t)){for(;/[eE\d.+-]/.test(r.charAt(e));)e++;return e}else{if(/true|null/.test(r.slice(e-1,e+3)))return e+3;if(/false/.test(r.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(t){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(t=r.charAt(e++));return-1}function O3(){throw new Error("abstract")}function L3(r,e){var t=r.prototype,n,i,s,o;for(n=0,i=e.length;n<i;n++)s=e[n],o="get"+Lb(s),t[o]=E3.deprecate(a(s),"use `."+s+"` instead of `."+o+"()`");function a(u){return function(){var d=this[u];return typeof d=="function"?d.apply(this,arguments):d}}}function Db(r){this._len=r|0,this._pos=0,this._slab=Uc(this._len)}Db.prototype.alloc=function(r){var e=this._len;return r>e?Uc(r):(this._pos+r>e&&(this._slab=Uc(e),this._pos=0),this._slab.slice(this._pos,this._pos+=r))};function Oo(r){var e=1103515245,t=12345,n=Math.pow(2,31),i=Math.floor(r||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+t)%n}}Oo.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Oo.prototype.nextInt=function(r,e){return e===void 0&&(e=r,r=0),e=e===void 0?this._max:e,r+Math.floor(this.nextFloat()*(e-r))};Oo.prototype.nextFloat=function(r,e){return e===void 0&&(e=r,r=0),e=e===void 0?1:e,r+(e-r)*this._nextInt()/this._max};Oo.prototype.nextString=function(r,e){r|=0,e=e||"aA";var t="";e.indexOf("a")>-1&&(t+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(t+="0123456789"),e.indexOf("!")>-1&&(t+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<r;i++)n.push(this.choice(t));return n.join("")};Oo.prototype.nextBuffer=function(r){var e=[],t;for(t=0;t<r;t++)e.push(this.nextInt(256));return Ob(e)};Oo.prototype.choice=function(r){var e=r.length;if(!e)throw new Error("choosing from empty array");return r[this.nextInt(e)]};function Xh(){this._index=0,this._items=[]}Xh.prototype.push=function(r){var e=this._items,t=e.length|0,n;for(e.push(r);t>0&&e[t].index<e[n=t-1>>1].index;)r=e[t],e[t]=e[n],e[n]=r,t=n};Xh.prototype.pop=function(){var r=this._items,e=r.length-1|0,t=r[0];if(!t||t.index>this._index)return null;if(this._index++,!e)return r.pop(),t;r[0]=r.pop();for(var n=e>>1,i=0,s,o,a,u,d,h,m;i<n&&(u=r[i],s=(i<<1)+1,o=i+1<<1,h=r[s],m=r[o],!m||h.index<=m.index?(d=h,a=s):(d=m,a=o),!(d.index>=u.index));)r[a]=u,r[i]=d,i=a;return t};function Tt(r,e){if(this.buf=r,this.pos=e|0,this.pos<0)throw new Error("negative offset")}Tt.prototype.isValid=function(){return this.pos<=this.buf.length};Tt.prototype.readBoolean=function(){return!!this.buf[this.pos++]};Tt.prototype.skipBoolean=function(){this.pos++};Tt.prototype.writeBoolean=function(r){this.buf[this.pos++]=!!r};Tt.prototype.readInt=Tt.prototype.readLong=function(){var r=0,e=0,t=this.buf,n,i,s,o;do n=t[this.pos++],i=n&128,r|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=r,o=268435456;do n=t[this.pos++],s+=(n&127)*o,o*=128;while(n&128);return(s%2?-(s+1):s)/2}return r>>1^-(r&1)};Tt.prototype.skipInt=Tt.prototype.skipLong=function(){for(var r=this.buf;r[this.pos++]&128;);};Tt.prototype.writeInt=Tt.prototype.writeLong=function(r){var e=this.buf,t,n;if(r>=-1073741824&&r<1073741824){n=r>=0?r<<1:~r<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{t=r>=0?r*2:-r*2-1;do e[this.pos]=t&127,t/=128;while(t>=1&&(e[this.pos++]|=128))}this.pos++};Tt.prototype.readFloat=function(){var r=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>r.length))return this.buf.readFloatLE(e)};Tt.prototype.skipFloat=function(){this.pos+=4};Tt.prototype.writeFloat=function(r){var e=this.buf,t=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(r,t)};Tt.prototype.readDouble=function(){var r=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>r.length))return this.buf.readDoubleLE(e)};Tt.prototype.skipDouble=function(){this.pos+=8};Tt.prototype.writeDouble=function(r){var e=this.buf,t=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(r,t)};Tt.prototype.readFixed=function(r){var e=this.pos;if(this.pos+=r,!(this.pos>this.buf.length)){var t=S3.alloc(r);return this.buf.copy(t,0,e,e+r),t}};Tt.prototype.skipFixed=function(r){this.pos+=r};Tt.prototype.writeFixed=function(r,e){e=e||r.length;var t=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&r.copy(this.buf,t,0,e)};Tt.prototype.readBytes=function(){return this.readFixed(this.readLong())};Tt.prototype.skipBytes=function(){var r=this.readLong();this.pos+=r};Tt.prototype.writeBytes=function(r){var e=r.length;this.writeLong(e),this.writeFixed(r,e)};typeof J.Buffer.prototype.utf8Slice=="function"?Tt.prototype.readString=function(){var r=this.readLong(),e=this.pos,t=this.buf;if(this.pos+=r,!(this.pos>t.length))return this.buf.utf8Slice(e,e+r)}:Tt.prototype.readString=function(){var r=this.readLong(),e=this.pos,t=this.buf;if(this.pos+=r,!(this.pos>t.length))return this.buf.slice(e,e+r).toString()};Tt.prototype.skipString=function(){var r=this.readLong();this.pos+=r};Tt.prototype.writeString=function(r){var e=J.Buffer.byteLength(r),t=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>t.length))if(e>64)this._writeUtf8(r,e);else{var i,s,o,a;for(i=0,s=e;i<s;i++)o=r.charCodeAt(i),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=r.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),i++,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}};typeof J.Buffer.prototype.utf8Write=="function"?Tt.prototype._writeUtf8=function(r,e){this.buf.utf8Write(r,this.pos-e,e)}:Tt.prototype._writeUtf8=function(r,e){this.buf.write(r,this.pos-e,e,"utf8")};typeof J.Buffer.prototype.latin1Write=="function"?Tt.prototype.writeBinary=function(r,e){var t=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(r,t,e)}:typeof J.Buffer.prototype.binaryWrite=="function"?Tt.prototype.writeBinary=function(r,e){var t=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(r,t,e)}:Tt.prototype.writeBinary=function(r,e){var t=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(r,t,e,"binary")};Tt.prototype.matchBoolean=function(r){return this.buf[this.pos++]-r.buf[r.pos++]};Tt.prototype.matchInt=Tt.prototype.matchLong=function(r){var e=this.readLong(),t=r.readLong();return e===t?0:e<t?-1:1};Tt.prototype.matchFloat=function(r){var e=this.readFloat(),t=r.readFloat();return e===t?0:e<t?-1:1};Tt.prototype.matchDouble=function(r){var e=this.readDouble(),t=r.readDouble();return e===t?0:e<t?-1:1};Tt.prototype.matchFixed=function(r,e){return this.readFixed(e).compare(r.readFixed(e))};Tt.prototype.matchBytes=Tt.prototype.matchString=function(r){var e=this.readLong(),t=this.pos;this.pos+=e;var n=r.readLong(),i=r.pos;r.pos+=n;var s=this.buf.slice(t,this.pos),o=r.buf.slice(i,r.pos);return s.compare(o)};Tt.prototype.unpackLongBytes=function(){var r=Uc(8),e=0,t=0,n=6,i=this.buf,s,o;for(s=i[this.pos++],o=s&1,r.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,r[t++]=e,e>>=8);return r[t]=e,o&&Hd(r,8),r};Tt.prototype.packLongBytes=function(r){var e=(r[7]&128)>>7,t=this.buf,n=1,i=0,s=3,o;e?(Hd(r,8),o=1):o=0;for(var a=[r.readUIntLE(0,3),r.readUIntLE(3,3),r.readUIntLE(6,2)];s&&!a[--s];);for(;i<s;)for(o|=a[i++]<<n,n+=24;n>7;)t[this.pos++]=o&127|128,o>>=7,n-=7;o|=a[s]<<n;do t[this.pos]=o&127,o>>=7;while(o&&(t[this.pos++]|=128));this.pos++,e&&Hd(r,8)};function Hd(r,e){for(;e--;)r[e]=~r[e]}var za={abstractFunction:O3,addDeprecatedGetters:L3,bufferFrom:Ob,capitalize:Lb,copyOwnProperties:B3,getHash:I3,compare:k3,getOption:T3,jsonEnd:N3,newBuffer:Uc,objectValues:C3,toMap:R3,singleIndexOf:P3,hasDuplicates:M3,Lcg:Oo,OrderedQueue:Xh,Tap:Tt},Lt=za,Ub=Ve,Pr=Ka,ko=Lt.Tap,Wd=Pr.debuglog("avsc:types"),Nt=Pr.format,vf={array:$n,boolean:ks,bytes:Qn,double:as,enum:Fn,error:Tr,fixed:Kn,float:os,int:Ts,long:Zn,map:In,null:hi,record:Tr,string:Li},D3=/^[A-Za-z_][A-Za-z0-9_]*$/,on=new Lt.Lcg,bo=new ko(new Ub.SlowBuffer(1024)),$s=null,wa=[];function se(r,e){var t;if($s?(t=$s,wa.push([$s,this]),$s=null):t=this,this._hash=new U3,this.name=void 0,this.aliases=void 0,this.doc=r&&r.doc?""+r.doc:void 0,r){var n=r.name,i=r.namespace===void 0?e&&e.namespace:r.namespace;if(n!==void 0){if(n=_f(n,i),qa(n))throw new Error(Nt("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(Nt("duplicate type name: %s",n));s[n]=t}}else if(e&&e.noAnonymousTypes)throw new Error(Nt("missing name property in schema: %j",r));this.name=n,this.aliases=r.aliases?r.aliases.map(function(o){return _f(o,i)}):[]}}se.forSchema=function(r,e){e=e||{},e.registry=e.registry||{};var t=function(u){switch(u===!0?u="always":u===!1?u="never":u===void 0?u="auto":typeof u=="string"&&(u=u.toLowerCase()),u){case"always":return pi;case"never":return Ln;case"auto":return;default:throw new Error(Nt("invalid wrap unions option: %j",u))}}(e.wrapUnions);if(r===null)throw new Error('invalid type: null (did you mean "null"?)');if(se.isType(r))return r;var n;if(e.typeHook&&(n=e.typeHook(r,e))){if(!se.isType(n))throw new Error(Nt("invalid typehook return value: %j",n));return n}if(typeof r=="string"){if(r=_f(r,e.namespace),n=e.registry[r],n)return n;if(qa(r))return e.registry[r]=se.forSchema({type:r},e);throw new Error(Nt("undefined type name: %s",r))}if(r.logicalType&&e.logicalTypes&&!$s){var i=e.logicalTypes[r.logicalType];if(i){var s=e.namespace,o={};Object.keys(e.registry).forEach(function(u){o[u]=e.registry[u]});try{return Wd("instantiating logical type for %s",r.logicalType),new i(r,e)}catch(u){if(Wd("failed to instantiate logical type for %s",r.logicalType),e.assertLogicalTypes)throw u;$s=null,e.namespace=s,e.registry=o}}}if(Array.isArray(r)){var a=r.map(function(u){return se.forSchema(u,e)});t||(t=F3(a)?pi:Ln),n=new t(a,e)}else n=function(u){var d=vf[u];if(d===void 0)throw new Error(Nt("unknown type: %j",u));return new d(r,e)}(r.type);return n};se.forValue=function(r,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||se.forSchema({type:"array",items:"null"}),e.valueHook){var t=e.valueHook(r,e);if(t!==void 0){if(!se.isType(t))throw new Error(Nt("invalid value hook return value: %j",t));return t}}switch(typeof r){case"string":return se.forSchema("string",e);case"boolean":return se.forSchema("boolean",e);case"number":return(r|0)===r?se.forSchema("int",e):Math.abs(r)<9007199254740991?se.forSchema("float",e):se.forSchema("double",e);case"object":if(r===null)return se.forSchema("null",e);if(Array.isArray(r))return r.length?se.forSchema({type:"array",items:se.forTypes(r.map(function(i){return se.forValue(i,e)}))},e):e.emptyArrayType;if(J.Buffer.isBuffer(r))return se.forSchema("bytes",e);var n=Object.keys(r);return n.some(function(i){return!nu(i)})?se.forSchema({type:"map",values:se.forTypes(n.map(function(i){return se.forValue(r[i],e)}),e)},e):se.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:se.forValue(r[i],e)}})},e);default:throw new Error(Nt("cannot infer type from: %j",r))}};se.forTypes=function(r,e){if(!r.length)throw new Error("no types to combine");if(r.length===1)return r[0];e=e||{};var t=[],n=0,i=!0;if(r.forEach(function(m){switch(m.typeName){case"union:unwrapped":i=!1,t=t.concat(m.types);break;case"union:wrapped":n++,t=t.concat(m.types);break;case"null":t.push(m);break;default:i=!1,t.push(m)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};t.forEach(function(m){var v=m.branchName,_=s[v];if(!_)s[v]=m;else if(!m.equals(_))throw new Error("inconsistent branch type")});var o=e.wrapUnions,a;e.wrapUnions=!0;try{a=se.forSchema(Object.keys(s).map(function(m){return s[m]}),e)}catch(m){throw e.wrapUnions=o,m}return e.wrapUnions=o,a}var u={};t.forEach(function(m){var v=Qf(m),_=u[v];_||(u[v]=_=[]),_.push(m)});var d=Object.keys(u),h=d.map(function(m){var v=u[m];if(v.length===1)return v[0];switch(m){case"null":case"boolean":return v[0];case"number":return K3(v);case"string":return $3(v,e);case"buffer":return j3(v,e);case"array":return v=v.filter(function(_){return _!==e.emptyArrayType}),v.length?se.forSchema({type:"array",items:se.forTypes(v.map(function(_){return _.itemsType}))},e):e.emptyArrayType;default:return z3(v,e)}});return h.length===1?h[0]:se.forSchema(h,e)};se.isType=function(){var r=arguments.length;if(!r)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(r===1)return!0;var t=e.typeName,n;for(n=1;n<r;n++)if(t.indexOf(arguments[n])===0)return!0;return!1};se.__reset=function(r){Wd("resetting type buffer to %d",r),bo.buf=new Ub.SlowBuffer(r)};Object.defineProperty(se.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var r=se.isType(this,"logical")?this.underlyingType:this;return se.isType(r,"abstract")?r._concreteTypeName:se.isType(r,"union")?void 0:r.typeName}});se.prototype.clone=function(r,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(r,e)):this.fromBuffer(this.toBuffer(r))};se.prototype.compare=Lt.abstractFunction;se.prototype.compareBuffers=function(r,e){return this._match(new ko(r),new ko(e))};se.prototype.createResolver=function(r,e){if(!se.isType(r))throw new Error(Nt("not a type: %j",r));if(!se.isType(this,"union","logical")&&se.isType(r,"logical"))return this.createResolver(r.underlyingType,e);e=e||{},e.registry=e.registry||{};var t,n;if(se.isType(this,"record","error")&&se.isType(r,"record","error")&&(n=this.name+":"+r.name,t=e.registry[n],t))return t;if(t=new Zh(this),n&&(e.registry[n]=t),se.isType(r,"union")){var i=r.types.map(function(s){return this.createResolver(s,e)},this);t._read=function(s){var o=s.readLong(),a=i[o];if(a===void 0)throw new Error(Nt("invalid union index: %s",o));return i[o]._read(s)}}else this._update(t,r,e);if(!t._read)throw new Error(Nt("cannot read %s as %s",r,this));return Object.freeze(t)};se.prototype.decode=function(r,e,t){var n=new ko(r,e),i=Fb(this,n,t);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};se.prototype.encode=function(r,e,t){var n=new ko(e,t);return this._write(n,r),n.isValid()?n.pos:e.length-n.pos};se.prototype.equals=function(r){return se.isType(r)&&this.fingerprint().equals(r.fingerprint())};se.prototype.fingerprint=function(r){if(r)return Lt.getHash(JSON.stringify(this.schema()),r);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=Lt.getHash(e).toString("binary")}return Lt.bufferFrom(this._hash.str,"binary")};se.prototype.fromBuffer=function(r,e,t){var n=new ko(r),i=Fb(this,n,e,t);if(!n.isValid())throw new Error("truncated buffer");if(!t&&n.pos<r.length)throw new Error("trailing data");return i};se.prototype.fromString=function(r){return this._copy(JSON.parse(r),{coerce:2})};se.prototype.inspect=function(){var r=this.typeName,e=Kb(r);if(qa(r))return Nt("<%s>",e);var t=this.schema({exportAttrs:!0,noDeref:!0});return typeof t=="object"&&!se.isType(this,"logical")&&(t.type=void 0),Nt("<%s %j>",e,t)};se.prototype.isValid=function(r,e){var t=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(o,a){n.call(this,s.slice(),o,a,r)}),this._check(r,t,i,s)};se.prototype.random=Lt.abstractFunction;se.prototype.schema=function(r){return this._attrs({exportAttrs:!!(r&&r.exportAttrs),noDeref:!!(r&&r.noDeref)})};se.prototype.toBuffer=function(r){bo.pos=0,this._write(bo,r);var e=Lt.newBuffer(bo.pos);return bo.isValid()?bo.buf.copy(e,0,0,bo.pos):this._write(new ko(e),r),e};se.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};se.prototype.toString=function(r){return r===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(r,{coerce:3}))};se.prototype.wrap=function(r){var e=this._branchConstructor;return e===null?null:new e(r)};se.prototype._attrs=function(r){r.derefed=r.derefed||{};var e=this.name;if(e!==void 0){if(r.noDeref||r.derefed[e])return e;r.derefed[e]=!0}var t={};this.name!==void 0&&(t.name=e),t.type=this.typeName;var n=this._deref(t,r);return n!==void 0&&(t=n),r.exportAttrs&&(this.aliases&&this.aliases.length&&(t.aliases=this.aliases),this.doc!==void 0&&(t.doc=this.doc)),t};se.prototype._createBranchConstructor=function(){var r=this.branchName;if(r==="null")return null;function e(){return function(i){~r.indexOf(".")?this[`${r}`]=i:this[r]=i}}var t=e();return t.type=this,t.prototype.unwrap=function(){return this[`${r}`]},t.prototype.unwrapped=t.prototype.unwrap,t};se.prototype._peek=function(r){var e=r.pos,t=this._read(r);return r.pos=e,t};se.prototype._check=Lt.abstractFunction;se.prototype._copy=Lt.abstractFunction;se.prototype._deref=Lt.abstractFunction;se.prototype._match=Lt.abstractFunction;se.prototype._read=Lt.abstractFunction;se.prototype._skip=Lt.abstractFunction;se.prototype._update=Lt.abstractFunction;se.prototype._write=Lt.abstractFunction;se.prototype.getAliases=function(){return this.aliases};se.prototype.getFingerprint=se.prototype.fingerprint;se.prototype.getName=function(r){return this.name||!r?this.name:this.branchName};se.prototype.getSchema=se.prototype.schema;se.prototype.getTypeName=function(){return this.typeName};function wr(r){se.call(this),this._branchConstructor=this._createBranchConstructor(),r||Object.freeze(this)}Pr.inherits(wr,se);wr.prototype._update=function(r,e){e.typeName===this.typeName&&(r._read=this._read)};wr.prototype._copy=function(r){return this._check(r,void 0,sr),r};wr.prototype._deref=function(){return this.typeName};wr.prototype.compare=Lt.compare;function hi(){wr.call(this)}Pr.inherits(hi,wr);hi.prototype._check=function(r,e,t){var n=r===null;return!n&&t&&t(r,this),n};hi.prototype._read=function(){return null};hi.prototype._skip=function(){};hi.prototype._write=function(r,e){e!==null&&sr(e,this)};hi.prototype._match=function(){return 0};hi.prototype.compare=hi.prototype._match;hi.prototype.typeName="null";hi.prototype.random=hi.prototype._read;function ks(){wr.call(this)}Pr.inherits(ks,wr);ks.prototype._check=function(r,e,t){var n=typeof r=="boolean";return!n&&t&&t(r,this),n};ks.prototype._read=function(r){return r.readBoolean()};ks.prototype._skip=function(r){r.skipBoolean()};ks.prototype._write=function(r,e){typeof e!="boolean"&&sr(e,this),r.writeBoolean(e)};ks.prototype._match=function(r,e){return r.matchBoolean(e)};ks.prototype.typeName="boolean";ks.prototype.random=function(){return on.nextBoolean()};function Ts(){wr.call(this)}Pr.inherits(Ts,wr);Ts.prototype._check=function(r,e,t){var n=r===(r|0);return!n&&t&&t(r,this),n};Ts.prototype._read=function(r){return r.readInt()};Ts.prototype._skip=function(r){r.skipInt()};Ts.prototype._write=function(r,e){e!==(e|0)&&sr(e,this),r.writeInt(e)};Ts.prototype._match=function(r,e){return r.matchInt(e)};Ts.prototype.typeName="int";Ts.prototype.random=function(){return on.nextInt(1e3)|0};function Zn(){wr.call(this)}Pr.inherits(Zn,wr);Zn.prototype._check=function(r,e,t){var n=typeof r=="number"&&r%1===0&&e0(r);return!n&&t&&t(r,this),n};Zn.prototype._read=function(r){var e=r.readLong();if(!e0(e))throw new Error("potential precision loss");return e};Zn.prototype._skip=function(r){r.skipLong()};Zn.prototype._write=function(r,e){(typeof e!="number"||e%1||!e0(e))&&sr(e,this),r.writeLong(e)};Zn.prototype._match=function(r,e){return r.matchLong(e)};Zn.prototype._update=function(r,e){switch(e.typeName){case"int":r._read=e._read;break;case"abstract:long":case"long":r._read=this._read}};Zn.prototype.typeName="long";Zn.prototype.random=function(){return on.nextInt()};Zn.__with=function(r,e){r=r||{};var t={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new vn(e);return Object.keys(t).forEach(function(i){if(r[i]===void 0)throw new Error(Nt("missing method implementation: %s",i));n[t[i]]=r[i]}),Object.freeze(n)};function os(){wr.call(this)}Pr.inherits(os,wr);os.prototype._check=function(r,e,t){var n=typeof r=="number";return!n&&t&&t(r,this),n};os.prototype._read=function(r){return r.readFloat()};os.prototype._skip=function(r){r.skipFloat()};os.prototype._write=function(r,e){typeof e!="number"&&sr(e,this),r.writeFloat(e)};os.prototype._match=function(r,e){return r.matchFloat(e)};os.prototype._update=function(r,e){switch(e.typeName){case"float":case"int":r._read=e._read;break;case"abstract:long":case"long":r._read=function(t){return t.readLong()}}};os.prototype.typeName="float";os.prototype.random=function(){return on.nextFloat(1e3)};function as(){wr.call(this)}Pr.inherits(as,wr);as.prototype._check=function(r,e,t){var n=typeof r=="number";return!n&&t&&t(r,this),n};as.prototype._read=function(r){return r.readDouble()};as.prototype._skip=function(r){r.skipDouble()};as.prototype._write=function(r,e){typeof e!="number"&&sr(e,this),r.writeDouble(e)};as.prototype._match=function(r,e){return r.matchDouble(e)};as.prototype._update=function(r,e){switch(e.typeName){case"double":case"float":case"int":r._read=e._read;break;case"abstract:long":case"long":r._read=function(t){return t.readLong()}}};as.prototype.typeName="double";as.prototype.random=function(){return on.nextFloat()};function Li(){wr.call(this)}Pr.inherits(Li,wr);Li.prototype._check=function(r,e,t){var n=typeof r=="string";return!n&&t&&t(r,this),n};Li.prototype._read=function(r){return r.readString()};Li.prototype._skip=function(r){r.skipString()};Li.prototype._write=function(r,e){typeof e!="string"&&sr(e,this),r.writeString(e)};Li.prototype._match=function(r,e){return r.matchString(e)};Li.prototype._update=function(r,e){switch(e.typeName){case"bytes":case"string":r._read=this._read}};Li.prototype.typeName="string";Li.prototype.random=function(){return on.nextString(on.nextInt(32))};function Qn(){wr.call(this)}Pr.inherits(Qn,wr);Qn.prototype._check=function(r,e,t){var n=J.Buffer.isBuffer(r);return!n&&t&&t(r,this),n};Qn.prototype._read=function(r){return r.readBytes()};Qn.prototype._skip=function(r){r.skipBytes()};Qn.prototype._write=function(r,e){J.Buffer.isBuffer(e)||sr(e,this),r.writeBytes(e)};Qn.prototype._match=function(r,e){return r.matchBytes(e)};Qn.prototype._update=Li.prototype._update;Qn.prototype._copy=function(r,e){var t;switch((e&&e.coerce)|0){case 3:return this._check(r,void 0,sr),r.toString("binary");case 2:if(typeof r!="string")throw new Error(Nt("cannot coerce to buffer: %j",r));return t=Lt.bufferFrom(r,"binary"),this._check(t,void 0,sr),t;case 1:if(!$b(r))throw new Error(Nt("cannot coerce to buffer: %j",r));return t=Lt.bufferFrom(r.data),this._check(t,void 0,sr),t;default:return this._check(r,void 0,sr),Lt.bufferFrom(r)}};Qn.prototype.compare=J.Buffer.compare;Qn.prototype.typeName="bytes";Qn.prototype.random=function(){return on.nextBuffer(on.nextInt(32))};function cs(r,e){if(se.call(this),!Array.isArray(r))throw new Error(Nt("non-array union schema: %j",r));if(!r.length)throw new Error("empty union");this.types=Object.freeze(r.map(function(t){return se.forSchema(t,e)})),this._branchIndices={},this.types.forEach(function(t,n){if(se.isType(t,"union"))throw new Error("unions cannot be directly nested");var i=t.branchName;if(this._branchIndices[i]!==void 0)throw new Error(Nt("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}Pr.inherits(cs,se);cs.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};cs.prototype._skip=function(r){this.types[r.readLong()]._skip(r)};cs.prototype._match=function(r,e){var t=r.readLong(),n=e.readLong();return t===n?this.types[t]._match(r,e):t<n?-1:1};cs.prototype._deref=function(r,e){return this.types.map(function(t){return t._attrs(e)})};cs.prototype.getTypes=function(){return this.types};function Ln(r,e){cs.call(this,r,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(t,n){if(se.isType(t,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:t});else{var i=Qf(t);if(this._bucketIndices[i]!==void 0)throw new Error(Nt("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}Pr.inherits(Ln,cs);Ln.prototype._getIndex=function(r){var e=this._bucketIndices[jb(r)];return this._dynamicBranches&&(e=this._getBranchIndex(r,e)),e};Ln.prototype._getBranchIndex=function(r,e){var t=this._dynamicBranches,n,i,s;for(n=0,i=t.length;n<i;n++)if(s=t[n],s.type._check(r))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};Ln.prototype._check=function(r,e,t,n){var i=this._getIndex(r),s=i!==void 0;return s?this.types[i]._check(r,e,t,n):(t&&t(r,this),s)};Ln.prototype._read=function(r){var e=r.readLong(),t=this.types[e];if(t)return t._read(r);throw new Error(Nt("invalid union index: %s",e))};Ln.prototype._write=function(r,e){var t=this._getIndex(e);t===void 0&&sr(e,this),r.writeLong(t),e!==null&&this.types[t]._write(r,e)};Ln.prototype._update=function(r,e,t){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,t)}catch{continue}r._read=function(o){return s._read(o)};return}};Ln.prototype._copy=function(r,e){var t=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(t){case 1:$b(r)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(r);break;case 2:if(r===null)i=this._bucketIndices.null;else if(typeof r=="object"){var s=Object.keys(r);s.length===1&&(i=this._branchIndices[s[0]],r=r[s[0]])}break;default:i=this._getIndex(r)}i===void 0&&sr(r,this)}var o=this.types[i];if(r===null||n===3)return o._copy(r,e);switch(t){case 3:var a={};return a[o.branchName]=o._copy(r,e),a;default:return o._copy(r,e)}};Ln.prototype.compare=function(r,e){var t=this._getIndex(r),n=this._getIndex(e);if(t===void 0)sr(r,this);else if(n===void 0)sr(e,this);else return t===n?this.types[t].compare(r,e):Lt.compare(t,n)};Ln.prototype.typeName="union:unwrapped";Ln.prototype.random=function(){var r=on.nextInt(this.types.length);return this.types[r].random()};function pi(r,e){cs.call(this,r,e),Object.freeze(this)}Pr.inherits(pi,cs);pi.prototype._check=function(r,e,t,n){var i=!1;if(r===null)i=this._branchIndices.null!==void 0;else if(typeof r=="object"){var s=Object.keys(r);if(s.length===1){var o=s[0],a=this._branchIndices[o];if(a!==void 0)return t?(n.push(o),i=this.types[a]._check(r[o],e,t,n),n.pop(),i):this.types[a]._check(r[o],e)}}return!i&&t&&t(r,this),i};pi.prototype._read=function(r){var e=this.types[r.readLong()];if(!e)throw new Error(Nt("invalid union index"));var t=e._branchConstructor;return t===null?null:new t(e._read(r))};pi.prototype._write=function(r,e){var t,n,i;e===null?(t=this._branchIndices.null,t===void 0&&sr(e,this),r.writeLong(t)):(n=Object.keys(e),n.length===1&&(i=n[0],t=this._branchIndices[i]),t===void 0&&sr(e,this),r.writeLong(t),this.types[t]._write(r,e[i]))};pi.prototype._update=function(r,e,t){var n,i,s,o;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,t)}catch{continue}o=this.types[n]._branchConstructor,o?r._read=function(a){return new o(s._read(a))}:r._read=function(){return null};return}};pi.prototype._copy=function(r,e){var t=e&&e.wrap|0;if(t===2){var n=this.types[0];return r===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(r,e))}if(r===null&&this._branchIndices.null!==void 0)return null;var i,s,o;if(typeof r=="object"){var a=Object.keys(r);if(a.length===1){var u=a[0];if(i=this._branchIndices[u],i===void 0&&e.qualifyNames){var d,h;for(d=0,s=this.types.length;d<s;d++)if(h=this.types[d],h.name&&u===Qh(h.name)){i=d;break}}i!==void 0&&(o=this.types[i]._copy(r[u],e))}}if(t===1&&o===void 0)for(i=0,s=this.types.length;i<s&&o===void 0;)try{o=this.types[i]._copy(r,e)}catch{i++}if(o!==void 0)return t===3?o:new this.types[i]._branchConstructor(o);sr(r,this)};pi.prototype.compare=function(r,e){var t=r===null?"null":Object.keys(r)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[t];return t===n?t==="null"?0:this.types[i].compare(r[t],e[t]):Lt.compare(i,this._branchIndices[n])};pi.prototype.typeName="union:wrapped";pi.prototype.random=function(){var r=on.nextInt(this.types.length),e=this.types[r],t=e._branchConstructor;return t?new t(e.random()):null};function Fn(r,e){if(se.call(this,r,e),!Array.isArray(r.symbols)||!r.symbols.length)throw new Error(Nt("invalid enum symbols: %j",r.symbols));this.symbols=Object.freeze(r.symbols.slice()),this._indices={},this.symbols.forEach(function(t,n){if(!nu(t))throw new Error(Nt("invalid %s symbol: %j",this,t));if(this._indices[t]!==void 0)throw new Error(Nt("duplicate %s symbol: %j",this,t));this._indices[t]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Pr.inherits(Fn,se);Fn.prototype._check=function(r,e,t){var n=this._indices[r]!==void 0;return!n&&t&&t(r,this),n};Fn.prototype._read=function(r){var e=r.readLong(),t=this.symbols[e];if(t===void 0)throw new Error(Nt("invalid %s enum index: %s",this.name,e));return t};Fn.prototype._skip=function(r){r.skipLong()};Fn.prototype._write=function(r,e){var t=this._indices[e];t===void 0&&sr(e,this),r.writeLong(t)};Fn.prototype._match=function(r,e){return r.matchLong(e)};Fn.prototype.compare=function(r,e){return Lt.compare(this._indices[r],this._indices[e])};Fn.prototype._update=function(r,e){var t=this.symbols;e.typeName==="enum"&&(!e.name||~Ec(this).indexOf(e.name))&&e.symbols.every(function(n){return~t.indexOf(n)})&&(r.symbols=e.symbols,r._read=e._read)};Fn.prototype._copy=function(r){return this._check(r,void 0,sr),r};Fn.prototype._deref=function(r){r.symbols=this.symbols};Fn.prototype.getSymbols=function(){return this.symbols};Fn.prototype.typeName="enum";Fn.prototype.random=function(){return on.choice(this.symbols)};function Kn(r,e){if(se.call(this,r,e),r.size!==(r.size|0)||r.size<1)throw new Error(Nt("invalid %s size",this.branchName));this.size=r.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Pr.inherits(Kn,se);Kn.prototype._check=function(r,e,t){var n=J.Buffer.isBuffer(r)&&r.length===this.size;return!n&&t&&t(r,this),n};Kn.prototype._read=function(r){return r.readFixed(this.size)};Kn.prototype._skip=function(r){r.skipFixed(this.size)};Kn.prototype._write=function(r,e){(!J.Buffer.isBuffer(e)||e.length!==this.size)&&sr(e,this),r.writeFixed(e,this.size)};Kn.prototype._match=function(r,e){return r.matchFixed(e,this.size)};Kn.prototype.compare=J.Buffer.compare;Kn.prototype._update=function(r,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~Ec(this).indexOf(e.name))&&(r.size=this.size,r._read=this._read)};Kn.prototype._copy=Qn.prototype._copy;Kn.prototype._deref=function(r){r.size=this.size};Kn.prototype.getSize=function(){return this.size};Kn.prototype.typeName="fixed";Kn.prototype.random=function(){return on.nextBuffer(this.size)};function In(r,e){if(se.call(this),!r.values)throw new Error(Nt("missing map values: %j",r));this.valuesType=se.forSchema(r.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Pr.inherits(In,se);In.prototype._check=function(r,e,t,n){if(!r||typeof r!="object"||Array.isArray(r))return t&&t(r,this),!1;var i=Object.keys(r),s=!0,o,a,u,d;if(t){for(u=n.length,n.push(""),o=0,a=i.length;o<a;o++)d=n[u]=i[o],this.valuesType._check(r[d],e,t,n)||(s=!1);n.pop()}else for(o=0,a=i.length;o<a;o++)if(!this.valuesType._check(r[i[o]],e))return!1;return s};In.prototype._read=function(r){for(var e=this.valuesType,t={},n;n=Gd(r);)for(;n--;){var i=r.readString();t[i]=e._read(r)}return t};In.prototype._skip=function(r){for(var e=this.valuesType,t,n;n=r.readLong();)if(n<0)t=r.readLong(),r.pos+=t;else for(;n--;)r.skipString(),e._skip(r)};In.prototype._write=function(r,e){(!e||typeof e!="object"||Array.isArray(e))&&sr(e,this);var t=this.valuesType,n=Object.keys(e),i=n.length,s,o;if(i)for(r.writeLong(i),s=0;s<i;s++)o=n[s],r.writeString(o),t._write(r,e[o]);r.writeLong(0)};In.prototype._match=function(){throw new Error("maps cannot be compared")};In.prototype._update=function(r,e,t){e.typeName==="map"&&(r.valuesType=this.valuesType.createResolver(e.valuesType,t),r._read=this._read)};In.prototype._copy=function(r,e){if(r&&typeof r=="object"&&!Array.isArray(r)){var t=this.valuesType,n=Object.keys(r),i,s,o,a={};for(i=0,s=n.length;i<s;i++)o=n[i],a[o]=t._copy(r[o],e);return a}sr(r,this)};In.prototype.compare=In.prototype._match;In.prototype.typeName="map";In.prototype.getValuesType=function(){return this.valuesType};In.prototype.random=function(){var r={},e,t;for(e=0,t=on.nextInt(10);e<t;e++)r[on.nextString(on.nextInt(20))]=this.valuesType.random();return r};In.prototype._deref=function(r,e){r.values=this.valuesType._attrs(e)};function $n(r,e){if(se.call(this),!r.items)throw new Error(Nt("missing array items: %j",r));this.itemsType=se.forSchema(r.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Pr.inherits($n,se);$n.prototype._check=function(r,e,t,n){if(!Array.isArray(r))return t&&t(r,this),!1;var i=!0,s,o,a;if(t){for(a=n.length,n.push(""),s=0,o=r.length;s<o;s++)n[a]=""+s,this.itemsType._check(r[s],e,t,n)||(i=!1);n.pop()}else for(s=0,o=r.length;s<o;s++)if(!this.itemsType._check(r[s],e))return!1;return i};$n.prototype._read=function(r){for(var e=this.itemsType,t=[],n;n=r.readLong();)for(n<0&&(n=-n,r.skipLong());n--;)t.push(e._read(r));return t};$n.prototype._skip=function(r){for(var e,t;t=r.readLong();)if(t<0)e=r.readLong(),r.pos+=e;else for(;t--;)this.itemsType._skip(r)};$n.prototype._write=function(r,e){Array.isArray(e)||sr(e,this);var t=e.length,n;if(t)for(r.writeLong(t),n=0;n<t;n++)this.itemsType._write(r,e[n]);r.writeLong(0)};$n.prototype._match=function(r,e){for(var t=r.readLong(),n=e.readLong(),i;t&&n;){if(i=this.itemsType._match(r,e),i)return i;--t||(t=Gd(r)),--n||(n=Gd(e))}return Lt.compare(t,n)};$n.prototype._update=function(r,e,t){e.typeName==="array"&&(r.itemsType=this.itemsType.createResolver(e.itemsType,t),r._read=this._read)};$n.prototype._copy=function(r,e){Array.isArray(r)||sr(r,this);var t=new Array(r.length),n,i;for(n=0,i=r.length;n<i;n++)t[n]=this.itemsType._copy(r[n],e);return t};$n.prototype._deref=function(r,e){r.items=this.itemsType._attrs(e)};$n.prototype.compare=function(r,e){var t=r.length,n=e.length,i,s,o;for(i=0,s=Math.min(t,n);i<s;i++)if(o=this.itemsType.compare(r[i],e[i]))return o;return Lt.compare(t,n)};$n.prototype.getItemsType=function(){return this.itemsType};$n.prototype.typeName="array";$n.prototype.random=function(){var r=[],e,t;for(e=0,t=on.nextInt(10);e<t;e++)r.push(this.itemsType.random());return r};function Tr(r,e){e=e||{};var t=e.namespace;if(r.namespace!==void 0)e.namespace=r.namespace;else if(r.name){var n=/^(.*)\.[^.]+$/.exec(r.name);n&&(e.namespace=n[1])}if(se.call(this,r,e),!Array.isArray(r.fields))throw new Error(Nt("non-array record fields: %j",r.fields));if(Lt.hasDuplicates(r.fields,function(i){return i.name}))throw new Error(Nt("duplicate field name: %j",r.fields));this._fieldsByName={},this.fields=Object.freeze(r.fields.map(function(i){var s=new As(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=r.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=t,Object.freeze(this)}Pr.inherits(Tr,se);Tr.prototype._getConstructorName=function(){return this.name?Qh(this.name):this._isError?"Error$":"Record$"};Tr.prototype._createConstructor=function(r){var e={},t,n,i,s,o,a,u;for(t=0,n=this.fields.length;t<n;t++)i=this.fields[t],o=i.defaultValue,a=o()!==void 0,s=i.name,r&&this._isError&&s==="stack"&&se.isType(i.type,"string")&&!a&&(u=i),a&&(e[t]=o);var d=this;function h(v){const _=d._getConstructorName();var P={[_]:function(...A){for(var E=0,T=d.fields.length;E<T;E++){let C=d.fields[E];C.defaultValue()===void 0?this[C.name]=A[E]:A[E]===void 0?this[C.name]=v[E]():this[C.name]=A[E]}u&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[_];return P}var m=h(e);return m.getType=function(){return d},m.type=d,this._isError&&(Pr.inherits(m,Error),m.prototype.name=this._getConstructorName()),m.prototype.clone=function(v){return d.clone(this,v)},m.prototype.compare=function(v){return d.compare(this,v)},m.prototype.isValid=function(v){return d.isValid(this,v)},m.prototype.toBuffer=function(){return d.toBuffer(this)},m.prototype.toString=function(){return d.toString(this)},m.prototype.wrap=function(){return d.wrap(this)},m.prototype.wrapped=m.prototype.wrap,m};Tr.prototype._createChecker=function(){const r=[];this.fields.forEach(n=>{r.push(n.type)});var e=this;function t(n){var i=e._getConstructorName(),s={[i]:function(o,a,u,d){if(o===null||typeof o!="object"||a&&!this._checkFields(o))return u&&u(o,this),!1;const h=[];if(e.fields.length)for(var m=0,v=e.fields.length;m<v;m++){let A=e.fields[m];A.defaultValue()!==void 0&&h.push(o[A.name])}else return!0;if(u){var _=1,P=d.length;d.push("");for(var m=0,v=e.fields.length;m<v;m++){let T=e.fields[m];d[P]=T.name,_&=T.defaultValue()===void 0?n[m]._check(o[T.name],T,u,d):h[m]===void 0||n[m]._check(h[m],T,u,d)}return d.pop(),!!_}else return e.fields.reduce((A,E,T)=>A&&(E.defaultValue()===void 0?n[T]._check(o[E.name]):h[T]===void 0||n[T]._check(h[T],a)),!0)}}[i];return s}return t(r)};Tr.prototype._createReader=function(){var r=[this.recordConstructor],e,t;for(e=0,t=this.fields.length;e<t;e++)r.push(this.fields[e].type);var n=this;function i(s){var o=n._getConstructorName(),a={[o]:function(u){return new s[0](...s.slice(1).map(d=>d._read(u)))}}[o];return a}return i(r)};Tr.prototype._createSkipper=function(){var r=[];this.fields.forEach(n=>{r.push(n.type)});var e=this;function t(n){var i=e._getConstructorName(),s={[i]:function(o){n.forEach(a=>a._skip(o))}}[i];return s}return t(r)};Tr.prototype._createWriter=function(){var r=[],e={};this.fields.forEach((i,s)=>{r.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var t=this;function n(i,s){var o=t._getConstructorName(),a={[o]:function(u,d){for(var h=0,m=t.fields.length;h<m;h++){let v=t.fields[h];v.defaultValue()===void 0?i[h]._write(u,d[v.name]):d[v.name]===void 0?u.writeBinary(s[h],s[h].length):i[h]._write(u,d[v.name])}}}[o];return a}return n(r,e)};Tr.prototype._update=function(r,e,t){if(e.name&&!~Ec(this).indexOf(e.name))throw new Error(Nt("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=Lt.toMap(i,function(E){return E.name}),o={},a,u,d,h,m,v,_;for(a=0;a<n.length;a++){for(d=n[a],m=Ec(d),v=[],u=0;u<m.length;u++)h=m[u],s[h]&&v.push(h);if(v.length>1)throw new Error(Nt("ambiguous aliasing for %s.%s (%s)",e.name,d.name,v));if(v.length)h=v[0],_={resolver:d.type.createResolver(s[h].type,t),name:"_"+d.name},o[h]?o[h].push(_):o[h]=[_];else if(d.defaultValue()===void 0)throw new Error(Nt("no matching field for default-less %s.%s",e.name,d.name))}var P=this;function A(){var E=P._getConstructorName(),T={[E]:function(C,L){if(!L){var K=[];for(O=0;O<n.length;O++){for(d=n[O],m=Ec(d),v=[],F=0;F<m.length;F++)h=m[F],s[h]&&v.push(h);v.length||K.push(void 0)}for(var O=0;O<i.length;O++){let H=e.fields[O];if(h=H.name,o[h]===void 0)H.type._skip(C);else for(var F=o[h].length;F--;)K.unshift(F?o[h][F].resolver._peek(C):o[h][F].resolver._read(C))}return new P.recordConstructor(...K)}}}[E];return T}r._read=A()};Tr.prototype._match=function(r,e){var t=this.fields,n,i,s,o,a;for(n=0,i=t.length;n<i;n++)if(s=t[n],o=s._order,a=s.type,o){if(o*=a._match(r,e),o)return o}else a._skip(r),a._skip(e);return 0};Tr.prototype._checkFields=function(r){var e=Object.keys(r),t,n;for(t=0,n=e.length;t<n;t++)if(!this._fieldsByName[e[t]])return!1;return!0};Tr.prototype._copy=function(r,e){var t=e&&e.fieldHook,n=[void 0],i,s,o,a;for(i=0,s=this.fields.length;i<s;i++)o=this.fields[i],a=r[o.name],a===void 0&&o.hasOwnProperty("defaultValue")&&(a=o.defaultValue()),(e&&!e.skip||a!==void 0)&&(a=o.type._copy(a,e)),t&&(a=t(o,a,this)),n.push(a);var u=this.recordConstructor;return new(u.bind.apply(u,n))};Tr.prototype._deref=function(r,e){r.fields=this.fields.map(function(t){var n=t.type,i={name:t.name,type:n._attrs(e)};if(e.exportAttrs){var s=t.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var o=t.order;o!=="ascending"&&(i.order=o);var a=t.aliases;a.length&&(i.aliases=a);var u=t.doc;u!==void 0&&(i.doc=u)}return i})};Tr.prototype.compare=function(r,e){var t=this.fields,n,i,s,o,a,u;for(n=0,i=t.length;n<i;n++)if(s=t[n],o=s.name,a=s._order,u=s.type,a&&(a*=u.compare(r[o],e[o]),a))return a;return 0};Tr.prototype.random=function(){var r=this.fields.map(function(t){return t.type.random()});r.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,r))};Tr.prototype.field=function(r){return this._fieldsByName[r]};Tr.prototype.getField=Tr.prototype.field;Tr.prototype.getFields=function(){return this.fields};Tr.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(Tr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function Xr(r,e){this._logicalTypeName=r.logicalType,se.call(this),$s=this;try{this._underlyingType=se.forSchema(r,e)}finally{$s=null;var t=wa.length;t&&wa[t-1][0]===this&&wa.pop()}se.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}Pr.inherits(Xr,se);Object.defineProperty(Xr.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(Xr.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var r,e,t;for(r=0,e=wa.length;r<e;r++)if(t=wa[r],t[0]===this)return t[1]}});Xr.prototype.getUnderlyingType=function(){return this.underlyingType};Xr.prototype._read=function(r){return this._fromValue(this.underlyingType._read(r))};Xr.prototype._write=function(r,e){this.underlyingType._write(r,this._toValue(e))};Xr.prototype._check=function(r,e,t,n){try{var i=this._toValue(r)}catch{}return i===void 0?(t&&t(r,this),!1):this.underlyingType._check(i,e,t,n)};Xr.prototype._copy=function(r,e){var t=this.underlyingType;switch(e&&e.coerce){case 3:return t._copy(this._toValue(r),e);case 2:return this._fromValue(t._copy(r,e));default:return this._fromValue(t._copy(this._toValue(r),e))}};Xr.prototype._update=function(r,e,t){var n=this._resolve(e,t);n&&(r._read=function(i){return n(e._read(i))})};Xr.prototype.compare=function(r,e){var t=this._toValue(r),n=this._toValue(e);return this.underlyingType.compare(t,n)};Xr.prototype.random=function(){return this._fromValue(this.underlyingType.random())};Xr.prototype._deref=function(r,e){var t=this.underlyingType,n=t.name!==void 0&&e.derefed[t.name];return r=t._attrs(e),!n&&e.exportAttrs&&(typeof r=="string"&&(r={type:r}),r.logicalType=this._logicalTypeName,this._export(r)),r};Xr.prototype._skip=function(r){this.underlyingType._skip(r)};Xr.prototype._export=function(){};Xr.prototype._fromValue=Lt.abstractFunction;Xr.prototype._toValue=Lt.abstractFunction;Xr.prototype._resolve=Lt.abstractFunction;function vn(r){this._concreteTypeName="long",wr.call(this,!0),this._noUnpack=!!r}Pr.inherits(vn,Zn);vn.prototype.typeName="abstract:long";vn.prototype._check=function(r,e,t){var n=this._isValid(r);return!n&&t&&t(r,this),n};vn.prototype._read=function(r){var e,t;if(this._noUnpack?(t=r.pos,r.skipLong(),e=r.buf.slice(t,r.pos)):e=r.unpackLongBytes(r),r.isValid())return this._fromBuffer(e)};vn.prototype._write=function(r,e){this._isValid(e)||sr(e,this);var t=this._toBuffer(e);this._noUnpack?r.writeFixed(t):r.packLongBytes(t)};vn.prototype._copy=function(r,e){switch(e&&e.coerce){case 3:return this._toJSON(r);case 2:return this._fromJSON(r);default:return this._fromJSON(this._toJSON(r))}};vn.prototype._deref=function(){return"long"};vn.prototype._update=function(r,e){var t=this;switch(e.typeName){case"int":r._read=function(n){return t._fromJSON(e._read(n))};break;case"long":r._read=function(n){return t._read(n)}}};vn.prototype.random=function(){return this._fromJSON(Zn.prototype.random())};vn.prototype._fromBuffer=Lt.abstractFunction;vn.prototype._toBuffer=Lt.abstractFunction;vn.prototype._fromJSON=Lt.abstractFunction;vn.prototype._toJSON=Lt.abstractFunction;vn.prototype._isValid=Lt.abstractFunction;vn.prototype.compare=Lt.abstractFunction;function As(r,e){var t=r.name;if(typeof t!="string"||!nu(t))throw new Error(Nt("invalid field name: %s",t));this.name=t,this.type=se.forSchema(r.type,e),this.aliases=r.aliases||[],this.doc=r.doc!==void 0?""+r.doc:void 0,this._order=function(o){switch(o){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Nt("invalid order: %j",o))}}(r.order===void 0?"ascending":r.order);var n=r.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});qa(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}As.prototype.defaultValue=function(){};Object.defineProperty(As.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});As.prototype.getAliases=function(){return this.aliases};As.prototype.getDefault=As.prototype.defaultValue;As.prototype.getName=function(){return this.name};As.prototype.getOrder=function(){return this.order};As.prototype.getType=function(){return this.type};function Zh(r){this._readerType=r,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}Zh.prototype._peek=se.prototype._peek;Zh.prototype.inspect=function(){return"<Resolver>"};function U3(){this.str=void 0}function Fb(r,e,t,n){if(t){if(t._readerType!==r)throw new Error("invalid resolver");return t._read(e,n)}else return r._read(e)}function Qh(r){var e=r.split(".");return e[e.length-1]}function _f(r,e){~r.indexOf(".")?r=r.replace(/^\./,""):e&&(r=e+"."+r),r.split(".").forEach(function(n){if(!nu(n))throw new Error(Nt("invalid name: %j",r))});var t=Qh(r);return qa(t)?t:r}function Ec(r){var e={};r.name&&(e[r.name]=!0);var t=r.aliases,n,i;for(n=0,i=t.length;n<i;n++)e[t[n]]=!0;return Object.keys(e)}function qa(r){var e=vf[r];return e&&e.prototype instanceof wr}function Kb(r){if(r==="error")r="record";else{var e=/^([^:]+):(.*)$/.exec(r);e&&(e[1]==="union"?r=e[2]+"Union":r=e[1])}return Lt.capitalize(r)+"Type"}function Gd(r){var e=r.readLong();return e<0&&(e=-e,r.skipLong()),e}function e0(r){return r>=-9007199254740990&&r<=9007199254740990}function $b(r){return r&&r.type==="Buffer"&&Array.isArray(r.data)}function nu(r){return D3.test(r)}function sr(r,e){throw new Error(Nt("invalid %s: %j",e,r))}function Qf(r){var e=r.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function jb(r){if(r===null)return"null";var e=typeof r;if(e==="object"){if(Array.isArray(r))return"array";if(J.Buffer.isBuffer(r))return"buffer"}return e}function F3(r){var e={},t,n,i,s;for(t=0,n=r.length;t<n;t++)if(s=r[t],!se.isType(s,"logical")){if(i=Qf(s),e[i])return!0;e[i]=!0}return!1}function K3(r){var e=["int","long","float","double"],t=-1,n=null,i,s,o,a;for(i=0,s=r.length;i<s;i++)o=r[i],a=e.indexOf(o.typeName),a>t&&(t=a,n=o);return n}function $3(r,e){var t={},n,i,s,o;for(n=0,i=r.length;n<i;n++){if(s=r[n],s.typeName==="string")return s;o=s.symbols;var a,u;for(a=0,u=o.length;a<u;a++)t[o[a]]=!0}return se.forSchema({type:"enum",symbols:Object.keys(t)},e)}function j3(r,e){var t=-1,n,i,s;for(n=0,i=r.length;n<i;n++){if(s=r[n],s.typeName==="bytes")return s;t===-1?t=s.size:s.size!==t&&(t=-2)}return t<0?se.forSchema("bytes",e):r[0]}function z3(r,e){var t=[],n={},i={},s=!0,o,a,u,d;for(o=0,a=r.length;o<a;o++)if(u=r[o],u.typeName==="map")s=!1,t.push(u.valuesType);else{d=u.fields;var h,m,v,_,P,A;for(h=0,m=d.length;h<m;h++)v=d[h],P=v.name,A=v.type,t.push(A),s&&(n[P]||(n[P]=[]),n[P].push(A),_=v.defaultValue(),_!==void 0&&(i[P]=_))}if(s){var E=Object.keys(n);for(o=0,a=E.length;o<a;o++)P=E[o],n[P].length<r.length&&i[P]===void 0&&(e&&e.strictDefaults?s=!1:(n[P].unshift(se.forSchema("null",e)),i[P]=null))}var T;return s?T={type:"record",fields:E.map(function(C){var L=se.forTypes(n[C],e),K=i[C];if(K!==void 0&&~L.typeName.indexOf("union")){var O=L.types.slice(),F,H;for(F=0,H=O.length;F<H&&!O[F].isValid(K);F++);if(F>0){var V=O[0];O[0]=O[F],O[F]=V,L=se.forSchema(O,e)}}return{name:C,type:L,default:i[C]}})}:T={type:"map",values:se.forTypes(t,e)},se.forSchema(T,e)}var t0={Type:se,getTypeBucket:Qf,getValueBucket:jb,isPrimitive:qa,isValidName:nu,qualify:_f,builtins:function(){var r={LogicalType:Xr,UnwrappedUnionType:Ln,WrappedUnionType:pi},e=Object.keys(vf),t,n,i;for(t=0,n=e.length;t<n;t++)i=e[t],r[Kb(i)]=vf[i];return r}()},wc=t0;function q3(r,e){var t;if(typeof r=="string")try{t=JSON.parse(r)}catch{t=r}else t=r;return wc.Type.forSchema(t,e)}var H3={Type:wc.Type,parse:q3,types:wc.builtins,combine:wc.Type.forTypes,infer:wc.Type.forValue},r0=t0,or=za,no=Jm.exports,Zi=$f,rr=Ka,n0=or.Tap,Vr=r0.Type,Or=rr.debuglog("avsc:services"),Yr=rr.format,Ji={namespace:"org.apache.avro.ipc"},zb=Vr.forSchema("boolean",Ji),Qi=Vr.forSchema({type:"map",values:"bytes"},Ji),i0=Vr.forSchema("string",Ji),iu=Vr.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",Qi],default:null}]},Ji),su=Vr.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",Qi],default:null}]},Ji),s0=16,o0=new Es("",Vr.forSchema({name:"PingRequest",type:"record",fields:[]},Ji),Vr.forSchema(["string"],Ji),Vr.forSchema("null",Ji));function Es(r,e,t,n,i,s){if(this.name=r,!Vr.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!Vr.isType(t,"union")||!Vr.isType(t.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=t,i&&(!Vr.isType(n,"null")||t.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}Es.forSchema=function(r,e,t){if(t=t||{},!r0.isValidName(r))throw new Error(Yr("invalid message name: %s",r));if(!Array.isArray(e.request))throw new Error(Yr("invalid message request: %s",r));var n=Yr("%s.%sRequest",Ji.namespace,or.capitalize(r)),i=Vr.forSchema({name:n,type:"record",namespace:t.namespace||"",fields:e.request},t);if(delete t.registry[n],!e.response)throw new Error(Yr("invalid message response: %s",r));var s=Vr.forSchema(e.response,t);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(Yr("invalid message errors: %s",r));var o=Vr.forSchema(["string"].concat(e.errors||[]),t),a=!!e["one-way"];return new Es(r,i,o,s,a,e.doc)};Es.prototype.schema=Vr.prototype.getSchema;Es.prototype._attrs=function(r){var e=this.requestType._attrs(r),t={request:e.fields,response:this.responseType._attrs(r)},n=this.doc;n!==void 0&&(t.doc=n);var i=this.errorType._attrs(r);return i.length>1&&(t.errors=i.slice(1)),this.oneWay&&(t["one-way"]=!0),t};or.addDeprecatedGetters(Es,["name","errorType","requestType","responseType"]);Es.prototype.isOneWay=rr.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function Xt(r,e,t,n,i){if(typeof r!="string")return Xt.forProtocol(r,e);this.name=r,this._messagesByName=e||{},this.messages=Object.freeze(or.objectValues(this._messagesByName)),this._typesByName=t||{},this.types=Object.freeze(or.objectValues(this._typesByName)),this.protocol=n,this._hashStr=or.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}Xt.Client=ei;Xt.Server=Di;Xt.compatible=function(r,e){try{Wb(r,e)}catch{return!1}return!0};Xt.forProtocol=function(r,e){e=e||{};var t=r.protocol;if(!t)throw new Error("missing protocol name");if(r.namespace!==void 0)e.namespace=r.namespace;else{var n=/^(.*)\.[^.]+$/.exec(t);n&&(e.namespace=n[1])}t=r0.qualify(t,e.namespace),r.types&&r.types.forEach(function(s){Vr.forSchema(s,e)});var i;return r.messages&&(i={},Object.keys(r.messages).forEach(function(s){i[s]=Es.forSchema(s,r.messages[s],e)})),new Xt(t,i,e.registry,r)};Xt.isService=function(r){return!!r&&r.hasOwnProperty("_hashStr")};Xt.prototype.createClient=function(r){var e=new ei(this,r);return J.process.nextTick(function(){if(r&&r.server){var t={objectMode:!0},n=[new Zi.PassThrough(t),new Zi.PassThrough(t)];r.server.createChannel({readable:n[0],writable:n[1]},t),e.createChannel({readable:n[1],writable:n[0]},t)}else r&&r.transport&&e.createChannel(r.transport)}),e};Xt.prototype.createServer=function(r){return new Di(this,r)};Object.defineProperty(Xt.prototype,"hash",{enumerable:!0,get:function(){return or.bufferFrom(this._hashStr,"binary")}});Xt.prototype.message=function(r){return this._messagesByName[r]};Xt.prototype.type=function(r){return this._typesByName[r]};Xt.prototype.inspect=function(){return Yr("<Service %j>",this.name)};or.addDeprecatedGetters(Xt,["message","messages","name","type","types"]);Xt.prototype.createEmitter=rr.deprecate(function(r,e){e=e||{};var t=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=t.createChannel(r,e);return G3(t,n),n},"use `.createClient()` instead of `.createEmitter()`");Xt.prototype.createListener=rr.deprecate(function(r,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(r,e)},"use `.createServer().createChannel()` instead of `.createListener()`");Xt.prototype.emit=rr.deprecate(function(r,e,t,n){if(!t||!this.equals(t.client._svc$))throw new Error("invalid emitter");var i=t.client;return ei.prototype.emitMessage.call(i,r,e,n&&n.bind(this)),t.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");Xt.prototype.equals=rr.deprecate(function(r){return Xt.isService(r)&&this.getFingerprint().equals(r.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");Xt.prototype.getFingerprint=rr.deprecate(function(r){return or.getHash(JSON.stringify(this.protocol),r)},"use `.hash` instead of `.getFingerprint()`");Xt.prototype.getSchema=rr.deprecate(Vr.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");Xt.prototype.on=rr.deprecate(function(r,e){var t=this;return this._server.onMessage(r,function(n,i){return e.call(t,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");Xt.prototype.subprotocol=rr.deprecate(function(){var r=this._server,e={strictTypes:r._strict,cache:r._cache},t=new Di(r.service,e);return t._handlers=Object.create(r._handlers),new Xt(this.name,this._messagesByName,this._typesByName,this.protocol,t)},"`.subprotocol()` will be removed in 5.1");Xt.prototype._attrs=function(r){var e={protocol:this.name},t=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(r);typeof s!="string"&&t.push(s)}}),t.length&&(e.types=t);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(r)},this)),r&&r.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function W3(r,e,t){t===void 0&&typeof e=="function"&&(t=e,e=void 0);var n=new Xt({protocol:"Empty"},Ji),i;n.createClient({timeout:e&&e.timeout}).createChannel(r,{scope:e&&e.scope,endWritable:typeof r=="function"}).once("handshake",function(s,o){i=o.serverProtocol,this.destroy(!0)}).once("eot",function(s,o){o&&!/interrupted/.test(o)?t(o):t(null,JSON.parse(i))})}function ei(r,e){e=e||{},no.EventEmitter.call(this),this._svc$=r,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=or.getOption(e,"timeout",1e4),e.remoteProtocols&&Gb(this._cache$,e.remoteProtocols,r,!0),this._svc$.messages.forEach(function(t){this[t.name]=this._createMessageHandler$(t)},this)}rr.inherits(ei,no.EventEmitter);ei.prototype.activeChannels=function(){return this._channels$.slice()};ei.prototype.createChannel=function(r,e){var t=e&&e.objectMode,n;if(typeof r=="function"){var i;t?i=r:i=function(h){var m=new au,v=r(function(_,P){if(_){h(_);return}var A=new Lo().once("error",function(E){n.destroy(E)});h(null,P.pipe(A))});if(v)return m.pipe(v),m},n=new a0(this,i,e)}else{var s,o;if(Xb(r)?s=o=r:(s=r.readable,o=r.writable),!t){var a=new Ha;s=s.pipe(a);var u=new cu;u.pipe(o),o=u}n=new el(this,s,o,e),t||(n.once("eot",function(){s.unpipe(a),u.unpipe(o)}),a.once("error",function(h){n.destroy(h)}))}var d=this._channels$;return d.push(n),n.once("_drain",function(){d.splice(d.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};ei.prototype.destroyChannels=function(r){this._channels$.forEach(function(e){e.destroy(r&&r.noWait)})};ei.prototype.emitMessage=function(r,e,t,n){var i=Zb(this._svc$,r),s=new tl(i,{},e);this._emitMessage$(s,t,n)};ei.prototype.remoteProtocols=function(){return Vb(this._cache$,!0)};Object.defineProperty(ei.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});ei.prototype.use=function(){var r,e,t;for(r=0,e=arguments.length;r<e;r++)t=arguments[r],this._fns$.push(t.length<3?t(this):t);return this};ei.prototype._emitMessage$=function(r,e,t){!t&&typeof e=="function"&&(t=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)Or("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(r,e,t)});else{var o=new Error("no active channels");J.process.nextTick(function(){t?t.call(new u0(r._msg),o):n.emit("error",o)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var a;if(s===1)a=i[0];else if(this._policy$){if(a=this._policy$(this._channels$.slice()),!a){Or("policy returned no channel, skipping call");return}}else a=i[Math.floor(Math.random()*s)];a._emit(r,e,function(u,d){var h=this,m=h.message.errorType;if(u){n._strict$&&(u=m.clone(u.message,{wrapUnions:!0})),v(u);return}if(!d){v();return}u=d.error,n._strict$||(u===void 0?u=null:Vr.isType(m,"union:unwrapped")?typeof u=="string"&&(u=new Error(u)):u&&u.string&&typeof u.string=="string"&&(u=new Error(u.string))),v(u,d.response);function v(_,P){t?t.call(h,_,P):_&&n.emit("error",_)}})};ei.prototype._createMessageHandler$=function(r){var e=r.requestType.getFields(),t=e.map(function(i){return i.getName()}),n="return function "+r.name+"(";return t.length&&(n+=t.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=t.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+r.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function Di(r,e){e=e||{},no.EventEmitter.call(this),this.service=r,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&Gb(this._cache,e.remoteProtocols,r,!1),r.messages.forEach(function(t){var n=t.name;e.noCapitalize||(n=or.capitalize(n)),this["on"+n]=this._createMessageHandler(t)},this)}rr.inherits(Di,no.EventEmitter);Di.prototype.activeChannels=function(){return or.objectValues(this._channels)};Di.prototype.createChannel=function(r,e){var t=e&&e.objectMode,n;if(typeof r=="function"){var i;t?i=r:i=function(m){var v=new Lo().once("error",function(_){n.destroy(_)});return r(function(_,P){if(_){m(_);return}var A=new au;A.pipe(P),m(null,A)}).pipe(v)},n=new qb(this,i,e)}else{var s,o;if(Xb(r)?s=o=r:(s=r.readable,o=r.writable),!t){var a=new Ha;s=s.pipe(a);var u=new cu;u.pipe(o),o=u}n=new Hb(this,s,o,e),t||(n.once("eot",function(){s.unpipe(a),u.unpipe(o)}),a.once("error",function(m){n.destroy(m)}))}this.listeners("error").length||this.on("error",this._onError);var d=this._nextChannelId++,h=this._channels;return h[d]=n.once("eot",function(){delete h[d]}),this.emit("channel",n),n};Di.prototype.onMessage=function(r,e){return Zb(this.service,r),this._handlers[r]=e,this};Di.prototype.remoteProtocols=function(){return Vb(this._cache,!1)};Di.prototype.use=function(){var r,e,t;for(r=0,e=arguments.length;r<e;r++)t=arguments[r],this._fns.push(t.length<3?t(this):t);return this};Di.prototype._createMessageHandler=function(r){var e=r.name,t=r.requestType.fields,n=t.length,i=t.length?", "+t.map(function(o){return"req."+o.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};Di.prototype._onError=function(r){!this._silent&&r.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),r.rpcCode?(console.error(r.rpcCode),console.error(r.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(r)))};function cn(r,e){e=e||{},no.EventEmitter.call(this),this.client=r,this.timeout=or.getOption(e,"timeout",r._timeout$),this._endWritable=!!or.getOption(e,"endWritable",!0),this._prefix=Jb(e.scope);var t=r._cache$,n=r._svc$,i=e.serverHash;i||(i=n.hash);var s=t[i];s||(i=n.hash,s=t[i]=new io(n,n,i)),this._adapter=s,this._registry=new ou(this,s0),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(o,a){Or("client channel EOT"),this.destroyed=!0,this.emit("eot",o,a)})}rr.inherits(cn,no.EventEmitter);cn.prototype.destroy=function(r){Or("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,t=this.pending;r&&e.clear(),r||!t?f0(r)?(Or("fatal client channel error: %s",r),this.emit("_eot",t,r)):this.emit("_eot",t):Or("client channel entering drain mode (%s pending)",t)};cn.prototype.ping=function(r,e){!e&&typeof r=="function"&&(e=r,r=void 0);var t=this,n=new tl(o0);this._emit(n,{timeout:r},function(i){e?e.call(t,i):i&&t.destroy(i)})};cn.prototype._createHandshakeRequest=function(r,e){var t=this.client._svc$;return{clientHash:t.hash,clientProtocol:e?null:JSON.stringify(t.protocol),serverHash:r._hash}};cn.prototype._emit=function(r,e,t){var n=r._msg,i=n.oneWay?void 0:new c0(n,{}),s=new u0(n,this),o=this;this.pending++,J.process.nextTick(function(){if(!n.name)a(r,i,u);else{o.emit("outgoingCall",s,e);var h=o.client._fns$;Or("starting client middleware chain (%s middleware)",h.length),Qb({fns:h,ctx:s,wreq:r,wres:i,onTransition:a,onCompletion:u,onError:d})}});function a(h,m,v){var _,P;if(o.destroyed)_=new Error("channel destroyed");else try{P=h.toBuffer()}catch{_=Jd(Yr("invalid %j request",n.name),h,[{name:"headers",type:Qi},{name:"request",type:n.requestType}])}if(_){v(_);return}var A=e&&e.timeout!==void 0?e.timeout:o.timeout,E=o._registry.add(A,function(T,C,L){if(!T&&!n.oneWay)try{L._decodeResponse(C,m,n)}catch(K){T=K}v(T)});E|=o._prefix,Or("sending message %s",E),o._send(E,P,!!n&&n.oneWay)}function u(h){o.pending--,t.call(s,h,i),o.draining&&!o.destroyed&&!o.pending&&o.destroy()}function d(h){o.client.emit("error",h,o)}};cn.prototype._getAdapter=function(r){var e=r.serverHash,t=this.client._cache$,n=t[e];if(n)return n;var i=JSON.parse(r.serverProtocol),s=Xt.forProtocol(i);return n=new io(this.client._svc$,s,e,!0),t[e]=n};cn.prototype._matchesPrefix=function(r){return Yb(r,this._prefix)};cn.prototype._send=or.abstractFunction;or.addDeprecatedGetters(cn,["pending","timeout"]);cn.prototype.getCache=rr.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");cn.prototype.getProtocol=rr.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");cn.prototype.isDestroyed=rr.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function a0(r,e,t){cn.call(this,r,t),this._writableFactory=e,(!t||!t.noPing)&&(Or("emitting ping request"),this.ping())}rr.inherits(a0,cn);a0.prototype._send=function(r,e){var t=this._registry.get(r),n=this._adapter,i=this;return J.process.nextTick(s),!0;function s(o){if(!i.destroyed){var a=i._createHandshakeRequest(n,!o),u=i._writableFactory.call(i,function(d,h){if(d){t(d);return}h.on("data",function(m){Or("received response %s",m.id);var v=J.Buffer.concat(m.payload);try{var _=rl(su,v),P=_.head;P.serverHash&&(n=i._getAdapter(P))}catch(E){t(E);return}var A=P.match;Or("handshake match: %s",A),i.emit("handshake",a,P),A==="NONE"?J.process.nextTick(function(){s(!0)}):(i._adapter=n,t(null,_.tail,n))})});if(!u){t(new Error("invalid writable stream"));return}u.write({id:r,payload:[iu.toBuffer(a),e]}),i._endWritable&&u.end()}}};function el(r,e,t,n){cn.call(this,r,n),this._readable=e,this._writable=t,this._connected=!!(n&&n.noPing),this._readable.on("end",h),this._writable.on("finish",m);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",m),this._endWritable&&(Or("ending transport"),this._writable.end()),this._readable.removeListener("data",u).removeListener("data",d).removeListener("end",h)});var o;this._connected?this._readable.on("data",d):(this._readable.on("data",u),J.process.nextTick(a),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function a(v){if(!i.destroyed){o=i._createHandshakeRequest(i._adapter,!v);var _=[iu.toBuffer(o),or.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:_})}}function u(v){if(!i._matchesPrefix(v.id)){Or("discarding unscoped response %s (still connecting)",v.id);return}var _=J.Buffer.concat(v.payload);try{var P=rl(su,_).head;P.serverHash&&(i._adapter=i._getAdapter(P))}catch(E){i.destroy(E);return}var A=P.match;Or("handshake match: %s",A),i.emit("handshake",o,P),A==="NONE"?J.process.nextTick(function(){a(!0)}):(Or("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",u).on("data",d),i._connected=!0,i.emit("_ready"),o=null)}function d(v){var _=v.id;if(!i._matchesPrefix(_)){Or("discarding unscoped message %s",_);return}var P=i._registry.get(_);P&&J.process.nextTick(function(){Or("received message %s",_),P(null,J.Buffer.concat(v.payload),i._adapter)})}function h(){i.destroy(!0)}function m(){i.destroy()}}rr.inherits(el,cn);el.prototype._emit=function(){if(this._connected||this.draining)cn.prototype._emit.apply(this,arguments);else{Or("queuing request");var r=[],e,t;for(e=0,t=arguments.length;e<t;e++)r.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,r)})}};el.prototype._send=function(r,e,t){if(t){var n=this;J.process.nextTick(function(){n._registry.get(r)(null,or.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:r,payload:[e]})};function Pn(r,e){e=e||{},no.EventEmitter.call(this),this.server=r,this._endWritable=!!or.getOption(e,"endWritable",!0),this._prefix=Jb(e.scope);var t=r._cache,n=r.service,i=n.hash;t[i]||(t[i]=new io(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,o){Or("server channel EOT"),this.emit("eot",s,o)})}rr.inherits(Pn,no.EventEmitter);Pn.prototype.destroy=function(r){this.draining||(this.draining=!0,this.emit("_drain")),(r||!this.pending)&&(this.destroyed=!0,f0(r)?(Or("fatal server channel error: %s",r),this.emit("_eot",this.pending,r)):this.emit("_eot",this.pending))};Pn.prototype._createHandshakeResponse=function(r,e){var t=this.server.service,n=t.hash,i=e&&e.serverHash.equals(n);return{match:r?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(t.protocol),serverHash:i?null:n}};Pn.prototype._getAdapter=function(r){var e=r.clientHash,t=this.server._cache[e];if(t)return t;if(!r.clientProtocol)throw Hs("UNKNOWN_PROTOCOL");var n=JSON.parse(r.clientProtocol),i=Xt.forProtocol(n);return t=new io(i,this.server.service,e,!0),this.server._cache[e]=t};Pn.prototype._matchesPrefix=function(r){return Yb(r,this._prefix)};Pn.prototype._receive=function(r,e,t){var n=this,i;try{i=e._decodeRequest(r)}catch(v){t(n._encodeSystemError(Hs("INVALID_REQUEST",v)));return}var s=i._msg,o=new c0(s,{});if(!s.name){o.response=null,t(o.toBuffer(),!1);return}var a=new u0(s,this);n.emit("incomingCall",a);var u=this.server._fns;Or("starting server middleware chain (%s middleware)",u.length),n.pending++,Qb({fns:u,ctx:a,wreq:i,wres:o,onTransition:d,onCompletion:h,onError:m});function d(v,_,P){var A=n.server._handlers[s.name];if(A){var C=!s.oneWay;try{C?A.call(a,v.request,function(L,K){C=!1,_.error=L,_.response=K,P()}):(A.call(a,v.request),P())}catch(L){C?(C=!1,P(L)):m(L)}}else{var E=n.server._defaultHandler;if(E)E.call(a,v,_,P);else{var T=new Error(Yr("no handler for %s",s.name));P(Hs("NOT_IMPLEMENTED",T))}}}function h(v){n.pending--;var _=n.server,P;if(!v){var A=o.error,E=_._strict;E||(f0(A)?o.error=s.errorType.clone(A.message,{wrapUnions:!0}):A===null&&(A=o.error=void 0),A===void 0&&o.response===void 0&&s.responseType.isValid(null)&&(o.response=null));try{P=o.toBuffer()}catch{o.error!==void 0?v=Jd(Yr("invalid %j error",s.name),o,[{name:"headers",type:Qi},{name:"error",type:s.errorType}]):v=Jd(Yr("invalid %j response",s.name),o,[{name:"headers",type:Qi},{name:"response",type:s.responseType}])}}P?A!==void 0&&_.emit("error",Hs("APPLICATION_ERROR",A)):P=n._encodeSystemError(v,o.headers),t(P,s.oneWay),n.draining&&!n.pending&&n.destroy()}function m(v){n.server.emit("error",v,n)}};or.addDeprecatedGetters(Pn,["pending"]);Pn.prototype.getCache=rr.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Pn.prototype.getProtocol=rr.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Pn.prototype.isDestroyed=rr.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Pn.prototype._encodeSystemError=function(r,e){var t=this.server;t.emit("error",r,this);var n;t._sysErrFormatter?n=t._sysErrFormatter.call(this,r):r.rpcCode&&(n=r.message);var i;if(e)try{i=Qi.toBuffer(e)}catch(s){t.emit("error",s,this)}return J.Buffer.concat([i||or.bufferFrom([0]),or.bufferFrom([1,0]),i0.toBuffer(n||"internal server error")])};function qb(r,e,t){Pn.call(this,r,t),this._writable=void 0;var n=this,i;J.process.nextTick(function(){i=e.call(n,function(u,d){J.process.nextTick(function(){if(u){a(u);return}n._writable=d.on("finish",a),n.emit("_writable")})}).on("data",s).on("end",o)});function s(u){var d=u.id,h=J.Buffer.concat(u.payload),m;try{var v=rl(iu,h),_=v.head,P=n._getAdapter(_)}catch(T){m=Hs("INVALID_HANDSHAKE_REQUEST",T)}var A=n._createHandshakeResponse(m,_);n.emit("handshake",_,A),m?E(n._encodeSystemError(m)):n._receive(v.tail,P,E);function E(T){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){E(T)});return}n._writable.write({id:d,payload:[su.toBuffer(A),T]})}n._writable&&n._endWritable&&n._writable.end()}}function o(){n.destroy()}function a(u){i.removeListener("data",s).removeListener("end",o),n.destroy(u||!0)}}rr.inherits(qb,Pn);function Hb(r,e,t,n){Pn.call(this,r,n),this._adapter=void 0,this._writable=t.on("finish",u),this._readable=e.on("data",s).on("end",a),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",o).removeListener("end",a)}).once("eot",function(){this._writable.removeListener("finish",u),this._endWritable&&this._writable.end()});var i=this;function s(d){var h=d.id;if(!i._matchesPrefix(h))return;var m=J.Buffer.concat(d.payload),v;try{var _=rl(iu,m),P=_.head;i._adapter=i._getAdapter(P)}catch(T){v=Hs("INVALID_HANDSHAKE_REQUEST",T)}var A=i._createHandshakeResponse(v,P);i.emit("handshake",P,A),v?E(i._encodeSystemError(v)):(i._readable.removeListener("data",s).on("data",o),i._receive(_.tail,i._adapter,E));function E(T){i.destroyed||i._writable.write({id:h,payload:[su.toBuffer(A),T]})}}function o(d){var h=d.id;if(!!i._matchesPrefix(h)){var m=J.Buffer.concat(d.payload);i._receive(m,i._adapter,function(v,_){i.destroyed||_||i._writable.write({id:h,payload:[v]})})}}function a(){i.destroy()}function u(){i.destroy(!0)}}rr.inherits(Hb,Pn);function tl(r,e,t){this._msg=r,this.headers=e||{},this.request=t||{}}tl.prototype.toBuffer=function(){var r=this._msg;return J.Buffer.concat([Qi.toBuffer(this.headers),i0.toBuffer(r.name),r.requestType.toBuffer(this.request)])};function c0(r,e,t,n){this._msg=r,this.headers=e,this.error=t,this.response=n}c0.prototype.toBuffer=function(){var r=Qi.toBuffer(this.headers),e=this.error!==void 0;return J.Buffer.concat([r,zb.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function u0(r,e){this.channel=e,this.locals={},this.message=r,Object.freeze(this)}function ou(r,e){this._ctx=r,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}ou.prototype.get=function(r){return this._cbs[r&this._mask]};ou.prototype.add=function(r,e){this._id=this._id+1&this._mask;var t=this,n=this._id,i;return r>0&&(i=setTimeout(function(){s(new Error("timeout"))},r)),this._cbs[n]=s,this._n++,n;function s(){!t._cbs[n]||(delete t._cbs[n],t._n--,i&&clearTimeout(i),e.apply(t._ctx,arguments))}};ou.prototype.clear=function(){Object.keys(this._cbs).forEach(function(r){this._cbs[r](new Error("interrupted"))},this)};function io(r,e,t,n){this._clientSvc=r,this._serverSvc=e,this._hash=t,this._isRemote=!!n,this._readers=Wb(r,e)}io.prototype._decodeRequest=function(r){var e=new n0(r),t=Qi._read(e),n=i0._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=o0,!e.isValid())throw new Error(Yr("truncated %s request",n||"ping$"));return new tl(i,t,s)};io.prototype._decodeResponse=function(r,e,t){var n=new n0(r);or.copyOwnProperties(Qi._read(n),e.headers,!0);var i=zb._read(n),s=t.name;if(s){var o=this._readers[s+(i?"*":"!")];if(t=this._clientSvc.message(s),i?e.error=o._read(n):e.response=o._read(n),!n.isValid())throw new Error(Yr("truncated %s response",s))}else t=o0};function Lo(){Zi.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=or.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}rr.inherits(Lo,Zi.Transform);Lo.prototype._transform=function(r,e,t){r=J.Buffer.concat([this._buf,r]);for(var n;r.length>=4&&r.length>=(n=r.readInt32BE(0))+4;){if(n)this._bufs.push(r.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}r=r.slice(n+4)}this._buf=r,t()};Lo.prototype._flush=function(){if(this._buf.length||this._bufs.length){var r=this._bufs.slice();r.unshift(this._buf);var e=Hs("TRAILING_DATA");e.trailingData=J.Buffer.concat(r).toString(),this.emit("error",e)}};function au(){Zi.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}rr.inherits(au,Zi.Transform);au.prototype._transform=function(r,e,t){var n=r.payload,i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i],this.push(Vd(o.length)),this.push(o);this.push(Vd(0)),t()};function Ha(){Zi.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=or.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}rr.inherits(Ha,Zi.Transform);Ha.prototype._transform=function(r,e,t){for(r=J.Buffer.concat([this._buf,r]);;){if(this._id===void 0){if(r.length<8){this._buf=r,t();return}this._id=r.readInt32BE(0),this._frameCount=r.readInt32BE(4),r=r.slice(8)}for(var n;this._frameCount&&r.length>=4&&r.length>=(n=r.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(r.slice(4,n+4)),r=r.slice(n+4);if(this._frameCount){this._buf=r,t();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};Ha.prototype._flush=Lo.prototype._flush;function cu(){Zi.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}rr.inherits(cu,Zi.Transform);cu.prototype._transform=function(r,e,t){var n=r.payload,i=n.length,s;s=or.newBuffer(8),s.writeInt32BE(r.id,0),s.writeInt32BE(i,4),this.push(s);var o;for(o=0;o<i;o++)s=n[o],this.push(Vd(s.length)),this.push(s);t()};function Vd(r){var e=or.newBuffer(4);return e.writeInt32BE(r),e}function rl(r,e){var t=new n0(e),n=r._read(t);if(!t.isValid())throw new Error(Yr("truncated %s",r));return{head:n,tail:t.buf.slice(t.pos)}}function Zl(r,e){return r.equals(e)?r:r.createResolver(e)}function Wb(r,e){var t={};return r.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(Yr("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(Yr("inconsistent one-way message: %s",i));t[i+"?"]=Zl(s.requestType,n.requestType),t[i+"*"]=Zl(n.errorType,s.errorType),t[i+"!"]=Zl(n.responseType,s.responseType)}catch(o){throw Hs("INCOMPATIBLE_PROTOCOL",o)}}),t}function Gb(r,e,t,n){Object.keys(e).forEach(function(i){var s=e[i],o,a;n?(o=t,a=Xt.forProtocol(s)):(o=Xt.forProtocol(s),a=t),r[i]=new io(o,a,i,!0)})}function Vb(r,e){var t={};return Object.keys(r).forEach(function(n){var i=r[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;t[n]=s.protocol}}),t}function f0(r){return!!r&&Object.prototype.toString.call(r)==="[object Error]"}function G3(r,e){return r.on("error",function(t){e.emit("error",t,r)})}function rf(r,e){var t=new Error(r);return t.cause=e,t}function Hs(r,e){var t=rf(r.toLowerCase().replace(/_/g," "),e);return t.rpcCode=e&&e.rpcCode?e.rpcCode:r,t}function Jd(r,e,t){var n=[],i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.type.isValid(e[o.name],{errorHook:d});var a=n.map(function(h){return Yr("%s = %j but expected %s",h.path,h.value,h.type)}).join(", "),u=new Error(Yr("%s (%s)",r,a));return u.details=n,u;function d(h,m,v){var _=[],P,A,E;for(P=0,A=h.length;P<A;P++)E=h[P],isNaN(E)?_.push("."+E):_.push("["+E+"]");n.push({path:o.name+_.join(""),value:m,type:v})}}function Jb(r){return r?or.getHash(r).readInt16BE(0)<<32-s0:0}function Yb(r,e){return(r^e)>>32-s0===0}function Xb(r){return!!(r&&r.pipe)}function Zb(r,e){var t=r.message(e);if(!t)throw new Error(Yr("unknown message: %s",e));return t}function Qb(r){var e=[r.wreq,r.wres],t=[],n;i(0);function i(o){var a=!1;o<r.fns.length?r.fns[o].apply(r.ctx,e.concat(function(u,d){if(a){r.onError(rf("duplicate forward middleware call",u));return}if(a=!0,u||r.wres&&(r.wres.error!==void 0||r.wres.response!==void 0)){n=u,s();return}d&&t.push(d),i(++o)})):r.onTransition.apply(r.ctx,e.concat(function(u){if(a){r.onError(rf("duplicate handler call",u));return}a=!0,n=u,J.process.nextTick(s)}))}function s(){var o=t.pop();if(o){var a=!1;o.call(r.ctx,n,function(u){if(a){r.onError(rf("duplicate backward middleware call",u));return}n=u,a=!0,s()})}else r.onCompletion.call(r.ctx,n)}}var V3={Adapter:io,HANDSHAKE_REQUEST_TYPE:iu,HANDSHAKE_RESPONSE_TYPE:su,Message:Es,Registry:ou,Service:Xt,discoverProtocol:W3,streams:{FrameDecoder:Lo,FrameEncoder:au,NettyDecoder:Ha,NettyEncoder:cu}};function l0(){return new Error("unsupported in the browser")}function J3(){return function(r,e,t){t(l0())}}function Y3(){return function(){throw l0()}}var X3={createImportHook:J3,createSyncImportHook:Y3,existsSync:function(){return!1},readFileSync:function(){throw l0()}};function Ui(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function wg(r,e){for(var t="",n=0,i=-1,s=0,o,a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+r.slice(i+1,a):t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}function Z3(r,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+r+n:n}var va={resolve:function(){for(var e="",t=!1,n,i=arguments.length-1;i>=-1&&!t;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=J.process.cwd()),s=n),Ui(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=wg(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Ui(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=wg(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Ui(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Ui(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":va.normalize(e)},relative:function(e,t){if(Ui(e),Ui(t),e===t||(e=va.resolve(e),t=va.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var a=t.length,u=a-o,d=s<u?s:u,h=-1,m=0;m<=d;++m){if(m===d){if(u>d){if(t.charCodeAt(o+m)===47)return t.slice(o+m+1);if(m===0)return t.slice(o+m)}else s>d&&(e.charCodeAt(n+m)===47?h=m:m===0&&(h=0));break}var v=e.charCodeAt(n+m),_=t.charCodeAt(o+m);if(v!==_)break;v===47&&(h=m)}var P="";for(m=n+h+1;m<=i;++m)(m===i||e.charCodeAt(m)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+t.slice(o+h):(o+=h,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Ui(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!s){i=o;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ui(e);var n=0,i=-1,s=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,u=-1;for(o=e.length-1;o>=0;--o){var d=e.charCodeAt(o);if(d===47){if(!s){n=o+1;break}}else u===-1&&(s=!1,u=o+1),a>=0&&(d===t.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=u))}return n===i?i=u:i===-1&&(i=e.length),e.slice(n,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(n,i)}},extname:function(e){Ui(e);for(var t=-1,n=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),u===46?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Z3("/",e)},parse:function(e){Ui(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),i=n===47,s;i?(t.root="/",s=1):s=0;for(var o=-1,a=0,u=-1,d=!0,h=e.length-1,m=0;h>=s;--h){if(n=e.charCodeAt(h),n===47){if(!d){a=h+1;break}continue}u===-1&&(d=!1,u=h+1),n===46?o===-1?o=h:m!==1&&(m=1):o!==-1&&(m=-1)}return o===-1||u===-1||m===0||m===1&&o===u-1&&o===a+1?u!==-1&&(a===0&&i?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(a,u)):(a===0&&i?(t.name=e.slice(1,o),t.base=e.slice(1,u)):(t.name=e.slice(a,o),t.base=e.slice(a,u)),t.ext=e.slice(o,u)),a>0?t.dir=e.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};va.posix=va;var Q3=va,nf=X3,e1=za,Yd=Q3,eA=Ka,Pa=eA.format,tA={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function d0(r,e,t){!t&&typeof e=="function"&&(t=e,e=void 0),e=e||{},e.importHook||(e.importHook=nf.createImportHook());var n=[],i,s;e.importHook(r,"idl",function(u,d){if(u){t(u);return}if(d===void 0){t(null,{});return}try{var h=new Ir(d,e),m=h._readProtocol(d,e)}catch(v){v.path=r,t(v);return}i=m.protocol,s=m.imports,o()});function o(){var u=s.shift();if(!u)n.length&&(i.types=i.types?n.concat(i.types):n),t(null,i);else{var d=Yd.join(Yd.dirname(r),u.name);u.kind==="idl"?d0(d,e,a):e.importHook(d,u.kind,function(h,m){if(h){t(h);return}switch(u.kind){case"protocol":case"schema":if(m===void 0){a(null,{});return}try{var v=JSON.parse(m)}catch(P){P.path=d,t(P);return}var _=u.kind==="schema"?{types:[v]}:v;a(null,_);break;default:t(new Error(Pa("invalid import kind: %s",u.kind)))}})}}function a(u,d){if(u){t(u);return}(d.types||[]).forEach(function(h){if(h.namespace===void 0){var m=d.namespace;if(!m){var v=/^(.*)\.[^.]+$/.exec(d.protocol);v&&(m=v[1])}h.namespace=m||""}n.push(h)});try{Object.keys(d.messages||{}).forEach(function(h){if(i.messages||(i.messages={}),i.messages[h])throw new Error(Pa("duplicate message: %s",h));i.messages[h]=d.messages[h]})}catch(h){t(h);return}o()}}function rA(r){var e;if(typeof r=="string"&&~r.indexOf(Yd.sep)&&nf.existsSync(r)){var t=nf.readFileSync(r,{encoding:"utf8"});try{return JSON.parse(t)}catch{var n={importHook:nf.createSyncImportHook()};d0(r,n,function(s,o){e=s?t:o})}}else e=r;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return Ir.readProtocol(e)}catch{try{return Ir.readSchema(e)}catch{return e}}}}function Ir(r,e){e=e||{},this._tk=new so(r),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||tA}Ir.readProtocol=function(r,e){var t=new Ir(r,e),n=t._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};Ir.readSchema=function(r,e){var t=new Ir(r,e),n=t._readJavadoc(),i=t._readType(n===void 0?{}:{doc:n});return t._tk.next({id:"(eof)"}),i};Ir.prototype._readProtocol=function(){var r=this._tk,e=[],t=[],n={},i;this._readImports(e);var s={},o=this._readJavadoc();for(o!==void 0&&(s.doc=o),this._readAnnotations(s),r.next({val:"protocol"}),r.next({val:"{",silent:!0})||(s.protocol=r.next({id:"name"}).val,r.next({val:"{"}));!r.next({val:"}",silent:!0});)if(!this._readImports(e)){var a=this._readJavadoc(),u=this._readType(),d=this._readImports(e,!0),h=void 0;if(i=r.pos,!d&&(h=this._readMessage(u))){a!==void 0&&h.schema.doc===void 0&&(h.schema.doc=a);var m=!1;if((h.schema.response==="void"||h.schema.response.type==="void")&&(m=!this._ackVoidMessages&&!h.schema.errors,h.schema.response==="void"?h.schema.response="null":h.schema.response.type="null"),m&&(h.schema["one-way"]=!0),n[h.name])throw new Error(Pa("duplicate message: %s",h.name));n[h.name]=h.schema}else a&&(typeof u=="string"?u={doc:a,type:u}:u.doc===void 0&&(u.doc=a)),t.push(u),r.pos=i,r.next({val:";",silent:!0});a=void 0}return r.next({id:"(eof)"}),t.length&&(s.types=t),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};Ir.prototype._readAnnotations=function(r){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var t=[];!e.next({val:"(",silent:!0});)t.push(e.next().val);r[t.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};Ir.prototype._readMessage=function(r){var e=this._tk,t={request:[],response:r};this._readAnnotations(t);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do t.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":t.errors=[];do t.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":t["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:t}}};Ir.prototype._readJavadoc=function(){var r=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(r)return r.val};Ir.prototype._readField=function(){var r=this._tk,e=this._readJavadoc(),t={type:this._readType()};return e!==void 0&&t.doc===void 0&&(t.doc=e),this._readAnnotations(t),t.name=r.next({id:"name"}).val,r.next({val:"=",silent:!0})&&(t.default=r.next({id:"json"}).val),t};Ir.prototype._readType=function(r){switch(r=r||{},this._readAnnotations(r),r.type=this._tk.next({id:"name"}).val,r.type){case"record":case"error":return this._readRecord(r);case"fixed":return this._readFixed(r);case"enum":return this._readEnum(r);case"map":return this._readMap(r);case"array":return this._readArray(r);case"union":if(Object.keys(r).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[r.type];return e&&(delete r.type,e1.copyOwnProperties(e,r)),Object.keys(r).length>1?r:r.type}};Ir.prototype._readFixed=function(r){var e=this._tk;return e.next({val:"(",silent:!0})||(r.name=e.next({id:"name"}).val,e.next({val:"("})),r.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),r};Ir.prototype._readMap=function(r){var e=this._tk,t=this._implicitTags,n=e.next({val:"<",silent:t})===void 0;return r.values=this._readType(),e.next({val:">",silent:n}),r};Ir.prototype._readArray=function(r){var e=this._tk,t=this._implicitTags,n=e.next({val:"<",silent:t})===void 0;return r.items=this._readType(),e.next({val:">",silent:n}),r};Ir.prototype._readEnum=function(r){var e=this._tk;e.next({val:"{",silent:!0})||(r.name=e.next({id:"name"}).val,e.next({val:"{"})),r.symbols=[];do r.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return r};Ir.prototype._readUnion=function(){var r=this._tk,e=[];r.next({val:"{"});do e.push(this._readType());while(!r.next({val:"}",silent:!0})&&r.next({val:","}));return e};Ir.prototype._readRecord=function(r){var e=this._tk;for(e.next({val:"{",silent:!0})||(r.name=e.next({id:"name"}).val,e.next({val:"{"})),r.fields=[];!e.next({val:"}",silent:!0});)r.fields.push(this._readField()),e.next({val:";"});return r};Ir.prototype._readImports=function(r,e){for(var t=this._tk,n=0,i=t.pos;t.next({val:"import",silent:!0});){if(!n&&e&&t.next({val:"(",silent:!0})){t.pos=i;return}var s=t.next({id:"name"}).val,o=JSON.parse(t.next({id:"string"}).val);t.next({val:";"}),r.push({kind:s,name:o}),n++}return n};function so(r){this._str=r,this.pos=0}so.prototype.next=function(r){var e={pos:this.pos,id:void 0,val:void 0},t=this._skip(r&&r.emitJavadoc);if(t)e.id="javadoc",e.val=t;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(r&&r.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var o;if(r&&r.id&&r.id!==e.id?o=this.error(Pa("expected ID %s",r.id),e):r&&r.val&&r.val!==e.val&&(o=this.error(Pa("expected value %s",r.val),e)),o)if(r&&r.silent){this.pos=e.pos;return}else throw o;else return e};so.prototype.error=function(r,e){var t=typeof e!="number",n=t?e.pos:e,i=this._str,s=1,o=0,a;for(a=0;a<n;a++)i.charAt(a)===`
`&&(s++,o=a);var u=t?Pa("invalid token %j: %s",e,r):r,d=new Error(u);return d.token=t?e:void 0,d.lineNum=s,d.colNum=n-o,d};so.prototype._skip=function(r){for(var e=this._str,t=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(r);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(t=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,t&&r?nA(e.slice(n+3,this.pos-2)):this._skip(r);throw this.error("unterminated comment",n)}};so.prototype._endOf=function(r){for(var e=this.pos,t=this._str;r.test(t.charAt(e));)e++;return e};so.prototype._endOfString=function(){for(var r=this.pos+1,e=this._str,t;t=e.charAt(r);){if(t==='"')return r+1;t==="\\"?r+=2:r++}throw this.error("unterminated string",r-1)};so.prototype._endOfJson=function(){var r=e1.jsonEnd(this._str,this.pos);if(r<0)throw this.error("invalid JSON",r);return r};function nA(r){for(var e=r.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(t,n){return n?t.replace(/^\s*\*\s?/,""):t});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var iA={Tokenizer:so,assembleProtocol:d0,read:rA,readProtocol:Ir.readProtocol,readSchema:Ir.readSchema};(function(r){var e=H3,t=V3,n=iA,i=za;function s(o,a){var u=n.read(o);return u.protocol?t.Service.forProtocol(u,a):e.Type.forSchema(u,a)}r.exports={Service:t.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:t.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,r.exports)})(Nb);var es=t0,an=za,oo=$f,uu=Ka,t1=e_,nl={namespace:"org.apache.avro.file"},vg=es.Type.forSchema("long",nl),r1=es.Type.forSchema({type:"map",values:"bytes"},nl),h0=es.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:r1},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},nl),n1=es.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},nl),Sc=an.bufferFrom("Obj"),il=uu.format,Fc=an.Tap;function sl(r,e){e=e||{};var t=!!e.noDecode;oo.Duplex.call(this,{readableObjectMode:!t,allowHalfOpen:!1}),this._type=es.Type.forSchema(r),this._tap=new Fc(an.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=s1(t,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}uu.inherits(sl,oo.Duplex);sl.prototype._write=function(r,e,t){this._writeCb=t;var n=this._tap;n.buf=J.Buffer.concat([n.buf.slice(n.pos),r]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};sl.prototype._read=function(){this._needPush=!1;var r=this._tap,e=r.pos,t=this._readValue(r);r.isValid()?this.push(t):this._finished?this.push(null):(r.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function Ri(r){r=r||{};var e=!!r.noDecode;oo.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=r.readerSchema!==void 0?es.Type.forSchema(r.readerSchema):void 0,this._wType=null,this._codecs=r.codecs,this._codec=void 0,this._parseHook=r.parseHook,this._tap=new Fc(an.newBuffer(0)),this._blockTap=new Fc(an.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new an.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}uu.inherits(Ri,oo.Duplex);Ri.defaultCodecs=function(){return{null:function(r,e){e(null,r)},deflate:t1.inflateRaw}};Ri.getDefaultCodecs=Ri.defaultCodecs;Ri.prototype._decodeHeader=function(){var r=this._tap;if(r.buf.length<Sc.length)return!1;if(!Sc.equals(r.buf.slice(0,Sc.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=h0._read(r);if(!r.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var t=this._codecs||Ri.getDefaultCodecs();if(this._decompress=t[this._codec],!this._decompress){this.emit("error",new Error(il("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=es.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=s1(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};Ri.prototype._write=function(r,e,t){var n=this._tap;if(n.buf=J.Buffer.concat([n.buf,r]),n.pos=0,!this._decodeHeader()){J.process.nextTick(t);return}this._write=this._writeChunk,this._write(an.newBuffer(0),e,t)};Ri.prototype._writeChunk=function(r,e,t){var n=this._tap;n.buf=J.Buffer.concat([n.buf.slice(n.pos),r]),n.pos=0;for(var i=1,s;s=sA(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,o))}o();function o(){--i||t()}};Ri.prototype._createBlockCallback=function(r,e){var t=this,n=this._index++;return function(i,s){if(i){var o=new Error(il("%s codec decompression error",t._codec));o.cause=i,t.emit("error",o),e()}else t._queue.push(new i1(n,s,e,r)),t._needPush&&t._read()}};Ri.prototype._read=function(){this._needPush=!1;var r=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,r.buf=e.buf,r.pos=0}this._remaining--,this.push(this._readValue(r))};function ol(r,e){e=e||{},oo.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=es.Type.forSchema(r),this._writeValue=function(t,n){try{this._type._write(t,n)}catch(i){this.emit("error",i)}},this._tap=new Fc(an.newBuffer(e.batchSize||65536))}uu.inherits(ol,oo.Transform);ol.prototype._transform=function(r,e,t){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,r),!n.isValid()){s&&this.push(oA(n.buf,0,s));var o=n.pos-s;o>i.length&&(n.buf=an.newBuffer(2*o)),n.pos=0,this._writeValue(n,r)}t()};ol.prototype._flush=function(r){var e=this._tap,t=e.pos;t&&this.push(e.buf.slice(0,t)),r()};function Ci(r,e){e=e||{},oo.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var t;if(es.Type.isType(r)?(t=r,r=void 0):t=es.Type.forSchema(r),this._schema=r,this._type=t,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(o){this.emit("error",o)}},this._blockSize=e.blockSize||65536,this._tap=new Fc(an.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new an.Lcg().nextBuffer(16),this._queue=new an.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!r1.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||Ci.getDefaultCodecs())[n],!this._compress)throw new Error(il("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}uu.inherits(Ci,oo.Duplex);Ci.defaultCodecs=function(){return{null:function(r,e){e(null,r)},deflate:t1.deflateRaw}};Ci.getDefaultCodecs=Ci.defaultCodecs;Ci.prototype._writeHeader=function(){var r=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=an.copyOwnProperties(this._metadata,{"avro.schema":an.bufferFrom(r),"avro.codec":an.bufferFrom(this._codec)},!0),t=h0.getRecordConstructor(),n=new t(Sc,e,this._syncMarker);this.push(n.toBuffer())};Ci.prototype._write=function(r,e,t){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,r),!n.isValid()){i&&(this._flushChunk(i,t),s=!0);var o=n.pos-i;o>this._blockSize&&(this._blockSize=o*2),n.buf=an.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,r)}this._blockCount++,s||t()};Ci.prototype._flushChunk=function(r,e){var t=this._tap;r=r||t.pos,this._compress(t.buf.slice(0,r),this._createBlockCallback(e)),this._blockCount=0};Ci.prototype._read=function(){var r=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?J.process.nextTick(function(){r.push(null)}):this._needPush=!0;return}this.push(vg.toBuffer(e.count,!0)),this.push(vg.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};Ci.prototype._createBlockCallback=function(r){var e=this,t=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var o=new Error(il("%s codec compression error",e._codec));o.cause=i,e.emit("error",o);return}e._pending--,e._queue.push(new i1(t,s,r,n)),e._needPush&&(e._needPush=!1,e._read())}};function i1(r,e,t,n){this.index=r,this.buf=e,this.cb=t,this.count=n|0}function sA(r){var e=r.pos,t=n1._read(r);return r.isValid()?t:(r.pos=e,null)}function s1(r,e,t){if(r)return function(i){return function(s){var o=s.pos;return i(s),s.buf.slice(o,s.pos)}}(e._skip);if(t){var n=t.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function oA(r,e,t){var n=an.newBuffer(t);return r.copy(n,0,e,e+t),n}var aA={BLOCK_TYPE:n1,HEADER_TYPE:h0,MAGIC_BYTES:Sc,streams:{BlockDecoder:Ri,BlockEncoder:Ci,RawDecoder:sl,RawEncoder:ol}};(function(r){var e=Nb.exports,t=aA,n=za,i=$f,s=Ka;function o(h,m){i.Readable.call(this),m=m||{},this._batchSize=m.batchSize||65536,this._blob=h,this._pos=0}s.inherits(o,i.Readable),o.prototype._read=function(){var h=this._pos;if(h>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var m=this._blob.slice(h,this._pos,this._blob.type),v=new FileReader,_=this;v.addEventListener("loadend",function P(A){v.removeEventListener("loadend",P,!1),A.error?_.emit("error",A.error):_.push(n.bufferFrom(v.result))},!1),v.readAsArrayBuffer(m)};function a(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(a,i.Transform),a.prototype._transform=function(h,m,v){this._bufs.push(h),v()},a.prototype._flush=function(h){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),h()};function u(h,m){return new o(h).pipe(new t.streams.BlockDecoder(m))}function d(h,m){var v=new t.streams.BlockEncoder(h,m),_=new a;return v.pipe(_),new i.Duplex({objectMode:!0,read:function(){var P=_.read();P?E(P):_.once("readable",E);var A=this;function E(T){A.push(T||_.read()),A.push(null)}},write:function(P,A,E){return v.write(P,A,E)}}).on("finish",function(){v.end()})}r.exports={createBlobDecoder:u,createBlobEncoder:d,streams:t.streams},n.copyOwnProperties(e,r.exports)})(Bb);(function(r){var e=z&&z.__createBinding||(Object.create?function(o,a,u,d){d===void 0&&(d=u),Object.defineProperty(o,d,{enumerable:!0,get:function(){return a[u]}})}:function(o,a,u,d){d===void 0&&(d=u),o[d]=a[u]}),t=z&&z.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=z&&z.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&e(a,o,u);return t(a,o),a};Object.defineProperty(r,"__esModule",{value:!0}),r.serializeTags=r.tagsParser=r.tagParser=void 0;const i=n(Bb.exports);r.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),r.tagsParser=i.Type.forSchema({type:"array",items:r.tagParser});function s(o){if(o.length==0)return new Uint8Array(0);let a;try{a=r.tagsParser.toBuffer(o)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(a)}r.serializeTags=s})(Yh);var Wa={},al={};Object.defineProperty(al,"__esModule",{value:!0});al.Signer=void 0;class cA{static verify(e){throw new Error("You must implement verify method on child")}}al.Signer=cA;var cl={},fu={},o1=Kf(t_),Do={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SIG_CONFIG=r.SignatureConfig=void 0;var e;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA"})(e=r.SignatureConfig||(r.SignatureConfig={})),r.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(Do);var uA=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),fA=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),lA=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uA(e,r,t);return fA(e,r),e},dA=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fu,"__esModule",{value:!0});const hA=dA(Oi.exports),_g=lA(o1),Ag=Do;class pA{constructor(e,t){this._key=e,this.pk=t,this.ownerLength=Ag.SIG_CONFIG[2].pubLength,this.signatureLength=Ag.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return _g.sign(J.Buffer.from(e),J.Buffer.from(this.key))}static async verify(e,t,n){let i=e;return typeof e=="string"&&(i=hA.default.toBuffer(e)),_g.verify(J.Buffer.from(n),J.Buffer.from(t),J.Buffer.from(i))}}fu.default=pA;var Ga={},p0={};const Gt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function li(r,e){if(!r)throw new Error(e)}function jt(r,e,t){if(li(e instanceof Uint8Array,`Expected ${r} to be an Uint8Array`),t!==void 0)if(Array.isArray(t)){const n=t.join(", "),i=`Expected ${r} to be an Uint8Array with length [${n}]`;li(t.includes(e.length),i)}else{const n=`Expected ${r} to be an Uint8Array with length ${t}`;li(e.length===t,n)}}function ho(r){li(la(r)==="Boolean","Expected compressed to be a Boolean")}function vi(r=t=>new Uint8Array(t),e){return typeof r=="function"&&(r=r(e)),jt("output",r,e),r}function la(r){return Object.prototype.toString.call(r).slice(8,-1)}var gA=r=>({contextRandomize(e){switch(li(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&jt("seed",e,32),r.contextRandomize(e)){case 1:throw new Error(Gt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return jt("private key",e,32),r.privateKeyVerify(e)===0},privateKeyNegate(e){switch(jt("private key",e,32),r.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(Gt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,t){switch(jt("private key",e,32),jt("tweak",t,32),r.privateKeyTweakAdd(e,t)){case 0:return e;case 1:throw new Error(Gt.TWEAK_ADD)}},privateKeyTweakMul(e,t){switch(jt("private key",e,32),jt("tweak",t,32),r.privateKeyTweakMul(e,t)){case 0:return e;case 1:throw new Error(Gt.TWEAK_MUL)}},publicKeyVerify(e){return jt("public key",e,[33,65]),r.publicKeyVerify(e)===0},publicKeyCreate(e,t=!0,n){switch(jt("private key",e,32),ho(t),n=vi(n,t?33:65),r.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(Gt.SECKEY_INVALID);case 2:throw new Error(Gt.PUBKEY_SERIALIZE)}},publicKeyConvert(e,t=!0,n){switch(jt("public key",e,[33,65]),ho(t),n=vi(n,t?33:65),r.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.PUBKEY_SERIALIZE)}},publicKeyNegate(e,t=!0,n){switch(jt("public key",e,[33,65]),ho(t),n=vi(n,t?33:65),r.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.IMPOSSIBLE_CASE);case 3:throw new Error(Gt.PUBKEY_SERIALIZE)}},publicKeyCombine(e,t=!0,n){li(Array.isArray(e),"Expected public keys to be an Array"),li(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)jt("public key",i,[33,65]);switch(ho(t),n=vi(n,t?33:65),r.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.PUBKEY_COMBINE);case 3:throw new Error(Gt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,t,n=!0,i){switch(jt("public key",e,[33,65]),jt("tweak",t,32),ho(n),i=vi(i,n?33:65),r.publicKeyTweakAdd(i,e,t)){case 0:return i;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.TWEAK_ADD)}},publicKeyTweakMul(e,t,n=!0,i){switch(jt("public key",e,[33,65]),jt("tweak",t,32),ho(n),i=vi(i,n?33:65),r.publicKeyTweakMul(i,e,t)){case 0:return i;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.TWEAK_MUL)}},signatureNormalize(e){switch(jt("signature",e,64),r.signatureNormalize(e)){case 0:return e;case 1:throw new Error(Gt.SIG_PARSE)}},signatureExport(e,t){jt("signature",e,64),t=vi(t,72);const n={output:t,outputlen:72};switch(r.signatureExport(n,e)){case 0:return t.slice(0,n.outputlen);case 1:throw new Error(Gt.SIG_PARSE);case 2:throw new Error(Gt.IMPOSSIBLE_CASE)}},signatureImport(e,t){switch(jt("signature",e),t=vi(t,64),r.signatureImport(t,e)){case 0:return t;case 1:throw new Error(Gt.SIG_PARSE);case 2:throw new Error(Gt.IMPOSSIBLE_CASE)}},ecdsaSign(e,t,n={},i){jt("message",e,32),jt("private key",t,32),li(la(n)==="Object","Expected options to be an Object"),n.data!==void 0&&jt("options.data",n.data),n.noncefn!==void 0&&li(la(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=vi(i,64);const s={signature:i,recid:null};switch(r.ecdsaSign(s,e,t,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(Gt.SIGN);case 2:throw new Error(Gt.IMPOSSIBLE_CASE)}},ecdsaVerify(e,t,n){switch(jt("signature",e,64),jt("message",t,32),jt("public key",n,[33,65]),r.ecdsaVerify(e,t,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Gt.SIG_PARSE);case 2:throw new Error(Gt.PUBKEY_PARSE)}},ecdsaRecover(e,t,n,i=!0,s){switch(jt("signature",e,64),li(la(t)==="Number"&&t>=0&&t<=3,"Expected recovery id to be a Number within interval [0, 3]"),jt("message",n,32),ho(i),s=vi(s,i?33:65),r.ecdsaRecover(s,e,t,n)){case 0:return s;case 1:throw new Error(Gt.SIG_PARSE);case 2:throw new Error(Gt.RECOVER);case 3:throw new Error(Gt.IMPOSSIBLE_CASE)}},ecdh(e,t,n={},i){switch(jt("public key",e,[33,65]),jt("private key",t,32),li(la(n)==="Object","Expected options to be an Object"),n.data!==void 0&&jt("options.data",n.data),n.hashfn!==void 0?(li(la(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&jt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&jt("options.ybuf",n.ybuf,32),jt("output",i)):i=vi(i,32),r.ecdh(i,e,t,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Gt.PUBKEY_PARSE);case 2:throw new Error(Gt.ECDH)}}});const yA=r_.ec,$i=new yA("secp256k1"),Ut=$i.curve,ar=Ut.n.constructor;function mA(r,e){let t=new ar(e);if(t.cmp(Ut.p)>=0)return null;t=t.toRed(Ut.red);let n=t.redSqr().redIMul(t).redIAdd(Ut.b).redSqrt();return r===3!==n.isOdd()&&(n=n.redNeg()),$i.keyPair({pub:{x:t,y:n}})}function bA(r,e,t){let n=new ar(e),i=new ar(t);if(n.cmp(Ut.p)>=0||i.cmp(Ut.p)>=0||(n=n.toRed(Ut.red),i=i.toRed(Ut.red),(r===6||r===7)&&i.isOdd()!==(r===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(Ut.b)).isZero()?$i.keyPair({pub:{x:n,y:i}}):null}function Bs(r){const e=r[0];switch(e){case 2:case 3:return r.length!==33?null:mA(e,r.subarray(1,33));case 4:case 6:case 7:return r.length!==65?null:bA(e,r.subarray(1,33),r.subarray(33,65));default:return null}}function po(r,e){const t=e.encode(null,r.length===33);for(let n=0;n<r.length;++n)r[n]=t[n]}var xA={contextRandomize(){return 0},privateKeyVerify(r){const e=new ar(r);return e.cmp(Ut.n)<0&&!e.isZero()?0:1},privateKeyNegate(r){const e=new ar(r),t=Ut.n.sub(e).umod(Ut.n).toArrayLike(Uint8Array,"be",32);return r.set(t),0},privateKeyTweakAdd(r,e){const t=new ar(e);if(t.cmp(Ut.n)>=0||(t.iadd(new ar(r)),t.cmp(Ut.n)>=0&&t.isub(Ut.n),t.isZero()))return 1;const n=t.toArrayLike(Uint8Array,"be",32);return r.set(n),0},privateKeyTweakMul(r,e){let t=new ar(e);if(t.cmp(Ut.n)>=0||t.isZero())return 1;t.imul(new ar(r)),t.cmp(Ut.n)>=0&&(t=t.umod(Ut.n));const n=t.toArrayLike(Uint8Array,"be",32);return r.set(n),0},publicKeyVerify(r){return Bs(r)===null?1:0},publicKeyCreate(r,e){const t=new ar(e);if(t.cmp(Ut.n)>=0||t.isZero())return 1;const n=$i.keyFromPrivate(e).getPublic();return po(r,n),0},publicKeyConvert(r,e){const t=Bs(e);if(t===null)return 1;const n=t.getPublic();return po(r,n),0},publicKeyNegate(r,e){const t=Bs(e);if(t===null)return 1;const n=t.getPublic();return n.y=n.y.redNeg(),po(r,n),0},publicKeyCombine(r,e){const t=new Array(e.length);for(let i=0;i<e.length;++i)if(t[i]=Bs(e[i]),t[i]===null)return 1;let n=t[0].getPublic();for(let i=1;i<t.length;++i)n=n.add(t[i].pub);return n.isInfinity()?2:(po(r,n),0)},publicKeyTweakAdd(r,e,t){const n=Bs(e);if(n===null)return 1;if(t=new ar(t),t.cmp(Ut.n)>=0)return 2;const i=n.getPublic().add(Ut.g.mul(t));return i.isInfinity()?2:(po(r,i),0)},publicKeyTweakMul(r,e,t){const n=Bs(e);if(n===null)return 1;if(t=new ar(t),t.cmp(Ut.n)>=0||t.isZero())return 2;const i=n.getPublic().mul(t);return po(r,i),0},signatureNormalize(r){const e=new ar(r.subarray(0,32)),t=new ar(r.subarray(32,64));return e.cmp(Ut.n)>=0||t.cmp(Ut.n)>=0?1:(t.cmp($i.nh)===1&&r.set(Ut.n.sub(t).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(r,e){const t=e.subarray(0,32),n=e.subarray(32,64);if(new ar(t).cmp(Ut.n)>=0||new ar(n).cmp(Ut.n)>=0)return 1;const{output:i}=r;let s=i.subarray(4,4+33);s[0]=0,s.set(t,1);let o=33,a=0;for(;o>1&&s[a]===0&&!(s[a+1]&128);--o,++a);if(s=s.subarray(a),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let u=i.subarray(6+33,6+33+33);u[0]=0,u.set(n,1);let d=33,h=0;for(;d>1&&u[h]===0&&!(u[h+1]&128);--d,++h);return u=u.subarray(h),u[0]&128||d>1&&u[0]===0&&!(u[1]&128)?1:(r.outputlen=6+o+d,i[0]=48,i[1]=r.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+o]=2,i[5+o]=u.length,i.set(u,6+o),0)},signatureImport(r,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return 1;const n=e[5+t];if(n===0||6+t+n!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||n>1&&e[t+6]===0&&!(e[t+7]&128))return 1;let i=e.subarray(4,4+t);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+t);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new ar(i);o.cmp(Ut.n)>=0&&(o=new ar(0));let a=new ar(e.subarray(6+t));return a.cmp(Ut.n)>=0&&(a=new ar(0)),r.set(o.toArrayLike(Uint8Array,"be",32),0),r.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(r,e,t,n,i){if(i){const a=i;i=u=>{const d=a(e,t,null,n,u);if(!(d instanceof Uint8Array&&d.length===32))throw new Error("This is the way");return new ar(d)}}const s=new ar(t);if(s.cmp(Ut.n)>=0||s.isZero())return 1;let o;try{o=$i.sign(e,t,{canonical:!0,k:i,pers:n})}catch{return 1}return r.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),r.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),r.recid=o.recoveryParam,0},ecdsaVerify(r,e,t){const n={r:r.subarray(0,32),s:r.subarray(32,64)},i=new ar(n.r),s=new ar(n.s);if(i.cmp(Ut.n)>=0||s.cmp(Ut.n)>=0)return 1;if(s.cmp($i.nh)===1||i.isZero()||s.isZero())return 3;const o=Bs(t);if(o===null)return 2;const a=o.getPublic();return $i.verify(e,n,a)?0:3},ecdsaRecover(r,e,t,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new ar(i.r),o=new ar(i.s);if(s.cmp(Ut.n)>=0||o.cmp(Ut.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let a;try{a=$i.recoverPubKey(n,i,t)}catch{return 2}return po(r,a),0},ecdh(r,e,t,n,i,s,o){const a=Bs(e);if(a===null)return 1;const u=new ar(t);if(u.cmp(Ut.n)>=0||u.isZero())return 2;const d=a.getPublic().mul(u);if(i===void 0){const h=d.encode(null,!0),m=$i.hash().update(h).digest();for(let v=0;v<32;++v)r[v]=m[v]}else{s||(s=new Uint8Array(32));const h=d.getX().toArray("be",32);for(let P=0;P<32;++P)s[P]=h[P];o||(o=new Uint8Array(32));const m=d.getY().toArray("be",32);for(let P=0;P<32;++P)o[P]=m[P];const v=i(s,o,n);if(!(v instanceof Uint8Array&&v.length===r.length))return 2;r.set(v)}return 0}},a1=gA(xA);const{Transform:wA}=Ym.exports;var vA=r=>class c1 extends wA{constructor(t,n,i,s,o){super(o),this._rate=t,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new r,this._state.initialize(t,n),this._finalized=!1}_transform(t,n,i){let s=null;try{this.update(t,n)}catch(o){s=o}i(s)}_flush(t){let n=null;try{this.push(this.digest())}catch(i){n=i}t(n)}update(t,n){if(!J.Buffer.isBuffer(t)&&typeof t!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return J.Buffer.isBuffer(t)||(t=J.Buffer.from(t,n)),this._state.absorb(t),this}digest(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return t!==void 0&&(n=n.toString(t)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const t=new c1(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(t._state),t._finalized=this._finalized,t}};const{Transform:_A}=Ym.exports;var AA=r=>class u1 extends _A{constructor(t,n,i,s){super(s),this._rate=t,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new r,this._state.initialize(t,n),this._finalized=!1}_transform(t,n,i){let s=null;try{this.update(t,n)}catch(o){s=o}i(s)}_flush(){}_read(t){this.push(this.squeeze(t))}update(t,n){if(!J.Buffer.isBuffer(t)&&typeof t!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return J.Buffer.isBuffer(t)||(t=J.Buffer.from(t,n)),this._state.absorb(t),this}squeeze(t,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(t);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const t=new u1(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(t._state),t._finalized=this._finalized,t}};const EA=vA,SA=AA;var kA=function(r){const e=EA(r),t=SA(r);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new t(1344,256,31,i);case"shake256":return new t(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},f1={};const Eg=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];f1.p1600=function(r){for(let e=0;e<24;++e){const t=r[0]^r[10]^r[20]^r[30]^r[40],n=r[1]^r[11]^r[21]^r[31]^r[41],i=r[2]^r[12]^r[22]^r[32]^r[42],s=r[3]^r[13]^r[23]^r[33]^r[43],o=r[4]^r[14]^r[24]^r[34]^r[44],a=r[5]^r[15]^r[25]^r[35]^r[45],u=r[6]^r[16]^r[26]^r[36]^r[46],d=r[7]^r[17]^r[27]^r[37]^r[47],h=r[8]^r[18]^r[28]^r[38]^r[48],m=r[9]^r[19]^r[29]^r[39]^r[49];let v=h^(i<<1|s>>>31),_=m^(s<<1|i>>>31);const P=r[0]^v,A=r[1]^_,E=r[10]^v,T=r[11]^_,C=r[20]^v,L=r[21]^_,K=r[30]^v,O=r[31]^_,F=r[40]^v,H=r[41]^_;v=t^(o<<1|a>>>31),_=n^(a<<1|o>>>31);const V=r[2]^v,ie=r[3]^_,xe=r[12]^v,ae=r[13]^_,te=r[22]^v,x=r[23]^_,c=r[32]^v,l=r[33]^_,y=r[42]^v,w=r[43]^_;v=i^(u<<1|d>>>31),_=s^(d<<1|u>>>31);const S=r[4]^v,I=r[5]^_,M=r[14]^v,p=r[15]^_,f=r[24]^v,b=r[25]^_,U=r[34]^v,D=r[35]^_,G=r[44]^v,be=r[45]^_;v=o^(h<<1|m>>>31),_=a^(m<<1|h>>>31);const le=r[6]^v,ue=r[7]^_,At=r[16]^v,Me=r[17]^_,De=r[26]^v,jr=r[27]^_,et=r[36]^v,ut=r[37]^_,Ur=r[46]^v,pt=r[47]^_;v=u^(t<<1|n>>>31),_=d^(n<<1|t>>>31);const gt=r[8]^v,fn=r[9]^_,rt=r[18]^v,yt=r[19]^_,ii=r[28]^v,ft=r[29]^_,nt=r[38]^v,si=r[39]^_,it=r[48]^v,lt=r[49]^_,jn=P,dt=A,mt=T<<4|E>>>28,zn=E<<4|T>>>28,st=C<<3|L>>>29,tt=L<<3|C>>>29,An=O<<9|K>>>23,Je=K<<9|O>>>23,Xe=F<<18|H>>>14,Rn=H<<18|F>>>14,Ze=V<<1|ie>>>31,Qe=ie<<1|V>>>31,qn=ae<<12|xe>>>20,ht=xe<<12|ae>>>20,bt=te<<10|x>>>22,wi=x<<10|te>>>22,qe=l<<13|c>>>19,Ge=c<<13|l>>>19,ln=y<<2|w>>>30,ot=w<<2|y>>>30,at=I<<30|S>>>2,oi=S<<30|I>>>2,xt=M<<6|p>>>26,Ue=p<<6|M>>>26,ai=b<<11|f>>>21,k=f<<11|b>>>21,R=U<<15|D>>>17,B=D<<15|U>>>17,g=be<<29|G>>>3,N=G<<29|be>>>3,W=le<<28|ue>>>4,q=ue<<28|le>>>4,X=Me<<23|At>>>9,de=At<<23|Me>>>9,fe=De<<25|jr>>>7,ne=jr<<25|De>>>7,wt=et<<21|ut>>>11,Se=ut<<21|et>>>11,Fe=pt<<24|Ur>>>8,Ke=Ur<<24|pt>>>8,We=gt<<27|fn>>>5,He=fn<<27|gt>>>5,$e=rt<<20|yt>>>12,ze=yt<<20|rt>>>12,je=ft<<7|ii>>>25,ke=ii<<7|ft>>>25,Ce=nt<<8|si>>>24,we=si<<8|nt>>>24,Te=it<<14|lt>>>18,Ie=lt<<14|it>>>18;r[0]=jn^~qn&ai,r[1]=dt^~ht&k,r[10]=W^~$e&st,r[11]=q^~ze&tt,r[20]=Ze^~xt&fe,r[21]=Qe^~Ue&ne,r[30]=We^~mt&bt,r[31]=He^~zn&wi,r[40]=at^~X&je,r[41]=oi^~de&ke,r[2]=qn^~ai&wt,r[3]=ht^~k&Se,r[12]=$e^~st&qe,r[13]=ze^~tt&Ge,r[22]=xt^~fe&Ce,r[23]=Ue^~ne&we,r[32]=mt^~bt&R,r[33]=zn^~wi&B,r[42]=X^~je&An,r[43]=de^~ke&Je,r[4]=ai^~wt&Te,r[5]=k^~Se&Ie,r[14]=st^~qe&g,r[15]=tt^~Ge&N,r[24]=fe^~Ce&Xe,r[25]=ne^~we&Rn,r[34]=bt^~R&Fe,r[35]=wi^~B&Ke,r[44]=je^~An&ln,r[45]=ke^~Je&ot,r[6]=wt^~Te&jn,r[7]=Se^~Ie&dt,r[16]=qe^~g&W,r[17]=Ge^~N&q,r[26]=Ce^~Xe&Ze,r[27]=we^~Rn&Qe,r[36]=R^~Fe&We,r[37]=B^~Ke&He,r[46]=An^~ln&at,r[47]=Je^~ot&oi,r[8]=Te^~jn&qn,r[9]=Ie^~dt&ht,r[18]=g^~W&$e,r[19]=N^~q&ze,r[28]=Xe^~Ze&xt,r[29]=Rn^~Qe&Ue,r[38]=Fe^~We&mt,r[39]=Ke^~He&zn,r[48]=ln^~at&X,r[49]=ot^~oi&de,r[0]^=Eg[e*2],r[1]^=Eg[e*2+1]}};const Af=f1;function Va(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Va.prototype.initialize=function(r,e){for(let t=0;t<50;++t)this.state[t]=0;this.blockSize=r/8,this.count=0,this.squeezing=!1};Va.prototype.absorb=function(r){for(let e=0;e<r.length;++e)this.state[~~(this.count/4)]^=r[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Af.p1600(this.state),this.count=0)};Va.prototype.absorbLastFewBits=function(r){this.state[~~(this.count/4)]^=r<<8*(this.count%4),(r&128)!==0&&this.count===this.blockSize-1&&Af.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Af.p1600(this.state),this.count=0,this.squeezing=!0};Va.prototype.squeeze=function(r){this.squeezing||this.absorbLastFewBits(1);const e=J.Buffer.alloc(r);for(let t=0;t<r;++t)e[t]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Af.p1600(this.state),this.count=0);return e};Va.prototype.copy=function(r){for(let e=0;e<50;++e)r.state[e]=this.state[e];r.blockSize=this.blockSize,r.count=this.count,r.squeezing=this.squeezing};var TA=Va,IA=kA(TA),l1=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};const PA=l1(Fm.exports),Ds=Ve,RA=l1(IA);function d1(r){return r=CA(r),RA.default("keccak256").update(r).digest()}function CA(r){if(!Ds.Buffer.isBuffer(r))if(Array.isArray(r))r=Ds.Buffer.from(r);else if(typeof r=="string")MA(r)?r=Ds.Buffer.from(h1(BA(r)),"hex"):r=Ds.Buffer.from(r);else if(typeof r=="number")r=OA(r);else if(r==null)r=Ds.Buffer.allocUnsafe(0);else if(PA.default.isBN(r))r=r.toArrayLike(Ds.Buffer);else if(r.toArray)r=Ds.Buffer.from(r.toArray());else throw new Error("invalid type");return r}function MA(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}function h1(r){if(typeof r!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof r}, while padToEven.`);return r.length%2&&(r=`0${r}`),r}function BA(r){return typeof r!="string"?r:NA(r)?r.slice(2):r}function NA(r){if(typeof r!="string")throw new Error("value must be type 'string', is currently type "+typeof r+", while checking isHexPrefixed.");return r.slice(0,2)==="0x"}function OA(r){const e=LA(r);return Ds.Buffer.from(h1(e.slice(2)),"hex")}function LA(r){return`0x${r.toString(16)}`}typeof window<"u"&&(window.keccak256=d1);var p1=d1,g0=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(p0,"__esModule",{value:!0});const DA=g0(Oi.exports),Sg=g0(a1),oc=Do,kg=g0(p1);class UA{constructor(e,t){this._key=e,this.ownerLength=oc.SIG_CONFIG[oc.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=oc.SIG_CONFIG[oc.SignatureConfig.ETHEREUM].sigLength,this.signatureType=oc.SignatureConfig.ETHEREUM,this.pk=t.toString("hex")}get publicKey(){return J.Buffer.alloc(0)}get key(){return J.Buffer.from(this._key,"hex")}static async verify(e,t,n){let i=e;typeof e=="string"&&(i=DA.default.toBuffer(e));let s=!1;try{s=Sg.default.ecdsaVerify(n,kg.default(J.Buffer.from(t)),i)}catch{}return s}sign(e){return Sg.default.ecdsaSign(kg.default(J.Buffer.from(e)),J.Buffer.from(this.key)).signature}}p0.default=UA;const FA="logger/5.7.0";let Tg=!1,Ig=!1;const sf={debug:1,default:2,info:2,warning:3,error:4,off:5};let Pg=sf.default,Ql=null;function KA(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(r){return r.message}return null}const Rg=KA();var Xd;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Xd||(Xd={}));var Gn;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(Gn||(Gn={}));const Cg="0123456789abcdef";class j{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();sf[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Pg>sf[n])&&console.log.apply(console,t)}debug(...e){this._log(j.levels.DEBUG,e)}info(...e){this._log(j.levels.INFO,e)}warn(...e){this._log(j.levels.WARNING,e)}makeError(e,t,n){if(Ig)return this.makeError("censored error",t,{});t||(t=j.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(u=>{const d=n[u];try{if(d instanceof Uint8Array){let h="";for(let m=0;m<d.length;m++)h+=Cg[d[m]>>4],h+=Cg[d[m]&15];i.push(u+"=Uint8Array(0x"+h+")")}else i.push(u+"="+JSON.stringify(d))}catch{i.push(u+"="+JSON.stringify(n[u].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Gn.NUMERIC_FAULT:{o="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":o+="-"+u;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Gn.CALL_EXCEPTION:case Gn.INSUFFICIENT_FUNDS:case Gn.MISSING_NEW:case Gn.NONCE_EXPIRED:case Gn.REPLACEMENT_UNDERPRICED:case Gn.TRANSACTION_REPLACED:case Gn.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(n).forEach(function(u){a[u]=n[u]}),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,j.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){Rg&&this.throwError("platform missing String.prototype.normalize",j.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Rg})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,j.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,j.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",j.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Ql||(Ql=new j(FA)),Ql}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Tg){if(!e)return;this.globalLogger().throwError("error censorship permanent",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ig=!!e,Tg=!!t}static setLogLevel(e){const t=sf[e.toLowerCase()];if(t==null){j.globalLogger().warn("invalid log level - "+e);return}Pg=t}static from(e){return new j(e)}}j.errors=Gn;j.levels=Xd;const $A="bytes/5.7.0",Er=new j($A);function g1(r){return!!r.toHexString}function _a(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return _a(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function lu(r){return kt(r)&&!(r.length%2)||ao(r)}function Mg(r){return typeof r=="number"&&r==r&&r%1===0}function ao(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!Mg(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!Mg(t)||t<0||t>=256)return!1}return!0}function ge(r,e){if(e||(e={}),typeof r=="number"){Er.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),_a(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),g1(r)&&(r=r.toHexString()),kt(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Er.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return _a(new Uint8Array(n))}return ao(r)?_a(new Uint8Array(r)):Er.throwArgumentError("invalid arrayify value","value",r)}function ur(r){const e=r.map(i=>ge(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),_a(n)}function Yi(r){let e=ge(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function kc(r,e){r=ge(r),r.length>e&&Er.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),_a(t)}function kt(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const ed="0123456789abcdef";function me(r,e){if(e||(e={}),typeof r=="number"){Er.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=ed[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),g1(r))return r.toHexString();if(kt(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Er.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(ao(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=ed[(i&240)>>4]+ed[i&15]}return t}return Er.throwArgumentError("invalid hexlify value","value",r)}function ts(r){if(typeof r!="string")r=me(r);else if(!kt(r)||r.length%2)return null;return(r.length-2)/2}function Br(r,e,t){return typeof r!="string"?r=me(r):(!kt(r)||r.length%2)&&Er.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function En(r){let e="0x";return r.forEach(t=>{e+=me(t).substring(2)}),e}function du(r){const e=y1(me(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function y1(r){typeof r!="string"&&(r=me(r)),kt(r)||Er.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function fr(r,e){for(typeof r!="string"?r=me(r):kt(r)||Er.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&Er.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function Uo(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(lu(r)){let t=ge(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=me(t.slice(0,32)),e.s=me(t.slice(32,64))):t.length===65?(e.r=me(t.slice(0,32)),e.s=me(t.slice(32,64)),e.v=t[64]):Er.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:Er.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=me(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=kc(ge(e._vs),32);e._vs=me(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Er.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const o=me(i);e.s==null?e.s=o:e.s!==o&&Er.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?Er.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Er.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!kt(e.r)?Er.throwArgumentError("signature missing or invalid r","signature",r):e.r=fr(e.r,32),e.s==null||!kt(e.s)?Er.throwArgumentError("signature missing or invalid s","signature",r):e.s=fr(e.s,32);const t=ge(e.s);t[0]>=128&&Er.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=me(t);e._vs&&(kt(e._vs)||Er.throwArgumentError("signature invalid _vs","signature",r),e._vs=fr(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Er.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Zd(r){return r=Uo(r),me(ur([r.r,r.s,r.recoveryParam?"0x1c":"0x1b"]))}const m1="bignumber/5.7.0";var Kc=vt.BN;const gs=new j(m1),td={},Bg=9007199254740991;function jA(r){return r!=null&&(pe.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||kt(r)||typeof r=="bigint"||ao(r))}let Ng=!1;class pe{constructor(e,t){e!==td&&gs.throwError("cannot call constructor directly; use BigNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Cn(Dt(this).fromTwos(e))}toTwos(e){return Cn(Dt(this).toTwos(e))}abs(){return this._hex[0]==="-"?pe.from(this._hex.substring(1)):this}add(e){return Cn(Dt(this).add(Dt(e)))}sub(e){return Cn(Dt(this).sub(Dt(e)))}div(e){return pe.from(e).isZero()&&ci("division-by-zero","div"),Cn(Dt(this).div(Dt(e)))}mul(e){return Cn(Dt(this).mul(Dt(e)))}mod(e){const t=Dt(e);return t.isNeg()&&ci("division-by-zero","mod"),Cn(Dt(this).umod(t))}pow(e){const t=Dt(e);return t.isNeg()&&ci("negative-power","pow"),Cn(Dt(this).pow(t))}and(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&ci("unbound-bitwise-result","and"),Cn(Dt(this).and(t))}or(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&ci("unbound-bitwise-result","or"),Cn(Dt(this).or(t))}xor(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&ci("unbound-bitwise-result","xor"),Cn(Dt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&ci("negative-width","mask"),Cn(Dt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ci("negative-width","shl"),Cn(Dt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ci("negative-width","shr"),Cn(Dt(this).shrn(e))}eq(e){return Dt(this).eq(Dt(e))}lt(e){return Dt(this).lt(Dt(e))}lte(e){return Dt(this).lte(Dt(e))}gt(e){return Dt(this).gt(Dt(e))}gte(e){return Dt(this).gte(Dt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Dt(this).isZero()}toNumber(){try{return Dt(this).toNumber()}catch{ci("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return gs.throwError("this platform does not support BigInt",j.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Ng||(Ng=!0,gs.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?gs.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",j.errors.UNEXPECTED_ARGUMENT,{}):gs.throwError("BigNumber.toString does not accept parameters",j.errors.UNEXPECTED_ARGUMENT,{})),Dt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof pe)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new pe(td,$c(e)):e.match(/^-?[0-9]+$/)?new pe(td,$c(new Kc(e))):gs.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&ci("underflow","BigNumber.from",e),(e>=Bg||e<=-Bg)&&ci("overflow","BigNumber.from",e),pe.from(String(e));const t=e;if(typeof t=="bigint")return pe.from(t.toString());if(ao(t))return pe.from(me(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return pe.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&(kt(n)||n[0]==="-"&&kt(n.substring(1))))return pe.from(n)}return gs.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function $c(r){if(typeof r!="string")return $c(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&gs.throwArgumentError("invalid hex","value",r),r=$c(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Cn(r){return pe.from($c(r))}function Dt(r){const e=pe.from(r).toHexString();return e[0]==="-"?new Kc("-"+e.substring(3),16):new Kc(e.substring(2),16)}function ci(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),gs.throwError(r,j.errors.NUMERIC_FAULT,n)}function zA(r){return new Kc(r,36).toString(16)}function qA(r){return new Kc(r,16).toString(36)}const Sn=new j(m1),Tc={},b1=pe.from(0),x1=pe.from(-1);function w1(r,e,t,n){const i={fault:e,operation:t};return n!==void 0&&(i.value=n),Sn.throwError(r,j.errors.NUMERIC_FAULT,i)}let Ic="0";for(;Ic.length<256;)Ic+=Ic;function y0(r){if(typeof r!="number")try{r=pe.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+Ic.substring(0,r):Sn.throwArgumentError("invalid decimal size","decimals",r)}function of(r,e){e==null&&(e=0);const t=y0(e);r=pe.from(r);const n=r.lt(b1);n&&(r=r.mul(x1));let i=r.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=r.div(t).toString();return t.length===1?r=s:r=s+"."+i,n&&(r="-"+r),r}function Ki(r,e){e==null&&(e=0);const t=y0(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Sn.throwArgumentError("invalid decimal value","value",r);const n=r.substring(0,1)==="-";n&&(r=r.substring(1)),r==="."&&Sn.throwArgumentError("missing value","value",r);const i=r.split(".");i.length>2&&Sn.throwArgumentError("too many decimal points","value",r);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&w1("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=pe.from(s),u=pe.from(o);let d=a.mul(t).add(u);return n&&(d=d.mul(x1)),d}class Aa{constructor(e,t,n,i){e!==Tc&&Sn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=y0(i),Object.freeze(this)}static from(e){if(e instanceof Aa)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Sn.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,u)=>e[o]==null?u:(typeof e[o]!==a&&Sn.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Sn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Sn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Aa(Tc,t,n,i)}}class Wr{constructor(e,t,n,i){e!==Tc&&Sn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Sn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Ki(this._value,this.format.decimals),n=Ki(e._value,e.format.decimals);return Wr.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Ki(this._value,this.format.decimals),n=Ki(e._value,e.format.decimals);return Wr.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Ki(this._value,this.format.decimals),n=Ki(e._value,e.format.decimals);return Wr.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Ki(this._value,this.format.decimals),n=Ki(e._value,e.format.decimals);return Wr.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Wr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(Og.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Wr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(Og.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Sn.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=Wr.from("1"+Ic.substring(0,e),this.format),i=HA.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Sn.throwArgumentError("invalid byte width","width",e);const t=pe.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return fr(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Wr.fromString(this._value,e)}static fromValue(e,t,n){return n==null&&t!=null&&!jA(t)&&(n=t,t=null),t==null&&(t=0),n==null&&(n="fixed"),Wr.fromString(of(e,t),Aa.from(n))}static fromString(e,t){t==null&&(t="fixed");const n=Aa.from(t),i=Ki(e,n.decimals);!n.signed&&i.lt(b1)&&w1("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=fr(s,n.width/8));const o=of(i,n.decimals);return new Wr(Tc,s,o,n)}static fromBytes(e,t){t==null&&(t="fixed");const n=Aa.from(t);if(ge(e).length>n.width/8)throw new Error("overflow");let i=pe.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=of(i,n.decimals);return new Wr(Tc,s,o,n)}static from(e,t){if(typeof e=="string")return Wr.fromString(e,t);if(ao(e))return Wr.fromBytes(e,t);try{return Wr.fromValue(e,0,t)}catch(n){if(n.code!==j.errors.INVALID_ARGUMENT)throw n}return Sn.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const Og=Wr.from(1),HA=Wr.from("0.5"),WA="properties/5.7.0";var GA=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const Ef=new j(WA);function ee(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function nn(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function Sr(r){return GA(this,void 0,void 0,function*(){const e=Object.keys(r).map(n=>{const i=r[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function m0(r,e){(!r||typeof r!="object")&&Ef.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||Ef.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function dr(r){const e={};for(const t in r)e[t]=r[t];return e}const VA={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function v1(r){if(r==null||VA[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;const e=Object.keys(r);for(let t=0;t<e.length;t++){let n=null;try{n=r[e[t]]}catch{continue}if(!v1(n))return!1}return!0}return Ef.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function JA(r){if(v1(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>Tn(e)));if(typeof r=="object"){const e={};for(const t in r){const n=r[t];n!==void 0&&ee(e,t,Tn(n))}return e}return Ef.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function Tn(r){return JA(r)}class Fo{constructor(e){for(const t in e)this[t]=Tn(e[t])}}const hu="abi/5.7.0",Ft=new j(hu),To={};let Lg={calldata:!0,memory:!0,storage:!0},YA={calldata:!0,memory:!0};function Lu(r,e){if(r==="bytes"||r==="string"){if(Lg[e])return!0}else if(r==="address"){if(e==="payable")return!0}else if((r.indexOf("[")>=0||r==="tuple")&&YA[e])return!0;return(Lg[e]||e==="payable")&&Ft.throwArgumentError("invalid modifier","name",e),!1}function XA(r,e){let t=r;function n(a){Ft.throwArgumentError(`unexpected character at position ${a}`,"param",r)}r=r.replace(/\s/g," ");function i(a){let u={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(u.indexed=!1),u}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<r.length;a++){let u=r[a];switch(u){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=da(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Lu(o.type,o.name)&&(o.name=""),o.type=da(o.type);let d=o;o=o.parent,o||n(a),delete d.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Lu(o.type,o.name)&&(o.name=""),o.type=da(o.type);let h=i(o.parent);o.parent.components.push(h),delete o.parent,o=h;break;case" ":o.state.allowType&&o.type!==""&&(o.type=da(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):Lu(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=u,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=u,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=u,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=u,delete o.state.allowArray):o.state.readArray?o.type+=u:n(a)}}return o.parent&&Ft.throwArgumentError("unexpected eof","param",r),delete s.state,o.name==="indexed"?(e||n(t.length-7),o.indexed&&n(t.length-7),o.indexed=!0,o.name=""):Lu(o.type,o.name)&&(o.name=""),s.type=da(s.type),s}function af(r,e){for(let t in e)ee(r,t,e[t])}const Wt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),ZA=new RegExp(/^(.*)\[([0-9]*)\]$/);class Gr{constructor(e,t){e!==To&&Ft.throwError("use fromString",j.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),af(this,t);let n=this.type.match(ZA);n?af(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Gr.fromObject({type:n[1],components:this.components}),baseType:"array"}):af(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Wt.sighash),Wt[e]||Ft.throwArgumentError("invalid format type","format",e),e===Wt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Wt.sighash&&(t+=this.type),t+="("+this.components.map(n=>n.format(e)).join(e===Wt.full?", ":",")+")"):t+=this.type,e!==Wt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Wt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?Gr.fromString(e,t):Gr.fromObject(e)}static fromObject(e){return Gr.isParamType(e)?e:new Gr(To,{name:e.name||null,type:da(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Gr.fromObject):null})}static fromString(e,t){function n(i){return Gr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(XA(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function jc(r,e){return e6(r).map(t=>Gr.fromString(t,e))}class Gi{constructor(e,t){e!==To&&Ft.throwError("use a static from method",j.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),af(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Gi.isFragment(e)?e:typeof e=="string"?Gi.fromString(e):Gi.fromObject(e)}static fromObject(e){if(Gi.isFragment(e))return e;switch(e.type){case"function":return Ti.fromObject(e);case"event":return Hi.fromObject(e);case"constructor":return ki.fromObject(e);case"error":return bs.fromObject(e);case"fallback":case"receive":return null}return Ft.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Hi.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Ti.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ki.fromString(e.trim()):e.split(" ")[0]==="error"?bs.fromString(e.substring(5).trim()):Ft.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Hi extends Gi{format(e){if(e||(e=Wt.sighash),Wt[e]||Ft.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Wt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Wt.full?", ":",")+") ",e!==Wt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?Hi.fromString(e):Hi.fromObject(e)}static fromObject(e){if(Hi.isEventFragment(e))return e;e.type!=="event"&&Ft.throwArgumentError("invalid event object","value",e);const t={name:zc(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Gr.fromObject):[],type:"event"};return new Hi(To,t)}static fromString(e){let t=e.match(qc);t||Ft.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:Ft.warn("unknown modifier: "+i)}}),Hi.fromObject({name:t[1].trim(),anonymous:n,inputs:jc(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function _1(r,e){e.gas=null;let t=r.split("@");return t.length!==1?(t.length>2&&Ft.throwArgumentError("invalid human-readable ABI signature","value",r),t[1].match(/^[0-9]+$/)||Ft.throwArgumentError("invalid human-readable ABI signature gas","value",r),e.gas=pe.from(t[1]),t[0]):r}function A1(r,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",r.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function E1(r){let e={constant:!1,payable:!0,stateMutability:"payable"};return r.stateMutability!=null?(e.stateMutability=r.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",r.constant!=null&&!!r.constant!==e.constant&&Ft.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",r),e.payable=e.stateMutability==="payable",r.payable!=null&&!!r.payable!==e.payable&&Ft.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",r)):r.payable!=null?(e.payable=!!r.payable,r.constant==null&&!e.payable&&r.type!=="constructor"&&Ft.throwArgumentError("unable to determine stateMutability","value",r),e.constant=!!r.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ft.throwArgumentError("cannot have constant payable function","value",r)):r.constant!=null?(e.constant=!!r.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):r.type!=="constructor"&&Ft.throwArgumentError("unable to determine stateMutability","value",r),e}class ki extends Gi{format(e){if(e||(e=Wt.sighash),Wt[e]||Ft.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Wt.sighash&&Ft.throwError("cannot format a constructor for sighash",j.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(n=>n.format(e)).join(e===Wt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?ki.fromString(e):ki.fromObject(e)}static fromObject(e){if(ki.isConstructorFragment(e))return e;e.type!=="constructor"&&Ft.throwArgumentError("invalid constructor object","value",e);let t=E1(e);t.constant&&Ft.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Gr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?pe.from(e.gas):null};return new ki(To,n)}static fromString(e){let t={type:"constructor"};e=_1(e,t);let n=e.match(qc);return(!n||n[1].trim()!=="constructor")&&Ft.throwArgumentError("invalid constructor string","value",e),t.inputs=jc(n[2].trim(),!1),A1(n[3].trim(),t),ki.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Ti extends ki{format(e){if(e||(e=Wt.sighash),Wt[e]||Ft.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Wt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Wt.full?", ":",")+") ",e!==Wt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Ti.fromString(e):Ti.fromObject(e)}static fromObject(e){if(Ti.isFunctionFragment(e))return e;e.type!=="function"&&Ft.throwArgumentError("invalid function object","value",e);let t=E1(e);const n={type:e.type,name:zc(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Gr.fromObject):[],outputs:e.outputs?e.outputs.map(Gr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?pe.from(e.gas):null};return new Ti(To,n)}static fromString(e){let t={type:"function"};e=_1(e,t);let n=e.split(" returns ");n.length>2&&Ft.throwArgumentError("invalid function string","value",e);let i=n[0].match(qc);if(i||Ft.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&zc(t.name),t.inputs=jc(i[2],!1),A1(i[3].trim(),t),n.length>1){let s=n[1].match(qc);(s[1].trim()!=""||s[3].trim()!="")&&Ft.throwArgumentError("unexpected tokens","value",e),t.outputs=jc(s[2],!1)}else t.outputs=[];return Ti.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Dg(r){const e=r.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ft.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",r),r}class bs extends Gi{format(e){if(e||(e=Wt.sighash),Wt[e]||Ft.throwArgumentError("invalid format type","format",e),e===Wt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Wt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Wt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?bs.fromString(e):bs.fromObject(e)}static fromObject(e){if(bs.isErrorFragment(e))return e;e.type!=="error"&&Ft.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:zc(e.name),inputs:e.inputs?e.inputs.map(Gr.fromObject):[]};return Dg(new bs(To,t))}static fromString(e){let t={type:"error"},n=e.match(qc);return n||Ft.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&zc(t.name),t.inputs=jc(n[2],!1),Dg(bs.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function da(r){return r.match(/^uint($|[^1-9])/)?r="uint256"+r.substring(4):r.match(/^int($|[^1-9])/)&&(r="int256"+r.substring(3)),r}const QA=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function zc(r){return(!r||!r.match(QA))&&Ft.throwArgumentError(`invalid identifier "${r}"`,"value",r),r}const qc=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function e6(r){r=r.trim();let e=[],t="",n=0;for(let i=0;i<r.length;i++){let s=r[i];s===","&&n===0?(e.push(t),t=""):(t+=s,s==="("?n++:s===")"&&(n--,n===-1&&Ft.throwArgumentError("unbalanced parenthesis","value",r)))}return t&&e.push(t),e}const b0=new j(hu);function S1(r){const e=[],t=function(n,i){if(!!Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],r),e}class Is{constructor(e,t,n,i){this.name=e,this.type=t,this.localName=n,this.dynamic=i}_throwError(e,t){b0.throwArgumentError(e,this.localName,t)}}class Qd{constructor(e){ee(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return En(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(ur(e._data))}writeBytes(e){let t=ge(e);const n=t.length%this.wordSize;return n&&(t=ur([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=ge(pe.from(e));return t.length>this.wordSize&&b0.throwError("value out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ur([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Sf{constructor(e,t,n,i){ee(this,"_data",ge(e)),ee(this,"wordSize",t||32),ee(this,"_coerceFunc",n),ee(this,"allowLoose",i),this._offset=0}get data(){return me(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Sf.coerce(e,t)}_peekBytes(e,t,n){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?i=t:b0.throwError("data out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Sf(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return pe.from(this.readBytes(this.wordSize))}}function ir(r){return"0x"+n_.keccak_256(ge(r))}const t6="rlp/5.7.0",ji=new j(t6);function Ug(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function Fg(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function k1(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(k1(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=Ug(n.length);return i.unshift(247+i.length),i.concat(n)}lu(r)||ji.throwArgumentError("RLP object must be BytesLike","object",r);const e=Array.prototype.slice.call(ge(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Ug(e.length);return t.unshift(183+t.length),t.concat(e)}function Io(r){return me(k1(r))}function Kg(r,e,t,n){const i=[];for(;t<e+1+n;){const s=T1(r,t);i.push(s.result),t+=s.consumed,t>e+1+n&&ji.throwError("child data too short",j.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function T1(r,e){if(r.length===0&&ji.throwError("data too short",j.errors.BUFFER_OVERRUN,{}),r[e]>=248){const t=r[e]-247;e+1+t>r.length&&ji.throwError("data short segment too short",j.errors.BUFFER_OVERRUN,{});const n=Fg(r,e+1,t);return e+1+t+n>r.length&&ji.throwError("data long segment too short",j.errors.BUFFER_OVERRUN,{}),Kg(r,e,e+1+t,t+n)}else if(r[e]>=192){const t=r[e]-192;return e+1+t>r.length&&ji.throwError("data array too short",j.errors.BUFFER_OVERRUN,{}),Kg(r,e,e+1,t)}else if(r[e]>=184){const t=r[e]-183;e+1+t>r.length&&ji.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const n=Fg(r,e+1,t);e+1+t+n>r.length&&ji.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const i=me(r.slice(e+1+t,e+1+t+n));return{consumed:1+t+n,result:i}}else if(r[e]>=128){const t=r[e]-128;e+1+t>r.length&&ji.throwError("data too short",j.errors.BUFFER_OVERRUN,{});const n=me(r.slice(e+1,e+1+t));return{consumed:1+t,result:n}}return{consumed:1,result:me(r[e])}}function ul(r){const e=ge(r),t=T1(e,0);return t.consumed!==e.length&&ji.throwArgumentError("invalid rlp data","data",r),t.result}var r6=Object.freeze(Object.defineProperty({__proto__:null,encode:Io,decode:ul},Symbol.toStringTag,{value:"Module"}));const n6="address/5.7.0",js=new j(n6);function $g(r){kt(r,20)||js.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=ge(ir(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const i6=9007199254740991;function s6(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const x0={};for(let r=0;r<10;r++)x0[String(r)]=String(r);for(let r=0;r<26;r++)x0[String.fromCharCode(65+r)]=String(10+r);const jg=Math.floor(s6(i6));function I1(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>x0[n]).join("");for(;e.length>=jg;){let n=e.substring(0,jg);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function tr(r){let e=null;if(typeof r!="string"&&js.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=$g(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&js.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==I1(r)&&js.throwArgumentError("bad icap checksum","address",r),e=zA(r.substring(4));e.length<40;)e="0"+e;e=$g("0x"+e)}else js.throwArgumentError("invalid address","address",r);return e}function o6(r){try{return tr(r),!0}catch{}return!1}function a6(r){let e=qA(tr(r).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+I1("XE00"+e)+e}function fl(r){let e=null;try{e=tr(r.from)}catch{js.throwArgumentError("missing from address","transaction",r)}const t=Yi(ge(pe.from(r.nonce).toHexString()));return tr(Br(ir(Io([e,t])),12))}function c6(r,e,t){return ts(e)!==32&&js.throwArgumentError("salt must be 32 bytes","salt",e),ts(t)!==32&&js.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",t),tr(Br(ir(ur(["0xff",tr(r),e,t])),12))}class u6 extends Is{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=tr(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return tr(fr(e.readValue().toHexString(),20))}}class f6 extends Is{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const ya=new j(hu);function P1(r,e,t){let n=null;if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let u={};n=e.map(d=>{const h=d.localName;return h||ya.throwError("cannot encode object for signature with missing names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:d,value:t}),u[h]&&ya.throwError("cannot encode object for signature with duplicate names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:d,value:t}),u[h]=!0,t[h]})}else ya.throwArgumentError("invalid tuple value","tuple",t);e.length!==n.length&&ya.throwArgumentError("types/value length mismatch","tuple",t);let i=new Qd(r.wordSize),s=new Qd(r.wordSize),o=[];e.forEach((u,d)=>{let h=n[d];if(u.dynamic){let m=s.length;u.encode(s,h);let v=i.writeUpdatableValue();o.push(_=>{v(_+m)})}else u.encode(i,h)}),o.forEach(u=>{u(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function R1(r,e){let t=[],n=r.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readValue(),u=n.subReader(a.toNumber());try{o=s.decode(u)}catch(d){if(d.code===j.errors.BUFFER_OVERRUN)throw d;o=d,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(a.code===j.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const u=t[o];u instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw u}}):t[a]=u});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class l6 extends Is{constructor(e,t,n){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;n===-1&&(n=t.length,e.writeValue(t.length)),ya.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return P1(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&ya.throwError("insufficient data length",j.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let i=0;i<t;i++)n.push(new f6(this.coder));return e.coerce(this.name,R1(e,n))}}class d6 extends Is{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class C1 extends Is{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ge(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class h6 extends C1{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,me(super.decode(e)))}}class p6 extends Is{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=ge(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,me(e.readBytes(this.size)))}}class g6 extends Is{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const M1="0x0000000000000000000000000000000000000000",B1=pe.from(-1),w0=pe.from(0),N1=pe.from(1),y6=pe.from(2),m6=pe.from("1000000000000000000"),O1=pe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),b6=pe.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),x6=pe.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v0="0x0000000000000000000000000000000000000000000000000000000000000000",w6="\u039E";var L1=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:M1,NegativeOne:B1,Zero:w0,One:N1,Two:y6,WeiPerEther:m6,MaxUint256:O1,MinInt256:b6,MaxInt256:x6,HashZero:v0,EtherSymbol:w6},Symbol.toStringTag,{value:"Module"}));class v6 extends Is{constructor(e,t,n){const i=(t?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=pe.from(t),i=O1.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(N1).mul(B1)))&&this._throwError("value out-of-bounds",t)}else(n.lt(w0)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const _6="strings/5.7.0",D1=new j(_6);var rs;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(rs||(rs={}));var Bn;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(Bn||(Bn={}));function A6(r,e,t,n,i){return D1.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function U1(r,e,t,n,i){if(r===Bn.BAD_PREFIX||r===Bn.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r===Bn.OVERRUN?t.length-e-1:0}function E6(r,e,t,n,i){return r===Bn.OVERLONG?(n.push(i),0):(n.push(65533),U1(r,e,t))}const F1=Object.freeze({error:A6,ignore:U1,replace:E6});function _0(r,e){e==null&&(e=F1.error),r=ge(r);const t=[];let n=0;for(;n<r.length;){const i=r[n++];if(i>>7===0){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(Bn.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(Bn.BAD_PREFIX,n-1,r,t);continue}if(n-1+s>=r.length){n+=e(Bn.OVERRUN,n-1,r,t);continue}let a=i&(1<<8-s-1)-1;for(let u=0;u<s;u++){let d=r[n];if((d&192)!=128){n+=e(Bn.MISSING_CONTINUE,n,r,t),a=null;break}a=a<<6|d&63,n++}if(a!==null){if(a>1114111){n+=e(Bn.OUT_OF_RANGE,n-1-s,r,t,a);continue}if(a>=55296&&a<=57343){n+=e(Bn.UTF16_SURROGATE,n-1-s,r,t,a);continue}if(a<=o){n+=e(Bn.OVERLONG,n-1-s,r,t,a);continue}t.push(a)}}return t}function Lr(r,e=rs.current){e!=rs.current&&(D1.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return ge(t)}function rd(r){const e="0000"+r.toString(16);return"\\u"+e.substring(e.length-4)}function S6(r,e){return'"'+_0(r,e).map(t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?rd(t):(t-=65536,rd((t>>10&1023)+55296)+rd((t&1023)+56320))}).join("")+'"'}function eh(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Ko(r,e){return eh(_0(r,e))}function kf(r,e=rs.current){return _0(Lr(r,e))}function k6(r){const e=Lr(r);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return me(ur([e,v0]).slice(0,32))}function T6(r){const e=ge(r);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return Ko(e.slice(0,t))}function I6(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function A0(r,e){e||(e=function(i){return[parseInt(i,16)]});let t=0,n={};return r.split(",").forEach(i=>{let s=i.split(":");t+=parseInt(s[0],16),n[t]=e(s[1])}),n}function K1(r){let e=0;return r.split(",").map(t=>{let n=t.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function E0(r,e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(t+=i.l,r>=t&&r<=t+i.h&&(r-t)%(i.d||1)===0){if(i.e&&i.e.indexOf(r-t)!==-1)continue;return i}}return null}const P6=K1("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),R6="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),C6=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],M6=A0("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),B6=A0("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),N6=A0("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",I6),O6=K1("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function L6(r){return r.reduce((e,t)=>(t.forEach(n=>{e.push(n)}),e),[])}function D6(r){return!!E0(r,P6)}function U6(r){let e=E0(r,C6);if(e)return[r+e.s];let t=M6[r];if(t)return t;let n=B6[r];if(n)return[r+n[0]];let i=N6[r];return i||null}function F6(r){return!!E0(r,O6)}function K6(r){if(r.match(/^[a-z0-9-]*$/i)&&r.length<=59)return r.toLowerCase();let e=kf(r);e=L6(e.map(n=>{if(R6.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=U6(n);return i||[n]})),e=kf(eh(e),rs.NFKC),e.forEach(n=>{if(F6(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(D6(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let t=eh(e);if(t.substring(0,1)==="-"||t.substring(2,4)==="--"||t.substring(t.length-1)==="-")throw new Error("invalid hyphen");return t}class $6 extends C1{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Lr(t))}decode(e){return Ko(super.decode(e))}}class Du extends Is{constructor(e,t){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return P1(e,this.coders,t)}decode(e){return e.coerce(this.name,R1(e,this.coders))}}const Uu=new j(hu),j6=new RegExp(/^bytes([0-9]*)$/),z6=new RegExp(/^(u?int)([0-9]*)$/);class $1{constructor(e){ee(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new u6(e.name);case"bool":return new d6(e.name);case"string":return new $6(e.name);case"bytes":return new h6(e.name);case"array":return new l6(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Du((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new g6(e.name)}let t=e.type.match(z6);if(t){let n=parseInt(t[2]||"256");return(n===0||n>256||n%8!==0)&&Uu.throwArgumentError("invalid "+t[1]+" bit length","param",e),new v6(n/8,t[1]==="int",e.name)}if(t=e.type.match(j6),t){let n=parseInt(t[1]);return(n===0||n>32)&&Uu.throwArgumentError("invalid bytes length","param",e),new p6(n,e.name)}return Uu.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Sf(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Qd(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(Gr.from(i)));return new Du(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Uu.throwError("types/values length mismatch",j.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map(o=>this._getCoder(Gr.from(o))),i=new Du(n,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(o=>this._getCoder(Gr.from(o)));return new Du(i,"_").decode(this._getReader(ge(t),n))}}const j1=new $1;function zs(r){return ir(Lr(r))}const z1="hash/5.7.0";function S0(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return ge(e)}function k0(r){r=ge(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}var q6=Object.freeze(Object.defineProperty({__proto__:null,decode:S0,encode:k0},Symbol.toStringTag,{value:"Module"}));function q1(r,e){e==null&&(e=1);const t=[],n=t.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(r,e),t}function H6(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function W6(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let O=1;O<n;O++)s.push(i+=t());let o=t(),a=e;e+=o;let u=0,d=0;function h(){return u==0&&(d=d<<8|r[e++],u=8),d>>--u&1}const m=31,v=Math.pow(2,m),_=v>>>1,P=_>>1,A=v-1;let E=0;for(let O=0;O<m;O++)E=E<<1|h();let T=[],C=0,L=v;for(;;){let O=Math.floor(((E-C+1)*i-1)/L),F=0,H=n;for(;H-F>1;){let xe=F+H>>>1;O<s[xe]?H=xe:F=xe}if(F==0)break;T.push(F);let V=C+Math.floor(L*s[F]/i),ie=C+Math.floor(L*s[F+1]/i)-1;for(;((V^ie)&_)==0;)E=E<<1&A|h(),V=V<<1&A,ie=ie<<1&A|1;for(;V&~ie&P;)E=E&_|E<<1&A>>>1|h(),V=V<<1^_,ie=(ie^_)<<1|_|1;C=V,L=1+ie-V}let K=n-4;return T.map(O=>{switch(O-K){case 3:return K+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return K+256+(r[a++]<<8|r[a++]);case 1:return K+r[a++];default:return O-1}})}function G6(r){let e=0;return()=>r[e++]}function V6(r){return G6(W6(r))}function J6(r){return r&1?~r>>1:r>>1}function Y6(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function zg(r,e){let t=Array(r);for(let n=0,i=-1;n<r;n++)t[n]=i+=1+e();return t}function X6(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=J6(e());return t}function Tf(r,e){let t=zg(r(),r),n=r(),i=zg(n,r),s=Y6(n,r);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function Z6(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(eE(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(tE(t,r))}return H6(q1(e))}function Q6(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function H1(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)X6(r,t).forEach((s,o)=>n[o].push(s));return n}function eE(r,e){let t=1+e(),n=e(),i=Q6(e),s=H1(i.length,1+r,e);return q1(s.map((o,a)=>{const u=o[0],d=o.slice(1);return Array(i[a]).fill(void 0).map((h,m)=>{let v=m*n;return[u+m*t,d.map(_=>_+v)]})}))}function tE(r,e){let t=1+e();return H1(t,1+r,e).map(i=>[i[0],i.slice(1)])}function rE(r){let e=Tf(r).sort((n,i)=>n-i);return t();function t(){let n=[];for(;;){let d=Tf(r,e);if(d.length==0)break;n.push({set:new Set(d),node:t()})}n.sort((d,h)=>h.set.size-d.set.size);let i=r(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,u=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:u}}}function nE(){return V6(S0("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const ll=nE(),iE=new Set(Tf(ll)),sE=new Set(Tf(ll)),oE=Z6(ll),aE=rE(ll),qg=45,Hg=95;function W1(r){return kf(r)}function cE(r){return r.filter(e=>e!=65039)}function G1(r){for(let e of r.split(".")){let t=W1(e);try{for(let n=t.lastIndexOf(Hg)-1;n>=0;n--)if(t[n]!==Hg)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===qg&&t[3]===qg)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function uE(r){return G1(fE(r,cE))}function fE(r,e){let t=W1(r).reverse(),n=[];for(;t.length;){let i=dE(t);if(i){n.push(...e(i));continue}let s=t.pop();if(iE.has(s)){n.push(s);continue}if(sE.has(s))continue;let o=oE[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return G1(lE(String.fromCodePoint(...n)))}function lE(r){return r.normalize("NFC")}function dE(r,e){var t;let n=aE,i,s,o=[],a=r.length;for(e&&(e.length=0);a;){let u=r[--a];if(n=(t=n.branches.find(d=>d.set.has(u)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)s=u;else if(n.check&&u===s)break;o.push(u),n.fe0f&&(o.push(65039),a>0&&r[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...r.slice(a).reverse()),r.length=a)}return i}const hE=new j(z1),V1=new Uint8Array(32);V1.fill(0);function Wg(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function T0(r){const e=Lr(uE(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Wg(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(Wg(e.slice(n))),t}function pE(r){try{return T0(r).length!==0}catch{}return!1}function Pc(r){typeof r!="string"&&hE.throwArgumentError("invalid ENS name; not a string","name",r);let e=V1;const t=T0(r);for(;t.length;)e=ir(ur([e,ir(t.pop())]));return me(e)}function J1(r){return me(ur(T0(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const gE=`Ethereum Signed Message:
`;function I0(r){return typeof r=="string"&&(r=Lr(r)),ir(ur([Lr(gE),Lr(String(r.length)),r]))}var yE=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const yr=new j(z1),Y1=new Uint8Array(32);Y1.fill(0);const mE=pe.from(-1),X1=pe.from(0),Z1=pe.from(1),bE=pe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function xE(r){const e=ge(r),t=e.length%32;return t?En([e,Y1.slice(t)]):me(e)}const wE=fr(Z1.toHexString(),32),vE=fr(X1.toHexString(),32),Gg={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},nd=["name","version","chainId","verifyingContract","salt"];function Vg(r){return function(e){return typeof e!="string"&&yr.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const _E={name:Vg("name"),version:Vg("version"),chainId:function(r){try{return pe.from(r).toString()}catch{}return yr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return tr(r).toLowerCase()}catch{}return yr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=ge(r);if(e.length!==32)throw new Error("bad length");return me(e)}catch{}return yr.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function id(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&yr.throwArgumentError("invalid numeric width","type",r);const i=bE.mask(t?n-1:n),s=t?i.add(Z1).mul(mE):X1;return function(o){const a=pe.from(o);return(a.lt(s)||a.gt(i))&&yr.throwArgumentError(`value out-of-bounds for ${r}`,"value",o),fr(a.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&yr.throwArgumentError("invalid bytes width","type",r),function(n){return ge(n).length!==t&&yr.throwArgumentError(`invalid length for ${r}`,"value",n),xE(n)}}}switch(r){case"address":return function(e){return fr(tr(e),32)};case"bool":return function(e){return e?wE:vE};case"bytes":return function(e){return ir(e)};case"string":return function(e){return zs(e)}}return null}function Jg(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class en{constructor(e){ee(this,"types",Object.freeze(Tn(e))),ee(this,"_encoderCache",{}),ee(this,"_types",{});const t={},n={},i={};Object.keys(e).forEach(a=>{t[a]={},n[a]=[],i[a]={}});for(const a in e){const u={};e[a].forEach(d=>{u[d.name]&&yr.throwArgumentError(`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(a)}`,"types",e),u[d.name]=!0;const h=d.type.match(/^([^\x5b]*)(\x5b|$)/)[1];h===a&&yr.throwArgumentError(`circular type reference to ${JSON.stringify(h)}`,"types",e),!id(h)&&(n[h]||yr.throwArgumentError(`unknown type ${JSON.stringify(h)}`,"types",e),n[h].push(a),t[a][h]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?yr.throwArgumentError("missing primary type","types",e):s.length>1&&yr.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),ee(this,"primaryType",s[0]);function o(a,u){u[a]&&yr.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),u[a]=!0,Object.keys(t[a]).forEach(d=>{!n[d]||(o(d,u),Object.keys(u).forEach(h=>{i[h][d]=!0}))}),delete u[a]}o(this.primaryType,{});for(const a in i){const u=Object.keys(i[a]);u.sort(),this._types[a]=Jg(a,e[a])+u.map(d=>Jg(d,e[d])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=id(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&yr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let u=a.map(s);return this._types[i]&&(u=u.map(ir)),ir(En(u))}}const n=this.types[e];if(n){const i=zs(this._types[e]);return s=>{const o=n.map(({name:a,type:u})=>{const d=this.getEncoder(u)(s[a]);return this._types[u]?ir(d):d});return o.unshift(i),En(o)}}return yr.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||yr.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ir(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(id(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&yr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(u=>this._visit(o,u,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:u})=>(o[a]=this._visit(u,t[a],n),o),{}):yr.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new en(e)}static getPrimaryType(e){return en.from(e).primaryType}static hashStruct(e,t,n){return en.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const i=Gg[n];i||yr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>nd.indexOf(n.name)-nd.indexOf(i.name)),en.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return En(["0x1901",en.hashDomain(e),en.from(t).hash(n)])}static hash(e,t,n){return ir(en.encode(e,t,n))}static resolveNames(e,t,n,i){return yE(this,void 0,void 0,function*(){e=dr(e);const s={};e.verifyingContract&&!kt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=en.from(t);o.visit(n,(a,u)=>(a==="address"&&!kt(u,20)&&(s[u]="0x"),u));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,u)=>a==="address"&&s[u]?s[u]:u),{domain:e,value:n}})}static getPayload(e,t,n){en.hashDomain(e);const i={},s=[];nd.forEach(u=>{const d=e[u];d!=null&&(i[u]=_E[u](d),s.push({name:u,type:Gg[u]}))});const o=en.from(t),a=dr(t);return a.EIP712Domain?yr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(u,d)=>{if(u.match(/^bytes(\d*)/))return me(ge(d));if(u.match(/^u?int/))return pe.from(d).toString();switch(u){case"address":return d.toLowerCase();case"bool":return!!d;case"string":return typeof d!="string"&&yr.throwArgumentError("invalid string","value",d),d}return yr.throwArgumentError("unsupported type","type",u)})}}}const gr=new j(hu);class Q1 extends Fo{}class ex extends Fo{}class AE extends Fo{}class If extends Fo{static isIndexed(e){return!!(e&&e._isIndexed)}}const EE={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Yg(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);return t.error=e,t}class th{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,ee(this,"fragments",t.map(n=>Gi.from(n)).filter(n=>n!=null)),ee(this,"_abiCoder",nn(new.target,"getAbiCoder")()),ee(this,"functions",{}),ee(this,"errors",{}),ee(this,"events",{}),ee(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){gr.warn("duplicate definition - constructor");return}ee(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){gr.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||ee(this,"deploy",ki.from({payable:!1,type:"constructor"})),ee(this,"_isInterface",!0)}format(e){e||(e=Wt.full),e===Wt.sighash&&gr.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(n=>n.format(e));return e===Wt.json?JSON.stringify(t.map(n=>JSON.parse(n))):t}static getAbiCoder(){return j1}static getAddress(e){return tr(e)}static getSighash(e){return Br(zs(e.format()),0,4)}static getEventTopic(e){return zs(e.format())}getFunction(e){if(kt(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];gr.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?gr.throwArgumentError("no matching function","name",n):i.length>1&&gr.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const t=this.functions[Ti.fromString(e).format()];return t||gr.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(kt(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];gr.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?gr.throwArgumentError("no matching event","name",n):i.length>1&&gr.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const t=this.events[Hi.fromString(e).format()];return t||gr.throwArgumentError("no matching event","signature",e),t}getError(e){if(kt(e)){const n=nn(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}gr.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?gr.throwArgumentError("no matching error","name",n):i.length>1&&gr.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const t=this.errors[Ti.fromString(e).format()];return t||gr.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return nn(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),nn(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const n=ge(t);return me(n.slice(0,4))!==this.getSighash(e)&&gr.throwArgumentError(`data signature does not match error ${e.name}.`,"data",me(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),me(ur([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const n=ge(t);return me(n.slice(0,4))!==this.getSighash(e)&&gr.throwArgumentError(`data signature does not match function ${e.name}.`,"data",me(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),me(ur([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let n=ge(t),i=null,s="",o=null,a=null,u=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const d=me(n.slice(0,4)),h=EE[d];if(h)o=this._abiCoder.decode(h.inputs,n.slice(4)),a=h.name,u=h.signature,h.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const m=this.getError(d);o=this._abiCoder.decode(m.inputs,n.slice(4)),a=m.name,u=m.format()}catch{}break}}return gr.throwError("call revert exception"+s,j.errors.CALL_EXCEPTION,{method:e.format(),data:me(t),errorArgs:o,errorName:a,errorSignature:u,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),me(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&gr.throwError("too many arguments for "+e.format(),j.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?zs(o):s.type==="bytes"?ir(me(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=pe.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),fr(me(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&gr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?gr.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(u=>i(a,u))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&gr.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const u=t[a];if(o.indexed)if(o.type==="string")n.push(zs(u));else if(o.type==="bytes")n.push(ir(u));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[u]))}else i.push(o),s.push(u)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let v=this.getEventTopic(e);(!kt(n[0],32)||n[0].toLowerCase()!==v)&&gr.throwError("fragment/topic mismatch",j.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:v,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((v,_)=>{v.indexed?v.type==="string"||v.type==="bytes"||v.baseType==="tuple"||v.baseType==="array"?(i.push(Gr.fromObject({type:"bytes32",name:v.name})),o.push(!0)):(i.push(v),o.push(!1)):(s.push(v),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,ur(n)):null,u=this._abiCoder.decode(s,t,!0),d=[],h=0,m=0;e.inputs.forEach((v,_)=>{if(v.indexed)if(a==null)d[_]=new If({_isIndexed:!0,hash:null});else if(o[_])d[_]=new If({_isIndexed:!0,hash:a[m++]});else try{d[_]=a[m++]}catch(P){d[_]=P}else try{d[_]=u[h++]}catch(P){d[_]=P}if(v.name&&d[v.name]==null){const P=d[_];P instanceof Error?Object.defineProperty(d,v.name,{enumerable:!0,get:()=>{throw Yg(`property ${JSON.stringify(v.name)}`,P)}}):d[v.name]=P}});for(let v=0;v<d.length;v++){const _=d[v];_ instanceof Error&&Object.defineProperty(d,v,{enumerable:!0,get:()=>{throw Yg(`index ${v}`,_)}})}return Object.freeze(d)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new ex({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:pe.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Q1({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=me(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new AE({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const SE="abstract-provider/5.7.0";var kE=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const TE=new j(SE);class IE extends Fo{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class $o{constructor(){TE.checkAbstract(new.target,$o),ee(this,"_isProvider",!0)}getFeeData(){return kE(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Sr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=pe.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const PE="abstract-signer/5.7.0";var _i=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const fi=new j(PE),RE=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],CE=[j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED];class Ps{constructor(){fi.checkAbstract(new.target,Ps),ee(this,"_isSigner",!0)}getBalance(e){return _i(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return _i(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return _i(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Sr(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return _i(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Sr(this.checkTransaction(e));return yield this.provider.call(n,t)})}sendTransaction(e){return _i(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)})}getChainId(){return _i(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return _i(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return _i(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return _i(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)RE.indexOf(n)===-1&&fi.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=dr(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&fi.throwArgumentError("from address mismatch","transaction",e),n[0])),t}populateTransaction(e){return _i(this,void 0,void 0,function*(){const t=yield Sr(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>_i(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&fi.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const n=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||n)?fi.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&n&&fi.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&fi.throwError("network does not support EIP-1559",j.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):fi.throwError("failed to get consistent fee data",j.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(CE.indexOf(i.code)>=0)throw i;return fi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&fi.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Sr(t)})}_checkProvider(e){this.provider||fi.throwError("missing provider",j.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class pu extends Ps{constructor(e,t){super(),ee(this,"address",e),ee(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{fi.throwError(e,j.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new pu(this.address,e)}}function Ja(r,e,t){return t={path:e,exports:{},require:function(n,i){return ME(n,i??t.path)}},r(t,t.exports),t.exports}function ME(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var P0=tx;function tx(r,e){if(!r)throw new Error(e||"Assertion failed")}tx.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Pi=Ja(function(r,e){var t=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var u=[];if(typeof o!="string"){for(var d=0;d<o.length;d++)u[d]=o[d]|0;return u}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var d=0;d<o.length;d+=2)u.push(parseInt(o[d]+o[d+1],16))}else for(var d=0;d<o.length;d++){var h=o.charCodeAt(d),m=h>>8,v=h&255;m?u.push(m,v):u.push(v)}return u}t.toArray=n;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",u=0;u<o.length;u++)a+=i(o[u].toString(16));return a}t.toHex=s,t.encode=function(a,u){return u==="hex"?s(a):a}}),ti=Ja(function(r,e){var t=e;t.assert=P0,t.toArray=Pi.toArray,t.zero2=Pi.zero2,t.toHex=Pi.toHex,t.encode=Pi.encode;function n(u,d,h){var m=new Array(Math.max(u.bitLength(),h)+1);m.fill(0);for(var v=1<<d+1,_=u.clone(),P=0;P<m.length;P++){var A,E=_.andln(v-1);_.isOdd()?(E>(v>>1)-1?A=(v>>1)-E:A=E,_.isubn(A)):A=0,m[P]=A,_.iushrn(1)}return m}t.getNAF=n;function i(u,d){var h=[[],[]];u=u.clone(),d=d.clone();for(var m=0,v=0,_;u.cmpn(-m)>0||d.cmpn(-v)>0;){var P=u.andln(3)+m&3,A=d.andln(3)+v&3;P===3&&(P=-1),A===3&&(A=-1);var E;(P&1)===0?E=0:(_=u.andln(7)+m&7,(_===3||_===5)&&A===2?E=-P:E=P),h[0].push(E);var T;(A&1)===0?T=0:(_=d.andln(7)+v&7,(_===3||_===5)&&P===2?T=-A:T=A),h[1].push(T),2*m===E+1&&(m=1-m),2*v===T+1&&(v=1-v),u.iushrn(1),d.iushrn(1)}return h}t.getJSF=i;function s(u,d,h){var m="_"+d;u.prototype[d]=function(){return this[m]!==void 0?this[m]:this[m]=h.call(this)}}t.cachedProperty=s;function o(u){return typeof u=="string"?t.toArray(u,"hex"):u}t.parseBytes=o;function a(u){return new vt(u,"hex","le")}t.intFromLE=a}),Pf=ti.getNAF,BE=ti.getJSF,Rf=ti.assert;function co(r,e){this.type=r,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var jo=co;co.prototype.point=function(){throw new Error("Not implemented")};co.prototype.validate=function(){throw new Error("Not implemented")};co.prototype._fixedNafMul=function(e,t){Rf(e.precomputed);var n=e._getDoubles(),i=Pf(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var d=a+n.step-1;d>=a;d--)u=(u<<1)+i[d];o.push(u)}for(var h=this.jpoint(null,null,null),m=this.jpoint(null,null,null),v=s;v>0;v--){for(a=0;a<o.length;a++)u=o[a],u===v?m=m.mixedAdd(n.points[a]):u===-v&&(m=m.mixedAdd(n.points[a].neg()));h=h.add(m)}return h.toP()};co.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Pf(t,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var d=0;u>=0&&o[u]===0;u--)d++;if(u>=0&&d++,a=a.dblp(d),u<0)break;var h=o[u];Rf(h!==0),e.type==="affine"?h>0?a=a.mixedAdd(s[h-1>>1]):a=a.mixedAdd(s[-h-1>>1].neg()):h>0?a=a.add(s[h-1>>1]):a=a.add(s[-h-1>>1].neg())}return e.type==="affine"?a.toP():a};co.prototype._wnafMulAdd=function(e,t,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,d=0,h,m,v;for(h=0;h<i;h++){v=t[h];var _=v._getNAFPoints(e);o[h]=_.wnd,a[h]=_.points}for(h=i-1;h>=1;h-=2){var P=h-1,A=h;if(o[P]!==1||o[A]!==1){u[P]=Pf(n[P],o[P],this._bitLength),u[A]=Pf(n[A],o[A],this._bitLength),d=Math.max(u[P].length,d),d=Math.max(u[A].length,d);continue}var E=[t[P],null,null,t[A]];t[P].y.cmp(t[A].y)===0?(E[1]=t[P].add(t[A]),E[2]=t[P].toJ().mixedAdd(t[A].neg())):t[P].y.cmp(t[A].y.redNeg())===0?(E[1]=t[P].toJ().mixedAdd(t[A]),E[2]=t[P].add(t[A].neg())):(E[1]=t[P].toJ().mixedAdd(t[A]),E[2]=t[P].toJ().mixedAdd(t[A].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],C=BE(n[P],n[A]);for(d=Math.max(C[0].length,d),u[P]=new Array(d),u[A]=new Array(d),m=0;m<d;m++){var L=C[0][m]|0,K=C[1][m]|0;u[P][m]=T[(L+1)*3+(K+1)],u[A][m]=0,a[P]=E}}var O=this.jpoint(null,null,null),F=this._wnafT4;for(h=d;h>=0;h--){for(var H=0;h>=0;){var V=!0;for(m=0;m<i;m++)F[m]=u[m][h]|0,F[m]!==0&&(V=!1);if(!V)break;H++,h--}if(h>=0&&H++,O=O.dblp(H),h<0)break;for(m=0;m<i;m++){var ie=F[m];ie!==0&&(ie>0?v=a[m][ie-1>>1]:ie<0&&(v=a[m][-ie-1>>1].neg()),v.type==="affine"?O=O.mixedAdd(v):O=O.add(v))}}for(h=0;h<i;h++)a[h]=null;return s?O:O.toP()};function mi(r,e){this.curve=r,this.type=e,this.precomputed=null}co.BasePoint=mi;mi.prototype.eq=function(){throw new Error("Not implemented")};mi.prototype.validate=function(){return this.curve.validate(this)};co.prototype.decodePoint=function(e,t){e=ti.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Rf(e[e.length-1]%2===0):e[0]===7&&Rf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};mi.prototype.encodeCompressed=function(e){return this.encode(e,!0)};mi.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};mi.prototype.encode=function(e,t){return ti.encode(this._encode(t),e)};mi.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};mi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};mi.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};mi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};mi.prototype._getBeta=function(){return null};mi.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var R0=Ja(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),NE=ti.assert;function bi(r){jo.call(this,"short",r),this.a=new vt(r.a,16).toRed(this.red),this.b=new vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}R0(bi,jo);var OE=bi;bi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new vt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new vt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],NE(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new vt(a.a,16),b:new vt(a.b,16)}}):o=this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}};bi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:vt.mont(e),n=new vt(2).toRed(t).redInvm(),i=n.redNeg(),s=new vt(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};bi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new vt(1),o=new vt(0),a=new vt(0),u=new vt(1),d,h,m,v,_,P,A,E=0,T,C;n.cmpn(0)!==0;){var L=i.div(n);T=i.sub(L.mul(n)),C=a.sub(L.mul(s));var K=u.sub(L.mul(o));if(!m&&T.cmp(t)<0)d=A.neg(),h=s,m=T.neg(),v=C;else if(m&&++E===2)break;A=T,i=n,n=T,a=s,s=C,u=o,o=K}_=T.neg(),P=C;var O=m.sqr().add(v.sqr()),F=_.sqr().add(P.sqr());return F.cmp(O)>=0&&(_=d,P=h),m.negative&&(m=m.neg(),v=v.neg()),_.negative&&(_=_.neg(),P=P.neg()),[{a:m,b:v},{a:_,b:P}]};bi.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),d=s.mul(n.b),h=o.mul(i.b),m=e.sub(a).sub(u),v=d.add(h).neg();return{k1:m,k2:v}};bi.prototype.pointFromX=function(e,t){e=new vt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};bi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};bi.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),u=e[o],d=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),i[o*2]=u,i[o*2+1]=d,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var h=this._wnafMulAdd(1,i,s,o*2,n),m=0;m<o*2;m++)i[m]=null,s[m]=null;return h};function Zr(r,e,t,n){jo.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}R0(Zr,jo.BasePoint);bi.prototype.point=function(e,t,n){return new Zr(this,e,t,n)};bi.prototype.pointFromJSON=function(e,t){return Zr.fromJSON(this,e,t)};Zr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Zr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Zr.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Zr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Zr.prototype.isInfinity=function(){return this.inf};Zr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Zr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Zr.prototype.getX=function(){return this.x.fromRed()};Zr.prototype.getY=function(){return this.y.fromRed()};Zr.prototype.mul=function(e){return e=new vt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Zr.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Zr.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Zr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Zr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};Zr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function un(r,e,t,n){jo.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}R0(un,jo.BasePoint);bi.prototype.jpoint=function(e,t,n){return new un(this,e,t,n)};un.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};un.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};un.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),d=o.redSub(a);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),m=h.redMul(u),v=i.redMul(h),_=d.redSqr().redIAdd(m).redISub(v).redISub(v),P=d.redMul(v.redISub(_)).redISub(o.redMul(m)),A=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(_,P,A)};un.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),h=d.redMul(a),m=n.redMul(d),v=u.redSqr().redIAdd(h).redISub(m).redISub(m),_=u.redMul(m.redISub(v)).redISub(s.redMul(h)),P=this.z.redMul(a);return this.curve.jpoint(v,_,P)};un.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,d=u.redSqr().redSqr(),h=a.redAdd(a);for(t=0;t<e;t++){var m=o.redSqr(),v=h.redSqr(),_=v.redSqr(),P=m.redAdd(m).redIAdd(m).redIAdd(i.redMul(d)),A=o.redMul(v),E=P.redSqr().redISub(A.redAdd(A)),T=A.redISub(E),C=P.redMul(T);C=C.redIAdd(C).redISub(_);var L=h.redMul(u);t+1<e&&(d=d.redMul(_)),o=E,u=L,h=C}return this.curve.jpoint(o,h.redMul(s),u)};un.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};un.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),d=u.redSqr().redISub(a).redISub(a),h=o.redIAdd(o);h=h.redIAdd(h),h=h.redIAdd(h),e=d,t=u.redMul(a.redISub(d)).redISub(h),n=this.y.redAdd(this.y)}else{var m=this.x.redSqr(),v=this.y.redSqr(),_=v.redSqr(),P=this.x.redAdd(v).redSqr().redISub(m).redISub(_);P=P.redIAdd(P);var A=m.redAdd(m).redIAdd(m),E=A.redSqr(),T=_.redIAdd(_);T=T.redIAdd(T),T=T.redIAdd(T),e=E.redISub(P).redISub(P),t=A.redMul(P.redISub(e)).redISub(T),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};un.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),d=u.redSqr().redISub(a).redISub(a);e=d;var h=o.redIAdd(o);h=h.redIAdd(h),h=h.redIAdd(h),t=u.redMul(a.redISub(d)).redISub(h),n=this.y.redAdd(this.y)}else{var m=this.z.redSqr(),v=this.y.redSqr(),_=this.x.redMul(v),P=this.x.redSub(m).redMul(this.x.redAdd(m));P=P.redAdd(P).redIAdd(P);var A=_.redIAdd(_);A=A.redIAdd(A);var E=A.redAdd(A);e=P.redSqr().redISub(E),n=this.y.redAdd(this.z).redSqr().redISub(v).redISub(m);var T=v.redSqr();T=T.redIAdd(T),T=T.redIAdd(T),T=T.redIAdd(T),t=P.redMul(A.redISub(e)).redISub(T)}return this.curve.jpoint(e,t,n)};un.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),d=t.redAdd(t);d=d.redIAdd(d);var h=d.redMul(a),m=u.redSqr().redISub(h.redAdd(h)),v=h.redISub(m),_=a.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var P=u.redMul(v).redISub(_),A=n.redAdd(n).redMul(i);return this.curve.jpoint(m,P,A)};un.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),d=i.redIAdd(i);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(d),m=t.redMul(h);m=m.redIAdd(m),m=m.redIAdd(m);var v=this.x.redMul(u).redISub(m);v=v.redIAdd(v),v=v.redIAdd(v);var _=this.y.redMul(h.redMul(d.redISub(h)).redISub(a.redMul(u)));_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var P=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(v,_,P)};un.prototype.mul=function(e,t){return e=new vt(e,t),this.curve._wnafMul(this,e)};un.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};un.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};un.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};un.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var cf=Ja(function(r,e){var t=e;t.base=jo,t.short=OE,t.mont=null,t.edwards=null}),uf=Ja(function(r,e){var t=e,n=ti.assert;function i(a){a.type==="short"?this.curve=new cf.short(a):a.type==="edwards"?this.curve=new cf.edwards(a):this.curve=new cf.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,u){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var d=new i(u);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:d}),d}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Mn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Mn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Mn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Mn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Mn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Mn.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Mn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Mn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Ys(r){if(!(this instanceof Ys))return new Ys(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Pi.toArray(r.entropy,r.entropyEnc||"hex"),t=Pi.toArray(r.nonce,r.nonceEnc||"hex"),n=Pi.toArray(r.pers,r.persEnc||"hex");P0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var rx=Ys;Ys.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Ys.prototype._hmac=function(){return new Mn.hmac(this.hash,this.K)};Ys.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Ys.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=Pi.toArray(e,t),n=Pi.toArray(n,i),P0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Ys.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=Pi.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Pi.encode(o,t)};var rh=ti.assert;function wn(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var C0=wn;wn.fromPublic=function(e,t,n){return t instanceof wn?t:new wn(e,{pub:t,pubEnc:n})};wn.fromPrivate=function(e,t,n){return t instanceof wn?t:new wn(e,{priv:t,privEnc:n})};wn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};wn.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};wn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};wn.prototype._importPrivate=function(e,t){this.priv=new vt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};wn.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?rh(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&rh(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};wn.prototype.derive=function(e){return e.validate()||rh(e.validate(),"public point not validated"),e.mul(this.priv).getX()};wn.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};wn.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};wn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var LE=ti.assert;function dl(r,e){if(r instanceof dl)return r;this._importDER(r,e)||(LE(r.r&&r.s,"Signature without r or s"),this.r=new vt(r.r,16),this.s=new vt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var hl=dl;function DE(){this.place=0}function sd(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=r[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function Xg(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}dl.prototype._importDER=function(e,t){e=ti.toArray(e,t);var n=new DE;if(e[n.place++]!==48)return!1;var i=sd(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=sd(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=sd(e,n);if(a===!1||e.length!==a+n.place)return!1;var u=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new vt(o),this.s=new vt(u),this.recoveryParam=null,!0};function od(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}dl.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=Xg(t),n=Xg(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];od(i,t.length),i=i.concat(t),i.push(2),od(i,n.length);var s=i.concat(n),o=[48];return od(o,s.length),o=o.concat(s),ti.encode(o,e)};var UE=function(){throw new Error("unsupported")},nx=ti.assert;function gi(r){if(!(this instanceof gi))return new gi(r);typeof r=="string"&&(nx(Object.prototype.hasOwnProperty.call(uf,r),"Unknown curve "+r),r=uf[r]),r instanceof uf.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var FE=gi;gi.prototype.keyPair=function(e){return new C0(this,e)};gi.prototype.keyFromPrivate=function(e,t){return C0.fromPrivate(this,e,t)};gi.prototype.keyFromPublic=function(e,t){return C0.fromPublic(this,e,t)};gi.prototype.genKeyPair=function(e){e||(e={});for(var t=new rx({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||UE(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new vt(2));;){var s=new vt(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};gi.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};gi.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new vt(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),u=new rx({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new vt(1)),h=0;;h++){var m=i.k?i.k(h):new vt(u.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(d)>=0)){var v=this.g.mul(m);if(!v.isInfinity()){var _=v.getX(),P=_.umod(this.n);if(P.cmpn(0)!==0){var A=m.invm(this.n).mul(P.mul(t.getPrivate()).iadd(e));if(A=A.umod(this.n),A.cmpn(0)!==0){var E=(v.getY().isOdd()?1:0)|(_.cmp(P)!==0?2:0);return i.canonical&&A.cmp(this.nh)>0&&(A=this.n.sub(A),E^=1),new hl({r:P,s:A,recoveryParam:E})}}}}}};gi.prototype.verify=function(e,t,n,i){e=this._truncateToN(new vt(e,16)),n=this.keyFromPublic(n,i),t=new hl(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),u=a.mul(e).umod(this.n),d=a.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(u,n.getPublic(),d),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(u,n.getPublic(),d),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};gi.prototype.recoverPubKey=function(r,e,t,n){nx((3&t)===t,"The recovery param is more than two bits"),e=new hl(e,n);var i=this.n,s=new vt(r),o=e.r,a=e.s,u=t&1,d=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var h=e.r.invm(i),m=i.sub(s).mul(h).umod(i),v=a.mul(h).umod(i);return this.g.mulAdd(m,o,v)};gi.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new hl(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var KE=Ja(function(r,e){var t=e;t.version="6.5.4",t.utils=ti,t.rand=function(){throw new Error("unsupported")},t.curve=cf,t.curves=uf,t.ec=FE,t.eddsa=null}),$E=KE.ec;const jE="signing-key/5.7.0",nh=new j(jE);let ad=null;function zi(){return ad||(ad=new $E("secp256k1")),ad}class Eo{constructor(e){ee(this,"curve","secp256k1"),ee(this,"privateKey",me(e)),ts(this.privateKey)!==32&&nh.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=zi().keyFromPrivate(ge(this.privateKey));ee(this,"publicKey","0x"+t.getPublic(!1,"hex")),ee(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),ee(this,"_isSigningKey",!0)}_addPoint(e){const t=zi().keyFromPublic(ge(this.publicKey)),n=zi().keyFromPublic(ge(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=zi().keyFromPrivate(ge(this.privateKey)),n=ge(e);n.length!==32&&nh.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return Uo({recoveryParam:i.recoveryParam,r:fr("0x"+i.r.toString(16),32),s:fr("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=zi().keyFromPrivate(ge(this.privateKey)),n=zi().keyFromPublic(ge(M0(e)));return fr("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function ix(r,e){const t=Uo(e),n={r:ge(t.r),s:ge(t.s)};return"0x"+zi().recoverPubKey(ge(r),n,t.recoveryParam).encode("hex",!1)}function M0(r,e){const t=ge(r);if(t.length===32){const n=new Eo(t);return e?"0x"+zi().keyFromPrivate(t).getPublic(!0,"hex"):n.publicKey}else{if(t.length===33)return e?me(t):"0x"+zi().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+zi().keyFromPublic(t).getPublic(!0,"hex"):me(t)}return nh.throwArgumentError("invalid public or private key","key","[REDACTED]")}const zE="transactions/5.7.0",bn=new j(zE);var ih;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(ih||(ih={}));function B0(r){return r==="0x"?null:tr(r)}function mn(r){return r==="0x"?w0:pe.from(r)}const qE=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],HE={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ws(r){const e=M0(r);return tr(Br(ir(Br(e,1)),12))}function gu(r,e){return Ws(ix(ge(r),e))}function Vn(r,e){const t=Yi(pe.from(r).toHexString());return t.length>32&&bn.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function cd(r,e){return{address:tr(r),storageKeys:(e||[]).map((t,n)=>(ts(t)!==32&&bn.throwArgumentError("invalid access list storageKey",`accessList[${r}:${n}]`,t),t.toLowerCase()))}}function uo(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(t.length>2&&bn.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,t),cd(t[0],t[1])):cd(t.address,t.storageKeys));const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return cd(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function sx(r){return uo(r).map(e=>[e.address,e.storageKeys])}function ox(r,e){if(r.gasPrice!=null){const n=pe.from(r.gasPrice),i=pe.from(r.maxFeePerGas||0);n.eq(i)||bn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const t=[Vn(r.chainId||0,"chainId"),Vn(r.nonce||0,"nonce"),Vn(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Vn(r.maxFeePerGas||0,"maxFeePerGas"),Vn(r.gasLimit||0,"gasLimit"),r.to!=null?tr(r.to):"0x",Vn(r.value||0,"value"),r.data||"0x",sx(r.accessList||[])];if(e){const n=Uo(e);t.push(Vn(n.recoveryParam,"recoveryParam")),t.push(Yi(n.r)),t.push(Yi(n.s))}return En(["0x02",Io(t)])}function ax(r,e){const t=[Vn(r.chainId||0,"chainId"),Vn(r.nonce||0,"nonce"),Vn(r.gasPrice||0,"gasPrice"),Vn(r.gasLimit||0,"gasLimit"),r.to!=null?tr(r.to):"0x",Vn(r.value||0,"value"),r.data||"0x",sx(r.accessList||[])];if(e){const n=Uo(e);t.push(Vn(n.recoveryParam,"recoveryParam")),t.push(Yi(n.r)),t.push(Yi(n.s))}return En(["0x01",Io(t)])}function WE(r,e){m0(r,HE);const t=[];qE.forEach(function(o){let a=r[o.name]||[];const u={};o.numeric&&(u.hexPad="left"),a=ge(me(a,u)),o.length&&a.length!==o.length&&a.length>0&&bn.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a),o.maxLength&&(a=Yi(a),a.length>o.maxLength&&bn.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a)),t.push(me(a))});let n=0;if(r.chainId!=null?(n=r.chainId,typeof n!="number"&&bn.throwArgumentError("invalid transaction.chainId","transaction",r)):e&&!lu(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(t.push(me(n)),t.push("0x"),t.push("0x")),!e)return Io(t);const i=Uo(e);let s=27+i.recoveryParam;return n!==0?(t.pop(),t.pop(),t.pop(),s+=n*2+8,i.v>28&&i.v!==s&&bn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&bn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),t.push(me(s)),t.push(Yi(ge(i.r))),t.push(Yi(ge(i.s))),Io(t)}function sh(r,e){if(r.type==null||r.type===0)return r.accessList!=null&&bn.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",r),WE(r,e);switch(r.type){case 1:return ax(r,e);case 2:return ox(r,e)}return bn.throwError(`unsupported transaction type: ${r.type}`,j.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:r.type})}function cx(r,e,t){try{const n=mn(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");r.v=n}catch{bn.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=fr(e[1],32),r.s=fr(e[2],32);try{const n=ir(t(r));r.from=gu(n,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function GE(r){const e=ul(r.slice(1));e.length!==9&&e.length!==12&&bn.throwArgumentError("invalid component count for transaction type: 2","payload",me(r));const t=mn(e[2]),n=mn(e[3]),i={type:2,chainId:mn(e[0]).toNumber(),nonce:mn(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:mn(e[4]),to:B0(e[5]),value:mn(e[6]),data:e[7],accessList:uo(e[8])};return e.length===9||(i.hash=ir(r),cx(i,e.slice(9),ox)),i}function VE(r){const e=ul(r.slice(1));e.length!==8&&e.length!==11&&bn.throwArgumentError("invalid component count for transaction type: 1","payload",me(r));const t={type:1,chainId:mn(e[0]).toNumber(),nonce:mn(e[1]).toNumber(),gasPrice:mn(e[2]),gasLimit:mn(e[3]),to:B0(e[4]),value:mn(e[5]),data:e[6],accessList:uo(e[7])};return e.length===8||(t.hash=ir(r),cx(t,e.slice(8),ax)),t}function JE(r){const e=ul(r);e.length!==9&&e.length!==6&&bn.throwArgumentError("invalid raw transaction","rawTransaction",r);const t={nonce:mn(e[0]).toNumber(),gasPrice:mn(e[1]),gasLimit:mn(e[2]),to:B0(e[3]),value:mn(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=pe.from(e[6]).toNumber()}catch{return t}if(t.r=fr(e[7],32),t.s=fr(e[8],32),pe.from(t.r).isZero()&&pe.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let n=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(me(t.chainId)),i.push("0x"),i.push("0x"),n-=t.chainId*2+8);const s=ir(Io(i));try{t.from=gu(s,{r:me(t.r),s:me(t.s),recoveryParam:n})}catch{}t.hash=ir(r)}return t.type=null,t}function ux(r){const e=ge(r);if(e[0]>127)return JE(e);switch(e[0]){case 1:return VE(e);case 2:return GE(e)}return bn.throwError(`unsupported transaction type: ${e[0]}`,j.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const YE="contracts/5.7.0";var Xs=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const nr=new j(YE),XE={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Cf(r,e){return Xs(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&nr.throwArgumentError("invalid address or ENS name","name",t);try{return tr(t)}catch{}r||nr.throwError("a provider or signer is needed to resolve ENS names",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield r.resolveName(t);return n==null&&nr.throwArgumentError("resolver or addr is not configured for ENS name","name",t),n})}function Rc(r,e,t){return Xs(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((n,i)=>Rc(r,Array.isArray(e)?e[i]:e[n.name],n))):t.type==="address"?yield Cf(r,e):t.type==="tuple"?yield Rc(r,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>Rc(r,n,t.arrayChildren))):Promise.reject(nr.makeError("invalid value for array",j.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function pl(r,e,t){return Xs(this,void 0,void 0,function*(){let n={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(n=dr(t.pop())),nr.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),r.signer?n.from?n.from=Sr({override:Cf(r.signer,n.from),signer:r.signer.getAddress()}).then(d=>Xs(this,void 0,void 0,function*(){return tr(d.signer)!==d.override&&nr.throwError("Contract with a Signer cannot override from",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),d.override})):n.from=r.signer.getAddress():n.from&&(n.from=Cf(r.provider,n.from));const i=yield Sr({args:Rc(r.signer||r.provider,t,e.inputs),address:r.resolvedAddress,overrides:Sr(n)||{}}),s=r.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=pe.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=pe.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=pe.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=pe.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=pe.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=uo(a.accessList)),o.gasLimit==null&&e.gas!=null){let d=21e3;const h=ge(s);for(let m=0;m<h.length;m++)d+=4,h[m]&&(d+=64);o.gasLimit=pe.from(e.gas).add(d)}if(a.value){const d=pe.from(a.value);!d.isZero()&&!e.payable&&nr.throwError("non-payable method cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=d}a.customData&&(o.customData=dr(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const u=Object.keys(n).filter(d=>n[d]!=null);return u.length&&nr.throwError(`cannot override ${u.map(d=>JSON.stringify(d)).join(",")}`,j.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),o})}function ZE(r,e){return function(...t){return pl(r,e,t)}}function QE(r,e){const t=r.signer||r.provider;return function(...n){return Xs(this,void 0,void 0,function*(){t||nr.throwError("estimate require a provider or signer",j.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield pl(r,e,n);return yield t.estimateGas(i)})}}function fx(r,e){const t=e.wait.bind(e);e.wait=n=>t(n).then(i=>(i.events=i.logs.map(s=>{let o=Tn(s),a=null;try{a=r.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(u,d)=>r.interface.decodeEventLog(a.eventFragment,u,d),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>r.provider,o.getBlock=()=>r.provider.getBlock(i.blockHash),o.getTransaction=()=>r.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function lx(r,e,t){const n=r.signer||r.provider;return function(...i){return Xs(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const u=dr(i.pop());u.blockTag!=null&&(s=yield u.blockTag),delete u.blockTag,i.push(u)}r.deployTransaction!=null&&(yield r._deployed(s));const o=yield pl(r,e,i),a=yield n.call(o,s);try{let u=r.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(u=u[0]),u}catch(u){throw u.code===j.errors.CALL_EXCEPTION&&(u.address=r.address,u.args=i,u.transaction=o),u}})}}function eS(r,e){return function(...t){return Xs(this,void 0,void 0,function*(){r.signer||nr.throwError("sending a transaction requires a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),r.deployTransaction!=null&&(yield r._deployed());const n=yield pl(r,e,t),i=yield r.signer.sendTransaction(n);return fx(r,i),i})}}function Zg(r,e,t){return e.constant?lx(r,e,t):eS(r,e)}function dx(r){return r.address&&(r.topics==null||r.topics.length===0)?"*":(r.address||"*")+"@"+(r.topics?r.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Hc{constructor(e,t){ee(this,"tag",e),ee(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(n=>t||n.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class tS extends Hc{constructor(){super("error",null)}}class Qg extends Hc{constructor(e,t,n,i){const s={address:e};let o=t.getEventTopic(n);i?(o!==i[0]&&nr.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(dx(s),s),ee(this,"address",e),ee(this,"interface",t),ee(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,n)=>this.interface.decodeEventLog(this.fragment,t,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=S1(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class ey extends Hc{constructor(e,t){super("*",{address:e}),ee(this,"address",e),ee(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(n,i)=>this.interface.decodeEventLog(t.eventFragment,n,i),e.args=t.args}catch{}}}class N0{constructor(e,t,n){ee(this,"interface",nn(new.target,"getInterface")(t)),n==null?(ee(this,"provider",null),ee(this,"signer",null)):Ps.isSigner(n)?(ee(this,"provider",n.provider||null),ee(this,"signer",n)):$o.isProvider(n)?(ee(this,"provider",n),ee(this,"signer",null)):nr.throwArgumentError("invalid signer or provider","signerOrProvider",n),ee(this,"callStatic",{}),ee(this,"estimateGas",{}),ee(this,"functions",{}),ee(this,"populateTransaction",{}),ee(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const u=this.interface.events[a];ee(this.filters,a,(...d)=>({address:this.address,topics:this.interface.encodeFilterTopics(u,d)})),o[u.name]||(o[u.name]=[]),o[u.name].push(a)}),Object.keys(o).forEach(a=>{const u=o[a];u.length===1?ee(this.filters,a,this.filters[u[0]]):nr.warn(`Duplicate definition of ${a} (${u.join(", ")})`)})}if(ee(this,"_runningEvents",{}),ee(this,"_wrappedEmits",{}),e==null&&nr.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ee(this,"address",e),this.provider)ee(this,"resolvedAddress",Cf(this.provider,e));else try{ee(this,"resolvedAddress",Promise.resolve(tr(e)))}catch{nr.throwError("provider is required to use ENS name as contract address",j.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){nr.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const u=a.name;i[`%${u}`]||(i[`%${u}`]=[]),i[`%${u}`].push(o)}this[o]==null&&ee(this,o,Zg(this,a,!0)),this.functions[o]==null&&ee(this.functions,o,Zg(this,a,!1)),this.callStatic[o]==null&&ee(this.callStatic,o,lx(this,a,!0)),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,ZE(this,a)),this.estimateGas[o]==null&&ee(this.estimateGas,o,QE(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const u=a[0];try{this[o]==null&&ee(this,o,this[u])}catch{}this.functions[o]==null&&ee(this.functions,o,this.functions[u]),this.callStatic[o]==null&&ee(this.callStatic,o,this.callStatic[u]),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,this.populateTransaction[u]),this.estimateGas[o]==null&&ee(this.estimateGas,o,this.estimateGas[u])})}static getContractAddress(e){return fl(e)}static getInterface(e){return th.isInterface(e)?e:new th(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&nr.throwError("contract not deployed",j.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||nr.throwError("sending a transactions require a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=dr(e||{});return["from","to"].forEach(function(n){t[n]!=null&&nr.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new pu(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ee(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return If.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new tS);if(e==="event")return this._normalizeRunningEvent(new Hc("event",null));if(e==="*")return this._normalizeRunningEvent(new ey(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Qg(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new Qg(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Hc(dx(t),t))}return this._normalizeRunningEvent(new ey(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const i=Tn(t);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,n){if(this.provider||nr.throwError("events require a provider or a signer with a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,n){const i=this._getRunningEvent(e),s=dr(i.filter);return typeof t=="string"&&kt(t,32)?(n!=null&&nr.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(t)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,n)=>t+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class Mf extends N0{}class hx{constructor(e,t,n){let i=null;typeof t=="string"?i=t:ao(t)?i=me(t):t&&typeof t.object=="string"?i=t.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!kt(i)||i.length%2)&&nr.throwArgumentError("invalid bytecode","bytecode",t),n&&!Ps.isSigner(n)&&nr.throwArgumentError("invalid signer","signer",n),ee(this,"bytecode",i),ee(this,"interface",nn(new.target,"getInterface")(e)),ee(this,"signer",n||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){t=dr(e.pop());for(const n in t)if(!XE[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{t[n]!=null&&nr.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.value&&!pe.from(t.value).isZero()&&!this.interface.deploy.payable&&nr.throwError("non-payable constructor cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value}),nr.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=me(ur([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return Xs(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),nr.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield Rc(this.signer,e,this.interface.deploy.inputs);n.push(t);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),o=nn(this.constructor,"getContractAddress")(s),a=nn(this.constructor,"getContract")(o,this.interface,this.signer);return fx(a,s),ee(a,"deployTransaction",s),a})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){e==null&&nr.throwError("missing compiler output",j.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,t)}static getInterface(e){return Mf.getInterface(e)}static getContractAddress(e){return fl(e)}static getContract(e,t,n){return new Mf(e,t,n)}}class px{constructor(e){ee(this,"alphabet",e),ee(this,"base",e.length),ee(this,"_alphabetMap",{}),ee(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=ge(e);if(t.length===0)return"";let n=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return ge(new Uint8Array(t.reverse()))}}new px("abcdefghijklmnopqrstuvwxyz234567");const Ra=new px("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Ca;(function(r){r.sha256="sha256",r.sha512="sha512"})(Ca||(Ca={}));const rS="sha2/5.7.0",nS=new j(rS);function gx(r){return"0x"+Mn.ripemd160().update(ge(r)).digest("hex")}function Ss(r){return"0x"+Mn.sha256().update(ge(r)).digest("hex")}function iS(r){return"0x"+Mn.sha512().update(ge(r)).digest("hex")}function Wc(r,e,t){return Ca[r]||nS.throwError("unsupported algorithm "+r,j.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:r}),"0x"+Mn.hmac(Mn[r],ge(e)).update(ge(t)).digest("hex")}function O0(r,e,t,n,i){r=ge(r),e=ge(e);let s,o=1;const a=new Uint8Array(n),u=new Uint8Array(e.length+4);u.set(e);let d,h;for(let m=1;m<=o;m++){u[e.length]=m>>24&255,u[e.length+1]=m>>16&255,u[e.length+2]=m>>8&255,u[e.length+3]=m&255;let v=ge(Wc(i,r,u));s||(s=v.length,h=new Uint8Array(s),o=Math.ceil(n/s),d=n-(o-1)*s),h.set(v);for(let A=1;A<t;A++){v=ge(Wc(i,r,v));for(let E=0;E<s;E++)h[E]^=v[E]}const _=(m-1)*s,P=m===o?d:s;a.set(ge(h).slice(0,P),_)}return me(a)}const sS="wordlists/5.7.0",oS=new j(sS);class zo{constructor(e){oS.checkAbstract(new.target,zo),ee(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";t.push(i)}return zs(t.join(`
`)+`
`)}static register(e,t){t||(t=e.locale)}}const aS="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Cc=null;function ty(r){if(Cc==null&&(Cc=aS.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),zo.check(r)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Cc=null,new Error("BIP39 Wordlist for en (English) FAILED")}class cS extends zo{constructor(){super("en")}getWord(e){return ty(this),Cc[e]}getWordIndex(e){return ty(this),Cc.indexOf(e)}}const yx=new cS;zo.register(yx);const Bf={en:yx},uS="hdnode/5.7.0",Gc=new j(uS),fS=pe.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lS=Lr("Bitcoin seed"),ha=2147483648;function mx(r){return(1<<r)-1<<8-r}function dS(r){return(1<<r)-1}function Fu(r){return fr(me(r),32)}function ry(r){return Ra.encode(ur([r,Br(Ss(Ss(r)),0,4)]))}function L0(r){if(r==null)return Bf.en;if(typeof r=="string"){const e=Bf[r];return e==null&&Gc.throwArgumentError("unknown locale","wordlist",r),e}return r}const ta={},Ma="m/44'/60'/0'/0/0";class Jn{constructor(e,t,n,i,s,o,a,u){if(e!==ta)throw new Error("HDNode constructor cannot be called directly");if(t){const d=new Eo(t);ee(this,"privateKey",d.privateKey),ee(this,"publicKey",d.compressedPublicKey)}else ee(this,"privateKey",null),ee(this,"publicKey",me(n));ee(this,"parentFingerprint",i),ee(this,"fingerprint",Br(gx(Ss(this.publicKey)),0,4)),ee(this,"address",Ws(this.publicKey)),ee(this,"chainCode",s),ee(this,"index",o),ee(this,"depth",a),u==null?(ee(this,"mnemonic",null),ee(this,"path",null)):typeof u=="string"?(ee(this,"mnemonic",null),ee(this,"path",u)):(ee(this,"mnemonic",u),ee(this,"path",u.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return ry(ur([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",me(this.depth),this.parentFingerprint,fr(me(this.index),4),this.chainCode,this.privateKey!=null?ur(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Jn(ta,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~ha));const n=new Uint8Array(37);if(e&ha){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ge(this.privateKey),1),t&&(t+="'")}else n.set(ge(this.publicKey));for(let m=24;m>=0;m-=8)n[33+(m>>3)]=e>>24-m&255;const i=ge(Wc(Ca.sha512,this.chainCode,n)),s=i.slice(0,32),o=i.slice(32);let a=null,u=null;this.privateKey?a=Fu(pe.from(s).add(this.privateKey).mod(fS)):u=new Eo(me(s))._addPoint(this.publicKey);let d=t;const h=this.mnemonic;return h&&(d=Object.freeze({phrase:h.phrase,path:t,locale:h.locale||"en"})),new Jn(ta,a,u,this.fingerprint,Fu(o),e,this.depth+1,d)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let n=this;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=ha)throw new Error("invalid path index - "+s);n=n._derive(ha+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);if(o>=ha)throw new Error("invalid path index - "+s);n=n._derive(o)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,t){const n=ge(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=ge(Wc(Ca.sha512,lS,n));return new Jn(ta,Fu(i.slice(0,32)),null,"0x00000000",Fu(i.slice(32)),0,0,t)}static fromMnemonic(e,t,n){return n=L0(n),e=yl(gl(e,n),n),Jn._fromSeed(bx(e,t),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return Jn._fromSeed(e,null)}static fromExtendedKey(e){const t=Ra.decode(e);(t.length!==82||ry(t.slice(0,78))!==e)&&Gc.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=t[4],i=me(t.slice(5,9)),s=parseInt(me(t.slice(9,13)).substring(2),16),o=me(t.slice(13,45)),a=t.slice(45,78);switch(me(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Jn(ta,null,me(a),i,o,s,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new Jn(ta,me(a.slice(1)),null,i,o,s,n,null)}return Gc.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function bx(r,e){e||(e="");const t=Lr("mnemonic"+e,rs.NFKD);return O0(Lr(r,rs.NFKD),t,2048,64,"sha512")}function gl(r,e){e=L0(e),Gc.checkNormalize();const t=e.split(r);if(t.length%3!==0)throw new Error("invalid mnemonic");const n=ge(new Uint8Array(Math.ceil(11*t.length/8)));let i=0;for(let d=0;d<t.length;d++){let h=e.getWordIndex(t[d].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let m=0;m<11;m++)h&1<<10-m&&(n[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,o=t.length/3,a=mx(o);if((ge(Ss(n.slice(0,s/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return me(n.slice(0,s/8))}function yl(r,e){if(e=L0(e),r=ge(r),r.length%4!==0||r.length<16||r.length>32)throw new Error("invalid entropy");const t=[0];let n=11;for(let o=0;o<r.length;o++)n>8?(t[t.length-1]<<=8,t[t.length-1]|=r[o],n-=8):(t[t.length-1]<<=n,t[t.length-1]|=r[o]>>8-n,t.push(r[o]&dS(8-n)),n+=3);const i=r.length/4,s=ge(Ss(r))[0]&mx(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(o=>e.getWord(o)))}function hS(r,e){try{return gl(r,e),!0}catch{}return!1}function pS(r){return(typeof r!="number"||r<0||r>=ha||r%1)&&Gc.throwArgumentError("invalid account index","index",r),`m/44'/60'/${r}'/0/0`}const gS="random/5.7.0",oh=new j(gS);function yS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof J.global<"u")return J.global;throw new Error("unable to locate global object")}const ny=yS();let ff=ny.crypto||ny.msCrypto;(!ff||!ff.getRandomValues)&&(oh.warn("WARNING: Missing strong random number source"),ff={getRandomValues:function(r){return oh.throwError("no secure random source avaialble",j.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function ma(r){(r<=0||r>1024||r%1||r!=r)&&oh.throwArgumentError("invalid length","length",r);const e=new Uint8Array(r);return ff.getRandomValues(e),ge(e)}function xx(r){r=r.slice();for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),n=r[e];r[e]=r[t],r[t]=n}return r}var wx={exports:{}};(function(r,e){(function(t){function n(p){return parseInt(p)===p}function i(p){if(!n(p.length))return!1;for(var f=0;f<p.length;f++)if(!n(p[f])||p[f]<0||p[f]>255)return!1;return!0}function s(p,f){if(p.buffer&&ArrayBuffer.isView(p)&&p.name==="Uint8Array")return f&&(p.slice?p=p.slice():p=Array.prototype.slice.call(p)),p;if(Array.isArray(p)){if(!i(p))throw new Error("Array contains invalid value: "+p);return new Uint8Array(p)}if(n(p.length)&&i(p))return new Uint8Array(p);throw new Error("unsupported array-like object")}function o(p){return new Uint8Array(p)}function a(p,f,b,U,D){(U!=null||D!=null)&&(p.slice?p=p.slice(U,D):p=Array.prototype.slice.call(p,U,D)),f.set(p,b)}var u=function(){function p(b){var U=[],D=0;for(b=encodeURI(b);D<b.length;){var G=b.charCodeAt(D++);G===37?(U.push(parseInt(b.substr(D,2),16)),D+=2):U.push(G)}return s(U)}function f(b){for(var U=[],D=0;D<b.length;){var G=b[D];G<128?(U.push(String.fromCharCode(G)),D++):G>191&&G<224?(U.push(String.fromCharCode((G&31)<<6|b[D+1]&63)),D+=2):(U.push(String.fromCharCode((G&15)<<12|(b[D+1]&63)<<6|b[D+2]&63)),D+=3)}return U.join("")}return{toBytes:p,fromBytes:f}}(),d=function(){function p(U){for(var D=[],G=0;G<U.length;G+=2)D.push(parseInt(U.substr(G,2),16));return D}var f="0123456789abcdef";function b(U){for(var D=[],G=0;G<U.length;G++){var be=U[G];D.push(f[(be&240)>>4]+f[be&15])}return D.join("")}return{toBytes:p,fromBytes:b}}(),h={16:10,24:12,32:14},m=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],v=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],P=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],A=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],E=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],T=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],C=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],L=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],K=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],O=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],F=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],H=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],V=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ie=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function xe(p){for(var f=[],b=0;b<p.length;b+=4)f.push(p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3]);return f}var ae=function(p){if(!(this instanceof ae))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(p,!0)}),this._prepare()};ae.prototype._prepare=function(){var p=h[this.key.length];if(p==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var f=0;f<=p;f++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var b=(p+1)*4,U=this.key.length/4,D=xe(this.key),G,f=0;f<U;f++)G=f>>2,this._Ke[G][f%4]=D[f],this._Kd[p-G][f%4]=D[f];for(var be=0,le=U,ue;le<b;){if(ue=D[U-1],D[0]^=v[ue>>16&255]<<24^v[ue>>8&255]<<16^v[ue&255]<<8^v[ue>>24&255]^m[be]<<24,be+=1,U!=8)for(var f=1;f<U;f++)D[f]^=D[f-1];else{for(var f=1;f<U/2;f++)D[f]^=D[f-1];ue=D[U/2-1],D[U/2]^=v[ue&255]^v[ue>>8&255]<<8^v[ue>>16&255]<<16^v[ue>>24&255]<<24;for(var f=U/2+1;f<U;f++)D[f]^=D[f-1]}for(var f=0,At,Me;f<U&&le<b;)At=le>>2,Me=le%4,this._Ke[At][Me]=D[f],this._Kd[p-At][Me]=D[f++],le++}for(var At=1;At<p;At++)for(var Me=0;Me<4;Me++)ue=this._Kd[At][Me],this._Kd[At][Me]=F[ue>>24&255]^H[ue>>16&255]^V[ue>>8&255]^ie[ue&255]},ae.prototype.encrypt=function(p){if(p.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var f=this._Ke.length-1,b=[0,0,0,0],U=xe(p),D=0;D<4;D++)U[D]^=this._Ke[0][D];for(var G=1;G<f;G++){for(var D=0;D<4;D++)b[D]=P[U[D]>>24&255]^A[U[(D+1)%4]>>16&255]^E[U[(D+2)%4]>>8&255]^T[U[(D+3)%4]&255]^this._Ke[G][D];U=b.slice()}for(var be=o(16),le,D=0;D<4;D++)le=this._Ke[f][D],be[4*D]=(v[U[D]>>24&255]^le>>24)&255,be[4*D+1]=(v[U[(D+1)%4]>>16&255]^le>>16)&255,be[4*D+2]=(v[U[(D+2)%4]>>8&255]^le>>8)&255,be[4*D+3]=(v[U[(D+3)%4]&255]^le)&255;return be},ae.prototype.decrypt=function(p){if(p.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var f=this._Kd.length-1,b=[0,0,0,0],U=xe(p),D=0;D<4;D++)U[D]^=this._Kd[0][D];for(var G=1;G<f;G++){for(var D=0;D<4;D++)b[D]=C[U[D]>>24&255]^L[U[(D+3)%4]>>16&255]^K[U[(D+2)%4]>>8&255]^O[U[(D+1)%4]&255]^this._Kd[G][D];U=b.slice()}for(var be=o(16),le,D=0;D<4;D++)le=this._Kd[f][D],be[4*D]=(_[U[D]>>24&255]^le>>24)&255,be[4*D+1]=(_[U[(D+3)%4]>>16&255]^le>>16)&255,be[4*D+2]=(_[U[(D+2)%4]>>8&255]^le>>8)&255,be[4*D+3]=(_[U[(D+1)%4]&255]^le)&255;return be};var te=function(p){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ae(p)};te.prototype.encrypt=function(p){if(p=s(p),p.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var f=o(p.length),b=o(16),U=0;U<p.length;U+=16)a(p,b,0,U,U+16),b=this._aes.encrypt(b),a(b,f,U);return f},te.prototype.decrypt=function(p){if(p=s(p),p.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var f=o(p.length),b=o(16),U=0;U<p.length;U+=16)a(p,b,0,U,U+16),b=this._aes.decrypt(b),a(b,f,U);return f};var x=function(p,f){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(f,!0),this._aes=new ae(p)};x.prototype.encrypt=function(p){if(p=s(p),p.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var f=o(p.length),b=o(16),U=0;U<p.length;U+=16){a(p,b,0,U,U+16);for(var D=0;D<16;D++)b[D]^=this._lastCipherblock[D];this._lastCipherblock=this._aes.encrypt(b),a(this._lastCipherblock,f,U)}return f},x.prototype.decrypt=function(p){if(p=s(p),p.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var f=o(p.length),b=o(16),U=0;U<p.length;U+=16){a(p,b,0,U,U+16),b=this._aes.decrypt(b);for(var D=0;D<16;D++)f[U+D]=b[D]^this._lastCipherblock[D];a(p,this._lastCipherblock,0,U,U+16)}return f};var c=function(p,f,b){if(!(this instanceof c))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");b||(b=1),this.segmentSize=b,this._shiftRegister=s(f,!0),this._aes=new ae(p)};c.prototype.encrypt=function(p){if(p.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var f=s(p,!0),b,U=0;U<f.length;U+=this.segmentSize){b=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)f[U+D]^=b[D];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(f,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return f},c.prototype.decrypt=function(p){if(p.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var f=s(p,!0),b,U=0;U<f.length;U+=this.segmentSize){b=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)f[U+D]^=b[D];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(p,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return f};var l=function(p,f){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(f,!0),this._lastPrecipherIndex=16,this._aes=new ae(p)};l.prototype.encrypt=function(p){for(var f=s(p,!0),b=0;b<f.length;b++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),f[b]^=this._lastPrecipher[this._lastPrecipherIndex++];return f},l.prototype.decrypt=l.prototype.encrypt;var y=function(p){if(!(this instanceof y))throw Error("Counter must be instanitated with `new`");p!==0&&!p&&(p=1),typeof p=="number"?(this._counter=o(16),this.setValue(p)):this.setBytes(p)};y.prototype.setValue=function(p){if(typeof p!="number"||parseInt(p)!=p)throw new Error("invalid counter value (must be an integer)");for(var f=15;f>=0;--f)this._counter[f]=p%256,p=p>>8},y.prototype.setBytes=function(p){if(p=s(p,!0),p.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=p},y.prototype.increment=function(){for(var p=15;p>=0;p--)if(this._counter[p]===255)this._counter[p]=0;else{this._counter[p]++;break}};var w=function(p,f){if(!(this instanceof w))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",f instanceof y||(f=new y(f)),this._counter=f,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ae(p)};w.prototype.encrypt=function(p){for(var f=s(p,!0),b=0;b<f.length;b++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),f[b]^=this._remainingCounter[this._remainingCounterIndex++];return f},w.prototype.decrypt=w.prototype.encrypt;function S(p){p=s(p,!0);var f=16-p.length%16,b=o(p.length+f);a(p,b);for(var U=p.length;U<b.length;U++)b[U]=f;return b}function I(p){if(p=s(p,!0),p.length<16)throw new Error("PKCS#7 invalid length");var f=p[p.length-1];if(f>16)throw new Error("PKCS#7 padding byte out of range");for(var b=p.length-f,U=0;U<f;U++)if(p[b+U]!==f)throw new Error("PKCS#7 invalid padding byte");var D=o(b);return a(p,D,0,0,b),D}var M={AES:ae,Counter:y,ModeOfOperation:{ecb:te,cbc:x,cfb:c,ofb:l,ctr:w},utils:{hex:d,utf8:u},padding:{pkcs7:{pad:S,strip:I}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};r.exports=M})()})(wx);var Vi=wx.exports;const vx="json-wallets/5.7.0";function So(r){return typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ge(r)}function ac(r,e){for(r=String(r);r.length<e;)r="0"+r;return r}function D0(r){return typeof r=="string"?Lr(r,rs.NFKC):ge(r)}function Mr(r,e){let t=r;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const o in t)if(o.toLowerCase()===n[i]){s=t[o];break}if(s===null)return null;t=s}return t}function mS(r){const e=ge(r);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=me(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const bS=new j(vx);class xS extends Fo{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function _x(r,e){const t=JSON.parse(r);e=D0(e);const n=tr(Mr(t,"ethaddr")),i=So(Mr(t,"encseed"));(!i||i.length%16!==0)&&bS.throwArgumentError("invalid encseed","json",r);const s=ge(O0(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),u=new Vi.ModeOfOperation.cbc(s,o),d=Vi.padding.pkcs7.strip(ge(u.decrypt(a)));let h="";for(let _=0;_<d.length;_++)h+=String.fromCharCode(d[_]);const m=Lr(h),v=ir(m);return new xS({_isCrowdsaleAccount:!0,address:n,privateKey:v})}function U0(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return e.encseed&&e.ethaddr}function F0(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function wS(r){if(U0(r))try{return tr(JSON.parse(r).ethaddr)}catch{return null}if(F0(r))try{return tr(JSON.parse(r).address)}catch{return null}return null}var Ax={exports:{}};(function(r,e){(function(t){function i(A){const E=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let T=1779033703,C=3144134277,L=1013904242,K=2773480762,O=1359893119,F=2600822924,H=528734635,V=1541459225;const ie=new Uint32Array(64);function xe(w){let S=0,I=w.length;for(;I>=64;){let M=T,p=C,f=L,b=K,U=O,D=F,G=H,be=V,le,ue,At,Me,De;for(ue=0;ue<16;ue++)At=S+ue*4,ie[ue]=(w[At]&255)<<24|(w[At+1]&255)<<16|(w[At+2]&255)<<8|w[At+3]&255;for(ue=16;ue<64;ue++)le=ie[ue-2],Me=(le>>>17|le<<32-17)^(le>>>19|le<<32-19)^le>>>10,le=ie[ue-15],De=(le>>>7|le<<32-7)^(le>>>18|le<<32-18)^le>>>3,ie[ue]=(Me+ie[ue-7]|0)+(De+ie[ue-16]|0)|0;for(ue=0;ue<64;ue++)Me=(((U>>>6|U<<32-6)^(U>>>11|U<<32-11)^(U>>>25|U<<32-25))+(U&D^~U&G)|0)+(be+(E[ue]+ie[ue]|0)|0)|0,De=((M>>>2|M<<32-2)^(M>>>13|M<<32-13)^(M>>>22|M<<32-22))+(M&p^M&f^p&f)|0,be=G,G=D,D=U,U=b+Me|0,b=f,f=p,p=M,M=Me+De|0;T=T+M|0,C=C+p|0,L=L+f|0,K=K+b|0,O=O+U|0,F=F+D|0,H=H+G|0,V=V+be|0,S+=64,I-=64}}xe(A);let ae,te=A.length%64,x=A.length/536870912|0,c=A.length<<3,l=te<56?56:120,y=A.slice(A.length-te,A.length);for(y.push(128),ae=te+1;ae<l;ae++)y.push(0);return y.push(x>>>24&255),y.push(x>>>16&255),y.push(x>>>8&255),y.push(x>>>0&255),y.push(c>>>24&255),y.push(c>>>16&255),y.push(c>>>8&255),y.push(c>>>0&255),xe(y),[T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,K>>>24&255,K>>>16&255,K>>>8&255,K>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255]}function s(A,E,T){A=A.length<=64?A:i(A);const C=64+E.length+4,L=new Array(C),K=new Array(64);let O,F=[];for(O=0;O<64;O++)L[O]=54;for(O=0;O<A.length;O++)L[O]^=A[O];for(O=0;O<E.length;O++)L[64+O]=E[O];for(O=C-4;O<C;O++)L[O]=0;for(O=0;O<64;O++)K[O]=92;for(O=0;O<A.length;O++)K[O]^=A[O];function H(){for(let V=C-1;V>=C-4;V--){if(L[V]++,L[V]<=255)return;L[V]=0}}for(;T>=32;)H(),F=F.concat(i(K.concat(i(L)))),T-=32;return T>0&&(H(),F=F.concat(i(K.concat(i(L))).slice(0,T))),F}function o(A,E,T,C,L){let K;for(h(A,(2*T-1)*16,L,0,16),K=0;K<2*T;K++)d(A,K*16,L,16),u(L,C),h(L,0,A,E+K*16,16);for(K=0;K<T;K++)h(A,E+K*2*16,A,K*16,16);for(K=0;K<T;K++)h(A,E+(K*2+1)*16,A,(K+T)*16,16)}function a(A,E){return A<<E|A>>>32-E}function u(A,E){h(A,0,E,0,16);for(let T=8;T>0;T-=2)E[4]^=a(E[0]+E[12],7),E[8]^=a(E[4]+E[0],9),E[12]^=a(E[8]+E[4],13),E[0]^=a(E[12]+E[8],18),E[9]^=a(E[5]+E[1],7),E[13]^=a(E[9]+E[5],9),E[1]^=a(E[13]+E[9],13),E[5]^=a(E[1]+E[13],18),E[14]^=a(E[10]+E[6],7),E[2]^=a(E[14]+E[10],9),E[6]^=a(E[2]+E[14],13),E[10]^=a(E[6]+E[2],18),E[3]^=a(E[15]+E[11],7),E[7]^=a(E[3]+E[15],9),E[11]^=a(E[7]+E[3],13),E[15]^=a(E[11]+E[7],18),E[1]^=a(E[0]+E[3],7),E[2]^=a(E[1]+E[0],9),E[3]^=a(E[2]+E[1],13),E[0]^=a(E[3]+E[2],18),E[6]^=a(E[5]+E[4],7),E[7]^=a(E[6]+E[5],9),E[4]^=a(E[7]+E[6],13),E[5]^=a(E[4]+E[7],18),E[11]^=a(E[10]+E[9],7),E[8]^=a(E[11]+E[10],9),E[9]^=a(E[8]+E[11],13),E[10]^=a(E[9]+E[8],18),E[12]^=a(E[15]+E[14],7),E[13]^=a(E[12]+E[15],9),E[14]^=a(E[13]+E[12],13),E[15]^=a(E[14]+E[13],18);for(let T=0;T<16;++T)A[T]+=E[T]}function d(A,E,T,C){for(let L=0;L<C;L++)T[L]^=A[E+L]}function h(A,E,T,C,L){for(;L--;)T[C++]=A[E++]}function m(A){if(!A||typeof A.length!="number")return!1;for(let E=0;E<A.length;E++){const T=A[E];if(typeof T!="number"||T%1||T<0||T>=256)return!1}return!0}function v(A,E){if(typeof A!="number"||A%1)throw new Error("invalid "+E);return A}function _(A,E,T,C,L,K,O){if(T=v(T,"N"),C=v(C,"r"),L=v(L,"p"),K=v(K,"dkLen"),T===0||(T&T-1)!==0)throw new Error("N must be power of 2");if(T>2147483647/128/C)throw new Error("N too large");if(C>2147483647/128/L)throw new Error("r too large");if(!m(A))throw new Error("password must be an array or buffer");if(A=Array.prototype.slice.call(A),!m(E))throw new Error("salt must be an array or buffer");E=Array.prototype.slice.call(E);let F=s(A,E,L*128*C);const H=new Uint32Array(L*32*C);for(let U=0;U<H.length;U++){const D=U*4;H[U]=(F[D+3]&255)<<24|(F[D+2]&255)<<16|(F[D+1]&255)<<8|(F[D+0]&255)<<0}const V=new Uint32Array(64*C),ie=new Uint32Array(32*C*T),xe=32*C,ae=new Uint32Array(16),te=new Uint32Array(16),x=L*T*2;let c=0,l=null,y=!1,w=0,S=0,I,M;const p=O?parseInt(1e3/C):4294967295,f=typeof setImmediate<"u"?setImmediate:setTimeout,b=function(){if(y)return O(new Error("cancelled"),c/x);let U;switch(w){case 0:M=S*32*C,h(H,M,V,0,xe),w=1,I=0;case 1:U=T-I,U>p&&(U=p);for(let G=0;G<U;G++)h(V,0,ie,(I+G)*xe,xe),o(V,xe,C,ae,te);if(I+=U,c+=U,O){const G=parseInt(1e3*c/x);if(G!==l){if(y=O(null,c/x),y)break;l=G}}if(I<T)break;I=0,w=2;case 2:U=T-I,U>p&&(U=p);for(let G=0;G<U;G++){const be=(2*C-1)*16,le=V[be]&T-1;d(ie,le*xe,V,xe),o(V,xe,C,ae,te)}if(I+=U,c+=U,O){const G=parseInt(1e3*c/x);if(G!==l){if(y=O(null,c/x),y)break;l=G}}if(I<T)break;if(h(V,0,H,M,xe),S++,S<L){w=0;break}F=[];for(let G=0;G<H.length;G++)F.push(H[G]>>0&255),F.push(H[G]>>8&255),F.push(H[G]>>16&255),F.push(H[G]>>24&255);const D=s(A,F,K);return O&&O(null,1,D),D}O&&f(b)};if(!O)for(;;){const U=b();if(U!=null)return U}b()}const P={scrypt:function(A,E,T,C,L,K,O){return new Promise(function(F,H){let V=0;O&&O(0),_(A,E,T,C,L,K,function(ie,xe,ae){if(ie)H(ie);else if(ae)O&&V!==1&&O(1),F(new Uint8Array(ae));else if(O&&xe!==V)return V=xe,O(xe)})})},syncScrypt:function(A,E,T,C,L,K){return new Uint8Array(_(A,E,T,C,L,K))}};r.exports=P})()})(Ax);var K0=Ax.exports,vS=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const ah=new j(vx);function iy(r){return r!=null&&r.mnemonic&&r.mnemonic.phrase}class _S extends Fo{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function AS(r,e,t){if(Mr(r,"crypto/cipher")==="aes-128-ctr"){const i=So(Mr(r,"crypto/cipherparams/iv")),s=new Vi.Counter(i),o=new Vi.ModeOfOperation.ctr(e,s);return ge(o.decrypt(t))}return null}function Ex(r,e){const t=So(Mr(r,"crypto/ciphertext"));if(me(ir(ur([e.slice(16,32),t]))).substring(2)!==Mr(r,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=AS(r,e.slice(0,16),t);i||ah.throwError("unsupported cipher",j.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),o=Ws(i);if(r.address){let u=r.address.toLowerCase();if(u.substring(0,2)!=="0x"&&(u="0x"+u),tr(u)!==o)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:o,privateKey:me(i)};if(Mr(r,"x-ethers/version")==="0.1"){const u=So(Mr(r,"x-ethers/mnemonicCiphertext")),d=So(Mr(r,"x-ethers/mnemonicCounter")),h=new Vi.Counter(d),m=new Vi.ModeOfOperation.ctr(s,h),v=Mr(r,"x-ethers/path")||Ma,_=Mr(r,"x-ethers/locale")||"en",P=ge(m.decrypt(u));try{const A=yl(P,_),E=Jn.fromMnemonic(A,null,_).derivePath(v);if(E.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=E.mnemonic}catch(A){if(A.code!==j.errors.INVALID_ARGUMENT||A.argument!=="wordlist")throw A}}return new _S(a)}function Sx(r,e,t,n,i){return ge(O0(r,e,t,n,i))}function ES(r,e,t,n,i){return Promise.resolve(Sx(r,e,t,n,i))}function kx(r,e,t,n,i){const s=D0(e),o=Mr(r,"crypto/kdf");if(o&&typeof o=="string"){const a=function(u,d){return ah.throwArgumentError("invalid key-derivation function parameters",u,d)};if(o.toLowerCase()==="scrypt"){const u=So(Mr(r,"crypto/kdfparams/salt")),d=parseInt(Mr(r,"crypto/kdfparams/n")),h=parseInt(Mr(r,"crypto/kdfparams/r")),m=parseInt(Mr(r,"crypto/kdfparams/p"));(!d||!h||!m)&&a("kdf",o),(d&d-1)!==0&&a("N",d);const v=parseInt(Mr(r,"crypto/kdfparams/dklen"));return v!==32&&a("dklen",v),n(s,u,d,h,m,64,i)}else if(o.toLowerCase()==="pbkdf2"){const u=So(Mr(r,"crypto/kdfparams/salt"));let d=null;const h=Mr(r,"crypto/kdfparams/prf");h==="hmac-sha256"?d="sha256":h==="hmac-sha512"?d="sha512":a("prf",h);const m=parseInt(Mr(r,"crypto/kdfparams/c")),v=parseInt(Mr(r,"crypto/kdfparams/dklen"));return v!==32&&a("dklen",v),t(s,u,m,v,d)}}return ah.throwArgumentError("unsupported key-derivation function","kdf",o)}function SS(r,e){const t=JSON.parse(r),n=kx(t,e,Sx,K0.syncScrypt);return Ex(t,n)}function kS(r,e,t){return vS(this,void 0,void 0,function*(){const n=JSON.parse(r),i=yield kx(n,e,ES,K0.scrypt,t);return Ex(n,i)})}function TS(r,e,t,n){try{if(tr(r.address)!==Ws(r.privateKey))throw new Error("address/privateKey mismatch");if(iy(r)){const E=r.mnemonic;if(Jn.fromMnemonic(E.phrase,null,E.locale).derivePath(E.path||Ma).privateKey!=r.privateKey)throw new Error("mnemonic mismatch")}}catch(E){return Promise.reject(E)}typeof t=="function"&&!n&&(n=t,t={}),t||(t={});const i=ge(r.privateKey),s=D0(e);let o=null,a=null,u=null;if(iy(r)){const E=r.mnemonic;o=ge(gl(E.phrase,E.locale||"en")),a=E.path||Ma,u=E.locale||"en"}let d=t.client;d||(d="ethers.js");let h=null;t.salt?h=ge(t.salt):h=ma(32);let m=null;if(t.iv){if(m=ge(t.iv),m.length!==16)throw new Error("invalid iv")}else m=ma(16);let v=null;if(t.uuid){if(v=ge(t.uuid),v.length!==16)throw new Error("invalid uuid")}else v=ma(16);let _=1<<17,P=8,A=1;return t.scrypt&&(t.scrypt.N&&(_=t.scrypt.N),t.scrypt.r&&(P=t.scrypt.r),t.scrypt.p&&(A=t.scrypt.p)),K0.scrypt(s,h,_,P,A,64,n).then(E=>{E=ge(E);const T=E.slice(0,16),C=E.slice(16,32),L=E.slice(32,64),K=new Vi.Counter(m),O=new Vi.ModeOfOperation.ctr(T,K),F=ge(O.encrypt(i)),H=ir(ur([C,F])),V={address:r.address.substring(2).toLowerCase(),id:mS(v),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:me(m).substring(2)},ciphertext:me(F).substring(2),kdf:"scrypt",kdfparams:{salt:me(h).substring(2),n:_,dklen:32,p:A,r:P},mac:H.substring(2)}};if(o){const ie=ma(16),xe=new Vi.Counter(ie),ae=new Vi.ModeOfOperation.ctr(L,xe),te=ge(ae.encrypt(o)),x=new Date,c=x.getUTCFullYear()+"-"+ac(x.getUTCMonth()+1,2)+"-"+ac(x.getUTCDate(),2)+"T"+ac(x.getUTCHours(),2)+"-"+ac(x.getUTCMinutes(),2)+"-"+ac(x.getUTCSeconds(),2)+".0Z";V["x-ethers"]={client:d,gethFilename:"UTC--"+c+"--"+V.address,mnemonicCounter:me(ie).substring(2),mnemonicCiphertext:me(te).substring(2),path:a,locale:u,version:"0.1"}}return JSON.stringify(V)})}function IS(r,e,t){if(U0(r)){t&&t(0);const n=_x(r,e);return t&&t(1),Promise.resolve(n)}return F0(r)?kS(r,e,t):Promise.reject(new Error("invalid JSON wallet"))}function PS(r,e){if(U0(r))return _x(r,e);if(F0(r))return SS(r,e);throw new Error("invalid JSON wallet")}const RS="wallet/5.7.0";var sy=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const ra=new j(RS);function CS(r){return r!=null&&kt(r.privateKey,32)&&r.address!=null}function MS(r){const e=r.mnemonic;return e&&e.phrase}class Fs extends Ps{constructor(e,t){if(super(),CS(e)){const n=new Eo(e.privateKey);if(ee(this,"_signingKey",()=>n),ee(this,"address",Ws(this.publicKey)),this.address!==tr(e.address)&&ra.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),MS(e)){const i=e.mnemonic;ee(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Ma,locale:i.locale||"en"}));const s=this.mnemonic,o=Jn.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);Ws(o.privateKey)!==this.address&&ra.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ee(this,"_mnemonic",()=>null)}else{if(Eo.isSigningKey(e))e.curve!=="secp256k1"&&ra.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ee(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new Eo(e);ee(this,"_signingKey",()=>n)}ee(this,"_mnemonic",()=>null),ee(this,"address",Ws(this.publicKey))}t&&!$o.isProvider(t)&&ra.throwArgumentError("invalid provider","provider",t),ee(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Fs(this,e)}signTransaction(e){return Sr(e).then(t=>{t.from!=null&&(tr(t.from)!==this.address&&ra.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const n=this._signingKey().signDigest(ir(sh(t)));return sh(t,n)})}signMessage(e){return sy(this,void 0,void 0,function*(){return Zd(this._signingKey().signDigest(I0(e)))})}_signTypedData(e,t,n){return sy(this,void 0,void 0,function*(){const i=yield en.resolveNames(e,t,n,s=>(this.provider==null&&ra.throwError("cannot resolve ENS names without a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return Zd(this._signingKey().signDigest(en.hash(i.domain,t,i.value)))})}encrypt(e,t,n){if(typeof t=="function"&&!n&&(n=t,t={}),n&&typeof n!="function")throw new Error("invalid callback");return t||(t={}),TS(this,e,t,n)}static createRandom(e){let t=ma(16);e||(e={}),e.extraEntropy&&(t=ge(Br(ir(ur([t,e.extraEntropy])),0,16)));const n=yl(t,e.locale);return Fs.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,t,n){return IS(e,t,n).then(i=>new Fs(i))}static fromEncryptedJsonSync(e,t){return new Fs(PS(e,t))}static fromMnemonic(e,t,n){return t||(t=Ma),new Fs(Jn.fromMnemonic(e,null,n).derivePath(t))}}function BS(r,e){return gu(I0(r),e)}function NS(r,e,t,n){return gu(en.hash(r,e,t),n)}const OS="networks/5.7.1",oy=new j(OS);function LS(r){return r&&typeof r.renetwork=="function"}function ms(r){const e=function(t,n){n==null&&(n={});const i=[];if(t.InfuraProvider&&n.infura!=="-")try{i.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{i.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{i.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(r,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(r,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:r==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return ms(t)},e}function Nf(r,e){const t=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return Nf(r,n)},t}const ay={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ms("homestead")},cy={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ms("ropsten")},uy={chainId:63,name:"classicMordor",_defaultProvider:Nf("https://www.ethercluster.com/mordor","classicMordor")},Ku={unspecified:{chainId:0,name:"unspecified"},homestead:ay,mainnet:ay,morden:{chainId:2,name:"morden"},ropsten:cy,testnet:cy,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ms("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ms("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ms("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ms("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Nf("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:uy,classicTestnet:uy,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Nf("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ms("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ms("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function $0(r){if(r==null)return null;if(typeof r=="number"){for(const n in Ku){const i=Ku[n];if(i.chainId===r)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=Ku[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Ku[r.name];if(!e)return typeof r.chainId!="number"&&oy.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&oy.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(LS(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}const DS="web/5.7.1";var US=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};function FS(r,e){return US(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const n=yield fetch(r,t),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ge(new Uint8Array(i))}})}var KS=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const Ai=new j(DS);function fy(r){return new Promise(e=>{setTimeout(e,r)})}function Ns(r,e){if(r==null)return null;if(typeof r=="string")return r;if(lu(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Ko(r)}catch{}return me(r)}return r}function $S(r){return Lr(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Tx(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;Ai.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof r=="object"?r.throttleCallback:null,s=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;Ai.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof r=="object"?!!r.errorPassThrough:!1,a={};let u=null;const d={method:"GET"};let h=!1,m=2*60*1e3;if(typeof r=="string")u=r;else if(typeof r=="object"){if((r==null||r.url==null)&&Ai.throwArgumentError("missing URL","connection.url",r),u=r.url,typeof r.timeout=="number"&&r.timeout>0&&(m=r.timeout),r.headers)for(const T in r.headers)a[T.toLowerCase()]={key:T,value:String(r.headers[T])},["if-none-match","if-modified-since"].indexOf(T.toLowerCase())>=0&&(h=!0);if(d.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){u.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&Ai.throwError("basic authentication requires a secure https url",j.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:r.user,password:"[REDACTED]"});const T=r.user+":"+r.password;a.authorization={key:"Authorization",value:"Basic "+k0(Lr(T))}}r.skipFetchSetup!=null&&(d.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(d.fetchOptions=dr(r.fetchOptions))}const v=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),_=u?u.match(v):null;if(_)try{const T={statusCode:200,statusMessage:"OK",headers:{"content-type":_[1]||"text/plain"},body:_[2]?S0(_[3]):$S(_[3])};let C=T.body;return t&&(C=t(T.body,T)),Promise.resolve(C)}catch(T){Ai.throwError("processing response error",j.errors.SERVER_ERROR,{body:Ns(_[1],_[2]),error:T,requestBody:null,requestMethod:"GET",url:u})}e&&(d.method="POST",d.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const P={};Object.keys(a).forEach(T=>{const C=a[T];P[C.key]=C.value}),d.headers=P;const A=function(){let T=null;return{promise:new Promise(function(K,O){m&&(T=setTimeout(()=>{T!=null&&(T=null,O(Ai.makeError("timeout",j.errors.TIMEOUT,{requestBody:Ns(d.body,P["content-type"]),requestMethod:d.method,timeout:m,url:u})))},m))}),cancel:function(){T!=null&&(clearTimeout(T),T=null)}}}(),E=function(){return KS(this,void 0,void 0,function*(){for(let T=0;T<n;T++){let C=null;try{if(C=yield FS(u,d),T<n){if(C.statusCode===301||C.statusCode===302){const K=C.headers.location||"";if(d.method==="GET"&&K.match(/^https:/)){u=C.headers.location;continue}}else if(C.statusCode===429){let K=!0;if(i&&(K=yield i(T,u)),K){let O=0;const F=C.headers["retry-after"];typeof F=="string"&&F.match(/^[1-9][0-9]*$/)?O=parseInt(F)*1e3:O=s*parseInt(String(Math.random()*Math.pow(2,T))),yield fy(O);continue}}}}catch(K){C=K.response,C==null&&(A.cancel(),Ai.throwError("missing response",j.errors.SERVER_ERROR,{requestBody:Ns(d.body,P["content-type"]),requestMethod:d.method,serverError:K,url:u}))}let L=C.body;if(h&&C.statusCode===304?L=null:!o&&(C.statusCode<200||C.statusCode>=300)&&(A.cancel(),Ai.throwError("bad response",j.errors.SERVER_ERROR,{status:C.statusCode,headers:C.headers,body:Ns(L,C.headers?C.headers["content-type"]:null),requestBody:Ns(d.body,P["content-type"]),requestMethod:d.method,url:u})),t)try{const K=yield t(L,C);return A.cancel(),K}catch(K){if(K.throttleRetry&&T<n){let O=!0;if(i&&(O=yield i(T,u)),O){const F=s*parseInt(String(Math.random()*Math.pow(2,T)));yield fy(F);continue}}A.cancel(),Ai.throwError("processing response error",j.errors.SERVER_ERROR,{body:Ns(L,C.headers?C.headers["content-type"]:null),error:K,requestBody:Ns(d.body,P["content-type"]),requestMethod:d.method,url:u})}return A.cancel(),L}return Ai.throwError("failed response",j.errors.SERVER_ERROR,{requestBody:Ns(d.body,P["content-type"]),requestMethod:d.method,url:u})})}();return Promise.race([A.promise,E])}function Ya(r,e,t){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(Ko(s))}catch(u){Ai.throwError("invalid JSON",j.errors.SERVER_ERROR,{body:s,error:u})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=Lr(e);const s=typeof r=="string"?{url:r}:dr(r);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=dr(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},r=s}return Tx(r,i,n)}function vo(r,e){return e||(e={}),e=dr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let u=0;function d(){return r().then(function(h){if(h!==void 0)o()&&t(h);else if(e.oncePoll)e.oncePoll.once("poll",d);else if(e.onceBlock)e.onceBlock.once("block",d);else if(!s){if(u++,u>a){o()&&n(new Error("retry limit reached"));return}let m=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));m<e.floor&&(m=e.floor),m>e.ceiling&&(m=e.ceiling),setTimeout(d,m)}return null},function(h){o()&&n(h)})}d()})}var Of="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ch={};for(var $u=0;$u<Of.length;$u++){var ud=Of.charAt($u);if(ch[ud]!==void 0)throw new TypeError(ud+" is ambiguous");ch[ud]=$u}function Ea(r){var e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Ix(r){for(var e=1,t=0;t<r.length;++t){var n=r.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+r+")";e=Ea(e)^n>>5}for(e=Ea(e),t=0;t<r.length;++t){var i=r.charCodeAt(t);e=Ea(e)^i&31}return e}function jS(r,e,t){if(t=t||90,r.length+7+e.length>t)throw new TypeError("Exceeds length limit");r=r.toLowerCase();var n=Ix(r);if(typeof n=="string")throw new Error(n);for(var i=r+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5!==0)throw new Error("Non 5-bit word");n=Ea(n)^o,i+=Of.charAt(o)}for(s=0;s<6;++s)n=Ea(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=Of.charAt(a)}return i}function Px(r,e){if(e=e||90,r.length<8)return r+" too short";if(r.length>e)return"Exceeds length limit";var t=r.toLowerCase(),n=r.toUpperCase();if(r!==t&&r!==n)return"Mixed-case string "+r;r=t;var i=r.lastIndexOf("1");if(i===-1)return"No separator character for "+r;if(i===0)return"Missing prefix for "+r;var s=r.slice(0,i),o=r.slice(i+1);if(o.length<6)return"Data too short";var a=Ix(s);if(typeof a=="string")return a;for(var u=[],d=0;d<o.length;++d){var h=o.charAt(d),m=ch[h];if(m===void 0)return"Unknown character "+h;a=Ea(a)^m,!(d+6>=o.length)&&u.push(m)}return a!==1?"Invalid checksum for "+r:{prefix:s,words:u}}function zS(){var r=Px.apply(null,arguments);if(typeof r=="object")return r}function qS(r){var e=Px.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function ml(r,e,t,n){for(var i=0,s=0,o=(1<<t)-1,a=[],u=0;u<r.length;++u)for(i=i<<e|r[u],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function HS(r){var e=ml(r,8,5,!0);if(Array.isArray(e))return e}function WS(r){var e=ml(r,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function GS(r){var e=ml(r,5,8,!1);if(Array.isArray(e))return e}function VS(r){var e=ml(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var JS={decodeUnsafe:zS,decode:qS,encode:jS,toWordsUnsafe:HS,toWords:WS,fromWordsUnsafe:GS,fromWords:VS},ly=JS;const _n="providers/5.7.2",cc=new j(_n);class Be{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),u=this.number.bind(this),d=this.type.bind(this),h=m=>this.data(m,!0);return e.transaction={hash:o,type:d,accessList:Be.allowNull(this.accessList.bind(this),null),blockHash:Be.allowNull(o,null),blockNumber:Be.allowNull(u,null),transactionIndex:Be.allowNull(u,null),confirmations:Be.allowNull(u,null),from:t,gasPrice:Be.allowNull(n),maxPriorityFeePerGas:Be.allowNull(n),maxFeePerGas:Be.allowNull(n),gasLimit:n,to:Be.allowNull(t,null),value:n,nonce:u,data:s,r:Be.allowNull(this.uint256),s:Be.allowNull(this.uint256),v:Be.allowNull(u),creates:Be.allowNull(t,null),raw:Be.allowNull(s)},e.transactionRequest={from:Be.allowNull(t),nonce:Be.allowNull(u),gasLimit:Be.allowNull(n),gasPrice:Be.allowNull(n),maxPriorityFeePerGas:Be.allowNull(n),maxFeePerGas:Be.allowNull(n),to:Be.allowNull(t),value:Be.allowNull(n),data:Be.allowNull(h),type:Be.allowNull(u),accessList:Be.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:u,blockNumber:u,transactionHash:o,address:t,topics:Be.arrayOf(o),data:s,logIndex:u,blockHash:o},e.receipt={to:Be.allowNull(this.address,null),from:Be.allowNull(this.address,null),contractAddress:Be.allowNull(t,null),transactionIndex:u,root:Be.allowNull(a),gasUsed:n,logsBloom:Be.allowNull(s),blockHash:o,transactionHash:o,logs:Be.arrayOf(this.receiptLog.bind(this)),blockNumber:u,confirmations:Be.allowNull(u,null),cumulativeGasUsed:n,effectiveGasPrice:Be.allowNull(n),status:Be.allowNull(u),type:d},e.block={hash:Be.allowNull(o),parentHash:o,number:u,timestamp:u,nonce:Be.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Be.allowNull(t),extraData:s,transactions:Be.allowNull(Be.arrayOf(o)),baseFeePerGas:Be.allowNull(n)},e.blockWithTransactions=dr(e.block),e.blockWithTransactions.transactions=Be.allowNull(Be.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Be.allowNull(i,void 0),toBlock:Be.allowNull(i,void 0),blockHash:Be.allowNull(o,void 0),address:Be.allowNull(t,void 0),topics:Be.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Be.allowNull(u),blockHash:Be.allowNull(o),transactionIndex:u,removed:Be.allowNull(this.boolean.bind(this)),address:t,data:Be.allowFalsish(s,"0x"),topics:Be.arrayOf(o),transactionHash:o,logIndex:u},e}accessList(e){return uo(e||[])}number(e){return e==="0x"?0:pe.from(e).toNumber()}type(e){return e==="0x"||e==null?0:pe.from(e).toNumber()}bigNumber(e){return pe.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),kt(e))?e.toLowerCase():cc.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return tr(e)}callAddress(e){if(!kt(e,32))return null;const t=tr(Br(e,12));return t===M1?null:t}contractAddress(e){return fl(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||kt(e))return du(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return ts(n)!==32?cc.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=pe.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!kt(e))throw new Error("invalid uint256");return fr(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Be.check(t,e);return i._difficulty=n==null?null:pe.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Be.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&pe.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Be.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;kt(n)&&(n=pe.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),kt(n)&&(n=pe.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return ux(e)}receiptLog(e){return Be.check(this.formats.receiptLog,e)}receipt(e){const t=Be.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=pe.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&cc.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):cc.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&cc.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Be.check(this.formats.filter,e)}filterLog(e){return Be.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(i){n.push(e(i))}),n}}}function Rx(r){return r&&typeof r.isCommunityResource=="function"}function uh(r){return Rx(r)&&r.isCommunityResource()}let dy=!1;function yu(){dy||(dy=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var _t=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const Bt=new j(_n),YS=10;function hy(r){return r==null?"null":(ts(r)!==32&&Bt.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function py(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[hy(i)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return hy(e)}).join("&")}function XS(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function na(r){if(typeof r=="string"){if(r=r.toLowerCase(),ts(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+py(r);if(IE.isForkEvent(r))throw Bt.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+py(r.topics||[])}throw new Error("invalid event - "+r)}function uc(){return new Date().getTime()}function gy(r){return new Promise(e=>{setTimeout(e,r)})}const ZS=["block","network","pending","poll"];class QS{constructor(e,t,n){ee(this,"tag",e),ee(this,"listener",t),ee(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=XS(e[2]),i={};return n.length>0&&(i.topics=n),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||ZS.indexOf(this.tag)>=0}}const ek={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function fd(r){return fr(pe.from(r).toHexString(),32)}function yy(r){return Ra.encode(ur([r,Br(Ss(Ss(r)),0,4)]))}const Cx=new RegExp("^(ipfs)://(.*)$","i"),my=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Cx,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function lf(r,e){try{return Ko(Vc(r,e))}catch{}return null}function Vc(r,e){if(r==="0x")return null;const t=pe.from(Br(r,e,e+32)).toNumber(),n=pe.from(Br(r,t,t+32)).toNumber();return Br(r,t+32,t+32+n)}function ld(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):Bt.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function by(r){const e=ge(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function tk(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function Mx(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const i=ge(r[n]);e[n]=by(t),e.push(by(i.length)),e.push(tk(i)),t+=32+Math.ceil(i.length/32)*32}return En(e)}class fh{constructor(e,t,n,i){ee(this,"provider",e),ee(this,"name",n),ee(this,"address",e.formatter.address(t)),ee(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>pe.from(e).eq(1)).catch(e=>{if(e.code===j.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return _t(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:En([e,Pc(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=En(["0x9061b923",Mx([J1(this.name),n.data])]));try{let s=yield this.provider.call(n);return ge(s).length%32===4&&Bt.throwError("resolver threw error",j.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Vc(s,0)),s}catch(s){if(s.code===j.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return _t(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?Vc(n,0):null})}_getAddress(e,t){const n=ek[String(e)];if(n==null&&Bt.throwError(`unsupported coin type: ${e}`,j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const i=ge(t);if(n.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return yy(ur([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return yy(ur([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=ly.toWords(i.slice(2));return a.unshift(o),ly.encode(n.prefix,a)}}return null}getAddress(e){return _t(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===v0?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===j.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",fd(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&Bt.throwError("invalid or unsupported coin data",j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return _t(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<my.length;n++){const i=t.match(my[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:ld(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),u=(i[2]||"").split("/");if(u.length!==2)return null;const d=yield this.provider.formatter.address(u[0]),h=fr(pe.from(u[1]).toHexString(),32);if(s==="erc721"){const A=this.provider.formatter.callAddress(yield this.provider.call({to:d,data:En(["0x6352211e",h])}));if(a!==A)return null;e.push({type:"owner",content:A})}else if(s==="erc1155"){const A=pe.from(yield this.provider.call({to:d,data:En(["0x00fdd58e",fr(a,32),h])}));if(A.isZero())return null;e.push({type:"balance",content:A.toString()})}const m={to:this.provider.formatter.address(u[0]),data:En([o,h])};let v=lf(yield this.provider.call(m),0);if(v==null)return null;e.push({type:"metadata-url-base",content:v}),s==="erc1155"&&(v=v.replace("{id}",h.substring(2)),e.push({type:"metadata-url-expanded",content:v})),v.match(/^ipfs:/i)&&(v=ld(v)),e.push({type:"metadata-url",content:v});const _=yield Ya(v);if(!_)return null;e.push({type:"metadata",content:JSON.stringify(_)});let P=_.image;if(typeof P!="string")return null;if(!P.match(/^(https:\/\/|data:)/i)){if(P.match(Cx)==null)return null;e.push({type:"url-ipfs",content:P}),P=ld(P)}return e.push({type:"url",content:P}),{linkage:e,url:P}}}}}catch{}return null})}getContentHash(){return _t(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+Ra.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ra.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"},a=k0("0x"+s[1]).replace(/[=+\/]/g,u=>o[u]);return"sia://"+a}return Bt.throwError("invalid or unsupported content hash data",j.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return _t(this,void 0,void 0,function*(){let t=Lr(e);t=ur([fd(64),fd(t.length),t]),t.length%32!==0&&(t=ur([t,fr("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",me(t));return n==null||n==="0x"?null:Ko(n)})}}let dd=null,rk=1;class bl extends $o{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),ee(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=nn(new.target,"getNetwork")(e);t?(ee(this,"_network",t),this.emit("network",t,null)):Bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return _t(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Bt.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ee(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return vo(()=>this._ready().then(e=>e,e=>{if(!(e.code===j.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return dd==null&&(dd=new Be),dd}static getNetwork(e){return $0(e??"homestead")}ccipReadFetch(e,t,n){return _t(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const u=n[a],d=u.replace("{sender}",i).replace("{data}",s),h=u.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),m=yield Ya({url:d,errorPassThrough:!0},h,(_,P)=>(_.status=P.statusCode,_));if(m.data)return m.data;const v=m.message||"unknown error";if(m.status>=400&&m.status<500)return Bt.throwError(`response not found during CCIP fetch: ${v}`,j.errors.SERVER_ERROR,{url:u,errorMessage:v});o.push(v)}return Bt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,j.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return _t(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(uc()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=uc(),n=Sr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=uc();return i=pe.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return _t(this,void 0,void 0,function*(){const e=rk++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Bt.makeError("network block skew detected",j.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(u=>{i._inflight=!1,u.length!==0&&u.forEach(d=>{d.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=d.blockNumber),this._emitted["b:"+d.blockHash]=d.blockNumber,this._emitted["t:"+d.transactionHash]=d.blockNumber,this.emit(s,d)})}).catch(u=>{this.emit("error",u),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return _t(this,void 0,void 0,function*(){return Bt.throwError("provider does not support network detection",j.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return _t(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield gy(0),this._network;const n=Bt.makeError("underlying network changed",j.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=uc();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=uc(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return _t(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,i){return _t(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const u=[];let d=!1;const h=function(){return d?!0:(d=!0,u.forEach(v=>{v()}),!1)},m=v=>{v.confirmations<t||h()||o(v)};if(this.on(e,m),u.push(()=>{this.removeListener(e,m)}),i){let v=i.startBlock,_=null;const P=A=>_t(this,void 0,void 0,function*(){d||(yield gy(1e3),this.getTransactionCount(i.from).then(E=>_t(this,void 0,void 0,function*(){if(!d){if(E<=i.nonce)v=A;else{{const T=yield this.getTransaction(e);if(T&&T.blockNumber!=null)return}for(_==null&&(_=v-3,_<i.startBlock&&(_=i.startBlock));_<=A;){if(d)return;const T=yield this.getBlockWithTransactions(_);for(let C=0;C<T.transactions.length;C++){const L=T.transactions[C];if(L.hash===e)return;if(L.from===i.from&&L.nonce===i.nonce){if(d)return;const K=yield this.waitForTransaction(L.hash,t);if(h())return;let O="replaced";L.data===i.data&&L.to===i.to&&L.value.eq(i.value)?O="repriced":L.data==="0x"&&L.from===L.to&&L.value.isZero()&&(O="cancelled"),a(Bt.makeError("transaction was replaced",j.errors.TRANSACTION_REPLACED,{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:this._wrapTransaction(L),hash:e,receipt:K}));return}}_++}}d||this.once("block",P)}}),E=>{d||this.once("block",P)}))});if(d)return;this.once("block",P),u.push(()=>{this.removeListener("block",P)})}if(typeof n=="number"&&n>0){const v=setTimeout(()=>{h()||a(Bt.makeError("timeout exceeded",j.errors.TIMEOUT,{timeout:n}))},n);v.unref&&v.unref(),u.push(()=>{clearTimeout(v)})}})})}getBlockNumber(){return _t(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return pe.from(e)}catch(t){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Sr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",n);try{return pe.from(i)}catch(s){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,t){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Sr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",n);try{return pe.from(i).toNumber()}catch(s){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,t){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Sr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",n);try{return me(i)}catch(s){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,t,n){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Sr({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(o=>du(o))}),s=yield this.perform("getStorageAt",i);try{return me(s)}catch(o){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,n){if(t!=null&&ts(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",j.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>_t(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const u=yield this._waitForTransaction(e.hash,s,o,a);return u==null&&s===0?null:(this._emitted["t:"+e.hash]=u.blockNumber,u.status===0&&Bt.throwError("transaction failed",j.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:u}),u)}),i}sendTransaction(e){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>me(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return _t(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?pe.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?me(s):null))}),this.formatter.transactionRequest(yield Sr(n))})}_getFilter(e){return _t(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Sr(t))})}_call(e,t,n){return _t(this,void 0,void 0,function*(){n>=YS&&Bt.throwError("CCIP read exceeded maximum redirections",j.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&ts(s)%32===4)try{const o=Br(s,4),a=Br(o,0,32);pe.from(a).eq(i)||Bt.throwError("CCIP Read sender did not match",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const u=[],d=pe.from(Br(o,32,64)).toNumber(),h=pe.from(Br(o,d,d+32)).toNumber(),m=Br(o,d+32);for(let T=0;T<h;T++){const C=lf(m,T*32);C==null&&Bt.throwError("CCIP Read contained corrupt URL string",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),u.push(C)}const v=Vc(o,64);pe.from(Br(o,100,128)).isZero()||Bt.throwError("CCIP Read callback selector included junk",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const _=Br(o,96,100),P=Vc(o,128),A=yield this.ccipReadFetch(e,v,u);A==null&&Bt.throwError("CCIP Read disabled or provided no URLs",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const E={to:i,data:En([_,Mx([A,P])])};return this._call(E,t,n+1)}catch(o){if(o.code===j.errors.SERVER_ERROR)throw o}try{return me(s)}catch(o){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Sr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Sr({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return pe.from(n)}catch(i){return Bt.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:i})}})}_getAddress(e){return _t(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Bt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Bt.throwError("ENS name not configured",j.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return _t(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!t};if(kt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),kt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return vo(()=>_t(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let o=null;for(let u=0;u<s.transactions.length;u++){const d=s.transactions[u];if(d.blockNumber==null)d.confirmations=0;else if(d.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let h=o-d.blockNumber+1;h<=0&&(h=1),d.confirmations=h}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(u=>this._wrapTransaction(u)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return _t(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return vo(()=>_t(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return _t(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return vo(()=>_t(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return _t(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Sr({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Be.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return _t(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return _t(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Bt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return _t(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const i=new fh(this,n,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return _t(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||Bt.throwError("network does not support ENS",j.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Pc(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return _t(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(kt(e))throw n}typeof e!="string"&&Bt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return _t(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const i=lf(yield this.call({to:n,data:"0x691f3431"+Pc(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return _t(this,void 0,void 0,function*(){let t=null;if(kt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new fh(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==j.errors.CALL_EXCEPTION)throw a}try{const a=lf(yield this.call({to:o,data:"0x691f3431"+Pc(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==j.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return Bt.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const i=new QS(na(e),t,n);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,i=[],s=na(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let t=na(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=na(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let i=!1,s=na(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=na(e);this._events=this._events.filter(i=>i.tag!==n?!0:(t.push(i),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}var ys=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const Fr=new j(_n),nk=["call","estimateGas"];function Mc(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=kt(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=Mc(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return Mc(JSON.parse(r),e)}catch{}return null}function Bx(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const s=Mc(e,!0);if(s)return s.data;Fr.throwError("missing revert data in call exception; Transaction reverted without a reason string",j.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let s=Mc(e.body,!1);s==null&&(s=Mc(e,!1)),s&&Fr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:r,transaction:n,error:e})}let i=e.message;throw e.code===j.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Fr.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),i.match(/nonce (is )?too low/i)&&Fr.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Fr.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),i.match(/only replay-protected/i)&&Fr.throwError("legacy pre-eip-155 transactions not supported",j.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),nk.indexOf(r)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Fr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function xy(r){return new Promise(function(e){setTimeout(e,r)})}function ik(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function fc(r){return r&&r.toLowerCase()}const lh={};class j0 extends Ps{constructor(e,t,n){if(super(),e!==lh)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ee(this,"provider",t),n==null&&(n=0),typeof n=="string"?(ee(this,"_address",this.provider.formatter.address(n)),ee(this,"_index",null)):typeof n=="number"?(ee(this,"_index",n),ee(this,"_address",null)):Fr.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Fr.throwError("cannot alter JSON-RPC Signer connection",j.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new sk(lh,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Fr.throwError("unknown account #"+this._index,j.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=dr(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=dr(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>ys(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&Fr.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Sr({tx:Sr(e),sender:t}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&Fr.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Fr.throwError("user rejected transaction",j.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Bx("sendTransaction",o,s)))})}signTransaction(e){return Fr.throwError("signing transactions is unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ys(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield vo(()=>ys(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return ys(this,void 0,void 0,function*(){const t=typeof e=="string"?Lr(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[me(t),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return ys(this,void 0,void 0,function*(){const t=typeof e=="string"?Lr(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),me(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,t,n){return ys(this,void 0,void 0,function*(){const i=yield en.resolveNames(e,t,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(en.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return ys(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class sk extends j0{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const ok={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Po extends bl{constructor(e,t){let n=t;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=nn(this.constructor,"defaultUrl")()),typeof e=="string"?ee(this,"connection",Object.freeze({url:e})):ee(this,"connection",Object.freeze(dr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return ys(this,void 0,void 0,function*(){yield xy(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=nn(this.constructor,"getNetwork");try{return t(pe.from(e).toNumber())}catch(n){return Fr.throwError("could not detect network",j.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Fr.throwError("could not detect network",j.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new j0(lh,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Tn(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Ya(this.connection,JSON.stringify(n),ik).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[fc(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[fc(t.address),t.blockTag]];case"getCode":return["eth_getCode",[fc(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[fc(t.address),fr(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":{const n=nn(this.constructor,"hexlifyTransaction");return["eth_call",[n(t.transaction,{from:!0}),t.blockTag]]}case"estimateGas":{const n=nn(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[n(t.transaction,{from:!0})]]}case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=fc(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return ys(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&pe.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=dr(t),t.transaction=dr(i),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&Fr.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Bx(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(u){return e.emit("pending",u),null})})}),o.then(function(){return xy(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=dr(ok);if(t)for(const s in t)t[s]&&(n[s]=!0);m0(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=du(pe.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=me(e[s]))}),e.accessList&&(i.accessList=uo(e.accessList)),i}}let Bc=null;try{if(Bc=WebSocket,Bc==null)throw new Error("inject please")}catch{const e=new j(_n);Bc=function(){e.throwError("WebSockets not supported in this environment",j.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var hd=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const ju=new j(_n);let ak=1;class xl extends Po{constructor(e,t){t==="any"&&ju.throwError("WebSocketProvider does not support 'any' network yet",j.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?ee(this,"_websocket",new Bc(this.connection.url)):ee(this,"_websocket",e),ee(this,"_requests",{}),ee(this,"_subs",{}),ee(this,"_subIds",{}),ee(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),u=this._requests[a];if(delete this._requests[a],o.result!==void 0)u.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(u.payload),response:o.result,provider:this});else{let d=null;o.error?(d=new Error(o.error.message||"unknown error"),ee(d,"code",o.error.code||null),ee(d,"response",s)):d=new Error("unknown error"),u.callback(d,void 0),this.emit("debug",{action:"response",error:d,request:JSON.parse(u.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){ju.throwError("cannot reset events block on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){ju.throwError("cannot set polling interval on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return hd(this,void 0,void 0,function*(){return null})}set polling(e){!e||ju.throwError("cannot set polling on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const n=ak++;return new Promise((i,s)=>{function o(u,d){return u?s(u):i(d)}const a=JSON.stringify({method:e,params:t,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(n)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,n){return hd(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const n=pe.from(t.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{!s||this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[t];!n||(delete this._subIds[t],n.then(i=>{!this._subs[i]||(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return hd(this,void 0,void 0,function*(){this.websocket.readyState===Bc.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var ck=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const vc=new j(_n);class Nx extends Po{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return ck(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||vc.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(ee(this,"_network",t),this.emit("network",t,null))),t})}}class Rs extends Nx{constructor(e,t){vc.checkAbstract(new.target,Rs),e=nn(new.target,"getNetwork")(e),t=nn(new.target,"getApiKey")(t);const n=nn(new.target,"getUrl")(e,t);super(n,e),typeof t=="string"?ee(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{ee(this,i,t[i])})}_startPending(){vc.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return vc.throwError("API provider does not support signing",j.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return vc.throwError("not implemented; sub-classes must override getUrl",j.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const wy=new j(_n),df="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Ox extends xl{constructor(e,t){const n=new z0(e,t),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),ee(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===df}}class z0 extends Rs{static getWebSocketProvider(e,t){return new Ox(e,t)}static getApiKey(e){return e==null?df:(e&&typeof e!="string"&&wy.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:wy.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+t,throttleCallback:(i,s)=>(t===df&&yu(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===df}}const uk=new j(_n),zu="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function fk(r){switch(r){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return uk.throwArgumentError("unsupported network","name",r)}class Lx extends Rs{isCommunityResource(){return this.apiKey===zu}static getApiKey(e){return e??zu}static getUrl(e,t){t==null&&(t=zu);const n={allowGzip:!0,url:"https://"+fk(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===zu&&yu(),Promise.resolve(!0))};return t.projectSecret!=null&&(n.user="",n.password=t.projectSecret),n}}var lk=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const vy=new j(_n);class Dx extends Rs{static getApiKey(e){return e!=null&&vy.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:vy.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,t){const n=Object.create(null,{perform:{get:()=>super.perform}});return lk(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,t)})}}var qu=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const Ks=new j(_n);function _y(r){const e={};for(let t in r){if(r[t]==null)continue;let n=r[t];t==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?n=du(me(n)):t==="accessList"?n="["+uo(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=me(n),e[t]=n)}return e}function dk(r){if(r.status==0&&(r.message==="No records found"||r.message==="No transactions found"))return r.result;if(r.status!=1||typeof r.message!="string"||!r.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(r),(r.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return r.result}function Ay(r){if(r&&r.status==0&&r.message=="NOTOK"&&(r.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(r),e.throttleRetry=!0,e}if(r.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(r),e}if(r.error){const e=new Error(r.error.message||"unknown error");throw r.error.code&&(e.code=r.error.code),r.error.data&&(e.data=r.error.data),e}return r.result}function Ey(r){if(r==="pending")throw new Error("pending not supported");return r==="latest"?r:parseInt(r.substring(2),16)}function pd(r,e,t){if(r==="call"&&e.code===j.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),kt(s))return s;Ks.throwError("missing revert data in call exception",j.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===j.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Ks.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:t}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Ks.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:r,transaction:t}),n.match(/another transaction with same nonce/)&&Ks.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:t}),n.match(/execution failed due to an exception|execution reverted/)&&Ks.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:t}),e}class Ux extends bl{constructor(e,t){super(e),ee(this,"baseUrl",this.getBaseUrl()),ee(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Ks.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const n=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,n){return qu(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,t),s=n?this.getPostData(e,t):null,o=e==="proxy"?Ay:dk;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(h,m)=>(this.isCommunityResource()&&yu(),Promise.resolve(!0))};let u=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},u=Object.keys(s).map(h=>`${h}=${s[h]}`).join("&"));const d=yield Ya(a,u,o||Ay);return this.emit("debug",{action:"response",request:i,response:Tn(d),provider:this}),d})}detectNetwork(){return qu(this,void 0,void 0,function*(){return this.network})}perform(e,t){const n=Object.create(null,{perform:{get:()=>super.perform}});return qu(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>pd("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=_y(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return pd("call",s,t.transaction)}}case"estimateGas":{const i=_y(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return pd("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=Ey(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=Ey(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Ks.throwError("unsupported topic count",j.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&Ks.throwError("unsupported topic format",j.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const u=s[a];if(u.blockHash==null){if(o[u.blockNumber]==null){const d=yield this.getBlock(u.blockNumber);d&&(o[u.blockNumber]=d.hash)}u.blockHash=o[u.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,t)})}getHistory(e,t,n){return qu(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(u){o[u]==""&&delete o[u]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}var Lf=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(m){o(m)}}function u(h){try{d(n.throw(h))}catch(m){o(m)}}function d(h){h.done?s(h.value):i(h.value).then(a,u)}d((n=n.apply(r,e||[])).next())})};const xo=new j(_n);function Hu(){return new Date().getTime()}function Sy(r){let e=null;for(let t=0;t<r.length;t++){const n=r[t];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||xo.throwArgumentError("provider mismatch","networks",r):e=n}return e}function ky(r,e){r=r.slice().sort();const t=Math.floor(r.length/2);if(r.length%2)return r[t];const n=r[t-1],i=r[t];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function ba(r){if(r===null)return"null";if(typeof r=="number"||typeof r=="boolean")return JSON.stringify(r);if(typeof r=="string")return r;if(pe.isBigNumber(r))return r.toString();if(Array.isArray(r))return JSON.stringify(r.map(e=>ba(e)));if(typeof r=="object"){const e=Object.keys(r);return e.sort(),"{"+e.map(t=>{let n=r[t];return typeof n=="function"?n="[function]":n=ba(n),JSON.stringify(t)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof r)}let hk=1;function Ty(r){let e=null,t=null,n=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,r)});const i=o=>(n=n.then(o),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const pk=[j.errors.CALL_EXCEPTION,j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED,j.errors.UNPREDICTABLE_GAS_LIMIT],gk=["address","args","errorArgs","errorSignature","method","transaction"];function Wu(r,e){const t={weight:r.weight};return Object.defineProperty(t,"provider",{get:()=>r.provider}),r.start&&(t.start=r.start),e&&(t.duration=e-r.start),r.done&&(r.error?t.error=r.error:t.result=r.result||null),t}function yk(r,e){return function(t){const n={};t.forEach(s=>{const o=r(s.result);n[o]||(n[o]={count:0,result:s.result}),n[o].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const o=n[i[s]];if(o.count>=e)return o.result}}}function mk(r,e,t){let n=ba;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=ky(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=r._highestBlockNumber&&(r._highestBlockNumber=o),r._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return ky(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=dr(i),i.confirmations=-1,ba(i))};break;case"getBlock":t.includeTransactions?n=function(i){return i==null?null:(i=dr(i),i.transactions=i.transactions.map(s=>(s=dr(s),s.confirmations=-1,s)),ba(i))}:n=function(i){return i==null?null:ba(i)};break;default:throw new Error("unknown method: "+e)}return yk(n,r.quorum)}function lc(r,e){return Lf(this,void 0,void 0,function*(){const t=r.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:vo(()=>new Promise((n,i)=>{setTimeout(function(){return t.blockNumber>=e?n(t):r.cancelled?n(null):n(void 0)},0)}),{oncePoll:t})})}function bk(r,e,t,n){return Lf(this,void 0,void 0,function*(){let i=r.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&kt(n.blockTag)&&(i=yield lc(r,e)),i[t](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&kt(n.blockTag)&&(i=yield lc(r,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&kt(n.blockTag)&&(i=yield lc(r,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&kt(n.blockTag)&&(i=yield lc(r,e)),t==="call"&&n.blockTag?i[t](n.transaction,n.blockTag):i[t](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&kt(s.fromBlock)||s.toBlock&&kt(s.toBlock))&&(i=yield lc(r,e)),i.getLogs(s)}}return xo.throwError("unknown method error",j.errors.UNKNOWN_ERROR,{method:t,params:n})})}class Fx extends bl{constructor(e,t){e.length===0&&xo.throwArgumentError("missing providers","providers",e);const n=e.map((o,a)=>{if($o.isProvider(o)){const h=uh(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:h,priority:1})}const u=dr(o);u.priority==null&&(u.priority=1),u.stallTimeout==null&&(u.stallTimeout=uh(o)?2e3:750),u.weight==null&&(u.weight=1);const d=u.weight;return(d%1||d>512||d<1)&&xo.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,d),Object.freeze(u)}),i=n.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&xo.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=Sy(n.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),ee(this,"providerConfigs",Object.freeze(n)),ee(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Lf(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return Sy(e)})}perform(e,t){return Lf(this,void 0,void 0,function*(){if(e==="sendTransaction"){const u=yield Promise.all(this.providerConfigs.map(d=>d.provider.sendTransaction(t.signedTransaction).then(h=>h.hash,h=>h)));for(let d=0;d<u.length;d++){const h=u[d];if(typeof h=="string")return h}throw u[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=mk(this,e,t),i=xx(this.providerConfigs.map(dr));i.sort((u,d)=>u.priority-d.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const u=Hu();let d=i.filter(_=>_.runner&&u-_.start<_.stallTimeout).reduce((_,P)=>_+P.weight,0);for(;d<this.quorum&&o<i.length;){const _=i[o++],P=hk++;_.start=Hu(),_.staller=Ty(_.stallTimeout),_.staller.wait(()=>{_.staller=null}),_.runner=bk(_,s,e,t).then(A=>{_.done=!0,_.result=A,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:P,backend:Wu(_,Hu()),request:{method:e,params:Tn(t)},provider:this})},A=>{_.done=!0,_.error=A,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:P,backend:Wu(_,Hu()),request:{method:e,params:Tn(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:P,backend:Wu(_,null),request:{method:e,params:Tn(t)},provider:this}),d+=_.weight}const h=[];i.forEach(_=>{_.done||!_.runner||(h.push(_.runner),_.staller&&h.push(_.staller.getPromise()))}),h.length&&(yield Promise.race(h));const m=i.filter(_=>_.done&&_.error==null);if(m.length>=this.quorum){const _=n(m);if(_!==void 0)return i.forEach(P=>{P.staller&&P.staller.cancel(),P.cancelled=!0}),_;a||(yield Ty(100).getPromise()),a=!1}const v=i.reduce((_,P)=>{if(!P.done||P.error==null)return _;const A=P.error.code;return pk.indexOf(A)>=0&&(_[A]||(_[A]={error:P.error,weight:0}),_[A].weight+=P.weight),_},{});if(Object.keys(v).forEach(_=>{const P=v[_];if(P.weight<this.quorum)return;i.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0});const A=P.error,E={};gk.forEach(T=>{A[T]!=null&&(E[T]=A[T])}),xo.throwError(A.reason||A.message,_,E)}),i.filter(_=>!_.done).length===0)break}return i.forEach(u=>{u.staller&&u.staller.cancel(),u.cancelled=!0}),xo.throwError("failed to meet quorum",j.errors.SERVER_ERROR,{method:e,params:t,results:i.map(u=>Wu(u)),provider:this})})}}const Kx=null,hf=new j(_n),_c="84842078b09946638c03157f83405213";class $x extends xl{constructor(e,t){const n=new q0(e,t),i=n.connection;i.password&&hf.throwError("INFURA WebSocket project secrets unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),ee(this,"apiKey",n.projectId),ee(this,"projectId",n.projectId),ee(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===_c}}class q0 extends Rs{static getWebSocketProvider(e,t){return new $x(e,t)}static getApiKey(e){const t={apiKey:_c,projectId:_c,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(hf.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),hf.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:hf.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===_c&&yu(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===_c}}class xk extends Po{send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((o,a)=>{i.resolve=o,i.reject=a});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const o=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const a=o.map(u=>u.request);return this.emit("debug",{action:"requestBatch",request:Tn(a),provider:this}),Ya(this.connection,JSON.stringify(a)).then(u=>{this.emit("debug",{action:"response",request:a,response:u,provider:this}),o.forEach((d,h)=>{const m=u[h];if(m.error){const v=new Error(m.error.message);v.code=m.error.code,v.data=m.error.data,d.reject(v)}else d.resolve(m.result)})},u=>{this.emit("debug",{action:"response",error:u,request:a,provider:this}),o.forEach(d=>{d.reject(u)})})},10)),s}}const gd=new j(_n),wk="ETHERS_JS_SHARED";class jx extends Rs{static getApiKey(e){return e&&typeof e!="string"&&gd.throwArgumentError("invalid apiKey","apiKey",e),e||wk}static getUrl(e,t){gd.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:gd.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+t}}const Iy=new j(_n),Py="62e1ad51b37b8e00394bda3b";class zx extends Rs{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=Py:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:Iy.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:Iy.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${t.applicationId}`,s={headers:{},url:i};return t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===Py}}const Ry=new j(_n);let vk=1;function Cy(r,e){const t="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:vk++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Tn(s),provider:this}),e(s,(u,d)=>{if(u)return this.emit("debug",{action:"response",fetcher:t,error:u,request:s,provider:this}),a(u);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:d,provider:this}),d.error){const h=new Error(d.error.message);return h.code=d.error.code,h.data=d.error.data,a(h)}o(d.result)})})}}function _k(r){return function(e,t){t==null&&(t=[]);const n={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Tn(n),provider:this}),r.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class qx extends Po{constructor(e,t){e==null&&Ry.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=_k(e)):e.sendAsync?i=Cy(e,e.sendAsync.bind(e)):e.send?i=Cy(e,e.send.bind(e)):Ry.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,t),ee(this,"jsonRpcFetchFunc",i),ee(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const My=new j(_n);function H0(r,e){if(r==null&&(r="homestead"),typeof r=="string"){const n=r.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new Po(r);case"ws":case"wss":return new xl(r);default:My.throwArgumentError("unsupported URL scheme","network",r)}}const t=$0(r);return(!t||!t._defaultProvider)&&My.throwError("unsupported getDefaultProvider network",j.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:r}),t._defaultProvider({FallbackProvider:Fx,AlchemyProvider:z0,AnkrProvider:Lx,CloudflareProvider:Dx,EtherscanProvider:Ux,InfuraProvider:q0,JsonRpcProvider:Po,NodesmithProvider:jx,PocketProvider:zx,Web3Provider:qx,IpcProvider:Kx},e)}var Hx=Object.freeze(Object.defineProperty({__proto__:null,Provider:$o,BaseProvider:bl,Resolver:fh,UrlJsonRpcProvider:Rs,FallbackProvider:Fx,AlchemyProvider:z0,AlchemyWebSocketProvider:Ox,AnkrProvider:Lx,CloudflareProvider:Dx,EtherscanProvider:Ux,InfuraProvider:q0,InfuraWebSocketProvider:$x,JsonRpcProvider:Po,JsonRpcBatchProvider:xk,NodesmithProvider:jx,PocketProvider:zx,StaticJsonRpcProvider:Nx,Web3Provider:qx,WebSocketProvider:xl,IpcProvider:Kx,JsonRpcSigner:j0,getDefaultProvider:H0,getNetwork:$0,isCommunityResource:uh,isCommunityResourcable:Rx,showThrottleMessage:yu,Formatter:Be},Symbol.toStringTag,{value:"Module"}));const Ak="solidity/5.7.0",Ek=new RegExp("^bytes([0-9]+)$"),Sk=new RegExp("^(u?int)([0-9]*)$"),kk=new RegExp("^(.*)\\[([0-9]*)\\]$"),Tk="0000000000000000000000000000000000000000000000000000000000000000",pa=new j(Ak);function Wx(r,e,t){switch(r){case"address":return t?kc(e,32):ge(e);case"string":return Lr(e);case"bytes":return ge(e);case"bool":return e=e?"0x01":"0x00",t?kc(e,32):ge(e)}let n=r.match(Sk);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&pa.throwArgumentError("invalid number type","type",r),t&&(i=256),e=pe.from(e).toTwos(i),kc(e,i/8)}if(n=r.match(Ek),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&pa.throwArgumentError("invalid bytes type","type",r),ge(e).byteLength!==i&&pa.throwArgumentError(`invalid value for ${r}`,"value",e),t?ge((e+Tk).substring(0,66)):e}if(n=r.match(kk),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&pa.throwArgumentError(`invalid array length for ${r}`,"value",e);const o=[];return e.forEach(function(a){o.push(Wx(i,a,!0))}),ur(o)}return pa.throwArgumentError("invalid type","type",r)}function W0(r,e){r.length!=e.length&&pa.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const t=[];return r.forEach(function(n,i){t.push(Wx(n,e[i]))}),me(ur(t))}function Ik(r,e){return ir(W0(r,e))}function Pk(r,e){return Ss(W0(r,e))}const Rk="units/5.7.0",Gx=new j(Rk),Vx=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Ck(r){const e=String(r).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||r==="."||r==="-.")&&Gx.throwArgumentError("invalid value","value",r);let t=e[0],n="";for(t.substring(0,1)==="-"&&(n="-",t=t.substring(1));t.substring(0,1)==="0";)t=t.substring(1);t===""&&(t="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;t.length;)if(t.length<=3){s.unshift(t);break}else{const o=t.length-3;s.unshift(t.substring(o)),t=t.substring(0,o)}return n+s.join(",")+i}function Jx(r,e){if(typeof e=="string"){const t=Vx.indexOf(e);t!==-1&&(e=3*t)}return of(r,e??18)}function Yx(r,e){if(typeof r!="string"&&Gx.throwArgumentError("value must be a string","value",r),typeof e=="string"){const t=Vx.indexOf(e);t!==-1&&(e=3*t)}return Ki(r,e??18)}function Mk(r){return Jx(r,18)}function Bk(r){return Yx(r,18)}var Xx=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:$1,defaultAbiCoder:j1,Fragment:Gi,ConstructorFragment:ki,ErrorFragment:bs,EventFragment:Hi,FunctionFragment:Ti,ParamType:Gr,FormatTypes:Wt,checkResultErrors:S1,Logger:j,RLP:r6,_fetchData:Tx,fetchJson:Ya,poll:vo,checkProperties:m0,deepCopy:Tn,defineReadOnly:ee,getStatic:nn,resolveProperties:Sr,shallowCopy:dr,arrayify:ge,concat:ur,stripZeros:Yi,zeroPad:kc,isBytes:ao,isBytesLike:lu,defaultPath:Ma,HDNode:Jn,SigningKey:Eo,Interface:th,LogDescription:Q1,TransactionDescription:ex,base58:Ra,base64:q6,hexlify:me,isHexString:kt,hexConcat:En,hexStripZeros:y1,hexValue:du,hexZeroPad:fr,hexDataLength:ts,hexDataSlice:Br,nameprep:K6,_toEscapedUtf8String:S6,toUtf8Bytes:Lr,toUtf8CodePoints:kf,toUtf8String:Ko,Utf8ErrorFuncs:F1,formatBytes32String:k6,parseBytes32String:T6,dnsEncode:J1,hashMessage:I0,namehash:Pc,isValidName:pE,id:zs,_TypedDataEncoder:en,getAddress:tr,getIcapAddress:a6,getContractAddress:fl,getCreate2Address:c6,isAddress:o6,formatEther:Mk,parseEther:Bk,formatUnits:Jx,parseUnits:Yx,commify:Ck,computeHmac:Wc,keccak256:ir,ripemd160:gx,sha256:Ss,sha512:iS,randomBytes:ma,shuffled:xx,solidityPack:W0,solidityKeccak256:Ik,soliditySha256:Pk,splitSignature:Uo,joinSignature:Zd,accessListify:uo,parseTransaction:ux,serializeTransaction:sh,get TransactionTypes(){return ih},getJsonWalletAddress:wS,computeAddress:Ws,recoverAddress:gu,computePublicKey:M0,recoverPublicKey:ix,verifyMessage:BS,verifyTypedData:NS,getAccountPath:pS,mnemonicToEntropy:gl,entropyToMnemonic:yl,isValidMnemonic:hS,mnemonicToSeed:bx,get SupportedAlgorithm(){return Ca},get UnicodeNormalizationForm(){return rs},get Utf8ErrorReason(){return Bn},Indexed:If},Symbol.toStringTag,{value:"Module"}));const G0="ethers/5.7.2",Zx=new j(G0);var Qx=Object.freeze(Object.defineProperty({__proto__:null,Signer:Ps,Wallet:Fs,VoidSigner:pu,getDefaultProvider:H0,providers:Hx,BaseContract:N0,Contract:Mf,ContractFactory:hx,BigNumber:pe,FixedNumber:Wr,constants:L1,get errors(){return Gn},logger:Zx,utils:Xx,wordlists:Bf,version:G0,Wordlist:zo},Symbol.toStringTag,{value:"Module"}));try{const r=window;r._ethers==null&&(r._ethers=Qx)}catch{}var Nk=Object.freeze(Object.defineProperty({__proto__:null,ethers:Qx,Signer:Ps,Wallet:Fs,VoidSigner:pu,getDefaultProvider:H0,providers:Hx,BaseContract:N0,Contract:Mf,ContractFactory:hx,BigNumber:pe,FixedNumber:Wr,constants:L1,get errors(){return Gn},logger:Zx,utils:Xx,wordlists:Bf,version:G0,Wordlist:zo},Symbol.toStringTag,{value:"Module"})),wl=Kf(Nk),ew=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ga,"__esModule",{value:!0});const Ok=ew(p0),Lk=ew(a1),yd=wl;class Dk extends Ok.default{get publicKey(){return J.Buffer.from(this.pk,"hex")}constructor(e){const t=J.Buffer.from(e,"hex"),n=Lk.default.publicKeyCreate(t,!1);super(e,J.Buffer.from(n))}sign(e){return new yd.ethers.Wallet(this._key).signMessage(e).then(n=>J.Buffer.from(n.slice(2),"hex"))}static async verify(e,t,n){const i=yd.ethers.utils.computeAddress(e);return yd.ethers.utils.verifyMessage(t,n)===i}}Ga.default=Dk;var V0={},J0={},vl={},tw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vl,"__esModule",{value:!0});const md=Qs,Uk=tw(Bo),Fk=tw(Oi.exports),By=Do;class Kk{constructor(e,t){this._key=e,this.pk=t,this.signatureType=1,this.ownerLength=By.SIG_CONFIG[1].pubLength,this.signatureLength=By.SIG_CONFIG[1].sigLength,t||(this.pk=md.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return md.createSign("sha256").update(e).sign({key:this._key,padding:md.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,t,n){return await Uk.default.crypto.verify(J.Buffer.isBuffer(e)?Fk.default.encode(e):e,t,n)}}vl.default=Kk;var Ba={},$k=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jk=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),zk=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$k(e,r,t);return jk(e,r),e};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.jwkTopem=Ba.pemTojwk=void 0;const Cs=zk(i_);function qk(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Y0(r){return qk(J.Buffer.from(r,"hex").toString("base64"))}var rw=Cs.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),nw=Cs.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),Hk=Cs.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(nw),this.key("publicKey").bitstr())}),iw=Cs.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),Wk=Cs.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),sw=Cs.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(iw),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(Wk))}),Gk=Cs.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(iw),this.key("algorithm").use(nw),this.key("privateKey").bitstr())});function ow(r,e){return e=e||{},Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function X0(r){return r.length%2===1?"0"+r:r}function aw(r,e){var t=rw.decode(r,"der"),n=X0(t.e.toString(16)),i={kty:"RSA",n:Us(t.n),e:Y0(n)};return ow(i,e)}function cw(r,e){var t=sw.decode(r,"der"),n=X0(t.e.toString(16)),i={kty:"RSA",n:Us(t.n),e:Y0(n),d:Us(t.d),p:Us(t.p),q:Us(t.q),dp:Us(t.dp),dq:Us(t.dq),qi:Us(t.qi)};return ow(i,e)}function Vk(r,e){var t=Hk.decode(r,"der");return aw(t.publicKey.data,e)}function Jk(r,e){var t=Gk.decode(r,"der");return cw(t.privateKey.data,e)}function Yk(r){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(r);if(!e)return null;var t=!!e[1],n=e[2]==="PRIVATE";return n?t?cw:Jk:t?aw:Vk}function Xk(r){return{n:Os(r.n),e:Os(r.e),d:r.d&&Os(r.d),p:r.p&&Os(r.p),q:r.q&&Os(r.q),dp:r.dp&&Os(r.dp),dq:r.dq&&Os(r.dq),qi:r.qi&&Os(r.qi)}}function Us(r){return Y0(X0(r.toString(16)))}function Zk(r){return new Cs.bignum(J.Buffer.from(r,"base64"))}function Os(r){return/^[0-9]+$/.test(r)?new Cs.bignum(r,10):Zk(r)}function Qk(r,e){var t=r.toString().split(/(\r\n|\r|\n)+/g);t=t.filter(function(i){return i.trim().length!==0});var n=Yk(t[0]);return t=t.slice(1,-1).join(""),n(J.Buffer.from(t.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}Ba.pemTojwk=Qk;function e4(r){var e=Xk(r),t=!!e.d,n=t?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,o=J.Buffer.alloc(0);t?(e.version="two-prime",o=sw.encode(e,"der")):o=rw.encode(e,"der");var a=o.toString("base64").match(/.{1,64}/g).join(`
`);return i+a+s}Ba.jwkTopem=e4;var Z0=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(J0,"__esModule",{value:!0});const t4=Z0(vl),r4=Ba,n4=Z0(Oi.exports),Ny=Z0(Bo);class i4 extends t4.default{constructor(e){super(r4.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return n4.default.toBuffer(this.pk)}sign(e){return Ny.default.crypto.sign(this.jwk,e)}static async verify(e,t,n){return await Ny.default.crypto.verify(e,t,n)}}J0.default=i4;var Q0={},s4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q0,"__esModule",{value:!0});const o4=s4(Ga);class a4 extends o4.default{}Q0.default=a4;var Xa={},uw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xa,"__esModule",{value:!0});const c4=uw(fu),dc=uw(Nr);class u4 extends c4.default{get publicKey(){return dc.default.decode(this.pk)}get key(){return dc.default.decode(this._key)}constructor(e){const t=dc.default.decode(e);super(dc.default.encode(t.subarray(0,32)),dc.default.encode(t.subarray(32,64)))}}Xa.default=u4;var ep={};Object.defineProperty(ep,"__esModule",{value:!0});const ia=wl,hc=Do;class f4{constructor(e){this.ownerLength=hc.SIG_CONFIG[hc.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=hc.SIG_CONFIG[hc.SignatureConfig.ETHEREUM].sigLength,this.signatureType=hc.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",t=await this.signer.signMessage(e),n=await ia.ethers.utils.hashMessage(e),i=ia.ethers.utils.recoverPublicKey(ia.ethers.utils.arrayify(n),t);this.publicKey=J.Buffer.from(ia.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const t=await this.signer.signMessage(e);return J.Buffer.from(t.slice(2),"hex")}static verify(e,t,n){const i=ia.ethers.utils.computeAddress(e);return ia.ethers.utils.verifyMessage(t,n)===i}}ep.default=f4;var _l={},l4=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),d4=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),h4=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&l4(e,r,t);return d4(e,r),e},p4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_l,"__esModule",{value:!0});const g4=h4(o1),y4=p4(Oi.exports),Oy=Do;class m4{constructor(e){this.ownerLength=Oy.SIG_CONFIG[2].pubLength,this.signatureLength=Oy.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,t,n){let i=e;return typeof e=="string"&&(i=y4.default.toBuffer(e)),g4.verify(J.Buffer.from(n),J.Buffer.from(t),J.Buffer.from(i))}}_l.default=m4;var tp={},b4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tp,"__esModule",{value:!0});const x4=b4(Xa);class w4 extends x4.default{constructor(e){super(e.replace("ed25519:",""))}}tp.default=w4;var rp={},v4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rp,"__esModule",{value:!0});const _4=v4(fu);class A4 extends _4.default{get publicKey(){return J.Buffer.from(this.pk)}get key(){return J.Buffer.from(this._key)}constructor(e,t){super(e.subarray(0,32),t)}}rp.default=A4;var np={},E4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(np,"__esModule",{value:!0});const S4=E4(_l);class k4 extends S4.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(J.Buffer.from(J.Buffer.from(e).toString("hex")))}static async verify(e,t,n){return super.verify(e,J.Buffer.from(J.Buffer.from(t).toString("hex")),n)}}np.default=k4;var ip={},T4=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ip,"__esModule",{value:!0});const I4=T4(Xa);class P4 extends I4.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(J.Buffer.from(J.Buffer.from(e).toString("hex")))}static async verify(e,t,n){return super.verify(e,J.Buffer.from(J.Buffer.from(t).toString("hex")),n)}}ip.default=P4;(function(r){var e=z&&z.__createBinding||(Object.create?function(v,_,P,A){A===void 0&&(A=P),Object.defineProperty(v,A,{enumerable:!0,get:function(){return _[P]}})}:function(v,_,P,A){A===void 0&&(A=P),v[A]=_[P]}),t=z&&z.__exportStar||function(v,_){for(var P in v)P!=="default"&&!Object.prototype.hasOwnProperty.call(_,P)&&e(_,v,P)},n=z&&z.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(r,"__esModule",{value:!0}),r.HexSolanaSigner=r.HexInjectedSolanaSigner=r.AlgorandSigner=r.NearSigner=r.InjectedEthereumSigner=r.PolygonSigner=r.ArweaveSigner=r.InjectedSolanaSigner=void 0;const i=n(J0);r.ArweaveSigner=i.default,t(Ga,r);const s=n(Q0);r.PolygonSigner=s.default,t(Xa,r);const o=n(ep);r.InjectedEthereumSigner=o.default;var a=_l;Object.defineProperty(r,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(a).default}});var u=tp;Object.defineProperty(r,"NearSigner",{enumerable:!0,get:function(){return n(u).default}});var d=rp;Object.defineProperty(r,"AlgorandSigner",{enumerable:!0,get:function(){return n(d).default}});var h=np;Object.defineProperty(r,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(h).default}});var m=ip;Object.defineProperty(r,"HexSolanaSigner",{enumerable:!0,get:function(){return n(m).default}})})(V0);var fw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cl,"__esModule",{value:!0});cl.indexToType=void 0;const R4=fw(fu),C4=fw(Ga),Ly=V0;cl.indexToType={1:Ly.ArweaveSigner,2:R4.default,3:C4.default,4:Ly.HexInjectedSolanaSigner};var lw={};(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(vl,r)})(lw);(function(r){var e=z&&z.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=z&&z.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(al,r),t(cl,r),t(lw,r),t(V0,r)})(Wa);var sp={exports:{}},dw=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},M4=dw,qo=Object.prototype.toString;function op(r){return qo.call(r)==="[object Array]"}function dh(r){return typeof r>"u"}function B4(r){return r!==null&&!dh(r)&&r.constructor!==null&&!dh(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function N4(r){return qo.call(r)==="[object ArrayBuffer]"}function O4(r){return typeof FormData<"u"&&r instanceof FormData}function L4(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function D4(r){return typeof r=="string"}function U4(r){return typeof r=="number"}function hw(r){return r!==null&&typeof r=="object"}function pf(r){if(qo.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function F4(r){return qo.call(r)==="[object Date]"}function K4(r){return qo.call(r)==="[object File]"}function $4(r){return qo.call(r)==="[object Blob]"}function pw(r){return qo.call(r)==="[object Function]"}function j4(r){return hw(r)&&pw(r.pipe)}function z4(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function q4(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function H4(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ap(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),op(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function hh(){var r={};function e(i,s){pf(r[s])&&pf(i)?r[s]=hh(r[s],i):pf(i)?r[s]=hh({},i):op(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)ap(arguments[t],e);return r}function W4(r,e,t){return ap(e,function(i,s){t&&typeof i=="function"?r[s]=M4(i,t):r[s]=i}),r}function G4(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var ri={isArray:op,isArrayBuffer:N4,isBuffer:B4,isFormData:O4,isArrayBufferView:L4,isString:D4,isNumber:U4,isObject:hw,isPlainObject:pf,isUndefined:dh,isDate:F4,isFile:K4,isBlob:$4,isFunction:pw,isStream:j4,isURLSearchParams:z4,isStandardBrowserEnv:H4,forEach:ap,merge:hh,extend:W4,trim:q4,stripBOM:G4},sa=ri;function Dy(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var gw=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(sa.isURLSearchParams(t))i=t.toString();else{var s=[];sa.forEach(t,function(u,d){u===null||typeof u>"u"||(sa.isArray(u)?d=d+"[]":u=[u],sa.forEach(u,function(m){sa.isDate(m)?m=m.toISOString():sa.isObject(m)&&(m=JSON.stringify(m)),s.push(Dy(d)+"="+Dy(m))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},V4=ri;function Al(){this.handlers=[]}Al.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Al.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Al.prototype.forEach=function(e){V4.forEach(this.handlers,function(n){n!==null&&e(n)})};var J4=Al,Y4=ri,X4=function(e,t){Y4.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},yw=function(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Z4=yw,mw=function(e,t,n,i,s){var o=new Error(e);return Z4(o,t,n,i,s)},Q4=mw,e5=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(Q4("Request failed with status code "+n.status,n.config,null,n.request,n))},Gu=ri,t5=Gu.isStandardBrowserEnv()?function(){return{write:function(t,n,i,s,o,a){var u=[];u.push(t+"="+encodeURIComponent(n)),Gu.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Gu.isString(s)&&u.push("path="+s),Gu.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),r5=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},n5=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},i5=r5,s5=n5,o5=function(e,t){return e&&!i5(t)?s5(e,t):t},bd=ri,a5=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],c5=function(e){var t={},n,i,s;return e&&bd.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=bd.trim(a.substr(0,s)).toLowerCase(),i=bd.trim(a.substr(s+1)),n){if(t[n]&&a5.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t},Uy=ri,u5=Uy.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(o){var a=Uy.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),Vu=ri,f5=e5,l5=t5,d5=gw,h5=o5,p5=c5,g5=u5,xd=mw,Fy=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType;Vu.isFormData(s)&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(d+":"+h)}var m=h5(e.baseURL,e.url);u.open(e.method.toUpperCase(),d5(m,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function v(){if(!!u){var P="getAllResponseHeaders"in u?p5(u.getAllResponseHeaders()):null,A=!a||a==="text"||a==="json"?u.responseText:u.response,E={data:A,status:u.status,statusText:u.statusText,headers:P,config:e,request:u};f5(n,i,E),u=null}}if("onloadend"in u?u.onloadend=v:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(v)},u.onabort=function(){!u||(i(xd("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(xd("Network Error",e,null,u)),u=null},u.ontimeout=function(){var A="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),i(xd(A,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Vu.isStandardBrowserEnv()){var _=(e.withCredentials||g5(m))&&e.xsrfCookieName?l5.read(e.xsrfCookieName):void 0;_&&(o[e.xsrfHeaderName]=_)}"setRequestHeader"in u&&Vu.forEach(o,function(A,E){typeof s>"u"&&E.toLowerCase()==="content-type"?delete o[E]:u.setRequestHeader(E,A)}),Vu.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(A){!u||(u.abort(),i(A),u=null)}),s||(s=null),u.send(s)})},tn=ri,Ky=X4,y5=yw,m5={"Content-Type":"application/x-www-form-urlencoded"};function $y(r,e){!tn.isUndefined(r)&&tn.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function b5(){var r;return(typeof XMLHttpRequest<"u"||typeof J.process<"u"&&Object.prototype.toString.call(J.process)==="[object process]")&&(r=Fy),r}function x5(r,e,t){if(tn.isString(r))try{return(e||JSON.parse)(r),tn.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var El={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:b5(),transformRequest:[function(e,t){return Ky(t,"Accept"),Ky(t,"Content-Type"),tn.isFormData(e)||tn.isArrayBuffer(e)||tn.isBuffer(e)||tn.isStream(e)||tn.isFile(e)||tn.isBlob(e)?e:tn.isArrayBufferView(e)?e.buffer:tn.isURLSearchParams(e)?($y(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):tn.isObject(e)||t&&t["Content-Type"]==="application/json"?($y(t,"application/json"),x5(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&tn.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?y5(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};El.headers={common:{Accept:"application/json, text/plain, */*"}};tn.forEach(["delete","get","head"],function(e){El.headers[e]={}});tn.forEach(["post","put","patch"],function(e){El.headers[e]=tn.merge(m5)});var cp=El,w5=ri,v5=cp,_5=function(e,t,n){var i=this||v5;return w5.forEach(n,function(o){e=o.call(i,e,t)}),e},bw=function(e){return!!(e&&e.__CANCEL__)},jy=ri,wd=_5,A5=bw,E5=cp;function vd(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var S5=function(e){vd(e),e.headers=e.headers||{},e.data=wd.call(e,e.data,e.headers,e.transformRequest),e.headers=jy.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),jy.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||E5.adapter;return t(e).then(function(i){return vd(e),i.data=wd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return A5(i)||(vd(e),i&&i.response&&(i.response.data=wd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},gn=ri,xw=function(e,t){t=t||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(v,_){return gn.isPlainObject(v)&&gn.isPlainObject(_)?gn.merge(v,_):gn.isPlainObject(_)?gn.merge({},_):gn.isArray(_)?_.slice():_}function d(v){gn.isUndefined(t[v])?gn.isUndefined(e[v])||(n[v]=u(void 0,e[v])):n[v]=u(e[v],t[v])}gn.forEach(i,function(_){gn.isUndefined(t[_])||(n[_]=u(void 0,t[_]))}),gn.forEach(s,d),gn.forEach(o,function(_){gn.isUndefined(t[_])?gn.isUndefined(e[_])||(n[_]=u(void 0,e[_])):n[_]=u(void 0,t[_])}),gn.forEach(a,function(_){_ in t?n[_]=u(e[_],t[_]):_ in e&&(n[_]=u(void 0,e[_]))});var h=i.concat(s).concat(o).concat(a),m=Object.keys(e).concat(Object.keys(t)).filter(function(_){return h.indexOf(_)===-1});return gn.forEach(m,d),n};const k5="axios",T5="0.21.4",I5="Promise based HTTP client for the browser and node.js",P5="index.js",R5={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},C5={type:"git",url:"https://github.com/axios/axios.git"},M5=["xhr","http","ajax","promise","node"],B5="Matt Zabriskie",N5="MIT",O5={url:"https://github.com/axios/axios/issues"},L5="https://axios-http.com",D5={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},U5={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},F5="dist/axios.min.js",K5="dist/axios.min.js",$5="./index.d.ts",j5={"follow-redirects":"^1.14.0"},z5=[{path:"./dist/axios.min.js",threshold:"5kB"}];var q5={name:k5,version:T5,description:I5,main:P5,scripts:R5,repository:C5,keywords:M5,author:B5,license:N5,bugs:O5,homepage:L5,devDependencies:D5,browser:U5,jsdelivr:F5,unpkg:K5,typings:$5,dependencies:j5,bundlesize:z5},ww=q5,up={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){up[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var zy={},H5=ww.version.split(".");function vw(r,e){for(var t=e?e.split("."):H5,n=r.split("."),i=0;i<3;i++){if(t[i]>n[i])return!0;if(t[i]<n[i])return!1}return!1}up.transitional=function(e,t,n){var i=t&&vw(t);function s(o,a){return"[Axios v"+ww.version+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,u){if(e===!1)throw new Error(s(a," has been removed in "+t));return i&&!zy[a]&&(zy[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,u):!0}};function W5(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],u=a===void 0||o(a,s,r);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(t!==!0)throw Error("Unknown option "+s)}}var G5={isOlderVersion:vw,assertOptions:W5,validators:up},_w=ri,V5=gw,qy=J4,Hy=S5,Sl=xw,Aw=G5,oa=Aw.validators;function mu(r){this.defaults=r,this.interceptors={request:new qy,response:new qy}}mu.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Sl(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Aw.assertOptions(t,{silentJSONParsing:oa.transitional(oa.boolean,"1.0.0"),forcedJSONParsing:oa.transitional(oa.boolean,"1.0.0"),clarifyTimeoutError:oa.transitional(oa.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(e)===!1||(i=i&&v.synchronous,n.unshift(v.fulfilled,v.rejected))});var s=[];this.interceptors.response.forEach(function(v){s.push(v.fulfilled,v.rejected)});var o;if(!i){var a=[Hy,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var u=e;n.length;){var d=n.shift(),h=n.shift();try{u=d(u)}catch(m){h(m);break}}try{o=Hy(u)}catch(m){return Promise.reject(m)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};mu.prototype.getUri=function(e){return e=Sl(this.defaults,e),V5(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};_w.forEach(["delete","get","head","options"],function(e){mu.prototype[e]=function(t,n){return this.request(Sl(n||{},{method:e,url:t,data:(n||{}).data}))}});_w.forEach(["post","put","patch"],function(e){mu.prototype[e]=function(t,n,i){return this.request(Sl(i||{},{method:e,url:t,data:n}))}});var J5=mu;function fp(r){this.message=r}fp.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};fp.prototype.__CANCEL__=!0;var Ew=fp,Y5=Ew;function Df(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new Y5(i),e(t.reason))})}Df.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Df.source=function(){var e,t=new Df(function(i){e=i});return{token:t,cancel:e}};var X5=Df,Z5=function(e){return function(n){return e.apply(null,n)}},Q5=function(e){return typeof e=="object"&&e.isAxiosError===!0},Wy=ri,e8=dw,gf=J5,t8=xw,r8=cp;function Sw(r){var e=new gf(r),t=e8(gf.prototype.request,e);return Wy.extend(t,gf.prototype,e),Wy.extend(t,e),t}var Mi=Sw(r8);Mi.Axios=gf;Mi.create=function(e){return Sw(t8(Mi.defaults,e))};Mi.Cancel=Ew;Mi.CancelToken=X5;Mi.isCancel=bw;Mi.all=function(e){return Promise.all(e)};Mi.spread=Z5;Mi.isAxiosError=Q5;sp.exports=Mi;sp.exports.default=Mi;var n8=sp.exports;(function(r){var e=z&&z.__createBinding||(Object.create?function(T,C,L,K){K===void 0&&(K=L),Object.defineProperty(T,K,{enumerable:!0,get:function(){return C[L]}})}:function(T,C,L,K){K===void 0&&(K=L),T[K]=C[L]}),t=z&&z.__setModuleDefault||(Object.create?function(T,C){Object.defineProperty(T,"default",{enumerable:!0,value:C})}:function(T,C){T.default=C}),n=z&&z.__importStar||function(T){if(T&&T.__esModule)return T;var C={};if(T!=null)for(var L in T)L!=="default"&&Object.prototype.hasOwnProperty.call(T,L)&&e(C,T,L);return t(C,T),C},i=z&&z.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(r,"__esModule",{value:!0}),r.MIN_BINARY_SIZE=void 0;const s=Kr,o=Yh,a=i(Oi.exports),u=Ve,d=Ii,h=Wa,m=tu,v=i(n8),_=Do,P=n(Qs),A=i(Bo);r.MIN_BINARY_SIZE=80;class E{constructor(C){this.binary=C}static isDataItem(C){return C.binary!==void 0}get signatureType(){const C=s.byteArrayToLong(this.binary.subarray(0,2));switch(C){case 1:return _.SignatureConfig.ARWEAVE;case 2:return _.SignatureConfig.ED25519;case 3:return _.SignatureConfig.ETHEREUM;case 4:return _.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+C)}}async isValid(){return E.verify(this.binary)}get id(){return a.default.encode(this.rawId)}set id(C){this._id=a.default.toBuffer(C)}get rawId(){return P.createHash("sha256").update(this.rawSignature).digest()}set rawId(C){this._id=C}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return a.default.encode(this.rawSignature)}get signatureLength(){return _.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return a.default.encode(this.rawOwner)}get ownerLength(){return _.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const C=this.getTargetStart();return this.binary[C]==1?this.binary.subarray(C+1,C+33):u.Buffer.alloc(0)}get target(){return a.default.encode(this.rawTarget)}get rawAnchor(){const C=this.getAnchorStart();return this.binary[C]==1?this.binary.subarray(C+1,C+33):u.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const C=this.getTagsStart(),L=s.byteArrayToLong(this.binary.subarray(C+8,C+16));return this.binary.subarray(C+16,C+16+L)}get tags(){const C=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(C,C+8))==0)return[];const K=s.byteArrayToLong(this.binary.subarray(C+8,C+16));return o.tagsParser.fromBuffer(u.Buffer.from(this.binary.subarray(C+16,C+16+K)))}get tagsB64Url(){return this.tags.map(L=>({name:a.default.encode(L.name),value:a.default.encode(L.value)}))}getStartOfData(){const C=this.getTagsStart(),L=this.binary.subarray(C+8,C+16),K=s.byteArrayToLong(L);return C+16+K}get rawData(){const C=this.getTagsStart(),L=this.binary.subarray(C+8,C+16),K=s.byteArrayToLong(L),O=C+16+K;return this.binary.subarray(O,this.binary.length)}get data(){return a.default.encode(this.rawData)}getRaw(){return this.binary}async sign(C){return this._id=await d.sign(this,C),this.rawId}async setSignature(C){this.binary.set(C,2),this._id=u.Buffer.from(await A.default.crypto.hash(C))}isSigned(){var C,L;return((L=(C=this._id)===null||C===void 0?void 0:C.length)!==null&&L!==void 0?L:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(C=>({name:a.default.encode(C.name),value:a.default.encode(C.value)})),data:this.data}}async sendToBundler(C){const L={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const K=await v.default.post(`${C}/tx`,this.getRaw(),{headers:L,timeout:1e5,maxBodyLength:1/0,validateStatus:O=>O>200&&O<300||O!==402});if(K.status===402)throw new Error("Not enough funds to send data");return K}static async verify(C){if(C.byteLength<r.MIN_BINARY_SIZE)return!1;const L=new E(C),K=L.signatureType,O=L.getTagsStart(),F=s.byteArrayToLong(C.subarray(O,O+8)),H=C.subarray(O+8,O+16),V=s.byteArrayToLong(H);if(V>4096)return!1;if(F>0)try{if(o.tagsParser.fromBuffer(u.Buffer.from(C.subarray(O+16,O+16+V))).length!==F)return!1}catch{return!1}const ie=h.indexToType[K],xe=await m.getSignatureData(L);return await ie.verify(L.rawOwner,xe,L.rawSignature)}async getSignatureData(){return m.getSignatureData(this)}getTagsStart(){const C=this.getTargetStart(),L=this.binary[C]==1;let K=C+(L?33:1);return K+=this.binary[K]==1?33:1,K}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let C=this.getTargetStart()+1;return C+=this.binary[this.getTargetStart()]==1?32:0,C}}r.default=E})(Zf);var kw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xf,"__esModule",{value:!0});const Ju=kw(Oi.exports),go=Kr,_d=kw(Zf),i8=Qs,Fi=32;class s8{constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let t=Fi;t<Fi+64*this.length;t+=64)e.push(go.byteArrayToLong(this.binary.subarray(t,t+32)));return e}getIds(){const e=[];for(let t=Fi;t<Fi+64*this.length;t+=64)e.push(Ju.default.encode(this.binary.subarray(t+32,t+64)));return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const t=64+64*e;return Ju.default.encode(this.binary.subarray(t,t+32))}async toTransaction(e,t,n){const i=await t.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const t=await e.isValid(),n=Ju.default(i8.createHash("sha256").update(e.rawSignature).digest());if(!(t&&e.id===n))return!1}return!0}getOffset(e){let t=0;for(let n=Fi;n<Fi+64*this.length;n+=64){const i=go.byteArrayToLong(this.binary.subarray(n,n+32));t+=i;const s=this.binary.subarray(n+32,n+64);if(go.arraybufferEqual(s,e))return{startOffset:t,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let t=0;const n=32+64*e,i=go.byteArrayToLong(this.binary.subarray(n,n+32));let s=0;for(let h=Fi;h<Fi+64*this.length&&s!=e;h+=64)t+=go.byteArrayToLong(this.binary.subarray(h,h+32)),s++;const a=this.getBundleStart()+t,u=this.binary.subarray(a,a+i+200),d=new _d.default(u);return d.rawId=this.binary.slice(32+64*e,64+64*e),d}getById(e){const t=Ju.default.toBuffer(e),n=this.getOffset(t);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new _d.default(this.binary.subarray(s,s+n.size))}getDataItemCount(){return go.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let t=0;const n=this.getBundleStart();let i=0;for(let s=Fi;s<Fi+64*this.length;s+=64){const o=go.byteArrayToLong(this.binary.subarray(s,s+32)),a=this.binary.subarray(s+32,s+64),u=n+t,d=this.binary.subarray(u,u+o);t+=o;const h=new _d.default(d);h.rawId=a,e[i]=h,i++}return e}}Xf.default=s8;var Tw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.sign=Ii.getSignatureAndId=Ii.bundleAndSignData=Ii.unbundleData=void 0;const o8=tu,Gy=Kr,a8=Tw(Bo),Iw=Tw(Xf);function c8(r){return new Iw.default(r)}Ii.unbundleData=c8;async function u8(r,e){const t=new Uint8Array(64*r.length),n=await Promise.all(r.map(async(s,o)=>{const a=s.isSigned()?s.rawId:await Rw(s,e),u=new Uint8Array(64);return u.set(Gy.longTo32ByteArray(s.getRaw().byteLength),0),u.set(a,32),t.set(u,64*o),s.getRaw()})).then(s=>J.Buffer.concat(s)),i=J.Buffer.concat([Gy.longTo32ByteArray(r.length),t,n]);return new Iw.default(i)}Ii.bundleAndSignData=u8;async function Pw(r,e){const t=await o8.getSignatureData(r),n=await e.sign(t),i=await a8.default.crypto.hash(n);return{signature:J.Buffer.from(n),id:J.Buffer.from(i)}}Ii.getSignatureAndId=Pw;async function Rw(r,e){const{signature:t,id:n}=await Pw(r,e);return r.getRaw().set(t,2),n}Ii.sign=Rw;var kl={},lp=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kl,"__esModule",{value:!0});kl.createData=void 0;const Ad=lp(jv.exports),f8=lp(Oi.exports),Ed=Kr,l8=lp(Zf),d8=Yh;function h8(r,e,t){var n,i,s,o,a,u,d;const h=e.publicKey,m=t!=null&&t.target?f8.default.toBuffer(t.target):null,v=1+((n=m==null?void 0:m.byteLength)!==null&&n!==void 0?n:0),_=t!=null&&t.anchor?J.Buffer.from(t.anchor):null,P=1+((i=_==null?void 0:_.byteLength)!==null&&i!==void 0?i:0),A=((o=(s=t==null?void 0:t.tags)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)>0?d8.serializeTags(t.tags):null,E=16+(A?A.byteLength:0),T=typeof r=="string"?J.Buffer.from(r):J.Buffer.from(r),C=T.byteLength,L=2+e.signatureLength+e.ownerLength+v+P+E+C,K=J.Buffer.alloc(L);K.set(Ed.shortTo2ByteArray(e.signatureType),0),K.set(new Uint8Array(e.signatureLength).fill(0),2),Ad.default(h.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${h.byteLength}`)),K.set(h,2+e.signatureLength);const O=2+e.signatureLength+e.ownerLength;K[O]=m?1:0,m&&(Ad.default(m.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),K.set(m,O+1));const F=O+v;let H=F+1;K[F]=_?1:0,_&&(H+=_.byteLength,Ad.default(_.byteLength==32,new Error("Anchor must be 32 bytes")),K.set(_,F+1)),K.set(Ed.longTo8ByteArray((u=(a=t==null?void 0:t.tags)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0),H);const V=Ed.longTo8ByteArray((d=A==null?void 0:A.byteLength)!==null&&d!==void 0?d:0);K.set(V,H+8),A&&K.set(A,H+16);const ie=H+E;return K.set(T,ie),new l8.default(K)}kl.createData=h8;(function(r){var e=z&&z.__createBinding||(Object.create?function(P,A,E,T){T===void 0&&(T=E),Object.defineProperty(P,T,{enumerable:!0,get:function(){return A[E]}})}:function(P,A,E,T){T===void 0&&(T=E),P[T]=A[E]}),t=z&&z.__setModuleDefault||(Object.create?function(P,A){Object.defineProperty(P,"default",{enumerable:!0,value:A})}:function(P,A){P.default=A}),n=z&&z.__importStar||function(P){if(P&&P.__esModule)return P;var A={};if(P!=null)for(var E in P)E!=="default"&&Object.prototype.hasOwnProperty.call(P,E)&&e(A,P,E);return t(A,P),A},i=z&&z.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.signers=r.deepHash=r.unbundleData=r.bundleAndSignData=r.createData=r.DataItem=r.Bundle=r.MIN_BINARY_SIZE=void 0;const s=Ii;Object.defineProperty(r,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(r,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const o=i(Xf);r.Bundle=o.default;const a=n(Zf);r.DataItem=a.default,Object.defineProperty(r,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return a.MIN_BINARY_SIZE}});const u=vs;Object.defineProperty(r,"deepHash",{enumerable:!0,get:function(){return u.deepHash}});const d=kl;Object.defineProperty(r,"createData",{enumerable:!0,get:function(){return d.createData}});const h=Wa,m=i(Xa),v=i(Ga),_={ArweaveSigner:h.ArweaveSigner,SolanaSigner:m.default,EthereumSigner:v.default};r.signers=_})(eu);var Ho={};(function(r){var e=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0}),r.sleep=void 0;const t=e(to);t.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(o=>setTimeout(o,s));r.sleep=n;class i{constructor(o,a,u){this.api=o,this.currency=a,this.currencyConfig=u}static checkAndThrow(o,a,u){if((o==null?void 0:o.status)&&!(u??[]).includes(o.status)&&o.status!=200)throw new Error(`HTTP Error: ${a}: ${o.status} ${typeof o.data!="string"?o.statusText:o.data}`)}async getNonce(){const o=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(o,"Getting withdrawal nonce"),o.data}async getBalance(o){const a=await this.api.get(`/account/balance/${this.currency}?address=${o}`);return i.checkAndThrow(a,"Getting balance"),new t.default(a.data.balance)}async getBundlerAddress(o){const a=await this.api.get("/info");i.checkAndThrow(a,"Getting Bundler address");const u=a.data.addresses[o];if(!u)throw new Error(`Specified bundler does not support currency ${o}`);return u}async getPrice(o,a){const u=await this.api.get(`/price/${o}/${a}`);return i.checkAndThrow(u,"Getting storage cost"),new t.default(u.data)}async confirmationPoll(o){if(!this.currencyConfig.isSlow){for(let a=0;a<30;a++)if(await(0,r.sleep)(1e3),await this.currencyConfig.getTx(o).then(u=>u==null?void 0:u.confirmed).catch(u=>!1))return;console.warn(`Tx ${o} didn't finalize after 30 seconds`)}}unitConverter(o){return new t.default(o).dividedBy(this.currencyConfig.base[1])}}r.default=i})(Ho);var dp=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.withdrawBalance=void 0;const Vy=eu,aa=mr,p8=dp(Ho),g8=dp(to),ca=dp(Oi.exports);async function y8(r,e,t){const n=r.currencyConfig,s={publicKey:await n.getPublicKey(),currency:r.currency,amount:new g8.default(t).toString(),nonce:await r.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},o=await(0,Vy.deepHash)([(0,aa.stringToBuffer)(s.currency),(0,aa.stringToBuffer)(s.amount.toString()),(0,aa.stringToBuffer)(s.nonce.toString())]);J.Buffer.isBuffer(s.publicKey)||(s.publicKey=J.Buffer.from(s.publicKey)),s.signature=await n.sign(o);const a=await n.verify(s.publicKey,o,s.signature);s.publicKey=ca.default.encode(s.publicKey),s.signature=ca.default.encode(s.signature);const u=ca.default.toBuffer(s.publicKey),d=ca.default.toBuffer(s.signature),h=await(0,Vy.deepHash)([(0,aa.stringToBuffer)(s.currency),(0,aa.stringToBuffer)(s.amount.toString()),(0,aa.stringToBuffer)(s.nonce.toString())]),m=await n.verify(u,h,d),v=n.ownerToAddress(n.name=="arweave"?ca.default.decode(s.publicKey):ca.default.toBuffer(s.publicKey))===n.address;if(!(a||m||v))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const _=await e.post("/account/withdraw",s);return p8.default.checkAndThrow(_,"Withdrawing balance"),_}Gf.withdrawBalance=y8;var hp={},m8=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hp,"__esModule",{value:!0});const Jy=eu,b8=m8(Qs);class x8 extends Jy.DataItem{constructor(e,t,n){var i;super((0,Jy.createData)(e,t.currencyConfig.getSigner(),{...n,anchor:(i=n==null?void 0:n.anchor)!==null&&i!==void 0?i:b8.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=t,this.signer=t.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}hp.default=x8;var w8=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oh,"__esModule",{value:!0});const v8=Gf,_8=w8(hp);class A8{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,v8.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,t){return this.funder.fund(e,t)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,t){return new _8.default(e,this,t)}getSigner(){return this.currencyConfig.getSigner()}}Oh.default=A8;var pp={},Cw={};function yi(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var E8=yi;yi.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};yi.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};yi.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};yi.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};yi.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};yi.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};yi.prototype.start=yi.prototype.try;yi.prototype.errors=function(){return this._errors};yi.prototype.attempts=function(){return this._attempts};yi.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(r[s]||0)+1;r[s]=o,o>=t&&(e=i,t=o)}return e};(function(r){var e=E8;r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)n[i]=t[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return t&&t.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(a,u){return a-u}),s},r.createTimeout=function(t,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return s=Math.min(s,n.maxTimeout),s},r.wrap=function(t,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in t)typeof t[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var a=i[o],u=t[a];t[a]=function(h){var m=r.operation(n),v=Array.prototype.slice.call(arguments,1),_=v.pop();v.push(function(P){m.retry(P)||(P&&(arguments[0]=m.mainError()),_.apply(this,arguments))}),m.attempt(function(){h.apply(t,v)})}.bind(t,u),t[a].options=n}}})(Cw);var S8=Cw,k8=S8;function T8(r,e){function t(n,i){var s=e||{},o;"randomize"in s||(s.randomize=!0),o=k8.operation(s);function a(h){i(h||new Error("Aborted"))}function u(h,m){if(h.bail){a(h);return}o.retry(h)?s.onRetry&&s.onRetry(h,m):i(o.mainError())}function d(h){var m;try{m=r(a,h)}catch(v){u(v,h);return}Promise.resolve(m).then(n).catch(function(_){u(_,h)})}o.attempt(d)}return new Promise(t)}var Tl=T8,gp=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pp,"__esModule",{value:!0});const I8=gp(Tl),P8=gp(to),Yy=gp(Ho);class R8{constructor(e){this.utils=e}async fund(e,t=1){const n=new P8.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let o="0";i.needsFee&&(o=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(t).toFixed(0).toString());const a=await i.createTx(n,s,o);let u;try{u=await i.sendTx(a.tx)}catch(h){throw h}if(a.txId||(a.txId=u),Yy.default.checkAndThrow(u,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(a.txId),!await(0,I8.default)(async h=>{const m=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:a.txId});return m.status==400&&h(new Error(`failed to post funding tx - ${a.txId} (keep this id!) - ${m.data}`)),Yy.default.checkAndThrow(m,`Posting transaction ${a.txId} information to the bundler`,[202]),m},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${a.txId} - keep this id!`);return{reward:o,target:s,quantity:n.toString(),id:a.txId}}}pp.default=R8;var bu={},Mw={},Na={},Il={},xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.PromisePoolError=void 0;class C8 extends Error{constructor(e,t){super(),this.raw=e,this.item=t,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,t){return new this(e,t)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}xu.PromisePoolError=C8;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.StopThePromisePoolError=void 0;class M8 extends Error{}wu.StopThePromisePoolError=M8;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.ValidationError=void 0;class B8 extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}vu.ValidationError=B8;Object.defineProperty(Il,"__esModule",{value:!0});Il.PromisePoolExecutor=void 0;const Xy=Na,Zy=xu,Qy=wu,Ls=vu;class N8{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(e){if(!this.isValidConcurrency(e))throw Ls.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${e}" (${typeof e})`);return this.meta.concurrency=e,this}isValidConcurrency(e){return typeof e=="number"&&e>=1}withTaskTimeout(e){return this.meta.taskTimeout=e,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(e){return this.meta.shouldResultsCorrespond=e,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(e){return this.meta.items=e,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(e){return this.handler=e,this}hasErrorHandler(){return!!this.errorHandler}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers=e,this}onTaskFinished(e){return this.onTaskFinishedHandlers=e,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new Qy.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw Ls.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const e=this.taskTimeout();if(!(e==null||typeof e=="number"&&e>=0))throw Ls.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(e)}" (${typeof e})`);if(!Array.isArray(this.items()))throw Ls.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw Ls.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(t=>{if(t&&typeof t!="function")throw Ls.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof t}"`)}),this.onTaskFinishedHandlers.forEach(t=>{if(t&&typeof t!="function")throw Ls.ValidationError.createFrom(`The error handler must be a function. Received "${typeof t}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill(Xy.PromisePool.notRun)),this}async process(){for(const[e,t]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(t,e)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(e,t){const n=this.createTaskFor(e,t).then(i=>{this.save(i,t).removeActive(n)}).catch(async i=>{await this.handleErrorFor(i,e,t),this.removeActive(n)}).finally(()=>{this.processedItems().push(e),this.runOnTaskFinishedHandlers(e)});this.tasks().push(n),this.runOnTaskStartedHandlers(e)}async createTaskFor(e,t){return this.taskTimeout()===void 0?this.handler(e,t,this):Promise.race([this.handler(e,t,this),this.createTaskTimeout(e)])}async createTaskTimeout(e){return new Promise((t,n)=>{setTimeout(()=>{n(new Zy.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,e))},this.taskTimeout())})}save(e,t){return this.shouldUseCorrespondingResults()?this.results()[t]=e:this.results().push(e),this}removeActive(e){return this.tasks().splice(this.tasks().indexOf(e),1),this}async handleErrorFor(e,t,n){if(this.shouldUseCorrespondingResults()&&(this.results()[n]=Xy.PromisePool.failed),!this.isStoppingThePoolError(e)){if(this.isValidationError(e))throw this.markAsStopped(),e;this.hasErrorHandler()?await this.runErrorHandlerFor(e,t):this.saveErrorFor(e,t)}}isStoppingThePoolError(e){return e instanceof Qy.StopThePromisePoolError}isValidationError(e){return e instanceof Ls.ValidationError}async runErrorHandlerFor(e,t){var n;try{await((n=this.errorHandler)===null||n===void 0?void 0:n.call(this,e,t,this))}catch(i){this.rethrowIfNotStoppingThePool(i)}}runOnTaskStartedHandlers(e){this.onTaskStartedHandlers.forEach(t=>{t(e,this)})}runOnTaskFinishedHandlers(e){this.onTaskFinishedHandlers.forEach(t=>{t(e,this)})}rethrowIfNotStoppingThePool(e){if(!this.isStoppingThePoolError(e))throw e}saveErrorFor(e,t){this.errors().push(Zy.PromisePoolError.createFrom(e,t))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}Il.PromisePoolExecutor=N8;Object.defineProperty(Na,"__esModule",{value:!0});Na.PromisePool=void 0;const O8=Il;class Oa{constructor(e){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=e??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(e){return this.concurrency=e,this}static withConcurrency(e){return new this().withConcurrency(e)}withTaskTimeout(e){return this.timeout=e,this}static withTaskTimeout(e){return new this().withTaskTimeout(e)}for(e){return typeof this.timeout=="number"?new Oa(e).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new Oa(e).withConcurrency(this.concurrency)}static for(e){return new this().for(e)}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers.push(e),this}onTaskFinished(e){return this.onTaskFinishedHandlers.push(e),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(e){return new O8.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(e).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}Na.PromisePool=Oa;Oa.notRun=Symbol("notRun");Oa.failed=Symbol("failed");var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});(function(r){var e=z&&z.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,a,u)}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),t=z&&z.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(r,"__esModule",{value:!0});const n=Na;r.default=n.PromisePool,t(Bw,r),t(Na,r),t(xu,r),t(Nw,r),t(wu,r),t(vu,r)})(Mw);var Pl={},Ow={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.STATES=void 0;const e=Symbol("not readable"),t=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");r.STATES={notReadable:e,readable:t,ended:n,errored:i};class s{constructor(a,{size:u}={}){this._state=r.STATES.notReadable,this._rejections=new Set,this._stream=a,this._size=u;const d=["_handleStreamEnd","_handleStreamError"];for(const h of d)Object.defineProperty(this,h,{configurable:!0,writable:!0,value:this[h].bind(this)});a.once("error",this._handleStreamError),a.once("end",this._handleStreamEnd),a.on("readable",()=>{this._state=r.STATES.readable})}get closed(){return this._state===r.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case r.STATES.notReadable:{let a,u;try{a=this._untilReadable(),u=this._untilEnd(),await Promise.race([a.promise,u.promise])}finally{a!=null&&a.close(),u!=null&&u.close()}return this.next()}case r.STATES.ended:return this.close(),{done:!0,value:void 0};case r.STATES.errored:throw this.close(),this._error;case r.STATES.readable:{const a=this._size?this._stream.read(this._size):this._stream.read();return a!==null?{done:!1,value:a}:(this._state=r.STATES.notReadable,await new Promise(u=>setTimeout(d=>d(!0),0,u)),this.next())}}}_untilReadable(){let a;const u=new Promise((h,m)=>{a=()=>{this._state=r.STATES.readable,this._rejections.delete(m),h()},this._state,r.STATES.readable,this._stream.once("readable",a),this._rejections.add(m)});return{close:()=>{a!=null&&this._stream.removeListener("readable",a)},promise:u}}_untilEnd(){let a;const u=new Promise((h,m)=>{a=()=>{this._state=r.STATES.ended,this._rejections.delete(m),h()},this._stream.once("end",a),this._rejections.add(m)});return{close:()=>{a!=null&&this._stream.removeListener("end",a)},promise:u}}return(){return this._state=r.STATES.ended,this.next()}throw(a){return this._error=a,this._state=r.STATES.errored,this.next()}close(a){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=r.STATES.ended,this._stream.destroy(a)}_handleStreamError(a){this._error=a,this._state=r.STATES.errored;for(const u of this._rejections)u(a)}_handleStreamEnd(){this._state=r.STATES.ended}get state(){return this._state}}r.default=s})(Ow);var Rl=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.ChunkingUploader=void 0;const Sd=eu,em=$f,L8=Jm.exports,kd=Rl(Ho),D8=Rl(Qs),Td=Yt,U8=Rl(Tl),F8=Rl(Ow);class K8 extends L8.EventEmitter{constructor(e,t){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=t,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return Sd.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,t){return this.runUpload(e,{...t})}async runUpload(e,t){var n,i,s;let o=this.uploadID;const a=t===void 0,u={"x-chunking-version":"2"};let d;if(!o)d=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:u}),kd.default.checkAndThrow(d,"Getting upload token"),this.uploadID=o=d.data.id;else{if(d=await this.api.get(`/chunks/${this.currency}/${o}/-1`,{headers:u}),d.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(kd.default.checkAndThrow(d,"Getting upload info"),this.chunkSize!=+d.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+d.data.size}).`)}const{max:h,min:m}=d.data;if(this.chunkSize<+m||this.chunkSize>+h)throw new Error(`Chunk size out of allowed range: ${m} - ${h}`);let v=0;const _=(x,c,l)=>new Promise(y=>{(0,U8.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${o}/${c}`,x,{headers:{"Content-Type":"application/octet-stream",...u},maxBodyLength:1/0,maxContentLength:1/0}).then(w=>{if((w==null?void 0:w.status)>=300){const S={res:w,id:l,offset:c,size:x.length};throw this.emit("chunkError",S),S}this.emit("chunkUpload",{id:l,offset:c,size:x.length,totalUploaded:v+=x.length}),y({o:c,d:w})})})}),P=(n=d.data.chunks)!==null&&n!==void 0?n:[],A=new em.PassThrough;let E=J.Buffer.alloc(0),T=!1,C=!0;A.on("end",()=>T=!0),A.on("error",x=>{throw new Error(`Error processing readable: ${x}`)});const L=async x=>{for(;!T;){if(E.length>=x)return c=J.Buffer.from(E.slice(0,x)),E=E.slice(x),c;var c=A.read(x);if(c===null){await new Promise(l=>setTimeout(y=>y(!0),0,l));continue}if(c.length===x)return c;E=J.Buffer.concat([E,c])}for(;E.length>=x;)return c=J.Buffer.from(E.slice(0,x)),E=E.slice(x),c;return C=!1,E};let K;a||(K=(0,Sd.createData)("",this.currencyConfig.getSigner(),{...t,anchor:(i=t==null?void 0:t.anchor)!==null&&i!==void 0?i:D8.default.randomBytes(32).toString("base64").slice(0,32)}),A.write(K.getRaw()),v-=K.getRaw().length),J.Buffer.isBuffer(e)?(A.write(e),A.end()):e.pipe(A);let O=0,F=[],H=0,V,ie,xe;if(!a){ie=new em.PassThrough;const x=K.getRaw().length;V=await L(this.chunkSize),H++,O+=V.length,ie.write(V.slice(x));const c=[(0,Td.stringToBuffer)("dataitem"),(0,Td.stringToBuffer)("1"),(0,Td.stringToBuffer)(K.signatureType.toString()),K.rawOwner,K.rawTarget,K.rawAnchor,K.rawTags,new F8.default(ie)];xe=(0,Sd.deepHash)(c)}let ae=P.pop();for(;C;){if(this.paused&&await new Promise(c=>this.on("resume",()=>c(void 0))),ae&&+ae[0]-O<=this.chunkSize){const l=ae[1],y=await L(l);a||ie.write(y),O+=l,ae=P.pop(),H++,v+=l;continue}const x=await L(this.chunkSize);a||ie.write(x),F.length==this.batchSize&&(await Promise.all(F),F=[]),F.push(_(x,O,++H)),O+=x.length}if(ie&&ie.end(),await Promise.all(F),!a){const x=await xe,c=J.Buffer.from(await this.currencyConfig.getSigner().sign(x));V.set(c,2),await _(V,0,0)}const te=await this.api.post(`/chunks/${this.currency}/${o}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...u},timeout:this.api.config.timeout*10});if(te.status===402)throw new Error("Not enough funds to send data");return kd.default.checkAndThrow(te,"Finalising upload",[201]),te.status===201&&(te.data={id:(s=te.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",te),te}get completionPromise(){return new Promise(e=>this.on("done",e))}}Pl.ChunkingUploader=K8;var Lw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bu,"__esModule",{value:!0});bu.sleep=void 0;const $8=eu,j8=Lw(Mw),z8=Lw(Tl),q8=Pl,H8=r=>new Promise(e=>setTimeout(e,r));bu.sleep=H8;class W8{constructor(e,t,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=t}async upload(e,t){return await this.chunkedUploader.uploadData(e,t)}get chunkedUploader(){return new q8.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let t;const n=$8.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)t=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:o,timeout:a}=this.api.getConfig();t=await this.api.post(`${i}://${s}:${o}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:a,maxBodyLength:1/0}),t.status==201&&(t.data={id:e.id})}switch(t.status){case 402:throw new Error("Not enough funds to send data");default:if(t.status>=400)throw new Error(`whilst uploading DataItem: ${t.status} ${t.statusText}`)}return t}async concurrentUploader(e,t=5,n,i){const s=[],o=await j8.default.for(e).withConcurrency(t>=1?t:5).handleError(async(a,u)=>{if(s.push(a),a.message==="Not enough funds to send data")throw a}).process(async(a,u,d)=>{await(0,z8.default)(async h=>{try{const m=await this.processItem(a);return u%t==0&&await i(`Processed ${u} Items`),n?await n({item:a,res:m,i:u}):{item:a,res:m,i:u}}catch(m){throw m.message==="Not enough funds to send data"&&h(m),m}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:o.results}}async processItem(e){return typeof e=="string"&&(e=J.Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:t,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!t.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,o]of t.entries())i.paths[s]={id:o};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}bu.default=W8;var yp={},Cl={},fo={},Ml=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fo,"__esModule",{value:!0});fo.getRedstonePrice=void 0;const G8=Ml(Bo),V8=Ml(Oi.exports),J8=Ml(Nh),Y8=Ml(Ho);class X8{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return V8.default.encode(J.Buffer.from(await G8.default.crypto.hash(await e.rawSignature())))}async price(){return Dw(this.ticker)}}fo.default=X8;async function Dw(r){const e=await J8.default.get(`https://api.redstone.finance/prices?symbol=${r}&provider=redstone&limit=1`);return await Y8.default.checkAndThrow(e,"Getting price data"),e.data[0].value}fo.getRedstonePrice=Dw;var mp=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cl,"__esModule",{value:!0});const Z8=mp(p1),ph=wl,yo=mp(to),Uw=Wa,Q8=mp(fo),eT=ph.ethers.BigNumber,tT=Uw.InjectedEthereumSigner;class rT extends Q8.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new yo.default(n.blockNumber):null,amount:new yo.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,Z8.default)(J.Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new Uw.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,t,n){return tT.verify(e,t,n)}async getCurrentHeight(){const t=await this.providerInstance.send("eth_blockNumber",[]);return new yo.default(t,16)}async getFee(e,t){const n=this.providerInstance,i={to:t,from:this.address,value:"0x"+new yo.default(e).toString(16)},s=await n.estimateGas(i),o=await n.getGasPrice();return new yo.default(s.mul(o).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,t,n){const i=eT.from(new yo.default(e).toFixed()),s=this.w3signer,o=await s.estimateGas({to:t,from:this.address,value:i.toHexString()});let a=await s.getGasPrice();this.name==="matic"&&(a=ph.ethers.BigNumber.from(new yo.default(a.toString()).multipliedBy(10).decimalPlaces(0).toString()));const u=await s.populateTransaction({to:t,from:this.address,value:i.toHexString(),gasPrice:a,gasLimit:o});return{txId:void 0,tx:u}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new ph.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}Cl.default=rT;var bp={},Fw={},Kw={},Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.KeyStore=void 0;class nT{}Wo.KeyStore=nT;var _u={},ns={},$w={exports:{}};(function(r){(function(e){var t=function(k){var R,B=new Float64Array(16);if(k)for(R=0;R<k.length;R++)B[R]=k[R];return B},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=t(),a=t([1]),u=t([56129,1]),d=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),v=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(k,R,B,g){k[R]=B>>24&255,k[R+1]=B>>16&255,k[R+2]=B>>8&255,k[R+3]=B&255,k[R+4]=g>>24&255,k[R+5]=g>>16&255,k[R+6]=g>>8&255,k[R+7]=g&255}function A(k,R,B,g,N){var W,q=0;for(W=0;W<N;W++)q|=k[R+W]^B[g+W];return(1&q-1>>>8)-1}function E(k,R,B,g){return A(k,R,B,g,16)}function T(k,R,B,g){return A(k,R,B,g,32)}function C(k,R,B,g){for(var N=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,W=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,q=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,X=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,de=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,fe=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,ne=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,wt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,Se=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,Fe=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Ke=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,We=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,He=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,$e=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,ze=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,je=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,ke=N,Ce=W,we=q,Te=X,Ie=de,_e=fe,Z=ne,Q=wt,ce=Se,re=Fe,oe=Ke,ye=We,Ye=He,Et=$e,It=ze,St=je,$,Mt=0;Mt<20;Mt+=2)$=ke+Ye|0,Ie^=$<<7|$>>>32-7,$=Ie+ke|0,ce^=$<<9|$>>>32-9,$=ce+Ie|0,Ye^=$<<13|$>>>32-13,$=Ye+ce|0,ke^=$<<18|$>>>32-18,$=_e+Ce|0,re^=$<<7|$>>>32-7,$=re+_e|0,Et^=$<<9|$>>>32-9,$=Et+re|0,Ce^=$<<13|$>>>32-13,$=Ce+Et|0,_e^=$<<18|$>>>32-18,$=oe+Z|0,It^=$<<7|$>>>32-7,$=It+oe|0,we^=$<<9|$>>>32-9,$=we+It|0,Z^=$<<13|$>>>32-13,$=Z+we|0,oe^=$<<18|$>>>32-18,$=St+ye|0,Te^=$<<7|$>>>32-7,$=Te+St|0,Q^=$<<9|$>>>32-9,$=Q+Te|0,ye^=$<<13|$>>>32-13,$=ye+Q|0,St^=$<<18|$>>>32-18,$=ke+Te|0,Ce^=$<<7|$>>>32-7,$=Ce+ke|0,we^=$<<9|$>>>32-9,$=we+Ce|0,Te^=$<<13|$>>>32-13,$=Te+we|0,ke^=$<<18|$>>>32-18,$=_e+Ie|0,Z^=$<<7|$>>>32-7,$=Z+_e|0,Q^=$<<9|$>>>32-9,$=Q+Z|0,Ie^=$<<13|$>>>32-13,$=Ie+Q|0,_e^=$<<18|$>>>32-18,$=oe+re|0,ye^=$<<7|$>>>32-7,$=ye+oe|0,ce^=$<<9|$>>>32-9,$=ce+ye|0,re^=$<<13|$>>>32-13,$=re+ce|0,oe^=$<<18|$>>>32-18,$=St+It|0,Ye^=$<<7|$>>>32-7,$=Ye+St|0,Et^=$<<9|$>>>32-9,$=Et+Ye|0,It^=$<<13|$>>>32-13,$=It+Et|0,St^=$<<18|$>>>32-18;ke=ke+N|0,Ce=Ce+W|0,we=we+q|0,Te=Te+X|0,Ie=Ie+de|0,_e=_e+fe|0,Z=Z+ne|0,Q=Q+wt|0,ce=ce+Se|0,re=re+Fe|0,oe=oe+Ke|0,ye=ye+We|0,Ye=Ye+He|0,Et=Et+$e|0,It=It+ze|0,St=St+je|0,k[0]=ke>>>0&255,k[1]=ke>>>8&255,k[2]=ke>>>16&255,k[3]=ke>>>24&255,k[4]=Ce>>>0&255,k[5]=Ce>>>8&255,k[6]=Ce>>>16&255,k[7]=Ce>>>24&255,k[8]=we>>>0&255,k[9]=we>>>8&255,k[10]=we>>>16&255,k[11]=we>>>24&255,k[12]=Te>>>0&255,k[13]=Te>>>8&255,k[14]=Te>>>16&255,k[15]=Te>>>24&255,k[16]=Ie>>>0&255,k[17]=Ie>>>8&255,k[18]=Ie>>>16&255,k[19]=Ie>>>24&255,k[20]=_e>>>0&255,k[21]=_e>>>8&255,k[22]=_e>>>16&255,k[23]=_e>>>24&255,k[24]=Z>>>0&255,k[25]=Z>>>8&255,k[26]=Z>>>16&255,k[27]=Z>>>24&255,k[28]=Q>>>0&255,k[29]=Q>>>8&255,k[30]=Q>>>16&255,k[31]=Q>>>24&255,k[32]=ce>>>0&255,k[33]=ce>>>8&255,k[34]=ce>>>16&255,k[35]=ce>>>24&255,k[36]=re>>>0&255,k[37]=re>>>8&255,k[38]=re>>>16&255,k[39]=re>>>24&255,k[40]=oe>>>0&255,k[41]=oe>>>8&255,k[42]=oe>>>16&255,k[43]=oe>>>24&255,k[44]=ye>>>0&255,k[45]=ye>>>8&255,k[46]=ye>>>16&255,k[47]=ye>>>24&255,k[48]=Ye>>>0&255,k[49]=Ye>>>8&255,k[50]=Ye>>>16&255,k[51]=Ye>>>24&255,k[52]=Et>>>0&255,k[53]=Et>>>8&255,k[54]=Et>>>16&255,k[55]=Et>>>24&255,k[56]=It>>>0&255,k[57]=It>>>8&255,k[58]=It>>>16&255,k[59]=It>>>24&255,k[60]=St>>>0&255,k[61]=St>>>8&255,k[62]=St>>>16&255,k[63]=St>>>24&255}function L(k,R,B,g){for(var N=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,W=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,q=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,X=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,de=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,fe=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,ne=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,wt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,Se=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,Fe=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Ke=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,We=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,He=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,$e=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,ze=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,je=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,ke=N,Ce=W,we=q,Te=X,Ie=de,_e=fe,Z=ne,Q=wt,ce=Se,re=Fe,oe=Ke,ye=We,Ye=He,Et=$e,It=ze,St=je,$,Mt=0;Mt<20;Mt+=2)$=ke+Ye|0,Ie^=$<<7|$>>>32-7,$=Ie+ke|0,ce^=$<<9|$>>>32-9,$=ce+Ie|0,Ye^=$<<13|$>>>32-13,$=Ye+ce|0,ke^=$<<18|$>>>32-18,$=_e+Ce|0,re^=$<<7|$>>>32-7,$=re+_e|0,Et^=$<<9|$>>>32-9,$=Et+re|0,Ce^=$<<13|$>>>32-13,$=Ce+Et|0,_e^=$<<18|$>>>32-18,$=oe+Z|0,It^=$<<7|$>>>32-7,$=It+oe|0,we^=$<<9|$>>>32-9,$=we+It|0,Z^=$<<13|$>>>32-13,$=Z+we|0,oe^=$<<18|$>>>32-18,$=St+ye|0,Te^=$<<7|$>>>32-7,$=Te+St|0,Q^=$<<9|$>>>32-9,$=Q+Te|0,ye^=$<<13|$>>>32-13,$=ye+Q|0,St^=$<<18|$>>>32-18,$=ke+Te|0,Ce^=$<<7|$>>>32-7,$=Ce+ke|0,we^=$<<9|$>>>32-9,$=we+Ce|0,Te^=$<<13|$>>>32-13,$=Te+we|0,ke^=$<<18|$>>>32-18,$=_e+Ie|0,Z^=$<<7|$>>>32-7,$=Z+_e|0,Q^=$<<9|$>>>32-9,$=Q+Z|0,Ie^=$<<13|$>>>32-13,$=Ie+Q|0,_e^=$<<18|$>>>32-18,$=oe+re|0,ye^=$<<7|$>>>32-7,$=ye+oe|0,ce^=$<<9|$>>>32-9,$=ce+ye|0,re^=$<<13|$>>>32-13,$=re+ce|0,oe^=$<<18|$>>>32-18,$=St+It|0,Ye^=$<<7|$>>>32-7,$=Ye+St|0,Et^=$<<9|$>>>32-9,$=Et+Ye|0,It^=$<<13|$>>>32-13,$=It+Et|0,St^=$<<18|$>>>32-18;k[0]=ke>>>0&255,k[1]=ke>>>8&255,k[2]=ke>>>16&255,k[3]=ke>>>24&255,k[4]=_e>>>0&255,k[5]=_e>>>8&255,k[6]=_e>>>16&255,k[7]=_e>>>24&255,k[8]=oe>>>0&255,k[9]=oe>>>8&255,k[10]=oe>>>16&255,k[11]=oe>>>24&255,k[12]=St>>>0&255,k[13]=St>>>8&255,k[14]=St>>>16&255,k[15]=St>>>24&255,k[16]=Z>>>0&255,k[17]=Z>>>8&255,k[18]=Z>>>16&255,k[19]=Z>>>24&255,k[20]=Q>>>0&255,k[21]=Q>>>8&255,k[22]=Q>>>16&255,k[23]=Q>>>24&255,k[24]=ce>>>0&255,k[25]=ce>>>8&255,k[26]=ce>>>16&255,k[27]=ce>>>24&255,k[28]=re>>>0&255,k[29]=re>>>8&255,k[30]=re>>>16&255,k[31]=re>>>24&255}function K(k,R,B,g){C(k,R,B,g)}function O(k,R,B,g){L(k,R,B,g)}var F=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function H(k,R,B,g,N,W,q){var X=new Uint8Array(16),de=new Uint8Array(64),fe,ne;for(ne=0;ne<16;ne++)X[ne]=0;for(ne=0;ne<8;ne++)X[ne]=W[ne];for(;N>=64;){for(K(de,X,q,F),ne=0;ne<64;ne++)k[R+ne]=B[g+ne]^de[ne];for(fe=1,ne=8;ne<16;ne++)fe=fe+(X[ne]&255)|0,X[ne]=fe&255,fe>>>=8;N-=64,R+=64,g+=64}if(N>0)for(K(de,X,q,F),ne=0;ne<N;ne++)k[R+ne]=B[g+ne]^de[ne];return 0}function V(k,R,B,g,N){var W=new Uint8Array(16),q=new Uint8Array(64),X,de;for(de=0;de<16;de++)W[de]=0;for(de=0;de<8;de++)W[de]=g[de];for(;B>=64;){for(K(q,W,N,F),de=0;de<64;de++)k[R+de]=q[de];for(X=1,de=8;de<16;de++)X=X+(W[de]&255)|0,W[de]=X&255,X>>>=8;B-=64,R+=64}if(B>0)for(K(q,W,N,F),de=0;de<B;de++)k[R+de]=q[de];return 0}function ie(k,R,B,g,N){var W=new Uint8Array(32);O(W,g,N,F);for(var q=new Uint8Array(8),X=0;X<8;X++)q[X]=g[X+16];return V(k,R,B,q,W)}function xe(k,R,B,g,N,W,q){var X=new Uint8Array(32);O(X,W,q,F);for(var de=new Uint8Array(8),fe=0;fe<8;fe++)de[fe]=W[fe+16];return H(k,R,B,g,N,de,X)}var ae=function(k){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var R,B,g,N,W,q,X,de;R=k[0]&255|(k[1]&255)<<8,this.r[0]=R&8191,B=k[2]&255|(k[3]&255)<<8,this.r[1]=(R>>>13|B<<3)&8191,g=k[4]&255|(k[5]&255)<<8,this.r[2]=(B>>>10|g<<6)&7939,N=k[6]&255|(k[7]&255)<<8,this.r[3]=(g>>>7|N<<9)&8191,W=k[8]&255|(k[9]&255)<<8,this.r[4]=(N>>>4|W<<12)&255,this.r[5]=W>>>1&8190,q=k[10]&255|(k[11]&255)<<8,this.r[6]=(W>>>14|q<<2)&8191,X=k[12]&255|(k[13]&255)<<8,this.r[7]=(q>>>11|X<<5)&8065,de=k[14]&255|(k[15]&255)<<8,this.r[8]=(X>>>8|de<<8)&8191,this.r[9]=de>>>5&127,this.pad[0]=k[16]&255|(k[17]&255)<<8,this.pad[1]=k[18]&255|(k[19]&255)<<8,this.pad[2]=k[20]&255|(k[21]&255)<<8,this.pad[3]=k[22]&255|(k[23]&255)<<8,this.pad[4]=k[24]&255|(k[25]&255)<<8,this.pad[5]=k[26]&255|(k[27]&255)<<8,this.pad[6]=k[28]&255|(k[29]&255)<<8,this.pad[7]=k[30]&255|(k[31]&255)<<8};ae.prototype.blocks=function(k,R,B){for(var g=this.fin?0:2048,N,W,q,X,de,fe,ne,wt,Se,Fe,Ke,We,He,$e,ze,je,ke,Ce,we,Te=this.h[0],Ie=this.h[1],_e=this.h[2],Z=this.h[3],Q=this.h[4],ce=this.h[5],re=this.h[6],oe=this.h[7],ye=this.h[8],Ye=this.h[9],Et=this.r[0],It=this.r[1],St=this.r[2],$=this.r[3],Mt=this.r[4],zt=this.r[5],qt=this.r[6],Pt=this.r[7],Kt=this.r[8],$t=this.r[9];B>=16;)N=k[R+0]&255|(k[R+1]&255)<<8,Te+=N&8191,W=k[R+2]&255|(k[R+3]&255)<<8,Ie+=(N>>>13|W<<3)&8191,q=k[R+4]&255|(k[R+5]&255)<<8,_e+=(W>>>10|q<<6)&8191,X=k[R+6]&255|(k[R+7]&255)<<8,Z+=(q>>>7|X<<9)&8191,de=k[R+8]&255|(k[R+9]&255)<<8,Q+=(X>>>4|de<<12)&8191,ce+=de>>>1&8191,fe=k[R+10]&255|(k[R+11]&255)<<8,re+=(de>>>14|fe<<2)&8191,ne=k[R+12]&255|(k[R+13]&255)<<8,oe+=(fe>>>11|ne<<5)&8191,wt=k[R+14]&255|(k[R+15]&255)<<8,ye+=(ne>>>8|wt<<8)&8191,Ye+=wt>>>5|g,Se=0,Fe=Se,Fe+=Te*Et,Fe+=Ie*(5*$t),Fe+=_e*(5*Kt),Fe+=Z*(5*Pt),Fe+=Q*(5*qt),Se=Fe>>>13,Fe&=8191,Fe+=ce*(5*zt),Fe+=re*(5*Mt),Fe+=oe*(5*$),Fe+=ye*(5*St),Fe+=Ye*(5*It),Se+=Fe>>>13,Fe&=8191,Ke=Se,Ke+=Te*It,Ke+=Ie*Et,Ke+=_e*(5*$t),Ke+=Z*(5*Kt),Ke+=Q*(5*Pt),Se=Ke>>>13,Ke&=8191,Ke+=ce*(5*qt),Ke+=re*(5*zt),Ke+=oe*(5*Mt),Ke+=ye*(5*$),Ke+=Ye*(5*St),Se+=Ke>>>13,Ke&=8191,We=Se,We+=Te*St,We+=Ie*It,We+=_e*Et,We+=Z*(5*$t),We+=Q*(5*Kt),Se=We>>>13,We&=8191,We+=ce*(5*Pt),We+=re*(5*qt),We+=oe*(5*zt),We+=ye*(5*Mt),We+=Ye*(5*$),Se+=We>>>13,We&=8191,He=Se,He+=Te*$,He+=Ie*St,He+=_e*It,He+=Z*Et,He+=Q*(5*$t),Se=He>>>13,He&=8191,He+=ce*(5*Kt),He+=re*(5*Pt),He+=oe*(5*qt),He+=ye*(5*zt),He+=Ye*(5*Mt),Se+=He>>>13,He&=8191,$e=Se,$e+=Te*Mt,$e+=Ie*$,$e+=_e*St,$e+=Z*It,$e+=Q*Et,Se=$e>>>13,$e&=8191,$e+=ce*(5*$t),$e+=re*(5*Kt),$e+=oe*(5*Pt),$e+=ye*(5*qt),$e+=Ye*(5*zt),Se+=$e>>>13,$e&=8191,ze=Se,ze+=Te*zt,ze+=Ie*Mt,ze+=_e*$,ze+=Z*St,ze+=Q*It,Se=ze>>>13,ze&=8191,ze+=ce*Et,ze+=re*(5*$t),ze+=oe*(5*Kt),ze+=ye*(5*Pt),ze+=Ye*(5*qt),Se+=ze>>>13,ze&=8191,je=Se,je+=Te*qt,je+=Ie*zt,je+=_e*Mt,je+=Z*$,je+=Q*St,Se=je>>>13,je&=8191,je+=ce*It,je+=re*Et,je+=oe*(5*$t),je+=ye*(5*Kt),je+=Ye*(5*Pt),Se+=je>>>13,je&=8191,ke=Se,ke+=Te*Pt,ke+=Ie*qt,ke+=_e*zt,ke+=Z*Mt,ke+=Q*$,Se=ke>>>13,ke&=8191,ke+=ce*St,ke+=re*It,ke+=oe*Et,ke+=ye*(5*$t),ke+=Ye*(5*Kt),Se+=ke>>>13,ke&=8191,Ce=Se,Ce+=Te*Kt,Ce+=Ie*Pt,Ce+=_e*qt,Ce+=Z*zt,Ce+=Q*Mt,Se=Ce>>>13,Ce&=8191,Ce+=ce*$,Ce+=re*St,Ce+=oe*It,Ce+=ye*Et,Ce+=Ye*(5*$t),Se+=Ce>>>13,Ce&=8191,we=Se,we+=Te*$t,we+=Ie*Kt,we+=_e*Pt,we+=Z*qt,we+=Q*zt,Se=we>>>13,we&=8191,we+=ce*Mt,we+=re*$,we+=oe*St,we+=ye*It,we+=Ye*Et,Se+=we>>>13,we&=8191,Se=(Se<<2)+Se|0,Se=Se+Fe|0,Fe=Se&8191,Se=Se>>>13,Ke+=Se,Te=Fe,Ie=Ke,_e=We,Z=He,Q=$e,ce=ze,re=je,oe=ke,ye=Ce,Ye=we,R+=16,B-=16;this.h[0]=Te,this.h[1]=Ie,this.h[2]=_e,this.h[3]=Z,this.h[4]=Q,this.h[5]=ce,this.h[6]=re,this.h[7]=oe,this.h[8]=ye,this.h[9]=Ye},ae.prototype.finish=function(k,R){var B=new Uint16Array(10),g,N,W,q;if(this.leftover){for(q=this.leftover,this.buffer[q++]=1;q<16;q++)this.buffer[q]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(g=this.h[1]>>>13,this.h[1]&=8191,q=2;q<10;q++)this.h[q]+=g,g=this.h[q]>>>13,this.h[q]&=8191;for(this.h[0]+=g*5,g=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=g,g=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=g,B[0]=this.h[0]+5,g=B[0]>>>13,B[0]&=8191,q=1;q<10;q++)B[q]=this.h[q]+g,g=B[q]>>>13,B[q]&=8191;for(B[9]-=1<<13,N=(g^1)-1,q=0;q<10;q++)B[q]&=N;for(N=~N,q=0;q<10;q++)this.h[q]=this.h[q]&N|B[q];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,W=this.h[0]+this.pad[0],this.h[0]=W&65535,q=1;q<8;q++)W=(this.h[q]+this.pad[q]|0)+(W>>>16)|0,this.h[q]=W&65535;k[R+0]=this.h[0]>>>0&255,k[R+1]=this.h[0]>>>8&255,k[R+2]=this.h[1]>>>0&255,k[R+3]=this.h[1]>>>8&255,k[R+4]=this.h[2]>>>0&255,k[R+5]=this.h[2]>>>8&255,k[R+6]=this.h[3]>>>0&255,k[R+7]=this.h[3]>>>8&255,k[R+8]=this.h[4]>>>0&255,k[R+9]=this.h[4]>>>8&255,k[R+10]=this.h[5]>>>0&255,k[R+11]=this.h[5]>>>8&255,k[R+12]=this.h[6]>>>0&255,k[R+13]=this.h[6]>>>8&255,k[R+14]=this.h[7]>>>0&255,k[R+15]=this.h[7]>>>8&255},ae.prototype.update=function(k,R,B){var g,N;if(this.leftover){for(N=16-this.leftover,N>B&&(N=B),g=0;g<N;g++)this.buffer[this.leftover+g]=k[R+g];if(B-=N,R+=N,this.leftover+=N,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(B>=16&&(N=B-B%16,this.blocks(k,R,N),R+=N,B-=N),B){for(g=0;g<B;g++)this.buffer[this.leftover+g]=k[R+g];this.leftover+=B}};function te(k,R,B,g,N,W){var q=new ae(W);return q.update(B,g,N),q.finish(k,R),0}function x(k,R,B,g,N,W){var q=new Uint8Array(16);return te(q,0,B,g,N,W),E(k,R,q,0)}function c(k,R,B,g,N){var W;if(B<32)return-1;for(xe(k,0,R,0,B,g,N),te(k,16,k,32,B-32,k),W=0;W<16;W++)k[W]=0;return 0}function l(k,R,B,g,N){var W,q=new Uint8Array(32);if(B<32||(ie(q,0,32,g,N),x(R,16,R,32,B-32,q)!==0))return-1;for(xe(k,0,R,0,B,g,N),W=0;W<32;W++)k[W]=0;return 0}function y(k,R){var B;for(B=0;B<16;B++)k[B]=R[B]|0}function w(k){var R,B,g=1;for(R=0;R<16;R++)B=k[R]+g+65535,g=Math.floor(B/65536),k[R]=B-g*65536;k[0]+=g-1+37*(g-1)}function S(k,R,B){for(var g,N=~(B-1),W=0;W<16;W++)g=N&(k[W]^R[W]),k[W]^=g,R[W]^=g}function I(k,R){var B,g,N,W=t(),q=t();for(B=0;B<16;B++)q[B]=R[B];for(w(q),w(q),w(q),g=0;g<2;g++){for(W[0]=q[0]-65517,B=1;B<15;B++)W[B]=q[B]-65535-(W[B-1]>>16&1),W[B-1]&=65535;W[15]=q[15]-32767-(W[14]>>16&1),N=W[15]>>16&1,W[14]&=65535,S(q,W,1-N)}for(B=0;B<16;B++)k[2*B]=q[B]&255,k[2*B+1]=q[B]>>8}function M(k,R){var B=new Uint8Array(32),g=new Uint8Array(32);return I(B,k),I(g,R),T(B,0,g,0)}function p(k){var R=new Uint8Array(32);return I(R,k),R[0]&1}function f(k,R){var B;for(B=0;B<16;B++)k[B]=R[2*B]+(R[2*B+1]<<8);k[15]&=32767}function b(k,R,B){for(var g=0;g<16;g++)k[g]=R[g]+B[g]}function U(k,R,B){for(var g=0;g<16;g++)k[g]=R[g]-B[g]}function D(k,R,B){var g,N,W=0,q=0,X=0,de=0,fe=0,ne=0,wt=0,Se=0,Fe=0,Ke=0,We=0,He=0,$e=0,ze=0,je=0,ke=0,Ce=0,we=0,Te=0,Ie=0,_e=0,Z=0,Q=0,ce=0,re=0,oe=0,ye=0,Ye=0,Et=0,It=0,St=0,$=B[0],Mt=B[1],zt=B[2],qt=B[3],Pt=B[4],Kt=B[5],$t=B[6],Rr=B[7],er=B[8],vr=B[9],_r=B[10],Ar=B[11],zr=B[12],dn=B[13],hn=B[14],pn=B[15];g=R[0],W+=g*$,q+=g*Mt,X+=g*zt,de+=g*qt,fe+=g*Pt,ne+=g*Kt,wt+=g*$t,Se+=g*Rr,Fe+=g*er,Ke+=g*vr,We+=g*_r,He+=g*Ar,$e+=g*zr,ze+=g*dn,je+=g*hn,ke+=g*pn,g=R[1],q+=g*$,X+=g*Mt,de+=g*zt,fe+=g*qt,ne+=g*Pt,wt+=g*Kt,Se+=g*$t,Fe+=g*Rr,Ke+=g*er,We+=g*vr,He+=g*_r,$e+=g*Ar,ze+=g*zr,je+=g*dn,ke+=g*hn,Ce+=g*pn,g=R[2],X+=g*$,de+=g*Mt,fe+=g*zt,ne+=g*qt,wt+=g*Pt,Se+=g*Kt,Fe+=g*$t,Ke+=g*Rr,We+=g*er,He+=g*vr,$e+=g*_r,ze+=g*Ar,je+=g*zr,ke+=g*dn,Ce+=g*hn,we+=g*pn,g=R[3],de+=g*$,fe+=g*Mt,ne+=g*zt,wt+=g*qt,Se+=g*Pt,Fe+=g*Kt,Ke+=g*$t,We+=g*Rr,He+=g*er,$e+=g*vr,ze+=g*_r,je+=g*Ar,ke+=g*zr,Ce+=g*dn,we+=g*hn,Te+=g*pn,g=R[4],fe+=g*$,ne+=g*Mt,wt+=g*zt,Se+=g*qt,Fe+=g*Pt,Ke+=g*Kt,We+=g*$t,He+=g*Rr,$e+=g*er,ze+=g*vr,je+=g*_r,ke+=g*Ar,Ce+=g*zr,we+=g*dn,Te+=g*hn,Ie+=g*pn,g=R[5],ne+=g*$,wt+=g*Mt,Se+=g*zt,Fe+=g*qt,Ke+=g*Pt,We+=g*Kt,He+=g*$t,$e+=g*Rr,ze+=g*er,je+=g*vr,ke+=g*_r,Ce+=g*Ar,we+=g*zr,Te+=g*dn,Ie+=g*hn,_e+=g*pn,g=R[6],wt+=g*$,Se+=g*Mt,Fe+=g*zt,Ke+=g*qt,We+=g*Pt,He+=g*Kt,$e+=g*$t,ze+=g*Rr,je+=g*er,ke+=g*vr,Ce+=g*_r,we+=g*Ar,Te+=g*zr,Ie+=g*dn,_e+=g*hn,Z+=g*pn,g=R[7],Se+=g*$,Fe+=g*Mt,Ke+=g*zt,We+=g*qt,He+=g*Pt,$e+=g*Kt,ze+=g*$t,je+=g*Rr,ke+=g*er,Ce+=g*vr,we+=g*_r,Te+=g*Ar,Ie+=g*zr,_e+=g*dn,Z+=g*hn,Q+=g*pn,g=R[8],Fe+=g*$,Ke+=g*Mt,We+=g*zt,He+=g*qt,$e+=g*Pt,ze+=g*Kt,je+=g*$t,ke+=g*Rr,Ce+=g*er,we+=g*vr,Te+=g*_r,Ie+=g*Ar,_e+=g*zr,Z+=g*dn,Q+=g*hn,ce+=g*pn,g=R[9],Ke+=g*$,We+=g*Mt,He+=g*zt,$e+=g*qt,ze+=g*Pt,je+=g*Kt,ke+=g*$t,Ce+=g*Rr,we+=g*er,Te+=g*vr,Ie+=g*_r,_e+=g*Ar,Z+=g*zr,Q+=g*dn,ce+=g*hn,re+=g*pn,g=R[10],We+=g*$,He+=g*Mt,$e+=g*zt,ze+=g*qt,je+=g*Pt,ke+=g*Kt,Ce+=g*$t,we+=g*Rr,Te+=g*er,Ie+=g*vr,_e+=g*_r,Z+=g*Ar,Q+=g*zr,ce+=g*dn,re+=g*hn,oe+=g*pn,g=R[11],He+=g*$,$e+=g*Mt,ze+=g*zt,je+=g*qt,ke+=g*Pt,Ce+=g*Kt,we+=g*$t,Te+=g*Rr,Ie+=g*er,_e+=g*vr,Z+=g*_r,Q+=g*Ar,ce+=g*zr,re+=g*dn,oe+=g*hn,ye+=g*pn,g=R[12],$e+=g*$,ze+=g*Mt,je+=g*zt,ke+=g*qt,Ce+=g*Pt,we+=g*Kt,Te+=g*$t,Ie+=g*Rr,_e+=g*er,Z+=g*vr,Q+=g*_r,ce+=g*Ar,re+=g*zr,oe+=g*dn,ye+=g*hn,Ye+=g*pn,g=R[13],ze+=g*$,je+=g*Mt,ke+=g*zt,Ce+=g*qt,we+=g*Pt,Te+=g*Kt,Ie+=g*$t,_e+=g*Rr,Z+=g*er,Q+=g*vr,ce+=g*_r,re+=g*Ar,oe+=g*zr,ye+=g*dn,Ye+=g*hn,Et+=g*pn,g=R[14],je+=g*$,ke+=g*Mt,Ce+=g*zt,we+=g*qt,Te+=g*Pt,Ie+=g*Kt,_e+=g*$t,Z+=g*Rr,Q+=g*er,ce+=g*vr,re+=g*_r,oe+=g*Ar,ye+=g*zr,Ye+=g*dn,Et+=g*hn,It+=g*pn,g=R[15],ke+=g*$,Ce+=g*Mt,we+=g*zt,Te+=g*qt,Ie+=g*Pt,_e+=g*Kt,Z+=g*$t,Q+=g*Rr,ce+=g*er,re+=g*vr,oe+=g*_r,ye+=g*Ar,Ye+=g*zr,Et+=g*dn,It+=g*hn,St+=g*pn,W+=38*Ce,q+=38*we,X+=38*Te,de+=38*Ie,fe+=38*_e,ne+=38*Z,wt+=38*Q,Se+=38*ce,Fe+=38*re,Ke+=38*oe,We+=38*ye,He+=38*Ye,$e+=38*Et,ze+=38*It,je+=38*St,N=1,g=W+N+65535,N=Math.floor(g/65536),W=g-N*65536,g=q+N+65535,N=Math.floor(g/65536),q=g-N*65536,g=X+N+65535,N=Math.floor(g/65536),X=g-N*65536,g=de+N+65535,N=Math.floor(g/65536),de=g-N*65536,g=fe+N+65535,N=Math.floor(g/65536),fe=g-N*65536,g=ne+N+65535,N=Math.floor(g/65536),ne=g-N*65536,g=wt+N+65535,N=Math.floor(g/65536),wt=g-N*65536,g=Se+N+65535,N=Math.floor(g/65536),Se=g-N*65536,g=Fe+N+65535,N=Math.floor(g/65536),Fe=g-N*65536,g=Ke+N+65535,N=Math.floor(g/65536),Ke=g-N*65536,g=We+N+65535,N=Math.floor(g/65536),We=g-N*65536,g=He+N+65535,N=Math.floor(g/65536),He=g-N*65536,g=$e+N+65535,N=Math.floor(g/65536),$e=g-N*65536,g=ze+N+65535,N=Math.floor(g/65536),ze=g-N*65536,g=je+N+65535,N=Math.floor(g/65536),je=g-N*65536,g=ke+N+65535,N=Math.floor(g/65536),ke=g-N*65536,W+=N-1+37*(N-1),N=1,g=W+N+65535,N=Math.floor(g/65536),W=g-N*65536,g=q+N+65535,N=Math.floor(g/65536),q=g-N*65536,g=X+N+65535,N=Math.floor(g/65536),X=g-N*65536,g=de+N+65535,N=Math.floor(g/65536),de=g-N*65536,g=fe+N+65535,N=Math.floor(g/65536),fe=g-N*65536,g=ne+N+65535,N=Math.floor(g/65536),ne=g-N*65536,g=wt+N+65535,N=Math.floor(g/65536),wt=g-N*65536,g=Se+N+65535,N=Math.floor(g/65536),Se=g-N*65536,g=Fe+N+65535,N=Math.floor(g/65536),Fe=g-N*65536,g=Ke+N+65535,N=Math.floor(g/65536),Ke=g-N*65536,g=We+N+65535,N=Math.floor(g/65536),We=g-N*65536,g=He+N+65535,N=Math.floor(g/65536),He=g-N*65536,g=$e+N+65535,N=Math.floor(g/65536),$e=g-N*65536,g=ze+N+65535,N=Math.floor(g/65536),ze=g-N*65536,g=je+N+65535,N=Math.floor(g/65536),je=g-N*65536,g=ke+N+65535,N=Math.floor(g/65536),ke=g-N*65536,W+=N-1+37*(N-1),k[0]=W,k[1]=q,k[2]=X,k[3]=de,k[4]=fe,k[5]=ne,k[6]=wt,k[7]=Se,k[8]=Fe,k[9]=Ke,k[10]=We,k[11]=He,k[12]=$e,k[13]=ze,k[14]=je,k[15]=ke}function G(k,R){D(k,R,R)}function be(k,R){var B=t(),g;for(g=0;g<16;g++)B[g]=R[g];for(g=253;g>=0;g--)G(B,B),g!==2&&g!==4&&D(B,B,R);for(g=0;g<16;g++)k[g]=B[g]}function le(k,R){var B=t(),g;for(g=0;g<16;g++)B[g]=R[g];for(g=250;g>=0;g--)G(B,B),g!==1&&D(B,B,R);for(g=0;g<16;g++)k[g]=B[g]}function ue(k,R,B){var g=new Uint8Array(32),N=new Float64Array(80),W,q,X=t(),de=t(),fe=t(),ne=t(),wt=t(),Se=t();for(q=0;q<31;q++)g[q]=R[q];for(g[31]=R[31]&127|64,g[0]&=248,f(N,B),q=0;q<16;q++)de[q]=N[q],ne[q]=X[q]=fe[q]=0;for(X[0]=ne[0]=1,q=254;q>=0;--q)W=g[q>>>3]>>>(q&7)&1,S(X,de,W),S(fe,ne,W),b(wt,X,fe),U(X,X,fe),b(fe,de,ne),U(de,de,ne),G(ne,wt),G(Se,X),D(X,fe,X),D(fe,de,wt),b(wt,X,fe),U(X,X,fe),G(de,X),U(fe,ne,Se),D(X,fe,u),b(X,X,ne),D(fe,fe,X),D(X,ne,Se),D(ne,de,N),G(de,wt),S(X,de,W),S(fe,ne,W);for(q=0;q<16;q++)N[q+16]=X[q],N[q+32]=fe[q],N[q+48]=de[q],N[q+64]=ne[q];var Fe=N.subarray(32),Ke=N.subarray(16);return be(Fe,Fe),D(Ke,Ke,Fe),I(k,Ke),0}function At(k,R){return ue(k,R,s)}function Me(k,R){return n(R,32),At(k,R)}function De(k,R,B){var g=new Uint8Array(32);return ue(g,B,R),O(k,i,g,F)}var jr=c,et=l;function ut(k,R,B,g,N,W){var q=new Uint8Array(32);return De(q,N,W),jr(k,R,B,g,q)}function Ur(k,R,B,g,N,W){var q=new Uint8Array(32);return De(q,N,W),et(k,R,B,g,q)}var pt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function gt(k,R,B,g){for(var N=new Int32Array(16),W=new Int32Array(16),q,X,de,fe,ne,wt,Se,Fe,Ke,We,He,$e,ze,je,ke,Ce,we,Te,Ie,_e,Z,Q,ce,re,oe,ye,Ye=k[0],Et=k[1],It=k[2],St=k[3],$=k[4],Mt=k[5],zt=k[6],qt=k[7],Pt=R[0],Kt=R[1],$t=R[2],Rr=R[3],er=R[4],vr=R[5],_r=R[6],Ar=R[7],zr=0;g>=128;){for(Ie=0;Ie<16;Ie++)_e=8*Ie+zr,N[Ie]=B[_e+0]<<24|B[_e+1]<<16|B[_e+2]<<8|B[_e+3],W[Ie]=B[_e+4]<<24|B[_e+5]<<16|B[_e+6]<<8|B[_e+7];for(Ie=0;Ie<80;Ie++)if(q=Ye,X=Et,de=It,fe=St,ne=$,wt=Mt,Se=zt,Fe=qt,Ke=Pt,We=Kt,He=$t,$e=Rr,ze=er,je=vr,ke=_r,Ce=Ar,Z=qt,Q=Ar,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=($>>>14|er<<32-14)^($>>>18|er<<32-18)^(er>>>41-32|$<<32-(41-32)),Q=(er>>>14|$<<32-14)^(er>>>18|$<<32-18)^($>>>41-32|er<<32-(41-32)),ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,Z=$&Mt^~$&zt,Q=er&vr^~er&_r,ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,Z=pt[Ie*2],Q=pt[Ie*2+1],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,Z=N[Ie%16],Q=W[Ie%16],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,we=oe&65535|ye<<16,Te=ce&65535|re<<16,Z=we,Q=Te,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=(Ye>>>28|Pt<<32-28)^(Pt>>>34-32|Ye<<32-(34-32))^(Pt>>>39-32|Ye<<32-(39-32)),Q=(Pt>>>28|Ye<<32-28)^(Ye>>>34-32|Pt<<32-(34-32))^(Ye>>>39-32|Pt<<32-(39-32)),ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,Z=Ye&Et^Ye&It^Et&It,Q=Pt&Kt^Pt&$t^Kt&$t,ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,Fe=oe&65535|ye<<16,Ce=ce&65535|re<<16,Z=fe,Q=$e,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=we,Q=Te,ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,fe=oe&65535|ye<<16,$e=ce&65535|re<<16,Et=q,It=X,St=de,$=fe,Mt=ne,zt=wt,qt=Se,Ye=Fe,Kt=Ke,$t=We,Rr=He,er=$e,vr=ze,_r=je,Ar=ke,Pt=Ce,Ie%16===15)for(_e=0;_e<16;_e++)Z=N[_e],Q=W[_e],ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=N[(_e+9)%16],Q=W[(_e+9)%16],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,we=N[(_e+1)%16],Te=W[(_e+1)%16],Z=(we>>>1|Te<<32-1)^(we>>>8|Te<<32-8)^we>>>7,Q=(Te>>>1|we<<32-1)^(Te>>>8|we<<32-8)^(Te>>>7|we<<32-7),ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,we=N[(_e+14)%16],Te=W[(_e+14)%16],Z=(we>>>19|Te<<32-19)^(Te>>>61-32|we<<32-(61-32))^we>>>6,Q=(Te>>>19|we<<32-19)^(we>>>61-32|Te<<32-(61-32))^(Te>>>6|we<<32-6),ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,N[_e]=oe&65535|ye<<16,W[_e]=ce&65535|re<<16;Z=Ye,Q=Pt,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[0],Q=R[0],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[0]=Ye=oe&65535|ye<<16,R[0]=Pt=ce&65535|re<<16,Z=Et,Q=Kt,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[1],Q=R[1],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[1]=Et=oe&65535|ye<<16,R[1]=Kt=ce&65535|re<<16,Z=It,Q=$t,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[2],Q=R[2],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[2]=It=oe&65535|ye<<16,R[2]=$t=ce&65535|re<<16,Z=St,Q=Rr,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[3],Q=R[3],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[3]=St=oe&65535|ye<<16,R[3]=Rr=ce&65535|re<<16,Z=$,Q=er,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[4],Q=R[4],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[4]=$=oe&65535|ye<<16,R[4]=er=ce&65535|re<<16,Z=Mt,Q=vr,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[5],Q=R[5],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[5]=Mt=oe&65535|ye<<16,R[5]=vr=ce&65535|re<<16,Z=zt,Q=_r,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[6],Q=R[6],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[6]=zt=oe&65535|ye<<16,R[6]=_r=ce&65535|re<<16,Z=qt,Q=Ar,ce=Q&65535,re=Q>>>16,oe=Z&65535,ye=Z>>>16,Z=k[7],Q=R[7],ce+=Q&65535,re+=Q>>>16,oe+=Z&65535,ye+=Z>>>16,re+=ce>>>16,oe+=re>>>16,ye+=oe>>>16,k[7]=qt=oe&65535|ye<<16,R[7]=Ar=ce&65535|re<<16,zr+=128,g-=128}return g}function fn(k,R,B){var g=new Int32Array(8),N=new Int32Array(8),W=new Uint8Array(256),q,X=B;for(g[0]=1779033703,g[1]=3144134277,g[2]=1013904242,g[3]=2773480762,g[4]=1359893119,g[5]=2600822924,g[6]=528734635,g[7]=1541459225,N[0]=4089235720,N[1]=2227873595,N[2]=4271175723,N[3]=1595750129,N[4]=2917565137,N[5]=725511199,N[6]=4215389547,N[7]=327033209,gt(g,N,R,B),B%=128,q=0;q<B;q++)W[q]=R[X-B+q];for(W[B]=128,B=256-128*(B<112?1:0),W[B-9]=0,P(W,B-8,X/536870912|0,X<<3),gt(g,N,W,B),q=0;q<8;q++)P(k,8*q,g[q],N[q]);return 0}function rt(k,R){var B=t(),g=t(),N=t(),W=t(),q=t(),X=t(),de=t(),fe=t(),ne=t();U(B,k[1],k[0]),U(ne,R[1],R[0]),D(B,B,ne),b(g,k[0],k[1]),b(ne,R[0],R[1]),D(g,g,ne),D(N,k[3],R[3]),D(N,N,h),D(W,k[2],R[2]),b(W,W,W),U(q,g,B),U(X,W,N),b(de,W,N),b(fe,g,B),D(k[0],q,X),D(k[1],fe,de),D(k[2],de,X),D(k[3],q,fe)}function yt(k,R,B){var g;for(g=0;g<4;g++)S(k[g],R[g],B)}function ii(k,R){var B=t(),g=t(),N=t();be(N,R[2]),D(B,R[0],N),D(g,R[1],N),I(k,g),k[31]^=p(B)<<7}function ft(k,R,B){var g,N;for(y(k[0],o),y(k[1],a),y(k[2],a),y(k[3],o),N=255;N>=0;--N)g=B[N/8|0]>>(N&7)&1,yt(k,R,g),rt(R,k),rt(k,k),yt(k,R,g)}function nt(k,R){var B=[t(),t(),t(),t()];y(B[0],m),y(B[1],v),y(B[2],a),D(B[3],m,v),ft(k,B,R)}function si(k,R,B){var g=new Uint8Array(64),N=[t(),t(),t(),t()],W;for(B||n(R,32),fn(g,R,32),g[0]&=248,g[31]&=127,g[31]|=64,nt(N,g),ii(k,N),W=0;W<32;W++)R[W+32]=k[W];return 0}var it=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function lt(k,R){var B,g,N,W;for(g=63;g>=32;--g){for(B=0,N=g-32,W=g-12;N<W;++N)R[N]+=B-16*R[g]*it[N-(g-32)],B=Math.floor((R[N]+128)/256),R[N]-=B*256;R[N]+=B,R[g]=0}for(B=0,N=0;N<32;N++)R[N]+=B-(R[31]>>4)*it[N],B=R[N]>>8,R[N]&=255;for(N=0;N<32;N++)R[N]-=B*it[N];for(g=0;g<32;g++)R[g+1]+=R[g]>>8,k[g]=R[g]&255}function jn(k){var R=new Float64Array(64),B;for(B=0;B<64;B++)R[B]=k[B];for(B=0;B<64;B++)k[B]=0;lt(k,R)}function dt(k,R,B,g){var N=new Uint8Array(64),W=new Uint8Array(64),q=new Uint8Array(64),X,de,fe=new Float64Array(64),ne=[t(),t(),t(),t()];fn(N,g,32),N[0]&=248,N[31]&=127,N[31]|=64;var wt=B+64;for(X=0;X<B;X++)k[64+X]=R[X];for(X=0;X<32;X++)k[32+X]=N[32+X];for(fn(q,k.subarray(32),B+32),jn(q),nt(ne,q),ii(k,ne),X=32;X<64;X++)k[X]=g[X];for(fn(W,k,B+64),jn(W),X=0;X<64;X++)fe[X]=0;for(X=0;X<32;X++)fe[X]=q[X];for(X=0;X<32;X++)for(de=0;de<32;de++)fe[X+de]+=W[X]*N[de];return lt(k.subarray(32),fe),wt}function mt(k,R){var B=t(),g=t(),N=t(),W=t(),q=t(),X=t(),de=t();return y(k[2],a),f(k[1],R),G(N,k[1]),D(W,N,d),U(N,N,k[2]),b(W,k[2],W),G(q,W),G(X,q),D(de,X,q),D(B,de,N),D(B,B,W),le(B,B),D(B,B,N),D(B,B,W),D(B,B,W),D(k[0],B,W),G(g,k[0]),D(g,g,W),M(g,N)&&D(k[0],k[0],_),G(g,k[0]),D(g,g,W),M(g,N)?-1:(p(k[0])===R[31]>>7&&U(k[0],o,k[0]),D(k[3],k[0],k[1]),0)}function zn(k,R,B,g){var N,W=new Uint8Array(32),q=new Uint8Array(64),X=[t(),t(),t(),t()],de=[t(),t(),t(),t()];if(B<64||mt(de,g))return-1;for(N=0;N<B;N++)k[N]=R[N];for(N=0;N<32;N++)k[N+32]=g[N];if(fn(q,k,B),jn(q),ft(X,de,q),nt(de,R.subarray(32)),rt(X,de),ii(W,X),B-=64,T(R,0,W,0)){for(N=0;N<B;N++)k[N]=0;return-1}for(N=0;N<B;N++)k[N]=R[N+64];return B}var st=32,tt=24,An=32,Je=16,Xe=32,Rn=32,Ze=32,Qe=32,qn=32,ht=tt,bt=An,wi=Je,qe=64,Ge=32,ln=64,ot=32,at=64;e.lowlevel={crypto_core_hsalsa20:O,crypto_stream_xor:xe,crypto_stream:ie,crypto_stream_salsa20_xor:H,crypto_stream_salsa20:V,crypto_onetimeauth:te,crypto_onetimeauth_verify:x,crypto_verify_16:E,crypto_verify_32:T,crypto_secretbox:c,crypto_secretbox_open:l,crypto_scalarmult:ue,crypto_scalarmult_base:At,crypto_box_beforenm:De,crypto_box_afternm:jr,crypto_box:ut,crypto_box_open:Ur,crypto_box_keypair:Me,crypto_hash:fn,crypto_sign:dt,crypto_sign_keypair:si,crypto_sign_open:zn,crypto_secretbox_KEYBYTES:st,crypto_secretbox_NONCEBYTES:tt,crypto_secretbox_ZEROBYTES:An,crypto_secretbox_BOXZEROBYTES:Je,crypto_scalarmult_BYTES:Xe,crypto_scalarmult_SCALARBYTES:Rn,crypto_box_PUBLICKEYBYTES:Ze,crypto_box_SECRETKEYBYTES:Qe,crypto_box_BEFORENMBYTES:qn,crypto_box_NONCEBYTES:ht,crypto_box_ZEROBYTES:bt,crypto_box_BOXZEROBYTES:wi,crypto_sign_BYTES:qe,crypto_sign_PUBLICKEYBYTES:Ge,crypto_sign_SECRETKEYBYTES:ln,crypto_sign_SEEDBYTES:ot,crypto_hash_BYTES:at,gf:t,D:d,L:it,pack25519:I,unpack25519:f,M:D,A:b,S:G,Z:U,pow2523:le,add:rt,set25519:y,modL:lt,scalarmult:ft,scalarbase:nt};function oi(k,R){if(k.length!==st)throw new Error("bad key size");if(R.length!==tt)throw new Error("bad nonce size")}function xt(k,R){if(k.length!==Ze)throw new Error("bad public key size");if(R.length!==Qe)throw new Error("bad secret key size")}function Ue(){for(var k=0;k<arguments.length;k++)if(!(arguments[k]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ai(k){for(var R=0;R<k.length;R++)k[R]=0}e.randomBytes=function(k){var R=new Uint8Array(k);return n(R,k),R},e.secretbox=function(k,R,B){Ue(k,R,B),oi(B,R);for(var g=new Uint8Array(An+k.length),N=new Uint8Array(g.length),W=0;W<k.length;W++)g[W+An]=k[W];return c(N,g,g.length,R,B),N.subarray(Je)},e.secretbox.open=function(k,R,B){Ue(k,R,B),oi(B,R);for(var g=new Uint8Array(Je+k.length),N=new Uint8Array(g.length),W=0;W<k.length;W++)g[W+Je]=k[W];return g.length<32||l(N,g,g.length,R,B)!==0?null:N.subarray(An)},e.secretbox.keyLength=st,e.secretbox.nonceLength=tt,e.secretbox.overheadLength=Je,e.scalarMult=function(k,R){if(Ue(k,R),k.length!==Rn)throw new Error("bad n size");if(R.length!==Xe)throw new Error("bad p size");var B=new Uint8Array(Xe);return ue(B,k,R),B},e.scalarMult.base=function(k){if(Ue(k),k.length!==Rn)throw new Error("bad n size");var R=new Uint8Array(Xe);return At(R,k),R},e.scalarMult.scalarLength=Rn,e.scalarMult.groupElementLength=Xe,e.box=function(k,R,B,g){var N=e.box.before(B,g);return e.secretbox(k,R,N)},e.box.before=function(k,R){Ue(k,R),xt(k,R);var B=new Uint8Array(qn);return De(B,k,R),B},e.box.after=e.secretbox,e.box.open=function(k,R,B,g){var N=e.box.before(B,g);return e.secretbox.open(k,R,N)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var k=new Uint8Array(Ze),R=new Uint8Array(Qe);return Me(k,R),{publicKey:k,secretKey:R}},e.box.keyPair.fromSecretKey=function(k){if(Ue(k),k.length!==Qe)throw new Error("bad secret key size");var R=new Uint8Array(Ze);return At(R,k),{publicKey:R,secretKey:new Uint8Array(k)}},e.box.publicKeyLength=Ze,e.box.secretKeyLength=Qe,e.box.sharedKeyLength=qn,e.box.nonceLength=ht,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(k,R){if(Ue(k,R),R.length!==ln)throw new Error("bad secret key size");var B=new Uint8Array(qe+k.length);return dt(B,k,k.length,R),B},e.sign.open=function(k,R){if(Ue(k,R),R.length!==Ge)throw new Error("bad public key size");var B=new Uint8Array(k.length),g=zn(B,k,k.length,R);if(g<0)return null;for(var N=new Uint8Array(g),W=0;W<N.length;W++)N[W]=B[W];return N},e.sign.detached=function(k,R){for(var B=e.sign(k,R),g=new Uint8Array(qe),N=0;N<g.length;N++)g[N]=B[N];return g},e.sign.detached.verify=function(k,R,B){if(Ue(k,R,B),R.length!==qe)throw new Error("bad signature size");if(B.length!==Ge)throw new Error("bad public key size");var g=new Uint8Array(qe+k.length),N=new Uint8Array(qe+k.length),W;for(W=0;W<qe;W++)g[W]=R[W];for(W=0;W<k.length;W++)g[W+qe]=k[W];return zn(N,g,g.length,B)>=0},e.sign.keyPair=function(){var k=new Uint8Array(Ge),R=new Uint8Array(ln);return si(k,R),{publicKey:k,secretKey:R}},e.sign.keyPair.fromSecretKey=function(k){if(Ue(k),k.length!==ln)throw new Error("bad secret key size");for(var R=new Uint8Array(Ge),B=0;B<R.length;B++)R[B]=k[32+B];return{publicKey:R,secretKey:new Uint8Array(k)}},e.sign.keyPair.fromSeed=function(k){if(Ue(k),k.length!==ot)throw new Error("bad seed size");for(var R=new Uint8Array(Ge),B=new Uint8Array(ln),g=0;g<32;g++)B[g]=k[g];return si(R,B,!0),{publicKey:R,secretKey:B}},e.sign.publicKeyLength=Ge,e.sign.secretKeyLength=ln,e.sign.seedLength=ot,e.sign.signatureLength=qe,e.hash=function(k){Ue(k);var R=new Uint8Array(at);return fn(R,k,k.length),R},e.hash.hashLength=at,e.verify=function(k,R){return Ue(k,R),k.length===0||R.length===0||k.length!==R.length?!1:A(k,0,R,0,k.length)===0},e.setPRNG=function(k){n=k},function(){var k=typeof self<"u"?self.crypto||self.msCrypto:null;if(k&&k.getRandomValues){var R=65536;e.setPRNG(function(B,g){var N,W=new Uint8Array(g);for(N=0;N<g;N+=R)k.getRandomValues(W.subarray(N,N+Math.min(g-N,R)));for(N=0;N<g;N++)B[N]=W[N];ai(W)})}else typeof zv<"u"&&(k=Qs,k&&k.randomBytes&&e.setPRNG(function(B,g){var N,W=k.randomBytes(g);for(N=0;N<g;N++)B[N]=W[N];ai(W)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})($w);var xp={},br={},jw={exports:{}};(function(r){(function(e,t){function n(x,c){if(!x)throw new Error(c||"Assertion failed")}function i(x,c){x.super_=c;var l=function(){};l.prototype=c.prototype,x.prototype=new l,x.prototype.constructor=x}function s(x,c,l){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(x||0,c||10,l||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,l){return c.cmp(l)>0?c:l},s.min=function(c,l){return c.cmp(l)<0?c:l},s.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(l===16?this._parseHex(c,w,y):(this._parseBase(c,l,w),y==="le"&&this._initArray(this.toArray(),l,y)))},s.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},s.prototype._initArray=function(c,l,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,I,M=0;if(y==="be")for(w=c.length-1,S=0;w>=0;w-=3)I=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[S]|=I<<M&67108863,this.words[S+1]=I>>>26-M&67108863,M+=24,M>=26&&(M-=26,S++);else if(y==="le")for(w=0,S=0;w<c.length;w+=3)I=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[S]|=I<<M&67108863,this.words[S+1]=I>>>26-M&67108863,M+=24,M>=26&&(M-=26,S++);return this._strip()};function a(x,c){var l=x.charCodeAt(c);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+x)}function u(x,c,l){var y=a(x,l);return l-1>=c&&(y|=a(x,l-1)<<4),y}s.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S=0,I=0,M;if(y==="be")for(w=c.length-1;w>=l;w-=2)M=u(c,l,w)<<S,this.words[I]|=M&67108863,S>=18?(S-=18,I+=1,this.words[I]|=M>>>26):S+=8;else{var p=c.length-l;for(w=p%2===0?l+1:l;w<c.length;w+=2)M=u(c,l,w)<<S,this.words[I]|=M&67108863,S>=18?(S-=18,I+=1,this.words[I]|=M>>>26):S+=8}this._strip()};function d(x,c,l,y){for(var w=0,S=0,I=Math.min(x.length,l),M=c;M<I;M++){var p=x.charCodeAt(M)-48;w*=y,p>=49?S=p-49+10:p>=17?S=p-17+10:S=p,n(p>=0&&S<y,"Invalid character"),w+=S}return w}s.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var w=0,S=1;S<=67108863;S*=l)w++;w--,S=S/l|0;for(var I=c.length-y,M=I%w,p=Math.min(I,I-M)+y,f=0,b=y;b<p;b+=w)f=d(c,b,b+w,l),this.imuln(S),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(M!==0){var U=1;for(f=d(c,b,c.length,l),b=0;b<M;b++)U*=l;this.imuln(U),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red};function h(x,c){x.words=c.words,x.length=c.length,x.negative=c.negative,x.red=c.red}if(s.prototype._move=function(c){h(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var w=0,S=0,I=0;I<this.length;I++){var M=this.words[I],p=((M<<w|S)&16777215).toString(16);S=M>>>24-w&16777215,w+=2,w>=26&&(w-=26,I--),S!==0||I!==this.length-1?y=v[6-p.length]+p+y:y=p+y}for(S!==0&&(y=S.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=_[c],b=P[c];y="";var U=this.clone();for(U.negative=0;!U.isZero();){var D=U.modrn(b).toString(c);U=U.idivn(b),U.isZero()?y=D+y:y=v[f-D.length]+D+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,l){return this.toArrayLike(o,c,l)}),s.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)};var A=function(c,l){return c.allocUnsafe?c.allocUnsafe(l):new c(l)};s.prototype.toArrayLike=function(c,l,y){this._strip();var w=this.byteLength(),S=y||Math.max(1,w);n(w<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var I=A(c,S),M=l==="le"?"LE":"BE";return this["_toArrayLike"+M](I,w),I},s.prototype._toArrayLikeLE=function(c,l){for(var y=0,w=0,S=0,I=0;S<this.length;S++){var M=this.words[S]<<I|w;c[y++]=M&255,y<c.length&&(c[y++]=M>>8&255),y<c.length&&(c[y++]=M>>16&255),I===6?(y<c.length&&(c[y++]=M>>24&255),w=0,I=0):(w=M>>>24,I+=2)}if(y<c.length)for(c[y++]=w;y<c.length;)c[y++]=0},s.prototype._toArrayLikeBE=function(c,l){for(var y=c.length-1,w=0,S=0,I=0;S<this.length;S++){var M=this.words[S]<<I|w;c[y--]=M&255,y>=0&&(c[y--]=M>>8&255),y>=0&&(c[y--]=M>>16&255),I===6?(y>=0&&(c[y--]=M>>24&255),w=0,I=0):(w=M>>>24,I+=2)}if(y>=0)for(c[y--]=w;y>=0;)c[y--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},s.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return(l&8191)===0&&(y+=13,l>>>=13),(l&127)===0&&(y+=7,l>>>=7),(l&15)===0&&(y+=4,l>>>=4),(l&3)===0&&(y+=2,l>>>=2),(l&1)===0&&y++,y},s.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function E(x){for(var c=new Array(x.bitLength()),l=0;l<c.length;l++){var y=l/26|0,w=l%26;c[l]=x.words[y]>>>w&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var w=0;w<y.length;w++)this.words[w]=l.words[w]^y.words[w];if(this!==l)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=l.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var w=0;w<l;w++)this.words[w]=~this.words[w]&67108863;return y>0&&(this.words[w]=~this.words[w]&67108863>>26-y),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,l){n(typeof c=="number"&&c>=0);var y=c/26|0,w=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<w:this.words[y]=this.words[y]&~(1<<w),this._strip()},s.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,w;this.length>c.length?(y=this,w=c):(y=c,w=this);for(var S=0,I=0;I<w.length;I++)l=(y.words[I]|0)+(w.words[I]|0)+S,this.words[I]=l&67108863,S=l>>>26;for(;S!==0&&I<y.length;I++)l=(y.words[I]|0)+S,this.words[I]=l&67108863,S=l>>>26;if(this.length=y.length,S!==0)this.words[this.length]=S,this.length++;else if(y!==this)for(;I<y.length;I++)this.words[I]=y.words[I];return this},s.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,S;y>0?(w=this,S=c):(w=c,S=this);for(var I=0,M=0;M<S.length;M++)l=(w.words[M]|0)-(S.words[M]|0)+I,I=l>>26,this.words[M]=l&67108863;for(;I!==0&&M<w.length;M++)l=(w.words[M]|0)+I,I=l>>26,this.words[M]=l&67108863;if(I===0&&M<w.length&&w!==this)for(;M<w.length;M++)this.words[M]=w.words[M];return this.length=Math.max(this.length,M),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function T(x,c,l){l.negative=c.negative^x.negative;var y=x.length+c.length|0;l.length=y,y=y-1|0;var w=x.words[0]|0,S=c.words[0]|0,I=w*S,M=I&67108863,p=I/67108864|0;l.words[0]=M;for(var f=1;f<y;f++){for(var b=p>>>26,U=p&67108863,D=Math.min(f,c.length-1),G=Math.max(0,f-x.length+1);G<=D;G++){var be=f-G|0;w=x.words[be]|0,S=c.words[G]|0,I=w*S+U,b+=I/67108864|0,U=I&67108863}l.words[f]=U|0,p=b|0}return p!==0?l.words[f]=p|0:l.length--,l._strip()}var C=function(c,l,y){var w=c.words,S=l.words,I=y.words,M=0,p,f,b,U=w[0]|0,D=U&8191,G=U>>>13,be=w[1]|0,le=be&8191,ue=be>>>13,At=w[2]|0,Me=At&8191,De=At>>>13,jr=w[3]|0,et=jr&8191,ut=jr>>>13,Ur=w[4]|0,pt=Ur&8191,gt=Ur>>>13,fn=w[5]|0,rt=fn&8191,yt=fn>>>13,ii=w[6]|0,ft=ii&8191,nt=ii>>>13,si=w[7]|0,it=si&8191,lt=si>>>13,jn=w[8]|0,dt=jn&8191,mt=jn>>>13,zn=w[9]|0,st=zn&8191,tt=zn>>>13,An=S[0]|0,Je=An&8191,Xe=An>>>13,Rn=S[1]|0,Ze=Rn&8191,Qe=Rn>>>13,qn=S[2]|0,ht=qn&8191,bt=qn>>>13,wi=S[3]|0,qe=wi&8191,Ge=wi>>>13,ln=S[4]|0,ot=ln&8191,at=ln>>>13,oi=S[5]|0,xt=oi&8191,Ue=oi>>>13,ai=S[6]|0,k=ai&8191,R=ai>>>13,B=S[7]|0,g=B&8191,N=B>>>13,W=S[8]|0,q=W&8191,X=W>>>13,de=S[9]|0,fe=de&8191,ne=de>>>13;y.negative=c.negative^l.negative,y.length=19,p=Math.imul(D,Je),f=Math.imul(D,Xe),f=f+Math.imul(G,Je)|0,b=Math.imul(G,Xe);var wt=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,p=Math.imul(le,Je),f=Math.imul(le,Xe),f=f+Math.imul(ue,Je)|0,b=Math.imul(ue,Xe),p=p+Math.imul(D,Ze)|0,f=f+Math.imul(D,Qe)|0,f=f+Math.imul(G,Ze)|0,b=b+Math.imul(G,Qe)|0;var Se=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Se>>>26)|0,Se&=67108863,p=Math.imul(Me,Je),f=Math.imul(Me,Xe),f=f+Math.imul(De,Je)|0,b=Math.imul(De,Xe),p=p+Math.imul(le,Ze)|0,f=f+Math.imul(le,Qe)|0,f=f+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Qe)|0,p=p+Math.imul(D,ht)|0,f=f+Math.imul(D,bt)|0,f=f+Math.imul(G,ht)|0,b=b+Math.imul(G,bt)|0;var Fe=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,p=Math.imul(et,Je),f=Math.imul(et,Xe),f=f+Math.imul(ut,Je)|0,b=Math.imul(ut,Xe),p=p+Math.imul(Me,Ze)|0,f=f+Math.imul(Me,Qe)|0,f=f+Math.imul(De,Ze)|0,b=b+Math.imul(De,Qe)|0,p=p+Math.imul(le,ht)|0,f=f+Math.imul(le,bt)|0,f=f+Math.imul(ue,ht)|0,b=b+Math.imul(ue,bt)|0,p=p+Math.imul(D,qe)|0,f=f+Math.imul(D,Ge)|0,f=f+Math.imul(G,qe)|0,b=b+Math.imul(G,Ge)|0;var Ke=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,p=Math.imul(pt,Je),f=Math.imul(pt,Xe),f=f+Math.imul(gt,Je)|0,b=Math.imul(gt,Xe),p=p+Math.imul(et,Ze)|0,f=f+Math.imul(et,Qe)|0,f=f+Math.imul(ut,Ze)|0,b=b+Math.imul(ut,Qe)|0,p=p+Math.imul(Me,ht)|0,f=f+Math.imul(Me,bt)|0,f=f+Math.imul(De,ht)|0,b=b+Math.imul(De,bt)|0,p=p+Math.imul(le,qe)|0,f=f+Math.imul(le,Ge)|0,f=f+Math.imul(ue,qe)|0,b=b+Math.imul(ue,Ge)|0,p=p+Math.imul(D,ot)|0,f=f+Math.imul(D,at)|0,f=f+Math.imul(G,ot)|0,b=b+Math.imul(G,at)|0;var We=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(We>>>26)|0,We&=67108863,p=Math.imul(rt,Je),f=Math.imul(rt,Xe),f=f+Math.imul(yt,Je)|0,b=Math.imul(yt,Xe),p=p+Math.imul(pt,Ze)|0,f=f+Math.imul(pt,Qe)|0,f=f+Math.imul(gt,Ze)|0,b=b+Math.imul(gt,Qe)|0,p=p+Math.imul(et,ht)|0,f=f+Math.imul(et,bt)|0,f=f+Math.imul(ut,ht)|0,b=b+Math.imul(ut,bt)|0,p=p+Math.imul(Me,qe)|0,f=f+Math.imul(Me,Ge)|0,f=f+Math.imul(De,qe)|0,b=b+Math.imul(De,Ge)|0,p=p+Math.imul(le,ot)|0,f=f+Math.imul(le,at)|0,f=f+Math.imul(ue,ot)|0,b=b+Math.imul(ue,at)|0,p=p+Math.imul(D,xt)|0,f=f+Math.imul(D,Ue)|0,f=f+Math.imul(G,xt)|0,b=b+Math.imul(G,Ue)|0;var He=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(He>>>26)|0,He&=67108863,p=Math.imul(ft,Je),f=Math.imul(ft,Xe),f=f+Math.imul(nt,Je)|0,b=Math.imul(nt,Xe),p=p+Math.imul(rt,Ze)|0,f=f+Math.imul(rt,Qe)|0,f=f+Math.imul(yt,Ze)|0,b=b+Math.imul(yt,Qe)|0,p=p+Math.imul(pt,ht)|0,f=f+Math.imul(pt,bt)|0,f=f+Math.imul(gt,ht)|0,b=b+Math.imul(gt,bt)|0,p=p+Math.imul(et,qe)|0,f=f+Math.imul(et,Ge)|0,f=f+Math.imul(ut,qe)|0,b=b+Math.imul(ut,Ge)|0,p=p+Math.imul(Me,ot)|0,f=f+Math.imul(Me,at)|0,f=f+Math.imul(De,ot)|0,b=b+Math.imul(De,at)|0,p=p+Math.imul(le,xt)|0,f=f+Math.imul(le,Ue)|0,f=f+Math.imul(ue,xt)|0,b=b+Math.imul(ue,Ue)|0,p=p+Math.imul(D,k)|0,f=f+Math.imul(D,R)|0,f=f+Math.imul(G,k)|0,b=b+Math.imul(G,R)|0;var $e=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+($e>>>26)|0,$e&=67108863,p=Math.imul(it,Je),f=Math.imul(it,Xe),f=f+Math.imul(lt,Je)|0,b=Math.imul(lt,Xe),p=p+Math.imul(ft,Ze)|0,f=f+Math.imul(ft,Qe)|0,f=f+Math.imul(nt,Ze)|0,b=b+Math.imul(nt,Qe)|0,p=p+Math.imul(rt,ht)|0,f=f+Math.imul(rt,bt)|0,f=f+Math.imul(yt,ht)|0,b=b+Math.imul(yt,bt)|0,p=p+Math.imul(pt,qe)|0,f=f+Math.imul(pt,Ge)|0,f=f+Math.imul(gt,qe)|0,b=b+Math.imul(gt,Ge)|0,p=p+Math.imul(et,ot)|0,f=f+Math.imul(et,at)|0,f=f+Math.imul(ut,ot)|0,b=b+Math.imul(ut,at)|0,p=p+Math.imul(Me,xt)|0,f=f+Math.imul(Me,Ue)|0,f=f+Math.imul(De,xt)|0,b=b+Math.imul(De,Ue)|0,p=p+Math.imul(le,k)|0,f=f+Math.imul(le,R)|0,f=f+Math.imul(ue,k)|0,b=b+Math.imul(ue,R)|0,p=p+Math.imul(D,g)|0,f=f+Math.imul(D,N)|0,f=f+Math.imul(G,g)|0,b=b+Math.imul(G,N)|0;var ze=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ze>>>26)|0,ze&=67108863,p=Math.imul(dt,Je),f=Math.imul(dt,Xe),f=f+Math.imul(mt,Je)|0,b=Math.imul(mt,Xe),p=p+Math.imul(it,Ze)|0,f=f+Math.imul(it,Qe)|0,f=f+Math.imul(lt,Ze)|0,b=b+Math.imul(lt,Qe)|0,p=p+Math.imul(ft,ht)|0,f=f+Math.imul(ft,bt)|0,f=f+Math.imul(nt,ht)|0,b=b+Math.imul(nt,bt)|0,p=p+Math.imul(rt,qe)|0,f=f+Math.imul(rt,Ge)|0,f=f+Math.imul(yt,qe)|0,b=b+Math.imul(yt,Ge)|0,p=p+Math.imul(pt,ot)|0,f=f+Math.imul(pt,at)|0,f=f+Math.imul(gt,ot)|0,b=b+Math.imul(gt,at)|0,p=p+Math.imul(et,xt)|0,f=f+Math.imul(et,Ue)|0,f=f+Math.imul(ut,xt)|0,b=b+Math.imul(ut,Ue)|0,p=p+Math.imul(Me,k)|0,f=f+Math.imul(Me,R)|0,f=f+Math.imul(De,k)|0,b=b+Math.imul(De,R)|0,p=p+Math.imul(le,g)|0,f=f+Math.imul(le,N)|0,f=f+Math.imul(ue,g)|0,b=b+Math.imul(ue,N)|0,p=p+Math.imul(D,q)|0,f=f+Math.imul(D,X)|0,f=f+Math.imul(G,q)|0,b=b+Math.imul(G,X)|0;var je=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(je>>>26)|0,je&=67108863,p=Math.imul(st,Je),f=Math.imul(st,Xe),f=f+Math.imul(tt,Je)|0,b=Math.imul(tt,Xe),p=p+Math.imul(dt,Ze)|0,f=f+Math.imul(dt,Qe)|0,f=f+Math.imul(mt,Ze)|0,b=b+Math.imul(mt,Qe)|0,p=p+Math.imul(it,ht)|0,f=f+Math.imul(it,bt)|0,f=f+Math.imul(lt,ht)|0,b=b+Math.imul(lt,bt)|0,p=p+Math.imul(ft,qe)|0,f=f+Math.imul(ft,Ge)|0,f=f+Math.imul(nt,qe)|0,b=b+Math.imul(nt,Ge)|0,p=p+Math.imul(rt,ot)|0,f=f+Math.imul(rt,at)|0,f=f+Math.imul(yt,ot)|0,b=b+Math.imul(yt,at)|0,p=p+Math.imul(pt,xt)|0,f=f+Math.imul(pt,Ue)|0,f=f+Math.imul(gt,xt)|0,b=b+Math.imul(gt,Ue)|0,p=p+Math.imul(et,k)|0,f=f+Math.imul(et,R)|0,f=f+Math.imul(ut,k)|0,b=b+Math.imul(ut,R)|0,p=p+Math.imul(Me,g)|0,f=f+Math.imul(Me,N)|0,f=f+Math.imul(De,g)|0,b=b+Math.imul(De,N)|0,p=p+Math.imul(le,q)|0,f=f+Math.imul(le,X)|0,f=f+Math.imul(ue,q)|0,b=b+Math.imul(ue,X)|0,p=p+Math.imul(D,fe)|0,f=f+Math.imul(D,ne)|0,f=f+Math.imul(G,fe)|0,b=b+Math.imul(G,ne)|0;var ke=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ke>>>26)|0,ke&=67108863,p=Math.imul(st,Ze),f=Math.imul(st,Qe),f=f+Math.imul(tt,Ze)|0,b=Math.imul(tt,Qe),p=p+Math.imul(dt,ht)|0,f=f+Math.imul(dt,bt)|0,f=f+Math.imul(mt,ht)|0,b=b+Math.imul(mt,bt)|0,p=p+Math.imul(it,qe)|0,f=f+Math.imul(it,Ge)|0,f=f+Math.imul(lt,qe)|0,b=b+Math.imul(lt,Ge)|0,p=p+Math.imul(ft,ot)|0,f=f+Math.imul(ft,at)|0,f=f+Math.imul(nt,ot)|0,b=b+Math.imul(nt,at)|0,p=p+Math.imul(rt,xt)|0,f=f+Math.imul(rt,Ue)|0,f=f+Math.imul(yt,xt)|0,b=b+Math.imul(yt,Ue)|0,p=p+Math.imul(pt,k)|0,f=f+Math.imul(pt,R)|0,f=f+Math.imul(gt,k)|0,b=b+Math.imul(gt,R)|0,p=p+Math.imul(et,g)|0,f=f+Math.imul(et,N)|0,f=f+Math.imul(ut,g)|0,b=b+Math.imul(ut,N)|0,p=p+Math.imul(Me,q)|0,f=f+Math.imul(Me,X)|0,f=f+Math.imul(De,q)|0,b=b+Math.imul(De,X)|0,p=p+Math.imul(le,fe)|0,f=f+Math.imul(le,ne)|0,f=f+Math.imul(ue,fe)|0,b=b+Math.imul(ue,ne)|0;var Ce=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,p=Math.imul(st,ht),f=Math.imul(st,bt),f=f+Math.imul(tt,ht)|0,b=Math.imul(tt,bt),p=p+Math.imul(dt,qe)|0,f=f+Math.imul(dt,Ge)|0,f=f+Math.imul(mt,qe)|0,b=b+Math.imul(mt,Ge)|0,p=p+Math.imul(it,ot)|0,f=f+Math.imul(it,at)|0,f=f+Math.imul(lt,ot)|0,b=b+Math.imul(lt,at)|0,p=p+Math.imul(ft,xt)|0,f=f+Math.imul(ft,Ue)|0,f=f+Math.imul(nt,xt)|0,b=b+Math.imul(nt,Ue)|0,p=p+Math.imul(rt,k)|0,f=f+Math.imul(rt,R)|0,f=f+Math.imul(yt,k)|0,b=b+Math.imul(yt,R)|0,p=p+Math.imul(pt,g)|0,f=f+Math.imul(pt,N)|0,f=f+Math.imul(gt,g)|0,b=b+Math.imul(gt,N)|0,p=p+Math.imul(et,q)|0,f=f+Math.imul(et,X)|0,f=f+Math.imul(ut,q)|0,b=b+Math.imul(ut,X)|0,p=p+Math.imul(Me,fe)|0,f=f+Math.imul(Me,ne)|0,f=f+Math.imul(De,fe)|0,b=b+Math.imul(De,ne)|0;var we=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(we>>>26)|0,we&=67108863,p=Math.imul(st,qe),f=Math.imul(st,Ge),f=f+Math.imul(tt,qe)|0,b=Math.imul(tt,Ge),p=p+Math.imul(dt,ot)|0,f=f+Math.imul(dt,at)|0,f=f+Math.imul(mt,ot)|0,b=b+Math.imul(mt,at)|0,p=p+Math.imul(it,xt)|0,f=f+Math.imul(it,Ue)|0,f=f+Math.imul(lt,xt)|0,b=b+Math.imul(lt,Ue)|0,p=p+Math.imul(ft,k)|0,f=f+Math.imul(ft,R)|0,f=f+Math.imul(nt,k)|0,b=b+Math.imul(nt,R)|0,p=p+Math.imul(rt,g)|0,f=f+Math.imul(rt,N)|0,f=f+Math.imul(yt,g)|0,b=b+Math.imul(yt,N)|0,p=p+Math.imul(pt,q)|0,f=f+Math.imul(pt,X)|0,f=f+Math.imul(gt,q)|0,b=b+Math.imul(gt,X)|0,p=p+Math.imul(et,fe)|0,f=f+Math.imul(et,ne)|0,f=f+Math.imul(ut,fe)|0,b=b+Math.imul(ut,ne)|0;var Te=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Te>>>26)|0,Te&=67108863,p=Math.imul(st,ot),f=Math.imul(st,at),f=f+Math.imul(tt,ot)|0,b=Math.imul(tt,at),p=p+Math.imul(dt,xt)|0,f=f+Math.imul(dt,Ue)|0,f=f+Math.imul(mt,xt)|0,b=b+Math.imul(mt,Ue)|0,p=p+Math.imul(it,k)|0,f=f+Math.imul(it,R)|0,f=f+Math.imul(lt,k)|0,b=b+Math.imul(lt,R)|0,p=p+Math.imul(ft,g)|0,f=f+Math.imul(ft,N)|0,f=f+Math.imul(nt,g)|0,b=b+Math.imul(nt,N)|0,p=p+Math.imul(rt,q)|0,f=f+Math.imul(rt,X)|0,f=f+Math.imul(yt,q)|0,b=b+Math.imul(yt,X)|0,p=p+Math.imul(pt,fe)|0,f=f+Math.imul(pt,ne)|0,f=f+Math.imul(gt,fe)|0,b=b+Math.imul(gt,ne)|0;var Ie=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,p=Math.imul(st,xt),f=Math.imul(st,Ue),f=f+Math.imul(tt,xt)|0,b=Math.imul(tt,Ue),p=p+Math.imul(dt,k)|0,f=f+Math.imul(dt,R)|0,f=f+Math.imul(mt,k)|0,b=b+Math.imul(mt,R)|0,p=p+Math.imul(it,g)|0,f=f+Math.imul(it,N)|0,f=f+Math.imul(lt,g)|0,b=b+Math.imul(lt,N)|0,p=p+Math.imul(ft,q)|0,f=f+Math.imul(ft,X)|0,f=f+Math.imul(nt,q)|0,b=b+Math.imul(nt,X)|0,p=p+Math.imul(rt,fe)|0,f=f+Math.imul(rt,ne)|0,f=f+Math.imul(yt,fe)|0,b=b+Math.imul(yt,ne)|0;var _e=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(_e>>>26)|0,_e&=67108863,p=Math.imul(st,k),f=Math.imul(st,R),f=f+Math.imul(tt,k)|0,b=Math.imul(tt,R),p=p+Math.imul(dt,g)|0,f=f+Math.imul(dt,N)|0,f=f+Math.imul(mt,g)|0,b=b+Math.imul(mt,N)|0,p=p+Math.imul(it,q)|0,f=f+Math.imul(it,X)|0,f=f+Math.imul(lt,q)|0,b=b+Math.imul(lt,X)|0,p=p+Math.imul(ft,fe)|0,f=f+Math.imul(ft,ne)|0,f=f+Math.imul(nt,fe)|0,b=b+Math.imul(nt,ne)|0;var Z=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Z>>>26)|0,Z&=67108863,p=Math.imul(st,g),f=Math.imul(st,N),f=f+Math.imul(tt,g)|0,b=Math.imul(tt,N),p=p+Math.imul(dt,q)|0,f=f+Math.imul(dt,X)|0,f=f+Math.imul(mt,q)|0,b=b+Math.imul(mt,X)|0,p=p+Math.imul(it,fe)|0,f=f+Math.imul(it,ne)|0,f=f+Math.imul(lt,fe)|0,b=b+Math.imul(lt,ne)|0;var Q=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Q>>>26)|0,Q&=67108863,p=Math.imul(st,q),f=Math.imul(st,X),f=f+Math.imul(tt,q)|0,b=Math.imul(tt,X),p=p+Math.imul(dt,fe)|0,f=f+Math.imul(dt,ne)|0,f=f+Math.imul(mt,fe)|0,b=b+Math.imul(mt,ne)|0;var ce=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ce>>>26)|0,ce&=67108863,p=Math.imul(st,fe),f=Math.imul(st,ne),f=f+Math.imul(tt,fe)|0,b=Math.imul(tt,ne);var re=(M+p|0)+((f&8191)<<13)|0;return M=(b+(f>>>13)|0)+(re>>>26)|0,re&=67108863,I[0]=wt,I[1]=Se,I[2]=Fe,I[3]=Ke,I[4]=We,I[5]=He,I[6]=$e,I[7]=ze,I[8]=je,I[9]=ke,I[10]=Ce,I[11]=we,I[12]=Te,I[13]=Ie,I[14]=_e,I[15]=Z,I[16]=Q,I[17]=ce,I[18]=re,M!==0&&(I[19]=M,y.length++),y};Math.imul||(C=T);function L(x,c,l){l.negative=c.negative^x.negative,l.length=x.length+c.length;for(var y=0,w=0,S=0;S<l.length-1;S++){var I=w;w=0;for(var M=y&67108863,p=Math.min(S,c.length-1),f=Math.max(0,S-x.length+1);f<=p;f++){var b=S-f,U=x.words[b]|0,D=c.words[f]|0,G=U*D,be=G&67108863;I=I+(G/67108864|0)|0,be=be+M|0,M=be&67108863,I=I+(be>>>26)|0,w+=I>>>26,I&=67108863}l.words[S]=M,y=I,I=w}return y!==0?l.words[S]=y:l.length--,l._strip()}function K(x,c,l){return L(x,c,l)}s.prototype.mulTo=function(c,l){var y,w=this.length+c.length;return this.length===10&&c.length===10?y=C(this,c,l):w<63?y=T(this,c,l):w<1024?y=L(this,c,l):y=K(this,c,l),y},s.prototype.mul=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},s.prototype.mulf=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),K(this,c,l)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var l=c<0;l&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,w=0;w<this.length;w++){var S=(this.words[w]|0)*c,I=(S&67108863)+(y&67108863);y>>=26,y+=S/67108864|0,y+=I>>>26,this.words[w]=I&67108863}return y!==0&&(this.words[w]=y,this.length++),l?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var l=E(c);if(l.length===0)return new s(1);for(var y=this,w=0;w<l.length&&l[w]===0;w++,y=y.sqr());if(++w<l.length)for(var S=y.sqr();w<l.length;w++,S=S.sqr())l[w]!==0&&(y=y.mul(S));return y},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,w=67108863>>>26-l<<26-l,S;if(l!==0){var I=0;for(S=0;S<this.length;S++){var M=this.words[S]&w,p=(this.words[S]|0)-M<<l;this.words[S]=p|I,I=M>>>26-l}I&&(this.words[S]=I,this.length++)}if(y!==0){for(S=this.length-1;S>=0;S--)this.words[S+y]=this.words[S];for(S=0;S<y;S++)this.words[S]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,l,y){n(typeof c=="number"&&c>=0);var w;l?w=(l-l%26)/26:w=0;var S=c%26,I=Math.min((c-S)/26,this.length),M=67108863^67108863>>>S<<S,p=y;if(w-=I,w=Math.max(0,w),p){for(var f=0;f<I;f++)p.words[f]=this.words[f];p.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var b=0;for(f=this.length-1;f>=0&&(b!==0||f>=w);f--){var U=this.words[f]|0;this.words[f]=b<<26-S|U>>>S,b=U&M}return p&&b!==0&&(p.words[p.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,l,y){return n(this.negative===0),this.iushrn(c,l,y)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,w=1<<l;if(this.length<=y)return!1;var S=this.words[y];return!!(S&w)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var w=67108863^67108863>>>l<<l;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,l,y){var w=c.length+y,S;this._expand(w);var I,M=0;for(S=0;S<c.length;S++){I=(this.words[S+y]|0)+M;var p=(c.words[S]|0)*l;I-=p&67108863,M=(I>>26)-(p/67108864|0),this.words[S+y]=I&67108863}for(;S<this.length-y;S++)I=(this.words[S+y]|0)+M,M=I>>26,this.words[S+y]=I&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,S=0;S<this.length;S++)I=-(this.words[S]|0)+M,M=I>>26,this.words[S]=I&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,l){var y=this.length-c.length,w=this.clone(),S=c,I=S.words[S.length-1]|0,M=this._countBits(I);y=26-M,y!==0&&(S=S.ushln(y),w.iushln(y),I=S.words[S.length-1]|0);var p=w.length-S.length,f;if(l!=="mod"){f=new s(null),f.length=p+1,f.words=new Array(f.length);for(var b=0;b<f.length;b++)f.words[b]=0}var U=w.clone()._ishlnsubmul(S,1,p);U.negative===0&&(w=U,f&&(f.words[p]=1));for(var D=p-1;D>=0;D--){var G=(w.words[S.length+D]|0)*67108864+(w.words[S.length+D-1]|0);for(G=Math.min(G/I|0,67108863),w._ishlnsubmul(S,G,D);w.negative!==0;)G--,w.negative=0,w._ishlnsubmul(S,1,D),w.isZero()||(w.negative^=1);f&&(f.words[D]=G)}return f&&f._strip(),w._strip(),l!=="div"&&y!==0&&w.iushrn(y),{div:f||null,mod:w}},s.prototype.divmod=function(c,l,y){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,S,I;return this.negative!==0&&c.negative===0?(I=this.neg().divmod(c,l),l!=="mod"&&(w=I.div.neg()),l!=="div"&&(S=I.mod.neg(),y&&S.negative!==0&&S.iadd(c)),{div:w,mod:S}):this.negative===0&&c.negative!==0?(I=this.divmod(c.neg(),l),l!=="mod"&&(w=I.div.neg()),{div:w,mod:I.mod}):(this.negative&c.negative)!==0?(I=this.neg().divmod(c.neg(),l),l!=="div"&&(S=I.mod.neg(),y&&S.negative!==0&&S.isub(c)),{div:I.div,mod:S}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,l)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,w=c.ushrn(1),S=c.andln(1),I=y.cmp(w);return I<0||S===1&&I===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(c){var l=c<0;l&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,w=0,S=this.length-1;S>=0;S--)w=(y*w+(this.words[S]|0))%c;return l?-w:w},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var l=c<0;l&&(c=-c),n(c<=67108863);for(var y=0,w=this.length-1;w>=0;w--){var S=(this.words[w]|0)+y*67108864;this.words[w]=S/c|0,y=S%c}return this._strip(),l?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),S=new s(0),I=new s(0),M=new s(1),p=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++p;for(var f=y.clone(),b=l.clone();!l.isZero();){for(var U=0,D=1;(l.words[0]&D)===0&&U<26;++U,D<<=1);if(U>0)for(l.iushrn(U);U-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(f),S.isub(b)),w.iushrn(1),S.iushrn(1);for(var G=0,be=1;(y.words[0]&be)===0&&G<26;++G,be<<=1);if(G>0)for(y.iushrn(G);G-- >0;)(I.isOdd()||M.isOdd())&&(I.iadd(f),M.isub(b)),I.iushrn(1),M.iushrn(1);l.cmp(y)>=0?(l.isub(y),w.isub(I),S.isub(M)):(y.isub(l),I.isub(w),M.isub(S))}return{a:I,b:M,gcd:y.iushln(p)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),S=new s(0),I=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var M=0,p=1;(l.words[0]&p)===0&&M<26;++M,p<<=1);if(M>0)for(l.iushrn(M);M-- >0;)w.isOdd()&&w.iadd(I),w.iushrn(1);for(var f=0,b=1;(y.words[0]&b)===0&&f<26;++f,b<<=1);if(f>0)for(y.iushrn(f);f-- >0;)S.isOdd()&&S.iadd(I),S.iushrn(1);l.cmp(y)>=0?(l.isub(y),w.isub(S)):(y.isub(l),S.isub(w))}var U;return l.cmpn(1)===0?U=w:U=S,U.cmpn(0)<0&&U.iadd(c),U},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var w=0;l.isEven()&&y.isEven();w++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var S=l.cmp(y);if(S<0){var I=l;l=y,y=I}else if(S===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(w)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var l=c%26,y=(c-l)/26,w=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=w,this;for(var S=w,I=y;S!==0&&I<this.length;I++){var M=this.words[I]|0;M+=S,S=M>>>26,M&=67108863,this.words[I]=M}return S!==0&&(this.words[I]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var y;if(this.length>1)y=1;else{l&&(c=-c),n(c<=67108863,"Number is too big");var w=this.words[0]|0;y=w===c?0:w<c?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var w=this.words[y]|0,S=c.words[y]|0;if(w!==S){w<S?l=-1:w>S&&(l=1);break}}return l},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new ae(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var O={k256:null,p224:null,p192:null,p25519:null};function F(x,c){this.name=x,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},F.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var w=y<this.n?-1:l.ucmp(this.p);return w===0?(l.words[0]=0,l.length=1):w>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},F.prototype.split=function(c,l){c.iushrn(this.n,0,l)},F.prototype.imulK=function(c){return c.imul(this.k)};function H(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(H,F),H.prototype.split=function(c,l){for(var y=4194303,w=Math.min(c.length,9),S=0;S<w;S++)l.words[S]=c.words[S];if(l.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var I=c.words[9];for(l.words[l.length++]=I&y,S=10;S<c.length;S++){var M=c.words[S]|0;c.words[S-10]=(M&y)<<4|I>>>22,I=M}I>>>=22,c.words[S-10]=I,I===0&&c.length>10?c.length-=10:c.length-=9},H.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var w=c.words[y]|0;l+=w*977,c.words[y]=l&67108863,l=w*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function V(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,F);function ie(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,F);function xe(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(xe,F),xe.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var w=(c.words[y]|0)*19+l,S=w&67108863;w>>>=26,c.words[y]=S,l=w}return l!==0&&(c.words[c.length++]=l),c},s._prime=function(c){if(O[c])return O[c];var l;if(c==="k256")l=new H;else if(c==="p224")l=new V;else if(c==="p192")l=new ie;else if(c==="p25519")l=new xe;else throw new Error("Unknown prime "+c);return O[c]=l,l};function ae(x){if(typeof x=="string"){var c=s._prime(x);this.m=c.p,this.prime=c}else n(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}ae.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},ae.prototype._verify2=function(c,l){n((c.negative|l.negative)===0,"red works only with positives"),n(c.red&&c.red===l.red,"red works only with red numbers")},ae.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(h(c,c.umod(this.m)._forceRed(this)),c)},ae.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},ae.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ae.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},ae.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ae.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},ae.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},ae.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},ae.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},ae.prototype.isqr=function(c){return this.imul(c,c.clone())},ae.prototype.sqr=function(c){return this.mul(c,c)},ae.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(c,y)}for(var w=this.m.subn(1),S=0;!w.isZero()&&w.andln(1)===0;)S++,w.iushrn(1);n(!w.isZero());var I=new s(1).toRed(this),M=I.redNeg(),p=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,p).cmp(M)!==0;)f.redIAdd(M);for(var b=this.pow(f,w),U=this.pow(c,w.addn(1).iushrn(1)),D=this.pow(c,w),G=S;D.cmp(I)!==0;){for(var be=D,le=0;be.cmp(I)!==0;le++)be=be.redSqr();n(le<G);var ue=this.pow(b,new s(1).iushln(G-le-1));U=U.redMul(ue),b=ue.redSqr(),D=D.redMul(b),G=le}return U},ae.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ae.prototype.pow=function(c,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,w=new Array(1<<y);w[0]=new s(1).toRed(this),w[1]=c;for(var S=2;S<w.length;S++)w[S]=this.mul(w[S-1],c);var I=w[0],M=0,p=0,f=l.bitLength()%26;for(f===0&&(f=26),S=l.length-1;S>=0;S--){for(var b=l.words[S],U=f-1;U>=0;U--){var D=b>>U&1;if(I!==w[0]&&(I=this.sqr(I)),D===0&&M===0){p=0;continue}M<<=1,M|=D,p++,!(p!==y&&(S!==0||U!==0))&&(I=this.mul(I,w[M]),p=0,M=0)}f=26}return I},ae.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},ae.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},s.mont=function(c){return new te(c)};function te(x){ae.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,ae),te.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},te.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},te.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new s(0)._forceRed(this);var y=c.mul(l),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},te.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,z)})(jw);var iT=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),sT=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),us=z&&z.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},oT=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&iT(e,r,t);return sT(e,r),e},zw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.deserializeUnchecked=br.deserialize=br.serialize=br.BinaryReader=br.BinaryWriter=br.BorshError=br.baseDecode=br.baseEncode=void 0;const qs=zw(jw.exports),qw=zw(Nr),aT=oT(qv),cT=typeof z.TextDecoder!="function"?aT.TextDecoder:z.TextDecoder,uT=new cT("utf-8",{fatal:!0});function fT(r){return typeof r=="string"&&(r=J.Buffer.from(r,"utf8")),qw.default.encode(J.Buffer.from(r))}br.baseEncode=fT;function lT(r){return J.Buffer.from(qw.default.decode(r))}br.baseDecode=lT;const Id=1024;class kn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}br.BorshError=kn;class Hw{constructor(){this.buf=J.Buffer.alloc(Id),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=J.Buffer.concat([this.buf,J.Buffer.alloc(Id)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(J.Buffer.from(new qs.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(J.Buffer.from(new qs.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(J.Buffer.from(new qs.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(J.Buffer.from(new qs.default(e).toArray("le",64)))}writeBuffer(e){this.buf=J.Buffer.concat([J.Buffer.from(this.buf.subarray(0,this.length)),e,J.Buffer.alloc(Id)]),this.length+=e.length}writeString(e){this.maybeResize();const t=J.Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(J.Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}br.BinaryWriter=Hw;function fs(r,e,t){const n=t.value;t.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new kn("Reached the end of buffer when deserializing")}throw s}}}class ni{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new qs.default(e,"le")}readU128(){const e=this.readBuffer(16);return new qs.default(e,"le")}readU256(){const e=this.readBuffer(32);return new qs.default(e,"le")}readU512(){const e=this.readBuffer(64);return new qs.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new kn(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return uT.decode(t)}catch(n){throw new kn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let i=0;i<t;++i)n.push(e());return n}}us([fs],ni.prototype,"readU8",null);us([fs],ni.prototype,"readU16",null);us([fs],ni.prototype,"readU32",null);us([fs],ni.prototype,"readU64",null);us([fs],ni.prototype,"readU128",null);us([fs],ni.prototype,"readU256",null);us([fs],ni.prototype,"readU512",null);us([fs],ni.prototype,"readString",null);us([fs],ni.prototype,"readFixedArray",null);us([fs],ni.prototype,"readArray",null);br.BinaryReader=ni;function Ww(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Nc(r,e,t,n,i){try{if(typeof n=="string")i[`write${Ww(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new kn(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new kn(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let s=0;s<n[1];s++)Nc(r,null,t[s],n[0],i)}else i.writeArray(t,s=>{Nc(r,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),Nc(r,e,t,n.type,i));break}default:throw new kn(`FieldType ${n} unrecognized`)}else Gw(r,t,i)}catch(s){throw s instanceof kn&&s.addToFieldPath(e),s}}function Gw(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=r.get(e.constructor);if(!n)throw new kn(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{Nc(r,i,e[i],s,t)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){t.writeU8(s),Nc(r,o,e[o],a,t);break}}}else throw new kn(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function dT(r,e,t=Hw){const n=new t;return Gw(r,e,n),n.toArray()}br.serialize=dT;function Oc(r,e,t,n){try{if(typeof t=="string")return n[`read${Ww(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(Oc(r,null,t[0],n));return i}else return n.readArray(()=>Oc(r,e,t[0],n))}return t.kind==="option"?n.readU8()?Oc(r,e,t.type,n):void 0:wp(r,t,n)}catch(i){throw i instanceof kn&&i.addToFieldPath(e),i}}function wp(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=r.get(e);if(!n)throw new kn(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of r.get(e).fields)i[s]=Oc(r,s,o,t);return new e(i)}if(n.kind==="enum"){const i=t.readU8();if(i>=n.values.length)throw new kn(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=Oc(r,s,o,t);return new e({[s]:a})}throw new kn(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function hT(r,e,t,n=ni){const i=new n(t),s=wp(r,e,i);if(i.offset<t.length)throw new kn(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}br.deserialize=hT;function pT(r,e,t,n=ni){const i=new n(t);return wp(r,e,i)}br.deserializeUnchecked=pT;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=br;Object.defineProperty(r,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(r,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(r,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(r,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(r,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(r,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(r,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(xp);var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Assignable=Zs.Enum=void 0;class gT{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this[t]=e[t],this.enum=t})}}Zs.Enum=gT;class yT{constructor(e){Object.keys(e).map(t=>{this[t]=e[t]})}}Zs.Assignable=yT;(function(r){var e=z&&z.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyPairEd25519=r.KeyPair=r.PublicKey=r.KeyType=void 0;const t=e($w.exports),n=xp,i=Zs;var s;(function(m){m[m.ED25519=0]="ED25519"})(s=r.KeyType||(r.KeyType={}));function o(m){switch(m){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${m}`)}}function a(m){switch(m.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${m}`)}}class u extends i.Assignable{static from(v){return typeof v=="string"?u.fromString(v):v}static fromString(v){const _=v.split(":");if(_.length===1)return new u({keyType:s.ED25519,data:n.base_decode(_[0])});if(_.length===2)return new u({keyType:a(_[0]),data:n.base_decode(_[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${o(this.keyType)}:${n.base_encode(this.data)}`}verify(v,_){switch(this.keyType){case s.ED25519:return t.default.sign.detached.verify(v,_,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}r.PublicKey=u;class d{static fromRandom(v){switch(v.toUpperCase()){case"ED25519":return h.fromRandom();default:throw new Error(`Unknown curve ${v}`)}}static fromString(v){const _=v.split(":");if(_.length===1)return new h(_[0]);if(_.length===2)switch(_[0].toUpperCase()){case"ED25519":return new h(_[1]);default:throw new Error(`Unknown curve: ${_[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}r.KeyPair=d;class h extends d{constructor(v){super();const _=t.default.sign.keyPair.fromSecretKey(n.base_decode(v));this.publicKey=new u({keyType:s.ED25519,data:_.publicKey}),this.secretKey=v}static fromRandom(){const v=t.default.sign.keyPair();return new h(n.base_encode(v.secretKey))}sign(v){return{signature:t.default.sign.detached(v,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(v,_){return this.publicKey.verify(v,_)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}r.KeyPairEd25519=h})(ns);Object.defineProperty(_u,"__esModule",{value:!0});_u.InMemoryKeyStore=void 0;const mT=Wo,bT=ns;class xT extends mT.KeyStore{constructor(){super(),this.keys={}}async setKey(e,t,n){this.keys[`${t}:${e}`]=n.toString()}async getKey(e,t){const n=this.keys[`${t}:${e}`];return n?bT.KeyPair.fromString(n):null}async removeKey(e,t){delete this.keys[`${t}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(t=>{const n=t.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const t=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&t.push(i.slice(0,i.length-1).join(":"))}),t}toString(){return"InMemoryKeyStore"}}_u.InMemoryKeyStore=xT;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.BrowserLocalStorageKeyStore=void 0;const wT=Wo,vT=ns,_T="near-api-js:keystore:";class AT extends wT.KeyStore{constructor(e=window.localStorage,t=_T){super(),this.localStorage=e,this.prefix=t}async setKey(e,t,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,t),n.toString())}async getKey(e,t){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,t));return n?vT.KeyPair.fromString(n):null}async removeKey(e,t){this.localStorage.removeItem(this.storageKeyForSecretKey(e,t))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const t of this.storageKeys())if(t.startsWith(this.prefix)){const n=t.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const t=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&t.push(i[0])}return t}storageKeyForSecretKey(e,t){return`${this.prefix}${t}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Bl.BrowserLocalStorageKeyStore=AT;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.MergeKeyStore=void 0;const ET=Wo;class ST extends ET.KeyStore{constructor(e,t={writeKeyStoreIndex:0}){super(),this.options=t,this.keyStores=e}async setKey(e,t,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,t,n)}async getKey(e,t){for(const n of this.keyStores){const i=await n.getKey(e,t);if(i)return i}return null}async removeKey(e,t){for(const n of this.keyStores)await n.removeKey(e,t)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const t of this.keyStores)for(const n of await t.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const t=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))t.add(i);return Array.from(t)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}Nl.MergeKeyStore=ST;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergeKeyStore=r.BrowserLocalStorageKeyStore=r.InMemoryKeyStore=r.KeyStore=void 0;const e=Wo;Object.defineProperty(r,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const t=_u;Object.defineProperty(r,"InMemoryKeyStore",{enumerable:!0,get:function(){return t.InMemoryKeyStore}});const n=Bl;Object.defineProperty(r,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=Nl;Object.defineProperty(r,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(Kw);var vp={},Za={},_p={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTransactionLastResult=r.Provider=r.IdType=r.FinalExecutionStatusBasic=r.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(r.ExecutionStatusBasic||(r.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(r.FinalExecutionStatusBasic||(r.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(r.IdType||(r.IdType={}));class e{}r.Provider=e;function t(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=J.Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}r.getTransactionLastResult=t})(_p);var Vw={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Qa=kT;function kT(r){if(!r)throw new TypeError("argument namespace is required");function e(t){}return e._file=void 0,e._ignored=!0,e._namespace=r,e._traced=!1,e._warned=Object.create(null),e.function=TT,e.property=IT,e}function TT(r,e){if(typeof r!="function")throw new TypeError("argument fn must be a function");return r}function IT(r,e,t){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(r,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var Go={},Jw={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var PT=RT;function RT(r){if(!r)throw new TypeError("argument namespace is required");function e(t){}return e._file=void 0,e._ignored=!0,e._namespace=r,e._traced=!1,e._warned=Object.create(null),e.function=CT,e.property=MT,e}function CT(r,e){if(typeof r!="function")throw new TypeError("argument fn must be a function");return r}function MT(r,e,t){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(r,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var BT=Object.setPrototypeOf||({__proto__:[]}instanceof Array?NT:OT);function NT(r,e){return r.__proto__=e,r}function OT(r,e){for(var t in e)Object.prototype.hasOwnProperty.call(r,t)||(r[t]=e[t]);return r}var LT={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var Yw=LT,DT=Xi;Xi.STATUS_CODES=Yw;Xi.codes=UT(Xi,Yw);Xi.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Xi.empty={204:!0,205:!0,304:!0};Xi.retry={502:!0,503:!0,504:!0};function UT(r,e){var t=[];return Object.keys(e).forEach(function(i){var s=e[i],o=Number(i);r[o]=s,r[s]=o,r[s.toLowerCase()]=o,t.push(o)}),t}function Xi(r){if(typeof r=="number"){if(!Xi[r])throw new Error("invalid status code: "+r);return r}if(typeof r!="string")throw new TypeError("code must be a number or string");var e=parseInt(r,10);if(!isNaN(e)){if(!Xi[e])throw new Error("invalid status code: "+e);return e}if(e=Xi[r.toLowerCase()],!e)throw new Error('invalid status message: "'+r+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var FT=KT;function KT(r){return r.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(r){var e=PT("http-errors"),t=BT,n=DT,i=Hv.exports,s=FT;r.exports=a,r.exports.HttpError=u(),r.exports.isHttpError=h(r.exports.HttpError),_(r.exports,n.codes,r.exports.HttpError);function o(A){return Number(String(A).charAt(0)+"00")}function a(){for(var A,E,T=500,C={},L=0;L<arguments.length;L++){var K=arguments[L];if(K instanceof Error){A=K,T=A.status||A.statusCode||T;continue}switch(typeof K){case"string":E=K;break;case"number":T=K;break;case"object":C=K;break}}(typeof T!="number"||!n[T]&&(T<400||T>=600))&&(T=500);var O=a[T]||a[o(T)];A||(A=O?new O(E):new Error(E||n[T]),Error.captureStackTrace(A,a)),(!O||!(A instanceof O)||A.status!==T)&&(A.expose=T<500,A.status=A.statusCode=T);for(var F in C)F!=="status"&&F!=="statusCode"&&(A[F]=C[F]);return A}function u(){function A(){throw new TypeError("cannot construct abstract class")}return i(A,Error),A}function d(A,E,T){var C=P(E);function L(K){var O=K??n[T],F=new Error(O);return Error.captureStackTrace(F,L),t(F,L.prototype),Object.defineProperty(F,"message",{enumerable:!0,configurable:!0,value:O,writable:!0}),Object.defineProperty(F,"name",{enumerable:!1,configurable:!0,value:C,writable:!0}),F}return i(L,A),v(L,C),L.prototype.status=T,L.prototype.statusCode=T,L.prototype.expose=!0,L}function h(A){return function(T){return!T||typeof T!="object"?!1:T instanceof A?!0:T instanceof Error&&typeof T.expose=="boolean"&&typeof T.statusCode=="number"&&T.status===T.statusCode}}function m(A,E,T){var C=P(E);function L(K){var O=K??n[T],F=new Error(O);return Error.captureStackTrace(F,L),t(F,L.prototype),Object.defineProperty(F,"message",{enumerable:!0,configurable:!0,value:O,writable:!0}),Object.defineProperty(F,"name",{enumerable:!1,configurable:!0,value:C,writable:!0}),F}return i(L,A),v(L,C),L.prototype.status=T,L.prototype.statusCode=T,L.prototype.expose=!1,L}function v(A,E){var T=Object.getOwnPropertyDescriptor(A,"name");T&&T.configurable&&(T.value=E,Object.defineProperty(A,"name",T))}function _(A,E,T){E.forEach(function(L){var K,O=s(n[L]);switch(o(L)){case 400:K=d(T,O,L);break;case 500:K=m(T,O,L);break}K&&(A[L]=K,A[O]=K)}),A["I'mateapot"]=e.function(A.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function P(A){return A.substr(-5)!=="Error"?A+"Error":A}})(Jw);var Au={};Object.defineProperty(Au,"__esModule",{value:!0});async function $T(r,e,t,n){let i=r;for(let s=0;s<e;s++){const o=await n();if(o)return o;await jT(i),i*=t}return null}Au.default=$T;function jT(r){return new Promise(e=>setTimeout(e,r))}var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.logWarning=rn.ErrorContext=rn.TypedError=rn.ArgumentTypeError=rn.PositionalArgsError=void 0;class zT extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}rn.PositionalArgsError=zT;class qT extends Error{constructor(e,t,n){super(`Expected ${t} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}rn.ArgumentTypeError=qT;class HT extends Error{constructor(e,t,n){super(e),this.type=t||"UntypedError",this.context=n}}rn.TypedError=HT;class WT{constructor(e){this.transactionHash=e}}rn.ErrorContext=WT;function GT(...r){J.process.env.NEAR_NO_LOGS||console.warn(...r)}rn.logWarning=GT;var Xw=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Go,"__esModule",{value:!0});Go.fetchJson=void 0;const VT=Xw(Jw.exports),JT=Xw(Au),YT=Za,tm=rn,XT=1e3,ZT=1.5,rm=10;async function QT(r,e){let t={url:null};typeof r=="string"?t.url=r:t=r;const n=await JT.default(XT,rm,ZT,async()=>{try{const i=await fetch(t.url,{method:e?"POST":"GET",body:e||void 0,headers:{...t.headers,"Content-Type":"application/json"}});if(!i.ok){if(i.status===503)return tm.logWarning(`Retrying HTTP request for ${t.url} as it's not available now`),null;throw VT.default(i.status,await i.text())}return i}catch(i){if(i.toString().includes("FetchError")||i.toString().includes("Failed to fetch"))return tm.logWarning(`Retrying HTTP request for ${t.url} because of error: ${i}`),null;throw i}});if(!n)throw new YT.TypedError(`Exceeded ${rm} attempts for ${t.url}.`,"RetriesExceeded");return await n.json()}Go.fetchJson=QT;var On={},Zw={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(z,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var t=Object.prototype.toString,n=Array.isArray||function(x){return t.call(x)==="[object Array]"};function i(te){return typeof te=="function"}function s(te){return n(te)?"array":typeof te}function o(te){return te.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(te,x){return te!=null&&typeof te=="object"&&x in te}function u(te,x){return te!=null&&typeof te!="object"&&te.hasOwnProperty&&te.hasOwnProperty(x)}var d=RegExp.prototype.test;function h(te,x){return d.call(te,x)}var m=/\S/;function v(te){return!h(m,te)}var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function P(te){return String(te).replace(/[&<>"'`=\/]/g,function(c){return _[c]})}var A=/\s*/,E=/\s+/,T=/\s*=/,C=/\s*\}/,L=/#|\^|\/|>|\{|&|=|!/;function K(te,x){if(!te)return[];var c=!1,l=[],y=[],w=[],S=!1,I=!1,M="",p=0;function f(){if(S&&!I)for(;w.length;)delete y[w.pop()];else w=[];S=!1,I=!1}var b,U,D;function G(Ur){if(typeof Ur=="string"&&(Ur=Ur.split(E,2)),!n(Ur)||Ur.length!==2)throw new Error("Invalid tags: "+Ur);b=new RegExp(o(Ur[0])+"\\s*"),U=new RegExp("\\s*"+o(Ur[1])),D=new RegExp("\\s*"+o("}"+Ur[1]))}G(x||xe.tags);for(var be=new H(te),le,ue,At,Me,De,jr;!be.eos();){if(le=be.pos,At=be.scanUntil(b),At)for(var et=0,ut=At.length;et<ut;++et)Me=At.charAt(et),v(Me)?(w.push(y.length),M+=Me):(I=!0,c=!0,M+=" "),y.push(["text",Me,le,le+1]),le+=1,Me===`
`&&(f(),M="",p=0,c=!1);if(!be.scan(b))break;if(S=!0,ue=be.scan(L)||"name",be.scan(A),ue==="="?(At=be.scanUntil(T),be.scan(T),be.scanUntil(U)):ue==="{"?(At=be.scanUntil(D),be.scan(C),be.scanUntil(U),ue="&"):At=be.scanUntil(U),!be.scan(U))throw new Error("Unclosed tag at "+be.pos);if(ue==">"?De=[ue,At,le,be.pos,M,p,c]:De=[ue,At,le,be.pos],p++,y.push(De),ue==="#"||ue==="^")l.push(De);else if(ue==="/"){if(jr=l.pop(),!jr)throw new Error('Unopened section "'+At+'" at '+le);if(jr[1]!==At)throw new Error('Unclosed section "'+jr[1]+'" at '+le)}else ue==="name"||ue==="{"||ue==="&"?I=!0:ue==="="&&G(At)}if(f(),jr=l.pop(),jr)throw new Error('Unclosed section "'+jr[1]+'" at '+be.pos);return F(O(y))}function O(te){for(var x=[],c,l,y=0,w=te.length;y<w;++y)c=te[y],c&&(c[0]==="text"&&l&&l[0]==="text"?(l[1]+=c[1],l[3]=c[3]):(x.push(c),l=c));return x}function F(te){for(var x=[],c=x,l=[],y,w,S=0,I=te.length;S<I;++S)switch(y=te[S],y[0]){case"#":case"^":c.push(y),l.push(y),c=y[4]=[];break;case"/":w=l.pop(),w[5]=y[2],c=l.length>0?l[l.length-1][4]:x;break;default:c.push(y)}return x}function H(te){this.string=te,this.tail=te,this.pos=0}H.prototype.eos=function(){return this.tail===""},H.prototype.scan=function(x){var c=this.tail.match(x);if(!c||c.index!==0)return"";var l=c[0];return this.tail=this.tail.substring(l.length),this.pos+=l.length,l},H.prototype.scanUntil=function(x){var c=this.tail.search(x),l;switch(c){case-1:l=this.tail,this.tail="";break;case 0:l="";break;default:l=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=l.length,l};function V(te,x){this.view=te,this.cache={".":this.view},this.parent=x}V.prototype.push=function(x){return new V(x,this)},V.prototype.lookup=function(x){var c=this.cache,l;if(c.hasOwnProperty(x))l=c[x];else{for(var y=this,w,S,I,M=!1;y;){if(x.indexOf(".")>0)for(w=y.view,S=x.split("."),I=0;w!=null&&I<S.length;)I===S.length-1&&(M=a(w,S[I])||u(w,S[I])),w=w[S[I++]];else w=y.view[x],M=a(y.view,x);if(M){l=w;break}y=y.parent}c[x]=l}return i(l)&&(l=l.call(this.view)),l};function ie(){this.templateCache={_cache:{},set:function(x,c){this._cache[x]=c},get:function(x){return this._cache[x]},clear:function(){this._cache={}}}}ie.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},ie.prototype.parse=function(x,c){var l=this.templateCache,y=x+":"+(c||xe.tags).join(":"),w=typeof l<"u",S=w?l.get(y):void 0;return S==null&&(S=K(x,c),w&&l.set(y,S)),S},ie.prototype.render=function(x,c,l,y){var w=this.getConfigTags(y),S=this.parse(x,w),I=c instanceof V?c:new V(c,void 0);return this.renderTokens(S,I,l,x,y)},ie.prototype.renderTokens=function(x,c,l,y,w){for(var S="",I,M,p,f=0,b=x.length;f<b;++f)p=void 0,I=x[f],M=I[0],M==="#"?p=this.renderSection(I,c,l,y,w):M==="^"?p=this.renderInverted(I,c,l,y,w):M===">"?p=this.renderPartial(I,c,l,w):M==="&"?p=this.unescapedValue(I,c):M==="name"?p=this.escapedValue(I,c,w):M==="text"&&(p=this.rawValue(I)),p!==void 0&&(S+=p);return S},ie.prototype.renderSection=function(x,c,l,y,w){var S=this,I="",M=c.lookup(x[1]);function p(U){return S.render(U,c,l,w)}if(!!M){if(n(M))for(var f=0,b=M.length;f<b;++f)I+=this.renderTokens(x[4],c.push(M[f]),l,y,w);else if(typeof M=="object"||typeof M=="string"||typeof M=="number")I+=this.renderTokens(x[4],c.push(M),l,y,w);else if(i(M)){if(typeof y!="string")throw new Error("Cannot use higher-order sections without the original template");M=M.call(c.view,y.slice(x[3],x[5]),p),M!=null&&(I+=M)}else I+=this.renderTokens(x[4],c,l,y,w);return I}},ie.prototype.renderInverted=function(x,c,l,y,w){var S=c.lookup(x[1]);if(!S||n(S)&&S.length===0)return this.renderTokens(x[4],c,l,y,w)},ie.prototype.indentPartial=function(x,c,l){for(var y=c.replace(/[^ \t]/g,""),w=x.split(`
`),S=0;S<w.length;S++)w[S].length&&(S>0||!l)&&(w[S]=y+w[S]);return w.join(`
`)},ie.prototype.renderPartial=function(x,c,l,y){if(!!l){var w=this.getConfigTags(y),S=i(l)?l(x[1]):l[x[1]];if(S!=null){var I=x[6],M=x[5],p=x[4],f=S;M==0&&p&&(f=this.indentPartial(S,p,I));var b=this.parse(f,w);return this.renderTokens(b,c,l,f,y)}}},ie.prototype.unescapedValue=function(x,c){var l=c.lookup(x[1]);if(l!=null)return l},ie.prototype.escapedValue=function(x,c,l){var y=this.getConfigEscape(l)||xe.escape,w=c.lookup(x[1]);if(w!=null)return typeof w=="number"&&y===xe.escape?String(w):y(w)},ie.prototype.rawValue=function(x){return x[1]},ie.prototype.getConfigTags=function(x){return n(x)?x:x&&typeof x=="object"?x.tags:void 0},ie.prototype.getConfigEscape=function(x){if(x&&typeof x=="object"&&!n(x))return x.escape};var xe={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(te){ae.templateCache=te},get templateCache(){return ae.templateCache}},ae=new ie;return xe.clearCache=function(){return ae.clearCache()},xe.parse=function(x,c){return ae.parse(x,c)},xe.render=function(x,c,l,y){if(typeof x!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(x)+'" was given as the first argument for mustache#render(template, view, partials)');return ae.render(x,c,l,y)},xe.escape=P,xe.Scanner=H,xe.Context=V,xe.Writer=ie,xe})})(Zw);const eI={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}};var tI={schema:eI};const rI="Exceeded the maximum amount of gas allowed to burn per contract",nI="Method name is empty",iI="Wasmer compilation error: {{msg}}",sI="Smart contract panicked: {{panic_msg}}",oI="Error creating Wasm memory",aI="Exceeded the prepaid gas",cI="Method name is not valid UTF8 string",uI="String encoding is bad UTF-16 sequence",fI="WebAssembly trap: {{msg}}",lI="Gas instrumentation failed or contract has denied instructions.",dI="{{promise_idx}} does not correspond to existing promises",hI="Accessed invalid promise result index: {{result_idx}}",pI="Error happened while deserializing the module",gI="Contract method is not found",yI="Accessed invalid register id: {{register_id}}",mI="VM Logic returned an invalid receipt index: {{receipt_index}}",bI="Method name is empty in contract call",xI="Returning joint promise is currently prohibited",wI="Stack instrumentation failed",vI="Cannot find contract code for account {{account_id}}",_I="Invalid method signature",AI="Integer overflow happened during contract execution",EI="MemoryAccessViolation",SI="Iterator index {{iterator_index}} does not exist",kI="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",TI="VM Logic returned an invalid account id",II="Error happened while serializing the module",PI="Actions can only be appended to non-joint promise.",RI="Internal memory declaration has been found in the module",CI="Error happened during instantiation",MI="{{method_name}} is not allowed in view calls",BI="VM Logic returned an invalid method name",NI="String encoding is bad UTF-8 sequence",OI="Exceeded the account balance",LI="Wasm contract link error: {{msg}}",DI="VM Logic provided an invalid public key",UI="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",FI="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",KI="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",$I="Transaction gas or balance cost is too high",jI="Transaction is not signed with the given public key",zI=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,qI="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",HI="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",WI="Transaction has expired",GI="Account {{account_id}} is staking and can not be deleted",VI="Signer {{signer_id}} does not exist",JI="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",YI="The public key {{public_key}} is already used for an existing access key",XI="Invalid signer account ID {{signer_id}} according to requirements",ZI="The new account_id {{account_id}} can't be created by {{predecessor_id}}",QI="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",eP="Account {{account_id}} is not yet staked, but tried to unstake",tP="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",rP="Can't create a new account {{account_id}}, because it already exists",nP="Transaction parent block hash doesn't belong to the current chain",iP="Can't complete the action because account {{account_id}} doesn't exist",sP="Transaction method name {{method_name}} isn't allowed by the access key",oP="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",aP="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",cP="Invalid receiver account ID {{receiver_id}} according to requirements",uP="Account {{account_id}} tries to remove an access key that doesn't exist",fP="Timeout exceeded",lP="Connection closed";var dP={GasLimitExceeded:rI,MethodEmptyName:nI,WasmerCompileError:iI,GuestPanic:sI,Memory:oI,GasExceeded:aI,MethodUTF8Error:cI,BadUTF16:uI,WasmTrap:fI,GasInstrumentation:lI,InvalidPromiseIndex:dI,InvalidPromiseResultIndex:hI,Deserialization:pI,MethodNotFound:gI,InvalidRegisterId:yI,InvalidReceiptIndex:mI,EmptyMethodName:bI,CannotReturnJointPromise:xI,StackHeightInstrumentation:wI,CodeDoesNotExist:vI,MethodInvalidSignature:_I,IntegerOverflow:AI,MemoryAccessViolation:EI,InvalidIteratorIndex:SI,IteratorWasInvalidated:kI,InvalidAccountId:TI,Serialization:II,CannotAppendActionToJointPromise:PI,InternalMemoryDeclared:RI,Instantiate:CI,ProhibitedInView:MI,InvalidMethodName:BI,BadUTF8:NI,BalanceExceeded:OI,LinkError:LI,InvalidPublicKey:DI,ActorNoPermission:UI,LackBalanceForState:FI,ReceiverMismatch:KI,CostOverflow:$I,InvalidSignature:jI,AccessKeyNotFound:zI,NotEnoughBalance:qI,NotEnoughAllowance:HI,Expired:WI,DeleteAccountStaking:GI,SignerDoesNotExist:VI,TriesToStake:JI,AddKeyAlreadyExists:YI,InvalidSigner:XI,CreateAccountNotAllowed:ZI,RequiresFullAccess:QI,TriesToUnstake:eP,InvalidNonce:tP,AccountAlreadyExists:rP,InvalidChain:nP,AccountDoesNotExist:iP,MethodNameMismatch:sP,DeleteAccountHasRent:oP,DeleteAccountHasEnoughBalance:aP,InvalidReceiver:cP,DeleteKeyDoesNotExist:uP,Timeout:fP,Closed:lP},Ap=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(On,"__esModule",{value:!0});On.getErrorTypeFromErrorMessage=On.formatError=On.parseResultError=On.parseRpcError=On.ServerError=void 0;const hP=Ap(Zw.exports),pP=Ap(tI),nm=Ap(dP),gP=vp,yP=rn,mP={formatNear:()=>(r,e)=>gP.utils.format.formatNearAmount(e(r))};class Ep extends yP.TypedError{}On.ServerError=Ep;class bP extends Ep{}function Qw(r){const e={},t=tv(r,pP.default.schema,e,""),n=new Ep(ev(t,e),t);return Object.assign(n,e),n}On.parseRpcError=Qw;function xP(r){const e=Qw(r.status.Failure),t=new bP;return Object.assign(t,e),t.type=e.type,t.message=e.message,t.transaction_outcome=r.transaction_outcome,t}On.parseResultError=xP;function ev(r,e){return typeof nm.default[r]=="string"?hP.default.render(nm.default[r],{...e,...mP}):JSON.stringify(e)}On.formatError=ev;function tv(r,e,t,n){let i,s,o;for(const a in e){if(vP(r[a]))return r[a];if(Pd(r[a]))i=r[a],s=e[a],o=a;else if(Pd(r.kind)&&Pd(r.kind[a]))i=r.kind[a],s=e[a],o=a;else continue}if(i&&s){for(const a of Object.keys(s.props))t[a]=i[a];return tv(i,e,t,o)}else return t.kind=r,n}function wP(r){switch(!0){case/^account .*? does not exist while viewing$/.test(r):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(r):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(r):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(r):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(r):return"InvalidNonce";default:return"UntypedError"}}On.getErrorTypeFromErrorMessage=wP;function Pd(r){return Object.prototype.toString.call(r)==="[object Object]"}function vP(r){return Object.prototype.toString.call(r)==="[object String]"}(function(r){var e=z&&z.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcProvider=r.ErrorContext=r.TypedError=void 0;const t=e(Qa),n=_p,i=Go,s=rn;Object.defineProperty(r,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(r,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const o=br,a=e(Au),u=On,d=12,h=500,m=1.5;let v=123;class _ extends n.Provider{constructor(A){super(),A!=null&&typeof A=="object"?this.connection=A:(t.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:A})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(A){const E=A.encode();return this.sendJsonRpc("broadcast_tx_commit",[J.Buffer.from(E).toString("base64")])}async sendTransactionAsync(A){const E=A.encode();return this.sendJsonRpc("broadcast_tx_async",[J.Buffer.from(E).toString("base64")])}async txStatus(A,E){return typeof A=="string"?this.txStatusString(A,E):this.txStatusUint8Array(A,E)}async txStatusUint8Array(A,E){return this.sendJsonRpc("tx",[o.baseEncode(A),E])}async txStatusString(A,E){return this.sendJsonRpc("tx",[A,E])}async txStatusReceipts(A,E){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[o.baseEncode(A),E])}async query(...A){let E;if(A.length===1)E=await this.sendJsonRpc("query",A[0]);else{const[T,C]=A;E=await this.sendJsonRpc("query",[T,C])}if(E&&E.error)throw new s.TypedError(`Querying ${A} failed: ${E.error}.
${JSON.stringify(E,null,2)}`,u.getErrorTypeFromErrorMessage(E.error));return E}async block(A){const{finality:E}=A;let{blockId:T}=A;return typeof A!="object"&&(t.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),T=A),this.sendJsonRpc("block",{block_id:T,finality:E})}async blockChanges(A){const{finality:E}=A,{blockId:T}=A;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:T,finality:E})}async chunk(A){return this.sendJsonRpc("chunk",[A])}async validators(A){return this.sendJsonRpc("validators",[A])}async experimental_genesisConfig(){return t.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(A){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",A)}async experimental_lightClientProof(A){return t.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(A)}async lightClientProof(A){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",A)}async accessKeyChanges(A,E){const{finality:T}=E,{blockId:C}=E;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:A,block_id:C,finality:T})}async singleAccessKeyChanges(A,E){const{finality:T}=E,{blockId:C}=E;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:A,block_id:C,finality:T})}async accountChanges(A,E){const{finality:T}=E,{blockId:C}=E;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:A,block_id:C,finality:T})}async contractStateChanges(A,E,T=""){const{finality:C}=E,{blockId:L}=E;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:A,key_prefix_base64:T,block_id:L,finality:C})}async contractCodeChanges(A,E){const{finality:T}=E,{blockId:C}=E;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:A,block_id:C,finality:T})}async gasPrice(A){return await this.sendJsonRpc("gas_price",[A])}async sendJsonRpc(A,E){const T=await a.default(h,d,m,async()=>{try{const L={method:A,params:E,id:v++,jsonrpc:"2.0"},K=await i.fetchJson(this.connection,JSON.stringify(L));if(K.error){if(typeof K.error.data=="object")throw typeof K.error.data.error_message=="string"&&typeof K.error.data.error_type=="string"?new s.TypedError(K.error.data.error_message,K.error.data.error_type):u.parseRpcError(K.error.data);{const O=`[${K.error.code}] ${K.error.message}: ${K.error.data}`;throw K.error.data==="Timeout"||O.includes("Timeout error")||O.includes("query has timed out")?new s.TypedError(O,"TimeoutError"):new s.TypedError(O,u.getErrorTypeFromErrorMessage(K.error.data))}}return K}catch(L){if(L.type==="TimeoutError")return J.process.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${A} as it has timed out`,E),null;throw L}}),{result:C}=T;if(typeof C>"u")throw new s.TypedError(`Exceeded ${d} attempts for request to ${A}.`,"RetriesExceeded");return C}}r.JsonRpcProvider=_})(Vw);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorContext=r.TypedError=r.getTransactionLastResult=r.FinalExecutionStatusBasic=r.JsonRpcProvider=r.Provider=void 0;const e=_p;Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(r,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(r,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const t=Vw;Object.defineProperty(r,"JsonRpcProvider",{enumerable:!0,get:function(){return t.JsonRpcProvider}}),Object.defineProperty(r,"TypedError",{enumerable:!0,get:function(){return t.TypedError}}),Object.defineProperty(r,"ErrorContext",{enumerable:!0,get:function(){return t.ErrorContext}})})(Za);var Sp={},kp={},lo={exports:{}};(function(r){(function(e,t){function n(x,c){if(!x)throw new Error(c||"Assertion failed")}function i(x,c){x.super_=c;var l=function(){};l.prototype=c.prototype,x.prototype=new l,x.prototype.constructor=x}function s(x,c,l){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(x||0,c||10,l||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,l){return c.cmp(l)>0?c:l},s.min=function(c,l){return c.cmp(l)<0?c:l},s.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(l===16?this._parseHex(c,w,y):(this._parseBase(c,l,w),y==="le"&&this._initArray(this.toArray(),l,y)))},s.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},s.prototype._initArray=function(c,l,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,I,M=0;if(y==="be")for(w=c.length-1,S=0;w>=0;w-=3)I=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[S]|=I<<M&67108863,this.words[S+1]=I>>>26-M&67108863,M+=24,M>=26&&(M-=26,S++);else if(y==="le")for(w=0,S=0;w<c.length;w+=3)I=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[S]|=I<<M&67108863,this.words[S+1]=I>>>26-M&67108863,M+=24,M>=26&&(M-=26,S++);return this._strip()};function a(x,c){var l=x.charCodeAt(c);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+x)}function u(x,c,l){var y=a(x,l);return l-1>=c&&(y|=a(x,l-1)<<4),y}s.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S=0,I=0,M;if(y==="be")for(w=c.length-1;w>=l;w-=2)M=u(c,l,w)<<S,this.words[I]|=M&67108863,S>=18?(S-=18,I+=1,this.words[I]|=M>>>26):S+=8;else{var p=c.length-l;for(w=p%2===0?l+1:l;w<c.length;w+=2)M=u(c,l,w)<<S,this.words[I]|=M&67108863,S>=18?(S-=18,I+=1,this.words[I]|=M>>>26):S+=8}this._strip()};function d(x,c,l,y){for(var w=0,S=0,I=Math.min(x.length,l),M=c;M<I;M++){var p=x.charCodeAt(M)-48;w*=y,p>=49?S=p-49+10:p>=17?S=p-17+10:S=p,n(p>=0&&S<y,"Invalid character"),w+=S}return w}s.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var w=0,S=1;S<=67108863;S*=l)w++;w--,S=S/l|0;for(var I=c.length-y,M=I%w,p=Math.min(I,I-M)+y,f=0,b=y;b<p;b+=w)f=d(c,b,b+w,l),this.imuln(S),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(M!==0){var U=1;for(f=d(c,b,c.length,l),b=0;b<M;b++)U*=l;this.imuln(U),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red};function h(x,c){x.words=c.words,x.length=c.length,x.negative=c.negative,x.red=c.red}if(s.prototype._move=function(c){h(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var w=0,S=0,I=0;I<this.length;I++){var M=this.words[I],p=((M<<w|S)&16777215).toString(16);S=M>>>24-w&16777215,S!==0||I!==this.length-1?y=v[6-p.length]+p+y:y=p+y,w+=2,w>=26&&(w-=26,I--)}for(S!==0&&(y=S.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=_[c],b=P[c];y="";var U=this.clone();for(U.negative=0;!U.isZero();){var D=U.modrn(b).toString(c);U=U.idivn(b),U.isZero()?y=D+y:y=v[f-D.length]+D+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,l){return this.toArrayLike(o,c,l)}),s.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)};var A=function(c,l){return c.allocUnsafe?c.allocUnsafe(l):new c(l)};s.prototype.toArrayLike=function(c,l,y){this._strip();var w=this.byteLength(),S=y||Math.max(1,w);n(w<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var I=A(c,S),M=l==="le"?"LE":"BE";return this["_toArrayLike"+M](I,w),I},s.prototype._toArrayLikeLE=function(c,l){for(var y=0,w=0,S=0,I=0;S<this.length;S++){var M=this.words[S]<<I|w;c[y++]=M&255,y<c.length&&(c[y++]=M>>8&255),y<c.length&&(c[y++]=M>>16&255),I===6?(y<c.length&&(c[y++]=M>>24&255),w=0,I=0):(w=M>>>24,I+=2)}if(y<c.length)for(c[y++]=w;y<c.length;)c[y++]=0},s.prototype._toArrayLikeBE=function(c,l){for(var y=c.length-1,w=0,S=0,I=0;S<this.length;S++){var M=this.words[S]<<I|w;c[y--]=M&255,y>=0&&(c[y--]=M>>8&255),y>=0&&(c[y--]=M>>16&255),I===6?(y>=0&&(c[y--]=M>>24&255),w=0,I=0):(w=M>>>24,I+=2)}if(y>=0)for(c[y--]=w;y>=0;)c[y--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},s.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return(l&8191)===0&&(y+=13,l>>>=13),(l&127)===0&&(y+=7,l>>>=7),(l&15)===0&&(y+=4,l>>>=4),(l&3)===0&&(y+=2,l>>>=2),(l&1)===0&&y++,y},s.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function E(x){for(var c=new Array(x.bitLength()),l=0;l<c.length;l++){var y=l/26|0,w=l%26;c[l]=x.words[y]>>>w&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var w=0;w<y.length;w++)this.words[w]=l.words[w]^y.words[w];if(this!==l)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=l.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var w=0;w<l;w++)this.words[w]=~this.words[w]&67108863;return y>0&&(this.words[w]=~this.words[w]&67108863>>26-y),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,l){n(typeof c=="number"&&c>=0);var y=c/26|0,w=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<w:this.words[y]=this.words[y]&~(1<<w),this._strip()},s.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,w;this.length>c.length?(y=this,w=c):(y=c,w=this);for(var S=0,I=0;I<w.length;I++)l=(y.words[I]|0)+(w.words[I]|0)+S,this.words[I]=l&67108863,S=l>>>26;for(;S!==0&&I<y.length;I++)l=(y.words[I]|0)+S,this.words[I]=l&67108863,S=l>>>26;if(this.length=y.length,S!==0)this.words[this.length]=S,this.length++;else if(y!==this)for(;I<y.length;I++)this.words[I]=y.words[I];return this},s.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,S;y>0?(w=this,S=c):(w=c,S=this);for(var I=0,M=0;M<S.length;M++)l=(w.words[M]|0)-(S.words[M]|0)+I,I=l>>26,this.words[M]=l&67108863;for(;I!==0&&M<w.length;M++)l=(w.words[M]|0)+I,I=l>>26,this.words[M]=l&67108863;if(I===0&&M<w.length&&w!==this)for(;M<w.length;M++)this.words[M]=w.words[M];return this.length=Math.max(this.length,M),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function T(x,c,l){l.negative=c.negative^x.negative;var y=x.length+c.length|0;l.length=y,y=y-1|0;var w=x.words[0]|0,S=c.words[0]|0,I=w*S,M=I&67108863,p=I/67108864|0;l.words[0]=M;for(var f=1;f<y;f++){for(var b=p>>>26,U=p&67108863,D=Math.min(f,c.length-1),G=Math.max(0,f-x.length+1);G<=D;G++){var be=f-G|0;w=x.words[be]|0,S=c.words[G]|0,I=w*S+U,b+=I/67108864|0,U=I&67108863}l.words[f]=U|0,p=b|0}return p!==0?l.words[f]=p|0:l.length--,l._strip()}var C=function(c,l,y){var w=c.words,S=l.words,I=y.words,M=0,p,f,b,U=w[0]|0,D=U&8191,G=U>>>13,be=w[1]|0,le=be&8191,ue=be>>>13,At=w[2]|0,Me=At&8191,De=At>>>13,jr=w[3]|0,et=jr&8191,ut=jr>>>13,Ur=w[4]|0,pt=Ur&8191,gt=Ur>>>13,fn=w[5]|0,rt=fn&8191,yt=fn>>>13,ii=w[6]|0,ft=ii&8191,nt=ii>>>13,si=w[7]|0,it=si&8191,lt=si>>>13,jn=w[8]|0,dt=jn&8191,mt=jn>>>13,zn=w[9]|0,st=zn&8191,tt=zn>>>13,An=S[0]|0,Je=An&8191,Xe=An>>>13,Rn=S[1]|0,Ze=Rn&8191,Qe=Rn>>>13,qn=S[2]|0,ht=qn&8191,bt=qn>>>13,wi=S[3]|0,qe=wi&8191,Ge=wi>>>13,ln=S[4]|0,ot=ln&8191,at=ln>>>13,oi=S[5]|0,xt=oi&8191,Ue=oi>>>13,ai=S[6]|0,k=ai&8191,R=ai>>>13,B=S[7]|0,g=B&8191,N=B>>>13,W=S[8]|0,q=W&8191,X=W>>>13,de=S[9]|0,fe=de&8191,ne=de>>>13;y.negative=c.negative^l.negative,y.length=19,p=Math.imul(D,Je),f=Math.imul(D,Xe),f=f+Math.imul(G,Je)|0,b=Math.imul(G,Xe);var wt=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,p=Math.imul(le,Je),f=Math.imul(le,Xe),f=f+Math.imul(ue,Je)|0,b=Math.imul(ue,Xe),p=p+Math.imul(D,Ze)|0,f=f+Math.imul(D,Qe)|0,f=f+Math.imul(G,Ze)|0,b=b+Math.imul(G,Qe)|0;var Se=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Se>>>26)|0,Se&=67108863,p=Math.imul(Me,Je),f=Math.imul(Me,Xe),f=f+Math.imul(De,Je)|0,b=Math.imul(De,Xe),p=p+Math.imul(le,Ze)|0,f=f+Math.imul(le,Qe)|0,f=f+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Qe)|0,p=p+Math.imul(D,ht)|0,f=f+Math.imul(D,bt)|0,f=f+Math.imul(G,ht)|0,b=b+Math.imul(G,bt)|0;var Fe=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,p=Math.imul(et,Je),f=Math.imul(et,Xe),f=f+Math.imul(ut,Je)|0,b=Math.imul(ut,Xe),p=p+Math.imul(Me,Ze)|0,f=f+Math.imul(Me,Qe)|0,f=f+Math.imul(De,Ze)|0,b=b+Math.imul(De,Qe)|0,p=p+Math.imul(le,ht)|0,f=f+Math.imul(le,bt)|0,f=f+Math.imul(ue,ht)|0,b=b+Math.imul(ue,bt)|0,p=p+Math.imul(D,qe)|0,f=f+Math.imul(D,Ge)|0,f=f+Math.imul(G,qe)|0,b=b+Math.imul(G,Ge)|0;var Ke=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,p=Math.imul(pt,Je),f=Math.imul(pt,Xe),f=f+Math.imul(gt,Je)|0,b=Math.imul(gt,Xe),p=p+Math.imul(et,Ze)|0,f=f+Math.imul(et,Qe)|0,f=f+Math.imul(ut,Ze)|0,b=b+Math.imul(ut,Qe)|0,p=p+Math.imul(Me,ht)|0,f=f+Math.imul(Me,bt)|0,f=f+Math.imul(De,ht)|0,b=b+Math.imul(De,bt)|0,p=p+Math.imul(le,qe)|0,f=f+Math.imul(le,Ge)|0,f=f+Math.imul(ue,qe)|0,b=b+Math.imul(ue,Ge)|0,p=p+Math.imul(D,ot)|0,f=f+Math.imul(D,at)|0,f=f+Math.imul(G,ot)|0,b=b+Math.imul(G,at)|0;var We=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(We>>>26)|0,We&=67108863,p=Math.imul(rt,Je),f=Math.imul(rt,Xe),f=f+Math.imul(yt,Je)|0,b=Math.imul(yt,Xe),p=p+Math.imul(pt,Ze)|0,f=f+Math.imul(pt,Qe)|0,f=f+Math.imul(gt,Ze)|0,b=b+Math.imul(gt,Qe)|0,p=p+Math.imul(et,ht)|0,f=f+Math.imul(et,bt)|0,f=f+Math.imul(ut,ht)|0,b=b+Math.imul(ut,bt)|0,p=p+Math.imul(Me,qe)|0,f=f+Math.imul(Me,Ge)|0,f=f+Math.imul(De,qe)|0,b=b+Math.imul(De,Ge)|0,p=p+Math.imul(le,ot)|0,f=f+Math.imul(le,at)|0,f=f+Math.imul(ue,ot)|0,b=b+Math.imul(ue,at)|0,p=p+Math.imul(D,xt)|0,f=f+Math.imul(D,Ue)|0,f=f+Math.imul(G,xt)|0,b=b+Math.imul(G,Ue)|0;var He=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(He>>>26)|0,He&=67108863,p=Math.imul(ft,Je),f=Math.imul(ft,Xe),f=f+Math.imul(nt,Je)|0,b=Math.imul(nt,Xe),p=p+Math.imul(rt,Ze)|0,f=f+Math.imul(rt,Qe)|0,f=f+Math.imul(yt,Ze)|0,b=b+Math.imul(yt,Qe)|0,p=p+Math.imul(pt,ht)|0,f=f+Math.imul(pt,bt)|0,f=f+Math.imul(gt,ht)|0,b=b+Math.imul(gt,bt)|0,p=p+Math.imul(et,qe)|0,f=f+Math.imul(et,Ge)|0,f=f+Math.imul(ut,qe)|0,b=b+Math.imul(ut,Ge)|0,p=p+Math.imul(Me,ot)|0,f=f+Math.imul(Me,at)|0,f=f+Math.imul(De,ot)|0,b=b+Math.imul(De,at)|0,p=p+Math.imul(le,xt)|0,f=f+Math.imul(le,Ue)|0,f=f+Math.imul(ue,xt)|0,b=b+Math.imul(ue,Ue)|0,p=p+Math.imul(D,k)|0,f=f+Math.imul(D,R)|0,f=f+Math.imul(G,k)|0,b=b+Math.imul(G,R)|0;var $e=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+($e>>>26)|0,$e&=67108863,p=Math.imul(it,Je),f=Math.imul(it,Xe),f=f+Math.imul(lt,Je)|0,b=Math.imul(lt,Xe),p=p+Math.imul(ft,Ze)|0,f=f+Math.imul(ft,Qe)|0,f=f+Math.imul(nt,Ze)|0,b=b+Math.imul(nt,Qe)|0,p=p+Math.imul(rt,ht)|0,f=f+Math.imul(rt,bt)|0,f=f+Math.imul(yt,ht)|0,b=b+Math.imul(yt,bt)|0,p=p+Math.imul(pt,qe)|0,f=f+Math.imul(pt,Ge)|0,f=f+Math.imul(gt,qe)|0,b=b+Math.imul(gt,Ge)|0,p=p+Math.imul(et,ot)|0,f=f+Math.imul(et,at)|0,f=f+Math.imul(ut,ot)|0,b=b+Math.imul(ut,at)|0,p=p+Math.imul(Me,xt)|0,f=f+Math.imul(Me,Ue)|0,f=f+Math.imul(De,xt)|0,b=b+Math.imul(De,Ue)|0,p=p+Math.imul(le,k)|0,f=f+Math.imul(le,R)|0,f=f+Math.imul(ue,k)|0,b=b+Math.imul(ue,R)|0,p=p+Math.imul(D,g)|0,f=f+Math.imul(D,N)|0,f=f+Math.imul(G,g)|0,b=b+Math.imul(G,N)|0;var ze=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ze>>>26)|0,ze&=67108863,p=Math.imul(dt,Je),f=Math.imul(dt,Xe),f=f+Math.imul(mt,Je)|0,b=Math.imul(mt,Xe),p=p+Math.imul(it,Ze)|0,f=f+Math.imul(it,Qe)|0,f=f+Math.imul(lt,Ze)|0,b=b+Math.imul(lt,Qe)|0,p=p+Math.imul(ft,ht)|0,f=f+Math.imul(ft,bt)|0,f=f+Math.imul(nt,ht)|0,b=b+Math.imul(nt,bt)|0,p=p+Math.imul(rt,qe)|0,f=f+Math.imul(rt,Ge)|0,f=f+Math.imul(yt,qe)|0,b=b+Math.imul(yt,Ge)|0,p=p+Math.imul(pt,ot)|0,f=f+Math.imul(pt,at)|0,f=f+Math.imul(gt,ot)|0,b=b+Math.imul(gt,at)|0,p=p+Math.imul(et,xt)|0,f=f+Math.imul(et,Ue)|0,f=f+Math.imul(ut,xt)|0,b=b+Math.imul(ut,Ue)|0,p=p+Math.imul(Me,k)|0,f=f+Math.imul(Me,R)|0,f=f+Math.imul(De,k)|0,b=b+Math.imul(De,R)|0,p=p+Math.imul(le,g)|0,f=f+Math.imul(le,N)|0,f=f+Math.imul(ue,g)|0,b=b+Math.imul(ue,N)|0,p=p+Math.imul(D,q)|0,f=f+Math.imul(D,X)|0,f=f+Math.imul(G,q)|0,b=b+Math.imul(G,X)|0;var je=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(je>>>26)|0,je&=67108863,p=Math.imul(st,Je),f=Math.imul(st,Xe),f=f+Math.imul(tt,Je)|0,b=Math.imul(tt,Xe),p=p+Math.imul(dt,Ze)|0,f=f+Math.imul(dt,Qe)|0,f=f+Math.imul(mt,Ze)|0,b=b+Math.imul(mt,Qe)|0,p=p+Math.imul(it,ht)|0,f=f+Math.imul(it,bt)|0,f=f+Math.imul(lt,ht)|0,b=b+Math.imul(lt,bt)|0,p=p+Math.imul(ft,qe)|0,f=f+Math.imul(ft,Ge)|0,f=f+Math.imul(nt,qe)|0,b=b+Math.imul(nt,Ge)|0,p=p+Math.imul(rt,ot)|0,f=f+Math.imul(rt,at)|0,f=f+Math.imul(yt,ot)|0,b=b+Math.imul(yt,at)|0,p=p+Math.imul(pt,xt)|0,f=f+Math.imul(pt,Ue)|0,f=f+Math.imul(gt,xt)|0,b=b+Math.imul(gt,Ue)|0,p=p+Math.imul(et,k)|0,f=f+Math.imul(et,R)|0,f=f+Math.imul(ut,k)|0,b=b+Math.imul(ut,R)|0,p=p+Math.imul(Me,g)|0,f=f+Math.imul(Me,N)|0,f=f+Math.imul(De,g)|0,b=b+Math.imul(De,N)|0,p=p+Math.imul(le,q)|0,f=f+Math.imul(le,X)|0,f=f+Math.imul(ue,q)|0,b=b+Math.imul(ue,X)|0,p=p+Math.imul(D,fe)|0,f=f+Math.imul(D,ne)|0,f=f+Math.imul(G,fe)|0,b=b+Math.imul(G,ne)|0;var ke=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ke>>>26)|0,ke&=67108863,p=Math.imul(st,Ze),f=Math.imul(st,Qe),f=f+Math.imul(tt,Ze)|0,b=Math.imul(tt,Qe),p=p+Math.imul(dt,ht)|0,f=f+Math.imul(dt,bt)|0,f=f+Math.imul(mt,ht)|0,b=b+Math.imul(mt,bt)|0,p=p+Math.imul(it,qe)|0,f=f+Math.imul(it,Ge)|0,f=f+Math.imul(lt,qe)|0,b=b+Math.imul(lt,Ge)|0,p=p+Math.imul(ft,ot)|0,f=f+Math.imul(ft,at)|0,f=f+Math.imul(nt,ot)|0,b=b+Math.imul(nt,at)|0,p=p+Math.imul(rt,xt)|0,f=f+Math.imul(rt,Ue)|0,f=f+Math.imul(yt,xt)|0,b=b+Math.imul(yt,Ue)|0,p=p+Math.imul(pt,k)|0,f=f+Math.imul(pt,R)|0,f=f+Math.imul(gt,k)|0,b=b+Math.imul(gt,R)|0,p=p+Math.imul(et,g)|0,f=f+Math.imul(et,N)|0,f=f+Math.imul(ut,g)|0,b=b+Math.imul(ut,N)|0,p=p+Math.imul(Me,q)|0,f=f+Math.imul(Me,X)|0,f=f+Math.imul(De,q)|0,b=b+Math.imul(De,X)|0,p=p+Math.imul(le,fe)|0,f=f+Math.imul(le,ne)|0,f=f+Math.imul(ue,fe)|0,b=b+Math.imul(ue,ne)|0;var Ce=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,p=Math.imul(st,ht),f=Math.imul(st,bt),f=f+Math.imul(tt,ht)|0,b=Math.imul(tt,bt),p=p+Math.imul(dt,qe)|0,f=f+Math.imul(dt,Ge)|0,f=f+Math.imul(mt,qe)|0,b=b+Math.imul(mt,Ge)|0,p=p+Math.imul(it,ot)|0,f=f+Math.imul(it,at)|0,f=f+Math.imul(lt,ot)|0,b=b+Math.imul(lt,at)|0,p=p+Math.imul(ft,xt)|0,f=f+Math.imul(ft,Ue)|0,f=f+Math.imul(nt,xt)|0,b=b+Math.imul(nt,Ue)|0,p=p+Math.imul(rt,k)|0,f=f+Math.imul(rt,R)|0,f=f+Math.imul(yt,k)|0,b=b+Math.imul(yt,R)|0,p=p+Math.imul(pt,g)|0,f=f+Math.imul(pt,N)|0,f=f+Math.imul(gt,g)|0,b=b+Math.imul(gt,N)|0,p=p+Math.imul(et,q)|0,f=f+Math.imul(et,X)|0,f=f+Math.imul(ut,q)|0,b=b+Math.imul(ut,X)|0,p=p+Math.imul(Me,fe)|0,f=f+Math.imul(Me,ne)|0,f=f+Math.imul(De,fe)|0,b=b+Math.imul(De,ne)|0;var we=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(we>>>26)|0,we&=67108863,p=Math.imul(st,qe),f=Math.imul(st,Ge),f=f+Math.imul(tt,qe)|0,b=Math.imul(tt,Ge),p=p+Math.imul(dt,ot)|0,f=f+Math.imul(dt,at)|0,f=f+Math.imul(mt,ot)|0,b=b+Math.imul(mt,at)|0,p=p+Math.imul(it,xt)|0,f=f+Math.imul(it,Ue)|0,f=f+Math.imul(lt,xt)|0,b=b+Math.imul(lt,Ue)|0,p=p+Math.imul(ft,k)|0,f=f+Math.imul(ft,R)|0,f=f+Math.imul(nt,k)|0,b=b+Math.imul(nt,R)|0,p=p+Math.imul(rt,g)|0,f=f+Math.imul(rt,N)|0,f=f+Math.imul(yt,g)|0,b=b+Math.imul(yt,N)|0,p=p+Math.imul(pt,q)|0,f=f+Math.imul(pt,X)|0,f=f+Math.imul(gt,q)|0,b=b+Math.imul(gt,X)|0,p=p+Math.imul(et,fe)|0,f=f+Math.imul(et,ne)|0,f=f+Math.imul(ut,fe)|0,b=b+Math.imul(ut,ne)|0;var Te=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Te>>>26)|0,Te&=67108863,p=Math.imul(st,ot),f=Math.imul(st,at),f=f+Math.imul(tt,ot)|0,b=Math.imul(tt,at),p=p+Math.imul(dt,xt)|0,f=f+Math.imul(dt,Ue)|0,f=f+Math.imul(mt,xt)|0,b=b+Math.imul(mt,Ue)|0,p=p+Math.imul(it,k)|0,f=f+Math.imul(it,R)|0,f=f+Math.imul(lt,k)|0,b=b+Math.imul(lt,R)|0,p=p+Math.imul(ft,g)|0,f=f+Math.imul(ft,N)|0,f=f+Math.imul(nt,g)|0,b=b+Math.imul(nt,N)|0,p=p+Math.imul(rt,q)|0,f=f+Math.imul(rt,X)|0,f=f+Math.imul(yt,q)|0,b=b+Math.imul(yt,X)|0,p=p+Math.imul(pt,fe)|0,f=f+Math.imul(pt,ne)|0,f=f+Math.imul(gt,fe)|0,b=b+Math.imul(gt,ne)|0;var Ie=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,p=Math.imul(st,xt),f=Math.imul(st,Ue),f=f+Math.imul(tt,xt)|0,b=Math.imul(tt,Ue),p=p+Math.imul(dt,k)|0,f=f+Math.imul(dt,R)|0,f=f+Math.imul(mt,k)|0,b=b+Math.imul(mt,R)|0,p=p+Math.imul(it,g)|0,f=f+Math.imul(it,N)|0,f=f+Math.imul(lt,g)|0,b=b+Math.imul(lt,N)|0,p=p+Math.imul(ft,q)|0,f=f+Math.imul(ft,X)|0,f=f+Math.imul(nt,q)|0,b=b+Math.imul(nt,X)|0,p=p+Math.imul(rt,fe)|0,f=f+Math.imul(rt,ne)|0,f=f+Math.imul(yt,fe)|0,b=b+Math.imul(yt,ne)|0;var _e=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(_e>>>26)|0,_e&=67108863,p=Math.imul(st,k),f=Math.imul(st,R),f=f+Math.imul(tt,k)|0,b=Math.imul(tt,R),p=p+Math.imul(dt,g)|0,f=f+Math.imul(dt,N)|0,f=f+Math.imul(mt,g)|0,b=b+Math.imul(mt,N)|0,p=p+Math.imul(it,q)|0,f=f+Math.imul(it,X)|0,f=f+Math.imul(lt,q)|0,b=b+Math.imul(lt,X)|0,p=p+Math.imul(ft,fe)|0,f=f+Math.imul(ft,ne)|0,f=f+Math.imul(nt,fe)|0,b=b+Math.imul(nt,ne)|0;var Z=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Z>>>26)|0,Z&=67108863,p=Math.imul(st,g),f=Math.imul(st,N),f=f+Math.imul(tt,g)|0,b=Math.imul(tt,N),p=p+Math.imul(dt,q)|0,f=f+Math.imul(dt,X)|0,f=f+Math.imul(mt,q)|0,b=b+Math.imul(mt,X)|0,p=p+Math.imul(it,fe)|0,f=f+Math.imul(it,ne)|0,f=f+Math.imul(lt,fe)|0,b=b+Math.imul(lt,ne)|0;var Q=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(Q>>>26)|0,Q&=67108863,p=Math.imul(st,q),f=Math.imul(st,X),f=f+Math.imul(tt,q)|0,b=Math.imul(tt,X),p=p+Math.imul(dt,fe)|0,f=f+Math.imul(dt,ne)|0,f=f+Math.imul(mt,fe)|0,b=b+Math.imul(mt,ne)|0;var ce=(M+p|0)+((f&8191)<<13)|0;M=(b+(f>>>13)|0)+(ce>>>26)|0,ce&=67108863,p=Math.imul(st,fe),f=Math.imul(st,ne),f=f+Math.imul(tt,fe)|0,b=Math.imul(tt,ne);var re=(M+p|0)+((f&8191)<<13)|0;return M=(b+(f>>>13)|0)+(re>>>26)|0,re&=67108863,I[0]=wt,I[1]=Se,I[2]=Fe,I[3]=Ke,I[4]=We,I[5]=He,I[6]=$e,I[7]=ze,I[8]=je,I[9]=ke,I[10]=Ce,I[11]=we,I[12]=Te,I[13]=Ie,I[14]=_e,I[15]=Z,I[16]=Q,I[17]=ce,I[18]=re,M!==0&&(I[19]=M,y.length++),y};Math.imul||(C=T);function L(x,c,l){l.negative=c.negative^x.negative,l.length=x.length+c.length;for(var y=0,w=0,S=0;S<l.length-1;S++){var I=w;w=0;for(var M=y&67108863,p=Math.min(S,c.length-1),f=Math.max(0,S-x.length+1);f<=p;f++){var b=S-f,U=x.words[b]|0,D=c.words[f]|0,G=U*D,be=G&67108863;I=I+(G/67108864|0)|0,be=be+M|0,M=be&67108863,I=I+(be>>>26)|0,w+=I>>>26,I&=67108863}l.words[S]=M,y=I,I=w}return y!==0?l.words[S]=y:l.length--,l._strip()}function K(x,c,l){return L(x,c,l)}s.prototype.mulTo=function(c,l){var y,w=this.length+c.length;return this.length===10&&c.length===10?y=C(this,c,l):w<63?y=T(this,c,l):w<1024?y=L(this,c,l):y=K(this,c,l),y},s.prototype.mul=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},s.prototype.mulf=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),K(this,c,l)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var l=c<0;l&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,w=0;w<this.length;w++){var S=(this.words[w]|0)*c,I=(S&67108863)+(y&67108863);y>>=26,y+=S/67108864|0,y+=I>>>26,this.words[w]=I&67108863}return y!==0&&(this.words[w]=y,this.length++),l?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var l=E(c);if(l.length===0)return new s(1);for(var y=this,w=0;w<l.length&&l[w]===0;w++,y=y.sqr());if(++w<l.length)for(var S=y.sqr();w<l.length;w++,S=S.sqr())l[w]!==0&&(y=y.mul(S));return y},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,w=67108863>>>26-l<<26-l,S;if(l!==0){var I=0;for(S=0;S<this.length;S++){var M=this.words[S]&w,p=(this.words[S]|0)-M<<l;this.words[S]=p|I,I=M>>>26-l}I&&(this.words[S]=I,this.length++)}if(y!==0){for(S=this.length-1;S>=0;S--)this.words[S+y]=this.words[S];for(S=0;S<y;S++)this.words[S]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,l,y){n(typeof c=="number"&&c>=0);var w;l?w=(l-l%26)/26:w=0;var S=c%26,I=Math.min((c-S)/26,this.length),M=67108863^67108863>>>S<<S,p=y;if(w-=I,w=Math.max(0,w),p){for(var f=0;f<I;f++)p.words[f]=this.words[f];p.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var b=0;for(f=this.length-1;f>=0&&(b!==0||f>=w);f--){var U=this.words[f]|0;this.words[f]=b<<26-S|U>>>S,b=U&M}return p&&b!==0&&(p.words[p.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,l,y){return n(this.negative===0),this.iushrn(c,l,y)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,w=1<<l;if(this.length<=y)return!1;var S=this.words[y];return!!(S&w)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var w=67108863^67108863>>>l<<l;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,l,y){var w=c.length+y,S;this._expand(w);var I,M=0;for(S=0;S<c.length;S++){I=(this.words[S+y]|0)+M;var p=(c.words[S]|0)*l;I-=p&67108863,M=(I>>26)-(p/67108864|0),this.words[S+y]=I&67108863}for(;S<this.length-y;S++)I=(this.words[S+y]|0)+M,M=I>>26,this.words[S+y]=I&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,S=0;S<this.length;S++)I=-(this.words[S]|0)+M,M=I>>26,this.words[S]=I&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,l){var y=this.length-c.length,w=this.clone(),S=c,I=S.words[S.length-1]|0,M=this._countBits(I);y=26-M,y!==0&&(S=S.ushln(y),w.iushln(y),I=S.words[S.length-1]|0);var p=w.length-S.length,f;if(l!=="mod"){f=new s(null),f.length=p+1,f.words=new Array(f.length);for(var b=0;b<f.length;b++)f.words[b]=0}var U=w.clone()._ishlnsubmul(S,1,p);U.negative===0&&(w=U,f&&(f.words[p]=1));for(var D=p-1;D>=0;D--){var G=(w.words[S.length+D]|0)*67108864+(w.words[S.length+D-1]|0);for(G=Math.min(G/I|0,67108863),w._ishlnsubmul(S,G,D);w.negative!==0;)G--,w.negative=0,w._ishlnsubmul(S,1,D),w.isZero()||(w.negative^=1);f&&(f.words[D]=G)}return f&&f._strip(),w._strip(),l!=="div"&&y!==0&&w.iushrn(y),{div:f||null,mod:w}},s.prototype.divmod=function(c,l,y){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,S,I;return this.negative!==0&&c.negative===0?(I=this.neg().divmod(c,l),l!=="mod"&&(w=I.div.neg()),l!=="div"&&(S=I.mod.neg(),y&&S.negative!==0&&S.iadd(c)),{div:w,mod:S}):this.negative===0&&c.negative!==0?(I=this.divmod(c.neg(),l),l!=="mod"&&(w=I.div.neg()),{div:w,mod:I.mod}):(this.negative&c.negative)!==0?(I=this.neg().divmod(c.neg(),l),l!=="div"&&(S=I.mod.neg(),y&&S.negative!==0&&S.isub(c)),{div:I.div,mod:S}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,l)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,w=c.ushrn(1),S=c.andln(1),I=y.cmp(w);return I<0||S===1&&I===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(c){var l=c<0;l&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,w=0,S=this.length-1;S>=0;S--)w=(y*w+(this.words[S]|0))%c;return l?-w:w},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var l=c<0;l&&(c=-c),n(c<=67108863);for(var y=0,w=this.length-1;w>=0;w--){var S=(this.words[w]|0)+y*67108864;this.words[w]=S/c|0,y=S%c}return this._strip(),l?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),S=new s(0),I=new s(0),M=new s(1),p=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++p;for(var f=y.clone(),b=l.clone();!l.isZero();){for(var U=0,D=1;(l.words[0]&D)===0&&U<26;++U,D<<=1);if(U>0)for(l.iushrn(U);U-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(f),S.isub(b)),w.iushrn(1),S.iushrn(1);for(var G=0,be=1;(y.words[0]&be)===0&&G<26;++G,be<<=1);if(G>0)for(y.iushrn(G);G-- >0;)(I.isOdd()||M.isOdd())&&(I.iadd(f),M.isub(b)),I.iushrn(1),M.iushrn(1);l.cmp(y)>=0?(l.isub(y),w.isub(I),S.isub(M)):(y.isub(l),I.isub(w),M.isub(S))}return{a:I,b:M,gcd:y.iushln(p)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),S=new s(0),I=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var M=0,p=1;(l.words[0]&p)===0&&M<26;++M,p<<=1);if(M>0)for(l.iushrn(M);M-- >0;)w.isOdd()&&w.iadd(I),w.iushrn(1);for(var f=0,b=1;(y.words[0]&b)===0&&f<26;++f,b<<=1);if(f>0)for(y.iushrn(f);f-- >0;)S.isOdd()&&S.iadd(I),S.iushrn(1);l.cmp(y)>=0?(l.isub(y),w.isub(S)):(y.isub(l),S.isub(w))}var U;return l.cmpn(1)===0?U=w:U=S,U.cmpn(0)<0&&U.iadd(c),U},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var w=0;l.isEven()&&y.isEven();w++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var S=l.cmp(y);if(S<0){var I=l;l=y,y=I}else if(S===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(w)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var l=c%26,y=(c-l)/26,w=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=w,this;for(var S=w,I=y;S!==0&&I<this.length;I++){var M=this.words[I]|0;M+=S,S=M>>>26,M&=67108863,this.words[I]=M}return S!==0&&(this.words[I]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var y;if(this.length>1)y=1;else{l&&(c=-c),n(c<=67108863,"Number is too big");var w=this.words[0]|0;y=w===c?0:w<c?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var w=this.words[y]|0,S=c.words[y]|0;if(w!==S){w<S?l=-1:w>S&&(l=1);break}}return l},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new ae(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var O={k256:null,p224:null,p192:null,p25519:null};function F(x,c){this.name=x,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},F.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var w=y<this.n?-1:l.ucmp(this.p);return w===0?(l.words[0]=0,l.length=1):w>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},F.prototype.split=function(c,l){c.iushrn(this.n,0,l)},F.prototype.imulK=function(c){return c.imul(this.k)};function H(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(H,F),H.prototype.split=function(c,l){for(var y=4194303,w=Math.min(c.length,9),S=0;S<w;S++)l.words[S]=c.words[S];if(l.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var I=c.words[9];for(l.words[l.length++]=I&y,S=10;S<c.length;S++){var M=c.words[S]|0;c.words[S-10]=(M&y)<<4|I>>>22,I=M}I>>>=22,c.words[S-10]=I,I===0&&c.length>10?c.length-=10:c.length-=9},H.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var w=c.words[y]|0;l+=w*977,c.words[y]=l&67108863,l=w*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function V(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,F);function ie(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,F);function xe(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(xe,F),xe.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var w=(c.words[y]|0)*19+l,S=w&67108863;w>>>=26,c.words[y]=S,l=w}return l!==0&&(c.words[c.length++]=l),c},s._prime=function(c){if(O[c])return O[c];var l;if(c==="k256")l=new H;else if(c==="p224")l=new V;else if(c==="p192")l=new ie;else if(c==="p25519")l=new xe;else throw new Error("Unknown prime "+c);return O[c]=l,l};function ae(x){if(typeof x=="string"){var c=s._prime(x);this.m=c.p,this.prime=c}else n(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}ae.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},ae.prototype._verify2=function(c,l){n((c.negative|l.negative)===0,"red works only with positives"),n(c.red&&c.red===l.red,"red works only with red numbers")},ae.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(h(c,c.umod(this.m)._forceRed(this)),c)},ae.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},ae.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ae.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},ae.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ae.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},ae.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},ae.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},ae.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},ae.prototype.isqr=function(c){return this.imul(c,c.clone())},ae.prototype.sqr=function(c){return this.mul(c,c)},ae.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(c,y)}for(var w=this.m.subn(1),S=0;!w.isZero()&&w.andln(1)===0;)S++,w.iushrn(1);n(!w.isZero());var I=new s(1).toRed(this),M=I.redNeg(),p=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,p).cmp(M)!==0;)f.redIAdd(M);for(var b=this.pow(f,w),U=this.pow(c,w.addn(1).iushrn(1)),D=this.pow(c,w),G=S;D.cmp(I)!==0;){for(var be=D,le=0;be.cmp(I)!==0;le++)be=be.redSqr();n(le<G);var ue=this.pow(b,new s(1).iushln(G-le-1));U=U.redMul(ue),b=ue.redSqr(),D=D.redMul(b),G=le}return U},ae.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ae.prototype.pow=function(c,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,w=new Array(1<<y);w[0]=new s(1).toRed(this),w[1]=c;for(var S=2;S<w.length;S++)w[S]=this.mul(w[S-1],c);var I=w[0],M=0,p=0,f=l.bitLength()%26;for(f===0&&(f=26),S=l.length-1;S>=0;S--){for(var b=l.words[S],U=f-1;U>=0;U--){var D=b>>U&1;if(I!==w[0]&&(I=this.sqr(I)),D===0&&M===0){p=0;continue}M<<=1,M|=D,p++,!(p!==y&&(S!==0||U!==0))&&(I=this.mul(I,w[M]),p=0,M=0)}f=26}return I},ae.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},ae.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},s.mont=function(c){return new te(c)};function te(x){ae.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,ae),te.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},te.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},te.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new s(0)._forceRed(this);var y=c.mul(l),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},te.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,z)})(lo);(function(r){var e=z&&z.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.parseNearAmount=r.formatNearAmount=r.NEAR_NOMINATION=r.NEAR_NOMINATION_EXP=void 0;const t=e(lo.exports);r.NEAR_NOMINATION_EXP=24,r.NEAR_NOMINATION=new t.default("10",10).pow(new t.default(r.NEAR_NOMINATION_EXP,10));const n=[],i=new t.default(10);for(let m=0,v=new t.default(5);m<r.NEAR_NOMINATION_EXP;m++,v=v.mul(i))n[m]=v;function s(m,v=r.NEAR_NOMINATION_EXP){const _=new t.default(m,10);if(v!==r.NEAR_NOMINATION_EXP){const E=r.NEAR_NOMINATION_EXP-v-1;E>0&&_.iadd(n[E])}m=_.toString();const P=m.substring(0,m.length-r.NEAR_NOMINATION_EXP)||"0",A=m.substring(m.length-r.NEAR_NOMINATION_EXP).padStart(r.NEAR_NOMINATION_EXP,"0").substring(0,v);return u(`${h(P)}.${A}`)}r.formatNearAmount=s;function o(m){if(!m)return null;m=a(m);const v=m.split("."),_=v[0],P=v[1]||"";if(v.length>2||P.length>r.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${m}' as NEAR amount`);return d(_+P.padEnd(r.NEAR_NOMINATION_EXP,"0"))}r.parseNearAmount=o;function a(m){return m.replace(/,/g,"").trim()}function u(m){return m.replace(/\.?0*$/,"")}function d(m){return m=m.replace(/^0+/,""),m===""?"0":m}function h(m){const v=/(-?\d+)(\d{3})/;for(;v.test(m);)m=m.replace(v,"$1,$2");return m}})(kp);(function(r){var e=z&&z.__createBinding||(Object.create?function(v,_,P,A){A===void 0&&(A=P),Object.defineProperty(v,A,{enumerable:!0,get:function(){return _[P]}})}:function(v,_,P,A){A===void 0&&(A=P),v[A]=_[P]}),t=z&&z.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),n=z&&z.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var P in v)P!=="default"&&Object.hasOwnProperty.call(v,P)&&e(_,v,P);return t(_,v),_};Object.defineProperty(r,"__esModule",{value:!0}),r.logWarning=r.rpc_errors=r.KeyPairEd25519=r.KeyPair=r.PublicKey=r.format=r.enums=r.web=r.serialize=r.key_pair=void 0;const i=n(ns);r.key_pair=i;const s=n(xp);r.serialize=s;const o=n(Go);r.web=o;const a=n(Zs);r.enums=a;const u=n(kp);r.format=u;const d=n(On);r.rpc_errors=d;const h=ns;Object.defineProperty(r,"PublicKey",{enumerable:!0,get:function(){return h.PublicKey}}),Object.defineProperty(r,"KeyPair",{enumerable:!0,get:function(){return h.KeyPair}}),Object.defineProperty(r,"KeyPairEd25519",{enumerable:!0,get:function(){return h.KeyPairEd25519}});const m=rn;Object.defineProperty(r,"logWarning",{enumerable:!0,get:function(){return m.logWarning}})})(Sp);var Eu={};(function(r){var e=z&&z.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(r,"__esModule",{value:!0}),r.signTransaction=r.createTransaction=r.SCHEMA=r.Action=r.SignedTransaction=r.Transaction=r.Signature=r.deleteAccount=r.deleteKey=r.addKey=r.stake=r.transfer=r.functionCall=r.stringifyJsonOrBytes=r.deployContract=r.createAccount=r.DeleteAccount=r.DeleteKey=r.AddKey=r.Stake=r.Transfer=r.FunctionCall=r.DeployContract=r.CreateAccount=r.IAction=r.functionCallAccessKey=r.fullAccessKey=r.AccessKey=r.AccessKeyPermission=r.FullAccessPermission=r.FunctionCallPermission=void 0;const t=e(Eh.exports),n=Zs,i=br,s=ns;class o extends n.Assignable{}r.FunctionCallPermission=o;class a extends n.Assignable{}r.FullAccessPermission=a;class u extends n.Enum{}r.AccessKeyPermission=u;class d extends n.Assignable{}r.AccessKey=d;function h(){return new d({nonce:0,permission:new u({fullAccess:new a({})})})}r.fullAccessKey=h;function m(p,f,b){return new d({nonce:0,permission:new u({functionCall:new o({receiverId:p,allowance:b,methodNames:f})})})}r.functionCallAccessKey=m;class v extends n.Assignable{}r.IAction=v;class _ extends v{}r.CreateAccount=_;class P extends v{}r.DeployContract=P;class A extends v{}r.FunctionCall=A;class E extends v{}r.Transfer=E;class T extends v{}r.Stake=T;class C extends v{}r.AddKey=C;class L extends v{}r.DeleteKey=L;class K extends v{}r.DeleteAccount=K;function O(){return new w({createAccount:new _({})})}r.createAccount=O;function F(p){return new w({deployContract:new P({code:p})})}r.deployContract=F;function H(p){return p.byteLength!==void 0&&p.byteLength===p.length?p:J.Buffer.from(JSON.stringify(p))}r.stringifyJsonOrBytes=H;function V(p,f,b,U,D=H){return new w({functionCall:new A({methodName:p,args:D(f),gas:b,deposit:U})})}r.functionCall=V;function ie(p){return new w({transfer:new E({deposit:p})})}r.transfer=ie;function xe(p,f){return new w({stake:new T({stake:p,publicKey:f})})}r.stake=xe;function ae(p,f){return new w({addKey:new C({publicKey:p,accessKey:f})})}r.addKey=ae;function te(p){return new w({deleteKey:new L({publicKey:p})})}r.deleteKey=te;function x(p){return new w({deleteAccount:new K({beneficiaryId:p})})}r.deleteAccount=x;class c extends n.Assignable{}r.Signature=c;class l extends n.Assignable{encode(){return i.serialize(r.SCHEMA,this)}static decode(f){return i.deserialize(r.SCHEMA,l,f)}}r.Transaction=l;class y extends n.Assignable{encode(){return i.serialize(r.SCHEMA,this)}static decode(f){return i.deserialize(r.SCHEMA,y,f)}}r.SignedTransaction=y;class w extends n.Enum{}r.Action=w,r.SCHEMA=new Map([[c,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[y,{kind:"struct",fields:[["transaction",l],["signature",c]]}],[l,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[w]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",u]]}],[u,{kind:"enum",field:"enum",values:[["functionCall",o],["fullAccess",a]]}],[o,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[a,{kind:"struct",fields:[]}],[w,{kind:"enum",field:"enum",values:[["createAccount",_],["deployContract",P],["functionCall",A],["transfer",E],["stake",T],["addKey",C],["deleteKey",L],["deleteAccount",K]]}],[_,{kind:"struct",fields:[]}],[P,{kind:"struct",fields:[["code",["u8"]]]}],[A,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[E,{kind:"struct",fields:[["deposit","u128"]]}],[T,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[C,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",d]]}],[L,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[K,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function S(p,f,b,U,D,G){return new l({signerId:p,publicKey:f,nonce:U,receiverId:b,actions:D,blockHash:G})}r.createTransaction=S;async function I(p,f,b,U){const D=i.serialize(r.SCHEMA,p),G=new Uint8Array(t.default.sha256.array(D)),be=await f.signMessage(D,b,U),le=new y({transaction:p,signature:new c({keyType:p.publicKey.keyType,data:be.signature})});return[G,le]}async function M(...p){if(p[0].constructor===l){const[f,b,U,D]=p;return I(f,b,U,D)}else{const[f,b,U,D,G,be,le]=p,ue=await G.getPublicKey(be,le),At=S(be,ue,f,b,U,D);return I(At,G,be,le)}}r.signTransaction=M})(Eu);var La={},rv=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(La,"__esModule",{value:!0});La.diffEpochValidators=La.findSeatPrice=void 0;const Si=rv(lo.exports),_P=rv(Qa);function AP(r,e,t,n){return n&&n<49?EP(r,e):(t||(_P.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),t=[1,6250]),SP(r,e,t))}La.findSeatPrice=AP;function EP(r,e){const t=r.map(a=>new Si.default(a.stake,10)).sort((a,u)=>a.cmp(u)),n=new Si.default(e),i=t.reduce((a,u)=>a.add(u));if(i.lt(n))throw new Error("Stakes are below seats");let s=new Si.default(1),o=i.add(new Si.default(1));for(;!s.eq(o.sub(new Si.default(1)));){const a=s.add(o).div(new Si.default(2));let u=!1,d=new Si.default(0);for(let h=0;h<t.length;++h)if(d=d.add(t[h].div(a)),d.gte(n)){s=a,u=!0;break}u||(o=a)}return s}function SP(r,e,t){if(t.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=r.map(s=>new Si.default(s.stake,10)).sort((s,o)=>s.cmp(o)),i=n.reduce((s,o)=>s.add(o));return r.length<e?i.mul(new Si.default(t[0])).div(new Si.default(t[1])):n[0].add(new Si.default(1))}function kP(r,e){const t=new Map;r.forEach(i=>t.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!t.has(i.account_id)),removedValidators:r.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>t.has(i.account_id)&&t.get(i.account_id).stake!=i.stake).map(i=>({current:t.get(i.account_id),next:i}))}}La.diffEpochValidators=kP;var Vo={},Ol={},TP=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.DEFAULT_FUNCTION_CALL_GAS=void 0;const IP=TP(lo.exports);Ol.DEFAULT_FUNCTION_CALL_GAS=new IP.default("30000000000000");var Tp=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.Account=void 0;const pc=Tp(lo.exports),Yu=Tp(Qa),Cr=Eu,Xu=Za,Zu=br,gc=ns,Rd=rn,im=On,sm=Ol,PP=Tp(Au),RP=12,CP=500,MP=1.5;function BP(r){return JSON.parse(J.Buffer.from(r).toString())}function NP(r){return J.Buffer.from(JSON.stringify(r))}class Ip{constructor(e,t){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=t}get ready(){return Yu.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){Yu.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(e,t){if(!J.process.env.NEAR_NO_LOGS)for(const n of t)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),this.printLogs(e,n.logs,"	"),n.failure&&console.warn(`	Failure [${e}]: ${n.failure}`)}printLogs(e,t,n=""){if(!J.process.env.NEAR_NO_LOGS)for(const i of t)console.log(`${n}Log [${e}]: ${i}`)}async signTransaction(e,t){const n=await this.findAccessKey(e,t);if(!n)throw new Xu.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:i}=n,o=(await this.connection.provider.block({finality:"final"})).header.hash,a=++i.nonce;return await Cr.signTransaction(e,a,t,Zu.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...e){return typeof e[0]=="string"?this.signAndSendTransactionV1(e[0],e[1]):this.signAndSendTransactionV2(e[0])}signAndSendTransactionV1(e,t){return Yu.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:e,actions:t})}async signAndSendTransactionV2({receiverId:e,actions:t,returnError:n}){let i,s;const o=await PP.default(CP,RP,MP,async()=>{[i,s]=await this.signTransaction(e,t);const u=s.transaction.publicKey;try{return await this.connection.provider.sendTransaction(s)}catch(d){if(d.type==="InvalidNonce")return Rd.logWarning(`Retrying transaction ${e}:${Zu.baseEncode(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[u.toString()],null;if(d.type==="Expired")return Rd.logWarning(`Retrying transaction ${e}:${Zu.baseEncode(i)} due to expired block hash`),null;throw d.context=new Xu.ErrorContext(Zu.baseEncode(i)),d}});if(!o)throw new Xu.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const a=[o.transaction_outcome,...o.receipts_outcome].reduce((u,d)=>d.outcome.logs.length||typeof d.outcome.status=="object"&&typeof d.outcome.status.Failure=="object"?u.concat({receiptIds:d.outcome.receipt_ids,logs:d.outcome.logs,failure:typeof d.outcome.status.Failure<"u"?im.parseRpcError(d.outcome.status.Failure):null}):u,[]);if(this.printLogsAndFailures(s.transaction.receiverId,a),!n&&typeof o.status=="object"&&typeof o.status.Failure=="object")throw o.status.Failure.error_message&&o.status.Failure.error_type?new Xu.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type):im.parseResultError(o);return o}async findAccessKey(e,t){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)return null;const i=this.accessKeyByPublicKeyCache[n.toString()];if(i!==void 0)return{publicKey:n,accessKey:i};try{const s=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=s,{publicKey:n,accessKey:s})}catch(s){if(s.type=="AccessKeyDoesNotExist")return null;throw s}}async createAndDeployContract(e,t,n,i){const s=Cr.fullAccessKey();return await this.signAndSendTransaction({receiverId:e,actions:[Cr.createAccount(),Cr.transfer(i),Cr.addKey(gc.PublicKey.from(t),s),Cr.deployContract(n)]}),new Ip(this.connection,e)}async sendMoney(e,t){return this.signAndSendTransaction({receiverId:e,actions:[Cr.transfer(t)]})}async createAccount(e,t,n){const i=Cr.fullAccessKey();return this.signAndSendTransaction({receiverId:e,actions:[Cr.createAccount(),Cr.transfer(n),Cr.addKey(gc.PublicKey.from(t),i)]})}async deleteAccount(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Cr.deleteAccount(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Cr.deployContract(e)]})}async functionCall(...e){return typeof e[0]=="string"?this.functionCallV1(e[0],e[1],e[2],e[3],e[4]):this.functionCallV2(e[0])}functionCallV1(e,t,n,i,s){return Yu.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),n=n||{},this.validateArgs(n),this.signAndSendTransaction({receiverId:e,actions:[Cr.functionCall(t,n,i||sm.DEFAULT_FUNCTION_CALL_GAS,s)]})}functionCallV2({contractId:e,methodName:t,args:n={},gas:i=sm.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:s,walletMeta:o,walletCallbackUrl:a,stringify:u}){this.validateArgs(n);const d=u===void 0?Cr.stringifyJsonOrBytes:u;return this.signAndSendTransaction({receiverId:e,actions:[Cr.functionCall(t,n,i,s,d)],walletMeta:o,walletCallbackUrl:a})}async addKey(e,t,n,i){n||(n=[]),Array.isArray(n)||(n=[n]);let s;return t?s=Cr.functionCallAccessKey(t,n,i):s=Cr.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[Cr.addKey(gc.PublicKey.from(e),s)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Cr.deleteKey(gc.PublicKey.from(e))]})}async stake(e,t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Cr.stake(t,gc.PublicKey.from(e))]})}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new Rd.PositionalArgsError}async viewFunction(e,t,n={},{parse:i=BP,stringify:s=NP}={}){this.validateArgs(n);const o=s(n).toString("base64"),a=await this.connection.provider.query({request_type:"call_function",account_id:e,method_name:t,args_base64:o,finality:"optimistic"});return a.logs&&this.printLogs(e,a.logs),a.result&&a.result.length>0&&i(J.Buffer.from(a.result))}async viewState(e,t={finality:"optimistic"}){const{values:n}=await this.connection.provider.query({request_type:"view_state",...t,account_id:this.accountId,prefix_base64:J.Buffer.from(e).toString("base64")});return n.map(({key:i,value:s})=>({key:J.Buffer.from(i,"base64"),value:J.Buffer.from(s,"base64")}))}async getAccessKeys(){const e=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(e)?e:e.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const i=n.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:n.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),t=await this.state(),n=new pc.default(e.runtime_config.storage_amount_per_byte),i=new pc.default(t.storage_usage).mul(n),s=new pc.default(t.locked),o=new pc.default(t.amount).add(s),a=o.sub(pc.default.max(s,i));return{total:o.toString(),stateStaked:i.toString(),staked:s.toString(),available:a.toString()}}}Vo.Account=Ip;var nv={};(function(r){var e=z&&z.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(r,"__esModule",{value:!0}),r.Account2FA=r.AccountMultisig=r.MULTISIG_CONFIRM_METHODS=r.MULTISIG_CHANGE_METHODS=r.MULTISIG_DEPOSIT=r.MULTISIG_GAS=r.MULTISIG_ALLOWANCE=r.MULTISIG_STORAGE_KEY=void 0;const t=e(lo.exports),n=e(Qa),i=Vo,s=kp,o=ns,a=Eu,u=Go;r.MULTISIG_STORAGE_KEY="__multisigRequest",r.MULTISIG_ALLOWANCE=new t.default(s.parseNearAmount("1")),r.MULTISIG_GAS=new t.default("100000000000000"),r.MULTISIG_DEPOSIT=new t.default("0"),r.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],r.MULTISIG_CONFIRM_METHODS=["confirm"];const d={[r.MULTISIG_STORAGE_KEY]:null};class h extends i.Account{constructor(E,T,C){super(E,T),this.storage=C.storage,this.onAddRequestResult=C.onAddRequestResult}async signAndSendTransactionWithAccount(E,T){return super.signAndSendTransaction({receiverId:E,actions:T})}signAndSendTransaction(...E){return typeof E[0]=="string"?this._signAndSendTransaction({receiverId:E[0],actions:E[1]}):this._signAndSendTransaction(E[0])}async _signAndSendTransaction({receiverId:E,actions:T}){const{accountId:C}=this,L=J.Buffer.from(JSON.stringify({request:{receiver_id:E,actions:P(T,C,E)}}));let K;try{K=await super.signAndSendTransaction({receiverId:C,actions:[a.functionCall("add_request_and_confirm",L,r.MULTISIG_GAS,r.MULTISIG_DEPOSIT)]})}catch(F){if(F.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(E,T);throw F}if(!K.status)throw new Error("Request failed");const O={...K.status};if(!O.SuccessValue||typeof O.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:C,actions:T,requestId:parseInt(J.Buffer.from(O.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(K),this.deleteUnconfirmedRequests(),K}async deleteUnconfirmedRequests(){const E=await this.getRequestIds(),{requestId:T}=this.getRequest();for(const C of E)if(C!=T)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[a.functionCall("delete_request",{request_id:C},r.MULTISIG_GAS,r.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(r.MULTISIG_STORAGE_KEY)||"{}"):d[r.MULTISIG_STORAGE_KEY]}setRequest(E){if(this.storage)return this.storage.setItem(r.MULTISIG_STORAGE_KEY,JSON.stringify(E));d[r.MULTISIG_STORAGE_KEY]=E}}r.AccountMultisig=h;class m extends h{constructor(E,T,C){super(E,T,C),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=C.helperUrl||this.helperUrl,this.storage=C.storage,this.sendCode=C.sendCode||this.sendCodeDefault,this.getCode=C.getCode||this.getCodeDefault,this.verifyCode=C.verifyCode||this.verifyCodeDefault,this.onConfirmResult=C.onConfirmResult}async signAndSendTransaction(...E){return typeof E[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:E[0],actions:E[1]})):this.__signAndSendTransaction(E[0])}async __signAndSendTransaction({receiverId:E,actions:T}){await super.signAndSendTransaction({receiverId:E,actions:T}),await this.sendCode();const C=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(C),C}async deployMultisig(E){const{accountId:T}=this,C=(await this.getRecoveryMethods()).data.filter(({kind:H,publicKey:V})=>(H==="phrase"||H==="ledger")&&V!==null).map(H=>H.publicKey),L=(await this.getAccessKeys()).filter(({public_key:H,access_key:{permission:V}})=>V==="FullAccess"&&!C.includes(H)).map(H=>H.public_key).map(v),K=v((await this.postSignedJson("/2fa/getAccessKey",{accountId:T})).publicKey),O=J.Buffer.from(JSON.stringify({num_confirmations:2})),F=[...L.map(H=>a.deleteKey(H)),...L.map(H=>a.addKey(H,a.functionCallAccessKey(T,r.MULTISIG_CHANGE_METHODS,null))),a.addKey(K,a.functionCallAccessKey(T,r.MULTISIG_CONFIRM_METHODS,null)),a.deployContract(E)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&F.push(a.functionCall("new",O,r.MULTISIG_GAS,r.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",T),await super.signAndSendTransactionWithAccount(T,F)}async disable(E){const{accountId:T}=this,L=(await this.getAccessKeys()).filter(({access_key:F})=>F.permission!=="FullAccess").filter(({access_key:F})=>{const H=F.permission.FunctionCall;return H.receiver_id===T&&H.method_names.length===4&&H.method_names.includes("add_request_and_confirm")}),K=o.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:T})).publicKey),O=[a.deleteKey(K),...L.map(({public_key:F})=>a.deleteKey(o.PublicKey.from(F))),...L.map(({public_key:F})=>a.addKey(o.PublicKey.from(F),null)),a.deployContract(E)];return console.log("disabling 2fa for",T),await this.signAndSendTransaction({receiverId:T,actions:O})}async sendCodeDefault(){const{accountId:E}=this,{requestId:T}=this.getRequest(),C=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:E,method:C,requestId:T}),T}async getCodeDefault(E){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const E=await this.get2faMethod(),T=await this.getCode(E);try{return await this.verifyCode(T)}catch(C){if(console.warn("Error validating security code:",C),C.toString().includes("invalid 2fa code provided")||C.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw C}}async verifyCodeDefault(E){const{accountId:T}=this,C=this.getRequest();if(!C)throw new Error("no request pending");const{requestId:L}=C;return await this.postSignedJson("/2fa/verify",{accountId:T,securityCode:E,requestId:L})}async getRecoveryMethods(){const{accountId:E}=this;return{accountId:E,data:await this.postSignedJson("/account/recoveryMethods",{accountId:E})}}async get2faMethod(){let{data:E}=await this.getRecoveryMethods();if(E&&E.length&&(E=E.find(L=>L.kind.indexOf("2fa-")===0)),!E)return null;const{kind:T,detail:C}=E;return{kind:T,detail:C}}async signatureFor(){const{accountId:E}=this,C=(await this.connection.provider.block({finality:"final"})).header.height.toString(),L=await this.connection.signer.signMessage(J.Buffer.from(C),E,this.connection.networkId),K=J.Buffer.from(L.signature).toString("base64");return{blockNumber:C,blockNumberSignature:K}}async postSignedJson(E,T){return await u.fetchJson(this.helperUrl+E,JSON.stringify({...T,...await this.signatureFor()}))}}r.Account2FA=m;const v=A=>o.PublicKey.from(A),_=A=>A.toString().replace("ed25519:",""),P=(A,E,T)=>A.map(C=>{const L=C.enum,{gas:K,publicKey:O,methodName:F,args:H,deposit:V,accessKey:ie,code:xe}=C[L],ae={type:L[0].toUpperCase()+L.substr(1),gas:K&&K.toString()||void 0,public_key:O&&_(O)||void 0,method_name:F,args:H&&J.Buffer.from(H).toString("base64")||void 0,code:xe&&J.Buffer.from(xe).toString("base64")||void 0,amount:V&&V.toString()||void 0,deposit:V&&V.toString()||"0",permission:void 0};if(ie&&(T===E&&ie.permission.enum!=="fullAccess"&&(ae.permission={receiver_id:E,allowance:r.MULTISIG_ALLOWANCE.toString(),method_names:r.MULTISIG_CHANGE_METHODS}),ie.permission.enum==="functionCall")){const{receiverId:te,methodNames:x,allowance:c}=ie.permission.functionCall;ae.permission={receiver_id:te,allowance:c&&c.toString()||void 0,method_names:x}}return ae})})(nv);var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.UrlAccountCreator=_s.LocalAccountCreator=_s.AccountCreator=void 0;const OP=Go;class Pp{}_s.AccountCreator=Pp;class LP extends Pp{constructor(e,t){super(),this.masterAccount=e,this.initialBalance=t}async createAccount(e,t){await this.masterAccount.createAccount(e,t,this.initialBalance)}}_s.LocalAccountCreator=LP;class DP extends Pp{constructor(e,t){super(),this.connection=e,this.helperUrl=t}async createAccount(e,t){await OP.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:t.toString()}))}}_s.UrlAccountCreator=DP;var Su={},Ro={},UP=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.InMemorySigner=Ro.Signer=void 0;const FP=UP(Eh.exports),KP=ns,$P=_u;class iv{}Ro.Signer=iv;class Rp extends iv{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,t,n){const i=new $P.InMemoryKeyStore;return await i.setKey(e,t,n),new Rp(i)}async createKey(e,t){const n=KP.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(t,e,n),n.getPublicKey()}async getPublicKey(e,t){const n=await this.keyStore.getKey(t,e);return n===null?null:n.getPublicKey()}async signMessage(e,t,n){const i=new Uint8Array(FP.default.sha256.array(e));if(!t)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,t);if(s===null)throw new Error(`Key for ${t} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}Ro.InMemorySigner=Rp;Object.defineProperty(Su,"__esModule",{value:!0});Su.Connection=void 0;const jP=Za,zP=Ro;function qP(r){switch(r.type){case void 0:return r;case"JsonRpcProvider":return new jP.JsonRpcProvider({...r.args});default:throw new Error(`Unknown provider type ${r.type}`)}}function HP(r){switch(r.type){case void 0:return r;case"InMemorySigner":return new zP.InMemorySigner(r.keyStore);default:throw new Error(`Unknown signer type ${r.type}`)}}class Cp{constructor(e,t,n){this.networkId=e,this.provider=t,this.signer=n}static fromConfig(e){const t=qP(e.provider),n=HP(e.signer);return new Cp(e.networkId,t,n)}}Su.Connection=Cp;var ku={},sv=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ku,"__esModule",{value:!0});ku.Contract=void 0;const WP=sv(lo.exports),GP=sv(Qa),VP=Za,gh=rn;function om(r,e){return{[r](...t){return e(...t)}}[r]}const am=r=>r&&r.byteLength!==void 0&&r.byteLength===r.length,Cd=r=>Object.prototype.toString.call(r)==="[object Object]";class JP{constructor(e,t,n){this.account=e,this.contractId=t;const{viewMethods:i=[],changeMethods:s=[]}=n;i.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:om(o,async(a={},u={},...d)=>{if(d.length||!(Cd(a)||am(a))||!Cd(u))throw new gh.PositionalArgsError;return this.account.viewFunction(this.contractId,o,a,u)})})}),s.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:om(o,async(...a)=>{if(a.length&&(a.length>3||!(Cd(a[0])||am(a[0]))))throw new gh.PositionalArgsError;return a.length>1||!(a[0]&&a[0].args)?(GP.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:o,args:a[0],gas:a[1],amount:a[2]})):this._changeMethod({methodName:o,...a[0]})})})})}async _changeMethod({args:e,methodName:t,gas:n,amount:i,meta:s,callbackUrl:o}){YP({gas:n,amount:i});const a=await this.account.functionCall({contractId:this.contractId,methodName:t,args:e,gas:n,attachedDeposit:i,walletMeta:s,walletCallbackUrl:o});return VP.getTransactionLastResult(a)}}ku.Contract=JP;function YP(r){const e="number, decimal string or BN";for(const t of Object.keys(r)){const n=r[t];if(n&&!WP.default.isBN(n)&&isNaN(n))throw new gh.ArgumentTypeError(t,e,n)}}var Tu={},XP=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Near=void 0;const cm=XP(lo.exports),yc=Vo,ZP=Su,QP=ku,um=_s;class e7{constructor(e){if(this.config=e,this.connection=ZP.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps.keyStore}}),e.masterAccount){const t=e.initialBalance?new cm.default(e.initialBalance):new cm.default("500000000000000000000000000");this.accountCreator=new um.LocalAccountCreator(new yc.Account(this.connection,e.masterAccount),t)}else e.helperUrl?this.accountCreator=new um.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new yc.Account(this.connection,e)}async createAccount(e,t){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,t),new yc.Account(this.connection,e)}async loadContract(e,t){const n=new yc.Account(this.connection,t.sender);return new QP.Contract(n,e,t)}async sendTokens(e,t,n){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new yc.Account(this.connection,t).sendMoney(n,e)).transaction_outcome.id}}Tu.Near=e7;var Gs={},t7=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ConnectedWalletAccount=Gs.WalletAccount=Gs.WalletConnection=void 0;const fm=t7(Qa),r7=Vo,ov=Eu,av=Sp,n7=br,i7=br,s7="/login/",o7="add_request_and_confirm",a7="_wallet_auth_key",Md="pending_key";class cv{constructor(e,t){this._near=e;const n=t+a7,i=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,t=t||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(e={},t,n,i){let s;typeof e=="string"?(fm.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),s={contractId:e,successUrl:n,failureUrl:i}):s=e;const o=new URL(window.location.href),a=new URL(this._walletBaseUrl+s7);if(a.searchParams.set("success_url",s.successUrl||o.href),a.searchParams.set("failure_url",s.failureUrl||o.href),s.contractId){await(await this._near.account(s.contractId)).state(),a.searchParams.set("contract_id",s.contractId);const d=av.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",d.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,Md+d.getPublicKey(),d)}s.methodNames&&s.methodNames.forEach(u=>{a.searchParams.append("methodNames",u)}),window.location.assign(a.toString())}async requestSignTransactions(...e){return Array.isArray(e[0])?(fm.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:e[0],callbackUrl:e[1],meta:e[2]})):this._requestSignTransactions(e[0])}async _requestSignTransactions({transactions:e,meta:t,callbackUrl:n}){const i=new URL(window.location.href),s=new URL("sign",this._walletBaseUrl);s.searchParams.set("transactions",e.map(o=>i7.serialize(ov.SCHEMA,o)).map(o=>J.Buffer.from(o).toString("base64")).join(",")),s.searchParams.set("callbackUrl",n||i.href),t&&s.searchParams.set("meta",t),window.location.assign(s.toString())}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),t=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),i=e.searchParams.get("account_id")||"";i&&(this._authData={accountId:i,allKeys:n},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),t&&await this._moveKeyFromTempToPermanent(i,t)),e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,t){const n=await this._keyStore.getKey(this._networkId,Md+t);await this._keyStore.setKey(this._networkId,e,n),await this._keyStore.removeKey(this._networkId,Md+t)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new uv(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}Gs.WalletConnection=cv;Gs.WalletAccount=cv;class uv extends r7.Account{constructor(e,t,n){super(t,n),this.walletConnection=e}signAndSendTransaction(...e){return typeof e[0]=="string"?this._signAndSendTransaction({receiverId:e[0],actions:e[1]}):this._signAndSendTransaction(e[0])}async _signAndSendTransaction({receiverId:e,actions:t,walletMeta:n,walletCallbackUrl:i=window.location.href}){const s=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let o=await this.accessKeyForTransaction(e,t,s);if(!o)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(s&&s.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:t})}catch(v){if(v.type==="NotEnoughAllowance")o=await this.accessKeyForTransaction(e,t);else throw v}const a=await this.connection.provider.block({finality:"final"}),u=n7.baseDecode(a.header.hash),d=av.PublicKey.from(o.public_key),h=o.access_key.nonce+1,m=ov.createTransaction(this.accountId,d,e,h,t,u);return await this.walletConnection.requestSignTransactions({transactions:[m],meta:n,callbackUrl:i}),new Promise((v,_)=>{setTimeout(()=>{_(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,t,n){const{access_key:{permission:i}}=e;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:s,method_names:o}=i.FunctionCall;if(s===this.accountId&&o.includes(o7))return!0;if(s===t){if(n.length!==1)return!1;const[{functionCall:a}]=n;return a&&(!a.deposit||a.deposit.toString()==="0")&&(o.length===0||o.includes(a.methodName))}}return!1}async accessKeyForTransaction(e,t,n){const i=await this.getAccessKeys();if(n){const o=i.find(a=>a.public_key.toString()===n.toString());if(o&&await this.accessKeyMatchesTransaction(o,e,t))return o}const s=this.walletConnection._authData.allKeys;for(const o of i)if(s.indexOf(o.public_key)!==-1&&await this.accessKeyMatchesTransaction(o,e,t))return o;return null}}Gs.ConnectedWalletAccount=uv;(function(r){var e=z&&z.__createBinding||(Object.create?function(T,C,L,K){K===void 0&&(K=L),Object.defineProperty(T,K,{enumerable:!0,get:function(){return C[L]}})}:function(T,C,L,K){K===void 0&&(K=L),T[K]=C[L]}),t=z&&z.__setModuleDefault||(Object.create?function(T,C){Object.defineProperty(T,"default",{enumerable:!0,value:C})}:function(T,C){T.default=C}),n=z&&z.__importStar||function(T){if(T&&T.__esModule)return T;var C={};if(T!=null)for(var L in T)L!=="default"&&Object.hasOwnProperty.call(T,L)&&e(C,T,L);return t(C,T),C};Object.defineProperty(r,"__esModule",{value:!0}),r.WalletConnection=r.WalletAccount=r.ConnectedWalletAccount=r.Near=r.KeyPair=r.Signer=r.InMemorySigner=r.Contract=r.Connection=r.Account=r.multisig=r.validators=r.transactions=r.utils=r.providers=r.accountCreator=void 0;const i=n(Za);r.providers=i;const s=n(Sp);r.utils=s;const o=n(Eu);r.transactions=o;const a=n(La);r.validators=a;const u=Vo;Object.defineProperty(r,"Account",{enumerable:!0,get:function(){return u.Account}});const d=n(nv);r.multisig=d;const h=n(_s);r.accountCreator=h;const m=Su;Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return m.Connection}});const v=Ro;Object.defineProperty(r,"Signer",{enumerable:!0,get:function(){return v.Signer}}),Object.defineProperty(r,"InMemorySigner",{enumerable:!0,get:function(){return v.InMemorySigner}});const _=ku;Object.defineProperty(r,"Contract",{enumerable:!0,get:function(){return _.Contract}});const P=ns;Object.defineProperty(r,"KeyPair",{enumerable:!0,get:function(){return P.KeyPair}});const A=Tu;Object.defineProperty(r,"Near",{enumerable:!0,get:function(){return A.Near}});const E=Gs;Object.defineProperty(r,"ConnectedWalletAccount",{enumerable:!0,get:function(){return E.ConnectedWalletAccount}}),Object.defineProperty(r,"WalletAccount",{enumerable:!0,get:function(){return E.WalletAccount}}),Object.defineProperty(r,"WalletConnection",{enumerable:!0,get:function(){return E.WalletConnection}})})(vp);var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.connect=void 0;const c7=Tu;async function u7(r){return new c7.Near(r)}Ll.connect=u7;var yh=function(){this.tests={},this.cache={}};yh.prototype={constructor:yh,define:function(r,e){if(typeof r!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[r])throw new Error('Duplicated capability definition by "'+r+'".');this.tests[r]=e},check:function(r){if(!this.test(r))throw new Error('The current environment does not support "'+r+'", therefore we cannot continue.')},test:function(r){if(this.cache[r]!==void 0)return this.cache[r];if(!this.tests[r])throw new Error('Unknown capability with name "'+r+'".');var e=this.tests[r];return this.cache[r]=!!e(),this.cache[r]}};var f7=yh,l7=f7,Mp=new l7,Jc=function(r){return Mp.test(r)};Jc.define=function(r,e){Mp.define(r,e)};Jc.check=function(r){Mp.check(r)};Jc.test=Jc;var fv=Jc,lv=fv,xi=lv.define,mo=lv.test;xi("strict mode",function(){return this===void 0});xi("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});xi("es5",function(){return mo("Array.prototype.forEach")&&mo("Array.prototype.map")&&mo("Function.prototype.bind")&&mo("Object.create")&&mo("Object.defineProperties")&&mo("Object.defineProperty")&&mo("Object.prototype.hasOwnProperty")});xi("Array.prototype.forEach",function(){return Array.prototype.forEach});xi("Array.prototype.map",function(){return Array.prototype.map});xi("Function.prototype.bind",function(){return Function.prototype.bind});xi("Object.create",function(){return Object.create});xi("Object.defineProperties",function(){return Object.defineProperties});xi("Object.defineProperty",function(){return Object.defineProperty});xi("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});xi("Error.captureStackTrace",function(){return Error.captureStackTrace});xi("Error.prototype.stack",function(){try{throw new Error}catch(r){return r.stack||r.stacktrace}});var Bp=fv;Bp.check("es5");var d7=function(r,e,t){var n="";if(n+=r.name||"Error",n+=": "+(r.message||""),t instanceof Array)for(var i in t){var s=t[i];n+=`
   # `+s}for(var o in e){var a=e[o];n+=`
   at `+a.toString()}return n},Np=d7,h7=Np,p7=function(){return Error.getStackTrace=function(r){return r.stack},{prepareStackTrace:h7}},Dr=function(){var r=Object.create({Source:Object,config:{},buildArgs:[]});function e(a){var u="config";if(a instanceof Function)u="Source";else if(a instanceof Array)u="buildArgs";else if(a instanceof Object)u="config";else throw new Error("Invalid configuration option.");if(r.hasOwnProperty(u))throw new Error("Duplicated configuration option: "+u+".");r[u]=a}for(var t=0,n=arguments.length;t<n;++t)e(arguments[t]);var i=r.Source,s=r.config,o=r.buildArgs;return(i.extend||Dr.extend).call(i,s,o)};Dr.factory=function(){return function(){var r=this;r.build instanceof Function&&r.build.apply(r,arguments),r.init instanceof Function&&r.init.apply(r,arguments)}};Dr.extend=function(r,e){var t=this;r||(r={});var n;return r.prototype instanceof Object&&r.prototype.constructor!==Object?n=r.prototype.constructor:r.factory instanceof Function&&(n=r.factory.call(t)),n=(t.clone||Dr.clone).call(t,n,e),(n.merge||Dr.merge).call(n,r),n};Dr.prototype.extend=function(r,e){var t=this,n=(t.clone||Dr.prototype.clone).apply(t,e);return(n.merge||Dr.prototype.merge).call(n,r),n};Dr.clone=function(r,e){var t=this;r instanceof Function||(r=(t.factory||Dr.factory).call(t)),r.prototype=(t.prototype.clone||Dr.prototype.clone).apply(t.prototype,e||[]),r.prototype.constructor=r;for(var n in t)n!=="prototype"&&(r[n]=t[n]);return r};Dr.prototype.clone=function(){var r=this,e=Object.create(r);return e.build instanceof Function&&e.build.apply(e,arguments),e};Dr.merge=function(r){var e=this;for(var t in r)t!=="prototype"&&(e[t]=r[t]);return r.prototype instanceof Object&&(e.prototype.merge||Dr.prototype.merge).call(e.prototype,r.prototype),e};Dr.prototype.merge=function(r){var e=this;for(var t in r)t!=="constructor"&&(e[t]=r[t]);return e};Dr.absorb=function(r){var e=this;for(var t in r)t!=="prototype"&&(e[t]===void 0||e[t]===Function.prototype[t])&&(e[t]=r[t]);return r.prototype instanceof Object&&(e.prototype.absorb||Dr.prototype.absorb).call(e.prototype,r.prototype),e};Dr.prototype.absorb=function(r){var e=this;for(var t in r)t!=="constructor"&&(e[t]===void 0||e[t]===Object.prototype[t])&&(e[t]=r[t]);return e};Dr.getAncestor=function(){var r=this;if(r!==r.prototype.constructor)return r.prototype.constructor};Dr.newInstance=function(){var r=this,e=Object.create(this.prototype);return r.apply(e,arguments),e};var g7=Dr,y7=function(){throw new Error("Not implemented.")},m7={Class:g7,abstractMethod:y7},Iu=m7,b7=function(r){var e=!1,t;return r instanceof Function||(e=!0,t=r,r=null),function(){return e||(e=!0,t=r.apply(this,arguments),r=null),t}},x7=b7,w7=function r(e,t,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],r(e,t,n),--n.length}else t.apply(null,n)},v7={cache:x7,eachCombination:w7},Pu=v7,Lc=Iu.Class,lm=Iu.abstractMethod,_7=Pu.eachCombination,dm=Pu.cache,A7=Bp,E7=Lc(Object,{prototype:{captureFrameStrings:function(r){var e=this.createError();r.unshift(this.captureFrameStrings),r.unshift(this.createError);var t=this.getFrameStrings(e),n=t.slice(r.length),i=[];if(A7("arguments.callee.caller")){var s=[this.createError,this.captureFrameStrings];try{for(var o=arguments.callee;o=o.caller;)s.push(o)}catch{}i=s.slice(r.length)}return{frameStrings:n,functionValues:i}},getFrameStrings:function(r){var e=r.message||"",t=r.name||"",n=this.getStackString(r);if(n!==void 0){var i=n.split(`
`),s=0,o=i.length;return this.hasHeader&&(s+=t.split(`
`).length+e.split(`
`).length-1),this.hasFooter&&(o-=1),i.slice(s,o)}},createError:lm,getStackString:lm,hasHeader:void 0,hasFooter:void 0}}),S7=Lc(Object,{prototype:{calibrateClass:function(r){return this.calibrateMethods(r)&&this.calibrateEnvelope(r)},calibrateMethods:function(r){try{_7([[function(e){return new Error(e)},function(e){try{throw new Error(e)}catch(t){return t}}],[function(e){return e.stack},function(e){return e.stacktrace}]],function(e,t){if(t(e()))throw{getStackString:t,createError:e}})}catch(e){return Lc.merge.call(r,{prototype:e}),!0}return!1},calibrateEnvelope:function(r){var e=r.prototype.getStackString,t=r.prototype.createError,n=e(t("marker")),i=n.split(`
`);return Lc.merge.call(r,{prototype:{hasHeader:/marker/.test(i[0]),hasFooter:i[i.length-1]===""}}),!0}}}),k7={getClass:dm(function(){var r;if(r)return r;r=Lc(E7,{});var e=new S7;if(!e.calibrateClass(r))throw new Error("Cannot read Error.prototype.stack in this environment.");return r}),getInstance:dm(function(){var r=this.getClass(),e=new r;return e})},hm=Iu.Class,ui=Iu.abstractMethod,T7=hm(Object,{prototype:{init:hm.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:ui,getTypeName:ui,getFunction:function(){return this.functionValue},getFunctionName:ui,getMethodName:ui,getFileName:ui,getLineNumber:ui,getColumnNumber:ui,getEvalOrigin:ui,isTopLevel:ui,isEval:ui,isNative:ui,isConstructor:ui}}),I7=T7,pm=Iu.Class,P7=I7,gm=Pu.cache,R7=pm(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(r){pm.prototype.merge.call(this,r)},getFrames:function(r,e){for(var t=[],n=0,i=r.length;n<i;++n)t[n]=this.getFrame(r[n],e[n]);return t},getFrame:function(r,e){var t={frameString:r,functionValue:e};return new P7(t)}}}),C7={getClass:gm(function(){return R7}),getInstance:gm(function(){var r=this.getClass(),e=new r;return e})},ym=k7,mm=C7,M7=Pu.cache,Bd=Np,B7=function(){return Error.captureStackTrace=function r(e,t){var n,i=[r];t&&i.push(t);var s=ym.getInstance().captureFrameStrings(i);Object.defineProperties(e,{stack:{configurable:!0,get:M7(function(){var o=mm.getInstance().getFrames(s.frameStrings,s.functionValues);return(Error.prepareStackTrace||Bd)(e,o,n)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(r){if(r.cachedStack)return r.stack;var e=ym.getInstance().getFrameStrings(r),t=[],n;e?t=mm.getInstance().getFrames(e,[]):n=["The stack is not readable by unthrown errors in this environment."];var i=(Error.prepareStackTrace||Bd)(r,t,n);if(e)try{Object.defineProperties(r,{stack:{configurable:!0,writable:!0,enumerable:!1,value:i},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return i},{prepareStackTrace:Bd}},N7=Pu.cache,Nd=Np,O7=function(){return Error.captureStackTrace=function(r,e){Object.defineProperties(r,{stack:{configurable:!0,get:N7(function(){return(Error.prepareStackTrace||Nd)(r,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(r){if(r.cachedStack)return r.stack;var e=(Error.prepareStackTrace||Nd)(r,[]);try{Object.defineProperties(r,{stack:{configurable:!0,writable:!0,enumerable:!1,value:e},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return e},{prepareStackTrace:Nd}},bm=Bp,yf;bm("Error.captureStackTrace")?yf=p7:bm("Error.prototype.stack")?yf=B7:yf=O7;yf();(function(r){var e=z&&z.__createBinding||(Object.create?function(s,o,a,u){u===void 0&&(u=a),Object.defineProperty(s,u,{enumerable:!0,get:function(){return o[a]}})}:function(s,o,a,u){u===void 0&&(u=a),s[u]=o[a]}),t=z&&z.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=z&&z.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var a in s)a!=="default"&&Object.hasOwnProperty.call(s,a)&&e(o,s,a);return t(o,s),o},i=z&&z.__exportStar||function(s,o){for(var a in s)a!=="default"&&!o.hasOwnProperty(a)&&e(o,s,a)};Object.defineProperty(r,"__esModule",{value:!0}),r.keyStores=n(Kw),i(vp,r),i(Ll,r)})(Fw);var Op=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bp,"__esModule",{value:!0});const xm=Wa,mc=Op(to),hs=Fw,Od=Nr,L7=Op(Fm.exports),D7=Eh.exports,U7=Op(fo);class F7 extends U7.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new hs.keyStores.BrowserLocalStorageKeyStore,t=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,t.accountId),!this.keyPair){this.keyPair=hs.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,t.accountId,this.keyPair),await t.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var t;const n=await this.providerInstance,[i,s]=e.split(":"),o=await n.txStatusReceipts((0,Od.decode)(s),i),a=await n.block(o.transaction_outcome.block_hash),u=(await n.block({finality:"final"})).header.height;if(o.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const d=(t=o.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&t!==void 0?t:0;return{from:i,to:o.transaction.receiver_id,amount:new mc.default(d),blockHeight:new mc.default(a.header.height),pending:!1,confirmed:u-a.header.height>=this.minConfirm}}ownerToAddress(e){const t=typeof e=="string"?e:(0,Od.encode)(e);return(0,Od.decode)(t.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new xm.NearSigner(this.keyPair.secretKey)}async verify(e,t,n){return xm.NearSigner.verify(e,t,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new mc.default(e.sync_info.latest_block_height)}async getFee(e,t){const n=await this.providerInstance.gasPrice(null);return new mc.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const t=await this.providerInstance.sendTransaction(e);return`${this.address}:${t.transaction.hash}`}async createTx(e,t,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,o=hs.utils.serialize.base_decode(i.block_hash),a=[hs.transactions.transfer(new L7.default(new mc.default(e).toString()))],u=hs.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),t,s,a,o),d=hs.utils.serialize.serialize(hs.transactions.SCHEMA,u),h=new Uint8Array(D7.sha256.array(d)),m=this.keyPair.sign(h);return{tx:new hs.transactions.SignedTransaction({transaction:u,signature:new hs.transactions.Signature({keyType:u.publicKey.keyType,data:m.signature})}),txId:void 0}}async getPublicKey(){return J.Buffer.from(this.keyPair.getPublicKey().data)}}bp.default=F7;var Lp={};class K7 extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:o}=e,a=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function $7(r){return Vs(r)&&typeof r[Symbol.iterator]=="function"}function Vs(r){return typeof r=="object"&&r!=null}function Bi(r){return typeof r=="string"?JSON.stringify(r):""+r}function j7(r){const{done:e,value:t}=r.next();return e?void 0:t}function z7(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:u="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Bi(n)+"`"}=r;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...r,message:u}}function*wm(r,e,t,n){$7(r)||(r=[r]);for(const i of r){const s=z7(i,e,t,n);s&&(yield s)}}function*Dp(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,a={path:n,branch:i};if(s&&(r=e.coercer(r,a),o&&e.type!=="type"&&Vs(e.schema)&&Vs(r)&&!Array.isArray(r)))for(const d in r)e.schema[d]===void 0&&delete r[d];let u=!0;for(const d of e.validator(r,a))u=!1,yield[d,void 0];for(let[d,h,m]of e.entries(r,a)){const v=Dp(h,m,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,h],coerce:s,mask:o});for(const _ of v)_[0]?(u=!1,yield[_[0],void 0]):s&&(h=_[1],d===void 0?r=h:r instanceof Map?r.set(d,h):r instanceof Set?r.add(h):Vs(r)&&(r[d]=h))}if(u)for(const d of e.refiner(r,a))u=!1,yield[d,void 0];u&&(yield[void 0,r])}class ls{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(u,d)=>{const h=i(u,d);return wm(h,d,this,u)}:this.validator=()=>[],s?this.refiner=(u,d)=>{const h=s(u,d);return wm(h,d,this,u)}:this.refiner=()=>[]}assert(e){return dv(e,this)}create(e){return Ee(e,this)}is(e){return hv(e,this)}mask(e){return q7(e,this)}validate(e,t={}){return Ru(e,this,t)}}function dv(r,e){const t=Ru(r,e);if(t[0])throw t[0]}function Ee(r,e){const t=Ru(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function q7(r,e){const t=Ru(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function hv(r,e){return!Ru(r,e)[0]}function Ru(r,e,t={}){const n=Dp(r,e,t),i=j7(n);if(i[0])return[new K7(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0];{const s=i[1];return[void 0,s]}}function Jo(r,e){return new ls({type:r,schema:null,validator:e})}function H7(){return Jo("any",()=>!0)}function Pe(r){return new ls({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+Bi(e)}})}function is(){return Jo("boolean",r=>typeof r=="boolean")}function Up(r){return Jo("instance",e=>e instanceof r||"Expected a `"+r.name+"` instance, but received: "+Bi(e))}function xr(r){const e=Bi(r),t=typeof r;return new ls({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||"Expected the literal `"+e+"`, but received: "+Bi(n)}})}function W7(){return Jo("never",()=>!1)}function Re(r){return new ls({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Y(){return Jo("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+Bi(r))}function ct(r){return new ls({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function pv(r,e){return new ls({type:"record",schema:null,*entries(t){if(Vs(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return Vs(t)||"Expected an object, but received: "+Bi(t)}})}function ve(){return Jo("string",r=>typeof r=="string"||"Expected a string, but received: "+Bi(r))}function Fp(r){const e=W7();return new ls({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||"Expected an array, but received: "+Bi(t)}})}function he(r){const e=Object.keys(r);return new ls({type:"type",schema:r,*entries(t){if(Vs(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Vs(t)||"Expected an object, but received: "+Bi(t)}})}function Dn(r){const e=r.map(t=>t.type).join(" | ");return new ls({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...o]=Dp(t,s,n),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Bi(t),...i]}})}function Cu(){return Jo("unknown",()=>!0)}function Mu(r,e,t){return new ls({...r,coercer:(n,i)=>hv(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}const G7=Km.v4,V7=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:r};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const o=typeof n.generator=="function"?n.generator:function(){return G7()};s.id=o(s,n)}else i===2&&t===null?n.notificationIdNull&&(s.id=null):s.id=t;return s};var J7=V7;const Y7=Km.v4,X7=J7,Yc=function(r,e){if(!(this instanceof Yc))return new Yc(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Y7()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};var Z7=Yc;Yc.prototype.request=function(r,e,t,n){const i=this;let s=null;const o=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof e=="function")n=e,s=r;else{typeof t=="function"&&(n=t,t=void 0);const d=typeof n=="function";try{s=X7(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(d)return n(h);throw h}if(!d)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(d){return n(d)}return this.callServer(u,function(d,h){i._parseResponse(d,h,n)}),s};Yc.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,n.filter(i),n.filter(s))}else return t(null,n.error,n.result);t(null,n)};var gv={};(function(r){var e=Wm.exports;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=e(Wv),n=e(Gv.exports),i=e(Vv.exports),s=e($m.exports),o=e(jm.exports),a=e(zm.exports),u=e(qm.exports),d=e(Hm.exports),h=Gm.exports;function m(A){var E=v();return function(){var C=(0,d.default)(A),L;if(E){var K=(0,d.default)(this).constructor;L=Reflect.construct(C,arguments,K)}else L=C.apply(this,arguments);return(0,u.default)(this,L)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(A,E){var T={};for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&E.indexOf(C)<0&&(T[C]=A[C]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,C=Object.getOwnPropertySymbols(A);L<C.length;L++)E.indexOf(C[L])<0&&Object.prototype.propertyIsEnumerable.call(A,C[L])&&(T[C[L]]=A[C[L]]);return T},P=function(A){(0,a.default)(T,A);var E=m(T);function T(C){var L,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=arguments.length>3?arguments[3]:void 0;(0,s.default)(this,T);var H=O.autoconnect,V=H===void 0?!0:H,ie=O.reconnect,xe=ie===void 0?!0:ie,ae=O.reconnect_interval,te=ae===void 0?1e3:ae,x=O.max_reconnects,c=x===void 0?5:x,l=_(O,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return L=E.call(this),L.webSocketFactory=C,L.queue={},L.rpc_id=0,L.address=K,L.autoconnect=V,L.ready=!1,L.reconnect=xe,L.reconnect_timer_id=void 0,L.reconnect_interval=te,L.max_reconnects=c,L.rest_options=l,L.current_reconnects=0,L.generate_request_id=F||function(){return++L.rpc_id},L.autoconnect&&L._connect(L.address,Object.assign({autoconnect:L.autoconnect,reconnect:L.reconnect,reconnect_interval:L.reconnect_interval,max_reconnects:L.max_reconnects},L.rest_options)),L}return(0,o.default)(T,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(L,K,O,F){var H=this;return!F&&(0,i.default)(O)==="object"&&(F=O,O=null),new Promise(function(V,ie){if(!H.ready)return ie(new Error("socket not ready"));var xe=H.generate_request_id(L,K),ae={jsonrpc:"2.0",method:L,params:K||null,id:xe};H.socket.send(JSON.stringify(ae),F,function(te){if(te)return ie(te);H.queue[xe]={promise:[V,ie]},O&&(H.queue[xe].timeout=setTimeout(function(){delete H.queue[xe],ie(new Error("reply timeout"))},O))})})}},{key:"login",value:function(){var C=(0,n.default)(t.default.mark(function K(O){var F;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.call("rpc.login",O);case 2:if(F=V.sent,F){V.next=5;break}throw new Error("authentication failed");case 5:return V.abrupt("return",F);case 6:case"end":return V.stop()}},K,this)}));function L(K){return C.apply(this,arguments)}return L}()},{key:"listMethods",value:function(){var C=(0,n.default)(t.default.mark(function K(){return t.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.call("__listMethods");case 2:return F.abrupt("return",F.sent);case 3:case"end":return F.stop()}},K,this)}));function L(){return C.apply(this,arguments)}return L}()},{key:"notify",value:function(L,K){var O=this;return new Promise(function(F,H){if(!O.ready)return H(new Error("socket not ready"));var V={jsonrpc:"2.0",method:L,params:K||null};O.socket.send(JSON.stringify(V),function(ie){if(ie)return H(ie);F()})})}},{key:"subscribe",value:function(){var C=(0,n.default)(t.default.mark(function K(O){var F;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof O=="string"&&(O=[O]),V.next=3,this.call("rpc.on",O);case 3:if(F=V.sent,!(typeof O=="string"&&F[O]!=="ok")){V.next=6;break}throw new Error("Failed subscribing to an event '"+O+"' with: "+F[O]);case 6:return V.abrupt("return",F);case 7:case"end":return V.stop()}},K,this)}));function L(K){return C.apply(this,arguments)}return L}()},{key:"unsubscribe",value:function(){var C=(0,n.default)(t.default.mark(function K(O){var F;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof O=="string"&&(O=[O]),V.next=3,this.call("rpc.off",O);case 3:if(F=V.sent,!(typeof O=="string"&&F[O]!=="ok")){V.next=6;break}throw new Error("Failed unsubscribing from an event with: "+F);case 6:return V.abrupt("return",F);case 7:case"end":return V.stop()}},K,this)}));function L(K){return C.apply(this,arguments)}return L}()},{key:"close",value:function(L,K){this.socket.close(L||1e3,K)}},{key:"_connect",value:function(L,K){var O=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(L,K),this.socket.addEventListener("open",function(){O.ready=!0,O.emit("open"),O.current_reconnects=0}),this.socket.addEventListener("message",function(F){var H=F.data;H instanceof ArrayBuffer&&(H=J.Buffer.from(H).toString());try{H=JSON.parse(H)}catch{return}if(H.notification&&O.listeners(H.notification).length){if(!Object.keys(H.params).length)return O.emit(H.notification);var V=[H.notification];if(H.params.constructor===Object)V.push(H.params);else for(var ie=0;ie<H.params.length;ie++)V.push(H.params[ie]);return Promise.resolve().then(function(){O.emit.apply(O,V)})}if(!O.queue[H.id])return H.method&&H.params?Promise.resolve().then(function(){O.emit(H.method,H.params)}):void 0;"error"in H=="result"in H&&O.queue[H.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),O.queue[H.id].timeout&&clearTimeout(O.queue[H.id].timeout),H.error?O.queue[H.id].promise[1](H.error):O.queue[H.id].promise[0](H.result),delete O.queue[H.id]}),this.socket.addEventListener("error",function(F){return O.emit("error",F)}),this.socket.addEventListener("close",function(F){var H=F.code,V=F.reason;O.ready&&setTimeout(function(){return O.emit("close",H,V)},0),O.ready=!1,O.socket=void 0,H!==1e3&&(O.current_reconnects++,O.reconnect&&(O.max_reconnects>O.current_reconnects||O.max_reconnects===0)&&(O.reconnect_timer_id=setTimeout(function(){return O._connect(L,K)},O.reconnect_interval)))})}}]),T}(h.EventEmitter);r.default=P})(gv);var Q7=Sh(gv),yv={};(function(r){var e=Wm.exports;Object.defineProperty(r,"__esModule",{value:!0}),r.default=m;var t=e($m.exports),n=e(jm.exports),i=e(zm.exports),s=e(qm.exports),o=e(Hm.exports),a=Gm.exports;function u(v){var _=d();return function(){var A=(0,o.default)(v),E;if(_){var T=(0,o.default)(this).constructor;E=Reflect.construct(A,arguments,T)}else E=A.apply(this,arguments);return(0,s.default)(this,E)}}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var h=function(v){(0,i.default)(P,v);var _=u(P);function P(A,E,T){var C;return(0,t.default)(this,P),C=_.call(this),C.socket=new window.WebSocket(A,T),C.socket.onopen=function(){return C.emit("open")},C.socket.onmessage=function(L){return C.emit("message",L.data)},C.socket.onerror=function(L){return C.emit("error",L)},C.socket.onclose=function(L){C.emit("close",L.code,L.reason)},C}return(0,n.default)(P,[{key:"send",value:function(E,T,C){var L=C||T;try{this.socket.send(E),L()}catch(K){L(K)}}},{key:"close",value:function(E,T){this.socket.close(E,T)}},{key:"addEventListener",value:function(E,T,C){this.socket.addEventListener(E,T,C)}}]),P}(a.EventEmitter);function m(v,_){return new h(v,_)}})(yv);var e9=Sh(yv);const t9=$a.utils.randomPrivateKey,vm=()=>{const r=$a.utils.randomPrivateKey(),e=Uf(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Uf=$a.getPublicKey;function _m(r){try{return $a.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Kp=(r,e)=>$a.sign(r,e.slice(0,32)),r9=$a.verify,Ct=r=>Ve.Buffer.isBuffer(r)?r:r instanceof Uint8Array?Ve.Buffer.from(r.buffer,r.byteOffset,r.byteLength):Ve.Buffer.from(r);class $p{constructor(e){Object.assign(this,e)}encode(){return Ve.Buffer.from(Jv(Dc,this))}static decode(e){return Yv(Dc,this,e)}static decodeUnchecked(e){return Xv(Dc,this,e)}}class n9 extends $p{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Dc=new Map;var mv;let bv;const xv=32,Xn=32;function i9(r){return r._bn!==void 0}let Am=1;bv=Symbol.toStringTag;class Ae extends $p{constructor(e){if(super({}),this._bn=void 0,i9(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Nr.decode(e);if(t.length!=Xn)throw new Error("Invalid public key input");this._bn=new vt(t)}else this._bn=new vt(e);if(this._bn.byteLength()>Xn)throw new Error("Invalid public key input")}}static unique(){const e=new Ae(Am);return Am+=1,new Ae(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Nr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Ve.Buffer);if(e.length===Xn)return e;const t=Ve.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[bv](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=Ve.Buffer.concat([e.toBuffer(),Ve.Buffer.from(t),n.toBuffer()]),s=eg(i);return new Ae(s)}static createProgramAddressSync(e,t){let n=Ve.Buffer.alloc(0);e.forEach(function(s){if(s.length>xv)throw new TypeError("Max seed length exceeded");n=Ve.Buffer.concat([n,Ct(s)])}),n=Ve.Buffer.concat([n,t.toBuffer(),Ve.Buffer.from("ProgramDerivedAddress")]);const i=eg(n);if(_m(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ae(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(Ve.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Ae(e);return _m(t.toBytes())}}mv=Ae;Ae.default=new mv("11111111111111111111111111111111");Dc.set(Ae,{kind:"struct",fields:[["_bn","u256"]]});class s9{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Ct(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Ct(t9()),this._publicKey=Ct(Uf(this._secretKey))}get publicKey(){return new Ae(this._publicKey)}get secretKey(){return Ve.Buffer.concat([this._secretKey,this._publicKey],64)}}const o9=new Ae("BPFLoader1111111111111111111111111111111111"),Js=1280-40-8,Dl=127,Da=64;class jp extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(jp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class zp extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(zp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class xa extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(xa.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Xc{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Ot=(r="publicKey")=>pr(32,r),a9=(r="signature")=>pr(64,r),_o=(r="string")=>{const e=Ne([Oe("length"),Oe("lengthPadding"),pr(Ao(Oe(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const u={chars:Ve.Buffer.from(s,"utf8")};return n(u,o,a)},i.alloc=s=>Oe().span+Oe().span+Ve.Buffer.from(s,"utf8").length,i},c9=(r="authorized")=>Ne([Ot("staker"),Ot("withdrawer")],r),u9=(r="lockup")=>Ne([di("unixTimestamp"),di("epoch"),Ot("custodian")],r),f9=(r="voteInit")=>Ne([Ot("nodePubkey"),Ot("authorizedVoter"),Ot("authorizedWithdrawer"),Jt("commission")],r),l9=(r="voteAuthorizeWithSeedArgs")=>Ne([Oe("voteAuthorizationType"),Ot("currentAuthorityDerivedKeyOwnerPubkey"),_o("currentAuthorityDerivedKeySeed"),Ot("newAuthorized")],r);function wv(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return wv({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Nn(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Yn(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Vt(r,e){if(!r)throw new Error(e||"Assertion failed")}class Ul{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const u=i(a.pubkey);u.isSigner||=a.isSigner,u.isWritable||=a.isWritable}}return new Ul(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Vt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),i=e.filter(([,u])=>!u.isSigner&&u.isWritable),s=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{Vt(t.length>0,"Expected at least one writable signer key");const[u]=t[0];Vt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([u])=>new Ae(u)),...n.map(([u])=>new Ae(u)),...i.map(([u])=>new Ae(u)),...s.map(([u])=>new Ae(u))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Ae(s),u=e.findIndex(d=>d.equals(a));u>=0&&(Vt(u<256,"Max lookup table index exceeded"),n.push(u),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}class Ni{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Ae(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Nr.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Xc(this.staticAccountKeys)}static compile(e){const t=Ul.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Xc(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Nr.encode(a.data)}));return new Ni({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Yn(t,e);const n=this.instructions.map(m=>{const{accounts:v,programIdIndex:_}=m,P=Array.from(Nr.decode(m.data));let A=[];Yn(A,v.length);let E=[];return Yn(E,P.length),{programIdIndex:_,keyIndicesCount:Ve.Buffer.from(A),keyIndices:v,dataLength:Ve.Buffer.from(E),data:P}});let i=[];Yn(i,n.length);let s=Ve.Buffer.alloc(Js);Ve.Buffer.from(i).copy(s);let o=i.length;n.forEach(m=>{o+=Ne([Jt("programIdIndex"),pr(m.keyIndicesCount.length,"keyIndicesCount"),xn(Jt("keyIndex"),m.keyIndices.length,"keyIndices"),pr(m.dataLength.length,"dataLength"),xn(Jt("userdatum"),m.data.length,"data")]).encode(m,s,o)}),s=s.slice(0,o);const a=Ne([pr(1,"numRequiredSignatures"),pr(1,"numReadonlySignedAccounts"),pr(1,"numReadonlyUnsignedAccounts"),pr(t.length,"keyCount"),xn(Ot("key"),e,"keys"),Ot("recentBlockhash")]),u={numRequiredSignatures:Ve.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Ve.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Ve.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Ve.Buffer.from(t),keys:this.accountKeys.map(m=>Ct(m.toBytes())),recentBlockhash:Nr.decode(this.recentBlockhash)};let d=Ve.Buffer.alloc(2048);const h=a.encode(u,d);return s.copy(d,h),d.slice(0,h+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Dl))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),o=Nn(t);let a=[];for(let v=0;v<o;v++){const _=t.slice(0,Xn);t=t.slice(Xn),a.push(new Ae(Ve.Buffer.from(_)))}const u=t.slice(0,Xn);t=t.slice(Xn);const d=Nn(t);let h=[];for(let v=0;v<d;v++){const _=t.shift(),P=Nn(t),A=t.slice(0,P);t=t.slice(P);const E=Nn(t),T=t.slice(0,E),C=Nr.encode(Ve.Buffer.from(T));t=t.slice(E),h.push({programIdIndex:_,accounts:A,data:C})}const m={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Nr.encode(Ve.Buffer.from(u)),accountKeys:a,instructions:h};return new Ni(m)}}class Co{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Xc(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Ul.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const m=t.extractTableLookup(h);if(m!==void 0){const[v,{writable:_,readonly:P}]=m;n.push(v),i.writable.push(..._),i.readonly.push(...P)}}const[o,a]=t.getMessageComponents(),d=new Xc(a,i).compileInstructions(e.instructions);return new Co({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:d,addressTableLookups:n})}serialize(){const e=Array();Yn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Yn(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Yn(s,this.addressTableLookups.length);const o=Ne([Jt("prefix"),Ne([Jt("numRequiredSignatures"),Jt("numReadonlySignedAccounts"),Jt("numReadonlyUnsignedAccounts")],"header"),pr(e.length,"staticAccountKeysLength"),xn(Ot(),this.staticAccountKeys.length,"staticAccountKeys"),Ot("recentBlockhash"),pr(n.length,"instructionsLength"),pr(t.length,"serializedInstructions"),pr(s.length,"addressTableLookupsLength"),pr(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Js),u=1<<7,d=o.encode({prefix:u,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:Nr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,d)}serializeInstructions(){let e=0;const t=new Uint8Array(Js);for(const n of this.compiledInstructions){const i=Array();Yn(i,n.accountKeyIndexes.length);const s=Array();Yn(s,n.data.length),e+=Ne([Jt("programIdIndex"),pr(i.length,"encodedAccountKeyIndexesLength"),xn(Jt(),n.accountKeyIndexes.length,"accountKeyIndexes"),pr(s.length,"encodedDataLength"),pr(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Js);for(const n of this.addressTableLookups){const i=Array();Yn(i,n.writableIndexes.length);const s=Array();Yn(s,n.readonlyIndexes.length),e+=Ne([Ot("accountKey"),pr(i.length,"encodedWritableIndexesLength"),xn(Jt(),n.writableIndexes.length,"writableIndexes"),pr(s.length,"encodedReadonlyIndexesLength"),xn(Jt(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Dl;Vt(n!==i,"Expected versioned message but received legacy message");const s=i;Vt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},a=[],u=Nn(t);for(let P=0;P<u;P++)a.push(new Ae(t.splice(0,Xn)));const d=Nr.encode(t.splice(0,Xn)),h=Nn(t),m=[];for(let P=0;P<h;P++){const A=t.shift(),E=Nn(t),T=t.splice(0,E),C=Nn(t),L=new Uint8Array(t.splice(0,C));m.push({programIdIndex:A,accountKeyIndexes:T,data:L})}const v=Nn(t),_=[];for(let P=0;P<v;P++){const A=new Ae(t.splice(0,Xn)),E=Nn(t),T=t.splice(0,E),C=Nn(t),L=t.splice(0,C);_.push({accountKey:A,writableIndexes:T,readonlyIndexes:L})}return new Co({header:o,staticAccountKeys:a,recentBlockhash:d,compiledInstructions:m,addressTableLookups:_})}}const qp={deserializeMessageVersion(r){const e=r[0],t=e&Dl;return t===e?"legacy":t},deserialize:r=>{const e=qp.deserializeMessageVersion(r);if(e==="legacy")return Ni.from(r);if(e===0)return Co.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let ps=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const d9=Ve.Buffer.alloc(Da).fill(0);class cr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Ve.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Qt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new cr(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<t.length;A++)if(t[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const i=[],s=[];t.forEach(A=>{A.keys.forEach(T=>{s.push({...T})});const E=A.programId.toString();i.includes(E)||i.push(E)}),i.forEach(A=>{s.push({pubkey:new Ae(A),isSigner:!1,isWritable:!1})});const o=[];s.forEach(A=>{const E=A.pubkey.toString(),T=o.findIndex(C=>C.pubkey.toString()===E);T>-1?(o[T].isWritable=o[T].isWritable||A.isWritable,o[T].isSigner=o[T].isSigner||A.isSigner):o.push(A)}),o.sort(function(A,E){if(A.isSigner!==E.isSigner)return A.isSigner?-1:1;if(A.isWritable!==E.isWritable)return A.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",T)});const a=o.findIndex(A=>A.pubkey.equals(n));if(a>-1){const[A]=o.splice(a,1);A.isSigner=!0,A.isWritable=!0,o.unshift(A)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const E=o.findIndex(T=>T.pubkey.equals(A.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let u=0,d=0,h=0;const m=[],v=[];o.forEach(({pubkey:A,isSigner:E,isWritable:T})=>{E?(m.push(A.toString()),u+=1,T||(d+=1)):(v.push(A.toString()),T||(h+=1))});const _=m.concat(v),P=t.map(A=>{const{data:E,programId:T}=A;return{programIdIndex:_.indexOf(T.toString()),accounts:A.keys.map(C=>_.indexOf(C.pubkey.toString())),data:Nr.encode(E)}});return P.forEach(A=>{Vt(A.programIdIndex>=0),A.accounts.forEach(E=>Vt(E>=0))}),new Ni({header:{numRequiredSignatures:u,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:h},accountKeys:_,recentBlockhash:e,instructions:P})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Kp(n,i.secretKey);this._addSignature(i.publicKey,Ct(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Vt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Ve.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!r9(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Yn(n,t.length);const i=n.length+t.length*64+e.length,s=Ve.Buffer.alloc(i);return Vt(t.length<256),Ve.Buffer.from(n).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(Vt(o.length===64,"signature has invalid length"),Ve.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+t.length*64),Vt(s.length<=Js,`Transaction too large: ${s.length} > ${Js}`),s}get keys(){return Vt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Vt(this.instructions.length===1),this.instructions[0].programId}get data(){return Vt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Nn(t);let i=[];for(let s=0;s<n;s++){const o=t.slice(0,Da);t=t.slice(Da),i.push(Nr.encode(Ve.Buffer.from(o)))}return Qt.populate(Ni.from(t),i)}static populate(e,t=[]){const n=new Qt;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Nr.encode(d9)?null:Nr.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new cr({keys:s,programId:e.accountKeys[i.programIdIndex],data:Nr.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Hp{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=n,d=o-a;Vt(d>0,"Message header is invalid");const h=e.staticAccountKeys.length-o-u;Vt(h>=0,"Message header is invalid");const m=e.getAccountKeys(t),v=m.get(0);if(v===void 0)throw new Error("Failed to decompile message because no account keys were found");const _=[];for(const P of i){const A=[];for(const T of P.accountKeyIndexes){const C=m.get(T);if(C===void 0)throw new Error(`Failed to find key for account key index ${T}`);const L=T<o;let K;L?K=T<d:T<m.staticAccountKeys.length?K=T-o<h:K=T-m.staticAccountKeys.length<m.accountKeysFromLookups.writable.length,A.push({pubkey:C,isSigner:T<n.numRequiredSignatures,isWritable:K})}const E=m.get(P.programIdIndex);if(E===void 0)throw new Error(`Failed to find program id for program id index ${P.programIdIndex}`);_.push(new cr({programId:E,data:Ct(P.data),keys:A}))}return new Hp({payerKey:v,instructions:_,recentBlockhash:s})}compileToLegacyMessage(){return Ni.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Co.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Wp{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Vt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Da));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Yn(t,this.signatures.length);const n=Ne([pr(t.length,"encodedSignaturesLength"),xn(a9(),this.signatures.length,"signatures"),pr(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Nn(t);for(let o=0;o<i;o++)n.push(new Uint8Array(t.splice(0,Da)));const s=qp.deserialize(new Uint8Array(t));return new Wp(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));Vt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Kp(t,i.secretKey)}}addSignature(e,t){Vt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Vt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const h9=160,p9=64,g9=h9/p9,vv=1e3/g9,qi=new Ae("SysvarC1ock11111111111111111111111111111111"),y9=new Ae("SysvarEpochSchedu1e111111111111111111111111"),m9=new Ae("Sysvar1nstructions1111111111111111111111111"),mf=new Ae("SysvarRecentB1ockHashes11111111111111111111"),Ua=new Ae("SysvarRent111111111111111111111111111111111"),b9=new Ae("SysvarRewards111111111111111111111111111111"),x9=new Ae("SysvarS1otHashes111111111111111111111111111"),w9=new Ae("SysvarS1otHistory11111111111111111111111111"),bf=new Ae("SysvarStakeHistory1111111111111111111111111");async function mh(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,u=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function wo(r){return new Promise(e=>setTimeout(e,r))}function Ht(r,e){const t=r.layout.span>=0?r.layout.span:wv(r,e),n=Ve.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function Zt(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const _v=yn("lamportsPerSignature"),Av=Ne([Oe("version"),Oe("state"),Ot("authorizedPubkey"),Ot("nonce"),Ne([_v],"feeCalculator")]),bh=Av.span;class Fl{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Av.decode(Ct(e),0);return new Fl({authorizedPubkey:new Ae(t.authorizedPubkey),nonce:new Ae(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const v9=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},_9=r=>e=>{const t=pr(r,e),{encode:n,decode:i}=v9(t),s=t;return s.decode=(o,a)=>{const u=i(o,a);return Zv(Ve.Buffer.from(u))},s.encode=(o,a,u)=>{const d=Vm(o,r);return n(d,a,u)},s},Fa=_9(8);class A9{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Oe("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(lr))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=Zt(lr.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Ae(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Zt(lr.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=Zt(lr.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Ae(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Zt(lr.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=Zt(lr.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ae(t),seed:n,space:i,programId:new Ae(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Zt(lr.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Ae(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=Zt(lr.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ae(t),seed:n,programId:new Ae(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:o}=Zt(lr.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Ae(t),seed:n,lamports:i,space:s,programId:new Ae(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Zt(lr.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Ae(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Zt(lr.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Zt(lr.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Zt(lr.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Ae(t)}}static checkProgramId(e){if(!e.equals(sn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const lr=Object.freeze({Create:{index:0,layout:Ne([Oe("instruction"),di("lamports"),di("space"),Ot("programId")])},Assign:{index:1,layout:Ne([Oe("instruction"),Ot("programId")])},Transfer:{index:2,layout:Ne([Oe("instruction"),Fa("lamports")])},CreateWithSeed:{index:3,layout:Ne([Oe("instruction"),Ot("base"),_o("seed"),di("lamports"),di("space"),Ot("programId")])},AdvanceNonceAccount:{index:4,layout:Ne([Oe("instruction")])},WithdrawNonceAccount:{index:5,layout:Ne([Oe("instruction"),di("lamports")])},InitializeNonceAccount:{index:6,layout:Ne([Oe("instruction"),Ot("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ne([Oe("instruction"),Ot("authorized")])},Allocate:{index:8,layout:Ne([Oe("instruction"),di("space")])},AllocateWithSeed:{index:9,layout:Ne([Oe("instruction"),Ot("base"),_o("seed"),di("space"),Ot("programId")])},AssignWithSeed:{index:10,layout:Ne([Oe("instruction"),Ot("base"),_o("seed"),Ot("programId")])},TransferWithSeed:{index:11,layout:Ne([Oe("instruction"),Fa("lamports"),_o("seed"),Ot("programId")])},UpgradeNonceAccount:{index:12,layout:Ne([Oe("instruction")])}});class sn{constructor(){}static createAccount(e){const t=lr.Create,n=Ht(t,{lamports:e.lamports,space:e.space,programId:Ct(e.programId.toBuffer())});return new cr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=lr.TransferWithSeed;t=Ht(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ct(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=lr.Transfer;t=Ht(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new cr({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=lr.AssignWithSeed;t=Ht(i,{base:Ct(e.basePubkey.toBuffer()),seed:e.seed,programId:Ct(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lr.Assign;t=Ht(i,{programId:Ct(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new cr({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=lr.CreateWithSeed,n=Ht(t,{base:Ct(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ct(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new cr({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Qt;"basePubkey"in e&&"seed"in e?t.add(sn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:bh,programId:this.programId})):t.add(sn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:bh,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=lr.InitializeNonceAccount,n=Ht(t,{authorized:Ct(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:mf,isSigner:!1,isWritable:!1},{pubkey:Ua,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new cr(i)}static nonceAdvance(e){const t=lr.AdvanceNonceAccount,n=Ht(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:mf,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new cr(i)}static nonceWithdraw(e){const t=lr.WithdrawNonceAccount,n=Ht(t,{lamports:e.lamports});return new cr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:mf,isSigner:!1,isWritable:!1},{pubkey:Ua,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=lr.AuthorizeNonceAccount,n=Ht(t,{authorized:Ct(e.newAuthorizedPubkey.toBuffer())});return new cr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=lr.AllocateWithSeed;t=Ht(i,{base:Ct(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ct(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lr.Allocate;t=Ht(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new cr({keys:n,programId:this.programId,data:t})}}sn.programId=new Ae("11111111111111111111111111111111");const E9=Js-300;class Mo{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Mo.chunkSize)+1+1)}static async load(e,t,n,i,s){{const m=await e.getMinimumBalanceForRentExemption(s.length),v=await e.getAccountInfo(n.publicKey,"confirmed");let _=null;if(v!==null){if(v.executable)return console.error("Program load failed, account is already executable"),!1;v.data.length!==s.length&&(_=_||new Qt,_.add(sn.allocate({accountPubkey:n.publicKey,space:s.length}))),v.owner.equals(i)||(_=_||new Qt,_.add(sn.assign({accountPubkey:n.publicKey,programId:i}))),v.lamports<m&&(_=_||new Qt,_.add(sn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:m-v.lamports})))}else _=new Qt().add(sn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:m>0?m:1,space:s.length,programId:i}));_!==null&&await mh(e,_,[t,n],{commitment:"confirmed"})}const o=Ne([Oe("instruction"),Oe("offset"),Oe("bytesLength"),Oe("bytesLengthPadding"),xn(Jt("byte"),Ao(Oe(),-8),"bytes")]),a=Mo.chunkSize;let u=0,d=s,h=[];for(;d.length>0;){const m=d.slice(0,a),v=Ve.Buffer.alloc(a+16);o.encode({instruction:0,offset:u,bytes:m,bytesLength:0,bytesLengthPadding:0},v);const _=new Qt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:v});h.push(mh(e,_,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await wo(1e3/4),u+=a,d=d.slice(a)}await Promise.all(h);{const m=Ne([Oe("instruction")]),v=Ve.Buffer.alloc(m.span);m.encode({instruction:1},v);const _=new Qt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ua,isSigner:!1,isWritable:!1}],programId:i,data:v}),P="processed",A=await e.sendTransaction(_,[t,n],{preflightCommitment:P}),{context:E,value:T}=await e.confirmTransaction({signature:A,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},P);if(T.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(T)})`);for(;;){try{if(await e.getSlot({commitment:P})>E.slot)break}catch{}await new Promise(C=>setTimeout(C,Math.round(vv/2)))}}return!0}}Mo.chunkSize=E9;const S9=new Ae("BPFLoader2111111111111111111111111111111111");class k9{static getMinNumSignatures(e){return Mo.getMinNumSignatures(e)}static load(e,t,n,i,s){return Mo.load(e,t,n,s,i)}}function T9(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var I9=Object.prototype.toString,P9=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function Ac(r,e){var t,n,i,s,o,a,u;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Ac(r.toJSON(),e);if(u=I9.call(r),u==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=Ac(r[t],!0)+",";return n>-1&&(i+=Ac(r[t],!0)),i+"]"}else if(u==="[object Object]"){for(s=P9(r).sort(),n=s.length,i="",t=0;t<n;)o=s[t],a=Ac(r[o],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var R9=function(r){var e=Ac(r,!1);if(e!==void 0)return""+e},Em=T9(R9);const bc=32;function Ld(r){let e=0;for(;r>1;)r/=2,e++;return e}function C9(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Ev{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Ld(C9(e+bc+1))-Ld(bc)-1,n=this.getSlotsInEpoch(t),i=e-(n-bc);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*bc:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ld(bc)):this.slotsPerEpoch}}class xh extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const M9={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Le extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var B9=globalThis.fetch;class N9 extends Q7{constructor(e,t,n){const i=s=>{const o=e9(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function O9(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Sm=56;class wh{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=O9(L9,e),n=e.length-Sm;Vt(n>=0,"lookup table is invalid"),Vt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Ne([xn(Ot(),i,"addresses")]).decode(e.slice(Sm));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Ae(t.authority[0]):void 0,addresses:s.map(o=>new Ae(o))}}}const L9={index:1,layout:Ne([Oe("typeIndex"),Fa("deactivationSlot"),yn("lastExtendedSlot"),Jt("lastExtendedStartIndex"),Jt(),xn(Ot(),Ao(Jt(),-1),"authority")])},D9=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function U9(r){const e=r.match(D9);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${s}`}const $r=Mu(Up(Ae),ve(),r=>new Ae(r)),Sv=Fp([ve(),xr("base64")]),Gp=Mu(Up(Ve.Buffer),Sv,r=>Ve.Buffer.from(r[0],"base64")),kv=30*1e3;function F9(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function hr(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function Tv(r){return Dn([he({jsonrpc:xr("2.0"),id:ve(),result:r}),he({jsonrpc:xr("2.0"),id:ve(),error:he({code:Cu(),message:ve(),data:ct(H7())})})])}const K9=Tv(Cu());function Rt(r){return Mu(Tv(r),K9,e=>"error"in e?e:{...e,result:Ee(e.result,r)})}function kr(r){return Rt(he({context:he({slot:Y()}),value:r}))}function Kl(r){return he({context:he({slot:Y()}),value:r})}function Dd(r,e){return r===0?new Co({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Ae(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Nr.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Ni(e)}const $9=he({foundation:Y(),foundationTerm:Y(),initial:Y(),taper:Y(),terminal:Y()}),j9=Rt(Pe(Re(he({epoch:Y(),effectiveSlot:Y(),amount:Y(),postBalance:Y(),commission:ct(Re(Y()))})))),z9=Pe(he({slot:Y(),prioritizationFee:Y()})),q9=he({total:Y(),validator:Y(),foundation:Y(),epoch:Y()}),H9=he({epoch:Y(),slotIndex:Y(),slotsInEpoch:Y(),absoluteSlot:Y(),blockHeight:ct(Y()),transactionCount:ct(Y())}),W9=he({slotsPerEpoch:Y(),leaderScheduleSlotOffset:Y(),warmup:is(),firstNormalEpoch:Y(),firstNormalSlot:Y()}),G9=pv(ve(),Pe(Y())),Yo=Re(Dn([he({}),ve()])),V9=he({err:Yo}),J9=xr("receivedSignature"),Y9=he({"solana-core":ve(),"feature-set":ct(Y())}),km=kr(he({err:Re(Dn([he({}),ve()])),logs:Re(Pe(ve())),accounts:ct(Re(Pe(Re(he({executable:is(),owner:ve(),lamports:Y(),data:Pe(ve()),rentEpoch:ct(Y())}))))),unitsConsumed:ct(Y()),returnData:ct(Re(he({programId:ve(),data:Fp([ve(),xr("base64")])})))})),X9=kr(he({byIdentity:pv(ve(),Pe(Y())),range:he({firstSlot:Y(),lastSlot:Y()})}));function Z9(r,e,t,n,i,s){const o=t||B9;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(h,m)=>{const v=await new Promise((_,P)=>{try{n(h,m,(A,E)=>_([A,E]))}catch(A){P(A)}});return await o(...v)}),new Z7(async(h,m)=>{const v={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},QR)};try{let _=5,P,A=500;for(;u?P=await u(r,v):P=await o(r,v),!(P.status!==429||i===!0||(_-=1,_===0));)console.log(`Server responded with ${P.status} ${P.statusText}.  Retrying after ${A}ms delay...`),await wo(A),A*=2;const E=await P.text();P.ok?m(null,E):m(new Error(`${P.status} ${P.statusText}: ${E}`))}catch(_){_ instanceof Error&&m(_)}},{})}function Q9(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function eR(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const tR=Rt($9),rR=Rt(q9),nR=Rt(z9),iR=Rt(H9),sR=Rt(W9),oR=Rt(G9),aR=Rt(Y()),cR=kr(he({total:Y(),circulating:Y(),nonCirculating:Y(),nonCirculatingAccounts:Pe($r)})),vh=he({amount:ve(),uiAmount:Re(Y()),decimals:Y(),uiAmountString:ct(ve())}),uR=kr(Pe(he({address:$r,amount:ve(),uiAmount:Re(Y()),decimals:Y(),uiAmountString:ct(ve())}))),fR=kr(Pe(he({pubkey:$r,account:he({executable:is(),owner:$r,lamports:Y(),data:Gp,rentEpoch:Y()})}))),_h=he({program:ve(),parsed:Cu(),space:Y()}),lR=kr(Pe(he({pubkey:$r,account:he({executable:is(),owner:$r,lamports:Y(),data:_h,rentEpoch:Y()})}))),dR=kr(Pe(he({lamports:Y(),address:$r}))),Zc=he({executable:is(),owner:$r,lamports:Y(),data:Gp,rentEpoch:Y()}),hR=he({pubkey:$r,account:Zc}),pR=Mu(Dn([Up(Ve.Buffer),_h]),Dn([Sv,_h]),r=>Array.isArray(r)?Ee(r,Gp):r),Ah=he({executable:is(),owner:$r,lamports:Y(),data:pR,rentEpoch:Y()}),gR=he({pubkey:$r,account:Ah}),yR=he({state:Dn([xr("active"),xr("inactive"),xr("activating"),xr("deactivating")]),active:Y(),inactive:Y()}),mR=Rt(Pe(he({signature:ve(),slot:Y(),err:Yo,memo:Re(ve()),blockTime:ct(Re(Y()))}))),bR=Rt(Pe(he({signature:ve(),slot:Y(),err:Yo,memo:Re(ve()),blockTime:ct(Re(Y()))}))),xR=he({subscription:Y(),result:Kl(Zc)}),wR=he({pubkey:$r,account:Zc}),vR=he({subscription:Y(),result:Kl(wR)}),_R=he({parent:Y(),slot:Y(),root:Y()}),AR=he({subscription:Y(),result:_R}),ER=Dn([he({type:Dn([xr("firstShredReceived"),xr("completed"),xr("optimisticConfirmation"),xr("root")]),slot:Y(),timestamp:Y()}),he({type:xr("createdBank"),parent:Y(),slot:Y(),timestamp:Y()}),he({type:xr("frozen"),slot:Y(),timestamp:Y(),stats:he({numTransactionEntries:Y(),numSuccessfulTransactions:Y(),numFailedTransactions:Y(),maxTransactionsPerEntry:Y()})}),he({type:xr("dead"),slot:Y(),timestamp:Y(),err:ve()})]),SR=he({subscription:Y(),result:ER}),kR=he({subscription:Y(),result:Kl(Dn([V9,J9]))}),TR=he({subscription:Y(),result:Y()}),IR=he({pubkey:ve(),gossip:Re(ve()),tpu:Re(ve()),rpc:Re(ve()),version:Re(ve())}),Tm=he({votePubkey:ve(),nodePubkey:ve(),activatedStake:Y(),epochVoteAccount:is(),epochCredits:Pe(Fp([Y(),Y(),Y()])),commission:Y(),lastVote:Y(),rootSlot:Re(Y())}),PR=Rt(he({current:Pe(Tm),delinquent:Pe(Tm)})),RR=Dn([xr("processed"),xr("confirmed"),xr("finalized")]),CR=he({slot:Y(),confirmations:Re(Y()),err:Yo,confirmationStatus:ct(RR)}),MR=kr(Pe(Re(CR))),BR=Rt(Y()),Iv=he({accountKey:$r,writableIndexes:Pe(Y()),readonlyIndexes:Pe(Y())}),Vp=he({signatures:Pe(ve()),message:he({accountKeys:Pe(ve()),header:he({numRequiredSignatures:Y(),numReadonlySignedAccounts:Y(),numReadonlyUnsignedAccounts:Y()}),instructions:Pe(he({accounts:Pe(Y()),data:ve(),programIdIndex:Y()})),recentBlockhash:ve(),addressTableLookups:ct(Pe(Iv))})}),Pv=he({pubkey:$r,signer:is(),writable:is(),source:ct(Dn([xr("transaction"),xr("lookupTable")]))}),Rv=he({accountKeys:Pe(Pv),signatures:Pe(ve())}),Cv=he({parsed:Cu(),program:ve(),programId:$r}),Mv=he({accounts:Pe($r),data:ve(),programId:$r}),NR=Dn([Mv,Cv]),OR=Dn([he({parsed:Cu(),program:ve(),programId:ve()}),he({accounts:Pe(ve()),data:ve(),programId:ve()})]),Bv=Mu(NR,OR,r=>"accounts"in r?Ee(r,Mv):Ee(r,Cv)),Nv=he({signatures:Pe(ve()),message:he({accountKeys:Pe(Pv),instructions:Pe(Bv),recentBlockhash:ve(),addressTableLookups:ct(Re(Pe(Iv)))})}),Ff=he({accountIndex:Y(),mint:ve(),owner:ct(ve()),uiTokenAmount:vh}),Ov=he({writable:Pe($r),readonly:Pe($r)}),$l=he({err:Yo,fee:Y(),innerInstructions:ct(Re(Pe(he({index:Y(),instructions:Pe(he({accounts:Pe(Y()),data:ve(),programIdIndex:Y()}))})))),preBalances:Pe(Y()),postBalances:Pe(Y()),logMessages:ct(Re(Pe(ve()))),preTokenBalances:ct(Re(Pe(Ff))),postTokenBalances:ct(Re(Pe(Ff))),loadedAddresses:ct(Ov),computeUnitsConsumed:ct(Y())}),Jp=he({err:Yo,fee:Y(),innerInstructions:ct(Re(Pe(he({index:Y(),instructions:Pe(Bv)})))),preBalances:Pe(Y()),postBalances:Pe(Y()),logMessages:ct(Re(Pe(ve()))),preTokenBalances:ct(Re(Pe(Ff))),postTokenBalances:ct(Re(Pe(Ff))),loadedAddresses:ct(Ov),computeUnitsConsumed:ct(Y())}),ec=Dn([xr(0),xr("legacy")]),Xo=he({pubkey:ve(),lamports:Y(),postBalance:Re(Y()),rewardType:Re(ve()),commission:ct(Re(Y()))}),LR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),transactions:Pe(he({transaction:Vp,meta:Re($l),version:ct(ec)})),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),DR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),UR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),transactions:Pe(he({transaction:Rv,meta:Re($l),version:ct(ec)})),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),FR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),transactions:Pe(he({transaction:Nv,meta:Re(Jp),version:ct(ec)})),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),KR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),transactions:Pe(he({transaction:Rv,meta:Re(Jp),version:ct(ec)})),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),$R=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),rewards:ct(Pe(Xo)),blockTime:Re(Y()),blockHeight:Re(Y())}))),jR=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),transactions:Pe(he({transaction:Vp,meta:Re($l)})),rewards:ct(Pe(Xo)),blockTime:Re(Y())}))),Im=Rt(Re(he({blockhash:ve(),previousBlockhash:ve(),parentSlot:Y(),signatures:Pe(ve()),blockTime:Re(Y())}))),Ud=Rt(Re(he({slot:Y(),meta:$l,blockTime:ct(Re(Y())),transaction:Vp,version:ct(ec)}))),Qu=Rt(Re(he({slot:Y(),transaction:Nv,meta:Re(Jp),blockTime:ct(Re(Y())),version:ct(ec)}))),zR=kr(he({blockhash:ve(),feeCalculator:he({lamportsPerSignature:Y()})})),qR=kr(he({blockhash:ve(),lastValidBlockHeight:Y()})),HR=kr(is()),WR=he({slot:Y(),numTransactions:Y(),numSlots:Y(),samplePeriodSecs:Y()}),GR=Rt(Pe(WR)),VR=kr(Re(he({feeCalculator:he({lamportsPerSignature:Y()})}))),JR=Rt(ve()),YR=Rt(ve()),XR=he({err:Yo,logs:Pe(ve()),signature:ve()}),ZR=he({result:Kl(XR),subscription:Y()}),QR={"solana-client":"js/0.0.0-development"};class eC{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async h=>{const{commitment:m,config:v}=hr(h),_=this._buildArgs([],m,void 0,v),P=Em(_);return d[P]=d[P]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",_),E=Ee(A,Rt(Y()));if("error"in E)throw new Le(E.error,"failed to get block height information");return E.result}finally{delete d[P]}})(),await d[P]}})();let n,i,s,o,a,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=F9(e),this._rpcWsEndpoint=n||U9(e),this._rpcClient=Z9(e,i,s,o,a,u),this._rpcRequest=Q9(this._rpcClient),this._rpcBatchRequest=eR(this._rpcClient),this._rpcWebSocket=new N9(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=Ee(o,kr(Y()));if("error"in a)throw new Le(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=Ee(t,Rt(Re(Y())));if("error"in n)throw new Le(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Ee(e,Rt(Y()));if("error"in t)throw new Le(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Ee(e,aR);if("error"in t)throw new Le(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=Ee(n,cR);if("error"in i)throw new Le(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=Ee(i,kr(vh));if("error"in s)throw new Le(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=Ee(i,kr(vh));if("error"in s)throw new Le(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=hr(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",a),d=Ee(u,fR);if("error"in d)throw new Le(d.error,`failed to get token accounts owned by account ${e.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=Ee(o,lR);if("error"in a)throw new Le(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=Ee(i,dR);if("error"in s)throw new Le(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=Ee(i,uR);if("error"in s)throw new Le(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=Ee(o,kr(Re(Zc)));if("error"in a)throw new Le(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=Ee(o,kr(Re(Ah)));if("error"in a)throw new Le(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=hr(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),u=Ee(a,kr(Pe(Re(Ah))));if("error"in u)throw new Le(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=hr(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),u=Ee(a,kr(Pe(Re(Zc))));if("error"in u)throw new Le(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=hr(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=Ee(a,Rt(yR));if("error"in u)throw new Le(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=hr(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",o),u=await this._rpcRequest("getProgramAccounts",a),d=Pe(hR),h=o.withContext===!0?Ee(u,kr(d)):Ee(u,Rt(d));if("error"in h)throw new Le(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=Ee(o,Rt(Pe(gR)));if("error"in a)throw new Le(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=Nr.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Vt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((u,d)=>{try{n=this.onSignature(t,(m,v)=>{n=void 0;const _={context:v,value:m};u({__type:ps.PROCESSED,response:_})},e);const h=new Promise(m=>{n==null?m():i=this._onSubscriptionStateChange(n,v=>{v==="subscribed"&&m()})});(async()=>{if(await h,s)return;const m=await this.getSignatureStatus(t);if(s||m==null)return;const{context:v,value:_}=m;if(_!=null)if(_!=null&&_.err)d(_.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:ps.PROCESSED,response:{context:v,value:_}})}})()}catch(h){d(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(m=>{const v=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let _=await v();if(!s){for(;_<=n;)if(await wo(1e3),s||(_=await v(),s))return;m({__type:ps.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),d=this.getCancellationPromise(t);let h;try{const m=await Promise.race([d,u,o]);if(m.__type===ps.PROCESSED)h=m.response;else throw new jp(i)}finally{s=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const u=new Promise(_=>{let P=s,A=null;const E=async()=>{try{const{context:T,value:C}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return A=T.slot,C==null?void 0:C.nonce}catch{return P}};(async()=>{if(P=await E(),!a)for(;;){if(s!==P){_({__type:ps.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await wo(2e3),a||(P=await E(),a))return}})()}),{abortConfirmation:d,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),m=this.getCancellationPromise(t);let v;try{const _=await Promise.race([m,h,u]);if(_.__type===ps.PROCESSED)v=_.response;else{let P;for(;;){const A=await this.getSignatureStatus(o);if(A==null)break;if(A.context.slot<(_.slotInWhichNonceDidAdvance??n)){await wo(400);continue}P=A;break}if(P!=null&&P.value){const A=e||"finalized",{confirmationStatus:E}=P.value;switch(A){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new xa(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new xa(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new xa(o);break;default:(T=>{})(A)}v={context:P.context,value:{err:P.value.err}}}else throw new xa(o)}}finally{a=!0,d()}return v}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(u=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:ps.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const u=await Promise.race([o,i]);if(u.__type===ps.PROCESSED)a=u.response;else throw new zp(t,u.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Ee(e,Rt(Pe(IR)));if("error"in t)throw new Le(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=Ee(n,PR);if("error"in i)throw new Le(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=Ee(s,Rt(Y()));if("error"in o)throw new Le(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=Ee(s,Rt(ve()));if("error"in o)throw new Le(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=Ee(i,Rt(Pe($r)));if("error"in s)throw new Le(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);Vt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=Ee(i,MR);if("error"in s)throw new Le(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=Ee(s,Rt(Y()));if("error"in o)throw new Le(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=Ee(n,tR);if("error"in i)throw new Le(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=hr(n),o=this._buildArgs([e.map(d=>d.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=Ee(a,j9);if("error"in u)throw new Le(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Ee(e,rR);if("error"in t)throw new Le(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=Ee(s,iR);if("error"in o)throw new Le(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Ee(e,sR);if("error"in t)throw new Le(t.error,"failed to get epoch schedule");const n=t.result;return new Ev(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Ee(e,oR);if("error"in t)throw new Le(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=Ee(i,BR);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=Ee(n,zR);if("error"in i)throw new Le(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=Ee(t,GR);if("error"in n)throw new Le(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=Ee(i,VR);if("error"in s)throw new Le(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=Ct(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=Ee(s,kr(Re(Y())));if("error"in o)throw new Le(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=Ee(i,nR);if("error"in s)throw new Le(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=Ee(s,qR);if("error"in o)throw new Le(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=Ee(o,HR);if("error"in a)throw new Le(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Ee(e,Rt(Y9));if("error"in t)throw new Le(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Ee(e,Rt(ve()));if("error"in t)throw new Le(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=Ee(o,UR);if("error"in a)throw a.error;return a.result}case"none":{const a=Ee(o,DR);if("error"in a)throw a.error;return a.result}default:{const a=Ee(o,LR);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:d,meta:h,version:m})=>({meta:h,transaction:{...d,message:Dd(m,d.message)},version:m}))}:null}}}catch(a){throw new Le(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=Ee(o,KR);if("error"in a)throw a.error;return a.result}case"none":{const a=Ee(o,$R);if("error"in a)throw a.error;return a.result}default:{const a=Ee(o,FR);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Le(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...u}=e;n=a,t=u}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=Ee(s,X9);if("error"in o)throw new Le(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=Ee(o,Ud);if("error"in a)throw new Le(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:Dd(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=hr(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=Ee(o,Qu);if("error"in a)throw new Le(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=hr(t),s=e.map(u=>{const d=this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",i);return{methodName:"getTransaction",args:d}});return(await this._rpcBatchRequest(s)).map(u=>{const d=Ee(u,Qu);if("error"in d)throw new Le(d.error,"failed to get transactions");return d.result})}async getTransactions(e,t){const{commitment:n,config:i}=hr(t),s=e.map(u=>{const d=this._buildArgsAtLeastConfirmed([u],n,void 0,i);return{methodName:"getTransaction",args:d}});return(await this._rpcBatchRequest(s)).map(u=>{const d=Ee(u,Ud);if("error"in d)throw new Le(d.error,"failed to get transactions");const h=d.result;return h&&{...h,transaction:{...h.transaction,message:Dd(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=Ee(i,jR);if("error"in s)throw new Le(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:d})=>{const h=new Ni(u.message);return{meta:d,transaction:{...u,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:d})=>({meta:d,transaction:Qt.populate(u.message,u.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=Ee(s,Rt(Pe(Y())));if("error"in o)throw new Le(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=Ee(i,Im);if("error"in s)throw new Le(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=Ee(i,Im);if("error"in s)throw new Le(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=Ee(i,Ud);if("error"in s)throw new Le(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ni(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Qt.populate(a,u)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=Ee(i,Qu);if("error"in s)throw new Le(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>{const a=this._buildArgsAtLeastConfirmed([o],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:a}});return(await this._rpcBatchRequest(n)).map(o=>{const a=Ee(o,Qu);if("error"in a)throw new Le(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=Ee(s,mR);if("error"in o)throw new Le(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=Ee(s,bR);if("error"in o)throw new Le(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new wh({key:e,state:wh.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Fl.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=Ee(n,JR);if("error"in i)throw new Le(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await wo(100);const n=Date.now()-this._blockhashInfo.lastFetch>=kv;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await wo(vv/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=hr(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=Ee(s,kr(Y()));if("error"in o)throw new Le(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const A=e.serialize(),E=Ve.Buffer.from(A).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const T=t||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment);const C=[E,T],L=await this._rpcRequest("simulateTransaction",C),K=Ee(L,km);if("error"in K)throw new Error("failed to simulate transaction: "+K.error.message);return K.result}let i;if(e instanceof Qt){let P=e;i=new Qt,i.feePayer=P.feePayer,i.instructions=e.instructions,i.nonceInfo=P.nonceInfo,i.signatures=P.signatures}else i=Qt.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let P=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(P);if(i.lastValidBlockHeight=A.lastValidBlockHeight,i.recentBlockhash=A.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const E=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else P=!0}}const o=i._compile(),a=o.serialize(),d=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const P=(Array.isArray(n)?n:o.nonProgramIds()).map(A=>A.toBase58());h.accounts={encoding:"base64",addresses:P}}s&&(h.sigVerify=!0);const m=[d,h],v=await this._rpcRequest("simulateTransaction",m),_=Ee(v,km);if("error"in _){let P;if("data"in _.error&&(P=_.error.data.logs,P&&Array.isArray(P))){const A=`
    `,E=A+P.join(A);console.error(_.error.message,E)}throw new xh("failed to simulate transaction: "+_.error.message,P)}return _.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Ct(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),u=Ee(a,YR);if("error"in u){let d;throw"data"in u.error&&(d=u.error.data.logs),new xh("failed to send transaction: "+u.error.message,d)}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${o} error for argument`,s,a.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=Ee(e,xR);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=Em([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];Vt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=Ee(e,vR);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=Ee(e,ZR);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=Ee(e,AR);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=Ee(e,SR);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=Ee(e,kR);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(u,d)=>{t(u,d);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=Ee(e,TR);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Sa{constructor(e){this._keypair=void 0,this._keypair=e??vm()}static generate(){return new Sa(vm())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Uf(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Sa({publicKey:n,secretKey:e})}static fromSeed(e){const t=Uf(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Sa({publicKey:t,secretKey:n})}get publicKey(){return new Ae(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const xs=Object.freeze({CreateLookupTable:{index:0,layout:Ne([Oe("instruction"),Fa("recentSlot"),Jt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ne([Oe("instruction")])},ExtendLookupTable:{index:2,layout:Ne([Oe("instruction"),Fa(),xn(Ot(),Ao(Oe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ne([Oe("instruction")])},CloseLookupTable:{index:4,layout:Ne([Oe("instruction")])}});class tC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Oe("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(xs))if(o.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Zt(xs.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Zt(xs.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Ae(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Yp.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Yp{constructor(){}static createLookupTable(e){const[t,n]=Ae.findProgramAddressSync([e.authority.toBuffer(),Vm(BigInt(e.recentSlot),8)],this.programId),i=xs.CreateLookupTable,s=Ht(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:sn.programId,isSigner:!1,isWritable:!1}];return[new cr({programId:this.programId,keys:o,data:s}),t]}static freezeLookupTable(e){const t=xs.FreezeLookupTable,n=Ht(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new cr({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=xs.ExtendLookupTable,n=Ht(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:sn.programId,isSigner:!1,isWritable:!1}),new cr({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=xs.DeactivateLookupTable,n=Ht(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new cr({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=xs.CloseLookupTable,n=Ht(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new cr({programId:this.programId,keys:i,data:n})}}Yp.programId=new Ae("AddressLookupTab1e1111111111111111111111111");class rC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Jt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Wi))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Zt(Wi.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Zt(Wi.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Zt(Wi.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Zt(Wi.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Xp.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Wi=Object.freeze({RequestUnits:{index:0,layout:Ne([Jt("instruction"),Oe("units"),Oe("additionalFee")])},RequestHeapFrame:{index:1,layout:Ne([Jt("instruction"),Oe("bytes")])},SetComputeUnitLimit:{index:2,layout:Ne([Jt("instruction"),Oe("units")])},SetComputeUnitPrice:{index:3,layout:Ne([Jt("instruction"),Fa("microLamports")])}});class Xp{constructor(){}static requestUnits(e){const t=Wi.RequestUnits,n=Ht(t,e);return new cr({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=Wi.RequestHeapFrame,n=Ht(t,e);return new cr({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=Wi.SetComputeUnitLimit,n=Ht(t,e);return new cr({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=Wi.SetComputeUnitPrice,n=Ht(t,{microLamports:BigInt(e.microLamports)});return new cr({keys:[],programId:this.programId,data:n})}}Xp.programId=new Ae("ComputeBudget111111111111111111111111111111");const Pm=64,Rm=32,Cm=64,Mm=Ne([Jt("numSignatures"),Jt("padding"),Ei("signatureOffset"),Ei("signatureInstructionIndex"),Ei("publicKeyOffset"),Ei("publicKeyInstructionIndex"),Ei("messageDataOffset"),Ei("messageDataSize"),Ei("messageInstructionIndex")]);class jl{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;Vt(t.length===Rm,`Public Key must be ${Rm} bytes but received ${t.length} bytes`),Vt(i.length===Cm,`Signature must be ${Cm} bytes but received ${i.length} bytes`);const o=Mm.span,a=o+t.length,u=a+i.length,d=1,h=Ve.Buffer.alloc(u+n.length),m=s??65535;return Mm.encode({numSignatures:d,padding:0,signatureOffset:a,signatureInstructionIndex:m,publicKeyOffset:o,publicKeyInstructionIndex:m,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:m},h),h.fill(t,o),h.fill(i,a),h.fill(n,u),new cr({keys:[],programId:jl.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;Vt(t.length===Pm,`Private key must be ${Pm} bytes but received ${t.length} bytes`);try{const s=Sa.fromSecretKey(t),o=s.publicKey.toBytes(),a=Kp(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}jl.programId=new Ae("Ed25519SigVerify111111111111111111111111111");const nC=(r,e)=>{const t=kh.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};kh.utils.isValidPrivateKey;const iC=kh.getPublicKey,Bm=32,Fd=20,Nm=64,sC=11,Kd=Ne([Jt("numSignatures"),Ei("signatureOffset"),Jt("signatureInstructionIndex"),Ei("ethAddressOffset"),Jt("ethAddressInstructionIndex"),Ei("messageDataOffset"),Ei("messageDataSize"),Jt("messageInstructionIndex"),pr(20,"ethAddress"),pr(64,"signature"),Jt("recoveryId")]);class ka{constructor(){}static publicKeyToEthAddress(e){Vt(e.length===Nm,`Public key must be ${Nm} bytes but received ${e.length} bytes`);try{return Ve.Buffer.from(tg(Ct(e))).slice(-Fd)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:o}=e;return ka.createInstructionWithEthAddress({ethAddress:ka.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=Ve.Buffer.from(t.substr(2),"hex"):a=Ve.Buffer.from(t,"hex"):a=t,Vt(a.length===Fd,`Address must be ${Fd} bytes but received ${a.length} bytes`);const u=1+sC,d=u,h=u+a.length,m=h+i.length+1,v=1,_=Ve.Buffer.alloc(Kd.span+n.length);return Kd.encode({numSignatures:v,signatureOffset:h,signatureInstructionIndex:o,ethAddressOffset:d,ethAddressInstructionIndex:o,messageDataOffset:m,messageDataSize:n.length,messageInstructionIndex:o,signature:Ct(i),ethAddress:Ct(a),recoveryId:s},_),_.fill(Ct(n),Kd.span),new cr({keys:[],programId:ka.programId,data:_})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;Vt(t.length===Bm,`Private key must be ${Bm} bytes but received ${t.length} bytes`);try{const s=Ct(t),o=iC(s,!1).slice(1),a=Ve.Buffer.from(tg(Ct(n))),[u,d]=nC(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,recoveryId:d,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ka.programId=new Ae("KeccakSecp256k11111111111111111111111111111");var Lv;const Dv=new Ae("StakeConfig11111111111111111111111111111111");class Uv{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Bu{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}Lv=Bu;Bu.default=new Lv(0,0,Ae.default);class oC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Oe("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Jr))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Zt(Jr.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Uv(new Ae(t.staker),new Ae(t.withdrawer)),lockup:new Bu(n.unixTimestamp,n.epoch,new Ae(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Zt(Jr.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Zt(Jr.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ae(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=Zt(Jr.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Ae(s),newAuthorizedPubkey:new Ae(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Zt(Jr.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Zt(Jr.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Zt(Jr.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Zt(Jr.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(zl.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Jr=Object.freeze({Initialize:{index:0,layout:Ne([Oe("instruction"),c9(),u9()])},Authorize:{index:1,layout:Ne([Oe("instruction"),Ot("newAuthorized"),Oe("stakeAuthorizationType")])},Delegate:{index:2,layout:Ne([Oe("instruction")])},Split:{index:3,layout:Ne([Oe("instruction"),di("lamports")])},Withdraw:{index:4,layout:Ne([Oe("instruction"),di("lamports")])},Deactivate:{index:5,layout:Ne([Oe("instruction")])},Merge:{index:7,layout:Ne([Oe("instruction")])},AuthorizeWithSeed:{index:8,layout:Ne([Oe("instruction"),Ot("newAuthorized"),Oe("stakeAuthorizationType"),_o("authoritySeed"),Ot("authorityOwner")])}}),aC=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class zl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Bu.default,o=Jr.Initialize,a=Ht(o,{authorized:{staker:Ct(n.staker.toBuffer()),withdrawer:Ct(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Ct(s.custodian.toBuffer())}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ua,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new cr(u)}static createAccountWithSeed(e){const t=new Qt;t.add(sn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new Qt;t.add(sn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=Jr.Delegate,o=Ht(s);return new Qt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:bf,isSigner:!1,isWritable:!1},{pubkey:Dv,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,a=Jr.Authorize,u=Ht(a,{newAuthorized:Ct(i.toBuffer()),stakeAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!1,isWritable:!1}),new Qt().add({keys:d,programId:this.programId,data:u})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=e,d=Jr.AuthorizeWithSeed,h=Ht(d,{newAuthorized:Ct(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:Ct(s.toBuffer())}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:qi,isSigner:!1,isWritable:!1}];return u&&m.push({pubkey:u,isSigner:!1,isWritable:!1}),new Qt().add({keys:m,programId:this.programId,data:h})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,o=Jr.Split,a=Ht(o,{lamports:s});return new cr({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e){const t=new Qt;return t.add(sn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,u=new Qt;return u.add(sn.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),u.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=Jr.Merge,o=Ht(s);return new Qt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:bf,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:o}=e,a=Jr.Withdraw,u=Ht(a,{lamports:s}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:bf,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!1,isWritable:!1}),new Qt().add({keys:d,programId:this.programId,data:u})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=Jr.Deactivate,s=Ht(i);return new Qt().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}zl.programId=new Ae("Stake11111111111111111111111111111111111111");zl.space=200;class Fv{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class cC{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Oe("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(ws))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Zt(ws.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Fv(new Ae(t.nodePubkey),new Ae(t.authorizedVoter),new Ae(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Zt(ws.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ae(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=Zt(ws.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Ae(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Ae(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Zt(ws.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(tc.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const ws=Object.freeze({InitializeAccount:{index:0,layout:Ne([Oe("instruction"),f9()])},Authorize:{index:1,layout:Ne([Oe("instruction"),Ot("newAuthorized"),Oe("voteAuthorizationType")])},Withdraw:{index:3,layout:Ne([Oe("instruction"),di("lamports")])},AuthorizeWithSeed:{index:10,layout:Ne([Oe("instruction"),l9()])}}),uC=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class tc{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=ws.InitializeAccount,o=Ht(s,{voteInit:{nodePubkey:Ct(i.nodePubkey.toBuffer()),authorizedVoter:Ct(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Ct(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ua,isSigner:!1,isWritable:!1},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new cr(a)}static createAccount(e){const t=new Qt;return t.add(sn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=ws.Authorize,a=Ht(o,{newAuthorized:Ct(i.toBuffer()),voteAuthorizationType:s.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Qt().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=e,u=ws.AuthorizeWithSeed,d=Ht(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ct(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Ct(s.toBuffer()),voteAuthorizationType:o.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Qt().add({keys:h,programId:this.programId,data:d})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,o=ws.Withdraw,a=Ht(o,{lamports:i}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Qt().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return tc.withdraw(e)}}tc.programId=new Ae("Vote111111111111111111111111111111111111111");tc.space=3731;const Kv=new Ae("Va1idator1nfo111111111111111111111111111111"),fC=he({name:ve(),website:ct(ve()),details:ct(ve()),keybaseUsername:ct(ve())});class Zp{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Nn(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new Ae(t.slice(0,Xn));t=t.slice(Xn);const a=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:o,isSigner:a})}if(i[0].publicKey.equals(Kv)&&i[1].isSigner){const s=_o().decode(Ve.Buffer.from(t)),o=JSON.parse(s);return dv(o,fC),new Zp(i[1].publicKey,o)}return null}}const lC=new Ae("Vote111111111111111111111111111111111111111"),dC=Ne([Ot("nodePubkey"),Ot("authorizedWithdrawer"),Jt("commission"),yn(),xn(Ne([yn("slot"),Oe("confirmationCount")]),Ao(Oe(),-8),"votes"),Jt("rootSlotValid"),yn("rootSlot"),yn(),xn(Ne([yn("epoch"),Ot("authorizedVoter")]),Ao(Oe(),-8),"authorizedVoters"),Ne([xn(Ne([Ot("authorizedPubkey"),yn("epochOfLastAuthorizedSwitch"),yn("targetEpoch")]),32,"buf"),yn("idx"),Jt("isEmpty")],"priorVoters"),yn(),xn(Ne([yn("epoch"),yn("credits"),yn("prevCredits")]),Ao(Oe(),-8),"epochCredits"),Ne([yn("slot"),yn("timestamp")],"lastTimestamp")]);class Qp{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=dC.decode(Ct(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new Qp({nodePubkey:new Ae(n.nodePubkey),authorizedWithdrawer:new Ae(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(hC),priorVoters:pC(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function hC({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Ae(r)}}function Om({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Ae(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function pC({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(Om),...r.slice(0,e).map(Om)]}const Lm={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function gC(r,e){const t=e===!1?"http":"https";if(!r)return Lm[t].devnet;const n=Lm[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function yC(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await r.sendRawTransaction(e,o),u=s&&s.commitment,h=(await(i?r.confirmTransaction(i,u):r.confirmTransaction(a,u))).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}const mC=1e9;var bC=Object.freeze(Object.defineProperty({__proto__:null,Account:s9,AddressLookupTableAccount:wh,AddressLookupTableInstruction:tC,AddressLookupTableProgram:Yp,Authorized:Uv,BLOCKHASH_CACHE_TIMEOUT_MS:kv,BPF_LOADER_DEPRECATED_PROGRAM_ID:o9,BPF_LOADER_PROGRAM_ID:S9,BpfLoader:k9,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Wi,ComputeBudgetInstruction:rC,ComputeBudgetProgram:Xp,Connection:eC,Ed25519Program:jl,Enum:n9,EpochSchedule:Ev,FeeCalculatorLayout:_v,Keypair:Sa,LAMPORTS_PER_SOL:mC,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:xs,Loader:Mo,Lockup:Bu,MAX_SEED_LENGTH:xv,Message:Ni,MessageAccountKeys:Xc,MessageV0:Co,NONCE_ACCOUNT_LENGTH:bh,NonceAccount:Fl,PACKET_DATA_SIZE:Js,PUBLIC_KEY_LENGTH:Xn,PublicKey:Ae,SIGNATURE_LENGTH_IN_BYTES:Da,SOLANA_SCHEMA:Dc,STAKE_CONFIG_ID:Dv,STAKE_INSTRUCTION_LAYOUTS:Jr,SYSTEM_INSTRUCTION_LAYOUTS:lr,SYSVAR_CLOCK_PUBKEY:qi,SYSVAR_EPOCH_SCHEDULE_PUBKEY:y9,SYSVAR_INSTRUCTIONS_PUBKEY:m9,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:mf,SYSVAR_RENT_PUBKEY:Ua,SYSVAR_REWARDS_PUBKEY:b9,SYSVAR_SLOT_HASHES_PUBKEY:x9,SYSVAR_SLOT_HISTORY_PUBKEY:w9,SYSVAR_STAKE_HISTORY_PUBKEY:bf,Secp256k1Program:ka,SendTransactionError:xh,SolanaJSONRPCError:Le,SolanaJSONRPCErrorCode:M9,StakeAuthorizationLayout:aC,StakeInstruction:oC,StakeProgram:zl,Struct:$p,SystemInstruction:A9,SystemProgram:sn,Transaction:Qt,TransactionExpiredBlockheightExceededError:jp,TransactionExpiredNonceInvalidError:xa,TransactionExpiredTimeoutError:zp,TransactionInstruction:cr,TransactionMessage:Hp,TransactionStatus:ps,VALIDATOR_INFO_KEY:Kv,VERSION_PREFIX_MASK:Dl,VOTE_PROGRAM_ID:lC,ValidatorInfo:Zp,VersionedMessage:qp,VersionedTransaction:Wp,VoteAccount:Qp,VoteAuthorizationLayout:uC,VoteInit:Fv,VoteInstruction:cC,VoteProgram:tc,clusterApiUrl:gC,sendAndConfirmRawTransaction:yC,sendAndConfirmTransaction:mh},Symbol.toStringTag,{value:"Module"})),xC=Kf(bC),wC=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vC=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_C=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&wC(e,r,t);return vC(e,r),e},ql=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lp,"__esModule",{value:!0});const Dm=Wa,ua=ql(to),AC=ql(fo),xc=_C(xC),EC=ql(Nr),SC=ql(Tl);class kC extends AC.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new xc.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const t=await this.getProvider(),n=await t.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await t.getSlot("confirmed"),s=new ua.default(n.meta.postBalances[1]).minus(new ua.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new ua.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=J.Buffer.from(e)),EC.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new Dm.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,t,n){return Dm.HexInjectedSolanaSigner.verify(e,t,n)}async getCurrentHeight(){return new ua.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,t){return new ua.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,t,n){const i=new xc.PublicKey(await this.getPublicKey()),s=await(0,SC.default)(async a=>{var u;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(d){throw!((u=d.message)===null||u===void 0)&&u.includes("blockhash")?d:(a(d),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new xc.Transaction({recentBlockhash:s,feePayer:i});return o.add(xc.SystemProgram.transfer({fromPubkey:i,toPubkey:new xc.PublicKey(t),lamports:+new ua.default(e).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}Lp.default=kC;var $v={};(function(r){var e=z&&z.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.erc20abi=void 0;const t=e(to),n=wl,i=fo,s=e(Cl);class o extends s.default{constructor(u){super(u),this.contractAddress=u.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,r.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(u){const d=await this.providerInstance.getTransaction(u);if(!d)throw new Error("Tx doesn't exist");if(d.data.length!==138||d.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const h=`0x${d.data.slice(34,74)}`,m=new t.default(d.data.slice(74),16);return{from:d.from,to:h,blockHeight:d.blockNumber?new t.default(d.blockNumber):null,amount:m,pending:!d.blockNumber,confirmed:d.confirmations>=this.minConfirm}}async getFee(u,d){const h="0x"+new t.default(u).toString(16),m=await this.getContract(),v=await this.providerInstance.getGasPrice(),_=await m.estimateGas.transfer(d,h),P=new t.default(v.mul(_).toString()),[A]=await this.getGas(),E=A.multipliedBy(P),T=new t.default(await this.price());return new t.default(E).dividedToIntegerBy(T)}async createTx(u,d,h){const m=await this.getContract(),v="0x"+new t.default(u).toString(16),_=await m.populateTransaction.transfer(d,v);return _.gasPrice=await this.providerInstance.getGasPrice(),_.gasLimit=await m.estimateGas.transfer(d,v),_.chainId=(await this.providerInstance.getNetwork()).chainId,_.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:_}}async getGas(){return[new t.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}r.default=o,r.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})($v);var rc=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yp,"__esModule",{value:!0});const fa=rc(Cl),TC=rc(bp),IC=rc(Lp),PC=rc($v),RC=rc(Nh),CC=rc(Ho);function MC(r,e,t,n){switch(r){case"ethereum":return new fa.default({name:"ethereum",ticker:"ETH",providerUrl:t??"https://cloudflare-eth.com/",wallet:e});case"matic":return new fa.default({name:"matic",ticker:"MATIC",providerUrl:t??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new fa.default({name:"arbitrum",ticker:"ETH",providerUrl:t??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new fa.default({name:"bnb",ticker:"BNB",providerUrl:t??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new fa.default({name:"avalanche",ticker:"AVAX",providerUrl:t??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new fa.default({name:"boba-eth",ticker:"ETH",providerUrl:t??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new PC.default({name:"boba",ticker:"BOBA",providerUrl:t??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const o=await RC.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await CC.default.checkAndThrow(o,"Getting price data"),!(!((s=o==null?void 0:o.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+o.data.rate},i}case"solana":return new IC.default({name:"solana",ticker:"SOL",providerUrl:t??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new TC.default({name:"near",ticker:"NEAR",providerUrl:t??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${r}`)}}yp.default=MC;var nc=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xf,"__esModule",{value:!0});const BC=nc(Ih),NC=nc(Oh),OC=nc(pp),LC=nc(bu),DC=nc(Ho),UC=nc(yp);class FC extends NC.default{constructor(e,t,n,i){var s;super();const o=new URL(e);this.api=new BC.default({protocol:o.protocol.slice(0,-1),port:o.port,host:o.hostname,timeout:(s=i==null?void 0:i.timeout)!==null&&s!==void 0?s:1e5}),this.currency=t.toLowerCase(),this.currencyConfig=(0,UC.default)(t,n,i==null?void 0:i.providerUrl,i==null?void 0:i.contractAddress),this.utils=new DC.default(this.api,this.currency,this.currencyConfig),this.uploader=new LC.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new OC.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}xf.default=FC;(function(r){var e=z&&z.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0}),r.WebBundlr=r.default=void 0;var t=xf;Object.defineProperty(r,"default",{enumerable:!0,get:function(){return e(t).default}});var n=xf;Object.defineProperty(r,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Th);var KC=Sh(Th),zC=s_({__proto__:null,default:KC},[Th]);export{zC as i};
