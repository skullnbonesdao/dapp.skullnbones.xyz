import{Q as ce}from"./QPage.af89bb8a.js";import{Q as z,a as ee,b as Ae}from"./QInput.3311df33.js";import{au as A,J as v,b1 as g,ak as U,al as h,as as a,bx as l,ar as b,cj as C,aj as k,P as p,cm as P,cq as x,cM as w,cW as D,cN as ne,cX as pe,cL as M,cO as V,cY as J,cZ as ae,c_ as ge,co as I,cp as _e,ai as y,c$ as Pe,ah as te,V as S,d0 as Te,d1 as ve,aX as ye,d2 as $e,bs as Ie,a1 as Q,cl as H,bz as Ce,bT as Re,d3 as Y,ck as Ve}from"./index.19d53b3b.js";import{Q as ie}from"./QSpace.2878f124.js";import{u as le,Q as we,a as Be,t as be,f as X,b as ke,c as qe}from"./format_address.9838db87.js";import{Q as ue}from"./QImg.3aaaf7c3.js";import{T as R,Q as W,a as xe}from"./constants.2575a708.js";import{m as L,n as $,l as Qe,o as T}from"./uid.7eb5ced3.js";import{h as E,a as ze}from"./QSlideTransition.a8da92e8.js";import{Q as fe}from"./QCardActions.970a6edd.js";import{Q as j}from"./QBadge.824a8013.js";import{g as Se,c as he}from"./index.15dee92e.js";import{_ as Me}from"./IconFromSeed.6e3845bf.js";import{Q as de}from"./QSeparator.81f1a576.js";import"./use-prevent-scroll.977155f5.js";const Ee={key:0,class:"col q-pa-sm"},Ke=h("p",{class:"text-overline"},"Add a prize:",-1),Le={class:"col q-gutter-y-sm"},Ue={class:"row"},Ne=A({__name:"RaffleAddPrize",props:["raffle","is_admin"],setup(e){const o=v(1),i=v(""),r=v(""),t=e,n=v(),s=v(le().token_accounts.flatMap(_=>_.account.data.parsed.info.mint));n.value=s.value;function f(_,c){if(_===""){c(()=>{n.value=s.value});return}c(()=>{const d=_.toLowerCase();n.value=s.value.filter(u=>u.toLowerCase().indexOf(d)>-1)})}async function m(){var N,q,F;const{pg_raffle:_}=V(),c=new p(r.value),d=(await P().connection.getParsedTokenAccountsByOwner(x().publicKey.value,{mint:c})).value[0].pubkey,u=new p(t.raffle.publicKey.toString());let[B,Z]=p.findProgramAddressSync([w("vault"),u.toBytes()],_.value.programId);const K=await P().connection.getParsedAccountInfo(c);console.log((N=K.value)==null?void 0:N.data.parsed.info.decimals);try{const O=await _.value.methods.addPrize(new D(o.value*Math.pow(10,(q=K.value)==null?void 0:q.data.parsed.info.decimals)),new D((F=K.value)==null?void 0:F.data.parsed.info.decimals),i.value).accounts({raffle:u,creator:x().publicKey.value,from:d,prizeVault:B,prizeMint:c,systemProgram:ne.programId,tokenProgram:R,rent:pe}).rpc();console.log(O),await E(O)}catch(O){M.create({color:"red",message:`${O}`,timeout:5e3})}}return(_,c)=>e.is_admin&&e.raffle.account.prizeTokenMint.toString()==="11111111111111111111111111111111"?(g(),U("div",Ee,[Ke,h("div",Le,[a(we,{class:"full-width",filled:"",square:"",modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d),clearable:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu",label:"Select Ticket by mint",options:n.value,onFilter:f,style:{width:"250px"}},{"no-option":l(()=>[a(L,null,{default:l(()=>[a($,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"]),h("div",Ue,[a(z,{class:"col",filled:"",square:"",modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=d=>o.value=d),type:"number",label:"Count"},null,8,["modelValue"]),a(C,{filled:"",square:"",class:"col-2",color:"primary",icon:"send",onClick:c[2]||(c[2]=d=>m())})])])])):k("",!0)}}),Oe={key:0,class:"col q-pa-sm q-gutter-y-sm"},We=h("p",{class:"text-overline"},"Buy Ticket(s)",-1),De={class:"row"},Fe=A({__name:"RaffleBuyTicket",props:["raffle","is_admin","entrants"],setup(e){const o=v(),i=e;async function r(){const{pg_raffle:t,pg_whitelist:n}=V(),s=new p(i.raffle.account.ticketTokenMint.toString()),f=(await P().connection.getParsedTokenAccountsByOwner(x().publicKey.value,{mint:s})).value[0].pubkey,m=new p(i.raffle.publicKey.toString());let[_,c]=p.findProgramAddressSync([w("entrants"),m.toBytes()],t.value.programId),[d,u]=p.findProgramAddressSync([w("proceeds"),m.toBytes()],t.value.programId),[B,Z]=p.findProgramAddressSync([J.toBuffer(),w(ae)],n.value.programId);const[K,N]=p.findProgramAddressSync([x().publicKey.value.toBytes(),B.toBytes()],n.value.programId);console.log("---"),console.log(B.toString()),console.log(m.toString()),console.log(_.toString()),console.log(d.toString()),console.log(s.toString()),console.log(f.toString());try{const q=await t.value.methods.buyTickets(new D(o.value),ae,J).accounts({raffle:m,entrants:_,proceeds:d,proceedsMint:s,from:f,transferAuth:x().publicKey.value,tokenProgram:R,whitelist:B,entry:K,whitelistProgram:n.value.programId,feeAccount:ge,systemProgram:ne.programId}).rpc();console.log(q),await E(q)&&await I().send_discord_webhook(_e.TICKET_BUY,i.raffle.account.name.value,i.raffle.account.description.value,o.value)}catch(q){M.create({color:"red",message:`${q}`,timeout:5e3})}}return(t,n)=>{var s,f,m;return!e.is_admin&&!((s=e.raffle)!=null&&s.account.randomness)&&((f=e.entrants)==null?void 0:f.total)!=((m=e.entrants)==null?void 0:m.max)?(g(),U("div",Oe,[We,h("div",De,[a(z,{square:"",filled:"",outlined:"",type:"number",class:"col",label:"Amount",modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=_=>o.value=_)},null,8,["modelValue"]),a(C,{square:"",color:"primary",icon:"send",onClick:n[1]||(n[1]=_=>{r().then(()=>{console.log("done sending!")})})})])])):k("",!0)}}}),Ge={class:"row"},Ye=A({__name:"RaffleRevealWinner",props:["raffle","is_admin"],setup(e){v();const o=e;async function i(){const{pg_raffle:r,pg_whitelist:t}=V(),n=new p(o.raffle.publicKey.toString());let[s,f]=p.findProgramAddressSync([w("entrants"),n.toBytes()],r.value.programId);try{const m=await r.value.methods.revealWinners().accounts({raffle:n,entrants:s,recentBlockHashes:Pe}).rpc();console.log(m),await E(m)}catch(m){M.create({color:"red",message:`${m}`,timeout:5e3})}}return(r,t)=>{var n;return g(),U("div",Ge,[e.is_admin&&e.raffle.account.isRunning&&((n=e.raffle.account)==null?void 0:n.randomness)===null?(g(),y(C,{key:0,square:"",class:"row",color:"primary",label:"Reveal Winner",onClick:t[0]||(t[0]=s=>i())})):k("",!0)])}}}),je={class:"absolute-full flex flex-center"},He=A({__name:"RaffleStateBadge",props:["raffle","entrants"],setup(e){const o=e,i=te(()=>{var r,t;return((r=o.entrants)==null?void 0:r.total)/((t=o.entrants)==null?void 0:t.max)});return(r,t)=>{var n,s;return e.raffle.account.isClaimed?(g(),y(j,{key:0,color:"cyan",class:"text-caption text-md"},{default:l(()=>[b(" ready-to-close ")]),_:1})):e.raffle.account.isRunning&&e.raffle.account.randomness?(g(),y(j,{key:1,color:"yellow",class:"text-caption text-md text-black"},{default:l(()=>[b(" claimable ")]),_:1})):e.raffle.account.isRunning&&((n=e.entrants)==null?void 0:n.total)==((s=e.entrants)==null?void 0:s.max)?(g(),y(j,{key:2,color:"orange",class:"text-caption text-md text-black"},{default:l(()=>[b("waiting for draw")]),_:1})):e.raffle.account.isRunning?(g(),y(Be,{key:3,size:"25px",value:i.value,color:"primary"},{default:l(()=>{var f,m;return[h("div",je,[a(j,{color:"black","text-color":"primary",label:`Tickets: ${(f=e.entrants)==null?void 0:f.total}/${(m=e.entrants)==null?void 0:m.max}`},null,8,["label"])])]}),_:1},8,["value"])):k("",!0)}}}),Xe=A({__name:"RaffleClaimPrize",props:["raffle","is_admin"],setup(e){const o=e;async function i(){const{pg_raffle:r}=V(),t=new p(o.raffle.account.prizeTokenMint.toString()),n=new p(o.raffle.account.winner.toString()),s=await Se(t,n,!0,R,be.ASSOCIATED_PROGRAM_ID);if(await P().connection.getAccountInfo(s)===null){let u=new ve;u.add(he(x().publicKey.value,s,n,t)),await x().sendTransaction(u,P().connection)}const f=new p(o.raffle.publicKey.toString());let[m,_]=p.findProgramAddressSync([w("entrants"),f.toBytes()],r.value.programId),[c,d]=p.findProgramAddressSync([w("vault"),f.toBytes()],r.value.programId);console.log(o.raffle.account.name);try{const u=await r.value.methods.claimPrize(o.raffle.account.name).accounts({creator:J,raffle:f,entrants:m,prizeVault:c,prizeMint:t,to:s,tokenProgram:R}).rpc();console.log(u),await E(u)}catch(u){M.create({color:"red",message:`${u}`,timeout:5e3})}}return(r,t)=>e.raffle.account.winner!=S(Te)&&e.is_admin?(g(),y(C,{key:0,color:"primary",label:"Claim Prize",onClick:t[0]||(t[0]=n=>i())})):k("",!0)}}),Je=A({__name:"RaffleClose",props:["raffle","is_admin"],setup(e){const o=e;async function i(){const{pg_raffle:r}=V();let[t,n]=p.findProgramAddressSync([w("raffle"),w(o.raffle.account.name)],r.value.programId),[s,f]=p.findProgramAddressSync([w("entrants"),t.toBytes()],r.value.programId),[m,_]=p.findProgramAddressSync([w("proceeds"),t.toBytes()],r.value.programId),[c,d]=p.findProgramAddressSync([w("vault"),t.toBytes()],r.value.programId);try{const u=await r.value.methods.closeRaffle(o.raffle.account.name).accounts({creator:x().publicKey.value,entrants:s,raffle:t,proceeds:m,prizeVault:c,tokenProgram:R}).rpc();console.log(u),await E(u)}catch(u){M.create({color:"red",message:`${u}`,timeout:5e3})}}return(r,t)=>e.is_admin&&(!e.raffle.account.isRunning||e.raffle.account.isClaimed)?(g(),y(C,{key:0,square:"",color:"primary",onClick:t[0]||(t[0]=n=>i())},{default:l(()=>[b("Close Raffle")]),_:1})):k("",!0)}}),Ze=A({__name:"RaffleCollectProceeds",props:["raffle","is_admin"],setup(e){v(),v();const o=e;async function i(){const{pg_raffle:r}=V(),t=new p(o.raffle.account.ticketTokenMint.toString()),n=await Se(t,x().publicKey.value,!0,R,be.ASSOCIATED_PROGRAM_ID);if(await P().connection.getAccountInfo(n)===null){let c=new ve;c.add(he(x().publicKey.value,n,x().publicKey.value,t)),await x().sendTransaction(c,P().connection)}let[s,f]=p.findProgramAddressSync([w("raffle"),w(o.raffle.account.name)],r.value.programId),[m,_]=p.findProgramAddressSync([w("proceeds"),s.toBytes()],r.value.programId);try{const c=await r.value.methods.collectProceeds(o.raffle.account.name).accounts({creator:x().publicKey.value,raffle:s,proceeds:m,proceedsMint:t,to:n,tokenProgram:R}).rpc();console.log(c),await E(c)}catch(c){M.create({color:"red",message:`${c}`,timeout:5e3})}}return(r,t)=>o.is_admin&&e.raffle.account.isClaimed?(g(),y(C,{key:0,color:"primary",onClick:t[0]||(t[0]=n=>i())},{default:l(()=>[b("Collect Proceeds")]),_:1})):k("",!0)}}),ea=A({__name:"AccountsTable",props:["accounts"],setup(e){const o=v([{name:"mint",required:!0,label:"Mint",align:"left",field:"mint",field:i=>{var r;return X(((r=i.mint)==null?void 0:r.toString())??"")},sortable:!0},{name:"calories",align:"right",label:"Amount",field:i=>i.tokenAmount.uiAmount,sortable:!0}]);return(i,r)=>{var t,n;return g(),y(ke,{class:"col",title:"Accounts",rows:(n=(t=e.accounts)==null?void 0:t.value)==null?void 0:n.map(s=>s.account.data.parsed.info),columns:o.value,"row-key":"mint","hide-bottom":"",flat:""},null,8,["rows","columns"])}}}),aa={key:0,class:"q-pa-sm"},ta={class:"row"},na=A({__name:"RaffleEditImageUrl",props:["raffle","is_admin"],setup(e){v(1);const o=v("");v();const i=e;async function r(){const{pg_raffle:t}=V(),n=new p(i.raffle.publicKey.toString());try{const s=await t.value.methods.editUrl(o.value).accounts({raffle:n,creator:x().publicKey.value}).rpc();console.log(s),await E(s)}catch(s){M.create({color:"red",message:`${s}`,timeout:5e3})}}return(t,n)=>e.is_admin&&e.raffle.account.prizeTokenMint.toString()!="11111111111111111111111111111111"?(g(),U("div",aa,[h("div",ta,[a(z,{square:"",filled:"",class:"col",outlined:"",maxlength:"100",modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value=s),type:"text",label:"Image-URL"},null,8,["modelValue"]),a(C,{square:"",icon:"send",color:"primary",onClick:n[1]||(n[1]=s=>r())})])])):k("",!0)}}),la={class:"text-h5 q-mt-sm q-mb-xs"},ra={class:"text-caption text-grey"},oa=A({__name:"RaffleCard",props:["raffle","is_admin"],setup(e){const o=e,i=v(),r=v(),t=v(!1);async function n(){const{pg_raffle:f}=V();i.value=await f.value.account.entrants.fetch(o.raffle.account.entrants),r.value=await P().connection.getParsedTokenAccountsByOwner(o.raffle.publicKey,{programId:R})}ye(async()=>{await n()});const{_updateCount:s}=$e(I());return Ie(s,async()=>{await n()}),(f,m)=>(g(),y(xe,{square:"",flat:""},{default:l(()=>[e.raffle.account.url?(g(),y(ue,{key:0,height:"200px",src:e.raffle.account.url},null,8,["src"])):(g(),y(ue,{key:1,height:"200px",src:"snb_icon.svg"})),a(W,null,{default:l(()=>[a(He,{raffle:e.raffle,entrants:i.value},null,8,["raffle","entrants"]),h("div",la,Q(e.raffle.account.name),1),h("div",ra,Q(e.raffle.account.description),1)]),_:1}),a(W,null,{default:l(()=>[a(Qe,null,{default:l(()=>[a(L,{clickable:""},{default:l(()=>[a($,{avatar:""},{default:l(()=>[a(H,{color:"primary",name:"functions"})]),_:1}),a($,null,{default:l(()=>[a(T,{class:"text-h6"},{default:l(()=>{var _;return[b(Q((_=i.value)==null?void 0:_.max),1)]}),_:1}),a(T,{class:"text-orange-9",caption:""},{default:l(()=>[b("Total tickets")]),_:1})]),_:1})]),_:1}),a(L,{clickable:""},{default:l(()=>[a($,{avatar:""},{default:l(()=>[a(H,{color:"red",name:"paid"})]),_:1}),a($,null,{default:l(()=>[a(T,{class:"text-h6"},{default:l(()=>[b(Q((e.raffle.account.ticketPrice.toNumber()*Math.pow(10,-e.raffle.account.ticketDecimals)).toFixed(2)),1)]),_:1}),a(T,{class:"text-orange-9",caption:""},{default:l(()=>[b("Price per ticket")]),_:1})]),_:1})]),_:1}),a(L,{clickable:""},{default:l(()=>[a($,{avatar:""},{default:l(()=>[a(H,{color:"amber",name:"local_movies"})]),_:1}),a($,null,{default:l(()=>[a(T,{class:"text-overline"},{default:l(()=>[b(Q(S(X)(e.raffle.account.ticketTokenMint.toString())),1)]),_:1}),a(T,{class:"text-orange-9",caption:""},{default:l(()=>[b("Ticket-Mint")]),_:1}),a(T,{class:"text-overline"},{default:l(()=>[b(Q(S(X)(e.raffle.account.prizeTokenMint.toString())),1)]),_:1}),a(T,{class:"text-orange-9",caption:""},{default:l(()=>[b("Prize-Mint")]),_:1})]),_:1})]),_:1}),e.raffle.account.randomness!=null?(g(),y(L,{key:0,clickable:""},{default:l(()=>[a($,{avatar:""},{default:l(()=>{var _,c;return[a(Me,{style:{width:"100px"},seed:(c=(_=e.raffle.account)==null?void 0:_.randomness)==null?void 0:c.toString()},null,8,["seed"])]}),_:1}),a($,null,{default:l(()=>[a(T,{class:"text-h6",l:""},{default:l(()=>[b("Winner")]),_:1}),a(T,{class:"text-orange-9",caption:""},{default:l(()=>[b(Q(S(X)(e.raffle.account.winner.toString())),1)]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1}),a(C,{class:"full-width",icon:t.value?"expand_less":" expand_more",onClick:m[0]||(m[0]=_=>t.value=!t.value)},null,8,["icon"]),a(ze,null,{default:l(()=>[Ce(a(ea,{accounts:r.value},null,8,["accounts"]),[[Re,t.value]])]),_:1}),a(Ne,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"]),a(na,{class:"q-mx-sm",raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"]),a(fe,{class:"row q-gutter-y-sm justify-center q-mx-sm"},{default:l(()=>[a(Ye,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"]),a(Xe,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"]),a(Ze,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"]),a(Je,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"])]),_:1}),a(fe,null,{default:l(()=>[a(Fe,{raffle:e.raffle,is_admin:e.is_admin,entrants:i.value},null,8,["raffle","is_admin","entrants"])]),_:1})]),_:1}))}}),sa={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},me=A({__name:"RaffleGrid",props:{is_admin:{type:Boolean,default:!1},raffles:{type:[],default:[]},count:{type:Number,default:0}},setup(e){const o=e,i=te(()=>Y().screen.gt.xs?"example-masonry-table-grid example-masonry-table-grid--"+(Y().screen.gt.sm?"3":"2"):null),r=te(()=>Y().screen.gt.xs?Y().screen.gt.sm?[3,6,9]:[3,6]:[3]),t=v();return(n,s)=>(g(),y(ke,{grid:"","card-container-class":i.value,rows:o.raffles,"row-key":"name",filter:n.filter,"hide-header":"",pagination:t.value,"onUpdate:pagination":s[1]||(s[1]=f=>t.value=f),"rows-per-page-options":r.value},{"top-right":l(()=>[b(Q()+" ",1),a(z,{borderless:"",dense:"",debounce:"300",modelValue:n.filter,"onUpdate:modelValue":s[0]||(s[0]=f=>n.filter=f),placeholder:"Search"},{append:l(()=>[a(H,{name:"search"})]),_:1},8,["modelValue"])]),item:l(f=>[h("div",sa,[a(oa,{is_admin:e.is_admin,raffle:f.row},null,8,["is_admin","raffle"])])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"]))}}),ca=h("p",{class:"text-h5"},"Raffle",-1),ia=h("p",{class:"text-h5"},"Tickets",-1),ua={class:"row justify-center"},fa=A({__name:"RaffleCreateRaffle",setup(e){const o=v(),i=v(),r=v(),t=v(),n=v();async function s(){var oe,se;const{pg_raffle:c,pg_whitelist:d}=V();let[u,B]=p.findProgramAddressSync([w("raffle"),w(o.value)],c.value.programId),[Z,K]=p.findProgramAddressSync([w("entrants"),u.toBytes()],c.value.programId),[N,q]=p.findProgramAddressSync([w("proceeds"),u.toBytes()],c.value.programId),[F,O]=p.findProgramAddressSync([J.toBuffer(),w(ae)],d.value.programId);const re=await P().connection.getParsedAccountInfo(new p(n.value));try{const G=await c.value.methods.createRaffle(o.value,i.value,new D(t.value*Math.pow(10,(oe=re.value)==null?void 0:oe.data.parsed.info.decimals)),new D((se=re.value)==null?void 0:se.data.parsed.info.decimals),r.value).accounts({raffle:u,entrants:Z,creator:x().publicKey.value,proceeds:N,proceedsMint:new p(n.value),tokenProgram:R,rent:pe,whitelist:F,feeAccount:ge,systemProgram:ne.programId}).rpc();console.log(G),await E(G)&&await I().send_discord_webhook(_e.RAFFLE_CREATE,o.value,i.value,r.value,t.value)}catch(G){M.create({color:"red",message:`${G}`,timeout:5e3})}}const f=v(),m=v(le().token_accounts.flatMap(c=>c.account.data.parsed.info.mint));f.value=m.value;function _(c,d){if(c===""){d(()=>{f.value=m.value});return}d(()=>{const u=c.toLowerCase();f.value=m.value.filter(B=>B.toLowerCase().indexOf(u)>-1)})}return(c,d)=>(g(),y(xe,{square:"",flat:"",class:"col q-pa-sm"},{default:l(()=>[a(W,{class:"q-gutter-y-md"},{default:l(()=>[ca,a(z,{filled:"",square:"",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=u=>o.value=u),type:"text",label:"Name"},null,8,["modelValue"]),a(z,{filled:"",square:"",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=u=>i.value=u),type:"text",label:"Description"},null,8,["modelValue"])]),_:1}),a(de),a(W,{class:"q-gutter-y-md"},{default:l(()=>[ia,h("div",ua,[a(we,{class:"col",filled:"",square:"",modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=u=>n.value=u),clearable:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu",label:"Select Ticket by mint",options:f.value,onFilter:_,style:{width:"250px"}},{"no-option":l(()=>[a(L,null,{default:l(()=>[a($,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a(z,{filled:"",square:"",modelValue:r.value,"onUpdate:modelValue":d[3]||(d[3]=u=>r.value=u),type:"number",label:"Tickets"},null,8,["modelValue"]),a(z,{filled:"",square:"",type:"number",modelValue:t.value,"onUpdate:modelValue":d[4]||(d[4]=u=>t.value=u),label:"Ticket Price"},null,8,["modelValue"])]),_:1}),a(de),a(W,null,{default:l(()=>[a(C,{class:"row",color:"primary",onClick:d[5]||(d[5]=u=>s())},{default:l(()=>[b("Create")]),_:1})]),_:1})]),_:1}))}}),da={class:"row shadow-2"},ma={key:0,class:"row"},pa={key:1,class:"q-mx-md q-mt-md"},Ca=A({__name:"RafflePage",setup(e){const o=v("raffle");return ye(async()=>{await I().update_raffles(),await le().update_accounts()}),(i,r)=>S(x)().publicKey.value?(g(),y(ce,{key:1,class:"col"},{default:l(()=>[h("div",da,[a(Ae,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=t=>o.value=t),"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"col"},{default:l(()=>[a(ee,{name:"raffle",label:"Raffle"}),S(P)().is_admin?(g(),y(ee,{key:0,name:"create",label:"Create"})):k("",!0),S(P)().is_admin?(g(),y(ee,{key:1,name:"manage",label:"Manage"})):k("",!0)]),_:1},8,["modelValue"]),a(C,{flat:"",icon:"refresh",onClick:r[1]||(r[1]=t=>S(I)().update_raffles().then(()=>{}))})]),S(I)().is_loading?(g(),U("div",ma,[a(ie),a(qe,{class:"row",color:"primary",size:"10rem"}),a(ie)])):k("",!0),S(I)().raffles&&!S(I)().is_loading?(g(),U("div",pa,[o.value==="raffle"?(g(),y(me,{key:0,raffles:S(I)().get_running_raffles,is_admin:!1},null,8,["raffles"])):k("",!0),o.value==="create"?(g(),y(fa,{key:1})):k("",!0),o.value==="manage"?(g(),y(me,{key:2,raffles:S(I)().raffles,is_admin:S(P)().is_admin},null,8,["raffles","is_admin"])):k("",!0)])):k("",!0)]),_:1})):(g(),y(ce,{key:0,class:"row items-center justify-center"},{default:l(()=>[a(S(Ve),{dark:""})]),_:1}))}});export{Ca as default};
