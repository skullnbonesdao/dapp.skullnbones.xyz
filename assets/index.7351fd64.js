import{dg as V,bX as j,ek as ug,bW as Nl,di as Bl,dd as lg,cX as lt,de as df,el as Cx,df as Ix,dh as Nx,bY as Bx}from"./index.fd62d5e7.js";import{b as Rx,l as Ox,e as Dx,s as Ux}from"./TokenManagePage.14bd90f5.js";import{b as is,aD as Io,aE as hg,aC as pf,aF as Lx,aB as dg,aG as Qr,aH as Fx,a as $x,aA as jx}from"./index.b4580e69.js";import{s as Rl}from"./sha256.9b652e63.js";function Kx(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Ol={},Vc={},Dl={},Ul={exports:{}},pg=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},qx=pg,ss=Object.prototype.toString;function Ll(t){return Array.isArray(t)}function rl(t){return typeof t>"u"}function Hx(t){return t!==null&&!rl(t)&&t.constructor!==null&&!rl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function gg(t){return ss.call(t)==="[object ArrayBuffer]"}function zx(t){return ss.call(t)==="[object FormData]"}function Gx(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&gg(t.buffer),e}function Vx(t){return typeof t=="string"}function Jx(t){return typeof t=="number"}function yg(t){return t!==null&&typeof t=="object"}function Ic(t){if(ss.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Wx(t){return ss.call(t)==="[object Date]"}function Yx(t){return ss.call(t)==="[object File]"}function Zx(t){return ss.call(t)==="[object Blob]"}function mg(t){return ss.call(t)==="[object Function]"}function Xx(t){return yg(t)&&mg(t.pipe)}function Qx(t){return ss.call(t)==="[object URLSearchParams]"}function eb(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function tb(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Fl(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ll(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function nl(){var t={};function e(i,s){Ic(t[s])&&Ic(i)?t[s]=nl(t[s],i):Ic(i)?t[s]=nl({},i):Ll(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Fl(arguments[r],e);return t}function rb(t,e,r){return Fl(e,function(i,s){r&&typeof i=="function"?t[s]=qx(i,r):t[s]=i}),t}function nb(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var nn={isArray:Ll,isArrayBuffer:gg,isBuffer:Hx,isFormData:zx,isArrayBufferView:Gx,isString:Vx,isNumber:Jx,isObject:yg,isPlainObject:Ic,isUndefined:rl,isDate:Wx,isFile:Yx,isBlob:Zx,isFunction:mg,isStream:Xx,isURLSearchParams:Qx,isStandardBrowserEnv:tb,forEach:Fl,merge:nl,extend:rb,trim:eb,stripBOM:nb},Js=nn;function z0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var xg=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Js.isURLSearchParams(r))i=r.toString();else{var s=[];Js.forEach(r,function(u,h){u===null||typeof u>"u"||(Js.isArray(u)?h=h+"[]":u=[u],Js.forEach(u,function(m){Js.isDate(m)?m=m.toISOString():Js.isObject(m)&&(m=JSON.stringify(m)),s.push(z0(h)+"="+z0(m))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},ib=nn;function gf(){this.handlers=[]}gf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};gf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};gf.prototype.forEach=function(e){ib.forEach(this.handlers,function(n){n!==null&&e(n)})};var sb=gf,ob=nn,ab=function(e,r){ob.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},bg=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},cb=bg,vg=function(e,r,n,i,s){var o=new Error(e);return cb(o,r,n,i,s)},fb=vg,ub=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(fb("Request failed with status code "+n.status,n.config,null,n.request,n))},hc=nn,lb=hc.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,c){var u=[];u.push(r+"="+encodeURIComponent(n)),hc.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),hc.isString(s)&&u.push("path="+s),hc.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),hb=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},db=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},pb=hb,gb=db,yb=function(e,r){return e&&!pb(r)?gb(e,r):r},lu=nn,mb=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],xb=function(e){var r={},n,i,s;return e&&lu.forEach(e.split(`
`),function(c){if(s=c.indexOf(":"),n=lu.trim(c.substr(0,s)).toLowerCase(),i=lu.trim(c.substr(s+1)),n){if(r[n]&&mb.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},G0=nn,bb=G0.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var c=G0.isString(o)?i(o):o;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}();function $l(t){this.message=t}$l.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};$l.prototype.__CANCEL__=!0;var yf=$l,dc=nn,vb=ub,wb=lb,_b=xg,Eb=yb,Ab=xb,Sb=bb,hu=vg,Tb=xf,kb=yf,V0=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,c=e.responseType,u;function h(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}dc.isFormData(s)&&delete o["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(m+":"+_)}var S=Eb(e.baseURL,e.url);p.open(e.method.toUpperCase(),_b(S,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function B(){if(!!p){var A="getAllResponseHeaders"in p?Ab(p.getAllResponseHeaders()):null,P=!c||c==="text"||c==="json"?p.responseText:p.response,R={data:P,status:p.status,statusText:p.statusText,headers:A,config:e,request:p};vb(function(q){n(q),h()},function(q){i(q),h()},R),p=null}}if("onloadend"in p?p.onloadend=B:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(B)},p.onabort=function(){!p||(i(hu("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){i(hu("Network Error",e,null,p)),p=null},p.ontimeout=function(){var P=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",R=e.transitional||Tb.transitional;e.timeoutErrorMessage&&(P=e.timeoutErrorMessage),i(hu(P,e,R.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},dc.isStandardBrowserEnv()){var T=(e.withCredentials||Sb(S))&&e.xsrfCookieName?wb.read(e.xsrfCookieName):void 0;T&&(o[e.xsrfHeaderName]=T)}"setRequestHeader"in p&&dc.forEach(o,function(P,R){typeof s>"u"&&R.toLowerCase()==="content-type"?delete o[R]:p.setRequestHeader(R,P)}),dc.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),c&&c!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(A){!p||(i(!A||A&&A.type?new kb("canceled"):A),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),s||(s=null),p.send(s)})},Ar=nn,J0=ab,Mb=bg,Pb={"Content-Type":"application/x-www-form-urlencoded"};function W0(t,e){!Ar.isUndefined(t)&&Ar.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Cb(){var t;return(typeof XMLHttpRequest<"u"||typeof V.process<"u"&&Object.prototype.toString.call(V.process)==="[object process]")&&(t=V0),t}function Ib(t,e,r){if(Ar.isString(t))try{return(e||JSON.parse)(t),Ar.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var mf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Cb(),transformRequest:[function(e,r){return J0(r,"Accept"),J0(r,"Content-Type"),Ar.isFormData(e)||Ar.isArrayBuffer(e)||Ar.isBuffer(e)||Ar.isStream(e)||Ar.isFile(e)||Ar.isBlob(e)?e:Ar.isArrayBufferView(e)?e.buffer:Ar.isURLSearchParams(e)?(W0(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ar.isObject(e)||r&&r["Content-Type"]==="application/json"?(W0(r,"application/json"),Ib(e)):e}],transformResponse:[function(e){var r=this.transitional||mf.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Ar.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Mb(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ar.forEach(["delete","get","head"],function(e){mf.headers[e]={}});Ar.forEach(["post","put","patch"],function(e){mf.headers[e]=Ar.merge(Pb)});var xf=mf,Nb=nn,Bb=xf,Rb=function(e,r,n){var i=this||Bb;return Nb.forEach(n,function(o){e=o.call(i,e,r)}),e},wg=function(e){return!!(e&&e.__CANCEL__)},Y0=nn,du=Rb,Ob=wg,Db=xf,Ub=yf;function pu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ub("canceled")}var Lb=function(e){pu(e),e.headers=e.headers||{},e.data=du.call(e,e.data,e.headers,e.transformRequest),e.headers=Y0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Y0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Db.adapter;return r(e).then(function(i){return pu(e),i.data=du.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Ob(i)||(pu(e),i&&i.response&&(i.response.data=du.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},ln=nn,_g=function(e,r){r=r||{};var n={};function i(p,m){return ln.isPlainObject(p)&&ln.isPlainObject(m)?ln.merge(p,m):ln.isPlainObject(m)?ln.merge({},m):ln.isArray(m)?m.slice():m}function s(p){if(ln.isUndefined(r[p])){if(!ln.isUndefined(e[p]))return i(void 0,e[p])}else return i(e[p],r[p])}function o(p){if(!ln.isUndefined(r[p]))return i(void 0,r[p])}function c(p){if(ln.isUndefined(r[p])){if(!ln.isUndefined(e[p]))return i(void 0,e[p])}else return i(void 0,r[p])}function u(p){if(p in r)return i(e[p],r[p]);if(p in e)return i(void 0,e[p])}var h={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u};return ln.forEach(Object.keys(e).concat(Object.keys(r)),function(m){var _=h[m]||s,S=_(m);ln.isUndefined(S)&&_!==u||(n[m]=S)}),n},Eg={version:"0.25.0"},Fb=Eg.version,jl={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){jl[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Z0={};jl.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Fb+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,c){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Z0[o]&&(Z0[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,c):!0}};function $b(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var c=t[s],u=c===void 0||o(c,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}var jb={assertOptions:$b,validators:jl},Ag=nn,Kb=xg,X0=sb,Q0=Lb,bf=_g,Sg=jb,Ws=Sg.validators;function Oa(t){this.defaults=t,this.interceptors={request:new X0,response:new X0}}Oa.prototype.request=function(e,r){if(typeof e=="string"?(r=r||{},r.url=e):r=e||{},!r.url)throw new Error("Provided config url is not valid");r=bf(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Sg.assertOptions(n,{silentJSONParsing:Ws.transitional(Ws.boolean),forcedJSONParsing:Ws.transitional(Ws.boolean),clarifyTimeoutError:Ws.transitional(Ws.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(s=s&&S.synchronous,i.unshift(S.fulfilled,S.rejected))});var o=[];this.interceptors.response.forEach(function(S){o.push(S.fulfilled,S.rejected)});var c;if(!s){var u=[Q0,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(o),c=Promise.resolve(r);u.length;)c=c.then(u.shift(),u.shift());return c}for(var h=r;i.length;){var p=i.shift(),m=i.shift();try{h=p(h)}catch(_){m(_);break}}try{c=Q0(h)}catch(_){return Promise.reject(_)}for(;o.length;)c=c.then(o.shift(),o.shift());return c};Oa.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=bf(this.defaults,e),Kb(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ag.forEach(["delete","get","head","options"],function(e){Oa.prototype[e]=function(r,n){return this.request(bf(n||{},{method:e,url:r,data:(n||{}).data}))}});Ag.forEach(["post","put","patch"],function(e){Oa.prototype[e]=function(r,n,i){return this.request(bf(i||{},{method:e,url:r,data:n}))}});var qb=Oa,Hb=yf;function wo(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new Hb(i),e(r.reason))})}wo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};wo.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};wo.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};wo.source=function(){var e,r=new wo(function(i){e=i});return{token:r,cancel:e}};var zb=wo,Gb=function(e){return function(n){return e.apply(null,n)}},Vb=nn,Jb=function(e){return Vb.isObject(e)&&e.isAxiosError===!0},ed=nn,Wb=pg,Nc=qb,Yb=_g,Zb=xf;function Tg(t){var e=new Nc(t),r=Wb(Nc.prototype.request,e);return ed.extend(r,Nc.prototype,e),ed.extend(r,e),r.create=function(i){return Tg(Yb(t,i))},r}var yi=Tg(Zb);yi.Axios=Nc;yi.Cancel=yf;yi.CancelToken=zb;yi.isCancel=wg;yi.VERSION=Eg.version;yi.all=function(e){return Promise.all(e)};yi.spread=Gb;yi.isAxiosError=Jb;Ul.exports=yi;Ul.exports.default=yi;var Kl=Ul.exports,Xb=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dl,"__esModule",{value:!0});const Qb=Xb(Kl);class ev{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=Qb.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response:   ${r.config.url} - ${r.status}`),r))),e}}Dl.default=ev;var ql={},vf={},Da={},Hn={},Ua={},Vt={},tv=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rv=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nv=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tv(e,t,r);return rv(e,t),e};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.b64UrlDecode=Vt.b64UrlEncode=Vt.bufferTob64Url=Vt.bufferTob64=Vt.b64UrlToBuffer=Vt.stringToB64Url=Vt.stringToBuffer=Vt.bufferToString=Vt.b64UrlToString=Vt.concatBuffers=void 0;const kg=nv(ug);function iv(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Vt.concatBuffers=iv;function sv(t){let e=Cg(t);return Mg(e)}Vt.b64UrlToString=sv;function Mg(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Vt.bufferToString=Mg;function Pg(t){return new TextEncoder().encode(t)}Vt.stringToBuffer=Pg;function ov(t){return Ng(Pg(t))}Vt.stringToB64Url=ov;function Cg(t){return new Uint8Array(kg.toByteArray(Rg(t)))}Vt.b64UrlToBuffer=Cg;function Ig(t){return kg.fromByteArray(new Uint8Array(t))}Vt.bufferTob64=Ig;function Ng(t){return Bg(Ig(t))}Vt.bufferTob64Url=Ng;function Bg(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Vt.b64UrlEncode=Bg;function Rg(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Vt.b64UrlDecode=Rg;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.isBrowser=dr.arraybufferEqual=dr.byteArrayToLong=dr.longTo32ByteArray=dr.longTo16ByteArray=dr.shortTo2ByteArray=dr.longTo8ByteArray=void 0;function av(t){const e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}dr.longTo8ByteArray=av;function cv(t){if(t>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}dr.shortTo2ByteArray=cv;function fv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return e}dr.longTo16ByteArray=fv;function uv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}dr.longTo32ByteArray=uv;function lv(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}dr.byteArrayToLong=lv;function hv(t,e){const r=t.buffer,n=e.buffer;if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;const i=new DataView(r),s=new DataView(n);let o=r.byteLength;for(;o--;)if(i.getUint8(o)!==s.getUint8(o))return!1;return!0}dr.arraybufferEqual=hv;dr.isBrowser=typeof window<"u"&&typeof window.document<"u";var Mi={},Ns={},_o={},Hl={},os=Nl(Rx);Object.defineProperty(Hl,"__esModule",{value:!0});const dv=os;class pv{BigNum;constructor(){this.BigNum=(e,r)=>{let n=dv.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.comparedTo(i)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isLessThan(i)}isGreaterThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isGreaterThan(i)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}Hl.default=pv;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});class gv{METHOD_GET="GET";METHOD_POST="POST";config;constructor(e){this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){return await this.request(e,{...r,method:this.METHOD_GET})}async post(e,r,n){var s;const i=new Headers((n==null?void 0:n.headers)||{});return(s=i.get("content-type"))!=null&&s.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof r!="string"?JSON.stringify(r):r,headers:i})}async request(e,r){var m;const n=new Headers((r==null?void 0:r.headers)||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=r==null?void 0:r.responseType;r==null||delete r.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let o=await fetch(`${i}/${e}`,{...r||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${o.url} - ${o.status}`);const c=o.headers.get("content-type"),u=(m=c==null?void 0:c.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i))==null?void 0:m[1],h=o,p=async()=>{if(u)try{h.data=new TextDecoder(u).decode(await o.arrayBuffer())}catch{h.data=await o.text()}else h.data=await o.text()};if(s==="arraybuffer")h.data=await o.arrayBuffer();else if(s==="text")await p();else if(s==="webstream")h.data=yv(o.body);else try{let _=await o.clone().json();typeof _!="object"?await p():h.data=await o.json(),_=null}catch{await p()}return h}}zl.default=gv;const yv=t=>{const e=t;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=mv(t),e):t},mv=function(t){return async function*(){const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)return;yield i}}finally{r.releaseLock()}}};var Gl={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.b64UrlDecode=Nt.b64UrlEncode=Nt.bufferTob64Url=Nt.bufferTob64=Nt.b64UrlToBuffer=Nt.stringToB64Url=Nt.stringToBuffer=Nt.bufferToString=Nt.b64UrlToString=Nt.concatBuffers=void 0;const Og=ug;function xv(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Nt.concatBuffers=xv;function bv(t){let e=Lg(t);return Dg(e)}Nt.b64UrlToString=bv;function Dg(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Nt.bufferToString=Dg;function Ug(t){return new TextEncoder().encode(t)}Nt.stringToBuffer=Ug;function vv(t){return $g(Ug(t))}Nt.stringToB64Url=vv;function Lg(t){return new Uint8Array(Og.toByteArray(Kg(t)))}Nt.b64UrlToBuffer=Lg;function Fg(t){return Og.fromByteArray(new Uint8Array(t))}Nt.bufferTob64=Fg;function $g(t){return jg(Fg(t))}Nt.bufferTob64Url=$g;function jg(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Nt.b64UrlEncode=jg;function Kg(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Nt.b64UrlDecode=Kg;Object.defineProperty(Gl,"__esModule",{value:!0});const Fi=Nt;class wv{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),o=await this.driver.digest("SHA-256",r),c=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),u=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),h=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-o.byteLength-2},s,n,r);return c||u||h}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Fi.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Fi.stringToBuffer(n):Fi.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=new Uint8Array(16);crypto.getRandomValues(o);const c=await this.driver.encrypt({name:"AES-CBC",iv:o},s,e);return Fi.concatBuffers([o,c])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Fi.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Fi.stringToBuffer(n):Fi.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=e.slice(0,16),c=await this.driver.decrypt({name:"AES-CBC",iv:o},s,e.slice(16));return Fi.concatBuffers([c])}}Gl.default=wv;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});class _v{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}Vl.default=_v;var Jl={},as={};Object.defineProperty(as,"__esModule",{value:!0});as.getError=void 0;class Ev extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}as.default=Ev;function Av(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}as.getError=Av;var Bs={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});const hn=_o;async function qg(t){if(Array.isArray(t)){const n=hn.default.utils.concatBuffers([hn.default.utils.stringToBuffer("list"),hn.default.utils.stringToBuffer(t.length.toString())]);return await Hg(t,await hn.default.crypto.hash(n,"SHA-384"))}const e=hn.default.utils.concatBuffers([hn.default.utils.stringToBuffer("blob"),hn.default.utils.stringToBuffer(t.byteLength.toString())]),r=hn.default.utils.concatBuffers([await hn.default.crypto.hash(e,"SHA-384"),await hn.default.crypto.hash(t,"SHA-384")]);return await hn.default.crypto.hash(r,"SHA-384")}wf.default=qg;async function Hg(t,e){if(t.length<1)return e;const r=hn.default.utils.concatBuffers([e,await qg(t[0])]),n=await hn.default.crypto.hash(r,"SHA-384");return await Hg(t.slice(1),n)}var Wl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=_o,r=Nt;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(U){let K=[],Z=U,Q=0;for(;Z.byteLength>=t.MAX_CHUNK_SIZE;){let ue=t.MAX_CHUNK_SIZE,be=Z.byteLength-t.MAX_CHUNK_SIZE;be>0&&be<t.MIN_CHUNK_SIZE&&(ue=Math.ceil(Z.byteLength/2));const ce=Z.slice(0,ue),te=await e.default.crypto.hash(ce);Q+=ce.byteLength,K.push({dataHash:te,minByteRange:Q-ce.byteLength,maxByteRange:Q}),Z=Z.slice(ue)}return K.push({dataHash:await e.default.crypto.hash(Z),minByteRange:Q,maxByteRange:Q+Z.byteLength}),K}t.chunkData=s;async function o(U){return Promise.all(U.map(async({dataHash:K,minByteRange:Z,maxByteRange:Q})=>({type:"leaf",id:await T(await Promise.all([T(K),T(A(Q))])),dataHash:K,minByteRange:Z,maxByteRange:Q})))}t.generateLeaves=o;async function c(U){return(await u(U)).id}t.computeRootHash=c;async function u(U){return await p(await o(await s(U)))}t.generateTree=u;async function h(U){const K=await s(U),Z=await o(K),Q=await p(Z),ue=await m(Q),be=K.slice(-1)[0];return be.maxByteRange-be.minByteRange===0&&(K.splice(K.length-1,1),ue.splice(ue.length-1,1)),{data_root:Q.id,chunks:K,proofs:ue}}t.generateTransactionChunks=h;async function p(U,K=0){if(U.length<2)return U[0];const Z=[];for(let Q=0;Q<U.length;Q+=2)Z.push(await B(U[Q],U[Q+1]));return p(Z,K+1)}t.buildLayers=p;function m(U){const K=_(U);return Array.isArray(K)?S(K):[K]}t.generateProofs=m;function _(U,K=new Uint8Array,Z=0){if(U.type=="leaf")return{offset:U.maxByteRange-1,proof:(0,r.concatBuffers)([K,U.dataHash,A(U.maxByteRange)])};if(U.type=="branch"){const Q=(0,r.concatBuffers)([K,U.leftChild.id,U.rightChild.id,A(U.byteRange)]);return[_(U.leftChild,Q,Z+1),_(U.rightChild,Q,Z+1)]}throw new Error("Unexpected node type")}function S(U){const K=[];return U.forEach(Z=>{Array.isArray(Z)?K.push(...S(Z)):K.push(Z)}),K}t.arrayFlatten=S;async function B(U,K){return K?{type:"branch",id:await T([await T(U.id),await T(K.id),await T(A(U.maxByteRange))]),byteRange:U.maxByteRange,maxByteRange:K.maxByteRange,leftChild:U,rightChild:K}:U}async function T(U){return Array.isArray(U)&&(U=e.default.utils.concatBuffers(U)),new Uint8Array(await e.default.crypto.hash(U))}function A(U){const K=new Uint8Array(n);for(var Z=K.length-1;Z>=0;Z--){var Q=U%256;K[Z]=Q,U=(U-Q)/256}return K}t.intToBuffer=A;function P(U){let K=0;for(var Z=0;Z<U.length;Z++)K*=256,K+=U[Z];return K}t.bufferToInt=P;const R=(U,K)=>U.every((Z,Q)=>K[Q]===Z);t.arrayCompare=R;async function F(U,K,Z,Q,ue){if(Q<=0)return!1;if(K>=Q)return F(U,0,Q-1,Q,ue);if(K<0)return F(U,0,0,Q,ue);if(ue.length==i+n){const y=ue.slice(0,i),v=ue.slice(y.length,y.length+n),w=await T([await T(y),await T(v)]);return(0,t.arrayCompare)(U,w)?{offset:Q-1,leftBound:Z,rightBound:Q,chunkSize:Q-Z}:!1}const be=ue.slice(0,i),ce=ue.slice(be.length,be.length+i),te=ue.slice(be.length+ce.length,be.length+ce.length+n),b=P(te),a=ue.slice(be.length+ce.length+te.length),l=await T([await T(be),await T(ce),await T(te)]);return(0,t.arrayCompare)(U,l)?K<b?await F(be,K,Z,Math.min(Q,b),a):await F(ce,K,Math.max(Z,b),Q,a):!1}t.validatePath=F;async function q(U,K=""){if(U.byteLength<1)return K;const Z=U.slice(0,i),Q=U.slice(Z.length,Z.length+i),ue=U.slice(Z.length+Q.length,Z.length+Q.length+n),be=P(ue),ce=U.slice(Z.length+Q.length+ue.length),te=await T([await T(Z),await T(Q),await T(ue)]),b=`${K}
${JSON.stringify(V.Buffer.from(Z))},${JSON.stringify(V.Buffer.from(Q))},${be} => ${JSON.stringify(te)}`;return q(ce,b)}t.debug=q})(Wl);Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Tag=void 0;const mr=Nt,Sv=wf,Tv=Wl;class zg{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?mr.bufferToString(this[e]):r&&r.decode&&!r.string?this[e]:mr.bufferTob64Url(this[e]);if(this[e]instanceof Array){if((r==null?void 0:r.decode)!==void 0||(r==null?void 0:r.string)!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?mr.b64UrlToString(this[e]):mr.b64UrlToBuffer(this[e]):this[e]}}class il extends zg{name;value;constructor(e,r,n=!1){super(),this.name=e,this.value=r}}Bs.Tag=il;class kv extends zg{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(e={}){super(),Object.assign(this,e),typeof this.data=="string"&&(this.data=mr.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(r=>new il(r.name,r.value)))}addTag(e,r){this.tags.push(new il(mr.stringToB64Url(e),mr.stringToB64Url(r)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:mr.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:r,reward:n,tags:i,signature:s}){this.id=e,this.owner=r,n&&(this.reward=n),i&&(this.tags=i),this.signature=s}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,Tv.generateTransactionChunks)(e),this.data_root=mr.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:mr.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:mr.bufferTob64Url(r.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>mr.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return mr.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),mr.stringToBuffer(this.quantity),mr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const r=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,Sv.default)([mr.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),mr.stringToBuffer(this.quantity),mr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),r,mr.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}Bs.default=kv;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.TransactionUploader=void 0;const td=Bs,Mv=Nt,gu=as,Pv=Wl,rd=1,Cv=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],nd=1e3*40;class Yl{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,r){if(this.api=e,!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.data=r.data,this.transaction=new td.default(Object.assign({},r,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+nd-Date.now(),nd);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(o=>setTimeout(o,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,Pv.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Mv.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(o=>(console.error(o.message),{status:-1,data:{error:o.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,gu.getError)(s),Cv.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,r,n){if(!r||typeof r.chunkIndex!="number"||typeof r.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new td.default(r.transaction);i.chunks||await i.prepareChunks(n);const s=new Yl(e,i);if(s.chunkIndex=r.chunkIndex,s.lastRequestTimeEnd=r.lastRequestTimeEnd,s.lastResponseError=r.lastResponseError,s.lastResponseStatus=r.lastResponseStatus,s.txPosted=r.txPosted,s.data=n,s.transaction.data_root!==r.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=rd){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=rd;return}throw this.lastResponseError=(0,gu.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=(0,gu.getError)(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}_f.TransactionUploader=Yl;Object.defineProperty(Jl,"__esModule",{value:!0});const yu=as,_i=Bs,Go=Nt,mu=_f;class Iv{api;crypto;chunks;constructor(e,r,n){this.api=e,this.crypto=r,this.chunks=n}async getTransactionAnchor(){const e=await this.api.get("tx_anchor");if(!e.data.match(/^[a-z0-9_-]{43,}/i)||!e.ok)throw new Error(`Could not getTransactionAnchor. Received: ${e.data}. Status: ${e.status}, ${e.statusText}`);return e.data}async getPrice(e,r){let n=r?`price/${e}/${r}`:`price/${e}`;const i=await this.api.get(n);if(!/^\d+$/.test(i.data)||!i.ok)throw new Error(`Could not getPrice. Received: ${i.data}. Status: ${i.status}, ${i.statusText}`);return i.data}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new _i.default({...r.data,data:i})}return new _i.default({...r.data,format:r.data.format||1})}throw r.status==404?new yu.default("TX_NOT_FOUND"):r.status==410?new yu.default("TX_FAILED"):new yu.default("TX_INVALID")}fromRaw(e){return new _i.default(e)}async search(e,r){return this.api.post("arql",{op:"equals",expr1:e,expr2:r}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status==200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e,r){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{const{data:i,ok:s,status:o,statusText:c}=await this.api.get(`/${e}`,{responseType:"arraybuffer"});if(!s)throw new Error("Bad http status code",{cause:{status:o,statusText:c}});n=i}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} data was not found!`);return r&&r.decode&&!r.string?n:r&&r.decode&&r.string?Go.bufferToString(n):Go.bufferTob64Url(n)}async sign(e,r,n){const s=typeof r=="object"&&(c=>{let u=!0;return["n","e","d","p","q","dp","dq","qi"].map(h=>!(h in c)&&(u=!1)),u})(r),o=typeof arweaveWallet=="object";if(!s&&!o)throw new Error("No valid JWK or external wallet found to sign transaction.");if(s){e.setOwner(r.n);let c=await e.getSignatureData(),u=await this.crypto.sign(r,c,n),h=await this.crypto.hash(u);e.setSignature({id:Go.bufferTob64Url(h),owner:r.n,signature:Go.bufferTob64Url(u)})}else if(o){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const c=await arweaveWallet.sign(e,n);e.setSignature({id:c.id,owner:c.owner,reward:c.reward,tags:c.tags,signature:c.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Go.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new _i.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new _i.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof _i.default)&&(e=new _i.default(e)),!(e instanceof _i.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof _i.default){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new mu.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await mu.TransactionUploader.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await mu.TransactionUploader.fromSerialized(this.api,e,r)}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}Jl.default=Iv;var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});const id=Nt;class Nv{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return id.bufferTob64Url(await this.crypto.hash(id.b64UrlToBuffer(e)))}}Zl.default=Nv;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.SiloResource=void 0;const sd=Nt;class Bv{api;crypto;transactions;constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],i=Math.pow(2,parseInt(r[2])),s=await this.hash(sd.stringToBuffer(n),i),o=sd.bufferTob64(s.slice(0,15)),c=await this.hash(s.slice(16,31),1);return new Gg(e,o,c)}async hash(e,r){let n=await this.crypto.hash(e);for(let i=0;i<r-1;i++)n=await this.crypto.hash(n);return n}}La.default=Bv;class Gg{uri;accessKey;encryptionKey;constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}La.SiloResource=Gg;var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});const od=as,Rv=Nt;class Ov{api;constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,od.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,od.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Rv.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,o=new Uint8Array(n);let c=0;for(;c<n;){this.api.config.logging&&console.log(`[chunk] ${c}/${n}`);let u;try{u=await this.getChunkData(s+c)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+c}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(u)o.set(u,c),c+=u.length;else throw new Error(`Couldn't complete data download at ${c}/${n}`)}return o}}Xl.default=Ov;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});const ad=as;class Jc{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${Jc.HASH_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new ad.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`${Jc.HEIGHT_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new ad.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}Ql.default=Jc;Object.defineProperty(_o,"__esModule",{value:!0});const Dv=Hl,Uv=zl,Lv=Gl,Fv=Vl,$v=Jl,jv=Zl,cd=Bs,Vo=Nt,Kv=La,qv=Xl,Hv=Ql;class lo{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new Lv.default;static utils=Vo;constructor(e){this.api=new Uv.default(e),this.wallets=new jv.default(this.api,lo.crypto),this.chunks=new qv.default(this.api),this.transactions=new $v.default(this.api,lo.crypto,this.chunks),this.silo=new Kv.default(this.api,this.crypto,this.transactions),this.network=new Fv.default(this.api),this.blocks=new Hv.default(this.api,this.network),this.ar=new Dv.default}get crypto(){return lo.crypto}get utils(){return lo.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Vo.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new cd.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,r,n){const i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!r||!r.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=r.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());const s=await this.silo.parseUri(n);if(typeof e.data=="string"){const c=await this.crypto.encrypt(Vo.stringToBuffer(e.data),s.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Vo.bufferTob64Url(c)}if(e.data instanceof Uint8Array){const c=await this.crypto.encrypt(e.data,s.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Vo.bufferTob64Url(c)}const o=new cd.default(i);return o.addTag("Silo-Name",s.getAccessKey()),o.addTag("Silo-Version","0.1.0"),o}arql(e){return this.api.post("/arql",e).then(r=>r.data||[])}}_o.default=lo;var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.getDefaultConfig=void 0;const zv=(t,e)=>{const r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||t=="file"||s.includes(i)||!!e.match(r)||!!i.match(r)},Gv=t=>{const e=t.charAt(0)==="[",r=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!t.match(r)||e},Vv=(t,e)=>{if(zv(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!Gv(e)){let r=e.split(".");if(r.length>=3){r.shift();const n=r.join(".");return{protocol:t,host:n}}}return{protocol:t,host:e}};Ef.getDefaultConfig=Vv;(function(t){var e=j&&j.__createBinding||(Object.create?function(s,o,c,u){u===void 0&&(u=c);var h=Object.getOwnPropertyDescriptor(o,c);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(s,u,h)}:function(s,o,c,u){u===void 0&&(u=c),s[u]=o[c]}),r=j&&j.__exportStar||function(s,o){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&e(o,s,c)};Object.defineProperty(t,"__esModule",{value:!0});const n=_o,i=Ef;n.default.init=function(s={}){const o={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...o});const c=location.protocol.replace(":",""),u=location.hostname,h=location.port?parseInt(location.port):c=="https"?443:80,p=(0,i.getDefaultConfig)(c,u),m=s.protocol||p.protocol,_=s.host||p.host,S=s.port||p.port||h;return new n.default({...s,host:_,protocol:m,port:S})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),r(_o,t),t.default=n.default})(Ns);var Jv=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.hashStream=Mi.deepHashChunks=Mi.deepHash=void 0;const yr=Jv(Ns),Vg=is;async function Jg(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Vg.createHash("sha384");let o=0;for await(const h of i)o+=h.byteLength,s.update(h);const c=yr.default.utils.concatBuffers([yr.default.utils.stringToBuffer("blob"),yr.default.utils.stringToBuffer(o.toString())]),u=yr.default.utils.concatBuffers([await yr.default.crypto.hash(c,"SHA-384"),s.digest()]);return await yr.default.crypto.hash(u,"SHA-384")}else if(Array.isArray(t)){const i=yr.default.utils.concatBuffers([yr.default.utils.stringToBuffer("list"),yr.default.utils.stringToBuffer(t.length.toString())]);return await eh(t,await yr.default.crypto.hash(i,"SHA-384"))}const e=t,r=yr.default.utils.concatBuffers([yr.default.utils.stringToBuffer("blob"),yr.default.utils.stringToBuffer(e.byteLength.toString())]),n=yr.default.utils.concatBuffers([await yr.default.crypto.hash(r,"SHA-384"),await yr.default.crypto.hash(e,"SHA-384")]);return await yr.default.crypto.hash(n,"SHA-384")}Mi.deepHash=Jg;async function eh(t,e){if(t.length<1)return e;const r=yr.default.utils.concatBuffers([e,await Jg(t[0])]),n=await yr.default.crypto.hash(r,"SHA-384");return await eh(t.slice(1),n)}Mi.deepHashChunks=eh;async function Wv(t){const e=Vg.createHash("sha384");for await(const r of t)e.update(r);return e.digest()}Mi.hashStream=Wv;var Yv=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zv=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xv=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yv(e,t,r);return Zv(e,t),e};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.getSignatureData=void 0;const Ys=Vt,Qv=dr,ew=Mi;async function tw(t){return Qv.isBrowser?(await Promise.resolve().then(()=>Xv(wf))).default([Ys.stringToBuffer("dataitem"),Ys.stringToBuffer("1"),Ys.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData]):ew.deepHash([Ys.stringToBuffer("dataitem"),Ys.stringToBuffer("1"),Ys.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}Ua.getSignatureData=tw;var Af={},Wn={exports:{}},th={},rh={};Object.defineProperty(rh,"__esModule",{value:!0});function rw(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,o=r+s,c=V.Buffer.alloc(o);for(c.write(t);s--;)c.write("=",i++);return c.toString()}rh.default=rw;Object.defineProperty(th,"__esModule",{value:!0});var nw=rh;function Wg(t,e){return e===void 0&&(e="utf8"),V.Buffer.isBuffer(t)?sl(t.toString("base64")):sl(V.Buffer.from(t,e).toString("base64"))}function iw(t,e){return e===void 0&&(e="utf8"),V.Buffer.from(nh(t),"base64").toString(e)}function nh(t){return t=t.toString(),nw.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function sl(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sw(t){return V.Buffer.from(nh(t),"base64")}var No=Wg;No.encode=Wg;No.decode=iw;No.toBase64=nh;No.fromBase64=sl;No.toBuffer=sw;th.default=No;(function(t){t.exports=th.default,t.exports.default=t.exports})(Wn);var Sf={},ih={},Yg={exports:{}},Zg={exports:{}},ow=is,aw=Io,cw=new ey(4096);function Ea(t){return typeof V.Buffer.alloc=="function"?V.Buffer.alloc(t):new V.Buffer(t)}function Xg(t,e){return typeof V.Buffer.from=="function"?V.Buffer.from(t,e):new V.Buffer(t,e)}function Qg(t){return t.charAt(0).toUpperCase()+t.slice(1)}function fw(t,e){return t===e?0:t<e?-1:1}function uw(t,e,r){var n=t[e];return n===void 0?r:n}function lw(t,e){e=e||"md5";var r=ow.createHash(e);return r.end(t),r.read()}function hw(t,e){var r=-1,n,i;if(!t)return-1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){if(r>=0)return-2;r=n}return r}function dw(t,e){var r={},n,i;for(n=0;n<t.length;n++)i=t[n],r[e(i)]=i;return r}function pw(t){return Object.keys(t).map(function(e){return t[e]})}function gw(t,e){var r={},n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],e&&(s=e(s)),r[s])return!0;r[s]=!0}return!1}function yw(t,e,r){var n=Object.getOwnPropertyNames(t),i,s,o;for(i=0,s=n.length;i<s;i++)if(o=n[i],!e.hasOwnProperty(o)||r){var c=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,c)}return e}function mw(t,e){e=e|0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function xw(){throw new Error("abstract")}function bw(t,e){var r=t.prototype,n,i,s,o;for(n=0,i=e.length;n<i;n++)s=e[n],o="get"+Qg(s),r[o]=aw.deprecate(c(s),"use `."+s+"` instead of `."+o+"()`");function c(u){return function(){var h=this[u];return typeof h=="function"?h.apply(this,arguments):h}}}function ey(t){this._len=t|0,this._pos=0,this._slab=Ea(this._len)}ey.prototype.alloc=function(t){var e=this._len;return t>e?Ea(t):(this._pos+t>e&&(this._slab=Ea(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function Rs(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}Rs.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Rs.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};Rs.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};Rs.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")};Rs.prototype.nextBuffer=function(t){var e=[],r;for(r=0;r<t;r++)e.push(this.nextInt(256));return Xg(e)};Rs.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function sh(){this._index=0,this._items=[]}sh.prototype.push=function(t){var e=this._items,r=e.length|0,n;for(e.push(t);r>0&&e[r].index<e[n=r-1>>1].index;)t=e[r],e[r]=e[n],e[n]=t,r=n};sh.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n=e>>1,i=0,s,o,c,u,h,p,m;i<n&&(u=t[i],s=(i<<1)+1,o=i+1<<1,p=t[s],m=t[o],!m||p.index<=m.index?(h=p,c=s):(h=m,c=o),!(h.index>=u.index));)t[c]=u,t[i]=h,i=c;return r};function gt(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}gt.prototype.isValid=function(){return this.pos<=this.buf.length};gt.prototype.readBoolean=function(){return!!this.buf[this.pos++]};gt.prototype.skipBoolean=function(){this.pos++};gt.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};gt.prototype.readInt=gt.prototype.readLong=function(){var t=0,e=0,r=this.buf,n,i,s,o;do n=r[this.pos++],i=n&128,t|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=t,o=268435456;do n=r[this.pos++],s+=(n&127)*o,o*=128;while(n&128);return(s%2?-(s+1):s)/2}return t>>1^-(t&1)};gt.prototype.skipInt=gt.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};gt.prototype.writeInt=gt.prototype.writeLong=function(t){var e=this.buf,r,n;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++};gt.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};gt.prototype.skipFloat=function(){this.pos+=4};gt.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)};gt.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};gt.prototype.skipDouble=function(){this.pos+=8};gt.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)};gt.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=cw.alloc(t);return this.buf.copy(r,0,e,e+t),r}};gt.prototype.skipFixed=function(t){this.pos+=t};gt.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,r,0,e)};gt.prototype.readBytes=function(){return this.readFixed(this.readLong())};gt.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};gt.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof V.Buffer.prototype.utf8Slice=="function"?gt.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)}:gt.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()};gt.prototype.skipString=function(){var t=this.readLong();this.pos+=t};gt.prototype.writeString=function(t){var e=V.Buffer.byteLength(t),r=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64)this._writeUtf8(t,e);else{var i,s,o,c;for(i=0,s=e;i<s;i++)o=t.charCodeAt(i),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((c=t.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(c&1023),i++,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}};typeof V.Buffer.prototype.utf8Write=="function"?gt.prototype._writeUtf8=function(t,e){this.buf.utf8Write(t,this.pos-e,e)}:gt.prototype._writeUtf8=function(t,e){this.buf.write(t,this.pos-e,e,"utf8")};typeof V.Buffer.prototype.latin1Write=="function"?gt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,r,e)}:typeof V.Buffer.prototype.binaryWrite=="function"?gt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,r,e)}:gt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,r,e,"binary")};gt.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};gt.prototype.matchInt=gt.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1};gt.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1};gt.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1};gt.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};gt.prototype.matchBytes=gt.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var s=this.buf.slice(r,this.pos),o=t.buf.slice(i,t.pos);return s.compare(o)};gt.prototype.unpackLongBytes=function(){var t=Ea(8),e=0,r=0,n=6,i=this.buf,s,o;for(s=i[this.pos++],o=s&1,t.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,t[r++]=e,e>>=8);return t[r]=e,o&&ol(t,8),t};gt.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,r=this.buf,n=1,i=0,s=3,o;e?(ol(t,8),o=1):o=0;for(var c=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!c[--s];);for(;i<s;)for(o|=c[i++]<<n,n+=24;n>7;)r[this.pos++]=o&127|128,o>>=7,n-=7;o|=c[s]<<n;do r[this.pos]=o&127,o>>=7;while(o&&(r[this.pos++]|=128));this.pos++,e&&ol(t,8)};function ol(t,e){for(;e--;)t[e]=~t[e]}var Bo={abstractFunction:xw,addDeprecatedGetters:bw,bufferFrom:Xg,capitalize:Qg,copyOwnProperties:yw,getHash:lw,compare:fw,getOption:uw,jsonEnd:mw,newBuffer:Ea,objectValues:pw,toMap:dw,singleIndexOf:hw,hasDuplicates:gw,Lcg:Rs,OrderedQueue:sh,Tap:gt},wt=Bo,ty=Bl,nr=Io,ks=wt.Tap,al=nr.debuglog("avsc:types"),vt=nr.format,Wc={array:an,boolean:Bi,bytes:mn,double:xi,enum:sn,error:tr,fixed:on,float:mi,int:Ri,long:yn,map:Wr,null:Cn,record:tr,string:Yn},vw=/^[A-Za-z_][A-Za-z0-9_]*$/,Pr=new wt.Lcg,_s=new ks(new ty.SlowBuffer(1024)),Ji=null,yo=[];function ne(t,e){var r;if(Ji?(r=Ji,yo.push([Ji,this]),Ji=null):r=this,this._hash=new ww,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(n!==void 0){if(n=Yc(n,i),Ro(n))throw new Error(vt("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(vt("duplicate type name: %s",n));s[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(vt("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(o){return Yc(o,i)}):[]}}ne.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var r=function(u){switch(u===!0?u="always":u===!1?u="never":u===void 0?u="auto":typeof u=="string"&&(u=u.toLowerCase()),u){case"always":return In;case"never":return rn;case"auto":return;default:throw new Error(vt("invalid wrap unions option: %j",u))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(ne.isType(t))return t;var n;if(e.typeHook&&(n=e.typeHook(t,e))){if(!ne.isType(n))throw new Error(vt("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=Yc(t,e.namespace),n=e.registry[t],n)return n;if(Ro(t))return e.registry[t]=ne.forSchema({type:t},e);throw new Error(vt("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!Ji){var i=e.logicalTypes[t.logicalType];if(i){var s=e.namespace,o={};Object.keys(e.registry).forEach(function(u){o[u]=e.registry[u]});try{return al("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(u){if(al("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw u;Ji=null,e.namespace=s,e.registry=o}}}if(Array.isArray(t)){var c=t.map(function(u){return ne.forSchema(u,e)});r||(r=_w(c)?In:rn),n=new r(c,e)}else n=function(u){var h=Wc[u];if(h===void 0)throw new Error(vt("unknown type: %j",u));return new h(t,e)}(t.type);return n};ne.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||ne.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(r!==void 0){if(!ne.isType(r))throw new Error(vt("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return ne.forSchema("string",e);case"boolean":return ne.forSchema("boolean",e);case"number":return(t|0)===t?ne.forSchema("int",e):Math.abs(t)<9007199254740991?ne.forSchema("float",e):ne.forSchema("double",e);case"object":if(t===null)return ne.forSchema("null",e);if(Array.isArray(t))return t.length?ne.forSchema({type:"array",items:ne.forTypes(t.map(function(i){return ne.forValue(i,e)}))},e):e.emptyArrayType;if(V.Buffer.isBuffer(t))return ne.forSchema("bytes",e);var n=Object.keys(t);return n.some(function(i){return!Fa(i)})?ne.forSchema({type:"map",values:ne.forTypes(n.map(function(i){return ne.forValue(t[i],e)}),e)},e):ne.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:ne.forValue(t[i],e)}})},e);default:throw new Error(vt("cannot infer type from: %j",t))}};ne.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var r=[],n=0,i=!0;if(t.forEach(function(m){switch(m.typeName){case"union:unwrapped":i=!1,r=r.concat(m.types);break;case"union:wrapped":n++,r=r.concat(m.types);break;case"null":r.push(m);break;default:i=!1,r.push(m)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};r.forEach(function(m){var _=m.branchName,S=s[_];if(!S)s[_]=m;else if(!m.equals(S))throw new Error("inconsistent branch type")});var o=e.wrapUnions,c;e.wrapUnions=!0;try{c=ne.forSchema(Object.keys(s).map(function(m){return s[m]}),e)}catch(m){throw e.wrapUnions=o,m}return e.wrapUnions=o,c}var u={};r.forEach(function(m){var _=Tf(m),S=u[_];S||(u[_]=S=[]),S.push(m)});var h=Object.keys(u),p=h.map(function(m){var _=u[m];if(_.length===1)return _[0];switch(m){case"null":case"boolean":return _[0];case"number":return Ew(_);case"string":return Aw(_,e);case"buffer":return Sw(_,e);case"array":return _=_.filter(function(S){return S!==e.emptyArrayType}),_.length?ne.forSchema({type:"array",items:ne.forTypes(_.map(function(S){return S.itemsType}))},e):e.emptyArrayType;default:return Tw(_,e)}});return p.length===1?p[0]:ne.forSchema(p,e)};ne.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var r=e.typeName,n;for(n=1;n<t;n++)if(r.indexOf(arguments[n])===0)return!0;return!1};ne.__reset=function(t){al("resetting type buffer to %d",t),_s.buf=new ty.SlowBuffer(t)};Object.defineProperty(ne.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var t=ne.isType(this,"logical")?this.underlyingType:this;return ne.isType(t,"abstract")?t._concreteTypeName:ne.isType(t,"union")?void 0:t.typeName}});ne.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};ne.prototype.compare=wt.abstractFunction;ne.prototype.compareBuffers=function(t,e){return this._match(new ks(t),new ks(e))};ne.prototype.createResolver=function(t,e){if(!ne.isType(t))throw new Error(vt("not a type: %j",t));if(!ne.isType(this,"union","logical")&&ne.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(ne.isType(this,"record","error")&&ne.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n],r))return r;if(r=new oh(this),n&&(e.registry[n]=r),ne.isType(t,"union")){var i=t.types.map(function(s){return this.createResolver(s,e)},this);r._read=function(s){var o=s.readLong(),c=i[o];if(c===void 0)throw new Error(vt("invalid union index: %s",o));return i[o]._read(s)}}else this._update(r,t,e);if(!r._read)throw new Error(vt("cannot read %s as %s",t,this));return Object.freeze(r)};ne.prototype.decode=function(t,e,r){var n=new ks(t,e),i=ry(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};ne.prototype.encode=function(t,e,r){var n=new ks(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos};ne.prototype.equals=function(t){return ne.isType(t)&&this.fingerprint().equals(t.fingerprint())};ne.prototype.fingerprint=function(t){if(t)return wt.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=wt.getHash(e).toString("binary")}return wt.bufferFrom(this._hash.str,"binary")};ne.prototype.fromBuffer=function(t,e,r){var n=new ks(t),i=ry(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i};ne.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};ne.prototype.inspect=function(){var t=this.typeName,e=ny(t);if(Ro(t))return vt("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return typeof r=="object"&&!ne.isType(this,"logical")&&(r.type=void 0),vt("<%s %j>",e,r)};ne.prototype.isValid=function(t,e){var r=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(o,c){n.call(this,s.slice(),o,c,t)}),this._check(t,r,i,s)};ne.prototype.random=wt.abstractFunction;ne.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};ne.prototype.toBuffer=function(t){_s.pos=0,this._write(_s,t);var e=wt.newBuffer(_s.pos);return _s.isValid()?_s.buf.copy(e,0,0,_s.pos):this._write(new ks(e),t),e};ne.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};ne.prototype.toString=function(t){return t===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))};ne.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};ne.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};this.name!==void 0&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return n!==void 0&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),this.doc!==void 0&&(r.doc=this.doc)),r};ne.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;function e(){return function(i){~t.indexOf(".")?this[`${t}`]=i:this[t]=i}}var r=e();return r.type=this,r.prototype.unwrap=function(){return this[`${t}`]},r.prototype.unwrapped=r.prototype.unwrap,r};ne.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r};ne.prototype._check=wt.abstractFunction;ne.prototype._copy=wt.abstractFunction;ne.prototype._deref=wt.abstractFunction;ne.prototype._match=wt.abstractFunction;ne.prototype._read=wt.abstractFunction;ne.prototype._skip=wt.abstractFunction;ne.prototype._update=wt.abstractFunction;ne.prototype._write=wt.abstractFunction;ne.prototype.getAliases=function(){return this.aliases};ne.prototype.getFingerprint=ne.prototype.fingerprint;ne.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};ne.prototype.getSchema=ne.prototype.schema;ne.prototype.getTypeName=function(){return this.typeName};function Wt(t){ne.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}nr.inherits(Wt,ne);Wt.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};Wt.prototype._copy=function(t){return this._check(t,void 0,Ft),t};Wt.prototype._deref=function(){return this.typeName};Wt.prototype.compare=wt.compare;function Cn(){Wt.call(this)}nr.inherits(Cn,Wt);Cn.prototype._check=function(t,e,r){var n=t===null;return!n&&r&&r(t,this),n};Cn.prototype._read=function(){return null};Cn.prototype._skip=function(){};Cn.prototype._write=function(t,e){e!==null&&Ft(e,this)};Cn.prototype._match=function(){return 0};Cn.prototype.compare=Cn.prototype._match;Cn.prototype.typeName="null";Cn.prototype.random=Cn.prototype._read;function Bi(){Wt.call(this)}nr.inherits(Bi,Wt);Bi.prototype._check=function(t,e,r){var n=typeof t=="boolean";return!n&&r&&r(t,this),n};Bi.prototype._read=function(t){return t.readBoolean()};Bi.prototype._skip=function(t){t.skipBoolean()};Bi.prototype._write=function(t,e){typeof e!="boolean"&&Ft(e,this),t.writeBoolean(e)};Bi.prototype._match=function(t,e){return t.matchBoolean(e)};Bi.prototype.typeName="boolean";Bi.prototype.random=function(){return Pr.nextBoolean()};function Ri(){Wt.call(this)}nr.inherits(Ri,Wt);Ri.prototype._check=function(t,e,r){var n=t===(t|0);return!n&&r&&r(t,this),n};Ri.prototype._read=function(t){return t.readInt()};Ri.prototype._skip=function(t){t.skipInt()};Ri.prototype._write=function(t,e){e!==(e|0)&&Ft(e,this),t.writeInt(e)};Ri.prototype._match=function(t,e){return t.matchInt(e)};Ri.prototype.typeName="int";Ri.prototype.random=function(){return Pr.nextInt(1e3)|0};function yn(){Wt.call(this)}nr.inherits(yn,Wt);yn.prototype._check=function(t,e,r){var n=typeof t=="number"&&t%1===0&&ch(t);return!n&&r&&r(t,this),n};yn.prototype._read=function(t){var e=t.readLong();if(!ch(e))throw new Error("potential precision loss");return e};yn.prototype._skip=function(t){t.skipLong()};yn.prototype._write=function(t,e){(typeof e!="number"||e%1||!ch(e))&&Ft(e,this),t.writeLong(e)};yn.prototype._match=function(t,e){return t.matchLong(e)};yn.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};yn.prototype.typeName="long";yn.prototype.random=function(){return Pr.nextInt()};yn.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new Kr(e);return Object.keys(r).forEach(function(i){if(t[i]===void 0)throw new Error(vt("missing method implementation: %s",i));n[r[i]]=t[i]}),Object.freeze(n)};function mi(){Wt.call(this)}nr.inherits(mi,Wt);mi.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};mi.prototype._read=function(t){return t.readFloat()};mi.prototype._skip=function(t){t.skipFloat()};mi.prototype._write=function(t,e){typeof e!="number"&&Ft(e,this),t.writeFloat(e)};mi.prototype._match=function(t,e){return t.matchFloat(e)};mi.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};mi.prototype.typeName="float";mi.prototype.random=function(){return Pr.nextFloat(1e3)};function xi(){Wt.call(this)}nr.inherits(xi,Wt);xi.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};xi.prototype._read=function(t){return t.readDouble()};xi.prototype._skip=function(t){t.skipDouble()};xi.prototype._write=function(t,e){typeof e!="number"&&Ft(e,this),t.writeDouble(e)};xi.prototype._match=function(t,e){return t.matchDouble(e)};xi.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};xi.prototype.typeName="double";xi.prototype.random=function(){return Pr.nextFloat()};function Yn(){Wt.call(this)}nr.inherits(Yn,Wt);Yn.prototype._check=function(t,e,r){var n=typeof t=="string";return!n&&r&&r(t,this),n};Yn.prototype._read=function(t){return t.readString()};Yn.prototype._skip=function(t){t.skipString()};Yn.prototype._write=function(t,e){typeof e!="string"&&Ft(e,this),t.writeString(e)};Yn.prototype._match=function(t,e){return t.matchString(e)};Yn.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};Yn.prototype.typeName="string";Yn.prototype.random=function(){return Pr.nextString(Pr.nextInt(32))};function mn(){Wt.call(this)}nr.inherits(mn,Wt);mn.prototype._check=function(t,e,r){var n=V.Buffer.isBuffer(t);return!n&&r&&r(t,this),n};mn.prototype._read=function(t){return t.readBytes()};mn.prototype._skip=function(t){t.skipBytes()};mn.prototype._write=function(t,e){V.Buffer.isBuffer(e)||Ft(e,this),t.writeBytes(e)};mn.prototype._match=function(t,e){return t.matchBytes(e)};mn.prototype._update=Yn.prototype._update;mn.prototype._copy=function(t,e){var r;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,Ft),t.toString("binary");case 2:if(typeof t!="string")throw new Error(vt("cannot coerce to buffer: %j",t));return r=wt.bufferFrom(t,"binary"),this._check(r,void 0,Ft),r;case 1:if(!iy(t))throw new Error(vt("cannot coerce to buffer: %j",t));return r=wt.bufferFrom(t.data),this._check(r,void 0,Ft),r;default:return this._check(t,void 0,Ft),wt.bufferFrom(t)}};mn.prototype.compare=V.Buffer.compare;mn.prototype.typeName="bytes";mn.prototype.random=function(){return Pr.nextBuffer(Pr.nextInt(32))};function bi(t,e){if(ne.call(this),!Array.isArray(t))throw new Error(vt("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(r){return ne.forSchema(r,e)})),this._branchIndices={},this.types.forEach(function(r,n){if(ne.isType(r,"union"))throw new Error("unions cannot be directly nested");var i=r.branchName;if(this._branchIndices[i]!==void 0)throw new Error(vt("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}nr.inherits(bi,ne);bi.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};bi.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};bi.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1};bi.prototype._deref=function(t,e){return this.types.map(function(r){return r._attrs(e)})};bi.prototype.getTypes=function(){return this.types};function rn(t,e){bi.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(r,n){if(ne.isType(r,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:r});else{var i=Tf(r);if(this._bucketIndices[i]!==void 0)throw new Error(vt("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}nr.inherits(rn,bi);rn.prototype._getIndex=function(t){var e=this._bucketIndices[sy(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};rn.prototype._getBranchIndex=function(t,e){var r=this._dynamicBranches,n,i,s;for(n=0,i=r.length;n<i;n++)if(s=r[n],s.type._check(t))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};rn.prototype._check=function(t,e,r,n){var i=this._getIndex(t),s=i!==void 0;return s?this.types[i]._check(t,e,r,n):(r&&r(t,this),s)};rn.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(vt("invalid union index: %s",e))};rn.prototype._write=function(t,e){var r=this._getIndex(e);r===void 0&&Ft(e,this),t.writeLong(r),e!==null&&this.types[r]._write(t,e)};rn.prototype._update=function(t,e,r){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}t._read=function(o){return s._read(o)};return}};rn.prototype._copy=function(t,e){var r=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(r){case 1:iy(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var s=Object.keys(t);s.length===1&&(i=this._branchIndices[s[0]],t=t[s[0]])}break;default:i=this._getIndex(t)}i===void 0&&Ft(t,this)}var o=this.types[i];if(t===null||n===3)return o._copy(t,e);switch(r){case 3:var c={};return c[o.branchName]=o._copy(t,e),c;default:return o._copy(t,e)}};rn.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(r===void 0)Ft(t,this);else if(n===void 0)Ft(e,this);else return r===n?this.types[r].compare(t,e):wt.compare(r,n)};rn.prototype.typeName="union:unwrapped";rn.prototype.random=function(){var t=Pr.nextInt(this.types.length);return this.types[t].random()};function In(t,e){bi.call(this,t,e),Object.freeze(this)}nr.inherits(In,bi);In.prototype._check=function(t,e,r,n){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var o=s[0],c=this._branchIndices[o];if(c!==void 0)return r?(n.push(o),i=this.types[c]._check(t[o],e,r,n),n.pop(),i):this.types[c]._check(t[o],e)}}return!i&&r&&r(t,this),i};In.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(vt("invalid union index"));var r=e._branchConstructor;return r===null?null:new r(e._read(t))};In.prototype._write=function(t,e){var r,n,i;e===null?(r=this._branchIndices.null,r===void 0&&Ft(e,this),t.writeLong(r)):(n=Object.keys(e),n.length===1&&(i=n[0],r=this._branchIndices[i]),r===void 0&&Ft(e,this),t.writeLong(r),this.types[r]._write(t,e[i]))};In.prototype._update=function(t,e,r){var n,i,s,o;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}o=this.types[n]._branchConstructor,o?t._read=function(c){return new o(s._read(c))}:t._read=function(){return null};return}};In.prototype._copy=function(t,e){var r=e&&e.wrap|0;if(r===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,s,o;if(typeof t=="object"){var c=Object.keys(t);if(c.length===1){var u=c[0];if(i=this._branchIndices[u],i===void 0&&e.qualifyNames){var h,p;for(h=0,s=this.types.length;h<s;h++)if(p=this.types[h],p.name&&u===ah(p.name)){i=h;break}}i!==void 0&&(o=this.types[i]._copy(t[u],e))}}if(r===1&&o===void 0)for(i=0,s=this.types.length;i<s&&o===void 0;)try{o=this.types[i]._copy(t,e)}catch{i++}if(o!==void 0)return r===3?o:new this.types[i]._branchConstructor(o);Ft(t,this)};In.prototype.compare=function(t,e){var r=t===null?"null":Object.keys(t)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?r==="null"?0:this.types[i].compare(t[r],e[r]):wt.compare(i,this._branchIndices[n])};In.prototype.typeName="union:wrapped";In.prototype.random=function(){var t=Pr.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null};function sn(t,e){if(ne.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(vt("invalid enum symbols: %j",t.symbols));this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(r,n){if(!Fa(r))throw new Error(vt("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(vt("duplicate %s symbol: %j",this,r));this._indices[r]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(sn,ne);sn.prototype._check=function(t,e,r){var n=this._indices[t]!==void 0;return!n&&r&&r(t,this),n};sn.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(r===void 0)throw new Error(vt("invalid %s enum index: %s",this.name,e));return r};sn.prototype._skip=function(t){t.skipLong()};sn.prototype._write=function(t,e){var r=this._indices[e];r===void 0&&Ft(e,this),t.writeLong(r)};sn.prototype._match=function(t,e){return t.matchLong(e)};sn.prototype.compare=function(t,e){return wt.compare(this._indices[t],this._indices[e])};sn.prototype._update=function(t,e){var r=this.symbols;e.typeName==="enum"&&(!e.name||~ua(this).indexOf(e.name))&&e.symbols.every(function(n){return~r.indexOf(n)})&&(t.symbols=e.symbols,t._read=e._read)};sn.prototype._copy=function(t){return this._check(t,void 0,Ft),t};sn.prototype._deref=function(t){t.symbols=this.symbols};sn.prototype.getSymbols=function(){return this.symbols};sn.prototype.typeName="enum";sn.prototype.random=function(){return Pr.choice(this.symbols)};function on(t,e){if(ne.call(this,t,e),t.size!==(t.size|0)||t.size<1)throw new Error(vt("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(on,ne);on.prototype._check=function(t,e,r){var n=V.Buffer.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n};on.prototype._read=function(t){return t.readFixed(this.size)};on.prototype._skip=function(t){t.skipFixed(this.size)};on.prototype._write=function(t,e){(!V.Buffer.isBuffer(e)||e.length!==this.size)&&Ft(e,this),t.writeFixed(e,this.size)};on.prototype._match=function(t,e){return t.matchFixed(e,this.size)};on.prototype.compare=V.Buffer.compare;on.prototype._update=function(t,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~ua(this).indexOf(e.name))&&(t.size=this.size,t._read=this._read)};on.prototype._copy=mn.prototype._copy;on.prototype._deref=function(t){t.size=this.size};on.prototype.getSize=function(){return this.size};on.prototype.typeName="fixed";on.prototype.random=function(){return Pr.nextBuffer(this.size)};function Wr(t,e){if(ne.call(this),!t.values)throw new Error(vt("missing map values: %j",t));this.valuesType=ne.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(Wr,ne);Wr.prototype._check=function(t,e,r,n){if(!t||typeof t!="object"||Array.isArray(t))return r&&r(t,this),!1;var i=Object.keys(t),s=!0,o,c,u,h;if(r){for(u=n.length,n.push(""),o=0,c=i.length;o<c;o++)h=n[u]=i[o],this.valuesType._check(t[h],e,r,n)||(s=!1);n.pop()}else for(o=0,c=i.length;o<c;o++)if(!this.valuesType._check(t[i[o]],e))return!1;return s};Wr.prototype._read=function(t){for(var e=this.valuesType,r={},n;n=cl(t);)for(;n--;){var i=t.readString();r[i]=e._read(t)}return r};Wr.prototype._skip=function(t){for(var e=this.valuesType,r,n;n=t.readLong();)if(n<0)r=t.readLong(),t.pos+=r;else for(;n--;)t.skipString(),e._skip(t)};Wr.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&Ft(e,this);var r=this.valuesType,n=Object.keys(e),i=n.length,s,o;if(i)for(t.writeLong(i),s=0;s<i;s++)o=n[s],t.writeString(o),r._write(t,e[o]);t.writeLong(0)};Wr.prototype._match=function(){throw new Error("maps cannot be compared")};Wr.prototype._update=function(t,e,r){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)};Wr.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var r=this.valuesType,n=Object.keys(t),i,s,o,c={};for(i=0,s=n.length;i<s;i++)o=n[i],c[o]=r._copy(t[o],e);return c}Ft(t,this)};Wr.prototype.compare=Wr.prototype._match;Wr.prototype.typeName="map";Wr.prototype.getValuesType=function(){return this.valuesType};Wr.prototype.random=function(){var t={},e,r;for(e=0,r=Pr.nextInt(10);e<r;e++)t[Pr.nextString(Pr.nextInt(20))]=this.valuesType.random();return t};Wr.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function an(t,e){if(ne.call(this),!t.items)throw new Error(vt("missing array items: %j",t));this.itemsType=ne.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(an,ne);an.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i=!0,s,o,c;if(r){for(c=n.length,n.push(""),s=0,o=t.length;s<o;s++)n[c]=""+s,this.itemsType._check(t[s],e,r,n)||(i=!1);n.pop()}else for(s=0,o=t.length;s<o;s++)if(!this.itemsType._check(t[s],e))return!1;return i};an.prototype._read=function(t){for(var e=this.itemsType,r=[],n;n=t.readLong();)for(n<0&&(n=-n,t.skipLong());n--;)r.push(e._read(t));return r};an.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this.itemsType._skip(t)};an.prototype._write=function(t,e){Array.isArray(e)||Ft(e,this);var r=e.length,n;if(r)for(t.writeLong(r),n=0;n<r;n++)this.itemsType._write(t,e[n]);t.writeLong(0)};an.prototype._match=function(t,e){for(var r=t.readLong(),n=e.readLong(),i;r&&n;){if(i=this.itemsType._match(t,e),i)return i;--r||(r=cl(t)),--n||(n=cl(e))}return wt.compare(r,n)};an.prototype._update=function(t,e,r){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)};an.prototype._copy=function(t,e){Array.isArray(t)||Ft(t,this);var r=new Array(t.length),n,i;for(n=0,i=t.length;n<i;n++)r[n]=this.itemsType._copy(t[n],e);return r};an.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};an.prototype.compare=function(t,e){var r=t.length,n=e.length,i,s,o;for(i=0,s=Math.min(r,n);i<s;i++)if(o=this.itemsType.compare(t[i],e[i]))return o;return wt.compare(r,n)};an.prototype.getItemsType=function(){return this.itemsType};an.prototype.typeName="array";an.prototype.random=function(){var t=[],e,r;for(e=0,r=Pr.nextInt(10);e<r;e++)t.push(this.itemsType.random());return t};function tr(t,e){e=e||{};var r=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(ne.call(this,t,e),!Array.isArray(t.fields))throw new Error(vt("non-array record fields: %j",t.fields));if(wt.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(vt("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var s=new Ci(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}nr.inherits(tr,ne);tr.prototype._getConstructorName=function(){return this.name?ah(this.name):this._isError?"Error$":"Record$"};tr.prototype._createConstructor=function(t){var e={},r,n,i,s,o,c,u;for(r=0,n=this.fields.length;r<n;r++)i=this.fields[r],o=i.defaultValue,c=o()!==void 0,s=i.name,t&&this._isError&&s==="stack"&&ne.isType(i.type,"string")&&!c&&(u=i),c&&(e[r]=o);var h=this;function p(_){const S=h._getConstructorName();var B={[S]:function(...T){for(var A=0,P=h.fields.length;A<P;A++){let R=h.fields[A];R.defaultValue()===void 0?this[R.name]=T[A]:T[A]===void 0?this[R.name]=_[A]():this[R.name]=T[A]}u&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[S];return B}var m=p(e);return m.getType=function(){return h},m.type=h,this._isError&&(nr.inherits(m,Error),m.prototype.name=this._getConstructorName()),m.prototype.clone=function(_){return h.clone(this,_)},m.prototype.compare=function(_){return h.compare(this,_)},m.prototype.isValid=function(_){return h.isValid(this,_)},m.prototype.toBuffer=function(){return h.toBuffer(this)},m.prototype.toString=function(){return h.toString(this)},m.prototype.wrap=function(){return h.wrap(this)},m.prototype.wrapped=m.prototype.wrap,m};tr.prototype._createChecker=function(){const t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o,c,u,h){if(o===null||typeof o!="object"||c&&!this._checkFields(o))return u&&u(o,this),!1;const p=[];if(e.fields.length)for(var m=0,_=e.fields.length;m<_;m++){let T=e.fields[m];T.defaultValue()!==void 0&&p.push(o[T.name])}else return!0;if(u){var S=1,B=h.length;h.push("");for(var m=0,_=e.fields.length;m<_;m++){let P=e.fields[m];h[B]=P.name,S&=P.defaultValue()===void 0?n[m]._check(o[P.name],P,u,h):p[m]===void 0||n[m]._check(p[m],P,u,h)}return h.pop(),!!S}else return e.fields.reduce((T,A,P)=>T&&(A.defaultValue()===void 0?n[P]._check(o[A.name]):p[P]===void 0||n[P]._check(p[P],c)),!0)}}[i];return s}return r(t)};tr.prototype._createReader=function(){var t=[this.recordConstructor],e,r;for(e=0,r=this.fields.length;e<r;e++)t.push(this.fields[e].type);var n=this;function i(s){var o=n._getConstructorName(),c={[o]:function(u){return new s[0](...s.slice(1).map(h=>h._read(u)))}}[o];return c}return i(t)};tr.prototype._createSkipper=function(){var t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o){n.forEach(c=>c._skip(o))}}[i];return s}return r(t)};tr.prototype._createWriter=function(){var t=[],e={};this.fields.forEach((i,s)=>{t.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var r=this;function n(i,s){var o=r._getConstructorName(),c={[o]:function(u,h){for(var p=0,m=r.fields.length;p<m;p++){let _=r.fields[p];_.defaultValue()===void 0?i[p]._write(u,h[_.name]):h[_.name]===void 0?u.writeBinary(s[p],s[p].length):i[p]._write(u,h[_.name])}}}[o];return c}return n(t,e)};tr.prototype._update=function(t,e,r){if(e.name&&!~ua(this).indexOf(e.name))throw new Error(vt("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=wt.toMap(i,function(A){return A.name}),o={},c,u,h,p,m,_,S;for(c=0;c<n.length;c++){for(h=n[c],m=ua(h),_=[],u=0;u<m.length;u++)p=m[u],s[p]&&_.push(p);if(_.length>1)throw new Error(vt("ambiguous aliasing for %s.%s (%s)",e.name,h.name,_));if(_.length)p=_[0],S={resolver:h.type.createResolver(s[p].type,r),name:"_"+h.name},o[p]?o[p].push(S):o[p]=[S];else if(h.defaultValue()===void 0)throw new Error(vt("no matching field for default-less %s.%s",e.name,h.name))}var B=this;function T(){var A=B._getConstructorName(),P={[A]:function(R,F){if(!F){var q=[];for(U=0;U<n.length;U++){for(h=n[U],m=ua(h),_=[],K=0;K<m.length;K++)p=m[K],s[p]&&_.push(p);_.length||q.push(void 0)}for(var U=0;U<i.length;U++){let Z=e.fields[U];if(p=Z.name,o[p]===void 0)Z.type._skip(R);else for(var K=o[p].length;K--;)q.unshift(K?o[p][K].resolver._peek(R):o[p][K].resolver._read(R))}return new B.recordConstructor(...q)}}}[A];return P}t._read=T()};tr.prototype._match=function(t,e){var r=this.fields,n,i,s,o,c;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s._order,c=s.type,o){if(o*=c._match(t,e),o)return o}else c._skip(t),c._skip(e);return 0};tr.prototype._checkFields=function(t){var e=Object.keys(t),r,n;for(r=0,n=e.length;r<n;r++)if(!this._fieldsByName[e[r]])return!1;return!0};tr.prototype._copy=function(t,e){var r=e&&e.fieldHook,n=[void 0],i,s,o,c;for(i=0,s=this.fields.length;i<s;i++)o=this.fields[i],c=t[o.name],c===void 0&&o.hasOwnProperty("defaultValue")&&(c=o.defaultValue()),(e&&!e.skip||c!==void 0)&&(c=o.type._copy(c,e)),r&&(c=r(o,c,this)),n.push(c);var u=this.recordConstructor;return new(u.bind.apply(u,n))};tr.prototype._deref=function(t,e){t.fields=this.fields.map(function(r){var n=r.type,i={name:r.name,type:n._attrs(e)};if(e.exportAttrs){var s=r.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var o=r.order;o!=="ascending"&&(i.order=o);var c=r.aliases;c.length&&(i.aliases=c);var u=r.doc;u!==void 0&&(i.doc=u)}return i})};tr.prototype.compare=function(t,e){var r=this.fields,n,i,s,o,c,u;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s.name,c=s._order,u=s.type,c&&(c*=u.compare(t[o],e[o]),c))return c;return 0};tr.prototype.random=function(){var t=this.fields.map(function(r){return r.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};tr.prototype.field=function(t){return this._fieldsByName[t]};tr.prototype.getField=tr.prototype.field;tr.prototype.getFields=function(){return this.fields};tr.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(tr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function _r(t,e){this._logicalTypeName=t.logicalType,ne.call(this),Ji=this;try{this._underlyingType=ne.forSchema(t,e)}finally{Ji=null;var r=yo.length;r&&yo[r-1][0]===this&&yo.pop()}ne.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}nr.inherits(_r,ne);Object.defineProperty(_r.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(_r.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=yo.length;t<e;t++)if(r=yo[t],r[0]===this)return r[1]}});_r.prototype.getUnderlyingType=function(){return this.underlyingType};_r.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};_r.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};_r.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch{}return i===void 0?(r&&r(t,this),!1):this.underlyingType._check(i,e,r,n)};_r.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}};_r.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(i){return n(e._read(i))})};_r.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)};_r.prototype.random=function(){return this._fromValue(this.underlyingType.random())};_r.prototype._deref=function(t,e){var r=this.underlyingType,n=r.name!==void 0&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};_r.prototype._skip=function(t){this.underlyingType._skip(t)};_r.prototype._export=function(){};_r.prototype._fromValue=wt.abstractFunction;_r.prototype._toValue=wt.abstractFunction;_r.prototype._resolve=wt.abstractFunction;function Kr(t){this._concreteTypeName="long",Wt.call(this,!0),this._noUnpack=!!t}nr.inherits(Kr,yn);Kr.prototype.typeName="abstract:long";Kr.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n};Kr.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};Kr.prototype._write=function(t,e){this._isValid(e)||Ft(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)};Kr.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};Kr.prototype._deref=function(){return"long"};Kr.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(n){return r._fromJSON(e._read(n))};break;case"long":t._read=function(n){return r._read(n)}}};Kr.prototype.random=function(){return this._fromJSON(yn.prototype.random())};Kr.prototype._fromBuffer=wt.abstractFunction;Kr.prototype._toBuffer=wt.abstractFunction;Kr.prototype._fromJSON=wt.abstractFunction;Kr.prototype._toJSON=wt.abstractFunction;Kr.prototype._isValid=wt.abstractFunction;Kr.prototype.compare=wt.abstractFunction;function Ci(t,e){var r=t.name;if(typeof r!="string"||!Fa(r))throw new Error(vt("invalid field name: %s",r));this.name=r,this.type=ne.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(o){switch(o){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(vt("invalid order: %j",o))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});Ro(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}Ci.prototype.defaultValue=function(){};Object.defineProperty(Ci.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});Ci.prototype.getAliases=function(){return this.aliases};Ci.prototype.getDefault=Ci.prototype.defaultValue;Ci.prototype.getName=function(){return this.name};Ci.prototype.getOrder=function(){return this.order};Ci.prototype.getType=function(){return this.type};function oh(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}oh.prototype._peek=ne.prototype._peek;oh.prototype.inspect=function(){return"<Resolver>"};function ww(){this.str=void 0}function ry(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}else return t._read(e)}function ah(t){var e=t.split(".");return e[e.length-1]}function Yc(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!Fa(n))throw new Error(vt("invalid name: %j",t))});var r=ah(t);return Ro(r)?r:t}function ua(t){var e={};t.name&&(e[t.name]=!0);var r=t.aliases,n,i;for(n=0,i=r.length;n<i;n++)e[r[n]]=!0;return Object.keys(e)}function Ro(t){var e=Wc[t];return e&&e.prototype instanceof Wt}function ny(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return wt.capitalize(t)+"Type"}function cl(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function ch(t){return t>=-9007199254740990&&t<=9007199254740990}function iy(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function Fa(t){return vw.test(t)}function Ft(t,e){throw new Error(vt("invalid %s: %j",e,t))}function Tf(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function sy(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(V.Buffer.isBuffer(t))return"buffer"}return e}function _w(t){var e={},r,n,i,s;for(r=0,n=t.length;r<n;r++)if(s=t[r],!ne.isType(s,"logical")){if(i=Tf(s),e[i])return!0;e[i]=!0}return!1}function Ew(t){var e=["int","long","float","double"],r=-1,n=null,i,s,o,c;for(i=0,s=t.length;i<s;i++)o=t[i],c=e.indexOf(o.typeName),c>r&&(r=c,n=o);return n}function Aw(t,e){var r={},n,i,s,o;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="string")return s;o=s.symbols;var c,u;for(c=0,u=o.length;c<u;c++)r[o[c]]=!0}return ne.forSchema({type:"enum",symbols:Object.keys(r)},e)}function Sw(t,e){var r=-1,n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="bytes")return s;r===-1?r=s.size:s.size!==r&&(r=-2)}return r<0?ne.forSchema("bytes",e):t[0]}function Tw(t,e){var r=[],n={},i={},s=!0,o,c,u,h;for(o=0,c=t.length;o<c;o++)if(u=t[o],u.typeName==="map")s=!1,r.push(u.valuesType);else{h=u.fields;var p,m,_,S,B,T;for(p=0,m=h.length;p<m;p++)_=h[p],B=_.name,T=_.type,r.push(T),s&&(n[B]||(n[B]=[]),n[B].push(T),S=_.defaultValue(),S!==void 0&&(i[B]=S))}if(s){var A=Object.keys(n);for(o=0,c=A.length;o<c;o++)B=A[o],n[B].length<t.length&&i[B]===void 0&&(e&&e.strictDefaults?s=!1:(n[B].unshift(ne.forSchema("null",e)),i[B]=null))}var P;return s?P={type:"record",fields:A.map(function(R){var F=ne.forTypes(n[R],e),q=i[R];if(q!==void 0&&~F.typeName.indexOf("union")){var U=F.types.slice(),K,Z;for(K=0,Z=U.length;K<Z&&!U[K].isValid(q);K++);if(K>0){var Q=U[0];U[0]=U[K],U[K]=Q,F=ne.forSchema(U,e)}}return{name:R,type:F,default:i[R]}})}:P={type:"map",values:ne.forTypes(r,e)},ne.forSchema(P,e)}var fh={Type:ne,getTypeBucket:Tf,getValueBucket:sy,isPrimitive:Ro,isValidName:Fa,qualify:Yc,builtins:function(){var t={LogicalType:_r,UnwrappedUnionType:rn,WrappedUnionType:In},e=Object.keys(Wc),r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],t[ny(i)]=Wc[i];return t}()},aa=fh;function kw(t,e){var r;if(typeof t=="string")try{r=JSON.parse(t)}catch{r=t}else r=t;return aa.Type.forSchema(r,e)}var Mw={Type:aa.Type,parse:kw,types:aa.builtins,combine:aa.Type.forTypes,infer:aa.Type.forValue},uh=fh,$t=Bo,cs=hg.exports,ui=pf,Dt=Io,lh=$t.Tap,vr=uh.Type,cr=Dt.debuglog("avsc:services"),wr=Dt.format,ai={namespace:"org.apache.avro.ipc"},oy=vr.forSchema("boolean",ai),li=vr.forSchema({type:"map",values:"bytes"},ai),hh=vr.forSchema("string",ai),$a=vr.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",li],default:null}]},ai),ja=vr.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",li],default:null}]},ai),dh=16,ph=new Ii("",vr.forSchema({name:"PingRequest",type:"record",fields:[]},ai),vr.forSchema(["string"],ai),vr.forSchema("null",ai));function Ii(t,e,r,n,i,s){if(this.name=t,!vr.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!vr.isType(r,"union")||!vr.isType(r.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=r,i&&(!vr.isType(n,"null")||r.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}Ii.forSchema=function(t,e,r){if(r=r||{},!uh.isValidName(t))throw new Error(wr("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(wr("invalid message request: %s",t));var n=wr("%s.%sRequest",ai.namespace,$t.capitalize(t)),i=vr.forSchema({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r);if(delete r.registry[n],!e.response)throw new Error(wr("invalid message response: %s",t));var s=vr.forSchema(e.response,r);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(wr("invalid message errors: %s",t));var o=vr.forSchema(["string"].concat(e.errors||[]),r),c=!!e["one-way"];return new Ii(t,i,o,s,c,e.doc)};Ii.prototype.schema=vr.prototype.getSchema;Ii.prototype._attrs=function(t){var e=this.requestType._attrs(t),r={request:e.fields,response:this.responseType._attrs(t)},n=this.doc;n!==void 0&&(r.doc=n);var i=this.errorType._attrs(t);return i.length>1&&(r.errors=i.slice(1)),this.oneWay&&(r["one-way"]=!0),r};$t.addDeprecatedGetters(Ii,["name","errorType","requestType","responseType"]);Ii.prototype.isOneWay=Dt.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function Bt(t,e,r,n,i){if(typeof t!="string")return Bt.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze($t.objectValues(this._messagesByName)),this._typesByName=r||{},this.types=Object.freeze($t.objectValues(this._typesByName)),this.protocol=n,this._hashStr=$t.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}Bt.Client=xn;Bt.Server=Zn;Bt.compatible=function(t,e){try{fy(t,e)}catch{return!1}return!0};Bt.forProtocol=function(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=uh.qualify(r,e.namespace),t.types&&t.types.forEach(function(s){vr.forSchema(s,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(s){i[s]=Ii.forSchema(s,t.messages[s],e)})),new Bt(r,i,e.registry,t)};Bt.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};Bt.prototype.createClient=function(t){var e=new xn(this,t);return V.process.nextTick(function(){if(t&&t.server){var r={objectMode:!0},n=[new ui.PassThrough(r),new ui.PassThrough(r)];t.server.createChannel({readable:n[0],writable:n[1]},r),e.createChannel({readable:n[1],writable:n[0]},r)}else t&&t.transport&&e.createChannel(t.transport)}),e};Bt.prototype.createServer=function(t){return new Zn(this,t)};Object.defineProperty(Bt.prototype,"hash",{enumerable:!0,get:function(){return $t.bufferFrom(this._hashStr,"binary")}});Bt.prototype.message=function(t){return this._messagesByName[t]};Bt.prototype.type=function(t){return this._typesByName[t]};Bt.prototype.inspect=function(){return wr("<Service %j>",this.name)};$t.addDeprecatedGetters(Bt,["message","messages","name","type","types"]);Bt.prototype.createEmitter=Dt.deprecate(function(t,e){e=e||{};var r=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=r.createChannel(t,e);return Cw(r,n),n},"use `.createClient()` instead of `.createEmitter()`");Bt.prototype.createListener=Dt.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");Bt.prototype.emit=Dt.deprecate(function(t,e,r,n){if(!r||!this.equals(r.client._svc$))throw new Error("invalid emitter");var i=r.client;return xn.prototype.emitMessage.call(i,t,e,n&&n.bind(this)),r.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");Bt.prototype.equals=Dt.deprecate(function(t){return Bt.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");Bt.prototype.getFingerprint=Dt.deprecate(function(t){return $t.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");Bt.prototype.getSchema=Dt.deprecate(vr.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");Bt.prototype.on=Dt.deprecate(function(t,e){var r=this;return this._server.onMessage(t,function(n,i){return e.call(r,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");Bt.prototype.subprotocol=Dt.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},r=new Zn(t.service,e);return r._handlers=Object.create(t._handlers),new Bt(this.name,this._messagesByName,this._typesByName,this.protocol,r)},"`.subprotocol()` will be removed in 5.1");Bt.prototype._attrs=function(t){var e={protocol:this.name},r=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(t);typeof s!="string"&&r.push(s)}}),r.length&&(e.types=r);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function Pw(t,e,r){r===void 0&&typeof e=="function"&&(r=e,e=void 0);var n=new Bt({protocol:"Empty"},ai),i;n.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(s,o){i=o.serverProtocol,this.destroy(!0)}).once("eot",function(s,o){o&&!/interrupted/.test(o)?r(o):r(null,JSON.parse(i))})}function xn(t,e){e=e||{},cs.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=$t.getOption(e,"timeout",1e4),e.remoteProtocols&&uy(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(r){this[r.name]=this._createMessageHandler$(r)},this)}Dt.inherits(xn,cs.EventEmitter);xn.prototype.activeChannels=function(){return this._channels$.slice()};xn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(p){var m=new qa,_=t(function(S,B){if(S){p(S);return}var T=new Os().once("error",function(A){n.destroy(A)});p(null,B.pipe(T))});if(_)return m.pipe(_),m},n=new gh(this,i,e)}else{var s,o;if(py(t)?s=o=t:(s=t.readable,o=t.writable),!r){var c=new Oo;s=s.pipe(c);var u=new Ha;u.pipe(o),o=u}n=new kf(this,s,o,e),r||(n.once("eot",function(){s.unpipe(c),u.unpipe(o)}),c.once("error",function(p){n.destroy(p)}))}var h=this._channels$;return h.push(n),n.once("_drain",function(){h.splice(h.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};xn.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};xn.prototype.emitMessage=function(t,e,r,n){var i=gy(this._svc$,t),s=new Mf(i,{},e);this._emitMessage$(s,r,n)};xn.prototype.remoteProtocols=function(){return ly(this._cache$,!0)};Object.defineProperty(xn.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});xn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns$.push(r.length<3?r(this):r);return this};xn.prototype._emitMessage$=function(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)cr("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,r)});else{var o=new Error("no active channels");V.process.nextTick(function(){r?r.call(new mh(t._msg),o):n.emit("error",o)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var c;if(s===1)c=i[0];else if(this._policy$){if(c=this._policy$(this._channels$.slice()),!c){cr("policy returned no channel, skipping call");return}}else c=i[Math.floor(Math.random()*s)];c._emit(t,e,function(u,h){var p=this,m=p.message.errorType;if(u){n._strict$&&(u=m.clone(u.message,{wrapUnions:!0})),_(u);return}if(!h){_();return}u=h.error,n._strict$||(u===void 0?u=null:vr.isType(m,"union:unwrapped")?typeof u=="string"&&(u=new Error(u)):u&&u.string&&typeof u.string=="string"&&(u=new Error(u.string))),_(u,h.response);function _(S,B){r?r.call(p,S,B):S&&n.emit("error",S)}})};xn.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),r=e.map(function(i){return i.getName()}),n="return function "+t.name+"(";return r.length&&(n+=r.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=r.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function Zn(t,e){e=e||{},cs.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&uy(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(r){var n=r.name;e.noCapitalize||(n=$t.capitalize(n)),this["on"+n]=this._createMessageHandler(r)},this)}Dt.inherits(Zn,cs.EventEmitter);Zn.prototype.activeChannels=function(){return $t.objectValues(this._channels)};Zn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(m){var _=new Os().once("error",function(S){n.destroy(S)});return t(function(S,B){if(S){m(S);return}var T=new qa;T.pipe(B),m(null,T)}).pipe(_)},n=new ay(this,i,e)}else{var s,o;if(py(t)?s=o=t:(s=t.readable,o=t.writable),!r){var c=new Oo;s=s.pipe(c);var u=new Ha;u.pipe(o),o=u}n=new cy(this,s,o,e),r||(n.once("eot",function(){s.unpipe(c),u.unpipe(o)}),c.once("error",function(m){n.destroy(m)}))}this.listeners("error").length||this.on("error",this._onError);var h=this._nextChannelId++,p=this._channels;return p[h]=n.once("eot",function(){delete p[h]}),this.emit("channel",n),n};Zn.prototype.onMessage=function(t,e){return gy(this.service,t),this._handlers[t]=e,this};Zn.prototype.remoteProtocols=function(){return ly(this._cache,!1)};Zn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns.push(r.length<3?r(this):r);return this};Zn.prototype._createMessageHandler=function(t){var e=t.name,r=t.requestType.fields,n=r.length,i=r.length?", "+r.map(function(o){return"req."+o.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};Zn.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function Ir(t,e){e=e||{},cs.EventEmitter.call(this),this.client=t,this.timeout=$t.getOption(e,"timeout",t._timeout$),this._endWritable=!!$t.getOption(e,"endWritable",!0),this._prefix=hy(e.scope);var r=t._cache$,n=t._svc$,i=e.serverHash;i||(i=n.hash);var s=r[i];s||(i=n.hash,s=r[i]=new fs(n,n,i)),this._adapter=s,this._registry=new Ka(this,dh),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(o,c){cr("client channel EOT"),this.destroyed=!0,this.emit("eot",o,c)})}Dt.inherits(Ir,cs.EventEmitter);Ir.prototype.destroy=function(t){cr("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,r=this.pending;t&&e.clear(),t||!r?xh(t)?(cr("fatal client channel error: %s",t),this.emit("_eot",r,t)):this.emit("_eot",r):cr("client channel entering drain mode (%s pending)",r)};Ir.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var r=this,n=new Mf(ph);this._emit(n,{timeout:t},function(i){e?e.call(r,i):i&&r.destroy(i)})};Ir.prototype._createHandshakeRequest=function(t,e){var r=this.client._svc$;return{clientHash:r.hash,clientProtocol:e?null:JSON.stringify(r.protocol),serverHash:t._hash}};Ir.prototype._emit=function(t,e,r){var n=t._msg,i=n.oneWay?void 0:new yh(n,{}),s=new mh(n,this),o=this;this.pending++,V.process.nextTick(function(){if(!n.name)c(t,i,u);else{o.emit("outgoingCall",s,e);var p=o.client._fns$;cr("starting client middleware chain (%s middleware)",p.length),yy({fns:p,ctx:s,wreq:t,wres:i,onTransition:c,onCompletion:u,onError:h})}});function c(p,m,_){var S,B;if(o.destroyed)S=new Error("channel destroyed");else try{B=p.toBuffer()}catch{S=ul(wr("invalid %j request",n.name),p,[{name:"headers",type:li},{name:"request",type:n.requestType}])}if(S){_(S);return}var T=e&&e.timeout!==void 0?e.timeout:o.timeout,A=o._registry.add(T,function(P,R,F){if(!P&&!n.oneWay)try{F._decodeResponse(R,m,n)}catch(q){P=q}_(P)});A|=o._prefix,cr("sending message %s",A),o._send(A,B,!!n&&n.oneWay)}function u(p){o.pending--,r.call(s,p,i),o.draining&&!o.destroyed&&!o.pending&&o.destroy()}function h(p){o.client.emit("error",p,o)}};Ir.prototype._getAdapter=function(t){var e=t.serverHash,r=this.client._cache$,n=r[e];if(n)return n;var i=JSON.parse(t.serverProtocol),s=Bt.forProtocol(i);return n=new fs(this.client._svc$,s,e,!0),r[e]=n};Ir.prototype._matchesPrefix=function(t){return dy(t,this._prefix)};Ir.prototype._send=$t.abstractFunction;$t.addDeprecatedGetters(Ir,["pending","timeout"]);Ir.prototype.getCache=Dt.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");Ir.prototype.getProtocol=Dt.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");Ir.prototype.isDestroyed=Dt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function gh(t,e,r){Ir.call(this,t,r),this._writableFactory=e,(!r||!r.noPing)&&(cr("emitting ping request"),this.ping())}Dt.inherits(gh,Ir);gh.prototype._send=function(t,e){var r=this._registry.get(t),n=this._adapter,i=this;return V.process.nextTick(s),!0;function s(o){if(!i.destroyed){var c=i._createHandshakeRequest(n,!o),u=i._writableFactory.call(i,function(h,p){if(h){r(h);return}p.on("data",function(m){cr("received response %s",m.id);var _=V.Buffer.concat(m.payload);try{var S=Pf(ja,_),B=S.head;B.serverHash&&(n=i._getAdapter(B))}catch(A){r(A);return}var T=B.match;cr("handshake match: %s",T),i.emit("handshake",c,B),T==="NONE"?V.process.nextTick(function(){s(!0)}):(i._adapter=n,r(null,S.tail,n))})});if(!u){r(new Error("invalid writable stream"));return}u.write({id:t,payload:[$a.toBuffer(c),e]}),i._endWritable&&u.end()}}};function kf(t,e,r,n){Ir.call(this,t,n),this._readable=e,this._writable=r,this._connected=!!(n&&n.noPing),this._readable.on("end",p),this._writable.on("finish",m);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",m),this._endWritable&&(cr("ending transport"),this._writable.end()),this._readable.removeListener("data",u).removeListener("data",h).removeListener("end",p)});var o;this._connected?this._readable.on("data",h):(this._readable.on("data",u),V.process.nextTick(c),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function c(_){if(!i.destroyed){o=i._createHandshakeRequest(i._adapter,!_);var S=[$a.toBuffer(o),$t.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:S})}}function u(_){if(!i._matchesPrefix(_.id)){cr("discarding unscoped response %s (still connecting)",_.id);return}var S=V.Buffer.concat(_.payload);try{var B=Pf(ja,S).head;B.serverHash&&(i._adapter=i._getAdapter(B))}catch(A){i.destroy(A);return}var T=B.match;cr("handshake match: %s",T),i.emit("handshake",o,B),T==="NONE"?V.process.nextTick(function(){c(!0)}):(cr("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",u).on("data",h),i._connected=!0,i.emit("_ready"),o=null)}function h(_){var S=_.id;if(!i._matchesPrefix(S)){cr("discarding unscoped message %s",S);return}var B=i._registry.get(S);B&&V.process.nextTick(function(){cr("received message %s",S),B(null,V.Buffer.concat(_.payload),i._adapter)})}function p(){i.destroy(!0)}function m(){i.destroy()}}Dt.inherits(kf,Ir);kf.prototype._emit=function(){if(this._connected||this.draining)Ir.prototype._emit.apply(this,arguments);else{cr("queuing request");var t=[],e,r;for(e=0,r=arguments.length;e<r;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};kf.prototype._send=function(t,e,r){if(r){var n=this;V.process.nextTick(function(){n._registry.get(t)(null,$t.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:t,payload:[e]})};function Yr(t,e){e=e||{},cs.EventEmitter.call(this),this.server=t,this._endWritable=!!$t.getOption(e,"endWritable",!0),this._prefix=hy(e.scope);var r=t._cache,n=t.service,i=n.hash;r[i]||(r[i]=new fs(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,o){cr("server channel EOT"),this.emit("eot",s,o)})}Dt.inherits(Yr,cs.EventEmitter);Yr.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,xh(t)?(cr("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};Yr.prototype._createHandshakeResponse=function(t,e){var r=this.server.service,n=r.hash,i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(r.protocol),serverHash:i?null:n}};Yr.prototype._getAdapter=function(t){var e=t.clientHash,r=this.server._cache[e];if(r)return r;if(!t.clientProtocol)throw Xi("UNKNOWN_PROTOCOL");var n=JSON.parse(t.clientProtocol),i=Bt.forProtocol(n);return r=new fs(i,this.server.service,e,!0),this.server._cache[e]=r};Yr.prototype._matchesPrefix=function(t){return dy(t,this._prefix)};Yr.prototype._receive=function(t,e,r){var n=this,i;try{i=e._decodeRequest(t)}catch(_){r(n._encodeSystemError(Xi("INVALID_REQUEST",_)));return}var s=i._msg,o=new yh(s,{});if(!s.name){o.response=null,r(o.toBuffer(),!1);return}var c=new mh(s,this);n.emit("incomingCall",c);var u=this.server._fns;cr("starting server middleware chain (%s middleware)",u.length),n.pending++,yy({fns:u,ctx:c,wreq:i,wres:o,onTransition:h,onCompletion:p,onError:m});function h(_,S,B){var T=n.server._handlers[s.name];if(T){var R=!s.oneWay;try{R?T.call(c,_.request,function(F,q){R=!1,S.error=F,S.response=q,B()}):(T.call(c,_.request),B())}catch(F){R?(R=!1,B(F)):m(F)}}else{var A=n.server._defaultHandler;if(A)A.call(c,_,S,B);else{var P=new Error(wr("no handler for %s",s.name));B(Xi("NOT_IMPLEMENTED",P))}}}function p(_){n.pending--;var S=n.server,B;if(!_){var T=o.error,A=S._strict;A||(xh(T)?o.error=s.errorType.clone(T.message,{wrapUnions:!0}):T===null&&(T=o.error=void 0),T===void 0&&o.response===void 0&&s.responseType.isValid(null)&&(o.response=null));try{B=o.toBuffer()}catch{o.error!==void 0?_=ul(wr("invalid %j error",s.name),o,[{name:"headers",type:li},{name:"error",type:s.errorType}]):_=ul(wr("invalid %j response",s.name),o,[{name:"headers",type:li},{name:"response",type:s.responseType}])}}B?T!==void 0&&S.emit("error",Xi("APPLICATION_ERROR",T)):B=n._encodeSystemError(_,o.headers),r(B,s.oneWay),n.draining&&!n.pending&&n.destroy()}function m(_){n.server.emit("error",_,n)}};$t.addDeprecatedGetters(Yr,["pending"]);Yr.prototype.getCache=Dt.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Yr.prototype.getProtocol=Dt.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Yr.prototype.isDestroyed=Dt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Yr.prototype._encodeSystemError=function(t,e){var r=this.server;r.emit("error",t,this);var n;r._sysErrFormatter?n=r._sysErrFormatter.call(this,t):t.rpcCode&&(n=t.message);var i;if(e)try{i=li.toBuffer(e)}catch(s){r.emit("error",s,this)}return V.Buffer.concat([i||$t.bufferFrom([0]),$t.bufferFrom([1,0]),hh.toBuffer(n||"internal server error")])};function ay(t,e,r){Yr.call(this,t,r),this._writable=void 0;var n=this,i;V.process.nextTick(function(){i=e.call(n,function(u,h){V.process.nextTick(function(){if(u){c(u);return}n._writable=h.on("finish",c),n.emit("_writable")})}).on("data",s).on("end",o)});function s(u){var h=u.id,p=V.Buffer.concat(u.payload),m;try{var _=Pf($a,p),S=_.head,B=n._getAdapter(S)}catch(P){m=Xi("INVALID_HANDSHAKE_REQUEST",P)}var T=n._createHandshakeResponse(m,S);n.emit("handshake",S,T),m?A(n._encodeSystemError(m)):n._receive(_.tail,B,A);function A(P){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){A(P)});return}n._writable.write({id:h,payload:[ja.toBuffer(T),P]})}n._writable&&n._endWritable&&n._writable.end()}}function o(){n.destroy()}function c(u){i.removeListener("data",s).removeListener("end",o),n.destroy(u||!0)}}Dt.inherits(ay,Yr);function cy(t,e,r,n){Yr.call(this,t,n),this._adapter=void 0,this._writable=r.on("finish",u),this._readable=e.on("data",s).on("end",c),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",o).removeListener("end",c)}).once("eot",function(){this._writable.removeListener("finish",u),this._endWritable&&this._writable.end()});var i=this;function s(h){var p=h.id;if(!i._matchesPrefix(p))return;var m=V.Buffer.concat(h.payload),_;try{var S=Pf($a,m),B=S.head;i._adapter=i._getAdapter(B)}catch(P){_=Xi("INVALID_HANDSHAKE_REQUEST",P)}var T=i._createHandshakeResponse(_,B);i.emit("handshake",B,T),_?A(i._encodeSystemError(_)):(i._readable.removeListener("data",s).on("data",o),i._receive(S.tail,i._adapter,A));function A(P){i.destroyed||i._writable.write({id:p,payload:[ja.toBuffer(T),P]})}}function o(h){var p=h.id;if(!!i._matchesPrefix(p)){var m=V.Buffer.concat(h.payload);i._receive(m,i._adapter,function(_,S){i.destroyed||S||i._writable.write({id:p,payload:[_]})})}}function c(){i.destroy()}function u(){i.destroy(!0)}}Dt.inherits(cy,Yr);function Mf(t,e,r){this._msg=t,this.headers=e||{},this.request=r||{}}Mf.prototype.toBuffer=function(){var t=this._msg;return V.Buffer.concat([li.toBuffer(this.headers),hh.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function yh(t,e,r,n){this._msg=t,this.headers=e,this.error=r,this.response=n}yh.prototype.toBuffer=function(){var t=li.toBuffer(this.headers),e=this.error!==void 0;return V.Buffer.concat([t,oy.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function mh(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function Ka(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}Ka.prototype.get=function(t){return this._cbs[t&this._mask]};Ka.prototype.add=function(t,e){this._id=this._id+1&this._mask;var r=this,n=this._id,i;return t>0&&(i=setTimeout(function(){s(new Error("timeout"))},t)),this._cbs[n]=s,this._n++,n;function s(){!r._cbs[n]||(delete r._cbs[n],r._n--,i&&clearTimeout(i),e.apply(r._ctx,arguments))}};Ka.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function fs(t,e,r,n){this._clientSvc=t,this._serverSvc=e,this._hash=r,this._isRemote=!!n,this._readers=fy(t,e)}fs.prototype._decodeRequest=function(t){var e=new lh(t),r=li._read(e),n=hh._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=ph,!e.isValid())throw new Error(wr("truncated %s request",n||"ping$"));return new Mf(i,r,s)};fs.prototype._decodeResponse=function(t,e,r){var n=new lh(t);$t.copyOwnProperties(li._read(n),e.headers,!0);var i=oy._read(n),s=r.name;if(s){var o=this._readers[s+(i?"*":"!")];if(r=this._clientSvc.message(s),i?e.error=o._read(n):e.response=o._read(n),!n.isValid())throw new Error(wr("truncated %s response",s))}else r=ph};function Os(){ui.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=$t.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Dt.inherits(Os,ui.Transform);Os.prototype._transform=function(t,e,r){t=V.Buffer.concat([this._buf,t]);for(var n;t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;){if(n)this._bufs.push(t.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(n+4)}this._buf=t,r()};Os.prototype._flush=function(){if(this._buf.length||this._bufs.length){var t=this._bufs.slice();t.unshift(this._buf);var e=Xi("TRAILING_DATA");e.trailingData=V.Buffer.concat(t).toString(),this.emit("error",e)}};function qa(){ui.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Dt.inherits(qa,ui.Transform);qa.prototype._transform=function(t,e,r){var n=t.payload,i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i],this.push(fl(o.length)),this.push(o);this.push(fl(0)),r()};function Oo(){ui.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=$t.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Dt.inherits(Oo,ui.Transform);Oo.prototype._transform=function(t,e,r){for(t=V.Buffer.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,r();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var n;this._frameCount&&t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,n+4)),t=t.slice(n+4);if(this._frameCount){this._buf=t,r();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};Oo.prototype._flush=Os.prototype._flush;function Ha(){ui.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Dt.inherits(Ha,ui.Transform);Ha.prototype._transform=function(t,e,r){var n=t.payload,i=n.length,s;s=$t.newBuffer(8),s.writeInt32BE(t.id,0),s.writeInt32BE(i,4),this.push(s);var o;for(o=0;o<i;o++)s=n[o],this.push(fl(s.length)),this.push(s);r()};function fl(t){var e=$t.newBuffer(4);return e.writeInt32BE(t),e}function Pf(t,e){var r=new lh(e),n=t._read(r);if(!r.isValid())throw new Error(wr("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function xu(t,e){return t.equals(e)?t:t.createResolver(e)}function fy(t,e){var r={};return t.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(wr("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(wr("inconsistent one-way message: %s",i));r[i+"?"]=xu(s.requestType,n.requestType),r[i+"*"]=xu(n.errorType,s.errorType),r[i+"!"]=xu(n.responseType,s.responseType)}catch(o){throw Xi("INCOMPATIBLE_PROTOCOL",o)}}),r}function uy(t,e,r,n){Object.keys(e).forEach(function(i){var s=e[i],o,c;n?(o=r,c=Bt.forProtocol(s)):(o=Bt.forProtocol(s),c=r),t[i]=new fs(o,c,i,!0)})}function ly(t,e){var r={};return Object.keys(t).forEach(function(n){var i=t[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;r[n]=s.protocol}}),r}function xh(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function Cw(t,e){return t.on("error",function(r){e.emit("error",r,t)})}function Bc(t,e){var r=new Error(t);return r.cause=e,r}function Xi(t,e){var r=Bc(t.toLowerCase().replace(/_/g," "),e);return r.rpcCode=e&&e.rpcCode?e.rpcCode:t,r}function ul(t,e,r){var n=[],i,s,o;for(i=0,s=r.length;i<s;i++)o=r[i],o.type.isValid(e[o.name],{errorHook:h});var c=n.map(function(p){return wr("%s = %j but expected %s",p.path,p.value,p.type)}).join(", "),u=new Error(wr("%s (%s)",t,c));return u.details=n,u;function h(p,m,_){var S=[],B,T,A;for(B=0,T=p.length;B<T;B++)A=p[B],isNaN(A)?S.push("."+A):S.push("["+A+"]");n.push({path:o.name+S.join(""),value:m,type:_})}}function hy(t){return t?$t.getHash(t).readInt16BE(0)<<32-dh:0}function dy(t,e){return(t^e)>>32-dh===0}function py(t){return!!(t&&t.pipe)}function gy(t,e){var r=t.message(e);if(!r)throw new Error(wr("unknown message: %s",e));return r}function yy(t){var e=[t.wreq,t.wres],r=[],n;i(0);function i(o){var c=!1;o<t.fns.length?t.fns[o].apply(t.ctx,e.concat(function(u,h){if(c){t.onError(Bc("duplicate forward middleware call",u));return}if(c=!0,u||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){n=u,s();return}h&&r.push(h),i(++o)})):t.onTransition.apply(t.ctx,e.concat(function(u){if(c){t.onError(Bc("duplicate handler call",u));return}c=!0,n=u,V.process.nextTick(s)}))}function s(){var o=r.pop();if(o){var c=!1;o.call(t.ctx,n,function(u){if(c){t.onError(Bc("duplicate backward middleware call",u));return}n=u,c=!0,s()})}else t.onCompletion.call(t.ctx,n)}}var Iw={Adapter:fs,HANDSHAKE_REQUEST_TYPE:$a,HANDSHAKE_RESPONSE_TYPE:ja,Message:Ii,Registry:Ka,Service:Bt,discoverProtocol:Pw,streams:{FrameDecoder:Os,FrameEncoder:qa,NettyDecoder:Oo,NettyEncoder:Ha}};function bh(){return new Error("unsupported in the browser")}function Nw(){return function(t,e,r){r(bh())}}function Bw(){return function(){throw bh()}}var Rw={createImportHook:Nw,createSyncImportHook:Bw,existsSync:function(){return!1},readFileSync:function(){throw bh()}};function Xn(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function fd(t,e){for(var r="",n=0,i=-1,s=0,o,c=0;c<=t.length;++c){if(c<t.length)o=t.charCodeAt(c);else{if(o===47)break;o=47}if(o===47){if(!(i===c-1||s===1))if(i!==c-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),i=c,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=c,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,c):r=t.slice(i+1,c),n=c-i-1;i=c,s=0}else o===46&&s!==-1?++s:s=-1}return r}function Ow(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var mo={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=V.process.cwd()),s=n),Xn(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=fd(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Xn(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=fd(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Xn(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Xn(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":mo.normalize(e)},relative:function(e,r){if(Xn(e),Xn(r),e===r||(e=mo.resolve(e),r=mo.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var c=r.length,u=c-o,h=s<u?s:u,p=-1,m=0;m<=h;++m){if(m===h){if(u>h){if(r.charCodeAt(o+m)===47)return r.slice(o+m+1);if(m===0)return r.slice(o+m)}else s>h&&(e.charCodeAt(n+m)===47?p=m:m===0&&(p=0));break}var _=e.charCodeAt(n+m),S=r.charCodeAt(o+m);if(_!==S)break;_===47&&(p=m)}var B="";for(m=n+p+1;m<=i;++m)(m===i||e.charCodeAt(m)===47)&&(B.length===0?B+="..":B+="/..");return B.length>0?B+r.slice(o+p):(o+=p,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Xn(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!s){i=o;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Xn(e);var n=0,i=-1,s=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var c=r.length-1,u=-1;for(o=e.length-1;o>=0;--o){var h=e.charCodeAt(o);if(h===47){if(!s){n=o+1;break}}else u===-1&&(s=!1,u=o+1),c>=0&&(h===r.charCodeAt(c)?--c===-1&&(i=o):(c=-1,i=u))}return n===i?i=u:i===-1&&(i=e.length),e.slice(n,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(n,i)}},extname:function(e){Xn(e);for(var r=-1,n=0,i=-1,s=!0,o=0,c=e.length-1;c>=0;--c){var u=e.charCodeAt(c);if(u===47){if(!s){n=c+1;break}continue}i===-1&&(s=!1,i=c+1),u===46?r===-1?r=c:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||i===-1||o===0||o===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Ow("/",e)},parse:function(e){Xn(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var o=-1,c=0,u=-1,h=!0,p=e.length-1,m=0;p>=s;--p){if(n=e.charCodeAt(p),n===47){if(!h){c=p+1;break}continue}u===-1&&(h=!1,u=p+1),n===46?o===-1?o=p:m!==1&&(m=1):o!==-1&&(m=-1)}return o===-1||u===-1||m===0||m===1&&o===u-1&&o===c+1?u!==-1&&(c===0&&i?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(c,u)):(c===0&&i?(r.name=e.slice(1,o),r.base=e.slice(1,u)):(r.name=e.slice(c,o),r.base=e.slice(c,u)),r.ext=e.slice(o,u)),c>0?r.dir=e.slice(0,c-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};mo.posix=mo;var Dw=mo,Rc=Rw,my=Bo,ll=Dw,Uw=Io,Eo=Uw.format,Lw={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function vh(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=Rc.createImportHook());var n=[],i,s;e.importHook(t,"idl",function(u,h){if(u){r(u);return}if(h===void 0){r(null,{});return}try{var p=new rr(h,e),m=p._readProtocol(h,e)}catch(_){_.path=t,r(_);return}i=m.protocol,s=m.imports,o()});function o(){var u=s.shift();if(!u)n.length&&(i.types=i.types?n.concat(i.types):n),r(null,i);else{var h=ll.join(ll.dirname(t),u.name);u.kind==="idl"?vh(h,e,c):e.importHook(h,u.kind,function(p,m){if(p){r(p);return}switch(u.kind){case"protocol":case"schema":if(m===void 0){c(null,{});return}try{var _=JSON.parse(m)}catch(B){B.path=h,r(B);return}var S=u.kind==="schema"?{types:[_]}:_;c(null,S);break;default:r(new Error(Eo("invalid import kind: %s",u.kind)))}})}}function c(u,h){if(u){r(u);return}(h.types||[]).forEach(function(p){if(p.namespace===void 0){var m=h.namespace;if(!m){var _=/^(.*)\.[^.]+$/.exec(h.protocol);_&&(m=_[1])}p.namespace=m||""}n.push(p)});try{Object.keys(h.messages||{}).forEach(function(p){if(i.messages||(i.messages={}),i.messages[p])throw new Error(Eo("duplicate message: %s",p));i.messages[p]=h.messages[p]})}catch(p){r(p);return}o()}}function Fw(t){var e;if(typeof t=="string"&&~t.indexOf(ll.sep)&&Rc.existsSync(t)){var r=Rc.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{var n={importHook:Rc.createSyncImportHook()};vh(t,n,function(s,o){e=s?r:o})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return rr.readProtocol(e)}catch{try{return rr.readSchema(e)}catch{return e}}}}function rr(t,e){e=e||{},this._tk=new us(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||Lw}rr.readProtocol=function(t,e){var r=new rr(t,e),n=r._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};rr.readSchema=function(t,e){var r=new rr(t,e),n=r._readJavadoc(),i=r._readType(n===void 0?{}:{doc:n});return r._tk.next({id:"(eof)"}),i};rr.prototype._readProtocol=function(){var t=this._tk,e=[],r=[],n={},i;this._readImports(e);var s={},o=this._readJavadoc();for(o!==void 0&&(s.doc=o),this._readAnnotations(s),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(s.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var c=this._readJavadoc(),u=this._readType(),h=this._readImports(e,!0),p=void 0;if(i=t.pos,!h&&(p=this._readMessage(u))){c!==void 0&&p.schema.doc===void 0&&(p.schema.doc=c);var m=!1;if((p.schema.response==="void"||p.schema.response.type==="void")&&(m=!this._ackVoidMessages&&!p.schema.errors,p.schema.response==="void"?p.schema.response="null":p.schema.response.type="null"),m&&(p.schema["one-way"]=!0),n[p.name])throw new Error(Eo("duplicate message: %s",p.name));n[p.name]=p.schema}else c&&(typeof u=="string"?u={doc:c,type:u}:u.doc===void 0&&(u.doc=c)),r.push(u),t.pos=i,t.next({val:";",silent:!0});c=void 0}return t.next({id:"(eof)"}),r.length&&(s.types=r),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};rr.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var r=[];!e.next({val:"(",silent:!0});)r.push(e.next().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};rr.prototype._readMessage=function(t){var e=this._tk,r={request:[],response:t};this._readAnnotations(r);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do r.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":r.errors=[];do r.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":r["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:r}}};rr.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};rr.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),r={type:this._readType()};return e!==void 0&&r.doc===void 0&&(r.doc=e),this._readAnnotations(r),r.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(r.default=t.next({id:"json"}).val),r};rr.prototype._readType=function(t){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[t.type];return e&&(delete t.type,my.copyOwnProperties(e,t)),Object.keys(t).length>1?t:t.type}};rr.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};rr.prototype._readMap=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.values=this._readType(),e.next({val:">",silent:n}),t};rr.prototype._readArray=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.items=this._readType(),e.next({val:">",silent:n}),t};rr.prototype._readEnum=function(t){var e=this._tk;e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.symbols=[];do t.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return t};rr.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};rr.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};rr.prototype._readImports=function(t,e){for(var r=this._tk,n=0,i=r.pos;r.next({val:"import",silent:!0});){if(!n&&e&&r.next({val:"(",silent:!0})){r.pos=i;return}var s=r.next({id:"name"}).val,o=JSON.parse(r.next({id:"string"}).val);r.next({val:";"}),t.push({kind:s,name:o}),n++}return n};function us(t){this._str=t,this.pos=0}us.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},r=this._skip(t&&t.emitJavadoc);if(r)e.id="javadoc",e.val=r;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var o;if(t&&t.id&&t.id!==e.id?o=this.error(Eo("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(o=this.error(Eo("expected value %s",t.val),e)),o)if(t&&t.silent){this.pos=e.pos;return}else throw o;else return e};us.prototype.error=function(t,e){var r=typeof e!="number",n=r?e.pos:e,i=this._str,s=1,o=0,c;for(c=0;c<n;c++)i.charAt(c)===`
`&&(s++,o=c);var u=r?Eo("invalid token %j: %s",e,t):t,h=new Error(u);return h.token=r?e:void 0,h.lineNum=s,h.colNum=n-o,h};us.prototype._skip=function(t){for(var e=this._str,r=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(r=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,r&&t?$w(e.slice(n+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",n)}};us.prototype._endOf=function(t){for(var e=this.pos,r=this._str;t.test(r.charAt(e));)e++;return e};us.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,r;r=e.charAt(t);){if(r==='"')return t+1;r==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};us.prototype._endOfJson=function(){var t=my.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function $w(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(r,n){return n?r.replace(/^\s*\*\s?/,""):r});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var jw={Tokenizer:us,assembleProtocol:vh,read:Fw,readProtocol:rr.readProtocol,readSchema:rr.readSchema};(function(t){var e=Mw,r=Iw,n=jw,i=Bo;function s(o,c){var u=n.read(o);return u.protocol?r.Service.forProtocol(u,c):e.Type.forSchema(u,c)}t.exports={Service:r.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:r.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,t.exports)})(Zg);var hi=fh,Cr=Bo,ls=pf,za=Io,xy=Ox,Cf={namespace:"org.apache.avro.file"},ud=hi.Type.forSchema("long",Cf),by=hi.Type.forSchema({type:"map",values:"bytes"},Cf),wh=hi.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:by},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},Cf),vy=hi.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},Cf),la=Cr.bufferFrom("Obj"),If=za.format,Aa=Cr.Tap;function Nf(t,e){e=e||{};var r=!!e.noDecode;ls.Duplex.call(this,{readableObjectMode:!r,allowHalfOpen:!1}),this._type=hi.Type.forSchema(t),this._tap=new Aa(Cr.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=_y(r,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}za.inherits(Nf,ls.Duplex);Nf.prototype._write=function(t,e,r){this._writeCb=r;var n=this._tap;n.buf=V.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};Nf.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function Gn(t){t=t||{};var e=!!t.noDecode;ls.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?hi.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new Aa(Cr.newBuffer(0)),this._blockTap=new Aa(Cr.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new Cr.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}za.inherits(Gn,ls.Duplex);Gn.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:xy.inflateRaw}};Gn.getDefaultCodecs=Gn.defaultCodecs;Gn.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<la.length)return!1;if(!la.equals(t.buf.slice(0,la.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=wh._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var r=this._codecs||Gn.getDefaultCodecs();if(this._decompress=r[this._codec],!this._decompress){this.emit("error",new Error(If("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=hi.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=_y(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};Gn.prototype._write=function(t,e,r){var n=this._tap;if(n.buf=V.Buffer.concat([n.buf,t]),n.pos=0,!this._decodeHeader()){V.process.nextTick(r);return}this._write=this._writeChunk,this._write(Cr.newBuffer(0),e,r)};Gn.prototype._writeChunk=function(t,e,r){var n=this._tap;n.buf=V.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0;for(var i=1,s;s=Kw(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,o))}o();function o(){--i||r()}};Gn.prototype._createBlockCallback=function(t,e){var r=this,n=this._index++;return function(i,s){if(i){var o=new Error(If("%s codec decompression error",r._codec));o.cause=i,r.emit("error",o),e()}else r._queue.push(new wy(n,s,e,t)),r._needPush&&r._read()}};Gn.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--,this.push(this._readValue(t))};function Bf(t,e){e=e||{},ls.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=hi.Type.forSchema(t),this._writeValue=function(r,n){try{this._type._write(r,n)}catch(i){this.emit("error",i)}},this._tap=new Aa(Cr.newBuffer(e.batchSize||65536))}za.inherits(Bf,ls.Transform);Bf.prototype._transform=function(t,e,r){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,t),!n.isValid()){s&&this.push(qw(n.buf,0,s));var o=n.pos-s;o>i.length&&(n.buf=Cr.newBuffer(2*o)),n.pos=0,this._writeValue(n,t)}r()};Bf.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()};function Vn(t,e){e=e||{},ls.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var r;if(hi.Type.isType(t)?(r=t,t=void 0):r=hi.Type.forSchema(t),this._schema=t,this._type=r,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(o){this.emit("error",o)}},this._blockSize=e.blockSize||65536,this._tap=new Aa(Cr.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new Cr.Lcg().nextBuffer(16),this._queue=new Cr.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!by.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||Vn.getDefaultCodecs())[n],!this._compress)throw new Error(If("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}za.inherits(Vn,ls.Duplex);Vn.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:xy.deflateRaw}};Vn.getDefaultCodecs=Vn.defaultCodecs;Vn.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=Cr.copyOwnProperties(this._metadata,{"avro.schema":Cr.bufferFrom(t),"avro.codec":Cr.bufferFrom(this._codec)},!0),r=wh.getRecordConstructor(),n=new r(la,e,this._syncMarker);this.push(n.toBuffer())};Vn.prototype._write=function(t,e,r){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,t),!n.isValid()){i&&(this._flushChunk(i,r),s=!0);var o=n.pos-i;o>this._blockSize&&(this._blockSize=o*2),n.buf=Cr.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,t)}this._blockCount++,s||r()};Vn.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0};Vn.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?V.process.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(ud.toBuffer(e.count,!0)),this.push(ud.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};Vn.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var o=new Error(If("%s codec compression error",e._codec));o.cause=i,e.emit("error",o);return}e._pending--,e._queue.push(new wy(r,s,t,n)),e._needPush&&(e._needPush=!1,e._read())}};function wy(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=n|0}function Kw(t){var e=t.pos,r=vy._read(t);return t.isValid()?r:(t.pos=e,null)}function _y(t,e,r){if(t)return function(i){return function(s){var o=s.pos;return i(s),s.buf.slice(o,s.pos)}}(e._skip);if(r){var n=r.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function qw(t,e,r){var n=Cr.newBuffer(r);return t.copy(n,0,e,e+r),n}var Hw={BLOCK_TYPE:vy,HEADER_TYPE:wh,MAGIC_BYTES:la,streams:{BlockDecoder:Gn,BlockEncoder:Vn,RawDecoder:Nf,RawEncoder:Bf}};(function(t){var e=Zg.exports,r=Hw,n=Bo,i=pf,s=Io;function o(p,m){i.Readable.call(this),m=m||{},this._batchSize=m.batchSize||65536,this._blob=p,this._pos=0}s.inherits(o,i.Readable),o.prototype._read=function(){var p=this._pos;if(p>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var m=this._blob.slice(p,this._pos,this._blob.type),_=new FileReader,S=this;_.addEventListener("loadend",function B(T){_.removeEventListener("loadend",B,!1),T.error?S.emit("error",T.error):S.push(n.bufferFrom(_.result))},!1),_.readAsArrayBuffer(m)};function c(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(c,i.Transform),c.prototype._transform=function(p,m,_){this._bufs.push(p),_()},c.prototype._flush=function(p){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),p()};function u(p,m){return new o(p).pipe(new r.streams.BlockDecoder(m))}function h(p,m){var _=new r.streams.BlockEncoder(p,m),S=new c;return _.pipe(S),new i.Duplex({objectMode:!0,read:function(){var B=S.read();B?A(B):S.once("readable",A);var T=this;function A(P){T.push(P||S.read()),T.push(null)}},write:function(B,T,A){return _.write(B,T,A)}}).on("finish",function(){_.end()})}t.exports={createBlobDecoder:u,createBlobEncoder:h,streams:r.streams},n.copyOwnProperties(e,t.exports)})(Yg);(function(t){var e=j&&j.__createBinding||(Object.create?function(o,c,u,h){h===void 0&&(h=u),Object.defineProperty(o,h,{enumerable:!0,get:function(){return c[u]}})}:function(o,c,u,h){h===void 0&&(h=u),o[h]=c[u]}),r=j&&j.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),n=j&&j.__importStar||function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&e(c,o,u);return r(c,o),c};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTags=t.tagsParser=t.tagParser=void 0;const i=n(Yg.exports);t.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),t.tagsParser=i.Type.forSchema({type:"array",items:t.tagParser});function s(o){if(o.length==0)return new Uint8Array(0);let c;try{c=t.tagsParser.toBuffer(o)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(c)}t.serializeTags=s})(ih);var Do={},Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Signer=void 0;class zw{static verify(e){throw new Error("You must implement verify method on child")}}Rf.Signer=zw;var Of={},Ga={},Ey=Nl(Dx),Ds={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIG_CONFIG=t.SignatureConfig=void 0;var e;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA"})(e=t.SignatureConfig||(t.SignatureConfig={})),t.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(Ds);var Gw=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vw=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jw=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gw(e,t,r);return Vw(e,t),e},Ww=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0});const Yw=Ww(Wn.exports),ld=Jw(Ey),hd=Ds;class Zw{constructor(e,r){this._key=e,this.pk=r,this.ownerLength=hd.SIG_CONFIG[2].pubLength,this.signatureLength=hd.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return ld.sign(V.Buffer.from(e),V.Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=Yw.default.toBuffer(e)),ld.verify(V.Buffer.from(n),V.Buffer.from(r),V.Buffer.from(i))}}Ga.default=Zw;var Uo={},_h={};const It={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Pn(t,e){if(!t)throw new Error(e)}function kt(t,e,r){if(Pn(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;Pn(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;Pn(e.length===r,n)}}function ms(t){Pn(ao(t)==="Boolean","Expected compressed to be a Boolean")}function Ln(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),kt("output",t,e),t}function ao(t){return Object.prototype.toString.call(t).slice(8,-1)}var Xw=t=>({contextRandomize(e){switch(Pn(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&kt("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(It.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return kt("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(kt("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(It.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(kt("private key",e,32),kt("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(It.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(kt("private key",e,32),kt("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(It.TWEAK_MUL)}},publicKeyVerify(e){return kt("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(kt("private key",e,32),ms(r),n=Ln(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(It.SECKEY_INVALID);case 2:throw new Error(It.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(kt("public key",e,[33,65]),ms(r),n=Ln(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(kt("public key",e,[33,65]),ms(r),n=Ln(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.IMPOSSIBLE_CASE);case 3:throw new Error(It.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){Pn(Array.isArray(e),"Expected public keys to be an Array"),Pn(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)kt("public key",i,[33,65]);switch(ms(r),n=Ln(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.PUBKEY_COMBINE);case 3:throw new Error(It.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(kt("public key",e,[33,65]),kt("tweak",r,32),ms(n),i=Ln(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(kt("public key",e,[33,65]),kt("tweak",r,32),ms(n),i=Ln(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.TWEAK_MUL)}},signatureNormalize(e){switch(kt("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(It.SIG_PARSE)}},signatureExport(e,r){kt("signature",e,64),r=Ln(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(It.SIG_PARSE);case 2:throw new Error(It.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(kt("signature",e),r=Ln(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(It.SIG_PARSE);case 2:throw new Error(It.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){kt("message",e,32),kt("private key",r,32),Pn(ao(n)==="Object","Expected options to be an Object"),n.data!==void 0&&kt("options.data",n.data),n.noncefn!==void 0&&Pn(ao(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Ln(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(It.SIGN);case 2:throw new Error(It.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(kt("signature",e,64),kt("message",r,32),kt("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(It.SIG_PARSE);case 2:throw new Error(It.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(kt("signature",e,64),Pn(ao(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),kt("message",n,32),ms(i),s=Ln(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(It.SIG_PARSE);case 2:throw new Error(It.RECOVER);case 3:throw new Error(It.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(kt("public key",e,[33,65]),kt("private key",r,32),Pn(ao(n)==="Object","Expected options to be an Object"),n.data!==void 0&&kt("options.data",n.data),n.hashfn!==void 0?(Pn(ao(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&kt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&kt("options.ybuf",n.ybuf,32),kt("output",i)):i=Ln(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(It.PUBKEY_PARSE);case 2:throw new Error(It.ECDH)}}});const Qw=Lx.ec,ti=new Qw("secp256k1"),Et=ti.curve,jt=Et.n.constructor;function e2(t,e){let r=new jt(e);if(r.cmp(Et.p)>=0)return null;r=r.toRed(Et.red);let n=r.redSqr().redIMul(r).redIAdd(Et.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),ti.keyPair({pub:{x:r,y:n}})}function t2(t,e,r){let n=new jt(e),i=new jt(r);if(n.cmp(Et.p)>=0||i.cmp(Et.p)>=0||(n=n.toRed(Et.red),i=i.toRed(Et.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(Et.b)).isZero()?ti.keyPair({pub:{x:n,y:i}}):null}function $i(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:e2(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:t2(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function xs(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var r2={contextRandomize(){return 0},privateKeyVerify(t){const e=new jt(t);return e.cmp(Et.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new jt(t),r=Et.n.sub(e).umod(Et.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new jt(e);if(r.cmp(Et.n)>=0||(r.iadd(new jt(t)),r.cmp(Et.n)>=0&&r.isub(Et.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new jt(e);if(r.cmp(Et.n)>=0||r.isZero())return 1;r.imul(new jt(t)),r.cmp(Et.n)>=0&&(r=r.umod(Et.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return $i(t)===null?1:0},publicKeyCreate(t,e){const r=new jt(e);if(r.cmp(Et.n)>=0||r.isZero())return 1;const n=ti.keyFromPrivate(e).getPublic();return xs(t,n),0},publicKeyConvert(t,e){const r=$i(e);if(r===null)return 1;const n=r.getPublic();return xs(t,n),0},publicKeyNegate(t,e){const r=$i(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),xs(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=$i(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(xs(t,n),0)},publicKeyTweakAdd(t,e,r){const n=$i(e);if(n===null)return 1;if(r=new jt(r),r.cmp(Et.n)>=0)return 2;const i=n.getPublic().add(Et.g.mul(r));return i.isInfinity()?2:(xs(t,i),0)},publicKeyTweakMul(t,e,r){const n=$i(e);if(n===null)return 1;if(r=new jt(r),r.cmp(Et.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return xs(t,i),0},signatureNormalize(t){const e=new jt(t.subarray(0,32)),r=new jt(t.subarray(32,64));return e.cmp(Et.n)>=0||r.cmp(Et.n)>=0?1:(r.cmp(ti.nh)===1&&t.set(Et.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new jt(r).cmp(Et.n)>=0||new jt(n).cmp(Et.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,c=0;for(;o>1&&s[c]===0&&!(s[c+1]&128);--o,++c);if(s=s.subarray(c),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let u=i.subarray(6+33,6+33+33);u[0]=0,u.set(n,1);let h=33,p=0;for(;h>1&&u[p]===0&&!(u[p+1]&128);--h,++p);return u=u.subarray(p),u[0]&128||h>1&&u[0]===0&&!(u[1]&128)?1:(t.outputlen=6+o+h,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+o]=2,i[5+o]=u.length,i.set(u,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new jt(i);o.cmp(Et.n)>=0&&(o=new jt(0));let c=new jt(e.subarray(6+r));return c.cmp(Et.n)>=0&&(c=new jt(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(c.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const c=i;i=u=>{const h=c(e,r,null,n,u);if(!(h instanceof Uint8Array&&h.length===32))throw new Error("This is the way");return new jt(h)}}const s=new jt(r);if(s.cmp(Et.n)>=0||s.isZero())return 1;let o;try{o=ti.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new jt(n.r),s=new jt(n.s);if(i.cmp(Et.n)>=0||s.cmp(Et.n)>=0)return 1;if(s.cmp(ti.nh)===1||i.isZero()||s.isZero())return 3;const o=$i(r);if(o===null)return 2;const c=o.getPublic();return ti.verify(e,n,c)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new jt(i.r),o=new jt(i.s);if(s.cmp(Et.n)>=0||o.cmp(Et.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let c;try{c=ti.recoverPubKey(n,i,r)}catch{return 2}return xs(t,c),0},ecdh(t,e,r,n,i,s,o){const c=$i(e);if(c===null)return 1;const u=new jt(r);if(u.cmp(Et.n)>=0||u.isZero())return 2;const h=c.getPublic().mul(u);if(i===void 0){const p=h.encode(null,!0),m=ti.hash().update(p).digest();for(let _=0;_<32;++_)t[_]=m[_]}else{s||(s=new Uint8Array(32));const p=h.getX().toArray("be",32);for(let B=0;B<32;++B)s[B]=p[B];o||(o=new Uint8Array(32));const m=h.getY().toArray("be",32);for(let B=0;B<32;++B)o[B]=m[B];const _=i(s,o,n);if(!(_ instanceof Uint8Array&&_.length===t.length))return 2;t.set(_)}return 0}},Ay=Xw(r2);const{Transform:n2}=dg.exports;var i2=t=>class Sy extends n2{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!V.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return V.Buffer.isBuffer(r)||(r=V.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Sy(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:s2}=dg.exports;var o2=t=>class Ty extends s2{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!V.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return V.Buffer.isBuffer(r)||(r=V.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Ty(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const a2=i2,c2=o2;var f2=function(t){const e=a2(t),r=c2(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},ky={};const dd=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];ky.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],h=t[7]^t[17]^t[27]^t[37]^t[47],p=t[8]^t[18]^t[28]^t[38]^t[48],m=t[9]^t[19]^t[29]^t[39]^t[49];let _=p^(i<<1|s>>>31),S=m^(s<<1|i>>>31);const B=t[0]^_,T=t[1]^S,A=t[10]^_,P=t[11]^S,R=t[20]^_,F=t[21]^S,q=t[30]^_,U=t[31]^S,K=t[40]^_,Z=t[41]^S;_=r^(o<<1|c>>>31),S=n^(c<<1|o>>>31);const Q=t[2]^_,ue=t[3]^S,be=t[12]^_,ce=t[13]^S,te=t[22]^_,b=t[23]^S,a=t[32]^_,l=t[33]^S,y=t[42]^_,v=t[43]^S;_=i^(u<<1|h>>>31),S=s^(h<<1|u>>>31);const w=t[4]^_,k=t[5]^S,C=t[14]^_,d=t[15]^S,f=t[24]^_,x=t[25]^S,D=t[34]^_,O=t[35]^S,G=t[44]^_,ye=t[45]^S;_=o^(p<<1|m>>>31),S=c^(m<<1|p>>>31);const fe=t[6]^_,oe=t[7]^S,ut=t[16]^_,Se=t[17]^S,ke=t[26]^_,pr=t[27]^S,qe=t[36]^_,Ze=t[37]^S,lr=t[46]^_,rt=t[47]^S;_=u^(r<<1|n>>>31),S=h^(n<<1|r>>>31);const nt=t[8]^_,Br=t[9]^S,ze=t[18]^_,it=t[19]^S,_n=t[28]^_,Xe=t[29]^S,Ge=t[38]^_,En=t[39]^S,Ve=t[48]^_,Qe=t[49]^S,cn=B,et=T,st=P<<4|A>>>28,fn=A<<4|P>>>28,Je=R<<3|F>>>29,He=F<<3|R>>>29,Hr=U<<9|q>>>23,Le=q<<9|U>>>23,$e=K<<18|Z>>>14,Zr=Z<<18|K>>>14,je=Q<<1|ue>>>31,Ke=ue<<1|Q>>>31,un=ce<<12|be>>>20,tt=be<<12|ce>>>20,ot=te<<10|b>>>22,Un=b<<10|te>>>22,Re=l<<13|a>>>19,Ue=a<<13|l>>>19,Rr=y<<2|v>>>30,We=v<<2|y>>>30,Ye=k<<30|w>>>2,An=w<<30|k>>>2,at=C<<6|d>>>26,Me=d<<6|C>>>26,Sn=x<<11|f>>>21,E=f<<11|x>>>21,M=D<<15|O>>>17,I=O<<15|D>>>17,g=ye<<29|G>>>3,N=G<<29|ye>>>3,z=fe<<28|oe>>>4,H=oe<<28|fe>>>4,J=Se<<23|ut>>>9,le=ut<<23|Se>>>9,ae=ke<<25|pr>>>7,re=pr<<25|ke>>>7,ct=qe<<21|Ze>>>11,ve=Ze<<21|qe>>>11,Pe=rt<<24|lr>>>8,Ce=lr<<24|rt>>>8,De=nt<<27|Br>>>5,Oe=Br<<27|nt>>>5,Ie=ze<<20|it>>>12,Be=it<<20|ze>>>12,Ne=Xe<<7|_n>>>25,we=_n<<7|Xe>>>25,Ae=Ge<<8|En>>>24,me=En<<8|Ge>>>24,_e=Ve<<14|Qe>>>18,Ee=Qe<<14|Ve>>>18;t[0]=cn^~un&Sn,t[1]=et^~tt&E,t[10]=z^~Ie&Je,t[11]=H^~Be&He,t[20]=je^~at&ae,t[21]=Ke^~Me&re,t[30]=De^~st&ot,t[31]=Oe^~fn&Un,t[40]=Ye^~J&Ne,t[41]=An^~le&we,t[2]=un^~Sn&ct,t[3]=tt^~E&ve,t[12]=Ie^~Je&Re,t[13]=Be^~He&Ue,t[22]=at^~ae&Ae,t[23]=Me^~re&me,t[32]=st^~ot&M,t[33]=fn^~Un&I,t[42]=J^~Ne&Hr,t[43]=le^~we&Le,t[4]=Sn^~ct&_e,t[5]=E^~ve&Ee,t[14]=Je^~Re&g,t[15]=He^~Ue&N,t[24]=ae^~Ae&$e,t[25]=re^~me&Zr,t[34]=ot^~M&Pe,t[35]=Un^~I&Ce,t[44]=Ne^~Hr&Rr,t[45]=we^~Le&We,t[6]=ct^~_e&cn,t[7]=ve^~Ee&et,t[16]=Re^~g&z,t[17]=Ue^~N&H,t[26]=Ae^~$e&je,t[27]=me^~Zr&Ke,t[36]=M^~Pe&De,t[37]=I^~Ce&Oe,t[46]=Hr^~Rr&Ye,t[47]=Le^~We&An,t[8]=_e^~cn&un,t[9]=Ee^~et&tt,t[18]=g^~z&Ie,t[19]=N^~H&Be,t[28]=$e^~je&at,t[29]=Zr^~Ke&Me,t[38]=Pe^~De&st,t[39]=Ce^~Oe&fn,t[48]=Rr^~Ye&J,t[49]=We^~An&le,t[0]^=dd[e*2],t[1]^=dd[e*2+1]}};const Zc=ky;function Lo(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Lo.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};Lo.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Zc.p1600(this.state),this.count=0)};Lo.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&Zc.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Zc.p1600(this.state),this.count=0,this.squeezing=!0};Lo.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=V.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Zc.p1600(this.state),this.count=0);return e};Lo.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var u2=Lo,l2=f2(u2),My=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const h2=My(lg.exports),Hi=Bl,d2=My(l2);function Py(t){return t=p2(t),d2.default("keccak256").update(t).digest()}function p2(t){if(!Hi.Buffer.isBuffer(t))if(Array.isArray(t))t=Hi.Buffer.from(t);else if(typeof t=="string")g2(t)?t=Hi.Buffer.from(Cy(y2(t)),"hex"):t=Hi.Buffer.from(t);else if(typeof t=="number")t=x2(t);else if(t==null)t=Hi.Buffer.allocUnsafe(0);else if(h2.default.isBN(t))t=t.toArrayLike(Hi.Buffer);else if(t.toArray)t=Hi.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function g2(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Cy(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function y2(t){return typeof t!="string"?t:m2(t)?t.slice(2):t}function m2(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}function x2(t){const e=b2(t);return Hi.Buffer.from(Cy(e.slice(2)),"hex")}function b2(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=Py);var Iy=Py,Eh=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_h,"__esModule",{value:!0});const v2=Eh(Wn.exports),pd=Eh(Ay),Jo=Ds,gd=Eh(Iy);class w2{constructor(e,r){this._key=e,this.ownerLength=Jo.SIG_CONFIG[Jo.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=Jo.SIG_CONFIG[Jo.SignatureConfig.ETHEREUM].sigLength,this.signatureType=Jo.SignatureConfig.ETHEREUM,this.pk=r.toString("hex")}get publicKey(){return V.Buffer.alloc(0)}get key(){return V.Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=v2.default.toBuffer(e));let s=!1;try{s=pd.default.ecdsaVerify(n,gd.default(V.Buffer.from(r)),i)}catch{}return s}sign(e){return pd.default.ecdsaSign(gd.default(V.Buffer.from(e)),V.Buffer.from(this.key)).signature}}_h.default=w2;const _2="logger/5.7.0";let yd=!1,md=!1;const Oc={debug:1,default:2,info:2,warning:3,error:4,off:5};let xd=Oc.default,bu=null;function E2(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const bd=E2();var hl;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(hl||(hl={}));var dn;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(dn||(dn={}));const vd="0123456789abcdef";class ${constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Oc[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(xd>Oc[n])&&console.log.apply(console,r)}debug(...e){this._log($.levels.DEBUG,e)}info(...e){this._log($.levels.INFO,e)}warn(...e){this._log($.levels.WARNING,e)}makeError(e,r,n){if(md)return this.makeError("censored error",r,{});r||(r=$.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(u=>{const h=n[u];try{if(h instanceof Uint8Array){let p="";for(let m=0;m<h.length;m++)p+=vd[h[m]>>4],p+=vd[h[m]&15];i.push(u+"=Uint8Array(0x"+p+")")}else i.push(u+"="+JSON.stringify(h))}catch{i.push(u+"="+JSON.stringify(n[u].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case dn.NUMERIC_FAULT:{o="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":o+="-"+u;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case dn.CALL_EXCEPTION:case dn.INSUFFICIENT_FUNDS:case dn.MISSING_NEW:case dn.NONCE_EXPIRED:case dn.REPLACEMENT_UNDERPRICED:case dn.TRANSACTION_REPLACED:case dn.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const c=new Error(e);return c.reason=s,c.code=r,Object.keys(n).forEach(function(u){c[u]=n[u]}),c}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,$.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){bd&&this.throwError("platform missing String.prototype.normalize",$.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:bd})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,$.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,$.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,$.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,$.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",$.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",$.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",$.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return bu||(bu=new $(_2)),bu}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",$.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yd){if(!e)return;this.globalLogger().throwError("error censorship permanent",$.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}md=!!e,yd=!!r}static setLogLevel(e){const r=Oc[e.toLowerCase()];if(r==null){$.globalLogger().warn("invalid log level - "+e);return}xd=r}static from(e){return new $(e)}}$.errors=dn;$.levels=hl;const A2="bytes/5.7.0",Qt=new $(A2);function Ny(t){return!!t.toHexString}function xo(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return xo(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Va(t){return pt(t)&&!(t.length%2)||hs(t)}function wd(t){return typeof t=="number"&&t==t&&t%1===0}function hs(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!wd(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!wd(r)||r<0||r>=256)return!1}return!0}function de(t,e){if(e||(e={}),typeof t=="number"){Qt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),xo(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ny(t)&&(t=t.toHexString()),pt(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Qt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return xo(new Uint8Array(n))}return hs(t)?xo(new Uint8Array(t)):Qt.throwArgumentError("invalid arrayify value","value",t)}function Kt(t){const e=t.map(i=>de(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),xo(n)}function ci(t){let e=de(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function ha(t,e){t=de(t),t.length>e&&Qt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),xo(r)}function pt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const vu="0123456789abcdef";function ge(t,e){if(e||(e={}),typeof t=="number"){Qt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=vu[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ny(t))return t.toHexString();if(pt(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Qt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(hs(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=vu[(i&240)>>4]+vu[i&15]}return r}return Qt.throwArgumentError("invalid hexlify value","value",t)}function di(t){if(typeof t!="string")t=ge(t);else if(!pt(t)||t.length%2)return null;return(t.length-2)/2}function ar(t,e,r){return typeof t!="string"?t=ge(t):(!pt(t)||t.length%2)&&Qt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function zr(t){let e="0x";return t.forEach(r=>{e+=ge(r).substring(2)}),e}function Ja(t){const e=By(ge(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function By(t){typeof t!="string"&&(t=ge(t)),pt(t)||Qt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function qt(t,e){for(typeof t!="string"?t=ge(t):pt(t)||Qt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Qt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Us(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Va(t)){let r=de(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=ge(r.slice(0,32)),e.s=ge(r.slice(32,64))):r.length===65?(e.r=ge(r.slice(0,32)),e.s=ge(r.slice(32,64)),e.v=r[64]):Qt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Qt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=ge(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=ha(de(e._vs),32);e._vs=ge(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Qt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=ge(i);e.s==null?e.s=o:e.s!==o&&Qt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Qt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Qt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!pt(e.r)?Qt.throwArgumentError("signature missing or invalid r","signature",t):e.r=qt(e.r,32),e.s==null||!pt(e.s)?Qt.throwArgumentError("signature missing or invalid s","signature",t):e.s=qt(e.s,32);const r=de(e.s);r[0]>=128&&Qt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=ge(r);e._vs&&(pt(e._vs)||Qt.throwArgumentError("signature invalid _vs","signature",t),e._vs=qt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Qt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function dl(t){return t=Us(t),ge(Kt([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const Ry="bignumber/5.7.0";var Sa=lt.BN;const Ai=new $(Ry),wu={},_d=9007199254740991;function S2(t){return t!=null&&(he.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||pt(t)||typeof t=="bigint"||hs(t))}let Ed=!1;class he{constructor(e,r){e!==wu&&Ai.throwError("cannot call constructor directly; use BigNumber.from",$.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Xr(_t(this).fromTwos(e))}toTwos(e){return Xr(_t(this).toTwos(e))}abs(){return this._hex[0]==="-"?he.from(this._hex.substring(1)):this}add(e){return Xr(_t(this).add(_t(e)))}sub(e){return Xr(_t(this).sub(_t(e)))}div(e){return he.from(e).isZero()&&Tn("division-by-zero","div"),Xr(_t(this).div(_t(e)))}mul(e){return Xr(_t(this).mul(_t(e)))}mod(e){const r=_t(e);return r.isNeg()&&Tn("division-by-zero","mod"),Xr(_t(this).umod(r))}pow(e){const r=_t(e);return r.isNeg()&&Tn("negative-power","pow"),Xr(_t(this).pow(r))}and(e){const r=_t(e);return(this.isNegative()||r.isNeg())&&Tn("unbound-bitwise-result","and"),Xr(_t(this).and(r))}or(e){const r=_t(e);return(this.isNegative()||r.isNeg())&&Tn("unbound-bitwise-result","or"),Xr(_t(this).or(r))}xor(e){const r=_t(e);return(this.isNegative()||r.isNeg())&&Tn("unbound-bitwise-result","xor"),Xr(_t(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Tn("negative-width","mask"),Xr(_t(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Tn("negative-width","shl"),Xr(_t(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Tn("negative-width","shr"),Xr(_t(this).shrn(e))}eq(e){return _t(this).eq(_t(e))}lt(e){return _t(this).lt(_t(e))}lte(e){return _t(this).lte(_t(e))}gt(e){return _t(this).gt(_t(e))}gte(e){return _t(this).gte(_t(e))}isNegative(){return this._hex[0]==="-"}isZero(){return _t(this).isZero()}toNumber(){try{return _t(this).toNumber()}catch{Tn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ai.throwError("this platform does not support BigInt",$.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Ed||(Ed=!0,Ai.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ai.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",$.errors.UNEXPECTED_ARGUMENT,{}):Ai.throwError("BigNumber.toString does not accept parameters",$.errors.UNEXPECTED_ARGUMENT,{})),_t(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof he)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new he(wu,Ta(e)):e.match(/^-?[0-9]+$/)?new he(wu,Ta(new Sa(e))):Ai.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Tn("underflow","BigNumber.from",e),(e>=_d||e<=-_d)&&Tn("overflow","BigNumber.from",e),he.from(String(e));const r=e;if(typeof r=="bigint")return he.from(r.toString());if(hs(r))return he.from(ge(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return he.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(pt(n)||n[0]==="-"&&pt(n.substring(1))))return he.from(n)}return Ai.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ta(t){if(typeof t!="string")return Ta(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Ai.throwArgumentError("invalid hex","value",t),t=Ta(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Xr(t){return he.from(Ta(t))}function _t(t){const e=he.from(t).toHexString();return e[0]==="-"?new Sa("-"+e.substring(3),16):new Sa(e.substring(2),16)}function Tn(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Ai.throwError(t,$.errors.NUMERIC_FAULT,n)}function T2(t){return new Sa(t,36).toString(16)}function k2(t){return new Sa(t,16).toString(36)}const Gr=new $(Ry),da={},Oy=he.from(0),Dy=he.from(-1);function Uy(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Gr.throwError(t,$.errors.NUMERIC_FAULT,i)}let pa="0";for(;pa.length<256;)pa+=pa;function Ah(t){if(typeof t!="number")try{t=he.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+pa.substring(0,t):Gr.throwArgumentError("invalid decimal size","decimals",t)}function Dc(t,e){e==null&&(e=0);const r=Ah(e);t=he.from(t);const n=t.lt(Oy);n&&(t=t.mul(Dy));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function ei(t,e){e==null&&(e=0);const r=Ah(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Gr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Gr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Gr.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&Uy("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const c=he.from(s),u=he.from(o);let h=c.mul(r).add(u);return n&&(h=h.mul(Dy)),h}class bo{constructor(e,r,n,i){e!==da&&Gr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",$.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Ah(i),Object.freeze(this)}static from(e){if(e instanceof bo)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Gr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,c,u)=>e[o]==null?u:(typeof e[o]!==c&&Gr.throwArgumentError("invalid fixed format ("+o+" not "+c+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Gr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Gr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new bo(da,r,n,i)}}class xr{constructor(e,r,n,i){e!==da&&Gr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",$.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Gr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=ei(this._value,this.format.decimals),n=ei(e._value,e.format.decimals);return xr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=ei(this._value,this.format.decimals),n=ei(e._value,e.format.decimals);return xr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=ei(this._value,this.format.decimals),n=ei(e._value,e.format.decimals);return xr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=ei(this._value,this.format.decimals),n=ei(e._value,e.format.decimals);return xr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=xr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(Ad.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=xr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(Ad.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Gr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=xr.from("1"+pa.substring(0,e),this.format),i=M2.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Gr.throwArgumentError("invalid byte width","width",e);const r=he.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return qt(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return xr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!S2(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),xr.fromString(Dc(e,r),bo.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=bo.from(r),i=ei(e,n.decimals);!n.signed&&i.lt(Oy)&&Uy("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=qt(s,n.width/8));const o=Dc(i,n.decimals);return new xr(da,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=bo.from(r);if(de(e).length>n.width/8)throw new Error("overflow");let i=he.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Dc(i,n.decimals);return new xr(da,s,o,n)}static from(e,r){if(typeof e=="string")return xr.fromString(e,r);if(hs(e))return xr.fromBytes(e,r);try{return xr.fromValue(e,0,r)}catch(n){if(n.code!==$.errors.INVALID_ARGUMENT)throw n}return Gr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const Ad=xr.from(1),M2=xr.from("0.5"),P2="properties/5.7.0";var C2=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Xc=new $(P2);function X(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Mr(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function er(t){return C2(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Sh(t,e){(!t||typeof t!="object")&&Xc.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Xc.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Ht(t){const e={};for(const r in t)e[r]=t[r];return e}const I2={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ly(t){if(t==null||I2[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Ly(n))return!1}return!0}return Xc.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function N2(t){if(Ly(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Jr(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&X(e,r,Jr(n))}return e}return Xc.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Jr(t){return N2(t)}class Ls{constructor(e){for(const r in e)this[r]=Jr(e[r])}}const Wa="abi/5.7.0",At=new $(Wa),Ms={};let Sd={calldata:!0,memory:!0,storage:!0},B2={calldata:!0,memory:!0};function pc(t,e){if(t==="bytes"||t==="string"){if(Sd[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&B2[e])return!0;return(Sd[e]||e==="payable")&&At.throwArgumentError("invalid modifier","name",e),!1}function R2(t,e){let r=t;function n(c){At.throwArgumentError(`unexpected character at position ${c}`,"param",t)}t=t.replace(/\s/g," ");function i(c){let u={type:"",name:"",parent:c,state:{allowType:!0}};return e&&(u.indexed=!1),u}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let c=0;c<t.length;c++){let u=t[c];switch(u){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(c),o.state.allowType=!1,o.type=co(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(c),o.indexed=!0,o.name=""),pc(o.type,o.name)&&(o.name=""),o.type=co(o.type);let h=o;o=o.parent,o||n(c),delete h.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(c),o.indexed=!0,o.name=""),pc(o.type,o.name)&&(o.name=""),o.type=co(o.type);let p=i(o.parent);o.parent.components.push(p),delete o.parent,o=p;break;case" ":o.state.allowType&&o.type!==""&&(o.type=co(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(c),o.indexed&&n(c),o.indexed=!0,o.name=""):pc(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(c),o.type+=u,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(c),o.type+=u,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=u,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=u,delete o.state.allowArray):o.state.readArray?o.type+=u:n(c)}}return o.parent&&At.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):pc(o.type,o.name)&&(o.name=""),s.type=co(s.type),s}function Uc(t,e){for(let r in e)X(t,r,e[r])}const Ct=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),O2=new RegExp(/^(.*)\[([0-9]*)\]$/);class br{constructor(e,r){e!==Ms&&At.throwError("use fromString",$.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Uc(this,r);let n=this.type.match(O2);n?Uc(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:br.fromObject({type:n[1],components:this.components}),baseType:"array"}):Uc(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Ct.sighash),Ct[e]||At.throwArgumentError("invalid format type","format",e),e===Ct.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Ct.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Ct.full?", ":",")+")"):r+=this.type,e!==Ct.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Ct.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?br.fromString(e,r):br.fromObject(e)}static fromObject(e){return br.isParamType(e)?e:new br(Ms,{name:e.name||null,type:co(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(br.fromObject):null})}static fromString(e,r){function n(i){return br.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(R2(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function ka(t,e){return U2(t).map(r=>br.fromString(r,e))}class si{constructor(e,r){e!==Ms&&At.throwError("use a static from method",$.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Uc(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return si.isFragment(e)?e:typeof e=="string"?si.fromString(e):si.fromObject(e)}static fromObject(e){if(si.isFragment(e))return e;switch(e.type){case"function":return qn.fromObject(e);case"event":return ii.fromObject(e);case"constructor":return Kn.fromObject(e);case"error":return ki.fromObject(e);case"fallback":case"receive":return null}return At.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?ii.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?qn.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Kn.fromString(e.trim()):e.split(" ")[0]==="error"?ki.fromString(e.substring(5).trim()):At.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class ii extends si{format(e){if(e||(e=Ct.sighash),Ct[e]||At.throwArgumentError("invalid format type","format",e),e===Ct.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ct.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ct.full?", ":",")+") ",e!==Ct.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?ii.fromString(e):ii.fromObject(e)}static fromObject(e){if(ii.isEventFragment(e))return e;e.type!=="event"&&At.throwArgumentError("invalid event object","value",e);const r={name:Ma(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(br.fromObject):[],type:"event"};return new ii(Ms,r)}static fromString(e){let r=e.match(Pa);r||At.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:At.warn("unknown modifier: "+i)}}),ii.fromObject({name:r[1].trim(),anonymous:n,inputs:ka(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Fy(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&At.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||At.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=he.from(r[1]),r[0]):t}function $y(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function jy(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&At.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&At.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&At.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&At.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&At.throwArgumentError("unable to determine stateMutability","value",t),e}class Kn extends si{format(e){if(e||(e=Ct.sighash),Ct[e]||At.throwArgumentError("invalid format type","format",e),e===Ct.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Ct.sighash&&At.throwError("cannot format a constructor for sighash",$.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Ct.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Kn.fromString(e):Kn.fromObject(e)}static fromObject(e){if(Kn.isConstructorFragment(e))return e;e.type!=="constructor"&&At.throwArgumentError("invalid constructor object","value",e);let r=jy(e);r.constant&&At.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(br.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?he.from(e.gas):null};return new Kn(Ms,n)}static fromString(e){let r={type:"constructor"};e=Fy(e,r);let n=e.match(Pa);return(!n||n[1].trim()!=="constructor")&&At.throwArgumentError("invalid constructor string","value",e),r.inputs=ka(n[2].trim(),!1),$y(n[3].trim(),r),Kn.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class qn extends Kn{format(e){if(e||(e=Ct.sighash),Ct[e]||At.throwArgumentError("invalid format type","format",e),e===Ct.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ct.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ct.full?", ":",")+") ",e!==Ct.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?qn.fromString(e):qn.fromObject(e)}static fromObject(e){if(qn.isFunctionFragment(e))return e;e.type!=="function"&&At.throwArgumentError("invalid function object","value",e);let r=jy(e);const n={type:e.type,name:Ma(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(br.fromObject):[],outputs:e.outputs?e.outputs.map(br.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?he.from(e.gas):null};return new qn(Ms,n)}static fromString(e){let r={type:"function"};e=Fy(e,r);let n=e.split(" returns ");n.length>2&&At.throwArgumentError("invalid function string","value",e);let i=n[0].match(Pa);if(i||At.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&Ma(r.name),r.inputs=ka(i[2],!1),$y(i[3].trim(),r),n.length>1){let s=n[1].match(Pa);(s[1].trim()!=""||s[3].trim()!="")&&At.throwArgumentError("unexpected tokens","value",e),r.outputs=ka(s[2],!1)}else r.outputs=[];return qn.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Td(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&At.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class ki extends si{format(e){if(e||(e=Ct.sighash),Ct[e]||At.throwArgumentError("invalid format type","format",e),e===Ct.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ct.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ct.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?ki.fromString(e):ki.fromObject(e)}static fromObject(e){if(ki.isErrorFragment(e))return e;e.type!=="error"&&At.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Ma(e.name),inputs:e.inputs?e.inputs.map(br.fromObject):[]};return Td(new ki(Ms,r))}static fromString(e){let r={type:"error"},n=e.match(Pa);return n||At.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Ma(r.name),r.inputs=ka(n[2],!1),Td(ki.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function co(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const D2=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ma(t){return(!t||!t.match(D2))&&At.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Pa=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function U2(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&At.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Th=new $(Wa);function Ky(t){const e=[],r=function(n,i){if(!!Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(c){e.push({path:o,error:c})}}};return r([],t),e}class Oi{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Th.throwArgumentError(e,this.localName,r)}}class pl{constructor(e){X(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return zr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Kt(e._data))}writeBytes(e){let r=de(e);const n=r.length%this.wordSize;return n&&(r=Kt([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=de(he.from(e));return r.length>this.wordSize&&Th.throwError("value out-of-bounds",$.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Kt([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Qc{constructor(e,r,n,i){X(this,"_data",de(e)),X(this,"wordSize",r||32),X(this,"_coerceFunc",n),X(this,"allowLoose",i),this._offset=0}get data(){return ge(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Qc.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Th.throwError("data out-of-bounds",$.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Qc(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return he.from(this.readBytes(this.wordSize))}}function Lt(t){return"0x"+Ux.keccak_256(de(t))}const L2="rlp/5.7.0",ri=new $(L2);function kd(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Md(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function qy(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(qy(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=kd(n.length);return i.unshift(247+i.length),i.concat(n)}Va(t)||ri.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(de(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=kd(e.length);return r.unshift(183+r.length),r.concat(e)}function Ps(t){return ge(qy(t))}function Pd(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Hy(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&ri.throwError("child data too short",$.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Hy(t,e){if(t.length===0&&ri.throwError("data too short",$.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&ri.throwError("data short segment too short",$.errors.BUFFER_OVERRUN,{});const n=Md(t,e+1,r);return e+1+r+n>t.length&&ri.throwError("data long segment too short",$.errors.BUFFER_OVERRUN,{}),Pd(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&ri.throwError("data array too short",$.errors.BUFFER_OVERRUN,{}),Pd(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&ri.throwError("data array too short",$.errors.BUFFER_OVERRUN,{});const n=Md(t,e+1,r);e+1+r+n>t.length&&ri.throwError("data array too short",$.errors.BUFFER_OVERRUN,{});const i=ge(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&ri.throwError("data too short",$.errors.BUFFER_OVERRUN,{});const n=ge(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:ge(t[e])}}function Df(t){const e=de(t),r=Hy(e,0);return r.consumed!==e.length&&ri.throwArgumentError("invalid rlp data","data",t),r.result}var F2=Object.freeze(Object.defineProperty({__proto__:null,encode:Ps,decode:Df},Symbol.toStringTag,{value:"Module"}));const $2="address/5.7.0",Wi=new $($2);function Cd(t){pt(t,20)||Wi.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=de(Lt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const j2=9007199254740991;function K2(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const kh={};for(let t=0;t<10;t++)kh[String(t)]=String(t);for(let t=0;t<26;t++)kh[String.fromCharCode(65+t)]=String(10+t);const Id=Math.floor(K2(j2));function zy(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>kh[n]).join("");for(;e.length>=Id;){let n=e.substring(0,Id);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Ot(t){let e=null;if(typeof t!="string"&&Wi.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Cd(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Wi.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==zy(t)&&Wi.throwArgumentError("bad icap checksum","address",t),e=T2(t.substring(4));e.length<40;)e="0"+e;e=Cd("0x"+e)}else Wi.throwArgumentError("invalid address","address",t);return e}function q2(t){try{return Ot(t),!0}catch{}return!1}function H2(t){let e=k2(Ot(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+zy("XE00"+e)+e}function Uf(t){let e=null;try{e=Ot(t.from)}catch{Wi.throwArgumentError("missing from address","transaction",t)}const r=ci(de(he.from(t.nonce).toHexString()));return Ot(ar(Lt(Ps([e,r])),12))}function z2(t,e,r){return di(e)!==32&&Wi.throwArgumentError("salt must be 32 bytes","salt",e),di(r)!==32&&Wi.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Ot(ar(Lt(Kt(["0xff",Ot(t),e,r])),12))}class G2 extends Oi{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Ot(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Ot(qt(e.readValue().toHexString(),20))}}class V2 extends Oi{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const ho=new $(Wa);function Gy(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let u={};n=e.map(h=>{const p=h.localName;return p||ho.throwError("cannot encode object for signature with missing names",$.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:r}),u[p]&&ho.throwError("cannot encode object for signature with duplicate names",$.errors.INVALID_ARGUMENT,{argument:"values",coder:h,value:r}),u[p]=!0,r[p]})}else ho.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ho.throwArgumentError("types/value length mismatch","tuple",r);let i=new pl(t.wordSize),s=new pl(t.wordSize),o=[];e.forEach((u,h)=>{let p=n[h];if(u.dynamic){let m=s.length;u.encode(s,p);let _=i.writeUpdatableValue();o.push(S=>{_(S+m)})}else u.encode(i,p)}),o.forEach(u=>{u(i.length)});let c=t.appendWriter(i);return c+=t.appendWriter(s),c}function Vy(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let c=t.readValue(),u=n.subReader(c.toNumber());try{o=s.decode(u)}catch(h){if(h.code===$.errors.BUFFER_OVERRUN)throw h;o=h,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(c){if(c.code===$.errors.BUFFER_OVERRUN)throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const c=o.localName;return c&&(s[c]||(s[c]=0),s[c]++),s},{});e.forEach((s,o)=>{let c=s.localName;if(!c||i[c]!==1||(c==="length"&&(c="_length"),r[c]!=null))return;const u=r[o];u instanceof Error?Object.defineProperty(r,c,{enumerable:!0,get:()=>{throw u}}):r[c]=u});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class J2 extends Oi{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),ho.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return Gy(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&ho.throwError("insufficient data length",$.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new V2(this.coder));return e.coerce(this.name,Vy(e,n))}}class W2 extends Oi{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Jy extends Oi{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=de(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Y2 extends Jy{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,ge(super.decode(e)))}}class Z2 extends Oi{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=de(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,ge(e.readBytes(this.size)))}}class X2 extends Oi{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Wy="0x0000000000000000000000000000000000000000",Yy=he.from(-1),Mh=he.from(0),Zy=he.from(1),Q2=he.from(2),e_=he.from("1000000000000000000"),Xy=he.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t_=he.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),r_=he.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ph="0x0000000000000000000000000000000000000000000000000000000000000000",n_="\u039E";var Qy=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Wy,NegativeOne:Yy,Zero:Mh,One:Zy,Two:Q2,WeiPerEther:e_,MaxUint256:Xy,MinInt256:t_,MaxInt256:r_,HashZero:Ph,EtherSymbol:n_},Symbol.toStringTag,{value:"Module"}));class i_ extends Oi{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=he.from(r),i=Xy.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Zy).mul(Yy)))&&this._throwError("value out-of-bounds",r)}else(n.lt(Mh)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const s_="strings/5.7.0",em=new $(s_);var pi;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(pi||(pi={}));var en;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(en||(en={}));function o_(t,e,r,n,i){return em.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function tm(t,e,r,n,i){if(t===en.BAD_PREFIX||t===en.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===en.OVERRUN?r.length-e-1:0}function a_(t,e,r,n,i){return t===en.OVERLONG?(n.push(i),0):(n.push(65533),tm(t,e,r))}const rm=Object.freeze({error:o_,ignore:tm,replace:a_});function Ch(t,e){e==null&&(e=rm.error),t=de(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(en.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(en.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(en.OVERRUN,n-1,t,r);continue}let c=i&(1<<8-s-1)-1;for(let u=0;u<s;u++){let h=t[n];if((h&192)!=128){n+=e(en.MISSING_CONTINUE,n,t,r),c=null;break}c=c<<6|h&63,n++}if(c!==null){if(c>1114111){n+=e(en.OUT_OF_RANGE,n-1-s,t,r,c);continue}if(c>=55296&&c<=57343){n+=e(en.UTF16_SURROGATE,n-1-s,t,r,c);continue}if(c<=o){n+=e(en.OVERLONG,n-1-s,t,r,c);continue}r.push(c)}}return r}function fr(t,e=pi.current){e!=pi.current&&(em.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return de(r)}function _u(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function c_(t,e){return'"'+Ch(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?_u(r):(r-=65536,_u((r>>10&1023)+55296)+_u((r&1023)+56320))}).join("")+'"'}function gl(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Fs(t,e){return gl(Ch(t,e))}function ef(t,e=pi.current){return Ch(fr(t,e))}function f_(t){const e=fr(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return ge(Kt([e,Ph]).slice(0,32))}function u_(t){const e=de(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return Fs(e.slice(0,r))}function l_(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Ih(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function nm(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function Nh(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const h_=nm("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),d_="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),p_=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],g_=Ih("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),y_=Ih("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),m_=Ih("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",l_),x_=nm("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function b_(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function v_(t){return!!Nh(t,h_)}function w_(t){let e=Nh(t,p_);if(e)return[t+e.s];let r=g_[t];if(r)return r;let n=y_[t];if(n)return[t+n[0]];let i=m_[t];return i||null}function __(t){return!!Nh(t,x_)}function E_(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=ef(t);e=b_(e.map(n=>{if(d_.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=w_(n);return i||[n]})),e=ef(gl(e),pi.NFKC),e.forEach(n=>{if(__(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(v_(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=gl(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}class A_ extends Jy{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,fr(r))}decode(e){return Fs(super.decode(e))}}class gc extends Oi{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return Gy(e,this.coders,r)}decode(e){return e.coerce(this.name,Vy(e,this.coders))}}const yc=new $(Wa),S_=new RegExp(/^bytes([0-9]*)$/),T_=new RegExp(/^(u?int)([0-9]*)$/);class im{constructor(e){X(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new G2(e.name);case"bool":return new W2(e.name);case"string":return new A_(e.name);case"bytes":return new Y2(e.name);case"array":return new J2(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new gc((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new X2(e.name)}let r=e.type.match(T_);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&yc.throwArgumentError("invalid "+r[1]+" bit length","param",e),new i_(n/8,r[1]==="int",e.name)}if(r=e.type.match(S_),r){let n=parseInt(r[1]);return(n===0||n>32)&&yc.throwArgumentError("invalid bytes length","param",e),new Z2(n,e.name)}return yc.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Qc(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new pl(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(br.from(i)));return new gc(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&yc.throwError("types/values length mismatch",$.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(br.from(o))),i=new gc(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(br.from(o)));return new gc(i,"_").decode(this._getReader(de(r),n))}}const sm=new im;function Yi(t){return Lt(fr(t))}const om="hash/5.7.0";function Bh(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return de(e)}function Rh(t){t=de(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var k_=Object.freeze(Object.defineProperty({__proto__:null,decode:Bh,encode:Rh},Symbol.toStringTag,{value:"Module"}));function am(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(c){o>0&&Array.isArray(c)?i(c,o-1):r.push(c)})};return i(t,e),r}function M_(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function P_(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let U=1;U<n;U++)s.push(i+=r());let o=r(),c=e;e+=o;let u=0,h=0;function p(){return u==0&&(h=h<<8|t[e++],u=8),h>>--u&1}const m=31,_=Math.pow(2,m),S=_>>>1,B=S>>1,T=_-1;let A=0;for(let U=0;U<m;U++)A=A<<1|p();let P=[],R=0,F=_;for(;;){let U=Math.floor(((A-R+1)*i-1)/F),K=0,Z=n;for(;Z-K>1;){let be=K+Z>>>1;U<s[be]?Z=be:K=be}if(K==0)break;P.push(K);let Q=R+Math.floor(F*s[K]/i),ue=R+Math.floor(F*s[K+1]/i)-1;for(;((Q^ue)&S)==0;)A=A<<1&T|p(),Q=Q<<1&T,ue=ue<<1&T|1;for(;Q&~ue&B;)A=A&S|A<<1&T>>>1|p(),Q=Q<<1^S,ue=(ue^S)<<1|S|1;R=Q,F=1+ue-Q}let q=n-4;return P.map(U=>{switch(U-q){case 3:return q+65792+(t[c++]<<16|t[c++]<<8|t[c++]);case 2:return q+256+(t[c++]<<8|t[c++]);case 1:return q+t[c++];default:return U-1}})}function C_(t){let e=0;return()=>t[e++]}function I_(t){return C_(P_(t))}function N_(t){return t&1?~t>>1:t>>1}function B_(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function Nd(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function R_(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=N_(e());return r}function tf(t,e){let r=Nd(t(),t),n=t(),i=Nd(n,t),s=B_(n,t);for(let o=0;o<n;o++)for(let c=0;c<s[o];c++)r.push(i[o]+c);return e?r.map(o=>e[o]):r}function O_(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(U_(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(L_(r,t))}return M_(am(e))}function D_(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function cm(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)R_(t,r).forEach((s,o)=>n[o].push(s));return n}function U_(t,e){let r=1+e(),n=e(),i=D_(e),s=cm(i.length,1+t,e);return am(s.map((o,c)=>{const u=o[0],h=o.slice(1);return Array(i[c]).fill(void 0).map((p,m)=>{let _=m*n;return[u+m*r,h.map(S=>S+_)]})}))}function L_(t,e){let r=1+e();return cm(r,1+t,e).map(i=>[i[0],i.slice(1)])}function F_(t){let e=tf(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let h=tf(t,e);if(h.length==0)break;n.push({set:new Set(h),node:r()})}n.sort((h,p)=>p.set.size-h.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let c=i==1,u=i==2;return{branches:n,valid:s,fe0f:o,save:c,check:u}}}function $_(){return I_(Bh("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Lf=$_(),j_=new Set(tf(Lf)),K_=new Set(tf(Lf)),q_=O_(Lf),H_=F_(Lf),Bd=45,Rd=95;function fm(t){return ef(t)}function z_(t){return t.filter(e=>e!=65039)}function um(t){for(let e of t.split(".")){let r=fm(e);try{for(let n=r.lastIndexOf(Rd)-1;n>=0;n--)if(r[n]!==Rd)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===Bd&&r[3]===Bd)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function G_(t){return um(V_(t,z_))}function V_(t,e){let r=fm(t).reverse(),n=[];for(;r.length;){let i=W_(r);if(i){n.push(...e(i));continue}let s=r.pop();if(j_.has(s)){n.push(s);continue}if(K_.has(s))continue;let o=q_[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return um(J_(String.fromCodePoint(...n)))}function J_(t){return t.normalize("NFC")}function W_(t,e){var r;let n=H_,i,s,o=[],c=t.length;for(e&&(e.length=0);c;){let u=t[--c];if(n=(r=n.branches.find(h=>h.set.has(u)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=u;else if(n.check&&u===s)break;o.push(u),n.fe0f&&(o.push(65039),c>0&&t[c-1]==65039&&c--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(c).reverse()),t.length=c)}return i}const Y_=new $(om),lm=new Uint8Array(32);lm.fill(0);function Od(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function Oh(t){const e=fr(G_(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(Od(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(Od(e.slice(n))),r}function Z_(t){try{return Oh(t).length!==0}catch{}return!1}function ga(t){typeof t!="string"&&Y_.throwArgumentError("invalid ENS name; not a string","name",t);let e=lm;const r=Oh(t);for(;r.length;)e=Lt(Kt([e,Lt(r.pop())]));return ge(e)}function hm(t){return ge(Kt(Oh(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const X_=`Ethereum Signed Message:
`;function Dh(t){return typeof t=="string"&&(t=fr(t)),Lt(Kt([fr(X_),fr(String(t.length)),t]))}var Q_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Gt=new $(om),dm=new Uint8Array(32);dm.fill(0);const e3=he.from(-1),pm=he.from(0),gm=he.from(1),t3=he.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function r3(t){const e=de(t),r=e.length%32;return r?zr([e,dm.slice(r)]):ge(e)}const n3=qt(gm.toHexString(),32),i3=qt(pm.toHexString(),32),Dd={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Eu=["name","version","chainId","verifyingContract","salt"];function Ud(t){return function(e){return typeof e!="string"&&Gt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const s3={name:Ud("name"),version:Ud("version"),chainId:function(t){try{return he.from(t).toString()}catch{}return Gt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Ot(t).toLowerCase()}catch{}return Gt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=de(t);if(e.length!==32)throw new Error("bad length");return ge(e)}catch{}return Gt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Au(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Gt.throwArgumentError("invalid numeric width","type",t);const i=t3.mask(r?n-1:n),s=r?i.add(gm).mul(e3):pm;return function(o){const c=he.from(o);return(c.lt(s)||c.gt(i))&&Gt.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),qt(c.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Gt.throwArgumentError("invalid bytes width","type",t),function(n){return de(n).length!==r&&Gt.throwArgumentError(`invalid length for ${t}`,"value",n),r3(n)}}}switch(t){case"address":return function(e){return qt(Ot(e),32)};case"bool":return function(e){return e?n3:i3};case"bytes":return function(e){return Lt(e)};case"string":return function(e){return Yi(e)}}return null}function Ld(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Sr{constructor(e){X(this,"types",Object.freeze(Jr(e))),X(this,"_encoderCache",{}),X(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(c=>{r[c]={},n[c]=[],i[c]={}});for(const c in e){const u={};e[c].forEach(h=>{u[h.name]&&Gt.throwArgumentError(`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",e),u[h.name]=!0;const p=h.type.match(/^([^\x5b]*)(\x5b|$)/)[1];p===c&&Gt.throwArgumentError(`circular type reference to ${JSON.stringify(p)}`,"types",e),!Au(p)&&(n[p]||Gt.throwArgumentError(`unknown type ${JSON.stringify(p)}`,"types",e),n[p].push(c),r[c][p]=!0)})}const s=Object.keys(n).filter(c=>n[c].length===0);s.length===0?Gt.throwArgumentError("missing primary type","types",e):s.length>1&&Gt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),X(this,"primaryType",s[0]);function o(c,u){u[c]&&Gt.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),u[c]=!0,Object.keys(r[c]).forEach(h=>{!n[h]||(o(h,u),Object.keys(u).forEach(p=>{i[p][h]=!0}))}),delete u[c]}o(this.primaryType,{});for(const c in i){const u=Object.keys(i[c]);u.sort(),this._types[c]=Ld(c,e[c])+u.map(h=>Ld(h,e[h])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Au(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return c=>{o>=0&&c.length!==o&&Gt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",c);let u=c.map(s);return this._types[i]&&(u=u.map(Lt)),Lt(zr(u))}}const n=this.types[e];if(n){const i=Yi(this._types[e]);return s=>{const o=n.map(({name:c,type:u})=>{const h=this.getEncoder(u)(s[c]);return this._types[u]?Lt(h):h});return o.unshift(i),zr(o)}}return Gt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Gt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Lt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Au(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],c=parseInt(i[3]);return c>=0&&r.length!==c&&Gt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(u=>this._visit(o,u,n))}const s=this.types[e];return s?s.reduce((o,{name:c,type:u})=>(o[c]=this._visit(u,r[c],n),o),{}):Gt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Sr(e)}static getPrimaryType(e){return Sr.from(e).primaryType}static hashStruct(e,r,n){return Sr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=Dd[n];i||Gt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Eu.indexOf(n.name)-Eu.indexOf(i.name)),Sr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return zr(["0x1901",Sr.hashDomain(e),Sr.from(r).hash(n)])}static hash(e,r,n){return Lt(Sr.encode(e,r,n))}static resolveNames(e,r,n,i){return Q_(this,void 0,void 0,function*(){e=Ht(e);const s={};e.verifyingContract&&!pt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Sr.from(r);o.visit(n,(c,u)=>(c==="address"&&!pt(u,20)&&(s[u]="0x"),u));for(const c in s)s[c]=yield i(c);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(c,u)=>c==="address"&&s[u]?s[u]:u),{domain:e,value:n}})}static getPayload(e,r,n){Sr.hashDomain(e);const i={},s=[];Eu.forEach(u=>{const h=e[u];h!=null&&(i[u]=s3[u](h),s.push({name:u,type:Dd[u]}))});const o=Sr.from(r),c=Ht(r);return c.EIP712Domain?Gt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):c.EIP712Domain=s,o.encode(n),{types:c,domain:i,primaryType:o.primaryType,message:o.visit(n,(u,h)=>{if(u.match(/^bytes(\d*)/))return ge(de(h));if(u.match(/^u?int/))return he.from(h).toString();switch(u){case"address":return h.toLowerCase();case"bool":return!!h;case"string":return typeof h!="string"&&Gt.throwArgumentError("invalid string","value",h),h}return Gt.throwArgumentError("unsupported type","type",u)})}}}const zt=new $(Wa);class ym extends Ls{}class mm extends Ls{}class o3 extends Ls{}class rf extends Ls{static isIndexed(e){return!!(e&&e._isIndexed)}}const a3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Fd(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class yl{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,X(this,"fragments",r.map(n=>si.from(n)).filter(n=>n!=null)),X(this,"_abiCoder",Mr(new.target,"getAbiCoder")()),X(this,"functions",{}),X(this,"errors",{}),X(this,"events",{}),X(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){zt.warn("duplicate definition - constructor");return}X(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){zt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||X(this,"deploy",Kn.from({payable:!1,type:"constructor"})),X(this,"_isInterface",!0)}format(e){e||(e=Ct.full),e===Ct.sighash&&zt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Ct.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return sm}static getAddress(e){return Ot(e)}static getSighash(e){return ar(Yi(e.format()),0,4)}static getEventTopic(e){return Yi(e.format())}getFunction(e){if(pt(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];zt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching function","name",n):i.length>1&&zt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[qn.fromString(e).format()];return r||zt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(pt(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];zt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching event","name",n):i.length>1&&zt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[ii.fromString(e).format()];return r||zt.throwArgumentError("no matching event","signature",e),r}getError(e){if(pt(e)){const n=Mr(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}zt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching error","name",n):i.length>1&&zt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[qn.fromString(e).format()];return r||zt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Mr(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Mr(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=de(r);return ge(n.slice(0,4))!==this.getSighash(e)&&zt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",ge(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),ge(Kt([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=de(r);return ge(n.slice(0,4))!==this.getSighash(e)&&zt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",ge(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ge(Kt([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=de(r),i=null,s="",o=null,c=null,u=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const h=ge(n.slice(0,4)),p=a3[h];if(p)o=this._abiCoder.decode(p.inputs,n.slice(4)),c=p.name,u=p.signature,p.reason&&(i=o[0]),c==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:c==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const m=this.getError(h);o=this._abiCoder.decode(m.inputs,n.slice(4)),c=m.name,u=m.format()}catch{}break}}return zt.throwError("call revert exception"+s,$.errors.CALL_EXCEPTION,{method:e.format(),data:ge(r),errorArgs:o,errorName:c,errorSignature:u,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ge(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&zt.throwError("too many arguments for "+e.format(),$.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Yi(o):s.type==="bytes"?Lt(ge(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=he.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),qt(ge(o),32));for(r.forEach((s,o)=>{let c=e.inputs[o];if(!c.indexed){s!=null&&zt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+c.name,s);return}s==null?n.push(null):c.baseType==="array"||c.baseType==="tuple"?zt.throwArgumentError("filtering with tuples or arrays not supported","contract."+c.name,s):Array.isArray(s)?n.push(s.map(u=>i(c,u))):n.push(i(c,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&zt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,c)=>{const u=r[c];if(o.indexed)if(o.type==="string")n.push(Yi(u));else if(o.type==="bytes")n.push(Lt(u));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[u]))}else i.push(o),s.push(u)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let _=this.getEventTopic(e);(!pt(n[0],32)||n[0].toLowerCase()!==_)&&zt.throwError("fragment/topic mismatch",$.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:_,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((_,S)=>{_.indexed?_.type==="string"||_.type==="bytes"||_.baseType==="tuple"||_.baseType==="array"?(i.push(br.fromObject({type:"bytes32",name:_.name})),o.push(!0)):(i.push(_),o.push(!1)):(s.push(_),o.push(!1))});let c=n!=null?this._abiCoder.decode(i,Kt(n)):null,u=this._abiCoder.decode(s,r,!0),h=[],p=0,m=0;e.inputs.forEach((_,S)=>{if(_.indexed)if(c==null)h[S]=new rf({_isIndexed:!0,hash:null});else if(o[S])h[S]=new rf({_isIndexed:!0,hash:c[m++]});else try{h[S]=c[m++]}catch(B){h[S]=B}else try{h[S]=u[p++]}catch(B){h[S]=B}if(_.name&&h[_.name]==null){const B=h[S];B instanceof Error?Object.defineProperty(h,_.name,{enumerable:!0,get:()=>{throw Fd(`property ${JSON.stringify(_.name)}`,B)}}):h[_.name]=B}});for(let _=0;_<h.length;_++){const S=h[_];S instanceof Error&&Object.defineProperty(h,_,{enumerable:!0,get:()=>{throw Fd(`index ${_}`,S)}})}return Object.freeze(h)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new mm({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:he.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new ym({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=ge(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new o3({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const c3="abstract-provider/5.7.0";var f3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const u3=new $(c3);class l3 extends Ls{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class $s{constructor(){u3.checkAbstract(new.target,$s),X(this,"_isProvider",!0)}getFeeData(){return f3(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield er({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=he.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const h3="abstract-signer/5.7.0";var Fn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Mn=new $(h3),d3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],p3=[$.errors.INSUFFICIENT_FUNDS,$.errors.NONCE_EXPIRED,$.errors.REPLACEMENT_UNDERPRICED];class Di{constructor(){Mn.checkAbstract(new.target,Di),X(this,"_isSigner",!0)}getBalance(e){return Fn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Fn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Fn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield er(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Fn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield er(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Fn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Fn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Fn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Fn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Fn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)d3.indexOf(n)===-1&&Mn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Ht(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Mn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Fn(this,void 0,void 0,function*(){const r=yield er(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Fn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Mn.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Mn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Mn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Mn.throwError("network does not support EIP-1559",$.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Mn.throwError("failed to get consistent fee data",$.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(p3.indexOf(i.code)>=0)throw i;return Mn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",$.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Mn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield er(r)})}_checkProvider(e){this.provider||Mn.throwError("missing provider",$.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Ya extends Di{constructor(e,r){super(),X(this,"address",e),X(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Mn.throwError(e,$.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Ya(this.address,e)}}function Fo(t,e,r){return r={path:e,exports:{},require:function(n,i){return g3(n,i??r.path)}},t(r,r.exports),r.exports}function g3(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Uh=xm;function xm(t,e){if(!t)throw new Error(e||"Assertion failed")}xm.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var zn=Fo(function(t,e){var r=e;function n(o,c){if(Array.isArray(o))return o.slice();if(!o)return[];var u=[];if(typeof o!="string"){for(var h=0;h<o.length;h++)u[h]=o[h]|0;return u}if(c==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var h=0;h<o.length;h+=2)u.push(parseInt(o[h]+o[h+1],16))}else for(var h=0;h<o.length;h++){var p=o.charCodeAt(h),m=p>>8,_=p&255;m?u.push(m,_):u.push(_)}return u}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var c="",u=0;u<o.length;u++)c+=i(o[u].toString(16));return c}r.toHex=s,r.encode=function(c,u){return u==="hex"?s(c):c}}),bn=Fo(function(t,e){var r=e;r.assert=Uh,r.toArray=zn.toArray,r.zero2=zn.zero2,r.toHex=zn.toHex,r.encode=zn.encode;function n(u,h,p){var m=new Array(Math.max(u.bitLength(),p)+1);m.fill(0);for(var _=1<<h+1,S=u.clone(),B=0;B<m.length;B++){var T,A=S.andln(_-1);S.isOdd()?(A>(_>>1)-1?T=(_>>1)-A:T=A,S.isubn(T)):T=0,m[B]=T,S.iushrn(1)}return m}r.getNAF=n;function i(u,h){var p=[[],[]];u=u.clone(),h=h.clone();for(var m=0,_=0,S;u.cmpn(-m)>0||h.cmpn(-_)>0;){var B=u.andln(3)+m&3,T=h.andln(3)+_&3;B===3&&(B=-1),T===3&&(T=-1);var A;(B&1)===0?A=0:(S=u.andln(7)+m&7,(S===3||S===5)&&T===2?A=-B:A=B),p[0].push(A);var P;(T&1)===0?P=0:(S=h.andln(7)+_&7,(S===3||S===5)&&B===2?P=-T:P=T),p[1].push(P),2*m===A+1&&(m=1-m),2*_===P+1&&(_=1-_),u.iushrn(1),h.iushrn(1)}return p}r.getJSF=i;function s(u,h,p){var m="_"+h;u.prototype[h]=function(){return this[m]!==void 0?this[m]:this[m]=p.call(this)}}r.cachedProperty=s;function o(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=o;function c(u){return new lt(u,"hex","le")}r.intFromLE=c}),nf=bn.getNAF,y3=bn.getJSF,sf=bn.assert;function ds(t,e){this.type=t,this.p=new lt(e.p,16),this.red=e.prime?lt.red(e.prime):lt.mont(this.p),this.zero=new lt(0).toRed(this.red),this.one=new lt(1).toRed(this.red),this.two=new lt(2).toRed(this.red),this.n=e.n&&new lt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var js=ds;ds.prototype.point=function(){throw new Error("Not implemented")};ds.prototype.validate=function(){throw new Error("Not implemented")};ds.prototype._fixedNafMul=function(e,r){sf(e.precomputed);var n=e._getDoubles(),i=nf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],c,u;for(c=0;c<i.length;c+=n.step){u=0;for(var h=c+n.step-1;h>=c;h--)u=(u<<1)+i[h];o.push(u)}for(var p=this.jpoint(null,null,null),m=this.jpoint(null,null,null),_=s;_>0;_--){for(c=0;c<o.length;c++)u=o[c],u===_?m=m.mixedAdd(n.points[c]):u===-_&&(m=m.mixedAdd(n.points[c].neg()));p=p.add(m)}return p.toP()};ds.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=nf(r,n,this._bitLength),c=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var h=0;u>=0&&o[u]===0;u--)h++;if(u>=0&&h++,c=c.dblp(h),u<0)break;var p=o[u];sf(p!==0),e.type==="affine"?p>0?c=c.mixedAdd(s[p-1>>1]):c=c.mixedAdd(s[-p-1>>1].neg()):p>0?c=c.add(s[p-1>>1]):c=c.add(s[-p-1>>1].neg())}return e.type==="affine"?c.toP():c};ds.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,c=this._wnafT2,u=this._wnafT3,h=0,p,m,_;for(p=0;p<i;p++){_=r[p];var S=_._getNAFPoints(e);o[p]=S.wnd,c[p]=S.points}for(p=i-1;p>=1;p-=2){var B=p-1,T=p;if(o[B]!==1||o[T]!==1){u[B]=nf(n[B],o[B],this._bitLength),u[T]=nf(n[T],o[T],this._bitLength),h=Math.max(u[B].length,h),h=Math.max(u[T].length,h);continue}var A=[r[B],null,null,r[T]];r[B].y.cmp(r[T].y)===0?(A[1]=r[B].add(r[T]),A[2]=r[B].toJ().mixedAdd(r[T].neg())):r[B].y.cmp(r[T].y.redNeg())===0?(A[1]=r[B].toJ().mixedAdd(r[T]),A[2]=r[B].add(r[T].neg())):(A[1]=r[B].toJ().mixedAdd(r[T]),A[2]=r[B].toJ().mixedAdd(r[T].neg()));var P=[-3,-1,-5,-7,0,7,5,1,3],R=y3(n[B],n[T]);for(h=Math.max(R[0].length,h),u[B]=new Array(h),u[T]=new Array(h),m=0;m<h;m++){var F=R[0][m]|0,q=R[1][m]|0;u[B][m]=P[(F+1)*3+(q+1)],u[T][m]=0,c[B]=A}}var U=this.jpoint(null,null,null),K=this._wnafT4;for(p=h;p>=0;p--){for(var Z=0;p>=0;){var Q=!0;for(m=0;m<i;m++)K[m]=u[m][p]|0,K[m]!==0&&(Q=!1);if(!Q)break;Z++,p--}if(p>=0&&Z++,U=U.dblp(Z),p<0)break;for(m=0;m<i;m++){var ue=K[m];ue!==0&&(ue>0?_=c[m][ue-1>>1]:ue<0&&(_=c[m][-ue-1>>1].neg()),_.type==="affine"?U=U.mixedAdd(_):U=U.add(_))}}for(p=0;p<i;p++)c[p]=null;return s?U:U.toP()};function Rn(t,e){this.curve=t,this.type=e,this.precomputed=null}ds.BasePoint=Rn;Rn.prototype.eq=function(){throw new Error("Not implemented")};Rn.prototype.validate=function(){return this.curve.validate(this)};ds.prototype.decodePoint=function(e,r){e=bn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?sf(e[e.length-1]%2===0):e[0]===7&&sf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Rn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Rn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Rn.prototype.encode=function(e,r){return bn.encode(this._encode(r),e)};Rn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Rn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Rn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Rn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Rn.prototype._getBeta=function(){return null};Rn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Lh=Fo(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),m3=bn.assert;function On(t){js.call(this,"short",t),this.a=new lt(t.a,16).toRed(this.red),this.b=new lt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Lh(On,js);var x3=On;On.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new lt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new lt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],m3(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(c){return{a:new lt(c.a,16),b:new lt(c.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};On.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:lt.mont(e),n=new lt(2).toRed(r).redInvm(),i=n.redNeg(),s=new lt(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),c=i.redSub(s).fromRed();return[o,c]};On.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new lt(1),o=new lt(0),c=new lt(0),u=new lt(1),h,p,m,_,S,B,T,A=0,P,R;n.cmpn(0)!==0;){var F=i.div(n);P=i.sub(F.mul(n)),R=c.sub(F.mul(s));var q=u.sub(F.mul(o));if(!m&&P.cmp(r)<0)h=T.neg(),p=s,m=P.neg(),_=R;else if(m&&++A===2)break;T=P,i=n,n=P,c=s,s=R,u=o,o=q}S=P.neg(),B=R;var U=m.sqr().add(_.sqr()),K=S.sqr().add(B.sqr());return K.cmp(U)>=0&&(S=h,B=p),m.negative&&(m=m.neg(),_=_.neg()),S.negative&&(S=S.neg(),B=B.neg()),[{a:m,b:_},{a:S,b:B}]};On.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),c=s.mul(n.a),u=o.mul(i.a),h=s.mul(n.b),p=o.mul(i.b),m=e.sub(c).sub(u),_=h.add(p).neg();return{k1:m,k2:_}};On.prototype.pointFromX=function(e,r){e=new lt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};On.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};On.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var c=this._endoSplit(r[o]),u=e[o],h=u._getBeta();c.k1.negative&&(c.k1.ineg(),u=u.neg(!0)),c.k2.negative&&(c.k2.ineg(),h=h.neg(!0)),i[o*2]=u,i[o*2+1]=h,s[o*2]=c.k1,s[o*2+1]=c.k2}for(var p=this._wnafMulAdd(1,i,s,o*2,n),m=0;m<o*2;m++)i[m]=null,s[m]=null;return p};function Er(t,e,r,n){js.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new lt(e,16),this.y=new lt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Lh(Er,js.BasePoint);On.prototype.point=function(e,r,n){return new Er(this,e,r,n)};On.prototype.pointFromJSON=function(e,r){return Er.fromJSON(this,e,r)};Er.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Er.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Er.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(c){return e.point(c[0],c[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Er.prototype.isInfinity=function(){return this.inf};Er.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Er.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),c=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};Er.prototype.getX=function(){return this.x.fromRed()};Er.prototype.getY=function(){return this.y.fromRed()};Er.prototype.mul=function(e){return e=new lt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Er.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Er.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Er.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Er.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Er.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Nr(t,e,r,n){js.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lt(0)):(this.x=new lt(e,16),this.y=new lt(r,16),this.z=new lt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Lh(Nr,js.BasePoint);On.prototype.jpoint=function(e,r,n){return new Nr(this,e,r,n)};Nr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Nr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Nr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),c=e.y.redMul(n.redMul(this.z)),u=i.redSub(s),h=o.redSub(c);if(u.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=u.redSqr(),m=p.redMul(u),_=i.redMul(p),S=h.redSqr().redIAdd(m).redISub(_).redISub(_),B=h.redMul(_.redISub(S)).redISub(o.redMul(m)),T=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(S,B,T)};Nr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),c=n.redSub(i),u=s.redSub(o);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),p=h.redMul(c),m=n.redMul(h),_=u.redSqr().redIAdd(p).redISub(m).redISub(m),S=u.redMul(m.redISub(_)).redISub(s.redMul(p)),B=this.z.redMul(c);return this.curve.jpoint(_,S,B)};Nr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,c=this.y,u=this.z,h=u.redSqr().redSqr(),p=c.redAdd(c);for(r=0;r<e;r++){var m=o.redSqr(),_=p.redSqr(),S=_.redSqr(),B=m.redAdd(m).redIAdd(m).redIAdd(i.redMul(h)),T=o.redMul(_),A=B.redSqr().redISub(T.redAdd(T)),P=T.redISub(A),R=B.redMul(P);R=R.redIAdd(R).redISub(S);var F=p.redMul(u);r+1<e&&(h=h.redMul(S)),o=A,u=F,p=R}return this.curve.jpoint(o,p.redMul(s),u)};Nr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Nr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),c=this.x.redAdd(s).redSqr().redISub(i).redISub(o);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i),h=u.redSqr().redISub(c).redISub(c),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),e=h,r=u.redMul(c.redISub(h)).redISub(p),n=this.y.redAdd(this.y)}else{var m=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),B=this.x.redAdd(_).redSqr().redISub(m).redISub(S);B=B.redIAdd(B);var T=m.redAdd(m).redIAdd(m),A=T.redSqr(),P=S.redIAdd(S);P=P.redIAdd(P),P=P.redIAdd(P),e=A.redISub(B).redISub(B),r=T.redMul(B.redISub(e)).redISub(P),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Nr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),c=this.x.redAdd(s).redSqr().redISub(i).redISub(o);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=u.redSqr().redISub(c).redISub(c);e=h;var p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),r=u.redMul(c.redISub(h)).redISub(p),n=this.y.redAdd(this.y)}else{var m=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),B=this.x.redSub(m).redMul(this.x.redAdd(m));B=B.redAdd(B).redIAdd(B);var T=S.redIAdd(S);T=T.redIAdd(T);var A=T.redAdd(T);e=B.redSqr().redISub(A),n=this.y.redAdd(this.z).redSqr().redISub(_).redISub(m);var P=_.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P),r=B.redMul(T.redISub(e)).redISub(P)}return this.curve.jpoint(e,r,n)};Nr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),c=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),h=r.redAdd(r);h=h.redIAdd(h);var p=h.redMul(c),m=u.redSqr().redISub(p.redAdd(p)),_=p.redISub(m),S=c.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var B=u.redMul(_).redISub(S),T=n.redAdd(n).redMul(i);return this.curve.jpoint(m,B,T)};Nr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),c=this.x.redAdd(r).redSqr().redISub(e).redISub(i);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(o);var u=c.redSqr(),h=i.redIAdd(i);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=s.redIAdd(c).redSqr().redISub(o).redISub(u).redISub(h),m=r.redMul(p);m=m.redIAdd(m),m=m.redIAdd(m);var _=this.x.redMul(u).redISub(m);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(p.redMul(h.redISub(p)).redISub(c.redMul(u)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var B=this.z.redAdd(c).redSqr().redISub(n).redISub(u);return this.curve.jpoint(_,S,B)};Nr.prototype.mul=function(e,r){return e=new lt(e,r),this.curve._wnafMul(this,e)};Nr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Nr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Nr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Nr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Lc=Fo(function(t,e){var r=e;r.base=js,r.short=x3,r.mont=null,r.edwards=null}),Fc=Fo(function(t,e){var r=e,n=bn.assert;function i(c){c.type==="short"?this.curve=new Lc.short(c):c.type==="edwards"?this.curve=new Lc.edwards(c):this.curve=new Lc.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(c,u){Object.defineProperty(r,c,{configurable:!0,enumerable:!0,get:function(){var h=new i(u);return Object.defineProperty(r,c,{configurable:!0,enumerable:!0,value:h}),h}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Qr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Qr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Qr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Qr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Qr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Qr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ts(t){if(!(this instanceof ts))return new ts(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=zn.toArray(t.entropy,t.entropyEnc||"hex"),r=zn.toArray(t.nonce,t.nonceEnc||"hex"),n=zn.toArray(t.pers,t.persEnc||"hex");Uh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var bm=ts;ts.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ts.prototype._hmac=function(){return new Qr.hmac(this.hash,this.K)};ts.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ts.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=zn.toArray(e,r),n=zn.toArray(n,i),Uh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ts.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=zn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,zn.encode(o,r)};var ml=bn.assert;function jr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Fh=jr;jr.fromPublic=function(e,r,n){return r instanceof jr?r:new jr(e,{pub:r,pubEnc:n})};jr.fromPrivate=function(e,r,n){return r instanceof jr?r:new jr(e,{priv:r,privEnc:n})};jr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};jr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};jr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};jr.prototype._importPrivate=function(e,r){this.priv=new lt(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};jr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ml(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ml(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};jr.prototype.derive=function(e){return e.validate()||ml(e.validate(),"public point not validated"),e.mul(this.priv).getX()};jr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};jr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};jr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var b3=bn.assert;function Ff(t,e){if(t instanceof Ff)return t;this._importDER(t,e)||(b3(t.r&&t.s,"Signature without r or s"),this.r=new lt(t.r,16),this.s=new lt(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var $f=Ff;function v3(){this.place=0}function Su(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function $d(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Ff.prototype._importDER=function(e,r){e=bn.toArray(e,r);var n=new v3;if(e[n.place++]!==48)return!1;var i=Su(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Su(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var c=Su(e,n);if(c===!1||e.length!==c+n.place)return!1;var u=e.slice(n.place,c+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new lt(o),this.s=new lt(u),this.recoveryParam=null,!0};function Tu(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Ff.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=$d(r),n=$d(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Tu(i,r.length),i=i.concat(r),i.push(2),Tu(i,n.length);var s=i.concat(n),o=[48];return Tu(o,s.length),o=o.concat(s),bn.encode(o,e)};var w3=function(){throw new Error("unsupported")},vm=bn.assert;function Nn(t){if(!(this instanceof Nn))return new Nn(t);typeof t=="string"&&(vm(Object.prototype.hasOwnProperty.call(Fc,t),"Unknown curve "+t),t=Fc[t]),t instanceof Fc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var _3=Nn;Nn.prototype.keyPair=function(e){return new Fh(this,e)};Nn.prototype.keyFromPrivate=function(e,r){return Fh.fromPrivate(this,e,r)};Nn.prototype.keyFromPublic=function(e,r){return Fh.fromPublic(this,e,r)};Nn.prototype.genKeyPair=function(e){e||(e={});for(var r=new bm({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||w3(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new lt(2));;){var s=new lt(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Nn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Nn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new lt(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),c=e.toArray("be",s),u=new bm({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),h=this.n.sub(new lt(1)),p=0;;p++){var m=i.k?i.k(p):new lt(u.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(h)>=0)){var _=this.g.mul(m);if(!_.isInfinity()){var S=_.getX(),B=S.umod(this.n);if(B.cmpn(0)!==0){var T=m.invm(this.n).mul(B.mul(r.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var A=(_.getY().isOdd()?1:0)|(S.cmp(B)!==0?2:0);return i.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),A^=1),new $f({r:B,s:T,recoveryParam:A})}}}}}};Nn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new lt(e,16)),n=this.keyFromPublic(n,i),r=new $f(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),u=c.mul(e).umod(this.n),h=c.mul(s).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(u,n.getPublic(),h),p.isInfinity()?!1:p.eqXToP(s)):(p=this.g.mulAdd(u,n.getPublic(),h),p.isInfinity()?!1:p.getX().umod(this.n).cmp(s)===0)};Nn.prototype.recoverPubKey=function(t,e,r,n){vm((3&r)===r,"The recovery param is more than two bits"),e=new $f(e,n);var i=this.n,s=new lt(t),o=e.r,c=e.s,u=r&1,h=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var p=e.r.invm(i),m=i.sub(s).mul(p).umod(i),_=c.mul(p).umod(i);return this.g.mulAdd(m,o,_)};Nn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new $f(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var E3=Fo(function(t,e){var r=e;r.version="6.5.4",r.utils=bn,r.rand=function(){throw new Error("unsupported")},r.curve=Lc,r.curves=Fc,r.ec=_3,r.eddsa=null}),A3=E3.ec;const S3="signing-key/5.7.0",xl=new $(S3);let ku=null;function ni(){return ku||(ku=new A3("secp256k1")),ku}class Ss{constructor(e){X(this,"curve","secp256k1"),X(this,"privateKey",ge(e)),di(this.privateKey)!==32&&xl.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=ni().keyFromPrivate(de(this.privateKey));X(this,"publicKey","0x"+r.getPublic(!1,"hex")),X(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),X(this,"_isSigningKey",!0)}_addPoint(e){const r=ni().keyFromPublic(de(this.publicKey)),n=ni().keyFromPublic(de(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=ni().keyFromPrivate(de(this.privateKey)),n=de(e);n.length!==32&&xl.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Us({recoveryParam:i.recoveryParam,r:qt("0x"+i.r.toString(16),32),s:qt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=ni().keyFromPrivate(de(this.privateKey)),n=ni().keyFromPublic(de($h(e)));return qt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function wm(t,e){const r=Us(e),n={r:de(r.r),s:de(r.s)};return"0x"+ni().recoverPubKey(de(t),n,r.recoveryParam).encode("hex",!1)}function $h(t,e){const r=de(t);if(r.length===32){const n=new Ss(r);return e?"0x"+ni().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?ge(r):"0x"+ni().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+ni().keyFromPublic(r).getPublic(!0,"hex"):ge(r)}return xl.throwArgumentError("invalid public or private key","key","[REDACTED]")}const T3="transactions/5.7.0",$r=new $(T3);var bl;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(bl||(bl={}));function jh(t){return t==="0x"?null:Ot(t)}function Fr(t){return t==="0x"?Mh:he.from(t)}const k3=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],M3={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Qi(t){const e=$h(t);return Ot(ar(Lt(ar(e,1)),12))}function Za(t,e){return Qi(wm(de(t),e))}function pn(t,e){const r=ci(he.from(t).toHexString());return r.length>32&&$r.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Mu(t,e){return{address:Ot(t),storageKeys:(e||[]).map((r,n)=>(di(r)!==32&&$r.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function ps(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&$r.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Mu(r[0],r[1])):Mu(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Mu(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function _m(t){return ps(t).map(e=>[e.address,e.storageKeys])}function Em(t,e){if(t.gasPrice!=null){const n=he.from(t.gasPrice),i=he.from(t.maxFeePerGas||0);n.eq(i)||$r.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[pn(t.chainId||0,"chainId"),pn(t.nonce||0,"nonce"),pn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pn(t.maxFeePerGas||0,"maxFeePerGas"),pn(t.gasLimit||0,"gasLimit"),t.to!=null?Ot(t.to):"0x",pn(t.value||0,"value"),t.data||"0x",_m(t.accessList||[])];if(e){const n=Us(e);r.push(pn(n.recoveryParam,"recoveryParam")),r.push(ci(n.r)),r.push(ci(n.s))}return zr(["0x02",Ps(r)])}function Am(t,e){const r=[pn(t.chainId||0,"chainId"),pn(t.nonce||0,"nonce"),pn(t.gasPrice||0,"gasPrice"),pn(t.gasLimit||0,"gasLimit"),t.to!=null?Ot(t.to):"0x",pn(t.value||0,"value"),t.data||"0x",_m(t.accessList||[])];if(e){const n=Us(e);r.push(pn(n.recoveryParam,"recoveryParam")),r.push(ci(n.r)),r.push(ci(n.s))}return zr(["0x01",Ps(r)])}function P3(t,e){Sh(t,M3);const r=[];k3.forEach(function(o){let c=t[o.name]||[];const u={};o.numeric&&(u.hexPad="left"),c=de(ge(c,u)),o.length&&c.length!==o.length&&c.length>0&&$r.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,c),o.maxLength&&(c=ci(c),c.length>o.maxLength&&$r.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,c)),r.push(ge(c))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&$r.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!Va(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(ge(n)),r.push("0x"),r.push("0x")),!e)return Ps(r);const i=Us(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&$r.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&$r.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(ge(s)),r.push(ci(de(i.r))),r.push(ci(de(i.s))),Ps(r)}function vl(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&$r.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),P3(t,e);switch(t.type){case 1:return Am(t,e);case 2:return Em(t,e)}return $r.throwError(`unsupported transaction type: ${t.type}`,$.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function Sm(t,e,r){try{const n=Fr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{$r.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=qt(e[1],32),t.s=qt(e[2],32);try{const n=Lt(r(t));t.from=Za(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function C3(t){const e=Df(t.slice(1));e.length!==9&&e.length!==12&&$r.throwArgumentError("invalid component count for transaction type: 2","payload",ge(t));const r=Fr(e[2]),n=Fr(e[3]),i={type:2,chainId:Fr(e[0]).toNumber(),nonce:Fr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Fr(e[4]),to:jh(e[5]),value:Fr(e[6]),data:e[7],accessList:ps(e[8])};return e.length===9||(i.hash=Lt(t),Sm(i,e.slice(9),Em)),i}function I3(t){const e=Df(t.slice(1));e.length!==8&&e.length!==11&&$r.throwArgumentError("invalid component count for transaction type: 1","payload",ge(t));const r={type:1,chainId:Fr(e[0]).toNumber(),nonce:Fr(e[1]).toNumber(),gasPrice:Fr(e[2]),gasLimit:Fr(e[3]),to:jh(e[4]),value:Fr(e[5]),data:e[6],accessList:ps(e[7])};return e.length===8||(r.hash=Lt(t),Sm(r,e.slice(8),Am)),r}function N3(t){const e=Df(t);e.length!==9&&e.length!==6&&$r.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Fr(e[0]).toNumber(),gasPrice:Fr(e[1]),gasLimit:Fr(e[2]),to:jh(e[3]),value:Fr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=he.from(e[6]).toNumber()}catch{return r}if(r.r=qt(e[7],32),r.s=qt(e[8],32),he.from(r.r).isZero()&&he.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(ge(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=Lt(Ps(i));try{r.from=Za(s,{r:ge(r.r),s:ge(r.s),recoveryParam:n})}catch{}r.hash=Lt(t)}return r.type=null,r}function Tm(t){const e=de(t);if(e[0]>127)return N3(e);switch(e[0]){case 1:return I3(e);case 2:return C3(e)}return $r.throwError(`unsupported transaction type: ${e[0]}`,$.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const B3="contracts/5.7.0";var rs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Ut=new $(B3),R3={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function of(t,e){return rs(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Ut.throwArgumentError("invalid address or ENS name","name",r);try{return Ot(r)}catch{}t||Ut.throwError("a provider or signer is needed to resolve ENS names",$.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Ut.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function ya(t,e,r){return rs(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>ya(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield of(t,e):r.type==="tuple"?yield ya(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>ya(t,n,r.arrayChildren))):Promise.reject(Ut.makeError("invalid value for array",$.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function jf(t,e,r){return rs(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Ht(r.pop())),Ut.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=er({override:of(t.signer,n.from),signer:t.signer.getAddress()}).then(h=>rs(this,void 0,void 0,function*(){return Ot(h.signer)!==h.override&&Ut.throwError("Contract with a Signer cannot override from",$.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),h.override})):n.from=t.signer.getAddress():n.from&&(n.from=of(t.provider,n.from));const i=yield er({args:ya(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:er(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},c=i.overrides;if(c.nonce!=null&&(o.nonce=he.from(c.nonce).toNumber()),c.gasLimit!=null&&(o.gasLimit=he.from(c.gasLimit)),c.gasPrice!=null&&(o.gasPrice=he.from(c.gasPrice)),c.maxFeePerGas!=null&&(o.maxFeePerGas=he.from(c.maxFeePerGas)),c.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=he.from(c.maxPriorityFeePerGas)),c.from!=null&&(o.from=c.from),c.type!=null&&(o.type=c.type),c.accessList!=null&&(o.accessList=ps(c.accessList)),o.gasLimit==null&&e.gas!=null){let h=21e3;const p=de(s);for(let m=0;m<p.length;m++)h+=4,p[m]&&(h+=64);o.gasLimit=he.from(e.gas).add(h)}if(c.value){const h=he.from(c.value);!h.isZero()&&!e.payable&&Ut.throwError("non-payable method cannot override value",$.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=h}c.customData&&(o.customData=Ht(c.customData)),c.ccipReadEnabled&&(o.ccipReadEnabled=!!c.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const u=Object.keys(n).filter(h=>n[h]!=null);return u.length&&Ut.throwError(`cannot override ${u.map(h=>JSON.stringify(h)).join(",")}`,$.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),o})}function O3(t,e){return function(...r){return jf(t,e,r)}}function D3(t,e){const r=t.signer||t.provider;return function(...n){return rs(this,void 0,void 0,function*(){r||Ut.throwError("estimate require a provider or signer",$.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield jf(t,e,n);return yield r.estimateGas(i)})}}function km(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=Jr(s),c=null;try{c=t.interface.parseLog(s)}catch{}return c&&(o.args=c.args,o.decode=(u,h)=>t.interface.decodeEventLog(c.eventFragment,u,h),o.event=c.name,o.eventSignature=c.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function Mm(t,e,r){const n=t.signer||t.provider;return function(...i){return rs(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const u=Ht(i.pop());u.blockTag!=null&&(s=yield u.blockTag),delete u.blockTag,i.push(u)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield jf(t,e,i),c=yield n.call(o,s);try{let u=t.interface.decodeFunctionResult(e,c);return r&&e.outputs.length===1&&(u=u[0]),u}catch(u){throw u.code===$.errors.CALL_EXCEPTION&&(u.address=t.address,u.args=i,u.transaction=o),u}})}}function U3(t,e){return function(...r){return rs(this,void 0,void 0,function*(){t.signer||Ut.throwError("sending a transaction requires a signer",$.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield jf(t,e,r),i=yield t.signer.sendTransaction(n);return km(t,i),i})}}function jd(t,e,r){return e.constant?Mm(t,e,r):U3(t,e)}function Pm(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Ca{constructor(e,r){X(this,"tag",e),X(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class L3 extends Ca{constructor(){super("error",null)}}class Kd extends Ca{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&Ut.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(Pm(s),s),X(this,"address",e),X(this,"interface",r),X(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Ky(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class qd extends Ca{constructor(e,r){super("*",{address:e}),X(this,"address",e),X(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class Kh{constructor(e,r,n){X(this,"interface",Mr(new.target,"getInterface")(r)),n==null?(X(this,"provider",null),X(this,"signer",null)):Di.isSigner(n)?(X(this,"provider",n.provider||null),X(this,"signer",n)):$s.isProvider(n)?(X(this,"provider",n),X(this,"signer",null)):Ut.throwArgumentError("invalid signer or provider","signerOrProvider",n),X(this,"callStatic",{}),X(this,"estimateGas",{}),X(this,"functions",{}),X(this,"populateTransaction",{}),X(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(c=>{const u=this.interface.events[c];X(this.filters,c,(...h)=>({address:this.address,topics:this.interface.encodeFilterTopics(u,h)})),o[u.name]||(o[u.name]=[]),o[u.name].push(c)}),Object.keys(o).forEach(c=>{const u=o[c];u.length===1?X(this.filters,c,this.filters[u[0]]):Ut.warn(`Duplicate definition of ${c} (${u.join(", ")})`)})}if(X(this,"_runningEvents",{}),X(this,"_wrappedEmits",{}),e==null&&Ut.throwArgumentError("invalid contract address or ENS name","addressOrName",e),X(this,"address",e),this.provider)X(this,"resolvedAddress",of(this.provider,e));else try{X(this,"resolvedAddress",Promise.resolve(Ot(e)))}catch{Ut.throwError("provider is required to use ENS name as contract address",$.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const c=this.interface.functions[o];if(s[o]){Ut.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const u=c.name;i[`%${u}`]||(i[`%${u}`]=[]),i[`%${u}`].push(o)}this[o]==null&&X(this,o,jd(this,c,!0)),this.functions[o]==null&&X(this.functions,o,jd(this,c,!1)),this.callStatic[o]==null&&X(this.callStatic,o,Mm(this,c,!0)),this.populateTransaction[o]==null&&X(this.populateTransaction,o,O3(this,c)),this.estimateGas[o]==null&&X(this.estimateGas,o,D3(this,c))}),Object.keys(i).forEach(o=>{const c=i[o];if(c.length>1)return;o=o.substring(1);const u=c[0];try{this[o]==null&&X(this,o,this[u])}catch{}this.functions[o]==null&&X(this.functions,o,this.functions[u]),this.callStatic[o]==null&&X(this.callStatic,o,this.callStatic[u]),this.populateTransaction[o]==null&&X(this.populateTransaction,o,this.populateTransaction[u]),this.estimateGas[o]==null&&X(this.estimateGas,o,this.estimateGas[u])})}static getContractAddress(e){return Uf(e)}static getInterface(e){return yl.isInterface(e)?e:new yl(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Ut.throwError("contract not deployed",$.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Ut.throwError("sending a transactions require a signer",$.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Ht(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Ut.throwError("cannot override "+n,$.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Ya(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&X(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return rf.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new L3);if(e==="event")return this._normalizeRunningEvent(new Ca("event",null));if(e==="*")return this._normalizeRunningEvent(new qd(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new Kd(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new Kd(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Ca(Pm(r),r))}return this._normalizeRunningEvent(new qd(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Jr(r);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||Ut.throwError("events require a provider or a signer with a provider",$.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const c=e.getEmit(o);this.emit(e.filter,...c)}catch(c){o.decodeError=c.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=Ht(i.filter);return typeof r=="string"&&pt(r,32)?(n!=null&&Ut.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(c=>this._wrapEvent(i,c,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class af extends Kh{}class Cm{constructor(e,r,n){let i=null;typeof r=="string"?i=r:hs(r)?i=ge(r):r&&typeof r.object=="string"?i=r.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!pt(i)||i.length%2)&&Ut.throwArgumentError("invalid bytecode","bytecode",r),n&&!Di.isSigner(n)&&Ut.throwArgumentError("invalid signer","signer",n),X(this,"bytecode",i),X(this,"interface",Mr(new.target,"getInterface")(e)),X(this,"signer",n||null)}getDeployTransaction(...e){let r={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){r=Ht(e.pop());for(const n in r)if(!R3[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{r[n]!=null&&Ut.throwError("cannot override "+n,$.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.value&&!he.from(r.value).isZero()&&!this.interface.deploy.payable&&Ut.throwError("non-payable constructor cannot override value",$.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),Ut.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=ge(Kt([this.bytecode,this.interface.encodeDeploy(e)])),r}deploy(...e){return rs(this,void 0,void 0,function*(){let r={};e.length===this.interface.deploy.inputs.length+1&&(r=e.pop()),Ut.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield ya(this.signer,e,this.interface.deploy.inputs);n.push(r);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),o=Mr(this.constructor,"getContractAddress")(s),c=Mr(this.constructor,"getContract")(o,this.interface,this.signer);return km(c,s),X(c,"deployTransaction",s),c})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,r){e==null&&Ut.throwError("missing compiler output",$.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,r)}static getInterface(e){return af.getInterface(e)}static getContractAddress(e){return Uf(e)}static getContract(e,r,n){return new af(e,r,n)}}class Im{constructor(e){X(this,"alphabet",e),X(this,"base",e.length),X(this,"_alphabetMap",{}),X(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=de(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let c=0;c<n.length;++c)o+=n[c]<<8,n[c]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return de(new Uint8Array(r.reverse()))}}new Im("abcdefghijklmnopqrstuvwxyz234567");const Ao=new Im("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var So;(function(t){t.sha256="sha256",t.sha512="sha512"})(So||(So={}));const F3="sha2/5.7.0",$3=new $(F3);function Nm(t){return"0x"+Qr.ripemd160().update(de(t)).digest("hex")}function Ni(t){return"0x"+Qr.sha256().update(de(t)).digest("hex")}function j3(t){return"0x"+Qr.sha512().update(de(t)).digest("hex")}function Ia(t,e,r){return So[t]||$3.throwError("unsupported algorithm "+t,$.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+Qr.hmac(Qr[t],de(e)).update(de(r)).digest("hex")}function qh(t,e,r,n,i){t=de(t),e=de(e);let s,o=1;const c=new Uint8Array(n),u=new Uint8Array(e.length+4);u.set(e);let h,p;for(let m=1;m<=o;m++){u[e.length]=m>>24&255,u[e.length+1]=m>>16&255,u[e.length+2]=m>>8&255,u[e.length+3]=m&255;let _=de(Ia(i,t,u));s||(s=_.length,p=new Uint8Array(s),o=Math.ceil(n/s),h=n-(o-1)*s),p.set(_);for(let T=1;T<r;T++){_=de(Ia(i,t,_));for(let A=0;A<s;A++)p[A]^=_[A]}const S=(m-1)*s,B=m===o?h:s;c.set(de(p).slice(0,B),S)}return ge(c)}const K3="wordlists/5.7.0",q3=new $(K3);class Ks{constructor(e){q3.checkAbstract(new.target,Ks),X(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return Yi(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const H3="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let ma=null;function Hd(t){if(ma==null&&(ma=H3.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Ks.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw ma=null,new Error("BIP39 Wordlist for en (English) FAILED")}class z3 extends Ks{constructor(){super("en")}getWord(e){return Hd(this),ma[e]}getWordIndex(e){return Hd(this),ma.indexOf(e)}}const Bm=new z3;Ks.register(Bm);const cf={en:Bm},G3="hdnode/5.7.0",Na=new $(G3),V3=he.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),J3=fr("Bitcoin seed"),fo=2147483648;function Rm(t){return(1<<t)-1<<8-t}function W3(t){return(1<<t)-1}function mc(t){return qt(ge(t),32)}function zd(t){return Ao.encode(Kt([t,ar(Ni(Ni(t)),0,4)]))}function Hh(t){if(t==null)return cf.en;if(typeof t=="string"){const e=cf[t];return e==null&&Na.throwArgumentError("unknown locale","wordlist",t),e}return t}const Zs={},To="m/44'/60'/0'/0/0";class gn{constructor(e,r,n,i,s,o,c,u){if(e!==Zs)throw new Error("HDNode constructor cannot be called directly");if(r){const h=new Ss(r);X(this,"privateKey",h.privateKey),X(this,"publicKey",h.compressedPublicKey)}else X(this,"privateKey",null),X(this,"publicKey",ge(n));X(this,"parentFingerprint",i),X(this,"fingerprint",ar(Nm(Ni(this.publicKey)),0,4)),X(this,"address",Qi(this.publicKey)),X(this,"chainCode",s),X(this,"index",o),X(this,"depth",c),u==null?(X(this,"mnemonic",null),X(this,"path",null)):typeof u=="string"?(X(this,"mnemonic",null),X(this,"path",u)):(X(this,"mnemonic",u),X(this,"path",u.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return zd(Kt([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",ge(this.depth),this.parentFingerprint,qt(ge(this.index),4),this.chainCode,this.privateKey!=null?Kt(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new gn(Zs,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~fo));const n=new Uint8Array(37);if(e&fo){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(de(this.privateKey),1),r&&(r+="'")}else n.set(de(this.publicKey));for(let m=24;m>=0;m-=8)n[33+(m>>3)]=e>>24-m&255;const i=de(Ia(So.sha512,this.chainCode,n)),s=i.slice(0,32),o=i.slice(32);let c=null,u=null;this.privateKey?c=mc(he.from(s).add(this.privateKey).mod(V3)):u=new Ss(ge(s))._addPoint(this.publicKey);let h=r;const p=this.mnemonic;return p&&(h=Object.freeze({phrase:p.phrase,path:r,locale:p.locale||"en"})),new gn(Zs,c,u,this.fingerprint,mc(o),e,this.depth+1,h)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=fo)throw new Error("invalid path index - "+s);n=n._derive(fo+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);if(o>=fo)throw new Error("invalid path index - "+s);n=n._derive(o)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=de(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=de(Ia(So.sha512,J3,n));return new gn(Zs,mc(i.slice(0,32)),null,"0x00000000",mc(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=Hh(n),e=qf(Kf(e,n),n),gn._fromSeed(Om(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return gn._fromSeed(e,null)}static fromExtendedKey(e){const r=Ao.decode(e);(r.length!==82||zd(r.slice(0,78))!==e)&&Na.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=ge(r.slice(5,9)),s=parseInt(ge(r.slice(9,13)).substring(2),16),o=ge(r.slice(13,45)),c=r.slice(45,78);switch(ge(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new gn(Zs,null,ge(c),i,o,s,n,null);case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new gn(Zs,ge(c.slice(1)),null,i,o,s,n,null)}return Na.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Om(t,e){e||(e="");const r=fr("mnemonic"+e,pi.NFKD);return qh(fr(t,pi.NFKD),r,2048,64,"sha512")}function Kf(t,e){e=Hh(e),Na.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=de(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let h=0;h<r.length;h++){let p=e.getWordIndex(r[h].normalize("NFKD"));if(p===-1)throw new Error("invalid mnemonic");for(let m=0;m<11;m++)p&1<<10-m&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,o=r.length/3,c=Rm(o);if((de(Ni(n.slice(0,s/8)))[0]&c)!==(n[n.length-1]&c))throw new Error("invalid checksum");return ge(n.slice(0,s/8))}function qf(t,e){if(e=Hh(e),t=de(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let o=0;o<t.length;o++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[o],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[o]>>8-n,r.push(t[o]&W3(8-n)),n+=3);const i=t.length/4,s=de(Ni(t))[0]&Rm(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(o=>e.getWord(o)))}function Y3(t,e){try{return Kf(t,e),!0}catch{}return!1}function Z3(t){return(typeof t!="number"||t<0||t>=fo||t%1)&&Na.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const X3="random/5.7.0",wl=new $(X3);function Q3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof V.global<"u")return V.global;throw new Error("unable to locate global object")}const Gd=Q3();let $c=Gd.crypto||Gd.msCrypto;(!$c||!$c.getRandomValues)&&(wl.warn("WARNING: Missing strong random number source"),$c={getRandomValues:function(t){return wl.throwError("no secure random source avaialble",$.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function po(t){(t<=0||t>1024||t%1||t!=t)&&wl.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return $c.getRandomValues(e),de(e)}function Dm(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var Um={exports:{}};(function(t,e){(function(r){function n(d){return parseInt(d)===d}function i(d){if(!n(d.length))return!1;for(var f=0;f<d.length;f++)if(!n(d[f])||d[f]<0||d[f]>255)return!1;return!0}function s(d,f){if(d.buffer&&ArrayBuffer.isView(d)&&d.name==="Uint8Array")return f&&(d.slice?d=d.slice():d=Array.prototype.slice.call(d)),d;if(Array.isArray(d)){if(!i(d))throw new Error("Array contains invalid value: "+d);return new Uint8Array(d)}if(n(d.length)&&i(d))return new Uint8Array(d);throw new Error("unsupported array-like object")}function o(d){return new Uint8Array(d)}function c(d,f,x,D,O){(D!=null||O!=null)&&(d.slice?d=d.slice(D,O):d=Array.prototype.slice.call(d,D,O)),f.set(d,x)}var u=function(){function d(x){var D=[],O=0;for(x=encodeURI(x);O<x.length;){var G=x.charCodeAt(O++);G===37?(D.push(parseInt(x.substr(O,2),16)),O+=2):D.push(G)}return s(D)}function f(x){for(var D=[],O=0;O<x.length;){var G=x[O];G<128?(D.push(String.fromCharCode(G)),O++):G>191&&G<224?(D.push(String.fromCharCode((G&31)<<6|x[O+1]&63)),O+=2):(D.push(String.fromCharCode((G&15)<<12|(x[O+1]&63)<<6|x[O+2]&63)),O+=3)}return D.join("")}return{toBytes:d,fromBytes:f}}(),h=function(){function d(D){for(var O=[],G=0;G<D.length;G+=2)O.push(parseInt(D.substr(G,2),16));return O}var f="0123456789abcdef";function x(D){for(var O=[],G=0;G<D.length;G++){var ye=D[G];O.push(f[(ye&240)>>4]+f[ye&15])}return O.join("")}return{toBytes:d,fromBytes:x}}(),p={16:10,24:12,32:14},m=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],_=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],S=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],B=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],T=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],P=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],R=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],F=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],q=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],U=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],K=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Z=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Q=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ue=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function be(d){for(var f=[],x=0;x<d.length;x+=4)f.push(d[x]<<24|d[x+1]<<16|d[x+2]<<8|d[x+3]);return f}var ce=function(d){if(!(this instanceof ce))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(d,!0)}),this._prepare()};ce.prototype._prepare=function(){var d=p[this.key.length];if(d==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var f=0;f<=d;f++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var x=(d+1)*4,D=this.key.length/4,O=be(this.key),G,f=0;f<D;f++)G=f>>2,this._Ke[G][f%4]=O[f],this._Kd[d-G][f%4]=O[f];for(var ye=0,fe=D,oe;fe<x;){if(oe=O[D-1],O[0]^=_[oe>>16&255]<<24^_[oe>>8&255]<<16^_[oe&255]<<8^_[oe>>24&255]^m[ye]<<24,ye+=1,D!=8)for(var f=1;f<D;f++)O[f]^=O[f-1];else{for(var f=1;f<D/2;f++)O[f]^=O[f-1];oe=O[D/2-1],O[D/2]^=_[oe&255]^_[oe>>8&255]<<8^_[oe>>16&255]<<16^_[oe>>24&255]<<24;for(var f=D/2+1;f<D;f++)O[f]^=O[f-1]}for(var f=0,ut,Se;f<D&&fe<x;)ut=fe>>2,Se=fe%4,this._Ke[ut][Se]=O[f],this._Kd[d-ut][Se]=O[f++],fe++}for(var ut=1;ut<d;ut++)for(var Se=0;Se<4;Se++)oe=this._Kd[ut][Se],this._Kd[ut][Se]=K[oe>>24&255]^Z[oe>>16&255]^Q[oe>>8&255]^ue[oe&255]},ce.prototype.encrypt=function(d){if(d.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var f=this._Ke.length-1,x=[0,0,0,0],D=be(d),O=0;O<4;O++)D[O]^=this._Ke[0][O];for(var G=1;G<f;G++){for(var O=0;O<4;O++)x[O]=B[D[O]>>24&255]^T[D[(O+1)%4]>>16&255]^A[D[(O+2)%4]>>8&255]^P[D[(O+3)%4]&255]^this._Ke[G][O];D=x.slice()}for(var ye=o(16),fe,O=0;O<4;O++)fe=this._Ke[f][O],ye[4*O]=(_[D[O]>>24&255]^fe>>24)&255,ye[4*O+1]=(_[D[(O+1)%4]>>16&255]^fe>>16)&255,ye[4*O+2]=(_[D[(O+2)%4]>>8&255]^fe>>8)&255,ye[4*O+3]=(_[D[(O+3)%4]&255]^fe)&255;return ye},ce.prototype.decrypt=function(d){if(d.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var f=this._Kd.length-1,x=[0,0,0,0],D=be(d),O=0;O<4;O++)D[O]^=this._Kd[0][O];for(var G=1;G<f;G++){for(var O=0;O<4;O++)x[O]=R[D[O]>>24&255]^F[D[(O+3)%4]>>16&255]^q[D[(O+2)%4]>>8&255]^U[D[(O+1)%4]&255]^this._Kd[G][O];D=x.slice()}for(var ye=o(16),fe,O=0;O<4;O++)fe=this._Kd[f][O],ye[4*O]=(S[D[O]>>24&255]^fe>>24)&255,ye[4*O+1]=(S[D[(O+3)%4]>>16&255]^fe>>16)&255,ye[4*O+2]=(S[D[(O+2)%4]>>8&255]^fe>>8)&255,ye[4*O+3]=(S[D[(O+1)%4]&255]^fe)&255;return ye};var te=function(d){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ce(d)};te.prototype.encrypt=function(d){if(d=s(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var f=o(d.length),x=o(16),D=0;D<d.length;D+=16)c(d,x,0,D,D+16),x=this._aes.encrypt(x),c(x,f,D);return f},te.prototype.decrypt=function(d){if(d=s(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var f=o(d.length),x=o(16),D=0;D<d.length;D+=16)c(d,x,0,D,D+16),x=this._aes.decrypt(x),c(x,f,D);return f};var b=function(d,f){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(f,!0),this._aes=new ce(d)};b.prototype.encrypt=function(d){if(d=s(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var f=o(d.length),x=o(16),D=0;D<d.length;D+=16){c(d,x,0,D,D+16);for(var O=0;O<16;O++)x[O]^=this._lastCipherblock[O];this._lastCipherblock=this._aes.encrypt(x),c(this._lastCipherblock,f,D)}return f},b.prototype.decrypt=function(d){if(d=s(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var f=o(d.length),x=o(16),D=0;D<d.length;D+=16){c(d,x,0,D,D+16),x=this._aes.decrypt(x);for(var O=0;O<16;O++)f[D+O]=x[O]^this._lastCipherblock[O];c(d,this._lastCipherblock,0,D,D+16)}return f};var a=function(d,f,x){if(!(this instanceof a))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");x||(x=1),this.segmentSize=x,this._shiftRegister=s(f,!0),this._aes=new ce(d)};a.prototype.encrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var f=s(d,!0),x,D=0;D<f.length;D+=this.segmentSize){x=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)f[D+O]^=x[O];c(this._shiftRegister,this._shiftRegister,0,this.segmentSize),c(f,this._shiftRegister,16-this.segmentSize,D,D+this.segmentSize)}return f},a.prototype.decrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var f=s(d,!0),x,D=0;D<f.length;D+=this.segmentSize){x=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)f[D+O]^=x[O];c(this._shiftRegister,this._shiftRegister,0,this.segmentSize),c(d,this._shiftRegister,16-this.segmentSize,D,D+this.segmentSize)}return f};var l=function(d,f){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!f)f=o(16);else if(f.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(f,!0),this._lastPrecipherIndex=16,this._aes=new ce(d)};l.prototype.encrypt=function(d){for(var f=s(d,!0),x=0;x<f.length;x++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),f[x]^=this._lastPrecipher[this._lastPrecipherIndex++];return f},l.prototype.decrypt=l.prototype.encrypt;var y=function(d){if(!(this instanceof y))throw Error("Counter must be instanitated with `new`");d!==0&&!d&&(d=1),typeof d=="number"?(this._counter=o(16),this.setValue(d)):this.setBytes(d)};y.prototype.setValue=function(d){if(typeof d!="number"||parseInt(d)!=d)throw new Error("invalid counter value (must be an integer)");for(var f=15;f>=0;--f)this._counter[f]=d%256,d=d>>8},y.prototype.setBytes=function(d){if(d=s(d,!0),d.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=d},y.prototype.increment=function(){for(var d=15;d>=0;d--)if(this._counter[d]===255)this._counter[d]=0;else{this._counter[d]++;break}};var v=function(d,f){if(!(this instanceof v))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",f instanceof y||(f=new y(f)),this._counter=f,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ce(d)};v.prototype.encrypt=function(d){for(var f=s(d,!0),x=0;x<f.length;x++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),f[x]^=this._remainingCounter[this._remainingCounterIndex++];return f},v.prototype.decrypt=v.prototype.encrypt;function w(d){d=s(d,!0);var f=16-d.length%16,x=o(d.length+f);c(d,x);for(var D=d.length;D<x.length;D++)x[D]=f;return x}function k(d){if(d=s(d,!0),d.length<16)throw new Error("PKCS#7 invalid length");var f=d[d.length-1];if(f>16)throw new Error("PKCS#7 padding byte out of range");for(var x=d.length-f,D=0;D<f;D++)if(d[x+D]!==f)throw new Error("PKCS#7 invalid padding byte");var O=o(x);return c(d,O,0,0,x),O}var C={AES:ce,Counter:y,ModeOfOperation:{ecb:te,cbc:b,cfb:a,ofb:l,ctr:v},utils:{hex:h,utf8:u},padding:{pkcs7:{pad:w,strip:k}},_arrayTest:{coerceArray:s,createArray:o,copyArray:c}};t.exports=C})()})(Um);var oi=Um.exports;const Lm="json-wallets/5.7.0";function Ts(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),de(t)}function Wo(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function zh(t){return typeof t=="string"?fr(t,pi.NFKC):de(t)}function or(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const o in r)if(o.toLowerCase()===n[i]){s=r[o];break}if(s===null)return null;r=s}return r}function e6(t){const e=de(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=ge(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const t6=new $(Lm);class r6 extends Ls{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function Fm(t,e){const r=JSON.parse(t);e=zh(e);const n=Ot(or(r,"ethaddr")),i=Ts(or(r,"encseed"));(!i||i.length%16!==0)&&t6.throwArgumentError("invalid encseed","json",t);const s=de(qh(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),c=i.slice(16),u=new oi.ModeOfOperation.cbc(s,o),h=oi.padding.pkcs7.strip(de(u.decrypt(c)));let p="";for(let S=0;S<h.length;S++)p+=String.fromCharCode(h[S]);const m=fr(p),_=Lt(m);return new r6({_isCrowdsaleAccount:!0,address:n,privateKey:_})}function Gh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function Vh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function n6(t){if(Gh(t))try{return Ot(JSON.parse(t).ethaddr)}catch{return null}if(Vh(t))try{return Ot(JSON.parse(t).address)}catch{return null}return null}var $m={exports:{}};(function(t,e){(function(r){function i(T){const A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let P=1779033703,R=3144134277,F=1013904242,q=2773480762,U=1359893119,K=2600822924,Z=528734635,Q=1541459225;const ue=new Uint32Array(64);function be(v){let w=0,k=v.length;for(;k>=64;){let C=P,d=R,f=F,x=q,D=U,O=K,G=Z,ye=Q,fe,oe,ut,Se,ke;for(oe=0;oe<16;oe++)ut=w+oe*4,ue[oe]=(v[ut]&255)<<24|(v[ut+1]&255)<<16|(v[ut+2]&255)<<8|v[ut+3]&255;for(oe=16;oe<64;oe++)fe=ue[oe-2],Se=(fe>>>17|fe<<32-17)^(fe>>>19|fe<<32-19)^fe>>>10,fe=ue[oe-15],ke=(fe>>>7|fe<<32-7)^(fe>>>18|fe<<32-18)^fe>>>3,ue[oe]=(Se+ue[oe-7]|0)+(ke+ue[oe-16]|0)|0;for(oe=0;oe<64;oe++)Se=(((D>>>6|D<<32-6)^(D>>>11|D<<32-11)^(D>>>25|D<<32-25))+(D&O^~D&G)|0)+(ye+(A[oe]+ue[oe]|0)|0)|0,ke=((C>>>2|C<<32-2)^(C>>>13|C<<32-13)^(C>>>22|C<<32-22))+(C&d^C&f^d&f)|0,ye=G,G=O,O=D,D=x+Se|0,x=f,f=d,d=C,C=Se+ke|0;P=P+C|0,R=R+d|0,F=F+f|0,q=q+x|0,U=U+D|0,K=K+O|0,Z=Z+G|0,Q=Q+ye|0,w+=64,k-=64}}be(T);let ce,te=T.length%64,b=T.length/536870912|0,a=T.length<<3,l=te<56?56:120,y=T.slice(T.length-te,T.length);for(y.push(128),ce=te+1;ce<l;ce++)y.push(0);return y.push(b>>>24&255),y.push(b>>>16&255),y.push(b>>>8&255),y.push(b>>>0&255),y.push(a>>>24&255),y.push(a>>>16&255),y.push(a>>>8&255),y.push(a>>>0&255),be(y),[P>>>24&255,P>>>16&255,P>>>8&255,P>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,K>>>24&255,K>>>16&255,K>>>8&255,K>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255,Q>>>24&255,Q>>>16&255,Q>>>8&255,Q>>>0&255]}function s(T,A,P){T=T.length<=64?T:i(T);const R=64+A.length+4,F=new Array(R),q=new Array(64);let U,K=[];for(U=0;U<64;U++)F[U]=54;for(U=0;U<T.length;U++)F[U]^=T[U];for(U=0;U<A.length;U++)F[64+U]=A[U];for(U=R-4;U<R;U++)F[U]=0;for(U=0;U<64;U++)q[U]=92;for(U=0;U<T.length;U++)q[U]^=T[U];function Z(){for(let Q=R-1;Q>=R-4;Q--){if(F[Q]++,F[Q]<=255)return;F[Q]=0}}for(;P>=32;)Z(),K=K.concat(i(q.concat(i(F)))),P-=32;return P>0&&(Z(),K=K.concat(i(q.concat(i(F))).slice(0,P))),K}function o(T,A,P,R,F){let q;for(p(T,(2*P-1)*16,F,0,16),q=0;q<2*P;q++)h(T,q*16,F,16),u(F,R),p(F,0,T,A+q*16,16);for(q=0;q<P;q++)p(T,A+q*2*16,T,q*16,16);for(q=0;q<P;q++)p(T,A+(q*2+1)*16,T,(q+P)*16,16)}function c(T,A){return T<<A|T>>>32-A}function u(T,A){p(T,0,A,0,16);for(let P=8;P>0;P-=2)A[4]^=c(A[0]+A[12],7),A[8]^=c(A[4]+A[0],9),A[12]^=c(A[8]+A[4],13),A[0]^=c(A[12]+A[8],18),A[9]^=c(A[5]+A[1],7),A[13]^=c(A[9]+A[5],9),A[1]^=c(A[13]+A[9],13),A[5]^=c(A[1]+A[13],18),A[14]^=c(A[10]+A[6],7),A[2]^=c(A[14]+A[10],9),A[6]^=c(A[2]+A[14],13),A[10]^=c(A[6]+A[2],18),A[3]^=c(A[15]+A[11],7),A[7]^=c(A[3]+A[15],9),A[11]^=c(A[7]+A[3],13),A[15]^=c(A[11]+A[7],18),A[1]^=c(A[0]+A[3],7),A[2]^=c(A[1]+A[0],9),A[3]^=c(A[2]+A[1],13),A[0]^=c(A[3]+A[2],18),A[6]^=c(A[5]+A[4],7),A[7]^=c(A[6]+A[5],9),A[4]^=c(A[7]+A[6],13),A[5]^=c(A[4]+A[7],18),A[11]^=c(A[10]+A[9],7),A[8]^=c(A[11]+A[10],9),A[9]^=c(A[8]+A[11],13),A[10]^=c(A[9]+A[8],18),A[12]^=c(A[15]+A[14],7),A[13]^=c(A[12]+A[15],9),A[14]^=c(A[13]+A[12],13),A[15]^=c(A[14]+A[13],18);for(let P=0;P<16;++P)T[P]+=A[P]}function h(T,A,P,R){for(let F=0;F<R;F++)P[F]^=T[A+F]}function p(T,A,P,R,F){for(;F--;)P[R++]=T[A++]}function m(T){if(!T||typeof T.length!="number")return!1;for(let A=0;A<T.length;A++){const P=T[A];if(typeof P!="number"||P%1||P<0||P>=256)return!1}return!0}function _(T,A){if(typeof T!="number"||T%1)throw new Error("invalid "+A);return T}function S(T,A,P,R,F,q,U){if(P=_(P,"N"),R=_(R,"r"),F=_(F,"p"),q=_(q,"dkLen"),P===0||(P&P-1)!==0)throw new Error("N must be power of 2");if(P>2147483647/128/R)throw new Error("N too large");if(R>2147483647/128/F)throw new Error("r too large");if(!m(T))throw new Error("password must be an array or buffer");if(T=Array.prototype.slice.call(T),!m(A))throw new Error("salt must be an array or buffer");A=Array.prototype.slice.call(A);let K=s(T,A,F*128*R);const Z=new Uint32Array(F*32*R);for(let D=0;D<Z.length;D++){const O=D*4;Z[D]=(K[O+3]&255)<<24|(K[O+2]&255)<<16|(K[O+1]&255)<<8|(K[O+0]&255)<<0}const Q=new Uint32Array(64*R),ue=new Uint32Array(32*R*P),be=32*R,ce=new Uint32Array(16),te=new Uint32Array(16),b=F*P*2;let a=0,l=null,y=!1,v=0,w=0,k,C;const d=U?parseInt(1e3/R):4294967295,f=typeof setImmediate<"u"?setImmediate:setTimeout,x=function(){if(y)return U(new Error("cancelled"),a/b);let D;switch(v){case 0:C=w*32*R,p(Z,C,Q,0,be),v=1,k=0;case 1:D=P-k,D>d&&(D=d);for(let G=0;G<D;G++)p(Q,0,ue,(k+G)*be,be),o(Q,be,R,ce,te);if(k+=D,a+=D,U){const G=parseInt(1e3*a/b);if(G!==l){if(y=U(null,a/b),y)break;l=G}}if(k<P)break;k=0,v=2;case 2:D=P-k,D>d&&(D=d);for(let G=0;G<D;G++){const ye=(2*R-1)*16,fe=Q[ye]&P-1;h(ue,fe*be,Q,be),o(Q,be,R,ce,te)}if(k+=D,a+=D,U){const G=parseInt(1e3*a/b);if(G!==l){if(y=U(null,a/b),y)break;l=G}}if(k<P)break;if(p(Q,0,Z,C,be),w++,w<F){v=0;break}K=[];for(let G=0;G<Z.length;G++)K.push(Z[G]>>0&255),K.push(Z[G]>>8&255),K.push(Z[G]>>16&255),K.push(Z[G]>>24&255);const O=s(T,K,q);return U&&U(null,1,O),O}U&&f(x)};if(!U)for(;;){const D=x();if(D!=null)return D}x()}const B={scrypt:function(T,A,P,R,F,q,U){return new Promise(function(K,Z){let Q=0;U&&U(0),S(T,A,P,R,F,q,function(ue,be,ce){if(ue)Z(ue);else if(ce)U&&Q!==1&&U(1),K(new Uint8Array(ce));else if(U&&be!==Q)return Q=be,U(be)})})},syncScrypt:function(T,A,P,R,F,q){return new Uint8Array(S(T,A,P,R,F,q))}};t.exports=B})()})($m);var Jh=$m.exports,i6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const _l=new $(Lm);function Vd(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class s6 extends Ls{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function o6(t,e,r){if(or(t,"crypto/cipher")==="aes-128-ctr"){const i=Ts(or(t,"crypto/cipherparams/iv")),s=new oi.Counter(i),o=new oi.ModeOfOperation.ctr(e,s);return de(o.decrypt(r))}return null}function jm(t,e){const r=Ts(or(t,"crypto/ciphertext"));if(ge(Lt(Kt([e.slice(16,32),r]))).substring(2)!==or(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=o6(t,e.slice(0,16),r);i||_l.throwError("unsupported cipher",$.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),o=Qi(i);if(t.address){let u=t.address.toLowerCase();if(u.substring(0,2)!=="0x"&&(u="0x"+u),Ot(u)!==o)throw new Error("address mismatch")}const c={_isKeystoreAccount:!0,address:o,privateKey:ge(i)};if(or(t,"x-ethers/version")==="0.1"){const u=Ts(or(t,"x-ethers/mnemonicCiphertext")),h=Ts(or(t,"x-ethers/mnemonicCounter")),p=new oi.Counter(h),m=new oi.ModeOfOperation.ctr(s,p),_=or(t,"x-ethers/path")||To,S=or(t,"x-ethers/locale")||"en",B=de(m.decrypt(u));try{const T=qf(B,S),A=gn.fromMnemonic(T,null,S).derivePath(_);if(A.privateKey!=c.privateKey)throw new Error("mnemonic mismatch");c.mnemonic=A.mnemonic}catch(T){if(T.code!==$.errors.INVALID_ARGUMENT||T.argument!=="wordlist")throw T}}return new s6(c)}function Km(t,e,r,n,i){return de(qh(t,e,r,n,i))}function a6(t,e,r,n,i){return Promise.resolve(Km(t,e,r,n,i))}function qm(t,e,r,n,i){const s=zh(e),o=or(t,"crypto/kdf");if(o&&typeof o=="string"){const c=function(u,h){return _l.throwArgumentError("invalid key-derivation function parameters",u,h)};if(o.toLowerCase()==="scrypt"){const u=Ts(or(t,"crypto/kdfparams/salt")),h=parseInt(or(t,"crypto/kdfparams/n")),p=parseInt(or(t,"crypto/kdfparams/r")),m=parseInt(or(t,"crypto/kdfparams/p"));(!h||!p||!m)&&c("kdf",o),(h&h-1)!==0&&c("N",h);const _=parseInt(or(t,"crypto/kdfparams/dklen"));return _!==32&&c("dklen",_),n(s,u,h,p,m,64,i)}else if(o.toLowerCase()==="pbkdf2"){const u=Ts(or(t,"crypto/kdfparams/salt"));let h=null;const p=or(t,"crypto/kdfparams/prf");p==="hmac-sha256"?h="sha256":p==="hmac-sha512"?h="sha512":c("prf",p);const m=parseInt(or(t,"crypto/kdfparams/c")),_=parseInt(or(t,"crypto/kdfparams/dklen"));return _!==32&&c("dklen",_),r(s,u,m,_,h)}}return _l.throwArgumentError("unsupported key-derivation function","kdf",o)}function c6(t,e){const r=JSON.parse(t),n=qm(r,e,Km,Jh.syncScrypt);return jm(r,n)}function f6(t,e,r){return i6(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield qm(n,e,a6,Jh.scrypt,r);return jm(n,i)})}function u6(t,e,r,n){try{if(Ot(t.address)!==Qi(t.privateKey))throw new Error("address/privateKey mismatch");if(Vd(t)){const A=t.mnemonic;if(gn.fromMnemonic(A.phrase,null,A.locale).derivePath(A.path||To).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(A){return Promise.reject(A)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=de(t.privateKey),s=zh(e);let o=null,c=null,u=null;if(Vd(t)){const A=t.mnemonic;o=de(Kf(A.phrase,A.locale||"en")),c=A.path||To,u=A.locale||"en"}let h=r.client;h||(h="ethers.js");let p=null;r.salt?p=de(r.salt):p=po(32);let m=null;if(r.iv){if(m=de(r.iv),m.length!==16)throw new Error("invalid iv")}else m=po(16);let _=null;if(r.uuid){if(_=de(r.uuid),_.length!==16)throw new Error("invalid uuid")}else _=po(16);let S=1<<17,B=8,T=1;return r.scrypt&&(r.scrypt.N&&(S=r.scrypt.N),r.scrypt.r&&(B=r.scrypt.r),r.scrypt.p&&(T=r.scrypt.p)),Jh.scrypt(s,p,S,B,T,64,n).then(A=>{A=de(A);const P=A.slice(0,16),R=A.slice(16,32),F=A.slice(32,64),q=new oi.Counter(m),U=new oi.ModeOfOperation.ctr(P,q),K=de(U.encrypt(i)),Z=Lt(Kt([R,K])),Q={address:t.address.substring(2).toLowerCase(),id:e6(_),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ge(m).substring(2)},ciphertext:ge(K).substring(2),kdf:"scrypt",kdfparams:{salt:ge(p).substring(2),n:S,dklen:32,p:T,r:B},mac:Z.substring(2)}};if(o){const ue=po(16),be=new oi.Counter(ue),ce=new oi.ModeOfOperation.ctr(F,be),te=de(ce.encrypt(o)),b=new Date,a=b.getUTCFullYear()+"-"+Wo(b.getUTCMonth()+1,2)+"-"+Wo(b.getUTCDate(),2)+"T"+Wo(b.getUTCHours(),2)+"-"+Wo(b.getUTCMinutes(),2)+"-"+Wo(b.getUTCSeconds(),2)+".0Z";Q["x-ethers"]={client:h,gethFilename:"UTC--"+a+"--"+Q.address,mnemonicCounter:ge(ue).substring(2),mnemonicCiphertext:ge(te).substring(2),path:c,locale:u,version:"0.1"}}return JSON.stringify(Q)})}function l6(t,e,r){if(Gh(t)){r&&r(0);const n=Fm(t,e);return r&&r(1),Promise.resolve(n)}return Vh(t)?f6(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function h6(t,e){if(Gh(t))return Fm(t,e);if(Vh(t))return c6(t,e);throw new Error("invalid JSON wallet")}const d6="wallet/5.7.0";var Jd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Xs=new $(d6);function p6(t){return t!=null&&pt(t.privateKey,32)&&t.address!=null}function g6(t){const e=t.mnemonic;return e&&e.phrase}class Gi extends Di{constructor(e,r){if(super(),p6(e)){const n=new Ss(e.privateKey);if(X(this,"_signingKey",()=>n),X(this,"address",Qi(this.publicKey)),this.address!==Ot(e.address)&&Xs.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),g6(e)){const i=e.mnemonic;X(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||To,locale:i.locale||"en"}));const s=this.mnemonic,o=gn.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);Qi(o.privateKey)!==this.address&&Xs.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else X(this,"_mnemonic",()=>null)}else{if(Ss.isSigningKey(e))e.curve!=="secp256k1"&&Xs.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),X(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new Ss(e);X(this,"_signingKey",()=>n)}X(this,"_mnemonic",()=>null),X(this,"address",Qi(this.publicKey))}r&&!$s.isProvider(r)&&Xs.throwArgumentError("invalid provider","provider",r),X(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Gi(this,e)}signTransaction(e){return er(e).then(r=>{r.from!=null&&(Ot(r.from)!==this.address&&Xs.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(Lt(vl(r)));return vl(r,n)})}signMessage(e){return Jd(this,void 0,void 0,function*(){return dl(this._signingKey().signDigest(Dh(e)))})}_signTypedData(e,r,n){return Jd(this,void 0,void 0,function*(){const i=yield Sr.resolveNames(e,r,n,s=>(this.provider==null&&Xs.throwError("cannot resolve ENS names without a provider",$.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return dl(this._signingKey().signDigest(Sr.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),u6(this,e,r,n)}static createRandom(e){let r=po(16);e||(e={}),e.extraEntropy&&(r=de(ar(Lt(Kt([r,e.extraEntropy])),0,16)));const n=qf(r,e.locale);return Gi.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return l6(e,r,n).then(i=>new Gi(i))}static fromEncryptedJsonSync(e,r){return new Gi(h6(e,r))}static fromMnemonic(e,r,n){return r||(r=To),new Gi(gn.fromMnemonic(e,null,n).derivePath(r))}}function y6(t,e){return Za(Dh(t),e)}function m6(t,e,r,n){return Za(Sr.hash(t,e,r),n)}const x6="networks/5.7.1",Wd=new $(x6);function b6(t){return t&&typeof t.renetwork=="function"}function Ti(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return Ti(r)},e}function ff(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return ff(t,n)},r}const Yd={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Ti("homestead")},Zd={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Ti("ropsten")},Xd={chainId:63,name:"classicMordor",_defaultProvider:ff("https://www.ethercluster.com/mordor","classicMordor")},xc={unspecified:{chainId:0,name:"unspecified"},homestead:Yd,mainnet:Yd,morden:{chainId:2,name:"morden"},ropsten:Zd,testnet:Zd,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Ti("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Ti("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Ti("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Ti("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:ff("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Xd,classicTestnet:Xd,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:ff("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Ti("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Ti("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Wh(t){if(t==null)return null;if(typeof t=="number"){for(const n in xc){const i=xc[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=xc[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=xc[t.name];if(!e)return typeof t.chainId!="number"&&Wd.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&Wd.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(b6(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const v6="web/5.7.1";var w6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};function _6(t,e){return w6(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,c)=>{s[c.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:de(new Uint8Array(i))}})}var E6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const $n=new $(v6);function Qd(t){return new Promise(e=>{setTimeout(e,t)})}function ji(t,e){if(t==null)return null;if(typeof t=="string")return t;if(Va(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Fs(t)}catch{}return ge(t)}return t}function A6(t){return fr(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Hm(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;$n.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;$n.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,c={};let u=null;const h={method:"GET"};let p=!1,m=2*60*1e3;if(typeof t=="string")u=t;else if(typeof t=="object"){if((t==null||t.url==null)&&$n.throwArgumentError("missing URL","connection.url",t),u=t.url,typeof t.timeout=="number"&&t.timeout>0&&(m=t.timeout),t.headers)for(const P in t.headers)c[P.toLowerCase()]={key:P,value:String(t.headers[P])},["if-none-match","if-modified-since"].indexOf(P.toLowerCase())>=0&&(p=!0);if(h.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){u.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&$n.throwError("basic authentication requires a secure https url",$.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:t.user,password:"[REDACTED]"});const P=t.user+":"+t.password;c.authorization={key:"Authorization",value:"Basic "+Rh(fr(P))}}t.skipFetchSetup!=null&&(h.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(h.fetchOptions=Ht(t.fetchOptions))}const _=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),S=u?u.match(_):null;if(S)try{const P={statusCode:200,statusMessage:"OK",headers:{"content-type":S[1]||"text/plain"},body:S[2]?Bh(S[3]):A6(S[3])};let R=P.body;return r&&(R=r(P.body,P)),Promise.resolve(R)}catch(P){$n.throwError("processing response error",$.errors.SERVER_ERROR,{body:ji(S[1],S[2]),error:P,requestBody:null,requestMethod:"GET",url:u})}e&&(h.method="POST",h.body=e,c["content-type"]==null&&(c["content-type"]={key:"Content-Type",value:"application/octet-stream"}),c["content-length"]==null&&(c["content-length"]={key:"Content-Length",value:String(e.length)}));const B={};Object.keys(c).forEach(P=>{const R=c[P];B[R.key]=R.value}),h.headers=B;const T=function(){let P=null;return{promise:new Promise(function(q,U){m&&(P=setTimeout(()=>{P!=null&&(P=null,U($n.makeError("timeout",$.errors.TIMEOUT,{requestBody:ji(h.body,B["content-type"]),requestMethod:h.method,timeout:m,url:u})))},m))}),cancel:function(){P!=null&&(clearTimeout(P),P=null)}}}(),A=function(){return E6(this,void 0,void 0,function*(){for(let P=0;P<n;P++){let R=null;try{if(R=yield _6(u,h),P<n){if(R.statusCode===301||R.statusCode===302){const q=R.headers.location||"";if(h.method==="GET"&&q.match(/^https:/)){u=R.headers.location;continue}}else if(R.statusCode===429){let q=!0;if(i&&(q=yield i(P,u)),q){let U=0;const K=R.headers["retry-after"];typeof K=="string"&&K.match(/^[1-9][0-9]*$/)?U=parseInt(K)*1e3:U=s*parseInt(String(Math.random()*Math.pow(2,P))),yield Qd(U);continue}}}}catch(q){R=q.response,R==null&&(T.cancel(),$n.throwError("missing response",$.errors.SERVER_ERROR,{requestBody:ji(h.body,B["content-type"]),requestMethod:h.method,serverError:q,url:u}))}let F=R.body;if(p&&R.statusCode===304?F=null:!o&&(R.statusCode<200||R.statusCode>=300)&&(T.cancel(),$n.throwError("bad response",$.errors.SERVER_ERROR,{status:R.statusCode,headers:R.headers,body:ji(F,R.headers?R.headers["content-type"]:null),requestBody:ji(h.body,B["content-type"]),requestMethod:h.method,url:u})),r)try{const q=yield r(F,R);return T.cancel(),q}catch(q){if(q.throttleRetry&&P<n){let U=!0;if(i&&(U=yield i(P,u)),U){const K=s*parseInt(String(Math.random()*Math.pow(2,P)));yield Qd(K);continue}}T.cancel(),$n.throwError("processing response error",$.errors.SERVER_ERROR,{body:ji(F,R.headers?R.headers["content-type"]:null),error:q,requestBody:ji(h.body,B["content-type"]),requestMethod:h.method,url:u})}return T.cancel(),F}return $n.throwError("failed response",$.errors.SERVER_ERROR,{requestBody:ji(h.body,B["content-type"]),requestMethod:h.method,url:u})})}();return Promise.race([T.promise,A])}function $o(t,e,r){let n=(s,o)=>{let c=null;if(s!=null)try{c=JSON.parse(Fs(s))}catch(u){$n.throwError("invalid JSON",$.errors.SERVER_ERROR,{body:s,error:u})}return r&&(c=r(c,o)),c},i=null;if(e!=null){i=fr(e);const s=typeof t=="string"?{url:t}:Ht(t);s.headers?Object.keys(s.headers).filter(c=>c.toLowerCase()==="content-type").length!==0||(s.headers=Ht(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return Hm(t,i,n)}function As(t,e){return e||(e={}),e=Ht(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const c=e.retryLimit;let u=0;function h(){return t().then(function(p){if(p!==void 0)o()&&r(p);else if(e.oncePoll)e.oncePoll.once("poll",h);else if(e.onceBlock)e.onceBlock.once("block",h);else if(!s){if(u++,u>c){o()&&n(new Error("retry limit reached"));return}let m=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));m<e.floor&&(m=e.floor),m>e.ceiling&&(m=e.ceiling),setTimeout(h,m)}return null},function(p){o()&&n(p)})}h()})}var uf="qpzry9x8gf2tvdw0s3jn54khce6mua7l",El={};for(var bc=0;bc<uf.length;bc++){var Pu=uf.charAt(bc);if(El[Pu]!==void 0)throw new TypeError(Pu+" is ambiguous");El[Pu]=bc}function vo(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function zm(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=vo(e)^n>>5}for(e=vo(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=vo(e)^i&31}return e}function S6(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=zm(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5!==0)throw new Error("Non 5-bit word");n=vo(n)^o,i+=uf.charAt(o)}for(s=0;s<6;++s)n=vo(n);for(n^=1,s=0;s<6;++s){var c=n>>(5-s)*5&31;i+=uf.charAt(c)}return i}function Gm(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var c=zm(s);if(typeof c=="string")return c;for(var u=[],h=0;h<o.length;++h){var p=o.charAt(h),m=El[p];if(m===void 0)return"Unknown character "+p;c=vo(c)^m,!(h+6>=o.length)&&u.push(m)}return c!==1?"Invalid checksum for "+t:{prefix:s,words:u}}function T6(){var t=Gm.apply(null,arguments);if(typeof t=="object")return t}function k6(t){var e=Gm.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Hf(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,c=[],u=0;u<t.length;++u)for(i=i<<e|t[u],s+=e;s>=r;)s-=r,c.push(i>>s&o);if(n)s>0&&c.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return c}function M6(t){var e=Hf(t,8,5,!0);if(Array.isArray(e))return e}function P6(t){var e=Hf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function C6(t){var e=Hf(t,5,8,!1);if(Array.isArray(e))return e}function I6(t){var e=Hf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var N6={decodeUnsafe:T6,decode:k6,encode:S6,toWordsUnsafe:M6,toWords:P6,fromWordsUnsafe:C6,fromWords:I6},ep=N6;const qr="providers/5.7.2",Yo=new $(qr);class Te{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),c=this.hex.bind(this),u=this.number.bind(this),h=this.type.bind(this),p=m=>this.data(m,!0);return e.transaction={hash:o,type:h,accessList:Te.allowNull(this.accessList.bind(this),null),blockHash:Te.allowNull(o,null),blockNumber:Te.allowNull(u,null),transactionIndex:Te.allowNull(u,null),confirmations:Te.allowNull(u,null),from:r,gasPrice:Te.allowNull(n),maxPriorityFeePerGas:Te.allowNull(n),maxFeePerGas:Te.allowNull(n),gasLimit:n,to:Te.allowNull(r,null),value:n,nonce:u,data:s,r:Te.allowNull(this.uint256),s:Te.allowNull(this.uint256),v:Te.allowNull(u),creates:Te.allowNull(r,null),raw:Te.allowNull(s)},e.transactionRequest={from:Te.allowNull(r),nonce:Te.allowNull(u),gasLimit:Te.allowNull(n),gasPrice:Te.allowNull(n),maxPriorityFeePerGas:Te.allowNull(n),maxFeePerGas:Te.allowNull(n),to:Te.allowNull(r),value:Te.allowNull(n),data:Te.allowNull(p),type:Te.allowNull(u),accessList:Te.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:u,blockNumber:u,transactionHash:o,address:r,topics:Te.arrayOf(o),data:s,logIndex:u,blockHash:o},e.receipt={to:Te.allowNull(this.address,null),from:Te.allowNull(this.address,null),contractAddress:Te.allowNull(r,null),transactionIndex:u,root:Te.allowNull(c),gasUsed:n,logsBloom:Te.allowNull(s),blockHash:o,transactionHash:o,logs:Te.arrayOf(this.receiptLog.bind(this)),blockNumber:u,confirmations:Te.allowNull(u,null),cumulativeGasUsed:n,effectiveGasPrice:Te.allowNull(n),status:Te.allowNull(u),type:h},e.block={hash:Te.allowNull(o),parentHash:o,number:u,timestamp:u,nonce:Te.allowNull(c),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Te.allowNull(r),extraData:s,transactions:Te.allowNull(Te.arrayOf(o)),baseFeePerGas:Te.allowNull(n)},e.blockWithTransactions=Ht(e.block),e.blockWithTransactions.transactions=Te.allowNull(Te.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Te.allowNull(i,void 0),toBlock:Te.allowNull(i,void 0),blockHash:Te.allowNull(o,void 0),address:Te.allowNull(r,void 0),topics:Te.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Te.allowNull(u),blockHash:Te.allowNull(o),transactionIndex:u,removed:Te.allowNull(this.boolean.bind(this)),address:r,data:Te.allowFalsish(s,"0x"),topics:Te.arrayOf(o),transactionHash:o,logIndex:u},e}accessList(e){return ps(e||[])}number(e){return e==="0x"?0:he.from(e).toNumber()}type(e){return e==="0x"||e==null?0:he.from(e).toNumber()}bigNumber(e){return he.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),pt(e))?e.toLowerCase():Yo.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Ot(e)}callAddress(e){if(!pt(e,32))return null;const r=Ot(ar(e,12));return r===Wy?null:r}contractAddress(e){return Uf(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||pt(e))return Ja(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return di(n)!==32?Yo.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=he.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!pt(e))throw new Error("invalid uint256");return qt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Te.check(r,e);return i._difficulty=n==null?null:he.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Te.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&he.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=Te.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;pt(n)&&(n=he.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),pt(n)&&(n=he.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return Tm(e)}receiptLog(e){return Te.check(this.formats.receiptLog,e)}receipt(e){const r=Te.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=he.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Yo.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Yo.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Yo.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return Te.check(this.formats.filter,e)}filterLog(e){return Te.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}function Vm(t){return t&&typeof t.isCommunityResource=="function"}function Al(t){return Vm(t)&&t.isCommunityResource()}let tp=!1;function Xa(){tp||(tp=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var ft=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const bt=new $(qr),B6=10;function rp(t){return t==null?"null":(di(t)!==32&&bt.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function np(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[rp(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return rp(e)}).join("&")}function R6(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Qs(t){if(typeof t=="string"){if(t=t.toLowerCase(),di(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+np(t);if(l3.isForkEvent(t))throw bt.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+np(t.topics||[])}throw new Error("invalid event - "+t)}function Zo(){return new Date().getTime()}function ip(t){return new Promise(e=>{setTimeout(e,t)})}const O6=["block","network","pending","poll"];class D6{constructor(e,r,n){X(this,"tag",e),X(this,"listener",r),X(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=R6(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||O6.indexOf(this.tag)>=0}}const U6={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Cu(t){return qt(he.from(t).toHexString(),32)}function sp(t){return Ao.encode(Kt([t,ar(Ni(Ni(t)),0,4)]))}const Jm=new RegExp("^(ipfs)://(.*)$","i"),op=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Jm,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function jc(t,e){try{return Fs(Ba(t,e))}catch{}return null}function Ba(t,e){if(t==="0x")return null;const r=he.from(ar(t,e,e+32)).toNumber(),n=he.from(ar(t,r,r+32)).toNumber();return ar(t,r+32,r+32+n)}function Iu(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):bt.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function ap(t){const e=de(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function L6(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Wm(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=de(t[n]);e[n]=ap(r),e.push(ap(i.length)),e.push(L6(i)),r+=32+Math.ceil(i.length/32)*32}return zr(e)}class Sl{constructor(e,r,n,i){X(this,"provider",e),X(this,"name",n),X(this,"address",e.formatter.address(r)),X(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>he.from(e).eq(1)).catch(e=>{if(e.code===$.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return ft(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:zr([e,ga(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=zr(["0x9061b923",Wm([hm(this.name),n.data])]));try{let s=yield this.provider.call(n);return de(s).length%32===4&&bt.throwError("resolver threw error",$.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Ba(s,0)),s}catch(s){if(s.code===$.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return ft(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Ba(n,0):null})}_getAddress(e,r){const n=U6[String(e)];if(n==null&&bt.throwError(`unsupported coin type: ${e}`,$.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=de(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return sp(Kt([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return sp(Kt([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const c=ep.toWords(i.slice(2));return c.unshift(o),ep.encode(n.prefix,c)}}return null}getAddress(e){return ft(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Ph?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===$.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Cu(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&bt.throwError("invalid or unsupported coin data",$.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return ft(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<op.length;n++){const i=r.match(op[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:Iu(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const c=this._resolvedAddress||(yield this.getAddress()),u=(i[2]||"").split("/");if(u.length!==2)return null;const h=yield this.provider.formatter.address(u[0]),p=qt(he.from(u[1]).toHexString(),32);if(s==="erc721"){const T=this.provider.formatter.callAddress(yield this.provider.call({to:h,data:zr(["0x6352211e",p])}));if(c!==T)return null;e.push({type:"owner",content:T})}else if(s==="erc1155"){const T=he.from(yield this.provider.call({to:h,data:zr(["0x00fdd58e",qt(c,32),p])}));if(T.isZero())return null;e.push({type:"balance",content:T.toString()})}const m={to:this.provider.formatter.address(u[0]),data:zr([o,p])};let _=jc(yield this.provider.call(m),0);if(_==null)return null;e.push({type:"metadata-url-base",content:_}),s==="erc1155"&&(_=_.replace("{id}",p.substring(2)),e.push({type:"metadata-url-expanded",content:_})),_.match(/^ipfs:/i)&&(_=Iu(_)),e.push({type:"metadata-url",content:_});const S=yield $o(_);if(!S)return null;e.push({type:"metadata",content:JSON.stringify(S)});let B=S.image;if(typeof B!="string")return null;if(!B.match(/^(https:\/\/|data:)/i)){if(B.match(Jm)==null)return null;e.push({type:"url-ipfs",content:B}),B=Iu(B)}return e.push({type:"url",content:B}),{linkage:e,url:B}}}}}catch{}return null})}getContentHash(){return ft(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Ao.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ao.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"},c=Rh("0x"+s[1]).replace(/[=+\/]/g,u=>o[u]);return"sia://"+c}return bt.throwError("invalid or unsupported content hash data",$.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return ft(this,void 0,void 0,function*(){let r=fr(e);r=Kt([Cu(64),Cu(r.length),r]),r.length%32!==0&&(r=Kt([r,qt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",ge(r));return n==null||n==="0x"?null:Fs(n)})}}let Nu=null,F6=1;class zf extends $s{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),X(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Mr(new.target,"getNetwork")(e);r?(X(this,"_network",r),this.emit("network",r,null)):bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return ft(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||bt.throwError("no network detected",$.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:X(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return As(()=>this._ready().then(e=>e,e=>{if(!(e.code===$.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Nu==null&&(Nu=new Te),Nu}static getNetwork(e){return Wh(e??"homestead")}ccipReadFetch(e,r,n){return ft(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let c=0;c<n.length;c++){const u=n[c],h=u.replace("{sender}",i).replace("{data}",s),p=u.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),m=yield $o({url:h,errorPassThrough:!0},p,(S,B)=>(S.status=B.statusCode,S));if(m.data)return m.data;const _=m.message||"unknown error";if(m.status>=400&&m.status<500)return bt.throwError(`response not found during CCIP fetch: ${_}`,$.errors.SERVER_ERROR,{url:u,errorMessage:_});o.push(_)}return bt.throwError(`error encountered during CCIP fetch: ${o.map(c=>JSON.stringify(c)).join(", ")}`,$.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return ft(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Zo()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Zo(),n=er({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=Zo();return i=he.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return ft(this,void 0,void 0,function*(){const e=F6++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",bt.makeError("network block skew detected",$.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(c=>(!c||c.blockNumber==null||(this._emitted["t:"+s]=c.blockNumber,this.emit(s,c)),null)).catch(c=>{this.emit("error",c)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const c=this.getLogs(s).then(u=>{i._inflight=!1,u.length!==0&&u.forEach(h=>{h.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=h.blockNumber),this._emitted["b:"+h.blockHash]=h.blockNumber,this._emitted["t:"+h.transactionHash]=h.blockNumber,this.emit(s,h)})}).catch(u=>{this.emit("error",u),i._inflight=!1});r.push(c)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return ft(this,void 0,void 0,function*(){return bt.throwError("provider does not support network detection",$.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return ft(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield ip(0),this._network;const n=bt.makeError("underlying network changed",$.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Zo();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Zo(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return ft(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return ft(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,c)=>{const u=[];let h=!1;const p=function(){return h?!0:(h=!0,u.forEach(_=>{_()}),!1)},m=_=>{_.confirmations<r||p()||o(_)};if(this.on(e,m),u.push(()=>{this.removeListener(e,m)}),i){let _=i.startBlock,S=null;const B=T=>ft(this,void 0,void 0,function*(){h||(yield ip(1e3),this.getTransactionCount(i.from).then(A=>ft(this,void 0,void 0,function*(){if(!h){if(A<=i.nonce)_=T;else{{const P=yield this.getTransaction(e);if(P&&P.blockNumber!=null)return}for(S==null&&(S=_-3,S<i.startBlock&&(S=i.startBlock));S<=T;){if(h)return;const P=yield this.getBlockWithTransactions(S);for(let R=0;R<P.transactions.length;R++){const F=P.transactions[R];if(F.hash===e)return;if(F.from===i.from&&F.nonce===i.nonce){if(h)return;const q=yield this.waitForTransaction(F.hash,r);if(p())return;let U="replaced";F.data===i.data&&F.to===i.to&&F.value.eq(i.value)?U="repriced":F.data==="0x"&&F.from===F.to&&F.value.isZero()&&(U="cancelled"),c(bt.makeError("transaction was replaced",$.errors.TRANSACTION_REPLACED,{cancelled:U==="replaced"||U==="cancelled",reason:U,replacement:this._wrapTransaction(F),hash:e,receipt:q}));return}}S++}}h||this.once("block",B)}}),A=>{h||this.once("block",B)}))});if(h)return;this.once("block",B),u.push(()=>{this.removeListener("block",B)})}if(typeof n=="number"&&n>0){const _=setTimeout(()=>{p()||c(bt.makeError("timeout exceeded",$.errors.TIMEOUT,{timeout:n}))},n);_.unref&&_.unref(),u.push(()=>{clearTimeout(_)})}})})}getBlockNumber(){return ft(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return he.from(e)}catch(r){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return he.from(i)}catch(s){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return he.from(i).toNumber()}catch(s){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return ge(i)}catch(s){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>Ja(o))}),s=yield this.perform("getStorageAt",i);try{return ge(s)}catch(o){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&di(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",$.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>ft(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let c;s!==0&&n!=null&&(c={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const u=yield this._waitForTransaction(e.hash,s,o,c);return u==null&&s===0?null:(this._emitted["t:"+e.hash]=u.blockNumber,u.status===0&&bt.throwError("transaction failed",$.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:u}),u)}),i}sendTransaction(e){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>ge(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return ft(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?he.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?ge(s):null))}),this.formatter.transactionRequest(yield er(n))})}_getFilter(e){return ft(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield er(r))})}_call(e,r,n){return ft(this,void 0,void 0,function*(){n>=B6&&bt.throwError("CCIP read exceeded maximum redirections",$.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&di(s)%32===4)try{const o=ar(s,4),c=ar(o,0,32);he.from(c).eq(i)||bt.throwError("CCIP Read sender did not match",$.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const u=[],h=he.from(ar(o,32,64)).toNumber(),p=he.from(ar(o,h,h+32)).toNumber(),m=ar(o,h+32);for(let P=0;P<p;P++){const R=jc(m,P*32);R==null&&bt.throwError("CCIP Read contained corrupt URL string",$.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),u.push(R)}const _=Ba(o,64);he.from(ar(o,100,128)).isZero()||bt.throwError("CCIP Read callback selector included junk",$.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const S=ar(o,96,100),B=Ba(o,128),T=yield this.ccipReadFetch(e,_,u);T==null&&bt.throwError("CCIP Read disabled or provided no URLs",$.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const A={to:i,data:zr([S,Wm([T,B])])};return this._call(A,r,n+1)}catch(o){if(o.code===$.errors.SERVER_ERROR)throw o}try{return ge(s)}catch(o){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield er({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return he.from(n)}catch(i){return bt.throwError("bad result from backend",$.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return ft(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&bt.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&bt.throwError("ENS name not configured",$.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return ft(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(pt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),pt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return As(()=>ft(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let u=0;u<s.transactions.length;u++){const h=s.transactions[u];if(h.blockNumber==null)h.confirmations=0;else if(h.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let p=o-h.blockNumber+1;p<=0&&(p=1),h.confirmations=p}}const c=this.formatter.blockWithTransactions(s);return c.transactions=c.transactions.map(u=>this._wrapTransaction(u)),c}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return ft(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return As(()=>ft(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return ft(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return As(()=>ft(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return ft(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield er({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Te.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return ft(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return ft(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&bt.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return ft(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new Sl(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return ft(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||bt.throwError("network does not support ENS",$.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+ga(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return ft(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(pt(e))throw n}typeof e!="string"&&bt.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return ft(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=jc(yield this.call({to:n,data:"0x691f3431"+ga(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return ft(this,void 0,void 0,function*(){let r=null;if(pt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new Sl(this,o,s);try{const c=yield r.getAvatar();if(c)return c.url}catch(c){if(c.code!==$.errors.CALL_EXCEPTION)throw c}try{const c=jc(yield this.call({to:o,data:"0x691f3431"+ga(s).substring(2)}),0);r=yield this.getResolver(c)}catch(c){if(c.code!==$.errors.CALL_EXCEPTION)throw c;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return bt.throwError(e+" not implemented",$.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new D6(Qs(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=Qs(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=Qs(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Qs(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=Qs(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Qs(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var Si=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const hr=new $(qr),$6=["call","estimateGas"];function xa(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=pt(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=xa(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return xa(JSON.parse(t),e)}catch{}return null}function Ym(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=xa(e,!0);if(s)return s.data;hr.throwError("missing revert data in call exception; Transaction reverted without a reason string",$.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=xa(e.body,!1);s==null&&(s=xa(e,!1)),s&&hr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",$.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===$.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&hr.throwError("insufficient funds for intrinsic transaction cost",$.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&hr.throwError("nonce has already been used",$.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&hr.throwError("replacement fee too low",$.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&hr.throwError("legacy pre-eip-155 transactions not supported",$.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),$6.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&hr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",$.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function cp(t){return new Promise(function(e){setTimeout(e,t)})}function j6(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Xo(t){return t&&t.toLowerCase()}const Tl={};class Yh extends Di{constructor(e,r,n){if(super(),e!==Tl)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");X(this,"provider",r),n==null&&(n=0),typeof n=="string"?(X(this,"_address",this.provider.formatter.address(n)),X(this,"_index",null)):typeof n=="number"?(X(this,"_index",n),X(this,"_address",null)):hr.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return hr.throwError("cannot alter JSON-RPC Signer connection",$.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new K6(Tl,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&hr.throwError("unknown account #"+this._index,$.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Ht(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Ht(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Si(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&hr.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),er({tx:er(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&hr.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&hr.throwError("user rejected transaction",$.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Ym("sendTransaction",o,s)))})}signTransaction(e){return hr.throwError("signing transactions is unsupported",$.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Si(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield As(()=>Si(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Si(this,void 0,void 0,function*(){const r=typeof e=="string"?fr(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[ge(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&hr.throwError("user rejected signing",$.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return Si(this,void 0,void 0,function*(){const r=typeof e=="string"?fr(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),ge(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&hr.throwError("user rejected signing",$.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return Si(this,void 0,void 0,function*(){const i=yield Sr.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Sr.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&hr.throwError("user rejected signing",$.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return Si(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class K6 extends Yh{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const q6={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Cs extends zf{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Mr(this.constructor,"defaultUrl")()),typeof e=="string"?X(this,"connection",Object.freeze({url:e})):X(this,"connection",Object.freeze(Ht(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Si(this,void 0,void 0,function*(){yield cp(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Mr(this.constructor,"getNetwork");try{return r(he.from(e).toNumber())}catch(n){return hr.throwError("could not detect network",$.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return hr.throwError("could not detect network",$.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Yh(Tl,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Jr(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=$o(this.connection,JSON.stringify(n),j6).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Xo(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Xo(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Xo(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Xo(r.address),qt(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":{const n=Mr(this.constructor,"hexlifyTransaction");return["eth_call",[n(r.transaction,{from:!0}),r.blockTag]]}case"estimateGas":{const n=Mr(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[n(r.transaction,{from:!0})]]}case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Xo(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Si(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&he.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=Ht(r),r.transaction=Ht(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&hr.throwError(e+" not implemented",$.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Ym(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(c){e._emitted["t:"+c.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(c).then(function(u){return e.emit("pending",u),null})})}),o.then(function(){return cp(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Ht(q6);if(r)for(const s in r)r[s]&&(n[s]=!0);Sh(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=Ja(he.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=ge(e[s]))}),e.accessList&&(i.accessList=ps(e.accessList)),i}}let ba=null;try{if(ba=WebSocket,ba==null)throw new Error("inject please")}catch{const e=new $(qr);ba=function(){e.throwError("WebSockets not supported in this environment",$.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Bu=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const vc=new $(qr);let H6=1;class Gf extends Cs{constructor(e,r){r==="any"&&vc.throwError("WebSocketProvider does not support 'any' network yet",$.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?X(this,"_websocket",new ba(this.connection.url)):X(this,"_websocket",e),X(this,"_requests",{}),X(this,"_subs",{}),X(this,"_subIds",{}),X(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const c=String(o.id),u=this._requests[c];if(delete this._requests[c],o.result!==void 0)u.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(u.payload),response:o.result,provider:this});else{let h=null;o.error?(h=new Error(o.error.message||"unknown error"),X(h,"code",o.error.code||null),X(h,"response",s)):h=new Error("unknown error"),u.callback(h,void 0),this.emit("debug",{action:"response",error:h,request:JSON.parse(u.payload),provider:this})}}else if(o.method==="eth_subscription"){const c=this._subs[o.params.subscription];c&&c.processFunc(o.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){vc.throwError("cannot reset events block on WebSocketProvider",$.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){vc.throwError("cannot set polling interval on WebSocketProvider",$.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Bu(this,void 0,void 0,function*(){return null})}set polling(e){!e||vc.throwError("cannot set polling on WebSocketProvider",$.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=H6++;return new Promise((i,s)=>{function o(u,h){return u?s(u):i(h)}const c=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(c),provider:this}),this._requests[String(n)]={callback:o,payload:c},this._wsReady&&this.websocket.send(c)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return Bu(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=he.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{!s||this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];!n||(delete this._subIds[r],n.then(i=>{!this._subs[i]||(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return Bu(this,void 0,void 0,function*(){this.websocket.readyState===ba.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var z6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const ca=new $(qr);class Zm extends Cs{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return z6(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||ca.throwError("no network detected",$.errors.UNKNOWN_ERROR,{}),this._network==null&&(X(this,"_network",r),this.emit("network",r,null))),r})}}class Ui extends Zm{constructor(e,r){ca.checkAbstract(new.target,Ui),e=Mr(new.target,"getNetwork")(e),r=Mr(new.target,"getApiKey")(r);const n=Mr(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?X(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{X(this,i,r[i])})}_startPending(){ca.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return ca.throwError("API provider does not support signing",$.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return ca.throwError("not implemented; sub-classes must override getUrl",$.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const fp=new $(qr),Kc="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Xm extends Gf{constructor(e,r){const n=new Zh(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),X(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===Kc}}class Zh extends Ui{static getWebSocketProvider(e,r){return new Xm(e,r)}static getApiKey(e){return e==null?Kc:(e&&typeof e!="string"&&fp.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:fp.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===Kc&&Xa(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Kc}}const G6=new $(qr),wc="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function V6(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return G6.throwArgumentError("unsupported network","name",t)}class Qm extends Ui{isCommunityResource(){return this.apiKey===wc}static getApiKey(e){return e??wc}static getUrl(e,r){r==null&&(r=wc);const n={allowGzip:!0,url:"https://"+V6(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===wc&&Xa(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var J6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const up=new $(qr);class e1 extends Ui{static getApiKey(e){return e!=null&&up.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:up.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return J6(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var _c=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Vi=new $(qr);function lp(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=Ja(ge(n)):r==="accessList"?n="["+ps(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=ge(n),e[r]=n)}return e}function W6(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function hp(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function dp(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function Ru(t,e,r){if(t==="call"&&e.code===$.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),pt(s))return s;Vi.throwError("missing revert data in call exception",$.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===$.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Vi.throwError("insufficient funds for intrinsic transaction cost",$.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Vi.throwError("nonce has already been used",$.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&Vi.throwError("replacement fee too low",$.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Vi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",$.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class t1 extends zf{constructor(e,r){super(e),X(this,"baseUrl",this.getBaseUrl()),X(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Vi.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,o)=>{const c=r[o];return c!=null&&(s+=`&${o}=${c}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return _c(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,o=e==="proxy"?hp:W6;this.emit("debug",{action:"request",request:i,provider:this});const c={url:i,throttleSlotInterval:1e3,throttleCallback:(p,m)=>(this.isCommunityResource()&&Xa(),Promise.resolve(!0))};let u=null;s&&(c.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},u=Object.keys(s).map(p=>`${p}=${s[p]}`).join("&"));const h=yield $o(c,u,o||hp);return this.emit("debug",{action:"response",request:i,response:Jr(h),provider:this}),h})}detectNetwork(){return _c(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return _c(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>Ru("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=lp(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return Ru("call",s,r.transaction)}}case"estimateGas":{const i=lp(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return Ru("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=dp(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=dp(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&Vi.throwError("unsupported topic count",$.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const c=r.filter.topics[0];(typeof c!="string"||c.length!==66)&&Vi.throwError("unsupported topic format",$.errors.UNSUPPORTED_OPERATION,{topic0:c}),i.topic0=c}const s=yield this.fetch("logs",i);let o={};for(let c=0;c<s.length;c++){const u=s[c];if(u.blockHash==null){if(o[u.blockNumber]==null){const h=yield this.getBlock(u.blockNumber);h&&(o[u.blockNumber]=h.hash)}u.blockHash=o[u.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return _c(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(u){o[u]==""&&delete o[u]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const c=this.formatter.transactionResponse(o);return o.timeStamp&&(c.timestamp=parseInt(o.timeStamp)),c})})}isCommunityResource(){return this.apiKey==null}}var lf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(c,u)}h((n=n.apply(t,e||[])).next())})};const Es=new $(qr);function Ec(){return new Date().getTime()}function pp(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||Es.throwArgumentError("provider mismatch","networks",t):e=n}return e}function gp(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function go(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(he.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>go(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=go(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let Y6=1;function yp(t){let e=null,r=null,n=new Promise(o=>{e=function(){r&&(clearTimeout(r),r=null),o()},r=setTimeout(e,t)});const i=o=>(n=n.then(o),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const Z6=[$.errors.CALL_EXCEPTION,$.errors.INSUFFICIENT_FUNDS,$.errors.NONCE_EXPIRED,$.errors.REPLACEMENT_UNDERPRICED,$.errors.UNPREDICTABLE_GAS_LIMIT],X6=["address","args","errorArgs","errorSignature","method","transaction"];function Ac(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function Q6(t,e){return function(r){const n={};r.forEach(s=>{const o=t(s.result);n[o]||(n[o]={count:0,result:s.result}),n[o].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const o=n[i[s]];if(o.count>=e)return o.result}}}function eE(t,e,r){let n=go;switch(e){case"getBlockNumber":return function(i){const s=i.map(c=>c.result);let o=gp(i.map(c=>c.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=t._highestBlockNumber&&(t._highestBlockNumber=o),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return gp(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=Ht(i),i.confirmations=-1,go(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=Ht(i),i.transactions=i.transactions.map(s=>(s=Ht(s),s.confirmations=-1,s)),go(i))}:n=function(i){return i==null?null:go(i)};break;default:throw new Error("unknown method: "+e)}return Q6(n,t.quorum)}function Qo(t,e){return lf(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:As(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function tE(t,e,r,n){return lf(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&pt(n.blockTag)&&(i=yield Qo(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&pt(n.blockTag)&&(i=yield Qo(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&pt(n.blockTag)&&(i=yield Qo(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&pt(n.blockTag)&&(i=yield Qo(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&pt(s.fromBlock)||s.toBlock&&pt(s.toBlock))&&(i=yield Qo(t,e)),i.getLogs(s)}}return Es.throwError("unknown method error",$.errors.UNKNOWN_ERROR,{method:r,params:n})})}class r1 extends zf{constructor(e,r){e.length===0&&Es.throwArgumentError("missing providers","providers",e);const n=e.map((o,c)=>{if($s.isProvider(o)){const p=Al(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:p,priority:1})}const u=Ht(o);u.priority==null&&(u.priority=1),u.stallTimeout==null&&(u.stallTimeout=Al(o)?2e3:750),u.weight==null&&(u.weight=1);const h=u.weight;return(h%1||h>512||h<1)&&Es.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${c}].weight`,h),Object.freeze(u)}),i=n.reduce((o,c)=>o+c.weight,0);r==null?r=i/2:r>i&&Es.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=pp(n.map(o=>o.provider.network));s==null&&(s=new Promise((o,c)=>{setTimeout(()=>{this.detectNetwork().then(o,c)},0)})),super(s),X(this,"providerConfigs",Object.freeze(n)),X(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return lf(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return pp(e)})}perform(e,r){return lf(this,void 0,void 0,function*(){if(e==="sendTransaction"){const u=yield Promise.all(this.providerConfigs.map(h=>h.provider.sendTransaction(r.signedTransaction).then(p=>p.hash,p=>p)));for(let h=0;h<u.length;h++){const p=u[h];if(typeof p=="string")return p}throw u[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=eE(this,e,r),i=Dm(this.providerConfigs.map(Ht));i.sort((u,h)=>u.priority-h.priority);const s=this._highestBlockNumber;let o=0,c=!0;for(;;){const u=Ec();let h=i.filter(S=>S.runner&&u-S.start<S.stallTimeout).reduce((S,B)=>S+B.weight,0);for(;h<this.quorum&&o<i.length;){const S=i[o++],B=Y6++;S.start=Ec(),S.staller=yp(S.stallTimeout),S.staller.wait(()=>{S.staller=null}),S.runner=tE(S,s,e,r).then(T=>{S.done=!0,S.result=T,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:B,backend:Ac(S,Ec()),request:{method:e,params:Jr(r)},provider:this})},T=>{S.done=!0,S.error=T,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:B,backend:Ac(S,Ec()),request:{method:e,params:Jr(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:B,backend:Ac(S,null),request:{method:e,params:Jr(r)},provider:this}),h+=S.weight}const p=[];i.forEach(S=>{S.done||!S.runner||(p.push(S.runner),S.staller&&p.push(S.staller.getPromise()))}),p.length&&(yield Promise.race(p));const m=i.filter(S=>S.done&&S.error==null);if(m.length>=this.quorum){const S=n(m);if(S!==void 0)return i.forEach(B=>{B.staller&&B.staller.cancel(),B.cancelled=!0}),S;c||(yield yp(100).getPromise()),c=!1}const _=i.reduce((S,B)=>{if(!B.done||B.error==null)return S;const T=B.error.code;return Z6.indexOf(T)>=0&&(S[T]||(S[T]={error:B.error,weight:0}),S[T].weight+=B.weight),S},{});if(Object.keys(_).forEach(S=>{const B=_[S];if(B.weight<this.quorum)return;i.forEach(P=>{P.staller&&P.staller.cancel(),P.cancelled=!0});const T=B.error,A={};X6.forEach(P=>{T[P]!=null&&(A[P]=T[P])}),Es.throwError(T.reason||T.message,S,A)}),i.filter(S=>!S.done).length===0)break}return i.forEach(u=>{u.staller&&u.staller.cancel(),u.cancelled=!0}),Es.throwError("failed to meet quorum",$.errors.SERVER_ERROR,{method:e,params:r,results:i.map(u=>Ac(u)),provider:this})})}}const n1=null,qc=new $(qr),fa="84842078b09946638c03157f83405213";class i1 extends Gf{constructor(e,r){const n=new Xh(e,r),i=n.connection;i.password&&qc.throwError("INFURA WebSocket project secrets unsupported",$.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),X(this,"apiKey",n.projectId),X(this,"projectId",n.projectId),X(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===fa}}class Xh extends Ui{static getWebSocketProvider(e,r){return new i1(e,r)}static getApiKey(e){const r={apiKey:fa,projectId:fa,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(qc.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),qc.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:qc.throwError("unsupported network",$.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,o)=>(r.projectId===fa&&Xa(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===fa}}class rE extends Cs{send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((o,c)=>{i.resolve=o,i.reject=c});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const o=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const c=o.map(u=>u.request);return this.emit("debug",{action:"requestBatch",request:Jr(c),provider:this}),$o(this.connection,JSON.stringify(c)).then(u=>{this.emit("debug",{action:"response",request:c,response:u,provider:this}),o.forEach((h,p)=>{const m=u[p];if(m.error){const _=new Error(m.error.message);_.code=m.error.code,_.data=m.error.data,h.reject(_)}else h.resolve(m.result)})},u=>{this.emit("debug",{action:"response",error:u,request:c,provider:this}),o.forEach(h=>{h.reject(u)})})},10)),s}}const Ou=new $(qr),nE="ETHERS_JS_SHARED";class s1 extends Ui{static getApiKey(e){return e&&typeof e!="string"&&Ou.throwArgumentError("invalid apiKey","apiKey",e),e||nE}static getUrl(e,r){Ou.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ou.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const mp=new $(qr),xp="62e1ad51b37b8e00394bda3b";class o1 extends Ui{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=xp:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:mp.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:mp.throwError("unsupported network",$.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===xp}}const bp=new $(qr);let iE=1;function vp(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:iE++,jsonrpc:"2.0"};return new Promise((o,c)=>{this.emit("debug",{action:"request",fetcher:r,request:Jr(s),provider:this}),e(s,(u,h)=>{if(u)return this.emit("debug",{action:"response",fetcher:r,error:u,request:s,provider:this}),c(u);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:h,provider:this}),h.error){const p=new Error(h.error.message);return p.code=h.error.code,p.data=h.error.data,c(p)}o(h.result)})})}}function sE(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Jr(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class a1 extends Cs{constructor(e,r){e==null&&bp.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=sE(e)):e.sendAsync?i=vp(e,e.sendAsync.bind(e)):e.send?i=vp(e,e.send.bind(e)):bp.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),X(this,"jsonRpcFetchFunc",i),X(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const wp=new $(qr);function Qh(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new Cs(t);case"ws":case"wss":return new Gf(t);default:wp.throwArgumentError("unsupported URL scheme","network",t)}}const r=Wh(t);return(!r||!r._defaultProvider)&&wp.throwError("unsupported getDefaultProvider network",$.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:r1,AlchemyProvider:Zh,AnkrProvider:Qm,CloudflareProvider:e1,EtherscanProvider:t1,InfuraProvider:Xh,JsonRpcProvider:Cs,NodesmithProvider:s1,PocketProvider:o1,Web3Provider:a1,IpcProvider:n1},e)}var c1=Object.freeze(Object.defineProperty({__proto__:null,Provider:$s,BaseProvider:zf,Resolver:Sl,UrlJsonRpcProvider:Ui,FallbackProvider:r1,AlchemyProvider:Zh,AlchemyWebSocketProvider:Xm,AnkrProvider:Qm,CloudflareProvider:e1,EtherscanProvider:t1,InfuraProvider:Xh,InfuraWebSocketProvider:i1,JsonRpcProvider:Cs,JsonRpcBatchProvider:rE,NodesmithProvider:s1,PocketProvider:o1,StaticJsonRpcProvider:Zm,Web3Provider:a1,WebSocketProvider:Gf,IpcProvider:n1,JsonRpcSigner:Yh,getDefaultProvider:Qh,getNetwork:Wh,isCommunityResource:Al,isCommunityResourcable:Vm,showThrottleMessage:Xa,Formatter:Te},Symbol.toStringTag,{value:"Module"}));const oE="solidity/5.7.0",aE=new RegExp("^bytes([0-9]+)$"),cE=new RegExp("^(u?int)([0-9]*)$"),fE=new RegExp("^(.*)\\[([0-9]*)\\]$"),uE="0000000000000000000000000000000000000000000000000000000000000000",uo=new $(oE);function f1(t,e,r){switch(t){case"address":return r?ha(e,32):de(e);case"string":return fr(e);case"bytes":return de(e);case"bool":return e=e?"0x01":"0x00",r?ha(e,32):de(e)}let n=t.match(cE);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&uo.throwArgumentError("invalid number type","type",t),r&&(i=256),e=he.from(e).toTwos(i),ha(e,i/8)}if(n=t.match(aE),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&uo.throwArgumentError("invalid bytes type","type",t),de(e).byteLength!==i&&uo.throwArgumentError(`invalid value for ${t}`,"value",e),r?de((e+uE).substring(0,66)):e}if(n=t.match(fE),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&uo.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(c){o.push(f1(i,c,!0))}),Kt(o)}return uo.throwArgumentError("invalid type","type",t)}function e0(t,e){t.length!=e.length&&uo.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push(f1(n,e[i]))}),ge(Kt(r))}function lE(t,e){return Lt(e0(t,e))}function hE(t,e){return Ni(e0(t,e))}const dE="units/5.7.0",u1=new $(dE),l1=["wei","kwei","mwei","gwei","szabo","finney","ether"];function pE(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&u1.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;r.length;)if(r.length<=3){s.unshift(r);break}else{const o=r.length-3;s.unshift(r.substring(o)),r=r.substring(0,o)}return n+s.join(",")+i}function h1(t,e){if(typeof e=="string"){const r=l1.indexOf(e);r!==-1&&(e=3*r)}return Dc(t,e??18)}function d1(t,e){if(typeof t!="string"&&u1.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=l1.indexOf(e);r!==-1&&(e=3*r)}return ei(t,e??18)}function gE(t){return h1(t,18)}function yE(t){return d1(t,18)}var p1=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:im,defaultAbiCoder:sm,Fragment:si,ConstructorFragment:Kn,ErrorFragment:ki,EventFragment:ii,FunctionFragment:qn,ParamType:br,FormatTypes:Ct,checkResultErrors:Ky,Logger:$,RLP:F2,_fetchData:Hm,fetchJson:$o,poll:As,checkProperties:Sh,deepCopy:Jr,defineReadOnly:X,getStatic:Mr,resolveProperties:er,shallowCopy:Ht,arrayify:de,concat:Kt,stripZeros:ci,zeroPad:ha,isBytes:hs,isBytesLike:Va,defaultPath:To,HDNode:gn,SigningKey:Ss,Interface:yl,LogDescription:ym,TransactionDescription:mm,base58:Ao,base64:k_,hexlify:ge,isHexString:pt,hexConcat:zr,hexStripZeros:By,hexValue:Ja,hexZeroPad:qt,hexDataLength:di,hexDataSlice:ar,nameprep:E_,_toEscapedUtf8String:c_,toUtf8Bytes:fr,toUtf8CodePoints:ef,toUtf8String:Fs,Utf8ErrorFuncs:rm,formatBytes32String:f_,parseBytes32String:u_,dnsEncode:hm,hashMessage:Dh,namehash:ga,isValidName:Z_,id:Yi,_TypedDataEncoder:Sr,getAddress:Ot,getIcapAddress:H2,getContractAddress:Uf,getCreate2Address:z2,isAddress:q2,formatEther:gE,parseEther:yE,formatUnits:h1,parseUnits:d1,commify:pE,computeHmac:Ia,keccak256:Lt,ripemd160:Nm,sha256:Ni,sha512:j3,randomBytes:po,shuffled:Dm,solidityPack:e0,solidityKeccak256:lE,soliditySha256:hE,splitSignature:Us,joinSignature:dl,accessListify:ps,parseTransaction:Tm,serializeTransaction:vl,get TransactionTypes(){return bl},getJsonWalletAddress:n6,computeAddress:Qi,recoverAddress:Za,computePublicKey:$h,recoverPublicKey:wm,verifyMessage:y6,verifyTypedData:m6,getAccountPath:Z3,mnemonicToEntropy:Kf,entropyToMnemonic:qf,isValidMnemonic:Y3,mnemonicToSeed:Om,get SupportedAlgorithm(){return So},get UnicodeNormalizationForm(){return pi},get Utf8ErrorReason(){return en},Indexed:rf},Symbol.toStringTag,{value:"Module"}));const t0="ethers/5.7.2",g1=new $(t0);var y1=Object.freeze(Object.defineProperty({__proto__:null,Signer:Di,Wallet:Gi,VoidSigner:Ya,getDefaultProvider:Qh,providers:c1,BaseContract:Kh,Contract:af,ContractFactory:Cm,BigNumber:he,FixedNumber:xr,constants:Qy,get errors(){return dn},logger:g1,utils:p1,wordlists:cf,version:t0,Wordlist:Ks},Symbol.toStringTag,{value:"Module"}));try{const t=window;t._ethers==null&&(t._ethers=y1)}catch{}var mE=Object.freeze(Object.defineProperty({__proto__:null,ethers:y1,Signer:Di,Wallet:Gi,VoidSigner:Ya,getDefaultProvider:Qh,providers:c1,BaseContract:Kh,Contract:af,ContractFactory:Cm,BigNumber:he,FixedNumber:xr,constants:Qy,get errors(){return dn},logger:g1,utils:p1,wordlists:cf,version:t0,Wordlist:Ks},Symbol.toStringTag,{value:"Module"})),Vf=Nl(mE),m1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uo,"__esModule",{value:!0});const xE=m1(_h),bE=m1(Ay),Du=Vf;class vE extends xE.default{get publicKey(){return V.Buffer.from(this.pk,"hex")}constructor(e){const r=V.Buffer.from(e,"hex"),n=bE.default.publicKeyCreate(r,!1);super(e,V.Buffer.from(n))}sign(e){return new Du.ethers.Wallet(this._key).signMessage(e).then(n=>V.Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){const i=Du.ethers.utils.computeAddress(e);return Du.ethers.utils.verifyMessage(r,n)===i}}Uo.default=vE;var r0={},n0={},Jf={},x1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jf,"__esModule",{value:!0});const Uu=is,wE=x1(Ns),_E=x1(Wn.exports),_p=Ds;class EE{constructor(e,r){this._key=e,this.pk=r,this.signatureType=1,this.ownerLength=_p.SIG_CONFIG[1].pubLength,this.signatureLength=_p.SIG_CONFIG[1].sigLength,r||(this.pk=Uu.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return Uu.createSign("sha256").update(e).sign({key:this._key,padding:Uu.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await wE.default.crypto.verify(V.Buffer.isBuffer(e)?_E.default.encode(e):e,r,n)}}Jf.default=EE;var ko={},AE=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SE=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),TE=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AE(e,t,r);return SE(e,t),e};Object.defineProperty(ko,"__esModule",{value:!0});ko.jwkTopem=ko.pemTojwk=void 0;const Li=TE(Fx);function kE(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function i0(t){return kE(V.Buffer.from(t,"hex").toString("base64"))}var b1=Li.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),v1=Li.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),ME=Li.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(v1),this.key("publicKey").bitstr())}),w1=Li.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),PE=Li.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),_1=Li.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(w1),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(PE))}),CE=Li.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(w1),this.key("algorithm").use(v1),this.key("privateKey").bitstr())});function E1(t,e){return e=e||{},Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function s0(t){return t.length%2===1?"0"+t:t}function A1(t,e){var r=b1.decode(t,"der"),n=s0(r.e.toString(16)),i={kty:"RSA",n:zi(r.n),e:i0(n)};return E1(i,e)}function S1(t,e){var r=_1.decode(t,"der"),n=s0(r.e.toString(16)),i={kty:"RSA",n:zi(r.n),e:i0(n),d:zi(r.d),p:zi(r.p),q:zi(r.q),dp:zi(r.dp),dq:zi(r.dq),qi:zi(r.qi)};return E1(i,e)}function IE(t,e){var r=ME.decode(t,"der");return A1(r.publicKey.data,e)}function NE(t,e){var r=CE.decode(t,"der");return S1(r.privateKey.data,e)}function BE(t){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(t);if(!e)return null;var r=!!e[1],n=e[2]==="PRIVATE";return n?r?S1:NE:r?A1:IE}function RE(t){return{n:Ki(t.n),e:Ki(t.e),d:t.d&&Ki(t.d),p:t.p&&Ki(t.p),q:t.q&&Ki(t.q),dp:t.dp&&Ki(t.dp),dq:t.dq&&Ki(t.dq),qi:t.qi&&Ki(t.qi)}}function zi(t){return i0(s0(t.toString(16)))}function OE(t){return new Li.bignum(V.Buffer.from(t,"base64"))}function Ki(t){return/^[0-9]+$/.test(t)?new Li.bignum(t,10):OE(t)}function DE(t,e){var r=t.toString().split(/(\r\n|\r|\n)+/g);r=r.filter(function(i){return i.trim().length!==0});var n=BE(r[0]);return r=r.slice(1,-1).join(""),n(V.Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}ko.pemTojwk=DE;function UE(t){var e=RE(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,o=V.Buffer.alloc(0);r?(e.version="two-prime",o=_1.encode(e,"der")):o=b1.encode(e,"der");var c=o.toString("base64").match(/.{1,64}/g).join(`
`);return i+c+s}ko.jwkTopem=UE;var o0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n0,"__esModule",{value:!0});const LE=o0(Jf),FE=ko,$E=o0(Wn.exports),Ep=o0(Ns);class jE extends LE.default{constructor(e){super(FE.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return $E.default.toBuffer(this.pk)}sign(e){return Ep.default.crypto.sign(this.jwk,e)}static async verify(e,r,n){return await Ep.default.crypto.verify(e,r,n)}}n0.default=jE;var a0={},KE=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a0,"__esModule",{value:!0});const qE=KE(Uo);class HE extends qE.default{}a0.default=HE;var jo={},T1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jo,"__esModule",{value:!0});const zE=T1(Ga),ea=T1(df);class GE extends zE.default{get publicKey(){return ea.default.decode(this.pk)}get key(){return ea.default.decode(this._key)}constructor(e){const r=ea.default.decode(e);super(ea.default.encode(r.subarray(0,32)),ea.default.encode(r.subarray(32,64)))}}jo.default=GE;var c0={};Object.defineProperty(c0,"__esModule",{value:!0});const eo=Vf,ta=Ds;class VE{constructor(e){this.ownerLength=ta.SIG_CONFIG[ta.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=ta.SIG_CONFIG[ta.SignatureConfig.ETHEREUM].sigLength,this.signatureType=ta.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await eo.ethers.utils.hashMessage(e),i=eo.ethers.utils.recoverPublicKey(eo.ethers.utils.arrayify(n),r);this.publicKey=V.Buffer.from(eo.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return V.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=eo.ethers.utils.computeAddress(e);return eo.ethers.utils.verifyMessage(r,n)===i}}c0.default=VE;var Wf={},JE=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WE=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YE=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&JE(e,t,r);return WE(e,t),e},ZE=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wf,"__esModule",{value:!0});const XE=YE(Ey),QE=ZE(Wn.exports),Ap=Ds;class e4{constructor(e){this.ownerLength=Ap.SIG_CONFIG[2].pubLength,this.signatureLength=Ap.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=QE.default.toBuffer(e)),XE.verify(V.Buffer.from(n),V.Buffer.from(r),V.Buffer.from(i))}}Wf.default=e4;var f0={},t4=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f0,"__esModule",{value:!0});const r4=t4(jo);class n4 extends r4.default{constructor(e){super(e.replace("ed25519:",""))}}f0.default=n4;var u0={},i4=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(u0,"__esModule",{value:!0});const s4=i4(Ga);class o4 extends s4.default{get publicKey(){return V.Buffer.from(this.pk)}get key(){return V.Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}u0.default=o4;var l0={},a4=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l0,"__esModule",{value:!0});const c4=a4(Wf);class f4 extends c4.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(V.Buffer.from(V.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,V.Buffer.from(V.Buffer.from(r).toString("hex")),n)}}l0.default=f4;var h0={},u4=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h0,"__esModule",{value:!0});const l4=u4(jo);class h4 extends l4.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(V.Buffer.from(V.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,V.Buffer.from(V.Buffer.from(r).toString("hex")),n)}}h0.default=h4;(function(t){var e=j&&j.__createBinding||(Object.create?function(_,S,B,T){T===void 0&&(T=B),Object.defineProperty(_,T,{enumerable:!0,get:function(){return S[B]}})}:function(_,S,B,T){T===void 0&&(T=B),_[T]=S[B]}),r=j&&j.__exportStar||function(_,S){for(var B in _)B!=="default"&&!Object.prototype.hasOwnProperty.call(S,B)&&e(S,_,B)},n=j&&j.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.HexSolanaSigner=t.HexInjectedSolanaSigner=t.AlgorandSigner=t.NearSigner=t.InjectedEthereumSigner=t.PolygonSigner=t.ArweaveSigner=t.InjectedSolanaSigner=void 0;const i=n(n0);t.ArweaveSigner=i.default,r(Uo,t);const s=n(a0);t.PolygonSigner=s.default,r(jo,t);const o=n(c0);t.InjectedEthereumSigner=o.default;var c=Wf;Object.defineProperty(t,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(c).default}});var u=f0;Object.defineProperty(t,"NearSigner",{enumerable:!0,get:function(){return n(u).default}});var h=u0;Object.defineProperty(t,"AlgorandSigner",{enumerable:!0,get:function(){return n(h).default}});var p=l0;Object.defineProperty(t,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(p).default}});var m=h0;Object.defineProperty(t,"HexSolanaSigner",{enumerable:!0,get:function(){return n(m).default}})})(r0);var k1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Of,"__esModule",{value:!0});Of.indexToType=void 0;const d4=k1(Ga),p4=k1(Uo),Sp=r0;Of.indexToType={1:Sp.ArweaveSigner,2:d4.default,3:p4.default,4:Sp.HexInjectedSolanaSigner};var M1={};(function(t){var e=j&&j.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=j&&j.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jf,t)})(M1);(function(t){var e=j&&j.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=j&&j.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rf,t),r(Of,t),r(M1,t),r(r0,t)})(Do);var d0={exports:{}},P1=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},g4=P1,qs=Object.prototype.toString;function p0(t){return qs.call(t)==="[object Array]"}function kl(t){return typeof t>"u"}function y4(t){return t!==null&&!kl(t)&&t.constructor!==null&&!kl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function m4(t){return qs.call(t)==="[object ArrayBuffer]"}function x4(t){return typeof FormData<"u"&&t instanceof FormData}function b4(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function v4(t){return typeof t=="string"}function w4(t){return typeof t=="number"}function C1(t){return t!==null&&typeof t=="object"}function Hc(t){if(qs.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function _4(t){return qs.call(t)==="[object Date]"}function E4(t){return qs.call(t)==="[object File]"}function A4(t){return qs.call(t)==="[object Blob]"}function I1(t){return qs.call(t)==="[object Function]"}function S4(t){return C1(t)&&I1(t.pipe)}function T4(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function k4(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M4(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function g0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),p0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Ml(){var t={};function e(i,s){Hc(t[s])&&Hc(i)?t[s]=Ml(t[s],i):Hc(i)?t[s]=Ml({},i):p0(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)g0(arguments[r],e);return t}function P4(t,e,r){return g0(e,function(i,s){r&&typeof i=="function"?t[s]=g4(i,r):t[s]=i}),t}function C4(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var vn={isArray:p0,isArrayBuffer:m4,isBuffer:y4,isFormData:x4,isArrayBufferView:b4,isString:v4,isNumber:w4,isObject:C1,isPlainObject:Hc,isUndefined:kl,isDate:_4,isFile:E4,isBlob:A4,isFunction:I1,isStream:S4,isURLSearchParams:T4,isStandardBrowserEnv:M4,forEach:g0,merge:Ml,extend:P4,trim:k4,stripBOM:C4},to=vn;function Tp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var N1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(to.isURLSearchParams(r))i=r.toString();else{var s=[];to.forEach(r,function(u,h){u===null||typeof u>"u"||(to.isArray(u)?h=h+"[]":u=[u],to.forEach(u,function(m){to.isDate(m)?m=m.toISOString():to.isObject(m)&&(m=JSON.stringify(m)),s.push(Tp(h)+"="+Tp(m))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},I4=vn;function Yf(){this.handlers=[]}Yf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Yf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Yf.prototype.forEach=function(e){I4.forEach(this.handlers,function(n){n!==null&&e(n)})};var N4=Yf,B4=vn,R4=function(e,r){B4.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},B1=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},O4=B1,R1=function(e,r,n,i,s){var o=new Error(e);return O4(o,r,n,i,s)},D4=R1,U4=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(D4("Request failed with status code "+n.status,n.config,null,n.request,n))},Sc=vn,L4=Sc.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,c){var u=[];u.push(r+"="+encodeURIComponent(n)),Sc.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Sc.isString(s)&&u.push("path="+s),Sc.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),F4=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},$4=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},j4=F4,K4=$4,q4=function(e,r){return e&&!j4(r)?K4(e,r):r},Lu=vn,H4=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],z4=function(e){var r={},n,i,s;return e&&Lu.forEach(e.split(`
`),function(c){if(s=c.indexOf(":"),n=Lu.trim(c.substr(0,s)).toLowerCase(),i=Lu.trim(c.substr(s+1)),n){if(r[n]&&H4.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},kp=vn,G4=kp.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var c=kp.isString(o)?i(o):o;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}(),Tc=vn,V4=U4,J4=L4,W4=N1,Y4=q4,Z4=z4,X4=G4,Fu=R1,Mp=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,c=e.responseType;Tc.isFormData(s)&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+p)}var m=Y4(e.baseURL,e.url);u.open(e.method.toUpperCase(),W4(m,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function _(){if(!!u){var B="getAllResponseHeaders"in u?Z4(u.getAllResponseHeaders()):null,T=!c||c==="text"||c==="json"?u.responseText:u.response,A={data:T,status:u.status,statusText:u.statusText,headers:B,config:e,request:u};V4(n,i,A),u=null}}if("onloadend"in u?u.onloadend=_:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(_)},u.onabort=function(){!u||(i(Fu("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(Fu("Network Error",e,null,u)),u=null},u.ontimeout=function(){var T="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),i(Fu(T,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Tc.isStandardBrowserEnv()){var S=(e.withCredentials||X4(m))&&e.xsrfCookieName?J4.read(e.xsrfCookieName):void 0;S&&(o[e.xsrfHeaderName]=S)}"setRequestHeader"in u&&Tc.forEach(o,function(T,A){typeof s>"u"&&A.toLowerCase()==="content-type"?delete o[A]:u.setRequestHeader(A,T)}),Tc.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),c&&c!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(T){!u||(u.abort(),i(T),u=null)}),s||(s=null),u.send(s)})},Tr=vn,Pp=R4,Q4=B1,eA={"Content-Type":"application/x-www-form-urlencoded"};function Cp(t,e){!Tr.isUndefined(t)&&Tr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function tA(){var t;return(typeof XMLHttpRequest<"u"||typeof V.process<"u"&&Object.prototype.toString.call(V.process)==="[object process]")&&(t=Mp),t}function rA(t,e,r){if(Tr.isString(t))try{return(e||JSON.parse)(t),Tr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Zf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:tA(),transformRequest:[function(e,r){return Pp(r,"Accept"),Pp(r,"Content-Type"),Tr.isFormData(e)||Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e)?e:Tr.isArrayBufferView(e)?e.buffer:Tr.isURLSearchParams(e)?(Cp(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Tr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Cp(r,"application/json"),rA(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Tr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Q4(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Zf.headers={common:{Accept:"application/json, text/plain, */*"}};Tr.forEach(["delete","get","head"],function(e){Zf.headers[e]={}});Tr.forEach(["post","put","patch"],function(e){Zf.headers[e]=Tr.merge(eA)});var y0=Zf,nA=vn,iA=y0,sA=function(e,r,n){var i=this||iA;return nA.forEach(n,function(o){e=o.call(i,e,r)}),e},O1=function(e){return!!(e&&e.__CANCEL__)},Ip=vn,$u=sA,oA=O1,aA=y0;function ju(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var cA=function(e){ju(e),e.headers=e.headers||{},e.data=$u.call(e,e.data,e.headers,e.transformRequest),e.headers=Ip.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ip.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||aA.adapter;return r(e).then(function(i){return ju(e),i.data=$u.call(e,i.data,i.headers,e.transformResponse),i},function(i){return oA(i)||(ju(e),i&&i.response&&(i.response.data=$u.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Lr=vn,D1=function(e,r){r=r||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function u(_,S){return Lr.isPlainObject(_)&&Lr.isPlainObject(S)?Lr.merge(_,S):Lr.isPlainObject(S)?Lr.merge({},S):Lr.isArray(S)?S.slice():S}function h(_){Lr.isUndefined(r[_])?Lr.isUndefined(e[_])||(n[_]=u(void 0,e[_])):n[_]=u(e[_],r[_])}Lr.forEach(i,function(S){Lr.isUndefined(r[S])||(n[S]=u(void 0,r[S]))}),Lr.forEach(s,h),Lr.forEach(o,function(S){Lr.isUndefined(r[S])?Lr.isUndefined(e[S])||(n[S]=u(void 0,e[S])):n[S]=u(void 0,r[S])}),Lr.forEach(c,function(S){S in r?n[S]=u(e[S],r[S]):S in e&&(n[S]=u(void 0,e[S]))});var p=i.concat(s).concat(o).concat(c),m=Object.keys(e).concat(Object.keys(r)).filter(function(S){return p.indexOf(S)===-1});return Lr.forEach(m,h),n};const fA="axios",uA="0.21.4",lA="Promise based HTTP client for the browser and node.js",hA="index.js",dA={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},pA={type:"git",url:"https://github.com/axios/axios.git"},gA=["xhr","http","ajax","promise","node"],yA="Matt Zabriskie",mA="MIT",xA={url:"https://github.com/axios/axios/issues"},bA="https://axios-http.com",vA={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},wA={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},_A="dist/axios.min.js",EA="dist/axios.min.js",AA="./index.d.ts",SA={"follow-redirects":"^1.14.0"},TA=[{path:"./dist/axios.min.js",threshold:"5kB"}];var kA={name:fA,version:uA,description:lA,main:hA,scripts:dA,repository:pA,keywords:gA,author:yA,license:mA,bugs:xA,homepage:bA,devDependencies:vA,browser:wA,jsdelivr:_A,unpkg:EA,typings:AA,dependencies:SA,bundlesize:TA},U1=kA,m0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){m0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Np={},MA=U1.version.split(".");function L1(t,e){for(var r=e?e.split("."):MA,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}m0.transitional=function(e,r,n){var i=r&&L1(r);function s(o,c){return"[Axios v"+U1.version+"] Transitional option '"+o+"'"+c+(n?". "+n:"")}return function(o,c,u){if(e===!1)throw new Error(s(c," has been removed in "+r));return i&&!Np[c]&&(Np[c]=!0,console.warn(s(c," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,c,u):!0}};function PA(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var c=t[s],u=c===void 0||o(c,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}var CA={isOlderVersion:L1,assertOptions:PA,validators:m0},F1=vn,IA=N1,Bp=N4,Rp=cA,Xf=D1,$1=CA,ro=$1.validators;function Qa(t){this.defaults=t,this.interceptors={request:new Bp,response:new Bp}}Qa.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Xf(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&$1.assertOptions(r,{silentJSONParsing:ro.transitional(ro.boolean,"1.0.0"),forcedJSONParsing:ro.transitional(ro.boolean,"1.0.0"),clarifyTimeoutError:ro.transitional(ro.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(e)===!1||(i=i&&_.synchronous,n.unshift(_.fulfilled,_.rejected))});var s=[];this.interceptors.response.forEach(function(_){s.push(_.fulfilled,_.rejected)});var o;if(!i){var c=[Rp,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(s),o=Promise.resolve(e);c.length;)o=o.then(c.shift(),c.shift());return o}for(var u=e;n.length;){var h=n.shift(),p=n.shift();try{u=h(u)}catch(m){p(m);break}}try{o=Rp(u)}catch(m){return Promise.reject(m)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Qa.prototype.getUri=function(e){return e=Xf(this.defaults,e),IA(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};F1.forEach(["delete","get","head","options"],function(e){Qa.prototype[e]=function(r,n){return this.request(Xf(n||{},{method:e,url:r,data:(n||{}).data}))}});F1.forEach(["post","put","patch"],function(e){Qa.prototype[e]=function(r,n,i){return this.request(Xf(i||{},{method:e,url:r,data:n}))}});var NA=Qa;function x0(t){this.message=t}x0.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};x0.prototype.__CANCEL__=!0;var j1=x0,BA=j1;function hf(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;t(function(i){r.reason||(r.reason=new BA(i),e(r.reason))})}hf.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};hf.source=function(){var e,r=new hf(function(i){e=i});return{token:r,cancel:e}};var RA=hf,OA=function(e){return function(n){return e.apply(null,n)}},DA=function(e){return typeof e=="object"&&e.isAxiosError===!0},Op=vn,UA=P1,zc=NA,LA=D1,FA=y0;function K1(t){var e=new zc(t),r=UA(zc.prototype.request,e);return Op.extend(r,zc.prototype,e),Op.extend(r,e),r}var Jn=K1(FA);Jn.Axios=zc;Jn.create=function(e){return K1(LA(Jn.defaults,e))};Jn.Cancel=j1;Jn.CancelToken=RA;Jn.isCancel=O1;Jn.all=function(e){return Promise.all(e)};Jn.spread=OA;Jn.isAxiosError=DA;d0.exports=Jn;d0.exports.default=Jn;var $A=d0.exports;(function(t){var e=j&&j.__createBinding||(Object.create?function(P,R,F,q){q===void 0&&(q=F),Object.defineProperty(P,q,{enumerable:!0,get:function(){return R[F]}})}:function(P,R,F,q){q===void 0&&(q=F),P[q]=R[F]}),r=j&&j.__setModuleDefault||(Object.create?function(P,R){Object.defineProperty(P,"default",{enumerable:!0,value:R})}:function(P,R){P.default=R}),n=j&&j.__importStar||function(P){if(P&&P.__esModule)return P;var R={};if(P!=null)for(var F in P)F!=="default"&&Object.prototype.hasOwnProperty.call(P,F)&&e(R,P,F);return r(R,P),R},i=j&&j.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_BINARY_SIZE=void 0;const s=dr,o=ih,c=i(Wn.exports),u=Bl,h=Hn,p=Do,m=Ua,_=i($A),S=Ds,B=n(is),T=i(Ns);t.MIN_BINARY_SIZE=80;class A{constructor(R){this.binary=R}static isDataItem(R){return R.binary!==void 0}get signatureType(){const R=s.byteArrayToLong(this.binary.subarray(0,2));switch(R){case 1:return S.SignatureConfig.ARWEAVE;case 2:return S.SignatureConfig.ED25519;case 3:return S.SignatureConfig.ETHEREUM;case 4:return S.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+R)}}async isValid(){return A.verify(this.binary)}get id(){return c.default.encode(this.rawId)}set id(R){this._id=c.default.toBuffer(R)}get rawId(){return B.createHash("sha256").update(this.rawSignature).digest()}set rawId(R){this._id=R}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return c.default.encode(this.rawSignature)}get signatureLength(){return S.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return c.default.encode(this.rawOwner)}get ownerLength(){return S.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const R=this.getTargetStart();return this.binary[R]==1?this.binary.subarray(R+1,R+33):u.Buffer.alloc(0)}get target(){return c.default.encode(this.rawTarget)}get rawAnchor(){const R=this.getAnchorStart();return this.binary[R]==1?this.binary.subarray(R+1,R+33):u.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const R=this.getTagsStart(),F=s.byteArrayToLong(this.binary.subarray(R+8,R+16));return this.binary.subarray(R+16,R+16+F)}get tags(){const R=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(R,R+8))==0)return[];const q=s.byteArrayToLong(this.binary.subarray(R+8,R+16));return o.tagsParser.fromBuffer(u.Buffer.from(this.binary.subarray(R+16,R+16+q)))}get tagsB64Url(){return this.tags.map(F=>({name:c.default.encode(F.name),value:c.default.encode(F.value)}))}getStartOfData(){const R=this.getTagsStart(),F=this.binary.subarray(R+8,R+16),q=s.byteArrayToLong(F);return R+16+q}get rawData(){const R=this.getTagsStart(),F=this.binary.subarray(R+8,R+16),q=s.byteArrayToLong(F),U=R+16+q;return this.binary.subarray(U,this.binary.length)}get data(){return c.default.encode(this.rawData)}getRaw(){return this.binary}async sign(R){return this._id=await h.sign(this,R),this.rawId}async setSignature(R){this.binary.set(R,2),this._id=u.Buffer.from(await T.default.crypto.hash(R))}isSigned(){var R,F;return((F=(R=this._id)===null||R===void 0?void 0:R.length)!==null&&F!==void 0?F:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(R=>({name:c.default.encode(R.name),value:c.default.encode(R.value)})),data:this.data}}async sendToBundler(R){const F={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const q=await _.default.post(`${R}/tx`,this.getRaw(),{headers:F,timeout:1e5,maxBodyLength:1/0,validateStatus:U=>U>200&&U<300||U!==402});if(q.status===402)throw new Error("Not enough funds to send data");return q}static async verify(R){if(R.byteLength<t.MIN_BINARY_SIZE)return!1;const F=new A(R),q=F.signatureType,U=F.getTagsStart(),K=s.byteArrayToLong(R.subarray(U,U+8)),Z=R.subarray(U+8,U+16),Q=s.byteArrayToLong(Z);if(Q>4096)return!1;if(K>0)try{if(o.tagsParser.fromBuffer(u.Buffer.from(R.subarray(U+16,U+16+Q))).length!==K)return!1}catch{return!1}const ue=p.indexToType[q],be=await m.getSignatureData(F);return await ue.verify(F.rawOwner,be,F.rawSignature)}async getSignatureData(){return m.getSignatureData(this)}getTagsStart(){const R=this.getTargetStart(),F=this.binary[R]==1;let q=R+(F?33:1);return q+=this.binary[q]==1?33:1,q}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let R=this.getTargetStart()+1;return R+=this.binary[this.getTargetStart()]==1?32:0,R}}t.default=A})(Sf);var q1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});const kc=q1(Wn.exports),bs=dr,Ku=q1(Sf),jA=is,Qn=32;class KA{constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=Qn;r<Qn+64*this.length;r+=64)e.push(bs.byteArrayToLong(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=Qn;r<Qn+64*this.length;r+=64)e.push(kc.default.encode(this.binary.subarray(r+32,r+64)));return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return kc.default.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const i=await r.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const r=await e.isValid(),n=kc.default(jA.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=Qn;n<Qn+64*this.length;n+=64){const i=bs.byteArrayToLong(this.binary.subarray(n,n+32));r+=i;const s=this.binary.subarray(n+32,n+64);if(bs.arraybufferEqual(s,e))return{startOffset:r,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=32+64*e,i=bs.byteArrayToLong(this.binary.subarray(n,n+32));let s=0;for(let p=Qn;p<Qn+64*this.length&&s!=e;p+=64)r+=bs.byteArrayToLong(this.binary.subarray(p,p+32)),s++;const c=this.getBundleStart()+r,u=this.binary.subarray(c,c+i+200),h=new Ku.default(u);return h.rawId=this.binary.slice(32+64*e,64+64*e),h}getById(e){const r=kc.default.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new Ku.default(this.binary.subarray(s,s+n.size))}getDataItemCount(){return bs.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let i=0;for(let s=Qn;s<Qn+64*this.length;s+=64){const o=bs.byteArrayToLong(this.binary.subarray(s,s+32)),c=this.binary.subarray(s+32,s+64),u=n+r,h=this.binary.subarray(u,u+o);r+=o;const p=new Ku.default(h);p.rawId=c,e[i]=p,i++}return e}}Af.default=KA;var H1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.sign=Hn.getSignatureAndId=Hn.bundleAndSignData=Hn.unbundleData=void 0;const qA=Ua,Dp=dr,HA=H1(Ns),z1=H1(Af);function zA(t){return new z1.default(t)}Hn.unbundleData=zA;async function GA(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(s,o)=>{const c=s.isSigned()?s.rawId:await V1(s,e),u=new Uint8Array(64);return u.set(Dp.longTo32ByteArray(s.getRaw().byteLength),0),u.set(c,32),r.set(u,64*o),s.getRaw()})).then(s=>V.Buffer.concat(s)),i=V.Buffer.concat([Dp.longTo32ByteArray(t.length),r,n]);return new z1.default(i)}Hn.bundleAndSignData=GA;async function G1(t,e){const r=await qA.getSignatureData(t),n=await e.sign(r),i=await HA.default.crypto.hash(n);return{signature:V.Buffer.from(n),id:V.Buffer.from(i)}}Hn.getSignatureAndId=G1;async function V1(t,e){const{signature:r,id:n}=await G1(t,e);return t.getRaw().set(r,2),n}Hn.sign=V1;var Qf={},b0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.createData=void 0;const qu=b0($x.exports),VA=b0(Wn.exports),Hu=dr,JA=b0(Sf),WA=ih;function YA(t,e,r){var n,i,s,o,c,u,h;const p=e.publicKey,m=r!=null&&r.target?VA.default.toBuffer(r.target):null,_=1+((n=m==null?void 0:m.byteLength)!==null&&n!==void 0?n:0),S=r!=null&&r.anchor?V.Buffer.from(r.anchor):null,B=1+((i=S==null?void 0:S.byteLength)!==null&&i!==void 0?i:0),T=((o=(s=r==null?void 0:r.tags)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)>0?WA.serializeTags(r.tags):null,A=16+(T?T.byteLength:0),P=typeof t=="string"?V.Buffer.from(t):V.Buffer.from(t),R=P.byteLength,F=2+e.signatureLength+e.ownerLength+_+B+A+R,q=V.Buffer.alloc(F);q.set(Hu.shortTo2ByteArray(e.signatureType),0),q.set(new Uint8Array(e.signatureLength).fill(0),2),qu.default(p.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${p.byteLength}`)),q.set(p,2+e.signatureLength);const U=2+e.signatureLength+e.ownerLength;q[U]=m?1:0,m&&(qu.default(m.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),q.set(m,U+1));const K=U+_;let Z=K+1;q[K]=S?1:0,S&&(Z+=S.byteLength,qu.default(S.byteLength==32,new Error("Anchor must be 32 bytes")),q.set(S,K+1)),q.set(Hu.longTo8ByteArray((u=(c=r==null?void 0:r.tags)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0),Z);const Q=Hu.longTo8ByteArray((h=T==null?void 0:T.byteLength)!==null&&h!==void 0?h:0);q.set(Q,Z+8),T&&q.set(T,Z+16);const ue=Z+A;return q.set(P,ue),new JA.default(q)}Qf.createData=YA;(function(t){var e=j&&j.__createBinding||(Object.create?function(B,T,A,P){P===void 0&&(P=A),Object.defineProperty(B,P,{enumerable:!0,get:function(){return T[A]}})}:function(B,T,A,P){P===void 0&&(P=A),B[P]=T[A]}),r=j&&j.__setModuleDefault||(Object.create?function(B,T){Object.defineProperty(B,"default",{enumerable:!0,value:T})}:function(B,T){B.default=T}),n=j&&j.__importStar||function(B){if(B&&B.__esModule)return B;var T={};if(B!=null)for(var A in B)A!=="default"&&Object.prototype.hasOwnProperty.call(B,A)&&e(T,B,A);return r(T,B),T},i=j&&j.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(t,"__esModule",{value:!0}),t.signers=t.deepHash=t.unbundleData=t.bundleAndSignData=t.createData=t.DataItem=t.Bundle=t.MIN_BINARY_SIZE=void 0;const s=Hn;Object.defineProperty(t,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(t,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const o=i(Af);t.Bundle=o.default;const c=n(Sf);t.DataItem=c.default,Object.defineProperty(t,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return c.MIN_BINARY_SIZE}});const u=Mi;Object.defineProperty(t,"deepHash",{enumerable:!0,get:function(){return u.deepHash}});const h=Qf;Object.defineProperty(t,"createData",{enumerable:!0,get:function(){return h.createData}});const p=Do,m=i(jo),_=i(Uo),S={ArweaveSigner:p.ArweaveSigner,SolanaSigner:m.default,EthereumSigner:_.default};t.signers=S})(Da);var Hs={};(function(t){var e=j&&j.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const r=e(os);r.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(o=>setTimeout(o,s));t.sleep=n;class i{constructor(o,c,u){this.api=o,this.currency=c,this.currencyConfig=u}static checkAndThrow(o,c,u){if((o==null?void 0:o.status)&&!(u??[]).includes(o.status)&&o.status!=200)throw new Error(`HTTP Error: ${c}: ${o.status} ${typeof o.data!="string"?o.statusText:o.data}`)}async getNonce(){const o=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(o,"Getting withdrawal nonce"),o.data}async getBalance(o){const c=await this.api.get(`/account/balance/${this.currency}?address=${o}`);return i.checkAndThrow(c,"Getting balance"),new r.default(c.data.balance)}async getBundlerAddress(o){const c=await this.api.get("/info");i.checkAndThrow(c,"Getting Bundler address");const u=c.data.addresses[o];if(!u)throw new Error(`Specified bundler does not support currency ${o}`);return u}async getPrice(o,c){const u=await this.api.get(`/price/${o}/${c}`);return i.checkAndThrow(u,"Getting storage cost"),new r.default(u.data)}async confirmationPoll(o){if(!this.currencyConfig.isSlow){for(let c=0;c<30;c++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(o).then(u=>u==null?void 0:u.confirmed).catch(u=>!1))return;console.warn(`Tx ${o} didn't finalize after 30 seconds`)}}unitConverter(o){return new r.default(o).dividedBy(this.currencyConfig.base[1])}}t.default=i})(Hs);var v0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vf,"__esModule",{value:!0});vf.withdrawBalance=void 0;const Up=Da,no=Vt,ZA=v0(Hs),XA=v0(os),io=v0(Wn.exports);async function QA(t,e,r){const n=t.currencyConfig,s={publicKey:await n.getPublicKey(),currency:t.currency,amount:new XA.default(r).toString(),nonce:await t.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},o=await(0,Up.deepHash)([(0,no.stringToBuffer)(s.currency),(0,no.stringToBuffer)(s.amount.toString()),(0,no.stringToBuffer)(s.nonce.toString())]);V.Buffer.isBuffer(s.publicKey)||(s.publicKey=V.Buffer.from(s.publicKey)),s.signature=await n.sign(o);const c=await n.verify(s.publicKey,o,s.signature);s.publicKey=io.default.encode(s.publicKey),s.signature=io.default.encode(s.signature);const u=io.default.toBuffer(s.publicKey),h=io.default.toBuffer(s.signature),p=await(0,Up.deepHash)([(0,no.stringToBuffer)(s.currency),(0,no.stringToBuffer)(s.amount.toString()),(0,no.stringToBuffer)(s.nonce.toString())]),m=await n.verify(u,p,h),_=n.ownerToAddress(n.name=="arweave"?io.default.decode(s.publicKey):io.default.toBuffer(s.publicKey))===n.address;if(!(c||m||_))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const S=await e.post("/account/withdraw",s);return ZA.default.checkAndThrow(S,"Withdrawing balance"),S}vf.withdrawBalance=QA;var w0={},e5=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(w0,"__esModule",{value:!0});const Lp=Da,t5=e5(is);class r5 extends Lp.DataItem{constructor(e,r,n){var i;super((0,Lp.createData)(e,r.currencyConfig.getSigner(),{...n,anchor:(i=n==null?void 0:n.anchor)!==null&&i!==void 0?i:t5.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=r,this.signer=r.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}w0.default=r5;var n5=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ql,"__esModule",{value:!0});const i5=vf,s5=n5(w0);class o5{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,i5.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,r){return new s5.default(e,this,r)}getSigner(){return this.currencyConfig.getSigner()}}ql.default=o5;var _0={},J1={};function Bn(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var a5=Bn;Bn.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Bn.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Bn.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Bn.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Bn.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Bn.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Bn.prototype.start=Bn.prototype.try;Bn.prototype.errors=function(){return this._errors};Bn.prototype.attempts=function(){return this._attempts};Bn.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=i,r=o)}return e};(function(t){var e=a5;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(c,u){return c-u}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var c=i[o],u=r[c];r[c]=function(p){var m=t.operation(n),_=Array.prototype.slice.call(arguments,1),S=_.pop();_.push(function(B){m.retry(B)||(B&&(arguments[0]=m.mainError()),S.apply(this,arguments))}),m.attempt(function(){p.apply(r,_)})}.bind(r,u),r[c].options=n}}})(J1);var c5=J1,f5=c5;function u5(t,e){function r(n,i){var s=e||{},o;"randomize"in s||(s.randomize=!0),o=f5.operation(s);function c(p){i(p||new Error("Aborted"))}function u(p,m){if(p.bail){c(p);return}o.retry(p)?s.onRetry&&s.onRetry(p,m):i(o.mainError())}function h(p){var m;try{m=t(c,p)}catch(_){u(_,p);return}Promise.resolve(m).then(n).catch(function(S){u(S,p)})}o.attempt(h)}return new Promise(r)}var eu=u5,E0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_0,"__esModule",{value:!0});const l5=E0(eu),h5=E0(os),Fp=E0(Hs);class d5{constructor(e){this.utils=e}async fund(e,r=1){const n=new h5.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let o="0";i.needsFee&&(o=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(r).toFixed(0).toString());const c=await i.createTx(n,s,o);let u;try{u=await i.sendTx(c.tx)}catch(p){throw p}if(c.txId||(c.txId=u),Fp.default.checkAndThrow(u,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(c.txId),!await(0,l5.default)(async p=>{const m=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:c.txId});return m.status==400&&p(new Error(`failed to post funding tx - ${c.txId} (keep this id!) - ${m.data}`)),Fp.default.checkAndThrow(m,`Posting transaction ${c.txId} information to the bundler`,[202]),m},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${c.txId} - keep this id!`);return{reward:o,target:s,quantity:n.toString(),id:c.txId}}}_0.default=d5;var ec={},W1={},Mo={},tu={},tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.PromisePoolError=void 0;class p5 extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}tc.PromisePoolError=p5;var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.StopThePromisePoolError=void 0;class g5 extends Error{}rc.StopThePromisePoolError=g5;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.ValidationError=void 0;class y5 extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}nc.ValidationError=y5;Object.defineProperty(tu,"__esModule",{value:!0});tu.PromisePoolExecutor=void 0;const $p=Mo,jp=tc,Kp=rc,qi=nc;class m5{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(e){if(!this.isValidConcurrency(e))throw qi.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${e}" (${typeof e})`);return this.meta.concurrency=e,this}isValidConcurrency(e){return typeof e=="number"&&e>=1}withTaskTimeout(e){return this.meta.taskTimeout=e,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(e){return this.meta.shouldResultsCorrespond=e,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(e){return this.meta.items=e,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(e){return this.handler=e,this}hasErrorHandler(){return!!this.errorHandler}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers=e,this}onTaskFinished(e){return this.onTaskFinishedHandlers=e,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new Kp.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw qi.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const e=this.taskTimeout();if(!(e==null||typeof e=="number"&&e>=0))throw qi.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(e)}" (${typeof e})`);if(!Array.isArray(this.items()))throw qi.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw qi.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(r=>{if(r&&typeof r!="function")throw qi.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof r}"`)}),this.onTaskFinishedHandlers.forEach(r=>{if(r&&typeof r!="function")throw qi.ValidationError.createFrom(`The error handler must be a function. Received "${typeof r}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill($p.PromisePool.notRun)),this}async process(){for(const[e,r]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(r,e)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(e,r){const n=this.createTaskFor(e,r).then(i=>{this.save(i,r).removeActive(n)}).catch(async i=>{await this.handleErrorFor(i,e,r),this.removeActive(n)}).finally(()=>{this.processedItems().push(e),this.runOnTaskFinishedHandlers(e)});this.tasks().push(n),this.runOnTaskStartedHandlers(e)}async createTaskFor(e,r){return this.taskTimeout()===void 0?this.handler(e,r,this):Promise.race([this.handler(e,r,this),this.createTaskTimeout(e)])}async createTaskTimeout(e){return new Promise((r,n)=>{setTimeout(()=>{n(new jp.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,e))},this.taskTimeout())})}save(e,r){return this.shouldUseCorrespondingResults()?this.results()[r]=e:this.results().push(e),this}removeActive(e){return this.tasks().splice(this.tasks().indexOf(e),1),this}async handleErrorFor(e,r,n){if(this.shouldUseCorrespondingResults()&&(this.results()[n]=$p.PromisePool.failed),!this.isStoppingThePoolError(e)){if(this.isValidationError(e))throw this.markAsStopped(),e;this.hasErrorHandler()?await this.runErrorHandlerFor(e,r):this.saveErrorFor(e,r)}}isStoppingThePoolError(e){return e instanceof Kp.StopThePromisePoolError}isValidationError(e){return e instanceof qi.ValidationError}async runErrorHandlerFor(e,r){var n;try{await((n=this.errorHandler)===null||n===void 0?void 0:n.call(this,e,r,this))}catch(i){this.rethrowIfNotStoppingThePool(i)}}runOnTaskStartedHandlers(e){this.onTaskStartedHandlers.forEach(r=>{r(e,this)})}runOnTaskFinishedHandlers(e){this.onTaskFinishedHandlers.forEach(r=>{r(e,this)})}rethrowIfNotStoppingThePool(e){if(!this.isStoppingThePoolError(e))throw e}saveErrorFor(e,r){this.errors().push(jp.PromisePoolError.createFrom(e,r))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}tu.PromisePoolExecutor=m5;Object.defineProperty(Mo,"__esModule",{value:!0});Mo.PromisePool=void 0;const x5=tu;class Po{constructor(e){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=e??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(e){return this.concurrency=e,this}static withConcurrency(e){return new this().withConcurrency(e)}withTaskTimeout(e){return this.timeout=e,this}static withTaskTimeout(e){return new this().withTaskTimeout(e)}for(e){return typeof this.timeout=="number"?new Po(e).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new Po(e).withConcurrency(this.concurrency)}static for(e){return new this().for(e)}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers.push(e),this}onTaskFinished(e){return this.onTaskFinishedHandlers.push(e),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(e){return new x5.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(e).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}Mo.PromisePool=Po;Po.notRun=Symbol("notRun");Po.failed=Symbol("failed");var Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});(function(t){var e=j&&j.__createBinding||(Object.create?function(i,s,o,c){c===void 0&&(c=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,c,u)}:function(i,s,o,c){c===void 0&&(c=o),i[c]=s[o]}),r=j&&j.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=Mo;t.default=n.PromisePool,r(Y1,t),r(Mo,t),r(tc,t),r(Z1,t),r(rc,t),r(nc,t)})(W1);var ru={},X1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const e=Symbol("not readable"),r=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:e,readable:r,ended:n,errored:i};class s{constructor(c,{size:u}={}){this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=c,this._size=u;const h=["_handleStreamEnd","_handleStreamError"];for(const p of h)Object.defineProperty(this,p,{configurable:!0,writable:!0,value:this[p].bind(this)});c.once("error",this._handleStreamError),c.once("end",this._handleStreamEnd),c.on("readable",()=>{this._state=t.STATES.readable})}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let c,u;try{c=this._untilReadable(),u=this._untilEnd(),await Promise.race([c.promise,u.promise])}finally{c!=null&&c.close(),u!=null&&u.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const c=this._size?this._stream.read(this._size):this._stream.read();return c!==null?{done:!1,value:c}:(this._state=t.STATES.notReadable,await new Promise(u=>setTimeout(h=>h(!0),0,u)),this.next())}}}_untilReadable(){let c;const u=new Promise((p,m)=>{c=()=>{this._state=t.STATES.readable,this._rejections.delete(m),p()},this._state,t.STATES.readable,this._stream.once("readable",c),this._rejections.add(m)});return{close:()=>{c!=null&&this._stream.removeListener("readable",c)},promise:u}}_untilEnd(){let c;const u=new Promise((p,m)=>{c=()=>{this._state=t.STATES.ended,this._rejections.delete(m),p()},this._stream.once("end",c),this._rejections.add(m)});return{close:()=>{c!=null&&this._stream.removeListener("end",c)},promise:u}}return(){return this._state=t.STATES.ended,this.next()}throw(c){return this._error=c,this._state=t.STATES.errored,this.next()}close(c){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(c)}_handleStreamError(c){this._error=c,this._state=t.STATES.errored;for(const u of this._rejections)u(c)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s})(X1);var nu=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ru,"__esModule",{value:!0});ru.ChunkingUploader=void 0;const zu=Da,qp=pf,b5=hg.exports,Gu=nu(Hs),v5=nu(is),Vu=Nt,w5=nu(eu),_5=nu(X1);class E5 extends b5.EventEmitter{constructor(e,r){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=r,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return zu.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.runUpload(e,{...r})}async runUpload(e,r){var n,i,s;let o=this.uploadID;const c=r===void 0,u={"x-chunking-version":"2"};let h;if(!o)h=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:u}),Gu.default.checkAndThrow(h,"Getting upload token"),this.uploadID=o=h.data.id;else{if(h=await this.api.get(`/chunks/${this.currency}/${o}/-1`,{headers:u}),h.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(Gu.default.checkAndThrow(h,"Getting upload info"),this.chunkSize!=+h.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+h.data.size}).`)}const{max:p,min:m}=h.data;if(this.chunkSize<+m||this.chunkSize>+p)throw new Error(`Chunk size out of allowed range: ${m} - ${p}`);let _=0;const S=(b,a,l)=>new Promise(y=>{(0,w5.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${o}/${a}`,b,{headers:{"Content-Type":"application/octet-stream",...u},maxBodyLength:1/0,maxContentLength:1/0}).then(v=>{if((v==null?void 0:v.status)>=300){const w={res:v,id:l,offset:a,size:b.length};throw this.emit("chunkError",w),w}this.emit("chunkUpload",{id:l,offset:a,size:b.length,totalUploaded:_+=b.length}),y({o:a,d:v})})})}),B=(n=h.data.chunks)!==null&&n!==void 0?n:[],T=new qp.PassThrough;let A=V.Buffer.alloc(0),P=!1,R=!0;T.on("end",()=>P=!0),T.on("error",b=>{throw new Error(`Error processing readable: ${b}`)});const F=async b=>{for(;!P;){if(A.length>=b)return a=V.Buffer.from(A.slice(0,b)),A=A.slice(b),a;var a=T.read(b);if(a===null){await new Promise(l=>setTimeout(y=>y(!0),0,l));continue}if(a.length===b)return a;A=V.Buffer.concat([A,a])}for(;A.length>=b;)return a=V.Buffer.from(A.slice(0,b)),A=A.slice(b),a;return R=!1,A};let q;c||(q=(0,zu.createData)("",this.currencyConfig.getSigner(),{...r,anchor:(i=r==null?void 0:r.anchor)!==null&&i!==void 0?i:v5.default.randomBytes(32).toString("base64").slice(0,32)}),T.write(q.getRaw()),_-=q.getRaw().length),V.Buffer.isBuffer(e)?(T.write(e),T.end()):e.pipe(T);let U=0,K=[],Z=0,Q,ue,be;if(!c){ue=new qp.PassThrough;const b=q.getRaw().length;Q=await F(this.chunkSize),Z++,U+=Q.length,ue.write(Q.slice(b));const a=[(0,Vu.stringToBuffer)("dataitem"),(0,Vu.stringToBuffer)("1"),(0,Vu.stringToBuffer)(q.signatureType.toString()),q.rawOwner,q.rawTarget,q.rawAnchor,q.rawTags,new _5.default(ue)];be=(0,zu.deepHash)(a)}let ce=B.pop();for(;R;){if(this.paused&&await new Promise(a=>this.on("resume",()=>a(void 0))),ce&&+ce[0]-U<=this.chunkSize){const l=ce[1],y=await F(l);c||ue.write(y),U+=l,ce=B.pop(),Z++,_+=l;continue}const b=await F(this.chunkSize);c||ue.write(b),K.length==this.batchSize&&(await Promise.all(K),K=[]),K.push(S(b,U,++Z)),U+=b.length}if(ue&&ue.end(),await Promise.all(K),!c){const b=await be,a=V.Buffer.from(await this.currencyConfig.getSigner().sign(b));Q.set(a,2),await S(Q,0,0)}const te=await this.api.post(`/chunks/${this.currency}/${o}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...u},timeout:this.api.config.timeout*10});if(te.status===402)throw new Error("Not enough funds to send data");return Gu.default.checkAndThrow(te,"Finalising upload",[201]),te.status===201&&(te.data={id:(s=te.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",te),te}get completionPromise(){return new Promise(e=>this.on("done",e))}}ru.ChunkingUploader=E5;var Q1=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ec,"__esModule",{value:!0});ec.sleep=void 0;const A5=Da,S5=Q1(W1),T5=Q1(eu),k5=ru,M5=t=>new Promise(e=>setTimeout(e,t));ec.sleep=M5;class P5{constructor(e,r,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=r}async upload(e,r){return await this.chunkedUploader.uploadData(e,r)}get chunkedUploader(){return new k5.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let r;const n=A5.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)r=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:o,timeout:c}=this.api.getConfig();r=await this.api.post(`${i}://${s}:${o}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:c,maxBodyLength:1/0}),r.status==201&&(r.data={id:e.id})}switch(r.status){case 402:throw new Error("Not enough funds to send data");default:if(r.status>=400)throw new Error(`whilst uploading DataItem: ${r.status} ${r.statusText}`)}return r}async concurrentUploader(e,r=5,n,i){const s=[],o=await S5.default.for(e).withConcurrency(r>=1?r:5).handleError(async(c,u)=>{if(s.push(c),c.message==="Not enough funds to send data")throw c}).process(async(c,u,h)=>{await(0,T5.default)(async p=>{try{const m=await this.processItem(c);return u%r==0&&await i(`Processed ${u} Items`),n?await n({item:c,res:m,i:u}):{item:c,res:m,i:u}}catch(m){throw m.message==="Not enough funds to send data"&&p(m),m}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:o.results}}async processItem(e){return typeof e=="string"&&(e=V.Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,o]of r.entries())i.paths[s]={id:o};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}ec.default=P5;var A0={},iu={},gs={},su=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gs,"__esModule",{value:!0});gs.getRedstonePrice=void 0;const C5=su(Ns),I5=su(Wn.exports),N5=su(Kl),B5=su(Hs);class R5{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return I5.default.encode(V.Buffer.from(await C5.default.crypto.hash(await e.rawSignature())))}async price(){return ex(this.ticker)}}gs.default=R5;async function ex(t){const e=await N5.default.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await B5.default.checkAndThrow(e,"Getting price data"),e.data[0].value}gs.getRedstonePrice=ex;var S0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iu,"__esModule",{value:!0});const O5=S0(Iy),Pl=Vf,vs=S0(os),tx=Do,D5=S0(gs),U5=Pl.ethers.BigNumber,L5=tx.InjectedEthereumSigner;class F5 extends D5.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new vs.default(n.blockNumber):null,amount:new vs.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,O5.default)(V.Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new tx.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,r,n){return L5.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new vs.default(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new vs.default(e).toString(16)},s=await n.estimateGas(i),o=await n.getGasPrice();return new vs.default(s.mul(o).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=U5.from(new vs.default(e).toFixed()),s=this.w3signer,o=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let c=await s.getGasPrice();this.name==="matic"&&(c=Pl.ethers.BigNumber.from(new vs.default(c.toString()).multipliedBy(10).decimalPlaces(0).toString()));const u=await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:c,gasLimit:o});return{txId:void 0,tx:u}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new Pl.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}iu.default=F5;var T0={},rx={},nx={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.KeyStore=void 0;class $5{}zs.KeyStore=$5;var ic={},gi={},ix={exports:{}};(function(t){(function(e){var r=function(E){var M,I=new Float64Array(16);if(E)for(M=0;M<E.length;M++)I[M]=E[M];return I},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),c=r([1]),u=r([56129,1]),h=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(E,M,I,g){E[M]=I>>24&255,E[M+1]=I>>16&255,E[M+2]=I>>8&255,E[M+3]=I&255,E[M+4]=g>>24&255,E[M+5]=g>>16&255,E[M+6]=g>>8&255,E[M+7]=g&255}function T(E,M,I,g,N){var z,H=0;for(z=0;z<N;z++)H|=E[M+z]^I[g+z];return(1&H-1>>>8)-1}function A(E,M,I,g){return T(E,M,I,g,16)}function P(E,M,I,g){return T(E,M,I,g,32)}function R(E,M,I,g){for(var N=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,z=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,H=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,J=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,le=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,ae=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,re=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,ct=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,ve=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Pe=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,Ce=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,De=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Oe=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Ie=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Be=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,Ne=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,we=N,Ae=z,me=H,_e=J,Ee=le,xe=ae,W=re,Y=ct,se=ve,ee=Pe,ie=Ce,pe=De,Fe=Oe,ht=Ie,yt=Be,dt=Ne,L,xt=0;xt<20;xt+=2)L=we+Fe|0,Ee^=L<<7|L>>>32-7,L=Ee+we|0,se^=L<<9|L>>>32-9,L=se+Ee|0,Fe^=L<<13|L>>>32-13,L=Fe+se|0,we^=L<<18|L>>>32-18,L=xe+Ae|0,ee^=L<<7|L>>>32-7,L=ee+xe|0,ht^=L<<9|L>>>32-9,L=ht+ee|0,Ae^=L<<13|L>>>32-13,L=Ae+ht|0,xe^=L<<18|L>>>32-18,L=ie+W|0,yt^=L<<7|L>>>32-7,L=yt+ie|0,me^=L<<9|L>>>32-9,L=me+yt|0,W^=L<<13|L>>>32-13,L=W+me|0,ie^=L<<18|L>>>32-18,L=dt+pe|0,_e^=L<<7|L>>>32-7,L=_e+dt|0,Y^=L<<9|L>>>32-9,L=Y+_e|0,pe^=L<<13|L>>>32-13,L=pe+Y|0,dt^=L<<18|L>>>32-18,L=we+_e|0,Ae^=L<<7|L>>>32-7,L=Ae+we|0,me^=L<<9|L>>>32-9,L=me+Ae|0,_e^=L<<13|L>>>32-13,L=_e+me|0,we^=L<<18|L>>>32-18,L=xe+Ee|0,W^=L<<7|L>>>32-7,L=W+xe|0,Y^=L<<9|L>>>32-9,L=Y+W|0,Ee^=L<<13|L>>>32-13,L=Ee+Y|0,xe^=L<<18|L>>>32-18,L=ie+ee|0,pe^=L<<7|L>>>32-7,L=pe+ie|0,se^=L<<9|L>>>32-9,L=se+pe|0,ee^=L<<13|L>>>32-13,L=ee+se|0,ie^=L<<18|L>>>32-18,L=dt+yt|0,Fe^=L<<7|L>>>32-7,L=Fe+dt|0,ht^=L<<9|L>>>32-9,L=ht+Fe|0,yt^=L<<13|L>>>32-13,L=yt+ht|0,dt^=L<<18|L>>>32-18;we=we+N|0,Ae=Ae+z|0,me=me+H|0,_e=_e+J|0,Ee=Ee+le|0,xe=xe+ae|0,W=W+re|0,Y=Y+ct|0,se=se+ve|0,ee=ee+Pe|0,ie=ie+Ce|0,pe=pe+De|0,Fe=Fe+Oe|0,ht=ht+Ie|0,yt=yt+Be|0,dt=dt+Ne|0,E[0]=we>>>0&255,E[1]=we>>>8&255,E[2]=we>>>16&255,E[3]=we>>>24&255,E[4]=Ae>>>0&255,E[5]=Ae>>>8&255,E[6]=Ae>>>16&255,E[7]=Ae>>>24&255,E[8]=me>>>0&255,E[9]=me>>>8&255,E[10]=me>>>16&255,E[11]=me>>>24&255,E[12]=_e>>>0&255,E[13]=_e>>>8&255,E[14]=_e>>>16&255,E[15]=_e>>>24&255,E[16]=Ee>>>0&255,E[17]=Ee>>>8&255,E[18]=Ee>>>16&255,E[19]=Ee>>>24&255,E[20]=xe>>>0&255,E[21]=xe>>>8&255,E[22]=xe>>>16&255,E[23]=xe>>>24&255,E[24]=W>>>0&255,E[25]=W>>>8&255,E[26]=W>>>16&255,E[27]=W>>>24&255,E[28]=Y>>>0&255,E[29]=Y>>>8&255,E[30]=Y>>>16&255,E[31]=Y>>>24&255,E[32]=se>>>0&255,E[33]=se>>>8&255,E[34]=se>>>16&255,E[35]=se>>>24&255,E[36]=ee>>>0&255,E[37]=ee>>>8&255,E[38]=ee>>>16&255,E[39]=ee>>>24&255,E[40]=ie>>>0&255,E[41]=ie>>>8&255,E[42]=ie>>>16&255,E[43]=ie>>>24&255,E[44]=pe>>>0&255,E[45]=pe>>>8&255,E[46]=pe>>>16&255,E[47]=pe>>>24&255,E[48]=Fe>>>0&255,E[49]=Fe>>>8&255,E[50]=Fe>>>16&255,E[51]=Fe>>>24&255,E[52]=ht>>>0&255,E[53]=ht>>>8&255,E[54]=ht>>>16&255,E[55]=ht>>>24&255,E[56]=yt>>>0&255,E[57]=yt>>>8&255,E[58]=yt>>>16&255,E[59]=yt>>>24&255,E[60]=dt>>>0&255,E[61]=dt>>>8&255,E[62]=dt>>>16&255,E[63]=dt>>>24&255}function F(E,M,I,g){for(var N=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,z=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,H=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,J=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,le=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,ae=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,re=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,ct=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,ve=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Pe=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,Ce=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,De=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Oe=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Ie=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Be=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,Ne=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,we=N,Ae=z,me=H,_e=J,Ee=le,xe=ae,W=re,Y=ct,se=ve,ee=Pe,ie=Ce,pe=De,Fe=Oe,ht=Ie,yt=Be,dt=Ne,L,xt=0;xt<20;xt+=2)L=we+Fe|0,Ee^=L<<7|L>>>32-7,L=Ee+we|0,se^=L<<9|L>>>32-9,L=se+Ee|0,Fe^=L<<13|L>>>32-13,L=Fe+se|0,we^=L<<18|L>>>32-18,L=xe+Ae|0,ee^=L<<7|L>>>32-7,L=ee+xe|0,ht^=L<<9|L>>>32-9,L=ht+ee|0,Ae^=L<<13|L>>>32-13,L=Ae+ht|0,xe^=L<<18|L>>>32-18,L=ie+W|0,yt^=L<<7|L>>>32-7,L=yt+ie|0,me^=L<<9|L>>>32-9,L=me+yt|0,W^=L<<13|L>>>32-13,L=W+me|0,ie^=L<<18|L>>>32-18,L=dt+pe|0,_e^=L<<7|L>>>32-7,L=_e+dt|0,Y^=L<<9|L>>>32-9,L=Y+_e|0,pe^=L<<13|L>>>32-13,L=pe+Y|0,dt^=L<<18|L>>>32-18,L=we+_e|0,Ae^=L<<7|L>>>32-7,L=Ae+we|0,me^=L<<9|L>>>32-9,L=me+Ae|0,_e^=L<<13|L>>>32-13,L=_e+me|0,we^=L<<18|L>>>32-18,L=xe+Ee|0,W^=L<<7|L>>>32-7,L=W+xe|0,Y^=L<<9|L>>>32-9,L=Y+W|0,Ee^=L<<13|L>>>32-13,L=Ee+Y|0,xe^=L<<18|L>>>32-18,L=ie+ee|0,pe^=L<<7|L>>>32-7,L=pe+ie|0,se^=L<<9|L>>>32-9,L=se+pe|0,ee^=L<<13|L>>>32-13,L=ee+se|0,ie^=L<<18|L>>>32-18,L=dt+yt|0,Fe^=L<<7|L>>>32-7,L=Fe+dt|0,ht^=L<<9|L>>>32-9,L=ht+Fe|0,yt^=L<<13|L>>>32-13,L=yt+ht|0,dt^=L<<18|L>>>32-18;E[0]=we>>>0&255,E[1]=we>>>8&255,E[2]=we>>>16&255,E[3]=we>>>24&255,E[4]=xe>>>0&255,E[5]=xe>>>8&255,E[6]=xe>>>16&255,E[7]=xe>>>24&255,E[8]=ie>>>0&255,E[9]=ie>>>8&255,E[10]=ie>>>16&255,E[11]=ie>>>24&255,E[12]=dt>>>0&255,E[13]=dt>>>8&255,E[14]=dt>>>16&255,E[15]=dt>>>24&255,E[16]=W>>>0&255,E[17]=W>>>8&255,E[18]=W>>>16&255,E[19]=W>>>24&255,E[20]=Y>>>0&255,E[21]=Y>>>8&255,E[22]=Y>>>16&255,E[23]=Y>>>24&255,E[24]=se>>>0&255,E[25]=se>>>8&255,E[26]=se>>>16&255,E[27]=se>>>24&255,E[28]=ee>>>0&255,E[29]=ee>>>8&255,E[30]=ee>>>16&255,E[31]=ee>>>24&255}function q(E,M,I,g){R(E,M,I,g)}function U(E,M,I,g){F(E,M,I,g)}var K=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Z(E,M,I,g,N,z,H){var J=new Uint8Array(16),le=new Uint8Array(64),ae,re;for(re=0;re<16;re++)J[re]=0;for(re=0;re<8;re++)J[re]=z[re];for(;N>=64;){for(q(le,J,H,K),re=0;re<64;re++)E[M+re]=I[g+re]^le[re];for(ae=1,re=8;re<16;re++)ae=ae+(J[re]&255)|0,J[re]=ae&255,ae>>>=8;N-=64,M+=64,g+=64}if(N>0)for(q(le,J,H,K),re=0;re<N;re++)E[M+re]=I[g+re]^le[re];return 0}function Q(E,M,I,g,N){var z=new Uint8Array(16),H=new Uint8Array(64),J,le;for(le=0;le<16;le++)z[le]=0;for(le=0;le<8;le++)z[le]=g[le];for(;I>=64;){for(q(H,z,N,K),le=0;le<64;le++)E[M+le]=H[le];for(J=1,le=8;le<16;le++)J=J+(z[le]&255)|0,z[le]=J&255,J>>>=8;I-=64,M+=64}if(I>0)for(q(H,z,N,K),le=0;le<I;le++)E[M+le]=H[le];return 0}function ue(E,M,I,g,N){var z=new Uint8Array(32);U(z,g,N,K);for(var H=new Uint8Array(8),J=0;J<8;J++)H[J]=g[J+16];return Q(E,M,I,H,z)}function be(E,M,I,g,N,z,H){var J=new Uint8Array(32);U(J,z,H,K);for(var le=new Uint8Array(8),ae=0;ae<8;ae++)le[ae]=z[ae+16];return Z(E,M,I,g,N,le,J)}var ce=function(E){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var M,I,g,N,z,H,J,le;M=E[0]&255|(E[1]&255)<<8,this.r[0]=M&8191,I=E[2]&255|(E[3]&255)<<8,this.r[1]=(M>>>13|I<<3)&8191,g=E[4]&255|(E[5]&255)<<8,this.r[2]=(I>>>10|g<<6)&7939,N=E[6]&255|(E[7]&255)<<8,this.r[3]=(g>>>7|N<<9)&8191,z=E[8]&255|(E[9]&255)<<8,this.r[4]=(N>>>4|z<<12)&255,this.r[5]=z>>>1&8190,H=E[10]&255|(E[11]&255)<<8,this.r[6]=(z>>>14|H<<2)&8191,J=E[12]&255|(E[13]&255)<<8,this.r[7]=(H>>>11|J<<5)&8065,le=E[14]&255|(E[15]&255)<<8,this.r[8]=(J>>>8|le<<8)&8191,this.r[9]=le>>>5&127,this.pad[0]=E[16]&255|(E[17]&255)<<8,this.pad[1]=E[18]&255|(E[19]&255)<<8,this.pad[2]=E[20]&255|(E[21]&255)<<8,this.pad[3]=E[22]&255|(E[23]&255)<<8,this.pad[4]=E[24]&255|(E[25]&255)<<8,this.pad[5]=E[26]&255|(E[27]&255)<<8,this.pad[6]=E[28]&255|(E[29]&255)<<8,this.pad[7]=E[30]&255|(E[31]&255)<<8};ce.prototype.blocks=function(E,M,I){for(var g=this.fin?0:2048,N,z,H,J,le,ae,re,ct,ve,Pe,Ce,De,Oe,Ie,Be,Ne,we,Ae,me,_e=this.h[0],Ee=this.h[1],xe=this.h[2],W=this.h[3],Y=this.h[4],se=this.h[5],ee=this.h[6],ie=this.h[7],pe=this.h[8],Fe=this.h[9],ht=this.r[0],yt=this.r[1],dt=this.r[2],L=this.r[3],xt=this.r[4],Mt=this.r[5],Pt=this.r[6],mt=this.r[7],St=this.r[8],Tt=this.r[9];I>=16;)N=E[M+0]&255|(E[M+1]&255)<<8,_e+=N&8191,z=E[M+2]&255|(E[M+3]&255)<<8,Ee+=(N>>>13|z<<3)&8191,H=E[M+4]&255|(E[M+5]&255)<<8,xe+=(z>>>10|H<<6)&8191,J=E[M+6]&255|(E[M+7]&255)<<8,W+=(H>>>7|J<<9)&8191,le=E[M+8]&255|(E[M+9]&255)<<8,Y+=(J>>>4|le<<12)&8191,se+=le>>>1&8191,ae=E[M+10]&255|(E[M+11]&255)<<8,ee+=(le>>>14|ae<<2)&8191,re=E[M+12]&255|(E[M+13]&255)<<8,ie+=(ae>>>11|re<<5)&8191,ct=E[M+14]&255|(E[M+15]&255)<<8,pe+=(re>>>8|ct<<8)&8191,Fe+=ct>>>5|g,ve=0,Pe=ve,Pe+=_e*ht,Pe+=Ee*(5*Tt),Pe+=xe*(5*St),Pe+=W*(5*mt),Pe+=Y*(5*Pt),ve=Pe>>>13,Pe&=8191,Pe+=se*(5*Mt),Pe+=ee*(5*xt),Pe+=ie*(5*L),Pe+=pe*(5*dt),Pe+=Fe*(5*yt),ve+=Pe>>>13,Pe&=8191,Ce=ve,Ce+=_e*yt,Ce+=Ee*ht,Ce+=xe*(5*Tt),Ce+=W*(5*St),Ce+=Y*(5*mt),ve=Ce>>>13,Ce&=8191,Ce+=se*(5*Pt),Ce+=ee*(5*Mt),Ce+=ie*(5*xt),Ce+=pe*(5*L),Ce+=Fe*(5*dt),ve+=Ce>>>13,Ce&=8191,De=ve,De+=_e*dt,De+=Ee*yt,De+=xe*ht,De+=W*(5*Tt),De+=Y*(5*St),ve=De>>>13,De&=8191,De+=se*(5*mt),De+=ee*(5*Pt),De+=ie*(5*Mt),De+=pe*(5*xt),De+=Fe*(5*L),ve+=De>>>13,De&=8191,Oe=ve,Oe+=_e*L,Oe+=Ee*dt,Oe+=xe*yt,Oe+=W*ht,Oe+=Y*(5*Tt),ve=Oe>>>13,Oe&=8191,Oe+=se*(5*St),Oe+=ee*(5*mt),Oe+=ie*(5*Pt),Oe+=pe*(5*Mt),Oe+=Fe*(5*xt),ve+=Oe>>>13,Oe&=8191,Ie=ve,Ie+=_e*xt,Ie+=Ee*L,Ie+=xe*dt,Ie+=W*yt,Ie+=Y*ht,ve=Ie>>>13,Ie&=8191,Ie+=se*(5*Tt),Ie+=ee*(5*St),Ie+=ie*(5*mt),Ie+=pe*(5*Pt),Ie+=Fe*(5*Mt),ve+=Ie>>>13,Ie&=8191,Be=ve,Be+=_e*Mt,Be+=Ee*xt,Be+=xe*L,Be+=W*dt,Be+=Y*yt,ve=Be>>>13,Be&=8191,Be+=se*ht,Be+=ee*(5*Tt),Be+=ie*(5*St),Be+=pe*(5*mt),Be+=Fe*(5*Pt),ve+=Be>>>13,Be&=8191,Ne=ve,Ne+=_e*Pt,Ne+=Ee*Mt,Ne+=xe*xt,Ne+=W*L,Ne+=Y*dt,ve=Ne>>>13,Ne&=8191,Ne+=se*yt,Ne+=ee*ht,Ne+=ie*(5*Tt),Ne+=pe*(5*St),Ne+=Fe*(5*mt),ve+=Ne>>>13,Ne&=8191,we=ve,we+=_e*mt,we+=Ee*Pt,we+=xe*Mt,we+=W*xt,we+=Y*L,ve=we>>>13,we&=8191,we+=se*dt,we+=ee*yt,we+=ie*ht,we+=pe*(5*Tt),we+=Fe*(5*St),ve+=we>>>13,we&=8191,Ae=ve,Ae+=_e*St,Ae+=Ee*mt,Ae+=xe*Pt,Ae+=W*Mt,Ae+=Y*xt,ve=Ae>>>13,Ae&=8191,Ae+=se*L,Ae+=ee*dt,Ae+=ie*yt,Ae+=pe*ht,Ae+=Fe*(5*Tt),ve+=Ae>>>13,Ae&=8191,me=ve,me+=_e*Tt,me+=Ee*St,me+=xe*mt,me+=W*Pt,me+=Y*Mt,ve=me>>>13,me&=8191,me+=se*xt,me+=ee*L,me+=ie*dt,me+=pe*yt,me+=Fe*ht,ve+=me>>>13,me&=8191,ve=(ve<<2)+ve|0,ve=ve+Pe|0,Pe=ve&8191,ve=ve>>>13,Ce+=ve,_e=Pe,Ee=Ce,xe=De,W=Oe,Y=Ie,se=Be,ee=Ne,ie=we,pe=Ae,Fe=me,M+=16,I-=16;this.h[0]=_e,this.h[1]=Ee,this.h[2]=xe,this.h[3]=W,this.h[4]=Y,this.h[5]=se,this.h[6]=ee,this.h[7]=ie,this.h[8]=pe,this.h[9]=Fe},ce.prototype.finish=function(E,M){var I=new Uint16Array(10),g,N,z,H;if(this.leftover){for(H=this.leftover,this.buffer[H++]=1;H<16;H++)this.buffer[H]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(g=this.h[1]>>>13,this.h[1]&=8191,H=2;H<10;H++)this.h[H]+=g,g=this.h[H]>>>13,this.h[H]&=8191;for(this.h[0]+=g*5,g=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=g,g=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=g,I[0]=this.h[0]+5,g=I[0]>>>13,I[0]&=8191,H=1;H<10;H++)I[H]=this.h[H]+g,g=I[H]>>>13,I[H]&=8191;for(I[9]-=1<<13,N=(g^1)-1,H=0;H<10;H++)I[H]&=N;for(N=~N,H=0;H<10;H++)this.h[H]=this.h[H]&N|I[H];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,z=this.h[0]+this.pad[0],this.h[0]=z&65535,H=1;H<8;H++)z=(this.h[H]+this.pad[H]|0)+(z>>>16)|0,this.h[H]=z&65535;E[M+0]=this.h[0]>>>0&255,E[M+1]=this.h[0]>>>8&255,E[M+2]=this.h[1]>>>0&255,E[M+3]=this.h[1]>>>8&255,E[M+4]=this.h[2]>>>0&255,E[M+5]=this.h[2]>>>8&255,E[M+6]=this.h[3]>>>0&255,E[M+7]=this.h[3]>>>8&255,E[M+8]=this.h[4]>>>0&255,E[M+9]=this.h[4]>>>8&255,E[M+10]=this.h[5]>>>0&255,E[M+11]=this.h[5]>>>8&255,E[M+12]=this.h[6]>>>0&255,E[M+13]=this.h[6]>>>8&255,E[M+14]=this.h[7]>>>0&255,E[M+15]=this.h[7]>>>8&255},ce.prototype.update=function(E,M,I){var g,N;if(this.leftover){for(N=16-this.leftover,N>I&&(N=I),g=0;g<N;g++)this.buffer[this.leftover+g]=E[M+g];if(I-=N,M+=N,this.leftover+=N,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(I>=16&&(N=I-I%16,this.blocks(E,M,N),M+=N,I-=N),I){for(g=0;g<I;g++)this.buffer[this.leftover+g]=E[M+g];this.leftover+=I}};function te(E,M,I,g,N,z){var H=new ce(z);return H.update(I,g,N),H.finish(E,M),0}function b(E,M,I,g,N,z){var H=new Uint8Array(16);return te(H,0,I,g,N,z),A(E,M,H,0)}function a(E,M,I,g,N){var z;if(I<32)return-1;for(be(E,0,M,0,I,g,N),te(E,16,E,32,I-32,E),z=0;z<16;z++)E[z]=0;return 0}function l(E,M,I,g,N){var z,H=new Uint8Array(32);if(I<32||(ue(H,0,32,g,N),b(M,16,M,32,I-32,H)!==0))return-1;for(be(E,0,M,0,I,g,N),z=0;z<32;z++)E[z]=0;return 0}function y(E,M){var I;for(I=0;I<16;I++)E[I]=M[I]|0}function v(E){var M,I,g=1;for(M=0;M<16;M++)I=E[M]+g+65535,g=Math.floor(I/65536),E[M]=I-g*65536;E[0]+=g-1+37*(g-1)}function w(E,M,I){for(var g,N=~(I-1),z=0;z<16;z++)g=N&(E[z]^M[z]),E[z]^=g,M[z]^=g}function k(E,M){var I,g,N,z=r(),H=r();for(I=0;I<16;I++)H[I]=M[I];for(v(H),v(H),v(H),g=0;g<2;g++){for(z[0]=H[0]-65517,I=1;I<15;I++)z[I]=H[I]-65535-(z[I-1]>>16&1),z[I-1]&=65535;z[15]=H[15]-32767-(z[14]>>16&1),N=z[15]>>16&1,z[14]&=65535,w(H,z,1-N)}for(I=0;I<16;I++)E[2*I]=H[I]&255,E[2*I+1]=H[I]>>8}function C(E,M){var I=new Uint8Array(32),g=new Uint8Array(32);return k(I,E),k(g,M),P(I,0,g,0)}function d(E){var M=new Uint8Array(32);return k(M,E),M[0]&1}function f(E,M){var I;for(I=0;I<16;I++)E[I]=M[2*I]+(M[2*I+1]<<8);E[15]&=32767}function x(E,M,I){for(var g=0;g<16;g++)E[g]=M[g]+I[g]}function D(E,M,I){for(var g=0;g<16;g++)E[g]=M[g]-I[g]}function O(E,M,I){var g,N,z=0,H=0,J=0,le=0,ae=0,re=0,ct=0,ve=0,Pe=0,Ce=0,De=0,Oe=0,Ie=0,Be=0,Ne=0,we=0,Ae=0,me=0,_e=0,Ee=0,xe=0,W=0,Y=0,se=0,ee=0,ie=0,pe=0,Fe=0,ht=0,yt=0,dt=0,L=I[0],xt=I[1],Mt=I[2],Pt=I[3],mt=I[4],St=I[5],Tt=I[6],ir=I[7],Rt=I[8],Yt=I[9],Zt=I[10],Xt=I[11],gr=I[12],Or=I[13],Dr=I[14],Ur=I[15];g=M[0],z+=g*L,H+=g*xt,J+=g*Mt,le+=g*Pt,ae+=g*mt,re+=g*St,ct+=g*Tt,ve+=g*ir,Pe+=g*Rt,Ce+=g*Yt,De+=g*Zt,Oe+=g*Xt,Ie+=g*gr,Be+=g*Or,Ne+=g*Dr,we+=g*Ur,g=M[1],H+=g*L,J+=g*xt,le+=g*Mt,ae+=g*Pt,re+=g*mt,ct+=g*St,ve+=g*Tt,Pe+=g*ir,Ce+=g*Rt,De+=g*Yt,Oe+=g*Zt,Ie+=g*Xt,Be+=g*gr,Ne+=g*Or,we+=g*Dr,Ae+=g*Ur,g=M[2],J+=g*L,le+=g*xt,ae+=g*Mt,re+=g*Pt,ct+=g*mt,ve+=g*St,Pe+=g*Tt,Ce+=g*ir,De+=g*Rt,Oe+=g*Yt,Ie+=g*Zt,Be+=g*Xt,Ne+=g*gr,we+=g*Or,Ae+=g*Dr,me+=g*Ur,g=M[3],le+=g*L,ae+=g*xt,re+=g*Mt,ct+=g*Pt,ve+=g*mt,Pe+=g*St,Ce+=g*Tt,De+=g*ir,Oe+=g*Rt,Ie+=g*Yt,Be+=g*Zt,Ne+=g*Xt,we+=g*gr,Ae+=g*Or,me+=g*Dr,_e+=g*Ur,g=M[4],ae+=g*L,re+=g*xt,ct+=g*Mt,ve+=g*Pt,Pe+=g*mt,Ce+=g*St,De+=g*Tt,Oe+=g*ir,Ie+=g*Rt,Be+=g*Yt,Ne+=g*Zt,we+=g*Xt,Ae+=g*gr,me+=g*Or,_e+=g*Dr,Ee+=g*Ur,g=M[5],re+=g*L,ct+=g*xt,ve+=g*Mt,Pe+=g*Pt,Ce+=g*mt,De+=g*St,Oe+=g*Tt,Ie+=g*ir,Be+=g*Rt,Ne+=g*Yt,we+=g*Zt,Ae+=g*Xt,me+=g*gr,_e+=g*Or,Ee+=g*Dr,xe+=g*Ur,g=M[6],ct+=g*L,ve+=g*xt,Pe+=g*Mt,Ce+=g*Pt,De+=g*mt,Oe+=g*St,Ie+=g*Tt,Be+=g*ir,Ne+=g*Rt,we+=g*Yt,Ae+=g*Zt,me+=g*Xt,_e+=g*gr,Ee+=g*Or,xe+=g*Dr,W+=g*Ur,g=M[7],ve+=g*L,Pe+=g*xt,Ce+=g*Mt,De+=g*Pt,Oe+=g*mt,Ie+=g*St,Be+=g*Tt,Ne+=g*ir,we+=g*Rt,Ae+=g*Yt,me+=g*Zt,_e+=g*Xt,Ee+=g*gr,xe+=g*Or,W+=g*Dr,Y+=g*Ur,g=M[8],Pe+=g*L,Ce+=g*xt,De+=g*Mt,Oe+=g*Pt,Ie+=g*mt,Be+=g*St,Ne+=g*Tt,we+=g*ir,Ae+=g*Rt,me+=g*Yt,_e+=g*Zt,Ee+=g*Xt,xe+=g*gr,W+=g*Or,Y+=g*Dr,se+=g*Ur,g=M[9],Ce+=g*L,De+=g*xt,Oe+=g*Mt,Ie+=g*Pt,Be+=g*mt,Ne+=g*St,we+=g*Tt,Ae+=g*ir,me+=g*Rt,_e+=g*Yt,Ee+=g*Zt,xe+=g*Xt,W+=g*gr,Y+=g*Or,se+=g*Dr,ee+=g*Ur,g=M[10],De+=g*L,Oe+=g*xt,Ie+=g*Mt,Be+=g*Pt,Ne+=g*mt,we+=g*St,Ae+=g*Tt,me+=g*ir,_e+=g*Rt,Ee+=g*Yt,xe+=g*Zt,W+=g*Xt,Y+=g*gr,se+=g*Or,ee+=g*Dr,ie+=g*Ur,g=M[11],Oe+=g*L,Ie+=g*xt,Be+=g*Mt,Ne+=g*Pt,we+=g*mt,Ae+=g*St,me+=g*Tt,_e+=g*ir,Ee+=g*Rt,xe+=g*Yt,W+=g*Zt,Y+=g*Xt,se+=g*gr,ee+=g*Or,ie+=g*Dr,pe+=g*Ur,g=M[12],Ie+=g*L,Be+=g*xt,Ne+=g*Mt,we+=g*Pt,Ae+=g*mt,me+=g*St,_e+=g*Tt,Ee+=g*ir,xe+=g*Rt,W+=g*Yt,Y+=g*Zt,se+=g*Xt,ee+=g*gr,ie+=g*Or,pe+=g*Dr,Fe+=g*Ur,g=M[13],Be+=g*L,Ne+=g*xt,we+=g*Mt,Ae+=g*Pt,me+=g*mt,_e+=g*St,Ee+=g*Tt,xe+=g*ir,W+=g*Rt,Y+=g*Yt,se+=g*Zt,ee+=g*Xt,ie+=g*gr,pe+=g*Or,Fe+=g*Dr,ht+=g*Ur,g=M[14],Ne+=g*L,we+=g*xt,Ae+=g*Mt,me+=g*Pt,_e+=g*mt,Ee+=g*St,xe+=g*Tt,W+=g*ir,Y+=g*Rt,se+=g*Yt,ee+=g*Zt,ie+=g*Xt,pe+=g*gr,Fe+=g*Or,ht+=g*Dr,yt+=g*Ur,g=M[15],we+=g*L,Ae+=g*xt,me+=g*Mt,_e+=g*Pt,Ee+=g*mt,xe+=g*St,W+=g*Tt,Y+=g*ir,se+=g*Rt,ee+=g*Yt,ie+=g*Zt,pe+=g*Xt,Fe+=g*gr,ht+=g*Or,yt+=g*Dr,dt+=g*Ur,z+=38*Ae,H+=38*me,J+=38*_e,le+=38*Ee,ae+=38*xe,re+=38*W,ct+=38*Y,ve+=38*se,Pe+=38*ee,Ce+=38*ie,De+=38*pe,Oe+=38*Fe,Ie+=38*ht,Be+=38*yt,Ne+=38*dt,N=1,g=z+N+65535,N=Math.floor(g/65536),z=g-N*65536,g=H+N+65535,N=Math.floor(g/65536),H=g-N*65536,g=J+N+65535,N=Math.floor(g/65536),J=g-N*65536,g=le+N+65535,N=Math.floor(g/65536),le=g-N*65536,g=ae+N+65535,N=Math.floor(g/65536),ae=g-N*65536,g=re+N+65535,N=Math.floor(g/65536),re=g-N*65536,g=ct+N+65535,N=Math.floor(g/65536),ct=g-N*65536,g=ve+N+65535,N=Math.floor(g/65536),ve=g-N*65536,g=Pe+N+65535,N=Math.floor(g/65536),Pe=g-N*65536,g=Ce+N+65535,N=Math.floor(g/65536),Ce=g-N*65536,g=De+N+65535,N=Math.floor(g/65536),De=g-N*65536,g=Oe+N+65535,N=Math.floor(g/65536),Oe=g-N*65536,g=Ie+N+65535,N=Math.floor(g/65536),Ie=g-N*65536,g=Be+N+65535,N=Math.floor(g/65536),Be=g-N*65536,g=Ne+N+65535,N=Math.floor(g/65536),Ne=g-N*65536,g=we+N+65535,N=Math.floor(g/65536),we=g-N*65536,z+=N-1+37*(N-1),N=1,g=z+N+65535,N=Math.floor(g/65536),z=g-N*65536,g=H+N+65535,N=Math.floor(g/65536),H=g-N*65536,g=J+N+65535,N=Math.floor(g/65536),J=g-N*65536,g=le+N+65535,N=Math.floor(g/65536),le=g-N*65536,g=ae+N+65535,N=Math.floor(g/65536),ae=g-N*65536,g=re+N+65535,N=Math.floor(g/65536),re=g-N*65536,g=ct+N+65535,N=Math.floor(g/65536),ct=g-N*65536,g=ve+N+65535,N=Math.floor(g/65536),ve=g-N*65536,g=Pe+N+65535,N=Math.floor(g/65536),Pe=g-N*65536,g=Ce+N+65535,N=Math.floor(g/65536),Ce=g-N*65536,g=De+N+65535,N=Math.floor(g/65536),De=g-N*65536,g=Oe+N+65535,N=Math.floor(g/65536),Oe=g-N*65536,g=Ie+N+65535,N=Math.floor(g/65536),Ie=g-N*65536,g=Be+N+65535,N=Math.floor(g/65536),Be=g-N*65536,g=Ne+N+65535,N=Math.floor(g/65536),Ne=g-N*65536,g=we+N+65535,N=Math.floor(g/65536),we=g-N*65536,z+=N-1+37*(N-1),E[0]=z,E[1]=H,E[2]=J,E[3]=le,E[4]=ae,E[5]=re,E[6]=ct,E[7]=ve,E[8]=Pe,E[9]=Ce,E[10]=De,E[11]=Oe,E[12]=Ie,E[13]=Be,E[14]=Ne,E[15]=we}function G(E,M){O(E,M,M)}function ye(E,M){var I=r(),g;for(g=0;g<16;g++)I[g]=M[g];for(g=253;g>=0;g--)G(I,I),g!==2&&g!==4&&O(I,I,M);for(g=0;g<16;g++)E[g]=I[g]}function fe(E,M){var I=r(),g;for(g=0;g<16;g++)I[g]=M[g];for(g=250;g>=0;g--)G(I,I),g!==1&&O(I,I,M);for(g=0;g<16;g++)E[g]=I[g]}function oe(E,M,I){var g=new Uint8Array(32),N=new Float64Array(80),z,H,J=r(),le=r(),ae=r(),re=r(),ct=r(),ve=r();for(H=0;H<31;H++)g[H]=M[H];for(g[31]=M[31]&127|64,g[0]&=248,f(N,I),H=0;H<16;H++)le[H]=N[H],re[H]=J[H]=ae[H]=0;for(J[0]=re[0]=1,H=254;H>=0;--H)z=g[H>>>3]>>>(H&7)&1,w(J,le,z),w(ae,re,z),x(ct,J,ae),D(J,J,ae),x(ae,le,re),D(le,le,re),G(re,ct),G(ve,J),O(J,ae,J),O(ae,le,ct),x(ct,J,ae),D(J,J,ae),G(le,J),D(ae,re,ve),O(J,ae,u),x(J,J,re),O(ae,ae,J),O(J,re,ve),O(re,le,N),G(le,ct),w(J,le,z),w(ae,re,z);for(H=0;H<16;H++)N[H+16]=J[H],N[H+32]=ae[H],N[H+48]=le[H],N[H+64]=re[H];var Pe=N.subarray(32),Ce=N.subarray(16);return ye(Pe,Pe),O(Ce,Ce,Pe),k(E,Ce),0}function ut(E,M){return oe(E,M,s)}function Se(E,M){return n(M,32),ut(E,M)}function ke(E,M,I){var g=new Uint8Array(32);return oe(g,I,M),U(E,i,g,K)}var pr=a,qe=l;function Ze(E,M,I,g,N,z){var H=new Uint8Array(32);return ke(H,N,z),pr(E,M,I,g,H)}function lr(E,M,I,g,N,z){var H=new Uint8Array(32);return ke(H,N,z),qe(E,M,I,g,H)}var rt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function nt(E,M,I,g){for(var N=new Int32Array(16),z=new Int32Array(16),H,J,le,ae,re,ct,ve,Pe,Ce,De,Oe,Ie,Be,Ne,we,Ae,me,_e,Ee,xe,W,Y,se,ee,ie,pe,Fe=E[0],ht=E[1],yt=E[2],dt=E[3],L=E[4],xt=E[5],Mt=E[6],Pt=E[7],mt=M[0],St=M[1],Tt=M[2],ir=M[3],Rt=M[4],Yt=M[5],Zt=M[6],Xt=M[7],gr=0;g>=128;){for(Ee=0;Ee<16;Ee++)xe=8*Ee+gr,N[Ee]=I[xe+0]<<24|I[xe+1]<<16|I[xe+2]<<8|I[xe+3],z[Ee]=I[xe+4]<<24|I[xe+5]<<16|I[xe+6]<<8|I[xe+7];for(Ee=0;Ee<80;Ee++)if(H=Fe,J=ht,le=yt,ae=dt,re=L,ct=xt,ve=Mt,Pe=Pt,Ce=mt,De=St,Oe=Tt,Ie=ir,Be=Rt,Ne=Yt,we=Zt,Ae=Xt,W=Pt,Y=Xt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=(L>>>14|Rt<<32-14)^(L>>>18|Rt<<32-18)^(Rt>>>41-32|L<<32-(41-32)),Y=(Rt>>>14|L<<32-14)^(Rt>>>18|L<<32-18)^(L>>>41-32|Rt<<32-(41-32)),se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,W=L&xt^~L&Mt,Y=Rt&Yt^~Rt&Zt,se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,W=rt[Ee*2],Y=rt[Ee*2+1],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,W=N[Ee%16],Y=z[Ee%16],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,me=ie&65535|pe<<16,_e=se&65535|ee<<16,W=me,Y=_e,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=(Fe>>>28|mt<<32-28)^(mt>>>34-32|Fe<<32-(34-32))^(mt>>>39-32|Fe<<32-(39-32)),Y=(mt>>>28|Fe<<32-28)^(Fe>>>34-32|mt<<32-(34-32))^(Fe>>>39-32|mt<<32-(39-32)),se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,W=Fe&ht^Fe&yt^ht&yt,Y=mt&St^mt&Tt^St&Tt,se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,Pe=ie&65535|pe<<16,Ae=se&65535|ee<<16,W=ae,Y=Ie,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=me,Y=_e,se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,ae=ie&65535|pe<<16,Ie=se&65535|ee<<16,ht=H,yt=J,dt=le,L=ae,xt=re,Mt=ct,Pt=ve,Fe=Pe,St=Ce,Tt=De,ir=Oe,Rt=Ie,Yt=Be,Zt=Ne,Xt=we,mt=Ae,Ee%16===15)for(xe=0;xe<16;xe++)W=N[xe],Y=z[xe],se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=N[(xe+9)%16],Y=z[(xe+9)%16],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,me=N[(xe+1)%16],_e=z[(xe+1)%16],W=(me>>>1|_e<<32-1)^(me>>>8|_e<<32-8)^me>>>7,Y=(_e>>>1|me<<32-1)^(_e>>>8|me<<32-8)^(_e>>>7|me<<32-7),se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,me=N[(xe+14)%16],_e=z[(xe+14)%16],W=(me>>>19|_e<<32-19)^(_e>>>61-32|me<<32-(61-32))^me>>>6,Y=(_e>>>19|me<<32-19)^(me>>>61-32|_e<<32-(61-32))^(_e>>>6|me<<32-6),se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,N[xe]=ie&65535|pe<<16,z[xe]=se&65535|ee<<16;W=Fe,Y=mt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[0],Y=M[0],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[0]=Fe=ie&65535|pe<<16,M[0]=mt=se&65535|ee<<16,W=ht,Y=St,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[1],Y=M[1],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[1]=ht=ie&65535|pe<<16,M[1]=St=se&65535|ee<<16,W=yt,Y=Tt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[2],Y=M[2],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[2]=yt=ie&65535|pe<<16,M[2]=Tt=se&65535|ee<<16,W=dt,Y=ir,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[3],Y=M[3],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[3]=dt=ie&65535|pe<<16,M[3]=ir=se&65535|ee<<16,W=L,Y=Rt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[4],Y=M[4],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[4]=L=ie&65535|pe<<16,M[4]=Rt=se&65535|ee<<16,W=xt,Y=Yt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[5],Y=M[5],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[5]=xt=ie&65535|pe<<16,M[5]=Yt=se&65535|ee<<16,W=Mt,Y=Zt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[6],Y=M[6],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[6]=Mt=ie&65535|pe<<16,M[6]=Zt=se&65535|ee<<16,W=Pt,Y=Xt,se=Y&65535,ee=Y>>>16,ie=W&65535,pe=W>>>16,W=E[7],Y=M[7],se+=Y&65535,ee+=Y>>>16,ie+=W&65535,pe+=W>>>16,ee+=se>>>16,ie+=ee>>>16,pe+=ie>>>16,E[7]=Pt=ie&65535|pe<<16,M[7]=Xt=se&65535|ee<<16,gr+=128,g-=128}return g}function Br(E,M,I){var g=new Int32Array(8),N=new Int32Array(8),z=new Uint8Array(256),H,J=I;for(g[0]=1779033703,g[1]=3144134277,g[2]=1013904242,g[3]=2773480762,g[4]=1359893119,g[5]=2600822924,g[6]=528734635,g[7]=1541459225,N[0]=4089235720,N[1]=2227873595,N[2]=4271175723,N[3]=1595750129,N[4]=2917565137,N[5]=725511199,N[6]=4215389547,N[7]=327033209,nt(g,N,M,I),I%=128,H=0;H<I;H++)z[H]=M[J-I+H];for(z[I]=128,I=256-128*(I<112?1:0),z[I-9]=0,B(z,I-8,J/536870912|0,J<<3),nt(g,N,z,I),H=0;H<8;H++)B(E,8*H,g[H],N[H]);return 0}function ze(E,M){var I=r(),g=r(),N=r(),z=r(),H=r(),J=r(),le=r(),ae=r(),re=r();D(I,E[1],E[0]),D(re,M[1],M[0]),O(I,I,re),x(g,E[0],E[1]),x(re,M[0],M[1]),O(g,g,re),O(N,E[3],M[3]),O(N,N,p),O(z,E[2],M[2]),x(z,z,z),D(H,g,I),D(J,z,N),x(le,z,N),x(ae,g,I),O(E[0],H,J),O(E[1],ae,le),O(E[2],le,J),O(E[3],H,ae)}function it(E,M,I){var g;for(g=0;g<4;g++)w(E[g],M[g],I)}function _n(E,M){var I=r(),g=r(),N=r();ye(N,M[2]),O(I,M[0],N),O(g,M[1],N),k(E,g),E[31]^=d(I)<<7}function Xe(E,M,I){var g,N;for(y(E[0],o),y(E[1],c),y(E[2],c),y(E[3],o),N=255;N>=0;--N)g=I[N/8|0]>>(N&7)&1,it(E,M,g),ze(M,E),ze(E,E),it(E,M,g)}function Ge(E,M){var I=[r(),r(),r(),r()];y(I[0],m),y(I[1],_),y(I[2],c),O(I[3],m,_),Xe(E,I,M)}function En(E,M,I){var g=new Uint8Array(64),N=[r(),r(),r(),r()],z;for(I||n(M,32),Br(g,M,32),g[0]&=248,g[31]&=127,g[31]|=64,Ge(N,g),_n(E,N),z=0;z<32;z++)M[z+32]=E[z];return 0}var Ve=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Qe(E,M){var I,g,N,z;for(g=63;g>=32;--g){for(I=0,N=g-32,z=g-12;N<z;++N)M[N]+=I-16*M[g]*Ve[N-(g-32)],I=Math.floor((M[N]+128)/256),M[N]-=I*256;M[N]+=I,M[g]=0}for(I=0,N=0;N<32;N++)M[N]+=I-(M[31]>>4)*Ve[N],I=M[N]>>8,M[N]&=255;for(N=0;N<32;N++)M[N]-=I*Ve[N];for(g=0;g<32;g++)M[g+1]+=M[g]>>8,E[g]=M[g]&255}function cn(E){var M=new Float64Array(64),I;for(I=0;I<64;I++)M[I]=E[I];for(I=0;I<64;I++)E[I]=0;Qe(E,M)}function et(E,M,I,g){var N=new Uint8Array(64),z=new Uint8Array(64),H=new Uint8Array(64),J,le,ae=new Float64Array(64),re=[r(),r(),r(),r()];Br(N,g,32),N[0]&=248,N[31]&=127,N[31]|=64;var ct=I+64;for(J=0;J<I;J++)E[64+J]=M[J];for(J=0;J<32;J++)E[32+J]=N[32+J];for(Br(H,E.subarray(32),I+32),cn(H),Ge(re,H),_n(E,re),J=32;J<64;J++)E[J]=g[J];for(Br(z,E,I+64),cn(z),J=0;J<64;J++)ae[J]=0;for(J=0;J<32;J++)ae[J]=H[J];for(J=0;J<32;J++)for(le=0;le<32;le++)ae[J+le]+=z[J]*N[le];return Qe(E.subarray(32),ae),ct}function st(E,M){var I=r(),g=r(),N=r(),z=r(),H=r(),J=r(),le=r();return y(E[2],c),f(E[1],M),G(N,E[1]),O(z,N,h),D(N,N,E[2]),x(z,E[2],z),G(H,z),G(J,H),O(le,J,H),O(I,le,N),O(I,I,z),fe(I,I),O(I,I,N),O(I,I,z),O(I,I,z),O(E[0],I,z),G(g,E[0]),O(g,g,z),C(g,N)&&O(E[0],E[0],S),G(g,E[0]),O(g,g,z),C(g,N)?-1:(d(E[0])===M[31]>>7&&D(E[0],o,E[0]),O(E[3],E[0],E[1]),0)}function fn(E,M,I,g){var N,z=new Uint8Array(32),H=new Uint8Array(64),J=[r(),r(),r(),r()],le=[r(),r(),r(),r()];if(I<64||st(le,g))return-1;for(N=0;N<I;N++)E[N]=M[N];for(N=0;N<32;N++)E[N+32]=g[N];if(Br(H,E,I),cn(H),Xe(J,le,H),Ge(le,M.subarray(32)),ze(J,le),_n(z,J),I-=64,P(M,0,z,0)){for(N=0;N<I;N++)E[N]=0;return-1}for(N=0;N<I;N++)E[N]=M[N+64];return I}var Je=32,He=24,Hr=32,Le=16,$e=32,Zr=32,je=32,Ke=32,un=32,tt=He,ot=Hr,Un=Le,Re=64,Ue=32,Rr=64,We=32,Ye=64;e.lowlevel={crypto_core_hsalsa20:U,crypto_stream_xor:be,crypto_stream:ue,crypto_stream_salsa20_xor:Z,crypto_stream_salsa20:Q,crypto_onetimeauth:te,crypto_onetimeauth_verify:b,crypto_verify_16:A,crypto_verify_32:P,crypto_secretbox:a,crypto_secretbox_open:l,crypto_scalarmult:oe,crypto_scalarmult_base:ut,crypto_box_beforenm:ke,crypto_box_afternm:pr,crypto_box:Ze,crypto_box_open:lr,crypto_box_keypair:Se,crypto_hash:Br,crypto_sign:et,crypto_sign_keypair:En,crypto_sign_open:fn,crypto_secretbox_KEYBYTES:Je,crypto_secretbox_NONCEBYTES:He,crypto_secretbox_ZEROBYTES:Hr,crypto_secretbox_BOXZEROBYTES:Le,crypto_scalarmult_BYTES:$e,crypto_scalarmult_SCALARBYTES:Zr,crypto_box_PUBLICKEYBYTES:je,crypto_box_SECRETKEYBYTES:Ke,crypto_box_BEFORENMBYTES:un,crypto_box_NONCEBYTES:tt,crypto_box_ZEROBYTES:ot,crypto_box_BOXZEROBYTES:Un,crypto_sign_BYTES:Re,crypto_sign_PUBLICKEYBYTES:Ue,crypto_sign_SECRETKEYBYTES:Rr,crypto_sign_SEEDBYTES:We,crypto_hash_BYTES:Ye,gf:r,D:h,L:Ve,pack25519:k,unpack25519:f,M:O,A:x,S:G,Z:D,pow2523:fe,add:ze,set25519:y,modL:Qe,scalarmult:Xe,scalarbase:Ge};function An(E,M){if(E.length!==Je)throw new Error("bad key size");if(M.length!==He)throw new Error("bad nonce size")}function at(E,M){if(E.length!==je)throw new Error("bad public key size");if(M.length!==Ke)throw new Error("bad secret key size")}function Me(){for(var E=0;E<arguments.length;E++)if(!(arguments[E]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Sn(E){for(var M=0;M<E.length;M++)E[M]=0}e.randomBytes=function(E){var M=new Uint8Array(E);return n(M,E),M},e.secretbox=function(E,M,I){Me(E,M,I),An(I,M);for(var g=new Uint8Array(Hr+E.length),N=new Uint8Array(g.length),z=0;z<E.length;z++)g[z+Hr]=E[z];return a(N,g,g.length,M,I),N.subarray(Le)},e.secretbox.open=function(E,M,I){Me(E,M,I),An(I,M);for(var g=new Uint8Array(Le+E.length),N=new Uint8Array(g.length),z=0;z<E.length;z++)g[z+Le]=E[z];return g.length<32||l(N,g,g.length,M,I)!==0?null:N.subarray(Hr)},e.secretbox.keyLength=Je,e.secretbox.nonceLength=He,e.secretbox.overheadLength=Le,e.scalarMult=function(E,M){if(Me(E,M),E.length!==Zr)throw new Error("bad n size");if(M.length!==$e)throw new Error("bad p size");var I=new Uint8Array($e);return oe(I,E,M),I},e.scalarMult.base=function(E){if(Me(E),E.length!==Zr)throw new Error("bad n size");var M=new Uint8Array($e);return ut(M,E),M},e.scalarMult.scalarLength=Zr,e.scalarMult.groupElementLength=$e,e.box=function(E,M,I,g){var N=e.box.before(I,g);return e.secretbox(E,M,N)},e.box.before=function(E,M){Me(E,M),at(E,M);var I=new Uint8Array(un);return ke(I,E,M),I},e.box.after=e.secretbox,e.box.open=function(E,M,I,g){var N=e.box.before(I,g);return e.secretbox.open(E,M,N)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var E=new Uint8Array(je),M=new Uint8Array(Ke);return Se(E,M),{publicKey:E,secretKey:M}},e.box.keyPair.fromSecretKey=function(E){if(Me(E),E.length!==Ke)throw new Error("bad secret key size");var M=new Uint8Array(je);return ut(M,E),{publicKey:M,secretKey:new Uint8Array(E)}},e.box.publicKeyLength=je,e.box.secretKeyLength=Ke,e.box.sharedKeyLength=un,e.box.nonceLength=tt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(E,M){if(Me(E,M),M.length!==Rr)throw new Error("bad secret key size");var I=new Uint8Array(Re+E.length);return et(I,E,E.length,M),I},e.sign.open=function(E,M){if(Me(E,M),M.length!==Ue)throw new Error("bad public key size");var I=new Uint8Array(E.length),g=fn(I,E,E.length,M);if(g<0)return null;for(var N=new Uint8Array(g),z=0;z<N.length;z++)N[z]=I[z];return N},e.sign.detached=function(E,M){for(var I=e.sign(E,M),g=new Uint8Array(Re),N=0;N<g.length;N++)g[N]=I[N];return g},e.sign.detached.verify=function(E,M,I){if(Me(E,M,I),M.length!==Re)throw new Error("bad signature size");if(I.length!==Ue)throw new Error("bad public key size");var g=new Uint8Array(Re+E.length),N=new Uint8Array(Re+E.length),z;for(z=0;z<Re;z++)g[z]=M[z];for(z=0;z<E.length;z++)g[z+Re]=E[z];return fn(N,g,g.length,I)>=0},e.sign.keyPair=function(){var E=new Uint8Array(Ue),M=new Uint8Array(Rr);return En(E,M),{publicKey:E,secretKey:M}},e.sign.keyPair.fromSecretKey=function(E){if(Me(E),E.length!==Rr)throw new Error("bad secret key size");for(var M=new Uint8Array(Ue),I=0;I<M.length;I++)M[I]=E[32+I];return{publicKey:M,secretKey:new Uint8Array(E)}},e.sign.keyPair.fromSeed=function(E){if(Me(E),E.length!==We)throw new Error("bad seed size");for(var M=new Uint8Array(Ue),I=new Uint8Array(Rr),g=0;g<32;g++)I[g]=E[g];return En(M,I,!0),{publicKey:M,secretKey:I}},e.sign.publicKeyLength=Ue,e.sign.secretKeyLength=Rr,e.sign.seedLength=We,e.sign.signatureLength=Re,e.hash=function(E){Me(E);var M=new Uint8Array(Ye);return Br(M,E,E.length),M},e.hash.hashLength=Ye,e.verify=function(E,M){return Me(E,M),E.length===0||M.length===0||E.length!==M.length?!1:T(E,0,M,0,E.length)===0},e.setPRNG=function(E){n=E},function(){var E=typeof self<"u"?self.crypto||self.msCrypto:null;if(E&&E.getRandomValues){var M=65536;e.setPRNG(function(I,g){var N,z=new Uint8Array(g);for(N=0;N<g;N+=M)E.getRandomValues(z.subarray(N,N+Math.min(g-N,M)));for(N=0;N<g;N++)I[N]=z[N];Sn(z)})}else typeof Cx<"u"&&(E=is,E&&E.randomBytes&&e.setPRNG(function(I,g){var N,z=E.randomBytes(g);for(N=0;N<g;N++)I[N]=z[N];Sn(z)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(ix);var k0={},Jt={},sx={exports:{}};(function(t){(function(e,r){function n(b,a){if(!b)throw new Error(a||"Assertion failed")}function i(b,a){b.super_=a;var l=function(){};l.prototype=a.prototype,b.prototype=new l,b.prototype.constructor=b}function s(b,a,l){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(b||0,a||10,l||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,l){return a.cmp(l)>0?a:l},s.min=function(a,l){return a.cmp(l)<0?a:l},s.prototype._init=function(a,l,y){if(typeof a=="number")return this._initNumber(a,l,y);if(typeof a=="object")return this._initArray(a,l,y);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(l===16?this._parseHex(a,v,y):(this._parseBase(a,l,v),y==="le"&&this._initArray(this.toArray(),l,y)))},s.prototype._initNumber=function(a,l,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},s.prototype._initArray=function(a,l,y){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,k,C=0;if(y==="be")for(v=a.length-1,w=0;v>=0;v-=3)k=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[w]|=k<<C&67108863,this.words[w+1]=k>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(y==="le")for(v=0,w=0;v<a.length;v+=3)k=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[w]|=k<<C&67108863,this.words[w+1]=k>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this._strip()};function c(b,a){var l=b.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+b)}function u(b,a,l){var y=c(b,l);return l-1>=a&&(y|=c(b,l-1)<<4),y}s.prototype._parseHex=function(a,l,y){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,k=0,C;if(y==="be")for(v=a.length-1;v>=l;v-=2)C=u(a,l,v)<<w,this.words[k]|=C&67108863,w>=18?(w-=18,k+=1,this.words[k]|=C>>>26):w+=8;else{var d=a.length-l;for(v=d%2===0?l+1:l;v<a.length;v+=2)C=u(a,l,v)<<w,this.words[k]|=C&67108863,w>=18?(w-=18,k+=1,this.words[k]|=C>>>26):w+=8}this._strip()};function h(b,a,l,y){for(var v=0,w=0,k=Math.min(b.length,l),C=a;C<k;C++){var d=b.charCodeAt(C)-48;v*=y,d>=49?w=d-49+10:d>=17?w=d-17+10:w=d,n(d>=0&&w<y,"Invalid character"),v+=w}return v}s.prototype._parseBase=function(a,l,y){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=l)v++;v--,w=w/l|0;for(var k=a.length-y,C=k%v,d=Math.min(k,k-C)+y,f=0,x=y;x<d;x+=v)f=h(a,x,x+v,l),this.imuln(w),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(C!==0){var D=1;for(f=h(a,x,a.length,l),x=0;x<C;x++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function p(b,a){b.words=a.words,b.length=a.length,b.negative=a.negative,b.red=a.red}if(s.prototype._move=function(a){p(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,l){a=a||10,l=l|0||1;var y;if(a===16||a==="hex"){y="";for(var v=0,w=0,k=0;k<this.length;k++){var C=this.words[k],d=((C<<v|w)&16777215).toString(16);w=C>>>24-v&16777215,v+=2,v>=26&&(v-=26,k--),w!==0||k!==this.length-1?y=_[6-d.length]+d+y:y=d+y}for(w!==0&&(y=w.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(a===(a|0)&&a>=2&&a<=36){var f=S[a],x=B[a];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var O=D.modrn(x).toString(a);D=D.idivn(x),D.isZero()?y=O+y:y=_[f-O.length]+O+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),s.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var T=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};s.prototype.toArrayLike=function(a,l,y){this._strip();var v=this.byteLength(),w=y||Math.max(1,v);n(v<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var k=T(a,w),C=l==="le"?"LE":"BE";return this["_toArrayLike"+C](k,v),k},s.prototype._toArrayLikeLE=function(a,l){for(var y=0,v=0,w=0,k=0;w<this.length;w++){var C=this.words[w]<<k|v;a[y++]=C&255,y<a.length&&(a[y++]=C>>8&255),y<a.length&&(a[y++]=C>>16&255),k===6?(y<a.length&&(a[y++]=C>>24&255),v=0,k=0):(v=C>>>24,k+=2)}if(y<a.length)for(a[y++]=v;y<a.length;)a[y++]=0},s.prototype._toArrayLikeBE=function(a,l){for(var y=a.length-1,v=0,w=0,k=0;w<this.length;w++){var C=this.words[w]<<k|v;a[y--]=C&255,y>=0&&(a[y--]=C>>8&255),y>=0&&(a[y--]=C>>16&255),k===6?(y>=0&&(a[y--]=C>>24&255),v=0,k=0):(v=C>>>24,k+=2)}if(y>=0)for(a[y--]=v;y>=0;)a[y--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var l=a,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},s.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,y=0;return(l&8191)===0&&(y+=13,l>>>=13),(l&127)===0&&(y+=7,l>>>=7),(l&15)===0&&(y+=4,l>>>=4),(l&3)===0&&(y+=2,l>>>=2),(l&1)===0&&y++,y},s.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function A(b){for(var a=new Array(b.bitLength()),l=0;l<a.length;l++){var y=l/26|0,v=l%26;a[l]=b.words[y]>>>v&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(a+=y,y!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=l.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var l,y;this.length>a.length?(l=this,y=a):(l=a,y=this);for(var v=0;v<y.length;v++)this.words[v]=l.words[v]^y.words[v];if(this!==l)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=l.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,y=a%26;this._expand(l),y>0&&l--;for(var v=0;v<l;v++)this.words[v]=~this.words[v]&67108863;return y>0&&(this.words[v]=~this.words[v]&67108863>>26-y),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var y=a/26|0,v=a%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<v:this.words[y]=this.words[y]&~(1<<v),this._strip()},s.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var y,v;this.length>a.length?(y=this,v=a):(y=a,v=this);for(var w=0,k=0;k<v.length;k++)l=(y.words[k]|0)+(v.words[k]|0)+w,this.words[k]=l&67108863,w=l>>>26;for(;w!==0&&k<y.length;k++)l=(y.words[k]|0)+w,this.words[k]=l&67108863,w=l>>>26;if(this.length=y.length,w!==0)this.words[this.length]=w,this.length++;else if(y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this},s.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var y=this.cmp(a);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;y>0?(v=this,w=a):(v=a,w=this);for(var k=0,C=0;C<w.length;C++)l=(v.words[C]|0)-(w.words[C]|0)+k,k=l>>26,this.words[C]=l&67108863;for(;k!==0&&C<v.length;C++)l=(v.words[C]|0)+k,k=l>>26,this.words[C]=l&67108863;if(k===0&&C<v.length&&v!==this)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=Math.max(this.length,C),v!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function P(b,a,l){l.negative=a.negative^b.negative;var y=b.length+a.length|0;l.length=y,y=y-1|0;var v=b.words[0]|0,w=a.words[0]|0,k=v*w,C=k&67108863,d=k/67108864|0;l.words[0]=C;for(var f=1;f<y;f++){for(var x=d>>>26,D=d&67108863,O=Math.min(f,a.length-1),G=Math.max(0,f-b.length+1);G<=O;G++){var ye=f-G|0;v=b.words[ye]|0,w=a.words[G]|0,k=v*w+D,x+=k/67108864|0,D=k&67108863}l.words[f]=D|0,d=x|0}return d!==0?l.words[f]=d|0:l.length--,l._strip()}var R=function(a,l,y){var v=a.words,w=l.words,k=y.words,C=0,d,f,x,D=v[0]|0,O=D&8191,G=D>>>13,ye=v[1]|0,fe=ye&8191,oe=ye>>>13,ut=v[2]|0,Se=ut&8191,ke=ut>>>13,pr=v[3]|0,qe=pr&8191,Ze=pr>>>13,lr=v[4]|0,rt=lr&8191,nt=lr>>>13,Br=v[5]|0,ze=Br&8191,it=Br>>>13,_n=v[6]|0,Xe=_n&8191,Ge=_n>>>13,En=v[7]|0,Ve=En&8191,Qe=En>>>13,cn=v[8]|0,et=cn&8191,st=cn>>>13,fn=v[9]|0,Je=fn&8191,He=fn>>>13,Hr=w[0]|0,Le=Hr&8191,$e=Hr>>>13,Zr=w[1]|0,je=Zr&8191,Ke=Zr>>>13,un=w[2]|0,tt=un&8191,ot=un>>>13,Un=w[3]|0,Re=Un&8191,Ue=Un>>>13,Rr=w[4]|0,We=Rr&8191,Ye=Rr>>>13,An=w[5]|0,at=An&8191,Me=An>>>13,Sn=w[6]|0,E=Sn&8191,M=Sn>>>13,I=w[7]|0,g=I&8191,N=I>>>13,z=w[8]|0,H=z&8191,J=z>>>13,le=w[9]|0,ae=le&8191,re=le>>>13;y.negative=a.negative^l.negative,y.length=19,d=Math.imul(O,Le),f=Math.imul(O,$e),f=f+Math.imul(G,Le)|0,x=Math.imul(G,$e);var ct=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(fe,Le),f=Math.imul(fe,$e),f=f+Math.imul(oe,Le)|0,x=Math.imul(oe,$e),d=d+Math.imul(O,je)|0,f=f+Math.imul(O,Ke)|0,f=f+Math.imul(G,je)|0,x=x+Math.imul(G,Ke)|0;var ve=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ve>>>26)|0,ve&=67108863,d=Math.imul(Se,Le),f=Math.imul(Se,$e),f=f+Math.imul(ke,Le)|0,x=Math.imul(ke,$e),d=d+Math.imul(fe,je)|0,f=f+Math.imul(fe,Ke)|0,f=f+Math.imul(oe,je)|0,x=x+Math.imul(oe,Ke)|0,d=d+Math.imul(O,tt)|0,f=f+Math.imul(O,ot)|0,f=f+Math.imul(G,tt)|0,x=x+Math.imul(G,ot)|0;var Pe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,d=Math.imul(qe,Le),f=Math.imul(qe,$e),f=f+Math.imul(Ze,Le)|0,x=Math.imul(Ze,$e),d=d+Math.imul(Se,je)|0,f=f+Math.imul(Se,Ke)|0,f=f+Math.imul(ke,je)|0,x=x+Math.imul(ke,Ke)|0,d=d+Math.imul(fe,tt)|0,f=f+Math.imul(fe,ot)|0,f=f+Math.imul(oe,tt)|0,x=x+Math.imul(oe,ot)|0,d=d+Math.imul(O,Re)|0,f=f+Math.imul(O,Ue)|0,f=f+Math.imul(G,Re)|0,x=x+Math.imul(G,Ue)|0;var Ce=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,d=Math.imul(rt,Le),f=Math.imul(rt,$e),f=f+Math.imul(nt,Le)|0,x=Math.imul(nt,$e),d=d+Math.imul(qe,je)|0,f=f+Math.imul(qe,Ke)|0,f=f+Math.imul(Ze,je)|0,x=x+Math.imul(Ze,Ke)|0,d=d+Math.imul(Se,tt)|0,f=f+Math.imul(Se,ot)|0,f=f+Math.imul(ke,tt)|0,x=x+Math.imul(ke,ot)|0,d=d+Math.imul(fe,Re)|0,f=f+Math.imul(fe,Ue)|0,f=f+Math.imul(oe,Re)|0,x=x+Math.imul(oe,Ue)|0,d=d+Math.imul(O,We)|0,f=f+Math.imul(O,Ye)|0,f=f+Math.imul(G,We)|0,x=x+Math.imul(G,Ye)|0;var De=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(De>>>26)|0,De&=67108863,d=Math.imul(ze,Le),f=Math.imul(ze,$e),f=f+Math.imul(it,Le)|0,x=Math.imul(it,$e),d=d+Math.imul(rt,je)|0,f=f+Math.imul(rt,Ke)|0,f=f+Math.imul(nt,je)|0,x=x+Math.imul(nt,Ke)|0,d=d+Math.imul(qe,tt)|0,f=f+Math.imul(qe,ot)|0,f=f+Math.imul(Ze,tt)|0,x=x+Math.imul(Ze,ot)|0,d=d+Math.imul(Se,Re)|0,f=f+Math.imul(Se,Ue)|0,f=f+Math.imul(ke,Re)|0,x=x+Math.imul(ke,Ue)|0,d=d+Math.imul(fe,We)|0,f=f+Math.imul(fe,Ye)|0,f=f+Math.imul(oe,We)|0,x=x+Math.imul(oe,Ye)|0,d=d+Math.imul(O,at)|0,f=f+Math.imul(O,Me)|0,f=f+Math.imul(G,at)|0,x=x+Math.imul(G,Me)|0;var Oe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,d=Math.imul(Xe,Le),f=Math.imul(Xe,$e),f=f+Math.imul(Ge,Le)|0,x=Math.imul(Ge,$e),d=d+Math.imul(ze,je)|0,f=f+Math.imul(ze,Ke)|0,f=f+Math.imul(it,je)|0,x=x+Math.imul(it,Ke)|0,d=d+Math.imul(rt,tt)|0,f=f+Math.imul(rt,ot)|0,f=f+Math.imul(nt,tt)|0,x=x+Math.imul(nt,ot)|0,d=d+Math.imul(qe,Re)|0,f=f+Math.imul(qe,Ue)|0,f=f+Math.imul(Ze,Re)|0,x=x+Math.imul(Ze,Ue)|0,d=d+Math.imul(Se,We)|0,f=f+Math.imul(Se,Ye)|0,f=f+Math.imul(ke,We)|0,x=x+Math.imul(ke,Ye)|0,d=d+Math.imul(fe,at)|0,f=f+Math.imul(fe,Me)|0,f=f+Math.imul(oe,at)|0,x=x+Math.imul(oe,Me)|0,d=d+Math.imul(O,E)|0,f=f+Math.imul(O,M)|0,f=f+Math.imul(G,E)|0,x=x+Math.imul(G,M)|0;var Ie=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,d=Math.imul(Ve,Le),f=Math.imul(Ve,$e),f=f+Math.imul(Qe,Le)|0,x=Math.imul(Qe,$e),d=d+Math.imul(Xe,je)|0,f=f+Math.imul(Xe,Ke)|0,f=f+Math.imul(Ge,je)|0,x=x+Math.imul(Ge,Ke)|0,d=d+Math.imul(ze,tt)|0,f=f+Math.imul(ze,ot)|0,f=f+Math.imul(it,tt)|0,x=x+Math.imul(it,ot)|0,d=d+Math.imul(rt,Re)|0,f=f+Math.imul(rt,Ue)|0,f=f+Math.imul(nt,Re)|0,x=x+Math.imul(nt,Ue)|0,d=d+Math.imul(qe,We)|0,f=f+Math.imul(qe,Ye)|0,f=f+Math.imul(Ze,We)|0,x=x+Math.imul(Ze,Ye)|0,d=d+Math.imul(Se,at)|0,f=f+Math.imul(Se,Me)|0,f=f+Math.imul(ke,at)|0,x=x+Math.imul(ke,Me)|0,d=d+Math.imul(fe,E)|0,f=f+Math.imul(fe,M)|0,f=f+Math.imul(oe,E)|0,x=x+Math.imul(oe,M)|0,d=d+Math.imul(O,g)|0,f=f+Math.imul(O,N)|0,f=f+Math.imul(G,g)|0,x=x+Math.imul(G,N)|0;var Be=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Be>>>26)|0,Be&=67108863,d=Math.imul(et,Le),f=Math.imul(et,$e),f=f+Math.imul(st,Le)|0,x=Math.imul(st,$e),d=d+Math.imul(Ve,je)|0,f=f+Math.imul(Ve,Ke)|0,f=f+Math.imul(Qe,je)|0,x=x+Math.imul(Qe,Ke)|0,d=d+Math.imul(Xe,tt)|0,f=f+Math.imul(Xe,ot)|0,f=f+Math.imul(Ge,tt)|0,x=x+Math.imul(Ge,ot)|0,d=d+Math.imul(ze,Re)|0,f=f+Math.imul(ze,Ue)|0,f=f+Math.imul(it,Re)|0,x=x+Math.imul(it,Ue)|0,d=d+Math.imul(rt,We)|0,f=f+Math.imul(rt,Ye)|0,f=f+Math.imul(nt,We)|0,x=x+Math.imul(nt,Ye)|0,d=d+Math.imul(qe,at)|0,f=f+Math.imul(qe,Me)|0,f=f+Math.imul(Ze,at)|0,x=x+Math.imul(Ze,Me)|0,d=d+Math.imul(Se,E)|0,f=f+Math.imul(Se,M)|0,f=f+Math.imul(ke,E)|0,x=x+Math.imul(ke,M)|0,d=d+Math.imul(fe,g)|0,f=f+Math.imul(fe,N)|0,f=f+Math.imul(oe,g)|0,x=x+Math.imul(oe,N)|0,d=d+Math.imul(O,H)|0,f=f+Math.imul(O,J)|0,f=f+Math.imul(G,H)|0,x=x+Math.imul(G,J)|0;var Ne=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,d=Math.imul(Je,Le),f=Math.imul(Je,$e),f=f+Math.imul(He,Le)|0,x=Math.imul(He,$e),d=d+Math.imul(et,je)|0,f=f+Math.imul(et,Ke)|0,f=f+Math.imul(st,je)|0,x=x+Math.imul(st,Ke)|0,d=d+Math.imul(Ve,tt)|0,f=f+Math.imul(Ve,ot)|0,f=f+Math.imul(Qe,tt)|0,x=x+Math.imul(Qe,ot)|0,d=d+Math.imul(Xe,Re)|0,f=f+Math.imul(Xe,Ue)|0,f=f+Math.imul(Ge,Re)|0,x=x+Math.imul(Ge,Ue)|0,d=d+Math.imul(ze,We)|0,f=f+Math.imul(ze,Ye)|0,f=f+Math.imul(it,We)|0,x=x+Math.imul(it,Ye)|0,d=d+Math.imul(rt,at)|0,f=f+Math.imul(rt,Me)|0,f=f+Math.imul(nt,at)|0,x=x+Math.imul(nt,Me)|0,d=d+Math.imul(qe,E)|0,f=f+Math.imul(qe,M)|0,f=f+Math.imul(Ze,E)|0,x=x+Math.imul(Ze,M)|0,d=d+Math.imul(Se,g)|0,f=f+Math.imul(Se,N)|0,f=f+Math.imul(ke,g)|0,x=x+Math.imul(ke,N)|0,d=d+Math.imul(fe,H)|0,f=f+Math.imul(fe,J)|0,f=f+Math.imul(oe,H)|0,x=x+Math.imul(oe,J)|0,d=d+Math.imul(O,ae)|0,f=f+Math.imul(O,re)|0,f=f+Math.imul(G,ae)|0,x=x+Math.imul(G,re)|0;var we=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(we>>>26)|0,we&=67108863,d=Math.imul(Je,je),f=Math.imul(Je,Ke),f=f+Math.imul(He,je)|0,x=Math.imul(He,Ke),d=d+Math.imul(et,tt)|0,f=f+Math.imul(et,ot)|0,f=f+Math.imul(st,tt)|0,x=x+Math.imul(st,ot)|0,d=d+Math.imul(Ve,Re)|0,f=f+Math.imul(Ve,Ue)|0,f=f+Math.imul(Qe,Re)|0,x=x+Math.imul(Qe,Ue)|0,d=d+Math.imul(Xe,We)|0,f=f+Math.imul(Xe,Ye)|0,f=f+Math.imul(Ge,We)|0,x=x+Math.imul(Ge,Ye)|0,d=d+Math.imul(ze,at)|0,f=f+Math.imul(ze,Me)|0,f=f+Math.imul(it,at)|0,x=x+Math.imul(it,Me)|0,d=d+Math.imul(rt,E)|0,f=f+Math.imul(rt,M)|0,f=f+Math.imul(nt,E)|0,x=x+Math.imul(nt,M)|0,d=d+Math.imul(qe,g)|0,f=f+Math.imul(qe,N)|0,f=f+Math.imul(Ze,g)|0,x=x+Math.imul(Ze,N)|0,d=d+Math.imul(Se,H)|0,f=f+Math.imul(Se,J)|0,f=f+Math.imul(ke,H)|0,x=x+Math.imul(ke,J)|0,d=d+Math.imul(fe,ae)|0,f=f+Math.imul(fe,re)|0,f=f+Math.imul(oe,ae)|0,x=x+Math.imul(oe,re)|0;var Ae=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,d=Math.imul(Je,tt),f=Math.imul(Je,ot),f=f+Math.imul(He,tt)|0,x=Math.imul(He,ot),d=d+Math.imul(et,Re)|0,f=f+Math.imul(et,Ue)|0,f=f+Math.imul(st,Re)|0,x=x+Math.imul(st,Ue)|0,d=d+Math.imul(Ve,We)|0,f=f+Math.imul(Ve,Ye)|0,f=f+Math.imul(Qe,We)|0,x=x+Math.imul(Qe,Ye)|0,d=d+Math.imul(Xe,at)|0,f=f+Math.imul(Xe,Me)|0,f=f+Math.imul(Ge,at)|0,x=x+Math.imul(Ge,Me)|0,d=d+Math.imul(ze,E)|0,f=f+Math.imul(ze,M)|0,f=f+Math.imul(it,E)|0,x=x+Math.imul(it,M)|0,d=d+Math.imul(rt,g)|0,f=f+Math.imul(rt,N)|0,f=f+Math.imul(nt,g)|0,x=x+Math.imul(nt,N)|0,d=d+Math.imul(qe,H)|0,f=f+Math.imul(qe,J)|0,f=f+Math.imul(Ze,H)|0,x=x+Math.imul(Ze,J)|0,d=d+Math.imul(Se,ae)|0,f=f+Math.imul(Se,re)|0,f=f+Math.imul(ke,ae)|0,x=x+Math.imul(ke,re)|0;var me=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(me>>>26)|0,me&=67108863,d=Math.imul(Je,Re),f=Math.imul(Je,Ue),f=f+Math.imul(He,Re)|0,x=Math.imul(He,Ue),d=d+Math.imul(et,We)|0,f=f+Math.imul(et,Ye)|0,f=f+Math.imul(st,We)|0,x=x+Math.imul(st,Ye)|0,d=d+Math.imul(Ve,at)|0,f=f+Math.imul(Ve,Me)|0,f=f+Math.imul(Qe,at)|0,x=x+Math.imul(Qe,Me)|0,d=d+Math.imul(Xe,E)|0,f=f+Math.imul(Xe,M)|0,f=f+Math.imul(Ge,E)|0,x=x+Math.imul(Ge,M)|0,d=d+Math.imul(ze,g)|0,f=f+Math.imul(ze,N)|0,f=f+Math.imul(it,g)|0,x=x+Math.imul(it,N)|0,d=d+Math.imul(rt,H)|0,f=f+Math.imul(rt,J)|0,f=f+Math.imul(nt,H)|0,x=x+Math.imul(nt,J)|0,d=d+Math.imul(qe,ae)|0,f=f+Math.imul(qe,re)|0,f=f+Math.imul(Ze,ae)|0,x=x+Math.imul(Ze,re)|0;var _e=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(_e>>>26)|0,_e&=67108863,d=Math.imul(Je,We),f=Math.imul(Je,Ye),f=f+Math.imul(He,We)|0,x=Math.imul(He,Ye),d=d+Math.imul(et,at)|0,f=f+Math.imul(et,Me)|0,f=f+Math.imul(st,at)|0,x=x+Math.imul(st,Me)|0,d=d+Math.imul(Ve,E)|0,f=f+Math.imul(Ve,M)|0,f=f+Math.imul(Qe,E)|0,x=x+Math.imul(Qe,M)|0,d=d+Math.imul(Xe,g)|0,f=f+Math.imul(Xe,N)|0,f=f+Math.imul(Ge,g)|0,x=x+Math.imul(Ge,N)|0,d=d+Math.imul(ze,H)|0,f=f+Math.imul(ze,J)|0,f=f+Math.imul(it,H)|0,x=x+Math.imul(it,J)|0,d=d+Math.imul(rt,ae)|0,f=f+Math.imul(rt,re)|0,f=f+Math.imul(nt,ae)|0,x=x+Math.imul(nt,re)|0;var Ee=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,d=Math.imul(Je,at),f=Math.imul(Je,Me),f=f+Math.imul(He,at)|0,x=Math.imul(He,Me),d=d+Math.imul(et,E)|0,f=f+Math.imul(et,M)|0,f=f+Math.imul(st,E)|0,x=x+Math.imul(st,M)|0,d=d+Math.imul(Ve,g)|0,f=f+Math.imul(Ve,N)|0,f=f+Math.imul(Qe,g)|0,x=x+Math.imul(Qe,N)|0,d=d+Math.imul(Xe,H)|0,f=f+Math.imul(Xe,J)|0,f=f+Math.imul(Ge,H)|0,x=x+Math.imul(Ge,J)|0,d=d+Math.imul(ze,ae)|0,f=f+Math.imul(ze,re)|0,f=f+Math.imul(it,ae)|0,x=x+Math.imul(it,re)|0;var xe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(xe>>>26)|0,xe&=67108863,d=Math.imul(Je,E),f=Math.imul(Je,M),f=f+Math.imul(He,E)|0,x=Math.imul(He,M),d=d+Math.imul(et,g)|0,f=f+Math.imul(et,N)|0,f=f+Math.imul(st,g)|0,x=x+Math.imul(st,N)|0,d=d+Math.imul(Ve,H)|0,f=f+Math.imul(Ve,J)|0,f=f+Math.imul(Qe,H)|0,x=x+Math.imul(Qe,J)|0,d=d+Math.imul(Xe,ae)|0,f=f+Math.imul(Xe,re)|0,f=f+Math.imul(Ge,ae)|0,x=x+Math.imul(Ge,re)|0;var W=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(W>>>26)|0,W&=67108863,d=Math.imul(Je,g),f=Math.imul(Je,N),f=f+Math.imul(He,g)|0,x=Math.imul(He,N),d=d+Math.imul(et,H)|0,f=f+Math.imul(et,J)|0,f=f+Math.imul(st,H)|0,x=x+Math.imul(st,J)|0,d=d+Math.imul(Ve,ae)|0,f=f+Math.imul(Ve,re)|0,f=f+Math.imul(Qe,ae)|0,x=x+Math.imul(Qe,re)|0;var Y=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Y>>>26)|0,Y&=67108863,d=Math.imul(Je,H),f=Math.imul(Je,J),f=f+Math.imul(He,H)|0,x=Math.imul(He,J),d=d+Math.imul(et,ae)|0,f=f+Math.imul(et,re)|0,f=f+Math.imul(st,ae)|0,x=x+Math.imul(st,re)|0;var se=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(se>>>26)|0,se&=67108863,d=Math.imul(Je,ae),f=Math.imul(Je,re),f=f+Math.imul(He,ae)|0,x=Math.imul(He,re);var ee=(C+d|0)+((f&8191)<<13)|0;return C=(x+(f>>>13)|0)+(ee>>>26)|0,ee&=67108863,k[0]=ct,k[1]=ve,k[2]=Pe,k[3]=Ce,k[4]=De,k[5]=Oe,k[6]=Ie,k[7]=Be,k[8]=Ne,k[9]=we,k[10]=Ae,k[11]=me,k[12]=_e,k[13]=Ee,k[14]=xe,k[15]=W,k[16]=Y,k[17]=se,k[18]=ee,C!==0&&(k[19]=C,y.length++),y};Math.imul||(R=P);function F(b,a,l){l.negative=a.negative^b.negative,l.length=b.length+a.length;for(var y=0,v=0,w=0;w<l.length-1;w++){var k=v;v=0;for(var C=y&67108863,d=Math.min(w,a.length-1),f=Math.max(0,w-b.length+1);f<=d;f++){var x=w-f,D=b.words[x]|0,O=a.words[f]|0,G=D*O,ye=G&67108863;k=k+(G/67108864|0)|0,ye=ye+C|0,C=ye&67108863,k=k+(ye>>>26)|0,v+=k>>>26,k&=67108863}l.words[w]=C,y=k,k=v}return y!==0?l.words[w]=y:l.length--,l._strip()}function q(b,a,l){return F(b,a,l)}s.prototype.mulTo=function(a,l){var y,v=this.length+a.length;return this.length===10&&a.length===10?y=R(this,a,l):v<63?y=P(this,a,l):v<1024?y=F(this,a,l):y=q(this,a,l),y},s.prototype.mul=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},s.prototype.mulf=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),q(this,a,l)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var l=a<0;l&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var y=0,v=0;v<this.length;v++){var w=(this.words[v]|0)*a,k=(w&67108863)+(y&67108863);y>>=26,y+=w/67108864|0,y+=k>>>26,this.words[v]=k&67108863}return y!==0&&(this.words[v]=y,this.length++),l?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var l=A(a);if(l.length===0)return new s(1);for(var y=this,v=0;v<l.length&&l[v]===0;v++,y=y.sqr());if(++v<l.length)for(var w=y.sqr();v<l.length;v++,w=w.sqr())l[v]!==0&&(y=y.mul(w));return y},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26,v=67108863>>>26-l<<26-l,w;if(l!==0){var k=0;for(w=0;w<this.length;w++){var C=this.words[w]&v,d=(this.words[w]|0)-C<<l;this.words[w]=d|k,k=C>>>26-l}k&&(this.words[w]=k,this.length++)}if(y!==0){for(w=this.length-1;w>=0;w--)this.words[w+y]=this.words[w];for(w=0;w<y;w++)this.words[w]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,l,y){n(typeof a=="number"&&a>=0);var v;l?v=(l-l%26)/26:v=0;var w=a%26,k=Math.min((a-w)/26,this.length),C=67108863^67108863>>>w<<w,d=y;if(v-=k,v=Math.max(0,v),d){for(var f=0;f<k;f++)d.words[f]=this.words[f];d.length=k}if(k!==0)if(this.length>k)for(this.length-=k,f=0;f<this.length;f++)this.words[f]=this.words[f+k];else this.words[0]=0,this.length=1;var x=0;for(f=this.length-1;f>=0&&(x!==0||f>=v);f--){var D=this.words[f]|0;this.words[f]=x<<26-w|D>>>w,x=D&C}return d&&x!==0&&(d.words[d.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,l,y){return n(this.negative===0),this.iushrn(a,l,y)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26,v=1<<l;if(this.length<=y)return!1;var w=this.words[y];return!!(w&v)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var v=67108863^67108863>>>l<<l;this.words[this.length-1]&=v}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,l,y){var v=a.length+y,w;this._expand(v);var k,C=0;for(w=0;w<a.length;w++){k=(this.words[w+y]|0)+C;var d=(a.words[w]|0)*l;k-=d&67108863,C=(k>>26)-(d/67108864|0),this.words[w+y]=k&67108863}for(;w<this.length-y;w++)k=(this.words[w+y]|0)+C,C=k>>26,this.words[w+y]=k&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,w=0;w<this.length;w++)k=-(this.words[w]|0)+C,C=k>>26,this.words[w]=k&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,l){var y=this.length-a.length,v=this.clone(),w=a,k=w.words[w.length-1]|0,C=this._countBits(k);y=26-C,y!==0&&(w=w.ushln(y),v.iushln(y),k=w.words[w.length-1]|0);var d=v.length-w.length,f;if(l!=="mod"){f=new s(null),f.length=d+1,f.words=new Array(f.length);for(var x=0;x<f.length;x++)f.words[x]=0}var D=v.clone()._ishlnsubmul(w,1,d);D.negative===0&&(v=D,f&&(f.words[d]=1));for(var O=d-1;O>=0;O--){var G=(v.words[w.length+O]|0)*67108864+(v.words[w.length+O-1]|0);for(G=Math.min(G/k|0,67108863),v._ishlnsubmul(w,G,O);v.negative!==0;)G--,v.negative=0,v._ishlnsubmul(w,1,O),v.isZero()||(v.negative^=1);f&&(f.words[O]=G)}return f&&f._strip(),v._strip(),l!=="div"&&y!==0&&v.iushrn(y),{div:f||null,mod:v}},s.prototype.divmod=function(a,l,y){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,w,k;return this.negative!==0&&a.negative===0?(k=this.neg().divmod(a,l),l!=="mod"&&(v=k.div.neg()),l!=="div"&&(w=k.mod.neg(),y&&w.negative!==0&&w.iadd(a)),{div:v,mod:w}):this.negative===0&&a.negative!==0?(k=this.divmod(a.neg(),l),l!=="mod"&&(v=k.div.neg()),{div:v,mod:k.mod}):(this.negative&a.negative)!==0?(k=this.neg().divmod(a.neg(),l),l!=="div"&&(w=k.mod.neg(),y&&w.negative!==0&&w.isub(a)),{div:k.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,l)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(a):l.mod,v=a.ushrn(1),w=a.andln(1),k=y.cmp(v);return k<0||w===1&&k===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var y=(1<<26)%a,v=0,w=this.length-1;w>=0;w--)v=(y*v+(this.words[w]|0))%a;return l?-v:v},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var y=0,v=this.length-1;v>=0;v--){var w=(this.words[v]|0)+y*67108864;this.words[v]=w/a|0,y=w%a}return this._strip(),l?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,y=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var v=new s(1),w=new s(0),k=new s(0),C=new s(1),d=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++d;for(var f=y.clone(),x=l.clone();!l.isZero();){for(var D=0,O=1;(l.words[0]&O)===0&&D<26;++D,O<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(f),w.isub(x)),v.iushrn(1),w.iushrn(1);for(var G=0,ye=1;(y.words[0]&ye)===0&&G<26;++G,ye<<=1);if(G>0)for(y.iushrn(G);G-- >0;)(k.isOdd()||C.isOdd())&&(k.iadd(f),C.isub(x)),k.iushrn(1),C.iushrn(1);l.cmp(y)>=0?(l.isub(y),v.isub(k),w.isub(C)):(y.isub(l),k.isub(v),C.isub(w))}return{a:k,b:C,gcd:y.iushln(d)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,y=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var v=new s(1),w=new s(0),k=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var C=0,d=1;(l.words[0]&d)===0&&C<26;++C,d<<=1);if(C>0)for(l.iushrn(C);C-- >0;)v.isOdd()&&v.iadd(k),v.iushrn(1);for(var f=0,x=1;(y.words[0]&x)===0&&f<26;++f,x<<=1);if(f>0)for(y.iushrn(f);f-- >0;)w.isOdd()&&w.iadd(k),w.iushrn(1);l.cmp(y)>=0?(l.isub(y),v.isub(w)):(y.isub(l),w.isub(v))}var D;return l.cmpn(1)===0?D=v:D=w,D.cmpn(0)<0&&D.iadd(a),D},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),y=a.clone();l.negative=0,y.negative=0;for(var v=0;l.isEven()&&y.isEven();v++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var w=l.cmp(y);if(w<0){var k=l;l=y,y=k}else if(w===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(v)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,y=(a-l)/26,v=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=v,this;for(var w=v,k=y;w!==0&&k<this.length;k++){var C=this.words[k]|0;C+=w,w=C>>>26,C&=67108863,this.words[k]=C}return w!==0&&(this.words[k]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var y;if(this.length>1)y=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var v=this.words[0]|0;y=v===a?0:v<a?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var v=this.words[y]|0,w=a.words[y]|0;if(v!==w){v<w?l=-1:v>w&&(l=1);break}}return l},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new ce(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var U={k256:null,p224:null,p192:null,p25519:null};function K(b,a){this.name=b,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},K.prototype.ireduce=function(a){var l=a,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var v=y<this.n?-1:l.ucmp(this.p);return v===0?(l.words[0]=0,l.length=1):v>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},K.prototype.split=function(a,l){a.iushrn(this.n,0,l)},K.prototype.imulK=function(a){return a.imul(this.k)};function Z(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,K),Z.prototype.split=function(a,l){for(var y=4194303,v=Math.min(a.length,9),w=0;w<v;w++)l.words[w]=a.words[w];if(l.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var k=a.words[9];for(l.words[l.length++]=k&y,w=10;w<a.length;w++){var C=a.words[w]|0;a.words[w-10]=(C&y)<<4|k>>>22,k=C}k>>>=22,a.words[w-10]=k,k===0&&a.length>10?a.length-=10:a.length-=9},Z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,y=0;y<a.length;y++){var v=a.words[y]|0;l+=v*977,a.words[y]=l&67108863,l=v*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Q(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Q,K);function ue(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ue,K);function be(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(be,K),be.prototype.imulK=function(a){for(var l=0,y=0;y<a.length;y++){var v=(a.words[y]|0)*19+l,w=v&67108863;v>>>=26,a.words[y]=w,l=v}return l!==0&&(a.words[a.length++]=l),a},s._prime=function(a){if(U[a])return U[a];var l;if(a==="k256")l=new Z;else if(a==="p224")l=new Q;else if(a==="p192")l=new ue;else if(a==="p25519")l=new be;else throw new Error("Unknown prime "+a);return U[a]=l,l};function ce(b){if(typeof b=="string"){var a=s._prime(b);this.m=a.p,this.prime=a}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}ce.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},ce.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},ce.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(p(a,a.umod(this.m)._forceRed(this)),a)},ce.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},ce.prototype.add=function(a,l){this._verify2(a,l);var y=a.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ce.prototype.iadd=function(a,l){this._verify2(a,l);var y=a.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},ce.prototype.sub=function(a,l){this._verify2(a,l);var y=a.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ce.prototype.isub=function(a,l){this._verify2(a,l);var y=a.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},ce.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},ce.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},ce.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},ce.prototype.isqr=function(a){return this.imul(a,a.clone())},ce.prototype.sqr=function(a){return this.mul(a,a)},ce.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(a,y)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);n(!v.isZero());var k=new s(1).toRed(this),C=k.redNeg(),d=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,d).cmp(C)!==0;)f.redIAdd(C);for(var x=this.pow(f,v),D=this.pow(a,v.addn(1).iushrn(1)),O=this.pow(a,v),G=w;O.cmp(k)!==0;){for(var ye=O,fe=0;ye.cmp(k)!==0;fe++)ye=ye.redSqr();n(fe<G);var oe=this.pow(x,new s(1).iushln(G-fe-1));D=D.redMul(oe),x=oe.redSqr(),O=O.redMul(x),G=fe}return D},ce.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ce.prototype.pow=function(a,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var y=4,v=new Array(1<<y);v[0]=new s(1).toRed(this),v[1]=a;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],a);var k=v[0],C=0,d=0,f=l.bitLength()%26;for(f===0&&(f=26),w=l.length-1;w>=0;w--){for(var x=l.words[w],D=f-1;D>=0;D--){var O=x>>D&1;if(k!==v[0]&&(k=this.sqr(k)),O===0&&C===0){d=0;continue}C<<=1,C|=O,d++,!(d!==y&&(w!==0||D!==0))&&(k=this.mul(k,v[C]),d=0,C=0)}f=26}return k},ce.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},ce.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},s.mont=function(a){return new te(a)};function te(b){ce.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,ce),te.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},te.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(l),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(v).iushrn(this.shift),k=w;return w.cmp(this.m)>=0?k=w.isub(this.m):w.cmpn(0)<0&&(k=w.iadd(this.m)),k._forceRed(this)},te.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new s(0)._forceRed(this);var y=a.mul(l),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(v).iushrn(this.shift),k=w;return w.cmp(this.m)>=0?k=w.isub(this.m):w.cmpn(0)<0&&(k=w.iadd(this.m)),k._forceRed(this)},te.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,j)})(sx);var j5=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),K5=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vi=j&&j.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},q5=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&j5(e,t,r);return K5(e,t),e},ox=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.deserializeUnchecked=Jt.deserialize=Jt.serialize=Jt.BinaryReader=Jt.BinaryWriter=Jt.BorshError=Jt.baseDecode=Jt.baseEncode=void 0;const Zi=ox(sx.exports),ax=ox(df),H5=q5(Ix),z5=typeof j.TextDecoder!="function"?H5.TextDecoder:j.TextDecoder,G5=new z5("utf-8",{fatal:!0});function V5(t){return typeof t=="string"&&(t=V.Buffer.from(t,"utf8")),ax.default.encode(V.Buffer.from(t))}Jt.baseEncode=V5;function J5(t){return V.Buffer.from(ax.default.decode(t))}Jt.baseDecode=J5;const Ju=1024;class Vr extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Jt.BorshError=Vr;class cx{constructor(){this.buf=V.Buffer.alloc(Ju),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=V.Buffer.concat([this.buf,V.Buffer.alloc(Ju)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(V.Buffer.from(new Zi.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(V.Buffer.from(new Zi.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(V.Buffer.from(new Zi.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(V.Buffer.from(new Zi.default(e).toArray("le",64)))}writeBuffer(e){this.buf=V.Buffer.concat([V.Buffer.from(this.buf.subarray(0,this.length)),e,V.Buffer.alloc(Ju)]),this.length+=e.length}writeString(e){this.maybeResize();const r=V.Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(V.Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}Jt.BinaryWriter=cx;function wi(t,e,r){const n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Vr("Reached the end of buffer when deserializing")}throw s}}}class wn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Zi.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Zi.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Zi.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Zi.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Vr(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return G5.decode(r)}catch(n){throw new Vr(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}}vi([wi],wn.prototype,"readU8",null);vi([wi],wn.prototype,"readU16",null);vi([wi],wn.prototype,"readU32",null);vi([wi],wn.prototype,"readU64",null);vi([wi],wn.prototype,"readU128",null);vi([wi],wn.prototype,"readU256",null);vi([wi],wn.prototype,"readU512",null);vi([wi],wn.prototype,"readString",null);vi([wi],wn.prototype,"readFixedArray",null);vi([wi],wn.prototype,"readArray",null);Jt.BinaryReader=wn;function fx(t){return t.charAt(0).toUpperCase()+t.slice(1)}function va(t,e,r,n,i){try{if(typeof n=="string")i[`write${fx(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Vr(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Vr(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)va(t,null,r[s],n[0],i)}else i.writeArray(r,s=>{va(t,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),va(t,e,r,n.type,i));break}default:throw new Vr(`FieldType ${n} unrecognized`)}else ux(t,r,i)}catch(s){throw s instanceof Vr&&s.addToFieldPath(e),s}}function ux(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new Vr(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{va(t,i,e[i],s,r)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,c]=n.values[s];if(o===i){r.writeU8(s),va(t,o,e[o],c,r);break}}}else throw new Vr(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function W5(t,e,r=cx){const n=new r;return ux(t,e,n),n.toArray()}Jt.serialize=W5;function wa(t,e,r,n){try{if(typeof r=="string")return n[`read${fx(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const i=[];for(let s=0;s<r[1];s++)i.push(wa(t,null,r[0],n));return i}else return n.readArray(()=>wa(t,e,r[0],n))}return r.kind==="option"?n.readU8()?wa(t,e,r.type,n):void 0:M0(t,r,n)}catch(i){throw i instanceof Vr&&i.addToFieldPath(e),i}}function M0(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Vr(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=wa(t,s,o,r);return new e(i)}if(n.kind==="enum"){const i=r.readU8();if(i>=n.values.length)throw new Vr(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],c=wa(t,s,o,r);return new e({[s]:c})}throw new Vr(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function Y5(t,e,r,n=wn){const i=new n(r),s=M0(t,e,i);if(i.offset<r.length)throw new Vr(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}Jt.deserialize=Y5;function Z5(t,e,r,n=wn){const i=new n(r);return M0(t,e,i)}Jt.deserializeUnchecked=Z5;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Jt;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(k0);var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.Assignable=ns.Enum=void 0;class X5{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}ns.Enum=X5;class Q5{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}ns.Assignable=Q5;(function(t){var e=j&&j.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const r=e(ix.exports),n=k0,i=ns;var s;(function(m){m[m.ED25519=0]="ED25519"})(s=t.KeyType||(t.KeyType={}));function o(m){switch(m){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${m}`)}}function c(m){switch(m.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${m}`)}}class u extends i.Assignable{static from(_){return typeof _=="string"?u.fromString(_):_}static fromString(_){const S=_.split(":");if(S.length===1)return new u({keyType:s.ED25519,data:n.base_decode(S[0])});if(S.length===2)return new u({keyType:c(S[0]),data:n.base_decode(S[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${o(this.keyType)}:${n.base_encode(this.data)}`}verify(_,S){switch(this.keyType){case s.ED25519:return r.default.sign.detached.verify(_,S,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}t.PublicKey=u;class h{static fromRandom(_){switch(_.toUpperCase()){case"ED25519":return p.fromRandom();default:throw new Error(`Unknown curve ${_}`)}}static fromString(_){const S=_.split(":");if(S.length===1)return new p(S[0]);if(S.length===2)switch(S[0].toUpperCase()){case"ED25519":return new p(S[1]);default:throw new Error(`Unknown curve: ${S[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=h;class p extends h{constructor(_){super();const S=r.default.sign.keyPair.fromSecretKey(n.base_decode(_));this.publicKey=new u({keyType:s.ED25519,data:S.publicKey}),this.secretKey=_}static fromRandom(){const _=r.default.sign.keyPair();return new p(n.base_encode(_.secretKey))}sign(_){return{signature:r.default.sign.detached(_,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(_,S){return this.publicKey.verify(_,S)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=p})(gi);Object.defineProperty(ic,"__esModule",{value:!0});ic.InMemoryKeyStore=void 0;const e8=zs,t8=gi;class r8 extends e8.KeyStore{constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?t8.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}ic.InMemoryKeyStore=r8;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.BrowserLocalStorageKeyStore=void 0;const n8=zs,i8=gi,s8="near-api-js:keystore:";class o8 extends n8.KeyStore{constructor(e=window.localStorage,r=s8){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?i8.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}ou.BrowserLocalStorageKeyStore=o8;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.MergeKeyStore=void 0;const a8=zs;class c8 extends a8.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}au.MergeKeyStore=c8;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=zs;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=ic;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=ou;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=au;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(nx);var P0={},Ko={},C0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function r(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=V.Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}t.getTransactionLastResult=r})(C0);var lx={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var qo=f8;function f8(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=u8,e.property=l8,e}function u8(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function l8(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var Gs={},hx={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var h8=d8;function d8(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=p8,e.property=g8,e}function p8(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function g8(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var y8=Object.setPrototypeOf||({__proto__:[]}instanceof Array?m8:x8);function m8(t,e){return t.__proto__=e,t}function x8(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}var b8={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var dx=b8,v8=fi;fi.STATUS_CODES=dx;fi.codes=w8(fi,dx);fi.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};fi.empty={204:!0,205:!0,304:!0};fi.retry={502:!0,503:!0,504:!0};function w8(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],o=Number(i);t[o]=s,t[s]=o,t[s.toLowerCase()]=o,r.push(o)}),r}function fi(t){if(typeof t=="number"){if(!fi[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!fi[e])throw new Error("invalid status code: "+e);return e}if(e=fi[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var _8=E8;function E8(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=h8("http-errors"),r=y8,n=v8,i=jx.exports,s=_8;t.exports=c,t.exports.HttpError=u(),t.exports.isHttpError=p(t.exports.HttpError),S(t.exports,n.codes,t.exports.HttpError);function o(T){return Number(String(T).charAt(0)+"00")}function c(){for(var T,A,P=500,R={},F=0;F<arguments.length;F++){var q=arguments[F];if(q instanceof Error){T=q,P=T.status||T.statusCode||P;continue}switch(typeof q){case"string":A=q;break;case"number":P=q;break;case"object":R=q;break}}(typeof P!="number"||!n[P]&&(P<400||P>=600))&&(P=500);var U=c[P]||c[o(P)];T||(T=U?new U(A):new Error(A||n[P]),Error.captureStackTrace(T,c)),(!U||!(T instanceof U)||T.status!==P)&&(T.expose=P<500,T.status=T.statusCode=P);for(var K in R)K!=="status"&&K!=="statusCode"&&(T[K]=R[K]);return T}function u(){function T(){throw new TypeError("cannot construct abstract class")}return i(T,Error),T}function h(T,A,P){var R=B(A);function F(q){var U=q??n[P],K=new Error(U);return Error.captureStackTrace(K,F),r(K,F.prototype),Object.defineProperty(K,"message",{enumerable:!0,configurable:!0,value:U,writable:!0}),Object.defineProperty(K,"name",{enumerable:!1,configurable:!0,value:R,writable:!0}),K}return i(F,T),_(F,R),F.prototype.status=P,F.prototype.statusCode=P,F.prototype.expose=!0,F}function p(T){return function(P){return!P||typeof P!="object"?!1:P instanceof T?!0:P instanceof Error&&typeof P.expose=="boolean"&&typeof P.statusCode=="number"&&P.status===P.statusCode}}function m(T,A,P){var R=B(A);function F(q){var U=q??n[P],K=new Error(U);return Error.captureStackTrace(K,F),r(K,F.prototype),Object.defineProperty(K,"message",{enumerable:!0,configurable:!0,value:U,writable:!0}),Object.defineProperty(K,"name",{enumerable:!1,configurable:!0,value:R,writable:!0}),K}return i(F,T),_(F,R),F.prototype.status=P,F.prototype.statusCode=P,F.prototype.expose=!1,F}function _(T,A){var P=Object.getOwnPropertyDescriptor(T,"name");P&&P.configurable&&(P.value=A,Object.defineProperty(T,"name",P))}function S(T,A,P){A.forEach(function(F){var q,U=s(n[F]);switch(o(F)){case 400:q=h(P,U,F);break;case 500:q=m(P,U,F);break}q&&(T[F]=q,T[U]=q)}),T["I'mateapot"]=e.function(T.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function B(T){return T.substr(-5)!=="Error"?T+"Error":T}})(hx);var sc={};Object.defineProperty(sc,"__esModule",{value:!0});async function A8(t,e,r,n){let i=t;for(let s=0;s<e;s++){const o=await n();if(o)return o;await S8(i),i*=r}return null}sc.default=A8;function S8(t){return new Promise(e=>setTimeout(e,t))}var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.logWarning=kr.ErrorContext=kr.TypedError=kr.ArgumentTypeError=kr.PositionalArgsError=void 0;class T8 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}kr.PositionalArgsError=T8;class k8 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}kr.ArgumentTypeError=k8;class M8 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}kr.TypedError=M8;class P8{constructor(e){this.transactionHash=e}}kr.ErrorContext=P8;function C8(...t){V.process.env.NEAR_NO_LOGS||console.warn(...t)}kr.logWarning=C8;var px=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.fetchJson=void 0;const I8=px(hx.exports),N8=px(sc),B8=Ko,Hp=kr,R8=1e3,O8=1.5,zp=10;async function D8(t,e){let r={url:null};typeof t=="string"?r.url=t:r=t;const n=await N8.default(R8,zp,O8,async()=>{try{const i=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!i.ok){if(i.status===503)return Hp.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw I8.default(i.status,await i.text())}return i}catch(i){if(i.toString().includes("FetchError")||i.toString().includes("Failed to fetch"))return Hp.logWarning(`Retrying HTTP request for ${r.url} because of error: ${i}`),null;throw i}});if(!n)throw new B8.TypedError(`Exceeded ${zp} attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}Gs.fetchJson=D8;var tn={},gx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(j,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(b){return r.call(b)==="[object Array]"};function i(te){return typeof te=="function"}function s(te){return n(te)?"array":typeof te}function o(te){return te.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function c(te,b){return te!=null&&typeof te=="object"&&b in te}function u(te,b){return te!=null&&typeof te!="object"&&te.hasOwnProperty&&te.hasOwnProperty(b)}var h=RegExp.prototype.test;function p(te,b){return h.call(te,b)}var m=/\S/;function _(te){return!p(m,te)}var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function B(te){return String(te).replace(/[&<>"'`=\/]/g,function(a){return S[a]})}var T=/\s*/,A=/\s+/,P=/\s*=/,R=/\s*\}/,F=/#|\^|\/|>|\{|&|=|!/;function q(te,b){if(!te)return[];var a=!1,l=[],y=[],v=[],w=!1,k=!1,C="",d=0;function f(){if(w&&!k)for(;v.length;)delete y[v.pop()];else v=[];w=!1,k=!1}var x,D,O;function G(lr){if(typeof lr=="string"&&(lr=lr.split(A,2)),!n(lr)||lr.length!==2)throw new Error("Invalid tags: "+lr);x=new RegExp(o(lr[0])+"\\s*"),D=new RegExp("\\s*"+o(lr[1])),O=new RegExp("\\s*"+o("}"+lr[1]))}G(b||be.tags);for(var ye=new Z(te),fe,oe,ut,Se,ke,pr;!ye.eos();){if(fe=ye.pos,ut=ye.scanUntil(x),ut)for(var qe=0,Ze=ut.length;qe<Ze;++qe)Se=ut.charAt(qe),_(Se)?(v.push(y.length),C+=Se):(k=!0,a=!0,C+=" "),y.push(["text",Se,fe,fe+1]),fe+=1,Se===`
`&&(f(),C="",d=0,a=!1);if(!ye.scan(x))break;if(w=!0,oe=ye.scan(F)||"name",ye.scan(T),oe==="="?(ut=ye.scanUntil(P),ye.scan(P),ye.scanUntil(D)):oe==="{"?(ut=ye.scanUntil(O),ye.scan(R),ye.scanUntil(D),oe="&"):ut=ye.scanUntil(D),!ye.scan(D))throw new Error("Unclosed tag at "+ye.pos);if(oe==">"?ke=[oe,ut,fe,ye.pos,C,d,a]:ke=[oe,ut,fe,ye.pos],d++,y.push(ke),oe==="#"||oe==="^")l.push(ke);else if(oe==="/"){if(pr=l.pop(),!pr)throw new Error('Unopened section "'+ut+'" at '+fe);if(pr[1]!==ut)throw new Error('Unclosed section "'+pr[1]+'" at '+fe)}else oe==="name"||oe==="{"||oe==="&"?k=!0:oe==="="&&G(ut)}if(f(),pr=l.pop(),pr)throw new Error('Unclosed section "'+pr[1]+'" at '+ye.pos);return K(U(y))}function U(te){for(var b=[],a,l,y=0,v=te.length;y<v;++y)a=te[y],a&&(a[0]==="text"&&l&&l[0]==="text"?(l[1]+=a[1],l[3]=a[3]):(b.push(a),l=a));return b}function K(te){for(var b=[],a=b,l=[],y,v,w=0,k=te.length;w<k;++w)switch(y=te[w],y[0]){case"#":case"^":a.push(y),l.push(y),a=y[4]=[];break;case"/":v=l.pop(),v[5]=y[2],a=l.length>0?l[l.length-1][4]:b;break;default:a.push(y)}return b}function Z(te){this.string=te,this.tail=te,this.pos=0}Z.prototype.eos=function(){return this.tail===""},Z.prototype.scan=function(b){var a=this.tail.match(b);if(!a||a.index!==0)return"";var l=a[0];return this.tail=this.tail.substring(l.length),this.pos+=l.length,l},Z.prototype.scanUntil=function(b){var a=this.tail.search(b),l;switch(a){case-1:l=this.tail,this.tail="";break;case 0:l="";break;default:l=this.tail.substring(0,a),this.tail=this.tail.substring(a)}return this.pos+=l.length,l};function Q(te,b){this.view=te,this.cache={".":this.view},this.parent=b}Q.prototype.push=function(b){return new Q(b,this)},Q.prototype.lookup=function(b){var a=this.cache,l;if(a.hasOwnProperty(b))l=a[b];else{for(var y=this,v,w,k,C=!1;y;){if(b.indexOf(".")>0)for(v=y.view,w=b.split("."),k=0;v!=null&&k<w.length;)k===w.length-1&&(C=c(v,w[k])||u(v,w[k])),v=v[w[k++]];else v=y.view[b],C=c(y.view,b);if(C){l=v;break}y=y.parent}a[b]=l}return i(l)&&(l=l.call(this.view)),l};function ue(){this.templateCache={_cache:{},set:function(b,a){this._cache[b]=a},get:function(b){return this._cache[b]},clear:function(){this._cache={}}}}ue.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},ue.prototype.parse=function(b,a){var l=this.templateCache,y=b+":"+(a||be.tags).join(":"),v=typeof l<"u",w=v?l.get(y):void 0;return w==null&&(w=q(b,a),v&&l.set(y,w)),w},ue.prototype.render=function(b,a,l,y){var v=this.getConfigTags(y),w=this.parse(b,v),k=a instanceof Q?a:new Q(a,void 0);return this.renderTokens(w,k,l,b,y)},ue.prototype.renderTokens=function(b,a,l,y,v){for(var w="",k,C,d,f=0,x=b.length;f<x;++f)d=void 0,k=b[f],C=k[0],C==="#"?d=this.renderSection(k,a,l,y,v):C==="^"?d=this.renderInverted(k,a,l,y,v):C===">"?d=this.renderPartial(k,a,l,v):C==="&"?d=this.unescapedValue(k,a):C==="name"?d=this.escapedValue(k,a,v):C==="text"&&(d=this.rawValue(k)),d!==void 0&&(w+=d);return w},ue.prototype.renderSection=function(b,a,l,y,v){var w=this,k="",C=a.lookup(b[1]);function d(D){return w.render(D,a,l,v)}if(!!C){if(n(C))for(var f=0,x=C.length;f<x;++f)k+=this.renderTokens(b[4],a.push(C[f]),l,y,v);else if(typeof C=="object"||typeof C=="string"||typeof C=="number")k+=this.renderTokens(b[4],a.push(C),l,y,v);else if(i(C)){if(typeof y!="string")throw new Error("Cannot use higher-order sections without the original template");C=C.call(a.view,y.slice(b[3],b[5]),d),C!=null&&(k+=C)}else k+=this.renderTokens(b[4],a,l,y,v);return k}},ue.prototype.renderInverted=function(b,a,l,y,v){var w=a.lookup(b[1]);if(!w||n(w)&&w.length===0)return this.renderTokens(b[4],a,l,y,v)},ue.prototype.indentPartial=function(b,a,l){for(var y=a.replace(/[^ \t]/g,""),v=b.split(`
`),w=0;w<v.length;w++)v[w].length&&(w>0||!l)&&(v[w]=y+v[w]);return v.join(`
`)},ue.prototype.renderPartial=function(b,a,l,y){if(!!l){var v=this.getConfigTags(y),w=i(l)?l(b[1]):l[b[1]];if(w!=null){var k=b[6],C=b[5],d=b[4],f=w;C==0&&d&&(f=this.indentPartial(w,d,k));var x=this.parse(f,v);return this.renderTokens(x,a,l,f,y)}}},ue.prototype.unescapedValue=function(b,a){var l=a.lookup(b[1]);if(l!=null)return l},ue.prototype.escapedValue=function(b,a,l){var y=this.getConfigEscape(l)||be.escape,v=a.lookup(b[1]);if(v!=null)return typeof v=="number"&&y===be.escape?String(v):y(v)},ue.prototype.rawValue=function(b){return b[1]},ue.prototype.getConfigTags=function(b){return n(b)?b:b&&typeof b=="object"?b.tags:void 0},ue.prototype.getConfigEscape=function(b){if(b&&typeof b=="object"&&!n(b))return b.escape};var be={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(te){ce.templateCache=te},get templateCache(){return ce.templateCache}},ce=new ue;return be.clearCache=function(){return ce.clearCache()},be.parse=function(b,a){return ce.parse(b,a)},be.render=function(b,a,l,y){if(typeof b!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(b)+'" was given as the first argument for mustache#render(template, view, partials)');return ce.render(b,a,l,y)},be.escape=B,be.Scanner=Z,be.Context=Q,be.Writer=ue,be})})(gx);const U8={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}};var L8={schema:U8};const F8="Exceeded the maximum amount of gas allowed to burn per contract",$8="Method name is empty",j8="Wasmer compilation error: {{msg}}",K8="Smart contract panicked: {{panic_msg}}",q8="Error creating Wasm memory",H8="Exceeded the prepaid gas",z8="Method name is not valid UTF8 string",G8="String encoding is bad UTF-16 sequence",V8="WebAssembly trap: {{msg}}",J8="Gas instrumentation failed or contract has denied instructions.",W8="{{promise_idx}} does not correspond to existing promises",Y8="Accessed invalid promise result index: {{result_idx}}",Z8="Error happened while deserializing the module",X8="Contract method is not found",Q8="Accessed invalid register id: {{register_id}}",eS="VM Logic returned an invalid receipt index: {{receipt_index}}",tS="Method name is empty in contract call",rS="Returning joint promise is currently prohibited",nS="Stack instrumentation failed",iS="Cannot find contract code for account {{account_id}}",sS="Invalid method signature",oS="Integer overflow happened during contract execution",aS="MemoryAccessViolation",cS="Iterator index {{iterator_index}} does not exist",fS="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",uS="VM Logic returned an invalid account id",lS="Error happened while serializing the module",hS="Actions can only be appended to non-joint promise.",dS="Internal memory declaration has been found in the module",pS="Error happened during instantiation",gS="{{method_name}} is not allowed in view calls",yS="VM Logic returned an invalid method name",mS="String encoding is bad UTF-8 sequence",xS="Exceeded the account balance",bS="Wasm contract link error: {{msg}}",vS="VM Logic provided an invalid public key",wS="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",_S="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",ES="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",AS="Transaction gas or balance cost is too high",SS="Transaction is not signed with the given public key",TS=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,kS="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",MS="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",PS="Transaction has expired",CS="Account {{account_id}} is staking and can not be deleted",IS="Signer {{signer_id}} does not exist",NS="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",BS="The public key {{public_key}} is already used for an existing access key",RS="Invalid signer account ID {{signer_id}} according to requirements",OS="The new account_id {{account_id}} can't be created by {{predecessor_id}}",DS="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",US="Account {{account_id}} is not yet staked, but tried to unstake",LS="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",FS="Can't create a new account {{account_id}}, because it already exists",$S="Transaction parent block hash doesn't belong to the current chain",jS="Can't complete the action because account {{account_id}} doesn't exist",KS="Transaction method name {{method_name}} isn't allowed by the access key",qS="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",HS="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",zS="Invalid receiver account ID {{receiver_id}} according to requirements",GS="Account {{account_id}} tries to remove an access key that doesn't exist",VS="Timeout exceeded",JS="Connection closed";var WS={GasLimitExceeded:F8,MethodEmptyName:$8,WasmerCompileError:j8,GuestPanic:K8,Memory:q8,GasExceeded:H8,MethodUTF8Error:z8,BadUTF16:G8,WasmTrap:V8,GasInstrumentation:J8,InvalidPromiseIndex:W8,InvalidPromiseResultIndex:Y8,Deserialization:Z8,MethodNotFound:X8,InvalidRegisterId:Q8,InvalidReceiptIndex:eS,EmptyMethodName:tS,CannotReturnJointPromise:rS,StackHeightInstrumentation:nS,CodeDoesNotExist:iS,MethodInvalidSignature:sS,IntegerOverflow:oS,MemoryAccessViolation:aS,InvalidIteratorIndex:cS,IteratorWasInvalidated:fS,InvalidAccountId:uS,Serialization:lS,CannotAppendActionToJointPromise:hS,InternalMemoryDeclared:dS,Instantiate:pS,ProhibitedInView:gS,InvalidMethodName:yS,BadUTF8:mS,BalanceExceeded:xS,LinkError:bS,InvalidPublicKey:vS,ActorNoPermission:wS,LackBalanceForState:_S,ReceiverMismatch:ES,CostOverflow:AS,InvalidSignature:SS,AccessKeyNotFound:TS,NotEnoughBalance:kS,NotEnoughAllowance:MS,Expired:PS,DeleteAccountStaking:CS,SignerDoesNotExist:IS,TriesToStake:NS,AddKeyAlreadyExists:BS,InvalidSigner:RS,CreateAccountNotAllowed:OS,RequiresFullAccess:DS,TriesToUnstake:US,InvalidNonce:LS,AccountAlreadyExists:FS,InvalidChain:$S,AccountDoesNotExist:jS,MethodNameMismatch:KS,DeleteAccountHasRent:qS,DeleteAccountHasEnoughBalance:HS,InvalidReceiver:zS,DeleteKeyDoesNotExist:GS,Timeout:VS,Closed:JS},I0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tn,"__esModule",{value:!0});tn.getErrorTypeFromErrorMessage=tn.formatError=tn.parseResultError=tn.parseRpcError=tn.ServerError=void 0;const YS=I0(gx.exports),ZS=I0(L8),Gp=I0(WS),XS=P0,QS=kr,e7={formatNear:()=>(t,e)=>XS.utils.format.formatNearAmount(e(t))};class N0 extends QS.TypedError{}tn.ServerError=N0;class t7 extends N0{}function yx(t){const e={},r=xx(t,ZS.default.schema,e,""),n=new N0(mx(r,e),r);return Object.assign(n,e),n}tn.parseRpcError=yx;function r7(t){const e=yx(t.status.Failure),r=new t7;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r}tn.parseResultError=r7;function mx(t,e){return typeof Gp.default[t]=="string"?YS.default.render(Gp.default[t],{...e,...e7}):JSON.stringify(e)}tn.formatError=mx;function xx(t,e,r,n){let i,s,o;for(const c in e){if(i7(t[c]))return t[c];if(Wu(t[c]))i=t[c],s=e[c],o=c;else if(Wu(t.kind)&&Wu(t.kind[c]))i=t.kind[c],s=e[c],o=c;else continue}if(i&&s){for(const c of Object.keys(s.props))r[c]=i[c];return xx(i,e,r,o)}else return r.kind=t,n}function n7(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}tn.getErrorTypeFromErrorMessage=n7;function Wu(t){return Object.prototype.toString.call(t)==="[object Object]"}function i7(t){return Object.prototype.toString.call(t)==="[object String]"}(function(t){var e=j&&j.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const r=e(qo),n=C0,i=Gs,s=kr;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const o=Jt,c=e(sc),u=tn,h=12,p=500,m=1.5;let _=123;class S extends n.Provider{constructor(T){super(),T!=null&&typeof T=="object"?this.connection=T:(r.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:T})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(T){const A=T.encode();return this.sendJsonRpc("broadcast_tx_commit",[V.Buffer.from(A).toString("base64")])}async sendTransactionAsync(T){const A=T.encode();return this.sendJsonRpc("broadcast_tx_async",[V.Buffer.from(A).toString("base64")])}async txStatus(T,A){return typeof T=="string"?this.txStatusString(T,A):this.txStatusUint8Array(T,A)}async txStatusUint8Array(T,A){return this.sendJsonRpc("tx",[o.baseEncode(T),A])}async txStatusString(T,A){return this.sendJsonRpc("tx",[T,A])}async txStatusReceipts(T,A){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[o.baseEncode(T),A])}async query(...T){let A;if(T.length===1)A=await this.sendJsonRpc("query",T[0]);else{const[P,R]=T;A=await this.sendJsonRpc("query",[P,R])}if(A&&A.error)throw new s.TypedError(`Querying ${T} failed: ${A.error}.
${JSON.stringify(A,null,2)}`,u.getErrorTypeFromErrorMessage(A.error));return A}async block(T){const{finality:A}=T;let{blockId:P}=T;return typeof T!="object"&&(r.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),P=T),this.sendJsonRpc("block",{block_id:P,finality:A})}async blockChanges(T){const{finality:A}=T,{blockId:P}=T;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:P,finality:A})}async chunk(T){return this.sendJsonRpc("chunk",[T])}async validators(T){return this.sendJsonRpc("validators",[T])}async experimental_genesisConfig(){return r.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(T){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",T)}async experimental_lightClientProof(T){return r.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(T)}async lightClientProof(T){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",T)}async accessKeyChanges(T,A){const{finality:P}=A,{blockId:R}=A;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:T,block_id:R,finality:P})}async singleAccessKeyChanges(T,A){const{finality:P}=A,{blockId:R}=A;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:T,block_id:R,finality:P})}async accountChanges(T,A){const{finality:P}=A,{blockId:R}=A;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:T,block_id:R,finality:P})}async contractStateChanges(T,A,P=""){const{finality:R}=A,{blockId:F}=A;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:T,key_prefix_base64:P,block_id:F,finality:R})}async contractCodeChanges(T,A){const{finality:P}=A,{blockId:R}=A;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:T,block_id:R,finality:P})}async gasPrice(T){return await this.sendJsonRpc("gas_price",[T])}async sendJsonRpc(T,A){const P=await c.default(p,h,m,async()=>{try{const F={method:T,params:A,id:_++,jsonrpc:"2.0"},q=await i.fetchJson(this.connection,JSON.stringify(F));if(q.error){if(typeof q.error.data=="object")throw typeof q.error.data.error_message=="string"&&typeof q.error.data.error_type=="string"?new s.TypedError(q.error.data.error_message,q.error.data.error_type):u.parseRpcError(q.error.data);{const U=`[${q.error.code}] ${q.error.message}: ${q.error.data}`;throw q.error.data==="Timeout"||U.includes("Timeout error")||U.includes("query has timed out")?new s.TypedError(U,"TimeoutError"):new s.TypedError(U,u.getErrorTypeFromErrorMessage(q.error.data))}}return q}catch(F){if(F.type==="TimeoutError")return V.process.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${T} as it has timed out`,A),null;throw F}}),{result:R}=P;if(typeof R>"u")throw new s.TypedError(`Exceeded ${h} attempts for request to ${T}.`,"RetriesExceeded");return R}}t.JsonRpcProvider=S})(lx);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=C0;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=lx;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})})(Ko);var B0={},R0={},ys={exports:{}};(function(t){(function(e,r){function n(b,a){if(!b)throw new Error(a||"Assertion failed")}function i(b,a){b.super_=a;var l=function(){};l.prototype=a.prototype,b.prototype=new l,b.prototype.constructor=b}function s(b,a,l){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(b||0,a||10,l||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,l){return a.cmp(l)>0?a:l},s.min=function(a,l){return a.cmp(l)<0?a:l},s.prototype._init=function(a,l,y){if(typeof a=="number")return this._initNumber(a,l,y);if(typeof a=="object")return this._initArray(a,l,y);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(l===16?this._parseHex(a,v,y):(this._parseBase(a,l,v),y==="le"&&this._initArray(this.toArray(),l,y)))},s.prototype._initNumber=function(a,l,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},s.prototype._initArray=function(a,l,y){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,k,C=0;if(y==="be")for(v=a.length-1,w=0;v>=0;v-=3)k=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[w]|=k<<C&67108863,this.words[w+1]=k>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(y==="le")for(v=0,w=0;v<a.length;v+=3)k=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[w]|=k<<C&67108863,this.words[w+1]=k>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this._strip()};function c(b,a){var l=b.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+b)}function u(b,a,l){var y=c(b,l);return l-1>=a&&(y|=c(b,l-1)<<4),y}s.prototype._parseHex=function(a,l,y){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w=0,k=0,C;if(y==="be")for(v=a.length-1;v>=l;v-=2)C=u(a,l,v)<<w,this.words[k]|=C&67108863,w>=18?(w-=18,k+=1,this.words[k]|=C>>>26):w+=8;else{var d=a.length-l;for(v=d%2===0?l+1:l;v<a.length;v+=2)C=u(a,l,v)<<w,this.words[k]|=C&67108863,w>=18?(w-=18,k+=1,this.words[k]|=C>>>26):w+=8}this._strip()};function h(b,a,l,y){for(var v=0,w=0,k=Math.min(b.length,l),C=a;C<k;C++){var d=b.charCodeAt(C)-48;v*=y,d>=49?w=d-49+10:d>=17?w=d-17+10:w=d,n(d>=0&&w<y,"Invalid character"),v+=w}return v}s.prototype._parseBase=function(a,l,y){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=l)v++;v--,w=w/l|0;for(var k=a.length-y,C=k%v,d=Math.min(k,k-C)+y,f=0,x=y;x<d;x+=v)f=h(a,x,x+v,l),this.imuln(w),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(C!==0){var D=1;for(f=h(a,x,a.length,l),x=0;x<C;x++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function p(b,a){b.words=a.words,b.length=a.length,b.negative=a.negative,b.red=a.red}if(s.prototype._move=function(a){p(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,l){a=a||10,l=l|0||1;var y;if(a===16||a==="hex"){y="";for(var v=0,w=0,k=0;k<this.length;k++){var C=this.words[k],d=((C<<v|w)&16777215).toString(16);w=C>>>24-v&16777215,w!==0||k!==this.length-1?y=_[6-d.length]+d+y:y=d+y,v+=2,v>=26&&(v-=26,k--)}for(w!==0&&(y=w.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(a===(a|0)&&a>=2&&a<=36){var f=S[a],x=B[a];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var O=D.modrn(x).toString(a);D=D.idivn(x),D.isZero()?y=O+y:y=_[f-O.length]+O+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),s.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var T=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};s.prototype.toArrayLike=function(a,l,y){this._strip();var v=this.byteLength(),w=y||Math.max(1,v);n(v<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var k=T(a,w),C=l==="le"?"LE":"BE";return this["_toArrayLike"+C](k,v),k},s.prototype._toArrayLikeLE=function(a,l){for(var y=0,v=0,w=0,k=0;w<this.length;w++){var C=this.words[w]<<k|v;a[y++]=C&255,y<a.length&&(a[y++]=C>>8&255),y<a.length&&(a[y++]=C>>16&255),k===6?(y<a.length&&(a[y++]=C>>24&255),v=0,k=0):(v=C>>>24,k+=2)}if(y<a.length)for(a[y++]=v;y<a.length;)a[y++]=0},s.prototype._toArrayLikeBE=function(a,l){for(var y=a.length-1,v=0,w=0,k=0;w<this.length;w++){var C=this.words[w]<<k|v;a[y--]=C&255,y>=0&&(a[y--]=C>>8&255),y>=0&&(a[y--]=C>>16&255),k===6?(y>=0&&(a[y--]=C>>24&255),v=0,k=0):(v=C>>>24,k+=2)}if(y>=0)for(a[y--]=v;y>=0;)a[y--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var l=a,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},s.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,y=0;return(l&8191)===0&&(y+=13,l>>>=13),(l&127)===0&&(y+=7,l>>>=7),(l&15)===0&&(y+=4,l>>>=4),(l&3)===0&&(y+=2,l>>>=2),(l&1)===0&&y++,y},s.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function A(b){for(var a=new Array(b.bitLength()),l=0;l<a.length;l++){var y=l/26|0,v=l%26;a[l]=b.words[y]>>>v&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(a+=y,y!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=l.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var l,y;this.length>a.length?(l=this,y=a):(l=a,y=this);for(var v=0;v<y.length;v++)this.words[v]=l.words[v]^y.words[v];if(this!==l)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=l.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,y=a%26;this._expand(l),y>0&&l--;for(var v=0;v<l;v++)this.words[v]=~this.words[v]&67108863;return y>0&&(this.words[v]=~this.words[v]&67108863>>26-y),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var y=a/26|0,v=a%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<v:this.words[y]=this.words[y]&~(1<<v),this._strip()},s.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var y,v;this.length>a.length?(y=this,v=a):(y=a,v=this);for(var w=0,k=0;k<v.length;k++)l=(y.words[k]|0)+(v.words[k]|0)+w,this.words[k]=l&67108863,w=l>>>26;for(;w!==0&&k<y.length;k++)l=(y.words[k]|0)+w,this.words[k]=l&67108863,w=l>>>26;if(this.length=y.length,w!==0)this.words[this.length]=w,this.length++;else if(y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this},s.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var y=this.cmp(a);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;y>0?(v=this,w=a):(v=a,w=this);for(var k=0,C=0;C<w.length;C++)l=(v.words[C]|0)-(w.words[C]|0)+k,k=l>>26,this.words[C]=l&67108863;for(;k!==0&&C<v.length;C++)l=(v.words[C]|0)+k,k=l>>26,this.words[C]=l&67108863;if(k===0&&C<v.length&&v!==this)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=Math.max(this.length,C),v!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function P(b,a,l){l.negative=a.negative^b.negative;var y=b.length+a.length|0;l.length=y,y=y-1|0;var v=b.words[0]|0,w=a.words[0]|0,k=v*w,C=k&67108863,d=k/67108864|0;l.words[0]=C;for(var f=1;f<y;f++){for(var x=d>>>26,D=d&67108863,O=Math.min(f,a.length-1),G=Math.max(0,f-b.length+1);G<=O;G++){var ye=f-G|0;v=b.words[ye]|0,w=a.words[G]|0,k=v*w+D,x+=k/67108864|0,D=k&67108863}l.words[f]=D|0,d=x|0}return d!==0?l.words[f]=d|0:l.length--,l._strip()}var R=function(a,l,y){var v=a.words,w=l.words,k=y.words,C=0,d,f,x,D=v[0]|0,O=D&8191,G=D>>>13,ye=v[1]|0,fe=ye&8191,oe=ye>>>13,ut=v[2]|0,Se=ut&8191,ke=ut>>>13,pr=v[3]|0,qe=pr&8191,Ze=pr>>>13,lr=v[4]|0,rt=lr&8191,nt=lr>>>13,Br=v[5]|0,ze=Br&8191,it=Br>>>13,_n=v[6]|0,Xe=_n&8191,Ge=_n>>>13,En=v[7]|0,Ve=En&8191,Qe=En>>>13,cn=v[8]|0,et=cn&8191,st=cn>>>13,fn=v[9]|0,Je=fn&8191,He=fn>>>13,Hr=w[0]|0,Le=Hr&8191,$e=Hr>>>13,Zr=w[1]|0,je=Zr&8191,Ke=Zr>>>13,un=w[2]|0,tt=un&8191,ot=un>>>13,Un=w[3]|0,Re=Un&8191,Ue=Un>>>13,Rr=w[4]|0,We=Rr&8191,Ye=Rr>>>13,An=w[5]|0,at=An&8191,Me=An>>>13,Sn=w[6]|0,E=Sn&8191,M=Sn>>>13,I=w[7]|0,g=I&8191,N=I>>>13,z=w[8]|0,H=z&8191,J=z>>>13,le=w[9]|0,ae=le&8191,re=le>>>13;y.negative=a.negative^l.negative,y.length=19,d=Math.imul(O,Le),f=Math.imul(O,$e),f=f+Math.imul(G,Le)|0,x=Math.imul(G,$e);var ct=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(fe,Le),f=Math.imul(fe,$e),f=f+Math.imul(oe,Le)|0,x=Math.imul(oe,$e),d=d+Math.imul(O,je)|0,f=f+Math.imul(O,Ke)|0,f=f+Math.imul(G,je)|0,x=x+Math.imul(G,Ke)|0;var ve=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ve>>>26)|0,ve&=67108863,d=Math.imul(Se,Le),f=Math.imul(Se,$e),f=f+Math.imul(ke,Le)|0,x=Math.imul(ke,$e),d=d+Math.imul(fe,je)|0,f=f+Math.imul(fe,Ke)|0,f=f+Math.imul(oe,je)|0,x=x+Math.imul(oe,Ke)|0,d=d+Math.imul(O,tt)|0,f=f+Math.imul(O,ot)|0,f=f+Math.imul(G,tt)|0,x=x+Math.imul(G,ot)|0;var Pe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,d=Math.imul(qe,Le),f=Math.imul(qe,$e),f=f+Math.imul(Ze,Le)|0,x=Math.imul(Ze,$e),d=d+Math.imul(Se,je)|0,f=f+Math.imul(Se,Ke)|0,f=f+Math.imul(ke,je)|0,x=x+Math.imul(ke,Ke)|0,d=d+Math.imul(fe,tt)|0,f=f+Math.imul(fe,ot)|0,f=f+Math.imul(oe,tt)|0,x=x+Math.imul(oe,ot)|0,d=d+Math.imul(O,Re)|0,f=f+Math.imul(O,Ue)|0,f=f+Math.imul(G,Re)|0,x=x+Math.imul(G,Ue)|0;var Ce=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,d=Math.imul(rt,Le),f=Math.imul(rt,$e),f=f+Math.imul(nt,Le)|0,x=Math.imul(nt,$e),d=d+Math.imul(qe,je)|0,f=f+Math.imul(qe,Ke)|0,f=f+Math.imul(Ze,je)|0,x=x+Math.imul(Ze,Ke)|0,d=d+Math.imul(Se,tt)|0,f=f+Math.imul(Se,ot)|0,f=f+Math.imul(ke,tt)|0,x=x+Math.imul(ke,ot)|0,d=d+Math.imul(fe,Re)|0,f=f+Math.imul(fe,Ue)|0,f=f+Math.imul(oe,Re)|0,x=x+Math.imul(oe,Ue)|0,d=d+Math.imul(O,We)|0,f=f+Math.imul(O,Ye)|0,f=f+Math.imul(G,We)|0,x=x+Math.imul(G,Ye)|0;var De=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(De>>>26)|0,De&=67108863,d=Math.imul(ze,Le),f=Math.imul(ze,$e),f=f+Math.imul(it,Le)|0,x=Math.imul(it,$e),d=d+Math.imul(rt,je)|0,f=f+Math.imul(rt,Ke)|0,f=f+Math.imul(nt,je)|0,x=x+Math.imul(nt,Ke)|0,d=d+Math.imul(qe,tt)|0,f=f+Math.imul(qe,ot)|0,f=f+Math.imul(Ze,tt)|0,x=x+Math.imul(Ze,ot)|0,d=d+Math.imul(Se,Re)|0,f=f+Math.imul(Se,Ue)|0,f=f+Math.imul(ke,Re)|0,x=x+Math.imul(ke,Ue)|0,d=d+Math.imul(fe,We)|0,f=f+Math.imul(fe,Ye)|0,f=f+Math.imul(oe,We)|0,x=x+Math.imul(oe,Ye)|0,d=d+Math.imul(O,at)|0,f=f+Math.imul(O,Me)|0,f=f+Math.imul(G,at)|0,x=x+Math.imul(G,Me)|0;var Oe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,d=Math.imul(Xe,Le),f=Math.imul(Xe,$e),f=f+Math.imul(Ge,Le)|0,x=Math.imul(Ge,$e),d=d+Math.imul(ze,je)|0,f=f+Math.imul(ze,Ke)|0,f=f+Math.imul(it,je)|0,x=x+Math.imul(it,Ke)|0,d=d+Math.imul(rt,tt)|0,f=f+Math.imul(rt,ot)|0,f=f+Math.imul(nt,tt)|0,x=x+Math.imul(nt,ot)|0,d=d+Math.imul(qe,Re)|0,f=f+Math.imul(qe,Ue)|0,f=f+Math.imul(Ze,Re)|0,x=x+Math.imul(Ze,Ue)|0,d=d+Math.imul(Se,We)|0,f=f+Math.imul(Se,Ye)|0,f=f+Math.imul(ke,We)|0,x=x+Math.imul(ke,Ye)|0,d=d+Math.imul(fe,at)|0,f=f+Math.imul(fe,Me)|0,f=f+Math.imul(oe,at)|0,x=x+Math.imul(oe,Me)|0,d=d+Math.imul(O,E)|0,f=f+Math.imul(O,M)|0,f=f+Math.imul(G,E)|0,x=x+Math.imul(G,M)|0;var Ie=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,d=Math.imul(Ve,Le),f=Math.imul(Ve,$e),f=f+Math.imul(Qe,Le)|0,x=Math.imul(Qe,$e),d=d+Math.imul(Xe,je)|0,f=f+Math.imul(Xe,Ke)|0,f=f+Math.imul(Ge,je)|0,x=x+Math.imul(Ge,Ke)|0,d=d+Math.imul(ze,tt)|0,f=f+Math.imul(ze,ot)|0,f=f+Math.imul(it,tt)|0,x=x+Math.imul(it,ot)|0,d=d+Math.imul(rt,Re)|0,f=f+Math.imul(rt,Ue)|0,f=f+Math.imul(nt,Re)|0,x=x+Math.imul(nt,Ue)|0,d=d+Math.imul(qe,We)|0,f=f+Math.imul(qe,Ye)|0,f=f+Math.imul(Ze,We)|0,x=x+Math.imul(Ze,Ye)|0,d=d+Math.imul(Se,at)|0,f=f+Math.imul(Se,Me)|0,f=f+Math.imul(ke,at)|0,x=x+Math.imul(ke,Me)|0,d=d+Math.imul(fe,E)|0,f=f+Math.imul(fe,M)|0,f=f+Math.imul(oe,E)|0,x=x+Math.imul(oe,M)|0,d=d+Math.imul(O,g)|0,f=f+Math.imul(O,N)|0,f=f+Math.imul(G,g)|0,x=x+Math.imul(G,N)|0;var Be=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Be>>>26)|0,Be&=67108863,d=Math.imul(et,Le),f=Math.imul(et,$e),f=f+Math.imul(st,Le)|0,x=Math.imul(st,$e),d=d+Math.imul(Ve,je)|0,f=f+Math.imul(Ve,Ke)|0,f=f+Math.imul(Qe,je)|0,x=x+Math.imul(Qe,Ke)|0,d=d+Math.imul(Xe,tt)|0,f=f+Math.imul(Xe,ot)|0,f=f+Math.imul(Ge,tt)|0,x=x+Math.imul(Ge,ot)|0,d=d+Math.imul(ze,Re)|0,f=f+Math.imul(ze,Ue)|0,f=f+Math.imul(it,Re)|0,x=x+Math.imul(it,Ue)|0,d=d+Math.imul(rt,We)|0,f=f+Math.imul(rt,Ye)|0,f=f+Math.imul(nt,We)|0,x=x+Math.imul(nt,Ye)|0,d=d+Math.imul(qe,at)|0,f=f+Math.imul(qe,Me)|0,f=f+Math.imul(Ze,at)|0,x=x+Math.imul(Ze,Me)|0,d=d+Math.imul(Se,E)|0,f=f+Math.imul(Se,M)|0,f=f+Math.imul(ke,E)|0,x=x+Math.imul(ke,M)|0,d=d+Math.imul(fe,g)|0,f=f+Math.imul(fe,N)|0,f=f+Math.imul(oe,g)|0,x=x+Math.imul(oe,N)|0,d=d+Math.imul(O,H)|0,f=f+Math.imul(O,J)|0,f=f+Math.imul(G,H)|0,x=x+Math.imul(G,J)|0;var Ne=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,d=Math.imul(Je,Le),f=Math.imul(Je,$e),f=f+Math.imul(He,Le)|0,x=Math.imul(He,$e),d=d+Math.imul(et,je)|0,f=f+Math.imul(et,Ke)|0,f=f+Math.imul(st,je)|0,x=x+Math.imul(st,Ke)|0,d=d+Math.imul(Ve,tt)|0,f=f+Math.imul(Ve,ot)|0,f=f+Math.imul(Qe,tt)|0,x=x+Math.imul(Qe,ot)|0,d=d+Math.imul(Xe,Re)|0,f=f+Math.imul(Xe,Ue)|0,f=f+Math.imul(Ge,Re)|0,x=x+Math.imul(Ge,Ue)|0,d=d+Math.imul(ze,We)|0,f=f+Math.imul(ze,Ye)|0,f=f+Math.imul(it,We)|0,x=x+Math.imul(it,Ye)|0,d=d+Math.imul(rt,at)|0,f=f+Math.imul(rt,Me)|0,f=f+Math.imul(nt,at)|0,x=x+Math.imul(nt,Me)|0,d=d+Math.imul(qe,E)|0,f=f+Math.imul(qe,M)|0,f=f+Math.imul(Ze,E)|0,x=x+Math.imul(Ze,M)|0,d=d+Math.imul(Se,g)|0,f=f+Math.imul(Se,N)|0,f=f+Math.imul(ke,g)|0,x=x+Math.imul(ke,N)|0,d=d+Math.imul(fe,H)|0,f=f+Math.imul(fe,J)|0,f=f+Math.imul(oe,H)|0,x=x+Math.imul(oe,J)|0,d=d+Math.imul(O,ae)|0,f=f+Math.imul(O,re)|0,f=f+Math.imul(G,ae)|0,x=x+Math.imul(G,re)|0;var we=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(we>>>26)|0,we&=67108863,d=Math.imul(Je,je),f=Math.imul(Je,Ke),f=f+Math.imul(He,je)|0,x=Math.imul(He,Ke),d=d+Math.imul(et,tt)|0,f=f+Math.imul(et,ot)|0,f=f+Math.imul(st,tt)|0,x=x+Math.imul(st,ot)|0,d=d+Math.imul(Ve,Re)|0,f=f+Math.imul(Ve,Ue)|0,f=f+Math.imul(Qe,Re)|0,x=x+Math.imul(Qe,Ue)|0,d=d+Math.imul(Xe,We)|0,f=f+Math.imul(Xe,Ye)|0,f=f+Math.imul(Ge,We)|0,x=x+Math.imul(Ge,Ye)|0,d=d+Math.imul(ze,at)|0,f=f+Math.imul(ze,Me)|0,f=f+Math.imul(it,at)|0,x=x+Math.imul(it,Me)|0,d=d+Math.imul(rt,E)|0,f=f+Math.imul(rt,M)|0,f=f+Math.imul(nt,E)|0,x=x+Math.imul(nt,M)|0,d=d+Math.imul(qe,g)|0,f=f+Math.imul(qe,N)|0,f=f+Math.imul(Ze,g)|0,x=x+Math.imul(Ze,N)|0,d=d+Math.imul(Se,H)|0,f=f+Math.imul(Se,J)|0,f=f+Math.imul(ke,H)|0,x=x+Math.imul(ke,J)|0,d=d+Math.imul(fe,ae)|0,f=f+Math.imul(fe,re)|0,f=f+Math.imul(oe,ae)|0,x=x+Math.imul(oe,re)|0;var Ae=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,d=Math.imul(Je,tt),f=Math.imul(Je,ot),f=f+Math.imul(He,tt)|0,x=Math.imul(He,ot),d=d+Math.imul(et,Re)|0,f=f+Math.imul(et,Ue)|0,f=f+Math.imul(st,Re)|0,x=x+Math.imul(st,Ue)|0,d=d+Math.imul(Ve,We)|0,f=f+Math.imul(Ve,Ye)|0,f=f+Math.imul(Qe,We)|0,x=x+Math.imul(Qe,Ye)|0,d=d+Math.imul(Xe,at)|0,f=f+Math.imul(Xe,Me)|0,f=f+Math.imul(Ge,at)|0,x=x+Math.imul(Ge,Me)|0,d=d+Math.imul(ze,E)|0,f=f+Math.imul(ze,M)|0,f=f+Math.imul(it,E)|0,x=x+Math.imul(it,M)|0,d=d+Math.imul(rt,g)|0,f=f+Math.imul(rt,N)|0,f=f+Math.imul(nt,g)|0,x=x+Math.imul(nt,N)|0,d=d+Math.imul(qe,H)|0,f=f+Math.imul(qe,J)|0,f=f+Math.imul(Ze,H)|0,x=x+Math.imul(Ze,J)|0,d=d+Math.imul(Se,ae)|0,f=f+Math.imul(Se,re)|0,f=f+Math.imul(ke,ae)|0,x=x+Math.imul(ke,re)|0;var me=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(me>>>26)|0,me&=67108863,d=Math.imul(Je,Re),f=Math.imul(Je,Ue),f=f+Math.imul(He,Re)|0,x=Math.imul(He,Ue),d=d+Math.imul(et,We)|0,f=f+Math.imul(et,Ye)|0,f=f+Math.imul(st,We)|0,x=x+Math.imul(st,Ye)|0,d=d+Math.imul(Ve,at)|0,f=f+Math.imul(Ve,Me)|0,f=f+Math.imul(Qe,at)|0,x=x+Math.imul(Qe,Me)|0,d=d+Math.imul(Xe,E)|0,f=f+Math.imul(Xe,M)|0,f=f+Math.imul(Ge,E)|0,x=x+Math.imul(Ge,M)|0,d=d+Math.imul(ze,g)|0,f=f+Math.imul(ze,N)|0,f=f+Math.imul(it,g)|0,x=x+Math.imul(it,N)|0,d=d+Math.imul(rt,H)|0,f=f+Math.imul(rt,J)|0,f=f+Math.imul(nt,H)|0,x=x+Math.imul(nt,J)|0,d=d+Math.imul(qe,ae)|0,f=f+Math.imul(qe,re)|0,f=f+Math.imul(Ze,ae)|0,x=x+Math.imul(Ze,re)|0;var _e=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(_e>>>26)|0,_e&=67108863,d=Math.imul(Je,We),f=Math.imul(Je,Ye),f=f+Math.imul(He,We)|0,x=Math.imul(He,Ye),d=d+Math.imul(et,at)|0,f=f+Math.imul(et,Me)|0,f=f+Math.imul(st,at)|0,x=x+Math.imul(st,Me)|0,d=d+Math.imul(Ve,E)|0,f=f+Math.imul(Ve,M)|0,f=f+Math.imul(Qe,E)|0,x=x+Math.imul(Qe,M)|0,d=d+Math.imul(Xe,g)|0,f=f+Math.imul(Xe,N)|0,f=f+Math.imul(Ge,g)|0,x=x+Math.imul(Ge,N)|0,d=d+Math.imul(ze,H)|0,f=f+Math.imul(ze,J)|0,f=f+Math.imul(it,H)|0,x=x+Math.imul(it,J)|0,d=d+Math.imul(rt,ae)|0,f=f+Math.imul(rt,re)|0,f=f+Math.imul(nt,ae)|0,x=x+Math.imul(nt,re)|0;var Ee=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,d=Math.imul(Je,at),f=Math.imul(Je,Me),f=f+Math.imul(He,at)|0,x=Math.imul(He,Me),d=d+Math.imul(et,E)|0,f=f+Math.imul(et,M)|0,f=f+Math.imul(st,E)|0,x=x+Math.imul(st,M)|0,d=d+Math.imul(Ve,g)|0,f=f+Math.imul(Ve,N)|0,f=f+Math.imul(Qe,g)|0,x=x+Math.imul(Qe,N)|0,d=d+Math.imul(Xe,H)|0,f=f+Math.imul(Xe,J)|0,f=f+Math.imul(Ge,H)|0,x=x+Math.imul(Ge,J)|0,d=d+Math.imul(ze,ae)|0,f=f+Math.imul(ze,re)|0,f=f+Math.imul(it,ae)|0,x=x+Math.imul(it,re)|0;var xe=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(xe>>>26)|0,xe&=67108863,d=Math.imul(Je,E),f=Math.imul(Je,M),f=f+Math.imul(He,E)|0,x=Math.imul(He,M),d=d+Math.imul(et,g)|0,f=f+Math.imul(et,N)|0,f=f+Math.imul(st,g)|0,x=x+Math.imul(st,N)|0,d=d+Math.imul(Ve,H)|0,f=f+Math.imul(Ve,J)|0,f=f+Math.imul(Qe,H)|0,x=x+Math.imul(Qe,J)|0,d=d+Math.imul(Xe,ae)|0,f=f+Math.imul(Xe,re)|0,f=f+Math.imul(Ge,ae)|0,x=x+Math.imul(Ge,re)|0;var W=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(W>>>26)|0,W&=67108863,d=Math.imul(Je,g),f=Math.imul(Je,N),f=f+Math.imul(He,g)|0,x=Math.imul(He,N),d=d+Math.imul(et,H)|0,f=f+Math.imul(et,J)|0,f=f+Math.imul(st,H)|0,x=x+Math.imul(st,J)|0,d=d+Math.imul(Ve,ae)|0,f=f+Math.imul(Ve,re)|0,f=f+Math.imul(Qe,ae)|0,x=x+Math.imul(Qe,re)|0;var Y=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Y>>>26)|0,Y&=67108863,d=Math.imul(Je,H),f=Math.imul(Je,J),f=f+Math.imul(He,H)|0,x=Math.imul(He,J),d=d+Math.imul(et,ae)|0,f=f+Math.imul(et,re)|0,f=f+Math.imul(st,ae)|0,x=x+Math.imul(st,re)|0;var se=(C+d|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(se>>>26)|0,se&=67108863,d=Math.imul(Je,ae),f=Math.imul(Je,re),f=f+Math.imul(He,ae)|0,x=Math.imul(He,re);var ee=(C+d|0)+((f&8191)<<13)|0;return C=(x+(f>>>13)|0)+(ee>>>26)|0,ee&=67108863,k[0]=ct,k[1]=ve,k[2]=Pe,k[3]=Ce,k[4]=De,k[5]=Oe,k[6]=Ie,k[7]=Be,k[8]=Ne,k[9]=we,k[10]=Ae,k[11]=me,k[12]=_e,k[13]=Ee,k[14]=xe,k[15]=W,k[16]=Y,k[17]=se,k[18]=ee,C!==0&&(k[19]=C,y.length++),y};Math.imul||(R=P);function F(b,a,l){l.negative=a.negative^b.negative,l.length=b.length+a.length;for(var y=0,v=0,w=0;w<l.length-1;w++){var k=v;v=0;for(var C=y&67108863,d=Math.min(w,a.length-1),f=Math.max(0,w-b.length+1);f<=d;f++){var x=w-f,D=b.words[x]|0,O=a.words[f]|0,G=D*O,ye=G&67108863;k=k+(G/67108864|0)|0,ye=ye+C|0,C=ye&67108863,k=k+(ye>>>26)|0,v+=k>>>26,k&=67108863}l.words[w]=C,y=k,k=v}return y!==0?l.words[w]=y:l.length--,l._strip()}function q(b,a,l){return F(b,a,l)}s.prototype.mulTo=function(a,l){var y,v=this.length+a.length;return this.length===10&&a.length===10?y=R(this,a,l):v<63?y=P(this,a,l):v<1024?y=F(this,a,l):y=q(this,a,l),y},s.prototype.mul=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},s.prototype.mulf=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),q(this,a,l)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var l=a<0;l&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var y=0,v=0;v<this.length;v++){var w=(this.words[v]|0)*a,k=(w&67108863)+(y&67108863);y>>=26,y+=w/67108864|0,y+=k>>>26,this.words[v]=k&67108863}return y!==0&&(this.words[v]=y,this.length++),l?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var l=A(a);if(l.length===0)return new s(1);for(var y=this,v=0;v<l.length&&l[v]===0;v++,y=y.sqr());if(++v<l.length)for(var w=y.sqr();v<l.length;v++,w=w.sqr())l[v]!==0&&(y=y.mul(w));return y},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26,v=67108863>>>26-l<<26-l,w;if(l!==0){var k=0;for(w=0;w<this.length;w++){var C=this.words[w]&v,d=(this.words[w]|0)-C<<l;this.words[w]=d|k,k=C>>>26-l}k&&(this.words[w]=k,this.length++)}if(y!==0){for(w=this.length-1;w>=0;w--)this.words[w+y]=this.words[w];for(w=0;w<y;w++)this.words[w]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,l,y){n(typeof a=="number"&&a>=0);var v;l?v=(l-l%26)/26:v=0;var w=a%26,k=Math.min((a-w)/26,this.length),C=67108863^67108863>>>w<<w,d=y;if(v-=k,v=Math.max(0,v),d){for(var f=0;f<k;f++)d.words[f]=this.words[f];d.length=k}if(k!==0)if(this.length>k)for(this.length-=k,f=0;f<this.length;f++)this.words[f]=this.words[f+k];else this.words[0]=0,this.length=1;var x=0;for(f=this.length-1;f>=0&&(x!==0||f>=v);f--){var D=this.words[f]|0;this.words[f]=x<<26-w|D>>>w,x=D&C}return d&&x!==0&&(d.words[d.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,l,y){return n(this.negative===0),this.iushrn(a,l,y)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26,v=1<<l;if(this.length<=y)return!1;var w=this.words[y];return!!(w&v)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,y=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var v=67108863^67108863>>>l<<l;this.words[this.length-1]&=v}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,l,y){var v=a.length+y,w;this._expand(v);var k,C=0;for(w=0;w<a.length;w++){k=(this.words[w+y]|0)+C;var d=(a.words[w]|0)*l;k-=d&67108863,C=(k>>26)-(d/67108864|0),this.words[w+y]=k&67108863}for(;w<this.length-y;w++)k=(this.words[w+y]|0)+C,C=k>>26,this.words[w+y]=k&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,w=0;w<this.length;w++)k=-(this.words[w]|0)+C,C=k>>26,this.words[w]=k&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,l){var y=this.length-a.length,v=this.clone(),w=a,k=w.words[w.length-1]|0,C=this._countBits(k);y=26-C,y!==0&&(w=w.ushln(y),v.iushln(y),k=w.words[w.length-1]|0);var d=v.length-w.length,f;if(l!=="mod"){f=new s(null),f.length=d+1,f.words=new Array(f.length);for(var x=0;x<f.length;x++)f.words[x]=0}var D=v.clone()._ishlnsubmul(w,1,d);D.negative===0&&(v=D,f&&(f.words[d]=1));for(var O=d-1;O>=0;O--){var G=(v.words[w.length+O]|0)*67108864+(v.words[w.length+O-1]|0);for(G=Math.min(G/k|0,67108863),v._ishlnsubmul(w,G,O);v.negative!==0;)G--,v.negative=0,v._ishlnsubmul(w,1,O),v.isZero()||(v.negative^=1);f&&(f.words[O]=G)}return f&&f._strip(),v._strip(),l!=="div"&&y!==0&&v.iushrn(y),{div:f||null,mod:v}},s.prototype.divmod=function(a,l,y){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,w,k;return this.negative!==0&&a.negative===0?(k=this.neg().divmod(a,l),l!=="mod"&&(v=k.div.neg()),l!=="div"&&(w=k.mod.neg(),y&&w.negative!==0&&w.iadd(a)),{div:v,mod:w}):this.negative===0&&a.negative!==0?(k=this.divmod(a.neg(),l),l!=="mod"&&(v=k.div.neg()),{div:v,mod:k.mod}):(this.negative&a.negative)!==0?(k=this.neg().divmod(a.neg(),l),l!=="div"&&(w=k.mod.neg(),y&&w.negative!==0&&w.isub(a)),{div:k.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,l)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(a):l.mod,v=a.ushrn(1),w=a.andln(1),k=y.cmp(v);return k<0||w===1&&k===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var y=(1<<26)%a,v=0,w=this.length-1;w>=0;w--)v=(y*v+(this.words[w]|0))%a;return l?-v:v},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var y=0,v=this.length-1;v>=0;v--){var w=(this.words[v]|0)+y*67108864;this.words[v]=w/a|0,y=w%a}return this._strip(),l?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,y=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var v=new s(1),w=new s(0),k=new s(0),C=new s(1),d=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++d;for(var f=y.clone(),x=l.clone();!l.isZero();){for(var D=0,O=1;(l.words[0]&O)===0&&D<26;++D,O<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(f),w.isub(x)),v.iushrn(1),w.iushrn(1);for(var G=0,ye=1;(y.words[0]&ye)===0&&G<26;++G,ye<<=1);if(G>0)for(y.iushrn(G);G-- >0;)(k.isOdd()||C.isOdd())&&(k.iadd(f),C.isub(x)),k.iushrn(1),C.iushrn(1);l.cmp(y)>=0?(l.isub(y),v.isub(k),w.isub(C)):(y.isub(l),k.isub(v),C.isub(w))}return{a:k,b:C,gcd:y.iushln(d)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,y=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var v=new s(1),w=new s(0),k=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var C=0,d=1;(l.words[0]&d)===0&&C<26;++C,d<<=1);if(C>0)for(l.iushrn(C);C-- >0;)v.isOdd()&&v.iadd(k),v.iushrn(1);for(var f=0,x=1;(y.words[0]&x)===0&&f<26;++f,x<<=1);if(f>0)for(y.iushrn(f);f-- >0;)w.isOdd()&&w.iadd(k),w.iushrn(1);l.cmp(y)>=0?(l.isub(y),v.isub(w)):(y.isub(l),w.isub(v))}var D;return l.cmpn(1)===0?D=v:D=w,D.cmpn(0)<0&&D.iadd(a),D},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),y=a.clone();l.negative=0,y.negative=0;for(var v=0;l.isEven()&&y.isEven();v++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var w=l.cmp(y);if(w<0){var k=l;l=y,y=k}else if(w===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(v)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,y=(a-l)/26,v=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=v,this;for(var w=v,k=y;w!==0&&k<this.length;k++){var C=this.words[k]|0;C+=w,w=C>>>26,C&=67108863,this.words[k]=C}return w!==0&&(this.words[k]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var y;if(this.length>1)y=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var v=this.words[0]|0;y=v===a?0:v<a?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var v=this.words[y]|0,w=a.words[y]|0;if(v!==w){v<w?l=-1:v>w&&(l=1);break}}return l},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new ce(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var U={k256:null,p224:null,p192:null,p25519:null};function K(b,a){this.name=b,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},K.prototype.ireduce=function(a){var l=a,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var v=y<this.n?-1:l.ucmp(this.p);return v===0?(l.words[0]=0,l.length=1):v>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},K.prototype.split=function(a,l){a.iushrn(this.n,0,l)},K.prototype.imulK=function(a){return a.imul(this.k)};function Z(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,K),Z.prototype.split=function(a,l){for(var y=4194303,v=Math.min(a.length,9),w=0;w<v;w++)l.words[w]=a.words[w];if(l.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var k=a.words[9];for(l.words[l.length++]=k&y,w=10;w<a.length;w++){var C=a.words[w]|0;a.words[w-10]=(C&y)<<4|k>>>22,k=C}k>>>=22,a.words[w-10]=k,k===0&&a.length>10?a.length-=10:a.length-=9},Z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,y=0;y<a.length;y++){var v=a.words[y]|0;l+=v*977,a.words[y]=l&67108863,l=v*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Q(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Q,K);function ue(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ue,K);function be(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(be,K),be.prototype.imulK=function(a){for(var l=0,y=0;y<a.length;y++){var v=(a.words[y]|0)*19+l,w=v&67108863;v>>>=26,a.words[y]=w,l=v}return l!==0&&(a.words[a.length++]=l),a},s._prime=function(a){if(U[a])return U[a];var l;if(a==="k256")l=new Z;else if(a==="p224")l=new Q;else if(a==="p192")l=new ue;else if(a==="p25519")l=new be;else throw new Error("Unknown prime "+a);return U[a]=l,l};function ce(b){if(typeof b=="string"){var a=s._prime(b);this.m=a.p,this.prime=a}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}ce.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},ce.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},ce.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(p(a,a.umod(this.m)._forceRed(this)),a)},ce.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},ce.prototype.add=function(a,l){this._verify2(a,l);var y=a.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ce.prototype.iadd=function(a,l){this._verify2(a,l);var y=a.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},ce.prototype.sub=function(a,l){this._verify2(a,l);var y=a.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ce.prototype.isub=function(a,l){this._verify2(a,l);var y=a.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},ce.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},ce.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},ce.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},ce.prototype.isqr=function(a){return this.imul(a,a.clone())},ce.prototype.sqr=function(a){return this.mul(a,a)},ce.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(a,y)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);n(!v.isZero());var k=new s(1).toRed(this),C=k.redNeg(),d=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,d).cmp(C)!==0;)f.redIAdd(C);for(var x=this.pow(f,v),D=this.pow(a,v.addn(1).iushrn(1)),O=this.pow(a,v),G=w;O.cmp(k)!==0;){for(var ye=O,fe=0;ye.cmp(k)!==0;fe++)ye=ye.redSqr();n(fe<G);var oe=this.pow(x,new s(1).iushln(G-fe-1));D=D.redMul(oe),x=oe.redSqr(),O=O.redMul(x),G=fe}return D},ce.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ce.prototype.pow=function(a,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var y=4,v=new Array(1<<y);v[0]=new s(1).toRed(this),v[1]=a;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],a);var k=v[0],C=0,d=0,f=l.bitLength()%26;for(f===0&&(f=26),w=l.length-1;w>=0;w--){for(var x=l.words[w],D=f-1;D>=0;D--){var O=x>>D&1;if(k!==v[0]&&(k=this.sqr(k)),O===0&&C===0){d=0;continue}C<<=1,C|=O,d++,!(d!==y&&(w!==0||D!==0))&&(k=this.mul(k,v[C]),d=0,C=0)}f=26}return k},ce.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},ce.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},s.mont=function(a){return new te(a)};function te(b){ce.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,ce),te.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},te.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(l),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(v).iushrn(this.shift),k=w;return w.cmp(this.m)>=0?k=w.isub(this.m):w.cmpn(0)<0&&(k=w.iadd(this.m)),k._forceRed(this)},te.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new s(0)._forceRed(this);var y=a.mul(l),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(v).iushrn(this.shift),k=w;return w.cmp(this.m)>=0?k=w.isub(this.m):w.cmpn(0)<0&&(k=w.iadd(this.m)),k._forceRed(this)},te.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,j)})(ys);(function(t){var e=j&&j.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(ys.exports);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(t.NEAR_NOMINATION_EXP,10));const n=[],i=new r.default(10);for(let m=0,_=new r.default(5);m<t.NEAR_NOMINATION_EXP;m++,_=_.mul(i))n[m]=_;function s(m,_=t.NEAR_NOMINATION_EXP){const S=new r.default(m,10);if(_!==t.NEAR_NOMINATION_EXP){const A=t.NEAR_NOMINATION_EXP-_-1;A>0&&S.iadd(n[A])}m=S.toString();const B=m.substring(0,m.length-t.NEAR_NOMINATION_EXP)||"0",T=m.substring(m.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,_);return u(`${p(B)}.${T}`)}t.formatNearAmount=s;function o(m){if(!m)return null;m=c(m);const _=m.split("."),S=_[0],B=_[1]||"";if(_.length>2||B.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${m}' as NEAR amount`);return h(S+B.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=o;function c(m){return m.replace(/,/g,"").trim()}function u(m){return m.replace(/\.?0*$/,"")}function h(m){return m=m.replace(/^0+/,""),m===""?"0":m}function p(m){const _=/(-?\d+)(\d{3})/;for(;_.test(m);)m=m.replace(_,"$1,$2");return m}})(R0);(function(t){var e=j&&j.__createBinding||(Object.create?function(_,S,B,T){T===void 0&&(T=B),Object.defineProperty(_,T,{enumerable:!0,get:function(){return S[B]}})}:function(_,S,B,T){T===void 0&&(T=B),_[T]=S[B]}),r=j&&j.__setModuleDefault||(Object.create?function(_,S){Object.defineProperty(_,"default",{enumerable:!0,value:S})}:function(_,S){_.default=S}),n=j&&j.__importStar||function(_){if(_&&_.__esModule)return _;var S={};if(_!=null)for(var B in _)B!=="default"&&Object.hasOwnProperty.call(_,B)&&e(S,_,B);return r(S,_),S};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const i=n(gi);t.key_pair=i;const s=n(k0);t.serialize=s;const o=n(Gs);t.web=o;const c=n(ns);t.enums=c;const u=n(R0);t.format=u;const h=n(tn);t.rpc_errors=h;const p=gi;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return p.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return p.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return p.KeyPairEd25519}});const m=kr;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return m.logWarning}})})(B0);var oc={};(function(t){var e=j&&j.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const r=e(Rl.exports),n=ns,i=Jt,s=gi;class o extends n.Assignable{}t.FunctionCallPermission=o;class c extends n.Assignable{}t.FullAccessPermission=c;class u extends n.Enum{}t.AccessKeyPermission=u;class h extends n.Assignable{}t.AccessKey=h;function p(){return new h({nonce:0,permission:new u({fullAccess:new c({})})})}t.fullAccessKey=p;function m(d,f,x){return new h({nonce:0,permission:new u({functionCall:new o({receiverId:d,allowance:x,methodNames:f})})})}t.functionCallAccessKey=m;class _ extends n.Assignable{}t.IAction=_;class S extends _{}t.CreateAccount=S;class B extends _{}t.DeployContract=B;class T extends _{}t.FunctionCall=T;class A extends _{}t.Transfer=A;class P extends _{}t.Stake=P;class R extends _{}t.AddKey=R;class F extends _{}t.DeleteKey=F;class q extends _{}t.DeleteAccount=q;function U(){return new v({createAccount:new S({})})}t.createAccount=U;function K(d){return new v({deployContract:new B({code:d})})}t.deployContract=K;function Z(d){return d.byteLength!==void 0&&d.byteLength===d.length?d:V.Buffer.from(JSON.stringify(d))}t.stringifyJsonOrBytes=Z;function Q(d,f,x,D,O=Z){return new v({functionCall:new T({methodName:d,args:O(f),gas:x,deposit:D})})}t.functionCall=Q;function ue(d){return new v({transfer:new A({deposit:d})})}t.transfer=ue;function be(d,f){return new v({stake:new P({stake:d,publicKey:f})})}t.stake=be;function ce(d,f){return new v({addKey:new R({publicKey:d,accessKey:f})})}t.addKey=ce;function te(d){return new v({deleteKey:new F({publicKey:d})})}t.deleteKey=te;function b(d){return new v({deleteAccount:new q({beneficiaryId:d})})}t.deleteAccount=b;class a extends n.Assignable{}t.Signature=a;class l extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(f){return i.deserialize(t.SCHEMA,l,f)}}t.Transaction=l;class y extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(f){return i.deserialize(t.SCHEMA,y,f)}}t.SignedTransaction=y;class v extends n.Enum{}t.Action=v,t.SCHEMA=new Map([[a,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[y,{kind:"struct",fields:[["transaction",l],["signature",a]]}],[l,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[v]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[h,{kind:"struct",fields:[["nonce","u64"],["permission",u]]}],[u,{kind:"enum",field:"enum",values:[["functionCall",o],["fullAccess",c]]}],[o,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[c,{kind:"struct",fields:[]}],[v,{kind:"enum",field:"enum",values:[["createAccount",S],["deployContract",B],["functionCall",T],["transfer",A],["stake",P],["addKey",R],["deleteKey",F],["deleteAccount",q]]}],[S,{kind:"struct",fields:[]}],[B,{kind:"struct",fields:[["code",["u8"]]]}],[T,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[A,{kind:"struct",fields:[["deposit","u128"]]}],[P,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[R,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",h]]}],[F,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[q,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function w(d,f,x,D,O,G){return new l({signerId:d,publicKey:f,nonce:D,receiverId:x,actions:O,blockHash:G})}t.createTransaction=w;async function k(d,f,x,D){const O=i.serialize(t.SCHEMA,d),G=new Uint8Array(r.default.sha256.array(O)),ye=await f.signMessage(O,x,D),fe=new y({transaction:d,signature:new a({keyType:d.publicKey.keyType,data:ye.signature})});return[G,fe]}async function C(...d){if(d[0].constructor===l){const[f,x,D,O]=d;return k(f,x,D,O)}else{const[f,x,D,O,G,ye,fe]=d,oe=await G.getPublicKey(ye,fe),ut=w(ye,oe,f,x,D,O);return k(ut,G,ye,fe)}}t.signTransaction=C})(oc);var Co={},bx=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Co,"__esModule",{value:!0});Co.diffEpochValidators=Co.findSeatPrice=void 0;const jn=bx(ys.exports),s7=bx(qo);function o7(t,e,r,n){return n&&n<49?a7(t,e):(r||(s7.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),c7(t,e,r))}Co.findSeatPrice=o7;function a7(t,e){const r=t.map(c=>new jn.default(c.stake,10)).sort((c,u)=>c.cmp(u)),n=new jn.default(e),i=r.reduce((c,u)=>c.add(u));if(i.lt(n))throw new Error("Stakes are below seats");let s=new jn.default(1),o=i.add(new jn.default(1));for(;!s.eq(o.sub(new jn.default(1)));){const c=s.add(o).div(new jn.default(2));let u=!1,h=new jn.default(0);for(let p=0;p<r.length;++p)if(h=h.add(r[p].div(c)),h.gte(n)){s=c,u=!0;break}u||(o=c)}return s}function c7(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(s=>new jn.default(s.stake,10)).sort((s,o)=>s.cmp(o)),i=n.reduce((s,o)=>s.add(o));return t.length<e?i.mul(new jn.default(r[0])).div(new jn.default(r[1])):n[0].add(new jn.default(1))}function f7(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}Co.diffEpochValidators=f7;var Vs={},cu={},u7=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cu,"__esModule",{value:!0});cu.DEFAULT_FUNCTION_CALL_GAS=void 0;const l7=u7(ys.exports);cu.DEFAULT_FUNCTION_CALL_GAS=new l7.default("30000000000000");var O0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Account=void 0;const ra=O0(ys.exports),Mc=O0(qo),sr=oc,Pc=Ko,Cc=Jt,na=gi,Yu=kr,Vp=tn,Jp=cu,h7=O0(sc),d7=12,p7=500,g7=1.5;function y7(t){return JSON.parse(V.Buffer.from(t).toString())}function m7(t){return V.Buffer.from(JSON.stringify(t))}class D0{constructor(e,r){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=r}get ready(){return Mc.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){Mc.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(e,r){if(!V.process.env.NEAR_NO_LOGS)for(const n of r)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),this.printLogs(e,n.logs,"	"),n.failure&&console.warn(`	Failure [${e}]: ${n.failure}`)}printLogs(e,r,n=""){if(!V.process.env.NEAR_NO_LOGS)for(const i of r)console.log(`${n}Log [${e}]: ${i}`)}async signTransaction(e,r){const n=await this.findAccessKey(e,r);if(!n)throw new Pc.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:i}=n,o=(await this.connection.provider.block({finality:"final"})).header.hash,c=++i.nonce;return await sr.signTransaction(e,c,r,Cc.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...e){return typeof e[0]=="string"?this.signAndSendTransactionV1(e[0],e[1]):this.signAndSendTransactionV2(e[0])}signAndSendTransactionV1(e,r){return Mc.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:e,actions:r})}async signAndSendTransactionV2({receiverId:e,actions:r,returnError:n}){let i,s;const o=await h7.default(p7,d7,g7,async()=>{[i,s]=await this.signTransaction(e,r);const u=s.transaction.publicKey;try{return await this.connection.provider.sendTransaction(s)}catch(h){if(h.type==="InvalidNonce")return Yu.logWarning(`Retrying transaction ${e}:${Cc.baseEncode(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[u.toString()],null;if(h.type==="Expired")return Yu.logWarning(`Retrying transaction ${e}:${Cc.baseEncode(i)} due to expired block hash`),null;throw h.context=new Pc.ErrorContext(Cc.baseEncode(i)),h}});if(!o)throw new Pc.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const c=[o.transaction_outcome,...o.receipts_outcome].reduce((u,h)=>h.outcome.logs.length||typeof h.outcome.status=="object"&&typeof h.outcome.status.Failure=="object"?u.concat({receiptIds:h.outcome.receipt_ids,logs:h.outcome.logs,failure:typeof h.outcome.status.Failure<"u"?Vp.parseRpcError(h.outcome.status.Failure):null}):u,[]);if(this.printLogsAndFailures(s.transaction.receiverId,c),!n&&typeof o.status=="object"&&typeof o.status.Failure=="object")throw o.status.Failure.error_message&&o.status.Failure.error_type?new Pc.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type):Vp.parseResultError(o);return o}async findAccessKey(e,r){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)return null;const i=this.accessKeyByPublicKeyCache[n.toString()];if(i!==void 0)return{publicKey:n,accessKey:i};try{const s=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=s,{publicKey:n,accessKey:s})}catch(s){if(s.type=="AccessKeyDoesNotExist")return null;throw s}}async createAndDeployContract(e,r,n,i){const s=sr.fullAccessKey();return await this.signAndSendTransaction({receiverId:e,actions:[sr.createAccount(),sr.transfer(i),sr.addKey(na.PublicKey.from(r),s),sr.deployContract(n)]}),new D0(this.connection,e)}async sendMoney(e,r){return this.signAndSendTransaction({receiverId:e,actions:[sr.transfer(r)]})}async createAccount(e,r,n){const i=sr.fullAccessKey();return this.signAndSendTransaction({receiverId:e,actions:[sr.createAccount(),sr.transfer(n),sr.addKey(na.PublicKey.from(r),i)]})}async deleteAccount(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[sr.deleteAccount(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[sr.deployContract(e)]})}async functionCall(...e){return typeof e[0]=="string"?this.functionCallV1(e[0],e[1],e[2],e[3],e[4]):this.functionCallV2(e[0])}functionCallV1(e,r,n,i,s){return Mc.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),n=n||{},this.validateArgs(n),this.signAndSendTransaction({receiverId:e,actions:[sr.functionCall(r,n,i||Jp.DEFAULT_FUNCTION_CALL_GAS,s)]})}functionCallV2({contractId:e,methodName:r,args:n={},gas:i=Jp.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:s,walletMeta:o,walletCallbackUrl:c,stringify:u}){this.validateArgs(n);const h=u===void 0?sr.stringifyJsonOrBytes:u;return this.signAndSendTransaction({receiverId:e,actions:[sr.functionCall(r,n,i,s,h)],walletMeta:o,walletCallbackUrl:c})}async addKey(e,r,n,i){n||(n=[]),Array.isArray(n)||(n=[n]);let s;return r?s=sr.functionCallAccessKey(r,n,i):s=sr.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[sr.addKey(na.PublicKey.from(e),s)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[sr.deleteKey(na.PublicKey.from(e))]})}async stake(e,r){return this.signAndSendTransaction({receiverId:this.accountId,actions:[sr.stake(r,na.PublicKey.from(e))]})}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new Yu.PositionalArgsError}async viewFunction(e,r,n={},{parse:i=y7,stringify:s=m7}={}){this.validateArgs(n);const o=s(n).toString("base64"),c=await this.connection.provider.query({request_type:"call_function",account_id:e,method_name:r,args_base64:o,finality:"optimistic"});return c.logs&&this.printLogs(e,c.logs),c.result&&c.result.length>0&&i(V.Buffer.from(c.result))}async viewState(e,r={finality:"optimistic"}){const{values:n}=await this.connection.provider.query({request_type:"view_state",...r,account_id:this.accountId,prefix_base64:V.Buffer.from(e).toString("base64")});return n.map(({key:i,value:s})=>({key:V.Buffer.from(i,"base64"),value:V.Buffer.from(s,"base64")}))}async getAccessKeys(){const e=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(e)?e:e.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const i=n.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:n.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),r=await this.state(),n=new ra.default(e.runtime_config.storage_amount_per_byte),i=new ra.default(r.storage_usage).mul(n),s=new ra.default(r.locked),o=new ra.default(r.amount).add(s),c=o.sub(ra.default.max(s,i));return{total:o.toString(),stateStaked:i.toString(),staked:s.toString(),available:c.toString()}}}Vs.Account=D0;var vx={};(function(t){var e=j&&j.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const r=e(ys.exports),n=e(qo),i=Vs,s=R0,o=gi,c=oc,u=Gs;t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new r.default(s.parseNearAmount("1")),t.MULTISIG_GAS=new r.default("100000000000000"),t.MULTISIG_DEPOSIT=new r.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const h={[t.MULTISIG_STORAGE_KEY]:null};class p extends i.Account{constructor(A,P,R){super(A,P),this.storage=R.storage,this.onAddRequestResult=R.onAddRequestResult}async signAndSendTransactionWithAccount(A,P){return super.signAndSendTransaction({receiverId:A,actions:P})}signAndSendTransaction(...A){return typeof A[0]=="string"?this._signAndSendTransaction({receiverId:A[0],actions:A[1]}):this._signAndSendTransaction(A[0])}async _signAndSendTransaction({receiverId:A,actions:P}){const{accountId:R}=this,F=V.Buffer.from(JSON.stringify({request:{receiver_id:A,actions:B(P,R,A)}}));let q;try{q=await super.signAndSendTransaction({receiverId:R,actions:[c.functionCall("add_request_and_confirm",F,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(K){if(K.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(A,P);throw K}if(!q.status)throw new Error("Request failed");const U={...q.status};if(!U.SuccessValue||typeof U.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:R,actions:P,requestId:parseInt(V.Buffer.from(U.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(q),this.deleteUnconfirmedRequests(),q}async deleteUnconfirmedRequests(){const A=await this.getRequestIds(),{requestId:P}=this.getRequest();for(const R of A)if(R!=P)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[c.functionCall("delete_request",{request_id:R},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):h[t.MULTISIG_STORAGE_KEY]}setRequest(A){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(A));h[t.MULTISIG_STORAGE_KEY]=A}}t.AccountMultisig=p;class m extends p{constructor(A,P,R){super(A,P,R),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=R.helperUrl||this.helperUrl,this.storage=R.storage,this.sendCode=R.sendCode||this.sendCodeDefault,this.getCode=R.getCode||this.getCodeDefault,this.verifyCode=R.verifyCode||this.verifyCodeDefault,this.onConfirmResult=R.onConfirmResult}async signAndSendTransaction(...A){return typeof A[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:A[0],actions:A[1]})):this.__signAndSendTransaction(A[0])}async __signAndSendTransaction({receiverId:A,actions:P}){await super.signAndSendTransaction({receiverId:A,actions:P}),await this.sendCode();const R=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(R),R}async deployMultisig(A){const{accountId:P}=this,R=(await this.getRecoveryMethods()).data.filter(({kind:Z,publicKey:Q})=>(Z==="phrase"||Z==="ledger")&&Q!==null).map(Z=>Z.publicKey),F=(await this.getAccessKeys()).filter(({public_key:Z,access_key:{permission:Q}})=>Q==="FullAccess"&&!R.includes(Z)).map(Z=>Z.public_key).map(_),q=_((await this.postSignedJson("/2fa/getAccessKey",{accountId:P})).publicKey),U=V.Buffer.from(JSON.stringify({num_confirmations:2})),K=[...F.map(Z=>c.deleteKey(Z)),...F.map(Z=>c.addKey(Z,c.functionCallAccessKey(P,t.MULTISIG_CHANGE_METHODS,null))),c.addKey(q,c.functionCallAccessKey(P,t.MULTISIG_CONFIRM_METHODS,null)),c.deployContract(A)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&K.push(c.functionCall("new",U,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",P),await super.signAndSendTransactionWithAccount(P,K)}async disable(A){const{accountId:P}=this,F=(await this.getAccessKeys()).filter(({access_key:K})=>K.permission!=="FullAccess").filter(({access_key:K})=>{const Z=K.permission.FunctionCall;return Z.receiver_id===P&&Z.method_names.length===4&&Z.method_names.includes("add_request_and_confirm")}),q=o.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:P})).publicKey),U=[c.deleteKey(q),...F.map(({public_key:K})=>c.deleteKey(o.PublicKey.from(K))),...F.map(({public_key:K})=>c.addKey(o.PublicKey.from(K),null)),c.deployContract(A)];return console.log("disabling 2fa for",P),await this.signAndSendTransaction({receiverId:P,actions:U})}async sendCodeDefault(){const{accountId:A}=this,{requestId:P}=this.getRequest(),R=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:A,method:R,requestId:P}),P}async getCodeDefault(A){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const A=await this.get2faMethod(),P=await this.getCode(A);try{return await this.verifyCode(P)}catch(R){if(console.warn("Error validating security code:",R),R.toString().includes("invalid 2fa code provided")||R.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw R}}async verifyCodeDefault(A){const{accountId:P}=this,R=this.getRequest();if(!R)throw new Error("no request pending");const{requestId:F}=R;return await this.postSignedJson("/2fa/verify",{accountId:P,securityCode:A,requestId:F})}async getRecoveryMethods(){const{accountId:A}=this;return{accountId:A,data:await this.postSignedJson("/account/recoveryMethods",{accountId:A})}}async get2faMethod(){let{data:A}=await this.getRecoveryMethods();if(A&&A.length&&(A=A.find(F=>F.kind.indexOf("2fa-")===0)),!A)return null;const{kind:P,detail:R}=A;return{kind:P,detail:R}}async signatureFor(){const{accountId:A}=this,R=(await this.connection.provider.block({finality:"final"})).header.height.toString(),F=await this.connection.signer.signMessage(V.Buffer.from(R),A,this.connection.networkId),q=V.Buffer.from(F.signature).toString("base64");return{blockNumber:R,blockNumberSignature:q}}async postSignedJson(A,P){return await u.fetchJson(this.helperUrl+A,JSON.stringify({...P,...await this.signatureFor()}))}}t.Account2FA=m;const _=T=>o.PublicKey.from(T),S=T=>T.toString().replace("ed25519:",""),B=(T,A,P)=>T.map(R=>{const F=R.enum,{gas:q,publicKey:U,methodName:K,args:Z,deposit:Q,accessKey:ue,code:be}=R[F],ce={type:F[0].toUpperCase()+F.substr(1),gas:q&&q.toString()||void 0,public_key:U&&S(U)||void 0,method_name:K,args:Z&&V.Buffer.from(Z).toString("base64")||void 0,code:be&&V.Buffer.from(be).toString("base64")||void 0,amount:Q&&Q.toString()||void 0,deposit:Q&&Q.toString()||"0",permission:void 0};if(ue&&(P===A&&ue.permission.enum!=="fullAccess"&&(ce.permission={receiver_id:A,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),ue.permission.enum==="functionCall")){const{receiverId:te,methodNames:b,allowance:a}=ue.permission.functionCall;ce.permission={receiver_id:te,allowance:a&&a.toString()||void 0,method_names:b}}return ce})})(vx);var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.UrlAccountCreator=Pi.LocalAccountCreator=Pi.AccountCreator=void 0;const x7=Gs;class U0{}Pi.AccountCreator=U0;class b7 extends U0{constructor(e,r){super(),this.masterAccount=e,this.initialBalance=r}async createAccount(e,r){await this.masterAccount.createAccount(e,r,this.initialBalance)}}Pi.LocalAccountCreator=b7;class v7 extends U0{constructor(e,r){super(),this.connection=e,this.helperUrl=r}async createAccount(e,r){await x7.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:r.toString()}))}}Pi.UrlAccountCreator=v7;var ac={},Is={},w7=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Is,"__esModule",{value:!0});Is.InMemorySigner=Is.Signer=void 0;const _7=w7(Rl.exports),E7=gi,A7=ic;class wx{}Is.Signer=wx;class L0 extends wx{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new A7.InMemoryKeyStore;return await i.setKey(e,r,n),new L0(i)}async createKey(e,r){const n=E7.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,n),n.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array(_7.default.sha256.array(e));if(!r)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,r);if(s===null)throw new Error(`Key for ${r} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}Is.InMemorySigner=L0;Object.defineProperty(ac,"__esModule",{value:!0});ac.Connection=void 0;const S7=Ko,T7=Is;function k7(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new S7.JsonRpcProvider({...t.args});default:throw new Error(`Unknown provider type ${t.type}`)}}function M7(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new T7.InMemorySigner(t.keyStore);default:throw new Error(`Unknown signer type ${t.type}`)}}class F0{constructor(e,r,n){this.networkId=e,this.provider=r,this.signer=n}static fromConfig(e){const r=k7(e.provider),n=M7(e.signer);return new F0(e.networkId,r,n)}}ac.Connection=F0;var cc={},_x=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cc,"__esModule",{value:!0});cc.Contract=void 0;const P7=_x(ys.exports),C7=_x(qo),I7=Ko,Cl=kr;function Wp(t,e){return{[t](...r){return e(...r)}}[t]}const Yp=t=>t&&t.byteLength!==void 0&&t.byteLength===t.length,Zu=t=>Object.prototype.toString.call(t)==="[object Object]";class N7{constructor(e,r,n){this.account=e,this.contractId=r;const{viewMethods:i=[],changeMethods:s=[]}=n;i.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:Wp(o,async(c={},u={},...h)=>{if(h.length||!(Zu(c)||Yp(c))||!Zu(u))throw new Cl.PositionalArgsError;return this.account.viewFunction(this.contractId,o,c,u)})})}),s.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:Wp(o,async(...c)=>{if(c.length&&(c.length>3||!(Zu(c[0])||Yp(c[0]))))throw new Cl.PositionalArgsError;return c.length>1||!(c[0]&&c[0].args)?(C7.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:o,args:c[0],gas:c[1],amount:c[2]})):this._changeMethod({methodName:o,...c[0]})})})})}async _changeMethod({args:e,methodName:r,gas:n,amount:i,meta:s,callbackUrl:o}){B7({gas:n,amount:i});const c=await this.account.functionCall({contractId:this.contractId,methodName:r,args:e,gas:n,attachedDeposit:i,walletMeta:s,walletCallbackUrl:o});return I7.getTransactionLastResult(c)}}cc.Contract=N7;function B7(t){const e="number, decimal string or BN";for(const r of Object.keys(t)){const n=t[r];if(n&&!P7.default.isBN(n)&&isNaN(n))throw new Cl.ArgumentTypeError(r,e,n)}}var fc={},R7=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fc,"__esModule",{value:!0});fc.Near=void 0;const Zp=R7(ys.exports),ia=Vs,O7=ac,D7=cc,Xp=Pi;class U7{constructor(e){if(this.config=e,this.connection=O7.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps.keyStore}}),e.masterAccount){const r=e.initialBalance?new Zp.default(e.initialBalance):new Zp.default("500000000000000000000000000");this.accountCreator=new Xp.LocalAccountCreator(new ia.Account(this.connection,e.masterAccount),r)}else e.helperUrl?this.accountCreator=new Xp.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new ia.Account(this.connection,e)}async createAccount(e,r){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,r),new ia.Account(this.connection,e)}async loadContract(e,r){const n=new ia.Account(this.connection,r.sender);return new D7.Contract(n,e,r)}async sendTokens(e,r,n){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new ia.Account(this.connection,r).sendMoney(n,e)).transaction_outcome.id}}fc.Near=U7;var es={},L7=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(es,"__esModule",{value:!0});es.ConnectedWalletAccount=es.WalletAccount=es.WalletConnection=void 0;const Qp=L7(qo),F7=Vs,Ex=oc,Ax=B0,$7=Jt,j7=Jt,K7="/login/",q7="add_request_and_confirm",H7="_wallet_auth_key",Xu="pending_key";class Sx{constructor(e,r){this._near=e;const n=r+H7,i=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,r=r||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(e={},r,n,i){let s;typeof e=="string"?(Qp.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),s={contractId:e,successUrl:n,failureUrl:i}):s=e;const o=new URL(window.location.href),c=new URL(this._walletBaseUrl+K7);if(c.searchParams.set("success_url",s.successUrl||o.href),c.searchParams.set("failure_url",s.failureUrl||o.href),s.contractId){await(await this._near.account(s.contractId)).state(),c.searchParams.set("contract_id",s.contractId);const h=Ax.KeyPair.fromRandom("ed25519");c.searchParams.set("public_key",h.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,Xu+h.getPublicKey(),h)}s.methodNames&&s.methodNames.forEach(u=>{c.searchParams.append("methodNames",u)}),window.location.assign(c.toString())}async requestSignTransactions(...e){return Array.isArray(e[0])?(Qp.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:e[0],callbackUrl:e[1],meta:e[2]})):this._requestSignTransactions(e[0])}async _requestSignTransactions({transactions:e,meta:r,callbackUrl:n}){const i=new URL(window.location.href),s=new URL("sign",this._walletBaseUrl);s.searchParams.set("transactions",e.map(o=>j7.serialize(Ex.SCHEMA,o)).map(o=>V.Buffer.from(o).toString("base64")).join(",")),s.searchParams.set("callbackUrl",n||i.href),r&&s.searchParams.set("meta",r),window.location.assign(s.toString())}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),r=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),i=e.searchParams.get("account_id")||"";i&&(this._authData={accountId:i,allKeys:n},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),r&&await this._moveKeyFromTempToPermanent(i,r)),e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,r){const n=await this._keyStore.getKey(this._networkId,Xu+r);await this._keyStore.setKey(this._networkId,e,n),await this._keyStore.removeKey(this._networkId,Xu+r)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new Tx(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}es.WalletConnection=Sx;es.WalletAccount=Sx;class Tx extends F7.Account{constructor(e,r,n){super(r,n),this.walletConnection=e}signAndSendTransaction(...e){return typeof e[0]=="string"?this._signAndSendTransaction({receiverId:e[0],actions:e[1]}):this._signAndSendTransaction(e[0])}async _signAndSendTransaction({receiverId:e,actions:r,walletMeta:n,walletCallbackUrl:i=window.location.href}){const s=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let o=await this.accessKeyForTransaction(e,r,s);if(!o)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(s&&s.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:r})}catch(_){if(_.type==="NotEnoughAllowance")o=await this.accessKeyForTransaction(e,r);else throw _}const c=await this.connection.provider.block({finality:"final"}),u=$7.baseDecode(c.header.hash),h=Ax.PublicKey.from(o.public_key),p=o.access_key.nonce+1,m=Ex.createTransaction(this.accountId,h,e,p,r,u);return await this.walletConnection.requestSignTransactions({transactions:[m],meta:n,callbackUrl:i}),new Promise((_,S)=>{setTimeout(()=>{S(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,r,n){const{access_key:{permission:i}}=e;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:s,method_names:o}=i.FunctionCall;if(s===this.accountId&&o.includes(q7))return!0;if(s===r){if(n.length!==1)return!1;const[{functionCall:c}]=n;return c&&(!c.deposit||c.deposit.toString()==="0")&&(o.length===0||o.includes(c.methodName))}}return!1}async accessKeyForTransaction(e,r,n){const i=await this.getAccessKeys();if(n){const o=i.find(c=>c.public_key.toString()===n.toString());if(o&&await this.accessKeyMatchesTransaction(o,e,r))return o}const s=this.walletConnection._authData.allKeys;for(const o of i)if(s.indexOf(o.public_key)!==-1&&await this.accessKeyMatchesTransaction(o,e,r))return o;return null}}es.ConnectedWalletAccount=Tx;(function(t){var e=j&&j.__createBinding||(Object.create?function(P,R,F,q){q===void 0&&(q=F),Object.defineProperty(P,q,{enumerable:!0,get:function(){return R[F]}})}:function(P,R,F,q){q===void 0&&(q=F),P[q]=R[F]}),r=j&&j.__setModuleDefault||(Object.create?function(P,R){Object.defineProperty(P,"default",{enumerable:!0,value:R})}:function(P,R){P.default=R}),n=j&&j.__importStar||function(P){if(P&&P.__esModule)return P;var R={};if(P!=null)for(var F in P)F!=="default"&&Object.hasOwnProperty.call(P,F)&&e(R,P,F);return r(R,P),R};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(Ko);t.providers=i;const s=n(B0);t.utils=s;const o=n(oc);t.transactions=o;const c=n(Co);t.validators=c;const u=Vs;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return u.Account}});const h=n(vx);t.multisig=h;const p=n(Pi);t.accountCreator=p;const m=ac;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return m.Connection}});const _=Is;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return _.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return _.InMemorySigner}});const S=cc;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return S.Contract}});const B=gi;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return B.KeyPair}});const T=fc;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return T.Near}});const A=es;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return A.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return A.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return A.WalletConnection}})})(P0);var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.connect=void 0;const z7=fc;async function G7(t){return new z7.Near(t)}fu.connect=G7;var Il=function(){this.tests={},this.cache={}};Il.prototype={constructor:Il,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var V7=Il,J7=V7,$0=new J7,Ra=function(t){return $0.test(t)};Ra.define=function(t,e){$0.define(t,e)};Ra.check=function(t){$0.check(t)};Ra.test=Ra;var kx=Ra,Mx=kx,Dn=Mx.define,ws=Mx.test;Dn("strict mode",function(){return this===void 0});Dn("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});Dn("es5",function(){return ws("Array.prototype.forEach")&&ws("Array.prototype.map")&&ws("Function.prototype.bind")&&ws("Object.create")&&ws("Object.defineProperties")&&ws("Object.defineProperty")&&ws("Object.prototype.hasOwnProperty")});Dn("Array.prototype.forEach",function(){return Array.prototype.forEach});Dn("Array.prototype.map",function(){return Array.prototype.map});Dn("Function.prototype.bind",function(){return Function.prototype.bind});Dn("Object.create",function(){return Object.create});Dn("Object.defineProperties",function(){return Object.defineProperties});Dn("Object.defineProperty",function(){return Object.defineProperty});Dn("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});Dn("Error.captureStackTrace",function(){return Error.captureStackTrace});Dn("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});var j0=kx;j0.check("es5");var W7=function(t,e,r){var n="";if(n+=t.name||"Error",n+=": "+(t.message||""),r instanceof Array)for(var i in r){var s=r[i];n+=`
   # `+s}for(var o in e){var c=e[o];n+=`
   at `+c.toString()}return n},K0=W7,Y7=K0,Z7=function(){return Error.getStackTrace=function(t){return t.stack},{prepareStackTrace:Y7}},ur=function(){var t=Object.create({Source:Object,config:{},buildArgs:[]});function e(c){var u="config";if(c instanceof Function)u="Source";else if(c instanceof Array)u="buildArgs";else if(c instanceof Object)u="config";else throw new Error("Invalid configuration option.");if(t.hasOwnProperty(u))throw new Error("Duplicated configuration option: "+u+".");t[u]=c}for(var r=0,n=arguments.length;r<n;++r)e(arguments[r]);var i=t.Source,s=t.config,o=t.buildArgs;return(i.extend||ur.extend).call(i,s,o)};ur.factory=function(){return function(){var t=this;t.build instanceof Function&&t.build.apply(t,arguments),t.init instanceof Function&&t.init.apply(t,arguments)}};ur.extend=function(t,e){var r=this;t||(t={});var n;return t.prototype instanceof Object&&t.prototype.constructor!==Object?n=t.prototype.constructor:t.factory instanceof Function&&(n=t.factory.call(r)),n=(r.clone||ur.clone).call(r,n,e),(n.merge||ur.merge).call(n,t),n};ur.prototype.extend=function(t,e){var r=this,n=(r.clone||ur.prototype.clone).apply(r,e);return(n.merge||ur.prototype.merge).call(n,t),n};ur.clone=function(t,e){var r=this;t instanceof Function||(t=(r.factory||ur.factory).call(r)),t.prototype=(r.prototype.clone||ur.prototype.clone).apply(r.prototype,e||[]),t.prototype.constructor=t;for(var n in r)n!=="prototype"&&(t[n]=r[n]);return t};ur.prototype.clone=function(){var t=this,e=Object.create(t);return e.build instanceof Function&&e.build.apply(e,arguments),e};ur.merge=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.merge||ur.prototype.merge).call(e.prototype,t.prototype),e};ur.prototype.merge=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]=t[r]);return e};ur.absorb=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]===void 0||e[r]===Function.prototype[r])&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.absorb||ur.prototype.absorb).call(e.prototype,t.prototype),e};ur.prototype.absorb=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]===void 0||e[r]===Object.prototype[r])&&(e[r]=t[r]);return e};ur.getAncestor=function(){var t=this;if(t!==t.prototype.constructor)return t.prototype.constructor};ur.newInstance=function(){var t=this,e=Object.create(this.prototype);return t.apply(e,arguments),e};var X7=ur,Q7=function(){throw new Error("Not implemented.")},e9={Class:X7,abstractMethod:Q7},uc=e9,t9=function(t){var e=!1,r;return t instanceof Function||(e=!0,r=t,t=null),function(){return e||(e=!0,r=t.apply(this,arguments),t=null),r}},r9=t9,n9=function t(e,r,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],t(e,r,n),--n.length}else r.apply(null,n)},i9={cache:r9,eachCombination:n9},lc=i9,_a=uc.Class,eg=uc.abstractMethod,s9=lc.eachCombination,tg=lc.cache,o9=j0,a9=_a(Object,{prototype:{captureFrameStrings:function(t){var e=this.createError();t.unshift(this.captureFrameStrings),t.unshift(this.createError);var r=this.getFrameStrings(e),n=r.slice(t.length),i=[];if(o9("arguments.callee.caller")){var s=[this.createError,this.captureFrameStrings];try{for(var o=arguments.callee;o=o.caller;)s.push(o)}catch{}i=s.slice(t.length)}return{frameStrings:n,functionValues:i}},getFrameStrings:function(t){var e=t.message||"",r=t.name||"",n=this.getStackString(t);if(n!==void 0){var i=n.split(`
`),s=0,o=i.length;return this.hasHeader&&(s+=r.split(`
`).length+e.split(`
`).length-1),this.hasFooter&&(o-=1),i.slice(s,o)}},createError:eg,getStackString:eg,hasHeader:void 0,hasFooter:void 0}}),c9=_a(Object,{prototype:{calibrateClass:function(t){return this.calibrateMethods(t)&&this.calibrateEnvelope(t)},calibrateMethods:function(t){try{s9([[function(e){return new Error(e)},function(e){try{throw new Error(e)}catch(r){return r}}],[function(e){return e.stack},function(e){return e.stacktrace}]],function(e,r){if(r(e()))throw{getStackString:r,createError:e}})}catch(e){return _a.merge.call(t,{prototype:e}),!0}return!1},calibrateEnvelope:function(t){var e=t.prototype.getStackString,r=t.prototype.createError,n=e(r("marker")),i=n.split(`
`);return _a.merge.call(t,{prototype:{hasHeader:/marker/.test(i[0]),hasFooter:i[i.length-1]===""}}),!0}}}),f9={getClass:tg(function(){var t;if(t)return t;t=_a(a9,{});var e=new c9;if(!e.calibrateClass(t))throw new Error("Cannot read Error.prototype.stack in this environment.");return t}),getInstance:tg(function(){var t=this.getClass(),e=new t;return e})},rg=uc.Class,kn=uc.abstractMethod,u9=rg(Object,{prototype:{init:rg.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:kn,getTypeName:kn,getFunction:function(){return this.functionValue},getFunctionName:kn,getMethodName:kn,getFileName:kn,getLineNumber:kn,getColumnNumber:kn,getEvalOrigin:kn,isTopLevel:kn,isEval:kn,isNative:kn,isConstructor:kn}}),l9=u9,ng=uc.Class,h9=l9,ig=lc.cache,d9=ng(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(t){ng.prototype.merge.call(this,t)},getFrames:function(t,e){for(var r=[],n=0,i=t.length;n<i;++n)r[n]=this.getFrame(t[n],e[n]);return r},getFrame:function(t,e){var r={frameString:t,functionValue:e};return new h9(r)}}}),p9={getClass:ig(function(){return d9}),getInstance:ig(function(){var t=this.getClass(),e=new t;return e})},sg=f9,og=p9,g9=lc.cache,Qu=K0,y9=function(){return Error.captureStackTrace=function t(e,r){var n,i=[t];r&&i.push(r);var s=sg.getInstance().captureFrameStrings(i);Object.defineProperties(e,{stack:{configurable:!0,get:g9(function(){var o=og.getInstance().getFrames(s.frameStrings,s.functionValues);return(Error.prepareStackTrace||Qu)(e,o,n)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=sg.getInstance().getFrameStrings(t),r=[],n;e?r=og.getInstance().getFrames(e,[]):n=["The stack is not readable by unthrown errors in this environment."];var i=(Error.prepareStackTrace||Qu)(t,r,n);if(e)try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:i},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return i},{prepareStackTrace:Qu}},m9=lc.cache,el=K0,x9=function(){return Error.captureStackTrace=function(t,e){Object.defineProperties(t,{stack:{configurable:!0,get:m9(function(){return(Error.prepareStackTrace||el)(t,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=(Error.prepareStackTrace||el)(t,[]);try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:e},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return e},{prepareStackTrace:el}},ag=j0,Gc;ag("Error.captureStackTrace")?Gc=Z7:ag("Error.prototype.stack")?Gc=y9:Gc=x9;Gc();(function(t){var e=j&&j.__createBinding||(Object.create?function(s,o,c,u){u===void 0&&(u=c),Object.defineProperty(s,u,{enumerable:!0,get:function(){return o[c]}})}:function(s,o,c,u){u===void 0&&(u=c),s[u]=o[c]}),r=j&&j.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=j&&j.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var c in s)c!=="default"&&Object.hasOwnProperty.call(s,c)&&e(o,s,c);return r(o,s),o},i=j&&j.__exportStar||function(s,o){for(var c in s)c!=="default"&&!o.hasOwnProperty(c)&&e(o,s,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=n(nx),i(P0,t),i(fu,t)})(rx);var q0=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(T0,"__esModule",{value:!0});const cg=Do,sa=q0(os),Ei=rx,tl=df,b9=q0(lg.exports),v9=Rl.exports,w9=q0(gs);class _9 extends w9.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new Ei.keyStores.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=Ei.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var r;const n=await this.providerInstance,[i,s]=e.split(":"),o=await n.txStatusReceipts((0,tl.decode)(s),i),c=await n.block(o.transaction_outcome.block_hash),u=(await n.block({finality:"final"})).header.height;if(o.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const h=(r=o.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&r!==void 0?r:0;return{from:i,to:o.transaction.receiver_id,amount:new sa.default(h),blockHeight:new sa.default(c.header.height),pending:!1,confirmed:u-c.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:(0,tl.encode)(e);return(0,tl.decode)(r.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new cg.NearSigner(this.keyPair.secretKey)}async verify(e,r,n){return cg.NearSigner.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new sa.default(e.sync_info.latest_block_height)}async getFee(e,r){const n=await this.providerInstance.gasPrice(null);return new sa.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,o=Ei.utils.serialize.base_decode(i.block_hash),c=[Ei.transactions.transfer(new b9.default(new sa.default(e).toString()))],u=Ei.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,c,o),h=Ei.utils.serialize.serialize(Ei.transactions.SCHEMA,u),p=new Uint8Array(v9.sha256.array(h)),m=this.keyPair.sign(p);return{tx:new Ei.transactions.SignedTransaction({transaction:u,signature:new Ei.transactions.Signature({keyType:u.publicKey.keyType,data:m.signature})}),txId:void 0}}async getPublicKey(){return V.Buffer.from(this.keyPair.getPublicKey().data)}}T0.default=_9;var H0={},E9=j&&j.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A9=j&&j.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S9=j&&j.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&E9(e,t,r);return A9(e,t),e},uu=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(H0,"__esModule",{value:!0});const fg=Do,so=uu(os),T9=uu(gs),oa=S9(Nx),k9=uu(df),M9=uu(eu);class P9 extends T9.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new oa.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed"),s=new so.default(n.meta.postBalances[1]).minus(new so.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new so.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=V.Buffer.from(e)),k9.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new fg.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,r,n){return fg.HexInjectedSolanaSigner.verify(e,r,n)}async getCurrentHeight(){return new so.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,r){return new so.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new oa.PublicKey(await this.getPublicKey()),s=await(0,M9.default)(async c=>{var u;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(h){throw!((u=h.message)===null||u===void 0)&&u.includes("blockhash")?h:(c(h),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new oa.Transaction({recentBlockhash:s,feePayer:i});return o.add(oa.SystemProgram.transfer({fromPubkey:i,toPubkey:new oa.PublicKey(r),lamports:+new so.default(e).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}H0.default=P9;var Px={};(function(t){var e=j&&j.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const r=e(os),n=Vf,i=gs,s=e(iu);class o extends s.default{constructor(u){super(u),this.contractAddress=u.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(u){const h=await this.providerInstance.getTransaction(u);if(!h)throw new Error("Tx doesn't exist");if(h.data.length!==138||h.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const p=`0x${h.data.slice(34,74)}`,m=new r.default(h.data.slice(74),16);return{from:h.from,to:p,blockHeight:h.blockNumber?new r.default(h.blockNumber):null,amount:m,pending:!h.blockNumber,confirmed:h.confirmations>=this.minConfirm}}async getFee(u,h){const p="0x"+new r.default(u).toString(16),m=await this.getContract(),_=await this.providerInstance.getGasPrice(),S=await m.estimateGas.transfer(h,p),B=new r.default(_.mul(S).toString()),[T]=await this.getGas(),A=T.multipliedBy(B),P=new r.default(await this.price());return new r.default(A).dividedToIntegerBy(P)}async createTx(u,h,p){const m=await this.getContract(),_="0x"+new r.default(u).toString(16),S=await m.populateTransaction.transfer(h,_);return S.gasPrice=await this.providerInstance.getGasPrice(),S.gasLimit=await m.estimateGas.transfer(h,_),S.chainId=(await this.providerInstance.getNetwork()).chainId,S.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:S}}async getGas(){return[new r.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}t.default=o,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})(Px);var Ho=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(A0,"__esModule",{value:!0});const oo=Ho(iu),C9=Ho(T0),I9=Ho(H0),N9=Ho(Px),B9=Ho(Kl),R9=Ho(Hs);function O9(t,e,r,n){switch(t){case"ethereum":return new oo.default({name:"ethereum",ticker:"ETH",providerUrl:r??"https://cloudflare-eth.com/",wallet:e});case"matic":return new oo.default({name:"matic",ticker:"MATIC",providerUrl:r??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new oo.default({name:"arbitrum",ticker:"ETH",providerUrl:r??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new oo.default({name:"bnb",ticker:"BNB",providerUrl:r??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new oo.default({name:"avalanche",ticker:"AVAX",providerUrl:r??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new oo.default({name:"boba-eth",ticker:"ETH",providerUrl:r??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new N9.default({name:"boba",ticker:"BOBA",providerUrl:r??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const o=await B9.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await R9.default.checkAndThrow(o,"Getting price data"),!(!((s=o==null?void 0:o.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+o.data.rate},i}case"solana":return new I9.default({name:"solana",ticker:"SOL",providerUrl:r??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new C9.default({name:"near",ticker:"NEAR",providerUrl:r??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${t}`)}}A0.default=O9;var zo=j&&j.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vc,"__esModule",{value:!0});const D9=zo(Dl),U9=zo(ql),L9=zo(_0),F9=zo(ec),$9=zo(Hs),j9=zo(A0);class K9 extends U9.default{constructor(e,r,n,i){var s;super();const o=new URL(e);this.api=new D9.default({protocol:o.protocol.slice(0,-1),port:o.port,host:o.hostname,timeout:(s=i==null?void 0:i.timeout)!==null&&s!==void 0?s:1e5}),this.currency=r.toLowerCase(),this.currencyConfig=(0,j9.default)(r,n,i==null?void 0:i.providerUrl,i==null?void 0:i.contractAddress),this.utils=new $9.default(this.api,this.currency,this.currencyConfig),this.uploader=new F9.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new L9.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}Vc.default=K9;(function(t){var e=j&&j.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var r=Vc;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e(r).default}});var n=Vc;Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Ol);var q9=Bx(Ol),J9=Kx({__proto__:null,default:q9},[Ol]);export{J9 as i};
