import{bW as V,e2 as nv,bV as Cd,cR as Ho,e3 as D_,cT as iv,cV as At,cQ as bl,e4 as U_,e5 as F_,bX as $_}from"./index.8041a8a0.js";import{b as j_,r as Sn,e as q_,s as K_}from"./TokenManagePage.bfd461f3.js";import{u as af,i as en,a as z_}from"./defineProperty.ff620672.js";import{s as Nd}from"./sha256.69c21d79.js";import{r as H_}from"./pako.esm.edd8a1b7.js";function G_(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var ff={exports:{}},Ca=typeof Reflect=="object"?Reflect:null,dy=Ca&&typeof Ca.apply=="function"?Ca.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Pc;Ca&&typeof Ca.ownKeys=="function"?Pc=Ca.ownKeys:Object.getOwnPropertySymbols?Pc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Pc=function(e){return Object.getOwnPropertyNames(e)};function V_(t){console&&console.warn&&console.warn(t)}var sv=Number.isNaN||function(e){return e!==e};function nr(){nr.init.call(this)}ff.exports=nr;ff.exports.once=Z_;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var py=10;function xl(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return py},set:function(t){if(typeof t!="number"||t<0||sv(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");py=t}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||sv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ov(t){return t._maxListeners===void 0?nr.defaultMaxListeners:t._maxListeners}nr.prototype.getMaxListeners=function(){return ov(this)};nr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var p=s[e];if(p===void 0)return!1;if(typeof p=="function")dy(p,this,r);else for(var b=p.length,x=lv(p,b),n=0;n<b;++n)dy(x[n],this,r);return!0};function av(t,e,r,n){var i,s,o;if(xl(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=ov(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=o.length,V_(f)}return t}nr.prototype.addListener=function(e,r){return av(this,e,r,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(e,r){return av(this,e,r,!0)};function W_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fv(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=W_.bind(n);return i.listener=r,n.wrapFn=i,i}nr.prototype.once=function(e,r){return xl(r),this.on(e,fv(this,e,r)),this};nr.prototype.prependOnceListener=function(e,r){return xl(r),this.prependListener(e,fv(this,e,r)),this};nr.prototype.removeListener=function(e,r){var n,i,s,o,f;if(xl(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){f=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():J_(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||r)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function uv(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Y_(i):lv(i,i.length)}nr.prototype.listeners=function(e){return uv(this,e,!0)};nr.prototype.rawListeners=function(e){return uv(this,e,!1)};nr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):cv.call(t,e)};nr.prototype.listenerCount=cv;function cv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?Pc(this._events):[]};function lv(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function J_(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Y_(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Z_(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}hv(t,e,s,{once:!0}),e!=="error"&&X_(t,i,{once:!0})})}function X_(t,e,r){typeof t.on=="function"&&hv(t,"error",e,r)}function hv(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Bd={},Jc={},Od={},Ld={exports:{}},dv=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},Q_=dv,oo=Object.prototype.toString;function Dd(t){return Array.isArray(t)}function W0(t){return typeof t>"u"}function e3(t){return t!==null&&!W0(t)&&t.constructor!==null&&!W0(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function pv(t){return oo.call(t)==="[object ArrayBuffer]"}function t3(t){return oo.call(t)==="[object FormData]"}function r3(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&pv(t.buffer),e}function n3(t){return typeof t=="string"}function i3(t){return typeof t=="number"}function gv(t){return t!==null&&typeof t=="object"}function kc(t){if(oo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function s3(t){return oo.call(t)==="[object Date]"}function o3(t){return oo.call(t)==="[object File]"}function a3(t){return oo.call(t)==="[object Blob]"}function yv(t){return oo.call(t)==="[object Function]"}function f3(t){return gv(t)&&yv(t.pipe)}function u3(t){return oo.call(t)==="[object URLSearchParams]"}function c3(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function l3(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ud(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Dd(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function J0(){var t={};function e(i,s){kc(t[s])&&kc(i)?t[s]=J0(t[s],i):kc(i)?t[s]=J0({},i):Dd(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Ud(arguments[r],e);return t}function h3(t,e,r){return Ud(e,function(i,s){r&&typeof i=="function"?t[s]=Q_(i,r):t[s]=i}),t}function d3(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Nn={isArray:Dd,isArrayBuffer:pv,isBuffer:e3,isFormData:t3,isArrayBufferView:r3,isString:n3,isNumber:i3,isObject:gv,isPlainObject:kc,isUndefined:W0,isDate:s3,isFile:o3,isBlob:a3,isFunction:yv,isStream:f3,isURLSearchParams:u3,isStandardBrowserEnv:l3,forEach:Ud,merge:J0,extend:h3,trim:c3,stripBOM:d3},ca=Nn;function gy(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mv=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ca.isURLSearchParams(r))i=r.toString();else{var s=[];ca.forEach(r,function(p,b){p===null||typeof p>"u"||(ca.isArray(p)?b=b+"[]":p=[p],ca.forEach(p,function(_){ca.isDate(_)?_=_.toISOString():ca.isObject(_)&&(_=JSON.stringify(_)),s.push(gy(b)+"="+gy(_))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},p3=Nn;function wl(){this.handlers=[]}wl.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};wl.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};wl.prototype.forEach=function(e){p3.forEach(this.handlers,function(n){n!==null&&e(n)})};var g3=wl,y3=Nn,m3=function(e,r){y3.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},vv=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},v3=vv,bv=function(e,r,n,i,s){var o=new Error(e);return v3(o,r,n,i,s)},b3=bv,x3=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(b3("Request failed with status code "+n.status,n.config,null,n.request,n))},ac=Nn,w3=ac.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,f){var p=[];p.push(r+"="+encodeURIComponent(n)),ac.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),ac.isString(s)&&p.push("path="+s),ac.isString(o)&&p.push("domain="+o),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),_3=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},E3=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},A3=_3,S3=E3,M3=function(e,r){return e&&!A3(r)?S3(e,r):r},Dh=Nn,T3=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],P3=function(e){var r={},n,i,s;return e&&Dh.forEach(e.split(`
`),function(f){if(s=f.indexOf(":"),n=Dh.trim(f.substr(0,s)).toLowerCase(),i=Dh.trim(f.substr(s+1)),n){if(r[n]&&T3.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},yy=Nn,k3=yy.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var f=yy.isString(o)?i(o):o;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}();function Fd(t){this.message=t}Fd.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Fd.prototype.__CANCEL__=!0;var _l=Fd,fc=Nn,I3=x3,R3=w3,C3=mv,N3=M3,B3=P3,O3=k3,Uh=bv,L3=Al,D3=_l,my=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,f=e.responseType,p;function b(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}fc.isFormData(s)&&delete o["Content-Type"];var x=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(_+":"+S)}var M=N3(e.baseURL,e.url);x.open(e.method.toUpperCase(),C3(M,e.params,e.paramsSerializer),!0),x.timeout=e.timeout;function N(){if(!!x){var I="getAllResponseHeaders"in x?B3(x.getAllResponseHeaders()):null,C=!f||f==="text"||f==="json"?x.responseText:x.response,D={data:C,status:x.status,statusText:x.statusText,headers:I,config:e,request:x};I3(function(j){n(j),b()},function(j){i(j),b()},D),x=null}}if("onloadend"in x?x.onloadend=N:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(N)},x.onabort=function(){!x||(i(Uh("Request aborted",e,"ECONNABORTED",x)),x=null)},x.onerror=function(){i(Uh("Network Error",e,null,x)),x=null},x.ontimeout=function(){var C=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",D=e.transitional||L3.transitional;e.timeoutErrorMessage&&(C=e.timeoutErrorMessage),i(Uh(C,e,D.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",x)),x=null},fc.isStandardBrowserEnv()){var k=(e.withCredentials||O3(M))&&e.xsrfCookieName?R3.read(e.xsrfCookieName):void 0;k&&(o[e.xsrfHeaderName]=k)}"setRequestHeader"in x&&fc.forEach(o,function(C,D){typeof s>"u"&&D.toLowerCase()==="content-type"?delete o[D]:x.setRequestHeader(D,C)}),fc.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),f&&f!=="json"&&(x.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&x.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(I){!x||(i(!I||I&&I.type?new D3("canceled"):I),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),s||(s=null),x.send(s)})},Vr=Nn,vy=m3,U3=vv,F3={"Content-Type":"application/x-www-form-urlencoded"};function by(t,e){!Vr.isUndefined(t)&&Vr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function $3(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=my),t}function j3(t,e,r){if(Vr.isString(t))try{return(e||JSON.parse)(t),Vr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var El={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:$3(),transformRequest:[function(e,r){return vy(r,"Accept"),vy(r,"Content-Type"),Vr.isFormData(e)||Vr.isArrayBuffer(e)||Vr.isBuffer(e)||Vr.isStream(e)||Vr.isFile(e)||Vr.isBlob(e)?e:Vr.isArrayBufferView(e)?e.buffer:Vr.isURLSearchParams(e)?(by(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Vr.isObject(e)||r&&r["Content-Type"]==="application/json"?(by(r,"application/json"),j3(e)):e}],transformResponse:[function(e){var r=this.transitional||El.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Vr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?U3(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Vr.forEach(["delete","get","head"],function(e){El.headers[e]={}});Vr.forEach(["post","put","patch"],function(e){El.headers[e]=Vr.merge(F3)});var Al=El,q3=Nn,K3=Al,z3=function(e,r,n){var i=this||K3;return q3.forEach(n,function(o){e=o.call(i,e,r)}),e},xv=function(e){return!!(e&&e.__CANCEL__)},xy=Nn,Fh=z3,H3=xv,G3=Al,V3=_l;function $h(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new V3("canceled")}var W3=function(e){$h(e),e.headers=e.headers||{},e.data=Fh.call(e,e.data,e.headers,e.transformRequest),e.headers=xy.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),xy.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||G3.adapter;return r(e).then(function(i){return $h(e),i.data=Fh.call(e,i.data,i.headers,e.transformResponse),i},function(i){return H3(i)||($h(e),i&&i.response&&(i.response.data=Fh.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Dn=Nn,wv=function(e,r){r=r||{};var n={};function i(x,_){return Dn.isPlainObject(x)&&Dn.isPlainObject(_)?Dn.merge(x,_):Dn.isPlainObject(_)?Dn.merge({},_):Dn.isArray(_)?_.slice():_}function s(x){if(Dn.isUndefined(r[x])){if(!Dn.isUndefined(e[x]))return i(void 0,e[x])}else return i(e[x],r[x])}function o(x){if(!Dn.isUndefined(r[x]))return i(void 0,r[x])}function f(x){if(Dn.isUndefined(r[x])){if(!Dn.isUndefined(e[x]))return i(void 0,e[x])}else return i(void 0,r[x])}function p(x){if(x in r)return i(e[x],r[x]);if(x in e)return i(void 0,e[x])}var b={url:o,method:o,data:o,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p};return Dn.forEach(Object.keys(e).concat(Object.keys(r)),function(_){var S=b[_]||s,M=S(_);Dn.isUndefined(M)&&S!==p||(n[_]=M)}),n},_v={version:"0.25.0"},J3=_v.version,$d={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){$d[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var wy={};$d.transitional=function(e,r,n){function i(s,o){return"[Axios v"+J3+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,f){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!wy[o]&&(wy[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,f):!0}};function Y3(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var f=t[s],p=f===void 0||o(f,s,t);if(p!==!0)throw new TypeError("option "+s+" must be "+p);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Z3={assertOptions:Y3,validators:$d},Ev=Nn,X3=mv,_y=g3,Ey=W3,Sl=wv,Av=Z3,la=Av.validators;function Su(t){this.defaults=t,this.interceptors={request:new _y,response:new _y}}Su.prototype.request=function(e,r){if(typeof e=="string"?(r=r||{},r.url=e):r=e||{},!r.url)throw new Error("Provided config url is not valid");r=Sl(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Av.assertOptions(n,{silentJSONParsing:la.transitional(la.boolean),forcedJSONParsing:la.transitional(la.boolean),clarifyTimeoutError:la.transitional(la.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(r)===!1||(s=s&&M.synchronous,i.unshift(M.fulfilled,M.rejected))});var o=[];this.interceptors.response.forEach(function(M){o.push(M.fulfilled,M.rejected)});var f;if(!s){var p=[Ey,void 0];for(Array.prototype.unshift.apply(p,i),p=p.concat(o),f=Promise.resolve(r);p.length;)f=f.then(p.shift(),p.shift());return f}for(var b=r;i.length;){var x=i.shift(),_=i.shift();try{b=x(b)}catch(S){_(S);break}}try{f=Ey(b)}catch(S){return Promise.reject(S)}for(;o.length;)f=f.then(o.shift(),o.shift());return f};Su.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Sl(this.defaults,e),X3(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ev.forEach(["delete","get","head","options"],function(e){Su.prototype[e]=function(r,n){return this.request(Sl(n||{},{method:e,url:r,data:(n||{}).data}))}});Ev.forEach(["post","put","patch"],function(e){Su.prototype[e]=function(r,n,i){return this.request(Sl(i||{},{method:e,url:r,data:n}))}});var Q3=Su,e6=_l;function qa(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new e6(i),e(r.reason))})}qa.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};qa.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};qa.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};qa.source=function(){var e,r=new qa(function(i){e=i});return{token:r,cancel:e}};var t6=qa,r6=function(e){return function(n){return e.apply(null,n)}},n6=Nn,i6=function(e){return n6.isObject(e)&&e.isAxiosError===!0},Ay=Nn,s6=dv,Ic=Q3,o6=wv,a6=Al;function Sv(t){var e=new Ic(t),r=s6(Ic.prototype.request,e);return Ay.extend(r,Ic.prototype,e),Ay.extend(r,e),r.create=function(i){return Sv(o6(t,i))},r}var ns=Sv(a6);ns.Axios=Ic;ns.Cancel=_l;ns.CancelToken=t6;ns.isCancel=xv;ns.VERSION=_v.version;ns.all=function(e){return Promise.all(e)};ns.spread=r6;ns.isAxiosError=i6;Ld.exports=ns;Ld.exports.default=ns;var jd=Ld.exports,f6=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Od,"__esModule",{value:!0});const u6=f6(jd);class c6{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=u6.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response:   ${r.config.url} - ${r.status}`),r))),e}}Od.default=c6;var qd={},Ml={},Mu={},Ei={},Tu={},hr={},l6=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h6=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d6=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&l6(e,t,r);return h6(e,t),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.b64UrlDecode=hr.b64UrlEncode=hr.bufferTob64Url=hr.bufferTob64=hr.b64UrlToBuffer=hr.stringToB64Url=hr.stringToBuffer=hr.bufferToString=hr.b64UrlToString=hr.concatBuffers=void 0;const Mv=d6(nv);function p6(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}hr.concatBuffers=p6;function g6(t){let e=kv(t);return Tv(e)}hr.b64UrlToString=g6;function Tv(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}hr.bufferToString=Tv;function Pv(t){return new TextEncoder().encode(t)}hr.stringToBuffer=Pv;function y6(t){return Rv(Pv(t))}hr.stringToB64Url=y6;function kv(t){return new Uint8Array(Mv.toByteArray(Nv(t)))}hr.b64UrlToBuffer=kv;function Iv(t){return Mv.fromByteArray(new Uint8Array(t))}hr.bufferTob64=Iv;function Rv(t){return Cv(Iv(t))}hr.bufferTob64Url=Rv;function Cv(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}hr.b64UrlEncode=Cv;function Nv(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}hr.b64UrlDecode=Nv;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.isBrowser=Nr.arraybufferEqual=Nr.byteArrayToLong=Nr.longTo32ByteArray=Nr.longTo16ByteArray=Nr.shortTo2ByteArray=Nr.longTo8ByteArray=void 0;function m6(t){const e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Nr.longTo8ByteArray=m6;function v6(t){if(t>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Nr.shortTo2ByteArray=v6;function b6(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return e}Nr.longTo16ByteArray=b6;function x6(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Nr.longTo32ByteArray=x6;function w6(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}Nr.byteArrayToLong=w6;function _6(t,e){const r=t.buffer,n=e.buffer;if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;const i=new DataView(r),s=new DataView(n);let o=r.byteLength;for(;o--;)if(i.getUint8(o)!==s.getUint8(o))return!1;return!0}Nr.arraybufferEqual=_6;Nr.isBrowser=typeof window<"u"&&typeof window.document<"u";var xs={},Go={},Ka={},Kd={},ao=Cd(j_);Object.defineProperty(Kd,"__esModule",{value:!0});const E6=ao;class A6{BigNum;constructor(){this.BigNum=(e,r)=>{let n=E6.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.comparedTo(i)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isLessThan(i)}isGreaterThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isGreaterThan(i)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}Kd.default=A6;var zd={};Object.defineProperty(zd,"__esModule",{value:!0});class S6{METHOD_GET="GET";METHOD_POST="POST";config;constructor(e){this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){return await this.request(e,{...r,method:this.METHOD_GET})}async post(e,r,n){var s;const i=new Headers((n==null?void 0:n.headers)||{});return(s=i.get("content-type"))!=null&&s.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof r!="string"?JSON.stringify(r):r,headers:i})}async request(e,r){var _;const n=new Headers((r==null?void 0:r.headers)||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=r==null?void 0:r.responseType;r==null||delete r.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let o=await fetch(`${i}/${e}`,{...r||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${o.url} - ${o.status}`);const f=o.headers.get("content-type"),p=(_=f==null?void 0:f.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i))==null?void 0:_[1],b=o,x=async()=>{if(p)try{b.data=new TextDecoder(p).decode(await o.arrayBuffer())}catch{b.data=await o.text()}else b.data=await o.text()};if(s==="arraybuffer")b.data=await o.arrayBuffer();else if(s==="text")await x();else if(s==="webstream")b.data=M6(o.body);else try{let S=await o.clone().json();typeof S!="object"?await x():b.data=await o.json(),S=null}catch{await x()}return b}}zd.default=S6;const M6=t=>{const e=t;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=T6(t),e):t},T6=function(t){return async function*(){const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)return;yield i}}finally{r.releaseLock()}}};var Hd={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.b64UrlDecode=Wt.b64UrlEncode=Wt.bufferTob64Url=Wt.bufferTob64=Wt.b64UrlToBuffer=Wt.stringToB64Url=Wt.stringToBuffer=Wt.bufferToString=Wt.b64UrlToString=Wt.concatBuffers=void 0;const Bv=nv;function P6(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Wt.concatBuffers=P6;function k6(t){let e=Dv(t);return Ov(e)}Wt.b64UrlToString=k6;function Ov(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Wt.bufferToString=Ov;function Lv(t){return new TextEncoder().encode(t)}Wt.stringToBuffer=Lv;function I6(t){return Fv(Lv(t))}Wt.stringToB64Url=I6;function Dv(t){return new Uint8Array(Bv.toByteArray(jv(t)))}Wt.b64UrlToBuffer=Dv;function Uv(t){return Bv.fromByteArray(new Uint8Array(t))}Wt.bufferTob64=Uv;function Fv(t){return $v(Uv(t))}Wt.bufferTob64Url=Fv;function $v(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Wt.b64UrlEncode=$v;function jv(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Wt.b64UrlDecode=jv;Object.defineProperty(Hd,"__esModule",{value:!0});const Bs=Wt;class R6{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),o=await this.driver.digest("SHA-256",r),f=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),p=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),b=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-o.byteLength-2},s,n,r);return f||p||b}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Bs.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Bs.stringToBuffer(n):Bs.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=new Uint8Array(16);crypto.getRandomValues(o);const f=await this.driver.encrypt({name:"AES-CBC",iv:o},s,e);return Bs.concatBuffers([o,f])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Bs.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Bs.stringToBuffer(n):Bs.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=e.slice(0,16),f=await this.driver.decrypt({name:"AES-CBC",iv:o},s,e.slice(16));return Bs.concatBuffers([f])}}Hd.default=R6;var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});class C6{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}Gd.default=C6;var Vd={},fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.getError=void 0;class N6 extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}fo.default=N6;function B6(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}fo.getError=B6;var Vo={},Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});const Un=Ka;async function qv(t){if(Array.isArray(t)){const n=Un.default.utils.concatBuffers([Un.default.utils.stringToBuffer("list"),Un.default.utils.stringToBuffer(t.length.toString())]);return await Kv(t,await Un.default.crypto.hash(n,"SHA-384"))}const e=Un.default.utils.concatBuffers([Un.default.utils.stringToBuffer("blob"),Un.default.utils.stringToBuffer(t.byteLength.toString())]),r=Un.default.utils.concatBuffers([await Un.default.crypto.hash(e,"SHA-384"),await Un.default.crypto.hash(t,"SHA-384")]);return await Un.default.crypto.hash(r,"SHA-384")}Tl.default=qv;async function Kv(t,e){if(t.length<1)return e;const r=Un.default.utils.concatBuffers([e,await qv(t[0])]),n=await Un.default.crypto.hash(r,"SHA-384");return await Kv(t.slice(1),n)}var Wd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=Ka,r=Wt;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(F){let z=[],Z=F,te=0;for(;Z.byteLength>=t.MAX_CHUNK_SIZE;){let ee=t.MAX_CHUNK_SIZE,pe=Z.byteLength-t.MAX_CHUNK_SIZE;pe>0&&pe<t.MIN_CHUNK_SIZE&&(ee=Math.ceil(Z.byteLength/2));const T=Z.slice(0,ee),h=await e.default.crypto.hash(T);te+=T.byteLength,z.push({dataHash:h,minByteRange:te-T.byteLength,maxByteRange:te}),Z=Z.slice(ee)}return z.push({dataHash:await e.default.crypto.hash(Z),minByteRange:te,maxByteRange:te+Z.byteLength}),z}t.chunkData=s;async function o(F){return Promise.all(F.map(async({dataHash:z,minByteRange:Z,maxByteRange:te})=>({type:"leaf",id:await k(await Promise.all([k(z),k(I(te))])),dataHash:z,minByteRange:Z,maxByteRange:te})))}t.generateLeaves=o;async function f(F){return(await p(F)).id}t.computeRootHash=f;async function p(F){return await x(await o(await s(F)))}t.generateTree=p;async function b(F){const z=await s(F),Z=await o(z),te=await x(Z),ee=await _(te),pe=z.slice(-1)[0];return pe.maxByteRange-pe.minByteRange===0&&(z.splice(z.length-1,1),ee.splice(ee.length-1,1)),{data_root:te.id,chunks:z,proofs:ee}}t.generateTransactionChunks=b;async function x(F,z=0){if(F.length<2)return F[0];const Z=[];for(let te=0;te<F.length;te+=2)Z.push(await N(F[te],F[te+1]));return x(Z,z+1)}t.buildLayers=x;function _(F){const z=S(F);return Array.isArray(z)?M(z):[z]}t.generateProofs=_;function S(F,z=new Uint8Array,Z=0){if(F.type=="leaf")return{offset:F.maxByteRange-1,proof:(0,r.concatBuffers)([z,F.dataHash,I(F.maxByteRange)])};if(F.type=="branch"){const te=(0,r.concatBuffers)([z,F.leftChild.id,F.rightChild.id,I(F.byteRange)]);return[S(F.leftChild,te,Z+1),S(F.rightChild,te,Z+1)]}throw new Error("Unexpected node type")}function M(F){const z=[];return F.forEach(Z=>{Array.isArray(Z)?z.push(...M(Z)):z.push(Z)}),z}t.arrayFlatten=M;async function N(F,z){return z?{type:"branch",id:await k([await k(F.id),await k(z.id),await k(I(F.maxByteRange))]),byteRange:F.maxByteRange,maxByteRange:z.maxByteRange,leftChild:F,rightChild:z}:F}async function k(F){return Array.isArray(F)&&(F=e.default.utils.concatBuffers(F)),new Uint8Array(await e.default.crypto.hash(F))}function I(F){const z=new Uint8Array(n);for(var Z=z.length-1;Z>=0;Z--){var te=F%256;z[Z]=te,F=(F-te)/256}return z}t.intToBuffer=I;function C(F){let z=0;for(var Z=0;Z<F.length;Z++)z*=256,z+=F[Z];return z}t.bufferToInt=C;const D=(F,z)=>F.every((Z,te)=>z[te]===Z);t.arrayCompare=D;async function $(F,z,Z,te,ee){if(te<=0)return!1;if(z>=te)return $(F,0,te-1,te,ee);if(z<0)return $(F,0,0,te,ee);if(ee.length==i+n){const y=ee.slice(0,i),m=ee.slice(y.length,y.length+n),w=await k([await k(y),await k(m)]);return(0,t.arrayCompare)(F,w)?{offset:te-1,leftBound:Z,rightBound:te,chunkSize:te-Z}:!1}const pe=ee.slice(0,i),T=ee.slice(pe.length,pe.length+i),h=ee.slice(pe.length+T.length,pe.length+T.length+n),c=C(h),a=ee.slice(pe.length+T.length+h.length),u=await k([await k(pe),await k(T),await k(h)]);return(0,t.arrayCompare)(F,u)?z<c?await $(pe,z,Z,Math.min(te,c),a):await $(T,z,Math.max(Z,c),te,a):!1}t.validatePath=$;async function j(F,z=""){if(F.byteLength<1)return z;const Z=F.slice(0,i),te=F.slice(Z.length,Z.length+i),ee=F.slice(Z.length+te.length,Z.length+te.length+n),pe=C(ee),T=F.slice(Z.length+te.length+ee.length),h=await k([await k(Z),await k(te),await k(ee)]),c=`${z}
${JSON.stringify(Buffer.from(Z))},${JSON.stringify(Buffer.from(te))},${pe} => ${JSON.stringify(h)}`;return j(T,c)}t.debug=j})(Wd);Object.defineProperty(Vo,"__esModule",{value:!0});Vo.Tag=void 0;const Lr=Wt,O6=Tl,L6=Wd;class zv{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?Lr.bufferToString(this[e]):r&&r.decode&&!r.string?this[e]:Lr.bufferTob64Url(this[e]);if(this[e]instanceof Array){if((r==null?void 0:r.decode)!==void 0||(r==null?void 0:r.string)!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?Lr.b64UrlToString(this[e]):Lr.b64UrlToBuffer(this[e]):this[e]}}class Y0 extends zv{name;value;constructor(e,r,n=!1){super(),this.name=e,this.value=r}}Vo.Tag=Y0;class D6 extends zv{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(e={}){super(),Object.assign(this,e),typeof this.data=="string"&&(this.data=Lr.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(r=>new Y0(r.name,r.value)))}addTag(e,r){this.tags.push(new Y0(Lr.stringToB64Url(e),Lr.stringToB64Url(r)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Lr.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:r,reward:n,tags:i,signature:s}){this.id=e,this.owner=r,n&&(this.reward=n),i&&(this.tags=i),this.signature=s}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,L6.generateTransactionChunks)(e),this.data_root=Lr.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:Lr.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:Lr.bufferTob64Url(r.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>Lr.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return Lr.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),Lr.stringToBuffer(this.quantity),Lr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const r=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,O6.default)([Lr.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),Lr.stringToBuffer(this.quantity),Lr.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),r,Lr.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}Vo.default=D6;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.TransactionUploader=void 0;const Sy=Vo,U6=Wt,jh=fo,F6=Wd,My=1,$6=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Ty=1e3*40;class Jd{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,r){if(this.api=e,!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.data=r.data,this.transaction=new Sy.default(Object.assign({},r,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Ty-Date.now(),Ty);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(o=>setTimeout(o,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,F6.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),U6.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(o=>(console.error(o.message),{status:-1,data:{error:o.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,jh.getError)(s),$6.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,r,n){if(!r||typeof r.chunkIndex!="number"||typeof r.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Sy.default(r.transaction);i.chunks||await i.prepareChunks(n);const s=new Jd(e,i);if(s.chunkIndex=r.chunkIndex,s.lastRequestTimeEnd=r.lastRequestTimeEnd,s.lastResponseError=r.lastResponseError,s.lastResponseStatus=r.lastResponseStatus,s.txPosted=r.txPosted,s.data=n,s.transaction.data_root!==r.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=My){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=My;return}throw this.lastResponseError=(0,jh.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=(0,jh.getError)(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}Pl.TransactionUploader=Jd;Object.defineProperty(Vd,"__esModule",{value:!0});const qh=fo,hs=Vo,If=Wt,Kh=Pl;class j6{api;crypto;chunks;constructor(e,r,n){this.api=e,this.crypto=r,this.chunks=n}async getTransactionAnchor(){const e=await this.api.get("tx_anchor");if(!e.data.match(/^[a-z0-9_-]{43,}/i)||!e.ok)throw new Error(`Could not getTransactionAnchor. Received: ${e.data}. Status: ${e.status}, ${e.statusText}`);return e.data}async getPrice(e,r){let n=r?`price/${e}/${r}`:`price/${e}`;const i=await this.api.get(n);if(!/^\d+$/.test(i.data)||!i.ok)throw new Error(`Could not getPrice. Received: ${i.data}. Status: ${i.status}, ${i.statusText}`);return i.data}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new hs.default({...r.data,data:i})}return new hs.default({...r.data,format:r.data.format||1})}throw r.status==404?new qh.default("TX_NOT_FOUND"):r.status==410?new qh.default("TX_FAILED"):new qh.default("TX_INVALID")}fromRaw(e){return new hs.default(e)}async search(e,r){return this.api.post("arql",{op:"equals",expr1:e,expr2:r}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status==200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e,r){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{const{data:i,ok:s,status:o,statusText:f}=await this.api.get(`/${e}`,{responseType:"arraybuffer"});if(!s)throw new Error("Bad http status code",{cause:{status:o,statusText:f}});n=i}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} data was not found!`);return r&&r.decode&&!r.string?n:r&&r.decode&&r.string?If.bufferToString(n):If.bufferTob64Url(n)}async sign(e,r,n){const s=typeof r=="object"&&(f=>{let p=!0;return["n","e","d","p","q","dp","dq","qi"].map(b=>!(b in f)&&(p=!1)),p})(r),o=typeof arweaveWallet=="object";if(!s&&!o)throw new Error("No valid JWK or external wallet found to sign transaction.");if(s){e.setOwner(r.n);let f=await e.getSignatureData(),p=await this.crypto.sign(r,f,n),b=await this.crypto.hash(p);e.setSignature({id:If.bufferTob64Url(b),owner:r.n,signature:If.bufferTob64Url(p)})}else if(o){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const f=await arweaveWallet.sign(e,n);e.setSignature({id:f.id,owner:f.owner,reward:f.reward,tags:f.tags,signature:f.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=If.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new hs.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new hs.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof hs.default)&&(e=new hs.default(e)),!(e instanceof hs.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof hs.default){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new Kh.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await Kh.TransactionUploader.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Kh.TransactionUploader.fromSerialized(this.api,e,r)}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}Vd.default=j6;var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});const Py=Wt;class q6{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Py.bufferTob64Url(await this.crypto.hash(Py.b64UrlToBuffer(e)))}}Yd.default=q6;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.SiloResource=void 0;const ky=Wt;class K6{api;crypto;transactions;constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],i=Math.pow(2,parseInt(r[2])),s=await this.hash(ky.stringToBuffer(n),i),o=ky.bufferTob64(s.slice(0,15)),f=await this.hash(s.slice(16,31),1);return new Hv(e,o,f)}async hash(e,r){let n=await this.crypto.hash(e);for(let i=0;i<r-1;i++)n=await this.crypto.hash(n);return n}}Pu.default=K6;class Hv{uri;accessKey;encryptionKey;constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}Pu.SiloResource=Hv;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});const Iy=fo,z6=Wt;class H6{api;constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,Iy.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,Iy.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return z6.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,o=new Uint8Array(n);let f=0;for(;f<n;){this.api.config.logging&&console.log(`[chunk] ${f}/${n}`);let p;try{p=await this.getChunkData(s+f)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+f}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(p)o.set(p,f),f+=p.length;else throw new Error(`Couldn't complete data download at ${f}/${n}`)}return o}}Zd.default=H6;var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});const Ry=fo;class Yc{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${Yc.HASH_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new Ry.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`${Yc.HEIGHT_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new Ry.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}Xd.default=Yc;Object.defineProperty(Ka,"__esModule",{value:!0});const G6=Kd,V6=zd,W6=Hd,J6=Gd,Y6=Vd,Z6=Yd,Cy=Vo,Rf=Wt,X6=Pu,Q6=Zd,e4=Xd;class Ta{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new W6.default;static utils=Rf;constructor(e){this.api=new V6.default(e),this.wallets=new Z6.default(this.api,Ta.crypto),this.chunks=new Q6.default(this.api),this.transactions=new Y6.default(this.api,Ta.crypto,this.chunks),this.silo=new X6.default(this.api,this.crypto,this.transactions),this.network=new J6.default(this.api),this.blocks=new e4.default(this.api,this.network),this.ar=new G6.default}get crypto(){return Ta.crypto}get utils(){return Ta.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Rf.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new Cy.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,r,n){const i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!r||!r.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=r.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());const s=await this.silo.parseUri(n);if(typeof e.data=="string"){const f=await this.crypto.encrypt(Rf.stringToBuffer(e.data),s.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Rf.bufferTob64Url(f)}if(e.data instanceof Uint8Array){const f=await this.crypto.encrypt(e.data,s.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Rf.bufferTob64Url(f)}const o=new Cy.default(i);return o.addTag("Silo-Name",s.getAccessKey()),o.addTag("Silo-Version","0.1.0"),o}arql(e){return this.api.post("/arql",e).then(r=>r.data||[])}}Ka.default=Ta;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.getDefaultConfig=void 0;const t4=(t,e)=>{const r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||t=="file"||s.includes(i)||!!e.match(r)||!!i.match(r)},r4=t=>{const e=t.charAt(0)==="[",r=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!t.match(r)||e},n4=(t,e)=>{if(t4(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!r4(e)){let r=e.split(".");if(r.length>=3){r.shift();const n=r.join(".");return{protocol:t,host:n}}}return{protocol:t,host:e}};kl.getDefaultConfig=n4;(function(t){var e=V&&V.__createBinding||(Object.create?function(s,o,f,p){p===void 0&&(p=f);var b=Object.getOwnPropertyDescriptor(o,f);(!b||("get"in b?!o.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return o[f]}}),Object.defineProperty(s,p,b)}:function(s,o,f,p){p===void 0&&(p=f),s[p]=o[f]}),r=V&&V.__exportStar||function(s,o){for(var f in s)f!=="default"&&!Object.prototype.hasOwnProperty.call(o,f)&&e(o,s,f)};Object.defineProperty(t,"__esModule",{value:!0});const n=Ka,i=kl;n.default.init=function(s={}){const o={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...o});const f=location.protocol.replace(":",""),p=location.hostname,b=location.port?parseInt(location.port):f=="https"?443:80,x=(0,i.getDefaultConfig)(f,p),_=s.protocol||x.protocol,S=s.host||x.host,M=s.port||x.port||b;return new n.default({...s,host:S,protocol:_,port:M})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),r(Ka,t),t.default=n.default})(Go);var i4=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});xs.hashStream=xs.deepHashChunks=xs.deepHash=void 0;const Or=i4(Go),Gv=Sn;async function Vv(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Gv.createHash("sha384");let o=0;for await(const b of i)o+=b.byteLength,s.update(b);const f=Or.default.utils.concatBuffers([Or.default.utils.stringToBuffer("blob"),Or.default.utils.stringToBuffer(o.toString())]),p=Or.default.utils.concatBuffers([await Or.default.crypto.hash(f,"SHA-384"),s.digest()]);return await Or.default.crypto.hash(p,"SHA-384")}else if(Array.isArray(t)){const i=Or.default.utils.concatBuffers([Or.default.utils.stringToBuffer("list"),Or.default.utils.stringToBuffer(t.length.toString())]);return await Qd(t,await Or.default.crypto.hash(i,"SHA-384"))}const e=t,r=Or.default.utils.concatBuffers([Or.default.utils.stringToBuffer("blob"),Or.default.utils.stringToBuffer(e.byteLength.toString())]),n=Or.default.utils.concatBuffers([await Or.default.crypto.hash(r,"SHA-384"),await Or.default.crypto.hash(e,"SHA-384")]);return await Or.default.crypto.hash(n,"SHA-384")}xs.deepHash=Vv;async function Qd(t,e){if(t.length<1)return e;const r=Or.default.utils.concatBuffers([e,await Vv(t[0])]),n=await Or.default.crypto.hash(r,"SHA-384");return await Qd(t.slice(1),n)}xs.deepHashChunks=Qd;async function s4(t){const e=Gv.createHash("sha384");for await(const r of t)e.update(r);return e.digest()}xs.hashStream=s4;var o4=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a4=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),f4=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&o4(e,t,r);return a4(e,t),e};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.getSignatureData=void 0;const ha=hr,u4=Nr,c4=xs;async function l4(t){return u4.isBrowser?(await Promise.resolve().then(()=>f4(Tl))).default([ha.stringToBuffer("dataitem"),ha.stringToBuffer("1"),ha.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData]):c4.deepHash([ha.stringToBuffer("dataitem"),ha.stringToBuffer("1"),ha.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}Tu.getSignatureData=l4;var Il={},ki={exports:{}},ep={},tp={};Object.defineProperty(tp,"__esModule",{value:!0});function h4(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,o=r+s,f=Buffer.alloc(o);for(f.write(t);s--;)f.write("=",i++);return f.toString()}tp.default=h4;Object.defineProperty(ep,"__esModule",{value:!0});var d4=tp;function Wv(t,e){return e===void 0&&(e="utf8"),Buffer.isBuffer(t)?Z0(t.toString("base64")):Z0(Buffer.from(t,e).toString("base64"))}function p4(t,e){return e===void 0&&(e="utf8"),Buffer.from(rp(t),"base64").toString(e)}function rp(t){return t=t.toString(),d4.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function Z0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g4(t){return Buffer.from(rp(t),"base64")}var uf=Wv;uf.encode=Wv;uf.decode=p4;uf.toBase64=rp;uf.fromBase64=Z0;uf.toBuffer=g4;ep.default=uf;(function(t){t.exports=ep.default,t.exports.default=t.exports})(ki);var Rl={},np={},Jv={exports:{}},Yv={exports:{}};function y4(t){if(t!=="md5")throw new Error("only md5 is supported in the browser");return new ip}function ip(){this.data=void 0}ip.prototype.end=function(t){this.data=t};ip.prototype.read=function(){return b4(this.data)};function zh(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=fn(r,n,i,s,e[0],7,-680876936),s=fn(s,r,n,i,e[1],12,-389564586),i=fn(i,s,r,n,e[2],17,606105819),n=fn(n,i,s,r,e[3],22,-1044525330),r=fn(r,n,i,s,e[4],7,-176418897),s=fn(s,r,n,i,e[5],12,1200080426),i=fn(i,s,r,n,e[6],17,-1473231341),n=fn(n,i,s,r,e[7],22,-45705983),r=fn(r,n,i,s,e[8],7,1770035416),s=fn(s,r,n,i,e[9],12,-1958414417),i=fn(i,s,r,n,e[10],17,-42063),n=fn(n,i,s,r,e[11],22,-1990404162),r=fn(r,n,i,s,e[12],7,1804603682),s=fn(s,r,n,i,e[13],12,-40341101),i=fn(i,s,r,n,e[14],17,-1502002290),n=fn(n,i,s,r,e[15],22,1236535329),r=un(r,n,i,s,e[1],5,-165796510),s=un(s,r,n,i,e[6],9,-1069501632),i=un(i,s,r,n,e[11],14,643717713),n=un(n,i,s,r,e[0],20,-373897302),r=un(r,n,i,s,e[5],5,-701558691),s=un(s,r,n,i,e[10],9,38016083),i=un(i,s,r,n,e[15],14,-660478335),n=un(n,i,s,r,e[4],20,-405537848),r=un(r,n,i,s,e[9],5,568446438),s=un(s,r,n,i,e[14],9,-1019803690),i=un(i,s,r,n,e[3],14,-187363961),n=un(n,i,s,r,e[8],20,1163531501),r=un(r,n,i,s,e[13],5,-1444681467),s=un(s,r,n,i,e[2],9,-51403784),i=un(i,s,r,n,e[7],14,1735328473),n=un(n,i,s,r,e[12],20,-1926607734),r=cn(r,n,i,s,e[5],4,-378558),s=cn(s,r,n,i,e[8],11,-2022574463),i=cn(i,s,r,n,e[11],16,1839030562),n=cn(n,i,s,r,e[14],23,-35309556),r=cn(r,n,i,s,e[1],4,-1530992060),s=cn(s,r,n,i,e[4],11,1272893353),i=cn(i,s,r,n,e[7],16,-155497632),n=cn(n,i,s,r,e[10],23,-1094730640),r=cn(r,n,i,s,e[13],4,681279174),s=cn(s,r,n,i,e[0],11,-358537222),i=cn(i,s,r,n,e[3],16,-722521979),n=cn(n,i,s,r,e[6],23,76029189),r=cn(r,n,i,s,e[9],4,-640364487),s=cn(s,r,n,i,e[12],11,-421815835),i=cn(i,s,r,n,e[15],16,530742520),n=cn(n,i,s,r,e[2],23,-995338651),r=ln(r,n,i,s,e[0],6,-198630844),s=ln(s,r,n,i,e[7],10,1126891415),i=ln(i,s,r,n,e[14],15,-1416354905),n=ln(n,i,s,r,e[5],21,-57434055),r=ln(r,n,i,s,e[12],6,1700485571),s=ln(s,r,n,i,e[3],10,-1894986606),i=ln(i,s,r,n,e[10],15,-1051523),n=ln(n,i,s,r,e[1],21,-2054922799),r=ln(r,n,i,s,e[8],6,1873313359),s=ln(s,r,n,i,e[15],10,-30611744),i=ln(i,s,r,n,e[6],15,-1560198380),n=ln(n,i,s,r,e[13],21,1309151649),r=ln(r,n,i,s,e[4],6,-145523070),s=ln(s,r,n,i,e[11],10,-1120210379),i=ln(i,s,r,n,e[2],15,718787259),n=ln(n,i,s,r,e[9],21,-343485551),t[0]=Gs(r,t[0]),t[1]=Gs(n,t[1]),t[2]=Gs(i,t[2]),t[3]=Gs(s,t[3])}function Cl(t,e,r,n,i,s){return e=Gs(Gs(e,t),Gs(n,s)),Gs(e<<i|e>>>32-i,r)}function fn(t,e,r,n,i,s,o){return Cl(e&r|~e&n,t,e,i,s,o)}function un(t,e,r,n,i,s,o){return Cl(e&n|r&~n,t,e,i,s,o)}function cn(t,e,r,n,i,s,o){return Cl(e^r^n,t,e,i,s,o)}function ln(t,e,r,n,i,s,o){return Cl(r^(e|~n),t,e,i,s,o)}function m4(t){var e=t.length,r=[1732584193,-271733879,-1732584194,271733878],n;for(n=64;n<=t.length;n+=64)zh(r,v4(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(zh(r,i),n=0;n<16;n++)i[n]=0;return i[14]=e*8,zh(r,i),r}function v4(t){var e=[],r;for(r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e}function b4(t){var e=m4(t),r=Buffer.alloc?Buffer.alloc(16):new Buffer(16),n;for(n=0;n<4;n++)r.writeIntLE(e[n],n*4,4);return r}function Gs(t,e){return t+e&4294967295}var x4={createHash:y4},w4=x4,_4=af,E4=new Qv(4096);function lu(t){return typeof Buffer.alloc=="function"?Buffer.alloc(t):new Buffer(t)}function Zv(t,e){return typeof Buffer.from=="function"?Buffer.from(t,e):new Buffer(t,e)}function Xv(t){return t.charAt(0).toUpperCase()+t.slice(1)}function A4(t,e){return t===e?0:t<e?-1:1}function S4(t,e,r){var n=t[e];return n===void 0?r:n}function M4(t,e){e=e||"md5";var r=w4.createHash(e);return r.end(t),r.read()}function T4(t,e){var r=-1,n,i;if(!t)return-1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){if(r>=0)return-2;r=n}return r}function P4(t,e){var r={},n,i;for(n=0;n<t.length;n++)i=t[n],r[e(i)]=i;return r}function k4(t){return Object.keys(t).map(function(e){return t[e]})}function I4(t,e){var r={},n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],e&&(s=e(s)),r[s])return!0;r[s]=!0}return!1}function R4(t,e,r){var n=Object.getOwnPropertyNames(t),i,s,o;for(i=0,s=n.length;i<s;i++)if(o=n[i],!e.hasOwnProperty(o)||r){var f=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,f)}return e}function C4(t,e){e=e|0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function N4(){throw new Error("abstract")}function B4(t,e){var r=t.prototype,n,i,s,o;for(n=0,i=e.length;n<i;n++)s=e[n],o="get"+Xv(s),r[o]=_4.deprecate(f(s),"use `."+s+"` instead of `."+o+"()`");function f(p){return function(){var b=this[p];return typeof b=="function"?b.apply(this,arguments):b}}}function Qv(t){this._len=t|0,this._pos=0,this._slab=lu(this._len)}Qv.prototype.alloc=function(t){var e=this._len;return t>e?lu(t):(this._pos+t>e&&(this._slab=lu(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function Wo(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}Wo.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Wo.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};Wo.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};Wo.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")};Wo.prototype.nextBuffer=function(t){var e=[],r;for(r=0;r<t;r++)e.push(this.nextInt(256));return Zv(e)};Wo.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function sp(){this._index=0,this._items=[]}sp.prototype.push=function(t){var e=this._items,r=e.length|0,n;for(e.push(t);r>0&&e[r].index<e[n=r-1>>1].index;)t=e[r],e[r]=e[n],e[n]=t,r=n};sp.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n=e>>1,i=0,s,o,f,p,b,x,_;i<n&&(p=t[i],s=(i<<1)+1,o=i+1<<1,x=t[s],_=t[o],!_||x.index<=_.index?(b=x,f=s):(b=_,f=o),!(b.index>=p.index));)t[f]=p,t[i]=b,i=f;return r};function Pt(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}Pt.prototype.isValid=function(){return this.pos<=this.buf.length};Pt.prototype.readBoolean=function(){return!!this.buf[this.pos++]};Pt.prototype.skipBoolean=function(){this.pos++};Pt.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};Pt.prototype.readInt=Pt.prototype.readLong=function(){var t=0,e=0,r=this.buf,n,i,s,o;do n=r[this.pos++],i=n&128,t|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=t,o=268435456;do n=r[this.pos++],s+=(n&127)*o,o*=128;while(n&128);return(s%2?-(s+1):s)/2}return t>>1^-(t&1)};Pt.prototype.skipInt=Pt.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};Pt.prototype.writeInt=Pt.prototype.writeLong=function(t){var e=this.buf,r,n;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++};Pt.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};Pt.prototype.skipFloat=function(){this.pos+=4};Pt.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)};Pt.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};Pt.prototype.skipDouble=function(){this.pos+=8};Pt.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)};Pt.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=E4.alloc(t);return this.buf.copy(r,0,e,e+t),r}};Pt.prototype.skipFixed=function(t){this.pos+=t};Pt.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,r,0,e)};Pt.prototype.readBytes=function(){return this.readFixed(this.readLong())};Pt.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};Pt.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof Buffer.prototype.utf8Slice=="function"?Pt.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)}:Pt.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()};Pt.prototype.skipString=function(){var t=this.readLong();this.pos+=t};Pt.prototype.writeString=function(t){var e=Buffer.byteLength(t),r=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64)this._writeUtf8(t,e);else{var i,s,o,f;for(i=0,s=e;i<s;i++)o=t.charCodeAt(i),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((f=t.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(f&1023),i++,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}};typeof Buffer.prototype.utf8Write=="function"?Pt.prototype._writeUtf8=function(t,e){this.buf.utf8Write(t,this.pos-e,e)}:Pt.prototype._writeUtf8=function(t,e){this.buf.write(t,this.pos-e,e,"utf8")};typeof Buffer.prototype.latin1Write=="function"?Pt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,r,e)}:typeof Buffer.prototype.binaryWrite=="function"?Pt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,r,e)}:Pt.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,r,e,"binary")};Pt.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};Pt.prototype.matchInt=Pt.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1};Pt.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1};Pt.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1};Pt.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};Pt.prototype.matchBytes=Pt.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var s=this.buf.slice(r,this.pos),o=t.buf.slice(i,t.pos);return s.compare(o)};Pt.prototype.unpackLongBytes=function(){var t=lu(8),e=0,r=0,n=6,i=this.buf,s,o;for(s=i[this.pos++],o=s&1,t.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,t[r++]=e,e>>=8);return t[r]=e,o&&X0(t,8),t};Pt.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,r=this.buf,n=1,i=0,s=3,o;e?(X0(t,8),o=1):o=0;for(var f=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!f[--s];);for(;i<s;)for(o|=f[i++]<<n,n+=24;n>7;)r[this.pos++]=o&127|128,o>>=7,n-=7;o|=f[s]<<n;do r[this.pos]=o&127,o>>=7;while(o&&(r[this.pos++]|=128));this.pos++,e&&X0(t,8)};function X0(t,e){for(;e--;)t[e]=~t[e]}var cf={abstractFunction:N4,addDeprecatedGetters:B4,bufferFrom:Zv,capitalize:Xv,copyOwnProperties:R4,getHash:M4,compare:A4,getOption:S4,jsonEnd:C4,newBuffer:lu,objectValues:k4,toMap:P4,singleIndexOf:T4,hasDuplicates:I4,Lcg:Wo,OrderedQueue:sp,Tap:Pt},Ot=cf,eb=Ho,Ar=af,Uo=Ot.Tap,Q0=Ar.debuglog("avsc:types"),Bt=Ar.format,Zc={array:Ln,boolean:Ps,bytes:Kn,double:ss,enum:Bn,error:wr,fixed:On,float:is,int:ks,long:qn,map:En,null:ni,record:wr,string:Ii},O4=/^[A-Za-z_][A-Za-z0-9_]*$/,Xr=new Ot.Lcg,Po=new Uo(new eb.SlowBuffer(1024)),Vs=null,Na=[];function ue(t,e){var r;if(Vs?(r=Vs,Na.push([Vs,this]),Vs=null):r=this,this._hash=new L4,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(n!==void 0){if(n=Xc(n,i),lf(n))throw new Error(Bt("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(Bt("duplicate type name: %s",n));s[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(Bt("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(o){return Xc(o,i)}):[]}}ue.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var r=function(p){switch(p===!0?p="always":p===!1?p="never":p===void 0?p="auto":typeof p=="string"&&(p=p.toLowerCase()),p){case"always":return ii;case"never":return In;case"auto":return;default:throw new Error(Bt("invalid wrap unions option: %j",p))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(ue.isType(t))return t;var n;if(e.typeHook&&(n=e.typeHook(t,e))){if(!ue.isType(n))throw new Error(Bt("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=Xc(t,e.namespace),n=e.registry[t],n)return n;if(lf(t))return e.registry[t]=ue.forSchema({type:t},e);throw new Error(Bt("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!Vs){var i=e.logicalTypes[t.logicalType];if(i){var s=e.namespace,o={};Object.keys(e.registry).forEach(function(p){o[p]=e.registry[p]});try{return Q0("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(p){if(Q0("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw p;Vs=null,e.namespace=s,e.registry=o}}}if(Array.isArray(t)){var f=t.map(function(p){return ue.forSchema(p,e)});r||(r=D4(f)?ii:In),n=new r(f,e)}else n=function(p){var b=Zc[p];if(b===void 0)throw new Error(Bt("unknown type: %j",p));return new b(t,e)}(t.type);return n};ue.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||ue.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(r!==void 0){if(!ue.isType(r))throw new Error(Bt("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return ue.forSchema("string",e);case"boolean":return ue.forSchema("boolean",e);case"number":return(t|0)===t?ue.forSchema("int",e):Math.abs(t)<9007199254740991?ue.forSchema("float",e):ue.forSchema("double",e);case"object":if(t===null)return ue.forSchema("null",e);if(Array.isArray(t))return t.length?ue.forSchema({type:"array",items:ue.forTypes(t.map(function(i){return ue.forValue(i,e)}))},e):e.emptyArrayType;if(Buffer.isBuffer(t))return ue.forSchema("bytes",e);var n=Object.keys(t);return n.some(function(i){return!ku(i)})?ue.forSchema({type:"map",values:ue.forTypes(n.map(function(i){return ue.forValue(t[i],e)}),e)},e):ue.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:ue.forValue(t[i],e)}})},e);default:throw new Error(Bt("cannot infer type from: %j",t))}};ue.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var r=[],n=0,i=!0;if(t.forEach(function(_){switch(_.typeName){case"union:unwrapped":i=!1,r=r.concat(_.types);break;case"union:wrapped":n++,r=r.concat(_.types);break;case"null":r.push(_);break;default:i=!1,r.push(_)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};r.forEach(function(_){var S=_.branchName,M=s[S];if(!M)s[S]=_;else if(!_.equals(M))throw new Error("inconsistent branch type")});var o=e.wrapUnions,f;e.wrapUnions=!0;try{f=ue.forSchema(Object.keys(s).map(function(_){return s[_]}),e)}catch(_){throw e.wrapUnions=o,_}return e.wrapUnions=o,f}var p={};r.forEach(function(_){var S=Nl(_),M=p[S];M||(p[S]=M=[]),M.push(_)});var b=Object.keys(p),x=b.map(function(_){var S=p[_];if(S.length===1)return S[0];switch(_){case"null":case"boolean":return S[0];case"number":return U4(S);case"string":return F4(S,e);case"buffer":return $4(S,e);case"array":return S=S.filter(function(M){return M!==e.emptyArrayType}),S.length?ue.forSchema({type:"array",items:ue.forTypes(S.map(function(M){return M.itemsType}))},e):e.emptyArrayType;default:return j4(S,e)}});return x.length===1?x[0]:ue.forSchema(x,e)};ue.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var r=e.typeName,n;for(n=1;n<t;n++)if(r.indexOf(arguments[n])===0)return!0;return!1};ue.__reset=function(t){Q0("resetting type buffer to %d",t),Po.buf=new eb.SlowBuffer(t)};Object.defineProperty(ue.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var t=ue.isType(this,"logical")?this.underlyingType:this;return ue.isType(t,"abstract")?t._concreteTypeName:ue.isType(t,"union")?void 0:t.typeName}});ue.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};ue.prototype.compare=Ot.abstractFunction;ue.prototype.compareBuffers=function(t,e){return this._match(new Uo(t),new Uo(e))};ue.prototype.createResolver=function(t,e){if(!ue.isType(t))throw new Error(Bt("not a type: %j",t));if(!ue.isType(this,"union","logical")&&ue.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(ue.isType(this,"record","error")&&ue.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n],r))return r;if(r=new op(this),n&&(e.registry[n]=r),ue.isType(t,"union")){var i=t.types.map(function(s){return this.createResolver(s,e)},this);r._read=function(s){var o=s.readLong(),f=i[o];if(f===void 0)throw new Error(Bt("invalid union index: %s",o));return i[o]._read(s)}}else this._update(r,t,e);if(!r._read)throw new Error(Bt("cannot read %s as %s",t,this));return Object.freeze(r)};ue.prototype.decode=function(t,e,r){var n=new Uo(t,e),i=tb(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};ue.prototype.encode=function(t,e,r){var n=new Uo(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos};ue.prototype.equals=function(t){return ue.isType(t)&&this.fingerprint().equals(t.fingerprint())};ue.prototype.fingerprint=function(t){if(t)return Ot.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=Ot.getHash(e).toString("binary")}return Ot.bufferFrom(this._hash.str,"binary")};ue.prototype.fromBuffer=function(t,e,r){var n=new Uo(t),i=tb(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i};ue.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};ue.prototype.inspect=function(){var t=this.typeName,e=rb(t);if(lf(t))return Bt("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return typeof r=="object"&&!ue.isType(this,"logical")&&(r.type=void 0),Bt("<%s %j>",e,r)};ue.prototype.isValid=function(t,e){var r=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(o,f){n.call(this,s.slice(),o,f,t)}),this._check(t,r,i,s)};ue.prototype.random=Ot.abstractFunction;ue.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};ue.prototype.toBuffer=function(t){Po.pos=0,this._write(Po,t);var e=Ot.newBuffer(Po.pos);return Po.isValid()?Po.buf.copy(e,0,0,Po.pos):this._write(new Uo(e),t),e};ue.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};ue.prototype.toString=function(t){return t===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))};ue.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};ue.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};this.name!==void 0&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return n!==void 0&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),this.doc!==void 0&&(r.doc=this.doc)),r};ue.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;function e(){return function(i){~t.indexOf(".")?this[`${t}`]=i:this[t]=i}}var r=e();return r.type=this,r.prototype.unwrap=function(){return this[`${t}`]},r.prototype.unwrapped=r.prototype.unwrap,r};ue.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r};ue.prototype._check=Ot.abstractFunction;ue.prototype._copy=Ot.abstractFunction;ue.prototype._deref=Ot.abstractFunction;ue.prototype._match=Ot.abstractFunction;ue.prototype._read=Ot.abstractFunction;ue.prototype._skip=Ot.abstractFunction;ue.prototype._update=Ot.abstractFunction;ue.prototype._write=Ot.abstractFunction;ue.prototype.getAliases=function(){return this.aliases};ue.prototype.getFingerprint=ue.prototype.fingerprint;ue.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};ue.prototype.getSchema=ue.prototype.schema;ue.prototype.getTypeName=function(){return this.typeName};function pr(t){ue.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}Ar.inherits(pr,ue);pr.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};pr.prototype._copy=function(t){return this._check(t,void 0,tr),t};pr.prototype._deref=function(){return this.typeName};pr.prototype.compare=Ot.compare;function ni(){pr.call(this)}Ar.inherits(ni,pr);ni.prototype._check=function(t,e,r){var n=t===null;return!n&&r&&r(t,this),n};ni.prototype._read=function(){return null};ni.prototype._skip=function(){};ni.prototype._write=function(t,e){e!==null&&tr(e,this)};ni.prototype._match=function(){return 0};ni.prototype.compare=ni.prototype._match;ni.prototype.typeName="null";ni.prototype.random=ni.prototype._read;function Ps(){pr.call(this)}Ar.inherits(Ps,pr);Ps.prototype._check=function(t,e,r){var n=typeof t=="boolean";return!n&&r&&r(t,this),n};Ps.prototype._read=function(t){return t.readBoolean()};Ps.prototype._skip=function(t){t.skipBoolean()};Ps.prototype._write=function(t,e){typeof e!="boolean"&&tr(e,this),t.writeBoolean(e)};Ps.prototype._match=function(t,e){return t.matchBoolean(e)};Ps.prototype.typeName="boolean";Ps.prototype.random=function(){return Xr.nextBoolean()};function ks(){pr.call(this)}Ar.inherits(ks,pr);ks.prototype._check=function(t,e,r){var n=t===(t|0);return!n&&r&&r(t,this),n};ks.prototype._read=function(t){return t.readInt()};ks.prototype._skip=function(t){t.skipInt()};ks.prototype._write=function(t,e){e!==(e|0)&&tr(e,this),t.writeInt(e)};ks.prototype._match=function(t,e){return t.matchInt(e)};ks.prototype.typeName="int";ks.prototype.random=function(){return Xr.nextInt(1e3)|0};function qn(){pr.call(this)}Ar.inherits(qn,pr);qn.prototype._check=function(t,e,r){var n=typeof t=="number"&&t%1===0&&fp(t);return!n&&r&&r(t,this),n};qn.prototype._read=function(t){var e=t.readLong();if(!fp(e))throw new Error("potential precision loss");return e};qn.prototype._skip=function(t){t.skipLong()};qn.prototype._write=function(t,e){(typeof e!="number"||e%1||!fp(e))&&tr(e,this),t.writeLong(e)};qn.prototype._match=function(t,e){return t.matchLong(e)};qn.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};qn.prototype.typeName="long";qn.prototype.random=function(){return Xr.nextInt()};qn.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new mn(e);return Object.keys(r).forEach(function(i){if(t[i]===void 0)throw new Error(Bt("missing method implementation: %s",i));n[r[i]]=t[i]}),Object.freeze(n)};function is(){pr.call(this)}Ar.inherits(is,pr);is.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};is.prototype._read=function(t){return t.readFloat()};is.prototype._skip=function(t){t.skipFloat()};is.prototype._write=function(t,e){typeof e!="number"&&tr(e,this),t.writeFloat(e)};is.prototype._match=function(t,e){return t.matchFloat(e)};is.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};is.prototype.typeName="float";is.prototype.random=function(){return Xr.nextFloat(1e3)};function ss(){pr.call(this)}Ar.inherits(ss,pr);ss.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};ss.prototype._read=function(t){return t.readDouble()};ss.prototype._skip=function(t){t.skipDouble()};ss.prototype._write=function(t,e){typeof e!="number"&&tr(e,this),t.writeDouble(e)};ss.prototype._match=function(t,e){return t.matchDouble(e)};ss.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};ss.prototype.typeName="double";ss.prototype.random=function(){return Xr.nextFloat()};function Ii(){pr.call(this)}Ar.inherits(Ii,pr);Ii.prototype._check=function(t,e,r){var n=typeof t=="string";return!n&&r&&r(t,this),n};Ii.prototype._read=function(t){return t.readString()};Ii.prototype._skip=function(t){t.skipString()};Ii.prototype._write=function(t,e){typeof e!="string"&&tr(e,this),t.writeString(e)};Ii.prototype._match=function(t,e){return t.matchString(e)};Ii.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};Ii.prototype.typeName="string";Ii.prototype.random=function(){return Xr.nextString(Xr.nextInt(32))};function Kn(){pr.call(this)}Ar.inherits(Kn,pr);Kn.prototype._check=function(t,e,r){var n=Buffer.isBuffer(t);return!n&&r&&r(t,this),n};Kn.prototype._read=function(t){return t.readBytes()};Kn.prototype._skip=function(t){t.skipBytes()};Kn.prototype._write=function(t,e){Buffer.isBuffer(e)||tr(e,this),t.writeBytes(e)};Kn.prototype._match=function(t,e){return t.matchBytes(e)};Kn.prototype._update=Ii.prototype._update;Kn.prototype._copy=function(t,e){var r;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,tr),t.toString("binary");case 2:if(typeof t!="string")throw new Error(Bt("cannot coerce to buffer: %j",t));return r=Ot.bufferFrom(t,"binary"),this._check(r,void 0,tr),r;case 1:if(!nb(t))throw new Error(Bt("cannot coerce to buffer: %j",t));return r=Ot.bufferFrom(t.data),this._check(r,void 0,tr),r;default:return this._check(t,void 0,tr),Ot.bufferFrom(t)}};Kn.prototype.compare=Buffer.compare;Kn.prototype.typeName="bytes";Kn.prototype.random=function(){return Xr.nextBuffer(Xr.nextInt(32))};function os(t,e){if(ue.call(this),!Array.isArray(t))throw new Error(Bt("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(r){return ue.forSchema(r,e)})),this._branchIndices={},this.types.forEach(function(r,n){if(ue.isType(r,"union"))throw new Error("unions cannot be directly nested");var i=r.branchName;if(this._branchIndices[i]!==void 0)throw new Error(Bt("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}Ar.inherits(os,ue);os.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};os.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};os.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1};os.prototype._deref=function(t,e){return this.types.map(function(r){return r._attrs(e)})};os.prototype.getTypes=function(){return this.types};function In(t,e){os.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(r,n){if(ue.isType(r,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:r});else{var i=Nl(r);if(this._bucketIndices[i]!==void 0)throw new Error(Bt("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}Ar.inherits(In,os);In.prototype._getIndex=function(t){var e=this._bucketIndices[ib(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};In.prototype._getBranchIndex=function(t,e){var r=this._dynamicBranches,n,i,s;for(n=0,i=r.length;n<i;n++)if(s=r[n],s.type._check(t))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};In.prototype._check=function(t,e,r,n){var i=this._getIndex(t),s=i!==void 0;return s?this.types[i]._check(t,e,r,n):(r&&r(t,this),s)};In.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(Bt("invalid union index: %s",e))};In.prototype._write=function(t,e){var r=this._getIndex(e);r===void 0&&tr(e,this),t.writeLong(r),e!==null&&this.types[r]._write(t,e)};In.prototype._update=function(t,e,r){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}t._read=function(o){return s._read(o)};return}};In.prototype._copy=function(t,e){var r=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(r){case 1:nb(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var s=Object.keys(t);s.length===1&&(i=this._branchIndices[s[0]],t=t[s[0]])}break;default:i=this._getIndex(t)}i===void 0&&tr(t,this)}var o=this.types[i];if(t===null||n===3)return o._copy(t,e);switch(r){case 3:var f={};return f[o.branchName]=o._copy(t,e),f;default:return o._copy(t,e)}};In.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(r===void 0)tr(t,this);else if(n===void 0)tr(e,this);else return r===n?this.types[r].compare(t,e):Ot.compare(r,n)};In.prototype.typeName="union:unwrapped";In.prototype.random=function(){var t=Xr.nextInt(this.types.length);return this.types[t].random()};function ii(t,e){os.call(this,t,e),Object.freeze(this)}Ar.inherits(ii,os);ii.prototype._check=function(t,e,r,n){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var o=s[0],f=this._branchIndices[o];if(f!==void 0)return r?(n.push(o),i=this.types[f]._check(t[o],e,r,n),n.pop(),i):this.types[f]._check(t[o],e)}}return!i&&r&&r(t,this),i};ii.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(Bt("invalid union index"));var r=e._branchConstructor;return r===null?null:new r(e._read(t))};ii.prototype._write=function(t,e){var r,n,i;e===null?(r=this._branchIndices.null,r===void 0&&tr(e,this),t.writeLong(r)):(n=Object.keys(e),n.length===1&&(i=n[0],r=this._branchIndices[i]),r===void 0&&tr(e,this),t.writeLong(r),this.types[r]._write(t,e[i]))};ii.prototype._update=function(t,e,r){var n,i,s,o;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}o=this.types[n]._branchConstructor,o?t._read=function(f){return new o(s._read(f))}:t._read=function(){return null};return}};ii.prototype._copy=function(t,e){var r=e&&e.wrap|0;if(r===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,s,o;if(typeof t=="object"){var f=Object.keys(t);if(f.length===1){var p=f[0];if(i=this._branchIndices[p],i===void 0&&e.qualifyNames){var b,x;for(b=0,s=this.types.length;b<s;b++)if(x=this.types[b],x.name&&p===ap(x.name)){i=b;break}}i!==void 0&&(o=this.types[i]._copy(t[p],e))}}if(r===1&&o===void 0)for(i=0,s=this.types.length;i<s&&o===void 0;)try{o=this.types[i]._copy(t,e)}catch{i++}if(o!==void 0)return r===3?o:new this.types[i]._branchConstructor(o);tr(t,this)};ii.prototype.compare=function(t,e){var r=t===null?"null":Object.keys(t)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?r==="null"?0:this.types[i].compare(t[r],e[r]):Ot.compare(i,this._branchIndices[n])};ii.prototype.typeName="union:wrapped";ii.prototype.random=function(){var t=Xr.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null};function Bn(t,e){if(ue.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(Bt("invalid enum symbols: %j",t.symbols));this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(r,n){if(!ku(r))throw new Error(Bt("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(Bt("duplicate %s symbol: %j",this,r));this._indices[r]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Ar.inherits(Bn,ue);Bn.prototype._check=function(t,e,r){var n=this._indices[t]!==void 0;return!n&&r&&r(t,this),n};Bn.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(r===void 0)throw new Error(Bt("invalid %s enum index: %s",this.name,e));return r};Bn.prototype._skip=function(t){t.skipLong()};Bn.prototype._write=function(t,e){var r=this._indices[e];r===void 0&&tr(e,this),t.writeLong(r)};Bn.prototype._match=function(t,e){return t.matchLong(e)};Bn.prototype.compare=function(t,e){return Ot.compare(this._indices[t],this._indices[e])};Bn.prototype._update=function(t,e){var r=this.symbols;e.typeName==="enum"&&(!e.name||~Yf(this).indexOf(e.name))&&e.symbols.every(function(n){return~r.indexOf(n)})&&(t.symbols=e.symbols,t._read=e._read)};Bn.prototype._copy=function(t){return this._check(t,void 0,tr),t};Bn.prototype._deref=function(t){t.symbols=this.symbols};Bn.prototype.getSymbols=function(){return this.symbols};Bn.prototype.typeName="enum";Bn.prototype.random=function(){return Xr.choice(this.symbols)};function On(t,e){if(ue.call(this,t,e),t.size!==(t.size|0)||t.size<1)throw new Error(Bt("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Ar.inherits(On,ue);On.prototype._check=function(t,e,r){var n=Buffer.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n};On.prototype._read=function(t){return t.readFixed(this.size)};On.prototype._skip=function(t){t.skipFixed(this.size)};On.prototype._write=function(t,e){(!Buffer.isBuffer(e)||e.length!==this.size)&&tr(e,this),t.writeFixed(e,this.size)};On.prototype._match=function(t,e){return t.matchFixed(e,this.size)};On.prototype.compare=Buffer.compare;On.prototype._update=function(t,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~Yf(this).indexOf(e.name))&&(t.size=this.size,t._read=this._read)};On.prototype._copy=Kn.prototype._copy;On.prototype._deref=function(t){t.size=this.size};On.prototype.getSize=function(){return this.size};On.prototype.typeName="fixed";On.prototype.random=function(){return Xr.nextBuffer(this.size)};function En(t,e){if(ue.call(this),!t.values)throw new Error(Bt("missing map values: %j",t));this.valuesType=ue.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Ar.inherits(En,ue);En.prototype._check=function(t,e,r,n){if(!t||typeof t!="object"||Array.isArray(t))return r&&r(t,this),!1;var i=Object.keys(t),s=!0,o,f,p,b;if(r){for(p=n.length,n.push(""),o=0,f=i.length;o<f;o++)b=n[p]=i[o],this.valuesType._check(t[b],e,r,n)||(s=!1);n.pop()}else for(o=0,f=i.length;o<f;o++)if(!this.valuesType._check(t[i[o]],e))return!1;return s};En.prototype._read=function(t){for(var e=this.valuesType,r={},n;n=ed(t);)for(;n--;){var i=t.readString();r[i]=e._read(t)}return r};En.prototype._skip=function(t){for(var e=this.valuesType,r,n;n=t.readLong();)if(n<0)r=t.readLong(),t.pos+=r;else for(;n--;)t.skipString(),e._skip(t)};En.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&tr(e,this);var r=this.valuesType,n=Object.keys(e),i=n.length,s,o;if(i)for(t.writeLong(i),s=0;s<i;s++)o=n[s],t.writeString(o),r._write(t,e[o]);t.writeLong(0)};En.prototype._match=function(){throw new Error("maps cannot be compared")};En.prototype._update=function(t,e,r){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)};En.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var r=this.valuesType,n=Object.keys(t),i,s,o,f={};for(i=0,s=n.length;i<s;i++)o=n[i],f[o]=r._copy(t[o],e);return f}tr(t,this)};En.prototype.compare=En.prototype._match;En.prototype.typeName="map";En.prototype.getValuesType=function(){return this.valuesType};En.prototype.random=function(){var t={},e,r;for(e=0,r=Xr.nextInt(10);e<r;e++)t[Xr.nextString(Xr.nextInt(20))]=this.valuesType.random();return t};En.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function Ln(t,e){if(ue.call(this),!t.items)throw new Error(Bt("missing array items: %j",t));this.itemsType=ue.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Ar.inherits(Ln,ue);Ln.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i=!0,s,o,f;if(r){for(f=n.length,n.push(""),s=0,o=t.length;s<o;s++)n[f]=""+s,this.itemsType._check(t[s],e,r,n)||(i=!1);n.pop()}else for(s=0,o=t.length;s<o;s++)if(!this.itemsType._check(t[s],e))return!1;return i};Ln.prototype._read=function(t){for(var e=this.itemsType,r=[],n;n=t.readLong();)for(n<0&&(n=-n,t.skipLong());n--;)r.push(e._read(t));return r};Ln.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this.itemsType._skip(t)};Ln.prototype._write=function(t,e){Array.isArray(e)||tr(e,this);var r=e.length,n;if(r)for(t.writeLong(r),n=0;n<r;n++)this.itemsType._write(t,e[n]);t.writeLong(0)};Ln.prototype._match=function(t,e){for(var r=t.readLong(),n=e.readLong(),i;r&&n;){if(i=this.itemsType._match(t,e),i)return i;--r||(r=ed(t)),--n||(n=ed(e))}return Ot.compare(r,n)};Ln.prototype._update=function(t,e,r){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)};Ln.prototype._copy=function(t,e){Array.isArray(t)||tr(t,this);var r=new Array(t.length),n,i;for(n=0,i=t.length;n<i;n++)r[n]=this.itemsType._copy(t[n],e);return r};Ln.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};Ln.prototype.compare=function(t,e){var r=t.length,n=e.length,i,s,o;for(i=0,s=Math.min(r,n);i<s;i++)if(o=this.itemsType.compare(t[i],e[i]))return o;return Ot.compare(r,n)};Ln.prototype.getItemsType=function(){return this.itemsType};Ln.prototype.typeName="array";Ln.prototype.random=function(){var t=[],e,r;for(e=0,r=Xr.nextInt(10);e<r;e++)t.push(this.itemsType.random());return t};function wr(t,e){e=e||{};var r=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(ue.call(this,t,e),!Array.isArray(t.fields))throw new Error(Bt("non-array record fields: %j",t.fields));if(Ot.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(Bt("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var s=new _s(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}Ar.inherits(wr,ue);wr.prototype._getConstructorName=function(){return this.name?ap(this.name):this._isError?"Error$":"Record$"};wr.prototype._createConstructor=function(t){var e={},r,n,i,s,o,f,p;for(r=0,n=this.fields.length;r<n;r++)i=this.fields[r],o=i.defaultValue,f=o()!==void 0,s=i.name,t&&this._isError&&s==="stack"&&ue.isType(i.type,"string")&&!f&&(p=i),f&&(e[r]=o);var b=this;function x(S){const M=b._getConstructorName();var N={[M]:function(...k){for(var I=0,C=b.fields.length;I<C;I++){let D=b.fields[I];D.defaultValue()===void 0?this[D.name]=k[I]:k[I]===void 0?this[D.name]=S[I]():this[D.name]=k[I]}p&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[M];return N}var _=x(e);return _.getType=function(){return b},_.type=b,this._isError&&(Ar.inherits(_,Error),_.prototype.name=this._getConstructorName()),_.prototype.clone=function(S){return b.clone(this,S)},_.prototype.compare=function(S){return b.compare(this,S)},_.prototype.isValid=function(S){return b.isValid(this,S)},_.prototype.toBuffer=function(){return b.toBuffer(this)},_.prototype.toString=function(){return b.toString(this)},_.prototype.wrap=function(){return b.wrap(this)},_.prototype.wrapped=_.prototype.wrap,_};wr.prototype._createChecker=function(){const t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o,f,p,b){if(o===null||typeof o!="object"||f&&!this._checkFields(o))return p&&p(o,this),!1;const x=[];if(e.fields.length)for(var _=0,S=e.fields.length;_<S;_++){let k=e.fields[_];k.defaultValue()!==void 0&&x.push(o[k.name])}else return!0;if(p){var M=1,N=b.length;b.push("");for(var _=0,S=e.fields.length;_<S;_++){let C=e.fields[_];b[N]=C.name,M&=C.defaultValue()===void 0?n[_]._check(o[C.name],C,p,b):x[_]===void 0||n[_]._check(x[_],C,p,b)}return b.pop(),!!M}else return e.fields.reduce((k,I,C)=>k&&(I.defaultValue()===void 0?n[C]._check(o[I.name]):x[C]===void 0||n[C]._check(x[C],f)),!0)}}[i];return s}return r(t)};wr.prototype._createReader=function(){var t=[this.recordConstructor],e,r;for(e=0,r=this.fields.length;e<r;e++)t.push(this.fields[e].type);var n=this;function i(s){var o=n._getConstructorName(),f={[o]:function(p){return new s[0](...s.slice(1).map(b=>b._read(p)))}}[o];return f}return i(t)};wr.prototype._createSkipper=function(){var t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o){n.forEach(f=>f._skip(o))}}[i];return s}return r(t)};wr.prototype._createWriter=function(){var t=[],e={};this.fields.forEach((i,s)=>{t.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var r=this;function n(i,s){var o=r._getConstructorName(),f={[o]:function(p,b){for(var x=0,_=r.fields.length;x<_;x++){let S=r.fields[x];S.defaultValue()===void 0?i[x]._write(p,b[S.name]):b[S.name]===void 0?p.writeBinary(s[x],s[x].length):i[x]._write(p,b[S.name])}}}[o];return f}return n(t,e)};wr.prototype._update=function(t,e,r){if(e.name&&!~Yf(this).indexOf(e.name))throw new Error(Bt("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=Ot.toMap(i,function(I){return I.name}),o={},f,p,b,x,_,S,M;for(f=0;f<n.length;f++){for(b=n[f],_=Yf(b),S=[],p=0;p<_.length;p++)x=_[p],s[x]&&S.push(x);if(S.length>1)throw new Error(Bt("ambiguous aliasing for %s.%s (%s)",e.name,b.name,S));if(S.length)x=S[0],M={resolver:b.type.createResolver(s[x].type,r),name:"_"+b.name},o[x]?o[x].push(M):o[x]=[M];else if(b.defaultValue()===void 0)throw new Error(Bt("no matching field for default-less %s.%s",e.name,b.name))}var N=this;function k(){var I=N._getConstructorName(),C={[I]:function(D,$){if(!$){var j=[];for(F=0;F<n.length;F++){for(b=n[F],_=Yf(b),S=[],z=0;z<_.length;z++)x=_[z],s[x]&&S.push(x);S.length||j.push(void 0)}for(var F=0;F<i.length;F++){let Z=e.fields[F];if(x=Z.name,o[x]===void 0)Z.type._skip(D);else for(var z=o[x].length;z--;)j.unshift(z?o[x][z].resolver._peek(D):o[x][z].resolver._read(D))}return new N.recordConstructor(...j)}}}[I];return C}t._read=k()};wr.prototype._match=function(t,e){var r=this.fields,n,i,s,o,f;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s._order,f=s.type,o){if(o*=f._match(t,e),o)return o}else f._skip(t),f._skip(e);return 0};wr.prototype._checkFields=function(t){var e=Object.keys(t),r,n;for(r=0,n=e.length;r<n;r++)if(!this._fieldsByName[e[r]])return!1;return!0};wr.prototype._copy=function(t,e){var r=e&&e.fieldHook,n=[void 0],i,s,o,f;for(i=0,s=this.fields.length;i<s;i++)o=this.fields[i],f=t[o.name],f===void 0&&o.hasOwnProperty("defaultValue")&&(f=o.defaultValue()),(e&&!e.skip||f!==void 0)&&(f=o.type._copy(f,e)),r&&(f=r(o,f,this)),n.push(f);var p=this.recordConstructor;return new(p.bind.apply(p,n))};wr.prototype._deref=function(t,e){t.fields=this.fields.map(function(r){var n=r.type,i={name:r.name,type:n._attrs(e)};if(e.exportAttrs){var s=r.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var o=r.order;o!=="ascending"&&(i.order=o);var f=r.aliases;f.length&&(i.aliases=f);var p=r.doc;p!==void 0&&(i.doc=p)}return i})};wr.prototype.compare=function(t,e){var r=this.fields,n,i,s,o,f,p;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s.name,f=s._order,p=s.type,f&&(f*=p.compare(t[o],e[o]),f))return f;return 0};wr.prototype.random=function(){var t=this.fields.map(function(r){return r.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};wr.prototype.field=function(t){return this._fieldsByName[t]};wr.prototype.getField=wr.prototype.field;wr.prototype.getFields=function(){return this.fields};wr.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(wr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function zr(t,e){this._logicalTypeName=t.logicalType,ue.call(this),Vs=this;try{this._underlyingType=ue.forSchema(t,e)}finally{Vs=null;var r=Na.length;r&&Na[r-1][0]===this&&Na.pop()}ue.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}Ar.inherits(zr,ue);Object.defineProperty(zr.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(zr.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=Na.length;t<e;t++)if(r=Na[t],r[0]===this)return r[1]}});zr.prototype.getUnderlyingType=function(){return this.underlyingType};zr.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};zr.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};zr.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch{}return i===void 0?(r&&r(t,this),!1):this.underlyingType._check(i,e,r,n)};zr.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}};zr.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(i){return n(e._read(i))})};zr.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)};zr.prototype.random=function(){return this._fromValue(this.underlyingType.random())};zr.prototype._deref=function(t,e){var r=this.underlyingType,n=r.name!==void 0&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};zr.prototype._skip=function(t){this.underlyingType._skip(t)};zr.prototype._export=function(){};zr.prototype._fromValue=Ot.abstractFunction;zr.prototype._toValue=Ot.abstractFunction;zr.prototype._resolve=Ot.abstractFunction;function mn(t){this._concreteTypeName="long",pr.call(this,!0),this._noUnpack=!!t}Ar.inherits(mn,qn);mn.prototype.typeName="abstract:long";mn.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n};mn.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};mn.prototype._write=function(t,e){this._isValid(e)||tr(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)};mn.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};mn.prototype._deref=function(){return"long"};mn.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(n){return r._fromJSON(e._read(n))};break;case"long":t._read=function(n){return r._read(n)}}};mn.prototype.random=function(){return this._fromJSON(qn.prototype.random())};mn.prototype._fromBuffer=Ot.abstractFunction;mn.prototype._toBuffer=Ot.abstractFunction;mn.prototype._fromJSON=Ot.abstractFunction;mn.prototype._toJSON=Ot.abstractFunction;mn.prototype._isValid=Ot.abstractFunction;mn.prototype.compare=Ot.abstractFunction;function _s(t,e){var r=t.name;if(typeof r!="string"||!ku(r))throw new Error(Bt("invalid field name: %s",r));this.name=r,this.type=ue.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(o){switch(o){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Bt("invalid order: %j",o))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});lf(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}_s.prototype.defaultValue=function(){};Object.defineProperty(_s.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});_s.prototype.getAliases=function(){return this.aliases};_s.prototype.getDefault=_s.prototype.defaultValue;_s.prototype.getName=function(){return this.name};_s.prototype.getOrder=function(){return this.order};_s.prototype.getType=function(){return this.type};function op(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}op.prototype._peek=ue.prototype._peek;op.prototype.inspect=function(){return"<Resolver>"};function L4(){this.str=void 0}function tb(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}else return t._read(e)}function ap(t){var e=t.split(".");return e[e.length-1]}function Xc(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!ku(n))throw new Error(Bt("invalid name: %j",t))});var r=ap(t);return lf(r)?r:t}function Yf(t){var e={};t.name&&(e[t.name]=!0);var r=t.aliases,n,i;for(n=0,i=r.length;n<i;n++)e[r[n]]=!0;return Object.keys(e)}function lf(t){var e=Zc[t];return e&&e.prototype instanceof pr}function rb(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return Ot.capitalize(t)+"Type"}function ed(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function fp(t){return t>=-9007199254740990&&t<=9007199254740990}function nb(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function ku(t){return O4.test(t)}function tr(t,e){throw new Error(Bt("invalid %s: %j",e,t))}function Nl(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function ib(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(Buffer.isBuffer(t))return"buffer"}return e}function D4(t){var e={},r,n,i,s;for(r=0,n=t.length;r<n;r++)if(s=t[r],!ue.isType(s,"logical")){if(i=Nl(s),e[i])return!0;e[i]=!0}return!1}function U4(t){var e=["int","long","float","double"],r=-1,n=null,i,s,o,f;for(i=0,s=t.length;i<s;i++)o=t[i],f=e.indexOf(o.typeName),f>r&&(r=f,n=o);return n}function F4(t,e){var r={},n,i,s,o;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="string")return s;o=s.symbols;var f,p;for(f=0,p=o.length;f<p;f++)r[o[f]]=!0}return ue.forSchema({type:"enum",symbols:Object.keys(r)},e)}function $4(t,e){var r=-1,n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="bytes")return s;r===-1?r=s.size:s.size!==r&&(r=-2)}return r<0?ue.forSchema("bytes",e):t[0]}function j4(t,e){var r=[],n={},i={},s=!0,o,f,p,b;for(o=0,f=t.length;o<f;o++)if(p=t[o],p.typeName==="map")s=!1,r.push(p.valuesType);else{b=p.fields;var x,_,S,M,N,k;for(x=0,_=b.length;x<_;x++)S=b[x],N=S.name,k=S.type,r.push(k),s&&(n[N]||(n[N]=[]),n[N].push(k),M=S.defaultValue(),M!==void 0&&(i[N]=M))}if(s){var I=Object.keys(n);for(o=0,f=I.length;o<f;o++)N=I[o],n[N].length<t.length&&i[N]===void 0&&(e&&e.strictDefaults?s=!1:(n[N].unshift(ue.forSchema("null",e)),i[N]=null))}var C;return s?C={type:"record",fields:I.map(function(D){var $=ue.forTypes(n[D],e),j=i[D];if(j!==void 0&&~$.typeName.indexOf("union")){var F=$.types.slice(),z,Z;for(z=0,Z=F.length;z<Z&&!F[z].isValid(j);z++);if(z>0){var te=F[0];F[0]=F[z],F[z]=te,$=ue.forSchema(F,e)}}return{name:D,type:$,default:i[D]}})}:C={type:"map",values:ue.forTypes(r,e)},ue.forSchema(C,e)}var up={Type:ue,getTypeBucket:Nl,getValueBucket:ib,isPrimitive:lf,isValidName:ku,qualify:Xc,builtins:function(){var t={LogicalType:zr,UnwrappedUnionType:In,WrappedUnionType:ii},e=Object.keys(Zc),r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],t[rb(i)]=Zc[i];return t}()},Vf=up;function q4(t,e){var r;if(typeof t=="string")try{r=JSON.parse(t)}catch{r=t}else r=t;return Vf.Type.forSchema(r,e)}var K4={Type:Vf.Type,parse:q4,types:Vf.builtins,combine:Vf.Type.forTypes,infer:Vf.Type.forValue},cp=up,rr=cf,uo=ff.exports,Vi=Sn,Xt=af,lp=rr.Tap,Fr=cp.Type,kr=Xt.debuglog("avsc:services"),jr=Xt.format,ji={namespace:"org.apache.avro.ipc"},sb=Fr.forSchema("boolean",ji),Wi=Fr.forSchema({type:"map",values:"bytes"},ji),hp=Fr.forSchema("string",ji),Iu=Fr.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",Wi],default:null}]},ji),Ru=Fr.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",Wi],default:null}]},ji),dp=16,pp=new Es("",Fr.forSchema({name:"PingRequest",type:"record",fields:[]},ji),Fr.forSchema(["string"],ji),Fr.forSchema("null",ji));function Es(t,e,r,n,i,s){if(this.name=t,!Fr.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!Fr.isType(r,"union")||!Fr.isType(r.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=r,i&&(!Fr.isType(n,"null")||r.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}Es.forSchema=function(t,e,r){if(r=r||{},!cp.isValidName(t))throw new Error(jr("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(jr("invalid message request: %s",t));var n=jr("%s.%sRequest",ji.namespace,rr.capitalize(t)),i=Fr.forSchema({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r);if(delete r.registry[n],!e.response)throw new Error(jr("invalid message response: %s",t));var s=Fr.forSchema(e.response,r);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(jr("invalid message errors: %s",t));var o=Fr.forSchema(["string"].concat(e.errors||[]),r),f=!!e["one-way"];return new Es(t,i,o,s,f,e.doc)};Es.prototype.schema=Fr.prototype.getSchema;Es.prototype._attrs=function(t){var e=this.requestType._attrs(t),r={request:e.fields,response:this.responseType._attrs(t)},n=this.doc;n!==void 0&&(r.doc=n);var i=this.errorType._attrs(t);return i.length>1&&(r.errors=i.slice(1)),this.oneWay&&(r["one-way"]=!0),r};rr.addDeprecatedGetters(Es,["name","errorType","requestType","responseType"]);Es.prototype.isOneWay=Xt.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function Jt(t,e,r,n,i){if(typeof t!="string")return Jt.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze(rr.objectValues(this._messagesByName)),this._typesByName=r||{},this.types=Object.freeze(rr.objectValues(this._typesByName)),this.protocol=n,this._hashStr=rr.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}Jt.Client=zn;Jt.Server=Ri;Jt.compatible=function(t,e){try{fb(t,e)}catch{return!1}return!0};Jt.forProtocol=function(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=cp.qualify(r,e.namespace),t.types&&t.types.forEach(function(s){Fr.forSchema(s,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(s){i[s]=Es.forSchema(s,t.messages[s],e)})),new Jt(r,i,e.registry,t)};Jt.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};Jt.prototype.createClient=function(t){var e=new zn(this,t);return process.nextTick(function(){if(t&&t.server){var r={objectMode:!0},n=[new Vi.PassThrough(r),new Vi.PassThrough(r)];t.server.createChannel({readable:n[0],writable:n[1]},r),e.createChannel({readable:n[1],writable:n[0]},r)}else t&&t.transport&&e.createChannel(t.transport)}),e};Jt.prototype.createServer=function(t){return new Ri(this,t)};Object.defineProperty(Jt.prototype,"hash",{enumerable:!0,get:function(){return rr.bufferFrom(this._hashStr,"binary")}});Jt.prototype.message=function(t){return this._messagesByName[t]};Jt.prototype.type=function(t){return this._typesByName[t]};Jt.prototype.inspect=function(){return jr("<Service %j>",this.name)};rr.addDeprecatedGetters(Jt,["message","messages","name","type","types"]);Jt.prototype.createEmitter=Xt.deprecate(function(t,e){e=e||{};var r=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=r.createChannel(t,e);return H4(r,n),n},"use `.createClient()` instead of `.createEmitter()`");Jt.prototype.createListener=Xt.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");Jt.prototype.emit=Xt.deprecate(function(t,e,r,n){if(!r||!this.equals(r.client._svc$))throw new Error("invalid emitter");var i=r.client;return zn.prototype.emitMessage.call(i,t,e,n&&n.bind(this)),r.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");Jt.prototype.equals=Xt.deprecate(function(t){return Jt.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");Jt.prototype.getFingerprint=Xt.deprecate(function(t){return rr.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");Jt.prototype.getSchema=Xt.deprecate(Fr.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");Jt.prototype.on=Xt.deprecate(function(t,e){var r=this;return this._server.onMessage(t,function(n,i){return e.call(r,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");Jt.prototype.subprotocol=Xt.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},r=new Ri(t.service,e);return r._handlers=Object.create(t._handlers),new Jt(this.name,this._messagesByName,this._typesByName,this.protocol,r)},"`.subprotocol()` will be removed in 5.1");Jt.prototype._attrs=function(t){var e={protocol:this.name},r=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(t);typeof s!="string"&&r.push(s)}}),r.length&&(e.types=r);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function z4(t,e,r){r===void 0&&typeof e=="function"&&(r=e,e=void 0);var n=new Jt({protocol:"Empty"},ji),i;n.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(s,o){i=o.serverProtocol,this.destroy(!0)}).once("eot",function(s,o){o&&!/interrupted/.test(o)?r(o):r(null,JSON.parse(i))})}function zn(t,e){e=e||{},uo.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=rr.getOption(e,"timeout",1e4),e.remoteProtocols&&ub(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(r){this[r.name]=this._createMessageHandler$(r)},this)}Xt.inherits(zn,uo.EventEmitter);zn.prototype.activeChannels=function(){return this._channels$.slice()};zn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(x){var _=new Nu,S=t(function(M,N){if(M){x(M);return}var k=new Jo().once("error",function(I){n.destroy(I)});x(null,N.pipe(k))});if(S)return _.pipe(S),_},n=new gp(this,i,e)}else{var s,o;if(db(t)?s=o=t:(s=t.readable,o=t.writable),!r){var f=new hf;s=s.pipe(f);var p=new Bu;p.pipe(o),o=p}n=new Bl(this,s,o,e),r||(n.once("eot",function(){s.unpipe(f),p.unpipe(o)}),f.once("error",function(x){n.destroy(x)}))}var b=this._channels$;return b.push(n),n.once("_drain",function(){b.splice(b.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};zn.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};zn.prototype.emitMessage=function(t,e,r,n){var i=pb(this._svc$,t),s=new Ol(i,{},e);this._emitMessage$(s,r,n)};zn.prototype.remoteProtocols=function(){return cb(this._cache$,!0)};Object.defineProperty(zn.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});zn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns$.push(r.length<3?r(this):r);return this};zn.prototype._emitMessage$=function(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)kr("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,r)});else{var o=new Error("no active channels");process.nextTick(function(){r?r.call(new mp(t._msg),o):n.emit("error",o)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var f;if(s===1)f=i[0];else if(this._policy$){if(f=this._policy$(this._channels$.slice()),!f){kr("policy returned no channel, skipping call");return}}else f=i[Math.floor(Math.random()*s)];f._emit(t,e,function(p,b){var x=this,_=x.message.errorType;if(p){n._strict$&&(p=_.clone(p.message,{wrapUnions:!0})),S(p);return}if(!b){S();return}p=b.error,n._strict$||(p===void 0?p=null:Fr.isType(_,"union:unwrapped")?typeof p=="string"&&(p=new Error(p)):p&&p.string&&typeof p.string=="string"&&(p=new Error(p.string))),S(p,b.response);function S(M,N){r?r.call(x,M,N):M&&n.emit("error",M)}})};zn.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),r=e.map(function(i){return i.getName()}),n="return function "+t.name+"(";return r.length&&(n+=r.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=r.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function Ri(t,e){e=e||{},uo.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&ub(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(r){var n=r.name;e.noCapitalize||(n=rr.capitalize(n)),this["on"+n]=this._createMessageHandler(r)},this)}Xt.inherits(Ri,uo.EventEmitter);Ri.prototype.activeChannels=function(){return rr.objectValues(this._channels)};Ri.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(_){var S=new Jo().once("error",function(M){n.destroy(M)});return t(function(M,N){if(M){_(M);return}var k=new Nu;k.pipe(N),_(null,k)}).pipe(S)},n=new ob(this,i,e)}else{var s,o;if(db(t)?s=o=t:(s=t.readable,o=t.writable),!r){var f=new hf;s=s.pipe(f);var p=new Bu;p.pipe(o),o=p}n=new ab(this,s,o,e),r||(n.once("eot",function(){s.unpipe(f),p.unpipe(o)}),f.once("error",function(_){n.destroy(_)}))}this.listeners("error").length||this.on("error",this._onError);var b=this._nextChannelId++,x=this._channels;return x[b]=n.once("eot",function(){delete x[b]}),this.emit("channel",n),n};Ri.prototype.onMessage=function(t,e){return pb(this.service,t),this._handlers[t]=e,this};Ri.prototype.remoteProtocols=function(){return cb(this._cache,!1)};Ri.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns.push(r.length<3?r(this):r);return this};Ri.prototype._createMessageHandler=function(t){var e=t.name,r=t.requestType.fields,n=r.length,i=r.length?", "+r.map(function(o){return"req."+o.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};Ri.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function tn(t,e){e=e||{},uo.EventEmitter.call(this),this.client=t,this.timeout=rr.getOption(e,"timeout",t._timeout$),this._endWritable=!!rr.getOption(e,"endWritable",!0),this._prefix=lb(e.scope);var r=t._cache$,n=t._svc$,i=e.serverHash;i||(i=n.hash);var s=r[i];s||(i=n.hash,s=r[i]=new co(n,n,i)),this._adapter=s,this._registry=new Cu(this,dp),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(o,f){kr("client channel EOT"),this.destroyed=!0,this.emit("eot",o,f)})}Xt.inherits(tn,uo.EventEmitter);tn.prototype.destroy=function(t){kr("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,r=this.pending;t&&e.clear(),t||!r?vp(t)?(kr("fatal client channel error: %s",t),this.emit("_eot",r,t)):this.emit("_eot",r):kr("client channel entering drain mode (%s pending)",r)};tn.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var r=this,n=new Ol(pp);this._emit(n,{timeout:t},function(i){e?e.call(r,i):i&&r.destroy(i)})};tn.prototype._createHandshakeRequest=function(t,e){var r=this.client._svc$;return{clientHash:r.hash,clientProtocol:e?null:JSON.stringify(r.protocol),serverHash:t._hash}};tn.prototype._emit=function(t,e,r){var n=t._msg,i=n.oneWay?void 0:new yp(n,{}),s=new mp(n,this),o=this;this.pending++,process.nextTick(function(){if(!n.name)f(t,i,p);else{o.emit("outgoingCall",s,e);var x=o.client._fns$;kr("starting client middleware chain (%s middleware)",x.length),gb({fns:x,ctx:s,wreq:t,wres:i,onTransition:f,onCompletion:p,onError:b})}});function f(x,_,S){var M,N;if(o.destroyed)M=new Error("channel destroyed");else try{N=x.toBuffer()}catch{M=rd(jr("invalid %j request",n.name),x,[{name:"headers",type:Wi},{name:"request",type:n.requestType}])}if(M){S(M);return}var k=e&&e.timeout!==void 0?e.timeout:o.timeout,I=o._registry.add(k,function(C,D,$){if(!C&&!n.oneWay)try{$._decodeResponse(D,_,n)}catch(j){C=j}S(C)});I|=o._prefix,kr("sending message %s",I),o._send(I,N,!!n&&n.oneWay)}function p(x){o.pending--,r.call(s,x,i),o.draining&&!o.destroyed&&!o.pending&&o.destroy()}function b(x){o.client.emit("error",x,o)}};tn.prototype._getAdapter=function(t){var e=t.serverHash,r=this.client._cache$,n=r[e];if(n)return n;var i=JSON.parse(t.serverProtocol),s=Jt.forProtocol(i);return n=new co(this.client._svc$,s,e,!0),r[e]=n};tn.prototype._matchesPrefix=function(t){return hb(t,this._prefix)};tn.prototype._send=rr.abstractFunction;rr.addDeprecatedGetters(tn,["pending","timeout"]);tn.prototype.getCache=Xt.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");tn.prototype.getProtocol=Xt.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");tn.prototype.isDestroyed=Xt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function gp(t,e,r){tn.call(this,t,r),this._writableFactory=e,(!r||!r.noPing)&&(kr("emitting ping request"),this.ping())}Xt.inherits(gp,tn);gp.prototype._send=function(t,e){var r=this._registry.get(t),n=this._adapter,i=this;return process.nextTick(s),!0;function s(o){if(!i.destroyed){var f=i._createHandshakeRequest(n,!o),p=i._writableFactory.call(i,function(b,x){if(b){r(b);return}x.on("data",function(_){kr("received response %s",_.id);var S=Buffer.concat(_.payload);try{var M=Ll(Ru,S),N=M.head;N.serverHash&&(n=i._getAdapter(N))}catch(I){r(I);return}var k=N.match;kr("handshake match: %s",k),i.emit("handshake",f,N),k==="NONE"?process.nextTick(function(){s(!0)}):(i._adapter=n,r(null,M.tail,n))})});if(!p){r(new Error("invalid writable stream"));return}p.write({id:t,payload:[Iu.toBuffer(f),e]}),i._endWritable&&p.end()}}};function Bl(t,e,r,n){tn.call(this,t,n),this._readable=e,this._writable=r,this._connected=!!(n&&n.noPing),this._readable.on("end",x),this._writable.on("finish",_);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",_),this._endWritable&&(kr("ending transport"),this._writable.end()),this._readable.removeListener("data",p).removeListener("data",b).removeListener("end",x)});var o;this._connected?this._readable.on("data",b):(this._readable.on("data",p),process.nextTick(f),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function f(S){if(!i.destroyed){o=i._createHandshakeRequest(i._adapter,!S);var M=[Iu.toBuffer(o),rr.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:M})}}function p(S){if(!i._matchesPrefix(S.id)){kr("discarding unscoped response %s (still connecting)",S.id);return}var M=Buffer.concat(S.payload);try{var N=Ll(Ru,M).head;N.serverHash&&(i._adapter=i._getAdapter(N))}catch(I){i.destroy(I);return}var k=N.match;kr("handshake match: %s",k),i.emit("handshake",o,N),k==="NONE"?process.nextTick(function(){f(!0)}):(kr("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",p).on("data",b),i._connected=!0,i.emit("_ready"),o=null)}function b(S){var M=S.id;if(!i._matchesPrefix(M)){kr("discarding unscoped message %s",M);return}var N=i._registry.get(M);N&&process.nextTick(function(){kr("received message %s",M),N(null,Buffer.concat(S.payload),i._adapter)})}function x(){i.destroy(!0)}function _(){i.destroy()}}Xt.inherits(Bl,tn);Bl.prototype._emit=function(){if(this._connected||this.draining)tn.prototype._emit.apply(this,arguments);else{kr("queuing request");var t=[],e,r;for(e=0,r=arguments.length;e<r;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};Bl.prototype._send=function(t,e,r){if(r){var n=this;process.nextTick(function(){n._registry.get(t)(null,rr.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:t,payload:[e]})};function Mn(t,e){e=e||{},uo.EventEmitter.call(this),this.server=t,this._endWritable=!!rr.getOption(e,"endWritable",!0),this._prefix=lb(e.scope);var r=t._cache,n=t.service,i=n.hash;r[i]||(r[i]=new co(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,o){kr("server channel EOT"),this.emit("eot",s,o)})}Xt.inherits(Mn,uo.EventEmitter);Mn.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,vp(t)?(kr("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};Mn.prototype._createHandshakeResponse=function(t,e){var r=this.server.service,n=r.hash,i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(r.protocol),serverHash:i?null:n}};Mn.prototype._getAdapter=function(t){var e=t.clientHash,r=this.server._cache[e];if(r)return r;if(!t.clientProtocol)throw Qs("UNKNOWN_PROTOCOL");var n=JSON.parse(t.clientProtocol),i=Jt.forProtocol(n);return r=new co(i,this.server.service,e,!0),this.server._cache[e]=r};Mn.prototype._matchesPrefix=function(t){return hb(t,this._prefix)};Mn.prototype._receive=function(t,e,r){var n=this,i;try{i=e._decodeRequest(t)}catch(S){r(n._encodeSystemError(Qs("INVALID_REQUEST",S)));return}var s=i._msg,o=new yp(s,{});if(!s.name){o.response=null,r(o.toBuffer(),!1);return}var f=new mp(s,this);n.emit("incomingCall",f);var p=this.server._fns;kr("starting server middleware chain (%s middleware)",p.length),n.pending++,gb({fns:p,ctx:f,wreq:i,wres:o,onTransition:b,onCompletion:x,onError:_});function b(S,M,N){var k=n.server._handlers[s.name];if(k){var D=!s.oneWay;try{D?k.call(f,S.request,function($,j){D=!1,M.error=$,M.response=j,N()}):(k.call(f,S.request),N())}catch($){D?(D=!1,N($)):_($)}}else{var I=n.server._defaultHandler;if(I)I.call(f,S,M,N);else{var C=new Error(jr("no handler for %s",s.name));N(Qs("NOT_IMPLEMENTED",C))}}}function x(S){n.pending--;var M=n.server,N;if(!S){var k=o.error,I=M._strict;I||(vp(k)?o.error=s.errorType.clone(k.message,{wrapUnions:!0}):k===null&&(k=o.error=void 0),k===void 0&&o.response===void 0&&s.responseType.isValid(null)&&(o.response=null));try{N=o.toBuffer()}catch{o.error!==void 0?S=rd(jr("invalid %j error",s.name),o,[{name:"headers",type:Wi},{name:"error",type:s.errorType}]):S=rd(jr("invalid %j response",s.name),o,[{name:"headers",type:Wi},{name:"response",type:s.responseType}])}}N?k!==void 0&&M.emit("error",Qs("APPLICATION_ERROR",k)):N=n._encodeSystemError(S,o.headers),r(N,s.oneWay),n.draining&&!n.pending&&n.destroy()}function _(S){n.server.emit("error",S,n)}};rr.addDeprecatedGetters(Mn,["pending"]);Mn.prototype.getCache=Xt.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Mn.prototype.getProtocol=Xt.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Mn.prototype.isDestroyed=Xt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Mn.prototype._encodeSystemError=function(t,e){var r=this.server;r.emit("error",t,this);var n;r._sysErrFormatter?n=r._sysErrFormatter.call(this,t):t.rpcCode&&(n=t.message);var i;if(e)try{i=Wi.toBuffer(e)}catch(s){r.emit("error",s,this)}return Buffer.concat([i||rr.bufferFrom([0]),rr.bufferFrom([1,0]),hp.toBuffer(n||"internal server error")])};function ob(t,e,r){Mn.call(this,t,r),this._writable=void 0;var n=this,i;process.nextTick(function(){i=e.call(n,function(p,b){process.nextTick(function(){if(p){f(p);return}n._writable=b.on("finish",f),n.emit("_writable")})}).on("data",s).on("end",o)});function s(p){var b=p.id,x=Buffer.concat(p.payload),_;try{var S=Ll(Iu,x),M=S.head,N=n._getAdapter(M)}catch(C){_=Qs("INVALID_HANDSHAKE_REQUEST",C)}var k=n._createHandshakeResponse(_,M);n.emit("handshake",M,k),_?I(n._encodeSystemError(_)):n._receive(S.tail,N,I);function I(C){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){I(C)});return}n._writable.write({id:b,payload:[Ru.toBuffer(k),C]})}n._writable&&n._endWritable&&n._writable.end()}}function o(){n.destroy()}function f(p){i.removeListener("data",s).removeListener("end",o),n.destroy(p||!0)}}Xt.inherits(ob,Mn);function ab(t,e,r,n){Mn.call(this,t,n),this._adapter=void 0,this._writable=r.on("finish",p),this._readable=e.on("data",s).on("end",f),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",o).removeListener("end",f)}).once("eot",function(){this._writable.removeListener("finish",p),this._endWritable&&this._writable.end()});var i=this;function s(b){var x=b.id;if(!i._matchesPrefix(x))return;var _=Buffer.concat(b.payload),S;try{var M=Ll(Iu,_),N=M.head;i._adapter=i._getAdapter(N)}catch(C){S=Qs("INVALID_HANDSHAKE_REQUEST",C)}var k=i._createHandshakeResponse(S,N);i.emit("handshake",N,k),S?I(i._encodeSystemError(S)):(i._readable.removeListener("data",s).on("data",o),i._receive(M.tail,i._adapter,I));function I(C){i.destroyed||i._writable.write({id:x,payload:[Ru.toBuffer(k),C]})}}function o(b){var x=b.id;if(!!i._matchesPrefix(x)){var _=Buffer.concat(b.payload);i._receive(_,i._adapter,function(S,M){i.destroyed||M||i._writable.write({id:x,payload:[S]})})}}function f(){i.destroy()}function p(){i.destroy(!0)}}Xt.inherits(ab,Mn);function Ol(t,e,r){this._msg=t,this.headers=e||{},this.request=r||{}}Ol.prototype.toBuffer=function(){var t=this._msg;return Buffer.concat([Wi.toBuffer(this.headers),hp.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function yp(t,e,r,n){this._msg=t,this.headers=e,this.error=r,this.response=n}yp.prototype.toBuffer=function(){var t=Wi.toBuffer(this.headers),e=this.error!==void 0;return Buffer.concat([t,sb.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function mp(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function Cu(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}Cu.prototype.get=function(t){return this._cbs[t&this._mask]};Cu.prototype.add=function(t,e){this._id=this._id+1&this._mask;var r=this,n=this._id,i;return t>0&&(i=setTimeout(function(){s(new Error("timeout"))},t)),this._cbs[n]=s,this._n++,n;function s(){!r._cbs[n]||(delete r._cbs[n],r._n--,i&&clearTimeout(i),e.apply(r._ctx,arguments))}};Cu.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function co(t,e,r,n){this._clientSvc=t,this._serverSvc=e,this._hash=r,this._isRemote=!!n,this._readers=fb(t,e)}co.prototype._decodeRequest=function(t){var e=new lp(t),r=Wi._read(e),n=hp._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=pp,!e.isValid())throw new Error(jr("truncated %s request",n||"ping$"));return new Ol(i,r,s)};co.prototype._decodeResponse=function(t,e,r){var n=new lp(t);rr.copyOwnProperties(Wi._read(n),e.headers,!0);var i=sb._read(n),s=r.name;if(s){var o=this._readers[s+(i?"*":"!")];if(r=this._clientSvc.message(s),i?e.error=o._read(n):e.response=o._read(n),!n.isValid())throw new Error(jr("truncated %s response",s))}else r=pp};function Jo(){Vi.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=rr.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Xt.inherits(Jo,Vi.Transform);Jo.prototype._transform=function(t,e,r){t=Buffer.concat([this._buf,t]);for(var n;t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;){if(n)this._bufs.push(t.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(n+4)}this._buf=t,r()};Jo.prototype._flush=function(){if(this._buf.length||this._bufs.length){var t=this._bufs.slice();t.unshift(this._buf);var e=Qs("TRAILING_DATA");e.trailingData=Buffer.concat(t).toString(),this.emit("error",e)}};function Nu(){Vi.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Xt.inherits(Nu,Vi.Transform);Nu.prototype._transform=function(t,e,r){var n=t.payload,i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i],this.push(td(o.length)),this.push(o);this.push(td(0)),r()};function hf(){Vi.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=rr.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Xt.inherits(hf,Vi.Transform);hf.prototype._transform=function(t,e,r){for(t=Buffer.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,r();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var n;this._frameCount&&t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,n+4)),t=t.slice(n+4);if(this._frameCount){this._buf=t,r();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};hf.prototype._flush=Jo.prototype._flush;function Bu(){Vi.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Xt.inherits(Bu,Vi.Transform);Bu.prototype._transform=function(t,e,r){var n=t.payload,i=n.length,s;s=rr.newBuffer(8),s.writeInt32BE(t.id,0),s.writeInt32BE(i,4),this.push(s);var o;for(o=0;o<i;o++)s=n[o],this.push(td(s.length)),this.push(s);r()};function td(t){var e=rr.newBuffer(4);return e.writeInt32BE(t),e}function Ll(t,e){var r=new lp(e),n=t._read(r);if(!r.isValid())throw new Error(jr("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function Hh(t,e){return t.equals(e)?t:t.createResolver(e)}function fb(t,e){var r={};return t.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(jr("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(jr("inconsistent one-way message: %s",i));r[i+"?"]=Hh(s.requestType,n.requestType),r[i+"*"]=Hh(n.errorType,s.errorType),r[i+"!"]=Hh(n.responseType,s.responseType)}catch(o){throw Qs("INCOMPATIBLE_PROTOCOL",o)}}),r}function ub(t,e,r,n){Object.keys(e).forEach(function(i){var s=e[i],o,f;n?(o=r,f=Jt.forProtocol(s)):(o=Jt.forProtocol(s),f=r),t[i]=new co(o,f,i,!0)})}function cb(t,e){var r={};return Object.keys(t).forEach(function(n){var i=t[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;r[n]=s.protocol}}),r}function vp(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function H4(t,e){return t.on("error",function(r){e.emit("error",r,t)})}function Rc(t,e){var r=new Error(t);return r.cause=e,r}function Qs(t,e){var r=Rc(t.toLowerCase().replace(/_/g," "),e);return r.rpcCode=e&&e.rpcCode?e.rpcCode:t,r}function rd(t,e,r){var n=[],i,s,o;for(i=0,s=r.length;i<s;i++)o=r[i],o.type.isValid(e[o.name],{errorHook:b});var f=n.map(function(x){return jr("%s = %j but expected %s",x.path,x.value,x.type)}).join(", "),p=new Error(jr("%s (%s)",t,f));return p.details=n,p;function b(x,_,S){var M=[],N,k,I;for(N=0,k=x.length;N<k;N++)I=x[N],isNaN(I)?M.push("."+I):M.push("["+I+"]");n.push({path:o.name+M.join(""),value:_,type:S})}}function lb(t){return t?rr.getHash(t).readInt16BE(0)<<32-dp:0}function hb(t,e){return(t^e)>>32-dp===0}function db(t){return!!(t&&t.pipe)}function pb(t,e){var r=t.message(e);if(!r)throw new Error(jr("unknown message: %s",e));return r}function gb(t){var e=[t.wreq,t.wres],r=[],n;i(0);function i(o){var f=!1;o<t.fns.length?t.fns[o].apply(t.ctx,e.concat(function(p,b){if(f){t.onError(Rc("duplicate forward middleware call",p));return}if(f=!0,p||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){n=p,s();return}b&&r.push(b),i(++o)})):t.onTransition.apply(t.ctx,e.concat(function(p){if(f){t.onError(Rc("duplicate handler call",p));return}f=!0,n=p,process.nextTick(s)}))}function s(){var o=r.pop();if(o){var f=!1;o.call(t.ctx,n,function(p){if(f){t.onError(Rc("duplicate backward middleware call",p));return}n=p,f=!0,s()})}else t.onCompletion.call(t.ctx,n)}}var G4={Adapter:co,HANDSHAKE_REQUEST_TYPE:Iu,HANDSHAKE_RESPONSE_TYPE:Ru,Message:Es,Registry:Cu,Service:Jt,discoverProtocol:z4,streams:{FrameDecoder:Jo,FrameEncoder:Nu,NettyDecoder:hf,NettyEncoder:Bu}};function bp(){return new Error("unsupported in the browser")}function V4(){return function(t,e,r){r(bp())}}function W4(){return function(){throw bp()}}var J4={createImportHook:V4,createSyncImportHook:W4,existsSync:function(){return!1},readFileSync:function(){throw bp()}},Cc=J4,yb=cf,nd=Sn,Y4=af,za=Y4.format,Z4={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function xp(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=Cc.createImportHook());var n=[],i,s;e.importHook(t,"idl",function(p,b){if(p){r(p);return}if(b===void 0){r(null,{});return}try{var x=new _r(b,e),_=x._readProtocol(b,e)}catch(S){S.path=t,r(S);return}i=_.protocol,s=_.imports,o()});function o(){var p=s.shift();if(!p)n.length&&(i.types=i.types?n.concat(i.types):n),r(null,i);else{var b=nd.join(nd.dirname(t),p.name);p.kind==="idl"?xp(b,e,f):e.importHook(b,p.kind,function(x,_){if(x){r(x);return}switch(p.kind){case"protocol":case"schema":if(_===void 0){f(null,{});return}try{var S=JSON.parse(_)}catch(N){N.path=b,r(N);return}var M=p.kind==="schema"?{types:[S]}:S;f(null,M);break;default:r(new Error(za("invalid import kind: %s",p.kind)))}})}}function f(p,b){if(p){r(p);return}(b.types||[]).forEach(function(x){if(x.namespace===void 0){var _=b.namespace;if(!_){var S=/^(.*)\.[^.]+$/.exec(b.protocol);S&&(_=S[1])}x.namespace=_||""}n.push(x)});try{Object.keys(b.messages||{}).forEach(function(x){if(i.messages||(i.messages={}),i.messages[x])throw new Error(za("duplicate message: %s",x));i.messages[x]=b.messages[x]})}catch(x){r(x);return}o()}}function X4(t){var e;if(typeof t=="string"&&~t.indexOf(nd.sep)&&Cc.existsSync(t)){var r=Cc.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{var n={importHook:Cc.createSyncImportHook()};xp(t,n,function(s,o){e=s?r:o})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return _r.readProtocol(e)}catch{try{return _r.readSchema(e)}catch{return e}}}}function _r(t,e){e=e||{},this._tk=new lo(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||Z4}_r.readProtocol=function(t,e){var r=new _r(t,e),n=r._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};_r.readSchema=function(t,e){var r=new _r(t,e),n=r._readJavadoc(),i=r._readType(n===void 0?{}:{doc:n});return r._tk.next({id:"(eof)"}),i};_r.prototype._readProtocol=function(){var t=this._tk,e=[],r=[],n={},i;this._readImports(e);var s={},o=this._readJavadoc();for(o!==void 0&&(s.doc=o),this._readAnnotations(s),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(s.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var f=this._readJavadoc(),p=this._readType(),b=this._readImports(e,!0),x=void 0;if(i=t.pos,!b&&(x=this._readMessage(p))){f!==void 0&&x.schema.doc===void 0&&(x.schema.doc=f);var _=!1;if((x.schema.response==="void"||x.schema.response.type==="void")&&(_=!this._ackVoidMessages&&!x.schema.errors,x.schema.response==="void"?x.schema.response="null":x.schema.response.type="null"),_&&(x.schema["one-way"]=!0),n[x.name])throw new Error(za("duplicate message: %s",x.name));n[x.name]=x.schema}else f&&(typeof p=="string"?p={doc:f,type:p}:p.doc===void 0&&(p.doc=f)),r.push(p),t.pos=i,t.next({val:";",silent:!0});f=void 0}return t.next({id:"(eof)"}),r.length&&(s.types=r),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};_r.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var r=[];!e.next({val:"(",silent:!0});)r.push(e.next().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};_r.prototype._readMessage=function(t){var e=this._tk,r={request:[],response:t};this._readAnnotations(r);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do r.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":r.errors=[];do r.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":r["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:r}}};_r.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};_r.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),r={type:this._readType()};return e!==void 0&&r.doc===void 0&&(r.doc=e),this._readAnnotations(r),r.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(r.default=t.next({id:"json"}).val),r};_r.prototype._readType=function(t){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[t.type];return e&&(delete t.type,yb.copyOwnProperties(e,t)),Object.keys(t).length>1?t:t.type}};_r.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};_r.prototype._readMap=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.values=this._readType(),e.next({val:">",silent:n}),t};_r.prototype._readArray=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.items=this._readType(),e.next({val:">",silent:n}),t};_r.prototype._readEnum=function(t){var e=this._tk;e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.symbols=[];do t.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return t};_r.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};_r.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};_r.prototype._readImports=function(t,e){for(var r=this._tk,n=0,i=r.pos;r.next({val:"import",silent:!0});){if(!n&&e&&r.next({val:"(",silent:!0})){r.pos=i;return}var s=r.next({id:"name"}).val,o=JSON.parse(r.next({id:"string"}).val);r.next({val:";"}),t.push({kind:s,name:o}),n++}return n};function lo(t){this._str=t,this.pos=0}lo.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},r=this._skip(t&&t.emitJavadoc);if(r)e.id="javadoc",e.val=r;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var o;if(t&&t.id&&t.id!==e.id?o=this.error(za("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(o=this.error(za("expected value %s",t.val),e)),o)if(t&&t.silent){this.pos=e.pos;return}else throw o;else return e};lo.prototype.error=function(t,e){var r=typeof e!="number",n=r?e.pos:e,i=this._str,s=1,o=0,f;for(f=0;f<n;f++)i.charAt(f)===`
`&&(s++,o=f);var p=r?za("invalid token %j: %s",e,t):t,b=new Error(p);return b.token=r?e:void 0,b.lineNum=s,b.colNum=n-o,b};lo.prototype._skip=function(t){for(var e=this._str,r=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(r=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,r&&t?Q4(e.slice(n+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",n)}};lo.prototype._endOf=function(t){for(var e=this.pos,r=this._str;t.test(r.charAt(e));)e++;return e};lo.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,r;r=e.charAt(t);){if(r==='"')return t+1;r==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};lo.prototype._endOfJson=function(){var t=yb.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function Q4(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(r,n){return n?r.replace(/^\s*\*\s?/,""):r});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var e5={Tokenizer:lo,assembleProtocol:xp,read:X4,readProtocol:_r.readProtocol,readSchema:_r.readSchema};(function(t){var e=K4,r=G4,n=e5,i=cf;function s(o,f){var p=n.read(o);return p.protocol?r.Service.forProtocol(p,f):e.Type.forSchema(p,f)}t.exports={Service:r.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:r.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,t.exports)})(Yv);var Ji=up,Qr=cf,ho=Sn,Ou=af,mb=Sn,Dl={namespace:"org.apache.avro.file"},Ny=Ji.Type.forSchema("long",Dl),vb=Ji.Type.forSchema({type:"map",values:"bytes"},Dl),wp=Ji.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:vb},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},Dl),bb=Ji.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},Dl),Zf=Qr.bufferFrom("Obj"),Ul=Ou.format,hu=Qr.Tap;function Fl(t,e){e=e||{};var r=!!e.noDecode;ho.Duplex.call(this,{readableObjectMode:!r,allowHalfOpen:!1}),this._type=Ji.Type.forSchema(t),this._tap=new hu(Qr.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=wb(r,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}Ou.inherits(Fl,ho.Duplex);Fl.prototype._write=function(t,e,r){this._writeCb=r;var n=this._tap;n.buf=Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};Fl.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function Si(t){t=t||{};var e=!!t.noDecode;ho.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?Ji.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new hu(Qr.newBuffer(0)),this._blockTap=new hu(Qr.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new Qr.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}Ou.inherits(Si,ho.Duplex);Si.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:mb.inflateRaw}};Si.getDefaultCodecs=Si.defaultCodecs;Si.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<Zf.length)return!1;if(!Zf.equals(t.buf.slice(0,Zf.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=wp._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var r=this._codecs||Si.getDefaultCodecs();if(this._decompress=r[this._codec],!this._decompress){this.emit("error",new Error(Ul("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=Ji.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=wb(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};Si.prototype._write=function(t,e,r){var n=this._tap;if(n.buf=Buffer.concat([n.buf,t]),n.pos=0,!this._decodeHeader()){process.nextTick(r);return}this._write=this._writeChunk,this._write(Qr.newBuffer(0),e,r)};Si.prototype._writeChunk=function(t,e,r){var n=this._tap;n.buf=Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0;for(var i=1,s;s=t5(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,o))}o();function o(){--i||r()}};Si.prototype._createBlockCallback=function(t,e){var r=this,n=this._index++;return function(i,s){if(i){var o=new Error(Ul("%s codec decompression error",r._codec));o.cause=i,r.emit("error",o),e()}else r._queue.push(new xb(n,s,e,t)),r._needPush&&r._read()}};Si.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--,this.push(this._readValue(t))};function $l(t,e){e=e||{},ho.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=Ji.Type.forSchema(t),this._writeValue=function(r,n){try{this._type._write(r,n)}catch(i){this.emit("error",i)}},this._tap=new hu(Qr.newBuffer(e.batchSize||65536))}Ou.inherits($l,ho.Transform);$l.prototype._transform=function(t,e,r){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,t),!n.isValid()){s&&this.push(r5(n.buf,0,s));var o=n.pos-s;o>i.length&&(n.buf=Qr.newBuffer(2*o)),n.pos=0,this._writeValue(n,t)}r()};$l.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()};function Mi(t,e){e=e||{},ho.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var r;if(Ji.Type.isType(t)?(r=t,t=void 0):r=Ji.Type.forSchema(t),this._schema=t,this._type=r,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(o){this.emit("error",o)}},this._blockSize=e.blockSize||65536,this._tap=new hu(Qr.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new Qr.Lcg().nextBuffer(16),this._queue=new Qr.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!vb.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||Mi.getDefaultCodecs())[n],!this._compress)throw new Error(Ul("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}Ou.inherits(Mi,ho.Duplex);Mi.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:mb.deflateRaw}};Mi.getDefaultCodecs=Mi.defaultCodecs;Mi.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=Qr.copyOwnProperties(this._metadata,{"avro.schema":Qr.bufferFrom(t),"avro.codec":Qr.bufferFrom(this._codec)},!0),r=wp.getRecordConstructor(),n=new r(Zf,e,this._syncMarker);this.push(n.toBuffer())};Mi.prototype._write=function(t,e,r){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,t),!n.isValid()){i&&(this._flushChunk(i,r),s=!0);var o=n.pos-i;o>this._blockSize&&(this._blockSize=o*2),n.buf=Qr.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,t)}this._blockCount++,s||r()};Mi.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0};Mi.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?process.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(Ny.toBuffer(e.count,!0)),this.push(Ny.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};Mi.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var o=new Error(Ul("%s codec compression error",e._codec));o.cause=i,e.emit("error",o);return}e._pending--,e._queue.push(new xb(r,s,t,n)),e._needPush&&(e._needPush=!1,e._read())}};function xb(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=n|0}function t5(t){var e=t.pos,r=bb._read(t);return t.isValid()?r:(t.pos=e,null)}function wb(t,e,r){if(t)return function(i){return function(s){var o=s.pos;return i(s),s.buf.slice(o,s.pos)}}(e._skip);if(r){var n=r.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function r5(t,e,r){var n=Qr.newBuffer(r);return t.copy(n,0,e,e+r),n}var n5={BLOCK_TYPE:bb,HEADER_TYPE:wp,MAGIC_BYTES:Zf,streams:{BlockDecoder:Si,BlockEncoder:Mi,RawDecoder:Fl,RawEncoder:$l}};(function(t){var e=Yv.exports,r=n5,n=cf,i=Sn,s=af;function o(x,_){i.Readable.call(this),_=_||{},this._batchSize=_.batchSize||65536,this._blob=x,this._pos=0}s.inherits(o,i.Readable),o.prototype._read=function(){var x=this._pos;if(x>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var _=this._blob.slice(x,this._pos,this._blob.type),S=new FileReader,M=this;S.addEventListener("loadend",function N(k){S.removeEventListener("loadend",N,!1),k.error?M.emit("error",k.error):M.push(n.bufferFrom(S.result))},!1),S.readAsArrayBuffer(_)};function f(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(f,i.Transform),f.prototype._transform=function(x,_,S){this._bufs.push(x),S()},f.prototype._flush=function(x){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),x()};function p(x,_){return new o(x).pipe(new r.streams.BlockDecoder(_))}function b(x,_){var S=new r.streams.BlockEncoder(x,_),M=new f;return S.pipe(M),new i.Duplex({objectMode:!0,read:function(){var N=M.read();N?I(N):M.once("readable",I);var k=this;function I(C){k.push(C||M.read()),k.push(null)}},write:function(N,k,I){return S.write(N,k,I)}}).on("finish",function(){S.end()})}t.exports={createBlobDecoder:p,createBlobEncoder:b,streams:r.streams},n.copyOwnProperties(e,t.exports)})(Jv);(function(t){var e=V&&V.__createBinding||(Object.create?function(o,f,p,b){b===void 0&&(b=p),Object.defineProperty(o,b,{enumerable:!0,get:function(){return f[p]}})}:function(o,f,p,b){b===void 0&&(b=p),o[b]=f[p]}),r=V&&V.__setModuleDefault||(Object.create?function(o,f){Object.defineProperty(o,"default",{enumerable:!0,value:f})}:function(o,f){o.default=f}),n=V&&V.__importStar||function(o){if(o&&o.__esModule)return o;var f={};if(o!=null)for(var p in o)p!=="default"&&Object.prototype.hasOwnProperty.call(o,p)&&e(f,o,p);return r(f,o),f};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTags=t.tagsParser=t.tagParser=void 0;const i=n(Jv.exports);t.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),t.tagsParser=i.Type.forSchema({type:"array",items:t.tagParser});function s(o){if(o.length==0)return new Uint8Array(0);let f;try{f=t.tagsParser.toBuffer(o)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(f)}t.serializeTags=s})(np);var df={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.Signer=void 0;class i5{static verify(e){throw new Error("You must implement verify method on child")}}jl.Signer=i5;var ql={},Lu={},_b=Cd(q_),Yo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIG_CONFIG=t.SignatureConfig=void 0;var e;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA"})(e=t.SignatureConfig||(t.SignatureConfig={})),t.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(Yo);var s5=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),o5=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a5=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&s5(e,t,r);return o5(e,t),e},f5=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lu,"__esModule",{value:!0});const u5=f5(ki.exports),By=a5(_b),Oy=Yo;class c5{constructor(e,r){this._key=e,this.pk=r,this.ownerLength=Oy.SIG_CONFIG[2].pubLength,this.signatureLength=Oy.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return By.sign(Buffer.from(e),Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=u5.default.toBuffer(e)),By.verify(Buffer.from(n),Buffer.from(r),Buffer.from(i))}}Lu.default=c5;var pf={},_p={};const Vt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function ei(t,e){if(!t)throw new Error(e)}function qt(t,e,r){if(ei(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;ei(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;ei(e.length===r,n)}}function _o(t){ei(Ea(t)==="Boolean","Expected compressed to be a Boolean")}function yi(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),qt("output",t,e),t}function Ea(t){return Object.prototype.toString.call(t).slice(8,-1)}var l5=t=>({contextRandomize(e){switch(ei(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&qt("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(Vt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return qt("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(qt("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(Vt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(qt("private key",e,32),qt("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(Vt.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(qt("private key",e,32),qt("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(Vt.TWEAK_MUL)}},publicKeyVerify(e){return qt("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(qt("private key",e,32),_o(r),n=yi(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(Vt.SECKEY_INVALID);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(qt("public key",e,[33,65]),_o(r),n=yi(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(qt("public key",e,[33,65]),_o(r),n=yi(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){ei(Array.isArray(e),"Expected public keys to be an Array"),ei(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)qt("public key",i,[33,65]);switch(_o(r),n=yi(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_COMBINE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(qt("public key",e,[33,65]),qt("tweak",r,32),_o(n),i=yi(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(qt("public key",e,[33,65]),qt("tweak",r,32),_o(n),i=yi(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_MUL)}},signatureNormalize(e){switch(qt("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(Vt.SIG_PARSE)}},signatureExport(e,r){qt("signature",e,64),r=yi(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(qt("signature",e),r=yi(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){qt("message",e,32),qt("private key",r,32),ei(Ea(n)==="Object","Expected options to be an Object"),n.data!==void 0&&qt("options.data",n.data),n.noncefn!==void 0&&ei(Ea(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=yi(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(Vt.SIGN);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(qt("signature",e,64),qt("message",r,32),qt("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(qt("signature",e,64),ei(Ea(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),qt("message",n,32),_o(i),s=yi(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.RECOVER);case 3:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(qt("public key",e,[33,65]),qt("private key",r,32),ei(Ea(n)==="Object","Expected options to be an Object"),n.data!==void 0&&qt("options.data",n.data),n.hashfn!==void 0?(ei(Ea(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&qt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&qt("options.ybuf",n.ybuf,32),qt("output",i)):i=yi(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.ECDH)}}}),Eb={};const h5="elliptic",d5="6.5.4",p5="EC cryptography",g5="lib/elliptic.js",y5=["lib"],m5={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},v5={type:"git",url:"git@github.com:indutny/elliptic"},b5=["EC","Elliptic","curve","Cryptography"],x5="Fedor Indutny <fedor@indutny.com>",w5="MIT",_5={url:"https://github.com/indutny/elliptic/issues"},E5="https://github.com/indutny/elliptic",A5={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},S5={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"};var M5={name:h5,version:d5,description:p5,main:g5,files:y5,scripts:m5,repository:v5,keywords:b5,author:x5,license:w5,bugs:_5,homepage:E5,devDependencies:A5,dependencies:S5},Hn={},as={exports:{}};(function(t){(function(e,r){function n(T,h){if(!T)throw new Error(h||"Assertion failed")}function i(T,h){T.super_=h;var c=function(){};c.prototype=h.prototype,T.prototype=new c,T.prototype.constructor=T}function s(T,h,c){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((h==="le"||h==="be")&&(c=h,h=10),this._init(T||0,h||10,c||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(h){return h instanceof s?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===s.wordSize&&Array.isArray(h.words)},s.max=function(h,c){return h.cmp(c)>0?h:c},s.min=function(h,c){return h.cmp(c)<0?h:c},s.prototype._init=function(h,c,a){if(typeof h=="number")return this._initNumber(h,c,a);if(typeof h=="object")return this._initArray(h,c,a);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),h=h.toString().replace(/\s+/g,"");var u=0;h[0]==="-"&&(u++,this.negative=1),u<h.length&&(c===16?this._parseHex(h,u,a):(this._parseBase(h,c,u),a==="le"&&this._initArray(this.toArray(),c,a)))},s.prototype._initNumber=function(h,c,a){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(n(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),c,a)},s.prototype._initArray=function(h,c,a){if(n(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var y,m,w=0;if(a==="be")for(u=h.length-1,y=0;u>=0;u-=3)m=h[u]|h[u-1]<<8|h[u-2]<<16,this.words[y]|=m<<w&67108863,this.words[y+1]=m>>>26-w&67108863,w+=24,w>=26&&(w-=26,y++);else if(a==="le")for(u=0,y=0;u<h.length;u+=3)m=h[u]|h[u+1]<<8|h[u+2]<<16,this.words[y]|=m<<w&67108863,this.words[y+1]=m>>>26-w&67108863,w+=24,w>=26&&(w-=26,y++);return this.strip()};function f(T,h){var c=T.charCodeAt(h);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function p(T,h,c){var a=f(T,c);return c-1>=h&&(a|=f(T,c-1)<<4),a}s.prototype._parseHex=function(h,c,a){this.length=Math.ceil((h.length-c)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var y=0,m=0,w;if(a==="be")for(u=h.length-1;u>=c;u-=2)w=p(h,c,u)<<y,this.words[m]|=w&67108863,y>=18?(y-=18,m+=1,this.words[m]|=w>>>26):y+=8;else{var v=h.length-c;for(u=v%2===0?c+1:c;u<h.length;u+=2)w=p(h,c,u)<<y,this.words[m]|=w&67108863,y>=18?(y-=18,m+=1,this.words[m]|=w>>>26):y+=8}this.strip()};function b(T,h,c,a){for(var u=0,y=Math.min(T.length,c),m=h;m<y;m++){var w=T.charCodeAt(m)-48;u*=a,w>=49?u+=w-49+10:w>=17?u+=w-17+10:u+=w}return u}s.prototype._parseBase=function(h,c,a){this.words=[0],this.length=1;for(var u=0,y=1;y<=67108863;y*=c)u++;u--,y=y/c|0;for(var m=h.length-a,w=m%u,v=Math.min(m,m-w)+a,l=0,g=a;g<v;g+=u)l=b(h,g,g+u,c),this.imuln(y),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(w!==0){var d=1;for(l=b(h,g,h.length,c),g=0;g<w;g++)d*=c;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},s.prototype.copy=function(h){h.words=new Array(this.length);for(var c=0;c<this.length;c++)h.words[c]=this.words[c];h.length=this.length,h.negative=this.negative,h.red=this.red},s.prototype.clone=function(){var h=new s(null);return this.copy(h),h},s.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(h,c){h=h||10,c=c|0||1;var a;if(h===16||h==="hex"){a="";for(var u=0,y=0,m=0;m<this.length;m++){var w=this.words[m],v=((w<<u|y)&16777215).toString(16);y=w>>>24-u&16777215,y!==0||m!==this.length-1?a=x[6-v.length]+v+a:a=v+a,u+=2,u>=26&&(u-=26,m--)}for(y!==0&&(a=y.toString(16)+a);a.length%c!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(h===(h|0)&&h>=2&&h<=36){var l=_[h],g=S[h];a="";var d=this.clone();for(d.negative=0;!d.isZero();){var E=d.modn(g).toString(h);d=d.idivn(g),d.isZero()?a=E+a:a=x[l-E.length]+E+a}for(this.isZero()&&(a="0"+a);a.length%c!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(h,c){return n(typeof o<"u"),this.toArrayLike(o,h,c)},s.prototype.toArray=function(h,c){return this.toArrayLike(Array,h,c)},s.prototype.toArrayLike=function(h,c,a){var u=this.byteLength(),y=a||Math.max(1,u);n(u<=y,"byte array longer than desired length"),n(y>0,"Requested array length <= 0"),this.strip();var m=c==="le",w=new h(y),v,l,g=this.clone();if(m){for(l=0;!g.isZero();l++)v=g.andln(255),g.iushrn(8),w[l]=v;for(;l<y;l++)w[l]=0}else{for(l=0;l<y-u;l++)w[l]=0;for(l=0;!g.isZero();l++)v=g.andln(255),g.iushrn(8),w[y-l-1]=v}return w},Math.clz32?s.prototype._countBits=function(h){return 32-Math.clz32(h)}:s.prototype._countBits=function(h){var c=h,a=0;return c>=4096&&(a+=13,c>>>=13),c>=64&&(a+=7,c>>>=7),c>=8&&(a+=4,c>>>=4),c>=2&&(a+=2,c>>>=2),a+c},s.prototype._zeroBits=function(h){if(h===0)return 26;var c=h,a=0;return(c&8191)===0&&(a+=13,c>>>=13),(c&127)===0&&(a+=7,c>>>=7),(c&15)===0&&(a+=4,c>>>=4),(c&3)===0&&(a+=2,c>>>=2),(c&1)===0&&a++,a},s.prototype.bitLength=function(){var h=this.words[this.length-1],c=this._countBits(h);return(this.length-1)*26+c};function M(T){for(var h=new Array(T.bitLength()),c=0;c<h.length;c++){var a=c/26|0,u=c%26;h[c]=(T.words[a]&1<<u)>>>u}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,c=0;c<this.length;c++){var a=this._zeroBits(this.words[c]);if(h+=a,a!==26)break}return h},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},s.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var c=0;c<h.length;c++)this.words[c]=this.words[c]|h.words[c];return this.strip()},s.prototype.ior=function(h){return n((this.negative|h.negative)===0),this.iuor(h)},s.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},s.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},s.prototype.iuand=function(h){var c;this.length>h.length?c=h:c=this;for(var a=0;a<c.length;a++)this.words[a]=this.words[a]&h.words[a];return this.length=c.length,this.strip()},s.prototype.iand=function(h){return n((this.negative|h.negative)===0),this.iuand(h)},s.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},s.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},s.prototype.iuxor=function(h){var c,a;this.length>h.length?(c=this,a=h):(c=h,a=this);for(var u=0;u<a.length;u++)this.words[u]=c.words[u]^a.words[u];if(this!==c)for(;u<c.length;u++)this.words[u]=c.words[u];return this.length=c.length,this.strip()},s.prototype.ixor=function(h){return n((this.negative|h.negative)===0),this.iuxor(h)},s.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},s.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},s.prototype.inotn=function(h){n(typeof h=="number"&&h>=0);var c=Math.ceil(h/26)|0,a=h%26;this._expand(c),a>0&&c--;for(var u=0;u<c;u++)this.words[u]=~this.words[u]&67108863;return a>0&&(this.words[u]=~this.words[u]&67108863>>26-a),this.strip()},s.prototype.notn=function(h){return this.clone().inotn(h)},s.prototype.setn=function(h,c){n(typeof h=="number"&&h>=0);var a=h/26|0,u=h%26;return this._expand(a+1),c?this.words[a]=this.words[a]|1<<u:this.words[a]=this.words[a]&~(1<<u),this.strip()},s.prototype.iadd=function(h){var c;if(this.negative!==0&&h.negative===0)return this.negative=0,c=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,c=this.isub(h),h.negative=1,c._normSign();var a,u;this.length>h.length?(a=this,u=h):(a=h,u=this);for(var y=0,m=0;m<u.length;m++)c=(a.words[m]|0)+(u.words[m]|0)+y,this.words[m]=c&67108863,y=c>>>26;for(;y!==0&&m<a.length;m++)c=(a.words[m]|0)+y,this.words[m]=c&67108863,y=c>>>26;if(this.length=a.length,y!==0)this.words[this.length]=y,this.length++;else if(a!==this)for(;m<a.length;m++)this.words[m]=a.words[m];return this},s.prototype.add=function(h){var c;return h.negative!==0&&this.negative===0?(h.negative=0,c=this.sub(h),h.negative^=1,c):h.negative===0&&this.negative!==0?(this.negative=0,c=h.sub(this),this.negative=1,c):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},s.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var c=this.iadd(h);return h.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var a=this.cmp(h);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var u,y;a>0?(u=this,y=h):(u=h,y=this);for(var m=0,w=0;w<y.length;w++)c=(u.words[w]|0)-(y.words[w]|0)+m,m=c>>26,this.words[w]=c&67108863;for(;m!==0&&w<u.length;w++)c=(u.words[w]|0)+m,m=c>>26,this.words[w]=c&67108863;if(m===0&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(h){return this.clone().isub(h)};function N(T,h,c){c.negative=h.negative^T.negative;var a=T.length+h.length|0;c.length=a,a=a-1|0;var u=T.words[0]|0,y=h.words[0]|0,m=u*y,w=m&67108863,v=m/67108864|0;c.words[0]=w;for(var l=1;l<a;l++){for(var g=v>>>26,d=v&67108863,E=Math.min(l,h.length-1),L=Math.max(0,l-T.length+1);L<=E;L++){var U=l-L|0;u=T.words[U]|0,y=h.words[L]|0,m=u*y+d,g+=m/67108864|0,d=m&67108863}c.words[l]=d|0,v=g|0}return v!==0?c.words[l]=v|0:c.length--,c.strip()}var k=function(h,c,a){var u=h.words,y=c.words,m=a.words,w=0,v,l,g,d=u[0]|0,E=d&8191,L=d>>>13,U=u[1]|0,K=U&8191,re=U>>>13,oe=u[2]|0,Y=oe&8191,be=oe>>>13,Fe=u[3]|0,he=Fe&8191,Je=Fe>>>13,rt=u[4]|0,Se=rt&8191,Ve=rt>>>13,vt=u[5]|0,ke=vt&8191,Ze=vt>>>13,it=u[6]|0,Ie=it&8191,lt=it>>>13,ht=u[7]|0,Ee=ht&8191,dt=ht>>>13,st=u[8]|0,Me=st&8191,ot=st>>>13,pt=u[9]|0,Re=pt&8191,at=pt>>>13,ft=y[0]|0,_e=ft&8191,et=ft>>>13,Xe=y[1]|0,xe=Xe&8191,nt=Xe>>>13,tt=y[2]|0,we=tt&8191,ut=tt>>>13,gt=y[3]|0,Ce=gt&8191,bt=gt>>>13,Ye=y[4]|0,me=Ye&8191,Qe=Ye>>>13,ct=y[5]|0,Ae=ct&8191,yt=ct>>>13,xt=y[6]|0,de=xt&8191,mt=xt>>>13,P=y[7]|0,R=P&8191,B=P>>>13,A=y[8]|0,O=A&8191,H=A>>>13,W=y[9]|0,J=W&8191,ne=W>>>13;a.negative=h.negative^c.negative,a.length=19,v=Math.imul(E,_e),l=Math.imul(E,et),l=l+Math.imul(L,_e)|0,g=Math.imul(L,et);var fe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(fe>>>26)|0,fe&=67108863,v=Math.imul(K,_e),l=Math.imul(K,et),l=l+Math.imul(re,_e)|0,g=Math.imul(re,et),v=v+Math.imul(E,xe)|0,l=l+Math.imul(E,nt)|0,l=l+Math.imul(L,xe)|0,g=g+Math.imul(L,nt)|0;var se=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(se>>>26)|0,se&=67108863,v=Math.imul(Y,_e),l=Math.imul(Y,et),l=l+Math.imul(be,_e)|0,g=Math.imul(be,et),v=v+Math.imul(K,xe)|0,l=l+Math.imul(K,nt)|0,l=l+Math.imul(re,xe)|0,g=g+Math.imul(re,nt)|0,v=v+Math.imul(E,we)|0,l=l+Math.imul(E,ut)|0,l=l+Math.imul(L,we)|0,g=g+Math.imul(L,ut)|0;var wt=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(wt>>>26)|0,wt&=67108863,v=Math.imul(he,_e),l=Math.imul(he,et),l=l+Math.imul(Je,_e)|0,g=Math.imul(Je,et),v=v+Math.imul(Y,xe)|0,l=l+Math.imul(Y,nt)|0,l=l+Math.imul(be,xe)|0,g=g+Math.imul(be,nt)|0,v=v+Math.imul(K,we)|0,l=l+Math.imul(K,ut)|0,l=l+Math.imul(re,we)|0,g=g+Math.imul(re,ut)|0,v=v+Math.imul(E,Ce)|0,l=l+Math.imul(E,bt)|0,l=l+Math.imul(L,Ce)|0,g=g+Math.imul(L,bt)|0;var Be=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(Se,_e),l=Math.imul(Se,et),l=l+Math.imul(Ve,_e)|0,g=Math.imul(Ve,et),v=v+Math.imul(he,xe)|0,l=l+Math.imul(he,nt)|0,l=l+Math.imul(Je,xe)|0,g=g+Math.imul(Je,nt)|0,v=v+Math.imul(Y,we)|0,l=l+Math.imul(Y,ut)|0,l=l+Math.imul(be,we)|0,g=g+Math.imul(be,ut)|0,v=v+Math.imul(K,Ce)|0,l=l+Math.imul(K,bt)|0,l=l+Math.imul(re,Ce)|0,g=g+Math.imul(re,bt)|0,v=v+Math.imul(E,me)|0,l=l+Math.imul(E,Qe)|0,l=l+Math.imul(L,me)|0,g=g+Math.imul(L,Qe)|0;var $e=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(ke,_e),l=Math.imul(ke,et),l=l+Math.imul(Ze,_e)|0,g=Math.imul(Ze,et),v=v+Math.imul(Se,xe)|0,l=l+Math.imul(Se,nt)|0,l=l+Math.imul(Ve,xe)|0,g=g+Math.imul(Ve,nt)|0,v=v+Math.imul(he,we)|0,l=l+Math.imul(he,ut)|0,l=l+Math.imul(Je,we)|0,g=g+Math.imul(Je,ut)|0,v=v+Math.imul(Y,Ce)|0,l=l+Math.imul(Y,bt)|0,l=l+Math.imul(be,Ce)|0,g=g+Math.imul(be,bt)|0,v=v+Math.imul(K,me)|0,l=l+Math.imul(K,Qe)|0,l=l+Math.imul(re,me)|0,g=g+Math.imul(re,Qe)|0,v=v+Math.imul(E,Ae)|0,l=l+Math.imul(E,yt)|0,l=l+Math.imul(L,Ae)|0,g=g+Math.imul(L,yt)|0;var je=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(je>>>26)|0,je&=67108863,v=Math.imul(Ie,_e),l=Math.imul(Ie,et),l=l+Math.imul(lt,_e)|0,g=Math.imul(lt,et),v=v+Math.imul(ke,xe)|0,l=l+Math.imul(ke,nt)|0,l=l+Math.imul(Ze,xe)|0,g=g+Math.imul(Ze,nt)|0,v=v+Math.imul(Se,we)|0,l=l+Math.imul(Se,ut)|0,l=l+Math.imul(Ve,we)|0,g=g+Math.imul(Ve,ut)|0,v=v+Math.imul(he,Ce)|0,l=l+Math.imul(he,bt)|0,l=l+Math.imul(Je,Ce)|0,g=g+Math.imul(Je,bt)|0,v=v+Math.imul(Y,me)|0,l=l+Math.imul(Y,Qe)|0,l=l+Math.imul(be,me)|0,g=g+Math.imul(be,Qe)|0,v=v+Math.imul(K,Ae)|0,l=l+Math.imul(K,yt)|0,l=l+Math.imul(re,Ae)|0,g=g+Math.imul(re,yt)|0,v=v+Math.imul(E,de)|0,l=l+Math.imul(E,mt)|0,l=l+Math.imul(L,de)|0,g=g+Math.imul(L,mt)|0;var We=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(We>>>26)|0,We&=67108863,v=Math.imul(Ee,_e),l=Math.imul(Ee,et),l=l+Math.imul(dt,_e)|0,g=Math.imul(dt,et),v=v+Math.imul(Ie,xe)|0,l=l+Math.imul(Ie,nt)|0,l=l+Math.imul(lt,xe)|0,g=g+Math.imul(lt,nt)|0,v=v+Math.imul(ke,we)|0,l=l+Math.imul(ke,ut)|0,l=l+Math.imul(Ze,we)|0,g=g+Math.imul(Ze,ut)|0,v=v+Math.imul(Se,Ce)|0,l=l+Math.imul(Se,bt)|0,l=l+Math.imul(Ve,Ce)|0,g=g+Math.imul(Ve,bt)|0,v=v+Math.imul(he,me)|0,l=l+Math.imul(he,Qe)|0,l=l+Math.imul(Je,me)|0,g=g+Math.imul(Je,Qe)|0,v=v+Math.imul(Y,Ae)|0,l=l+Math.imul(Y,yt)|0,l=l+Math.imul(be,Ae)|0,g=g+Math.imul(be,yt)|0,v=v+Math.imul(K,de)|0,l=l+Math.imul(K,mt)|0,l=l+Math.imul(re,de)|0,g=g+Math.imul(re,mt)|0,v=v+Math.imul(E,R)|0,l=l+Math.imul(E,B)|0,l=l+Math.imul(L,R)|0,g=g+Math.imul(L,B)|0;var Ge=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,v=Math.imul(Me,_e),l=Math.imul(Me,et),l=l+Math.imul(ot,_e)|0,g=Math.imul(ot,et),v=v+Math.imul(Ee,xe)|0,l=l+Math.imul(Ee,nt)|0,l=l+Math.imul(dt,xe)|0,g=g+Math.imul(dt,nt)|0,v=v+Math.imul(Ie,we)|0,l=l+Math.imul(Ie,ut)|0,l=l+Math.imul(lt,we)|0,g=g+Math.imul(lt,ut)|0,v=v+Math.imul(ke,Ce)|0,l=l+Math.imul(ke,bt)|0,l=l+Math.imul(Ze,Ce)|0,g=g+Math.imul(Ze,bt)|0,v=v+Math.imul(Se,me)|0,l=l+Math.imul(Se,Qe)|0,l=l+Math.imul(Ve,me)|0,g=g+Math.imul(Ve,Qe)|0,v=v+Math.imul(he,Ae)|0,l=l+Math.imul(he,yt)|0,l=l+Math.imul(Je,Ae)|0,g=g+Math.imul(Je,yt)|0,v=v+Math.imul(Y,de)|0,l=l+Math.imul(Y,mt)|0,l=l+Math.imul(be,de)|0,g=g+Math.imul(be,mt)|0,v=v+Math.imul(K,R)|0,l=l+Math.imul(K,B)|0,l=l+Math.imul(re,R)|0,g=g+Math.imul(re,B)|0,v=v+Math.imul(E,O)|0,l=l+Math.imul(E,H)|0,l=l+Math.imul(L,O)|0,g=g+Math.imul(L,H)|0;var qe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(qe>>>26)|0,qe&=67108863,v=Math.imul(Re,_e),l=Math.imul(Re,et),l=l+Math.imul(at,_e)|0,g=Math.imul(at,et),v=v+Math.imul(Me,xe)|0,l=l+Math.imul(Me,nt)|0,l=l+Math.imul(ot,xe)|0,g=g+Math.imul(ot,nt)|0,v=v+Math.imul(Ee,we)|0,l=l+Math.imul(Ee,ut)|0,l=l+Math.imul(dt,we)|0,g=g+Math.imul(dt,ut)|0,v=v+Math.imul(Ie,Ce)|0,l=l+Math.imul(Ie,bt)|0,l=l+Math.imul(lt,Ce)|0,g=g+Math.imul(lt,bt)|0,v=v+Math.imul(ke,me)|0,l=l+Math.imul(ke,Qe)|0,l=l+Math.imul(Ze,me)|0,g=g+Math.imul(Ze,Qe)|0,v=v+Math.imul(Se,Ae)|0,l=l+Math.imul(Se,yt)|0,l=l+Math.imul(Ve,Ae)|0,g=g+Math.imul(Ve,yt)|0,v=v+Math.imul(he,de)|0,l=l+Math.imul(he,mt)|0,l=l+Math.imul(Je,de)|0,g=g+Math.imul(Je,mt)|0,v=v+Math.imul(Y,R)|0,l=l+Math.imul(Y,B)|0,l=l+Math.imul(be,R)|0,g=g+Math.imul(be,B)|0,v=v+Math.imul(K,O)|0,l=l+Math.imul(K,H)|0,l=l+Math.imul(re,O)|0,g=g+Math.imul(re,H)|0,v=v+Math.imul(E,J)|0,l=l+Math.imul(E,ne)|0,l=l+Math.imul(L,J)|0,g=g+Math.imul(L,ne)|0;var ze=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(ze>>>26)|0,ze&=67108863,v=Math.imul(Re,xe),l=Math.imul(Re,nt),l=l+Math.imul(at,xe)|0,g=Math.imul(at,nt),v=v+Math.imul(Me,we)|0,l=l+Math.imul(Me,ut)|0,l=l+Math.imul(ot,we)|0,g=g+Math.imul(ot,ut)|0,v=v+Math.imul(Ee,Ce)|0,l=l+Math.imul(Ee,bt)|0,l=l+Math.imul(dt,Ce)|0,g=g+Math.imul(dt,bt)|0,v=v+Math.imul(Ie,me)|0,l=l+Math.imul(Ie,Qe)|0,l=l+Math.imul(lt,me)|0,g=g+Math.imul(lt,Qe)|0,v=v+Math.imul(ke,Ae)|0,l=l+Math.imul(ke,yt)|0,l=l+Math.imul(Ze,Ae)|0,g=g+Math.imul(Ze,yt)|0,v=v+Math.imul(Se,de)|0,l=l+Math.imul(Se,mt)|0,l=l+Math.imul(Ve,de)|0,g=g+Math.imul(Ve,mt)|0,v=v+Math.imul(he,R)|0,l=l+Math.imul(he,B)|0,l=l+Math.imul(Je,R)|0,g=g+Math.imul(Je,B)|0,v=v+Math.imul(Y,O)|0,l=l+Math.imul(Y,H)|0,l=l+Math.imul(be,O)|0,g=g+Math.imul(be,H)|0,v=v+Math.imul(K,J)|0,l=l+Math.imul(K,ne)|0,l=l+Math.imul(re,J)|0,g=g+Math.imul(re,ne)|0;var Ke=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,v=Math.imul(Re,we),l=Math.imul(Re,ut),l=l+Math.imul(at,we)|0,g=Math.imul(at,ut),v=v+Math.imul(Me,Ce)|0,l=l+Math.imul(Me,bt)|0,l=l+Math.imul(ot,Ce)|0,g=g+Math.imul(ot,bt)|0,v=v+Math.imul(Ee,me)|0,l=l+Math.imul(Ee,Qe)|0,l=l+Math.imul(dt,me)|0,g=g+Math.imul(dt,Qe)|0,v=v+Math.imul(Ie,Ae)|0,l=l+Math.imul(Ie,yt)|0,l=l+Math.imul(lt,Ae)|0,g=g+Math.imul(lt,yt)|0,v=v+Math.imul(ke,de)|0,l=l+Math.imul(ke,mt)|0,l=l+Math.imul(Ze,de)|0,g=g+Math.imul(Ze,mt)|0,v=v+Math.imul(Se,R)|0,l=l+Math.imul(Se,B)|0,l=l+Math.imul(Ve,R)|0,g=g+Math.imul(Ve,B)|0,v=v+Math.imul(he,O)|0,l=l+Math.imul(he,H)|0,l=l+Math.imul(Je,O)|0,g=g+Math.imul(Je,H)|0,v=v+Math.imul(Y,J)|0,l=l+Math.imul(Y,ne)|0,l=l+Math.imul(be,J)|0,g=g+Math.imul(be,ne)|0;var Oe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,v=Math.imul(Re,Ce),l=Math.imul(Re,bt),l=l+Math.imul(at,Ce)|0,g=Math.imul(at,bt),v=v+Math.imul(Me,me)|0,l=l+Math.imul(Me,Qe)|0,l=l+Math.imul(ot,me)|0,g=g+Math.imul(ot,Qe)|0,v=v+Math.imul(Ee,Ae)|0,l=l+Math.imul(Ee,yt)|0,l=l+Math.imul(dt,Ae)|0,g=g+Math.imul(dt,yt)|0,v=v+Math.imul(Ie,de)|0,l=l+Math.imul(Ie,mt)|0,l=l+Math.imul(lt,de)|0,g=g+Math.imul(lt,mt)|0,v=v+Math.imul(ke,R)|0,l=l+Math.imul(ke,B)|0,l=l+Math.imul(Ze,R)|0,g=g+Math.imul(Ze,B)|0,v=v+Math.imul(Se,O)|0,l=l+Math.imul(Se,H)|0,l=l+Math.imul(Ve,O)|0,g=g+Math.imul(Ve,H)|0,v=v+Math.imul(he,J)|0,l=l+Math.imul(he,ne)|0,l=l+Math.imul(Je,J)|0,g=g+Math.imul(Je,ne)|0;var Ue=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,v=Math.imul(Re,me),l=Math.imul(Re,Qe),l=l+Math.imul(at,me)|0,g=Math.imul(at,Qe),v=v+Math.imul(Me,Ae)|0,l=l+Math.imul(Me,yt)|0,l=l+Math.imul(ot,Ae)|0,g=g+Math.imul(ot,yt)|0,v=v+Math.imul(Ee,de)|0,l=l+Math.imul(Ee,mt)|0,l=l+Math.imul(dt,de)|0,g=g+Math.imul(dt,mt)|0,v=v+Math.imul(Ie,R)|0,l=l+Math.imul(Ie,B)|0,l=l+Math.imul(lt,R)|0,g=g+Math.imul(lt,B)|0,v=v+Math.imul(ke,O)|0,l=l+Math.imul(ke,H)|0,l=l+Math.imul(Ze,O)|0,g=g+Math.imul(Ze,H)|0,v=v+Math.imul(Se,J)|0,l=l+Math.imul(Se,ne)|0,l=l+Math.imul(Ve,J)|0,g=g+Math.imul(Ve,ne)|0;var Te=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Te>>>26)|0,Te&=67108863,v=Math.imul(Re,Ae),l=Math.imul(Re,yt),l=l+Math.imul(at,Ae)|0,g=Math.imul(at,yt),v=v+Math.imul(Me,de)|0,l=l+Math.imul(Me,mt)|0,l=l+Math.imul(ot,de)|0,g=g+Math.imul(ot,mt)|0,v=v+Math.imul(Ee,R)|0,l=l+Math.imul(Ee,B)|0,l=l+Math.imul(dt,R)|0,g=g+Math.imul(dt,B)|0,v=v+Math.imul(Ie,O)|0,l=l+Math.imul(Ie,H)|0,l=l+Math.imul(lt,O)|0,g=g+Math.imul(lt,H)|0,v=v+Math.imul(ke,J)|0,l=l+Math.imul(ke,ne)|0,l=l+Math.imul(Ze,J)|0,g=g+Math.imul(Ze,ne)|0;var Le=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Le>>>26)|0,Le&=67108863,v=Math.imul(Re,de),l=Math.imul(Re,mt),l=l+Math.imul(at,de)|0,g=Math.imul(at,mt),v=v+Math.imul(Me,R)|0,l=l+Math.imul(Me,B)|0,l=l+Math.imul(ot,R)|0,g=g+Math.imul(ot,B)|0,v=v+Math.imul(Ee,O)|0,l=l+Math.imul(Ee,H)|0,l=l+Math.imul(dt,O)|0,g=g+Math.imul(dt,H)|0,v=v+Math.imul(Ie,J)|0,l=l+Math.imul(Ie,ne)|0,l=l+Math.imul(lt,J)|0,g=g+Math.imul(lt,ne)|0;var De=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Re,R),l=Math.imul(Re,B),l=l+Math.imul(at,R)|0,g=Math.imul(at,B),v=v+Math.imul(Me,O)|0,l=l+Math.imul(Me,H)|0,l=l+Math.imul(ot,O)|0,g=g+Math.imul(ot,H)|0,v=v+Math.imul(Ee,J)|0,l=l+Math.imul(Ee,ne)|0,l=l+Math.imul(dt,J)|0,g=g+Math.imul(dt,ne)|0;var Ne=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,v=Math.imul(Re,O),l=Math.imul(Re,H),l=l+Math.imul(at,O)|0,g=Math.imul(at,H),v=v+Math.imul(Me,J)|0,l=l+Math.imul(Me,ne)|0,l=l+Math.imul(ot,J)|0,g=g+Math.imul(ot,ne)|0;var X=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(X>>>26)|0,X&=67108863,v=Math.imul(Re,J),l=Math.imul(Re,ne),l=l+Math.imul(at,J)|0,g=Math.imul(at,ne);var Q=(w+v|0)+((l&8191)<<13)|0;return w=(g+(l>>>13)|0)+(Q>>>26)|0,Q&=67108863,m[0]=fe,m[1]=se,m[2]=wt,m[3]=Be,m[4]=$e,m[5]=je,m[6]=We,m[7]=Ge,m[8]=qe,m[9]=ze,m[10]=Ke,m[11]=Oe,m[12]=Ue,m[13]=Te,m[14]=Le,m[15]=De,m[16]=Ne,m[17]=X,m[18]=Q,w!==0&&(m[19]=w,a.length++),a};Math.imul||(k=N);function I(T,h,c){c.negative=h.negative^T.negative,c.length=T.length+h.length;for(var a=0,u=0,y=0;y<c.length-1;y++){var m=u;u=0;for(var w=a&67108863,v=Math.min(y,h.length-1),l=Math.max(0,y-T.length+1);l<=v;l++){var g=y-l,d=T.words[g]|0,E=h.words[l]|0,L=d*E,U=L&67108863;m=m+(L/67108864|0)|0,U=U+w|0,w=U&67108863,m=m+(U>>>26)|0,u+=m>>>26,m&=67108863}c.words[y]=w,a=m,m=u}return a!==0?c.words[y]=a:c.length--,c.strip()}function C(T,h,c){var a=new D;return a.mulp(T,h,c)}s.prototype.mulTo=function(h,c){var a,u=this.length+h.length;return this.length===10&&h.length===10?a=k(this,h,c):u<63?a=N(this,h,c):u<1024?a=I(this,h,c):a=C(this,h,c),a};function D(T,h){this.x=T,this.y=h}D.prototype.makeRBT=function(h){for(var c=new Array(h),a=s.prototype._countBits(h)-1,u=0;u<h;u++)c[u]=this.revBin(u,a,h);return c},D.prototype.revBin=function(h,c,a){if(h===0||h===a-1)return h;for(var u=0,y=0;y<c;y++)u|=(h&1)<<c-y-1,h>>=1;return u},D.prototype.permute=function(h,c,a,u,y,m){for(var w=0;w<m;w++)u[w]=c[h[w]],y[w]=a[h[w]]},D.prototype.transform=function(h,c,a,u,y,m){this.permute(m,h,c,a,u,y);for(var w=1;w<y;w<<=1)for(var v=w<<1,l=Math.cos(2*Math.PI/v),g=Math.sin(2*Math.PI/v),d=0;d<y;d+=v)for(var E=l,L=g,U=0;U<w;U++){var K=a[d+U],re=u[d+U],oe=a[d+U+w],Y=u[d+U+w],be=E*oe-L*Y;Y=E*Y+L*oe,oe=be,a[d+U]=K+oe,u[d+U]=re+Y,a[d+U+w]=K-oe,u[d+U+w]=re-Y,U!==v&&(be=l*E-g*L,L=l*L+g*E,E=be)}},D.prototype.guessLen13b=function(h,c){var a=Math.max(c,h)|1,u=a&1,y=0;for(a=a/2|0;a;a=a>>>1)y++;return 1<<y+1+u},D.prototype.conjugate=function(h,c,a){if(!(a<=1))for(var u=0;u<a/2;u++){var y=h[u];h[u]=h[a-u-1],h[a-u-1]=y,y=c[u],c[u]=-c[a-u-1],c[a-u-1]=-y}},D.prototype.normalize13b=function(h,c){for(var a=0,u=0;u<c/2;u++){var y=Math.round(h[2*u+1]/c)*8192+Math.round(h[2*u]/c)+a;h[u]=y&67108863,y<67108864?a=0:a=y/67108864|0}return h},D.prototype.convert13b=function(h,c,a,u){for(var y=0,m=0;m<c;m++)y=y+(h[m]|0),a[2*m]=y&8191,y=y>>>13,a[2*m+1]=y&8191,y=y>>>13;for(m=2*c;m<u;++m)a[m]=0;n(y===0),n((y&-8192)===0)},D.prototype.stub=function(h){for(var c=new Array(h),a=0;a<h;a++)c[a]=0;return c},D.prototype.mulp=function(h,c,a){var u=2*this.guessLen13b(h.length,c.length),y=this.makeRBT(u),m=this.stub(u),w=new Array(u),v=new Array(u),l=new Array(u),g=new Array(u),d=new Array(u),E=new Array(u),L=a.words;L.length=u,this.convert13b(h.words,h.length,w,u),this.convert13b(c.words,c.length,g,u),this.transform(w,m,v,l,u,y),this.transform(g,m,d,E,u,y);for(var U=0;U<u;U++){var K=v[U]*d[U]-l[U]*E[U];l[U]=v[U]*E[U]+l[U]*d[U],v[U]=K}return this.conjugate(v,l,u),this.transform(v,l,L,m,u,y),this.conjugate(L,m,u),this.normalize13b(L,u),a.negative=h.negative^c.negative,a.length=h.length+c.length,a.strip()},s.prototype.mul=function(h){var c=new s(null);return c.words=new Array(this.length+h.length),this.mulTo(h,c)},s.prototype.mulf=function(h){var c=new s(null);return c.words=new Array(this.length+h.length),C(this,h,c)},s.prototype.imul=function(h){return this.clone().mulTo(h,this)},s.prototype.imuln=function(h){n(typeof h=="number"),n(h<67108864);for(var c=0,a=0;a<this.length;a++){var u=(this.words[a]|0)*h,y=(u&67108863)+(c&67108863);c>>=26,c+=u/67108864|0,c+=y>>>26,this.words[a]=y&67108863}return c!==0&&(this.words[a]=c,this.length++),this},s.prototype.muln=function(h){return this.clone().imuln(h)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(h){var c=M(h);if(c.length===0)return new s(1);for(var a=this,u=0;u<c.length&&c[u]===0;u++,a=a.sqr());if(++u<c.length)for(var y=a.sqr();u<c.length;u++,y=y.sqr())c[u]!==0&&(a=a.mul(y));return a},s.prototype.iushln=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26,u=67108863>>>26-c<<26-c,y;if(c!==0){var m=0;for(y=0;y<this.length;y++){var w=this.words[y]&u,v=(this.words[y]|0)-w<<c;this.words[y]=v|m,m=w>>>26-c}m&&(this.words[y]=m,this.length++)}if(a!==0){for(y=this.length-1;y>=0;y--)this.words[y+a]=this.words[y];for(y=0;y<a;y++)this.words[y]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(h){return n(this.negative===0),this.iushln(h)},s.prototype.iushrn=function(h,c,a){n(typeof h=="number"&&h>=0);var u;c?u=(c-c%26)/26:u=0;var y=h%26,m=Math.min((h-y)/26,this.length),w=67108863^67108863>>>y<<y,v=a;if(u-=m,u=Math.max(0,u),v){for(var l=0;l<m;l++)v.words[l]=this.words[l];v.length=m}if(m!==0)if(this.length>m)for(this.length-=m,l=0;l<this.length;l++)this.words[l]=this.words[l+m];else this.words[0]=0,this.length=1;var g=0;for(l=this.length-1;l>=0&&(g!==0||l>=u);l--){var d=this.words[l]|0;this.words[l]=g<<26-y|d>>>y,g=d&w}return v&&g!==0&&(v.words[v.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(h,c,a){return n(this.negative===0),this.iushrn(h,c,a)},s.prototype.shln=function(h){return this.clone().ishln(h)},s.prototype.ushln=function(h){return this.clone().iushln(h)},s.prototype.shrn=function(h){return this.clone().ishrn(h)},s.prototype.ushrn=function(h){return this.clone().iushrn(h)},s.prototype.testn=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26,u=1<<c;if(this.length<=a)return!1;var y=this.words[a];return!!(y&u)},s.prototype.imaskn=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(c!==0&&a++,this.length=Math.min(a,this.length),c!==0){var u=67108863^67108863>>>c<<c;this.words[this.length-1]&=u}return this.strip()},s.prototype.maskn=function(h){return this.clone().imaskn(h)},s.prototype.iaddn=function(h){return n(typeof h=="number"),n(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},s.prototype._iaddn=function(h){this.words[0]+=h;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(h){if(n(typeof h=="number"),n(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},s.prototype.addn=function(h){return this.clone().iaddn(h)},s.prototype.subn=function(h){return this.clone().isubn(h)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(h,c,a){var u=h.length+a,y;this._expand(u);var m,w=0;for(y=0;y<h.length;y++){m=(this.words[y+a]|0)+w;var v=(h.words[y]|0)*c;m-=v&67108863,w=(m>>26)-(v/67108864|0),this.words[y+a]=m&67108863}for(;y<this.length-a;y++)m=(this.words[y+a]|0)+w,w=m>>26,this.words[y+a]=m&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,y=0;y<this.length;y++)m=-(this.words[y]|0)+w,w=m>>26,this.words[y]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(h,c){var a=this.length-h.length,u=this.clone(),y=h,m=y.words[y.length-1]|0,w=this._countBits(m);a=26-w,a!==0&&(y=y.ushln(a),u.iushln(a),m=y.words[y.length-1]|0);var v=u.length-y.length,l;if(c!=="mod"){l=new s(null),l.length=v+1,l.words=new Array(l.length);for(var g=0;g<l.length;g++)l.words[g]=0}var d=u.clone()._ishlnsubmul(y,1,v);d.negative===0&&(u=d,l&&(l.words[v]=1));for(var E=v-1;E>=0;E--){var L=(u.words[y.length+E]|0)*67108864+(u.words[y.length+E-1]|0);for(L=Math.min(L/m|0,67108863),u._ishlnsubmul(y,L,E);u.negative!==0;)L--,u.negative=0,u._ishlnsubmul(y,1,E),u.isZero()||(u.negative^=1);l&&(l.words[E]=L)}return l&&l.strip(),u.strip(),c!=="div"&&a!==0&&u.iushrn(a),{div:l||null,mod:u}},s.prototype.divmod=function(h,c,a){if(n(!h.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var u,y,m;return this.negative!==0&&h.negative===0?(m=this.neg().divmod(h,c),c!=="mod"&&(u=m.div.neg()),c!=="div"&&(y=m.mod.neg(),a&&y.negative!==0&&y.iadd(h)),{div:u,mod:y}):this.negative===0&&h.negative!==0?(m=this.divmod(h.neg(),c),c!=="mod"&&(u=m.div.neg()),{div:u,mod:m.mod}):(this.negative&h.negative)!==0?(m=this.neg().divmod(h.neg(),c),c!=="div"&&(y=m.mod.neg(),a&&y.negative!==0&&y.isub(h)),{div:m.div,mod:y}):h.length>this.length||this.cmp(h)<0?{div:new s(0),mod:this}:h.length===1?c==="div"?{div:this.divn(h.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new s(this.modn(h.words[0]))}:this._wordDiv(h,c)},s.prototype.div=function(h){return this.divmod(h,"div",!1).div},s.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},s.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},s.prototype.divRound=function(h){var c=this.divmod(h);if(c.mod.isZero())return c.div;var a=c.div.negative!==0?c.mod.isub(h):c.mod,u=h.ushrn(1),y=h.andln(1),m=a.cmp(u);return m<0||y===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modn=function(h){n(h<=67108863);for(var c=(1<<26)%h,a=0,u=this.length-1;u>=0;u--)a=(c*a+(this.words[u]|0))%h;return a},s.prototype.idivn=function(h){n(h<=67108863);for(var c=0,a=this.length-1;a>=0;a--){var u=(this.words[a]|0)+c*67108864;this.words[a]=u/h|0,c=u%h}return this.strip()},s.prototype.divn=function(h){return this.clone().idivn(h)},s.prototype.egcd=function(h){n(h.negative===0),n(!h.isZero());var c=this,a=h.clone();c.negative!==0?c=c.umod(h):c=c.clone();for(var u=new s(1),y=new s(0),m=new s(0),w=new s(1),v=0;c.isEven()&&a.isEven();)c.iushrn(1),a.iushrn(1),++v;for(var l=a.clone(),g=c.clone();!c.isZero();){for(var d=0,E=1;(c.words[0]&E)===0&&d<26;++d,E<<=1);if(d>0)for(c.iushrn(d);d-- >0;)(u.isOdd()||y.isOdd())&&(u.iadd(l),y.isub(g)),u.iushrn(1),y.iushrn(1);for(var L=0,U=1;(a.words[0]&U)===0&&L<26;++L,U<<=1);if(L>0)for(a.iushrn(L);L-- >0;)(m.isOdd()||w.isOdd())&&(m.iadd(l),w.isub(g)),m.iushrn(1),w.iushrn(1);c.cmp(a)>=0?(c.isub(a),u.isub(m),y.isub(w)):(a.isub(c),m.isub(u),w.isub(y))}return{a:m,b:w,gcd:a.iushln(v)}},s.prototype._invmp=function(h){n(h.negative===0),n(!h.isZero());var c=this,a=h.clone();c.negative!==0?c=c.umod(h):c=c.clone();for(var u=new s(1),y=new s(0),m=a.clone();c.cmpn(1)>0&&a.cmpn(1)>0;){for(var w=0,v=1;(c.words[0]&v)===0&&w<26;++w,v<<=1);if(w>0)for(c.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(m),u.iushrn(1);for(var l=0,g=1;(a.words[0]&g)===0&&l<26;++l,g<<=1);if(l>0)for(a.iushrn(l);l-- >0;)y.isOdd()&&y.iadd(m),y.iushrn(1);c.cmp(a)>=0?(c.isub(a),u.isub(y)):(a.isub(c),y.isub(u))}var d;return c.cmpn(1)===0?d=u:d=y,d.cmpn(0)<0&&d.iadd(h),d},s.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var c=this.clone(),a=h.clone();c.negative=0,a.negative=0;for(var u=0;c.isEven()&&a.isEven();u++)c.iushrn(1),a.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;a.isEven();)a.iushrn(1);var y=c.cmp(a);if(y<0){var m=c;c=a,a=m}else if(y===0||a.cmpn(1)===0)break;c.isub(a)}while(!0);return a.iushln(u)},s.prototype.invm=function(h){return this.egcd(h).a.umod(h)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(h){return this.words[0]&h},s.prototype.bincn=function(h){n(typeof h=="number");var c=h%26,a=(h-c)/26,u=1<<c;if(this.length<=a)return this._expand(a+1),this.words[a]|=u,this;for(var y=u,m=a;y!==0&&m<this.length;m++){var w=this.words[m]|0;w+=y,y=w>>>26,w&=67108863,this.words[m]=w}return y!==0&&(this.words[m]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(h){var c=h<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var a;if(this.length>1)a=1;else{c&&(h=-h),n(h<=67108863,"Number is too big");var u=this.words[0]|0;a=u===h?0:u<h?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var c=this.ucmp(h);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var c=0,a=this.length-1;a>=0;a--){var u=this.words[a]|0,y=h.words[a]|0;if(u!==y){u<y?c=-1:u>y&&(c=1);break}}return c},s.prototype.gtn=function(h){return this.cmpn(h)===1},s.prototype.gt=function(h){return this.cmp(h)===1},s.prototype.gten=function(h){return this.cmpn(h)>=0},s.prototype.gte=function(h){return this.cmp(h)>=0},s.prototype.ltn=function(h){return this.cmpn(h)===-1},s.prototype.lt=function(h){return this.cmp(h)===-1},s.prototype.lten=function(h){return this.cmpn(h)<=0},s.prototype.lte=function(h){return this.cmp(h)<=0},s.prototype.eqn=function(h){return this.cmpn(h)===0},s.prototype.eq=function(h){return this.cmp(h)===0},s.red=function(h){return new ee(h)},s.prototype.toRed=function(h){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(h){return this.red=h,this},s.prototype.forceRed=function(h){return n(!this.red,"Already a number in reduction context"),this._forceRed(h)},s.prototype.redAdd=function(h){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},s.prototype.redIAdd=function(h){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},s.prototype.redSub=function(h){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},s.prototype.redISub=function(h){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},s.prototype.redShl=function(h){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},s.prototype.redMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},s.prototype.redIMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(h){return n(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var $={k256:null,p224:null,p192:null,p25519:null};function j(T,h){this.name=T,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var h=new s(null);return h.words=new Array(Math.ceil(this.n/13)),h},j.prototype.ireduce=function(h){var c=h,a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),a=c.bitLength();while(a>this.n);var u=a<this.n?-1:c.ucmp(this.p);return u===0?(c.words[0]=0,c.length=1):u>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},j.prototype.split=function(h,c){h.iushrn(this.n,0,c)},j.prototype.imulK=function(h){return h.imul(this.k)};function F(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,j),F.prototype.split=function(h,c){for(var a=4194303,u=Math.min(h.length,9),y=0;y<u;y++)c.words[y]=h.words[y];if(c.length=u,h.length<=9){h.words[0]=0,h.length=1;return}var m=h.words[9];for(c.words[c.length++]=m&a,y=10;y<h.length;y++){var w=h.words[y]|0;h.words[y-10]=(w&a)<<4|m>>>22,m=w}m>>>=22,h.words[y-10]=m,m===0&&h.length>10?h.length-=10:h.length-=9},F.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var c=0,a=0;a<h.length;a++){var u=h.words[a]|0;c+=u*977,h.words[a]=c&67108863,c=u*64+(c/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function z(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,j);function Z(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(Z,j);function te(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(te,j),te.prototype.imulK=function(h){for(var c=0,a=0;a<h.length;a++){var u=(h.words[a]|0)*19+c,y=u&67108863;u>>>=26,h.words[a]=y,c=u}return c!==0&&(h.words[h.length++]=c),h},s._prime=function(h){if($[h])return $[h];var c;if(h==="k256")c=new F;else if(h==="p224")c=new z;else if(h==="p192")c=new Z;else if(h==="p25519")c=new te;else throw new Error("Unknown prime "+h);return $[h]=c,c};function ee(T){if(typeof T=="string"){var h=s._prime(T);this.m=h.p,this.prime=h}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}ee.prototype._verify1=function(h){n(h.negative===0,"red works only with positives"),n(h.red,"red works only with red numbers")},ee.prototype._verify2=function(h,c){n((h.negative|c.negative)===0,"red works only with positives"),n(h.red&&h.red===c.red,"red works only with red numbers")},ee.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},ee.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},ee.prototype.add=function(h,c){this._verify2(h,c);var a=h.add(c);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},ee.prototype.iadd=function(h,c){this._verify2(h,c);var a=h.iadd(c);return a.cmp(this.m)>=0&&a.isub(this.m),a},ee.prototype.sub=function(h,c){this._verify2(h,c);var a=h.sub(c);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},ee.prototype.isub=function(h,c){this._verify2(h,c);var a=h.isub(c);return a.cmpn(0)<0&&a.iadd(this.m),a},ee.prototype.shl=function(h,c){return this._verify1(h),this.imod(h.ushln(c))},ee.prototype.imul=function(h,c){return this._verify2(h,c),this.imod(h.imul(c))},ee.prototype.mul=function(h,c){return this._verify2(h,c),this.imod(h.mul(c))},ee.prototype.isqr=function(h){return this.imul(h,h.clone())},ee.prototype.sqr=function(h){return this.mul(h,h)},ee.prototype.sqrt=function(h){if(h.isZero())return h.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(h,a)}for(var u=this.m.subn(1),y=0;!u.isZero()&&u.andln(1)===0;)y++,u.iushrn(1);n(!u.isZero());var m=new s(1).toRed(this),w=m.redNeg(),v=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,v).cmp(w)!==0;)l.redIAdd(w);for(var g=this.pow(l,u),d=this.pow(h,u.addn(1).iushrn(1)),E=this.pow(h,u),L=y;E.cmp(m)!==0;){for(var U=E,K=0;U.cmp(m)!==0;K++)U=U.redSqr();n(K<L);var re=this.pow(g,new s(1).iushln(L-K-1));d=d.redMul(re),g=re.redSqr(),E=E.redMul(g),L=K}return d},ee.prototype.invm=function(h){var c=h._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},ee.prototype.pow=function(h,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return h.clone();var a=4,u=new Array(1<<a);u[0]=new s(1).toRed(this),u[1]=h;for(var y=2;y<u.length;y++)u[y]=this.mul(u[y-1],h);var m=u[0],w=0,v=0,l=c.bitLength()%26;for(l===0&&(l=26),y=c.length-1;y>=0;y--){for(var g=c.words[y],d=l-1;d>=0;d--){var E=g>>d&1;if(m!==u[0]&&(m=this.sqr(m)),E===0&&w===0){v=0;continue}w<<=1,w|=E,v++,!(v!==a&&(y!==0||d!==0))&&(m=this.mul(m,u[w]),v=0,w=0)}l=26}return m},ee.prototype.convertTo=function(h){var c=h.umod(this.m);return c===h?c.clone():c},ee.prototype.convertFrom=function(h){var c=h.clone();return c.red=null,c},s.mont=function(h){return new pe(h)};function pe(T){ee.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(pe,ee),pe.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},pe.prototype.convertFrom=function(h){var c=this.imod(h.mul(this.rinv));return c.red=null,c},pe.prototype.imul=function(h,c){if(h.isZero()||c.isZero())return h.words[0]=0,h.length=1,h;var a=h.imul(c),u=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=a.isub(u).iushrn(this.shift),m=y;return y.cmp(this.m)>=0?m=y.isub(this.m):y.cmpn(0)<0&&(m=y.iadd(this.m)),m._forceRed(this)},pe.prototype.mul=function(h,c){if(h.isZero()||c.isZero())return new s(0)._forceRed(this);var a=h.mul(c),u=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=a.isub(u).iushrn(this.shift),m=y;return y.cmp(this.m)>=0?m=y.isub(this.m):y.cmpn(0)<0&&(m=y.iadd(this.m)),m._forceRed(this)},pe.prototype.invm=function(h){var c=this.imod(h._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(t,V)})(as);var po=Ab;function Ab(t,e){if(!t)throw new Error(e||"Assertion failed")}Ab.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ep={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var f=[];if(typeof s!="string"){for(var p=0;p<s.length;p++)f[p]=s[p]|0;return f}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var p=0;p<s.length;p+=2)f.push(parseInt(s[p]+s[p+1],16))}else for(var p=0;p<s.length;p++){var b=s.charCodeAt(p),x=b>>8,_=b&255;x?f.push(x,_):f.push(_)}return f}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",f=0;f<s.length;f++)o+=n(s[f].toString(16));return o}e.toHex=i,e.encode=function(o,f){return f==="hex"?i(o):o}})(Ep);(function(t){var e=t,r=as.exports,n=po,i=Ep;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(x,_,S){var M=new Array(Math.max(x.bitLength(),S)+1);M.fill(0);for(var N=1<<_+1,k=x.clone(),I=0;I<M.length;I++){var C,D=k.andln(N-1);k.isOdd()?(D>(N>>1)-1?C=(N>>1)-D:C=D,k.isubn(C)):C=0,M[I]=C,k.iushrn(1)}return M}e.getNAF=s;function o(x,_){var S=[[],[]];x=x.clone(),_=_.clone();for(var M=0,N=0,k;x.cmpn(-M)>0||_.cmpn(-N)>0;){var I=x.andln(3)+M&3,C=_.andln(3)+N&3;I===3&&(I=-1),C===3&&(C=-1);var D;(I&1)===0?D=0:(k=x.andln(7)+M&7,(k===3||k===5)&&C===2?D=-I:D=I),S[0].push(D);var $;(C&1)===0?$=0:(k=_.andln(7)+N&7,(k===3||k===5)&&I===2?$=-C:$=C),S[1].push($),2*M===D+1&&(M=1-M),2*N===$+1&&(N=1-N),x.iushrn(1),_.iushrn(1)}return S}e.getJSF=o;function f(x,_,S){var M="_"+_;x.prototype[_]=function(){return this[M]!==void 0?this[M]:this[M]=S.call(this)}}e.cachedProperty=f;function p(x){return typeof x=="string"?e.toArray(x,"hex"):x}e.parseBytes=p;function b(x){return new r(x,"hex","le")}e.intFromLE=b})(Hn);var Kl={exports:{}},Gh;Kl.exports=function(e){return Gh||(Gh=new Ws(null)),Gh.generate(e)};function Ws(t){this.rand=t}Kl.exports.Rand=Ws;Ws.prototype.generate=function(e){return this._rand(e)};Ws.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Ws.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Ws.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Ws.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Ly=require("crypto");if(typeof Ly.randomBytes!="function")throw new Error("Not supported");Ws.prototype._rand=function(e){return Ly.randomBytes(e)}}catch{}var Ap={},Eo=as.exports,Du=Hn,Qc=Du.getNAF,T5=Du.getJSF,el=Du.assert;function go(t,e){this.type=t,this.p=new Eo(e.p,16),this.red=e.prime?Eo.red(e.prime):Eo.mont(this.p),this.zero=new Eo(0).toRed(this.red),this.one=new Eo(1).toRed(this.red),this.two=new Eo(2).toRed(this.red),this.n=e.n&&new Eo(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var zl=go;go.prototype.point=function(){throw new Error("Not implemented")};go.prototype.validate=function(){throw new Error("Not implemented")};go.prototype._fixedNafMul=function(e,r){el(e.precomputed);var n=e._getDoubles(),i=Qc(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],f,p;for(f=0;f<i.length;f+=n.step){p=0;for(var b=f+n.step-1;b>=f;b--)p=(p<<1)+i[b];o.push(p)}for(var x=this.jpoint(null,null,null),_=this.jpoint(null,null,null),S=s;S>0;S--){for(f=0;f<o.length;f++)p=o[f],p===S?_=_.mixedAdd(n.points[f]):p===-S&&(_=_.mixedAdd(n.points[f].neg()));x=x.add(_)}return x.toP()};go.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Qc(r,n,this._bitLength),f=this.jpoint(null,null,null),p=o.length-1;p>=0;p--){for(var b=0;p>=0&&o[p]===0;p--)b++;if(p>=0&&b++,f=f.dblp(b),p<0)break;var x=o[p];el(x!==0),e.type==="affine"?x>0?f=f.mixedAdd(s[x-1>>1]):f=f.mixedAdd(s[-x-1>>1].neg()):x>0?f=f.add(s[x-1>>1]):f=f.add(s[-x-1>>1].neg())}return e.type==="affine"?f.toP():f};go.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,f=this._wnafT2,p=this._wnafT3,b=0,x,_,S;for(x=0;x<i;x++){S=r[x];var M=S._getNAFPoints(e);o[x]=M.wnd,f[x]=M.points}for(x=i-1;x>=1;x-=2){var N=x-1,k=x;if(o[N]!==1||o[k]!==1){p[N]=Qc(n[N],o[N],this._bitLength),p[k]=Qc(n[k],o[k],this._bitLength),b=Math.max(p[N].length,b),b=Math.max(p[k].length,b);continue}var I=[r[N],null,null,r[k]];r[N].y.cmp(r[k].y)===0?(I[1]=r[N].add(r[k]),I[2]=r[N].toJ().mixedAdd(r[k].neg())):r[N].y.cmp(r[k].y.redNeg())===0?(I[1]=r[N].toJ().mixedAdd(r[k]),I[2]=r[N].add(r[k].neg())):(I[1]=r[N].toJ().mixedAdd(r[k]),I[2]=r[N].toJ().mixedAdd(r[k].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],D=T5(n[N],n[k]);for(b=Math.max(D[0].length,b),p[N]=new Array(b),p[k]=new Array(b),_=0;_<b;_++){var $=D[0][_]|0,j=D[1][_]|0;p[N][_]=C[($+1)*3+(j+1)],p[k][_]=0,f[N]=I}}var F=this.jpoint(null,null,null),z=this._wnafT4;for(x=b;x>=0;x--){for(var Z=0;x>=0;){var te=!0;for(_=0;_<i;_++)z[_]=p[_][x]|0,z[_]!==0&&(te=!1);if(!te)break;Z++,x--}if(x>=0&&Z++,F=F.dblp(Z),x<0)break;for(_=0;_<i;_++){var ee=z[_];ee!==0&&(ee>0?S=f[_][ee-1>>1]:ee<0&&(S=f[_][-ee-1>>1].neg()),S.type==="affine"?F=F.mixedAdd(S):F=F.add(S))}}for(x=0;x<i;x++)f[x]=null;return s?F:F.toP()};function ui(t,e){this.curve=t,this.type=e,this.precomputed=null}go.BasePoint=ui;ui.prototype.eq=function(){throw new Error("Not implemented")};ui.prototype.validate=function(){return this.curve.validate(this)};go.prototype.decodePoint=function(e,r){e=Du.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?el(e[e.length-1]%2===0):e[0]===7&&el(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ui.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ui.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};ui.prototype.encode=function(e,r){return Du.encode(this._encode(r),e)};ui.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};ui.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};ui.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};ui.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};ui.prototype._getBeta=function(){return null};ui.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var P5=Hn,xr=as.exports,Sp=en.exports,gf=zl,k5=P5.assert;function ci(t){gf.call(this,"short",t),this.a=new xr(t.a,16).toRed(this.red),this.b=new xr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Sp(ci,gf);var I5=ci;ci.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new xr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new xr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],k5(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new xr(f.a,16),b:new xr(f.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};ci.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:xr.mont(e),n=new xr(2).toRed(r).redInvm(),i=n.redNeg(),s=new xr(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),f=i.redSub(s).fromRed();return[o,f]};ci.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new xr(1),o=new xr(0),f=new xr(0),p=new xr(1),b,x,_,S,M,N,k,I=0,C,D;n.cmpn(0)!==0;){var $=i.div(n);C=i.sub($.mul(n)),D=f.sub($.mul(s));var j=p.sub($.mul(o));if(!_&&C.cmp(r)<0)b=k.neg(),x=s,_=C.neg(),S=D;else if(_&&++I===2)break;k=C,i=n,n=C,f=s,s=D,p=o,o=j}M=C.neg(),N=D;var F=_.sqr().add(S.sqr()),z=M.sqr().add(N.sqr());return z.cmp(F)>=0&&(M=b,N=x),_.negative&&(_=_.neg(),S=S.neg()),M.negative&&(M=M.neg(),N=N.neg()),[{a:_,b:S},{a:M,b:N}]};ci.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),f=s.mul(n.a),p=o.mul(i.a),b=s.mul(n.b),x=o.mul(i.b),_=e.sub(f).sub(p),S=b.add(x).neg();return{k1:_,k2:S}};ci.prototype.pointFromX=function(e,r){e=new xr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};ci.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ci.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(r[o]),p=e[o],b=p._getBeta();f.k1.negative&&(f.k1.ineg(),p=p.neg(!0)),f.k2.negative&&(f.k2.ineg(),b=b.neg(!0)),i[o*2]=p,i[o*2+1]=b,s[o*2]=f.k1,s[o*2+1]=f.k2}for(var x=this._wnafMulAdd(1,i,s,o*2,n),_=0;_<o*2;_++)i[_]=null,s[_]=null;return x};function Hr(t,e,r,n){gf.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new xr(e,16),this.y=new xr(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Sp(Hr,gf.BasePoint);ci.prototype.point=function(e,r,n){return new Hr(this,e,r,n)};ci.prototype.pointFromJSON=function(e,r){return Hr.fromJSON(this,e,r)};Hr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Hr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Hr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(f){return e.point(f[0],f[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Hr.prototype.isInfinity=function(){return this.inf};Hr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Hr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)};Hr.prototype.getX=function(){return this.x.fromRed()};Hr.prototype.getY=function(){return this.y.fromRed()};Hr.prototype.mul=function(e){return e=new xr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Hr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Hr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Hr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Hr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Hr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function rn(t,e,r,n){gf.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new xr(0)):(this.x=new xr(e,16),this.y=new xr(r,16),this.z=new xr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Sp(rn,gf.BasePoint);ci.prototype.jpoint=function(e,r,n){return new rn(this,e,r,n)};rn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};rn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};rn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),f=e.y.redMul(n.redMul(this.z)),p=i.redSub(s),b=o.redSub(f);if(p.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var x=p.redSqr(),_=x.redMul(p),S=i.redMul(x),M=b.redSqr().redIAdd(_).redISub(S).redISub(S),N=b.redMul(S.redISub(M)).redISub(o.redMul(_)),k=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(M,N,k)};rn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),f=n.redSub(i),p=s.redSub(o);if(f.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=f.redSqr(),x=b.redMul(f),_=n.redMul(b),S=p.redSqr().redIAdd(x).redISub(_).redISub(_),M=p.redMul(_.redISub(S)).redISub(s.redMul(x)),N=this.z.redMul(f);return this.curve.jpoint(S,M,N)};rn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,f=this.y,p=this.z,b=p.redSqr().redSqr(),x=f.redAdd(f);for(r=0;r<e;r++){var _=o.redSqr(),S=x.redSqr(),M=S.redSqr(),N=_.redAdd(_).redIAdd(_).redIAdd(i.redMul(b)),k=o.redMul(S),I=N.redSqr().redISub(k.redAdd(k)),C=k.redISub(I),D=N.redMul(C);D=D.redIAdd(D).redISub(M);var $=x.redMul(p);r+1<e&&(b=b.redMul(M)),o=I,p=$,x=D}return this.curve.jpoint(o,x.redMul(s),p)};rn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};rn.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i),b=p.redSqr().redISub(f).redISub(f),x=o.redIAdd(o);x=x.redIAdd(x),x=x.redIAdd(x),e=b,r=p.redMul(f.redISub(b)).redISub(x),n=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),S=this.y.redSqr(),M=S.redSqr(),N=this.x.redAdd(S).redSqr().redISub(_).redISub(M);N=N.redIAdd(N);var k=_.redAdd(_).redIAdd(_),I=k.redSqr(),C=M.redIAdd(M);C=C.redIAdd(C),C=C.redIAdd(C),e=I.redISub(N).redISub(N),r=k.redMul(N.redISub(e)).redISub(C),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};rn.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),b=p.redSqr().redISub(f).redISub(f);e=b;var x=o.redIAdd(o);x=x.redIAdd(x),x=x.redIAdd(x),r=p.redMul(f.redISub(b)).redISub(x),n=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),S=this.y.redSqr(),M=this.x.redMul(S),N=this.x.redSub(_).redMul(this.x.redAdd(_));N=N.redAdd(N).redIAdd(N);var k=M.redIAdd(M);k=k.redIAdd(k);var I=k.redAdd(k);e=N.redSqr().redISub(I),n=this.y.redAdd(this.z).redSqr().redISub(S).redISub(_);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=N.redMul(k.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,n)};rn.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),f=n.redSqr(),p=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),b=r.redAdd(r);b=b.redIAdd(b);var x=b.redMul(f),_=p.redSqr().redISub(x.redAdd(x)),S=x.redISub(_),M=f.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var N=p.redMul(S).redISub(M),k=n.redAdd(n).redMul(i);return this.curve.jpoint(_,N,k)};rn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var p=f.redSqr(),b=i.redIAdd(i);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var x=s.redIAdd(f).redSqr().redISub(o).redISub(p).redISub(b),_=r.redMul(x);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.x.redMul(p).redISub(_);S=S.redIAdd(S),S=S.redIAdd(S);var M=this.y.redMul(x.redMul(b.redISub(x)).redISub(f.redMul(p)));M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var N=this.z.redAdd(f).redSqr().redISub(n).redISub(p);return this.curve.jpoint(S,M,N)};rn.prototype.mul=function(e,r){return e=new xr(e,r),this.curve._wnafMul(this,e)};rn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};rn.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};rn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};rn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Pa=as.exports,Sb=en.exports,Hl=zl,R5=Hn;function yf(t){Hl.call(this,"mont",t),this.a=new Pa(t.a,16).toRed(this.red),this.b=new Pa(t.b,16).toRed(this.red),this.i4=new Pa(4).toRed(this.red).redInvm(),this.two=new Pa(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Sb(yf,Hl);var C5=yf;yf.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Kr(t,e,r){Hl.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Pa(e,16),this.z=new Pa(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Sb(Kr,Hl.BasePoint);yf.prototype.decodePoint=function(e,r){return this.point(R5.toArray(e,r),1)};yf.prototype.point=function(e,r){return new Kr(this,e,r)};yf.prototype.pointFromJSON=function(e){return Kr.fromJSON(this,e)};Kr.prototype.precompute=function(){};Kr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Kr.fromJSON=function(e,r){return new Kr(e,r[0],r[1]||e.one)};Kr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Kr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Kr.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),f=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,f)};Kr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Kr.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),f=o.redMul(n),p=s.redMul(i),b=r.z.redMul(f.redAdd(p).redSqr()),x=r.x.redMul(f.redISub(p).redSqr());return this.curve.point(b,x)};Kr.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var f=o.length-1;f>=0;f--)o[f]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};Kr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Kr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Kr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Kr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Kr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var N5=Hn,bs=as.exports,Mb=en.exports,Gl=zl,B5=N5.assert;function fs(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Gl.call(this,"edwards",t),this.a=new bs(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bs(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bs(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),B5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}Mb(fs,Gl);var O5=fs;fs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};fs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};fs.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};fs.prototype.pointFromX=function(e,r){e=new bs(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),f=o.redSqrt();if(f.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var p=f.fromRed().isOdd();return(r&&!p||!r&&p)&&(f=f.redNeg()),this.point(e,f)};fs.prototype.pointFromY=function(e,r){e=new bs(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var f=o.redSqrt();if(f.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==r&&(f=f.redNeg()),this.point(f,e)};fs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function ur(t,e,r,n,i){Gl.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bs(e,16),this.y=new bs(r,16),this.z=n?new bs(n,16):this.curve.one,this.t=i&&new bs(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Mb(ur,Gl.BasePoint);fs.prototype.pointFromJSON=function(e){return ur.fromJSON(this,e)};fs.prototype.point=function(e,r,n,i){return new ur(this,e,r,n,i)};ur.fromJSON=function(e,r){return new ur(e,r[0],r[1],r[2])};ur.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ur.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ur.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),f=o.redSub(n),p=i.redSub(r),b=s.redMul(f),x=o.redMul(p),_=s.redMul(p),S=f.redMul(o);return this.curve.point(b,x,S,_)};ur.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,f,p,b;if(this.curve.twisted){f=this.curve._mulA(r);var x=f.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(x.redSub(this.curve.two)),s=x.redMul(f.redSub(n)),o=x.redSqr().redSub(x).redSub(x)):(p=this.z.redSqr(),b=x.redSub(p).redISub(p),i=e.redSub(r).redISub(n).redMul(b),s=x.redMul(f.redSub(n)),o=x.redMul(b))}else f=r.redAdd(n),p=this.curve._mulC(this.z).redSqr(),b=f.redSub(p).redSub(p),i=this.curve._mulC(e.redISub(f)).redMul(b),s=this.curve._mulC(f).redMul(r.redISub(n)),o=f.redMul(b);return this.curve.point(i,s,o)};ur.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ur.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),f=s.redSub(i),p=s.redAdd(i),b=n.redAdd(r),x=o.redMul(f),_=p.redMul(b),S=o.redMul(b),M=f.redMul(p);return this.curve.point(x,_,M,S)};ur.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),f=n.redSub(o),p=n.redAdd(o),b=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),x=r.redMul(f).redMul(b),_,S;return this.curve.twisted?(_=r.redMul(p).redMul(s.redSub(this.curve._mulA(i))),S=f.redMul(p)):(_=r.redMul(p).redMul(s.redSub(i)),S=this.curve._mulC(f).redMul(p)),this.curve.point(x,_,S)};ur.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};ur.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};ur.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};ur.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};ur.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};ur.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ur.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ur.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ur.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};ur.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};ur.prototype.toP=ur.prototype.normalize;ur.prototype.mixedAdd=ur.prototype.add;(function(t){var e=t;e.base=zl,e.short=I5,e.mont=C5,e.edwards=O5})(Ap);var Vl={},$r={},Dt={},L5=po,D5=en.exports;Dt.inherits=D5;function U5(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function F5(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):U5(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Dt.toArray=F5;function $5(t){for(var e="",r=0;r<t.length;r++)e+=Pb(t[r].toString(16));return e}Dt.toHex=$5;function Tb(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Dt.htonl=Tb;function j5(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Tb(i)),r+=kb(i.toString(16))}return r}Dt.toHex32=j5;function Pb(t){return t.length===1?"0"+t:t}Dt.zero2=Pb;function kb(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Dt.zero8=kb;function q5(t,e,r,n){var i=r-e;L5(i%4===0);for(var s=new Array(i/4),o=0,f=e;o<s.length;o++,f+=4){var p;n==="big"?p=t[f]<<24|t[f+1]<<16|t[f+2]<<8|t[f+3]:p=t[f+3]<<24|t[f+2]<<16|t[f+1]<<8|t[f],s[o]=p>>>0}return s}Dt.join32=q5;function K5(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Dt.split32=K5;function z5(t,e){return t>>>e|t<<32-e}Dt.rotr32=z5;function H5(t,e){return t<<e|t>>>32-e}Dt.rotl32=H5;function G5(t,e){return t+e>>>0}Dt.sum32=G5;function V5(t,e,r){return t+e+r>>>0}Dt.sum32_3=V5;function W5(t,e,r,n){return t+e+r+n>>>0}Dt.sum32_4=W5;function J5(t,e,r,n,i){return t+e+r+n+i>>>0}Dt.sum32_5=J5;function Y5(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,f=(o<n?1:0)+r+i;t[e]=f>>>0,t[e+1]=o}Dt.sum64=Y5;function Z5(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Dt.sum64_hi=Z5;function X5(t,e,r,n){var i=e+n;return i>>>0}Dt.sum64_lo=X5;function Q5(t,e,r,n,i,s,o,f){var p=0,b=e;b=b+n>>>0,p+=b<e?1:0,b=b+s>>>0,p+=b<s?1:0,b=b+f>>>0,p+=b<f?1:0;var x=t+r+i+o+p;return x>>>0}Dt.sum64_4_hi=Q5;function eE(t,e,r,n,i,s,o,f){var p=e+n+s+f;return p>>>0}Dt.sum64_4_lo=eE;function tE(t,e,r,n,i,s,o,f,p,b){var x=0,_=e;_=_+n>>>0,x+=_<e?1:0,_=_+s>>>0,x+=_<s?1:0,_=_+f>>>0,x+=_<f?1:0,_=_+b>>>0,x+=_<b?1:0;var S=t+r+i+o+p+x;return S>>>0}Dt.sum64_5_hi=tE;function rE(t,e,r,n,i,s,o,f,p,b){var x=e+n+s+f+b;return x>>>0}Dt.sum64_5_lo=rE;function nE(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Dt.rotr64_hi=nE;function iE(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Dt.rotr64_lo=iE;function sE(t,e,r){return t>>>r}Dt.shr64_hi=sE;function oE(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Dt.shr64_lo=oE;var mf={},Dy=Dt,aE=po;function Wl(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}mf.BlockHash=Wl;Wl.prototype.update=function(e,r){if(e=Dy.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Dy.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Wl.prototype.digest=function(e){return this.update(this._pad()),aE(this.pending===null),this._digest(e)};Wl.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var vf={},us={},fE=Dt,qi=fE.rotr32;function uE(t,e,r,n){if(t===0)return Ib(e,r,n);if(t===1||t===3)return Cb(e,r,n);if(t===2)return Rb(e,r,n)}us.ft_1=uE;function Ib(t,e,r){return t&e^~t&r}us.ch32=Ib;function Rb(t,e,r){return t&e^t&r^e&r}us.maj32=Rb;function Cb(t,e,r){return t^e^r}us.p32=Cb;function cE(t){return qi(t,2)^qi(t,13)^qi(t,22)}us.s0_256=cE;function lE(t){return qi(t,6)^qi(t,11)^qi(t,25)}us.s1_256=lE;function hE(t){return qi(t,7)^qi(t,18)^t>>>3}us.g0_256=hE;function dE(t){return qi(t,17)^qi(t,19)^t>>>10}us.g1_256=dE;var Ha=Dt,pE=mf,gE=us,Vh=Ha.rotl32,Cf=Ha.sum32,yE=Ha.sum32_5,mE=gE.ft_1,Nb=pE.BlockHash,vE=[1518500249,1859775393,2400959708,3395469782];function Yi(){if(!(this instanceof Yi))return new Yi;Nb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ha.inherits(Yi,Nb);var bE=Yi;Yi.blockSize=512;Yi.outSize=160;Yi.hmacStrength=80;Yi.padLength=64;Yi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Vh(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],f=this.h[2],p=this.h[3],b=this.h[4];for(i=0;i<n.length;i++){var x=~~(i/20),_=yE(Vh(s,5),mE(x,o,f,p),b,n[i],vE[x]);b=p,p=f,f=Vh(o,30),o=s,s=_}this.h[0]=Cf(this.h[0],s),this.h[1]=Cf(this.h[1],o),this.h[2]=Cf(this.h[2],f),this.h[3]=Cf(this.h[3],p),this.h[4]=Cf(this.h[4],b)};Yi.prototype._digest=function(e){return e==="hex"?Ha.toHex32(this.h,"big"):Ha.split32(this.h,"big")};var Ga=Dt,xE=mf,bf=us,wE=po,mi=Ga.sum32,_E=Ga.sum32_4,EE=Ga.sum32_5,AE=bf.ch32,SE=bf.maj32,ME=bf.s0_256,TE=bf.s1_256,PE=bf.g0_256,kE=bf.g1_256,Bb=xE.BlockHash,IE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Zi(){if(!(this instanceof Zi))return new Zi;Bb.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=IE,this.W=new Array(64)}Ga.inherits(Zi,Bb);var Ob=Zi;Zi.blockSize=512;Zi.outSize=256;Zi.hmacStrength=192;Zi.padLength=64;Zi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=_E(kE(n[i-2]),n[i-7],PE(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],f=this.h[2],p=this.h[3],b=this.h[4],x=this.h[5],_=this.h[6],S=this.h[7];for(wE(this.k.length===n.length),i=0;i<n.length;i++){var M=EE(S,TE(b),AE(b,x,_),this.k[i],n[i]),N=mi(ME(s),SE(s,o,f));S=_,_=x,x=b,b=mi(p,M),p=f,f=o,o=s,s=mi(M,N)}this.h[0]=mi(this.h[0],s),this.h[1]=mi(this.h[1],o),this.h[2]=mi(this.h[2],f),this.h[3]=mi(this.h[3],p),this.h[4]=mi(this.h[4],b),this.h[5]=mi(this.h[5],x),this.h[6]=mi(this.h[6],_),this.h[7]=mi(this.h[7],S)};Zi.prototype._digest=function(e){return e==="hex"?Ga.toHex32(this.h,"big"):Ga.split32(this.h,"big")};var id=Dt,Lb=Ob;function As(){if(!(this instanceof As))return new As;Lb.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}id.inherits(As,Lb);var RE=As;As.blockSize=512;As.outSize=224;As.hmacStrength=192;As.padLength=64;As.prototype._digest=function(e){return e==="hex"?id.toHex32(this.h.slice(0,7),"big"):id.split32(this.h.slice(0,7),"big")};var Rn=Dt,CE=mf,NE=po,Ki=Rn.rotr64_hi,zi=Rn.rotr64_lo,Db=Rn.shr64_hi,Ub=Rn.shr64_lo,Os=Rn.sum64,Wh=Rn.sum64_hi,Jh=Rn.sum64_lo,BE=Rn.sum64_4_hi,OE=Rn.sum64_4_lo,LE=Rn.sum64_5_hi,DE=Rn.sum64_5_lo,Fb=CE.BlockHash,UE=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ti(){if(!(this instanceof Ti))return new Ti;Fb.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=UE,this.W=new Array(160)}Rn.inherits(Ti,Fb);var $b=Ti;Ti.blockSize=1024;Ti.outSize=512;Ti.hmacStrength=192;Ti.padLength=128;Ti.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=JE(n[i-4],n[i-3]),o=YE(n[i-4],n[i-3]),f=n[i-14],p=n[i-13],b=VE(n[i-30],n[i-29]),x=WE(n[i-30],n[i-29]),_=n[i-32],S=n[i-31];n[i]=BE(s,o,f,p,b,x,_,S),n[i+1]=OE(s,o,f,p,b,x,_,S)}};Ti.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],f=this.h[3],p=this.h[4],b=this.h[5],x=this.h[6],_=this.h[7],S=this.h[8],M=this.h[9],N=this.h[10],k=this.h[11],I=this.h[12],C=this.h[13],D=this.h[14],$=this.h[15];NE(this.k.length===n.length);for(var j=0;j<n.length;j+=2){var F=D,z=$,Z=HE(S,M),te=GE(S,M),ee=FE(S,M,N,k,I),pe=$E(S,M,N,k,I,C),T=this.k[j],h=this.k[j+1],c=n[j],a=n[j+1],u=LE(F,z,Z,te,ee,pe,T,h,c,a),y=DE(F,z,Z,te,ee,pe,T,h,c,a);F=KE(i,s),z=zE(i,s),Z=jE(i,s,o,f,p),te=qE(i,s,o,f,p,b);var m=Wh(F,z,Z,te),w=Jh(F,z,Z,te);D=I,$=C,I=N,C=k,N=S,k=M,S=Wh(x,_,u,y),M=Jh(_,_,u,y),x=p,_=b,p=o,b=f,o=i,f=s,i=Wh(u,y,m,w),s=Jh(u,y,m,w)}Os(this.h,0,i,s),Os(this.h,2,o,f),Os(this.h,4,p,b),Os(this.h,6,x,_),Os(this.h,8,S,M),Os(this.h,10,N,k),Os(this.h,12,I,C),Os(this.h,14,D,$)};Ti.prototype._digest=function(e){return e==="hex"?Rn.toHex32(this.h,"big"):Rn.split32(this.h,"big")};function FE(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function $E(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function jE(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function qE(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function KE(t,e){var r=Ki(t,e,28),n=Ki(e,t,2),i=Ki(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function zE(t,e){var r=zi(t,e,28),n=zi(e,t,2),i=zi(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function HE(t,e){var r=Ki(t,e,14),n=Ki(t,e,18),i=Ki(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function GE(t,e){var r=zi(t,e,14),n=zi(t,e,18),i=zi(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function VE(t,e){var r=Ki(t,e,1),n=Ki(t,e,8),i=Db(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function WE(t,e){var r=zi(t,e,1),n=zi(t,e,8),i=Ub(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function JE(t,e){var r=Ki(t,e,19),n=Ki(e,t,29),i=Db(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function YE(t,e){var r=zi(t,e,19),n=zi(e,t,29),i=Ub(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var sd=Dt,jb=$b;function Ss(){if(!(this instanceof Ss))return new Ss;jb.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}sd.inherits(Ss,jb);var ZE=Ss;Ss.blockSize=1024;Ss.outSize=384;Ss.hmacStrength=192;Ss.padLength=128;Ss.prototype._digest=function(e){return e==="hex"?sd.toHex32(this.h.slice(0,12),"big"):sd.split32(this.h.slice(0,12),"big")};vf.sha1=bE;vf.sha224=RE;vf.sha256=Ob;vf.sha384=ZE;vf.sha512=$b;var qb={},Fo=Dt,XE=mf,uc=Fo.rotl32,Uy=Fo.sum32,Nf=Fo.sum32_3,Fy=Fo.sum32_4,Kb=XE.BlockHash;function Xi(){if(!(this instanceof Xi))return new Xi;Kb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Fo.inherits(Xi,Kb);qb.ripemd160=Xi;Xi.blockSize=512;Xi.outSize=160;Xi.hmacStrength=192;Xi.padLength=64;Xi.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],f=this.h[4],p=n,b=i,x=s,_=o,S=f,M=0;M<80;M++){var N=Uy(uc(Fy(n,$y(M,i,s,o),e[tA[M]+r],QE(M)),nA[M]),f);n=f,f=o,o=uc(s,10),s=i,i=N,N=Uy(uc(Fy(p,$y(79-M,b,x,_),e[rA[M]+r],eA(M)),iA[M]),S),p=S,S=_,_=uc(x,10),x=b,b=N}N=Nf(this.h[1],s,_),this.h[1]=Nf(this.h[2],o,S),this.h[2]=Nf(this.h[3],f,p),this.h[3]=Nf(this.h[4],n,b),this.h[4]=Nf(this.h[0],i,x),this.h[0]=N};Xi.prototype._digest=function(e){return e==="hex"?Fo.toHex32(this.h,"little"):Fo.split32(this.h,"little")};function $y(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function QE(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function eA(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var tA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],nA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],iA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],sA=Dt,oA=po;function Va(t,e,r){if(!(this instanceof Va))return new Va(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(sA.toArray(e,r))}var aA=Va;Va.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),oA(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Va.prototype.update=function(e,r){return this.inner.update(e,r),this};Va.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Dt,e.common=mf,e.sha=vf,e.ripemd=qb,e.hmac=aA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})($r);(function(t){var e=t,r=$r,n=Ap,i=Hn,s=i.assert;function o(b){b.type==="short"?this.curve=new n.short(b):b.type==="edwards"?this.curve=new n.edwards(b):this.curve=new n.mont(b),this.g=this.curve.g,this.n=this.curve.n,this.hash=b.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function f(b,x){Object.defineProperty(e,b,{configurable:!0,enumerable:!0,get:function(){var _=new o(x);return Object.defineProperty(e,b,{configurable:!0,enumerable:!0,value:_}),_}})}f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=require("./precomputed/secp256k1")}catch{p=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})})(Vl);var fA=$r,Bo=Ep,zb=po;function ro(t){if(!(this instanceof ro))return new ro(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Bo.toArray(t.entropy,t.entropyEnc||"hex"),r=Bo.toArray(t.nonce,t.nonceEnc||"hex"),n=Bo.toArray(t.pers,t.persEnc||"hex");zb(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var uA=ro;ro.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ro.prototype._hmac=function(){return new fA.hmac(this.hash,this.K)};ro.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ro.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Bo.toArray(e,r),n=Bo.toArray(n,i),zb(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ro.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Bo.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Bo.encode(o,r)};var cA=as.exports,lA=Hn,od=lA.assert;function gn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var hA=gn;gn.fromPublic=function(e,r,n){return r instanceof gn?r:new gn(e,{pub:r,pubEnc:n})};gn.fromPrivate=function(e,r,n){return r instanceof gn?r:new gn(e,{priv:r,privEnc:n})};gn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};gn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};gn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};gn.prototype._importPrivate=function(e,r){this.priv=new cA(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};gn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?od(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&od(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};gn.prototype.derive=function(e){return e.validate()||od(e.validate(),"public point not validated"),e.mul(this.priv).getX()};gn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};gn.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};gn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var tl=as.exports,Mp=Hn,dA=Mp.assert;function Jl(t,e){if(t instanceof Jl)return t;this._importDER(t,e)||(dA(t.r&&t.s,"Signature without r or s"),this.r=new tl(t.r,16),this.s=new tl(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var pA=Jl;function gA(){this.place=0}function Yh(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function jy(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Jl.prototype._importDER=function(e,r){e=Mp.toArray(e,r);var n=new gA;if(e[n.place++]!==48)return!1;var i=Yh(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Yh(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var f=Yh(e,n);if(f===!1||e.length!==f+n.place)return!1;var p=e.slice(n.place,f+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new tl(o),this.s=new tl(p),this.recoveryParam=null,!0};function Zh(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Jl.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=jy(r),n=jy(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Zh(i,r.length),i=i.concat(r),i.push(2),Zh(i,n.length);var s=i.concat(n),o=[48];return Zh(o,s.length),o=o.concat(s),Mp.encode(o,e)};var Oo=as.exports,Hb=uA,yA=Hn,Xh=Vl,mA=Kl.exports,Gb=yA.assert,Tp=hA,Yl=pA;function si(t){if(!(this instanceof si))return new si(t);typeof t=="string"&&(Gb(Object.prototype.hasOwnProperty.call(Xh,t),"Unknown curve "+t),t=Xh[t]),t instanceof Xh.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var vA=si;si.prototype.keyPair=function(e){return new Tp(this,e)};si.prototype.keyFromPrivate=function(e,r){return Tp.fromPrivate(this,e,r)};si.prototype.keyFromPublic=function(e,r){return Tp.fromPublic(this,e,r)};si.prototype.genKeyPair=function(e){e||(e={});for(var r=new Hb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||mA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Oo(2));;){var s=new Oo(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};si.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};si.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Oo(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),f=e.toArray("be",s),p=new Hb({hash:this.hash,entropy:o,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),b=this.n.sub(new Oo(1)),x=0;;x++){var _=i.k?i.k(x):new Oo(p.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(b)>=0)){var S=this.g.mul(_);if(!S.isInfinity()){var M=S.getX(),N=M.umod(this.n);if(N.cmpn(0)!==0){var k=_.invm(this.n).mul(N.mul(r.getPrivate()).iadd(e));if(k=k.umod(this.n),k.cmpn(0)!==0){var I=(S.getY().isOdd()?1:0)|(M.cmp(N)!==0?2:0);return i.canonical&&k.cmp(this.nh)>0&&(k=this.n.sub(k),I^=1),new Yl({r:N,s:k,recoveryParam:I})}}}}}};si.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Oo(e,16)),n=this.keyFromPublic(n,i),r=new Yl(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),p=f.mul(e).umod(this.n),b=f.mul(s).umod(this.n),x;return this.curve._maxwellTrick?(x=this.g.jmulAdd(p,n.getPublic(),b),x.isInfinity()?!1:x.eqXToP(s)):(x=this.g.mulAdd(p,n.getPublic(),b),x.isInfinity()?!1:x.getX().umod(this.n).cmp(s)===0)};si.prototype.recoverPubKey=function(t,e,r,n){Gb((3&r)===r,"The recovery param is more than two bits"),e=new Yl(e,n);var i=this.n,s=new Oo(t),o=e.r,f=e.s,p=r&1,b=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&b)throw new Error("Unable to find sencond key candinate");b?o=this.curve.pointFromX(o.add(this.curve.n),p):o=this.curve.pointFromX(o,p);var x=e.r.invm(i),_=i.sub(s).mul(x).umod(i),S=f.mul(x).umod(i);return this.g.mulAdd(_,o,S)};si.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Yl(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Uu=Hn,Vb=Uu.assert,qy=Uu.parseBytes,xf=Uu.cachedProperty;function qr(t,e){this.eddsa=t,this._secret=qy(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=qy(e.pub)}qr.fromPublic=function(e,r){return r instanceof qr?r:new qr(e,{pub:r})};qr.fromSecret=function(e,r){return r instanceof qr?r:new qr(e,{secret:r})};qr.prototype.secret=function(){return this._secret};xf(qr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});xf(qr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});xf(qr,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});xf(qr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});xf(qr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});xf(qr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});qr.prototype.sign=function(e){return Vb(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};qr.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};qr.prototype.getSecret=function(e){return Vb(this._secret,"KeyPair is public only"),Uu.encode(this.secret(),e)};qr.prototype.getPublic=function(e){return Uu.encode(this.pubBytes(),e)};var bA=qr,xA=as.exports,Zl=Hn,wA=Zl.assert,Xl=Zl.cachedProperty,_A=Zl.parseBytes;function Zo(t,e){this.eddsa=t,typeof e!="object"&&(e=_A(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),wA(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof xA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Xl(Zo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Xl(Zo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Xl(Zo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Xl(Zo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Zo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Zo.prototype.toHex=function(){return Zl.encode(this.toBytes(),"hex").toUpperCase()};var EA=Zo,AA=$r,SA=Vl,Wa=Hn,MA=Wa.assert,Wb=Wa.parseBytes,Jb=bA,Ky=EA;function Cn(t){if(MA(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Cn))return new Cn(t);t=SA[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=AA.sha512}var TA=Cn;Cn.prototype.sign=function(e,r){e=Wb(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),f=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),p=i.add(f).umod(this.curve.n);return this.makeSignature({R:s,S:p,Rencoded:o})};Cn.prototype.verify=function(e,r,n){e=Wb(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),f=r.R().add(i.pub().mul(s));return f.eq(o)};Cn.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Wa.intFromLE(e.digest()).umod(this.curve.n)};Cn.prototype.keyFromPublic=function(e){return Jb.fromPublic(this,e)};Cn.prototype.keyFromSecret=function(e){return Jb.fromSecret(this,e)};Cn.prototype.makeSignature=function(e){return e instanceof Ky?e:new Ky(this,e)};Cn.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Cn.prototype.decodePoint=function(e){e=Wa.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Wa.intFromLE(n);return this.curve.pointFromY(s,i)};Cn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Cn.prototype.decodeInt=function(e){return Wa.intFromLE(e)};Cn.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=M5.version,e.utils=Hn,e.rand=Kl.exports,e.curve=Ap,e.curves=Vl,e.ec=vA,e.eddsa=TA})(Eb);const PA=Eb.ec,Oi=new PA("secp256k1"),Ut=Oi.curve,sr=Ut.n.constructor;function kA(t,e){let r=new sr(e);if(r.cmp(Ut.p)>=0)return null;r=r.toRed(Ut.red);let n=r.redSqr().redIMul(r).redIAdd(Ut.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),Oi.keyPair({pub:{x:r,y:n}})}function IA(t,e,r){let n=new sr(e),i=new sr(r);if(n.cmp(Ut.p)>=0||i.cmp(Ut.p)>=0||(n=n.toRed(Ut.red),i=i.toRed(Ut.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(Ut.b)).isZero()?Oi.keyPair({pub:{x:n,y:i}}):null}function Ls(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:kA(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:IA(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Ao(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var RA={contextRandomize(){return 0},privateKeyVerify(t){const e=new sr(t);return e.cmp(Ut.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new sr(t),r=Ut.n.sub(e).umod(Ut.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new sr(e);if(r.cmp(Ut.n)>=0||(r.iadd(new sr(t)),r.cmp(Ut.n)>=0&&r.isub(Ut.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new sr(e);if(r.cmp(Ut.n)>=0||r.isZero())return 1;r.imul(new sr(t)),r.cmp(Ut.n)>=0&&(r=r.umod(Ut.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Ls(t)===null?1:0},publicKeyCreate(t,e){const r=new sr(e);if(r.cmp(Ut.n)>=0||r.isZero())return 1;const n=Oi.keyFromPrivate(e).getPublic();return Ao(t,n),0},publicKeyConvert(t,e){const r=Ls(e);if(r===null)return 1;const n=r.getPublic();return Ao(t,n),0},publicKeyNegate(t,e){const r=Ls(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),Ao(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=Ls(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Ao(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Ls(e);if(n===null)return 1;if(r=new sr(r),r.cmp(Ut.n)>=0)return 2;const i=n.getPublic().add(Ut.g.mul(r));return i.isInfinity()?2:(Ao(t,i),0)},publicKeyTweakMul(t,e,r){const n=Ls(e);if(n===null)return 1;if(r=new sr(r),r.cmp(Ut.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return Ao(t,i),0},signatureNormalize(t){const e=new sr(t.subarray(0,32)),r=new sr(t.subarray(32,64));return e.cmp(Ut.n)>=0||r.cmp(Ut.n)>=0?1:(r.cmp(Oi.nh)===1&&t.set(Ut.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new sr(r).cmp(Ut.n)>=0||new sr(n).cmp(Ut.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,f=0;for(;o>1&&s[f]===0&&!(s[f+1]&128);--o,++f);if(s=s.subarray(f),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let p=i.subarray(6+33,6+33+33);p[0]=0,p.set(n,1);let b=33,x=0;for(;b>1&&p[x]===0&&!(p[x+1]&128);--b,++x);return p=p.subarray(x),p[0]&128||b>1&&p[0]===0&&!(p[1]&128)?1:(t.outputlen=6+o+b,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+o]=2,i[5+o]=p.length,i.set(p,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new sr(i);o.cmp(Ut.n)>=0&&(o=new sr(0));let f=new sr(e.subarray(6+r));return f.cmp(Ut.n)>=0&&(f=new sr(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(f.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const f=i;i=p=>{const b=f(e,r,null,n,p);if(!(b instanceof Uint8Array&&b.length===32))throw new Error("This is the way");return new sr(b)}}const s=new sr(r);if(s.cmp(Ut.n)>=0||s.isZero())return 1;let o;try{o=Oi.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new sr(n.r),s=new sr(n.s);if(i.cmp(Ut.n)>=0||s.cmp(Ut.n)>=0)return 1;if(s.cmp(Oi.nh)===1||i.isZero()||s.isZero())return 3;const o=Ls(r);if(o===null)return 2;const f=o.getPublic();return Oi.verify(e,n,f)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new sr(i.r),o=new sr(i.s);if(s.cmp(Ut.n)>=0||o.cmp(Ut.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let f;try{f=Oi.recoverPubKey(n,i,r)}catch{return 2}return Ao(t,f),0},ecdh(t,e,r,n,i,s,o){const f=Ls(e);if(f===null)return 1;const p=new sr(r);if(p.cmp(Ut.n)>=0||p.isZero())return 2;const b=f.getPublic().mul(p);if(i===void 0){const x=b.encode(null,!0),_=Oi.hash().update(x).digest();for(let S=0;S<32;++S)t[S]=_[S]}else{s||(s=new Uint8Array(32));const x=b.getX().toArray("be",32);for(let N=0;N<32;++N)s[N]=x[N];o||(o=new Uint8Array(32));const _=b.getY().toArray("be",32);for(let N=0;N<32;++N)o[N]=_[N];const S=i(s,o,n);if(!(S instanceof Uint8Array&&S.length===t.length))return 2;t.set(S)}return 0}},Yb=l5(RA),rl={exports:{}},Zb=ff.exports.EventEmitter;function zy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zy(Object(r),!0).forEach(function(n){CA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zy(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CA(t,e,r){return e=Xb(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xb(n.key),n)}}function BA(t,e,r){return e&&Gy(t.prototype,e),r&&Gy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xb(t){var e=OA(t,"string");return typeof e=="symbol"?e:String(e)}function OA(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LA=Ho,Nc=LA.Buffer,DA=Sn,ad=DA.inspect,UA=ad&&ad.custom||"inspect";function FA(t,e,r){Nc.prototype.copy.call(t,e,r)}var $A=function(){function t(){NA(this,t),this.head=null,this.tail=null,this.length=0}return BA(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Nc.alloc(0);for(var n=Nc.allocUnsafe(r>>>0),i=this.head,s=0;i;)FA(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,f=r>o.length?o.length:r;if(f===o.length?s+=o:s+=o.slice(0,r),r-=f,r===0){f===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(f));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=Nc.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,f=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,f),r-=f,r===0){f===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(f));break}++s}return this.length-=s,n}},{key:UA,value:function(r,n){return ad(this,Hy(Hy({},n),{},{depth:0,customInspect:!1}))}}]),t}();function jA(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(fd,this,t)):process.nextTick(fd,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Bc,r):(r._writableState.errorEmitted=!0,process.nextTick(Vy,r,s)):process.nextTick(Vy,r,s):e?(process.nextTick(Bc,r),e(s)):process.nextTick(Bc,r)}),this)}function Vy(t,e){fd(t,e),Bc(t)}function Bc(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function qA(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function fd(t,e){t.emit("error",e)}function KA(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var Qb={destroy:jA,undestroy:qA,errorOrDestroy:KA},Xo={};function zA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ex={};function li(t,e,r){r||(r=Error);function n(s,o,f){return typeof e=="string"?e:e(s,o,f)}var i=function(s){zA(o,s);function o(f,p,b){return s.call(this,n(f,p,b))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,ex[t]=i}function Wy(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function HA(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function GA(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function VA(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}li("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);li("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&HA(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(GA(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Wy(e,"type"));else{var s=VA(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(Wy(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);li("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");li("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});li("ERR_STREAM_PREMATURE_CLOSE","Premature close");li("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});li("ERR_MULTIPLE_CALLBACK","Callback called multiple times");li("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");li("ERR_STREAM_WRITE_AFTER_END","write after end");li("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);li("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);li("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Xo.codes=ex;var WA=Xo.codes.ERR_INVALID_OPT_VALUE;function JA(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function YA(t,e,r,n){var i=JA(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new WA(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var tx={getHighWaterMark:YA},ZA=XA;function XA(t,e){if(Qh("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Qh("throwDeprecation"))throw new Error(e);Qh("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Qh(t){try{if(!V.localStorage)return!1}catch{return!1}var e=V.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var rx=Er;function nx(t){var e=this;this.next=null,this.entry=null,this.finish=function(){S8(e,t)}}var Ba;Er.WritableState=Fu;var QA={deprecate:ZA},ix=Zb,Ql=Ho.Buffer,e8=(typeof V<"u"?V:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function t8(t){return Ql.from(t)}function r8(t){return Ql.isBuffer(t)||t instanceof e8}var Pp=Qb,n8=tx,i8=n8.getHighWaterMark,yo=Xo.codes,s8=yo.ERR_INVALID_ARG_TYPE,o8=yo.ERR_METHOD_NOT_IMPLEMENTED,a8=yo.ERR_MULTIPLE_CALLBACK,f8=yo.ERR_STREAM_CANNOT_PIPE,u8=yo.ERR_STREAM_DESTROYED,c8=yo.ERR_STREAM_NULL_VALUES,l8=yo.ERR_STREAM_WRITE_AFTER_END,h8=yo.ERR_UNKNOWN_ENCODING,Ja=Pp.errorOrDestroy;en.exports(Er,ix);function d8(){}function Fu(t,e,r){Ba=Ba||wf,t=t||{},typeof r!="boolean"&&(r=e instanceof Ba),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=i8(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){x8(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new nx(this)}Fu.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Fu.prototype,"buffer",{get:QA.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Oc;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Oc=Function.prototype[Symbol.hasInstance],Object.defineProperty(Er,Symbol.hasInstance,{value:function(e){return Oc.call(this,e)?!0:this!==Er?!1:e&&e._writableState instanceof Fu}})):Oc=function(e){return e instanceof this};function Er(t){Ba=Ba||wf;var e=this instanceof Ba;if(!e&&!Oc.call(Er,this))return new Er(t);this._writableState=new Fu(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),ix.call(this)}Er.prototype.pipe=function(){Ja(this,new f8)};function p8(t,e){var r=new l8;Ja(t,r),process.nextTick(e,r)}function g8(t,e,r,n){var i;return r===null?i=new c8:typeof r!="string"&&!e.objectMode&&(i=new s8("chunk",["string","Buffer"],r)),i?(Ja(t,i),process.nextTick(n,i),!1):!0}Er.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&r8(t);return s&&!Ql.isBuffer(t)&&(t=t8(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=d8),n.ending?p8(this,r):(s||g8(this,n,t,r))&&(n.pendingcb++,i=m8(this,n,s,t,e,r)),i};Er.prototype.cork=function(){this._writableState.corked++};Er.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&sx(this,t))};Er.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new h8(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Er.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function y8(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Ql.from(e,r)),e}Object.defineProperty(Er.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m8(t,e,r,n,i,s){if(!r){var o=y8(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var f=e.objectMode?1:n.length;e.length+=f;var p=e.length<e.highWaterMark;if(p||(e.needDrain=!0),e.writing||e.corked){var b=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},b?b.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else ud(t,e,!1,f,n,i,s);return p}function ud(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new u8("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function v8(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(du,t,e),t._writableState.errorEmitted=!0,Ja(t,n)):(i(n),t._writableState.errorEmitted=!0,Ja(t,n),du(t,e))}function b8(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function x8(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new a8;if(b8(r),e)v8(t,r,n,e,i);else{var s=ox(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&sx(t,r),n?process.nextTick(Jy,t,r,s,i):Jy(t,r,s,i)}}function Jy(t,e,r,n){r||w8(t,e),e.pendingcb--,n(),du(t,e)}function w8(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function sx(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,f=!0;r;)i[o]=r,r.isBuf||(f=!1),r=r.next,o+=1;i.allBuffers=f,ud(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new nx(e),e.bufferedRequestCount=0}else{for(;r;){var p=r.chunk,b=r.encoding,x=r.callback,_=e.objectMode?1:p.length;if(ud(t,e,!1,_,p,b,x),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Er.prototype._write=function(t,e,r){r(new o8("_write()"))};Er.prototype._writev=null;Er.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||A8(this,n,r),this};Object.defineProperty(Er.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ox(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function _8(t,e){t._final(function(r){e.pendingcb--,r&&Ja(t,r),e.prefinished=!0,t.emit("prefinish"),du(t,e)})}function E8(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(_8,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function du(t,e){var r=ox(e);if(r&&(E8(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function A8(t,e,r){e.ending=!0,du(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function S8(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Er.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});Er.prototype.destroy=Pp.destroy;Er.prototype._undestroy=Pp.undestroy;Er.prototype._destroy=function(t,e){e(t)};var M8=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},wf=Qi,ax=ux,cd=rx;en.exports(Qi,ax);for(var Yy=M8(cd.prototype),e0=0;e0<Yy.length;e0++){var t0=Yy[e0];Qi.prototype[t0]||(Qi.prototype[t0]=cd.prototype[t0])}function Qi(t){if(!(this instanceof Qi))return new Qi(t);ax.call(this,t),cd.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",T8)))}Object.defineProperty(Qi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Qi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Qi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T8(){this._writableState.ended||process.nextTick(P8,this)}function P8(t){t.end()}Object.defineProperty(Qi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var kp={},Ip=D_.exports.Buffer,Zy=Ip.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k8(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function I8(t){var e=k8(t);if(typeof e!="string"&&(Ip.isEncoding===Zy||!Zy(t)))throw new Error("Unknown encoding: "+t);return e||t}kp.StringDecoder=$u;function $u(t){this.encoding=I8(t);var e;switch(this.encoding){case"utf16le":this.text=L8,this.end=D8,e=4;break;case"utf8":this.fillLast=N8,e=4;break;case"base64":this.text=U8,this.end=F8,e=3;break;default:this.write=$8,this.end=j8;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ip.allocUnsafe(e)}$u.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};$u.prototype.end=O8;$u.prototype.text=B8;$u.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function r0(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function R8(t,e,r){var n=e.length-1;if(n<r)return 0;var i=r0(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=r0(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=r0(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function C8(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function N8(t){var e=this.lastTotal-this.lastNeed,r=C8(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function B8(t,e){var r=R8(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function O8(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function L8(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function D8(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function U8(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function F8(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function $8(t){return t.toString(this.encoding)}function j8(t){return t&&t.length?this.write(t):""}var Xy=Xo.codes.ERR_STREAM_PREMATURE_CLOSE;function q8(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function K8(){}function z8(t){return t.setHeader&&typeof t.abort=="function"}function fx(t,e,r){if(typeof e=="function")return fx(t,null,e);e||(e={}),r=q8(r||K8);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||f()},o=t._writableState&&t._writableState.finished,f=function(){i=!1,o=!0,n||r.call(t)},p=t._readableState&&t._readableState.endEmitted,b=function(){n=!1,p=!0,i||r.call(t)},x=function(N){r.call(t,N)},_=function(){var N;if(n&&!p)return(!t._readableState||!t._readableState.ended)&&(N=new Xy),r.call(t,N);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(N=new Xy),r.call(t,N)},S=function(){t.req.on("finish",f)};return z8(t)?(t.on("complete",f),t.on("abort",_),t.req?S():t.on("request",S)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",b),t.on("finish",f),e.error!==!1&&t.on("error",x),t.on("close",_),function(){t.removeListener("complete",f),t.removeListener("abort",_),t.removeListener("request",S),t.req&&t.req.removeListener("finish",f),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",f),t.removeListener("end",b),t.removeListener("error",x),t.removeListener("close",_)}}var Rp=fx,cc;function qs(t,e,r){return e=H8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H8(t){var e=G8(t,"string");return typeof e=="symbol"?e:String(e)}function G8(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V8=Rp,Ks=Symbol("lastResolve"),ko=Symbol("lastReject"),Xf=Symbol("error"),nl=Symbol("ended"),Ro=Symbol("lastPromise"),Cp=Symbol("handlePromise"),Co=Symbol("stream");function Js(t,e){return{value:t,done:e}}function W8(t){var e=t[Ks];if(e!==null){var r=t[Co].read();r!==null&&(t[Ro]=null,t[Ks]=null,t[ko]=null,e(Js(r,!1)))}}function J8(t){process.nextTick(W8,t)}function Y8(t,e){return function(r,n){t.then(function(){if(e[nl]){r(Js(void 0,!0));return}e[Cp](r,n)},n)}}var Z8=Object.getPrototypeOf(function(){}),X8=Object.setPrototypeOf((cc={get stream(){return this[Co]},next:function(){var e=this,r=this[Xf];if(r!==null)return Promise.reject(r);if(this[nl])return Promise.resolve(Js(void 0,!0));if(this[Co].destroyed)return new Promise(function(o,f){process.nextTick(function(){e[Xf]?f(e[Xf]):o(Js(void 0,!0))})});var n=this[Ro],i;if(n)i=new Promise(Y8(n,this));else{var s=this[Co].read();if(s!==null)return Promise.resolve(Js(s,!1));i=new Promise(this[Cp])}return this[Ro]=i,i}},qs(cc,Symbol.asyncIterator,function(){return this}),qs(cc,"return",function(){var e=this;return new Promise(function(r,n){e[Co].destroy(null,function(i){if(i){n(i);return}r(Js(void 0,!0))})})}),cc),Z8),Q8=function(e){var r,n=Object.create(X8,(r={},qs(r,Co,{value:e,writable:!0}),qs(r,Ks,{value:null,writable:!0}),qs(r,ko,{value:null,writable:!0}),qs(r,Xf,{value:null,writable:!0}),qs(r,nl,{value:e._readableState.endEmitted,writable:!0}),qs(r,Cp,{value:function(s,o){var f=n[Co].read();f?(n[Ro]=null,n[Ks]=null,n[ko]=null,s(Js(f,!1))):(n[Ks]=s,n[ko]=o)},writable:!0}),r));return n[Ro]=null,V8(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[ko];s!==null&&(n[Ro]=null,n[Ks]=null,n[ko]=null,s(i)),n[Xf]=i;return}var o=n[Ks];o!==null&&(n[Ro]=null,n[Ks]=null,n[ko]=null,o(Js(void 0,!0))),n[nl]=!0}),e.on("readable",J8.bind(null,n)),n},eS=Q8,tS=function(){throw new Error("Readable.from is not available in the browser")},ux=Gt,Oa;Gt.ReadableState=lx;ff.exports.EventEmitter;var cx=function(e,r){return e.listeners(r).length},ju=Zb,eh=Ho.Buffer,rS=(typeof V<"u"?V:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function nS(t){return eh.from(t)}function iS(t){return eh.isBuffer(t)||t instanceof rS}var n0=Sn,Nt;n0&&n0.debuglog?Nt=n0.debuglog("stream"):Nt=function(){};var sS=$A,Np=Qb,oS=tx,aS=oS.getHighWaterMark,th=Xo.codes,fS=th.ERR_INVALID_ARG_TYPE,uS=th.ERR_STREAM_PUSH_AFTER_EOF,cS=th.ERR_METHOD_NOT_IMPLEMENTED,lS=th.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,La,i0,s0;en.exports(Gt,ju);var Qf=Np.errorOrDestroy,o0=["error","close","destroy","pause","resume"];function hS(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function lx(t,e,r){Oa=Oa||wf,t=t||{},typeof r!="boolean"&&(r=e instanceof Oa),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=aS(this,t,"readableHighWaterMark",r),this.buffer=new sS,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(La||(La=kp.StringDecoder),this.decoder=new La(t.encoding),this.encoding=t.encoding)}function Gt(t){if(Oa=Oa||wf,!(this instanceof Gt))return new Gt(t);var e=this instanceof Oa;this._readableState=new lx(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ju.call(this)}Object.defineProperty(Gt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});Gt.prototype.destroy=Np.destroy;Gt.prototype._undestroy=Np.undestroy;Gt.prototype._destroy=function(t,e){e(t)};Gt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=eh.from(t,e),e=""),n=!0),hx(this,t,e,!1,n)};Gt.prototype.unshift=function(t){return hx(this,t,null,!0,!1)};function hx(t,e,r,n,i){Nt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,gS(t,s);else{var o;if(i||(o=dS(s,e)),o)Qf(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==eh.prototype&&(e=nS(e)),n)s.endEmitted?Qf(t,new lS):a0(t,s,e,!0);else if(s.ended)Qf(t,new uS);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?a0(t,s,e,!1):ld(t,s)):a0(t,s,e,!1)}else n||(s.reading=!1,ld(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function a0(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&rh(t)),ld(t,e)}function dS(t,e){var r;return!iS(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new fS("chunk",["string","Buffer","Uint8Array"],e)),r}Gt.prototype.isPaused=function(){return this._readableState.flowing===!1};Gt.prototype.setEncoding=function(t){La||(La=kp.StringDecoder);var e=new La(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Qy=1073741824;function pS(t){return t>=Qy?t=Qy:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function e1(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=pS(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Gt.prototype.read=function(t){Nt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Nt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?f0(this):rh(this),null;if(t=e1(t,e),t===0&&e.ended)return e.length===0&&f0(this),null;var n=e.needReadable;Nt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Nt("length less than watermark",n)),e.ended||e.reading?(n=!1,Nt("reading or ended",n)):n&&(Nt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=e1(r,e)));var i;return t>0?i=gx(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&f0(this)),i!==null&&this.emit("data",i),i};function gS(t,e){if(Nt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?rh(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,dx(t)))}}function rh(t){var e=t._readableState;Nt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Nt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(dx,t))}function dx(t){var e=t._readableState;Nt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Bp(t)}function ld(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(yS,t,e))}function yS(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Nt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Gt.prototype._read=function(t){Qf(this,new cS("_read()"))};Gt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Nt("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?f:k;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(I,C){Nt("onunpipe"),I===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,x())}function f(){Nt("onend"),t.end()}var p=mS(r);t.on("drain",p);var b=!1;function x(){Nt("cleanup"),t.removeListener("close",M),t.removeListener("finish",N),t.removeListener("drain",p),t.removeListener("error",S),t.removeListener("unpipe",o),r.removeListener("end",f),r.removeListener("end",k),r.removeListener("data",_),b=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&p()}r.on("data",_);function _(I){Nt("ondata");var C=t.write(I);Nt("dest.write",C),C===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&yx(n.pipes,t)!==-1)&&!b&&(Nt("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function S(I){Nt("onerror",I),k(),t.removeListener("error",S),cx(t,"error")===0&&Qf(t,I)}hS(t,"error",S);function M(){t.removeListener("finish",N),k()}t.once("close",M);function N(){Nt("onfinish"),t.removeListener("close",M),k()}t.once("finish",N);function k(){Nt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Nt("pipe resume"),r.resume()),t};function mS(t){return function(){var r=t._readableState;Nt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&cx(t,"data")&&(r.flowing=!0,Bp(t))}}Gt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=yx(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Gt.prototype.on=function(t,e){var r=ju.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Nt("on readable",n.length,n.reading),n.length?rh(this):n.reading||process.nextTick(vS,this)),r};Gt.prototype.addListener=Gt.prototype.on;Gt.prototype.removeListener=function(t,e){var r=ju.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(px,this),r};Gt.prototype.removeAllListeners=function(t){var e=ju.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(px,this),e};function px(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function vS(t){Nt("readable nexttick read 0"),t.read(0)}Gt.prototype.resume=function(){var t=this._readableState;return t.flowing||(Nt("resume"),t.flowing=!t.readableListening,bS(this,t)),t.paused=!1,this};function bS(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(xS,t,e))}function xS(t,e){Nt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Bp(t),e.flowing&&!e.reading&&t.read(0)}Gt.prototype.pause=function(){return Nt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Nt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Bp(t){var e=t._readableState;for(Nt("flow",e.flowing);e.flowing&&t.read()!==null;);}Gt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Nt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Nt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var f=e.push(o);f||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(f){return function(){return t[f].apply(t,arguments)}}(i));for(var s=0;s<o0.length;s++)t.on(o0[s],this.emit.bind(this,o0[s]));return this._read=function(o){Nt("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Gt.prototype[Symbol.asyncIterator]=function(){return i0===void 0&&(i0=eS),i0(this)});Object.defineProperty(Gt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Gt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Gt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Gt._fromList=gx;Object.defineProperty(Gt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function gx(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function f0(t){var e=t._readableState;Nt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(wS,e,t))}function wS(t,e){if(Nt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Gt.from=function(t,e){return s0===void 0&&(s0=tS),s0(Gt,t,e)});function yx(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var mx=Ms,nh=Xo.codes,_S=nh.ERR_METHOD_NOT_IMPLEMENTED,ES=nh.ERR_MULTIPLE_CALLBACK,AS=nh.ERR_TRANSFORM_ALREADY_TRANSFORMING,SS=nh.ERR_TRANSFORM_WITH_LENGTH_0,ih=wf;en.exports(Ms,ih);function MS(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new ES);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ms(t){if(!(this instanceof Ms))return new Ms(t);ih.call(this,t),this._transformState={afterTransform:MS.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",TS)}function TS(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){t1(t,e,r)}):t1(this,null,null)}Ms.prototype.push=function(t,e){return this._transformState.needTransform=!1,ih.prototype.push.call(this,t,e)};Ms.prototype._transform=function(t,e,r){r(new _S("_transform()"))};Ms.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ms.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ms.prototype._destroy=function(t,e){ih.prototype._destroy.call(this,t,function(r){e(r)})};function t1(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new SS;if(t._transformState.transforming)throw new AS;return t.push(null)}var PS=pu,vx=mx;en.exports(pu,vx);function pu(t){if(!(this instanceof pu))return new pu(t);vx.call(this,t)}pu.prototype._transform=function(t,e,r){r(null,t)};var u0;function kS(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var bx=Xo.codes,IS=bx.ERR_MISSING_ARGS,RS=bx.ERR_STREAM_DESTROYED;function r1(t){if(t)throw t}function CS(t){return t.setHeader&&typeof t.abort=="function"}function NS(t,e,r,n){n=kS(n);var i=!1;t.on("close",function(){i=!0}),u0===void 0&&(u0=Rp),u0(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,CS(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new RS("pipe"))}}}function n1(t){t()}function BS(t,e){return t.pipe(e)}function OS(t){return!t.length||typeof t[t.length-1]!="function"?r1:t.pop()}function LS(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=OS(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new IS("streams");var i,s=e.map(function(o,f){var p=f<e.length-1,b=f>0;return NS(o,p,b,function(x){i||(i=x),x&&s.forEach(n1),!p&&(s.forEach(n1),n(i))})});return e.reduce(BS)}var DS=LS;(function(t,e){e=t.exports=ux,e.Stream=e,e.Readable=e,e.Writable=rx,e.Duplex=wf,e.Transform=mx,e.PassThrough=PS,e.finished=Rp,e.pipeline=DS})(rl,rl.exports);const{Transform:US}=rl.exports;var FS=t=>class xx extends US{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new xx(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:$S}=rl.exports;var jS=t=>class wx extends $S{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new wx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const qS=FS,KS=jS;var zS=function(t){const e=qS(t),r=KS(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},_x={};const i1=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];_x.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],f=t[5]^t[15]^t[25]^t[35]^t[45],p=t[6]^t[16]^t[26]^t[36]^t[46],b=t[7]^t[17]^t[27]^t[37]^t[47],x=t[8]^t[18]^t[28]^t[38]^t[48],_=t[9]^t[19]^t[29]^t[39]^t[49];let S=x^(i<<1|s>>>31),M=_^(s<<1|i>>>31);const N=t[0]^S,k=t[1]^M,I=t[10]^S,C=t[11]^M,D=t[20]^S,$=t[21]^M,j=t[30]^S,F=t[31]^M,z=t[40]^S,Z=t[41]^M;S=r^(o<<1|f>>>31),M=n^(f<<1|o>>>31);const te=t[2]^S,ee=t[3]^M,pe=t[12]^S,T=t[13]^M,h=t[22]^S,c=t[23]^M,a=t[32]^S,u=t[33]^M,y=t[42]^S,m=t[43]^M;S=i^(p<<1|b>>>31),M=s^(b<<1|p>>>31);const w=t[4]^S,v=t[5]^M,l=t[14]^S,g=t[15]^M,d=t[24]^S,E=t[25]^M,L=t[34]^S,U=t[35]^M,K=t[44]^S,re=t[45]^M;S=o^(x<<1|_>>>31),M=f^(_<<1|x>>>31);const oe=t[6]^S,Y=t[7]^M,be=t[16]^S,Fe=t[17]^M,he=t[26]^S,Je=t[27]^M,rt=t[36]^S,Se=t[37]^M,Ve=t[46]^S,vt=t[47]^M;S=p^(r<<1|n>>>31),M=b^(n<<1|r>>>31);const ke=t[8]^S,Ze=t[9]^M,it=t[18]^S,Ie=t[19]^M,lt=t[28]^S,ht=t[29]^M,Ee=t[38]^S,dt=t[39]^M,st=t[48]^S,Me=t[49]^M,ot=N,pt=k,Re=C<<4|I>>>28,at=I<<4|C>>>28,ft=D<<3|$>>>29,_e=$<<3|D>>>29,et=F<<9|j>>>23,Xe=j<<9|F>>>23,xe=z<<18|Z>>>14,nt=Z<<18|z>>>14,tt=te<<1|ee>>>31,we=ee<<1|te>>>31,ut=T<<12|pe>>>20,gt=pe<<12|T>>>20,Ce=h<<10|c>>>22,bt=c<<10|h>>>22,Ye=u<<13|a>>>19,me=a<<13|u>>>19,Qe=y<<2|m>>>30,ct=m<<2|y>>>30,Ae=v<<30|w>>>2,yt=w<<30|v>>>2,xt=l<<6|g>>>26,de=g<<6|l>>>26,mt=E<<11|d>>>21,P=d<<11|E>>>21,R=L<<15|U>>>17,B=U<<15|L>>>17,A=re<<29|K>>>3,O=K<<29|re>>>3,H=oe<<28|Y>>>4,W=Y<<28|oe>>>4,J=Fe<<23|be>>>9,ne=be<<23|Fe>>>9,fe=he<<25|Je>>>7,se=Je<<25|he>>>7,wt=rt<<21|Se>>>11,Be=Se<<21|rt>>>11,$e=vt<<24|Ve>>>8,je=Ve<<24|vt>>>8,We=ke<<27|Ze>>>5,Ge=Ze<<27|ke>>>5,qe=it<<20|Ie>>>12,ze=Ie<<20|it>>>12,Ke=ht<<7|lt>>>25,Oe=lt<<7|ht>>>25,Ue=Ee<<8|dt>>>24,Te=dt<<8|Ee>>>24,Le=st<<14|Me>>>18,De=Me<<14|st>>>18;t[0]=ot^~ut&mt,t[1]=pt^~gt&P,t[10]=H^~qe&ft,t[11]=W^~ze&_e,t[20]=tt^~xt&fe,t[21]=we^~de&se,t[30]=We^~Re&Ce,t[31]=Ge^~at&bt,t[40]=Ae^~J&Ke,t[41]=yt^~ne&Oe,t[2]=ut^~mt&wt,t[3]=gt^~P&Be,t[12]=qe^~ft&Ye,t[13]=ze^~_e&me,t[22]=xt^~fe&Ue,t[23]=de^~se&Te,t[32]=Re^~Ce&R,t[33]=at^~bt&B,t[42]=J^~Ke&et,t[43]=ne^~Oe&Xe,t[4]=mt^~wt&Le,t[5]=P^~Be&De,t[14]=ft^~Ye&A,t[15]=_e^~me&O,t[24]=fe^~Ue&xe,t[25]=se^~Te&nt,t[34]=Ce^~R&$e,t[35]=bt^~B&je,t[44]=Ke^~et&Qe,t[45]=Oe^~Xe&ct,t[6]=wt^~Le&ot,t[7]=Be^~De&pt,t[16]=Ye^~A&H,t[17]=me^~O&W,t[26]=Ue^~xe&tt,t[27]=Te^~nt&we,t[36]=R^~$e&We,t[37]=B^~je&Ge,t[46]=et^~Qe&Ae,t[47]=Xe^~ct&yt,t[8]=Le^~ot&ut,t[9]=De^~pt&gt,t[18]=A^~H&qe,t[19]=O^~W&ze,t[28]=xe^~tt&xt,t[29]=nt^~we&de,t[38]=$e^~We&Re,t[39]=je^~Ge&at,t[48]=Qe^~Ae&J,t[49]=ct^~yt&ne,t[0]^=i1[e*2],t[1]^=i1[e*2+1]}};const il=_x;function _f(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}_f.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};_f.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(il.p1600(this.state),this.count=0)};_f.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&il.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),il.p1600(this.state),this.count=0,this.squeezing=!0};_f.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(il.p1600(this.state),this.count=0);return e};_f.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var HS=_f,GS=zS(HS),Ex=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const VS=Ex(iv.exports),$s=Ho,WS=Ex(GS);function Ax(t){return t=JS(t),WS.default("keccak256").update(t).digest()}function JS(t){if(!$s.Buffer.isBuffer(t))if(Array.isArray(t))t=$s.Buffer.from(t);else if(typeof t=="string")YS(t)?t=$s.Buffer.from(Sx(ZS(t)),"hex"):t=$s.Buffer.from(t);else if(typeof t=="number")t=QS(t);else if(t==null)t=$s.Buffer.allocUnsafe(0);else if(VS.default.isBN(t))t=t.toArrayLike($s.Buffer);else if(t.toArray)t=$s.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function YS(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Sx(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function ZS(t){return typeof t!="string"?t:XS(t)?t.slice(2):t}function XS(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}function QS(t){const e=eM(t);return $s.Buffer.from(Sx(e.slice(2)),"hex")}function eM(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=Ax);var Mx=Ax,Op=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_p,"__esModule",{value:!0});const tM=Op(ki.exports),s1=Op(Yb),Bf=Yo,o1=Op(Mx);class rM{constructor(e,r){this._key=e,this.ownerLength=Bf.SIG_CONFIG[Bf.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=Bf.SIG_CONFIG[Bf.SignatureConfig.ETHEREUM].sigLength,this.signatureType=Bf.SignatureConfig.ETHEREUM,this.pk=r.toString("hex")}get publicKey(){return Buffer.alloc(0)}get key(){return Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=tM.default.toBuffer(e));let s=!1;try{s=s1.default.ecdsaVerify(n,o1.default(Buffer.from(r)),i)}catch{}return s}sign(e){return s1.default.ecdsaSign(o1.default(Buffer.from(e)),Buffer.from(this.key)).signature}}_p.default=rM;const nM="logger/5.7.0";let a1=!1,f1=!1;const Lc={debug:1,default:2,info:2,warning:3,error:4,off:5};let u1=Lc.default,c0=null;function iM(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const c1=iM();var hd;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(hd||(hd={}));var Fn;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Fn||(Fn={}));const l1="0123456789abcdef";class G{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Lc[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(u1>Lc[n])&&console.log.apply(console,r)}debug(...e){this._log(G.levels.DEBUG,e)}info(...e){this._log(G.levels.INFO,e)}warn(...e){this._log(G.levels.WARNING,e)}makeError(e,r,n){if(f1)return this.makeError("censored error",r,{});r||(r=G.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(p=>{const b=n[p];try{if(b instanceof Uint8Array){let x="";for(let _=0;_<b.length;_++)x+=l1[b[_]>>4],x+=l1[b[_]&15];i.push(p+"=Uint8Array(0x"+x+")")}else i.push(p+"="+JSON.stringify(b))}catch{i.push(p+"="+JSON.stringify(n[p].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case Fn.NUMERIC_FAULT:{o="NUMERIC_FAULT";const p=e;switch(p){case"overflow":case"underflow":case"division-by-zero":o+="-"+p;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Fn.CALL_EXCEPTION:case Fn.INSUFFICIENT_FUNDS:case Fn.MISSING_NEW:case Fn.NONCE_EXPIRED:case Fn.REPLACEMENT_UNDERPRICED:case Fn.TRANSACTION_REPLACED:case Fn.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const f=new Error(e);return f.reason=s,f.code=r,Object.keys(n).forEach(function(p){f[p]=n[p]}),f}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,G.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){c1&&this.throwError("platform missing String.prototype.normalize",G.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:c1})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,G.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,G.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,G.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,G.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",G.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",G.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",G.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return c0||(c0=new G(nM)),c0}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",G.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),a1){if(!e)return;this.globalLogger().throwError("error censorship permanent",G.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}f1=!!e,a1=!!r}static setLogLevel(e){const r=Lc[e.toLowerCase()];if(r==null){G.globalLogger().warn("invalid log level - "+e);return}u1=r}static from(e){return new G(e)}}G.errors=Fn;G.levels=hd;const sM="bytes/5.7.0",vr=new G(sM);function Tx(t){return!!t.toHexString}function Da(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Da(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function qu(t){return Tt(t)&&!(t.length%2)||mo(t)}function h1(t){return typeof t=="number"&&t==t&&t%1===0}function mo(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!h1(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!h1(r)||r<0||r>=256)return!1}return!0}function ye(t,e){if(e||(e={}),typeof t=="number"){vr.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Da(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Tx(t)&&(t=t.toHexString()),Tt(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":vr.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Da(new Uint8Array(n))}return mo(t)?Da(new Uint8Array(t)):vr.throwArgumentError("invalid arrayify value","value",t)}function or(t){const e=t.map(i=>ye(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Da(n)}function Hi(t){let e=ye(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function eu(t,e){t=ye(t),t.length>e&&vr.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Da(r)}function Tt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const l0="0123456789abcdef";function Pe(t,e){if(e||(e={}),typeof t=="number"){vr.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=l0[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Tx(t))return t.toHexString();if(Tt(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":vr.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(mo(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=l0[(i&240)>>4]+l0[i&15]}return r}return vr.throwArgumentError("invalid hexlify value","value",t)}function es(t){if(typeof t!="string")t=Pe(t);else if(!Tt(t)||t.length%2)return null;return(t.length-2)/2}function Pr(t,e,r){return typeof t!="string"?t=Pe(t):(!Tt(t)||t.length%2)&&vr.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function bn(t){let e="0x";return t.forEach(r=>{e+=Pe(r).substring(2)}),e}function Ku(t){const e=Px(Pe(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function Px(t){typeof t!="string"&&(t=Pe(t)),Tt(t)||vr.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function ar(t,e){for(typeof t!="string"?t=Pe(t):Tt(t)||vr.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&vr.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Qo(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(qu(t)){let r=ye(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Pe(r.slice(0,32)),e.s=Pe(r.slice(32,64))):r.length===65?(e.r=Pe(r.slice(0,32)),e.s=Pe(r.slice(32,64)),e.v=r[64]):vr.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:vr.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Pe(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=eu(ye(e._vs),32);e._vs=Pe(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&vr.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=Pe(i);e.s==null?e.s=o:e.s!==o&&vr.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?vr.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&vr.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Tt(e.r)?vr.throwArgumentError("signature missing or invalid r","signature",t):e.r=ar(e.r,32),e.s==null||!Tt(e.s)?vr.throwArgumentError("signature missing or invalid s","signature",t):e.s=ar(e.s,32);const r=ye(e.s);r[0]>=128&&vr.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=Pe(r);e._vs&&(Tt(e._vs)||vr.throwArgumentError("signature invalid _vs","signature",t),e._vs=ar(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&vr.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function dd(t){return t=Qo(t),Pe(or([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const kx="bignumber/5.7.0";var gu=At.BN;const ps=new G(kx),h0={},d1=9007199254740991;function oM(t){return t!=null&&(ge.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Tt(t)||typeof t=="bigint"||mo(t))}let p1=!1;class ge{constructor(e,r){e!==h0&&ps.throwError("cannot call constructor directly; use BigNumber.from",G.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Tn(Lt(this).fromTwos(e))}toTwos(e){return Tn(Lt(this).toTwos(e))}abs(){return this._hex[0]==="-"?ge.from(this._hex.substring(1)):this}add(e){return Tn(Lt(this).add(Lt(e)))}sub(e){return Tn(Lt(this).sub(Lt(e)))}div(e){return ge.from(e).isZero()&&Yn("division-by-zero","div"),Tn(Lt(this).div(Lt(e)))}mul(e){return Tn(Lt(this).mul(Lt(e)))}mod(e){const r=Lt(e);return r.isNeg()&&Yn("division-by-zero","mod"),Tn(Lt(this).umod(r))}pow(e){const r=Lt(e);return r.isNeg()&&Yn("negative-power","pow"),Tn(Lt(this).pow(r))}and(e){const r=Lt(e);return(this.isNegative()||r.isNeg())&&Yn("unbound-bitwise-result","and"),Tn(Lt(this).and(r))}or(e){const r=Lt(e);return(this.isNegative()||r.isNeg())&&Yn("unbound-bitwise-result","or"),Tn(Lt(this).or(r))}xor(e){const r=Lt(e);return(this.isNegative()||r.isNeg())&&Yn("unbound-bitwise-result","xor"),Tn(Lt(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Yn("negative-width","mask"),Tn(Lt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Yn("negative-width","shl"),Tn(Lt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Yn("negative-width","shr"),Tn(Lt(this).shrn(e))}eq(e){return Lt(this).eq(Lt(e))}lt(e){return Lt(this).lt(Lt(e))}lte(e){return Lt(this).lte(Lt(e))}gt(e){return Lt(this).gt(Lt(e))}gte(e){return Lt(this).gte(Lt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Lt(this).isZero()}toNumber(){try{return Lt(this).toNumber()}catch{Yn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return ps.throwError("this platform does not support BigInt",G.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?p1||(p1=!0,ps.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?ps.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",G.errors.UNEXPECTED_ARGUMENT,{}):ps.throwError("BigNumber.toString does not accept parameters",G.errors.UNEXPECTED_ARGUMENT,{})),Lt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ge)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new ge(h0,yu(e)):e.match(/^-?[0-9]+$/)?new ge(h0,yu(new gu(e))):ps.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Yn("underflow","BigNumber.from",e),(e>=d1||e<=-d1)&&Yn("overflow","BigNumber.from",e),ge.from(String(e));const r=e;if(typeof r=="bigint")return ge.from(r.toString());if(mo(r))return ge.from(Pe(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return ge.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Tt(n)||n[0]==="-"&&Tt(n.substring(1))))return ge.from(n)}return ps.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function yu(t){if(typeof t!="string")return yu(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&ps.throwArgumentError("invalid hex","value",t),t=yu(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Tn(t){return ge.from(yu(t))}function Lt(t){const e=ge.from(t).toHexString();return e[0]==="-"?new gu("-"+e.substring(3),16):new gu(e.substring(2),16)}function Yn(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),ps.throwError(t,G.errors.NUMERIC_FAULT,n)}function aM(t){return new gu(t,36).toString(16)}function fM(t){return new gu(t,16).toString(36)}const xn=new G(kx),tu={},Ix=ge.from(0),Rx=ge.from(-1);function Cx(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),xn.throwError(t,G.errors.NUMERIC_FAULT,i)}let ru="0";for(;ru.length<256;)ru+=ru;function Lp(t){if(typeof t!="number")try{t=ge.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+ru.substring(0,t):xn.throwArgumentError("invalid decimal size","decimals",t)}function Dc(t,e){e==null&&(e=0);const r=Lp(e);t=ge.from(t);const n=t.lt(Ix);n&&(t=t.mul(Rx));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Bi(t,e){e==null&&(e=0);const r=Lp(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&xn.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&xn.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&xn.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&Cx("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const f=ge.from(s),p=ge.from(o);let b=f.mul(r).add(p);return n&&(b=b.mul(Rx)),b}class Ua{constructor(e,r,n,i){e!==tu&&xn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",G.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Lp(i),Object.freeze(this)}static from(e){if(e instanceof Ua)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||xn.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,f,p)=>e[o]==null?p:(typeof e[o]!==f&&xn.throwArgumentError("invalid fixed format ("+o+" not "+f+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&xn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&xn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Ua(tu,r,n,i)}}class Dr{constructor(e,r,n,i){e!==tu&&xn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",G.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&xn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=Bi(this._value,this.format.decimals),n=Bi(e._value,e.format.decimals);return Dr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=Bi(this._value,this.format.decimals),n=Bi(e._value,e.format.decimals);return Dr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=Bi(this._value,this.format.decimals),n=Bi(e._value,e.format.decimals);return Dr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=Bi(this._value,this.format.decimals),n=Bi(e._value,e.format.decimals);return Dr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Dr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(g1.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Dr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(g1.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&xn.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=Dr.from("1"+ru.substring(0,e),this.format),i=uM.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&xn.throwArgumentError("invalid byte width","width",e);const r=ge.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return ar(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Dr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!oM(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),Dr.fromString(Dc(e,r),Ua.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=Ua.from(r),i=Bi(e,n.decimals);!n.signed&&i.lt(Ix)&&Cx("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=ar(s,n.width/8));const o=Dc(i,n.decimals);return new Dr(tu,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=Ua.from(r);if(ye(e).length>n.width/8)throw new Error("overflow");let i=ge.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Dc(i,n.decimals);return new Dr(tu,s,o,n)}static from(e,r){if(typeof e=="string")return Dr.fromString(e,r);if(mo(e))return Dr.fromBytes(e,r);try{return Dr.fromValue(e,0,r)}catch(n){if(n.code!==G.errors.INVALID_ARGUMENT)throw n}return xn.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const g1=Dr.from(1),uM=Dr.from("0.5"),cM="properties/5.7.0";var lM=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const sl=new G(cM);function ie(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Zr(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function br(t){return lM(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Dp(t,e){(!t||typeof t!="object")&&sl.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||sl.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function fr(t){const e={};for(const r in t)e[r]=t[r];return e}const hM={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Nx(t){if(t==null||hM[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Nx(n))return!1}return!0}return sl.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function dM(t){if(Nx(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>_n(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&ie(e,r,_n(n))}return e}return sl.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _n(t){return dM(t)}class ea{constructor(e){for(const r in e)this[r]=_n(e[r])}}const zu="abi/5.7.0",Ft=new G(zu),$o={};let y1={calldata:!0,memory:!0,storage:!0},pM={calldata:!0,memory:!0};function lc(t,e){if(t==="bytes"||t==="string"){if(y1[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&pM[e])return!0;return(y1[e]||e==="payable")&&Ft.throwArgumentError("invalid modifier","name",e),!1}function gM(t,e){let r=t;function n(f){Ft.throwArgumentError(`unexpected character at position ${f}`,"param",t)}t=t.replace(/\s/g," ");function i(f){let p={type:"",name:"",parent:f,state:{allowType:!0}};return e&&(p.indexed=!1),p}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let f=0;f<t.length;f++){let p=t[f];switch(p){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(f),o.state.allowType=!1,o.type=Aa(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(f),o.indexed=!0,o.name=""),lc(o.type,o.name)&&(o.name=""),o.type=Aa(o.type);let b=o;o=o.parent,o||n(f),delete b.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(f),o.indexed=!0,o.name=""),lc(o.type,o.name)&&(o.name=""),o.type=Aa(o.type);let x=i(o.parent);o.parent.components.push(x),delete o.parent,o=x;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Aa(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(f),o.indexed&&n(f),o.indexed=!0,o.name=""):lc(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(f),o.type+=p,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(f),o.type+=p,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=p,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=p,delete o.state.allowArray):o.state.readArray?o.type+=p:n(f)}}return o.parent&&Ft.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):lc(o.type,o.name)&&(o.name=""),s.type=Aa(s.type),s}function Uc(t,e){for(let r in e)ie(t,r,e[r])}const Ht=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),yM=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ur{constructor(e,r){e!==$o&&Ft.throwError("use fromString",G.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Uc(this,r);let n=this.type.match(yM);n?Uc(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Ur.fromObject({type:n[1],components:this.components}),baseType:"array"}):Uc(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Ht.sighash),Ht[e]||Ft.throwArgumentError("invalid format type","format",e),e===Ht.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Ht.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Ht.full?", ":",")+")"):r+=this.type,e!==Ht.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Ht.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Ur.fromString(e,r):Ur.fromObject(e)}static fromObject(e){return Ur.isParamType(e)?e:new Ur($o,{name:e.name||null,type:Aa(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Ur.fromObject):null})}static fromString(e,r){function n(i){return Ur.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(gM(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function mu(t,e){return vM(t).map(r=>Ur.fromString(r,e))}class Fi{constructor(e,r){e!==$o&&Ft.throwError("use a static from method",G.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Uc(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Fi.isFragment(e)?e:typeof e=="string"?Fi.fromString(e):Fi.fromObject(e)}static fromObject(e){if(Fi.isFragment(e))return e;switch(e.type){case"function":return _i.fromObject(e);case"event":return Ui.fromObject(e);case"constructor":return wi.fromObject(e);case"error":return ms.fromObject(e);case"fallback":case"receive":return null}return Ft.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Ui.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?_i.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?wi.fromString(e.trim()):e.split(" ")[0]==="error"?ms.fromString(e.substring(5).trim()):Ft.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Ui extends Fi{format(e){if(e||(e=Ht.sighash),Ht[e]||Ft.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ht.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ht.full?", ":",")+") ",e!==Ht.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Ui.fromString(e):Ui.fromObject(e)}static fromObject(e){if(Ui.isEventFragment(e))return e;e.type!=="event"&&Ft.throwArgumentError("invalid event object","value",e);const r={name:vu(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Ur.fromObject):[],type:"event"};return new Ui($o,r)}static fromString(e){let r=e.match(bu);r||Ft.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:Ft.warn("unknown modifier: "+i)}}),Ui.fromObject({name:r[1].trim(),anonymous:n,inputs:mu(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Bx(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&Ft.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||Ft.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=ge.from(r[1]),r[0]):t}function Ox(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Lx(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&Ft.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&Ft.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&Ft.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ft.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&Ft.throwArgumentError("unable to determine stateMutability","value",t),e}class wi extends Fi{format(e){if(e||(e=Ht.sighash),Ht[e]||Ft.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Ht.sighash&&Ft.throwError("cannot format a constructor for sighash",G.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Ht.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?wi.fromString(e):wi.fromObject(e)}static fromObject(e){if(wi.isConstructorFragment(e))return e;e.type!=="constructor"&&Ft.throwArgumentError("invalid constructor object","value",e);let r=Lx(e);r.constant&&Ft.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Ur.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?ge.from(e.gas):null};return new wi($o,n)}static fromString(e){let r={type:"constructor"};e=Bx(e,r);let n=e.match(bu);return(!n||n[1].trim()!=="constructor")&&Ft.throwArgumentError("invalid constructor string","value",e),r.inputs=mu(n[2].trim(),!1),Ox(n[3].trim(),r),wi.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class _i extends wi{format(e){if(e||(e=Ht.sighash),Ht[e]||Ft.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ht.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ht.full?", ":",")+") ",e!==Ht.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?_i.fromString(e):_i.fromObject(e)}static fromObject(e){if(_i.isFunctionFragment(e))return e;e.type!=="function"&&Ft.throwArgumentError("invalid function object","value",e);let r=Lx(e);const n={type:e.type,name:vu(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Ur.fromObject):[],outputs:e.outputs?e.outputs.map(Ur.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?ge.from(e.gas):null};return new _i($o,n)}static fromString(e){let r={type:"function"};e=Bx(e,r);let n=e.split(" returns ");n.length>2&&Ft.throwArgumentError("invalid function string","value",e);let i=n[0].match(bu);if(i||Ft.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&vu(r.name),r.inputs=mu(i[2],!1),Ox(i[3].trim(),r),n.length>1){let s=n[1].match(bu);(s[1].trim()!=""||s[3].trim()!="")&&Ft.throwArgumentError("unexpected tokens","value",e),r.outputs=mu(s[2],!1)}else r.outputs=[];return _i.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function m1(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ft.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class ms extends Fi{format(e){if(e||(e=Ht.sighash),Ht[e]||Ft.throwArgumentError("invalid format type","format",e),e===Ht.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ht.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ht.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?ms.fromString(e):ms.fromObject(e)}static fromObject(e){if(ms.isErrorFragment(e))return e;e.type!=="error"&&Ft.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:vu(e.name),inputs:e.inputs?e.inputs.map(Ur.fromObject):[]};return m1(new ms($o,r))}static fromString(e){let r={type:"error"},n=e.match(bu);return n||Ft.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&vu(r.name),r.inputs=mu(n[2],!1),m1(ms.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Aa(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const mM=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function vu(t){return(!t||!t.match(mM))&&Ft.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const bu=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function vM(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&Ft.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Up=new G(zu);function Dx(t){const e=[],r=function(n,i){if(!!Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(f){e.push({path:o,error:f})}}};return r([],t),e}class Is{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Up.throwArgumentError(e,this.localName,r)}}class pd{constructor(e){ie(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return bn(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(or(e._data))}writeBytes(e){let r=ye(e);const n=r.length%this.wordSize;return n&&(r=or([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ye(ge.from(e));return r.length>this.wordSize&&Up.throwError("value out-of-bounds",G.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=or([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class ol{constructor(e,r,n,i){ie(this,"_data",ye(e)),ie(this,"wordSize",r||32),ie(this,"_coerceFunc",n),ie(this,"allowLoose",i),this._offset=0}get data(){return Pe(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):ol.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Up.throwError("data out-of-bounds",G.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new ol(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return ge.from(this.readBytes(this.wordSize))}}function er(t){return"0x"+K_.keccak_256(ye(t))}const bM="rlp/5.7.0",Li=new G(bM);function v1(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function b1(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function Ux(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(Ux(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=v1(n.length);return i.unshift(247+i.length),i.concat(n)}qu(t)||Li.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ye(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=v1(e.length);return r.unshift(183+r.length),r.concat(e)}function jo(t){return Pe(Ux(t))}function x1(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Fx(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Li.throwError("child data too short",G.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Fx(t,e){if(t.length===0&&Li.throwError("data too short",G.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Li.throwError("data short segment too short",G.errors.BUFFER_OVERRUN,{});const n=b1(t,e+1,r);return e+1+r+n>t.length&&Li.throwError("data long segment too short",G.errors.BUFFER_OVERRUN,{}),x1(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Li.throwError("data array too short",G.errors.BUFFER_OVERRUN,{}),x1(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Li.throwError("data array too short",G.errors.BUFFER_OVERRUN,{});const n=b1(t,e+1,r);e+1+r+n>t.length&&Li.throwError("data array too short",G.errors.BUFFER_OVERRUN,{});const i=Pe(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Li.throwError("data too short",G.errors.BUFFER_OVERRUN,{});const n=Pe(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:Pe(t[e])}}function sh(t){const e=ye(t),r=Fx(e,0);return r.consumed!==e.length&&Li.throwArgumentError("invalid rlp data","data",t),r.result}var xM=Object.freeze(Object.defineProperty({__proto__:null,encode:jo,decode:sh},Symbol.toStringTag,{value:"Module"}));const wM="address/5.7.0",Ys=new G(wM);function w1(t){Tt(t,20)||Ys.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ye(er(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const _M=9007199254740991;function EM(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Fp={};for(let t=0;t<10;t++)Fp[String(t)]=String(t);for(let t=0;t<26;t++)Fp[String.fromCharCode(65+t)]=String(10+t);const _1=Math.floor(EM(_M));function $x(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Fp[n]).join("");for(;e.length>=_1;){let n=e.substring(0,_1);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Zt(t){let e=null;if(typeof t!="string"&&Ys.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=w1(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Ys.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==$x(t)&&Ys.throwArgumentError("bad icap checksum","address",t),e=aM(t.substring(4));e.length<40;)e="0"+e;e=w1("0x"+e)}else Ys.throwArgumentError("invalid address","address",t);return e}function AM(t){try{return Zt(t),!0}catch{}return!1}function SM(t){let e=fM(Zt(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+$x("XE00"+e)+e}function oh(t){let e=null;try{e=Zt(t.from)}catch{Ys.throwArgumentError("missing from address","transaction",t)}const r=Hi(ye(ge.from(t.nonce).toHexString()));return Zt(Pr(er(jo([e,r])),12))}function MM(t,e,r){return es(e)!==32&&Ys.throwArgumentError("salt must be 32 bytes","salt",e),es(r)!==32&&Ys.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Zt(Pr(er(or(["0xff",Zt(t),e,r])),12))}class TM extends Is{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Zt(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Zt(ar(e.readValue().toHexString(),20))}}class PM extends Is{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const ka=new G(zu);function jx(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let p={};n=e.map(b=>{const x=b.localName;return x||ka.throwError("cannot encode object for signature with missing names",G.errors.INVALID_ARGUMENT,{argument:"values",coder:b,value:r}),p[x]&&ka.throwError("cannot encode object for signature with duplicate names",G.errors.INVALID_ARGUMENT,{argument:"values",coder:b,value:r}),p[x]=!0,r[x]})}else ka.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ka.throwArgumentError("types/value length mismatch","tuple",r);let i=new pd(t.wordSize),s=new pd(t.wordSize),o=[];e.forEach((p,b)=>{let x=n[b];if(p.dynamic){let _=s.length;p.encode(s,x);let S=i.writeUpdatableValue();o.push(M=>{S(M+_)})}else p.encode(i,x)}),o.forEach(p=>{p(i.length)});let f=t.appendWriter(i);return f+=t.appendWriter(s),f}function qx(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let f=t.readValue(),p=n.subReader(f.toNumber());try{o=s.decode(p)}catch(b){if(b.code===G.errors.BUFFER_OVERRUN)throw b;o=b,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(f){if(f.code===G.errors.BUFFER_OVERRUN)throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const f=o.localName;return f&&(s[f]||(s[f]=0),s[f]++),s},{});e.forEach((s,o)=>{let f=s.localName;if(!f||i[f]!==1||(f==="length"&&(f="_length"),r[f]!=null))return;const p=r[o];p instanceof Error?Object.defineProperty(r,f,{enumerable:!0,get:()=>{throw p}}):r[f]=p});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class kM extends Is{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),ka.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return jx(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&ka.throwError("insufficient data length",G.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new PM(this.coder));return e.coerce(this.name,qx(e,n))}}class IM extends Is{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Kx extends Is{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ye(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class RM extends Kx{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Pe(super.decode(e)))}}class CM extends Is{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ye(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,Pe(e.readBytes(this.size)))}}class NM extends Is{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const zx="0x0000000000000000000000000000000000000000",Hx=ge.from(-1),$p=ge.from(0),Gx=ge.from(1),BM=ge.from(2),OM=ge.from("1000000000000000000"),Vx=ge.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),LM=ge.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),DM=ge.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jp="0x0000000000000000000000000000000000000000000000000000000000000000",UM="\u039E";var Wx=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:zx,NegativeOne:Hx,Zero:$p,One:Gx,Two:BM,WeiPerEther:OM,MaxUint256:Vx,MinInt256:LM,MaxInt256:DM,HashZero:jp,EtherSymbol:UM},Symbol.toStringTag,{value:"Module"}));class FM extends Is{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=ge.from(r),i=Vx.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Gx).mul(Hx)))&&this._throwError("value out-of-bounds",r)}else(n.lt($p)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const $M="strings/5.7.0",Jx=new G($M);var ts;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(ts||(ts={}));var Pn;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Pn||(Pn={}));function jM(t,e,r,n,i){return Jx.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Yx(t,e,r,n,i){if(t===Pn.BAD_PREFIX||t===Pn.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===Pn.OVERRUN?r.length-e-1:0}function qM(t,e,r,n,i){return t===Pn.OVERLONG?(n.push(i),0):(n.push(65533),Yx(t,e,r))}const Zx=Object.freeze({error:jM,ignore:Yx,replace:qM});function qp(t,e){e==null&&(e=Zx.error),t=ye(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(Pn.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Pn.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Pn.OVERRUN,n-1,t,r);continue}let f=i&(1<<8-s-1)-1;for(let p=0;p<s;p++){let b=t[n];if((b&192)!=128){n+=e(Pn.MISSING_CONTINUE,n,t,r),f=null;break}f=f<<6|b&63,n++}if(f!==null){if(f>1114111){n+=e(Pn.OUT_OF_RANGE,n-1-s,t,r,f);continue}if(f>=55296&&f<=57343){n+=e(Pn.UTF16_SURROGATE,n-1-s,t,r,f);continue}if(f<=o){n+=e(Pn.OVERLONG,n-1-s,t,r,f);continue}r.push(f)}}return r}function Ir(t,e=ts.current){e!=ts.current&&(Jx.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ye(r)}function d0(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function KM(t,e){return'"'+qp(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?d0(r):(r-=65536,d0((r>>10&1023)+55296)+d0((r&1023)+56320))}).join("")+'"'}function gd(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ta(t,e){return gd(qp(t,e))}function al(t,e=ts.current){return qp(Ir(t,e))}function zM(t){const e=Ir(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Pe(or([e,jp]).slice(0,32))}function HM(t){const e=ye(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return ta(e.slice(0,r))}function GM(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Kp(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function Xx(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function zp(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const VM=Xx("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),WM="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),JM=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],YM=Kp("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ZM=Kp("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),XM=Kp("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",GM),QM=Xx("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function e7(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function t7(t){return!!zp(t,VM)}function r7(t){let e=zp(t,JM);if(e)return[t+e.s];let r=YM[t];if(r)return r;let n=ZM[t];if(n)return[t+n[0]];let i=XM[t];return i||null}function n7(t){return!!zp(t,QM)}function i7(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=al(t);e=e7(e.map(n=>{if(WM.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=r7(n);return i||[n]})),e=al(gd(e),ts.NFKC),e.forEach(n=>{if(n7(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(t7(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=gd(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}class s7 extends Kx{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Ir(r))}decode(e){return ta(super.decode(e))}}class hc extends Is{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return jx(e,this.coders,r)}decode(e){return e.coerce(this.name,qx(e,this.coders))}}const dc=new G(zu),o7=new RegExp(/^bytes([0-9]*)$/),a7=new RegExp(/^(u?int)([0-9]*)$/);class Qx{constructor(e){ie(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new TM(e.name);case"bool":return new IM(e.name);case"string":return new s7(e.name);case"bytes":return new RM(e.name);case"array":return new kM(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new hc((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new NM(e.name)}let r=e.type.match(a7);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&dc.throwArgumentError("invalid "+r[1]+" bit length","param",e),new FM(n/8,r[1]==="int",e.name)}if(r=e.type.match(o7),r){let n=parseInt(r[1]);return(n===0||n>32)&&dc.throwArgumentError("invalid bytes length","param",e),new CM(n,e.name)}return dc.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new ol(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new pd(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(Ur.from(i)));return new hc(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&dc.throwError("types/values length mismatch",G.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(Ur.from(o))),i=new hc(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(Ur.from(o)));return new hc(i,"_").decode(this._getReader(ye(r),n))}}const ew=new Qx;function Zs(t){return er(Ir(t))}const tw="hash/5.7.0";function Hp(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return ye(e)}function Gp(t){t=ye(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var f7=Object.freeze(Object.defineProperty({__proto__:null,decode:Hp,encode:Gp},Symbol.toStringTag,{value:"Module"}));function rw(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(f){o>0&&Array.isArray(f)?i(f,o-1):r.push(f)})};return i(t,e),r}function u7(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function c7(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let F=1;F<n;F++)s.push(i+=r());let o=r(),f=e;e+=o;let p=0,b=0;function x(){return p==0&&(b=b<<8|t[e++],p=8),b>>--p&1}const _=31,S=Math.pow(2,_),M=S>>>1,N=M>>1,k=S-1;let I=0;for(let F=0;F<_;F++)I=I<<1|x();let C=[],D=0,$=S;for(;;){let F=Math.floor(((I-D+1)*i-1)/$),z=0,Z=n;for(;Z-z>1;){let pe=z+Z>>>1;F<s[pe]?Z=pe:z=pe}if(z==0)break;C.push(z);let te=D+Math.floor($*s[z]/i),ee=D+Math.floor($*s[z+1]/i)-1;for(;((te^ee)&M)==0;)I=I<<1&k|x(),te=te<<1&k,ee=ee<<1&k|1;for(;te&~ee&N;)I=I&M|I<<1&k>>>1|x(),te=te<<1^M,ee=(ee^M)<<1|M|1;D=te,$=1+ee-te}let j=n-4;return C.map(F=>{switch(F-j){case 3:return j+65792+(t[f++]<<16|t[f++]<<8|t[f++]);case 2:return j+256+(t[f++]<<8|t[f++]);case 1:return j+t[f++];default:return F-1}})}function l7(t){let e=0;return()=>t[e++]}function h7(t){return l7(c7(t))}function d7(t){return t&1?~t>>1:t>>1}function p7(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function E1(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function g7(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=d7(e());return r}function fl(t,e){let r=E1(t(),t),n=t(),i=E1(n,t),s=p7(n,t);for(let o=0;o<n;o++)for(let f=0;f<s[o];f++)r.push(i[o]+f);return e?r.map(o=>e[o]):r}function y7(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(v7(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(b7(r,t))}return u7(rw(e))}function m7(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function nw(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)g7(t,r).forEach((s,o)=>n[o].push(s));return n}function v7(t,e){let r=1+e(),n=e(),i=m7(e),s=nw(i.length,1+t,e);return rw(s.map((o,f)=>{const p=o[0],b=o.slice(1);return Array(i[f]).fill(void 0).map((x,_)=>{let S=_*n;return[p+_*r,b.map(M=>M+S)]})}))}function b7(t,e){let r=1+e();return nw(r,1+t,e).map(i=>[i[0],i.slice(1)])}function x7(t){let e=fl(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let b=fl(t,e);if(b.length==0)break;n.push({set:new Set(b),node:r()})}n.sort((b,x)=>x.set.size-b.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let f=i==1,p=i==2;return{branches:n,valid:s,fe0f:o,save:f,check:p}}}function w7(){return h7(Hp("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const ah=w7(),_7=new Set(fl(ah)),E7=new Set(fl(ah)),A7=y7(ah),S7=x7(ah),A1=45,S1=95;function iw(t){return al(t)}function M7(t){return t.filter(e=>e!=65039)}function sw(t){for(let e of t.split(".")){let r=iw(e);try{for(let n=r.lastIndexOf(S1)-1;n>=0;n--)if(r[n]!==S1)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===A1&&r[3]===A1)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function T7(t){return sw(P7(t,M7))}function P7(t,e){let r=iw(t).reverse(),n=[];for(;r.length;){let i=I7(r);if(i){n.push(...e(i));continue}let s=r.pop();if(_7.has(s)){n.push(s);continue}if(E7.has(s))continue;let o=A7[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return sw(k7(String.fromCodePoint(...n)))}function k7(t){return t.normalize("NFC")}function I7(t,e){var r;let n=S7,i,s,o=[],f=t.length;for(e&&(e.length=0);f;){let p=t[--f];if(n=(r=n.branches.find(b=>b.set.has(p)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=p;else if(n.check&&p===s)break;o.push(p),n.fe0f&&(o.push(65039),f>0&&t[f-1]==65039&&f--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(f).reverse()),t.length=f)}return i}const R7=new G(tw),ow=new Uint8Array(32);ow.fill(0);function M1(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function Vp(t){const e=Ir(T7(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(M1(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(M1(e.slice(n))),r}function C7(t){try{return Vp(t).length!==0}catch{}return!1}function nu(t){typeof t!="string"&&R7.throwArgumentError("invalid ENS name; not a string","name",t);let e=ow;const r=Vp(t);for(;r.length;)e=er(or([e,er(r.pop())]));return Pe(e)}function aw(t){return Pe(or(Vp(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const N7=`Ethereum Signed Message:
`;function Wp(t){return typeof t=="string"&&(t=Ir(t)),er(or([Ir(N7),Ir(String(t.length)),t]))}var B7=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const lr=new G(tw),fw=new Uint8Array(32);fw.fill(0);const O7=ge.from(-1),uw=ge.from(0),cw=ge.from(1),L7=ge.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function D7(t){const e=ye(t),r=e.length%32;return r?bn([e,fw.slice(r)]):Pe(e)}const U7=ar(cw.toHexString(),32),F7=ar(uw.toHexString(),32),T1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},p0=["name","version","chainId","verifyingContract","salt"];function P1(t){return function(e){return typeof e!="string"&&lr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const $7={name:P1("name"),version:P1("version"),chainId:function(t){try{return ge.from(t).toString()}catch{}return lr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Zt(t).toLowerCase()}catch{}return lr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ye(t);if(e.length!==32)throw new Error("bad length");return Pe(e)}catch{}return lr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function g0(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&lr.throwArgumentError("invalid numeric width","type",t);const i=L7.mask(r?n-1:n),s=r?i.add(cw).mul(O7):uw;return function(o){const f=ge.from(o);return(f.lt(s)||f.gt(i))&&lr.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),ar(f.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&lr.throwArgumentError("invalid bytes width","type",t),function(n){return ye(n).length!==r&&lr.throwArgumentError(`invalid length for ${t}`,"value",n),D7(n)}}}switch(t){case"address":return function(e){return ar(Zt(e),32)};case"bool":return function(e){return e?U7:F7};case"bytes":return function(e){return er(e)};case"string":return function(e){return Zs(e)}}return null}function k1(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Wr{constructor(e){ie(this,"types",Object.freeze(_n(e))),ie(this,"_encoderCache",{}),ie(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(f=>{r[f]={},n[f]=[],i[f]={}});for(const f in e){const p={};e[f].forEach(b=>{p[b.name]&&lr.throwArgumentError(`duplicate variable name ${JSON.stringify(b.name)} in ${JSON.stringify(f)}`,"types",e),p[b.name]=!0;const x=b.type.match(/^([^\x5b]*)(\x5b|$)/)[1];x===f&&lr.throwArgumentError(`circular type reference to ${JSON.stringify(x)}`,"types",e),!g0(x)&&(n[x]||lr.throwArgumentError(`unknown type ${JSON.stringify(x)}`,"types",e),n[x].push(f),r[f][x]=!0)})}const s=Object.keys(n).filter(f=>n[f].length===0);s.length===0?lr.throwArgumentError("missing primary type","types",e):s.length>1&&lr.throwArgumentError(`ambiguous primary types or unused types: ${s.map(f=>JSON.stringify(f)).join(", ")}`,"types",e),ie(this,"primaryType",s[0]);function o(f,p){p[f]&&lr.throwArgumentError(`circular type reference to ${JSON.stringify(f)}`,"types",e),p[f]=!0,Object.keys(r[f]).forEach(b=>{!n[b]||(o(b,p),Object.keys(p).forEach(x=>{i[x][b]=!0}))}),delete p[f]}o(this.primaryType,{});for(const f in i){const p=Object.keys(i[f]);p.sort(),this._types[f]=k1(f,e[f])+p.map(b=>k1(b,e[b])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=g0(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return f=>{o>=0&&f.length!==o&&lr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",f);let p=f.map(s);return this._types[i]&&(p=p.map(er)),er(bn(p))}}const n=this.types[e];if(n){const i=Zs(this._types[e]);return s=>{const o=n.map(({name:f,type:p})=>{const b=this.getEncoder(p)(s[f]);return this._types[p]?er(b):b});return o.unshift(i),bn(o)}}return lr.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||lr.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return er(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(g0(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],f=parseInt(i[3]);return f>=0&&r.length!==f&&lr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(p=>this._visit(o,p,n))}const s=this.types[e];return s?s.reduce((o,{name:f,type:p})=>(o[f]=this._visit(p,r[f],n),o),{}):lr.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Wr(e)}static getPrimaryType(e){return Wr.from(e).primaryType}static hashStruct(e,r,n){return Wr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=T1[n];i||lr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>p0.indexOf(n.name)-p0.indexOf(i.name)),Wr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return bn(["0x1901",Wr.hashDomain(e),Wr.from(r).hash(n)])}static hash(e,r,n){return er(Wr.encode(e,r,n))}static resolveNames(e,r,n,i){return B7(this,void 0,void 0,function*(){e=fr(e);const s={};e.verifyingContract&&!Tt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Wr.from(r);o.visit(n,(f,p)=>(f==="address"&&!Tt(p,20)&&(s[p]="0x"),p));for(const f in s)s[f]=yield i(f);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(f,p)=>f==="address"&&s[p]?s[p]:p),{domain:e,value:n}})}static getPayload(e,r,n){Wr.hashDomain(e);const i={},s=[];p0.forEach(p=>{const b=e[p];b!=null&&(i[p]=$7[p](b),s.push({name:p,type:T1[p]}))});const o=Wr.from(r),f=fr(r);return f.EIP712Domain?lr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):f.EIP712Domain=s,o.encode(n),{types:f,domain:i,primaryType:o.primaryType,message:o.visit(n,(p,b)=>{if(p.match(/^bytes(\d*)/))return Pe(ye(b));if(p.match(/^u?int/))return ge.from(b).toString();switch(p){case"address":return b.toLowerCase();case"bool":return!!b;case"string":return typeof b!="string"&&lr.throwArgumentError("invalid string","value",b),b}return lr.throwArgumentError("unsupported type","type",p)})}}}const cr=new G(zu);class lw extends ea{}class hw extends ea{}class j7 extends ea{}class ul extends ea{static isIndexed(e){return!!(e&&e._isIndexed)}}const q7={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function I1(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class yd{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,ie(this,"fragments",r.map(n=>Fi.from(n)).filter(n=>n!=null)),ie(this,"_abiCoder",Zr(new.target,"getAbiCoder")()),ie(this,"functions",{}),ie(this,"errors",{}),ie(this,"events",{}),ie(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){cr.warn("duplicate definition - constructor");return}ie(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){cr.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||ie(this,"deploy",wi.from({payable:!1,type:"constructor"})),ie(this,"_isInterface",!0)}format(e){e||(e=Ht.full),e===Ht.sighash&&cr.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Ht.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return ew}static getAddress(e){return Zt(e)}static getSighash(e){return Pr(Zs(e.format()),0,4)}static getEventTopic(e){return Zs(e.format())}getFunction(e){if(Tt(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];cr.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?cr.throwArgumentError("no matching function","name",n):i.length>1&&cr.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[_i.fromString(e).format()];return r||cr.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Tt(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];cr.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?cr.throwArgumentError("no matching event","name",n):i.length>1&&cr.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Ui.fromString(e).format()];return r||cr.throwArgumentError("no matching event","signature",e),r}getError(e){if(Tt(e)){const n=Zr(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}cr.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?cr.throwArgumentError("no matching error","name",n):i.length>1&&cr.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[_i.fromString(e).format()];return r||cr.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Zr(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Zr(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ye(r);return Pe(n.slice(0,4))!==this.getSighash(e)&&cr.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Pe(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),Pe(or([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ye(r);return Pe(n.slice(0,4))!==this.getSighash(e)&&cr.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Pe(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),Pe(or([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ye(r),i=null,s="",o=null,f=null,p=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const b=Pe(n.slice(0,4)),x=q7[b];if(x)o=this._abiCoder.decode(x.inputs,n.slice(4)),f=x.name,p=x.signature,x.reason&&(i=o[0]),f==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:f==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const _=this.getError(b);o=this._abiCoder.decode(_.inputs,n.slice(4)),f=_.name,p=_.format()}catch{}break}}return cr.throwError("call revert exception"+s,G.errors.CALL_EXCEPTION,{method:e.format(),data:Pe(r),errorArgs:o,errorName:f,errorSignature:p,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),Pe(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&cr.throwError("too many arguments for "+e.format(),G.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Zs(o):s.type==="bytes"?er(Pe(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=ge.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),ar(Pe(o),32));for(r.forEach((s,o)=>{let f=e.inputs[o];if(!f.indexed){s!=null&&cr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+f.name,s);return}s==null?n.push(null):f.baseType==="array"||f.baseType==="tuple"?cr.throwArgumentError("filtering with tuples or arrays not supported","contract."+f.name,s):Array.isArray(s)?n.push(s.map(p=>i(f,p))):n.push(i(f,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&cr.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,f)=>{const p=r[f];if(o.indexed)if(o.type==="string")n.push(Zs(p));else if(o.type==="bytes")n.push(er(p));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[p]))}else i.push(o),s.push(p)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let S=this.getEventTopic(e);(!Tt(n[0],32)||n[0].toLowerCase()!==S)&&cr.throwError("fragment/topic mismatch",G.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:S,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((S,M)=>{S.indexed?S.type==="string"||S.type==="bytes"||S.baseType==="tuple"||S.baseType==="array"?(i.push(Ur.fromObject({type:"bytes32",name:S.name})),o.push(!0)):(i.push(S),o.push(!1)):(s.push(S),o.push(!1))});let f=n!=null?this._abiCoder.decode(i,or(n)):null,p=this._abiCoder.decode(s,r,!0),b=[],x=0,_=0;e.inputs.forEach((S,M)=>{if(S.indexed)if(f==null)b[M]=new ul({_isIndexed:!0,hash:null});else if(o[M])b[M]=new ul({_isIndexed:!0,hash:f[_++]});else try{b[M]=f[_++]}catch(N){b[M]=N}else try{b[M]=p[x++]}catch(N){b[M]=N}if(S.name&&b[S.name]==null){const N=b[M];N instanceof Error?Object.defineProperty(b,S.name,{enumerable:!0,get:()=>{throw I1(`property ${JSON.stringify(S.name)}`,N)}}):b[S.name]=N}});for(let S=0;S<b.length;S++){const M=b[S];M instanceof Error&&Object.defineProperty(b,S,{enumerable:!0,get:()=>{throw I1(`index ${S}`,M)}})}return Object.freeze(b)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new hw({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:ge.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new lw({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=Pe(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new j7({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const K7="abstract-provider/5.7.0";var z7=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const H7=new G(K7);class G7 extends ea{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class ra{constructor(){H7.checkAbstract(new.target,ra),ie(this,"_isProvider",!0)}getFeeData(){return z7(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield br({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=ge.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const V7="abstract-signer/5.7.0";var vi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Qn=new G(V7),W7=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],J7=[G.errors.INSUFFICIENT_FUNDS,G.errors.NONCE_EXPIRED,G.errors.REPLACEMENT_UNDERPRICED];class Rs{constructor(){Qn.checkAbstract(new.target,Rs),ie(this,"_isSigner",!0)}getBalance(e){return vi(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return vi(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return vi(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield br(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return vi(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield br(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return vi(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return vi(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return vi(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return vi(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return vi(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)W7.indexOf(n)===-1&&Qn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=fr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Qn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return vi(this,void 0,void 0,function*(){const r=yield br(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>vi(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Qn.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Qn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Qn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Qn.throwError("network does not support EIP-1559",G.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Qn.throwError("failed to get consistent fee data",G.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(J7.indexOf(i.code)>=0)throw i;return Qn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",G.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Qn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield br(r)})}_checkProvider(e){this.provider||Qn.throwError("missing provider",G.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Hu extends Rs{constructor(e,r){super(),ie(this,"address",e),ie(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Qn.throwError(e,G.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Hu(this.address,e)}}function Ef(t,e,r){return r={path:e,exports:{},require:function(n,i){return Y7(n,i??r.path)}},t(r,r.exports),r.exports}function Y7(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Jp=dw;function dw(t,e){if(!t)throw new Error(e||"Assertion failed")}dw.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ai=Ef(function(t,e){var r=e;function n(o,f){if(Array.isArray(o))return o.slice();if(!o)return[];var p=[];if(typeof o!="string"){for(var b=0;b<o.length;b++)p[b]=o[b]|0;return p}if(f==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var b=0;b<o.length;b+=2)p.push(parseInt(o[b]+o[b+1],16))}else for(var b=0;b<o.length;b++){var x=o.charCodeAt(b),_=x>>8,S=x&255;_?p.push(_,S):p.push(S)}return p}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var f="",p=0;p<o.length;p++)f+=i(o[p].toString(16));return f}r.toHex=s,r.encode=function(f,p){return p==="hex"?s(f):f}}),Gn=Ef(function(t,e){var r=e;r.assert=Jp,r.toArray=Ai.toArray,r.zero2=Ai.zero2,r.toHex=Ai.toHex,r.encode=Ai.encode;function n(p,b,x){var _=new Array(Math.max(p.bitLength(),x)+1);_.fill(0);for(var S=1<<b+1,M=p.clone(),N=0;N<_.length;N++){var k,I=M.andln(S-1);M.isOdd()?(I>(S>>1)-1?k=(S>>1)-I:k=I,M.isubn(k)):k=0,_[N]=k,M.iushrn(1)}return _}r.getNAF=n;function i(p,b){var x=[[],[]];p=p.clone(),b=b.clone();for(var _=0,S=0,M;p.cmpn(-_)>0||b.cmpn(-S)>0;){var N=p.andln(3)+_&3,k=b.andln(3)+S&3;N===3&&(N=-1),k===3&&(k=-1);var I;(N&1)===0?I=0:(M=p.andln(7)+_&7,(M===3||M===5)&&k===2?I=-N:I=N),x[0].push(I);var C;(k&1)===0?C=0:(M=b.andln(7)+S&7,(M===3||M===5)&&N===2?C=-k:C=k),x[1].push(C),2*_===I+1&&(_=1-_),2*S===C+1&&(S=1-S),p.iushrn(1),b.iushrn(1)}return x}r.getJSF=i;function s(p,b,x){var _="_"+b;p.prototype[b]=function(){return this[_]!==void 0?this[_]:this[_]=x.call(this)}}r.cachedProperty=s;function o(p){return typeof p=="string"?r.toArray(p,"hex"):p}r.parseBytes=o;function f(p){return new At(p,"hex","le")}r.intFromLE=f}),cl=Gn.getNAF,Z7=Gn.getJSF,ll=Gn.assert;function vo(t,e){this.type=t,this.p=new At(e.p,16),this.red=e.prime?At.red(e.prime):At.mont(this.p),this.zero=new At(0).toRed(this.red),this.one=new At(1).toRed(this.red),this.two=new At(2).toRed(this.red),this.n=e.n&&new At(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var na=vo;vo.prototype.point=function(){throw new Error("Not implemented")};vo.prototype.validate=function(){throw new Error("Not implemented")};vo.prototype._fixedNafMul=function(e,r){ll(e.precomputed);var n=e._getDoubles(),i=cl(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],f,p;for(f=0;f<i.length;f+=n.step){p=0;for(var b=f+n.step-1;b>=f;b--)p=(p<<1)+i[b];o.push(p)}for(var x=this.jpoint(null,null,null),_=this.jpoint(null,null,null),S=s;S>0;S--){for(f=0;f<o.length;f++)p=o[f],p===S?_=_.mixedAdd(n.points[f]):p===-S&&(_=_.mixedAdd(n.points[f].neg()));x=x.add(_)}return x.toP()};vo.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=cl(r,n,this._bitLength),f=this.jpoint(null,null,null),p=o.length-1;p>=0;p--){for(var b=0;p>=0&&o[p]===0;p--)b++;if(p>=0&&b++,f=f.dblp(b),p<0)break;var x=o[p];ll(x!==0),e.type==="affine"?x>0?f=f.mixedAdd(s[x-1>>1]):f=f.mixedAdd(s[-x-1>>1].neg()):x>0?f=f.add(s[x-1>>1]):f=f.add(s[-x-1>>1].neg())}return e.type==="affine"?f.toP():f};vo.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,f=this._wnafT2,p=this._wnafT3,b=0,x,_,S;for(x=0;x<i;x++){S=r[x];var M=S._getNAFPoints(e);o[x]=M.wnd,f[x]=M.points}for(x=i-1;x>=1;x-=2){var N=x-1,k=x;if(o[N]!==1||o[k]!==1){p[N]=cl(n[N],o[N],this._bitLength),p[k]=cl(n[k],o[k],this._bitLength),b=Math.max(p[N].length,b),b=Math.max(p[k].length,b);continue}var I=[r[N],null,null,r[k]];r[N].y.cmp(r[k].y)===0?(I[1]=r[N].add(r[k]),I[2]=r[N].toJ().mixedAdd(r[k].neg())):r[N].y.cmp(r[k].y.redNeg())===0?(I[1]=r[N].toJ().mixedAdd(r[k]),I[2]=r[N].add(r[k].neg())):(I[1]=r[N].toJ().mixedAdd(r[k]),I[2]=r[N].toJ().mixedAdd(r[k].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],D=Z7(n[N],n[k]);for(b=Math.max(D[0].length,b),p[N]=new Array(b),p[k]=new Array(b),_=0;_<b;_++){var $=D[0][_]|0,j=D[1][_]|0;p[N][_]=C[($+1)*3+(j+1)],p[k][_]=0,f[N]=I}}var F=this.jpoint(null,null,null),z=this._wnafT4;for(x=b;x>=0;x--){for(var Z=0;x>=0;){var te=!0;for(_=0;_<i;_++)z[_]=p[_][x]|0,z[_]!==0&&(te=!1);if(!te)break;Z++,x--}if(x>=0&&Z++,F=F.dblp(Z),x<0)break;for(_=0;_<i;_++){var ee=z[_];ee!==0&&(ee>0?S=f[_][ee-1>>1]:ee<0&&(S=f[_][-ee-1>>1].neg()),S.type==="affine"?F=F.mixedAdd(S):F=F.add(S))}}for(x=0;x<i;x++)f[x]=null;return s?F:F.toP()};function hi(t,e){this.curve=t,this.type=e,this.precomputed=null}vo.BasePoint=hi;hi.prototype.eq=function(){throw new Error("Not implemented")};hi.prototype.validate=function(){return this.curve.validate(this)};vo.prototype.decodePoint=function(e,r){e=Gn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?ll(e[e.length-1]%2===0):e[0]===7&&ll(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};hi.prototype.encodeCompressed=function(e){return this.encode(e,!0)};hi.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};hi.prototype.encode=function(e,r){return Gn.encode(this._encode(r),e)};hi.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};hi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};hi.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};hi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};hi.prototype._getBeta=function(){return null};hi.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Yp=Ef(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),X7=Gn.assert;function di(t){na.call(this,"short",t),this.a=new At(t.a,16).toRed(this.red),this.b=new At(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Yp(di,na);var Q7=di;di.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new At(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new At(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],X7(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new At(f.a,16),b:new At(f.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};di.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:At.mont(e),n=new At(2).toRed(r).redInvm(),i=n.redNeg(),s=new At(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),f=i.redSub(s).fromRed();return[o,f]};di.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new At(1),o=new At(0),f=new At(0),p=new At(1),b,x,_,S,M,N,k,I=0,C,D;n.cmpn(0)!==0;){var $=i.div(n);C=i.sub($.mul(n)),D=f.sub($.mul(s));var j=p.sub($.mul(o));if(!_&&C.cmp(r)<0)b=k.neg(),x=s,_=C.neg(),S=D;else if(_&&++I===2)break;k=C,i=n,n=C,f=s,s=D,p=o,o=j}M=C.neg(),N=D;var F=_.sqr().add(S.sqr()),z=M.sqr().add(N.sqr());return z.cmp(F)>=0&&(M=b,N=x),_.negative&&(_=_.neg(),S=S.neg()),M.negative&&(M=M.neg(),N=N.neg()),[{a:_,b:S},{a:M,b:N}]};di.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),f=s.mul(n.a),p=o.mul(i.a),b=s.mul(n.b),x=o.mul(i.b),_=e.sub(f).sub(p),S=b.add(x).neg();return{k1:_,k2:S}};di.prototype.pointFromX=function(e,r){e=new At(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};di.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};di.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(r[o]),p=e[o],b=p._getBeta();f.k1.negative&&(f.k1.ineg(),p=p.neg(!0)),f.k2.negative&&(f.k2.ineg(),b=b.neg(!0)),i[o*2]=p,i[o*2+1]=b,s[o*2]=f.k1,s[o*2+1]=f.k2}for(var x=this._wnafMulAdd(1,i,s,o*2,n),_=0;_<o*2;_++)i[_]=null,s[_]=null;return x};function Gr(t,e,r,n){na.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new At(e,16),this.y=new At(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Yp(Gr,na.BasePoint);di.prototype.point=function(e,r,n){return new Gr(this,e,r,n)};di.prototype.pointFromJSON=function(e,r){return Gr.fromJSON(this,e,r)};Gr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Gr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Gr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(f){return e.point(f[0],f[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Gr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Gr.prototype.isInfinity=function(){return this.inf};Gr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Gr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)};Gr.prototype.getX=function(){return this.x.fromRed()};Gr.prototype.getY=function(){return this.y.fromRed()};Gr.prototype.mul=function(e){return e=new At(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Gr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Gr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Gr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Gr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Gr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function nn(t,e,r,n){na.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new At(0)):(this.x=new At(e,16),this.y=new At(r,16),this.z=new At(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Yp(nn,na.BasePoint);di.prototype.jpoint=function(e,r,n){return new nn(this,e,r,n)};nn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};nn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};nn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),f=e.y.redMul(n.redMul(this.z)),p=i.redSub(s),b=o.redSub(f);if(p.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var x=p.redSqr(),_=x.redMul(p),S=i.redMul(x),M=b.redSqr().redIAdd(_).redISub(S).redISub(S),N=b.redMul(S.redISub(M)).redISub(o.redMul(_)),k=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(M,N,k)};nn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),f=n.redSub(i),p=s.redSub(o);if(f.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=f.redSqr(),x=b.redMul(f),_=n.redMul(b),S=p.redSqr().redIAdd(x).redISub(_).redISub(_),M=p.redMul(_.redISub(S)).redISub(s.redMul(x)),N=this.z.redMul(f);return this.curve.jpoint(S,M,N)};nn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,f=this.y,p=this.z,b=p.redSqr().redSqr(),x=f.redAdd(f);for(r=0;r<e;r++){var _=o.redSqr(),S=x.redSqr(),M=S.redSqr(),N=_.redAdd(_).redIAdd(_).redIAdd(i.redMul(b)),k=o.redMul(S),I=N.redSqr().redISub(k.redAdd(k)),C=k.redISub(I),D=N.redMul(C);D=D.redIAdd(D).redISub(M);var $=x.redMul(p);r+1<e&&(b=b.redMul(M)),o=I,p=$,x=D}return this.curve.jpoint(o,x.redMul(s),p)};nn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};nn.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i),b=p.redSqr().redISub(f).redISub(f),x=o.redIAdd(o);x=x.redIAdd(x),x=x.redIAdd(x),e=b,r=p.redMul(f.redISub(b)).redISub(x),n=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),S=this.y.redSqr(),M=S.redSqr(),N=this.x.redAdd(S).redSqr().redISub(_).redISub(M);N=N.redIAdd(N);var k=_.redAdd(_).redIAdd(_),I=k.redSqr(),C=M.redIAdd(M);C=C.redIAdd(C),C=C.redIAdd(C),e=I.redISub(N).redISub(N),r=k.redMul(N.redISub(e)).redISub(C),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};nn.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),b=p.redSqr().redISub(f).redISub(f);e=b;var x=o.redIAdd(o);x=x.redIAdd(x),x=x.redIAdd(x),r=p.redMul(f.redISub(b)).redISub(x),n=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),S=this.y.redSqr(),M=this.x.redMul(S),N=this.x.redSub(_).redMul(this.x.redAdd(_));N=N.redAdd(N).redIAdd(N);var k=M.redIAdd(M);k=k.redIAdd(k);var I=k.redAdd(k);e=N.redSqr().redISub(I),n=this.y.redAdd(this.z).redSqr().redISub(S).redISub(_);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=N.redMul(k.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,n)};nn.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),f=n.redSqr(),p=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),b=r.redAdd(r);b=b.redIAdd(b);var x=b.redMul(f),_=p.redSqr().redISub(x.redAdd(x)),S=x.redISub(_),M=f.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var N=p.redMul(S).redISub(M),k=n.redAdd(n).redMul(i);return this.curve.jpoint(_,N,k)};nn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var p=f.redSqr(),b=i.redIAdd(i);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var x=s.redIAdd(f).redSqr().redISub(o).redISub(p).redISub(b),_=r.redMul(x);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.x.redMul(p).redISub(_);S=S.redIAdd(S),S=S.redIAdd(S);var M=this.y.redMul(x.redMul(b.redISub(x)).redISub(f.redMul(p)));M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var N=this.z.redAdd(f).redSqr().redISub(n).redISub(p);return this.curve.jpoint(S,M,N)};nn.prototype.mul=function(e,r){return e=new At(e,r),this.curve._wnafMul(this,e)};nn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};nn.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};nn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};nn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Fc=Ef(function(t,e){var r=e;r.base=na,r.short=Q7,r.mont=null,r.edwards=null}),$c=Ef(function(t,e){var r=e,n=Gn.assert;function i(f){f.type==="short"?this.curve=new Fc.short(f):f.type==="edwards"?this.curve=new Fc.edwards(f):this.curve=new Fc.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(f,p){Object.defineProperty(r,f,{configurable:!0,enumerable:!0,get:function(){var b=new i(p);return Object.defineProperty(r,f,{configurable:!0,enumerable:!0,value:b}),b}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:$r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:$r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:$r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:$r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:$r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$r.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:$r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function no(t){if(!(this instanceof no))return new no(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ai.toArray(t.entropy,t.entropyEnc||"hex"),r=Ai.toArray(t.nonce,t.nonceEnc||"hex"),n=Ai.toArray(t.pers,t.persEnc||"hex");Jp(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var pw=no;no.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};no.prototype._hmac=function(){return new $r.hmac(this.hash,this.K)};no.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};no.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Ai.toArray(e,r),n=Ai.toArray(n,i),Jp(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};no.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Ai.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Ai.encode(o,r)};var md=Gn.assert;function yn(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Zp=yn;yn.fromPublic=function(e,r,n){return r instanceof yn?r:new yn(e,{pub:r,pubEnc:n})};yn.fromPrivate=function(e,r,n){return r instanceof yn?r:new yn(e,{priv:r,privEnc:n})};yn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};yn.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};yn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};yn.prototype._importPrivate=function(e,r){this.priv=new At(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};yn.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?md(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&md(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};yn.prototype.derive=function(e){return e.validate()||md(e.validate(),"public point not validated"),e.mul(this.priv).getX()};yn.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};yn.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};yn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var e9=Gn.assert;function fh(t,e){if(t instanceof fh)return t;this._importDER(t,e)||(e9(t.r&&t.s,"Signature without r or s"),this.r=new At(t.r,16),this.s=new At(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var uh=fh;function t9(){this.place=0}function y0(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function R1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}fh.prototype._importDER=function(e,r){e=Gn.toArray(e,r);var n=new t9;if(e[n.place++]!==48)return!1;var i=y0(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=y0(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var f=y0(e,n);if(f===!1||e.length!==f+n.place)return!1;var p=e.slice(n.place,f+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new At(o),this.s=new At(p),this.recoveryParam=null,!0};function m0(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}fh.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=R1(r),n=R1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];m0(i,r.length),i=i.concat(r),i.push(2),m0(i,n.length);var s=i.concat(n),o=[48];return m0(o,s.length),o=o.concat(s),Gn.encode(o,e)};var r9=function(){throw new Error("unsupported")},gw=Gn.assert;function oi(t){if(!(this instanceof oi))return new oi(t);typeof t=="string"&&(gw(Object.prototype.hasOwnProperty.call($c,t),"Unknown curve "+t),t=$c[t]),t instanceof $c.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var n9=oi;oi.prototype.keyPair=function(e){return new Zp(this,e)};oi.prototype.keyFromPrivate=function(e,r){return Zp.fromPrivate(this,e,r)};oi.prototype.keyFromPublic=function(e,r){return Zp.fromPublic(this,e,r)};oi.prototype.genKeyPair=function(e){e||(e={});for(var r=new pw({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||r9(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new At(2));;){var s=new At(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};oi.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};oi.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new At(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),f=e.toArray("be",s),p=new pw({hash:this.hash,entropy:o,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),b=this.n.sub(new At(1)),x=0;;x++){var _=i.k?i.k(x):new At(p.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(b)>=0)){var S=this.g.mul(_);if(!S.isInfinity()){var M=S.getX(),N=M.umod(this.n);if(N.cmpn(0)!==0){var k=_.invm(this.n).mul(N.mul(r.getPrivate()).iadd(e));if(k=k.umod(this.n),k.cmpn(0)!==0){var I=(S.getY().isOdd()?1:0)|(M.cmp(N)!==0?2:0);return i.canonical&&k.cmp(this.nh)>0&&(k=this.n.sub(k),I^=1),new uh({r:N,s:k,recoveryParam:I})}}}}}};oi.prototype.verify=function(e,r,n,i){e=this._truncateToN(new At(e,16)),n=this.keyFromPublic(n,i),r=new uh(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),p=f.mul(e).umod(this.n),b=f.mul(s).umod(this.n),x;return this.curve._maxwellTrick?(x=this.g.jmulAdd(p,n.getPublic(),b),x.isInfinity()?!1:x.eqXToP(s)):(x=this.g.mulAdd(p,n.getPublic(),b),x.isInfinity()?!1:x.getX().umod(this.n).cmp(s)===0)};oi.prototype.recoverPubKey=function(t,e,r,n){gw((3&r)===r,"The recovery param is more than two bits"),e=new uh(e,n);var i=this.n,s=new At(t),o=e.r,f=e.s,p=r&1,b=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&b)throw new Error("Unable to find sencond key candinate");b?o=this.curve.pointFromX(o.add(this.curve.n),p):o=this.curve.pointFromX(o,p);var x=e.r.invm(i),_=i.sub(s).mul(x).umod(i),S=f.mul(x).umod(i);return this.g.mulAdd(_,o,S)};oi.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new uh(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var i9=Ef(function(t,e){var r=e;r.version="6.5.4",r.utils=Gn,r.rand=function(){throw new Error("unsupported")},r.curve=Fc,r.curves=$c,r.ec=n9,r.eddsa=null}),s9=i9.ec;const o9="signing-key/5.7.0",vd=new G(o9);let v0=null;function Di(){return v0||(v0=new s9("secp256k1")),v0}class Lo{constructor(e){ie(this,"curve","secp256k1"),ie(this,"privateKey",Pe(e)),es(this.privateKey)!==32&&vd.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Di().keyFromPrivate(ye(this.privateKey));ie(this,"publicKey","0x"+r.getPublic(!1,"hex")),ie(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ie(this,"_isSigningKey",!0)}_addPoint(e){const r=Di().keyFromPublic(ye(this.publicKey)),n=Di().keyFromPublic(ye(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Di().keyFromPrivate(ye(this.privateKey)),n=ye(e);n.length!==32&&vd.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Qo({recoveryParam:i.recoveryParam,r:ar("0x"+i.r.toString(16),32),s:ar("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Di().keyFromPrivate(ye(this.privateKey)),n=Di().keyFromPublic(ye(Xp(e)));return ar("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function yw(t,e){const r=Qo(e),n={r:ye(r.r),s:ye(r.s)};return"0x"+Di().recoverPubKey(ye(t),n,r.recoveryParam).encode("hex",!1)}function Xp(t,e){const r=ye(t);if(r.length===32){const n=new Lo(r);return e?"0x"+Di().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?Pe(r):"0x"+Di().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Di().keyFromPublic(r).getPublic(!0,"hex"):Pe(r)}return vd.throwArgumentError("invalid public or private key","key","[REDACTED]")}const a9="transactions/5.7.0",pn=new G(a9);var bd;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(bd||(bd={}));function Qp(t){return t==="0x"?null:Zt(t)}function dn(t){return t==="0x"?$p:ge.from(t)}const f9=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],u9={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function eo(t){const e=Xp(t);return Zt(Pr(er(Pr(e,1)),12))}function Gu(t,e){return eo(yw(ye(t),e))}function $n(t,e){const r=Hi(ge.from(t).toHexString());return r.length>32&&pn.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function b0(t,e){return{address:Zt(t),storageKeys:(e||[]).map((r,n)=>(es(r)!==32&&pn.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function bo(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&pn.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),b0(r[0],r[1])):b0(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return b0(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function mw(t){return bo(t).map(e=>[e.address,e.storageKeys])}function vw(t,e){if(t.gasPrice!=null){const n=ge.from(t.gasPrice),i=ge.from(t.maxFeePerGas||0);n.eq(i)||pn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[$n(t.chainId||0,"chainId"),$n(t.nonce||0,"nonce"),$n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$n(t.maxFeePerGas||0,"maxFeePerGas"),$n(t.gasLimit||0,"gasLimit"),t.to!=null?Zt(t.to):"0x",$n(t.value||0,"value"),t.data||"0x",mw(t.accessList||[])];if(e){const n=Qo(e);r.push($n(n.recoveryParam,"recoveryParam")),r.push(Hi(n.r)),r.push(Hi(n.s))}return bn(["0x02",jo(r)])}function bw(t,e){const r=[$n(t.chainId||0,"chainId"),$n(t.nonce||0,"nonce"),$n(t.gasPrice||0,"gasPrice"),$n(t.gasLimit||0,"gasLimit"),t.to!=null?Zt(t.to):"0x",$n(t.value||0,"value"),t.data||"0x",mw(t.accessList||[])];if(e){const n=Qo(e);r.push($n(n.recoveryParam,"recoveryParam")),r.push(Hi(n.r)),r.push(Hi(n.s))}return bn(["0x01",jo(r)])}function c9(t,e){Dp(t,u9);const r=[];f9.forEach(function(o){let f=t[o.name]||[];const p={};o.numeric&&(p.hexPad="left"),f=ye(Pe(f,p)),o.length&&f.length!==o.length&&f.length>0&&pn.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,f),o.maxLength&&(f=Hi(f),f.length>o.maxLength&&pn.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,f)),r.push(Pe(f))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&pn.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!qu(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(Pe(n)),r.push("0x"),r.push("0x")),!e)return jo(r);const i=Qo(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&pn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&pn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(Pe(s)),r.push(Hi(ye(i.r))),r.push(Hi(ye(i.s))),jo(r)}function xd(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&pn.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),c9(t,e);switch(t.type){case 1:return bw(t,e);case 2:return vw(t,e)}return pn.throwError(`unsupported transaction type: ${t.type}`,G.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function xw(t,e,r){try{const n=dn(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{pn.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=ar(e[1],32),t.s=ar(e[2],32);try{const n=er(r(t));t.from=Gu(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function l9(t){const e=sh(t.slice(1));e.length!==9&&e.length!==12&&pn.throwArgumentError("invalid component count for transaction type: 2","payload",Pe(t));const r=dn(e[2]),n=dn(e[3]),i={type:2,chainId:dn(e[0]).toNumber(),nonce:dn(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:dn(e[4]),to:Qp(e[5]),value:dn(e[6]),data:e[7],accessList:bo(e[8])};return e.length===9||(i.hash=er(t),xw(i,e.slice(9),vw)),i}function h9(t){const e=sh(t.slice(1));e.length!==8&&e.length!==11&&pn.throwArgumentError("invalid component count for transaction type: 1","payload",Pe(t));const r={type:1,chainId:dn(e[0]).toNumber(),nonce:dn(e[1]).toNumber(),gasPrice:dn(e[2]),gasLimit:dn(e[3]),to:Qp(e[4]),value:dn(e[5]),data:e[6],accessList:bo(e[7])};return e.length===8||(r.hash=er(t),xw(r,e.slice(8),bw)),r}function d9(t){const e=sh(t);e.length!==9&&e.length!==6&&pn.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:dn(e[0]).toNumber(),gasPrice:dn(e[1]),gasLimit:dn(e[2]),to:Qp(e[3]),value:dn(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=ge.from(e[6]).toNumber()}catch{return r}if(r.r=ar(e[7],32),r.s=ar(e[8],32),ge.from(r.r).isZero()&&ge.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(Pe(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=er(jo(i));try{r.from=Gu(s,{r:Pe(r.r),s:Pe(r.s),recoveryParam:n})}catch{}r.hash=er(t)}return r.type=null,r}function ww(t){const e=ye(t);if(e[0]>127)return d9(e);switch(e[0]){case 1:return h9(e);case 2:return l9(e)}return pn.throwError(`unsupported transaction type: ${e[0]}`,G.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const p9="contracts/5.7.0";var io=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Qt=new G(p9),g9={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function hl(t,e){return io(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Qt.throwArgumentError("invalid address or ENS name","name",r);try{return Zt(r)}catch{}t||Qt.throwError("a provider or signer is needed to resolve ENS names",G.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Qt.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function iu(t,e,r){return io(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>iu(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield hl(t,e):r.type==="tuple"?yield iu(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>iu(t,n,r.arrayChildren))):Promise.reject(Qt.makeError("invalid value for array",G.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function ch(t,e,r){return io(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=fr(r.pop())),Qt.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=br({override:hl(t.signer,n.from),signer:t.signer.getAddress()}).then(b=>io(this,void 0,void 0,function*(){return Zt(b.signer)!==b.override&&Qt.throwError("Contract with a Signer cannot override from",G.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),b.override})):n.from=t.signer.getAddress():n.from&&(n.from=hl(t.provider,n.from));const i=yield br({args:iu(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:br(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},f=i.overrides;if(f.nonce!=null&&(o.nonce=ge.from(f.nonce).toNumber()),f.gasLimit!=null&&(o.gasLimit=ge.from(f.gasLimit)),f.gasPrice!=null&&(o.gasPrice=ge.from(f.gasPrice)),f.maxFeePerGas!=null&&(o.maxFeePerGas=ge.from(f.maxFeePerGas)),f.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=ge.from(f.maxPriorityFeePerGas)),f.from!=null&&(o.from=f.from),f.type!=null&&(o.type=f.type),f.accessList!=null&&(o.accessList=bo(f.accessList)),o.gasLimit==null&&e.gas!=null){let b=21e3;const x=ye(s);for(let _=0;_<x.length;_++)b+=4,x[_]&&(b+=64);o.gasLimit=ge.from(e.gas).add(b)}if(f.value){const b=ge.from(f.value);!b.isZero()&&!e.payable&&Qt.throwError("non-payable method cannot override value",G.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=b}f.customData&&(o.customData=fr(f.customData)),f.ccipReadEnabled&&(o.ccipReadEnabled=!!f.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const p=Object.keys(n).filter(b=>n[b]!=null);return p.length&&Qt.throwError(`cannot override ${p.map(b=>JSON.stringify(b)).join(",")}`,G.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:p}),o})}function y9(t,e){return function(...r){return ch(t,e,r)}}function m9(t,e){const r=t.signer||t.provider;return function(...n){return io(this,void 0,void 0,function*(){r||Qt.throwError("estimate require a provider or signer",G.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield ch(t,e,n);return yield r.estimateGas(i)})}}function _w(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=_n(s),f=null;try{f=t.interface.parseLog(s)}catch{}return f&&(o.args=f.args,o.decode=(p,b)=>t.interface.decodeEventLog(f.eventFragment,p,b),o.event=f.name,o.eventSignature=f.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function Ew(t,e,r){const n=t.signer||t.provider;return function(...i){return io(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const p=fr(i.pop());p.blockTag!=null&&(s=yield p.blockTag),delete p.blockTag,i.push(p)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield ch(t,e,i),f=yield n.call(o,s);try{let p=t.interface.decodeFunctionResult(e,f);return r&&e.outputs.length===1&&(p=p[0]),p}catch(p){throw p.code===G.errors.CALL_EXCEPTION&&(p.address=t.address,p.args=i,p.transaction=o),p}})}}function v9(t,e){return function(...r){return io(this,void 0,void 0,function*(){t.signer||Qt.throwError("sending a transaction requires a signer",G.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield ch(t,e,r),i=yield t.signer.sendTransaction(n);return _w(t,i),i})}}function C1(t,e,r){return e.constant?Ew(t,e,r):v9(t,e)}function Aw(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class xu{constructor(e,r){ie(this,"tag",e),ie(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class b9 extends xu{constructor(){super("error",null)}}class N1 extends xu{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&Qt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(Aw(s),s),ie(this,"address",e),ie(this,"interface",r),ie(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Dx(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class B1 extends xu{constructor(e,r){super("*",{address:e}),ie(this,"address",e),ie(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class eg{constructor(e,r,n){ie(this,"interface",Zr(new.target,"getInterface")(r)),n==null?(ie(this,"provider",null),ie(this,"signer",null)):Rs.isSigner(n)?(ie(this,"provider",n.provider||null),ie(this,"signer",n)):ra.isProvider(n)?(ie(this,"provider",n),ie(this,"signer",null)):Qt.throwArgumentError("invalid signer or provider","signerOrProvider",n),ie(this,"callStatic",{}),ie(this,"estimateGas",{}),ie(this,"functions",{}),ie(this,"populateTransaction",{}),ie(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(f=>{const p=this.interface.events[f];ie(this.filters,f,(...b)=>({address:this.address,topics:this.interface.encodeFilterTopics(p,b)})),o[p.name]||(o[p.name]=[]),o[p.name].push(f)}),Object.keys(o).forEach(f=>{const p=o[f];p.length===1?ie(this.filters,f,this.filters[p[0]]):Qt.warn(`Duplicate definition of ${f} (${p.join(", ")})`)})}if(ie(this,"_runningEvents",{}),ie(this,"_wrappedEmits",{}),e==null&&Qt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ie(this,"address",e),this.provider)ie(this,"resolvedAddress",hl(this.provider,e));else try{ie(this,"resolvedAddress",Promise.resolve(Zt(e)))}catch{Qt.throwError("provider is required to use ENS name as contract address",G.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const f=this.interface.functions[o];if(s[o]){Qt.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const p=f.name;i[`%${p}`]||(i[`%${p}`]=[]),i[`%${p}`].push(o)}this[o]==null&&ie(this,o,C1(this,f,!0)),this.functions[o]==null&&ie(this.functions,o,C1(this,f,!1)),this.callStatic[o]==null&&ie(this.callStatic,o,Ew(this,f,!0)),this.populateTransaction[o]==null&&ie(this.populateTransaction,o,y9(this,f)),this.estimateGas[o]==null&&ie(this.estimateGas,o,m9(this,f))}),Object.keys(i).forEach(o=>{const f=i[o];if(f.length>1)return;o=o.substring(1);const p=f[0];try{this[o]==null&&ie(this,o,this[p])}catch{}this.functions[o]==null&&ie(this.functions,o,this.functions[p]),this.callStatic[o]==null&&ie(this.callStatic,o,this.callStatic[p]),this.populateTransaction[o]==null&&ie(this.populateTransaction,o,this.populateTransaction[p]),this.estimateGas[o]==null&&ie(this.estimateGas,o,this.estimateGas[p])})}static getContractAddress(e){return oh(e)}static getInterface(e){return yd.isInterface(e)?e:new yd(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Qt.throwError("contract not deployed",G.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Qt.throwError("sending a transactions require a signer",G.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=fr(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Qt.throwError("cannot override "+n,G.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Hu(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ie(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return ul.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new b9);if(e==="event")return this._normalizeRunningEvent(new xu("event",null));if(e==="*")return this._normalizeRunningEvent(new B1(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new N1(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new N1(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new xu(Aw(r),r))}return this._normalizeRunningEvent(new B1(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=_n(r);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||Qt.throwError("events require a provider or a signer with a provider",G.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const f=e.getEmit(o);this.emit(e.filter,...f)}catch(f){o.decodeError=f.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=fr(i.filter);return typeof r=="string"&&Tt(r,32)?(n!=null&&Qt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(f=>this._wrapEvent(i,f,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class dl extends eg{}class Sw{constructor(e,r,n){let i=null;typeof r=="string"?i=r:mo(r)?i=Pe(r):r&&typeof r.object=="string"?i=r.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!Tt(i)||i.length%2)&&Qt.throwArgumentError("invalid bytecode","bytecode",r),n&&!Rs.isSigner(n)&&Qt.throwArgumentError("invalid signer","signer",n),ie(this,"bytecode",i),ie(this,"interface",Zr(new.target,"getInterface")(e)),ie(this,"signer",n||null)}getDeployTransaction(...e){let r={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){r=fr(e.pop());for(const n in r)if(!g9[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{r[n]!=null&&Qt.throwError("cannot override "+n,G.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.value&&!ge.from(r.value).isZero()&&!this.interface.deploy.payable&&Qt.throwError("non-payable constructor cannot override value",G.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),Qt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=Pe(or([this.bytecode,this.interface.encodeDeploy(e)])),r}deploy(...e){return io(this,void 0,void 0,function*(){let r={};e.length===this.interface.deploy.inputs.length+1&&(r=e.pop()),Qt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield iu(this.signer,e,this.interface.deploy.inputs);n.push(r);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),o=Zr(this.constructor,"getContractAddress")(s),f=Zr(this.constructor,"getContract")(o,this.interface,this.signer);return _w(f,s),ie(f,"deployTransaction",s),f})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,r){e==null&&Qt.throwError("missing compiler output",G.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,r)}static getInterface(e){return dl.getInterface(e)}static getContractAddress(e){return oh(e)}static getContract(e,r,n){return new dl(e,r,n)}}class Mw{constructor(e){ie(this,"alphabet",e),ie(this,"base",e.length),ie(this,"_alphabetMap",{}),ie(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ye(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let f=0;f<n.length;++f)o+=n[f]<<8,n[f]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ye(new Uint8Array(r.reverse()))}}new Mw("abcdefghijklmnopqrstuvwxyz234567");const Ya=new Mw("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Za;(function(t){t.sha256="sha256",t.sha512="sha512"})(Za||(Za={}));const x9="sha2/5.7.0",w9=new G(x9);function Tw(t){return"0x"+$r.ripemd160().update(ye(t)).digest("hex")}function Ts(t){return"0x"+$r.sha256().update(ye(t)).digest("hex")}function _9(t){return"0x"+$r.sha512().update(ye(t)).digest("hex")}function wu(t,e,r){return Za[t]||w9.throwError("unsupported algorithm "+t,G.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+$r.hmac($r[t],ye(e)).update(ye(r)).digest("hex")}function tg(t,e,r,n,i){t=ye(t),e=ye(e);let s,o=1;const f=new Uint8Array(n),p=new Uint8Array(e.length+4);p.set(e);let b,x;for(let _=1;_<=o;_++){p[e.length]=_>>24&255,p[e.length+1]=_>>16&255,p[e.length+2]=_>>8&255,p[e.length+3]=_&255;let S=ye(wu(i,t,p));s||(s=S.length,x=new Uint8Array(s),o=Math.ceil(n/s),b=n-(o-1)*s),x.set(S);for(let k=1;k<r;k++){S=ye(wu(i,t,S));for(let I=0;I<s;I++)x[I]^=S[I]}const M=(_-1)*s,N=_===o?b:s;f.set(ye(x).slice(0,N),M)}return Pe(f)}const E9="wordlists/5.7.0",A9=new G(E9);class ia{constructor(e){A9.checkAbstract(new.target,ia),ie(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return Zs(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const S9="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let su=null;function O1(t){if(su==null&&(su=S9.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),ia.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw su=null,new Error("BIP39 Wordlist for en (English) FAILED")}class M9 extends ia{constructor(){super("en")}getWord(e){return O1(this),su[e]}getWordIndex(e){return O1(this),su.indexOf(e)}}const Pw=new M9;ia.register(Pw);const pl={en:Pw},T9="hdnode/5.7.0",_u=new G(T9),P9=ge.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),k9=Ir("Bitcoin seed"),Sa=2147483648;function kw(t){return(1<<t)-1<<8-t}function I9(t){return(1<<t)-1}function pc(t){return ar(Pe(t),32)}function L1(t){return Ya.encode(or([t,Pr(Ts(Ts(t)),0,4)]))}function rg(t){if(t==null)return pl.en;if(typeof t=="string"){const e=pl[t];return e==null&&_u.throwArgumentError("unknown locale","wordlist",t),e}return t}const da={},Xa="m/44'/60'/0'/0/0";class jn{constructor(e,r,n,i,s,o,f,p){if(e!==da)throw new Error("HDNode constructor cannot be called directly");if(r){const b=new Lo(r);ie(this,"privateKey",b.privateKey),ie(this,"publicKey",b.compressedPublicKey)}else ie(this,"privateKey",null),ie(this,"publicKey",Pe(n));ie(this,"parentFingerprint",i),ie(this,"fingerprint",Pr(Tw(Ts(this.publicKey)),0,4)),ie(this,"address",eo(this.publicKey)),ie(this,"chainCode",s),ie(this,"index",o),ie(this,"depth",f),p==null?(ie(this,"mnemonic",null),ie(this,"path",null)):typeof p=="string"?(ie(this,"mnemonic",null),ie(this,"path",p)):(ie(this,"mnemonic",p),ie(this,"path",p.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return L1(or([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",Pe(this.depth),this.parentFingerprint,ar(Pe(this.index),4),this.chainCode,this.privateKey!=null?or(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new jn(da,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~Sa));const n=new Uint8Array(37);if(e&Sa){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ye(this.privateKey),1),r&&(r+="'")}else n.set(ye(this.publicKey));for(let _=24;_>=0;_-=8)n[33+(_>>3)]=e>>24-_&255;const i=ye(wu(Za.sha512,this.chainCode,n)),s=i.slice(0,32),o=i.slice(32);let f=null,p=null;this.privateKey?f=pc(ge.from(s).add(this.privateKey).mod(P9)):p=new Lo(Pe(s))._addPoint(this.publicKey);let b=r;const x=this.mnemonic;return x&&(b=Object.freeze({phrase:x.phrase,path:r,locale:x.locale||"en"})),new jn(da,f,p,this.fingerprint,pc(o),e,this.depth+1,b)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=Sa)throw new Error("invalid path index - "+s);n=n._derive(Sa+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);if(o>=Sa)throw new Error("invalid path index - "+s);n=n._derive(o)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=ye(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=ye(wu(Za.sha512,k9,n));return new jn(da,pc(i.slice(0,32)),null,"0x00000000",pc(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=rg(n),e=hh(lh(e,n),n),jn._fromSeed(Iw(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return jn._fromSeed(e,null)}static fromExtendedKey(e){const r=Ya.decode(e);(r.length!==82||L1(r.slice(0,78))!==e)&&_u.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=Pe(r.slice(5,9)),s=parseInt(Pe(r.slice(9,13)).substring(2),16),o=Pe(r.slice(13,45)),f=r.slice(45,78);switch(Pe(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new jn(da,null,Pe(f),i,o,s,n,null);case"0x0488ade4":case"0x04358394 ":if(f[0]!==0)break;return new jn(da,Pe(f.slice(1)),null,i,o,s,n,null)}return _u.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Iw(t,e){e||(e="");const r=Ir("mnemonic"+e,ts.NFKD);return tg(Ir(t,ts.NFKD),r,2048,64,"sha512")}function lh(t,e){e=rg(e),_u.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=ye(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let b=0;b<r.length;b++){let x=e.getWordIndex(r[b].normalize("NFKD"));if(x===-1)throw new Error("invalid mnemonic");for(let _=0;_<11;_++)x&1<<10-_&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,o=r.length/3,f=kw(o);if((ye(Ts(n.slice(0,s/8)))[0]&f)!==(n[n.length-1]&f))throw new Error("invalid checksum");return Pe(n.slice(0,s/8))}function hh(t,e){if(e=rg(e),t=ye(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let o=0;o<t.length;o++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[o],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[o]>>8-n,r.push(t[o]&I9(8-n)),n+=3);const i=t.length/4,s=ye(Ts(t))[0]&kw(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(o=>e.getWord(o)))}function R9(t,e){try{return lh(t,e),!0}catch{}return!1}function C9(t){return(typeof t!="number"||t<0||t>=Sa||t%1)&&_u.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const N9="random/5.7.0",wd=new G(N9);function B9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const D1=B9();let jc=D1.crypto||D1.msCrypto;(!jc||!jc.getRandomValues)&&(wd.warn("WARNING: Missing strong random number source"),jc={getRandomValues:function(t){return wd.throwError("no secure random source avaialble",G.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Ia(t){(t<=0||t>1024||t%1||t!=t)&&wd.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return jc.getRandomValues(e),ye(e)}function Rw(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var Cw={exports:{}};(function(t,e){(function(r){function n(g){return parseInt(g)===g}function i(g){if(!n(g.length))return!1;for(var d=0;d<g.length;d++)if(!n(g[d])||g[d]<0||g[d]>255)return!1;return!0}function s(g,d){if(g.buffer&&ArrayBuffer.isView(g)&&g.name==="Uint8Array")return d&&(g.slice?g=g.slice():g=Array.prototype.slice.call(g)),g;if(Array.isArray(g)){if(!i(g))throw new Error("Array contains invalid value: "+g);return new Uint8Array(g)}if(n(g.length)&&i(g))return new Uint8Array(g);throw new Error("unsupported array-like object")}function o(g){return new Uint8Array(g)}function f(g,d,E,L,U){(L!=null||U!=null)&&(g.slice?g=g.slice(L,U):g=Array.prototype.slice.call(g,L,U)),d.set(g,E)}var p=function(){function g(E){var L=[],U=0;for(E=encodeURI(E);U<E.length;){var K=E.charCodeAt(U++);K===37?(L.push(parseInt(E.substr(U,2),16)),U+=2):L.push(K)}return s(L)}function d(E){for(var L=[],U=0;U<E.length;){var K=E[U];K<128?(L.push(String.fromCharCode(K)),U++):K>191&&K<224?(L.push(String.fromCharCode((K&31)<<6|E[U+1]&63)),U+=2):(L.push(String.fromCharCode((K&15)<<12|(E[U+1]&63)<<6|E[U+2]&63)),U+=3)}return L.join("")}return{toBytes:g,fromBytes:d}}(),b=function(){function g(L){for(var U=[],K=0;K<L.length;K+=2)U.push(parseInt(L.substr(K,2),16));return U}var d="0123456789abcdef";function E(L){for(var U=[],K=0;K<L.length;K++){var re=L[K];U.push(d[(re&240)>>4]+d[re&15])}return U.join("")}return{toBytes:g,fromBytes:E}}(),x={16:10,24:12,32:14},_=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],S=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],M=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],N=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],k=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],I=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],C=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],D=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],$=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],j=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],F=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],z=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Z=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],te=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ee=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function pe(g){for(var d=[],E=0;E<g.length;E+=4)d.push(g[E]<<24|g[E+1]<<16|g[E+2]<<8|g[E+3]);return d}var T=function(g){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(g,!0)}),this._prepare()};T.prototype._prepare=function(){var g=x[this.key.length];if(g==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var d=0;d<=g;d++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var E=(g+1)*4,L=this.key.length/4,U=pe(this.key),K,d=0;d<L;d++)K=d>>2,this._Ke[K][d%4]=U[d],this._Kd[g-K][d%4]=U[d];for(var re=0,oe=L,Y;oe<E;){if(Y=U[L-1],U[0]^=S[Y>>16&255]<<24^S[Y>>8&255]<<16^S[Y&255]<<8^S[Y>>24&255]^_[re]<<24,re+=1,L!=8)for(var d=1;d<L;d++)U[d]^=U[d-1];else{for(var d=1;d<L/2;d++)U[d]^=U[d-1];Y=U[L/2-1],U[L/2]^=S[Y&255]^S[Y>>8&255]<<8^S[Y>>16&255]<<16^S[Y>>24&255]<<24;for(var d=L/2+1;d<L;d++)U[d]^=U[d-1]}for(var d=0,be,Fe;d<L&&oe<E;)be=oe>>2,Fe=oe%4,this._Ke[be][Fe]=U[d],this._Kd[g-be][Fe]=U[d++],oe++}for(var be=1;be<g;be++)for(var Fe=0;Fe<4;Fe++)Y=this._Kd[be][Fe],this._Kd[be][Fe]=z[Y>>24&255]^Z[Y>>16&255]^te[Y>>8&255]^ee[Y&255]},T.prototype.encrypt=function(g){if(g.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var d=this._Ke.length-1,E=[0,0,0,0],L=pe(g),U=0;U<4;U++)L[U]^=this._Ke[0][U];for(var K=1;K<d;K++){for(var U=0;U<4;U++)E[U]=N[L[U]>>24&255]^k[L[(U+1)%4]>>16&255]^I[L[(U+2)%4]>>8&255]^C[L[(U+3)%4]&255]^this._Ke[K][U];L=E.slice()}for(var re=o(16),oe,U=0;U<4;U++)oe=this._Ke[d][U],re[4*U]=(S[L[U]>>24&255]^oe>>24)&255,re[4*U+1]=(S[L[(U+1)%4]>>16&255]^oe>>16)&255,re[4*U+2]=(S[L[(U+2)%4]>>8&255]^oe>>8)&255,re[4*U+3]=(S[L[(U+3)%4]&255]^oe)&255;return re},T.prototype.decrypt=function(g){if(g.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var d=this._Kd.length-1,E=[0,0,0,0],L=pe(g),U=0;U<4;U++)L[U]^=this._Kd[0][U];for(var K=1;K<d;K++){for(var U=0;U<4;U++)E[U]=D[L[U]>>24&255]^$[L[(U+3)%4]>>16&255]^j[L[(U+2)%4]>>8&255]^F[L[(U+1)%4]&255]^this._Kd[K][U];L=E.slice()}for(var re=o(16),oe,U=0;U<4;U++)oe=this._Kd[d][U],re[4*U]=(M[L[U]>>24&255]^oe>>24)&255,re[4*U+1]=(M[L[(U+3)%4]>>16&255]^oe>>16)&255,re[4*U+2]=(M[L[(U+2)%4]>>8&255]^oe>>8)&255,re[4*U+3]=(M[L[(U+1)%4]&255]^oe)&255;return re};var h=function(g){if(!(this instanceof h))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new T(g)};h.prototype.encrypt=function(g){if(g=s(g),g.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var d=o(g.length),E=o(16),L=0;L<g.length;L+=16)f(g,E,0,L,L+16),E=this._aes.encrypt(E),f(E,d,L);return d},h.prototype.decrypt=function(g){if(g=s(g),g.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var d=o(g.length),E=o(16),L=0;L<g.length;L+=16)f(g,E,0,L,L+16),E=this._aes.decrypt(E),f(E,d,L);return d};var c=function(g,d){if(!(this instanceof c))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(d,!0),this._aes=new T(g)};c.prototype.encrypt=function(g){if(g=s(g),g.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var d=o(g.length),E=o(16),L=0;L<g.length;L+=16){f(g,E,0,L,L+16);for(var U=0;U<16;U++)E[U]^=this._lastCipherblock[U];this._lastCipherblock=this._aes.encrypt(E),f(this._lastCipherblock,d,L)}return d},c.prototype.decrypt=function(g){if(g=s(g),g.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var d=o(g.length),E=o(16),L=0;L<g.length;L+=16){f(g,E,0,L,L+16),E=this._aes.decrypt(E);for(var U=0;U<16;U++)d[L+U]=E[U]^this._lastCipherblock[U];f(g,this._lastCipherblock,0,L,L+16)}return d};var a=function(g,d,E){if(!(this instanceof a))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");E||(E=1),this.segmentSize=E,this._shiftRegister=s(d,!0),this._aes=new T(g)};a.prototype.encrypt=function(g){if(g.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var d=s(g,!0),E,L=0;L<d.length;L+=this.segmentSize){E=this._aes.encrypt(this._shiftRegister);for(var U=0;U<this.segmentSize;U++)d[L+U]^=E[U];f(this._shiftRegister,this._shiftRegister,0,this.segmentSize),f(d,this._shiftRegister,16-this.segmentSize,L,L+this.segmentSize)}return d},a.prototype.decrypt=function(g){if(g.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var d=s(g,!0),E,L=0;L<d.length;L+=this.segmentSize){E=this._aes.encrypt(this._shiftRegister);for(var U=0;U<this.segmentSize;U++)d[L+U]^=E[U];f(this._shiftRegister,this._shiftRegister,0,this.segmentSize),f(g,this._shiftRegister,16-this.segmentSize,L,L+this.segmentSize)}return d};var u=function(g,d){if(!(this instanceof u))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(d,!0),this._lastPrecipherIndex=16,this._aes=new T(g)};u.prototype.encrypt=function(g){for(var d=s(g,!0),E=0;E<d.length;E++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),d[E]^=this._lastPrecipher[this._lastPrecipherIndex++];return d},u.prototype.decrypt=u.prototype.encrypt;var y=function(g){if(!(this instanceof y))throw Error("Counter must be instanitated with `new`");g!==0&&!g&&(g=1),typeof g=="number"?(this._counter=o(16),this.setValue(g)):this.setBytes(g)};y.prototype.setValue=function(g){if(typeof g!="number"||parseInt(g)!=g)throw new Error("invalid counter value (must be an integer)");for(var d=15;d>=0;--d)this._counter[d]=g%256,g=g>>8},y.prototype.setBytes=function(g){if(g=s(g,!0),g.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=g},y.prototype.increment=function(){for(var g=15;g>=0;g--)if(this._counter[g]===255)this._counter[g]=0;else{this._counter[g]++;break}};var m=function(g,d){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",d instanceof y||(d=new y(d)),this._counter=d,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new T(g)};m.prototype.encrypt=function(g){for(var d=s(g,!0),E=0;E<d.length;E++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),d[E]^=this._remainingCounter[this._remainingCounterIndex++];return d},m.prototype.decrypt=m.prototype.encrypt;function w(g){g=s(g,!0);var d=16-g.length%16,E=o(g.length+d);f(g,E);for(var L=g.length;L<E.length;L++)E[L]=d;return E}function v(g){if(g=s(g,!0),g.length<16)throw new Error("PKCS#7 invalid length");var d=g[g.length-1];if(d>16)throw new Error("PKCS#7 padding byte out of range");for(var E=g.length-d,L=0;L<d;L++)if(g[E+L]!==d)throw new Error("PKCS#7 invalid padding byte");var U=o(E);return f(g,U,0,0,E),U}var l={AES:T,Counter:y,ModeOfOperation:{ecb:h,cbc:c,cfb:a,ofb:u,ctr:m},utils:{hex:b,utf8:p},padding:{pkcs7:{pad:w,strip:v}},_arrayTest:{coerceArray:s,createArray:o,copyArray:f}};t.exports=l})()})(Cw);var $i=Cw.exports;const Nw="json-wallets/5.7.0";function Do(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),ye(t)}function Of(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function ng(t){return typeof t=="string"?Ir(t,ts.NFKC):ye(t)}function Tr(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const o in r)if(o.toLowerCase()===n[i]){s=r[o];break}if(s===null)return null;r=s}return r}function O9(t){const e=ye(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=Pe(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const L9=new G(Nw);class D9 extends ea{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function Bw(t,e){const r=JSON.parse(t);e=ng(e);const n=Zt(Tr(r,"ethaddr")),i=Do(Tr(r,"encseed"));(!i||i.length%16!==0)&&L9.throwArgumentError("invalid encseed","json",t);const s=ye(tg(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),f=i.slice(16),p=new $i.ModeOfOperation.cbc(s,o),b=$i.padding.pkcs7.strip(ye(p.decrypt(f)));let x="";for(let M=0;M<b.length;M++)x+=String.fromCharCode(b[M]);const _=Ir(x),S=er(_);return new D9({_isCrowdsaleAccount:!0,address:n,privateKey:S})}function ig(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function sg(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function U9(t){if(ig(t))try{return Zt(JSON.parse(t).ethaddr)}catch{return null}if(sg(t))try{return Zt(JSON.parse(t).address)}catch{return null}return null}var Ow={exports:{}};(function(t,e){(function(r){function i(k){const I=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let C=1779033703,D=3144134277,$=1013904242,j=2773480762,F=1359893119,z=2600822924,Z=528734635,te=1541459225;const ee=new Uint32Array(64);function pe(m){let w=0,v=m.length;for(;v>=64;){let l=C,g=D,d=$,E=j,L=F,U=z,K=Z,re=te,oe,Y,be,Fe,he;for(Y=0;Y<16;Y++)be=w+Y*4,ee[Y]=(m[be]&255)<<24|(m[be+1]&255)<<16|(m[be+2]&255)<<8|m[be+3]&255;for(Y=16;Y<64;Y++)oe=ee[Y-2],Fe=(oe>>>17|oe<<32-17)^(oe>>>19|oe<<32-19)^oe>>>10,oe=ee[Y-15],he=(oe>>>7|oe<<32-7)^(oe>>>18|oe<<32-18)^oe>>>3,ee[Y]=(Fe+ee[Y-7]|0)+(he+ee[Y-16]|0)|0;for(Y=0;Y<64;Y++)Fe=(((L>>>6|L<<32-6)^(L>>>11|L<<32-11)^(L>>>25|L<<32-25))+(L&U^~L&K)|0)+(re+(I[Y]+ee[Y]|0)|0)|0,he=((l>>>2|l<<32-2)^(l>>>13|l<<32-13)^(l>>>22|l<<32-22))+(l&g^l&d^g&d)|0,re=K,K=U,U=L,L=E+Fe|0,E=d,d=g,g=l,l=Fe+he|0;C=C+l|0,D=D+g|0,$=$+d|0,j=j+E|0,F=F+L|0,z=z+U|0,Z=Z+K|0,te=te+re|0,w+=64,v-=64}}pe(k);let T,h=k.length%64,c=k.length/536870912|0,a=k.length<<3,u=h<56?56:120,y=k.slice(k.length-h,k.length);for(y.push(128),T=h+1;T<u;T++)y.push(0);return y.push(c>>>24&255),y.push(c>>>16&255),y.push(c>>>8&255),y.push(c>>>0&255),y.push(a>>>24&255),y.push(a>>>16&255),y.push(a>>>8&255),y.push(a>>>0&255),pe(y),[C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,$>>>24&255,$>>>16&255,$>>>8&255,$>>>0&255,j>>>24&255,j>>>16&255,j>>>8&255,j>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,z>>>24&255,z>>>16&255,z>>>8&255,z>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255,te>>>24&255,te>>>16&255,te>>>8&255,te>>>0&255]}function s(k,I,C){k=k.length<=64?k:i(k);const D=64+I.length+4,$=new Array(D),j=new Array(64);let F,z=[];for(F=0;F<64;F++)$[F]=54;for(F=0;F<k.length;F++)$[F]^=k[F];for(F=0;F<I.length;F++)$[64+F]=I[F];for(F=D-4;F<D;F++)$[F]=0;for(F=0;F<64;F++)j[F]=92;for(F=0;F<k.length;F++)j[F]^=k[F];function Z(){for(let te=D-1;te>=D-4;te--){if($[te]++,$[te]<=255)return;$[te]=0}}for(;C>=32;)Z(),z=z.concat(i(j.concat(i($)))),C-=32;return C>0&&(Z(),z=z.concat(i(j.concat(i($))).slice(0,C))),z}function o(k,I,C,D,$){let j;for(x(k,(2*C-1)*16,$,0,16),j=0;j<2*C;j++)b(k,j*16,$,16),p($,D),x($,0,k,I+j*16,16);for(j=0;j<C;j++)x(k,I+j*2*16,k,j*16,16);for(j=0;j<C;j++)x(k,I+(j*2+1)*16,k,(j+C)*16,16)}function f(k,I){return k<<I|k>>>32-I}function p(k,I){x(k,0,I,0,16);for(let C=8;C>0;C-=2)I[4]^=f(I[0]+I[12],7),I[8]^=f(I[4]+I[0],9),I[12]^=f(I[8]+I[4],13),I[0]^=f(I[12]+I[8],18),I[9]^=f(I[5]+I[1],7),I[13]^=f(I[9]+I[5],9),I[1]^=f(I[13]+I[9],13),I[5]^=f(I[1]+I[13],18),I[14]^=f(I[10]+I[6],7),I[2]^=f(I[14]+I[10],9),I[6]^=f(I[2]+I[14],13),I[10]^=f(I[6]+I[2],18),I[3]^=f(I[15]+I[11],7),I[7]^=f(I[3]+I[15],9),I[11]^=f(I[7]+I[3],13),I[15]^=f(I[11]+I[7],18),I[1]^=f(I[0]+I[3],7),I[2]^=f(I[1]+I[0],9),I[3]^=f(I[2]+I[1],13),I[0]^=f(I[3]+I[2],18),I[6]^=f(I[5]+I[4],7),I[7]^=f(I[6]+I[5],9),I[4]^=f(I[7]+I[6],13),I[5]^=f(I[4]+I[7],18),I[11]^=f(I[10]+I[9],7),I[8]^=f(I[11]+I[10],9),I[9]^=f(I[8]+I[11],13),I[10]^=f(I[9]+I[8],18),I[12]^=f(I[15]+I[14],7),I[13]^=f(I[12]+I[15],9),I[14]^=f(I[13]+I[12],13),I[15]^=f(I[14]+I[13],18);for(let C=0;C<16;++C)k[C]+=I[C]}function b(k,I,C,D){for(let $=0;$<D;$++)C[$]^=k[I+$]}function x(k,I,C,D,$){for(;$--;)C[D++]=k[I++]}function _(k){if(!k||typeof k.length!="number")return!1;for(let I=0;I<k.length;I++){const C=k[I];if(typeof C!="number"||C%1||C<0||C>=256)return!1}return!0}function S(k,I){if(typeof k!="number"||k%1)throw new Error("invalid "+I);return k}function M(k,I,C,D,$,j,F){if(C=S(C,"N"),D=S(D,"r"),$=S($,"p"),j=S(j,"dkLen"),C===0||(C&C-1)!==0)throw new Error("N must be power of 2");if(C>2147483647/128/D)throw new Error("N too large");if(D>2147483647/128/$)throw new Error("r too large");if(!_(k))throw new Error("password must be an array or buffer");if(k=Array.prototype.slice.call(k),!_(I))throw new Error("salt must be an array or buffer");I=Array.prototype.slice.call(I);let z=s(k,I,$*128*D);const Z=new Uint32Array($*32*D);for(let L=0;L<Z.length;L++){const U=L*4;Z[L]=(z[U+3]&255)<<24|(z[U+2]&255)<<16|(z[U+1]&255)<<8|(z[U+0]&255)<<0}const te=new Uint32Array(64*D),ee=new Uint32Array(32*D*C),pe=32*D,T=new Uint32Array(16),h=new Uint32Array(16),c=$*C*2;let a=0,u=null,y=!1,m=0,w=0,v,l;const g=F?parseInt(1e3/D):4294967295,d=typeof setImmediate<"u"?setImmediate:setTimeout,E=function(){if(y)return F(new Error("cancelled"),a/c);let L;switch(m){case 0:l=w*32*D,x(Z,l,te,0,pe),m=1,v=0;case 1:L=C-v,L>g&&(L=g);for(let K=0;K<L;K++)x(te,0,ee,(v+K)*pe,pe),o(te,pe,D,T,h);if(v+=L,a+=L,F){const K=parseInt(1e3*a/c);if(K!==u){if(y=F(null,a/c),y)break;u=K}}if(v<C)break;v=0,m=2;case 2:L=C-v,L>g&&(L=g);for(let K=0;K<L;K++){const re=(2*D-1)*16,oe=te[re]&C-1;b(ee,oe*pe,te,pe),o(te,pe,D,T,h)}if(v+=L,a+=L,F){const K=parseInt(1e3*a/c);if(K!==u){if(y=F(null,a/c),y)break;u=K}}if(v<C)break;if(x(te,0,Z,l,pe),w++,w<$){m=0;break}z=[];for(let K=0;K<Z.length;K++)z.push(Z[K]>>0&255),z.push(Z[K]>>8&255),z.push(Z[K]>>16&255),z.push(Z[K]>>24&255);const U=s(k,z,j);return F&&F(null,1,U),U}F&&d(E)};if(!F)for(;;){const L=E();if(L!=null)return L}E()}const N={scrypt:function(k,I,C,D,$,j,F){return new Promise(function(z,Z){let te=0;F&&F(0),M(k,I,C,D,$,j,function(ee,pe,T){if(ee)Z(ee);else if(T)F&&te!==1&&F(1),z(new Uint8Array(T));else if(F&&pe!==te)return te=pe,F(pe)})})},syncScrypt:function(k,I,C,D,$,j){return new Uint8Array(M(k,I,C,D,$,j))}};t.exports=N})()})(Ow);var og=Ow.exports,F9=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const _d=new G(Nw);function U1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class $9 extends ea{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function j9(t,e,r){if(Tr(t,"crypto/cipher")==="aes-128-ctr"){const i=Do(Tr(t,"crypto/cipherparams/iv")),s=new $i.Counter(i),o=new $i.ModeOfOperation.ctr(e,s);return ye(o.decrypt(r))}return null}function Lw(t,e){const r=Do(Tr(t,"crypto/ciphertext"));if(Pe(er(or([e.slice(16,32),r]))).substring(2)!==Tr(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=j9(t,e.slice(0,16),r);i||_d.throwError("unsupported cipher",G.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),o=eo(i);if(t.address){let p=t.address.toLowerCase();if(p.substring(0,2)!=="0x"&&(p="0x"+p),Zt(p)!==o)throw new Error("address mismatch")}const f={_isKeystoreAccount:!0,address:o,privateKey:Pe(i)};if(Tr(t,"x-ethers/version")==="0.1"){const p=Do(Tr(t,"x-ethers/mnemonicCiphertext")),b=Do(Tr(t,"x-ethers/mnemonicCounter")),x=new $i.Counter(b),_=new $i.ModeOfOperation.ctr(s,x),S=Tr(t,"x-ethers/path")||Xa,M=Tr(t,"x-ethers/locale")||"en",N=ye(_.decrypt(p));try{const k=hh(N,M),I=jn.fromMnemonic(k,null,M).derivePath(S);if(I.privateKey!=f.privateKey)throw new Error("mnemonic mismatch");f.mnemonic=I.mnemonic}catch(k){if(k.code!==G.errors.INVALID_ARGUMENT||k.argument!=="wordlist")throw k}}return new $9(f)}function Dw(t,e,r,n,i){return ye(tg(t,e,r,n,i))}function q9(t,e,r,n,i){return Promise.resolve(Dw(t,e,r,n,i))}function Uw(t,e,r,n,i){const s=ng(e),o=Tr(t,"crypto/kdf");if(o&&typeof o=="string"){const f=function(p,b){return _d.throwArgumentError("invalid key-derivation function parameters",p,b)};if(o.toLowerCase()==="scrypt"){const p=Do(Tr(t,"crypto/kdfparams/salt")),b=parseInt(Tr(t,"crypto/kdfparams/n")),x=parseInt(Tr(t,"crypto/kdfparams/r")),_=parseInt(Tr(t,"crypto/kdfparams/p"));(!b||!x||!_)&&f("kdf",o),(b&b-1)!==0&&f("N",b);const S=parseInt(Tr(t,"crypto/kdfparams/dklen"));return S!==32&&f("dklen",S),n(s,p,b,x,_,64,i)}else if(o.toLowerCase()==="pbkdf2"){const p=Do(Tr(t,"crypto/kdfparams/salt"));let b=null;const x=Tr(t,"crypto/kdfparams/prf");x==="hmac-sha256"?b="sha256":x==="hmac-sha512"?b="sha512":f("prf",x);const _=parseInt(Tr(t,"crypto/kdfparams/c")),S=parseInt(Tr(t,"crypto/kdfparams/dklen"));return S!==32&&f("dklen",S),r(s,p,_,S,b)}}return _d.throwArgumentError("unsupported key-derivation function","kdf",o)}function K9(t,e){const r=JSON.parse(t),n=Uw(r,e,Dw,og.syncScrypt);return Lw(r,n)}function z9(t,e,r){return F9(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield Uw(n,e,q9,og.scrypt,r);return Lw(n,i)})}function H9(t,e,r,n){try{if(Zt(t.address)!==eo(t.privateKey))throw new Error("address/privateKey mismatch");if(U1(t)){const I=t.mnemonic;if(jn.fromMnemonic(I.phrase,null,I.locale).derivePath(I.path||Xa).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(I){return Promise.reject(I)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=ye(t.privateKey),s=ng(e);let o=null,f=null,p=null;if(U1(t)){const I=t.mnemonic;o=ye(lh(I.phrase,I.locale||"en")),f=I.path||Xa,p=I.locale||"en"}let b=r.client;b||(b="ethers.js");let x=null;r.salt?x=ye(r.salt):x=Ia(32);let _=null;if(r.iv){if(_=ye(r.iv),_.length!==16)throw new Error("invalid iv")}else _=Ia(16);let S=null;if(r.uuid){if(S=ye(r.uuid),S.length!==16)throw new Error("invalid uuid")}else S=Ia(16);let M=1<<17,N=8,k=1;return r.scrypt&&(r.scrypt.N&&(M=r.scrypt.N),r.scrypt.r&&(N=r.scrypt.r),r.scrypt.p&&(k=r.scrypt.p)),og.scrypt(s,x,M,N,k,64,n).then(I=>{I=ye(I);const C=I.slice(0,16),D=I.slice(16,32),$=I.slice(32,64),j=new $i.Counter(_),F=new $i.ModeOfOperation.ctr(C,j),z=ye(F.encrypt(i)),Z=er(or([D,z])),te={address:t.address.substring(2).toLowerCase(),id:O9(S),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Pe(_).substring(2)},ciphertext:Pe(z).substring(2),kdf:"scrypt",kdfparams:{salt:Pe(x).substring(2),n:M,dklen:32,p:k,r:N},mac:Z.substring(2)}};if(o){const ee=Ia(16),pe=new $i.Counter(ee),T=new $i.ModeOfOperation.ctr($,pe),h=ye(T.encrypt(o)),c=new Date,a=c.getUTCFullYear()+"-"+Of(c.getUTCMonth()+1,2)+"-"+Of(c.getUTCDate(),2)+"T"+Of(c.getUTCHours(),2)+"-"+Of(c.getUTCMinutes(),2)+"-"+Of(c.getUTCSeconds(),2)+".0Z";te["x-ethers"]={client:b,gethFilename:"UTC--"+a+"--"+te.address,mnemonicCounter:Pe(ee).substring(2),mnemonicCiphertext:Pe(h).substring(2),path:f,locale:p,version:"0.1"}}return JSON.stringify(te)})}function G9(t,e,r){if(ig(t)){r&&r(0);const n=Bw(t,e);return r&&r(1),Promise.resolve(n)}return sg(t)?z9(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function V9(t,e){if(ig(t))return Bw(t,e);if(sg(t))return K9(t,e);throw new Error("invalid JSON wallet")}const W9="wallet/5.7.0";var F1=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const pa=new G(W9);function J9(t){return t!=null&&Tt(t.privateKey,32)&&t.address!=null}function Y9(t){const e=t.mnemonic;return e&&e.phrase}class zs extends Rs{constructor(e,r){if(super(),J9(e)){const n=new Lo(e.privateKey);if(ie(this,"_signingKey",()=>n),ie(this,"address",eo(this.publicKey)),this.address!==Zt(e.address)&&pa.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),Y9(e)){const i=e.mnemonic;ie(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Xa,locale:i.locale||"en"}));const s=this.mnemonic,o=jn.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);eo(o.privateKey)!==this.address&&pa.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ie(this,"_mnemonic",()=>null)}else{if(Lo.isSigningKey(e))e.curve!=="secp256k1"&&pa.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ie(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new Lo(e);ie(this,"_signingKey",()=>n)}ie(this,"_mnemonic",()=>null),ie(this,"address",eo(this.publicKey))}r&&!ra.isProvider(r)&&pa.throwArgumentError("invalid provider","provider",r),ie(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new zs(this,e)}signTransaction(e){return br(e).then(r=>{r.from!=null&&(Zt(r.from)!==this.address&&pa.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(er(xd(r)));return xd(r,n)})}signMessage(e){return F1(this,void 0,void 0,function*(){return dd(this._signingKey().signDigest(Wp(e)))})}_signTypedData(e,r,n){return F1(this,void 0,void 0,function*(){const i=yield Wr.resolveNames(e,r,n,s=>(this.provider==null&&pa.throwError("cannot resolve ENS names without a provider",G.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return dd(this._signingKey().signDigest(Wr.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),H9(this,e,r,n)}static createRandom(e){let r=Ia(16);e||(e={}),e.extraEntropy&&(r=ye(Pr(er(or([r,e.extraEntropy])),0,16)));const n=hh(r,e.locale);return zs.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return G9(e,r,n).then(i=>new zs(i))}static fromEncryptedJsonSync(e,r){return new zs(V9(e,r))}static fromMnemonic(e,r,n){return r||(r=Xa),new zs(jn.fromMnemonic(e,null,n).derivePath(r))}}function Z9(t,e){return Gu(Wp(t),e)}function X9(t,e,r,n){return Gu(Wr.hash(t,e,r),n)}const Q9="networks/5.7.1",$1=new G(Q9);function eT(t){return t&&typeof t.renetwork=="function"}function ys(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return ys(r)},e}function gl(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return gl(t,n)},r}const j1={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ys("homestead")},q1={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ys("ropsten")},K1={chainId:63,name:"classicMordor",_defaultProvider:gl("https://www.ethercluster.com/mordor","classicMordor")},gc={unspecified:{chainId:0,name:"unspecified"},homestead:j1,mainnet:j1,morden:{chainId:2,name:"morden"},ropsten:q1,testnet:q1,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ys("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ys("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ys("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ys("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:gl("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:K1,classicTestnet:K1,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:gl("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ys("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ys("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function ag(t){if(t==null)return null;if(typeof t=="number"){for(const n in gc){const i=gc[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=gc[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=gc[t.name];if(!e)return typeof t.chainId!="number"&&$1.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&$1.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(eT(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const tT="web/5.7.1";var rT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};function nT(t,e){return rT(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,f)=>{s[f.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ye(new Uint8Array(i))}})}var iT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const bi=new G(tT);function z1(t){return new Promise(e=>{setTimeout(e,t)})}function Ds(t,e){if(t==null)return null;if(typeof t=="string")return t;if(qu(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return ta(t)}catch{}return Pe(t)}return t}function sT(t){return Ir(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Fw(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;bi.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;bi.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,f={};let p=null;const b={method:"GET"};let x=!1,_=2*60*1e3;if(typeof t=="string")p=t;else if(typeof t=="object"){if((t==null||t.url==null)&&bi.throwArgumentError("missing URL","connection.url",t),p=t.url,typeof t.timeout=="number"&&t.timeout>0&&(_=t.timeout),t.headers)for(const C in t.headers)f[C.toLowerCase()]={key:C,value:String(t.headers[C])},["if-none-match","if-modified-since"].indexOf(C.toLowerCase())>=0&&(x=!0);if(b.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){p.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&bi.throwError("basic authentication requires a secure https url",G.errors.INVALID_ARGUMENT,{argument:"url",url:p,user:t.user,password:"[REDACTED]"});const C=t.user+":"+t.password;f.authorization={key:"Authorization",value:"Basic "+Gp(Ir(C))}}t.skipFetchSetup!=null&&(b.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(b.fetchOptions=fr(t.fetchOptions))}const S=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),M=p?p.match(S):null;if(M)try{const C={statusCode:200,statusMessage:"OK",headers:{"content-type":M[1]||"text/plain"},body:M[2]?Hp(M[3]):sT(M[3])};let D=C.body;return r&&(D=r(C.body,C)),Promise.resolve(D)}catch(C){bi.throwError("processing response error",G.errors.SERVER_ERROR,{body:Ds(M[1],M[2]),error:C,requestBody:null,requestMethod:"GET",url:p})}e&&(b.method="POST",b.body=e,f["content-type"]==null&&(f["content-type"]={key:"Content-Type",value:"application/octet-stream"}),f["content-length"]==null&&(f["content-length"]={key:"Content-Length",value:String(e.length)}));const N={};Object.keys(f).forEach(C=>{const D=f[C];N[D.key]=D.value}),b.headers=N;const k=function(){let C=null;return{promise:new Promise(function(j,F){_&&(C=setTimeout(()=>{C!=null&&(C=null,F(bi.makeError("timeout",G.errors.TIMEOUT,{requestBody:Ds(b.body,N["content-type"]),requestMethod:b.method,timeout:_,url:p})))},_))}),cancel:function(){C!=null&&(clearTimeout(C),C=null)}}}(),I=function(){return iT(this,void 0,void 0,function*(){for(let C=0;C<n;C++){let D=null;try{if(D=yield nT(p,b),C<n){if(D.statusCode===301||D.statusCode===302){const j=D.headers.location||"";if(b.method==="GET"&&j.match(/^https:/)){p=D.headers.location;continue}}else if(D.statusCode===429){let j=!0;if(i&&(j=yield i(C,p)),j){let F=0;const z=D.headers["retry-after"];typeof z=="string"&&z.match(/^[1-9][0-9]*$/)?F=parseInt(z)*1e3:F=s*parseInt(String(Math.random()*Math.pow(2,C))),yield z1(F);continue}}}}catch(j){D=j.response,D==null&&(k.cancel(),bi.throwError("missing response",G.errors.SERVER_ERROR,{requestBody:Ds(b.body,N["content-type"]),requestMethod:b.method,serverError:j,url:p}))}let $=D.body;if(x&&D.statusCode===304?$=null:!o&&(D.statusCode<200||D.statusCode>=300)&&(k.cancel(),bi.throwError("bad response",G.errors.SERVER_ERROR,{status:D.statusCode,headers:D.headers,body:Ds($,D.headers?D.headers["content-type"]:null),requestBody:Ds(b.body,N["content-type"]),requestMethod:b.method,url:p})),r)try{const j=yield r($,D);return k.cancel(),j}catch(j){if(j.throttleRetry&&C<n){let F=!0;if(i&&(F=yield i(C,p)),F){const z=s*parseInt(String(Math.random()*Math.pow(2,C)));yield z1(z);continue}}k.cancel(),bi.throwError("processing response error",G.errors.SERVER_ERROR,{body:Ds($,D.headers?D.headers["content-type"]:null),error:j,requestBody:Ds(b.body,N["content-type"]),requestMethod:b.method,url:p})}return k.cancel(),$}return bi.throwError("failed response",G.errors.SERVER_ERROR,{requestBody:Ds(b.body,N["content-type"]),requestMethod:b.method,url:p})})}();return Promise.race([k.promise,I])}function Af(t,e,r){let n=(s,o)=>{let f=null;if(s!=null)try{f=JSON.parse(ta(s))}catch(p){bi.throwError("invalid JSON",G.errors.SERVER_ERROR,{body:s,error:p})}return r&&(f=r(f,o)),f},i=null;if(e!=null){i=Ir(e);const s=typeof t=="string"?{url:t}:fr(t);s.headers?Object.keys(s.headers).filter(f=>f.toLowerCase()==="content-type").length!==0||(s.headers=fr(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return Fw(t,i,n)}function No(t,e){return e||(e={}),e=fr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const f=e.retryLimit;let p=0;function b(){return t().then(function(x){if(x!==void 0)o()&&r(x);else if(e.oncePoll)e.oncePoll.once("poll",b);else if(e.onceBlock)e.onceBlock.once("block",b);else if(!s){if(p++,p>f){o()&&n(new Error("retry limit reached"));return}let _=e.interval*parseInt(String(Math.random()*Math.pow(2,p)));_<e.floor&&(_=e.floor),_>e.ceiling&&(_=e.ceiling),setTimeout(b,_)}return null},function(x){o()&&n(x)})}b()})}var yl="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Ed={};for(var yc=0;yc<yl.length;yc++){var x0=yl.charAt(yc);if(Ed[x0]!==void 0)throw new TypeError(x0+" is ambiguous");Ed[x0]=yc}function Fa(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function $w(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Fa(e)^n>>5}for(e=Fa(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Fa(e)^i&31}return e}function oT(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=$w(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5!==0)throw new Error("Non 5-bit word");n=Fa(n)^o,i+=yl.charAt(o)}for(s=0;s<6;++s)n=Fa(n);for(n^=1,s=0;s<6;++s){var f=n>>(5-s)*5&31;i+=yl.charAt(f)}return i}function jw(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var f=$w(s);if(typeof f=="string")return f;for(var p=[],b=0;b<o.length;++b){var x=o.charAt(b),_=Ed[x];if(_===void 0)return"Unknown character "+x;f=Fa(f)^_,!(b+6>=o.length)&&p.push(_)}return f!==1?"Invalid checksum for "+t:{prefix:s,words:p}}function aT(){var t=jw.apply(null,arguments);if(typeof t=="object")return t}function fT(t){var e=jw.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function dh(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,f=[],p=0;p<t.length;++p)for(i=i<<e|t[p],s+=e;s>=r;)s-=r,f.push(i>>s&o);if(n)s>0&&f.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return f}function uT(t){var e=dh(t,8,5,!0);if(Array.isArray(e))return e}function cT(t){var e=dh(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function lT(t){var e=dh(t,5,8,!1);if(Array.isArray(e))return e}function hT(t){var e=dh(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var dT={decodeUnsafe:aT,decode:fT,encode:oT,toWordsUnsafe:uT,toWords:cT,fromWordsUnsafe:lT,fromWords:hT},H1=dT;const vn="providers/5.7.2",Lf=new G(vn);class He{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),f=this.hex.bind(this),p=this.number.bind(this),b=this.type.bind(this),x=_=>this.data(_,!0);return e.transaction={hash:o,type:b,accessList:He.allowNull(this.accessList.bind(this),null),blockHash:He.allowNull(o,null),blockNumber:He.allowNull(p,null),transactionIndex:He.allowNull(p,null),confirmations:He.allowNull(p,null),from:r,gasPrice:He.allowNull(n),maxPriorityFeePerGas:He.allowNull(n),maxFeePerGas:He.allowNull(n),gasLimit:n,to:He.allowNull(r,null),value:n,nonce:p,data:s,r:He.allowNull(this.uint256),s:He.allowNull(this.uint256),v:He.allowNull(p),creates:He.allowNull(r,null),raw:He.allowNull(s)},e.transactionRequest={from:He.allowNull(r),nonce:He.allowNull(p),gasLimit:He.allowNull(n),gasPrice:He.allowNull(n),maxPriorityFeePerGas:He.allowNull(n),maxFeePerGas:He.allowNull(n),to:He.allowNull(r),value:He.allowNull(n),data:He.allowNull(x),type:He.allowNull(p),accessList:He.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:p,blockNumber:p,transactionHash:o,address:r,topics:He.arrayOf(o),data:s,logIndex:p,blockHash:o},e.receipt={to:He.allowNull(this.address,null),from:He.allowNull(this.address,null),contractAddress:He.allowNull(r,null),transactionIndex:p,root:He.allowNull(f),gasUsed:n,logsBloom:He.allowNull(s),blockHash:o,transactionHash:o,logs:He.arrayOf(this.receiptLog.bind(this)),blockNumber:p,confirmations:He.allowNull(p,null),cumulativeGasUsed:n,effectiveGasPrice:He.allowNull(n),status:He.allowNull(p),type:b},e.block={hash:He.allowNull(o),parentHash:o,number:p,timestamp:p,nonce:He.allowNull(f),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:He.allowNull(r),extraData:s,transactions:He.allowNull(He.arrayOf(o)),baseFeePerGas:He.allowNull(n)},e.blockWithTransactions=fr(e.block),e.blockWithTransactions.transactions=He.allowNull(He.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:He.allowNull(i,void 0),toBlock:He.allowNull(i,void 0),blockHash:He.allowNull(o,void 0),address:He.allowNull(r,void 0),topics:He.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:He.allowNull(p),blockHash:He.allowNull(o),transactionIndex:p,removed:He.allowNull(this.boolean.bind(this)),address:r,data:He.allowFalsish(s,"0x"),topics:He.arrayOf(o),transactionHash:o,logIndex:p},e}accessList(e){return bo(e||[])}number(e){return e==="0x"?0:ge.from(e).toNumber()}type(e){return e==="0x"||e==null?0:ge.from(e).toNumber()}bigNumber(e){return ge.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Tt(e))?e.toLowerCase():Lf.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Zt(e)}callAddress(e){if(!Tt(e,32))return null;const r=Zt(Pr(e,12));return r===zx?null:r}contractAddress(e){return oh(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Tt(e))return Ku(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return es(n)!==32?Lf.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=ge.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Tt(e))throw new Error("invalid uint256");return ar(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=He.check(r,e);return i._difficulty=n==null?null:ge.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return He.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&ge.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=He.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Tt(n)&&(n=ge.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Tt(n)&&(n=ge.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return ww(e)}receiptLog(e){return He.check(this.formats.receiptLog,e)}receipt(e){const r=He.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=ge.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Lf.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Lf.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Lf.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return He.check(this.formats.filter,e)}filterLog(e){return He.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}function qw(t){return t&&typeof t.isCommunityResource=="function"}function Ad(t){return qw(t)&&t.isCommunityResource()}let G1=!1;function Vu(){G1||(G1=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Et=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Ct=new G(vn),pT=10;function V1(t){return t==null?"null":(es(t)!==32&&Ct.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function W1(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[V1(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return V1(e)}).join("&")}function gT(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function ga(t){if(typeof t=="string"){if(t=t.toLowerCase(),es(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+W1(t);if(G7.isForkEvent(t))throw Ct.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+W1(t.topics||[])}throw new Error("invalid event - "+t)}function Df(){return new Date().getTime()}function J1(t){return new Promise(e=>{setTimeout(e,t)})}const yT=["block","network","pending","poll"];class mT{constructor(e,r,n){ie(this,"tag",e),ie(this,"listener",r),ie(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=gT(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||yT.indexOf(this.tag)>=0}}const vT={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function w0(t){return ar(ge.from(t).toHexString(),32)}function Y1(t){return Ya.encode(or([t,Pr(Ts(Ts(t)),0,4)]))}const Kw=new RegExp("^(ipfs)://(.*)$","i"),Z1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Kw,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function qc(t,e){try{return ta(Eu(t,e))}catch{}return null}function Eu(t,e){if(t==="0x")return null;const r=ge.from(Pr(t,e,e+32)).toNumber(),n=ge.from(Pr(t,r,r+32)).toNumber();return Pr(t,r+32,r+32+n)}function _0(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Ct.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function X1(t){const e=ye(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function bT(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function zw(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=ye(t[n]);e[n]=X1(r),e.push(X1(i.length)),e.push(bT(i)),r+=32+Math.ceil(i.length/32)*32}return bn(e)}class Sd{constructor(e,r,n,i){ie(this,"provider",e),ie(this,"name",n),ie(this,"address",e.formatter.address(r)),ie(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>ge.from(e).eq(1)).catch(e=>{if(e.code===G.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Et(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:bn([e,nu(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=bn(["0x9061b923",zw([aw(this.name),n.data])]));try{let s=yield this.provider.call(n);return ye(s).length%32===4&&Ct.throwError("resolver threw error",G.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Eu(s,0)),s}catch(s){if(s.code===G.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return Et(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Eu(n,0):null})}_getAddress(e,r){const n=vT[String(e)];if(n==null&&Ct.throwError(`unsupported coin type: ${e}`,G.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ye(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Y1(or([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Y1(or([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const f=H1.toWords(i.slice(2));return f.unshift(o),H1.encode(n.prefix,f)}}return null}getAddress(e){return Et(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===jp?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===G.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",w0(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&Ct.throwError("invalid or unsupported coin data",G.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Et(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<Z1.length;n++){const i=r.match(Z1[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:_0(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const f=this._resolvedAddress||(yield this.getAddress()),p=(i[2]||"").split("/");if(p.length!==2)return null;const b=yield this.provider.formatter.address(p[0]),x=ar(ge.from(p[1]).toHexString(),32);if(s==="erc721"){const k=this.provider.formatter.callAddress(yield this.provider.call({to:b,data:bn(["0x6352211e",x])}));if(f!==k)return null;e.push({type:"owner",content:k})}else if(s==="erc1155"){const k=ge.from(yield this.provider.call({to:b,data:bn(["0x00fdd58e",ar(f,32),x])}));if(k.isZero())return null;e.push({type:"balance",content:k.toString()})}const _={to:this.provider.formatter.address(p[0]),data:bn([o,x])};let S=qc(yield this.provider.call(_),0);if(S==null)return null;e.push({type:"metadata-url-base",content:S}),s==="erc1155"&&(S=S.replace("{id}",x.substring(2)),e.push({type:"metadata-url-expanded",content:S})),S.match(/^ipfs:/i)&&(S=_0(S)),e.push({type:"metadata-url",content:S});const M=yield Af(S);if(!M)return null;e.push({type:"metadata",content:JSON.stringify(M)});let N=M.image;if(typeof N!="string")return null;if(!N.match(/^(https:\/\/|data:)/i)){if(N.match(Kw)==null)return null;e.push({type:"url-ipfs",content:N}),N=_0(N)}return e.push({type:"url",content:N}),{linkage:e,url:N}}}}}catch{}return null})}getContentHash(){return Et(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Ya.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ya.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"},f=Gp("0x"+s[1]).replace(/[=+\/]/g,p=>o[p]);return"sia://"+f}return Ct.throwError("invalid or unsupported content hash data",G.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Et(this,void 0,void 0,function*(){let r=Ir(e);r=or([w0(64),w0(r.length),r]),r.length%32!==0&&(r=or([r,ar("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",Pe(r));return n==null||n==="0x"?null:ta(n)})}}let E0=null,xT=1;class ph extends ra{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),ie(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Zr(new.target,"getNetwork")(e);r?(ie(this,"_network",r),this.emit("network",r,null)):Ct.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Et(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Ct.throwError("no network detected",G.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ie(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return No(()=>this._ready().then(e=>e,e=>{if(!(e.code===G.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return E0==null&&(E0=new He),E0}static getNetwork(e){return ag(e??"homestead")}ccipReadFetch(e,r,n){return Et(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let f=0;f<n.length;f++){const p=n[f],b=p.replace("{sender}",i).replace("{data}",s),x=p.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),_=yield Af({url:b,errorPassThrough:!0},x,(M,N)=>(M.status=N.statusCode,M));if(_.data)return _.data;const S=_.message||"unknown error";if(_.status>=400&&_.status<500)return Ct.throwError(`response not found during CCIP fetch: ${S}`,G.errors.SERVER_ERROR,{url:p,errorMessage:S});o.push(S)}return Ct.throwError(`error encountered during CCIP fetch: ${o.map(f=>JSON.stringify(f)).join(", ")}`,G.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return Et(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Df()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Df(),n=br({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=Df();return i=ge.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Et(this,void 0,void 0,function*(){const e=xT++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Ct.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Ct.makeError("network block skew detected",G.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(f=>(!f||f.blockNumber==null||(this._emitted["t:"+s]=f.blockNumber,this.emit(s,f)),null)).catch(f=>{this.emit("error",f)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const f=this.getLogs(s).then(p=>{i._inflight=!1,p.length!==0&&p.forEach(b=>{b.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=b.blockNumber),this._emitted["b:"+b.blockHash]=b.blockNumber,this._emitted["t:"+b.transactionHash]=b.blockNumber,this.emit(s,b)})}).catch(p=>{this.emit("error",p),i._inflight=!1});r.push(f)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Et(this,void 0,void 0,function*(){return Ct.throwError("provider does not support network detection",G.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Et(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield J1(0),this._network;const n=Ct.makeError("underlying network changed",G.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Df();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Df(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Et(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return Et(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,f)=>{const p=[];let b=!1;const x=function(){return b?!0:(b=!0,p.forEach(S=>{S()}),!1)},_=S=>{S.confirmations<r||x()||o(S)};if(this.on(e,_),p.push(()=>{this.removeListener(e,_)}),i){let S=i.startBlock,M=null;const N=k=>Et(this,void 0,void 0,function*(){b||(yield J1(1e3),this.getTransactionCount(i.from).then(I=>Et(this,void 0,void 0,function*(){if(!b){if(I<=i.nonce)S=k;else{{const C=yield this.getTransaction(e);if(C&&C.blockNumber!=null)return}for(M==null&&(M=S-3,M<i.startBlock&&(M=i.startBlock));M<=k;){if(b)return;const C=yield this.getBlockWithTransactions(M);for(let D=0;D<C.transactions.length;D++){const $=C.transactions[D];if($.hash===e)return;if($.from===i.from&&$.nonce===i.nonce){if(b)return;const j=yield this.waitForTransaction($.hash,r);if(x())return;let F="replaced";$.data===i.data&&$.to===i.to&&$.value.eq(i.value)?F="repriced":$.data==="0x"&&$.from===$.to&&$.value.isZero()&&(F="cancelled"),f(Ct.makeError("transaction was replaced",G.errors.TRANSACTION_REPLACED,{cancelled:F==="replaced"||F==="cancelled",reason:F,replacement:this._wrapTransaction($),hash:e,receipt:j}));return}}M++}}b||this.once("block",N)}}),I=>{b||this.once("block",N)}))});if(b)return;this.once("block",N),p.push(()=>{this.removeListener("block",N)})}if(typeof n=="number"&&n>0){const S=setTimeout(()=>{x()||f(Ct.makeError("timeout exceeded",G.errors.TIMEOUT,{timeout:n}))},n);S.unref&&S.unref(),p.push(()=>{clearTimeout(S)})}})})}getBlockNumber(){return Et(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return ge.from(e)}catch(r){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield br({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return ge.from(i)}catch(s){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield br({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return ge.from(i).toNumber()}catch(s){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield br({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return Pe(i)}catch(s){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield br({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>Ku(o))}),s=yield this.perform("getStorageAt",i);try{return Pe(s)}catch(o){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&es(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&Ct.throwError("Transaction hash mismatch from Provider.sendTransaction.",G.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>Et(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let f;s!==0&&n!=null&&(f={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const p=yield this._waitForTransaction(e.hash,s,o,f);return p==null&&s===0?null:(this._emitted["t:"+e.hash]=p.blockNumber,p.status===0&&Ct.throwError("transaction failed",G.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:p}),p)}),i}sendTransaction(e){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>Pe(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return Et(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?ge.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?Pe(s):null))}),this.formatter.transactionRequest(yield br(n))})}_getFilter(e){return Et(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield br(r))})}_call(e,r,n){return Et(this,void 0,void 0,function*(){n>=pT&&Ct.throwError("CCIP read exceeded maximum redirections",G.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&es(s)%32===4)try{const o=Pr(s,4),f=Pr(o,0,32);ge.from(f).eq(i)||Ct.throwError("CCIP Read sender did not match",G.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const p=[],b=ge.from(Pr(o,32,64)).toNumber(),x=ge.from(Pr(o,b,b+32)).toNumber(),_=Pr(o,b+32);for(let C=0;C<x;C++){const D=qc(_,C*32);D==null&&Ct.throwError("CCIP Read contained corrupt URL string",G.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),p.push(D)}const S=Eu(o,64);ge.from(Pr(o,100,128)).isZero()||Ct.throwError("CCIP Read callback selector included junk",G.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const M=Pr(o,96,100),N=Eu(o,128),k=yield this.ccipReadFetch(e,S,p);k==null&&Ct.throwError("CCIP Read disabled or provided no URLs",G.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const I={to:i,data:bn([M,zw([k,N])])};return this._call(I,r,n+1)}catch(o){if(o.code===G.errors.SERVER_ERROR)throw o}try{return Pe(s)}catch(o){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield br({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield br({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return ge.from(n)}catch(i){return Ct.throwError("bad result from backend",G.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return Et(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Ct.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&Ct.throwError("ENS name not configured",G.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Et(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(Tt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Tt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Ct.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return No(()=>Et(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let p=0;p<s.transactions.length;p++){const b=s.transactions[p];if(b.blockNumber==null)b.confirmations=0;else if(b.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let x=o-b.blockNumber+1;x<=0&&(x=1),b.confirmations=x}}const f=this.formatter.blockWithTransactions(s);return f.transactions=f.transactions.map(p=>this._wrapTransaction(p)),f}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Et(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return No(()=>Et(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Et(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return No(()=>Et(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return Et(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield br({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),He.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Et(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Et(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Ct.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Et(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new Sd(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Et(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||Ct.throwError("network does not support ENS",G.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+nu(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Et(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Tt(e))throw n}typeof e!="string"&&Ct.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Et(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=qc(yield this.call({to:n,data:"0x691f3431"+nu(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Et(this,void 0,void 0,function*(){let r=null;if(Tt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new Sd(this,o,s);try{const f=yield r.getAvatar();if(f)return f.url}catch(f){if(f.code!==G.errors.CALL_EXCEPTION)throw f}try{const f=qc(yield this.call({to:o,data:"0x691f3431"+nu(s).substring(2)}),0);r=yield this.getResolver(f)}catch(f){if(f.code!==G.errors.CALL_EXCEPTION)throw f;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return Ct.throwError(e+" not implemented",G.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new mT(ga(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=ga(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=ga(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=ga(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=ga(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=ga(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var gs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Cr=new G(vn),wT=["call","estimateGas"];function ou(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Tt(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=ou(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return ou(JSON.parse(t),e)}catch{}return null}function Hw(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=ou(e,!0);if(s)return s.data;Cr.throwError("missing revert data in call exception; Transaction reverted without a reason string",G.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=ou(e.body,!1);s==null&&(s=ou(e,!1)),s&&Cr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",G.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===G.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Cr.throwError("insufficient funds for intrinsic transaction cost",G.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&Cr.throwError("nonce has already been used",G.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Cr.throwError("replacement fee too low",G.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&Cr.throwError("legacy pre-eip-155 transactions not supported",G.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),wT.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Cr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",G.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function Q1(t){return new Promise(function(e){setTimeout(e,t)})}function _T(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Uf(t){return t&&t.toLowerCase()}const Md={};class fg extends Rs{constructor(e,r,n){if(super(),e!==Md)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ie(this,"provider",r),n==null&&(n=0),typeof n=="string"?(ie(this,"_address",this.provider.formatter.address(n)),ie(this,"_index",null)):typeof n=="number"?(ie(this,"_index",n),ie(this,"_address",null)):Cr.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Cr.throwError("cannot alter JSON-RPC Signer connection",G.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new ET(Md,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Cr.throwError("unknown account #"+this._index,G.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=fr(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=fr(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>gs(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&Cr.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),br({tx:br(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&Cr.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Cr.throwError("user rejected transaction",G.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Hw("sendTransaction",o,s)))})}signTransaction(e){return Cr.throwError("signing transactions is unsupported",G.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return gs(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield No(()=>gs(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return gs(this,void 0,void 0,function*(){const r=typeof e=="string"?Ir(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Pe(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Cr.throwError("user rejected signing",G.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return gs(this,void 0,void 0,function*(){const r=typeof e=="string"?Ir(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),Pe(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Cr.throwError("user rejected signing",G.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return gs(this,void 0,void 0,function*(){const i=yield Wr.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Wr.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Cr.throwError("user rejected signing",G.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return gs(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class ET extends fg{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const AT={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class qo extends ph{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Zr(this.constructor,"defaultUrl")()),typeof e=="string"?ie(this,"connection",Object.freeze({url:e})):ie(this,"connection",Object.freeze(fr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return gs(this,void 0,void 0,function*(){yield Q1(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Zr(this.constructor,"getNetwork");try{return r(ge.from(e).toNumber())}catch(n){return Cr.throwError("could not detect network",G.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Cr.throwError("could not detect network",G.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new fg(Md,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:_n(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Af(this.connection,JSON.stringify(n),_T).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Uf(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Uf(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Uf(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Uf(r.address),ar(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":{const n=Zr(this.constructor,"hexlifyTransaction");return["eth_call",[n(r.transaction,{from:!0}),r.blockTag]]}case"estimateGas":{const n=Zr(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[n(r.transaction,{from:!0})]]}case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Uf(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return gs(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&ge.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=fr(r),r.transaction=fr(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&Cr.throwError(e+" not implemented",G.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Hw(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(f){e._emitted["t:"+f.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(f).then(function(p){return e.emit("pending",p),null})})}),o.then(function(){return Q1(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=fr(AT);if(r)for(const s in r)r[s]&&(n[s]=!0);Dp(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=Ku(ge.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=Pe(e[s]))}),e.accessList&&(i.accessList=bo(e.accessList)),i}}let au=null;try{if(au=WebSocket,au==null)throw new Error("inject please")}catch{const e=new G(vn);au=function(){e.throwError("WebSockets not supported in this environment",G.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var A0=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const mc=new G(vn);let ST=1;class gh extends qo{constructor(e,r){r==="any"&&mc.throwError("WebSocketProvider does not support 'any' network yet",G.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?ie(this,"_websocket",new au(this.connection.url)):ie(this,"_websocket",e),ie(this,"_requests",{}),ie(this,"_subs",{}),ie(this,"_subIds",{}),ie(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const f=String(o.id),p=this._requests[f];if(delete this._requests[f],o.result!==void 0)p.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(p.payload),response:o.result,provider:this});else{let b=null;o.error?(b=new Error(o.error.message||"unknown error"),ie(b,"code",o.error.code||null),ie(b,"response",s)):b=new Error("unknown error"),p.callback(b,void 0),this.emit("debug",{action:"response",error:b,request:JSON.parse(p.payload),provider:this})}}else if(o.method==="eth_subscription"){const f=this._subs[o.params.subscription];f&&f.processFunc(o.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){mc.throwError("cannot reset events block on WebSocketProvider",G.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){mc.throwError("cannot set polling interval on WebSocketProvider",G.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return A0(this,void 0,void 0,function*(){return null})}set polling(e){!e||mc.throwError("cannot set polling on WebSocketProvider",G.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=ST++;return new Promise((i,s)=>{function o(p,b){return p?s(p):i(b)}const f=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(f),provider:this}),this._requests[String(n)]={callback:o,payload:f},this._wsReady&&this.websocket.send(f)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return A0(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=ge.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{!s||this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];!n||(delete this._subIds[r],n.then(i=>{!this._subs[i]||(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return A0(this,void 0,void 0,function*(){this.websocket.readyState===au.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var MT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Wf=new G(vn);class Gw extends qo{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return MT(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||Wf.throwError("no network detected",G.errors.UNKNOWN_ERROR,{}),this._network==null&&(ie(this,"_network",r),this.emit("network",r,null))),r})}}class Cs extends Gw{constructor(e,r){Wf.checkAbstract(new.target,Cs),e=Zr(new.target,"getNetwork")(e),r=Zr(new.target,"getApiKey")(r);const n=Zr(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?ie(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{ie(this,i,r[i])})}_startPending(){Wf.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Wf.throwError("API provider does not support signing",G.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return Wf.throwError("not implemented; sub-classes must override getUrl",G.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const em=new G(vn),Kc="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Vw extends gh{constructor(e,r){const n=new ug(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),ie(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===Kc}}class ug extends Cs{static getWebSocketProvider(e,r){return new Vw(e,r)}static getApiKey(e){return e==null?Kc:(e&&typeof e!="string"&&em.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:em.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===Kc&&Vu(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Kc}}const TT=new G(vn),vc="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function PT(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return TT.throwArgumentError("unsupported network","name",t)}class Ww extends Cs{isCommunityResource(){return this.apiKey===vc}static getApiKey(e){return e??vc}static getUrl(e,r){r==null&&(r=vc);const n={allowGzip:!0,url:"https://"+PT(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===vc&&Vu(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var kT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const tm=new G(vn);class Jw extends Cs{static getApiKey(e){return e!=null&&tm.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:tm.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return kT(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var bc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Hs=new G(vn);function rm(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=Ku(Pe(n)):r==="accessList"?n="["+bo(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=Pe(n),e[r]=n)}return e}function IT(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function nm(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function im(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function S0(t,e,r){if(t==="call"&&e.code===G.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),Tt(s))return s;Hs.throwError("missing revert data in call exception",G.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===G.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Hs.throwError("insufficient funds for intrinsic transaction cost",G.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Hs.throwError("nonce has already been used",G.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&Hs.throwError("replacement fee too low",G.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Hs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",G.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class Yw extends ph{constructor(e,r){super(e),ie(this,"baseUrl",this.getBaseUrl()),ie(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Hs.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,o)=>{const f=r[o];return f!=null&&(s+=`&${o}=${f}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return bc(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,o=e==="proxy"?nm:IT;this.emit("debug",{action:"request",request:i,provider:this});const f={url:i,throttleSlotInterval:1e3,throttleCallback:(x,_)=>(this.isCommunityResource()&&Vu(),Promise.resolve(!0))};let p=null;s&&(f.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},p=Object.keys(s).map(x=>`${x}=${s[x]}`).join("&"));const b=yield Af(f,p,o||nm);return this.emit("debug",{action:"response",request:i,response:_n(b),provider:this}),b})}detectNetwork(){return bc(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return bc(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>S0("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=rm(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return S0("call",s,r.transaction)}}case"estimateGas":{const i=rm(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return S0("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=im(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=im(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&Hs.throwError("unsupported topic count",G.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const f=r.filter.topics[0];(typeof f!="string"||f.length!==66)&&Hs.throwError("unsupported topic format",G.errors.UNSUPPORTED_OPERATION,{topic0:f}),i.topic0=f}const s=yield this.fetch("logs",i);let o={};for(let f=0;f<s.length;f++){const p=s[f];if(p.blockHash==null){if(o[p.blockNumber]==null){const b=yield this.getBlock(p.blockNumber);b&&(o[p.blockNumber]=b.hash)}p.blockHash=o[p.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return bc(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(p){o[p]==""&&delete o[p]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const f=this.formatter.transactionResponse(o);return o.timeStamp&&(f.timestamp=parseInt(o.timeStamp)),f})})}isCommunityResource(){return this.apiKey==null}}var ml=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function f(x){try{b(n.next(x))}catch(_){o(_)}}function p(x){try{b(n.throw(x))}catch(_){o(_)}}function b(x){x.done?s(x.value):i(x.value).then(f,p)}b((n=n.apply(t,e||[])).next())})};const Io=new G(vn);function xc(){return new Date().getTime()}function sm(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||Io.throwArgumentError("provider mismatch","networks",t):e=n}return e}function om(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function Ra(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(ge.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>Ra(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=Ra(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let RT=1;function am(t){let e=null,r=null,n=new Promise(o=>{e=function(){r&&(clearTimeout(r),r=null),o()},r=setTimeout(e,t)});const i=o=>(n=n.then(o),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const CT=[G.errors.CALL_EXCEPTION,G.errors.INSUFFICIENT_FUNDS,G.errors.NONCE_EXPIRED,G.errors.REPLACEMENT_UNDERPRICED,G.errors.UNPREDICTABLE_GAS_LIMIT],NT=["address","args","errorArgs","errorSignature","method","transaction"];function wc(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function BT(t,e){return function(r){const n={};r.forEach(s=>{const o=t(s.result);n[o]||(n[o]={count:0,result:s.result}),n[o].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const o=n[i[s]];if(o.count>=e)return o.result}}}function OT(t,e,r){let n=Ra;switch(e){case"getBlockNumber":return function(i){const s=i.map(f=>f.result);let o=om(i.map(f=>f.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=t._highestBlockNumber&&(t._highestBlockNumber=o),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return om(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=fr(i),i.confirmations=-1,Ra(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=fr(i),i.transactions=i.transactions.map(s=>(s=fr(s),s.confirmations=-1,s)),Ra(i))}:n=function(i){return i==null?null:Ra(i)};break;default:throw new Error("unknown method: "+e)}return BT(n,t.quorum)}function Ff(t,e){return ml(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:No(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function LT(t,e,r,n){return ml(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&Tt(n.blockTag)&&(i=yield Ff(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&Tt(n.blockTag)&&(i=yield Ff(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&Tt(n.blockTag)&&(i=yield Ff(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&Tt(n.blockTag)&&(i=yield Ff(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&Tt(s.fromBlock)||s.toBlock&&Tt(s.toBlock))&&(i=yield Ff(t,e)),i.getLogs(s)}}return Io.throwError("unknown method error",G.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Zw extends ph{constructor(e,r){e.length===0&&Io.throwArgumentError("missing providers","providers",e);const n=e.map((o,f)=>{if(ra.isProvider(o)){const x=Ad(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:x,priority:1})}const p=fr(o);p.priority==null&&(p.priority=1),p.stallTimeout==null&&(p.stallTimeout=Ad(o)?2e3:750),p.weight==null&&(p.weight=1);const b=p.weight;return(b%1||b>512||b<1)&&Io.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${f}].weight`,b),Object.freeze(p)}),i=n.reduce((o,f)=>o+f.weight,0);r==null?r=i/2:r>i&&Io.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=sm(n.map(o=>o.provider.network));s==null&&(s=new Promise((o,f)=>{setTimeout(()=>{this.detectNetwork().then(o,f)},0)})),super(s),ie(this,"providerConfigs",Object.freeze(n)),ie(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return ml(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return sm(e)})}perform(e,r){return ml(this,void 0,void 0,function*(){if(e==="sendTransaction"){const p=yield Promise.all(this.providerConfigs.map(b=>b.provider.sendTransaction(r.signedTransaction).then(x=>x.hash,x=>x)));for(let b=0;b<p.length;b++){const x=p[b];if(typeof x=="string")return x}throw p[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=OT(this,e,r),i=Rw(this.providerConfigs.map(fr));i.sort((p,b)=>p.priority-b.priority);const s=this._highestBlockNumber;let o=0,f=!0;for(;;){const p=xc();let b=i.filter(M=>M.runner&&p-M.start<M.stallTimeout).reduce((M,N)=>M+N.weight,0);for(;b<this.quorum&&o<i.length;){const M=i[o++],N=RT++;M.start=xc(),M.staller=am(M.stallTimeout),M.staller.wait(()=>{M.staller=null}),M.runner=LT(M,s,e,r).then(k=>{M.done=!0,M.result=k,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:N,backend:wc(M,xc()),request:{method:e,params:_n(r)},provider:this})},k=>{M.done=!0,M.error=k,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:N,backend:wc(M,xc()),request:{method:e,params:_n(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:N,backend:wc(M,null),request:{method:e,params:_n(r)},provider:this}),b+=M.weight}const x=[];i.forEach(M=>{M.done||!M.runner||(x.push(M.runner),M.staller&&x.push(M.staller.getPromise()))}),x.length&&(yield Promise.race(x));const _=i.filter(M=>M.done&&M.error==null);if(_.length>=this.quorum){const M=n(_);if(M!==void 0)return i.forEach(N=>{N.staller&&N.staller.cancel(),N.cancelled=!0}),M;f||(yield am(100).getPromise()),f=!1}const S=i.reduce((M,N)=>{if(!N.done||N.error==null)return M;const k=N.error.code;return CT.indexOf(k)>=0&&(M[k]||(M[k]={error:N.error,weight:0}),M[k].weight+=N.weight),M},{});if(Object.keys(S).forEach(M=>{const N=S[M];if(N.weight<this.quorum)return;i.forEach(C=>{C.staller&&C.staller.cancel(),C.cancelled=!0});const k=N.error,I={};NT.forEach(C=>{k[C]!=null&&(I[C]=k[C])}),Io.throwError(k.reason||k.message,M,I)}),i.filter(M=>!M.done).length===0)break}return i.forEach(p=>{p.staller&&p.staller.cancel(),p.cancelled=!0}),Io.throwError("failed to meet quorum",G.errors.SERVER_ERROR,{method:e,params:r,results:i.map(p=>wc(p)),provider:this})})}}const Xw=null,zc=new G(vn),Jf="84842078b09946638c03157f83405213";class Qw extends gh{constructor(e,r){const n=new cg(e,r),i=n.connection;i.password&&zc.throwError("INFURA WebSocket project secrets unsupported",G.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),ie(this,"apiKey",n.projectId),ie(this,"projectId",n.projectId),ie(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===Jf}}class cg extends Cs{static getWebSocketProvider(e,r){return new Qw(e,r)}static getApiKey(e){const r={apiKey:Jf,projectId:Jf,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(zc.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),zc.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:zc.throwError("unsupported network",G.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,o)=>(r.projectId===Jf&&Vu(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===Jf}}class DT extends qo{send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((o,f)=>{i.resolve=o,i.reject=f});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const o=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const f=o.map(p=>p.request);return this.emit("debug",{action:"requestBatch",request:_n(f),provider:this}),Af(this.connection,JSON.stringify(f)).then(p=>{this.emit("debug",{action:"response",request:f,response:p,provider:this}),o.forEach((b,x)=>{const _=p[x];if(_.error){const S=new Error(_.error.message);S.code=_.error.code,S.data=_.error.data,b.reject(S)}else b.resolve(_.result)})},p=>{this.emit("debug",{action:"response",error:p,request:f,provider:this}),o.forEach(b=>{b.reject(p)})})},10)),s}}const M0=new G(vn),UT="ETHERS_JS_SHARED";class e2 extends Cs{static getApiKey(e){return e&&typeof e!="string"&&M0.throwArgumentError("invalid apiKey","apiKey",e),e||UT}static getUrl(e,r){M0.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:M0.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const fm=new G(vn),um="62e1ad51b37b8e00394bda3b";class t2 extends Cs{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=um:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:fm.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:fm.throwError("unsupported network",G.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===um}}const cm=new G(vn);let FT=1;function lm(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:FT++,jsonrpc:"2.0"};return new Promise((o,f)=>{this.emit("debug",{action:"request",fetcher:r,request:_n(s),provider:this}),e(s,(p,b)=>{if(p)return this.emit("debug",{action:"response",fetcher:r,error:p,request:s,provider:this}),f(p);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:b,provider:this}),b.error){const x=new Error(b.error.message);return x.code=b.error.code,x.data=b.error.data,f(x)}o(b.result)})})}}function $T(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:_n(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class r2 extends qo{constructor(e,r){e==null&&cm.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=$T(e)):e.sendAsync?i=lm(e,e.sendAsync.bind(e)):e.send?i=lm(e,e.send.bind(e)):cm.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),ie(this,"jsonRpcFetchFunc",i),ie(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const hm=new G(vn);function lg(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new qo(t);case"ws":case"wss":return new gh(t);default:hm.throwArgumentError("unsupported URL scheme","network",t)}}const r=ag(t);return(!r||!r._defaultProvider)&&hm.throwError("unsupported getDefaultProvider network",G.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:Zw,AlchemyProvider:ug,AnkrProvider:Ww,CloudflareProvider:Jw,EtherscanProvider:Yw,InfuraProvider:cg,JsonRpcProvider:qo,NodesmithProvider:e2,PocketProvider:t2,Web3Provider:r2,IpcProvider:Xw},e)}var n2=Object.freeze(Object.defineProperty({__proto__:null,Provider:ra,BaseProvider:ph,Resolver:Sd,UrlJsonRpcProvider:Cs,FallbackProvider:Zw,AlchemyProvider:ug,AlchemyWebSocketProvider:Vw,AnkrProvider:Ww,CloudflareProvider:Jw,EtherscanProvider:Yw,InfuraProvider:cg,InfuraWebSocketProvider:Qw,JsonRpcProvider:qo,JsonRpcBatchProvider:DT,NodesmithProvider:e2,PocketProvider:t2,StaticJsonRpcProvider:Gw,Web3Provider:r2,WebSocketProvider:gh,IpcProvider:Xw,JsonRpcSigner:fg,getDefaultProvider:lg,getNetwork:ag,isCommunityResource:Ad,isCommunityResourcable:qw,showThrottleMessage:Vu,Formatter:He},Symbol.toStringTag,{value:"Module"}));const jT="solidity/5.7.0",qT=new RegExp("^bytes([0-9]+)$"),KT=new RegExp("^(u?int)([0-9]*)$"),zT=new RegExp("^(.*)\\[([0-9]*)\\]$"),HT="0000000000000000000000000000000000000000000000000000000000000000",Ma=new G(jT);function i2(t,e,r){switch(t){case"address":return r?eu(e,32):ye(e);case"string":return Ir(e);case"bytes":return ye(e);case"bool":return e=e?"0x01":"0x00",r?eu(e,32):ye(e)}let n=t.match(KT);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&Ma.throwArgumentError("invalid number type","type",t),r&&(i=256),e=ge.from(e).toTwos(i),eu(e,i/8)}if(n=t.match(qT),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&Ma.throwArgumentError("invalid bytes type","type",t),ye(e).byteLength!==i&&Ma.throwArgumentError(`invalid value for ${t}`,"value",e),r?ye((e+HT).substring(0,66)):e}if(n=t.match(zT),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&Ma.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(f){o.push(i2(i,f,!0))}),or(o)}return Ma.throwArgumentError("invalid type","type",t)}function hg(t,e){t.length!=e.length&&Ma.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push(i2(n,e[i]))}),Pe(or(r))}function GT(t,e){return er(hg(t,e))}function VT(t,e){return Ts(hg(t,e))}const WT="units/5.7.0",s2=new G(WT),o2=["wei","kwei","mwei","gwei","szabo","finney","ether"];function JT(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&s2.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;r.length;)if(r.length<=3){s.unshift(r);break}else{const o=r.length-3;s.unshift(r.substring(o)),r=r.substring(0,o)}return n+s.join(",")+i}function a2(t,e){if(typeof e=="string"){const r=o2.indexOf(e);r!==-1&&(e=3*r)}return Dc(t,e??18)}function f2(t,e){if(typeof t!="string"&&s2.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=o2.indexOf(e);r!==-1&&(e=3*r)}return Bi(t,e??18)}function YT(t){return a2(t,18)}function ZT(t){return f2(t,18)}var u2=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Qx,defaultAbiCoder:ew,Fragment:Fi,ConstructorFragment:wi,ErrorFragment:ms,EventFragment:Ui,FunctionFragment:_i,ParamType:Ur,FormatTypes:Ht,checkResultErrors:Dx,Logger:G,RLP:xM,_fetchData:Fw,fetchJson:Af,poll:No,checkProperties:Dp,deepCopy:_n,defineReadOnly:ie,getStatic:Zr,resolveProperties:br,shallowCopy:fr,arrayify:ye,concat:or,stripZeros:Hi,zeroPad:eu,isBytes:mo,isBytesLike:qu,defaultPath:Xa,HDNode:jn,SigningKey:Lo,Interface:yd,LogDescription:lw,TransactionDescription:hw,base58:Ya,base64:f7,hexlify:Pe,isHexString:Tt,hexConcat:bn,hexStripZeros:Px,hexValue:Ku,hexZeroPad:ar,hexDataLength:es,hexDataSlice:Pr,nameprep:i7,_toEscapedUtf8String:KM,toUtf8Bytes:Ir,toUtf8CodePoints:al,toUtf8String:ta,Utf8ErrorFuncs:Zx,formatBytes32String:zM,parseBytes32String:HM,dnsEncode:aw,hashMessage:Wp,namehash:nu,isValidName:C7,id:Zs,_TypedDataEncoder:Wr,getAddress:Zt,getIcapAddress:SM,getContractAddress:oh,getCreate2Address:MM,isAddress:AM,formatEther:YT,parseEther:ZT,formatUnits:a2,parseUnits:f2,commify:JT,computeHmac:wu,keccak256:er,ripemd160:Tw,sha256:Ts,sha512:_9,randomBytes:Ia,shuffled:Rw,solidityPack:hg,solidityKeccak256:GT,soliditySha256:VT,splitSignature:Qo,joinSignature:dd,accessListify:bo,parseTransaction:ww,serializeTransaction:xd,get TransactionTypes(){return bd},getJsonWalletAddress:U9,computeAddress:eo,recoverAddress:Gu,computePublicKey:Xp,recoverPublicKey:yw,verifyMessage:Z9,verifyTypedData:X9,getAccountPath:C9,mnemonicToEntropy:lh,entropyToMnemonic:hh,isValidMnemonic:R9,mnemonicToSeed:Iw,get SupportedAlgorithm(){return Za},get UnicodeNormalizationForm(){return ts},get Utf8ErrorReason(){return Pn},Indexed:ul},Symbol.toStringTag,{value:"Module"}));const dg="ethers/5.7.2",c2=new G(dg);var l2=Object.freeze(Object.defineProperty({__proto__:null,Signer:Rs,Wallet:zs,VoidSigner:Hu,getDefaultProvider:lg,providers:n2,BaseContract:eg,Contract:dl,ContractFactory:Sw,BigNumber:ge,FixedNumber:Dr,constants:Wx,get errors(){return Fn},logger:c2,utils:u2,wordlists:pl,version:dg,Wordlist:ia},Symbol.toStringTag,{value:"Module"}));try{const t=window;t._ethers==null&&(t._ethers=l2)}catch{}var XT=Object.freeze(Object.defineProperty({__proto__:null,ethers:l2,Signer:Rs,Wallet:zs,VoidSigner:Hu,getDefaultProvider:lg,providers:n2,BaseContract:eg,Contract:dl,ContractFactory:Sw,BigNumber:ge,FixedNumber:Dr,constants:Wx,get errors(){return Fn},logger:c2,utils:u2,wordlists:pl,version:dg,Wordlist:ia},Symbol.toStringTag,{value:"Module"})),yh=Cd(XT),h2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pf,"__esModule",{value:!0});const QT=h2(_p),eP=h2(Yb),T0=yh;class tP extends QT.default{get publicKey(){return Buffer.from(this.pk,"hex")}constructor(e){const r=Buffer.from(e,"hex"),n=eP.default.publicKeyCreate(r,!1);super(e,Buffer.from(n))}sign(e){return new T0.ethers.Wallet(this._key).signMessage(e).then(n=>Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){const i=T0.ethers.utils.computeAddress(e);return T0.ethers.utils.verifyMessage(r,n)===i}}pf.default=tP;var pg={},gg={},mh={},d2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mh,"__esModule",{value:!0});const P0=Sn,rP=d2(Go),nP=d2(ki.exports),dm=Yo;class iP{constructor(e,r){this._key=e,this.pk=r,this.signatureType=1,this.ownerLength=dm.SIG_CONFIG[1].pubLength,this.signatureLength=dm.SIG_CONFIG[1].sigLength,r||(this.pk=P0.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return P0.createSign("sha256").update(e).sign({key:this._key,padding:P0.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await rP.default.crypto.verify(Buffer.isBuffer(e)?nP.default.encode(e):e,r,n)}}mh.default=iP;var Qa={},p2={},yg={exports:{}};(function(t){(function(e,r){function n(T,h){if(!T)throw new Error(h||"Assertion failed")}function i(T,h){T.super_=h;var c=function(){};c.prototype=h.prototype,T.prototype=new c,T.prototype.constructor=T}function s(T,h,c){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((h==="le"||h==="be")&&(c=h,h=10),this._init(T||0,h||10,c||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(h){return h instanceof s?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===s.wordSize&&Array.isArray(h.words)},s.max=function(h,c){return h.cmp(c)>0?h:c},s.min=function(h,c){return h.cmp(c)<0?h:c},s.prototype._init=function(h,c,a){if(typeof h=="number")return this._initNumber(h,c,a);if(typeof h=="object")return this._initArray(h,c,a);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),h=h.toString().replace(/\s+/g,"");var u=0;h[0]==="-"&&(u++,this.negative=1),u<h.length&&(c===16?this._parseHex(h,u,a):(this._parseBase(h,c,u),a==="le"&&this._initArray(this.toArray(),c,a)))},s.prototype._initNumber=function(h,c,a){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(n(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),c,a)},s.prototype._initArray=function(h,c,a){if(n(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var y,m,w=0;if(a==="be")for(u=h.length-1,y=0;u>=0;u-=3)m=h[u]|h[u-1]<<8|h[u-2]<<16,this.words[y]|=m<<w&67108863,this.words[y+1]=m>>>26-w&67108863,w+=24,w>=26&&(w-=26,y++);else if(a==="le")for(u=0,y=0;u<h.length;u+=3)m=h[u]|h[u+1]<<8|h[u+2]<<16,this.words[y]|=m<<w&67108863,this.words[y+1]=m>>>26-w&67108863,w+=24,w>=26&&(w-=26,y++);return this.strip()};function f(T,h){var c=T.charCodeAt(h);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function p(T,h,c){var a=f(T,c);return c-1>=h&&(a|=f(T,c-1)<<4),a}s.prototype._parseHex=function(h,c,a){this.length=Math.ceil((h.length-c)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var y=0,m=0,w;if(a==="be")for(u=h.length-1;u>=c;u-=2)w=p(h,c,u)<<y,this.words[m]|=w&67108863,y>=18?(y-=18,m+=1,this.words[m]|=w>>>26):y+=8;else{var v=h.length-c;for(u=v%2===0?c+1:c;u<h.length;u+=2)w=p(h,c,u)<<y,this.words[m]|=w&67108863,y>=18?(y-=18,m+=1,this.words[m]|=w>>>26):y+=8}this.strip()};function b(T,h,c,a){for(var u=0,y=Math.min(T.length,c),m=h;m<y;m++){var w=T.charCodeAt(m)-48;u*=a,w>=49?u+=w-49+10:w>=17?u+=w-17+10:u+=w}return u}s.prototype._parseBase=function(h,c,a){this.words=[0],this.length=1;for(var u=0,y=1;y<=67108863;y*=c)u++;u--,y=y/c|0;for(var m=h.length-a,w=m%u,v=Math.min(m,m-w)+a,l=0,g=a;g<v;g+=u)l=b(h,g,g+u,c),this.imuln(y),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(w!==0){var d=1;for(l=b(h,g,h.length,c),g=0;g<w;g++)d*=c;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},s.prototype.copy=function(h){h.words=new Array(this.length);for(var c=0;c<this.length;c++)h.words[c]=this.words[c];h.length=this.length,h.negative=this.negative,h.red=this.red},s.prototype.clone=function(){var h=new s(null);return this.copy(h),h},s.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(h,c){h=h||10,c=c|0||1;var a;if(h===16||h==="hex"){a="";for(var u=0,y=0,m=0;m<this.length;m++){var w=this.words[m],v=((w<<u|y)&16777215).toString(16);y=w>>>24-u&16777215,y!==0||m!==this.length-1?a=x[6-v.length]+v+a:a=v+a,u+=2,u>=26&&(u-=26,m--)}for(y!==0&&(a=y.toString(16)+a);a.length%c!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(h===(h|0)&&h>=2&&h<=36){var l=_[h],g=S[h];a="";var d=this.clone();for(d.negative=0;!d.isZero();){var E=d.modn(g).toString(h);d=d.idivn(g),d.isZero()?a=E+a:a=x[l-E.length]+E+a}for(this.isZero()&&(a="0"+a);a.length%c!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(h,c){return n(typeof o<"u"),this.toArrayLike(o,h,c)},s.prototype.toArray=function(h,c){return this.toArrayLike(Array,h,c)},s.prototype.toArrayLike=function(h,c,a){var u=this.byteLength(),y=a||Math.max(1,u);n(u<=y,"byte array longer than desired length"),n(y>0,"Requested array length <= 0"),this.strip();var m=c==="le",w=new h(y),v,l,g=this.clone();if(m){for(l=0;!g.isZero();l++)v=g.andln(255),g.iushrn(8),w[l]=v;for(;l<y;l++)w[l]=0}else{for(l=0;l<y-u;l++)w[l]=0;for(l=0;!g.isZero();l++)v=g.andln(255),g.iushrn(8),w[y-l-1]=v}return w},Math.clz32?s.prototype._countBits=function(h){return 32-Math.clz32(h)}:s.prototype._countBits=function(h){var c=h,a=0;return c>=4096&&(a+=13,c>>>=13),c>=64&&(a+=7,c>>>=7),c>=8&&(a+=4,c>>>=4),c>=2&&(a+=2,c>>>=2),a+c},s.prototype._zeroBits=function(h){if(h===0)return 26;var c=h,a=0;return(c&8191)===0&&(a+=13,c>>>=13),(c&127)===0&&(a+=7,c>>>=7),(c&15)===0&&(a+=4,c>>>=4),(c&3)===0&&(a+=2,c>>>=2),(c&1)===0&&a++,a},s.prototype.bitLength=function(){var h=this.words[this.length-1],c=this._countBits(h);return(this.length-1)*26+c};function M(T){for(var h=new Array(T.bitLength()),c=0;c<h.length;c++){var a=c/26|0,u=c%26;h[c]=(T.words[a]&1<<u)>>>u}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,c=0;c<this.length;c++){var a=this._zeroBits(this.words[c]);if(h+=a,a!==26)break}return h},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},s.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var c=0;c<h.length;c++)this.words[c]=this.words[c]|h.words[c];return this.strip()},s.prototype.ior=function(h){return n((this.negative|h.negative)===0),this.iuor(h)},s.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},s.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},s.prototype.iuand=function(h){var c;this.length>h.length?c=h:c=this;for(var a=0;a<c.length;a++)this.words[a]=this.words[a]&h.words[a];return this.length=c.length,this.strip()},s.prototype.iand=function(h){return n((this.negative|h.negative)===0),this.iuand(h)},s.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},s.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},s.prototype.iuxor=function(h){var c,a;this.length>h.length?(c=this,a=h):(c=h,a=this);for(var u=0;u<a.length;u++)this.words[u]=c.words[u]^a.words[u];if(this!==c)for(;u<c.length;u++)this.words[u]=c.words[u];return this.length=c.length,this.strip()},s.prototype.ixor=function(h){return n((this.negative|h.negative)===0),this.iuxor(h)},s.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},s.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},s.prototype.inotn=function(h){n(typeof h=="number"&&h>=0);var c=Math.ceil(h/26)|0,a=h%26;this._expand(c),a>0&&c--;for(var u=0;u<c;u++)this.words[u]=~this.words[u]&67108863;return a>0&&(this.words[u]=~this.words[u]&67108863>>26-a),this.strip()},s.prototype.notn=function(h){return this.clone().inotn(h)},s.prototype.setn=function(h,c){n(typeof h=="number"&&h>=0);var a=h/26|0,u=h%26;return this._expand(a+1),c?this.words[a]=this.words[a]|1<<u:this.words[a]=this.words[a]&~(1<<u),this.strip()},s.prototype.iadd=function(h){var c;if(this.negative!==0&&h.negative===0)return this.negative=0,c=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,c=this.isub(h),h.negative=1,c._normSign();var a,u;this.length>h.length?(a=this,u=h):(a=h,u=this);for(var y=0,m=0;m<u.length;m++)c=(a.words[m]|0)+(u.words[m]|0)+y,this.words[m]=c&67108863,y=c>>>26;for(;y!==0&&m<a.length;m++)c=(a.words[m]|0)+y,this.words[m]=c&67108863,y=c>>>26;if(this.length=a.length,y!==0)this.words[this.length]=y,this.length++;else if(a!==this)for(;m<a.length;m++)this.words[m]=a.words[m];return this},s.prototype.add=function(h){var c;return h.negative!==0&&this.negative===0?(h.negative=0,c=this.sub(h),h.negative^=1,c):h.negative===0&&this.negative!==0?(this.negative=0,c=h.sub(this),this.negative=1,c):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},s.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var c=this.iadd(h);return h.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var a=this.cmp(h);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var u,y;a>0?(u=this,y=h):(u=h,y=this);for(var m=0,w=0;w<y.length;w++)c=(u.words[w]|0)-(y.words[w]|0)+m,m=c>>26,this.words[w]=c&67108863;for(;m!==0&&w<u.length;w++)c=(u.words[w]|0)+m,m=c>>26,this.words[w]=c&67108863;if(m===0&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(h){return this.clone().isub(h)};function N(T,h,c){c.negative=h.negative^T.negative;var a=T.length+h.length|0;c.length=a,a=a-1|0;var u=T.words[0]|0,y=h.words[0]|0,m=u*y,w=m&67108863,v=m/67108864|0;c.words[0]=w;for(var l=1;l<a;l++){for(var g=v>>>26,d=v&67108863,E=Math.min(l,h.length-1),L=Math.max(0,l-T.length+1);L<=E;L++){var U=l-L|0;u=T.words[U]|0,y=h.words[L]|0,m=u*y+d,g+=m/67108864|0,d=m&67108863}c.words[l]=d|0,v=g|0}return v!==0?c.words[l]=v|0:c.length--,c.strip()}var k=function(h,c,a){var u=h.words,y=c.words,m=a.words,w=0,v,l,g,d=u[0]|0,E=d&8191,L=d>>>13,U=u[1]|0,K=U&8191,re=U>>>13,oe=u[2]|0,Y=oe&8191,be=oe>>>13,Fe=u[3]|0,he=Fe&8191,Je=Fe>>>13,rt=u[4]|0,Se=rt&8191,Ve=rt>>>13,vt=u[5]|0,ke=vt&8191,Ze=vt>>>13,it=u[6]|0,Ie=it&8191,lt=it>>>13,ht=u[7]|0,Ee=ht&8191,dt=ht>>>13,st=u[8]|0,Me=st&8191,ot=st>>>13,pt=u[9]|0,Re=pt&8191,at=pt>>>13,ft=y[0]|0,_e=ft&8191,et=ft>>>13,Xe=y[1]|0,xe=Xe&8191,nt=Xe>>>13,tt=y[2]|0,we=tt&8191,ut=tt>>>13,gt=y[3]|0,Ce=gt&8191,bt=gt>>>13,Ye=y[4]|0,me=Ye&8191,Qe=Ye>>>13,ct=y[5]|0,Ae=ct&8191,yt=ct>>>13,xt=y[6]|0,de=xt&8191,mt=xt>>>13,P=y[7]|0,R=P&8191,B=P>>>13,A=y[8]|0,O=A&8191,H=A>>>13,W=y[9]|0,J=W&8191,ne=W>>>13;a.negative=h.negative^c.negative,a.length=19,v=Math.imul(E,_e),l=Math.imul(E,et),l=l+Math.imul(L,_e)|0,g=Math.imul(L,et);var fe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(fe>>>26)|0,fe&=67108863,v=Math.imul(K,_e),l=Math.imul(K,et),l=l+Math.imul(re,_e)|0,g=Math.imul(re,et),v=v+Math.imul(E,xe)|0,l=l+Math.imul(E,nt)|0,l=l+Math.imul(L,xe)|0,g=g+Math.imul(L,nt)|0;var se=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(se>>>26)|0,se&=67108863,v=Math.imul(Y,_e),l=Math.imul(Y,et),l=l+Math.imul(be,_e)|0,g=Math.imul(be,et),v=v+Math.imul(K,xe)|0,l=l+Math.imul(K,nt)|0,l=l+Math.imul(re,xe)|0,g=g+Math.imul(re,nt)|0,v=v+Math.imul(E,we)|0,l=l+Math.imul(E,ut)|0,l=l+Math.imul(L,we)|0,g=g+Math.imul(L,ut)|0;var wt=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(wt>>>26)|0,wt&=67108863,v=Math.imul(he,_e),l=Math.imul(he,et),l=l+Math.imul(Je,_e)|0,g=Math.imul(Je,et),v=v+Math.imul(Y,xe)|0,l=l+Math.imul(Y,nt)|0,l=l+Math.imul(be,xe)|0,g=g+Math.imul(be,nt)|0,v=v+Math.imul(K,we)|0,l=l+Math.imul(K,ut)|0,l=l+Math.imul(re,we)|0,g=g+Math.imul(re,ut)|0,v=v+Math.imul(E,Ce)|0,l=l+Math.imul(E,bt)|0,l=l+Math.imul(L,Ce)|0,g=g+Math.imul(L,bt)|0;var Be=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(Se,_e),l=Math.imul(Se,et),l=l+Math.imul(Ve,_e)|0,g=Math.imul(Ve,et),v=v+Math.imul(he,xe)|0,l=l+Math.imul(he,nt)|0,l=l+Math.imul(Je,xe)|0,g=g+Math.imul(Je,nt)|0,v=v+Math.imul(Y,we)|0,l=l+Math.imul(Y,ut)|0,l=l+Math.imul(be,we)|0,g=g+Math.imul(be,ut)|0,v=v+Math.imul(K,Ce)|0,l=l+Math.imul(K,bt)|0,l=l+Math.imul(re,Ce)|0,g=g+Math.imul(re,bt)|0,v=v+Math.imul(E,me)|0,l=l+Math.imul(E,Qe)|0,l=l+Math.imul(L,me)|0,g=g+Math.imul(L,Qe)|0;var $e=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(ke,_e),l=Math.imul(ke,et),l=l+Math.imul(Ze,_e)|0,g=Math.imul(Ze,et),v=v+Math.imul(Se,xe)|0,l=l+Math.imul(Se,nt)|0,l=l+Math.imul(Ve,xe)|0,g=g+Math.imul(Ve,nt)|0,v=v+Math.imul(he,we)|0,l=l+Math.imul(he,ut)|0,l=l+Math.imul(Je,we)|0,g=g+Math.imul(Je,ut)|0,v=v+Math.imul(Y,Ce)|0,l=l+Math.imul(Y,bt)|0,l=l+Math.imul(be,Ce)|0,g=g+Math.imul(be,bt)|0,v=v+Math.imul(K,me)|0,l=l+Math.imul(K,Qe)|0,l=l+Math.imul(re,me)|0,g=g+Math.imul(re,Qe)|0,v=v+Math.imul(E,Ae)|0,l=l+Math.imul(E,yt)|0,l=l+Math.imul(L,Ae)|0,g=g+Math.imul(L,yt)|0;var je=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(je>>>26)|0,je&=67108863,v=Math.imul(Ie,_e),l=Math.imul(Ie,et),l=l+Math.imul(lt,_e)|0,g=Math.imul(lt,et),v=v+Math.imul(ke,xe)|0,l=l+Math.imul(ke,nt)|0,l=l+Math.imul(Ze,xe)|0,g=g+Math.imul(Ze,nt)|0,v=v+Math.imul(Se,we)|0,l=l+Math.imul(Se,ut)|0,l=l+Math.imul(Ve,we)|0,g=g+Math.imul(Ve,ut)|0,v=v+Math.imul(he,Ce)|0,l=l+Math.imul(he,bt)|0,l=l+Math.imul(Je,Ce)|0,g=g+Math.imul(Je,bt)|0,v=v+Math.imul(Y,me)|0,l=l+Math.imul(Y,Qe)|0,l=l+Math.imul(be,me)|0,g=g+Math.imul(be,Qe)|0,v=v+Math.imul(K,Ae)|0,l=l+Math.imul(K,yt)|0,l=l+Math.imul(re,Ae)|0,g=g+Math.imul(re,yt)|0,v=v+Math.imul(E,de)|0,l=l+Math.imul(E,mt)|0,l=l+Math.imul(L,de)|0,g=g+Math.imul(L,mt)|0;var We=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(We>>>26)|0,We&=67108863,v=Math.imul(Ee,_e),l=Math.imul(Ee,et),l=l+Math.imul(dt,_e)|0,g=Math.imul(dt,et),v=v+Math.imul(Ie,xe)|0,l=l+Math.imul(Ie,nt)|0,l=l+Math.imul(lt,xe)|0,g=g+Math.imul(lt,nt)|0,v=v+Math.imul(ke,we)|0,l=l+Math.imul(ke,ut)|0,l=l+Math.imul(Ze,we)|0,g=g+Math.imul(Ze,ut)|0,v=v+Math.imul(Se,Ce)|0,l=l+Math.imul(Se,bt)|0,l=l+Math.imul(Ve,Ce)|0,g=g+Math.imul(Ve,bt)|0,v=v+Math.imul(he,me)|0,l=l+Math.imul(he,Qe)|0,l=l+Math.imul(Je,me)|0,g=g+Math.imul(Je,Qe)|0,v=v+Math.imul(Y,Ae)|0,l=l+Math.imul(Y,yt)|0,l=l+Math.imul(be,Ae)|0,g=g+Math.imul(be,yt)|0,v=v+Math.imul(K,de)|0,l=l+Math.imul(K,mt)|0,l=l+Math.imul(re,de)|0,g=g+Math.imul(re,mt)|0,v=v+Math.imul(E,R)|0,l=l+Math.imul(E,B)|0,l=l+Math.imul(L,R)|0,g=g+Math.imul(L,B)|0;var Ge=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,v=Math.imul(Me,_e),l=Math.imul(Me,et),l=l+Math.imul(ot,_e)|0,g=Math.imul(ot,et),v=v+Math.imul(Ee,xe)|0,l=l+Math.imul(Ee,nt)|0,l=l+Math.imul(dt,xe)|0,g=g+Math.imul(dt,nt)|0,v=v+Math.imul(Ie,we)|0,l=l+Math.imul(Ie,ut)|0,l=l+Math.imul(lt,we)|0,g=g+Math.imul(lt,ut)|0,v=v+Math.imul(ke,Ce)|0,l=l+Math.imul(ke,bt)|0,l=l+Math.imul(Ze,Ce)|0,g=g+Math.imul(Ze,bt)|0,v=v+Math.imul(Se,me)|0,l=l+Math.imul(Se,Qe)|0,l=l+Math.imul(Ve,me)|0,g=g+Math.imul(Ve,Qe)|0,v=v+Math.imul(he,Ae)|0,l=l+Math.imul(he,yt)|0,l=l+Math.imul(Je,Ae)|0,g=g+Math.imul(Je,yt)|0,v=v+Math.imul(Y,de)|0,l=l+Math.imul(Y,mt)|0,l=l+Math.imul(be,de)|0,g=g+Math.imul(be,mt)|0,v=v+Math.imul(K,R)|0,l=l+Math.imul(K,B)|0,l=l+Math.imul(re,R)|0,g=g+Math.imul(re,B)|0,v=v+Math.imul(E,O)|0,l=l+Math.imul(E,H)|0,l=l+Math.imul(L,O)|0,g=g+Math.imul(L,H)|0;var qe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(qe>>>26)|0,qe&=67108863,v=Math.imul(Re,_e),l=Math.imul(Re,et),l=l+Math.imul(at,_e)|0,g=Math.imul(at,et),v=v+Math.imul(Me,xe)|0,l=l+Math.imul(Me,nt)|0,l=l+Math.imul(ot,xe)|0,g=g+Math.imul(ot,nt)|0,v=v+Math.imul(Ee,we)|0,l=l+Math.imul(Ee,ut)|0,l=l+Math.imul(dt,we)|0,g=g+Math.imul(dt,ut)|0,v=v+Math.imul(Ie,Ce)|0,l=l+Math.imul(Ie,bt)|0,l=l+Math.imul(lt,Ce)|0,g=g+Math.imul(lt,bt)|0,v=v+Math.imul(ke,me)|0,l=l+Math.imul(ke,Qe)|0,l=l+Math.imul(Ze,me)|0,g=g+Math.imul(Ze,Qe)|0,v=v+Math.imul(Se,Ae)|0,l=l+Math.imul(Se,yt)|0,l=l+Math.imul(Ve,Ae)|0,g=g+Math.imul(Ve,yt)|0,v=v+Math.imul(he,de)|0,l=l+Math.imul(he,mt)|0,l=l+Math.imul(Je,de)|0,g=g+Math.imul(Je,mt)|0,v=v+Math.imul(Y,R)|0,l=l+Math.imul(Y,B)|0,l=l+Math.imul(be,R)|0,g=g+Math.imul(be,B)|0,v=v+Math.imul(K,O)|0,l=l+Math.imul(K,H)|0,l=l+Math.imul(re,O)|0,g=g+Math.imul(re,H)|0,v=v+Math.imul(E,J)|0,l=l+Math.imul(E,ne)|0,l=l+Math.imul(L,J)|0,g=g+Math.imul(L,ne)|0;var ze=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(ze>>>26)|0,ze&=67108863,v=Math.imul(Re,xe),l=Math.imul(Re,nt),l=l+Math.imul(at,xe)|0,g=Math.imul(at,nt),v=v+Math.imul(Me,we)|0,l=l+Math.imul(Me,ut)|0,l=l+Math.imul(ot,we)|0,g=g+Math.imul(ot,ut)|0,v=v+Math.imul(Ee,Ce)|0,l=l+Math.imul(Ee,bt)|0,l=l+Math.imul(dt,Ce)|0,g=g+Math.imul(dt,bt)|0,v=v+Math.imul(Ie,me)|0,l=l+Math.imul(Ie,Qe)|0,l=l+Math.imul(lt,me)|0,g=g+Math.imul(lt,Qe)|0,v=v+Math.imul(ke,Ae)|0,l=l+Math.imul(ke,yt)|0,l=l+Math.imul(Ze,Ae)|0,g=g+Math.imul(Ze,yt)|0,v=v+Math.imul(Se,de)|0,l=l+Math.imul(Se,mt)|0,l=l+Math.imul(Ve,de)|0,g=g+Math.imul(Ve,mt)|0,v=v+Math.imul(he,R)|0,l=l+Math.imul(he,B)|0,l=l+Math.imul(Je,R)|0,g=g+Math.imul(Je,B)|0,v=v+Math.imul(Y,O)|0,l=l+Math.imul(Y,H)|0,l=l+Math.imul(be,O)|0,g=g+Math.imul(be,H)|0,v=v+Math.imul(K,J)|0,l=l+Math.imul(K,ne)|0,l=l+Math.imul(re,J)|0,g=g+Math.imul(re,ne)|0;var Ke=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,v=Math.imul(Re,we),l=Math.imul(Re,ut),l=l+Math.imul(at,we)|0,g=Math.imul(at,ut),v=v+Math.imul(Me,Ce)|0,l=l+Math.imul(Me,bt)|0,l=l+Math.imul(ot,Ce)|0,g=g+Math.imul(ot,bt)|0,v=v+Math.imul(Ee,me)|0,l=l+Math.imul(Ee,Qe)|0,l=l+Math.imul(dt,me)|0,g=g+Math.imul(dt,Qe)|0,v=v+Math.imul(Ie,Ae)|0,l=l+Math.imul(Ie,yt)|0,l=l+Math.imul(lt,Ae)|0,g=g+Math.imul(lt,yt)|0,v=v+Math.imul(ke,de)|0,l=l+Math.imul(ke,mt)|0,l=l+Math.imul(Ze,de)|0,g=g+Math.imul(Ze,mt)|0,v=v+Math.imul(Se,R)|0,l=l+Math.imul(Se,B)|0,l=l+Math.imul(Ve,R)|0,g=g+Math.imul(Ve,B)|0,v=v+Math.imul(he,O)|0,l=l+Math.imul(he,H)|0,l=l+Math.imul(Je,O)|0,g=g+Math.imul(Je,H)|0,v=v+Math.imul(Y,J)|0,l=l+Math.imul(Y,ne)|0,l=l+Math.imul(be,J)|0,g=g+Math.imul(be,ne)|0;var Oe=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,v=Math.imul(Re,Ce),l=Math.imul(Re,bt),l=l+Math.imul(at,Ce)|0,g=Math.imul(at,bt),v=v+Math.imul(Me,me)|0,l=l+Math.imul(Me,Qe)|0,l=l+Math.imul(ot,me)|0,g=g+Math.imul(ot,Qe)|0,v=v+Math.imul(Ee,Ae)|0,l=l+Math.imul(Ee,yt)|0,l=l+Math.imul(dt,Ae)|0,g=g+Math.imul(dt,yt)|0,v=v+Math.imul(Ie,de)|0,l=l+Math.imul(Ie,mt)|0,l=l+Math.imul(lt,de)|0,g=g+Math.imul(lt,mt)|0,v=v+Math.imul(ke,R)|0,l=l+Math.imul(ke,B)|0,l=l+Math.imul(Ze,R)|0,g=g+Math.imul(Ze,B)|0,v=v+Math.imul(Se,O)|0,l=l+Math.imul(Se,H)|0,l=l+Math.imul(Ve,O)|0,g=g+Math.imul(Ve,H)|0,v=v+Math.imul(he,J)|0,l=l+Math.imul(he,ne)|0,l=l+Math.imul(Je,J)|0,g=g+Math.imul(Je,ne)|0;var Ue=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,v=Math.imul(Re,me),l=Math.imul(Re,Qe),l=l+Math.imul(at,me)|0,g=Math.imul(at,Qe),v=v+Math.imul(Me,Ae)|0,l=l+Math.imul(Me,yt)|0,l=l+Math.imul(ot,Ae)|0,g=g+Math.imul(ot,yt)|0,v=v+Math.imul(Ee,de)|0,l=l+Math.imul(Ee,mt)|0,l=l+Math.imul(dt,de)|0,g=g+Math.imul(dt,mt)|0,v=v+Math.imul(Ie,R)|0,l=l+Math.imul(Ie,B)|0,l=l+Math.imul(lt,R)|0,g=g+Math.imul(lt,B)|0,v=v+Math.imul(ke,O)|0,l=l+Math.imul(ke,H)|0,l=l+Math.imul(Ze,O)|0,g=g+Math.imul(Ze,H)|0,v=v+Math.imul(Se,J)|0,l=l+Math.imul(Se,ne)|0,l=l+Math.imul(Ve,J)|0,g=g+Math.imul(Ve,ne)|0;var Te=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Te>>>26)|0,Te&=67108863,v=Math.imul(Re,Ae),l=Math.imul(Re,yt),l=l+Math.imul(at,Ae)|0,g=Math.imul(at,yt),v=v+Math.imul(Me,de)|0,l=l+Math.imul(Me,mt)|0,l=l+Math.imul(ot,de)|0,g=g+Math.imul(ot,mt)|0,v=v+Math.imul(Ee,R)|0,l=l+Math.imul(Ee,B)|0,l=l+Math.imul(dt,R)|0,g=g+Math.imul(dt,B)|0,v=v+Math.imul(Ie,O)|0,l=l+Math.imul(Ie,H)|0,l=l+Math.imul(lt,O)|0,g=g+Math.imul(lt,H)|0,v=v+Math.imul(ke,J)|0,l=l+Math.imul(ke,ne)|0,l=l+Math.imul(Ze,J)|0,g=g+Math.imul(Ze,ne)|0;var Le=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Le>>>26)|0,Le&=67108863,v=Math.imul(Re,de),l=Math.imul(Re,mt),l=l+Math.imul(at,de)|0,g=Math.imul(at,mt),v=v+Math.imul(Me,R)|0,l=l+Math.imul(Me,B)|0,l=l+Math.imul(ot,R)|0,g=g+Math.imul(ot,B)|0,v=v+Math.imul(Ee,O)|0,l=l+Math.imul(Ee,H)|0,l=l+Math.imul(dt,O)|0,g=g+Math.imul(dt,H)|0,v=v+Math.imul(Ie,J)|0,l=l+Math.imul(Ie,ne)|0,l=l+Math.imul(lt,J)|0,g=g+Math.imul(lt,ne)|0;var De=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Re,R),l=Math.imul(Re,B),l=l+Math.imul(at,R)|0,g=Math.imul(at,B),v=v+Math.imul(Me,O)|0,l=l+Math.imul(Me,H)|0,l=l+Math.imul(ot,O)|0,g=g+Math.imul(ot,H)|0,v=v+Math.imul(Ee,J)|0,l=l+Math.imul(Ee,ne)|0,l=l+Math.imul(dt,J)|0,g=g+Math.imul(dt,ne)|0;var Ne=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,v=Math.imul(Re,O),l=Math.imul(Re,H),l=l+Math.imul(at,O)|0,g=Math.imul(at,H),v=v+Math.imul(Me,J)|0,l=l+Math.imul(Me,ne)|0,l=l+Math.imul(ot,J)|0,g=g+Math.imul(ot,ne)|0;var X=(w+v|0)+((l&8191)<<13)|0;w=(g+(l>>>13)|0)+(X>>>26)|0,X&=67108863,v=Math.imul(Re,J),l=Math.imul(Re,ne),l=l+Math.imul(at,J)|0,g=Math.imul(at,ne);var Q=(w+v|0)+((l&8191)<<13)|0;return w=(g+(l>>>13)|0)+(Q>>>26)|0,Q&=67108863,m[0]=fe,m[1]=se,m[2]=wt,m[3]=Be,m[4]=$e,m[5]=je,m[6]=We,m[7]=Ge,m[8]=qe,m[9]=ze,m[10]=Ke,m[11]=Oe,m[12]=Ue,m[13]=Te,m[14]=Le,m[15]=De,m[16]=Ne,m[17]=X,m[18]=Q,w!==0&&(m[19]=w,a.length++),a};Math.imul||(k=N);function I(T,h,c){c.negative=h.negative^T.negative,c.length=T.length+h.length;for(var a=0,u=0,y=0;y<c.length-1;y++){var m=u;u=0;for(var w=a&67108863,v=Math.min(y,h.length-1),l=Math.max(0,y-T.length+1);l<=v;l++){var g=y-l,d=T.words[g]|0,E=h.words[l]|0,L=d*E,U=L&67108863;m=m+(L/67108864|0)|0,U=U+w|0,w=U&67108863,m=m+(U>>>26)|0,u+=m>>>26,m&=67108863}c.words[y]=w,a=m,m=u}return a!==0?c.words[y]=a:c.length--,c.strip()}function C(T,h,c){var a=new D;return a.mulp(T,h,c)}s.prototype.mulTo=function(h,c){var a,u=this.length+h.length;return this.length===10&&h.length===10?a=k(this,h,c):u<63?a=N(this,h,c):u<1024?a=I(this,h,c):a=C(this,h,c),a};function D(T,h){this.x=T,this.y=h}D.prototype.makeRBT=function(h){for(var c=new Array(h),a=s.prototype._countBits(h)-1,u=0;u<h;u++)c[u]=this.revBin(u,a,h);return c},D.prototype.revBin=function(h,c,a){if(h===0||h===a-1)return h;for(var u=0,y=0;y<c;y++)u|=(h&1)<<c-y-1,h>>=1;return u},D.prototype.permute=function(h,c,a,u,y,m){for(var w=0;w<m;w++)u[w]=c[h[w]],y[w]=a[h[w]]},D.prototype.transform=function(h,c,a,u,y,m){this.permute(m,h,c,a,u,y);for(var w=1;w<y;w<<=1)for(var v=w<<1,l=Math.cos(2*Math.PI/v),g=Math.sin(2*Math.PI/v),d=0;d<y;d+=v)for(var E=l,L=g,U=0;U<w;U++){var K=a[d+U],re=u[d+U],oe=a[d+U+w],Y=u[d+U+w],be=E*oe-L*Y;Y=E*Y+L*oe,oe=be,a[d+U]=K+oe,u[d+U]=re+Y,a[d+U+w]=K-oe,u[d+U+w]=re-Y,U!==v&&(be=l*E-g*L,L=l*L+g*E,E=be)}},D.prototype.guessLen13b=function(h,c){var a=Math.max(c,h)|1,u=a&1,y=0;for(a=a/2|0;a;a=a>>>1)y++;return 1<<y+1+u},D.prototype.conjugate=function(h,c,a){if(!(a<=1))for(var u=0;u<a/2;u++){var y=h[u];h[u]=h[a-u-1],h[a-u-1]=y,y=c[u],c[u]=-c[a-u-1],c[a-u-1]=-y}},D.prototype.normalize13b=function(h,c){for(var a=0,u=0;u<c/2;u++){var y=Math.round(h[2*u+1]/c)*8192+Math.round(h[2*u]/c)+a;h[u]=y&67108863,y<67108864?a=0:a=y/67108864|0}return h},D.prototype.convert13b=function(h,c,a,u){for(var y=0,m=0;m<c;m++)y=y+(h[m]|0),a[2*m]=y&8191,y=y>>>13,a[2*m+1]=y&8191,y=y>>>13;for(m=2*c;m<u;++m)a[m]=0;n(y===0),n((y&-8192)===0)},D.prototype.stub=function(h){for(var c=new Array(h),a=0;a<h;a++)c[a]=0;return c},D.prototype.mulp=function(h,c,a){var u=2*this.guessLen13b(h.length,c.length),y=this.makeRBT(u),m=this.stub(u),w=new Array(u),v=new Array(u),l=new Array(u),g=new Array(u),d=new Array(u),E=new Array(u),L=a.words;L.length=u,this.convert13b(h.words,h.length,w,u),this.convert13b(c.words,c.length,g,u),this.transform(w,m,v,l,u,y),this.transform(g,m,d,E,u,y);for(var U=0;U<u;U++){var K=v[U]*d[U]-l[U]*E[U];l[U]=v[U]*E[U]+l[U]*d[U],v[U]=K}return this.conjugate(v,l,u),this.transform(v,l,L,m,u,y),this.conjugate(L,m,u),this.normalize13b(L,u),a.negative=h.negative^c.negative,a.length=h.length+c.length,a.strip()},s.prototype.mul=function(h){var c=new s(null);return c.words=new Array(this.length+h.length),this.mulTo(h,c)},s.prototype.mulf=function(h){var c=new s(null);return c.words=new Array(this.length+h.length),C(this,h,c)},s.prototype.imul=function(h){return this.clone().mulTo(h,this)},s.prototype.imuln=function(h){n(typeof h=="number"),n(h<67108864);for(var c=0,a=0;a<this.length;a++){var u=(this.words[a]|0)*h,y=(u&67108863)+(c&67108863);c>>=26,c+=u/67108864|0,c+=y>>>26,this.words[a]=y&67108863}return c!==0&&(this.words[a]=c,this.length++),this},s.prototype.muln=function(h){return this.clone().imuln(h)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(h){var c=M(h);if(c.length===0)return new s(1);for(var a=this,u=0;u<c.length&&c[u]===0;u++,a=a.sqr());if(++u<c.length)for(var y=a.sqr();u<c.length;u++,y=y.sqr())c[u]!==0&&(a=a.mul(y));return a},s.prototype.iushln=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26,u=67108863>>>26-c<<26-c,y;if(c!==0){var m=0;for(y=0;y<this.length;y++){var w=this.words[y]&u,v=(this.words[y]|0)-w<<c;this.words[y]=v|m,m=w>>>26-c}m&&(this.words[y]=m,this.length++)}if(a!==0){for(y=this.length-1;y>=0;y--)this.words[y+a]=this.words[y];for(y=0;y<a;y++)this.words[y]=0;this.length+=a}return this.strip()},s.prototype.ishln=function(h){return n(this.negative===0),this.iushln(h)},s.prototype.iushrn=function(h,c,a){n(typeof h=="number"&&h>=0);var u;c?u=(c-c%26)/26:u=0;var y=h%26,m=Math.min((h-y)/26,this.length),w=67108863^67108863>>>y<<y,v=a;if(u-=m,u=Math.max(0,u),v){for(var l=0;l<m;l++)v.words[l]=this.words[l];v.length=m}if(m!==0)if(this.length>m)for(this.length-=m,l=0;l<this.length;l++)this.words[l]=this.words[l+m];else this.words[0]=0,this.length=1;var g=0;for(l=this.length-1;l>=0&&(g!==0||l>=u);l--){var d=this.words[l]|0;this.words[l]=g<<26-y|d>>>y,g=d&w}return v&&g!==0&&(v.words[v.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(h,c,a){return n(this.negative===0),this.iushrn(h,c,a)},s.prototype.shln=function(h){return this.clone().ishln(h)},s.prototype.ushln=function(h){return this.clone().iushln(h)},s.prototype.shrn=function(h){return this.clone().ishrn(h)},s.prototype.ushrn=function(h){return this.clone().iushrn(h)},s.prototype.testn=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26,u=1<<c;if(this.length<=a)return!1;var y=this.words[a];return!!(y&u)},s.prototype.imaskn=function(h){n(typeof h=="number"&&h>=0);var c=h%26,a=(h-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(c!==0&&a++,this.length=Math.min(a,this.length),c!==0){var u=67108863^67108863>>>c<<c;this.words[this.length-1]&=u}return this.strip()},s.prototype.maskn=function(h){return this.clone().imaskn(h)},s.prototype.iaddn=function(h){return n(typeof h=="number"),n(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},s.prototype._iaddn=function(h){this.words[0]+=h;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(h){if(n(typeof h=="number"),n(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},s.prototype.addn=function(h){return this.clone().iaddn(h)},s.prototype.subn=function(h){return this.clone().isubn(h)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(h,c,a){var u=h.length+a,y;this._expand(u);var m,w=0;for(y=0;y<h.length;y++){m=(this.words[y+a]|0)+w;var v=(h.words[y]|0)*c;m-=v&67108863,w=(m>>26)-(v/67108864|0),this.words[y+a]=m&67108863}for(;y<this.length-a;y++)m=(this.words[y+a]|0)+w,w=m>>26,this.words[y+a]=m&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,y=0;y<this.length;y++)m=-(this.words[y]|0)+w,w=m>>26,this.words[y]=m&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(h,c){var a=this.length-h.length,u=this.clone(),y=h,m=y.words[y.length-1]|0,w=this._countBits(m);a=26-w,a!==0&&(y=y.ushln(a),u.iushln(a),m=y.words[y.length-1]|0);var v=u.length-y.length,l;if(c!=="mod"){l=new s(null),l.length=v+1,l.words=new Array(l.length);for(var g=0;g<l.length;g++)l.words[g]=0}var d=u.clone()._ishlnsubmul(y,1,v);d.negative===0&&(u=d,l&&(l.words[v]=1));for(var E=v-1;E>=0;E--){var L=(u.words[y.length+E]|0)*67108864+(u.words[y.length+E-1]|0);for(L=Math.min(L/m|0,67108863),u._ishlnsubmul(y,L,E);u.negative!==0;)L--,u.negative=0,u._ishlnsubmul(y,1,E),u.isZero()||(u.negative^=1);l&&(l.words[E]=L)}return l&&l.strip(),u.strip(),c!=="div"&&a!==0&&u.iushrn(a),{div:l||null,mod:u}},s.prototype.divmod=function(h,c,a){if(n(!h.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var u,y,m;return this.negative!==0&&h.negative===0?(m=this.neg().divmod(h,c),c!=="mod"&&(u=m.div.neg()),c!=="div"&&(y=m.mod.neg(),a&&y.negative!==0&&y.iadd(h)),{div:u,mod:y}):this.negative===0&&h.negative!==0?(m=this.divmod(h.neg(),c),c!=="mod"&&(u=m.div.neg()),{div:u,mod:m.mod}):(this.negative&h.negative)!==0?(m=this.neg().divmod(h.neg(),c),c!=="div"&&(y=m.mod.neg(),a&&y.negative!==0&&y.isub(h)),{div:m.div,mod:y}):h.length>this.length||this.cmp(h)<0?{div:new s(0),mod:this}:h.length===1?c==="div"?{div:this.divn(h.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new s(this.modn(h.words[0]))}:this._wordDiv(h,c)},s.prototype.div=function(h){return this.divmod(h,"div",!1).div},s.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},s.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},s.prototype.divRound=function(h){var c=this.divmod(h);if(c.mod.isZero())return c.div;var a=c.div.negative!==0?c.mod.isub(h):c.mod,u=h.ushrn(1),y=h.andln(1),m=a.cmp(u);return m<0||y===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modn=function(h){n(h<=67108863);for(var c=(1<<26)%h,a=0,u=this.length-1;u>=0;u--)a=(c*a+(this.words[u]|0))%h;return a},s.prototype.idivn=function(h){n(h<=67108863);for(var c=0,a=this.length-1;a>=0;a--){var u=(this.words[a]|0)+c*67108864;this.words[a]=u/h|0,c=u%h}return this.strip()},s.prototype.divn=function(h){return this.clone().idivn(h)},s.prototype.egcd=function(h){n(h.negative===0),n(!h.isZero());var c=this,a=h.clone();c.negative!==0?c=c.umod(h):c=c.clone();for(var u=new s(1),y=new s(0),m=new s(0),w=new s(1),v=0;c.isEven()&&a.isEven();)c.iushrn(1),a.iushrn(1),++v;for(var l=a.clone(),g=c.clone();!c.isZero();){for(var d=0,E=1;(c.words[0]&E)===0&&d<26;++d,E<<=1);if(d>0)for(c.iushrn(d);d-- >0;)(u.isOdd()||y.isOdd())&&(u.iadd(l),y.isub(g)),u.iushrn(1),y.iushrn(1);for(var L=0,U=1;(a.words[0]&U)===0&&L<26;++L,U<<=1);if(L>0)for(a.iushrn(L);L-- >0;)(m.isOdd()||w.isOdd())&&(m.iadd(l),w.isub(g)),m.iushrn(1),w.iushrn(1);c.cmp(a)>=0?(c.isub(a),u.isub(m),y.isub(w)):(a.isub(c),m.isub(u),w.isub(y))}return{a:m,b:w,gcd:a.iushln(v)}},s.prototype._invmp=function(h){n(h.negative===0),n(!h.isZero());var c=this,a=h.clone();c.negative!==0?c=c.umod(h):c=c.clone();for(var u=new s(1),y=new s(0),m=a.clone();c.cmpn(1)>0&&a.cmpn(1)>0;){for(var w=0,v=1;(c.words[0]&v)===0&&w<26;++w,v<<=1);if(w>0)for(c.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(m),u.iushrn(1);for(var l=0,g=1;(a.words[0]&g)===0&&l<26;++l,g<<=1);if(l>0)for(a.iushrn(l);l-- >0;)y.isOdd()&&y.iadd(m),y.iushrn(1);c.cmp(a)>=0?(c.isub(a),u.isub(y)):(a.isub(c),y.isub(u))}var d;return c.cmpn(1)===0?d=u:d=y,d.cmpn(0)<0&&d.iadd(h),d},s.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var c=this.clone(),a=h.clone();c.negative=0,a.negative=0;for(var u=0;c.isEven()&&a.isEven();u++)c.iushrn(1),a.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;a.isEven();)a.iushrn(1);var y=c.cmp(a);if(y<0){var m=c;c=a,a=m}else if(y===0||a.cmpn(1)===0)break;c.isub(a)}while(!0);return a.iushln(u)},s.prototype.invm=function(h){return this.egcd(h).a.umod(h)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(h){return this.words[0]&h},s.prototype.bincn=function(h){n(typeof h=="number");var c=h%26,a=(h-c)/26,u=1<<c;if(this.length<=a)return this._expand(a+1),this.words[a]|=u,this;for(var y=u,m=a;y!==0&&m<this.length;m++){var w=this.words[m]|0;w+=y,y=w>>>26,w&=67108863,this.words[m]=w}return y!==0&&(this.words[m]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(h){var c=h<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var a;if(this.length>1)a=1;else{c&&(h=-h),n(h<=67108863,"Number is too big");var u=this.words[0]|0;a=u===h?0:u<h?-1:1}return this.negative!==0?-a|0:a},s.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var c=this.ucmp(h);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var c=0,a=this.length-1;a>=0;a--){var u=this.words[a]|0,y=h.words[a]|0;if(u!==y){u<y?c=-1:u>y&&(c=1);break}}return c},s.prototype.gtn=function(h){return this.cmpn(h)===1},s.prototype.gt=function(h){return this.cmp(h)===1},s.prototype.gten=function(h){return this.cmpn(h)>=0},s.prototype.gte=function(h){return this.cmp(h)>=0},s.prototype.ltn=function(h){return this.cmpn(h)===-1},s.prototype.lt=function(h){return this.cmp(h)===-1},s.prototype.lten=function(h){return this.cmpn(h)<=0},s.prototype.lte=function(h){return this.cmp(h)<=0},s.prototype.eqn=function(h){return this.cmpn(h)===0},s.prototype.eq=function(h){return this.cmp(h)===0},s.red=function(h){return new ee(h)},s.prototype.toRed=function(h){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(h){return this.red=h,this},s.prototype.forceRed=function(h){return n(!this.red,"Already a number in reduction context"),this._forceRed(h)},s.prototype.redAdd=function(h){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},s.prototype.redIAdd=function(h){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},s.prototype.redSub=function(h){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},s.prototype.redISub=function(h){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},s.prototype.redShl=function(h){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},s.prototype.redMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},s.prototype.redIMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(h){return n(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var $={k256:null,p224:null,p192:null,p25519:null};function j(T,h){this.name=T,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var h=new s(null);return h.words=new Array(Math.ceil(this.n/13)),h},j.prototype.ireduce=function(h){var c=h,a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),a=c.bitLength();while(a>this.n);var u=a<this.n?-1:c.ucmp(this.p);return u===0?(c.words[0]=0,c.length=1):u>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},j.prototype.split=function(h,c){h.iushrn(this.n,0,c)},j.prototype.imulK=function(h){return h.imul(this.k)};function F(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,j),F.prototype.split=function(h,c){for(var a=4194303,u=Math.min(h.length,9),y=0;y<u;y++)c.words[y]=h.words[y];if(c.length=u,h.length<=9){h.words[0]=0,h.length=1;return}var m=h.words[9];for(c.words[c.length++]=m&a,y=10;y<h.length;y++){var w=h.words[y]|0;h.words[y-10]=(w&a)<<4|m>>>22,m=w}m>>>=22,h.words[y-10]=m,m===0&&h.length>10?h.length-=10:h.length-=9},F.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var c=0,a=0;a<h.length;a++){var u=h.words[a]|0;c+=u*977,h.words[a]=c&67108863,c=u*64+(c/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function z(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,j);function Z(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(Z,j);function te(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(te,j),te.prototype.imulK=function(h){for(var c=0,a=0;a<h.length;a++){var u=(h.words[a]|0)*19+c,y=u&67108863;u>>>=26,h.words[a]=y,c=u}return c!==0&&(h.words[h.length++]=c),h},s._prime=function(h){if($[h])return $[h];var c;if(h==="k256")c=new F;else if(h==="p224")c=new z;else if(h==="p192")c=new Z;else if(h==="p25519")c=new te;else throw new Error("Unknown prime "+h);return $[h]=c,c};function ee(T){if(typeof T=="string"){var h=s._prime(T);this.m=h.p,this.prime=h}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}ee.prototype._verify1=function(h){n(h.negative===0,"red works only with positives"),n(h.red,"red works only with red numbers")},ee.prototype._verify2=function(h,c){n((h.negative|c.negative)===0,"red works only with positives"),n(h.red&&h.red===c.red,"red works only with red numbers")},ee.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},ee.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},ee.prototype.add=function(h,c){this._verify2(h,c);var a=h.add(c);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},ee.prototype.iadd=function(h,c){this._verify2(h,c);var a=h.iadd(c);return a.cmp(this.m)>=0&&a.isub(this.m),a},ee.prototype.sub=function(h,c){this._verify2(h,c);var a=h.sub(c);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},ee.prototype.isub=function(h,c){this._verify2(h,c);var a=h.isub(c);return a.cmpn(0)<0&&a.iadd(this.m),a},ee.prototype.shl=function(h,c){return this._verify1(h),this.imod(h.ushln(c))},ee.prototype.imul=function(h,c){return this._verify2(h,c),this.imod(h.imul(c))},ee.prototype.mul=function(h,c){return this._verify2(h,c),this.imod(h.mul(c))},ee.prototype.isqr=function(h){return this.imul(h,h.clone())},ee.prototype.sqr=function(h){return this.mul(h,h)},ee.prototype.sqrt=function(h){if(h.isZero())return h.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var a=this.m.add(new s(1)).iushrn(2);return this.pow(h,a)}for(var u=this.m.subn(1),y=0;!u.isZero()&&u.andln(1)===0;)y++,u.iushrn(1);n(!u.isZero());var m=new s(1).toRed(this),w=m.redNeg(),v=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,v).cmp(w)!==0;)l.redIAdd(w);for(var g=this.pow(l,u),d=this.pow(h,u.addn(1).iushrn(1)),E=this.pow(h,u),L=y;E.cmp(m)!==0;){for(var U=E,K=0;U.cmp(m)!==0;K++)U=U.redSqr();n(K<L);var re=this.pow(g,new s(1).iushln(L-K-1));d=d.redMul(re),g=re.redSqr(),E=E.redMul(g),L=K}return d},ee.prototype.invm=function(h){var c=h._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},ee.prototype.pow=function(h,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return h.clone();var a=4,u=new Array(1<<a);u[0]=new s(1).toRed(this),u[1]=h;for(var y=2;y<u.length;y++)u[y]=this.mul(u[y-1],h);var m=u[0],w=0,v=0,l=c.bitLength()%26;for(l===0&&(l=26),y=c.length-1;y>=0;y--){for(var g=c.words[y],d=l-1;d>=0;d--){var E=g>>d&1;if(m!==u[0]&&(m=this.sqr(m)),E===0&&w===0){v=0;continue}w<<=1,w|=E,v++,!(v!==a&&(y!==0||d!==0))&&(m=this.mul(m,u[w]),v=0,w=0)}l=26}return m},ee.prototype.convertTo=function(h){var c=h.umod(this.m);return c===h?c.clone():c},ee.prototype.convertFrom=function(h){var c=h.clone();return c.red=null,c},s.mont=function(h){return new pe(h)};function pe(T){ee.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(pe,ee),pe.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},pe.prototype.convertFrom=function(h){var c=this.imod(h.mul(this.rinv));return c.red=null,c},pe.prototype.imul=function(h,c){if(h.isZero()||c.isZero())return h.words[0]=0,h.length=1,h;var a=h.imul(c),u=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=a.isub(u).iushrn(this.shift),m=y;return y.cmp(this.m)>=0?m=y.isub(this.m):y.cmpn(0)<0&&(m=y.iadd(this.m)),m._forceRed(this)},pe.prototype.mul=function(h,c){if(h.isZero()||c.isZero())return new s(0)._forceRed(this);var a=h.mul(c),u=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=a.isub(u).iushrn(this.shift),m=y;return y.cmp(this.m)>=0?m=y.isub(this.m):y.cmpn(0)<0&&(m=y.iadd(this.m)),m._forceRed(this)},pe.prototype.invm=function(h){var c=this.imod(h._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(t,V)})(yg);var g2={},mg={},Hc=Ho,$a=Hc.Buffer,ti={},ri;for(ri in Hc)!Hc.hasOwnProperty(ri)||ri==="SlowBuffer"||ri==="Buffer"||(ti[ri]=Hc[ri]);var ja=ti.Buffer={};for(ri in $a)!$a.hasOwnProperty(ri)||ri==="allocUnsafe"||ri==="allocUnsafeSlow"||(ja[ri]=$a[ri]);ti.Buffer.prototype=$a.prototype;(!ja.from||ja.from===Uint8Array.from)&&(ja.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return $a(t,e,r)});ja.alloc||(ja.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=$a(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!ti.kStringMaxLength)try{ti.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}ti.constants||(ti.constants={MAX_LENGTH:ti.kMaxLength},ti.kStringMaxLength&&(ti.constants.MAX_STRING_LENGTH=ti.kStringMaxLength));var vg=ti,vh={};const sP=en.exports;function pi(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}vh.Reporter=pi;pi.prototype.isError=function(e){return e instanceof ef};pi.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};pi.prototype.restore=function(e){const r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};pi.prototype.enterKey=function(e){return this._reporterState.path.push(e)};pi.prototype.exitKey=function(e){const r=this._reporterState;r.path=r.path.slice(0,e-1)};pi.prototype.leaveKey=function(e,r,n){const i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[r]=n)};pi.prototype.path=function(){return this._reporterState.path.join("/")};pi.prototype.enterObject=function(){const e=this._reporterState,r=e.obj;return e.obj={},r};pi.prototype.leaveObject=function(e){const r=this._reporterState,n=r.obj;return r.obj=e,n};pi.prototype.error=function(e){let r;const n=this._reporterState,i=e instanceof ef;if(i?r=e:r=new ef(n.path.map(function(s){return"["+JSON.stringify(s)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return i||n.errors.push(r),r};pi.prototype.wrapResult=function(e){const r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function ef(t,e){this.path=t,this.rethrow(e)}sP(ef,Error);ef.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ef),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};var Ko={};const oP=en.exports,bh=vh.Reporter,tf=vg.Buffer;function ai(t,e){if(bh.call(this,e),!tf.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}oP(ai,bh);Ko.DecoderBuffer=ai;ai.isDecoderBuffer=function(e){return e instanceof ai?!0:typeof e=="object"&&tf.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};ai.prototype.save=function(){return{offset:this.offset,reporter:bh.prototype.save.call(this)}};ai.prototype.restore=function(e){const r=new ai(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,bh.prototype.restore.call(this,e.reporter),r};ai.prototype.isEmpty=function(){return this.offset===this.length};ai.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};ai.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");const n=new ai(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};ai.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function rf(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return rf.isEncoderBuffer(r)||(r=new rf(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=tf.byteLength(t);else if(tf.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}Ko.EncoderBuffer=rf;rf.isEncoderBuffer=function(e){return e instanceof rf?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};rf.prototype.join=function(e,r){return e||(e=tf.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):tf.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e};const aP=vh.Reporter,fP=Ko.EncoderBuffer,uP=Ko.DecoderBuffer,An=po,y2=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],cP=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(y2),lP=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function ir(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var bg=ir;const hP=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];ir.prototype.clone=function(){const e=this._baseState,r={};hP.forEach(function(i){r[i]=e[i]});const n=new this.constructor(r.parent);return n._baseState=r,n};ir.prototype._wrap=function(){const e=this._baseState;cP.forEach(function(r){this[r]=function(){const i=new this.constructor(this);return e.children.push(i),i[r].apply(i,arguments)}},this)};ir.prototype._init=function(e){const r=this._baseState;An(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),An.equal(r.children.length,1,"Root node can have only one child")};ir.prototype._useArgs=function(e){const r=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(An(r.children===null),r.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(An(r.args===null),r.args=e,r.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;const s={};return Object.keys(i).forEach(function(o){o==(o|0)&&(o|=0);const f=i[o];s[f]=o}),s}))};lP.forEach(function(t){ir.prototype[t]=function(){const r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});y2.forEach(function(t){ir.prototype[t]=function(){const r=this._baseState,n=Array.prototype.slice.call(arguments);return An(r.tag===null),r.tag=t,this._useArgs(n),this}});ir.prototype.use=function(e){An(e);const r=this._baseState;return An(r.use===null),r.use=e,this};ir.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};ir.prototype.def=function(e){const r=this._baseState;return An(r.default===null),r.default=e,r.optional=!0,this};ir.prototype.explicit=function(e){const r=this._baseState;return An(r.explicit===null&&r.implicit===null),r.explicit=e,this};ir.prototype.implicit=function(e){const r=this._baseState;return An(r.explicit===null&&r.implicit===null),r.implicit=e,this};ir.prototype.obj=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};ir.prototype.key=function(e){const r=this._baseState;return An(r.key===null),r.key=e,this};ir.prototype.any=function(){const e=this._baseState;return e.any=!0,this};ir.prototype.choice=function(e){const r=this._baseState;return An(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};ir.prototype.contains=function(e){const r=this._baseState;return An(r.use===null),r.contains=e,this};ir.prototype._decode=function(e,r){const n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let i=n.default,s=!0,o=null;if(n.key!==null&&(o=e.enterKey(n.key)),n.optional){let p=null;if(n.explicit!==null?p=n.explicit:n.implicit!==null?p=n.implicit:n.tag!==null&&(p=n.tag),p===null&&!n.any){const b=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),s=!0}catch{s=!1}e.restore(b)}else if(s=this._peekTag(e,p,n.any),e.isError(s))return s}let f;if(n.obj&&s&&(f=e.enterObject()),s){if(n.explicit!==null){const b=this._decodeTag(e,n.explicit);if(e.isError(b))return b;e=b}const p=e.offset;if(n.use===null&&n.choice===null){let b;n.any&&(b=e.save());const x=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(x))return x;n.any?i=e.raw(b):e=x}if(r&&r.track&&n.tag!==null&&r.track(e.path(),p,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,r):i=this._decodeChoice(e,r)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(x){x._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){const b=new uP(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(b,r)}}return n.obj&&s&&(i=e.leaveObject(f)),n.key!==null&&(i!==null||s===!0)?e.leaveKey(o,n.key,i):o!==null&&e.exitKey(o),i};ir.prototype._decodeGeneric=function(e,r,n){const i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,i.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&i.args?this._decodeObjid(r,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};ir.prototype._getUse=function(e,r){const n=this._baseState;return n.useDecoder=this._use(e,r),An(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};ir.prototype._decodeChoice=function(e,r){const n=this._baseState;let i=null,s=!1;return Object.keys(n.choice).some(function(o){const f=e.save(),p=n.choice[o];try{const b=p._decode(e,r);if(e.isError(b))return!1;i={type:o,value:b},s=!0}catch{return e.restore(f),!1}return!0},this),s?i:e.error("Choice not matched")};ir.prototype._createEncoderBuffer=function(e){return new fP(e,this.reporter)};ir.prototype._encode=function(e,r,n){const i=this._baseState;if(i.default!==null&&i.default===e)return;const s=this._encodeValue(e,r,n);if(s!==void 0&&!this._skipDefault(s,r,n))return s};ir.prototype._encodeValue=function(e,r,n){const i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,r||new aP);let s=null;if(this.reporter=r,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let o=null,f=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,r);else if(i.contains)o=this._getUse(i.contains,n)._encode(e,r),f=!0;else if(i.children)o=i.children.map(function(p){if(p._baseState.tag==="null_")return p._encode(null,r,e);if(p._baseState.key===null)return r.error("Child should have a key");const b=r.enterKey(p._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");const x=p._encode(e[p._baseState.key],r,e);return r.leaveKey(b),x},this).filter(function(p){return p}),o=this._createEncoderBuffer(o);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return r.error("Too many args for : "+i.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");const p=this.clone();p._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(b){const x=this._baseState;return this._getUse(x.args[0],e)._encode(b,r)},p))}else i.use!==null?s=this._getUse(i.use,n)._encode(e,r):(o=this._encodePrimitive(i.tag,e),f=!0);if(!i.any&&i.choice===null){const p=i.implicit!==null?i.implicit:i.tag,b=i.implicit===null?"universal":"context";p===null?i.use===null&&r.error("Tag could be omitted only for .use()"):i.use===null&&(s=this._encodeComposite(p,f,b,o))}return i.explicit!==null&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s};ir.prototype._encodeChoice=function(e,r){const n=this._baseState,i=n.choice[e.type];return i||An(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,r)};ir.prototype._encodePrimitive=function(e,r){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};ir.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};ir.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var xh={};(function(t){function e(r){const n={};return Object.keys(r).forEach(function(i){(i|0)==i&&(i=i|0);const s=r[i];n[s]=i}),n}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(xh);const dP=en.exports,vs=vg.Buffer,m2=bg,k0=xh;function v2(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Ci,this.tree._init(t.body)}var b2=v2;v2.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function Ci(t){m2.call(this,"der",t)}dP(Ci,m2);Ci.prototype._encodeComposite=function(e,r,n,i){const s=pP(e,r,n,this.reporter);if(i.length<128){const p=vs.alloc(2);return p[0]=s,p[1]=i.length,this._createEncoderBuffer([p,i])}let o=1;for(let p=i.length;p>=256;p>>=8)o++;const f=vs.alloc(1+1+o);f[0]=s,f[1]=128|o;for(let p=1+o,b=i.length;b>0;p--,b>>=8)f[p]=b&255;return this._createEncoderBuffer([f,i])};Ci.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){const n=vs.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};Ci.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let f=0;f<e.length;f++)e[f]|=0}else if(Array.isArray(e)){e=e.slice();for(let f=0;f<e.length;f++)e[f]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let f=0;f<e.length;f++){let p=e[f];for(i++;p>=128;p>>=7)i++}const s=vs.alloc(i);let o=s.length-1;for(let f=e.length-1;f>=0;f--){let p=e[f];for(s[o--]=p&127;(p>>=7)>0;)s[o--]=128|p&127}return this._createEncoderBuffer(s)};function Zn(t){return t<10?"0"+t:t}Ci.prototype._encodeTime=function(e,r){let n;const i=new Date(e);return r==="gentime"?n=[Zn(i.getUTCFullYear()),Zn(i.getUTCMonth()+1),Zn(i.getUTCDate()),Zn(i.getUTCHours()),Zn(i.getUTCMinutes()),Zn(i.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[Zn(i.getUTCFullYear()%100),Zn(i.getUTCMonth()+1),Zn(i.getUTCDate()),Zn(i.getUTCHours()),Zn(i.getUTCMinutes()),Zn(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};Ci.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Ci.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!vs.isBuffer(e)){const s=e.toArray();!e.sign&&s[0]&128&&s.unshift(0),e=vs.from(s)}if(vs.isBuffer(e)){let s=e.length;e.length===0&&s++;const o=vs.alloc(s);return e.copy(o),e.length===0&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let s=e;s>=256;s>>=8)n++;const i=new Array(n);for(let s=i.length-1;s>=0;s--)i[s]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(vs.from(i))};Ci.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Ci.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};Ci.prototype._skipDefault=function(e,r,n){const i=this._baseState;let s;if(i.default===null)return!1;const o=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,r,n).join()),o.length!==i.defaultBuffer.length)return!1;for(s=0;s<o.length;s++)if(o[s]!==i.defaultBuffer[s])return!1;return!0};function pP(t,e,r,n){let i;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),k0.tagByName.hasOwnProperty(t))i=k0.tagByName[t];else if(typeof t=="number"&&(t|0)===t)i=t;else return n.error("Unknown tag: "+t);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=k0.tagClassByName[r||"universal"]<<6,i)}const gP=en.exports,xg=b2;function wg(t){xg.call(this,t),this.enc="pem"}gP(wg,xg);var yP=wg;wg.prototype.encode=function(e,r){const i=xg.prototype.encode.call(this,e).toString("base64"),s=["-----BEGIN "+r.label+"-----"];for(let o=0;o<i.length;o+=64)s.push(i.slice(o,o+64));return s.push("-----END "+r.label+"-----"),s.join(`
`)};(function(t){const e=t;e.der=b2,e.pem=yP})(mg);var _g={};const mP=en.exports,vP=yg.exports,pm=Ko.DecoderBuffer,x2=bg,gm=xh;function w2(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Vn,this.tree._init(t.body)}var _2=w2;w2.prototype.decode=function(e,r){return pm.isDecoderBuffer(e)||(e=new pm(e,r)),this.tree._decode(e,r)};function Vn(t){x2.call(this,"der",t)}mP(Vn,x2);Vn.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;const i=e.save(),s=Eg(e,'Failed to peek tag: "'+r+'"');return e.isError(s)?s:(e.restore(i),s.tag===r||s.tagStr===r||s.tagStr+"of"===r||n)};Vn.prototype._decodeTag=function(e,r,n){const i=Eg(e,'Failed to decode tag of "'+r+'"');if(e.isError(i))return i;let s=E2(e,i.primitive,'Failed to get length of "'+r+'"');if(e.isError(s))return s;if(!n&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(i.primitive||s!==null)return e.skip(s,'Failed to match body of: "'+r+'"');const o=e.save(),f=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(f)?f:(s=e.offset-o.offset,e.restore(o),e.skip(s,'Failed to match body of: "'+r+'"'))};Vn.prototype._skipUntilEnd=function(e,r){for(;;){const n=Eg(e,r);if(e.isError(n))return n;const i=E2(e,n.primitive,r);if(e.isError(i))return i;let s;if(n.primitive||i!==null?s=e.skip(i):s=this._skipUntilEnd(e,r),e.isError(s))return s;if(n.tagStr==="end")break}};Vn.prototype._decodeList=function(e,r,n,i){const s=[];for(;!e.isEmpty();){const o=this._peekTag(e,"end");if(e.isError(o))return o;const f=n.decode(e,"der",i);if(e.isError(f)&&o)break;s.push(f)}return s};Vn.prototype._decodeStr=function(e,r){if(r==="bitstr"){const n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){const n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let s=0;s<n.length/2;s++)i+=String.fromCharCode(n.readUInt16BE(s*2));return i}else if(r==="numstr"){const n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){const n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};Vn.prototype._decodeObjid=function(e,r,n){let i;const s=[];let o=0,f=0;for(;!e.isEmpty();)f=e.readUInt8(),o<<=7,o|=f&127,(f&128)===0&&(s.push(o),o=0);f&128&&s.push(o);const p=s[0]/40|0,b=s[0]%40;if(n?i=s:i=[p,b].concat(s.slice(1)),r){let x=r[i.join(" ")];x===void 0&&(x=r[i.join(".")]),x!==void 0&&(i=x)}return i};Vn.prototype._decodeTime=function(e,r){const n=e.raw().toString();let i,s,o,f,p,b;if(r==="gentime")i=n.slice(0,4)|0,s=n.slice(4,6)|0,o=n.slice(6,8)|0,f=n.slice(8,10)|0,p=n.slice(10,12)|0,b=n.slice(12,14)|0;else if(r==="utctime")i=n.slice(0,2)|0,s=n.slice(2,4)|0,o=n.slice(4,6)|0,f=n.slice(6,8)|0,p=n.slice(8,10)|0,b=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(i,s-1,o,f,p,b,0)};Vn.prototype._decodeNull=function(){return null};Vn.prototype._decodeBool=function(e){const r=e.readUInt8();return e.isError(r)?r:r!==0};Vn.prototype._decodeInt=function(e,r){const n=e.raw();let i=new vP(n);return r&&(i=r[i.toString(10)]||i),i};Vn.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function Eg(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=gm.tagClass[r>>6],i=(r&32)===0;if((r&31)===31){let o=r;for(r=0;(o&128)===128;){if(o=t.readUInt8(e),t.isError(o))return o;r<<=7,r|=o&127}}else r&=31;const s=gm.tag[r];return{cls:n,primitive:i,tag:r,tagStr:s}}function E2(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if((n&128)===0)return n;const i=n&127;if(i>4)return t.error("length octect is too long");n=0;for(let s=0;s<i;s++){n<<=8;const o=t.readUInt8(r);if(t.isError(o))return o;n|=o}return n}const bP=en.exports,xP=vg.Buffer,Ag=_2;function Sg(t){Ag.call(this,t),this.enc="pem"}bP(Sg,Ag);var wP=Sg;Sg.prototype.decode=function(e,r){const n=e.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,f=-1;for(let x=0;x<n.length;x++){const _=n[x].match(s);if(_!==null&&_[2]===i)if(o===-1){if(_[1]!=="BEGIN")break;o=x}else{if(_[1]!=="END")break;f=x;break}}if(o===-1||f===-1)throw new Error("PEM section not found for: "+i);const p=n.slice(o+1,f).join("");p.replace(/[^a-z0-9+/=]+/gi,"");const b=xP.from(p,"base64");return Ag.prototype.decode.call(this,b,r)};(function(t){const e=t;e.der=_2,e.pem=wP})(_g);(function(t){const e=mg,r=_g,n=en.exports,i=t;i.define=function(f,p){return new s(f,p)};function s(o,f){this.name=o,this.body=f,this.decoders={},this.encoders={}}s.prototype._createNamed=function(f){const p=this.name;function b(x){this._initNamed(x,p)}return n(b,f),b.prototype._initNamed=function(_,S){f.call(this,_,S)},new b(this)},s.prototype._getDecoder=function(f){return f=f||"der",this.decoders.hasOwnProperty(f)||(this.decoders[f]=this._createNamed(r[f])),this.decoders[f]},s.prototype.decode=function(f,p,b){return this._getDecoder(p).decode(f,b)},s.prototype._getEncoder=function(f){return f=f||"der",this.encoders.hasOwnProperty(f)||(this.encoders[f]=this._createNamed(e[f])),this.encoders[f]},s.prototype.encode=function(f,p,b){return this._getEncoder(p).encode(f,b)}})(g2);var A2={};(function(t){const e=t;e.Reporter=vh.Reporter,e.DecoderBuffer=Ko.DecoderBuffer,e.EncoderBuffer=Ko.EncoderBuffer,e.Node=bg})(A2);var S2={};(function(t){const e=t;e._reverse=function(n){const i={};return Object.keys(n).forEach(function(s){(s|0)==s&&(s=s|0);const o=n[s];i[o]=s}),i},e.der=xh})(S2);(function(t){const e=t;e.bignum=yg.exports,e.define=g2.define,e.base=A2,e.constants=S2,e.decoders=_g,e.encoders=mg})(p2);var _P=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EP=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AP=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_P(e,t,r);return EP(e,t),e};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.jwkTopem=Qa.pemTojwk=void 0;const Ns=AP(p2);function SP(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Mg(t){return SP(Buffer.from(t,"hex").toString("base64"))}var M2=Ns.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),T2=Ns.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),MP=Ns.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(T2),this.key("publicKey").bitstr())}),P2=Ns.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),TP=Ns.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),k2=Ns.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(P2),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(TP))}),PP=Ns.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(P2),this.key("algorithm").use(T2),this.key("privateKey").bitstr())});function I2(t,e){return e=e||{},Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function Tg(t){return t.length%2===1?"0"+t:t}function R2(t,e){var r=M2.decode(t,"der"),n=Tg(r.e.toString(16)),i={kty:"RSA",n:js(r.n),e:Mg(n)};return I2(i,e)}function C2(t,e){var r=k2.decode(t,"der"),n=Tg(r.e.toString(16)),i={kty:"RSA",n:js(r.n),e:Mg(n),d:js(r.d),p:js(r.p),q:js(r.q),dp:js(r.dp),dq:js(r.dq),qi:js(r.qi)};return I2(i,e)}function kP(t,e){var r=MP.decode(t,"der");return R2(r.publicKey.data,e)}function IP(t,e){var r=PP.decode(t,"der");return C2(r.privateKey.data,e)}function RP(t){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(t);if(!e)return null;var r=!!e[1],n=e[2]==="PRIVATE";return n?r?C2:IP:r?R2:kP}function CP(t){return{n:Us(t.n),e:Us(t.e),d:t.d&&Us(t.d),p:t.p&&Us(t.p),q:t.q&&Us(t.q),dp:t.dp&&Us(t.dp),dq:t.dq&&Us(t.dq),qi:t.qi&&Us(t.qi)}}function js(t){return Mg(Tg(t.toString(16)))}function NP(t){return new Ns.bignum(Buffer.from(t,"base64"))}function Us(t){return/^[0-9]+$/.test(t)?new Ns.bignum(t,10):NP(t)}function BP(t,e){var r=t.toString().split(/(\r\n|\r|\n)+/g);r=r.filter(function(i){return i.trim().length!==0});var n=RP(r[0]);return r=r.slice(1,-1).join(""),n(Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}Qa.pemTojwk=BP;function OP(t){var e=CP(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,o=Buffer.alloc(0);r?(e.version="two-prime",o=k2.encode(e,"der")):o=M2.encode(e,"der");var f=o.toString("base64").match(/.{1,64}/g).join(`
`);return i+f+s}Qa.jwkTopem=OP;var Pg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gg,"__esModule",{value:!0});const LP=Pg(mh),DP=Qa,UP=Pg(ki.exports),ym=Pg(Go);class FP extends LP.default{constructor(e){super(DP.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return UP.default.toBuffer(this.pk)}sign(e){return ym.default.crypto.sign(this.jwk,e)}static async verify(e,r,n){return await ym.default.crypto.verify(e,r,n)}}gg.default=FP;var kg={},$P=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kg,"__esModule",{value:!0});const jP=$P(pf);class qP extends jP.default{}kg.default=qP;var Sf={},N2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sf,"__esModule",{value:!0});const KP=N2(Lu),$f=N2(bl);class zP extends KP.default{get publicKey(){return $f.default.decode(this.pk)}get key(){return $f.default.decode(this._key)}constructor(e){const r=$f.default.decode(e);super($f.default.encode(r.subarray(0,32)),$f.default.encode(r.subarray(32,64)))}}Sf.default=zP;var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});const ya=yh,jf=Yo;class HP{constructor(e){this.ownerLength=jf.SIG_CONFIG[jf.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=jf.SIG_CONFIG[jf.SignatureConfig.ETHEREUM].sigLength,this.signatureType=jf.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await ya.ethers.utils.hashMessage(e),i=ya.ethers.utils.recoverPublicKey(ya.ethers.utils.arrayify(n),r);this.publicKey=Buffer.from(ya.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=ya.ethers.utils.computeAddress(e);return ya.ethers.utils.verifyMessage(r,n)===i}}Ig.default=HP;var wh={},GP=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VP=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WP=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GP(e,t,r);return VP(e,t),e},JP=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wh,"__esModule",{value:!0});const YP=WP(_b),ZP=JP(ki.exports),mm=Yo;class XP{constructor(e){this.ownerLength=mm.SIG_CONFIG[2].pubLength,this.signatureLength=mm.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=ZP.default.toBuffer(e)),YP.verify(Buffer.from(n),Buffer.from(r),Buffer.from(i))}}wh.default=XP;var Rg={},QP=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rg,"__esModule",{value:!0});const ek=QP(Sf);class tk extends ek.default{constructor(e){super(e.replace("ed25519:",""))}}Rg.default=tk;var Cg={},rk=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cg,"__esModule",{value:!0});const nk=rk(Lu);class ik extends nk.default{get publicKey(){return Buffer.from(this.pk)}get key(){return Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}Cg.default=ik;var Ng={},sk=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ng,"__esModule",{value:!0});const ok=sk(wh);class ak extends ok.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(Buffer.from(Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Buffer.from(Buffer.from(r).toString("hex")),n)}}Ng.default=ak;var Bg={},fk=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bg,"__esModule",{value:!0});const uk=fk(Sf);class ck extends uk.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(Buffer.from(Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Buffer.from(Buffer.from(r).toString("hex")),n)}}Bg.default=ck;(function(t){var e=V&&V.__createBinding||(Object.create?function(S,M,N,k){k===void 0&&(k=N),Object.defineProperty(S,k,{enumerable:!0,get:function(){return M[N]}})}:function(S,M,N,k){k===void 0&&(k=N),S[k]=M[N]}),r=V&&V.__exportStar||function(S,M){for(var N in S)N!=="default"&&!Object.prototype.hasOwnProperty.call(M,N)&&e(M,S,N)},n=V&&V.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.HexSolanaSigner=t.HexInjectedSolanaSigner=t.AlgorandSigner=t.NearSigner=t.InjectedEthereumSigner=t.PolygonSigner=t.ArweaveSigner=t.InjectedSolanaSigner=void 0;const i=n(gg);t.ArweaveSigner=i.default,r(pf,t);const s=n(kg);t.PolygonSigner=s.default,r(Sf,t);const o=n(Ig);t.InjectedEthereumSigner=o.default;var f=wh;Object.defineProperty(t,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(f).default}});var p=Rg;Object.defineProperty(t,"NearSigner",{enumerable:!0,get:function(){return n(p).default}});var b=Cg;Object.defineProperty(t,"AlgorandSigner",{enumerable:!0,get:function(){return n(b).default}});var x=Ng;Object.defineProperty(t,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(x).default}});var _=Bg;Object.defineProperty(t,"HexSolanaSigner",{enumerable:!0,get:function(){return n(_).default}})})(pg);var B2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ql,"__esModule",{value:!0});ql.indexToType=void 0;const lk=B2(Lu),hk=B2(pf),vm=pg;ql.indexToType={1:vm.ArweaveSigner,2:lk.default,3:hk.default,4:vm.HexInjectedSolanaSigner};var O2={};(function(t){var e=V&&V.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=V&&V.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mh,t)})(O2);(function(t){var e=V&&V.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=V&&V.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jl,t),r(ql,t),r(O2,t),r(pg,t)})(df);var Og={exports:{}},L2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},dk=L2,sa=Object.prototype.toString;function Lg(t){return sa.call(t)==="[object Array]"}function Td(t){return typeof t>"u"}function pk(t){return t!==null&&!Td(t)&&t.constructor!==null&&!Td(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function gk(t){return sa.call(t)==="[object ArrayBuffer]"}function yk(t){return typeof FormData<"u"&&t instanceof FormData}function mk(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function vk(t){return typeof t=="string"}function bk(t){return typeof t=="number"}function D2(t){return t!==null&&typeof t=="object"}function Gc(t){if(sa.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function xk(t){return sa.call(t)==="[object Date]"}function wk(t){return sa.call(t)==="[object File]"}function _k(t){return sa.call(t)==="[object Blob]"}function U2(t){return sa.call(t)==="[object Function]"}function Ek(t){return D2(t)&&U2(t.pipe)}function Ak(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Sk(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Mk(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Dg(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Lg(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Pd(){var t={};function e(i,s){Gc(t[s])&&Gc(i)?t[s]=Pd(t[s],i):Gc(i)?t[s]=Pd({},i):Lg(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Dg(arguments[r],e);return t}function Tk(t,e,r){return Dg(e,function(i,s){r&&typeof i=="function"?t[s]=dk(i,r):t[s]=i}),t}function Pk(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Wn={isArray:Lg,isArrayBuffer:gk,isBuffer:pk,isFormData:yk,isArrayBufferView:mk,isString:vk,isNumber:bk,isObject:D2,isPlainObject:Gc,isUndefined:Td,isDate:xk,isFile:wk,isBlob:_k,isFunction:U2,isStream:Ek,isURLSearchParams:Ak,isStandardBrowserEnv:Mk,forEach:Dg,merge:Pd,extend:Tk,trim:Sk,stripBOM:Pk},ma=Wn;function bm(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var F2=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ma.isURLSearchParams(r))i=r.toString();else{var s=[];ma.forEach(r,function(p,b){p===null||typeof p>"u"||(ma.isArray(p)?b=b+"[]":p=[p],ma.forEach(p,function(_){ma.isDate(_)?_=_.toISOString():ma.isObject(_)&&(_=JSON.stringify(_)),s.push(bm(b)+"="+bm(_))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},kk=Wn;function _h(){this.handlers=[]}_h.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};_h.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};_h.prototype.forEach=function(e){kk.forEach(this.handlers,function(n){n!==null&&e(n)})};var Ik=_h,Rk=Wn,Ck=function(e,r){Rk.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},$2=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Nk=$2,j2=function(e,r,n,i,s){var o=new Error(e);return Nk(o,r,n,i,s)},Bk=j2,Ok=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Bk("Request failed with status code "+n.status,n.config,null,n.request,n))},_c=Wn,Lk=_c.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,f){var p=[];p.push(r+"="+encodeURIComponent(n)),_c.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),_c.isString(s)&&p.push("path="+s),_c.isString(o)&&p.push("domain="+o),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Dk=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},Uk=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Fk=Dk,$k=Uk,jk=function(e,r){return e&&!Fk(r)?$k(e,r):r},I0=Wn,qk=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Kk=function(e){var r={},n,i,s;return e&&I0.forEach(e.split(`
`),function(f){if(s=f.indexOf(":"),n=I0.trim(f.substr(0,s)).toLowerCase(),i=I0.trim(f.substr(s+1)),n){if(r[n]&&qk.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},xm=Wn,zk=xm.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var f=xm.isString(o)?i(o):o;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}(),Ec=Wn,Hk=Ok,Gk=Lk,Vk=F2,Wk=jk,Jk=Kk,Yk=zk,R0=j2,wm=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,f=e.responseType;Ec.isFormData(s)&&delete o["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(b+":"+x)}var _=Wk(e.baseURL,e.url);p.open(e.method.toUpperCase(),Vk(_,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function S(){if(!!p){var N="getAllResponseHeaders"in p?Jk(p.getAllResponseHeaders()):null,k=!f||f==="text"||f==="json"?p.responseText:p.response,I={data:k,status:p.status,statusText:p.statusText,headers:N,config:e,request:p};Hk(n,i,I),p=null}}if("onloadend"in p?p.onloadend=S:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(S)},p.onabort=function(){!p||(i(R0("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){i(R0("Network Error",e,null,p)),p=null},p.ontimeout=function(){var k="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),i(R0(k,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},Ec.isStandardBrowserEnv()){var M=(e.withCredentials||Yk(_))&&e.xsrfCookieName?Gk.read(e.xsrfCookieName):void 0;M&&(o[e.xsrfHeaderName]=M)}"setRequestHeader"in p&&Ec.forEach(o,function(k,I){typeof s>"u"&&I.toLowerCase()==="content-type"?delete o[I]:p.setRequestHeader(I,k)}),Ec.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&f!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(k){!p||(p.abort(),i(k),p=null)}),s||(s=null),p.send(s)})},Jr=Wn,_m=Ck,Zk=$2,Xk={"Content-Type":"application/x-www-form-urlencoded"};function Em(t,e){!Jr.isUndefined(t)&&Jr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Qk(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=wm),t}function eI(t,e,r){if(Jr.isString(t))try{return(e||JSON.parse)(t),Jr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Eh={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Qk(),transformRequest:[function(e,r){return _m(r,"Accept"),_m(r,"Content-Type"),Jr.isFormData(e)||Jr.isArrayBuffer(e)||Jr.isBuffer(e)||Jr.isStream(e)||Jr.isFile(e)||Jr.isBlob(e)?e:Jr.isArrayBufferView(e)?e.buffer:Jr.isURLSearchParams(e)?(Em(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Jr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Em(r,"application/json"),eI(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Jr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Zk(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Eh.headers={common:{Accept:"application/json, text/plain, */*"}};Jr.forEach(["delete","get","head"],function(e){Eh.headers[e]={}});Jr.forEach(["post","put","patch"],function(e){Eh.headers[e]=Jr.merge(Xk)});var Ug=Eh,tI=Wn,rI=Ug,nI=function(e,r,n){var i=this||rI;return tI.forEach(n,function(o){e=o.call(i,e,r)}),e},q2=function(e){return!!(e&&e.__CANCEL__)},Am=Wn,C0=nI,iI=q2,sI=Ug;function N0(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var oI=function(e){N0(e),e.headers=e.headers||{},e.data=C0.call(e,e.data,e.headers,e.transformRequest),e.headers=Am.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Am.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||sI.adapter;return r(e).then(function(i){return N0(e),i.data=C0.call(e,i.data,i.headers,e.transformResponse),i},function(i){return iI(i)||(N0(e),i&&i.response&&(i.response.data=C0.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},hn=Wn,K2=function(e,r){r=r||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],f=["validateStatus"];function p(S,M){return hn.isPlainObject(S)&&hn.isPlainObject(M)?hn.merge(S,M):hn.isPlainObject(M)?hn.merge({},M):hn.isArray(M)?M.slice():M}function b(S){hn.isUndefined(r[S])?hn.isUndefined(e[S])||(n[S]=p(void 0,e[S])):n[S]=p(e[S],r[S])}hn.forEach(i,function(M){hn.isUndefined(r[M])||(n[M]=p(void 0,r[M]))}),hn.forEach(s,b),hn.forEach(o,function(M){hn.isUndefined(r[M])?hn.isUndefined(e[M])||(n[M]=p(void 0,e[M])):n[M]=p(void 0,r[M])}),hn.forEach(f,function(M){M in r?n[M]=p(e[M],r[M]):M in e&&(n[M]=p(void 0,e[M]))});var x=i.concat(s).concat(o).concat(f),_=Object.keys(e).concat(Object.keys(r)).filter(function(M){return x.indexOf(M)===-1});return hn.forEach(_,b),n};const aI="axios",fI="0.21.4",uI="Promise based HTTP client for the browser and node.js",cI="index.js",lI={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},hI={type:"git",url:"https://github.com/axios/axios.git"},dI=["xhr","http","ajax","promise","node"],pI="Matt Zabriskie",gI="MIT",yI={url:"https://github.com/axios/axios/issues"},mI="https://axios-http.com",vI={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},bI={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},xI="dist/axios.min.js",wI="dist/axios.min.js",_I="./index.d.ts",EI={"follow-redirects":"^1.14.0"},AI=[{path:"./dist/axios.min.js",threshold:"5kB"}];var SI={name:aI,version:fI,description:uI,main:cI,scripts:lI,repository:hI,keywords:dI,author:pI,license:gI,bugs:yI,homepage:mI,devDependencies:vI,browser:bI,jsdelivr:xI,unpkg:wI,typings:_I,dependencies:EI,bundlesize:AI},z2=SI,Fg={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Fg[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Sm={},MI=z2.version.split(".");function H2(t,e){for(var r=e?e.split("."):MI,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}Fg.transitional=function(e,r,n){var i=r&&H2(r);function s(o,f){return"[Axios v"+z2.version+"] Transitional option '"+o+"'"+f+(n?". "+n:"")}return function(o,f,p){if(e===!1)throw new Error(s(f," has been removed in "+r));return i&&!Sm[f]&&(Sm[f]=!0,console.warn(s(f," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,f,p):!0}};function TI(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var f=t[s],p=f===void 0||o(f,s,t);if(p!==!0)throw new TypeError("option "+s+" must be "+p);continue}if(r!==!0)throw Error("Unknown option "+s)}}var PI={isOlderVersion:H2,assertOptions:TI,validators:Fg},G2=Wn,kI=F2,Mm=Ik,Tm=oI,Ah=K2,V2=PI,va=V2.validators;function Wu(t){this.defaults=t,this.interceptors={request:new Mm,response:new Mm}}Wu.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Ah(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&V2.assertOptions(r,{silentJSONParsing:va.transitional(va.boolean,"1.0.0"),forcedJSONParsing:va.transitional(va.boolean,"1.0.0"),clarifyTimeoutError:va.transitional(va.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(i=i&&S.synchronous,n.unshift(S.fulfilled,S.rejected))});var s=[];this.interceptors.response.forEach(function(S){s.push(S.fulfilled,S.rejected)});var o;if(!i){var f=[Tm,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(s),o=Promise.resolve(e);f.length;)o=o.then(f.shift(),f.shift());return o}for(var p=e;n.length;){var b=n.shift(),x=n.shift();try{p=b(p)}catch(_){x(_);break}}try{o=Tm(p)}catch(_){return Promise.reject(_)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Wu.prototype.getUri=function(e){return e=Ah(this.defaults,e),kI(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};G2.forEach(["delete","get","head","options"],function(e){Wu.prototype[e]=function(r,n){return this.request(Ah(n||{},{method:e,url:r,data:(n||{}).data}))}});G2.forEach(["post","put","patch"],function(e){Wu.prototype[e]=function(r,n,i){return this.request(Ah(i||{},{method:e,url:r,data:n}))}});var II=Wu;function $g(t){this.message=t}$g.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};$g.prototype.__CANCEL__=!0;var W2=$g,RI=W2;function vl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;t(function(i){r.reason||(r.reason=new RI(i),e(r.reason))})}vl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};vl.source=function(){var e,r=new vl(function(i){e=i});return{token:r,cancel:e}};var CI=vl,NI=function(e){return function(n){return e.apply(null,n)}},BI=function(e){return typeof e=="object"&&e.isAxiosError===!0},Pm=Wn,OI=L2,Vc=II,LI=K2,DI=Ug;function J2(t){var e=new Vc(t),r=OI(Vc.prototype.request,e);return Pm.extend(r,Vc.prototype,e),Pm.extend(r,e),r}var Pi=J2(DI);Pi.Axios=Vc;Pi.create=function(e){return J2(LI(Pi.defaults,e))};Pi.Cancel=W2;Pi.CancelToken=CI;Pi.isCancel=q2;Pi.all=function(e){return Promise.all(e)};Pi.spread=NI;Pi.isAxiosError=BI;Og.exports=Pi;Og.exports.default=Pi;var UI=Og.exports;(function(t){var e=V&&V.__createBinding||(Object.create?function(C,D,$,j){j===void 0&&(j=$),Object.defineProperty(C,j,{enumerable:!0,get:function(){return D[$]}})}:function(C,D,$,j){j===void 0&&(j=$),C[j]=D[$]}),r=V&&V.__setModuleDefault||(Object.create?function(C,D){Object.defineProperty(C,"default",{enumerable:!0,value:D})}:function(C,D){C.default=D}),n=V&&V.__importStar||function(C){if(C&&C.__esModule)return C;var D={};if(C!=null)for(var $ in C)$!=="default"&&Object.prototype.hasOwnProperty.call(C,$)&&e(D,C,$);return r(D,C),D},i=V&&V.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_BINARY_SIZE=void 0;const s=Nr,o=np,f=i(ki.exports),p=Ho,b=Ei,x=df,_=Tu,S=i(UI),M=Yo,N=n(Sn),k=i(Go);t.MIN_BINARY_SIZE=80;class I{constructor(D){this.binary=D}static isDataItem(D){return D.binary!==void 0}get signatureType(){const D=s.byteArrayToLong(this.binary.subarray(0,2));switch(D){case 1:return M.SignatureConfig.ARWEAVE;case 2:return M.SignatureConfig.ED25519;case 3:return M.SignatureConfig.ETHEREUM;case 4:return M.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+D)}}async isValid(){return I.verify(this.binary)}get id(){return f.default.encode(this.rawId)}set id(D){this._id=f.default.toBuffer(D)}get rawId(){return N.createHash("sha256").update(this.rawSignature).digest()}set rawId(D){this._id=D}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return f.default.encode(this.rawSignature)}get signatureLength(){return M.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return f.default.encode(this.rawOwner)}get ownerLength(){return M.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const D=this.getTargetStart();return this.binary[D]==1?this.binary.subarray(D+1,D+33):p.Buffer.alloc(0)}get target(){return f.default.encode(this.rawTarget)}get rawAnchor(){const D=this.getAnchorStart();return this.binary[D]==1?this.binary.subarray(D+1,D+33):p.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const D=this.getTagsStart(),$=s.byteArrayToLong(this.binary.subarray(D+8,D+16));return this.binary.subarray(D+16,D+16+$)}get tags(){const D=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(D,D+8))==0)return[];const j=s.byteArrayToLong(this.binary.subarray(D+8,D+16));return o.tagsParser.fromBuffer(p.Buffer.from(this.binary.subarray(D+16,D+16+j)))}get tagsB64Url(){return this.tags.map($=>({name:f.default.encode($.name),value:f.default.encode($.value)}))}getStartOfData(){const D=this.getTagsStart(),$=this.binary.subarray(D+8,D+16),j=s.byteArrayToLong($);return D+16+j}get rawData(){const D=this.getTagsStart(),$=this.binary.subarray(D+8,D+16),j=s.byteArrayToLong($),F=D+16+j;return this.binary.subarray(F,this.binary.length)}get data(){return f.default.encode(this.rawData)}getRaw(){return this.binary}async sign(D){return this._id=await b.sign(this,D),this.rawId}async setSignature(D){this.binary.set(D,2),this._id=p.Buffer.from(await k.default.crypto.hash(D))}isSigned(){var D,$;return(($=(D=this._id)===null||D===void 0?void 0:D.length)!==null&&$!==void 0?$:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(D=>({name:f.default.encode(D.name),value:f.default.encode(D.value)})),data:this.data}}async sendToBundler(D){const $={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const j=await S.default.post(`${D}/tx`,this.getRaw(),{headers:$,timeout:1e5,maxBodyLength:1/0,validateStatus:F=>F>200&&F<300||F!==402});if(j.status===402)throw new Error("Not enough funds to send data");return j}static async verify(D){if(D.byteLength<t.MIN_BINARY_SIZE)return!1;const $=new I(D),j=$.signatureType,F=$.getTagsStart(),z=s.byteArrayToLong(D.subarray(F,F+8)),Z=D.subarray(F+8,F+16),te=s.byteArrayToLong(Z);if(te>4096)return!1;if(z>0)try{if(o.tagsParser.fromBuffer(p.Buffer.from(D.subarray(F+16,F+16+te))).length!==z)return!1}catch{return!1}const ee=x.indexToType[j],pe=await _.getSignatureData($);return await ee.verify($.rawOwner,pe,$.rawSignature)}async getSignatureData(){return _.getSignatureData(this)}getTagsStart(){const D=this.getTargetStart(),$=this.binary[D]==1;let j=D+($?33:1);return j+=this.binary[j]==1?33:1,j}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let D=this.getTargetStart()+1;return D+=this.binary[this.getTargetStart()]==1?32:0,D}}t.default=I})(Rl);var Y2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Il,"__esModule",{value:!0});const Ac=Y2(ki.exports),So=Nr,B0=Y2(Rl),FI=Sn,Ni=32;class $I{constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=Ni;r<Ni+64*this.length;r+=64)e.push(So.byteArrayToLong(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=Ni;r<Ni+64*this.length;r+=64)e.push(Ac.default.encode(this.binary.subarray(r+32,r+64)));return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return Ac.default.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const i=await r.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const r=await e.isValid(),n=Ac.default(FI.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=Ni;n<Ni+64*this.length;n+=64){const i=So.byteArrayToLong(this.binary.subarray(n,n+32));r+=i;const s=this.binary.subarray(n+32,n+64);if(So.arraybufferEqual(s,e))return{startOffset:r,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=32+64*e,i=So.byteArrayToLong(this.binary.subarray(n,n+32));let s=0;for(let x=Ni;x<Ni+64*this.length&&s!=e;x+=64)r+=So.byteArrayToLong(this.binary.subarray(x,x+32)),s++;const f=this.getBundleStart()+r,p=this.binary.subarray(f,f+i+200),b=new B0.default(p);return b.rawId=this.binary.slice(32+64*e,64+64*e),b}getById(e){const r=Ac.default.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new B0.default(this.binary.subarray(s,s+n.size))}getDataItemCount(){return So.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let i=0;for(let s=Ni;s<Ni+64*this.length;s+=64){const o=So.byteArrayToLong(this.binary.subarray(s,s+32)),f=this.binary.subarray(s+32,s+64),p=n+r,b=this.binary.subarray(p,p+o);r+=o;const x=new B0.default(b);x.rawId=f,e[i]=x,i++}return e}}Il.default=$I;var Z2=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.sign=Ei.getSignatureAndId=Ei.bundleAndSignData=Ei.unbundleData=void 0;const jI=Tu,km=Nr,qI=Z2(Go),X2=Z2(Il);function KI(t){return new X2.default(t)}Ei.unbundleData=KI;async function zI(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(s,o)=>{const f=s.isSigned()?s.rawId:await e_(s,e),p=new Uint8Array(64);return p.set(km.longTo32ByteArray(s.getRaw().byteLength),0),p.set(f,32),r.set(p,64*o),s.getRaw()})).then(s=>Buffer.concat(s)),i=Buffer.concat([km.longTo32ByteArray(t.length),r,n]);return new X2.default(i)}Ei.bundleAndSignData=zI;async function Q2(t,e){const r=await jI.getSignatureData(t),n=await e.sign(r),i=await qI.default.crypto.hash(n);return{signature:Buffer.from(n),id:Buffer.from(i)}}Ei.getSignatureAndId=Q2;async function e_(t,e){const{signature:r,id:n}=await Q2(t,e);return t.getRaw().set(r,2),n}Ei.sign=e_;var Sh={},jg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.createData=void 0;const O0=jg(z_.exports),HI=jg(ki.exports),L0=Nr,GI=jg(Rl),VI=np;function WI(t,e,r){var n,i,s,o,f,p,b;const x=e.publicKey,_=r!=null&&r.target?HI.default.toBuffer(r.target):null,S=1+((n=_==null?void 0:_.byteLength)!==null&&n!==void 0?n:0),M=r!=null&&r.anchor?Buffer.from(r.anchor):null,N=1+((i=M==null?void 0:M.byteLength)!==null&&i!==void 0?i:0),k=((o=(s=r==null?void 0:r.tags)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)>0?VI.serializeTags(r.tags):null,I=16+(k?k.byteLength:0),C=Buffer.from(t),D=C.byteLength,$=2+e.signatureLength+e.ownerLength+S+N+I+D,j=Buffer.alloc($);j.set(L0.shortTo2ByteArray(e.signatureType),0),j.set(new Uint8Array(e.signatureLength).fill(0),2),O0.default(x.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${x.byteLength}`)),j.set(x,2+e.signatureLength);const F=2+e.signatureLength+e.ownerLength;j[F]=_?1:0,_&&(O0.default(_.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),j.set(_,F+1));const z=F+S;let Z=z+1;j[z]=M?1:0,M&&(Z+=M.byteLength,O0.default(M.byteLength==32,new Error("Anchor must be 32 bytes")),j.set(M,z+1)),j.set(L0.longTo8ByteArray((p=(f=r==null?void 0:r.tags)===null||f===void 0?void 0:f.length)!==null&&p!==void 0?p:0),Z);const te=L0.longTo8ByteArray((b=k==null?void 0:k.byteLength)!==null&&b!==void 0?b:0);j.set(te,Z+8),k&&j.set(k,Z+16);const ee=Z+I;return j.set(C,ee),new GI.default(j)}Sh.createData=WI;(function(t){var e=V&&V.__createBinding||(Object.create?function(N,k,I,C){C===void 0&&(C=I),Object.defineProperty(N,C,{enumerable:!0,get:function(){return k[I]}})}:function(N,k,I,C){C===void 0&&(C=I),N[C]=k[I]}),r=V&&V.__setModuleDefault||(Object.create?function(N,k){Object.defineProperty(N,"default",{enumerable:!0,value:k})}:function(N,k){N.default=k}),n=V&&V.__importStar||function(N){if(N&&N.__esModule)return N;var k={};if(N!=null)for(var I in N)I!=="default"&&Object.prototype.hasOwnProperty.call(N,I)&&e(k,N,I);return r(k,N),k},i=V&&V.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(t,"__esModule",{value:!0}),t.signers=t.deepHash=t.unbundleData=t.bundleAndSignData=t.createData=t.DataItem=t.Bundle=t.MIN_BINARY_SIZE=void 0;const s=Ei;Object.defineProperty(t,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(t,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const o=i(Il);t.Bundle=o.default;const f=n(Rl);t.DataItem=f.default,Object.defineProperty(t,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return f.MIN_BINARY_SIZE}});const p=xs;Object.defineProperty(t,"deepHash",{enumerable:!0,get:function(){return p.deepHash}});const b=Sh;Object.defineProperty(t,"createData",{enumerable:!0,get:function(){return b.createData}});const x=df,_=i(Sf),S=i(pf),M={ArweaveSigner:x.ArweaveSigner,SolanaSigner:_.default,EthereumSigner:S.default};t.signers=M})(Mu);var oa={};(function(t){var e=V&&V.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const r=e(ao);r.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(o=>setTimeout(o,s));t.sleep=n;class i{constructor(o,f,p){this.api=o,this.currency=f,this.currencyConfig=p}static checkAndThrow(o,f,p){if((o==null?void 0:o.status)&&!(p??[]).includes(o.status)&&o.status!=200)throw new Error(`HTTP Error: ${f}: ${o.status} ${typeof o.data!="string"?o.statusText:o.data}`)}async getNonce(){const o=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(o,"Getting withdrawal nonce"),o.data}async getBalance(o){const f=await this.api.get(`/account/balance/${this.currency}?address=${o}`);return i.checkAndThrow(f,"Getting balance"),new r.default(f.data.balance)}async getBundlerAddress(o){const f=await this.api.get("/info");i.checkAndThrow(f,"Getting Bundler address");const p=f.data.addresses[o];if(!p)throw new Error(`Specified bundler does not support currency ${o}`);return p}async getPrice(o,f){const p=await this.api.get(`/price/${o}/${f}`);return i.checkAndThrow(p,"Getting storage cost"),new r.default(p.data)}async confirmationPoll(o){if(!this.currencyConfig.isSlow){for(let f=0;f<30;f++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(o).then(p=>p==null?void 0:p.confirmed).catch(p=>!1))return;console.warn(`Tx ${o} didn't finalize after 30 seconds`)}}unitConverter(o){return new r.default(o).dividedBy(this.currencyConfig.base[1])}}t.default=i})(oa);var qg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.withdrawBalance=void 0;const Im=Mu,ba=hr,JI=qg(oa),YI=qg(ao),xa=qg(ki.exports);async function ZI(t,e,r){const n=t.currencyConfig,s={publicKey:await n.getPublicKey(),currency:t.currency,amount:new YI.default(r).toString(),nonce:await t.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},o=await(0,Im.deepHash)([(0,ba.stringToBuffer)(s.currency),(0,ba.stringToBuffer)(s.amount.toString()),(0,ba.stringToBuffer)(s.nonce.toString())]);Buffer.isBuffer(s.publicKey)||(s.publicKey=Buffer.from(s.publicKey)),s.signature=await n.sign(o);const f=await n.verify(s.publicKey,o,s.signature);s.publicKey=xa.default.encode(s.publicKey),s.signature=xa.default.encode(s.signature);const p=xa.default.toBuffer(s.publicKey),b=xa.default.toBuffer(s.signature),x=await(0,Im.deepHash)([(0,ba.stringToBuffer)(s.currency),(0,ba.stringToBuffer)(s.amount.toString()),(0,ba.stringToBuffer)(s.nonce.toString())]),_=await n.verify(p,x,b),S=n.ownerToAddress(n.name=="arweave"?xa.default.decode(s.publicKey):xa.default.toBuffer(s.publicKey))===n.address;if(!(f||_||S))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const M=await e.post("/account/withdraw",s);return JI.default.checkAndThrow(M,"Withdrawing balance"),M}Ml.withdrawBalance=ZI;var Kg={},XI=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kg,"__esModule",{value:!0});const Rm=Mu,QI=XI(Sn);class eR extends Rm.DataItem{constructor(e,r,n){var i;super((0,Rm.createData)(e,r.currencyConfig.getSigner(),{...n,anchor:(i=n==null?void 0:n.anchor)!==null&&i!==void 0?i:QI.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=r,this.signer=r.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}Kg.default=eR;var tR=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qd,"__esModule",{value:!0});const rR=Ml,nR=tR(Kg);class iR{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,rR.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,r){return new nR.default(e,this,r)}getSigner(){return this.currencyConfig.getSigner()}}qd.default=iR;var zg={},t_={};function fi(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var sR=fi;fi.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};fi.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};fi.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};fi.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};fi.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};fi.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};fi.prototype.start=fi.prototype.try;fi.prototype.errors=function(){return this._errors};fi.prototype.attempts=function(){return this._attempts};fi.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=i,r=o)}return e};(function(t){var e=sR;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(f,p){return f-p}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var f=i[o],p=r[f];r[f]=function(x){var _=t.operation(n),S=Array.prototype.slice.call(arguments,1),M=S.pop();S.push(function(N){_.retry(N)||(N&&(arguments[0]=_.mainError()),M.apply(this,arguments))}),_.attempt(function(){x.apply(r,S)})}.bind(r,p),r[f].options=n}}})(t_);var oR=t_,aR=oR;function fR(t,e){function r(n,i){var s=e||{},o;"randomize"in s||(s.randomize=!0),o=aR.operation(s);function f(x){i(x||new Error("Aborted"))}function p(x,_){if(x.bail){f(x);return}o.retry(x)?s.onRetry&&s.onRetry(x,_):i(o.mainError())}function b(x){var _;try{_=t(f,x)}catch(S){p(S,x);return}Promise.resolve(_).then(n).catch(function(M){p(M,x)})}o.attempt(b)}return new Promise(r)}var Mh=fR,Hg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zg,"__esModule",{value:!0});const uR=Hg(Mh),cR=Hg(ao),Cm=Hg(oa);class lR{constructor(e){this.utils=e}async fund(e,r=1){const n=new cR.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let o="0";i.needsFee&&(o=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(r).toFixed(0).toString());const f=await i.createTx(n,s,o);let p;try{p=await i.sendTx(f.tx)}catch(x){throw x}if(f.txId||(f.txId=p),Cm.default.checkAndThrow(p,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(f.txId),!await(0,uR.default)(async x=>{const _=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:f.txId});return _.status==400&&x(new Error(`failed to post funding tx - ${f.txId} (keep this id!) - ${_.data}`)),Cm.default.checkAndThrow(_,`Posting transaction ${f.txId} information to the bundler`,[202]),_},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${f.txId} - keep this id!`);return{reward:o,target:s,quantity:n.toString(),id:f.txId}}}zg.default=lR;var Ju={},r_={},nf={},Th={},Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.PromisePoolError=void 0;class hR extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}Yu.PromisePoolError=hR;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.StopThePromisePoolError=void 0;class dR extends Error{}Zu.StopThePromisePoolError=dR;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.ValidationError=void 0;class pR extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}Xu.ValidationError=pR;Object.defineProperty(Th,"__esModule",{value:!0});Th.PromisePoolExecutor=void 0;const Nm=nf,Bm=Yu,Om=Zu,Fs=Xu;class gR{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(e){if(!this.isValidConcurrency(e))throw Fs.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${e}" (${typeof e})`);return this.meta.concurrency=e,this}isValidConcurrency(e){return typeof e=="number"&&e>=1}withTaskTimeout(e){return this.meta.taskTimeout=e,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(e){return this.meta.shouldResultsCorrespond=e,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(e){return this.meta.items=e,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(e){return this.handler=e,this}hasErrorHandler(){return!!this.errorHandler}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers=e,this}onTaskFinished(e){return this.onTaskFinishedHandlers=e,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new Om.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw Fs.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const e=this.taskTimeout();if(!(e==null||typeof e=="number"&&e>=0))throw Fs.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(e)}" (${typeof e})`);if(!Array.isArray(this.items()))throw Fs.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw Fs.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(r=>{if(r&&typeof r!="function")throw Fs.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof r}"`)}),this.onTaskFinishedHandlers.forEach(r=>{if(r&&typeof r!="function")throw Fs.ValidationError.createFrom(`The error handler must be a function. Received "${typeof r}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill(Nm.PromisePool.notRun)),this}async process(){for(const[e,r]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(r,e)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(e,r){const n=this.createTaskFor(e,r).then(i=>{this.save(i,r).removeActive(n)}).catch(async i=>{await this.handleErrorFor(i,e,r),this.removeActive(n)}).finally(()=>{this.processedItems().push(e),this.runOnTaskFinishedHandlers(e)});this.tasks().push(n),this.runOnTaskStartedHandlers(e)}async createTaskFor(e,r){return this.taskTimeout()===void 0?this.handler(e,r,this):Promise.race([this.handler(e,r,this),this.createTaskTimeout(e)])}async createTaskTimeout(e){return new Promise((r,n)=>{setTimeout(()=>{n(new Bm.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,e))},this.taskTimeout())})}save(e,r){return this.shouldUseCorrespondingResults()?this.results()[r]=e:this.results().push(e),this}removeActive(e){return this.tasks().splice(this.tasks().indexOf(e),1),this}async handleErrorFor(e,r,n){if(this.shouldUseCorrespondingResults()&&(this.results()[n]=Nm.PromisePool.failed),!this.isStoppingThePoolError(e)){if(this.isValidationError(e))throw this.markAsStopped(),e;this.hasErrorHandler()?await this.runErrorHandlerFor(e,r):this.saveErrorFor(e,r)}}isStoppingThePoolError(e){return e instanceof Om.StopThePromisePoolError}isValidationError(e){return e instanceof Fs.ValidationError}async runErrorHandlerFor(e,r){var n;try{await((n=this.errorHandler)===null||n===void 0?void 0:n.call(this,e,r,this))}catch(i){this.rethrowIfNotStoppingThePool(i)}}runOnTaskStartedHandlers(e){this.onTaskStartedHandlers.forEach(r=>{r(e,this)})}runOnTaskFinishedHandlers(e){this.onTaskFinishedHandlers.forEach(r=>{r(e,this)})}rethrowIfNotStoppingThePool(e){if(!this.isStoppingThePoolError(e))throw e}saveErrorFor(e,r){this.errors().push(Bm.PromisePoolError.createFrom(e,r))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}Th.PromisePoolExecutor=gR;Object.defineProperty(nf,"__esModule",{value:!0});nf.PromisePool=void 0;const yR=Th;class sf{constructor(e){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=e??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(e){return this.concurrency=e,this}static withConcurrency(e){return new this().withConcurrency(e)}withTaskTimeout(e){return this.timeout=e,this}static withTaskTimeout(e){return new this().withTaskTimeout(e)}for(e){return typeof this.timeout=="number"?new sf(e).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new sf(e).withConcurrency(this.concurrency)}static for(e){return new this().for(e)}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers.push(e),this}onTaskFinished(e){return this.onTaskFinishedHandlers.push(e),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(e){return new yR.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(e).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}nf.PromisePool=sf;sf.notRun=Symbol("notRun");sf.failed=Symbol("failed");var n_={};Object.defineProperty(n_,"__esModule",{value:!0});var i_={};Object.defineProperty(i_,"__esModule",{value:!0});(function(t){var e=V&&V.__createBinding||(Object.create?function(i,s,o,f){f===void 0&&(f=o);var p=Object.getOwnPropertyDescriptor(s,o);(!p||("get"in p?!s.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,f,p)}:function(i,s,o,f){f===void 0&&(f=o),i[f]=s[o]}),r=V&&V.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=nf;t.default=n.PromisePool,r(n_,t),r(nf,t),r(Yu,t),r(i_,t),r(Zu,t),r(Xu,t)})(r_);var Ph={},s_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const e=Symbol("not readable"),r=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:e,readable:r,ended:n,errored:i};class s{constructor(f,{size:p}={}){this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=f,this._size=p;const b=["_handleStreamEnd","_handleStreamError"];for(const x of b)Object.defineProperty(this,x,{configurable:!0,writable:!0,value:this[x].bind(this)});f.once("error",this._handleStreamError),f.once("end",this._handleStreamEnd),f.on("readable",()=>{this._state=t.STATES.readable})}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let f,p;try{f=this._untilReadable(),p=this._untilEnd(),await Promise.race([f.promise,p.promise])}finally{f!=null&&f.close(),p!=null&&p.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const f=this._size?this._stream.read(this._size):this._stream.read();return f!==null?{done:!1,value:f}:(this._state=t.STATES.notReadable,await new Promise(p=>setTimeout(b=>b(!0),0,p)),this.next())}}}_untilReadable(){let f;const p=new Promise((x,_)=>{f=()=>{this._state=t.STATES.readable,this._rejections.delete(_),x()},this._state,t.STATES.readable,this._stream.once("readable",f),this._rejections.add(_)});return{close:()=>{f!=null&&this._stream.removeListener("readable",f)},promise:p}}_untilEnd(){let f;const p=new Promise((x,_)=>{f=()=>{this._state=t.STATES.ended,this._rejections.delete(_),x()},this._stream.once("end",f),this._rejections.add(_)});return{close:()=>{f!=null&&this._stream.removeListener("end",f)},promise:p}}return(){return this._state=t.STATES.ended,this.next()}throw(f){return this._error=f,this._state=t.STATES.errored,this.next()}close(f){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(f)}_handleStreamError(f){this._error=f,this._state=t.STATES.errored;for(const p of this._rejections)p(f)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s})(s_);var kh=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.ChunkingUploader=void 0;const D0=Mu,Lm=Sn,mR=ff.exports,U0=kh(oa),vR=kh(Sn),F0=Wt,bR=kh(Mh),xR=kh(s_);class wR extends mR.EventEmitter{constructor(e,r){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=r,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return D0.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.runUpload(e,{...r})}async runUpload(e,r){var n,i,s;let o=this.uploadID;const f=r===void 0,p={"x-chunking-version":"2"};let b;if(!o)b=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:p}),U0.default.checkAndThrow(b,"Getting upload token"),this.uploadID=o=b.data.id;else{if(b=await this.api.get(`/chunks/${this.currency}/${o}/-1`,{headers:p}),b.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(U0.default.checkAndThrow(b,"Getting upload info"),this.chunkSize!=+b.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+b.data.size}).`)}const{max:x,min:_}=b.data;if(this.chunkSize<+_||this.chunkSize>+x)throw new Error(`Chunk size out of allowed range: ${_} - ${x}`);let S=0;const M=(c,a,u)=>new Promise(y=>{(0,bR.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${o}/${a}`,c,{headers:{"Content-Type":"application/octet-stream",...p},maxBodyLength:1/0,maxContentLength:1/0}).then(m=>{if((m==null?void 0:m.status)>=300){const w={res:m,id:u,offset:a,size:c.length};throw this.emit("chunkError",w),w}this.emit("chunkUpload",{id:u,offset:a,size:c.length,totalUploaded:S+=c.length}),y({o:a,d:m})})})}),N=(n=b.data.chunks)!==null&&n!==void 0?n:[],k=new Lm.PassThrough;let I=Buffer.alloc(0),C=!1,D=!0;k.on("end",()=>C=!0),k.on("error",c=>{throw new Error(`Error processing readable: ${c}`)});const $=async c=>{for(;!C;){if(I.length>=c)return a=Buffer.from(I.slice(0,c)),I=I.slice(c),a;var a=k.read(c);if(a===null){await new Promise(u=>setTimeout(y=>y(!0),0,u));continue}if(a.length===c)return a;I=Buffer.concat([I,a])}for(;I.length>=c;)return a=Buffer.from(I.slice(0,c)),I=I.slice(c),a;return D=!1,I};let j;f||(j=(0,D0.createData)("",this.currencyConfig.getSigner(),{...r,anchor:(i=r==null?void 0:r.anchor)!==null&&i!==void 0?i:vR.default.randomBytes(32).toString("base64").slice(0,32)}),k.write(j.getRaw()),S-=j.getRaw().length),Buffer.isBuffer(e)?(k.write(e),k.end()):e.pipe(k);let F=0,z=[],Z=0,te,ee,pe;if(!f){ee=new Lm.PassThrough;const c=j.getRaw().length;te=await $(this.chunkSize),Z++,F+=te.length,ee.write(te.slice(c));const a=[(0,F0.stringToBuffer)("dataitem"),(0,F0.stringToBuffer)("1"),(0,F0.stringToBuffer)(j.signatureType.toString()),j.rawOwner,j.rawTarget,j.rawAnchor,j.rawTags,new xR.default(ee)];pe=(0,D0.deepHash)(a)}let T=N.pop();for(;D;){if(this.paused&&await new Promise(a=>this.on("resume",()=>a(void 0))),T&&+T[0]-F<=this.chunkSize){const u=T[1],y=await $(u);f||ee.write(y),F+=u,T=N.pop(),Z++,S+=u;continue}const c=await $(this.chunkSize);f||ee.write(c),z.length==this.batchSize&&(await Promise.all(z),z=[]),z.push(M(c,F,++Z)),F+=c.length}if(ee&&ee.end(),await Promise.all(z),!f){const c=await pe,a=Buffer.from(await this.currencyConfig.getSigner().sign(c));te.set(a,2),await M(te,0,0)}const h=await this.api.post(`/chunks/${this.currency}/${o}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...p},timeout:this.api.config.timeout*10});if(h.status===402)throw new Error("Not enough funds to send data");return U0.default.checkAndThrow(h,"Finalising upload",[201]),h.status===201&&(h.data={id:(s=h.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",h),h}get completionPromise(){return new Promise(e=>this.on("done",e))}}Ph.ChunkingUploader=wR;var o_=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.sleep=void 0;const _R=Mu,ER=o_(r_),AR=o_(Mh),SR=Ph,MR=t=>new Promise(e=>setTimeout(e,t));Ju.sleep=MR;class TR{constructor(e,r,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=r}async upload(e,r){return await this.chunkedUploader.uploadData(e,r)}get chunkedUploader(){return new SR.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let r;const n=_R.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)r=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:o,timeout:f}=this.api.getConfig();r=await this.api.post(`${i}://${s}:${o}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:f,maxBodyLength:1/0}),r.status==201&&(r.data={id:e.id})}switch(r.status){case 402:throw new Error("Not enough funds to send data");default:if(r.status>=400)throw new Error(`whilst uploading DataItem: ${r.status} ${r.statusText}`)}return r}async concurrentUploader(e,r=5,n,i){const s=[],o=await ER.default.for(e).withConcurrency(r>=1?r:5).handleError(async(f,p)=>{if(s.push(f),f.message==="Not enough funds to send data")throw f}).process(async(f,p,b)=>{await(0,AR.default)(async x=>{try{const _=await this.processItem(f);return p%r==0&&await i(`Processed ${p} Items`),n?await n({item:f,res:_,i:p}):{item:f,res:_,i:p}}catch(_){throw _.message==="Not enough funds to send data"&&x(_),_}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:o.results}}async processItem(e){return typeof e=="string"&&(e=Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,o]of r.entries())i.paths[s]={id:o};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}Ju.default=TR;var Gg={},Ih={},xo={},Rh=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xo,"__esModule",{value:!0});xo.getRedstonePrice=void 0;const PR=Rh(Go),kR=Rh(ki.exports),IR=Rh(jd),RR=Rh(oa);class CR{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return kR.default.encode(Buffer.from(await PR.default.crypto.hash(await e.rawSignature())))}async price(){return a_(this.ticker)}}xo.default=CR;async function a_(t){const e=await IR.default.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await RR.default.checkAndThrow(e,"Getting price data"),e.data[0].value}xo.getRedstonePrice=a_;var Vg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ih,"__esModule",{value:!0});const NR=Vg(Mx),kd=yh,Mo=Vg(ao),f_=df,BR=Vg(xo),OR=kd.ethers.BigNumber,LR=f_.InjectedEthereumSigner;class DR extends BR.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new Mo.default(n.blockNumber):null,amount:new Mo.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,NR.default)(Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new f_.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,r,n){return LR.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new Mo.default(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new Mo.default(e).toString(16)},s=await n.estimateGas(i),o=await n.getGasPrice();return new Mo.default(s.mul(o).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=OR.from(new Mo.default(e).toFixed()),s=this.w3signer,o=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let f=await s.getGasPrice();this.name==="matic"&&(f=kd.ethers.BigNumber.from(new Mo.default(f.toString()).multipliedBy(10).decimalPlaces(0).toString()));const p=await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:f,gasLimit:o});return{txId:void 0,tx:p}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new kd.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}Ih.default=DR;var Wg={},u_={},c_={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.KeyStore=void 0;class UR{}aa.KeyStore=UR;var Qu={},rs={},l_={exports:{}};(function(t){(function(e){var r=function(P){var R,B=new Float64Array(16);if(P)for(R=0;R<P.length;R++)B[R]=P[R];return B},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),f=r([1]),p=r([56129,1]),b=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),M=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function N(P,R,B,A){P[R]=B>>24&255,P[R+1]=B>>16&255,P[R+2]=B>>8&255,P[R+3]=B&255,P[R+4]=A>>24&255,P[R+5]=A>>16&255,P[R+6]=A>>8&255,P[R+7]=A&255}function k(P,R,B,A,O){var H,W=0;for(H=0;H<O;H++)W|=P[R+H]^B[A+H];return(1&W-1>>>8)-1}function I(P,R,B,A){return k(P,R,B,A,16)}function C(P,R,B,A){return k(P,R,B,A,32)}function D(P,R,B,A){for(var O=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,H=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,J=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,ne=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,fe=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,se=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,wt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,Be=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,$e=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,je=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,We=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,Ge=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,qe=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,ze=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,Ke=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,Oe=O,Ue=H,Te=W,Le=J,De=ne,Ne=fe,X=se,Q=wt,le=Be,ae=$e,ce=je,ve=We,_t=Ge,St=qe,kt=ze,Mt=Ke,q,Rt=0;Rt<20;Rt+=2)q=Oe+_t|0,De^=q<<7|q>>>32-7,q=De+Oe|0,le^=q<<9|q>>>32-9,q=le+De|0,_t^=q<<13|q>>>32-13,q=_t+le|0,Oe^=q<<18|q>>>32-18,q=Ne+Ue|0,ae^=q<<7|q>>>32-7,q=ae+Ne|0,St^=q<<9|q>>>32-9,q=St+ae|0,Ue^=q<<13|q>>>32-13,q=Ue+St|0,Ne^=q<<18|q>>>32-18,q=ce+X|0,kt^=q<<7|q>>>32-7,q=kt+ce|0,Te^=q<<9|q>>>32-9,q=Te+kt|0,X^=q<<13|q>>>32-13,q=X+Te|0,ce^=q<<18|q>>>32-18,q=Mt+ve|0,Le^=q<<7|q>>>32-7,q=Le+Mt|0,Q^=q<<9|q>>>32-9,q=Q+Le|0,ve^=q<<13|q>>>32-13,q=ve+Q|0,Mt^=q<<18|q>>>32-18,q=Oe+Le|0,Ue^=q<<7|q>>>32-7,q=Ue+Oe|0,Te^=q<<9|q>>>32-9,q=Te+Ue|0,Le^=q<<13|q>>>32-13,q=Le+Te|0,Oe^=q<<18|q>>>32-18,q=Ne+De|0,X^=q<<7|q>>>32-7,q=X+Ne|0,Q^=q<<9|q>>>32-9,q=Q+X|0,De^=q<<13|q>>>32-13,q=De+Q|0,Ne^=q<<18|q>>>32-18,q=ce+ae|0,ve^=q<<7|q>>>32-7,q=ve+ce|0,le^=q<<9|q>>>32-9,q=le+ve|0,ae^=q<<13|q>>>32-13,q=ae+le|0,ce^=q<<18|q>>>32-18,q=Mt+kt|0,_t^=q<<7|q>>>32-7,q=_t+Mt|0,St^=q<<9|q>>>32-9,q=St+_t|0,kt^=q<<13|q>>>32-13,q=kt+St|0,Mt^=q<<18|q>>>32-18;Oe=Oe+O|0,Ue=Ue+H|0,Te=Te+W|0,Le=Le+J|0,De=De+ne|0,Ne=Ne+fe|0,X=X+se|0,Q=Q+wt|0,le=le+Be|0,ae=ae+$e|0,ce=ce+je|0,ve=ve+We|0,_t=_t+Ge|0,St=St+qe|0,kt=kt+ze|0,Mt=Mt+Ke|0,P[0]=Oe>>>0&255,P[1]=Oe>>>8&255,P[2]=Oe>>>16&255,P[3]=Oe>>>24&255,P[4]=Ue>>>0&255,P[5]=Ue>>>8&255,P[6]=Ue>>>16&255,P[7]=Ue>>>24&255,P[8]=Te>>>0&255,P[9]=Te>>>8&255,P[10]=Te>>>16&255,P[11]=Te>>>24&255,P[12]=Le>>>0&255,P[13]=Le>>>8&255,P[14]=Le>>>16&255,P[15]=Le>>>24&255,P[16]=De>>>0&255,P[17]=De>>>8&255,P[18]=De>>>16&255,P[19]=De>>>24&255,P[20]=Ne>>>0&255,P[21]=Ne>>>8&255,P[22]=Ne>>>16&255,P[23]=Ne>>>24&255,P[24]=X>>>0&255,P[25]=X>>>8&255,P[26]=X>>>16&255,P[27]=X>>>24&255,P[28]=Q>>>0&255,P[29]=Q>>>8&255,P[30]=Q>>>16&255,P[31]=Q>>>24&255,P[32]=le>>>0&255,P[33]=le>>>8&255,P[34]=le>>>16&255,P[35]=le>>>24&255,P[36]=ae>>>0&255,P[37]=ae>>>8&255,P[38]=ae>>>16&255,P[39]=ae>>>24&255,P[40]=ce>>>0&255,P[41]=ce>>>8&255,P[42]=ce>>>16&255,P[43]=ce>>>24&255,P[44]=ve>>>0&255,P[45]=ve>>>8&255,P[46]=ve>>>16&255,P[47]=ve>>>24&255,P[48]=_t>>>0&255,P[49]=_t>>>8&255,P[50]=_t>>>16&255,P[51]=_t>>>24&255,P[52]=St>>>0&255,P[53]=St>>>8&255,P[54]=St>>>16&255,P[55]=St>>>24&255,P[56]=kt>>>0&255,P[57]=kt>>>8&255,P[58]=kt>>>16&255,P[59]=kt>>>24&255,P[60]=Mt>>>0&255,P[61]=Mt>>>8&255,P[62]=Mt>>>16&255,P[63]=Mt>>>24&255}function $(P,R,B,A){for(var O=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,H=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,J=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,ne=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,fe=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,se=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,wt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,Be=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,$e=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,je=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,We=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,Ge=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,qe=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,ze=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,Ke=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,Oe=O,Ue=H,Te=W,Le=J,De=ne,Ne=fe,X=se,Q=wt,le=Be,ae=$e,ce=je,ve=We,_t=Ge,St=qe,kt=ze,Mt=Ke,q,Rt=0;Rt<20;Rt+=2)q=Oe+_t|0,De^=q<<7|q>>>32-7,q=De+Oe|0,le^=q<<9|q>>>32-9,q=le+De|0,_t^=q<<13|q>>>32-13,q=_t+le|0,Oe^=q<<18|q>>>32-18,q=Ne+Ue|0,ae^=q<<7|q>>>32-7,q=ae+Ne|0,St^=q<<9|q>>>32-9,q=St+ae|0,Ue^=q<<13|q>>>32-13,q=Ue+St|0,Ne^=q<<18|q>>>32-18,q=ce+X|0,kt^=q<<7|q>>>32-7,q=kt+ce|0,Te^=q<<9|q>>>32-9,q=Te+kt|0,X^=q<<13|q>>>32-13,q=X+Te|0,ce^=q<<18|q>>>32-18,q=Mt+ve|0,Le^=q<<7|q>>>32-7,q=Le+Mt|0,Q^=q<<9|q>>>32-9,q=Q+Le|0,ve^=q<<13|q>>>32-13,q=ve+Q|0,Mt^=q<<18|q>>>32-18,q=Oe+Le|0,Ue^=q<<7|q>>>32-7,q=Ue+Oe|0,Te^=q<<9|q>>>32-9,q=Te+Ue|0,Le^=q<<13|q>>>32-13,q=Le+Te|0,Oe^=q<<18|q>>>32-18,q=Ne+De|0,X^=q<<7|q>>>32-7,q=X+Ne|0,Q^=q<<9|q>>>32-9,q=Q+X|0,De^=q<<13|q>>>32-13,q=De+Q|0,Ne^=q<<18|q>>>32-18,q=ce+ae|0,ve^=q<<7|q>>>32-7,q=ve+ce|0,le^=q<<9|q>>>32-9,q=le+ve|0,ae^=q<<13|q>>>32-13,q=ae+le|0,ce^=q<<18|q>>>32-18,q=Mt+kt|0,_t^=q<<7|q>>>32-7,q=_t+Mt|0,St^=q<<9|q>>>32-9,q=St+_t|0,kt^=q<<13|q>>>32-13,q=kt+St|0,Mt^=q<<18|q>>>32-18;P[0]=Oe>>>0&255,P[1]=Oe>>>8&255,P[2]=Oe>>>16&255,P[3]=Oe>>>24&255,P[4]=Ne>>>0&255,P[5]=Ne>>>8&255,P[6]=Ne>>>16&255,P[7]=Ne>>>24&255,P[8]=ce>>>0&255,P[9]=ce>>>8&255,P[10]=ce>>>16&255,P[11]=ce>>>24&255,P[12]=Mt>>>0&255,P[13]=Mt>>>8&255,P[14]=Mt>>>16&255,P[15]=Mt>>>24&255,P[16]=X>>>0&255,P[17]=X>>>8&255,P[18]=X>>>16&255,P[19]=X>>>24&255,P[20]=Q>>>0&255,P[21]=Q>>>8&255,P[22]=Q>>>16&255,P[23]=Q>>>24&255,P[24]=le>>>0&255,P[25]=le>>>8&255,P[26]=le>>>16&255,P[27]=le>>>24&255,P[28]=ae>>>0&255,P[29]=ae>>>8&255,P[30]=ae>>>16&255,P[31]=ae>>>24&255}function j(P,R,B,A){D(P,R,B,A)}function F(P,R,B,A){$(P,R,B,A)}var z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Z(P,R,B,A,O,H,W){var J=new Uint8Array(16),ne=new Uint8Array(64),fe,se;for(se=0;se<16;se++)J[se]=0;for(se=0;se<8;se++)J[se]=H[se];for(;O>=64;){for(j(ne,J,W,z),se=0;se<64;se++)P[R+se]=B[A+se]^ne[se];for(fe=1,se=8;se<16;se++)fe=fe+(J[se]&255)|0,J[se]=fe&255,fe>>>=8;O-=64,R+=64,A+=64}if(O>0)for(j(ne,J,W,z),se=0;se<O;se++)P[R+se]=B[A+se]^ne[se];return 0}function te(P,R,B,A,O){var H=new Uint8Array(16),W=new Uint8Array(64),J,ne;for(ne=0;ne<16;ne++)H[ne]=0;for(ne=0;ne<8;ne++)H[ne]=A[ne];for(;B>=64;){for(j(W,H,O,z),ne=0;ne<64;ne++)P[R+ne]=W[ne];for(J=1,ne=8;ne<16;ne++)J=J+(H[ne]&255)|0,H[ne]=J&255,J>>>=8;B-=64,R+=64}if(B>0)for(j(W,H,O,z),ne=0;ne<B;ne++)P[R+ne]=W[ne];return 0}function ee(P,R,B,A,O){var H=new Uint8Array(32);F(H,A,O,z);for(var W=new Uint8Array(8),J=0;J<8;J++)W[J]=A[J+16];return te(P,R,B,W,H)}function pe(P,R,B,A,O,H,W){var J=new Uint8Array(32);F(J,H,W,z);for(var ne=new Uint8Array(8),fe=0;fe<8;fe++)ne[fe]=H[fe+16];return Z(P,R,B,A,O,ne,J)}var T=function(P){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var R,B,A,O,H,W,J,ne;R=P[0]&255|(P[1]&255)<<8,this.r[0]=R&8191,B=P[2]&255|(P[3]&255)<<8,this.r[1]=(R>>>13|B<<3)&8191,A=P[4]&255|(P[5]&255)<<8,this.r[2]=(B>>>10|A<<6)&7939,O=P[6]&255|(P[7]&255)<<8,this.r[3]=(A>>>7|O<<9)&8191,H=P[8]&255|(P[9]&255)<<8,this.r[4]=(O>>>4|H<<12)&255,this.r[5]=H>>>1&8190,W=P[10]&255|(P[11]&255)<<8,this.r[6]=(H>>>14|W<<2)&8191,J=P[12]&255|(P[13]&255)<<8,this.r[7]=(W>>>11|J<<5)&8065,ne=P[14]&255|(P[15]&255)<<8,this.r[8]=(J>>>8|ne<<8)&8191,this.r[9]=ne>>>5&127,this.pad[0]=P[16]&255|(P[17]&255)<<8,this.pad[1]=P[18]&255|(P[19]&255)<<8,this.pad[2]=P[20]&255|(P[21]&255)<<8,this.pad[3]=P[22]&255|(P[23]&255)<<8,this.pad[4]=P[24]&255|(P[25]&255)<<8,this.pad[5]=P[26]&255|(P[27]&255)<<8,this.pad[6]=P[28]&255|(P[29]&255)<<8,this.pad[7]=P[30]&255|(P[31]&255)<<8};T.prototype.blocks=function(P,R,B){for(var A=this.fin?0:2048,O,H,W,J,ne,fe,se,wt,Be,$e,je,We,Ge,qe,ze,Ke,Oe,Ue,Te,Le=this.h[0],De=this.h[1],Ne=this.h[2],X=this.h[3],Q=this.h[4],le=this.h[5],ae=this.h[6],ce=this.h[7],ve=this.h[8],_t=this.h[9],St=this.r[0],kt=this.r[1],Mt=this.r[2],q=this.r[3],Rt=this.r[4],Kt=this.r[5],zt=this.r[6],It=this.r[7],$t=this.r[8],jt=this.r[9];B>=16;)O=P[R+0]&255|(P[R+1]&255)<<8,Le+=O&8191,H=P[R+2]&255|(P[R+3]&255)<<8,De+=(O>>>13|H<<3)&8191,W=P[R+4]&255|(P[R+5]&255)<<8,Ne+=(H>>>10|W<<6)&8191,J=P[R+6]&255|(P[R+7]&255)<<8,X+=(W>>>7|J<<9)&8191,ne=P[R+8]&255|(P[R+9]&255)<<8,Q+=(J>>>4|ne<<12)&8191,le+=ne>>>1&8191,fe=P[R+10]&255|(P[R+11]&255)<<8,ae+=(ne>>>14|fe<<2)&8191,se=P[R+12]&255|(P[R+13]&255)<<8,ce+=(fe>>>11|se<<5)&8191,wt=P[R+14]&255|(P[R+15]&255)<<8,ve+=(se>>>8|wt<<8)&8191,_t+=wt>>>5|A,Be=0,$e=Be,$e+=Le*St,$e+=De*(5*jt),$e+=Ne*(5*$t),$e+=X*(5*It),$e+=Q*(5*zt),Be=$e>>>13,$e&=8191,$e+=le*(5*Kt),$e+=ae*(5*Rt),$e+=ce*(5*q),$e+=ve*(5*Mt),$e+=_t*(5*kt),Be+=$e>>>13,$e&=8191,je=Be,je+=Le*kt,je+=De*St,je+=Ne*(5*jt),je+=X*(5*$t),je+=Q*(5*It),Be=je>>>13,je&=8191,je+=le*(5*zt),je+=ae*(5*Kt),je+=ce*(5*Rt),je+=ve*(5*q),je+=_t*(5*Mt),Be+=je>>>13,je&=8191,We=Be,We+=Le*Mt,We+=De*kt,We+=Ne*St,We+=X*(5*jt),We+=Q*(5*$t),Be=We>>>13,We&=8191,We+=le*(5*It),We+=ae*(5*zt),We+=ce*(5*Kt),We+=ve*(5*Rt),We+=_t*(5*q),Be+=We>>>13,We&=8191,Ge=Be,Ge+=Le*q,Ge+=De*Mt,Ge+=Ne*kt,Ge+=X*St,Ge+=Q*(5*jt),Be=Ge>>>13,Ge&=8191,Ge+=le*(5*$t),Ge+=ae*(5*It),Ge+=ce*(5*zt),Ge+=ve*(5*Kt),Ge+=_t*(5*Rt),Be+=Ge>>>13,Ge&=8191,qe=Be,qe+=Le*Rt,qe+=De*q,qe+=Ne*Mt,qe+=X*kt,qe+=Q*St,Be=qe>>>13,qe&=8191,qe+=le*(5*jt),qe+=ae*(5*$t),qe+=ce*(5*It),qe+=ve*(5*zt),qe+=_t*(5*Kt),Be+=qe>>>13,qe&=8191,ze=Be,ze+=Le*Kt,ze+=De*Rt,ze+=Ne*q,ze+=X*Mt,ze+=Q*kt,Be=ze>>>13,ze&=8191,ze+=le*St,ze+=ae*(5*jt),ze+=ce*(5*$t),ze+=ve*(5*It),ze+=_t*(5*zt),Be+=ze>>>13,ze&=8191,Ke=Be,Ke+=Le*zt,Ke+=De*Kt,Ke+=Ne*Rt,Ke+=X*q,Ke+=Q*Mt,Be=Ke>>>13,Ke&=8191,Ke+=le*kt,Ke+=ae*St,Ke+=ce*(5*jt),Ke+=ve*(5*$t),Ke+=_t*(5*It),Be+=Ke>>>13,Ke&=8191,Oe=Be,Oe+=Le*It,Oe+=De*zt,Oe+=Ne*Kt,Oe+=X*Rt,Oe+=Q*q,Be=Oe>>>13,Oe&=8191,Oe+=le*Mt,Oe+=ae*kt,Oe+=ce*St,Oe+=ve*(5*jt),Oe+=_t*(5*$t),Be+=Oe>>>13,Oe&=8191,Ue=Be,Ue+=Le*$t,Ue+=De*It,Ue+=Ne*zt,Ue+=X*Kt,Ue+=Q*Rt,Be=Ue>>>13,Ue&=8191,Ue+=le*q,Ue+=ae*Mt,Ue+=ce*kt,Ue+=ve*St,Ue+=_t*(5*jt),Be+=Ue>>>13,Ue&=8191,Te=Be,Te+=Le*jt,Te+=De*$t,Te+=Ne*It,Te+=X*zt,Te+=Q*Kt,Be=Te>>>13,Te&=8191,Te+=le*Rt,Te+=ae*q,Te+=ce*Mt,Te+=ve*kt,Te+=_t*St,Be+=Te>>>13,Te&=8191,Be=(Be<<2)+Be|0,Be=Be+$e|0,$e=Be&8191,Be=Be>>>13,je+=Be,Le=$e,De=je,Ne=We,X=Ge,Q=qe,le=ze,ae=Ke,ce=Oe,ve=Ue,_t=Te,R+=16,B-=16;this.h[0]=Le,this.h[1]=De,this.h[2]=Ne,this.h[3]=X,this.h[4]=Q,this.h[5]=le,this.h[6]=ae,this.h[7]=ce,this.h[8]=ve,this.h[9]=_t},T.prototype.finish=function(P,R){var B=new Uint16Array(10),A,O,H,W;if(this.leftover){for(W=this.leftover,this.buffer[W++]=1;W<16;W++)this.buffer[W]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(A=this.h[1]>>>13,this.h[1]&=8191,W=2;W<10;W++)this.h[W]+=A,A=this.h[W]>>>13,this.h[W]&=8191;for(this.h[0]+=A*5,A=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=A,A=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=A,B[0]=this.h[0]+5,A=B[0]>>>13,B[0]&=8191,W=1;W<10;W++)B[W]=this.h[W]+A,A=B[W]>>>13,B[W]&=8191;for(B[9]-=1<<13,O=(A^1)-1,W=0;W<10;W++)B[W]&=O;for(O=~O,W=0;W<10;W++)this.h[W]=this.h[W]&O|B[W];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,H=this.h[0]+this.pad[0],this.h[0]=H&65535,W=1;W<8;W++)H=(this.h[W]+this.pad[W]|0)+(H>>>16)|0,this.h[W]=H&65535;P[R+0]=this.h[0]>>>0&255,P[R+1]=this.h[0]>>>8&255,P[R+2]=this.h[1]>>>0&255,P[R+3]=this.h[1]>>>8&255,P[R+4]=this.h[2]>>>0&255,P[R+5]=this.h[2]>>>8&255,P[R+6]=this.h[3]>>>0&255,P[R+7]=this.h[3]>>>8&255,P[R+8]=this.h[4]>>>0&255,P[R+9]=this.h[4]>>>8&255,P[R+10]=this.h[5]>>>0&255,P[R+11]=this.h[5]>>>8&255,P[R+12]=this.h[6]>>>0&255,P[R+13]=this.h[6]>>>8&255,P[R+14]=this.h[7]>>>0&255,P[R+15]=this.h[7]>>>8&255},T.prototype.update=function(P,R,B){var A,O;if(this.leftover){for(O=16-this.leftover,O>B&&(O=B),A=0;A<O;A++)this.buffer[this.leftover+A]=P[R+A];if(B-=O,R+=O,this.leftover+=O,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(B>=16&&(O=B-B%16,this.blocks(P,R,O),R+=O,B-=O),B){for(A=0;A<B;A++)this.buffer[this.leftover+A]=P[R+A];this.leftover+=B}};function h(P,R,B,A,O,H){var W=new T(H);return W.update(B,A,O),W.finish(P,R),0}function c(P,R,B,A,O,H){var W=new Uint8Array(16);return h(W,0,B,A,O,H),I(P,R,W,0)}function a(P,R,B,A,O){var H;if(B<32)return-1;for(pe(P,0,R,0,B,A,O),h(P,16,P,32,B-32,P),H=0;H<16;H++)P[H]=0;return 0}function u(P,R,B,A,O){var H,W=new Uint8Array(32);if(B<32||(ee(W,0,32,A,O),c(R,16,R,32,B-32,W)!==0))return-1;for(pe(P,0,R,0,B,A,O),H=0;H<32;H++)P[H]=0;return 0}function y(P,R){var B;for(B=0;B<16;B++)P[B]=R[B]|0}function m(P){var R,B,A=1;for(R=0;R<16;R++)B=P[R]+A+65535,A=Math.floor(B/65536),P[R]=B-A*65536;P[0]+=A-1+37*(A-1)}function w(P,R,B){for(var A,O=~(B-1),H=0;H<16;H++)A=O&(P[H]^R[H]),P[H]^=A,R[H]^=A}function v(P,R){var B,A,O,H=r(),W=r();for(B=0;B<16;B++)W[B]=R[B];for(m(W),m(W),m(W),A=0;A<2;A++){for(H[0]=W[0]-65517,B=1;B<15;B++)H[B]=W[B]-65535-(H[B-1]>>16&1),H[B-1]&=65535;H[15]=W[15]-32767-(H[14]>>16&1),O=H[15]>>16&1,H[14]&=65535,w(W,H,1-O)}for(B=0;B<16;B++)P[2*B]=W[B]&255,P[2*B+1]=W[B]>>8}function l(P,R){var B=new Uint8Array(32),A=new Uint8Array(32);return v(B,P),v(A,R),C(B,0,A,0)}function g(P){var R=new Uint8Array(32);return v(R,P),R[0]&1}function d(P,R){var B;for(B=0;B<16;B++)P[B]=R[2*B]+(R[2*B+1]<<8);P[15]&=32767}function E(P,R,B){for(var A=0;A<16;A++)P[A]=R[A]+B[A]}function L(P,R,B){for(var A=0;A<16;A++)P[A]=R[A]-B[A]}function U(P,R,B){var A,O,H=0,W=0,J=0,ne=0,fe=0,se=0,wt=0,Be=0,$e=0,je=0,We=0,Ge=0,qe=0,ze=0,Ke=0,Oe=0,Ue=0,Te=0,Le=0,De=0,Ne=0,X=0,Q=0,le=0,ae=0,ce=0,ve=0,_t=0,St=0,kt=0,Mt=0,q=B[0],Rt=B[1],Kt=B[2],zt=B[3],It=B[4],$t=B[5],jt=B[6],Sr=B[7],Yt=B[8],gr=B[9],yr=B[10],mr=B[11],Br=B[12],sn=B[13],on=B[14],an=B[15];A=R[0],H+=A*q,W+=A*Rt,J+=A*Kt,ne+=A*zt,fe+=A*It,se+=A*$t,wt+=A*jt,Be+=A*Sr,$e+=A*Yt,je+=A*gr,We+=A*yr,Ge+=A*mr,qe+=A*Br,ze+=A*sn,Ke+=A*on,Oe+=A*an,A=R[1],W+=A*q,J+=A*Rt,ne+=A*Kt,fe+=A*zt,se+=A*It,wt+=A*$t,Be+=A*jt,$e+=A*Sr,je+=A*Yt,We+=A*gr,Ge+=A*yr,qe+=A*mr,ze+=A*Br,Ke+=A*sn,Oe+=A*on,Ue+=A*an,A=R[2],J+=A*q,ne+=A*Rt,fe+=A*Kt,se+=A*zt,wt+=A*It,Be+=A*$t,$e+=A*jt,je+=A*Sr,We+=A*Yt,Ge+=A*gr,qe+=A*yr,ze+=A*mr,Ke+=A*Br,Oe+=A*sn,Ue+=A*on,Te+=A*an,A=R[3],ne+=A*q,fe+=A*Rt,se+=A*Kt,wt+=A*zt,Be+=A*It,$e+=A*$t,je+=A*jt,We+=A*Sr,Ge+=A*Yt,qe+=A*gr,ze+=A*yr,Ke+=A*mr,Oe+=A*Br,Ue+=A*sn,Te+=A*on,Le+=A*an,A=R[4],fe+=A*q,se+=A*Rt,wt+=A*Kt,Be+=A*zt,$e+=A*It,je+=A*$t,We+=A*jt,Ge+=A*Sr,qe+=A*Yt,ze+=A*gr,Ke+=A*yr,Oe+=A*mr,Ue+=A*Br,Te+=A*sn,Le+=A*on,De+=A*an,A=R[5],se+=A*q,wt+=A*Rt,Be+=A*Kt,$e+=A*zt,je+=A*It,We+=A*$t,Ge+=A*jt,qe+=A*Sr,ze+=A*Yt,Ke+=A*gr,Oe+=A*yr,Ue+=A*mr,Te+=A*Br,Le+=A*sn,De+=A*on,Ne+=A*an,A=R[6],wt+=A*q,Be+=A*Rt,$e+=A*Kt,je+=A*zt,We+=A*It,Ge+=A*$t,qe+=A*jt,ze+=A*Sr,Ke+=A*Yt,Oe+=A*gr,Ue+=A*yr,Te+=A*mr,Le+=A*Br,De+=A*sn,Ne+=A*on,X+=A*an,A=R[7],Be+=A*q,$e+=A*Rt,je+=A*Kt,We+=A*zt,Ge+=A*It,qe+=A*$t,ze+=A*jt,Ke+=A*Sr,Oe+=A*Yt,Ue+=A*gr,Te+=A*yr,Le+=A*mr,De+=A*Br,Ne+=A*sn,X+=A*on,Q+=A*an,A=R[8],$e+=A*q,je+=A*Rt,We+=A*Kt,Ge+=A*zt,qe+=A*It,ze+=A*$t,Ke+=A*jt,Oe+=A*Sr,Ue+=A*Yt,Te+=A*gr,Le+=A*yr,De+=A*mr,Ne+=A*Br,X+=A*sn,Q+=A*on,le+=A*an,A=R[9],je+=A*q,We+=A*Rt,Ge+=A*Kt,qe+=A*zt,ze+=A*It,Ke+=A*$t,Oe+=A*jt,Ue+=A*Sr,Te+=A*Yt,Le+=A*gr,De+=A*yr,Ne+=A*mr,X+=A*Br,Q+=A*sn,le+=A*on,ae+=A*an,A=R[10],We+=A*q,Ge+=A*Rt,qe+=A*Kt,ze+=A*zt,Ke+=A*It,Oe+=A*$t,Ue+=A*jt,Te+=A*Sr,Le+=A*Yt,De+=A*gr,Ne+=A*yr,X+=A*mr,Q+=A*Br,le+=A*sn,ae+=A*on,ce+=A*an,A=R[11],Ge+=A*q,qe+=A*Rt,ze+=A*Kt,Ke+=A*zt,Oe+=A*It,Ue+=A*$t,Te+=A*jt,Le+=A*Sr,De+=A*Yt,Ne+=A*gr,X+=A*yr,Q+=A*mr,le+=A*Br,ae+=A*sn,ce+=A*on,ve+=A*an,A=R[12],qe+=A*q,ze+=A*Rt,Ke+=A*Kt,Oe+=A*zt,Ue+=A*It,Te+=A*$t,Le+=A*jt,De+=A*Sr,Ne+=A*Yt,X+=A*gr,Q+=A*yr,le+=A*mr,ae+=A*Br,ce+=A*sn,ve+=A*on,_t+=A*an,A=R[13],ze+=A*q,Ke+=A*Rt,Oe+=A*Kt,Ue+=A*zt,Te+=A*It,Le+=A*$t,De+=A*jt,Ne+=A*Sr,X+=A*Yt,Q+=A*gr,le+=A*yr,ae+=A*mr,ce+=A*Br,ve+=A*sn,_t+=A*on,St+=A*an,A=R[14],Ke+=A*q,Oe+=A*Rt,Ue+=A*Kt,Te+=A*zt,Le+=A*It,De+=A*$t,Ne+=A*jt,X+=A*Sr,Q+=A*Yt,le+=A*gr,ae+=A*yr,ce+=A*mr,ve+=A*Br,_t+=A*sn,St+=A*on,kt+=A*an,A=R[15],Oe+=A*q,Ue+=A*Rt,Te+=A*Kt,Le+=A*zt,De+=A*It,Ne+=A*$t,X+=A*jt,Q+=A*Sr,le+=A*Yt,ae+=A*gr,ce+=A*yr,ve+=A*mr,_t+=A*Br,St+=A*sn,kt+=A*on,Mt+=A*an,H+=38*Ue,W+=38*Te,J+=38*Le,ne+=38*De,fe+=38*Ne,se+=38*X,wt+=38*Q,Be+=38*le,$e+=38*ae,je+=38*ce,We+=38*ve,Ge+=38*_t,qe+=38*St,ze+=38*kt,Ke+=38*Mt,O=1,A=H+O+65535,O=Math.floor(A/65536),H=A-O*65536,A=W+O+65535,O=Math.floor(A/65536),W=A-O*65536,A=J+O+65535,O=Math.floor(A/65536),J=A-O*65536,A=ne+O+65535,O=Math.floor(A/65536),ne=A-O*65536,A=fe+O+65535,O=Math.floor(A/65536),fe=A-O*65536,A=se+O+65535,O=Math.floor(A/65536),se=A-O*65536,A=wt+O+65535,O=Math.floor(A/65536),wt=A-O*65536,A=Be+O+65535,O=Math.floor(A/65536),Be=A-O*65536,A=$e+O+65535,O=Math.floor(A/65536),$e=A-O*65536,A=je+O+65535,O=Math.floor(A/65536),je=A-O*65536,A=We+O+65535,O=Math.floor(A/65536),We=A-O*65536,A=Ge+O+65535,O=Math.floor(A/65536),Ge=A-O*65536,A=qe+O+65535,O=Math.floor(A/65536),qe=A-O*65536,A=ze+O+65535,O=Math.floor(A/65536),ze=A-O*65536,A=Ke+O+65535,O=Math.floor(A/65536),Ke=A-O*65536,A=Oe+O+65535,O=Math.floor(A/65536),Oe=A-O*65536,H+=O-1+37*(O-1),O=1,A=H+O+65535,O=Math.floor(A/65536),H=A-O*65536,A=W+O+65535,O=Math.floor(A/65536),W=A-O*65536,A=J+O+65535,O=Math.floor(A/65536),J=A-O*65536,A=ne+O+65535,O=Math.floor(A/65536),ne=A-O*65536,A=fe+O+65535,O=Math.floor(A/65536),fe=A-O*65536,A=se+O+65535,O=Math.floor(A/65536),se=A-O*65536,A=wt+O+65535,O=Math.floor(A/65536),wt=A-O*65536,A=Be+O+65535,O=Math.floor(A/65536),Be=A-O*65536,A=$e+O+65535,O=Math.floor(A/65536),$e=A-O*65536,A=je+O+65535,O=Math.floor(A/65536),je=A-O*65536,A=We+O+65535,O=Math.floor(A/65536),We=A-O*65536,A=Ge+O+65535,O=Math.floor(A/65536),Ge=A-O*65536,A=qe+O+65535,O=Math.floor(A/65536),qe=A-O*65536,A=ze+O+65535,O=Math.floor(A/65536),ze=A-O*65536,A=Ke+O+65535,O=Math.floor(A/65536),Ke=A-O*65536,A=Oe+O+65535,O=Math.floor(A/65536),Oe=A-O*65536,H+=O-1+37*(O-1),P[0]=H,P[1]=W,P[2]=J,P[3]=ne,P[4]=fe,P[5]=se,P[6]=wt,P[7]=Be,P[8]=$e,P[9]=je,P[10]=We,P[11]=Ge,P[12]=qe,P[13]=ze,P[14]=Ke,P[15]=Oe}function K(P,R){U(P,R,R)}function re(P,R){var B=r(),A;for(A=0;A<16;A++)B[A]=R[A];for(A=253;A>=0;A--)K(B,B),A!==2&&A!==4&&U(B,B,R);for(A=0;A<16;A++)P[A]=B[A]}function oe(P,R){var B=r(),A;for(A=0;A<16;A++)B[A]=R[A];for(A=250;A>=0;A--)K(B,B),A!==1&&U(B,B,R);for(A=0;A<16;A++)P[A]=B[A]}function Y(P,R,B){var A=new Uint8Array(32),O=new Float64Array(80),H,W,J=r(),ne=r(),fe=r(),se=r(),wt=r(),Be=r();for(W=0;W<31;W++)A[W]=R[W];for(A[31]=R[31]&127|64,A[0]&=248,d(O,B),W=0;W<16;W++)ne[W]=O[W],se[W]=J[W]=fe[W]=0;for(J[0]=se[0]=1,W=254;W>=0;--W)H=A[W>>>3]>>>(W&7)&1,w(J,ne,H),w(fe,se,H),E(wt,J,fe),L(J,J,fe),E(fe,ne,se),L(ne,ne,se),K(se,wt),K(Be,J),U(J,fe,J),U(fe,ne,wt),E(wt,J,fe),L(J,J,fe),K(ne,J),L(fe,se,Be),U(J,fe,p),E(J,J,se),U(fe,fe,J),U(J,se,Be),U(se,ne,O),K(ne,wt),w(J,ne,H),w(fe,se,H);for(W=0;W<16;W++)O[W+16]=J[W],O[W+32]=fe[W],O[W+48]=ne[W],O[W+64]=se[W];var $e=O.subarray(32),je=O.subarray(16);return re($e,$e),U(je,je,$e),v(P,je),0}function be(P,R){return Y(P,R,s)}function Fe(P,R){return n(R,32),be(P,R)}function he(P,R,B){var A=new Uint8Array(32);return Y(A,B,R),F(P,i,A,z)}var Je=a,rt=u;function Se(P,R,B,A,O,H){var W=new Uint8Array(32);return he(W,O,H),Je(P,R,B,A,W)}function Ve(P,R,B,A,O,H){var W=new Uint8Array(32);return he(W,O,H),rt(P,R,B,A,W)}var vt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ke(P,R,B,A){for(var O=new Int32Array(16),H=new Int32Array(16),W,J,ne,fe,se,wt,Be,$e,je,We,Ge,qe,ze,Ke,Oe,Ue,Te,Le,De,Ne,X,Q,le,ae,ce,ve,_t=P[0],St=P[1],kt=P[2],Mt=P[3],q=P[4],Rt=P[5],Kt=P[6],zt=P[7],It=R[0],$t=R[1],jt=R[2],Sr=R[3],Yt=R[4],gr=R[5],yr=R[6],mr=R[7],Br=0;A>=128;){for(De=0;De<16;De++)Ne=8*De+Br,O[De]=B[Ne+0]<<24|B[Ne+1]<<16|B[Ne+2]<<8|B[Ne+3],H[De]=B[Ne+4]<<24|B[Ne+5]<<16|B[Ne+6]<<8|B[Ne+7];for(De=0;De<80;De++)if(W=_t,J=St,ne=kt,fe=Mt,se=q,wt=Rt,Be=Kt,$e=zt,je=It,We=$t,Ge=jt,qe=Sr,ze=Yt,Ke=gr,Oe=yr,Ue=mr,X=zt,Q=mr,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=(q>>>14|Yt<<32-14)^(q>>>18|Yt<<32-18)^(Yt>>>41-32|q<<32-(41-32)),Q=(Yt>>>14|q<<32-14)^(Yt>>>18|q<<32-18)^(q>>>41-32|Yt<<32-(41-32)),le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,X=q&Rt^~q&Kt,Q=Yt&gr^~Yt&yr,le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,X=vt[De*2],Q=vt[De*2+1],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,X=O[De%16],Q=H[De%16],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,Te=ce&65535|ve<<16,Le=le&65535|ae<<16,X=Te,Q=Le,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=(_t>>>28|It<<32-28)^(It>>>34-32|_t<<32-(34-32))^(It>>>39-32|_t<<32-(39-32)),Q=(It>>>28|_t<<32-28)^(_t>>>34-32|It<<32-(34-32))^(_t>>>39-32|It<<32-(39-32)),le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,X=_t&St^_t&kt^St&kt,Q=It&$t^It&jt^$t&jt,le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,$e=ce&65535|ve<<16,Ue=le&65535|ae<<16,X=fe,Q=qe,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=Te,Q=Le,le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,fe=ce&65535|ve<<16,qe=le&65535|ae<<16,St=W,kt=J,Mt=ne,q=fe,Rt=se,Kt=wt,zt=Be,_t=$e,$t=je,jt=We,Sr=Ge,Yt=qe,gr=ze,yr=Ke,mr=Oe,It=Ue,De%16===15)for(Ne=0;Ne<16;Ne++)X=O[Ne],Q=H[Ne],le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=O[(Ne+9)%16],Q=H[(Ne+9)%16],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,Te=O[(Ne+1)%16],Le=H[(Ne+1)%16],X=(Te>>>1|Le<<32-1)^(Te>>>8|Le<<32-8)^Te>>>7,Q=(Le>>>1|Te<<32-1)^(Le>>>8|Te<<32-8)^(Le>>>7|Te<<32-7),le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,Te=O[(Ne+14)%16],Le=H[(Ne+14)%16],X=(Te>>>19|Le<<32-19)^(Le>>>61-32|Te<<32-(61-32))^Te>>>6,Q=(Le>>>19|Te<<32-19)^(Te>>>61-32|Le<<32-(61-32))^(Le>>>6|Te<<32-6),le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,O[Ne]=ce&65535|ve<<16,H[Ne]=le&65535|ae<<16;X=_t,Q=It,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[0],Q=R[0],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[0]=_t=ce&65535|ve<<16,R[0]=It=le&65535|ae<<16,X=St,Q=$t,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[1],Q=R[1],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[1]=St=ce&65535|ve<<16,R[1]=$t=le&65535|ae<<16,X=kt,Q=jt,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[2],Q=R[2],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[2]=kt=ce&65535|ve<<16,R[2]=jt=le&65535|ae<<16,X=Mt,Q=Sr,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[3],Q=R[3],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[3]=Mt=ce&65535|ve<<16,R[3]=Sr=le&65535|ae<<16,X=q,Q=Yt,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[4],Q=R[4],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[4]=q=ce&65535|ve<<16,R[4]=Yt=le&65535|ae<<16,X=Rt,Q=gr,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[5],Q=R[5],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[5]=Rt=ce&65535|ve<<16,R[5]=gr=le&65535|ae<<16,X=Kt,Q=yr,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[6],Q=R[6],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[6]=Kt=ce&65535|ve<<16,R[6]=yr=le&65535|ae<<16,X=zt,Q=mr,le=Q&65535,ae=Q>>>16,ce=X&65535,ve=X>>>16,X=P[7],Q=R[7],le+=Q&65535,ae+=Q>>>16,ce+=X&65535,ve+=X>>>16,ae+=le>>>16,ce+=ae>>>16,ve+=ce>>>16,P[7]=zt=ce&65535|ve<<16,R[7]=mr=le&65535|ae<<16,Br+=128,A-=128}return A}function Ze(P,R,B){var A=new Int32Array(8),O=new Int32Array(8),H=new Uint8Array(256),W,J=B;for(A[0]=1779033703,A[1]=3144134277,A[2]=1013904242,A[3]=2773480762,A[4]=1359893119,A[5]=2600822924,A[6]=528734635,A[7]=1541459225,O[0]=4089235720,O[1]=2227873595,O[2]=4271175723,O[3]=1595750129,O[4]=2917565137,O[5]=725511199,O[6]=4215389547,O[7]=327033209,ke(A,O,R,B),B%=128,W=0;W<B;W++)H[W]=R[J-B+W];for(H[B]=128,B=256-128*(B<112?1:0),H[B-9]=0,N(H,B-8,J/536870912|0,J<<3),ke(A,O,H,B),W=0;W<8;W++)N(P,8*W,A[W],O[W]);return 0}function it(P,R){var B=r(),A=r(),O=r(),H=r(),W=r(),J=r(),ne=r(),fe=r(),se=r();L(B,P[1],P[0]),L(se,R[1],R[0]),U(B,B,se),E(A,P[0],P[1]),E(se,R[0],R[1]),U(A,A,se),U(O,P[3],R[3]),U(O,O,x),U(H,P[2],R[2]),E(H,H,H),L(W,A,B),L(J,H,O),E(ne,H,O),E(fe,A,B),U(P[0],W,J),U(P[1],fe,ne),U(P[2],ne,J),U(P[3],W,fe)}function Ie(P,R,B){var A;for(A=0;A<4;A++)w(P[A],R[A],B)}function lt(P,R){var B=r(),A=r(),O=r();re(O,R[2]),U(B,R[0],O),U(A,R[1],O),v(P,A),P[31]^=g(B)<<7}function ht(P,R,B){var A,O;for(y(P[0],o),y(P[1],f),y(P[2],f),y(P[3],o),O=255;O>=0;--O)A=B[O/8|0]>>(O&7)&1,Ie(P,R,A),it(R,P),it(P,P),Ie(P,R,A)}function Ee(P,R){var B=[r(),r(),r(),r()];y(B[0],_),y(B[1],S),y(B[2],f),U(B[3],_,S),ht(P,B,R)}function dt(P,R,B){var A=new Uint8Array(64),O=[r(),r(),r(),r()],H;for(B||n(R,32),Ze(A,R,32),A[0]&=248,A[31]&=127,A[31]|=64,Ee(O,A),lt(P,O),H=0;H<32;H++)R[H+32]=P[H];return 0}var st=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Me(P,R){var B,A,O,H;for(A=63;A>=32;--A){for(B=0,O=A-32,H=A-12;O<H;++O)R[O]+=B-16*R[A]*st[O-(A-32)],B=Math.floor((R[O]+128)/256),R[O]-=B*256;R[O]+=B,R[A]=0}for(B=0,O=0;O<32;O++)R[O]+=B-(R[31]>>4)*st[O],B=R[O]>>8,R[O]&=255;for(O=0;O<32;O++)R[O]-=B*st[O];for(A=0;A<32;A++)R[A+1]+=R[A]>>8,P[A]=R[A]&255}function ot(P){var R=new Float64Array(64),B;for(B=0;B<64;B++)R[B]=P[B];for(B=0;B<64;B++)P[B]=0;Me(P,R)}function pt(P,R,B,A){var O=new Uint8Array(64),H=new Uint8Array(64),W=new Uint8Array(64),J,ne,fe=new Float64Array(64),se=[r(),r(),r(),r()];Ze(O,A,32),O[0]&=248,O[31]&=127,O[31]|=64;var wt=B+64;for(J=0;J<B;J++)P[64+J]=R[J];for(J=0;J<32;J++)P[32+J]=O[32+J];for(Ze(W,P.subarray(32),B+32),ot(W),Ee(se,W),lt(P,se),J=32;J<64;J++)P[J]=A[J];for(Ze(H,P,B+64),ot(H),J=0;J<64;J++)fe[J]=0;for(J=0;J<32;J++)fe[J]=W[J];for(J=0;J<32;J++)for(ne=0;ne<32;ne++)fe[J+ne]+=H[J]*O[ne];return Me(P.subarray(32),fe),wt}function Re(P,R){var B=r(),A=r(),O=r(),H=r(),W=r(),J=r(),ne=r();return y(P[2],f),d(P[1],R),K(O,P[1]),U(H,O,b),L(O,O,P[2]),E(H,P[2],H),K(W,H),K(J,W),U(ne,J,W),U(B,ne,O),U(B,B,H),oe(B,B),U(B,B,O),U(B,B,H),U(B,B,H),U(P[0],B,H),K(A,P[0]),U(A,A,H),l(A,O)&&U(P[0],P[0],M),K(A,P[0]),U(A,A,H),l(A,O)?-1:(g(P[0])===R[31]>>7&&L(P[0],o,P[0]),U(P[3],P[0],P[1]),0)}function at(P,R,B,A){var O,H=new Uint8Array(32),W=new Uint8Array(64),J=[r(),r(),r(),r()],ne=[r(),r(),r(),r()];if(B<64||Re(ne,A))return-1;for(O=0;O<B;O++)P[O]=R[O];for(O=0;O<32;O++)P[O+32]=A[O];if(Ze(W,P,B),ot(W),ht(J,ne,W),Ee(ne,R.subarray(32)),it(J,ne),lt(H,J),B-=64,C(R,0,H,0)){for(O=0;O<B;O++)P[O]=0;return-1}for(O=0;O<B;O++)P[O]=R[O+64];return B}var ft=32,_e=24,et=32,Xe=16,xe=32,nt=32,tt=32,we=32,ut=32,gt=_e,Ce=et,bt=Xe,Ye=64,me=32,Qe=64,ct=32,Ae=64;e.lowlevel={crypto_core_hsalsa20:F,crypto_stream_xor:pe,crypto_stream:ee,crypto_stream_salsa20_xor:Z,crypto_stream_salsa20:te,crypto_onetimeauth:h,crypto_onetimeauth_verify:c,crypto_verify_16:I,crypto_verify_32:C,crypto_secretbox:a,crypto_secretbox_open:u,crypto_scalarmult:Y,crypto_scalarmult_base:be,crypto_box_beforenm:he,crypto_box_afternm:Je,crypto_box:Se,crypto_box_open:Ve,crypto_box_keypair:Fe,crypto_hash:Ze,crypto_sign:pt,crypto_sign_keypair:dt,crypto_sign_open:at,crypto_secretbox_KEYBYTES:ft,crypto_secretbox_NONCEBYTES:_e,crypto_secretbox_ZEROBYTES:et,crypto_secretbox_BOXZEROBYTES:Xe,crypto_scalarmult_BYTES:xe,crypto_scalarmult_SCALARBYTES:nt,crypto_box_PUBLICKEYBYTES:tt,crypto_box_SECRETKEYBYTES:we,crypto_box_BEFORENMBYTES:ut,crypto_box_NONCEBYTES:gt,crypto_box_ZEROBYTES:Ce,crypto_box_BOXZEROBYTES:bt,crypto_sign_BYTES:Ye,crypto_sign_PUBLICKEYBYTES:me,crypto_sign_SECRETKEYBYTES:Qe,crypto_sign_SEEDBYTES:ct,crypto_hash_BYTES:Ae,gf:r,D:b,L:st,pack25519:v,unpack25519:d,M:U,A:E,S:K,Z:L,pow2523:oe,add:it,set25519:y,modL:Me,scalarmult:ht,scalarbase:Ee};function yt(P,R){if(P.length!==ft)throw new Error("bad key size");if(R.length!==_e)throw new Error("bad nonce size")}function xt(P,R){if(P.length!==tt)throw new Error("bad public key size");if(R.length!==we)throw new Error("bad secret key size")}function de(){for(var P=0;P<arguments.length;P++)if(!(arguments[P]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function mt(P){for(var R=0;R<P.length;R++)P[R]=0}e.randomBytes=function(P){var R=new Uint8Array(P);return n(R,P),R},e.secretbox=function(P,R,B){de(P,R,B),yt(B,R);for(var A=new Uint8Array(et+P.length),O=new Uint8Array(A.length),H=0;H<P.length;H++)A[H+et]=P[H];return a(O,A,A.length,R,B),O.subarray(Xe)},e.secretbox.open=function(P,R,B){de(P,R,B),yt(B,R);for(var A=new Uint8Array(Xe+P.length),O=new Uint8Array(A.length),H=0;H<P.length;H++)A[H+Xe]=P[H];return A.length<32||u(O,A,A.length,R,B)!==0?null:O.subarray(et)},e.secretbox.keyLength=ft,e.secretbox.nonceLength=_e,e.secretbox.overheadLength=Xe,e.scalarMult=function(P,R){if(de(P,R),P.length!==nt)throw new Error("bad n size");if(R.length!==xe)throw new Error("bad p size");var B=new Uint8Array(xe);return Y(B,P,R),B},e.scalarMult.base=function(P){if(de(P),P.length!==nt)throw new Error("bad n size");var R=new Uint8Array(xe);return be(R,P),R},e.scalarMult.scalarLength=nt,e.scalarMult.groupElementLength=xe,e.box=function(P,R,B,A){var O=e.box.before(B,A);return e.secretbox(P,R,O)},e.box.before=function(P,R){de(P,R),xt(P,R);var B=new Uint8Array(ut);return he(B,P,R),B},e.box.after=e.secretbox,e.box.open=function(P,R,B,A){var O=e.box.before(B,A);return e.secretbox.open(P,R,O)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var P=new Uint8Array(tt),R=new Uint8Array(we);return Fe(P,R),{publicKey:P,secretKey:R}},e.box.keyPair.fromSecretKey=function(P){if(de(P),P.length!==we)throw new Error("bad secret key size");var R=new Uint8Array(tt);return be(R,P),{publicKey:R,secretKey:new Uint8Array(P)}},e.box.publicKeyLength=tt,e.box.secretKeyLength=we,e.box.sharedKeyLength=ut,e.box.nonceLength=gt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(P,R){if(de(P,R),R.length!==Qe)throw new Error("bad secret key size");var B=new Uint8Array(Ye+P.length);return pt(B,P,P.length,R),B},e.sign.open=function(P,R){if(de(P,R),R.length!==me)throw new Error("bad public key size");var B=new Uint8Array(P.length),A=at(B,P,P.length,R);if(A<0)return null;for(var O=new Uint8Array(A),H=0;H<O.length;H++)O[H]=B[H];return O},e.sign.detached=function(P,R){for(var B=e.sign(P,R),A=new Uint8Array(Ye),O=0;O<A.length;O++)A[O]=B[O];return A},e.sign.detached.verify=function(P,R,B){if(de(P,R,B),R.length!==Ye)throw new Error("bad signature size");if(B.length!==me)throw new Error("bad public key size");var A=new Uint8Array(Ye+P.length),O=new Uint8Array(Ye+P.length),H;for(H=0;H<Ye;H++)A[H]=R[H];for(H=0;H<P.length;H++)A[H+Ye]=P[H];return at(O,A,A.length,B)>=0},e.sign.keyPair=function(){var P=new Uint8Array(me),R=new Uint8Array(Qe);return dt(P,R),{publicKey:P,secretKey:R}},e.sign.keyPair.fromSecretKey=function(P){if(de(P),P.length!==Qe)throw new Error("bad secret key size");for(var R=new Uint8Array(me),B=0;B<R.length;B++)R[B]=P[32+B];return{publicKey:R,secretKey:new Uint8Array(P)}},e.sign.keyPair.fromSeed=function(P){if(de(P),P.length!==ct)throw new Error("bad seed size");for(var R=new Uint8Array(me),B=new Uint8Array(Qe),A=0;A<32;A++)B[A]=P[A];return dt(R,B,!0),{publicKey:R,secretKey:B}},e.sign.publicKeyLength=me,e.sign.secretKeyLength=Qe,e.sign.seedLength=ct,e.sign.signatureLength=Ye,e.hash=function(P){de(P);var R=new Uint8Array(Ae);return Ze(R,P,P.length),R},e.hash.hashLength=Ae,e.verify=function(P,R){return de(P,R),P.length===0||R.length===0||P.length!==R.length?!1:k(P,0,R,0,P.length)===0},e.setPRNG=function(P){n=P},function(){var P=typeof self<"u"?self.crypto||self.msCrypto:null;if(P&&P.getRandomValues){var R=65536;e.setPRNG(function(B,A){var O,H=new Uint8Array(A);for(O=0;O<A;O+=R)P.getRandomValues(H.subarray(O,O+Math.min(A-O,R)));for(O=0;O<A;O++)B[O]=H[O];mt(H)})}else typeof U_<"u"&&(P=Sn,P&&P.randomBytes&&e.setPRNG(function(B,A){var O,H=P.randomBytes(A);for(O=0;O<A;O++)B[O]=H[O];mt(H)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(l_);var Jg={},dr={},h_={exports:{}};(function(t){(function(e,r){function n(c,a){if(!c)throw new Error(a||"Assertion failed")}function i(c,a){c.super_=a;var u=function(){};u.prototype=a.prototype,c.prototype=new u,c.prototype.constructor=c}function s(c,a,u){if(s.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(c||0,a||10,u||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,u){return a.cmp(u)>0?a:u},s.min=function(a,u){return a.cmp(u)<0?a:u},s.prototype._init=function(a,u,y){if(typeof a=="number")return this._initNumber(a,u,y);if(typeof a=="object")return this._initArray(a,u,y);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&(m++,this.negative=1),m<a.length&&(u===16?this._parseHex(a,m,y):(this._parseBase(a,u,m),y==="le"&&this._initArray(this.toArray(),u,y)))},s.prototype._initNumber=function(a,u,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),u,y)},s.prototype._initArray=function(a,u,y){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w,v,l=0;if(y==="be")for(m=a.length-1,w=0;m>=0;m-=3)v=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[w]|=v<<l&67108863,this.words[w+1]=v>>>26-l&67108863,l+=24,l>=26&&(l-=26,w++);else if(y==="le")for(m=0,w=0;m<a.length;m+=3)v=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[w]|=v<<l&67108863,this.words[w+1]=v>>>26-l&67108863,l+=24,l>=26&&(l-=26,w++);return this._strip()};function f(c,a){var u=c.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+c)}function p(c,a,u){var y=f(c,u);return u-1>=a&&(y|=f(c,u-1)<<4),y}s.prototype._parseHex=function(a,u,y){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w=0,v=0,l;if(y==="be")for(m=a.length-1;m>=u;m-=2)l=p(a,u,m)<<w,this.words[v]|=l&67108863,w>=18?(w-=18,v+=1,this.words[v]|=l>>>26):w+=8;else{var g=a.length-u;for(m=g%2===0?u+1:u;m<a.length;m+=2)l=p(a,u,m)<<w,this.words[v]|=l&67108863,w>=18?(w-=18,v+=1,this.words[v]|=l>>>26):w+=8}this._strip()};function b(c,a,u,y){for(var m=0,w=0,v=Math.min(c.length,u),l=a;l<v;l++){var g=c.charCodeAt(l)-48;m*=y,g>=49?w=g-49+10:g>=17?w=g-17+10:w=g,n(g>=0&&w<y,"Invalid character"),m+=w}return m}s.prototype._parseBase=function(a,u,y){this.words=[0],this.length=1;for(var m=0,w=1;w<=67108863;w*=u)m++;m--,w=w/u|0;for(var v=a.length-y,l=v%m,g=Math.min(v,v-l)+y,d=0,E=y;E<g;E+=m)d=b(a,E,E+m,u),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(l!==0){var L=1;for(d=b(a,E,a.length,u),E=0;E<l;E++)L*=u;this.imuln(L),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function x(c,a){c.words=a.words,c.length=a.length,c.negative=a.negative,c.red=a.red}if(s.prototype._move=function(a){x(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{s.prototype.inspect=_}else s.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,u){a=a||10,u=u|0||1;var y;if(a===16||a==="hex"){y="";for(var m=0,w=0,v=0;v<this.length;v++){var l=this.words[v],g=((l<<m|w)&16777215).toString(16);w=l>>>24-m&16777215,m+=2,m>=26&&(m-=26,v--),w!==0||v!==this.length-1?y=S[6-g.length]+g+y:y=g+y}for(w!==0&&(y=w.toString(16)+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(a===(a|0)&&a>=2&&a<=36){var d=M[a],E=N[a];y="";var L=this.clone();for(L.negative=0;!L.isZero();){var U=L.modrn(E).toString(a);L=L.idivn(E),L.isZero()?y=U+y:y=S[d-U.length]+U+y}for(this.isZero()&&(y="0"+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,u){return this.toArrayLike(o,a,u)}),s.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var k=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};s.prototype.toArrayLike=function(a,u,y){this._strip();var m=this.byteLength(),w=y||Math.max(1,m);n(m<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var v=k(a,w),l=u==="le"?"LE":"BE";return this["_toArrayLike"+l](v,m),v},s.prototype._toArrayLikeLE=function(a,u){for(var y=0,m=0,w=0,v=0;w<this.length;w++){var l=this.words[w]<<v|m;a[y++]=l&255,y<a.length&&(a[y++]=l>>8&255),y<a.length&&(a[y++]=l>>16&255),v===6?(y<a.length&&(a[y++]=l>>24&255),m=0,v=0):(m=l>>>24,v+=2)}if(y<a.length)for(a[y++]=m;y<a.length;)a[y++]=0},s.prototype._toArrayLikeBE=function(a,u){for(var y=a.length-1,m=0,w=0,v=0;w<this.length;w++){var l=this.words[w]<<v|m;a[y--]=l&255,y>=0&&(a[y--]=l>>8&255),y>=0&&(a[y--]=l>>16&255),v===6?(y>=0&&(a[y--]=l>>24&255),m=0,v=0):(m=l>>>24,v+=2)}if(y>=0)for(a[y--]=m;y>=0;)a[y--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var u=a,y=0;return u>=4096&&(y+=13,u>>>=13),u>=64&&(y+=7,u>>>=7),u>=8&&(y+=4,u>>>=4),u>=2&&(y+=2,u>>>=2),y+u},s.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,y=0;return(u&8191)===0&&(y+=13,u>>>=13),(u&127)===0&&(y+=7,u>>>=7),(u&15)===0&&(y+=4,u>>>=4),(u&3)===0&&(y+=2,u>>>=2),(u&1)===0&&y++,y},s.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function I(c){for(var a=new Array(c.bitLength()),u=0;u<a.length;u++){var y=u/26|0,m=u%26;a[u]=c.words[y]>>>m&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var y=this._zeroBits(this.words[u]);if(a+=y,y!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var y=0;y<u.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=u.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var u,y;this.length>a.length?(u=this,y=a):(u=a,y=this);for(var m=0;m<y.length;m++)this.words[m]=u.words[m]^y.words[m];if(this!==u)for(;m<u.length;m++)this.words[m]=u.words[m];return this.length=u.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,y=a%26;this._expand(u),y>0&&u--;for(var m=0;m<u;m++)this.words[m]=~this.words[m]&67108863;return y>0&&(this.words[m]=~this.words[m]&67108863>>26-y),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,u){n(typeof a=="number"&&a>=0);var y=a/26|0,m=a%26;return this._expand(y+1),u?this.words[y]=this.words[y]|1<<m:this.words[y]=this.words[y]&~(1<<m),this._strip()},s.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var y,m;this.length>a.length?(y=this,m=a):(y=a,m=this);for(var w=0,v=0;v<m.length;v++)u=(y.words[v]|0)+(m.words[v]|0)+w,this.words[v]=u&67108863,w=u>>>26;for(;w!==0&&v<y.length;v++)u=(y.words[v]|0)+w,this.words[v]=u&67108863,w=u>>>26;if(this.length=y.length,w!==0)this.words[this.length]=w,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},s.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var y=this.cmp(a);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,w;y>0?(m=this,w=a):(m=a,w=this);for(var v=0,l=0;l<w.length;l++)u=(m.words[l]|0)-(w.words[l]|0)+v,v=u>>26,this.words[l]=u&67108863;for(;v!==0&&l<m.length;l++)u=(m.words[l]|0)+v,v=u>>26,this.words[l]=u&67108863;if(v===0&&l<m.length&&m!==this)for(;l<m.length;l++)this.words[l]=m.words[l];return this.length=Math.max(this.length,l),m!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(c,a,u){u.negative=a.negative^c.negative;var y=c.length+a.length|0;u.length=y,y=y-1|0;var m=c.words[0]|0,w=a.words[0]|0,v=m*w,l=v&67108863,g=v/67108864|0;u.words[0]=l;for(var d=1;d<y;d++){for(var E=g>>>26,L=g&67108863,U=Math.min(d,a.length-1),K=Math.max(0,d-c.length+1);K<=U;K++){var re=d-K|0;m=c.words[re]|0,w=a.words[K]|0,v=m*w+L,E+=v/67108864|0,L=v&67108863}u.words[d]=L|0,g=E|0}return g!==0?u.words[d]=g|0:u.length--,u._strip()}var D=function(a,u,y){var m=a.words,w=u.words,v=y.words,l=0,g,d,E,L=m[0]|0,U=L&8191,K=L>>>13,re=m[1]|0,oe=re&8191,Y=re>>>13,be=m[2]|0,Fe=be&8191,he=be>>>13,Je=m[3]|0,rt=Je&8191,Se=Je>>>13,Ve=m[4]|0,vt=Ve&8191,ke=Ve>>>13,Ze=m[5]|0,it=Ze&8191,Ie=Ze>>>13,lt=m[6]|0,ht=lt&8191,Ee=lt>>>13,dt=m[7]|0,st=dt&8191,Me=dt>>>13,ot=m[8]|0,pt=ot&8191,Re=ot>>>13,at=m[9]|0,ft=at&8191,_e=at>>>13,et=w[0]|0,Xe=et&8191,xe=et>>>13,nt=w[1]|0,tt=nt&8191,we=nt>>>13,ut=w[2]|0,gt=ut&8191,Ce=ut>>>13,bt=w[3]|0,Ye=bt&8191,me=bt>>>13,Qe=w[4]|0,ct=Qe&8191,Ae=Qe>>>13,yt=w[5]|0,xt=yt&8191,de=yt>>>13,mt=w[6]|0,P=mt&8191,R=mt>>>13,B=w[7]|0,A=B&8191,O=B>>>13,H=w[8]|0,W=H&8191,J=H>>>13,ne=w[9]|0,fe=ne&8191,se=ne>>>13;y.negative=a.negative^u.negative,y.length=19,g=Math.imul(U,Xe),d=Math.imul(U,xe),d=d+Math.imul(K,Xe)|0,E=Math.imul(K,xe);var wt=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(oe,Xe),d=Math.imul(oe,xe),d=d+Math.imul(Y,Xe)|0,E=Math.imul(Y,xe),g=g+Math.imul(U,tt)|0,d=d+Math.imul(U,we)|0,d=d+Math.imul(K,tt)|0,E=E+Math.imul(K,we)|0;var Be=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Be>>>26)|0,Be&=67108863,g=Math.imul(Fe,Xe),d=Math.imul(Fe,xe),d=d+Math.imul(he,Xe)|0,E=Math.imul(he,xe),g=g+Math.imul(oe,tt)|0,d=d+Math.imul(oe,we)|0,d=d+Math.imul(Y,tt)|0,E=E+Math.imul(Y,we)|0,g=g+Math.imul(U,gt)|0,d=d+Math.imul(U,Ce)|0,d=d+Math.imul(K,gt)|0,E=E+Math.imul(K,Ce)|0;var $e=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+($e>>>26)|0,$e&=67108863,g=Math.imul(rt,Xe),d=Math.imul(rt,xe),d=d+Math.imul(Se,Xe)|0,E=Math.imul(Se,xe),g=g+Math.imul(Fe,tt)|0,d=d+Math.imul(Fe,we)|0,d=d+Math.imul(he,tt)|0,E=E+Math.imul(he,we)|0,g=g+Math.imul(oe,gt)|0,d=d+Math.imul(oe,Ce)|0,d=d+Math.imul(Y,gt)|0,E=E+Math.imul(Y,Ce)|0,g=g+Math.imul(U,Ye)|0,d=d+Math.imul(U,me)|0,d=d+Math.imul(K,Ye)|0,E=E+Math.imul(K,me)|0;var je=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(je>>>26)|0,je&=67108863,g=Math.imul(vt,Xe),d=Math.imul(vt,xe),d=d+Math.imul(ke,Xe)|0,E=Math.imul(ke,xe),g=g+Math.imul(rt,tt)|0,d=d+Math.imul(rt,we)|0,d=d+Math.imul(Se,tt)|0,E=E+Math.imul(Se,we)|0,g=g+Math.imul(Fe,gt)|0,d=d+Math.imul(Fe,Ce)|0,d=d+Math.imul(he,gt)|0,E=E+Math.imul(he,Ce)|0,g=g+Math.imul(oe,Ye)|0,d=d+Math.imul(oe,me)|0,d=d+Math.imul(Y,Ye)|0,E=E+Math.imul(Y,me)|0,g=g+Math.imul(U,ct)|0,d=d+Math.imul(U,Ae)|0,d=d+Math.imul(K,ct)|0,E=E+Math.imul(K,Ae)|0;var We=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(We>>>26)|0,We&=67108863,g=Math.imul(it,Xe),d=Math.imul(it,xe),d=d+Math.imul(Ie,Xe)|0,E=Math.imul(Ie,xe),g=g+Math.imul(vt,tt)|0,d=d+Math.imul(vt,we)|0,d=d+Math.imul(ke,tt)|0,E=E+Math.imul(ke,we)|0,g=g+Math.imul(rt,gt)|0,d=d+Math.imul(rt,Ce)|0,d=d+Math.imul(Se,gt)|0,E=E+Math.imul(Se,Ce)|0,g=g+Math.imul(Fe,Ye)|0,d=d+Math.imul(Fe,me)|0,d=d+Math.imul(he,Ye)|0,E=E+Math.imul(he,me)|0,g=g+Math.imul(oe,ct)|0,d=d+Math.imul(oe,Ae)|0,d=d+Math.imul(Y,ct)|0,E=E+Math.imul(Y,Ae)|0,g=g+Math.imul(U,xt)|0,d=d+Math.imul(U,de)|0,d=d+Math.imul(K,xt)|0,E=E+Math.imul(K,de)|0;var Ge=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(ht,Xe),d=Math.imul(ht,xe),d=d+Math.imul(Ee,Xe)|0,E=Math.imul(Ee,xe),g=g+Math.imul(it,tt)|0,d=d+Math.imul(it,we)|0,d=d+Math.imul(Ie,tt)|0,E=E+Math.imul(Ie,we)|0,g=g+Math.imul(vt,gt)|0,d=d+Math.imul(vt,Ce)|0,d=d+Math.imul(ke,gt)|0,E=E+Math.imul(ke,Ce)|0,g=g+Math.imul(rt,Ye)|0,d=d+Math.imul(rt,me)|0,d=d+Math.imul(Se,Ye)|0,E=E+Math.imul(Se,me)|0,g=g+Math.imul(Fe,ct)|0,d=d+Math.imul(Fe,Ae)|0,d=d+Math.imul(he,ct)|0,E=E+Math.imul(he,Ae)|0,g=g+Math.imul(oe,xt)|0,d=d+Math.imul(oe,de)|0,d=d+Math.imul(Y,xt)|0,E=E+Math.imul(Y,de)|0,g=g+Math.imul(U,P)|0,d=d+Math.imul(U,R)|0,d=d+Math.imul(K,P)|0,E=E+Math.imul(K,R)|0;var qe=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(qe>>>26)|0,qe&=67108863,g=Math.imul(st,Xe),d=Math.imul(st,xe),d=d+Math.imul(Me,Xe)|0,E=Math.imul(Me,xe),g=g+Math.imul(ht,tt)|0,d=d+Math.imul(ht,we)|0,d=d+Math.imul(Ee,tt)|0,E=E+Math.imul(Ee,we)|0,g=g+Math.imul(it,gt)|0,d=d+Math.imul(it,Ce)|0,d=d+Math.imul(Ie,gt)|0,E=E+Math.imul(Ie,Ce)|0,g=g+Math.imul(vt,Ye)|0,d=d+Math.imul(vt,me)|0,d=d+Math.imul(ke,Ye)|0,E=E+Math.imul(ke,me)|0,g=g+Math.imul(rt,ct)|0,d=d+Math.imul(rt,Ae)|0,d=d+Math.imul(Se,ct)|0,E=E+Math.imul(Se,Ae)|0,g=g+Math.imul(Fe,xt)|0,d=d+Math.imul(Fe,de)|0,d=d+Math.imul(he,xt)|0,E=E+Math.imul(he,de)|0,g=g+Math.imul(oe,P)|0,d=d+Math.imul(oe,R)|0,d=d+Math.imul(Y,P)|0,E=E+Math.imul(Y,R)|0,g=g+Math.imul(U,A)|0,d=d+Math.imul(U,O)|0,d=d+Math.imul(K,A)|0,E=E+Math.imul(K,O)|0;var ze=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(ze>>>26)|0,ze&=67108863,g=Math.imul(pt,Xe),d=Math.imul(pt,xe),d=d+Math.imul(Re,Xe)|0,E=Math.imul(Re,xe),g=g+Math.imul(st,tt)|0,d=d+Math.imul(st,we)|0,d=d+Math.imul(Me,tt)|0,E=E+Math.imul(Me,we)|0,g=g+Math.imul(ht,gt)|0,d=d+Math.imul(ht,Ce)|0,d=d+Math.imul(Ee,gt)|0,E=E+Math.imul(Ee,Ce)|0,g=g+Math.imul(it,Ye)|0,d=d+Math.imul(it,me)|0,d=d+Math.imul(Ie,Ye)|0,E=E+Math.imul(Ie,me)|0,g=g+Math.imul(vt,ct)|0,d=d+Math.imul(vt,Ae)|0,d=d+Math.imul(ke,ct)|0,E=E+Math.imul(ke,Ae)|0,g=g+Math.imul(rt,xt)|0,d=d+Math.imul(rt,de)|0,d=d+Math.imul(Se,xt)|0,E=E+Math.imul(Se,de)|0,g=g+Math.imul(Fe,P)|0,d=d+Math.imul(Fe,R)|0,d=d+Math.imul(he,P)|0,E=E+Math.imul(he,R)|0,g=g+Math.imul(oe,A)|0,d=d+Math.imul(oe,O)|0,d=d+Math.imul(Y,A)|0,E=E+Math.imul(Y,O)|0,g=g+Math.imul(U,W)|0,d=d+Math.imul(U,J)|0,d=d+Math.imul(K,W)|0,E=E+Math.imul(K,J)|0;var Ke=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,g=Math.imul(ft,Xe),d=Math.imul(ft,xe),d=d+Math.imul(_e,Xe)|0,E=Math.imul(_e,xe),g=g+Math.imul(pt,tt)|0,d=d+Math.imul(pt,we)|0,d=d+Math.imul(Re,tt)|0,E=E+Math.imul(Re,we)|0,g=g+Math.imul(st,gt)|0,d=d+Math.imul(st,Ce)|0,d=d+Math.imul(Me,gt)|0,E=E+Math.imul(Me,Ce)|0,g=g+Math.imul(ht,Ye)|0,d=d+Math.imul(ht,me)|0,d=d+Math.imul(Ee,Ye)|0,E=E+Math.imul(Ee,me)|0,g=g+Math.imul(it,ct)|0,d=d+Math.imul(it,Ae)|0,d=d+Math.imul(Ie,ct)|0,E=E+Math.imul(Ie,Ae)|0,g=g+Math.imul(vt,xt)|0,d=d+Math.imul(vt,de)|0,d=d+Math.imul(ke,xt)|0,E=E+Math.imul(ke,de)|0,g=g+Math.imul(rt,P)|0,d=d+Math.imul(rt,R)|0,d=d+Math.imul(Se,P)|0,E=E+Math.imul(Se,R)|0,g=g+Math.imul(Fe,A)|0,d=d+Math.imul(Fe,O)|0,d=d+Math.imul(he,A)|0,E=E+Math.imul(he,O)|0,g=g+Math.imul(oe,W)|0,d=d+Math.imul(oe,J)|0,d=d+Math.imul(Y,W)|0,E=E+Math.imul(Y,J)|0,g=g+Math.imul(U,fe)|0,d=d+Math.imul(U,se)|0,d=d+Math.imul(K,fe)|0,E=E+Math.imul(K,se)|0;var Oe=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,g=Math.imul(ft,tt),d=Math.imul(ft,we),d=d+Math.imul(_e,tt)|0,E=Math.imul(_e,we),g=g+Math.imul(pt,gt)|0,d=d+Math.imul(pt,Ce)|0,d=d+Math.imul(Re,gt)|0,E=E+Math.imul(Re,Ce)|0,g=g+Math.imul(st,Ye)|0,d=d+Math.imul(st,me)|0,d=d+Math.imul(Me,Ye)|0,E=E+Math.imul(Me,me)|0,g=g+Math.imul(ht,ct)|0,d=d+Math.imul(ht,Ae)|0,d=d+Math.imul(Ee,ct)|0,E=E+Math.imul(Ee,Ae)|0,g=g+Math.imul(it,xt)|0,d=d+Math.imul(it,de)|0,d=d+Math.imul(Ie,xt)|0,E=E+Math.imul(Ie,de)|0,g=g+Math.imul(vt,P)|0,d=d+Math.imul(vt,R)|0,d=d+Math.imul(ke,P)|0,E=E+Math.imul(ke,R)|0,g=g+Math.imul(rt,A)|0,d=d+Math.imul(rt,O)|0,d=d+Math.imul(Se,A)|0,E=E+Math.imul(Se,O)|0,g=g+Math.imul(Fe,W)|0,d=d+Math.imul(Fe,J)|0,d=d+Math.imul(he,W)|0,E=E+Math.imul(he,J)|0,g=g+Math.imul(oe,fe)|0,d=d+Math.imul(oe,se)|0,d=d+Math.imul(Y,fe)|0,E=E+Math.imul(Y,se)|0;var Ue=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,g=Math.imul(ft,gt),d=Math.imul(ft,Ce),d=d+Math.imul(_e,gt)|0,E=Math.imul(_e,Ce),g=g+Math.imul(pt,Ye)|0,d=d+Math.imul(pt,me)|0,d=d+Math.imul(Re,Ye)|0,E=E+Math.imul(Re,me)|0,g=g+Math.imul(st,ct)|0,d=d+Math.imul(st,Ae)|0,d=d+Math.imul(Me,ct)|0,E=E+Math.imul(Me,Ae)|0,g=g+Math.imul(ht,xt)|0,d=d+Math.imul(ht,de)|0,d=d+Math.imul(Ee,xt)|0,E=E+Math.imul(Ee,de)|0,g=g+Math.imul(it,P)|0,d=d+Math.imul(it,R)|0,d=d+Math.imul(Ie,P)|0,E=E+Math.imul(Ie,R)|0,g=g+Math.imul(vt,A)|0,d=d+Math.imul(vt,O)|0,d=d+Math.imul(ke,A)|0,E=E+Math.imul(ke,O)|0,g=g+Math.imul(rt,W)|0,d=d+Math.imul(rt,J)|0,d=d+Math.imul(Se,W)|0,E=E+Math.imul(Se,J)|0,g=g+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,se)|0,d=d+Math.imul(he,fe)|0,E=E+Math.imul(he,se)|0;var Te=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Te>>>26)|0,Te&=67108863,g=Math.imul(ft,Ye),d=Math.imul(ft,me),d=d+Math.imul(_e,Ye)|0,E=Math.imul(_e,me),g=g+Math.imul(pt,ct)|0,d=d+Math.imul(pt,Ae)|0,d=d+Math.imul(Re,ct)|0,E=E+Math.imul(Re,Ae)|0,g=g+Math.imul(st,xt)|0,d=d+Math.imul(st,de)|0,d=d+Math.imul(Me,xt)|0,E=E+Math.imul(Me,de)|0,g=g+Math.imul(ht,P)|0,d=d+Math.imul(ht,R)|0,d=d+Math.imul(Ee,P)|0,E=E+Math.imul(Ee,R)|0,g=g+Math.imul(it,A)|0,d=d+Math.imul(it,O)|0,d=d+Math.imul(Ie,A)|0,E=E+Math.imul(Ie,O)|0,g=g+Math.imul(vt,W)|0,d=d+Math.imul(vt,J)|0,d=d+Math.imul(ke,W)|0,E=E+Math.imul(ke,J)|0,g=g+Math.imul(rt,fe)|0,d=d+Math.imul(rt,se)|0,d=d+Math.imul(Se,fe)|0,E=E+Math.imul(Se,se)|0;var Le=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Le>>>26)|0,Le&=67108863,g=Math.imul(ft,ct),d=Math.imul(ft,Ae),d=d+Math.imul(_e,ct)|0,E=Math.imul(_e,Ae),g=g+Math.imul(pt,xt)|0,d=d+Math.imul(pt,de)|0,d=d+Math.imul(Re,xt)|0,E=E+Math.imul(Re,de)|0,g=g+Math.imul(st,P)|0,d=d+Math.imul(st,R)|0,d=d+Math.imul(Me,P)|0,E=E+Math.imul(Me,R)|0,g=g+Math.imul(ht,A)|0,d=d+Math.imul(ht,O)|0,d=d+Math.imul(Ee,A)|0,E=E+Math.imul(Ee,O)|0,g=g+Math.imul(it,W)|0,d=d+Math.imul(it,J)|0,d=d+Math.imul(Ie,W)|0,E=E+Math.imul(Ie,J)|0,g=g+Math.imul(vt,fe)|0,d=d+Math.imul(vt,se)|0,d=d+Math.imul(ke,fe)|0,E=E+Math.imul(ke,se)|0;var De=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(De>>>26)|0,De&=67108863,g=Math.imul(ft,xt),d=Math.imul(ft,de),d=d+Math.imul(_e,xt)|0,E=Math.imul(_e,de),g=g+Math.imul(pt,P)|0,d=d+Math.imul(pt,R)|0,d=d+Math.imul(Re,P)|0,E=E+Math.imul(Re,R)|0,g=g+Math.imul(st,A)|0,d=d+Math.imul(st,O)|0,d=d+Math.imul(Me,A)|0,E=E+Math.imul(Me,O)|0,g=g+Math.imul(ht,W)|0,d=d+Math.imul(ht,J)|0,d=d+Math.imul(Ee,W)|0,E=E+Math.imul(Ee,J)|0,g=g+Math.imul(it,fe)|0,d=d+Math.imul(it,se)|0,d=d+Math.imul(Ie,fe)|0,E=E+Math.imul(Ie,se)|0;var Ne=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,g=Math.imul(ft,P),d=Math.imul(ft,R),d=d+Math.imul(_e,P)|0,E=Math.imul(_e,R),g=g+Math.imul(pt,A)|0,d=d+Math.imul(pt,O)|0,d=d+Math.imul(Re,A)|0,E=E+Math.imul(Re,O)|0,g=g+Math.imul(st,W)|0,d=d+Math.imul(st,J)|0,d=d+Math.imul(Me,W)|0,E=E+Math.imul(Me,J)|0,g=g+Math.imul(ht,fe)|0,d=d+Math.imul(ht,se)|0,d=d+Math.imul(Ee,fe)|0,E=E+Math.imul(Ee,se)|0;var X=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(X>>>26)|0,X&=67108863,g=Math.imul(ft,A),d=Math.imul(ft,O),d=d+Math.imul(_e,A)|0,E=Math.imul(_e,O),g=g+Math.imul(pt,W)|0,d=d+Math.imul(pt,J)|0,d=d+Math.imul(Re,W)|0,E=E+Math.imul(Re,J)|0,g=g+Math.imul(st,fe)|0,d=d+Math.imul(st,se)|0,d=d+Math.imul(Me,fe)|0,E=E+Math.imul(Me,se)|0;var Q=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Q>>>26)|0,Q&=67108863,g=Math.imul(ft,W),d=Math.imul(ft,J),d=d+Math.imul(_e,W)|0,E=Math.imul(_e,J),g=g+Math.imul(pt,fe)|0,d=d+Math.imul(pt,se)|0,d=d+Math.imul(Re,fe)|0,E=E+Math.imul(Re,se)|0;var le=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(le>>>26)|0,le&=67108863,g=Math.imul(ft,fe),d=Math.imul(ft,se),d=d+Math.imul(_e,fe)|0,E=Math.imul(_e,se);var ae=(l+g|0)+((d&8191)<<13)|0;return l=(E+(d>>>13)|0)+(ae>>>26)|0,ae&=67108863,v[0]=wt,v[1]=Be,v[2]=$e,v[3]=je,v[4]=We,v[5]=Ge,v[6]=qe,v[7]=ze,v[8]=Ke,v[9]=Oe,v[10]=Ue,v[11]=Te,v[12]=Le,v[13]=De,v[14]=Ne,v[15]=X,v[16]=Q,v[17]=le,v[18]=ae,l!==0&&(v[19]=l,y.length++),y};Math.imul||(D=C);function $(c,a,u){u.negative=a.negative^c.negative,u.length=c.length+a.length;for(var y=0,m=0,w=0;w<u.length-1;w++){var v=m;m=0;for(var l=y&67108863,g=Math.min(w,a.length-1),d=Math.max(0,w-c.length+1);d<=g;d++){var E=w-d,L=c.words[E]|0,U=a.words[d]|0,K=L*U,re=K&67108863;v=v+(K/67108864|0)|0,re=re+l|0,l=re&67108863,v=v+(re>>>26)|0,m+=v>>>26,v&=67108863}u.words[w]=l,y=v,v=m}return y!==0?u.words[w]=y:u.length--,u._strip()}function j(c,a,u){return $(c,a,u)}s.prototype.mulTo=function(a,u){var y,m=this.length+a.length;return this.length===10&&a.length===10?y=D(this,a,u):m<63?y=C(this,a,u):m<1024?y=$(this,a,u):y=j(this,a,u),y},s.prototype.mul=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},s.prototype.mulf=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),j(this,a,u)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var u=a<0;u&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var y=0,m=0;m<this.length;m++){var w=(this.words[m]|0)*a,v=(w&67108863)+(y&67108863);y>>=26,y+=w/67108864|0,y+=v>>>26,this.words[m]=v&67108863}return y!==0&&(this.words[m]=y,this.length++),u?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var u=I(a);if(u.length===0)return new s(1);for(var y=this,m=0;m<u.length&&u[m]===0;m++,y=y.sqr());if(++m<u.length)for(var w=y.sqr();m<u.length;m++,w=w.sqr())u[m]!==0&&(y=y.mul(w));return y},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26,m=67108863>>>26-u<<26-u,w;if(u!==0){var v=0;for(w=0;w<this.length;w++){var l=this.words[w]&m,g=(this.words[w]|0)-l<<u;this.words[w]=g|v,v=l>>>26-u}v&&(this.words[w]=v,this.length++)}if(y!==0){for(w=this.length-1;w>=0;w--)this.words[w+y]=this.words[w];for(w=0;w<y;w++)this.words[w]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,u,y){n(typeof a=="number"&&a>=0);var m;u?m=(u-u%26)/26:m=0;var w=a%26,v=Math.min((a-w)/26,this.length),l=67108863^67108863>>>w<<w,g=y;if(m-=v,m=Math.max(0,m),g){for(var d=0;d<v;d++)g.words[d]=this.words[d];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,d=0;d<this.length;d++)this.words[d]=this.words[d+v];else this.words[0]=0,this.length=1;var E=0;for(d=this.length-1;d>=0&&(E!==0||d>=m);d--){var L=this.words[d]|0;this.words[d]=E<<26-w|L>>>w,E=L&l}return g&&E!==0&&(g.words[g.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,u,y){return n(this.negative===0),this.iushrn(a,u,y)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26,m=1<<u;if(this.length<=y)return!1;var w=this.words[y];return!!(w&m)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(u!==0&&y++,this.length=Math.min(y,this.length),u!==0){var m=67108863^67108863>>>u<<u;this.words[this.length-1]&=m}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,u,y){var m=a.length+y,w;this._expand(m);var v,l=0;for(w=0;w<a.length;w++){v=(this.words[w+y]|0)+l;var g=(a.words[w]|0)*u;v-=g&67108863,l=(v>>26)-(g/67108864|0),this.words[w+y]=v&67108863}for(;w<this.length-y;w++)v=(this.words[w+y]|0)+l,l=v>>26,this.words[w+y]=v&67108863;if(l===0)return this._strip();for(n(l===-1),l=0,w=0;w<this.length;w++)v=-(this.words[w]|0)+l,l=v>>26,this.words[w]=v&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,u){var y=this.length-a.length,m=this.clone(),w=a,v=w.words[w.length-1]|0,l=this._countBits(v);y=26-l,y!==0&&(w=w.ushln(y),m.iushln(y),v=w.words[w.length-1]|0);var g=m.length-w.length,d;if(u!=="mod"){d=new s(null),d.length=g+1,d.words=new Array(d.length);for(var E=0;E<d.length;E++)d.words[E]=0}var L=m.clone()._ishlnsubmul(w,1,g);L.negative===0&&(m=L,d&&(d.words[g]=1));for(var U=g-1;U>=0;U--){var K=(m.words[w.length+U]|0)*67108864+(m.words[w.length+U-1]|0);for(K=Math.min(K/v|0,67108863),m._ishlnsubmul(w,K,U);m.negative!==0;)K--,m.negative=0,m._ishlnsubmul(w,1,U),m.isZero()||(m.negative^=1);d&&(d.words[U]=K)}return d&&d._strip(),m._strip(),u!=="div"&&y!==0&&m.iushrn(y),{div:d||null,mod:m}},s.prototype.divmod=function(a,u,y){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var m,w,v;return this.negative!==0&&a.negative===0?(v=this.neg().divmod(a,u),u!=="mod"&&(m=v.div.neg()),u!=="div"&&(w=v.mod.neg(),y&&w.negative!==0&&w.iadd(a)),{div:m,mod:w}):this.negative===0&&a.negative!==0?(v=this.divmod(a.neg(),u),u!=="mod"&&(m=v.div.neg()),{div:m,mod:v.mod}):(this.negative&a.negative)!==0?(v=this.neg().divmod(a.neg(),u),u!=="div"&&(w=v.mod.neg(),y&&w.negative!==0&&w.isub(a)),{div:v.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,u)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var y=u.div.negative!==0?u.mod.isub(a):u.mod,m=a.ushrn(1),w=a.andln(1),v=y.cmp(m);return v<0||w===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(a){var u=a<0;u&&(a=-a),n(a<=67108863);for(var y=(1<<26)%a,m=0,w=this.length-1;w>=0;w--)m=(y*m+(this.words[w]|0))%a;return u?-m:m},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var u=a<0;u&&(a=-a),n(a<=67108863);for(var y=0,m=this.length-1;m>=0;m--){var w=(this.words[m]|0)+y*67108864;this.words[m]=w/a|0,y=w%a}return this._strip(),u?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var u=this,y=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var m=new s(1),w=new s(0),v=new s(0),l=new s(1),g=0;u.isEven()&&y.isEven();)u.iushrn(1),y.iushrn(1),++g;for(var d=y.clone(),E=u.clone();!u.isZero();){for(var L=0,U=1;(u.words[0]&U)===0&&L<26;++L,U<<=1);if(L>0)for(u.iushrn(L);L-- >0;)(m.isOdd()||w.isOdd())&&(m.iadd(d),w.isub(E)),m.iushrn(1),w.iushrn(1);for(var K=0,re=1;(y.words[0]&re)===0&&K<26;++K,re<<=1);if(K>0)for(y.iushrn(K);K-- >0;)(v.isOdd()||l.isOdd())&&(v.iadd(d),l.isub(E)),v.iushrn(1),l.iushrn(1);u.cmp(y)>=0?(u.isub(y),m.isub(v),w.isub(l)):(y.isub(u),v.isub(m),l.isub(w))}return{a:v,b:l,gcd:y.iushln(g)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var u=this,y=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var m=new s(1),w=new s(0),v=y.clone();u.cmpn(1)>0&&y.cmpn(1)>0;){for(var l=0,g=1;(u.words[0]&g)===0&&l<26;++l,g<<=1);if(l>0)for(u.iushrn(l);l-- >0;)m.isOdd()&&m.iadd(v),m.iushrn(1);for(var d=0,E=1;(y.words[0]&E)===0&&d<26;++d,E<<=1);if(d>0)for(y.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(v),w.iushrn(1);u.cmp(y)>=0?(u.isub(y),m.isub(w)):(y.isub(u),w.isub(m))}var L;return u.cmpn(1)===0?L=m:L=w,L.cmpn(0)<0&&L.iadd(a),L},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),y=a.clone();u.negative=0,y.negative=0;for(var m=0;u.isEven()&&y.isEven();m++)u.iushrn(1),y.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;y.isEven();)y.iushrn(1);var w=u.cmp(y);if(w<0){var v=u;u=y,y=v}else if(w===0||y.cmpn(1)===0)break;u.isub(y)}while(!0);return y.iushln(m)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var u=a%26,y=(a-u)/26,m=1<<u;if(this.length<=y)return this._expand(y+1),this.words[y]|=m,this;for(var w=m,v=y;w!==0&&v<this.length;v++){var l=this.words[v]|0;l+=w,w=l>>>26,l&=67108863,this.words[v]=l}return w!==0&&(this.words[v]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var y;if(this.length>1)y=1;else{u&&(a=-a),n(a<=67108863,"Number is too big");var m=this.words[0]|0;y=m===a?0:m<a?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,y=this.length-1;y>=0;y--){var m=this.words[y]|0,w=a.words[y]|0;if(m!==w){m<w?u=-1:m>w&&(u=1);break}}return u},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new T(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var F={k256:null,p224:null,p192:null,p25519:null};function z(c,a){this.name=c,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},z.prototype.ireduce=function(a){var u=a,y;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),y=u.bitLength();while(y>this.n);var m=y<this.n?-1:u.ucmp(this.p);return m===0?(u.words[0]=0,u.length=1):m>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},z.prototype.split=function(a,u){a.iushrn(this.n,0,u)},z.prototype.imulK=function(a){return a.imul(this.k)};function Z(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,z),Z.prototype.split=function(a,u){for(var y=4194303,m=Math.min(a.length,9),w=0;w<m;w++)u.words[w]=a.words[w];if(u.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var v=a.words[9];for(u.words[u.length++]=v&y,w=10;w<a.length;w++){var l=a.words[w]|0;a.words[w-10]=(l&y)<<4|v>>>22,v=l}v>>>=22,a.words[w-10]=v,v===0&&a.length>10?a.length-=10:a.length-=9},Z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,y=0;y<a.length;y++){var m=a.words[y]|0;u+=m*977,a.words[y]=u&67108863,u=m*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function te(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(te,z);function ee(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ee,z);function pe(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(pe,z),pe.prototype.imulK=function(a){for(var u=0,y=0;y<a.length;y++){var m=(a.words[y]|0)*19+u,w=m&67108863;m>>>=26,a.words[y]=w,u=m}return u!==0&&(a.words[a.length++]=u),a},s._prime=function(a){if(F[a])return F[a];var u;if(a==="k256")u=new Z;else if(a==="p224")u=new te;else if(a==="p192")u=new ee;else if(a==="p25519")u=new pe;else throw new Error("Unknown prime "+a);return F[a]=u,u};function T(c){if(typeof c=="string"){var a=s._prime(c);this.m=a.p,this.prime=a}else n(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}T.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,u){n((a.negative|u.negative)===0,"red works only with positives"),n(a.red&&a.red===u.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(x(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,u){this._verify2(a,u);var y=a.add(u);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},T.prototype.iadd=function(a,u){this._verify2(a,u);var y=a.iadd(u);return y.cmp(this.m)>=0&&y.isub(this.m),y},T.prototype.sub=function(a,u){this._verify2(a,u);var y=a.sub(u);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},T.prototype.isub=function(a,u){this._verify2(a,u);var y=a.isub(u);return y.cmpn(0)<0&&y.iadd(this.m),y},T.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},T.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},T.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(a,y)}for(var m=this.m.subn(1),w=0;!m.isZero()&&m.andln(1)===0;)w++,m.iushrn(1);n(!m.isZero());var v=new s(1).toRed(this),l=v.redNeg(),g=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);this.pow(d,g).cmp(l)!==0;)d.redIAdd(l);for(var E=this.pow(d,m),L=this.pow(a,m.addn(1).iushrn(1)),U=this.pow(a,m),K=w;U.cmp(v)!==0;){for(var re=U,oe=0;re.cmp(v)!==0;oe++)re=re.redSqr();n(oe<K);var Y=this.pow(E,new s(1).iushln(K-oe-1));L=L.redMul(Y),E=Y.redSqr(),U=U.redMul(E),K=oe}return L},T.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},T.prototype.pow=function(a,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var y=4,m=new Array(1<<y);m[0]=new s(1).toRed(this),m[1]=a;for(var w=2;w<m.length;w++)m[w]=this.mul(m[w-1],a);var v=m[0],l=0,g=0,d=u.bitLength()%26;for(d===0&&(d=26),w=u.length-1;w>=0;w--){for(var E=u.words[w],L=d-1;L>=0;L--){var U=E>>L&1;if(v!==m[0]&&(v=this.sqr(v)),U===0&&l===0){g=0;continue}l<<=1,l|=U,g++,!(g!==y&&(w!==0||L!==0))&&(v=this.mul(v,m[l]),g=0,l=0)}d=26}return v},T.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},T.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},s.mont=function(a){return new h(a)};function h(c){T.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(h,T),h.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},h.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},h.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(u),m=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(m).iushrn(this.shift),v=w;return w.cmp(this.m)>=0?v=w.isub(this.m):w.cmpn(0)<0&&(v=w.iadd(this.m)),v._forceRed(this)},h.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new s(0)._forceRed(this);var y=a.mul(u),m=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(m).iushrn(this.shift),v=w;return w.cmp(this.m)>=0?v=w.isub(this.m):w.cmpn(0)<0&&(v=w.iadd(this.m)),v._forceRed(this)},h.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(t,V)})(h_);var FR=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$R=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cs=V&&V.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},jR=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&FR(e,t,r);return $R(e,t),e},d_=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dr,"__esModule",{value:!0});dr.deserializeUnchecked=dr.deserialize=dr.serialize=dr.BinaryReader=dr.BinaryWriter=dr.BorshError=dr.baseDecode=dr.baseEncode=void 0;const Xs=d_(h_.exports),p_=d_(bl),qR=jR(F_),KR=typeof V.TextDecoder!="function"?qR.TextDecoder:V.TextDecoder,zR=new KR("utf-8",{fatal:!0});function HR(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),p_.default.encode(Buffer.from(t))}dr.baseEncode=HR;function GR(t){return Buffer.from(p_.default.decode(t))}dr.baseDecode=GR;const $0=1024;class wn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}dr.BorshError=wn;class g_{constructor(){this.buf=Buffer.alloc($0),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc($0)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc($0)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}dr.BinaryWriter=g_;function ls(t,e,r){const n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new wn("Reached the end of buffer when deserializing")}throw s}}}class Jn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Xs.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Xs.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Xs.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Xs.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new wn(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return zR.decode(r)}catch(n){throw new wn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}}cs([ls],Jn.prototype,"readU8",null);cs([ls],Jn.prototype,"readU16",null);cs([ls],Jn.prototype,"readU32",null);cs([ls],Jn.prototype,"readU64",null);cs([ls],Jn.prototype,"readU128",null);cs([ls],Jn.prototype,"readU256",null);cs([ls],Jn.prototype,"readU512",null);cs([ls],Jn.prototype,"readString",null);cs([ls],Jn.prototype,"readFixedArray",null);cs([ls],Jn.prototype,"readArray",null);dr.BinaryReader=Jn;function y_(t){return t.charAt(0).toUpperCase()+t.slice(1)}function fu(t,e,r,n,i){try{if(typeof n=="string")i[`write${y_(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new wn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new wn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)fu(t,null,r[s],n[0],i)}else i.writeArray(r,s=>{fu(t,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),fu(t,e,r,n.type,i));break}default:throw new wn(`FieldType ${n} unrecognized`)}else m_(t,r,i)}catch(s){throw s instanceof wn&&s.addToFieldPath(e),s}}function m_(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new wn(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{fu(t,i,e[i],s,r)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,f]=n.values[s];if(o===i){r.writeU8(s),fu(t,o,e[o],f,r);break}}}else throw new wn(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function VR(t,e,r=g_){const n=new r;return m_(t,e,n),n.toArray()}dr.serialize=VR;function uu(t,e,r,n){try{if(typeof r=="string")return n[`read${y_(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const i=[];for(let s=0;s<r[1];s++)i.push(uu(t,null,r[0],n));return i}else return n.readArray(()=>uu(t,e,r[0],n))}return r.kind==="option"?n.readU8()?uu(t,e,r.type,n):void 0:Yg(t,r,n)}catch(i){throw i instanceof wn&&i.addToFieldPath(e),i}}function Yg(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new wn(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=uu(t,s,o,r);return new e(i)}if(n.kind==="enum"){const i=r.readU8();if(i>=n.values.length)throw new wn(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],f=uu(t,s,o,r);return new e({[s]:f})}throw new wn(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function WR(t,e,r,n=Jn){const i=new n(r),s=Yg(t,e,i);if(i.offset<r.length)throw new wn(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}dr.deserialize=WR;function JR(t,e,r,n=Jn){const i=new n(r);return Yg(t,e,i)}dr.deserializeUnchecked=JR;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=dr;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(Jg);var so={};Object.defineProperty(so,"__esModule",{value:!0});so.Assignable=so.Enum=void 0;class YR{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}so.Enum=YR;class ZR{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}so.Assignable=ZR;(function(t){var e=V&&V.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const r=e(l_.exports),n=Jg,i=so;var s;(function(_){_[_.ED25519=0]="ED25519"})(s=t.KeyType||(t.KeyType={}));function o(_){switch(_){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${_}`)}}function f(_){switch(_.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${_}`)}}class p extends i.Assignable{static from(S){return typeof S=="string"?p.fromString(S):S}static fromString(S){const M=S.split(":");if(M.length===1)return new p({keyType:s.ED25519,data:n.base_decode(M[0])});if(M.length===2)return new p({keyType:f(M[0]),data:n.base_decode(M[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${o(this.keyType)}:${n.base_encode(this.data)}`}verify(S,M){switch(this.keyType){case s.ED25519:return r.default.sign.detached.verify(S,M,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}t.PublicKey=p;class b{static fromRandom(S){switch(S.toUpperCase()){case"ED25519":return x.fromRandom();default:throw new Error(`Unknown curve ${S}`)}}static fromString(S){const M=S.split(":");if(M.length===1)return new x(M[0]);if(M.length===2)switch(M[0].toUpperCase()){case"ED25519":return new x(M[1]);default:throw new Error(`Unknown curve: ${M[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=b;class x extends b{constructor(S){super();const M=r.default.sign.keyPair.fromSecretKey(n.base_decode(S));this.publicKey=new p({keyType:s.ED25519,data:M.publicKey}),this.secretKey=S}static fromRandom(){const S=r.default.sign.keyPair();return new x(n.base_encode(S.secretKey))}sign(S){return{signature:r.default.sign.detached(S,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(S,M){return this.publicKey.verify(S,M)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=x})(rs);Object.defineProperty(Qu,"__esModule",{value:!0});Qu.InMemoryKeyStore=void 0;const XR=aa,QR=rs;class eC extends XR.KeyStore{constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?QR.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}Qu.InMemoryKeyStore=eC;var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.BrowserLocalStorageKeyStore=void 0;const tC=aa,rC=rs,nC="near-api-js:keystore:";class iC extends tC.KeyStore{constructor(e=window.localStorage,r=nC){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?rC.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Ch.BrowserLocalStorageKeyStore=iC;var Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.MergeKeyStore=void 0;const sC=aa;class oC extends sC.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}Nh.MergeKeyStore=oC;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=aa;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=Qu;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=Ch;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=Nh;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(c_);var Zg={},Mf={},Xg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function r(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}t.getTransactionLastResult=r})(Xg);var v_={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Tf=aC;function aC(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=fC,e.property=uC,e}function fC(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function uC(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var fa={},b_={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var cC=lC;function lC(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=hC,e.property=dC,e}function hC(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function dC(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var pC=Object.setPrototypeOf||({__proto__:[]}instanceof Array?gC:yC);function gC(t,e){return t.__proto__=e,t}function yC(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}var mC={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var x_=mC,vC=Gi;Gi.STATUS_CODES=x_;Gi.codes=bC(Gi,x_);Gi.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Gi.empty={204:!0,205:!0,304:!0};Gi.retry={502:!0,503:!0,504:!0};function bC(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],o=Number(i);t[o]=s,t[s]=o,t[s.toLowerCase()]=o,r.push(o)}),r}function Gi(t){if(typeof t=="number"){if(!Gi[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!Gi[e])throw new Error("invalid status code: "+e);return e}if(e=Gi[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var xC=wC;function wC(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=cC("http-errors"),r=pC,n=vC,i=en.exports,s=xC;t.exports=f,t.exports.HttpError=p(),t.exports.isHttpError=x(t.exports.HttpError),M(t.exports,n.codes,t.exports.HttpError);function o(k){return Number(String(k).charAt(0)+"00")}function f(){for(var k,I,C=500,D={},$=0;$<arguments.length;$++){var j=arguments[$];if(j instanceof Error){k=j,C=k.status||k.statusCode||C;continue}switch(typeof j){case"string":I=j;break;case"number":C=j;break;case"object":D=j;break}}(typeof C!="number"||!n[C]&&(C<400||C>=600))&&(C=500);var F=f[C]||f[o(C)];k||(k=F?new F(I):new Error(I||n[C]),Error.captureStackTrace(k,f)),(!F||!(k instanceof F)||k.status!==C)&&(k.expose=C<500,k.status=k.statusCode=C);for(var z in D)z!=="status"&&z!=="statusCode"&&(k[z]=D[z]);return k}function p(){function k(){throw new TypeError("cannot construct abstract class")}return i(k,Error),k}function b(k,I,C){var D=N(I);function $(j){var F=j??n[C],z=new Error(F);return Error.captureStackTrace(z,$),r(z,$.prototype),Object.defineProperty(z,"message",{enumerable:!0,configurable:!0,value:F,writable:!0}),Object.defineProperty(z,"name",{enumerable:!1,configurable:!0,value:D,writable:!0}),z}return i($,k),S($,D),$.prototype.status=C,$.prototype.statusCode=C,$.prototype.expose=!0,$}function x(k){return function(C){return!C||typeof C!="object"?!1:C instanceof k?!0:C instanceof Error&&typeof C.expose=="boolean"&&typeof C.statusCode=="number"&&C.status===C.statusCode}}function _(k,I,C){var D=N(I);function $(j){var F=j??n[C],z=new Error(F);return Error.captureStackTrace(z,$),r(z,$.prototype),Object.defineProperty(z,"message",{enumerable:!0,configurable:!0,value:F,writable:!0}),Object.defineProperty(z,"name",{enumerable:!1,configurable:!0,value:D,writable:!0}),z}return i($,k),S($,D),$.prototype.status=C,$.prototype.statusCode=C,$.prototype.expose=!1,$}function S(k,I){var C=Object.getOwnPropertyDescriptor(k,"name");C&&C.configurable&&(C.value=I,Object.defineProperty(k,"name",C))}function M(k,I,C){I.forEach(function($){var j,F=s(n[$]);switch(o($)){case 400:j=b(C,F,$);break;case 500:j=_(C,F,$);break}j&&(k[$]=j,k[F]=j)}),k["I'mateapot"]=e.function(k.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function N(k){return k.substr(-5)!=="Error"?k+"Error":k}})(b_);var ec={};Object.defineProperty(ec,"__esModule",{value:!0});async function _C(t,e,r,n){let i=t;for(let s=0;s<e;s++){const o=await n();if(o)return o;await EC(i),i*=r}return null}ec.default=_C;function EC(t){return new Promise(e=>setTimeout(e,t))}var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.logWarning=Yr.ErrorContext=Yr.TypedError=Yr.ArgumentTypeError=Yr.PositionalArgsError=void 0;class AC extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Yr.PositionalArgsError=AC;class SC extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Yr.ArgumentTypeError=SC;class MC extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Yr.TypedError=MC;class TC{constructor(e){this.transactionHash=e}}Yr.ErrorContext=TC;function PC(...t){process.env.NEAR_NO_LOGS||console.warn(...t)}Yr.logWarning=PC;var w_=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fa,"__esModule",{value:!0});fa.fetchJson=void 0;const kC=w_(b_.exports),IC=w_(ec),RC=Mf,Dm=Yr,CC=1e3,NC=1.5,Um=10;async function BC(t,e){let r={url:null};typeof t=="string"?r.url=t:r=t;const n=await IC.default(CC,Um,NC,async()=>{try{const i=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!i.ok){if(i.status===503)return Dm.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw kC.default(i.status,await i.text())}return i}catch(i){if(i.toString().includes("FetchError")||i.toString().includes("Failed to fetch"))return Dm.logWarning(`Retrying HTTP request for ${r.url} because of error: ${i}`),null;throw i}});if(!n)throw new RC.TypedError(`Exceeded ${Um} attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}fa.fetchJson=BC;var kn={},__={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(V,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(c){return r.call(c)==="[object Array]"};function i(h){return typeof h=="function"}function s(h){return n(h)?"array":typeof h}function o(h){return h.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(h,c){return h!=null&&typeof h=="object"&&c in h}function p(h,c){return h!=null&&typeof h!="object"&&h.hasOwnProperty&&h.hasOwnProperty(c)}var b=RegExp.prototype.test;function x(h,c){return b.call(h,c)}var _=/\S/;function S(h){return!x(_,h)}var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function N(h){return String(h).replace(/[&<>"'`=\/]/g,function(a){return M[a]})}var k=/\s*/,I=/\s+/,C=/\s*=/,D=/\s*\}/,$=/#|\^|\/|>|\{|&|=|!/;function j(h,c){if(!h)return[];var a=!1,u=[],y=[],m=[],w=!1,v=!1,l="",g=0;function d(){if(w&&!v)for(;m.length;)delete y[m.pop()];else m=[];w=!1,v=!1}var E,L,U;function K(Ve){if(typeof Ve=="string"&&(Ve=Ve.split(I,2)),!n(Ve)||Ve.length!==2)throw new Error("Invalid tags: "+Ve);E=new RegExp(o(Ve[0])+"\\s*"),L=new RegExp("\\s*"+o(Ve[1])),U=new RegExp("\\s*"+o("}"+Ve[1]))}K(c||pe.tags);for(var re=new Z(h),oe,Y,be,Fe,he,Je;!re.eos();){if(oe=re.pos,be=re.scanUntil(E),be)for(var rt=0,Se=be.length;rt<Se;++rt)Fe=be.charAt(rt),S(Fe)?(m.push(y.length),l+=Fe):(v=!0,a=!0,l+=" "),y.push(["text",Fe,oe,oe+1]),oe+=1,Fe===`
`&&(d(),l="",g=0,a=!1);if(!re.scan(E))break;if(w=!0,Y=re.scan($)||"name",re.scan(k),Y==="="?(be=re.scanUntil(C),re.scan(C),re.scanUntil(L)):Y==="{"?(be=re.scanUntil(U),re.scan(D),re.scanUntil(L),Y="&"):be=re.scanUntil(L),!re.scan(L))throw new Error("Unclosed tag at "+re.pos);if(Y==">"?he=[Y,be,oe,re.pos,l,g,a]:he=[Y,be,oe,re.pos],g++,y.push(he),Y==="#"||Y==="^")u.push(he);else if(Y==="/"){if(Je=u.pop(),!Je)throw new Error('Unopened section "'+be+'" at '+oe);if(Je[1]!==be)throw new Error('Unclosed section "'+Je[1]+'" at '+oe)}else Y==="name"||Y==="{"||Y==="&"?v=!0:Y==="="&&K(be)}if(d(),Je=u.pop(),Je)throw new Error('Unclosed section "'+Je[1]+'" at '+re.pos);return z(F(y))}function F(h){for(var c=[],a,u,y=0,m=h.length;y<m;++y)a=h[y],a&&(a[0]==="text"&&u&&u[0]==="text"?(u[1]+=a[1],u[3]=a[3]):(c.push(a),u=a));return c}function z(h){for(var c=[],a=c,u=[],y,m,w=0,v=h.length;w<v;++w)switch(y=h[w],y[0]){case"#":case"^":a.push(y),u.push(y),a=y[4]=[];break;case"/":m=u.pop(),m[5]=y[2],a=u.length>0?u[u.length-1][4]:c;break;default:a.push(y)}return c}function Z(h){this.string=h,this.tail=h,this.pos=0}Z.prototype.eos=function(){return this.tail===""},Z.prototype.scan=function(c){var a=this.tail.match(c);if(!a||a.index!==0)return"";var u=a[0];return this.tail=this.tail.substring(u.length),this.pos+=u.length,u},Z.prototype.scanUntil=function(c){var a=this.tail.search(c),u;switch(a){case-1:u=this.tail,this.tail="";break;case 0:u="";break;default:u=this.tail.substring(0,a),this.tail=this.tail.substring(a)}return this.pos+=u.length,u};function te(h,c){this.view=h,this.cache={".":this.view},this.parent=c}te.prototype.push=function(c){return new te(c,this)},te.prototype.lookup=function(c){var a=this.cache,u;if(a.hasOwnProperty(c))u=a[c];else{for(var y=this,m,w,v,l=!1;y;){if(c.indexOf(".")>0)for(m=y.view,w=c.split("."),v=0;m!=null&&v<w.length;)v===w.length-1&&(l=f(m,w[v])||p(m,w[v])),m=m[w[v++]];else m=y.view[c],l=f(y.view,c);if(l){u=m;break}y=y.parent}a[c]=u}return i(u)&&(u=u.call(this.view)),u};function ee(){this.templateCache={_cache:{},set:function(c,a){this._cache[c]=a},get:function(c){return this._cache[c]},clear:function(){this._cache={}}}}ee.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},ee.prototype.parse=function(c,a){var u=this.templateCache,y=c+":"+(a||pe.tags).join(":"),m=typeof u<"u",w=m?u.get(y):void 0;return w==null&&(w=j(c,a),m&&u.set(y,w)),w},ee.prototype.render=function(c,a,u,y){var m=this.getConfigTags(y),w=this.parse(c,m),v=a instanceof te?a:new te(a,void 0);return this.renderTokens(w,v,u,c,y)},ee.prototype.renderTokens=function(c,a,u,y,m){for(var w="",v,l,g,d=0,E=c.length;d<E;++d)g=void 0,v=c[d],l=v[0],l==="#"?g=this.renderSection(v,a,u,y,m):l==="^"?g=this.renderInverted(v,a,u,y,m):l===">"?g=this.renderPartial(v,a,u,m):l==="&"?g=this.unescapedValue(v,a):l==="name"?g=this.escapedValue(v,a,m):l==="text"&&(g=this.rawValue(v)),g!==void 0&&(w+=g);return w},ee.prototype.renderSection=function(c,a,u,y,m){var w=this,v="",l=a.lookup(c[1]);function g(L){return w.render(L,a,u,m)}if(!!l){if(n(l))for(var d=0,E=l.length;d<E;++d)v+=this.renderTokens(c[4],a.push(l[d]),u,y,m);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")v+=this.renderTokens(c[4],a.push(l),u,y,m);else if(i(l)){if(typeof y!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(a.view,y.slice(c[3],c[5]),g),l!=null&&(v+=l)}else v+=this.renderTokens(c[4],a,u,y,m);return v}},ee.prototype.renderInverted=function(c,a,u,y,m){var w=a.lookup(c[1]);if(!w||n(w)&&w.length===0)return this.renderTokens(c[4],a,u,y,m)},ee.prototype.indentPartial=function(c,a,u){for(var y=a.replace(/[^ \t]/g,""),m=c.split(`
`),w=0;w<m.length;w++)m[w].length&&(w>0||!u)&&(m[w]=y+m[w]);return m.join(`
`)},ee.prototype.renderPartial=function(c,a,u,y){if(!!u){var m=this.getConfigTags(y),w=i(u)?u(c[1]):u[c[1]];if(w!=null){var v=c[6],l=c[5],g=c[4],d=w;l==0&&g&&(d=this.indentPartial(w,g,v));var E=this.parse(d,m);return this.renderTokens(E,a,u,d,y)}}},ee.prototype.unescapedValue=function(c,a){var u=a.lookup(c[1]);if(u!=null)return u},ee.prototype.escapedValue=function(c,a,u){var y=this.getConfigEscape(u)||pe.escape,m=a.lookup(c[1]);if(m!=null)return typeof m=="number"&&y===pe.escape?String(m):y(m)},ee.prototype.rawValue=function(c){return c[1]},ee.prototype.getConfigTags=function(c){return n(c)?c:c&&typeof c=="object"?c.tags:void 0},ee.prototype.getConfigEscape=function(c){if(c&&typeof c=="object"&&!n(c))return c.escape};var pe={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(h){T.templateCache=h},get templateCache(){return T.templateCache}},T=new ee;return pe.clearCache=function(){return T.clearCache()},pe.parse=function(c,a){return T.parse(c,a)},pe.render=function(c,a,u,y){if(typeof c!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(c)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(c,a,u,y)},pe.escape=N,pe.Scanner=Z,pe.Context=te,pe.Writer=ee,pe})})(__);const OC={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}};var LC={schema:OC};const DC="Exceeded the maximum amount of gas allowed to burn per contract",UC="Method name is empty",FC="Wasmer compilation error: {{msg}}",$C="Smart contract panicked: {{panic_msg}}",jC="Error creating Wasm memory",qC="Exceeded the prepaid gas",KC="Method name is not valid UTF8 string",zC="String encoding is bad UTF-16 sequence",HC="WebAssembly trap: {{msg}}",GC="Gas instrumentation failed or contract has denied instructions.",VC="{{promise_idx}} does not correspond to existing promises",WC="Accessed invalid promise result index: {{result_idx}}",JC="Error happened while deserializing the module",YC="Contract method is not found",ZC="Accessed invalid register id: {{register_id}}",XC="VM Logic returned an invalid receipt index: {{receipt_index}}",QC="Method name is empty in contract call",eN="Returning joint promise is currently prohibited",tN="Stack instrumentation failed",rN="Cannot find contract code for account {{account_id}}",nN="Invalid method signature",iN="Integer overflow happened during contract execution",sN="MemoryAccessViolation",oN="Iterator index {{iterator_index}} does not exist",aN="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",fN="VM Logic returned an invalid account id",uN="Error happened while serializing the module",cN="Actions can only be appended to non-joint promise.",lN="Internal memory declaration has been found in the module",hN="Error happened during instantiation",dN="{{method_name}} is not allowed in view calls",pN="VM Logic returned an invalid method name",gN="String encoding is bad UTF-8 sequence",yN="Exceeded the account balance",mN="Wasm contract link error: {{msg}}",vN="VM Logic provided an invalid public key",bN="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",xN="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",wN="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",_N="Transaction gas or balance cost is too high",EN="Transaction is not signed with the given public key",AN=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,SN="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",MN="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",TN="Transaction has expired",PN="Account {{account_id}} is staking and can not be deleted",kN="Signer {{signer_id}} does not exist",IN="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",RN="The public key {{public_key}} is already used for an existing access key",CN="Invalid signer account ID {{signer_id}} according to requirements",NN="The new account_id {{account_id}} can't be created by {{predecessor_id}}",BN="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",ON="Account {{account_id}} is not yet staked, but tried to unstake",LN="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",DN="Can't create a new account {{account_id}}, because it already exists",UN="Transaction parent block hash doesn't belong to the current chain",FN="Can't complete the action because account {{account_id}} doesn't exist",$N="Transaction method name {{method_name}} isn't allowed by the access key",jN="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",qN="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",KN="Invalid receiver account ID {{receiver_id}} according to requirements",zN="Account {{account_id}} tries to remove an access key that doesn't exist",HN="Timeout exceeded",GN="Connection closed";var VN={GasLimitExceeded:DC,MethodEmptyName:UC,WasmerCompileError:FC,GuestPanic:$C,Memory:jC,GasExceeded:qC,MethodUTF8Error:KC,BadUTF16:zC,WasmTrap:HC,GasInstrumentation:GC,InvalidPromiseIndex:VC,InvalidPromiseResultIndex:WC,Deserialization:JC,MethodNotFound:YC,InvalidRegisterId:ZC,InvalidReceiptIndex:XC,EmptyMethodName:QC,CannotReturnJointPromise:eN,StackHeightInstrumentation:tN,CodeDoesNotExist:rN,MethodInvalidSignature:nN,IntegerOverflow:iN,MemoryAccessViolation:sN,InvalidIteratorIndex:oN,IteratorWasInvalidated:aN,InvalidAccountId:fN,Serialization:uN,CannotAppendActionToJointPromise:cN,InternalMemoryDeclared:lN,Instantiate:hN,ProhibitedInView:dN,InvalidMethodName:pN,BadUTF8:gN,BalanceExceeded:yN,LinkError:mN,InvalidPublicKey:vN,ActorNoPermission:bN,LackBalanceForState:xN,ReceiverMismatch:wN,CostOverflow:_N,InvalidSignature:EN,AccessKeyNotFound:AN,NotEnoughBalance:SN,NotEnoughAllowance:MN,Expired:TN,DeleteAccountStaking:PN,SignerDoesNotExist:kN,TriesToStake:IN,AddKeyAlreadyExists:RN,InvalidSigner:CN,CreateAccountNotAllowed:NN,RequiresFullAccess:BN,TriesToUnstake:ON,InvalidNonce:LN,AccountAlreadyExists:DN,InvalidChain:UN,AccountDoesNotExist:FN,MethodNameMismatch:$N,DeleteAccountHasRent:jN,DeleteAccountHasEnoughBalance:qN,InvalidReceiver:KN,DeleteKeyDoesNotExist:zN,Timeout:HN,Closed:GN},Qg=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kn,"__esModule",{value:!0});kn.getErrorTypeFromErrorMessage=kn.formatError=kn.parseResultError=kn.parseRpcError=kn.ServerError=void 0;const WN=Qg(__.exports),JN=Qg(LC),Fm=Qg(VN),YN=Zg,ZN=Yr,XN={formatNear:()=>(t,e)=>YN.utils.format.formatNearAmount(e(t))};class ey extends ZN.TypedError{}kn.ServerError=ey;class QN extends ey{}function E_(t){const e={},r=S_(t,JN.default.schema,e,""),n=new ey(A_(r,e),r);return Object.assign(n,e),n}kn.parseRpcError=E_;function eB(t){const e=E_(t.status.Failure),r=new QN;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r}kn.parseResultError=eB;function A_(t,e){return typeof Fm.default[t]=="string"?WN.default.render(Fm.default[t],{...e,...XN}):JSON.stringify(e)}kn.formatError=A_;function S_(t,e,r,n){let i,s,o;for(const f in e){if(rB(t[f]))return t[f];if(j0(t[f]))i=t[f],s=e[f],o=f;else if(j0(t.kind)&&j0(t.kind[f]))i=t.kind[f],s=e[f],o=f;else continue}if(i&&s){for(const f of Object.keys(s.props))r[f]=i[f];return S_(i,e,r,o)}else return r.kind=t,n}function tB(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}kn.getErrorTypeFromErrorMessage=tB;function j0(t){return Object.prototype.toString.call(t)==="[object Object]"}function rB(t){return Object.prototype.toString.call(t)==="[object String]"}(function(t){var e=V&&V.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const r=e(Tf),n=Xg,i=fa,s=Yr;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const o=dr,f=e(ec),p=kn,b=12,x=500,_=1.5;let S=123;class M extends n.Provider{constructor(k){super(),k!=null&&typeof k=="object"?this.connection=k:(r.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:k})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(k){const I=k.encode();return this.sendJsonRpc("broadcast_tx_commit",[Buffer.from(I).toString("base64")])}async sendTransactionAsync(k){const I=k.encode();return this.sendJsonRpc("broadcast_tx_async",[Buffer.from(I).toString("base64")])}async txStatus(k,I){return typeof k=="string"?this.txStatusString(k,I):this.txStatusUint8Array(k,I)}async txStatusUint8Array(k,I){return this.sendJsonRpc("tx",[o.baseEncode(k),I])}async txStatusString(k,I){return this.sendJsonRpc("tx",[k,I])}async txStatusReceipts(k,I){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[o.baseEncode(k),I])}async query(...k){let I;if(k.length===1)I=await this.sendJsonRpc("query",k[0]);else{const[C,D]=k;I=await this.sendJsonRpc("query",[C,D])}if(I&&I.error)throw new s.TypedError(`Querying ${k} failed: ${I.error}.
${JSON.stringify(I,null,2)}`,p.getErrorTypeFromErrorMessage(I.error));return I}async block(k){const{finality:I}=k;let{blockId:C}=k;return typeof k!="object"&&(r.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),C=k),this.sendJsonRpc("block",{block_id:C,finality:I})}async blockChanges(k){const{finality:I}=k,{blockId:C}=k;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:C,finality:I})}async chunk(k){return this.sendJsonRpc("chunk",[k])}async validators(k){return this.sendJsonRpc("validators",[k])}async experimental_genesisConfig(){return r.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(k){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",k)}async experimental_lightClientProof(k){return r.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(k)}async lightClientProof(k){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",k)}async accessKeyChanges(k,I){const{finality:C}=I,{blockId:D}=I;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:k,block_id:D,finality:C})}async singleAccessKeyChanges(k,I){const{finality:C}=I,{blockId:D}=I;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:k,block_id:D,finality:C})}async accountChanges(k,I){const{finality:C}=I,{blockId:D}=I;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:k,block_id:D,finality:C})}async contractStateChanges(k,I,C=""){const{finality:D}=I,{blockId:$}=I;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:k,key_prefix_base64:C,block_id:$,finality:D})}async contractCodeChanges(k,I){const{finality:C}=I,{blockId:D}=I;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:k,block_id:D,finality:C})}async gasPrice(k){return await this.sendJsonRpc("gas_price",[k])}async sendJsonRpc(k,I){const C=await f.default(x,b,_,async()=>{try{const $={method:k,params:I,id:S++,jsonrpc:"2.0"},j=await i.fetchJson(this.connection,JSON.stringify($));if(j.error){if(typeof j.error.data=="object")throw typeof j.error.data.error_message=="string"&&typeof j.error.data.error_type=="string"?new s.TypedError(j.error.data.error_message,j.error.data.error_type):p.parseRpcError(j.error.data);{const F=`[${j.error.code}] ${j.error.message}: ${j.error.data}`;throw j.error.data==="Timeout"||F.includes("Timeout error")||F.includes("query has timed out")?new s.TypedError(F,"TimeoutError"):new s.TypedError(F,p.getErrorTypeFromErrorMessage(j.error.data))}}return j}catch($){if($.type==="TimeoutError")return process.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${k} as it has timed out`,I),null;throw $}}),{result:D}=C;if(typeof D>"u")throw new s.TypedError(`Exceeded ${b} attempts for request to ${k}.`,"RetriesExceeded");return D}}t.JsonRpcProvider=M})(v_);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=Xg;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=v_;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})})(Mf);var ty={},ry={},wo={exports:{}};(function(t){(function(e,r){function n(c,a){if(!c)throw new Error(a||"Assertion failed")}function i(c,a){c.super_=a;var u=function(){};u.prototype=a.prototype,c.prototype=new u,c.prototype.constructor=c}function s(c,a,u){if(s.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(c||0,a||10,u||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,u){return a.cmp(u)>0?a:u},s.min=function(a,u){return a.cmp(u)<0?a:u},s.prototype._init=function(a,u,y){if(typeof a=="number")return this._initNumber(a,u,y);if(typeof a=="object")return this._initArray(a,u,y);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&(m++,this.negative=1),m<a.length&&(u===16?this._parseHex(a,m,y):(this._parseBase(a,u,m),y==="le"&&this._initArray(this.toArray(),u,y)))},s.prototype._initNumber=function(a,u,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),u,y)},s.prototype._initArray=function(a,u,y){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w,v,l=0;if(y==="be")for(m=a.length-1,w=0;m>=0;m-=3)v=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[w]|=v<<l&67108863,this.words[w+1]=v>>>26-l&67108863,l+=24,l>=26&&(l-=26,w++);else if(y==="le")for(m=0,w=0;m<a.length;m+=3)v=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[w]|=v<<l&67108863,this.words[w+1]=v>>>26-l&67108863,l+=24,l>=26&&(l-=26,w++);return this._strip()};function f(c,a){var u=c.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+c)}function p(c,a,u){var y=f(c,u);return u-1>=a&&(y|=f(c,u-1)<<4),y}s.prototype._parseHex=function(a,u,y){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w=0,v=0,l;if(y==="be")for(m=a.length-1;m>=u;m-=2)l=p(a,u,m)<<w,this.words[v]|=l&67108863,w>=18?(w-=18,v+=1,this.words[v]|=l>>>26):w+=8;else{var g=a.length-u;for(m=g%2===0?u+1:u;m<a.length;m+=2)l=p(a,u,m)<<w,this.words[v]|=l&67108863,w>=18?(w-=18,v+=1,this.words[v]|=l>>>26):w+=8}this._strip()};function b(c,a,u,y){for(var m=0,w=0,v=Math.min(c.length,u),l=a;l<v;l++){var g=c.charCodeAt(l)-48;m*=y,g>=49?w=g-49+10:g>=17?w=g-17+10:w=g,n(g>=0&&w<y,"Invalid character"),m+=w}return m}s.prototype._parseBase=function(a,u,y){this.words=[0],this.length=1;for(var m=0,w=1;w<=67108863;w*=u)m++;m--,w=w/u|0;for(var v=a.length-y,l=v%m,g=Math.min(v,v-l)+y,d=0,E=y;E<g;E+=m)d=b(a,E,E+m,u),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(l!==0){var L=1;for(d=b(a,E,a.length,u),E=0;E<l;E++)L*=u;this.imuln(L),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function x(c,a){c.words=a.words,c.length=a.length,c.negative=a.negative,c.red=a.red}if(s.prototype._move=function(a){x(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{s.prototype.inspect=_}else s.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,u){a=a||10,u=u|0||1;var y;if(a===16||a==="hex"){y="";for(var m=0,w=0,v=0;v<this.length;v++){var l=this.words[v],g=((l<<m|w)&16777215).toString(16);w=l>>>24-m&16777215,w!==0||v!==this.length-1?y=S[6-g.length]+g+y:y=g+y,m+=2,m>=26&&(m-=26,v--)}for(w!==0&&(y=w.toString(16)+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(a===(a|0)&&a>=2&&a<=36){var d=M[a],E=N[a];y="";var L=this.clone();for(L.negative=0;!L.isZero();){var U=L.modrn(E).toString(a);L=L.idivn(E),L.isZero()?y=U+y:y=S[d-U.length]+U+y}for(this.isZero()&&(y="0"+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,u){return this.toArrayLike(o,a,u)}),s.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var k=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};s.prototype.toArrayLike=function(a,u,y){this._strip();var m=this.byteLength(),w=y||Math.max(1,m);n(m<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var v=k(a,w),l=u==="le"?"LE":"BE";return this["_toArrayLike"+l](v,m),v},s.prototype._toArrayLikeLE=function(a,u){for(var y=0,m=0,w=0,v=0;w<this.length;w++){var l=this.words[w]<<v|m;a[y++]=l&255,y<a.length&&(a[y++]=l>>8&255),y<a.length&&(a[y++]=l>>16&255),v===6?(y<a.length&&(a[y++]=l>>24&255),m=0,v=0):(m=l>>>24,v+=2)}if(y<a.length)for(a[y++]=m;y<a.length;)a[y++]=0},s.prototype._toArrayLikeBE=function(a,u){for(var y=a.length-1,m=0,w=0,v=0;w<this.length;w++){var l=this.words[w]<<v|m;a[y--]=l&255,y>=0&&(a[y--]=l>>8&255),y>=0&&(a[y--]=l>>16&255),v===6?(y>=0&&(a[y--]=l>>24&255),m=0,v=0):(m=l>>>24,v+=2)}if(y>=0)for(a[y--]=m;y>=0;)a[y--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var u=a,y=0;return u>=4096&&(y+=13,u>>>=13),u>=64&&(y+=7,u>>>=7),u>=8&&(y+=4,u>>>=4),u>=2&&(y+=2,u>>>=2),y+u},s.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,y=0;return(u&8191)===0&&(y+=13,u>>>=13),(u&127)===0&&(y+=7,u>>>=7),(u&15)===0&&(y+=4,u>>>=4),(u&3)===0&&(y+=2,u>>>=2),(u&1)===0&&y++,y},s.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function I(c){for(var a=new Array(c.bitLength()),u=0;u<a.length;u++){var y=u/26|0,m=u%26;a[u]=c.words[y]>>>m&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var y=this._zeroBits(this.words[u]);if(a+=y,y!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var y=0;y<u.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=u.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var u,y;this.length>a.length?(u=this,y=a):(u=a,y=this);for(var m=0;m<y.length;m++)this.words[m]=u.words[m]^y.words[m];if(this!==u)for(;m<u.length;m++)this.words[m]=u.words[m];return this.length=u.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,y=a%26;this._expand(u),y>0&&u--;for(var m=0;m<u;m++)this.words[m]=~this.words[m]&67108863;return y>0&&(this.words[m]=~this.words[m]&67108863>>26-y),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,u){n(typeof a=="number"&&a>=0);var y=a/26|0,m=a%26;return this._expand(y+1),u?this.words[y]=this.words[y]|1<<m:this.words[y]=this.words[y]&~(1<<m),this._strip()},s.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var y,m;this.length>a.length?(y=this,m=a):(y=a,m=this);for(var w=0,v=0;v<m.length;v++)u=(y.words[v]|0)+(m.words[v]|0)+w,this.words[v]=u&67108863,w=u>>>26;for(;w!==0&&v<y.length;v++)u=(y.words[v]|0)+w,this.words[v]=u&67108863,w=u>>>26;if(this.length=y.length,w!==0)this.words[this.length]=w,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},s.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var y=this.cmp(a);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,w;y>0?(m=this,w=a):(m=a,w=this);for(var v=0,l=0;l<w.length;l++)u=(m.words[l]|0)-(w.words[l]|0)+v,v=u>>26,this.words[l]=u&67108863;for(;v!==0&&l<m.length;l++)u=(m.words[l]|0)+v,v=u>>26,this.words[l]=u&67108863;if(v===0&&l<m.length&&m!==this)for(;l<m.length;l++)this.words[l]=m.words[l];return this.length=Math.max(this.length,l),m!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(c,a,u){u.negative=a.negative^c.negative;var y=c.length+a.length|0;u.length=y,y=y-1|0;var m=c.words[0]|0,w=a.words[0]|0,v=m*w,l=v&67108863,g=v/67108864|0;u.words[0]=l;for(var d=1;d<y;d++){for(var E=g>>>26,L=g&67108863,U=Math.min(d,a.length-1),K=Math.max(0,d-c.length+1);K<=U;K++){var re=d-K|0;m=c.words[re]|0,w=a.words[K]|0,v=m*w+L,E+=v/67108864|0,L=v&67108863}u.words[d]=L|0,g=E|0}return g!==0?u.words[d]=g|0:u.length--,u._strip()}var D=function(a,u,y){var m=a.words,w=u.words,v=y.words,l=0,g,d,E,L=m[0]|0,U=L&8191,K=L>>>13,re=m[1]|0,oe=re&8191,Y=re>>>13,be=m[2]|0,Fe=be&8191,he=be>>>13,Je=m[3]|0,rt=Je&8191,Se=Je>>>13,Ve=m[4]|0,vt=Ve&8191,ke=Ve>>>13,Ze=m[5]|0,it=Ze&8191,Ie=Ze>>>13,lt=m[6]|0,ht=lt&8191,Ee=lt>>>13,dt=m[7]|0,st=dt&8191,Me=dt>>>13,ot=m[8]|0,pt=ot&8191,Re=ot>>>13,at=m[9]|0,ft=at&8191,_e=at>>>13,et=w[0]|0,Xe=et&8191,xe=et>>>13,nt=w[1]|0,tt=nt&8191,we=nt>>>13,ut=w[2]|0,gt=ut&8191,Ce=ut>>>13,bt=w[3]|0,Ye=bt&8191,me=bt>>>13,Qe=w[4]|0,ct=Qe&8191,Ae=Qe>>>13,yt=w[5]|0,xt=yt&8191,de=yt>>>13,mt=w[6]|0,P=mt&8191,R=mt>>>13,B=w[7]|0,A=B&8191,O=B>>>13,H=w[8]|0,W=H&8191,J=H>>>13,ne=w[9]|0,fe=ne&8191,se=ne>>>13;y.negative=a.negative^u.negative,y.length=19,g=Math.imul(U,Xe),d=Math.imul(U,xe),d=d+Math.imul(K,Xe)|0,E=Math.imul(K,xe);var wt=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(oe,Xe),d=Math.imul(oe,xe),d=d+Math.imul(Y,Xe)|0,E=Math.imul(Y,xe),g=g+Math.imul(U,tt)|0,d=d+Math.imul(U,we)|0,d=d+Math.imul(K,tt)|0,E=E+Math.imul(K,we)|0;var Be=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Be>>>26)|0,Be&=67108863,g=Math.imul(Fe,Xe),d=Math.imul(Fe,xe),d=d+Math.imul(he,Xe)|0,E=Math.imul(he,xe),g=g+Math.imul(oe,tt)|0,d=d+Math.imul(oe,we)|0,d=d+Math.imul(Y,tt)|0,E=E+Math.imul(Y,we)|0,g=g+Math.imul(U,gt)|0,d=d+Math.imul(U,Ce)|0,d=d+Math.imul(K,gt)|0,E=E+Math.imul(K,Ce)|0;var $e=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+($e>>>26)|0,$e&=67108863,g=Math.imul(rt,Xe),d=Math.imul(rt,xe),d=d+Math.imul(Se,Xe)|0,E=Math.imul(Se,xe),g=g+Math.imul(Fe,tt)|0,d=d+Math.imul(Fe,we)|0,d=d+Math.imul(he,tt)|0,E=E+Math.imul(he,we)|0,g=g+Math.imul(oe,gt)|0,d=d+Math.imul(oe,Ce)|0,d=d+Math.imul(Y,gt)|0,E=E+Math.imul(Y,Ce)|0,g=g+Math.imul(U,Ye)|0,d=d+Math.imul(U,me)|0,d=d+Math.imul(K,Ye)|0,E=E+Math.imul(K,me)|0;var je=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(je>>>26)|0,je&=67108863,g=Math.imul(vt,Xe),d=Math.imul(vt,xe),d=d+Math.imul(ke,Xe)|0,E=Math.imul(ke,xe),g=g+Math.imul(rt,tt)|0,d=d+Math.imul(rt,we)|0,d=d+Math.imul(Se,tt)|0,E=E+Math.imul(Se,we)|0,g=g+Math.imul(Fe,gt)|0,d=d+Math.imul(Fe,Ce)|0,d=d+Math.imul(he,gt)|0,E=E+Math.imul(he,Ce)|0,g=g+Math.imul(oe,Ye)|0,d=d+Math.imul(oe,me)|0,d=d+Math.imul(Y,Ye)|0,E=E+Math.imul(Y,me)|0,g=g+Math.imul(U,ct)|0,d=d+Math.imul(U,Ae)|0,d=d+Math.imul(K,ct)|0,E=E+Math.imul(K,Ae)|0;var We=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(We>>>26)|0,We&=67108863,g=Math.imul(it,Xe),d=Math.imul(it,xe),d=d+Math.imul(Ie,Xe)|0,E=Math.imul(Ie,xe),g=g+Math.imul(vt,tt)|0,d=d+Math.imul(vt,we)|0,d=d+Math.imul(ke,tt)|0,E=E+Math.imul(ke,we)|0,g=g+Math.imul(rt,gt)|0,d=d+Math.imul(rt,Ce)|0,d=d+Math.imul(Se,gt)|0,E=E+Math.imul(Se,Ce)|0,g=g+Math.imul(Fe,Ye)|0,d=d+Math.imul(Fe,me)|0,d=d+Math.imul(he,Ye)|0,E=E+Math.imul(he,me)|0,g=g+Math.imul(oe,ct)|0,d=d+Math.imul(oe,Ae)|0,d=d+Math.imul(Y,ct)|0,E=E+Math.imul(Y,Ae)|0,g=g+Math.imul(U,xt)|0,d=d+Math.imul(U,de)|0,d=d+Math.imul(K,xt)|0,E=E+Math.imul(K,de)|0;var Ge=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(ht,Xe),d=Math.imul(ht,xe),d=d+Math.imul(Ee,Xe)|0,E=Math.imul(Ee,xe),g=g+Math.imul(it,tt)|0,d=d+Math.imul(it,we)|0,d=d+Math.imul(Ie,tt)|0,E=E+Math.imul(Ie,we)|0,g=g+Math.imul(vt,gt)|0,d=d+Math.imul(vt,Ce)|0,d=d+Math.imul(ke,gt)|0,E=E+Math.imul(ke,Ce)|0,g=g+Math.imul(rt,Ye)|0,d=d+Math.imul(rt,me)|0,d=d+Math.imul(Se,Ye)|0,E=E+Math.imul(Se,me)|0,g=g+Math.imul(Fe,ct)|0,d=d+Math.imul(Fe,Ae)|0,d=d+Math.imul(he,ct)|0,E=E+Math.imul(he,Ae)|0,g=g+Math.imul(oe,xt)|0,d=d+Math.imul(oe,de)|0,d=d+Math.imul(Y,xt)|0,E=E+Math.imul(Y,de)|0,g=g+Math.imul(U,P)|0,d=d+Math.imul(U,R)|0,d=d+Math.imul(K,P)|0,E=E+Math.imul(K,R)|0;var qe=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(qe>>>26)|0,qe&=67108863,g=Math.imul(st,Xe),d=Math.imul(st,xe),d=d+Math.imul(Me,Xe)|0,E=Math.imul(Me,xe),g=g+Math.imul(ht,tt)|0,d=d+Math.imul(ht,we)|0,d=d+Math.imul(Ee,tt)|0,E=E+Math.imul(Ee,we)|0,g=g+Math.imul(it,gt)|0,d=d+Math.imul(it,Ce)|0,d=d+Math.imul(Ie,gt)|0,E=E+Math.imul(Ie,Ce)|0,g=g+Math.imul(vt,Ye)|0,d=d+Math.imul(vt,me)|0,d=d+Math.imul(ke,Ye)|0,E=E+Math.imul(ke,me)|0,g=g+Math.imul(rt,ct)|0,d=d+Math.imul(rt,Ae)|0,d=d+Math.imul(Se,ct)|0,E=E+Math.imul(Se,Ae)|0,g=g+Math.imul(Fe,xt)|0,d=d+Math.imul(Fe,de)|0,d=d+Math.imul(he,xt)|0,E=E+Math.imul(he,de)|0,g=g+Math.imul(oe,P)|0,d=d+Math.imul(oe,R)|0,d=d+Math.imul(Y,P)|0,E=E+Math.imul(Y,R)|0,g=g+Math.imul(U,A)|0,d=d+Math.imul(U,O)|0,d=d+Math.imul(K,A)|0,E=E+Math.imul(K,O)|0;var ze=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(ze>>>26)|0,ze&=67108863,g=Math.imul(pt,Xe),d=Math.imul(pt,xe),d=d+Math.imul(Re,Xe)|0,E=Math.imul(Re,xe),g=g+Math.imul(st,tt)|0,d=d+Math.imul(st,we)|0,d=d+Math.imul(Me,tt)|0,E=E+Math.imul(Me,we)|0,g=g+Math.imul(ht,gt)|0,d=d+Math.imul(ht,Ce)|0,d=d+Math.imul(Ee,gt)|0,E=E+Math.imul(Ee,Ce)|0,g=g+Math.imul(it,Ye)|0,d=d+Math.imul(it,me)|0,d=d+Math.imul(Ie,Ye)|0,E=E+Math.imul(Ie,me)|0,g=g+Math.imul(vt,ct)|0,d=d+Math.imul(vt,Ae)|0,d=d+Math.imul(ke,ct)|0,E=E+Math.imul(ke,Ae)|0,g=g+Math.imul(rt,xt)|0,d=d+Math.imul(rt,de)|0,d=d+Math.imul(Se,xt)|0,E=E+Math.imul(Se,de)|0,g=g+Math.imul(Fe,P)|0,d=d+Math.imul(Fe,R)|0,d=d+Math.imul(he,P)|0,E=E+Math.imul(he,R)|0,g=g+Math.imul(oe,A)|0,d=d+Math.imul(oe,O)|0,d=d+Math.imul(Y,A)|0,E=E+Math.imul(Y,O)|0,g=g+Math.imul(U,W)|0,d=d+Math.imul(U,J)|0,d=d+Math.imul(K,W)|0,E=E+Math.imul(K,J)|0;var Ke=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,g=Math.imul(ft,Xe),d=Math.imul(ft,xe),d=d+Math.imul(_e,Xe)|0,E=Math.imul(_e,xe),g=g+Math.imul(pt,tt)|0,d=d+Math.imul(pt,we)|0,d=d+Math.imul(Re,tt)|0,E=E+Math.imul(Re,we)|0,g=g+Math.imul(st,gt)|0,d=d+Math.imul(st,Ce)|0,d=d+Math.imul(Me,gt)|0,E=E+Math.imul(Me,Ce)|0,g=g+Math.imul(ht,Ye)|0,d=d+Math.imul(ht,me)|0,d=d+Math.imul(Ee,Ye)|0,E=E+Math.imul(Ee,me)|0,g=g+Math.imul(it,ct)|0,d=d+Math.imul(it,Ae)|0,d=d+Math.imul(Ie,ct)|0,E=E+Math.imul(Ie,Ae)|0,g=g+Math.imul(vt,xt)|0,d=d+Math.imul(vt,de)|0,d=d+Math.imul(ke,xt)|0,E=E+Math.imul(ke,de)|0,g=g+Math.imul(rt,P)|0,d=d+Math.imul(rt,R)|0,d=d+Math.imul(Se,P)|0,E=E+Math.imul(Se,R)|0,g=g+Math.imul(Fe,A)|0,d=d+Math.imul(Fe,O)|0,d=d+Math.imul(he,A)|0,E=E+Math.imul(he,O)|0,g=g+Math.imul(oe,W)|0,d=d+Math.imul(oe,J)|0,d=d+Math.imul(Y,W)|0,E=E+Math.imul(Y,J)|0,g=g+Math.imul(U,fe)|0,d=d+Math.imul(U,se)|0,d=d+Math.imul(K,fe)|0,E=E+Math.imul(K,se)|0;var Oe=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,g=Math.imul(ft,tt),d=Math.imul(ft,we),d=d+Math.imul(_e,tt)|0,E=Math.imul(_e,we),g=g+Math.imul(pt,gt)|0,d=d+Math.imul(pt,Ce)|0,d=d+Math.imul(Re,gt)|0,E=E+Math.imul(Re,Ce)|0,g=g+Math.imul(st,Ye)|0,d=d+Math.imul(st,me)|0,d=d+Math.imul(Me,Ye)|0,E=E+Math.imul(Me,me)|0,g=g+Math.imul(ht,ct)|0,d=d+Math.imul(ht,Ae)|0,d=d+Math.imul(Ee,ct)|0,E=E+Math.imul(Ee,Ae)|0,g=g+Math.imul(it,xt)|0,d=d+Math.imul(it,de)|0,d=d+Math.imul(Ie,xt)|0,E=E+Math.imul(Ie,de)|0,g=g+Math.imul(vt,P)|0,d=d+Math.imul(vt,R)|0,d=d+Math.imul(ke,P)|0,E=E+Math.imul(ke,R)|0,g=g+Math.imul(rt,A)|0,d=d+Math.imul(rt,O)|0,d=d+Math.imul(Se,A)|0,E=E+Math.imul(Se,O)|0,g=g+Math.imul(Fe,W)|0,d=d+Math.imul(Fe,J)|0,d=d+Math.imul(he,W)|0,E=E+Math.imul(he,J)|0,g=g+Math.imul(oe,fe)|0,d=d+Math.imul(oe,se)|0,d=d+Math.imul(Y,fe)|0,E=E+Math.imul(Y,se)|0;var Ue=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,g=Math.imul(ft,gt),d=Math.imul(ft,Ce),d=d+Math.imul(_e,gt)|0,E=Math.imul(_e,Ce),g=g+Math.imul(pt,Ye)|0,d=d+Math.imul(pt,me)|0,d=d+Math.imul(Re,Ye)|0,E=E+Math.imul(Re,me)|0,g=g+Math.imul(st,ct)|0,d=d+Math.imul(st,Ae)|0,d=d+Math.imul(Me,ct)|0,E=E+Math.imul(Me,Ae)|0,g=g+Math.imul(ht,xt)|0,d=d+Math.imul(ht,de)|0,d=d+Math.imul(Ee,xt)|0,E=E+Math.imul(Ee,de)|0,g=g+Math.imul(it,P)|0,d=d+Math.imul(it,R)|0,d=d+Math.imul(Ie,P)|0,E=E+Math.imul(Ie,R)|0,g=g+Math.imul(vt,A)|0,d=d+Math.imul(vt,O)|0,d=d+Math.imul(ke,A)|0,E=E+Math.imul(ke,O)|0,g=g+Math.imul(rt,W)|0,d=d+Math.imul(rt,J)|0,d=d+Math.imul(Se,W)|0,E=E+Math.imul(Se,J)|0,g=g+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,se)|0,d=d+Math.imul(he,fe)|0,E=E+Math.imul(he,se)|0;var Te=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Te>>>26)|0,Te&=67108863,g=Math.imul(ft,Ye),d=Math.imul(ft,me),d=d+Math.imul(_e,Ye)|0,E=Math.imul(_e,me),g=g+Math.imul(pt,ct)|0,d=d+Math.imul(pt,Ae)|0,d=d+Math.imul(Re,ct)|0,E=E+Math.imul(Re,Ae)|0,g=g+Math.imul(st,xt)|0,d=d+Math.imul(st,de)|0,d=d+Math.imul(Me,xt)|0,E=E+Math.imul(Me,de)|0,g=g+Math.imul(ht,P)|0,d=d+Math.imul(ht,R)|0,d=d+Math.imul(Ee,P)|0,E=E+Math.imul(Ee,R)|0,g=g+Math.imul(it,A)|0,d=d+Math.imul(it,O)|0,d=d+Math.imul(Ie,A)|0,E=E+Math.imul(Ie,O)|0,g=g+Math.imul(vt,W)|0,d=d+Math.imul(vt,J)|0,d=d+Math.imul(ke,W)|0,E=E+Math.imul(ke,J)|0,g=g+Math.imul(rt,fe)|0,d=d+Math.imul(rt,se)|0,d=d+Math.imul(Se,fe)|0,E=E+Math.imul(Se,se)|0;var Le=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Le>>>26)|0,Le&=67108863,g=Math.imul(ft,ct),d=Math.imul(ft,Ae),d=d+Math.imul(_e,ct)|0,E=Math.imul(_e,Ae),g=g+Math.imul(pt,xt)|0,d=d+Math.imul(pt,de)|0,d=d+Math.imul(Re,xt)|0,E=E+Math.imul(Re,de)|0,g=g+Math.imul(st,P)|0,d=d+Math.imul(st,R)|0,d=d+Math.imul(Me,P)|0,E=E+Math.imul(Me,R)|0,g=g+Math.imul(ht,A)|0,d=d+Math.imul(ht,O)|0,d=d+Math.imul(Ee,A)|0,E=E+Math.imul(Ee,O)|0,g=g+Math.imul(it,W)|0,d=d+Math.imul(it,J)|0,d=d+Math.imul(Ie,W)|0,E=E+Math.imul(Ie,J)|0,g=g+Math.imul(vt,fe)|0,d=d+Math.imul(vt,se)|0,d=d+Math.imul(ke,fe)|0,E=E+Math.imul(ke,se)|0;var De=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(De>>>26)|0,De&=67108863,g=Math.imul(ft,xt),d=Math.imul(ft,de),d=d+Math.imul(_e,xt)|0,E=Math.imul(_e,de),g=g+Math.imul(pt,P)|0,d=d+Math.imul(pt,R)|0,d=d+Math.imul(Re,P)|0,E=E+Math.imul(Re,R)|0,g=g+Math.imul(st,A)|0,d=d+Math.imul(st,O)|0,d=d+Math.imul(Me,A)|0,E=E+Math.imul(Me,O)|0,g=g+Math.imul(ht,W)|0,d=d+Math.imul(ht,J)|0,d=d+Math.imul(Ee,W)|0,E=E+Math.imul(Ee,J)|0,g=g+Math.imul(it,fe)|0,d=d+Math.imul(it,se)|0,d=d+Math.imul(Ie,fe)|0,E=E+Math.imul(Ie,se)|0;var Ne=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,g=Math.imul(ft,P),d=Math.imul(ft,R),d=d+Math.imul(_e,P)|0,E=Math.imul(_e,R),g=g+Math.imul(pt,A)|0,d=d+Math.imul(pt,O)|0,d=d+Math.imul(Re,A)|0,E=E+Math.imul(Re,O)|0,g=g+Math.imul(st,W)|0,d=d+Math.imul(st,J)|0,d=d+Math.imul(Me,W)|0,E=E+Math.imul(Me,J)|0,g=g+Math.imul(ht,fe)|0,d=d+Math.imul(ht,se)|0,d=d+Math.imul(Ee,fe)|0,E=E+Math.imul(Ee,se)|0;var X=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(X>>>26)|0,X&=67108863,g=Math.imul(ft,A),d=Math.imul(ft,O),d=d+Math.imul(_e,A)|0,E=Math.imul(_e,O),g=g+Math.imul(pt,W)|0,d=d+Math.imul(pt,J)|0,d=d+Math.imul(Re,W)|0,E=E+Math.imul(Re,J)|0,g=g+Math.imul(st,fe)|0,d=d+Math.imul(st,se)|0,d=d+Math.imul(Me,fe)|0,E=E+Math.imul(Me,se)|0;var Q=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(Q>>>26)|0,Q&=67108863,g=Math.imul(ft,W),d=Math.imul(ft,J),d=d+Math.imul(_e,W)|0,E=Math.imul(_e,J),g=g+Math.imul(pt,fe)|0,d=d+Math.imul(pt,se)|0,d=d+Math.imul(Re,fe)|0,E=E+Math.imul(Re,se)|0;var le=(l+g|0)+((d&8191)<<13)|0;l=(E+(d>>>13)|0)+(le>>>26)|0,le&=67108863,g=Math.imul(ft,fe),d=Math.imul(ft,se),d=d+Math.imul(_e,fe)|0,E=Math.imul(_e,se);var ae=(l+g|0)+((d&8191)<<13)|0;return l=(E+(d>>>13)|0)+(ae>>>26)|0,ae&=67108863,v[0]=wt,v[1]=Be,v[2]=$e,v[3]=je,v[4]=We,v[5]=Ge,v[6]=qe,v[7]=ze,v[8]=Ke,v[9]=Oe,v[10]=Ue,v[11]=Te,v[12]=Le,v[13]=De,v[14]=Ne,v[15]=X,v[16]=Q,v[17]=le,v[18]=ae,l!==0&&(v[19]=l,y.length++),y};Math.imul||(D=C);function $(c,a,u){u.negative=a.negative^c.negative,u.length=c.length+a.length;for(var y=0,m=0,w=0;w<u.length-1;w++){var v=m;m=0;for(var l=y&67108863,g=Math.min(w,a.length-1),d=Math.max(0,w-c.length+1);d<=g;d++){var E=w-d,L=c.words[E]|0,U=a.words[d]|0,K=L*U,re=K&67108863;v=v+(K/67108864|0)|0,re=re+l|0,l=re&67108863,v=v+(re>>>26)|0,m+=v>>>26,v&=67108863}u.words[w]=l,y=v,v=m}return y!==0?u.words[w]=y:u.length--,u._strip()}function j(c,a,u){return $(c,a,u)}s.prototype.mulTo=function(a,u){var y,m=this.length+a.length;return this.length===10&&a.length===10?y=D(this,a,u):m<63?y=C(this,a,u):m<1024?y=$(this,a,u):y=j(this,a,u),y},s.prototype.mul=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},s.prototype.mulf=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),j(this,a,u)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var u=a<0;u&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var y=0,m=0;m<this.length;m++){var w=(this.words[m]|0)*a,v=(w&67108863)+(y&67108863);y>>=26,y+=w/67108864|0,y+=v>>>26,this.words[m]=v&67108863}return y!==0&&(this.words[m]=y,this.length++),u?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var u=I(a);if(u.length===0)return new s(1);for(var y=this,m=0;m<u.length&&u[m]===0;m++,y=y.sqr());if(++m<u.length)for(var w=y.sqr();m<u.length;m++,w=w.sqr())u[m]!==0&&(y=y.mul(w));return y},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26,m=67108863>>>26-u<<26-u,w;if(u!==0){var v=0;for(w=0;w<this.length;w++){var l=this.words[w]&m,g=(this.words[w]|0)-l<<u;this.words[w]=g|v,v=l>>>26-u}v&&(this.words[w]=v,this.length++)}if(y!==0){for(w=this.length-1;w>=0;w--)this.words[w+y]=this.words[w];for(w=0;w<y;w++)this.words[w]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,u,y){n(typeof a=="number"&&a>=0);var m;u?m=(u-u%26)/26:m=0;var w=a%26,v=Math.min((a-w)/26,this.length),l=67108863^67108863>>>w<<w,g=y;if(m-=v,m=Math.max(0,m),g){for(var d=0;d<v;d++)g.words[d]=this.words[d];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,d=0;d<this.length;d++)this.words[d]=this.words[d+v];else this.words[0]=0,this.length=1;var E=0;for(d=this.length-1;d>=0&&(E!==0||d>=m);d--){var L=this.words[d]|0;this.words[d]=E<<26-w|L>>>w,E=L&l}return g&&E!==0&&(g.words[g.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,u,y){return n(this.negative===0),this.iushrn(a,u,y)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26,m=1<<u;if(this.length<=y)return!1;var w=this.words[y];return!!(w&m)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var u=a%26,y=(a-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(u!==0&&y++,this.length=Math.min(y,this.length),u!==0){var m=67108863^67108863>>>u<<u;this.words[this.length-1]&=m}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,u,y){var m=a.length+y,w;this._expand(m);var v,l=0;for(w=0;w<a.length;w++){v=(this.words[w+y]|0)+l;var g=(a.words[w]|0)*u;v-=g&67108863,l=(v>>26)-(g/67108864|0),this.words[w+y]=v&67108863}for(;w<this.length-y;w++)v=(this.words[w+y]|0)+l,l=v>>26,this.words[w+y]=v&67108863;if(l===0)return this._strip();for(n(l===-1),l=0,w=0;w<this.length;w++)v=-(this.words[w]|0)+l,l=v>>26,this.words[w]=v&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,u){var y=this.length-a.length,m=this.clone(),w=a,v=w.words[w.length-1]|0,l=this._countBits(v);y=26-l,y!==0&&(w=w.ushln(y),m.iushln(y),v=w.words[w.length-1]|0);var g=m.length-w.length,d;if(u!=="mod"){d=new s(null),d.length=g+1,d.words=new Array(d.length);for(var E=0;E<d.length;E++)d.words[E]=0}var L=m.clone()._ishlnsubmul(w,1,g);L.negative===0&&(m=L,d&&(d.words[g]=1));for(var U=g-1;U>=0;U--){var K=(m.words[w.length+U]|0)*67108864+(m.words[w.length+U-1]|0);for(K=Math.min(K/v|0,67108863),m._ishlnsubmul(w,K,U);m.negative!==0;)K--,m.negative=0,m._ishlnsubmul(w,1,U),m.isZero()||(m.negative^=1);d&&(d.words[U]=K)}return d&&d._strip(),m._strip(),u!=="div"&&y!==0&&m.iushrn(y),{div:d||null,mod:m}},s.prototype.divmod=function(a,u,y){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var m,w,v;return this.negative!==0&&a.negative===0?(v=this.neg().divmod(a,u),u!=="mod"&&(m=v.div.neg()),u!=="div"&&(w=v.mod.neg(),y&&w.negative!==0&&w.iadd(a)),{div:m,mod:w}):this.negative===0&&a.negative!==0?(v=this.divmod(a.neg(),u),u!=="mod"&&(m=v.div.neg()),{div:m,mod:v.mod}):(this.negative&a.negative)!==0?(v=this.neg().divmod(a.neg(),u),u!=="div"&&(w=v.mod.neg(),y&&w.negative!==0&&w.isub(a)),{div:v.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,u)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var y=u.div.negative!==0?u.mod.isub(a):u.mod,m=a.ushrn(1),w=a.andln(1),v=y.cmp(m);return v<0||w===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(a){var u=a<0;u&&(a=-a),n(a<=67108863);for(var y=(1<<26)%a,m=0,w=this.length-1;w>=0;w--)m=(y*m+(this.words[w]|0))%a;return u?-m:m},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var u=a<0;u&&(a=-a),n(a<=67108863);for(var y=0,m=this.length-1;m>=0;m--){var w=(this.words[m]|0)+y*67108864;this.words[m]=w/a|0,y=w%a}return this._strip(),u?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var u=this,y=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var m=new s(1),w=new s(0),v=new s(0),l=new s(1),g=0;u.isEven()&&y.isEven();)u.iushrn(1),y.iushrn(1),++g;for(var d=y.clone(),E=u.clone();!u.isZero();){for(var L=0,U=1;(u.words[0]&U)===0&&L<26;++L,U<<=1);if(L>0)for(u.iushrn(L);L-- >0;)(m.isOdd()||w.isOdd())&&(m.iadd(d),w.isub(E)),m.iushrn(1),w.iushrn(1);for(var K=0,re=1;(y.words[0]&re)===0&&K<26;++K,re<<=1);if(K>0)for(y.iushrn(K);K-- >0;)(v.isOdd()||l.isOdd())&&(v.iadd(d),l.isub(E)),v.iushrn(1),l.iushrn(1);u.cmp(y)>=0?(u.isub(y),m.isub(v),w.isub(l)):(y.isub(u),v.isub(m),l.isub(w))}return{a:v,b:l,gcd:y.iushln(g)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var u=this,y=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var m=new s(1),w=new s(0),v=y.clone();u.cmpn(1)>0&&y.cmpn(1)>0;){for(var l=0,g=1;(u.words[0]&g)===0&&l<26;++l,g<<=1);if(l>0)for(u.iushrn(l);l-- >0;)m.isOdd()&&m.iadd(v),m.iushrn(1);for(var d=0,E=1;(y.words[0]&E)===0&&d<26;++d,E<<=1);if(d>0)for(y.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(v),w.iushrn(1);u.cmp(y)>=0?(u.isub(y),m.isub(w)):(y.isub(u),w.isub(m))}var L;return u.cmpn(1)===0?L=m:L=w,L.cmpn(0)<0&&L.iadd(a),L},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),y=a.clone();u.negative=0,y.negative=0;for(var m=0;u.isEven()&&y.isEven();m++)u.iushrn(1),y.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;y.isEven();)y.iushrn(1);var w=u.cmp(y);if(w<0){var v=u;u=y,y=v}else if(w===0||y.cmpn(1)===0)break;u.isub(y)}while(!0);return y.iushln(m)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var u=a%26,y=(a-u)/26,m=1<<u;if(this.length<=y)return this._expand(y+1),this.words[y]|=m,this;for(var w=m,v=y;w!==0&&v<this.length;v++){var l=this.words[v]|0;l+=w,w=l>>>26,l&=67108863,this.words[v]=l}return w!==0&&(this.words[v]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var y;if(this.length>1)y=1;else{u&&(a=-a),n(a<=67108863,"Number is too big");var m=this.words[0]|0;y=m===a?0:m<a?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,y=this.length-1;y>=0;y--){var m=this.words[y]|0,w=a.words[y]|0;if(m!==w){m<w?u=-1:m>w&&(u=1);break}}return u},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new T(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var F={k256:null,p224:null,p192:null,p25519:null};function z(c,a){this.name=c,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},z.prototype.ireduce=function(a){var u=a,y;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),y=u.bitLength();while(y>this.n);var m=y<this.n?-1:u.ucmp(this.p);return m===0?(u.words[0]=0,u.length=1):m>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},z.prototype.split=function(a,u){a.iushrn(this.n,0,u)},z.prototype.imulK=function(a){return a.imul(this.k)};function Z(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,z),Z.prototype.split=function(a,u){for(var y=4194303,m=Math.min(a.length,9),w=0;w<m;w++)u.words[w]=a.words[w];if(u.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var v=a.words[9];for(u.words[u.length++]=v&y,w=10;w<a.length;w++){var l=a.words[w]|0;a.words[w-10]=(l&y)<<4|v>>>22,v=l}v>>>=22,a.words[w-10]=v,v===0&&a.length>10?a.length-=10:a.length-=9},Z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,y=0;y<a.length;y++){var m=a.words[y]|0;u+=m*977,a.words[y]=u&67108863,u=m*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function te(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(te,z);function ee(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ee,z);function pe(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(pe,z),pe.prototype.imulK=function(a){for(var u=0,y=0;y<a.length;y++){var m=(a.words[y]|0)*19+u,w=m&67108863;m>>>=26,a.words[y]=w,u=m}return u!==0&&(a.words[a.length++]=u),a},s._prime=function(a){if(F[a])return F[a];var u;if(a==="k256")u=new Z;else if(a==="p224")u=new te;else if(a==="p192")u=new ee;else if(a==="p25519")u=new pe;else throw new Error("Unknown prime "+a);return F[a]=u,u};function T(c){if(typeof c=="string"){var a=s._prime(c);this.m=a.p,this.prime=a}else n(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}T.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,u){n((a.negative|u.negative)===0,"red works only with positives"),n(a.red&&a.red===u.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(x(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,u){this._verify2(a,u);var y=a.add(u);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},T.prototype.iadd=function(a,u){this._verify2(a,u);var y=a.iadd(u);return y.cmp(this.m)>=0&&y.isub(this.m),y},T.prototype.sub=function(a,u){this._verify2(a,u);var y=a.sub(u);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},T.prototype.isub=function(a,u){this._verify2(a,u);var y=a.isub(u);return y.cmpn(0)<0&&y.iadd(this.m),y},T.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},T.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},T.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(a,y)}for(var m=this.m.subn(1),w=0;!m.isZero()&&m.andln(1)===0;)w++,m.iushrn(1);n(!m.isZero());var v=new s(1).toRed(this),l=v.redNeg(),g=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);this.pow(d,g).cmp(l)!==0;)d.redIAdd(l);for(var E=this.pow(d,m),L=this.pow(a,m.addn(1).iushrn(1)),U=this.pow(a,m),K=w;U.cmp(v)!==0;){for(var re=U,oe=0;re.cmp(v)!==0;oe++)re=re.redSqr();n(oe<K);var Y=this.pow(E,new s(1).iushln(K-oe-1));L=L.redMul(Y),E=Y.redSqr(),U=U.redMul(E),K=oe}return L},T.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},T.prototype.pow=function(a,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var y=4,m=new Array(1<<y);m[0]=new s(1).toRed(this),m[1]=a;for(var w=2;w<m.length;w++)m[w]=this.mul(m[w-1],a);var v=m[0],l=0,g=0,d=u.bitLength()%26;for(d===0&&(d=26),w=u.length-1;w>=0;w--){for(var E=u.words[w],L=d-1;L>=0;L--){var U=E>>L&1;if(v!==m[0]&&(v=this.sqr(v)),U===0&&l===0){g=0;continue}l<<=1,l|=U,g++,!(g!==y&&(w!==0||L!==0))&&(v=this.mul(v,m[l]),g=0,l=0)}d=26}return v},T.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},T.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},s.mont=function(a){return new h(a)};function h(c){T.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(h,T),h.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},h.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},h.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(u),m=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(m).iushrn(this.shift),v=w;return w.cmp(this.m)>=0?v=w.isub(this.m):w.cmpn(0)<0&&(v=w.iadd(this.m)),v._forceRed(this)},h.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new s(0)._forceRed(this);var y=a.mul(u),m=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=y.isub(m).iushrn(this.shift),v=w;return w.cmp(this.m)>=0?v=w.isub(this.m):w.cmpn(0)<0&&(v=w.iadd(this.m)),v._forceRed(this)},h.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(t,V)})(wo);(function(t){var e=V&&V.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(wo.exports);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(t.NEAR_NOMINATION_EXP,10));const n=[],i=new r.default(10);for(let _=0,S=new r.default(5);_<t.NEAR_NOMINATION_EXP;_++,S=S.mul(i))n[_]=S;function s(_,S=t.NEAR_NOMINATION_EXP){const M=new r.default(_,10);if(S!==t.NEAR_NOMINATION_EXP){const I=t.NEAR_NOMINATION_EXP-S-1;I>0&&M.iadd(n[I])}_=M.toString();const N=_.substring(0,_.length-t.NEAR_NOMINATION_EXP)||"0",k=_.substring(_.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,S);return p(`${x(N)}.${k}`)}t.formatNearAmount=s;function o(_){if(!_)return null;_=f(_);const S=_.split("."),M=S[0],N=S[1]||"";if(S.length>2||N.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${_}' as NEAR amount`);return b(M+N.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=o;function f(_){return _.replace(/,/g,"").trim()}function p(_){return _.replace(/\.?0*$/,"")}function b(_){return _=_.replace(/^0+/,""),_===""?"0":_}function x(_){const S=/(-?\d+)(\d{3})/;for(;S.test(_);)_=_.replace(S,"$1,$2");return _}})(ry);(function(t){var e=V&&V.__createBinding||(Object.create?function(S,M,N,k){k===void 0&&(k=N),Object.defineProperty(S,k,{enumerable:!0,get:function(){return M[N]}})}:function(S,M,N,k){k===void 0&&(k=N),S[k]=M[N]}),r=V&&V.__setModuleDefault||(Object.create?function(S,M){Object.defineProperty(S,"default",{enumerable:!0,value:M})}:function(S,M){S.default=M}),n=V&&V.__importStar||function(S){if(S&&S.__esModule)return S;var M={};if(S!=null)for(var N in S)N!=="default"&&Object.hasOwnProperty.call(S,N)&&e(M,S,N);return r(M,S),M};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const i=n(rs);t.key_pair=i;const s=n(Jg);t.serialize=s;const o=n(fa);t.web=o;const f=n(so);t.enums=f;const p=n(ry);t.format=p;const b=n(kn);t.rpc_errors=b;const x=rs;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return x.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return x.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return x.KeyPairEd25519}});const _=Yr;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return _.logWarning}})})(ty);var tc={};(function(t){var e=V&&V.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const r=e(Nd.exports),n=so,i=dr,s=rs;class o extends n.Assignable{}t.FunctionCallPermission=o;class f extends n.Assignable{}t.FullAccessPermission=f;class p extends n.Enum{}t.AccessKeyPermission=p;class b extends n.Assignable{}t.AccessKey=b;function x(){return new b({nonce:0,permission:new p({fullAccess:new f({})})})}t.fullAccessKey=x;function _(g,d,E){return new b({nonce:0,permission:new p({functionCall:new o({receiverId:g,allowance:E,methodNames:d})})})}t.functionCallAccessKey=_;class S extends n.Assignable{}t.IAction=S;class M extends S{}t.CreateAccount=M;class N extends S{}t.DeployContract=N;class k extends S{}t.FunctionCall=k;class I extends S{}t.Transfer=I;class C extends S{}t.Stake=C;class D extends S{}t.AddKey=D;class $ extends S{}t.DeleteKey=$;class j extends S{}t.DeleteAccount=j;function F(){return new m({createAccount:new M({})})}t.createAccount=F;function z(g){return new m({deployContract:new N({code:g})})}t.deployContract=z;function Z(g){return g.byteLength!==void 0&&g.byteLength===g.length?g:Buffer.from(JSON.stringify(g))}t.stringifyJsonOrBytes=Z;function te(g,d,E,L,U=Z){return new m({functionCall:new k({methodName:g,args:U(d),gas:E,deposit:L})})}t.functionCall=te;function ee(g){return new m({transfer:new I({deposit:g})})}t.transfer=ee;function pe(g,d){return new m({stake:new C({stake:g,publicKey:d})})}t.stake=pe;function T(g,d){return new m({addKey:new D({publicKey:g,accessKey:d})})}t.addKey=T;function h(g){return new m({deleteKey:new $({publicKey:g})})}t.deleteKey=h;function c(g){return new m({deleteAccount:new j({beneficiaryId:g})})}t.deleteAccount=c;class a extends n.Assignable{}t.Signature=a;class u extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(d){return i.deserialize(t.SCHEMA,u,d)}}t.Transaction=u;class y extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(d){return i.deserialize(t.SCHEMA,y,d)}}t.SignedTransaction=y;class m extends n.Enum{}t.Action=m,t.SCHEMA=new Map([[a,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[y,{kind:"struct",fields:[["transaction",u],["signature",a]]}],[u,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[m]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[b,{kind:"struct",fields:[["nonce","u64"],["permission",p]]}],[p,{kind:"enum",field:"enum",values:[["functionCall",o],["fullAccess",f]]}],[o,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[f,{kind:"struct",fields:[]}],[m,{kind:"enum",field:"enum",values:[["createAccount",M],["deployContract",N],["functionCall",k],["transfer",I],["stake",C],["addKey",D],["deleteKey",$],["deleteAccount",j]]}],[M,{kind:"struct",fields:[]}],[N,{kind:"struct",fields:[["code",["u8"]]]}],[k,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[I,{kind:"struct",fields:[["deposit","u128"]]}],[C,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[D,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",b]]}],[$,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[j,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function w(g,d,E,L,U,K){return new u({signerId:g,publicKey:d,nonce:L,receiverId:E,actions:U,blockHash:K})}t.createTransaction=w;async function v(g,d,E,L){const U=i.serialize(t.SCHEMA,g),K=new Uint8Array(r.default.sha256.array(U)),re=await d.signMessage(U,E,L),oe=new y({transaction:g,signature:new a({keyType:g.publicKey.keyType,data:re.signature})});return[K,oe]}async function l(...g){if(g[0].constructor===u){const[d,E,L,U]=g;return v(d,E,L,U)}else{const[d,E,L,U,K,re,oe]=g,Y=await K.getPublicKey(re,oe),be=w(re,Y,d,E,L,U);return v(be,K,re,oe)}}t.signTransaction=l})(tc);var of={},M_=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(of,"__esModule",{value:!0});of.diffEpochValidators=of.findSeatPrice=void 0;const xi=M_(wo.exports),nB=M_(Tf);function iB(t,e,r,n){return n&&n<49?sB(t,e):(r||(nB.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),oB(t,e,r))}of.findSeatPrice=iB;function sB(t,e){const r=t.map(f=>new xi.default(f.stake,10)).sort((f,p)=>f.cmp(p)),n=new xi.default(e),i=r.reduce((f,p)=>f.add(p));if(i.lt(n))throw new Error("Stakes are below seats");let s=new xi.default(1),o=i.add(new xi.default(1));for(;!s.eq(o.sub(new xi.default(1)));){const f=s.add(o).div(new xi.default(2));let p=!1,b=new xi.default(0);for(let x=0;x<r.length;++x)if(b=b.add(r[x].div(f)),b.gte(n)){s=f,p=!0;break}p||(o=f)}return s}function oB(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(s=>new xi.default(s.stake,10)).sort((s,o)=>s.cmp(o)),i=n.reduce((s,o)=>s.add(o));return t.length<e?i.mul(new xi.default(r[0])).div(new xi.default(r[1])):n[0].add(new xi.default(1))}function aB(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}of.diffEpochValidators=aB;var ua={},Bh={},fB=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.DEFAULT_FUNCTION_CALL_GAS=void 0;const uB=fB(wo.exports);Bh.DEFAULT_FUNCTION_CALL_GAS=new uB.default("30000000000000");var ny=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ua,"__esModule",{value:!0});ua.Account=void 0;const qf=ny(wo.exports),Sc=ny(Tf),Mr=tc,Mc=Mf,Tc=dr,Kf=rs,q0=Yr,$m=kn,jm=Bh,cB=ny(ec),lB=12,hB=500,dB=1.5;function pB(t){return JSON.parse(Buffer.from(t).toString())}function gB(t){return Buffer.from(JSON.stringify(t))}class iy{constructor(e,r){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=r}get ready(){return Sc.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){Sc.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(e,r){if(!process.env.NEAR_NO_LOGS)for(const n of r)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),this.printLogs(e,n.logs,"	"),n.failure&&console.warn(`	Failure [${e}]: ${n.failure}`)}printLogs(e,r,n=""){if(!process.env.NEAR_NO_LOGS)for(const i of r)console.log(`${n}Log [${e}]: ${i}`)}async signTransaction(e,r){const n=await this.findAccessKey(e,r);if(!n)throw new Mc.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:i}=n,o=(await this.connection.provider.block({finality:"final"})).header.hash,f=++i.nonce;return await Mr.signTransaction(e,f,r,Tc.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...e){return typeof e[0]=="string"?this.signAndSendTransactionV1(e[0],e[1]):this.signAndSendTransactionV2(e[0])}signAndSendTransactionV1(e,r){return Sc.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:e,actions:r})}async signAndSendTransactionV2({receiverId:e,actions:r,returnError:n}){let i,s;const o=await cB.default(hB,lB,dB,async()=>{[i,s]=await this.signTransaction(e,r);const p=s.transaction.publicKey;try{return await this.connection.provider.sendTransaction(s)}catch(b){if(b.type==="InvalidNonce")return q0.logWarning(`Retrying transaction ${e}:${Tc.baseEncode(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[p.toString()],null;if(b.type==="Expired")return q0.logWarning(`Retrying transaction ${e}:${Tc.baseEncode(i)} due to expired block hash`),null;throw b.context=new Mc.ErrorContext(Tc.baseEncode(i)),b}});if(!o)throw new Mc.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const f=[o.transaction_outcome,...o.receipts_outcome].reduce((p,b)=>b.outcome.logs.length||typeof b.outcome.status=="object"&&typeof b.outcome.status.Failure=="object"?p.concat({receiptIds:b.outcome.receipt_ids,logs:b.outcome.logs,failure:typeof b.outcome.status.Failure<"u"?$m.parseRpcError(b.outcome.status.Failure):null}):p,[]);if(this.printLogsAndFailures(s.transaction.receiverId,f),!n&&typeof o.status=="object"&&typeof o.status.Failure=="object")throw o.status.Failure.error_message&&o.status.Failure.error_type?new Mc.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type):$m.parseResultError(o);return o}async findAccessKey(e,r){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)return null;const i=this.accessKeyByPublicKeyCache[n.toString()];if(i!==void 0)return{publicKey:n,accessKey:i};try{const s=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=s,{publicKey:n,accessKey:s})}catch(s){if(s.type=="AccessKeyDoesNotExist")return null;throw s}}async createAndDeployContract(e,r,n,i){const s=Mr.fullAccessKey();return await this.signAndSendTransaction({receiverId:e,actions:[Mr.createAccount(),Mr.transfer(i),Mr.addKey(Kf.PublicKey.from(r),s),Mr.deployContract(n)]}),new iy(this.connection,e)}async sendMoney(e,r){return this.signAndSendTransaction({receiverId:e,actions:[Mr.transfer(r)]})}async createAccount(e,r,n){const i=Mr.fullAccessKey();return this.signAndSendTransaction({receiverId:e,actions:[Mr.createAccount(),Mr.transfer(n),Mr.addKey(Kf.PublicKey.from(r),i)]})}async deleteAccount(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Mr.deleteAccount(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Mr.deployContract(e)]})}async functionCall(...e){return typeof e[0]=="string"?this.functionCallV1(e[0],e[1],e[2],e[3],e[4]):this.functionCallV2(e[0])}functionCallV1(e,r,n,i,s){return Sc.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),n=n||{},this.validateArgs(n),this.signAndSendTransaction({receiverId:e,actions:[Mr.functionCall(r,n,i||jm.DEFAULT_FUNCTION_CALL_GAS,s)]})}functionCallV2({contractId:e,methodName:r,args:n={},gas:i=jm.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:s,walletMeta:o,walletCallbackUrl:f,stringify:p}){this.validateArgs(n);const b=p===void 0?Mr.stringifyJsonOrBytes:p;return this.signAndSendTransaction({receiverId:e,actions:[Mr.functionCall(r,n,i,s,b)],walletMeta:o,walletCallbackUrl:f})}async addKey(e,r,n,i){n||(n=[]),Array.isArray(n)||(n=[n]);let s;return r?s=Mr.functionCallAccessKey(r,n,i):s=Mr.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[Mr.addKey(Kf.PublicKey.from(e),s)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Mr.deleteKey(Kf.PublicKey.from(e))]})}async stake(e,r){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Mr.stake(r,Kf.PublicKey.from(e))]})}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new q0.PositionalArgsError}async viewFunction(e,r,n={},{parse:i=pB,stringify:s=gB}={}){this.validateArgs(n);const o=s(n).toString("base64"),f=await this.connection.provider.query({request_type:"call_function",account_id:e,method_name:r,args_base64:o,finality:"optimistic"});return f.logs&&this.printLogs(e,f.logs),f.result&&f.result.length>0&&i(Buffer.from(f.result))}async viewState(e,r={finality:"optimistic"}){const{values:n}=await this.connection.provider.query({request_type:"view_state",...r,account_id:this.accountId,prefix_base64:Buffer.from(e).toString("base64")});return n.map(({key:i,value:s})=>({key:Buffer.from(i,"base64"),value:Buffer.from(s,"base64")}))}async getAccessKeys(){const e=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(e)?e:e.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const i=n.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:n.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),r=await this.state(),n=new qf.default(e.runtime_config.storage_amount_per_byte),i=new qf.default(r.storage_usage).mul(n),s=new qf.default(r.locked),o=new qf.default(r.amount).add(s),f=o.sub(qf.default.max(s,i));return{total:o.toString(),stateStaked:i.toString(),staked:s.toString(),available:f.toString()}}}ua.Account=iy;var T_={};(function(t){var e=V&&V.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const r=e(wo.exports),n=e(Tf),i=ua,s=ry,o=rs,f=tc,p=fa;t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new r.default(s.parseNearAmount("1")),t.MULTISIG_GAS=new r.default("100000000000000"),t.MULTISIG_DEPOSIT=new r.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const b={[t.MULTISIG_STORAGE_KEY]:null};class x extends i.Account{constructor(I,C,D){super(I,C),this.storage=D.storage,this.onAddRequestResult=D.onAddRequestResult}async signAndSendTransactionWithAccount(I,C){return super.signAndSendTransaction({receiverId:I,actions:C})}signAndSendTransaction(...I){return typeof I[0]=="string"?this._signAndSendTransaction({receiverId:I[0],actions:I[1]}):this._signAndSendTransaction(I[0])}async _signAndSendTransaction({receiverId:I,actions:C}){const{accountId:D}=this,$=Buffer.from(JSON.stringify({request:{receiver_id:I,actions:N(C,D,I)}}));let j;try{j=await super.signAndSendTransaction({receiverId:D,actions:[f.functionCall("add_request_and_confirm",$,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(z){if(z.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(I,C);throw z}if(!j.status)throw new Error("Request failed");const F={...j.status};if(!F.SuccessValue||typeof F.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:D,actions:C,requestId:parseInt(Buffer.from(F.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(j),this.deleteUnconfirmedRequests(),j}async deleteUnconfirmedRequests(){const I=await this.getRequestIds(),{requestId:C}=this.getRequest();for(const D of I)if(D!=C)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[f.functionCall("delete_request",{request_id:D},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):b[t.MULTISIG_STORAGE_KEY]}setRequest(I){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(I));b[t.MULTISIG_STORAGE_KEY]=I}}t.AccountMultisig=x;class _ extends x{constructor(I,C,D){super(I,C,D),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=D.helperUrl||this.helperUrl,this.storage=D.storage,this.sendCode=D.sendCode||this.sendCodeDefault,this.getCode=D.getCode||this.getCodeDefault,this.verifyCode=D.verifyCode||this.verifyCodeDefault,this.onConfirmResult=D.onConfirmResult}async signAndSendTransaction(...I){return typeof I[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:I[0],actions:I[1]})):this.__signAndSendTransaction(I[0])}async __signAndSendTransaction({receiverId:I,actions:C}){await super.signAndSendTransaction({receiverId:I,actions:C}),await this.sendCode();const D=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(D),D}async deployMultisig(I){const{accountId:C}=this,D=(await this.getRecoveryMethods()).data.filter(({kind:Z,publicKey:te})=>(Z==="phrase"||Z==="ledger")&&te!==null).map(Z=>Z.publicKey),$=(await this.getAccessKeys()).filter(({public_key:Z,access_key:{permission:te}})=>te==="FullAccess"&&!D.includes(Z)).map(Z=>Z.public_key).map(S),j=S((await this.postSignedJson("/2fa/getAccessKey",{accountId:C})).publicKey),F=Buffer.from(JSON.stringify({num_confirmations:2})),z=[...$.map(Z=>f.deleteKey(Z)),...$.map(Z=>f.addKey(Z,f.functionCallAccessKey(C,t.MULTISIG_CHANGE_METHODS,null))),f.addKey(j,f.functionCallAccessKey(C,t.MULTISIG_CONFIRM_METHODS,null)),f.deployContract(I)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&z.push(f.functionCall("new",F,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",C),await super.signAndSendTransactionWithAccount(C,z)}async disable(I){const{accountId:C}=this,$=(await this.getAccessKeys()).filter(({access_key:z})=>z.permission!=="FullAccess").filter(({access_key:z})=>{const Z=z.permission.FunctionCall;return Z.receiver_id===C&&Z.method_names.length===4&&Z.method_names.includes("add_request_and_confirm")}),j=o.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:C})).publicKey),F=[f.deleteKey(j),...$.map(({public_key:z})=>f.deleteKey(o.PublicKey.from(z))),...$.map(({public_key:z})=>f.addKey(o.PublicKey.from(z),null)),f.deployContract(I)];return console.log("disabling 2fa for",C),await this.signAndSendTransaction({receiverId:C,actions:F})}async sendCodeDefault(){const{accountId:I}=this,{requestId:C}=this.getRequest(),D=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:I,method:D,requestId:C}),C}async getCodeDefault(I){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const I=await this.get2faMethod(),C=await this.getCode(I);try{return await this.verifyCode(C)}catch(D){if(console.warn("Error validating security code:",D),D.toString().includes("invalid 2fa code provided")||D.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw D}}async verifyCodeDefault(I){const{accountId:C}=this,D=this.getRequest();if(!D)throw new Error("no request pending");const{requestId:$}=D;return await this.postSignedJson("/2fa/verify",{accountId:C,securityCode:I,requestId:$})}async getRecoveryMethods(){const{accountId:I}=this;return{accountId:I,data:await this.postSignedJson("/account/recoveryMethods",{accountId:I})}}async get2faMethod(){let{data:I}=await this.getRecoveryMethods();if(I&&I.length&&(I=I.find($=>$.kind.indexOf("2fa-")===0)),!I)return null;const{kind:C,detail:D}=I;return{kind:C,detail:D}}async signatureFor(){const{accountId:I}=this,D=(await this.connection.provider.block({finality:"final"})).header.height.toString(),$=await this.connection.signer.signMessage(Buffer.from(D),I,this.connection.networkId),j=Buffer.from($.signature).toString("base64");return{blockNumber:D,blockNumberSignature:j}}async postSignedJson(I,C){return await p.fetchJson(this.helperUrl+I,JSON.stringify({...C,...await this.signatureFor()}))}}t.Account2FA=_;const S=k=>o.PublicKey.from(k),M=k=>k.toString().replace("ed25519:",""),N=(k,I,C)=>k.map(D=>{const $=D.enum,{gas:j,publicKey:F,methodName:z,args:Z,deposit:te,accessKey:ee,code:pe}=D[$],T={type:$[0].toUpperCase()+$.substr(1),gas:j&&j.toString()||void 0,public_key:F&&M(F)||void 0,method_name:z,args:Z&&Buffer.from(Z).toString("base64")||void 0,code:pe&&Buffer.from(pe).toString("base64")||void 0,amount:te&&te.toString()||void 0,deposit:te&&te.toString()||"0",permission:void 0};if(ee&&(C===I&&ee.permission.enum!=="fullAccess"&&(T.permission={receiver_id:I,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),ee.permission.enum==="functionCall")){const{receiverId:h,methodNames:c,allowance:a}=ee.permission.functionCall;T.permission={receiver_id:h,allowance:a&&a.toString()||void 0,method_names:c}}return T})})(T_);var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.UrlAccountCreator=ws.LocalAccountCreator=ws.AccountCreator=void 0;const yB=fa;class sy{}ws.AccountCreator=sy;class mB extends sy{constructor(e,r){super(),this.masterAccount=e,this.initialBalance=r}async createAccount(e,r){await this.masterAccount.createAccount(e,r,this.initialBalance)}}ws.LocalAccountCreator=mB;class vB extends sy{constructor(e,r){super(),this.connection=e,this.helperUrl=r}async createAccount(e,r){await yB.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:r.toString()}))}}ws.UrlAccountCreator=vB;var rc={},zo={},bB=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zo,"__esModule",{value:!0});zo.InMemorySigner=zo.Signer=void 0;const xB=bB(Nd.exports),wB=rs,_B=Qu;class P_{}zo.Signer=P_;class oy extends P_{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new _B.InMemoryKeyStore;return await i.setKey(e,r,n),new oy(i)}async createKey(e,r){const n=wB.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,n),n.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array(xB.default.sha256.array(e));if(!r)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,r);if(s===null)throw new Error(`Key for ${r} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}zo.InMemorySigner=oy;Object.defineProperty(rc,"__esModule",{value:!0});rc.Connection=void 0;const EB=Mf,AB=zo;function SB(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new EB.JsonRpcProvider({...t.args});default:throw new Error(`Unknown provider type ${t.type}`)}}function MB(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new AB.InMemorySigner(t.keyStore);default:throw new Error(`Unknown signer type ${t.type}`)}}class ay{constructor(e,r,n){this.networkId=e,this.provider=r,this.signer=n}static fromConfig(e){const r=SB(e.provider),n=MB(e.signer);return new ay(e.networkId,r,n)}}rc.Connection=ay;var nc={},k_=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nc,"__esModule",{value:!0});nc.Contract=void 0;const TB=k_(wo.exports),PB=k_(Tf),kB=Mf,Id=Yr;function qm(t,e){return{[t](...r){return e(...r)}}[t]}const Km=t=>t&&t.byteLength!==void 0&&t.byteLength===t.length,K0=t=>Object.prototype.toString.call(t)==="[object Object]";class IB{constructor(e,r,n){this.account=e,this.contractId=r;const{viewMethods:i=[],changeMethods:s=[]}=n;i.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:qm(o,async(f={},p={},...b)=>{if(b.length||!(K0(f)||Km(f))||!K0(p))throw new Id.PositionalArgsError;return this.account.viewFunction(this.contractId,o,f,p)})})}),s.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:qm(o,async(...f)=>{if(f.length&&(f.length>3||!(K0(f[0])||Km(f[0]))))throw new Id.PositionalArgsError;return f.length>1||!(f[0]&&f[0].args)?(PB.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:o,args:f[0],gas:f[1],amount:f[2]})):this._changeMethod({methodName:o,...f[0]})})})})}async _changeMethod({args:e,methodName:r,gas:n,amount:i,meta:s,callbackUrl:o}){RB({gas:n,amount:i});const f=await this.account.functionCall({contractId:this.contractId,methodName:r,args:e,gas:n,attachedDeposit:i,walletMeta:s,walletCallbackUrl:o});return kB.getTransactionLastResult(f)}}nc.Contract=IB;function RB(t){const e="number, decimal string or BN";for(const r of Object.keys(t)){const n=t[r];if(n&&!TB.default.isBN(n)&&isNaN(n))throw new Id.ArgumentTypeError(r,e,n)}}var ic={},CB=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ic,"__esModule",{value:!0});ic.Near=void 0;const zm=CB(wo.exports),zf=ua,NB=rc,BB=nc,Hm=ws;class OB{constructor(e){if(this.config=e,this.connection=NB.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps.keyStore}}),e.masterAccount){const r=e.initialBalance?new zm.default(e.initialBalance):new zm.default("500000000000000000000000000");this.accountCreator=new Hm.LocalAccountCreator(new zf.Account(this.connection,e.masterAccount),r)}else e.helperUrl?this.accountCreator=new Hm.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new zf.Account(this.connection,e)}async createAccount(e,r){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,r),new zf.Account(this.connection,e)}async loadContract(e,r){const n=new zf.Account(this.connection,r.sender);return new BB.Contract(n,e,r)}async sendTokens(e,r,n){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new zf.Account(this.connection,r).sendMoney(n,e)).transaction_outcome.id}}ic.Near=OB;var to={},LB=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});to.ConnectedWalletAccount=to.WalletAccount=to.WalletConnection=void 0;const Gm=LB(Tf),DB=ua,I_=tc,R_=ty,UB=dr,FB=dr,$B="/login/",jB="add_request_and_confirm",qB="_wallet_auth_key",z0="pending_key";class C_{constructor(e,r){this._near=e;const n=r+qB,i=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,r=r||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(e={},r,n,i){let s;typeof e=="string"?(Gm.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),s={contractId:e,successUrl:n,failureUrl:i}):s=e;const o=new URL(window.location.href),f=new URL(this._walletBaseUrl+$B);if(f.searchParams.set("success_url",s.successUrl||o.href),f.searchParams.set("failure_url",s.failureUrl||o.href),s.contractId){await(await this._near.account(s.contractId)).state(),f.searchParams.set("contract_id",s.contractId);const b=R_.KeyPair.fromRandom("ed25519");f.searchParams.set("public_key",b.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,z0+b.getPublicKey(),b)}s.methodNames&&s.methodNames.forEach(p=>{f.searchParams.append("methodNames",p)}),window.location.assign(f.toString())}async requestSignTransactions(...e){return Array.isArray(e[0])?(Gm.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:e[0],callbackUrl:e[1],meta:e[2]})):this._requestSignTransactions(e[0])}async _requestSignTransactions({transactions:e,meta:r,callbackUrl:n}){const i=new URL(window.location.href),s=new URL("sign",this._walletBaseUrl);s.searchParams.set("transactions",e.map(o=>FB.serialize(I_.SCHEMA,o)).map(o=>Buffer.from(o).toString("base64")).join(",")),s.searchParams.set("callbackUrl",n||i.href),r&&s.searchParams.set("meta",r),window.location.assign(s.toString())}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),r=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),i=e.searchParams.get("account_id")||"";i&&(this._authData={accountId:i,allKeys:n},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),r&&await this._moveKeyFromTempToPermanent(i,r)),e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,r){const n=await this._keyStore.getKey(this._networkId,z0+r);await this._keyStore.setKey(this._networkId,e,n),await this._keyStore.removeKey(this._networkId,z0+r)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new N_(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}to.WalletConnection=C_;to.WalletAccount=C_;class N_ extends DB.Account{constructor(e,r,n){super(r,n),this.walletConnection=e}signAndSendTransaction(...e){return typeof e[0]=="string"?this._signAndSendTransaction({receiverId:e[0],actions:e[1]}):this._signAndSendTransaction(e[0])}async _signAndSendTransaction({receiverId:e,actions:r,walletMeta:n,walletCallbackUrl:i=window.location.href}){const s=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let o=await this.accessKeyForTransaction(e,r,s);if(!o)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(s&&s.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:r})}catch(S){if(S.type==="NotEnoughAllowance")o=await this.accessKeyForTransaction(e,r);else throw S}const f=await this.connection.provider.block({finality:"final"}),p=UB.baseDecode(f.header.hash),b=R_.PublicKey.from(o.public_key),x=o.access_key.nonce+1,_=I_.createTransaction(this.accountId,b,e,x,r,p);return await this.walletConnection.requestSignTransactions({transactions:[_],meta:n,callbackUrl:i}),new Promise((S,M)=>{setTimeout(()=>{M(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,r,n){const{access_key:{permission:i}}=e;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:s,method_names:o}=i.FunctionCall;if(s===this.accountId&&o.includes(jB))return!0;if(s===r){if(n.length!==1)return!1;const[{functionCall:f}]=n;return f&&(!f.deposit||f.deposit.toString()==="0")&&(o.length===0||o.includes(f.methodName))}}return!1}async accessKeyForTransaction(e,r,n){const i=await this.getAccessKeys();if(n){const o=i.find(f=>f.public_key.toString()===n.toString());if(o&&await this.accessKeyMatchesTransaction(o,e,r))return o}const s=this.walletConnection._authData.allKeys;for(const o of i)if(s.indexOf(o.public_key)!==-1&&await this.accessKeyMatchesTransaction(o,e,r))return o;return null}}to.ConnectedWalletAccount=N_;(function(t){var e=V&&V.__createBinding||(Object.create?function(C,D,$,j){j===void 0&&(j=$),Object.defineProperty(C,j,{enumerable:!0,get:function(){return D[$]}})}:function(C,D,$,j){j===void 0&&(j=$),C[j]=D[$]}),r=V&&V.__setModuleDefault||(Object.create?function(C,D){Object.defineProperty(C,"default",{enumerable:!0,value:D})}:function(C,D){C.default=D}),n=V&&V.__importStar||function(C){if(C&&C.__esModule)return C;var D={};if(C!=null)for(var $ in C)$!=="default"&&Object.hasOwnProperty.call(C,$)&&e(D,C,$);return r(D,C),D};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(Mf);t.providers=i;const s=n(ty);t.utils=s;const o=n(tc);t.transactions=o;const f=n(of);t.validators=f;const p=ua;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return p.Account}});const b=n(T_);t.multisig=b;const x=n(ws);t.accountCreator=x;const _=rc;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return _.Connection}});const S=zo;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return S.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return S.InMemorySigner}});const M=nc;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return M.Contract}});const N=rs;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return N.KeyPair}});const k=ic;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return k.Near}});const I=to;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return I.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return I.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return I.WalletConnection}})})(Zg);var Oh={};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.connect=void 0;const KB=ic;async function zB(t){return new KB.Near(t)}Oh.connect=zB;var Rd=function(){this.tests={},this.cache={}};Rd.prototype={constructor:Rd,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var HB=Rd,GB=HB,fy=new GB,Au=function(t){return fy.test(t)};Au.define=function(t,e){fy.define(t,e)};Au.check=function(t){fy.check(t)};Au.test=Au;var B_=Au,O_=B_,gi=O_.define,To=O_.test;gi("strict mode",function(){return this===void 0});gi("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});gi("es5",function(){return To("Array.prototype.forEach")&&To("Array.prototype.map")&&To("Function.prototype.bind")&&To("Object.create")&&To("Object.defineProperties")&&To("Object.defineProperty")&&To("Object.prototype.hasOwnProperty")});gi("Array.prototype.forEach",function(){return Array.prototype.forEach});gi("Array.prototype.map",function(){return Array.prototype.map});gi("Function.prototype.bind",function(){return Function.prototype.bind});gi("Object.create",function(){return Object.create});gi("Object.defineProperties",function(){return Object.defineProperties});gi("Object.defineProperty",function(){return Object.defineProperty});gi("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});gi("Error.captureStackTrace",function(){return Error.captureStackTrace});gi("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});var uy=B_;uy.check("es5");var VB=function(t,e,r){var n="";if(n+=t.name||"Error",n+=": "+(t.message||""),r instanceof Array)for(var i in r){var s=r[i];n+=`
   # `+s}for(var o in e){var f=e[o];n+=`
   at `+f.toString()}return n},cy=VB,WB=cy,JB=function(){return Error.getStackTrace=function(t){return t.stack},{prepareStackTrace:WB}},Rr=function(){var t=Object.create({Source:Object,config:{},buildArgs:[]});function e(f){var p="config";if(f instanceof Function)p="Source";else if(f instanceof Array)p="buildArgs";else if(f instanceof Object)p="config";else throw new Error("Invalid configuration option.");if(t.hasOwnProperty(p))throw new Error("Duplicated configuration option: "+p+".");t[p]=f}for(var r=0,n=arguments.length;r<n;++r)e(arguments[r]);var i=t.Source,s=t.config,o=t.buildArgs;return(i.extend||Rr.extend).call(i,s,o)};Rr.factory=function(){return function(){var t=this;t.build instanceof Function&&t.build.apply(t,arguments),t.init instanceof Function&&t.init.apply(t,arguments)}};Rr.extend=function(t,e){var r=this;t||(t={});var n;return t.prototype instanceof Object&&t.prototype.constructor!==Object?n=t.prototype.constructor:t.factory instanceof Function&&(n=t.factory.call(r)),n=(r.clone||Rr.clone).call(r,n,e),(n.merge||Rr.merge).call(n,t),n};Rr.prototype.extend=function(t,e){var r=this,n=(r.clone||Rr.prototype.clone).apply(r,e);return(n.merge||Rr.prototype.merge).call(n,t),n};Rr.clone=function(t,e){var r=this;t instanceof Function||(t=(r.factory||Rr.factory).call(r)),t.prototype=(r.prototype.clone||Rr.prototype.clone).apply(r.prototype,e||[]),t.prototype.constructor=t;for(var n in r)n!=="prototype"&&(t[n]=r[n]);return t};Rr.prototype.clone=function(){var t=this,e=Object.create(t);return e.build instanceof Function&&e.build.apply(e,arguments),e};Rr.merge=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.merge||Rr.prototype.merge).call(e.prototype,t.prototype),e};Rr.prototype.merge=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]=t[r]);return e};Rr.absorb=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]===void 0||e[r]===Function.prototype[r])&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.absorb||Rr.prototype.absorb).call(e.prototype,t.prototype),e};Rr.prototype.absorb=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]===void 0||e[r]===Object.prototype[r])&&(e[r]=t[r]);return e};Rr.getAncestor=function(){var t=this;if(t!==t.prototype.constructor)return t.prototype.constructor};Rr.newInstance=function(){var t=this,e=Object.create(this.prototype);return t.apply(e,arguments),e};var YB=Rr,ZB=function(){throw new Error("Not implemented.")},XB={Class:YB,abstractMethod:ZB},sc=XB,QB=function(t){var e=!1,r;return t instanceof Function||(e=!0,r=t,t=null),function(){return e||(e=!0,r=t.apply(this,arguments),t=null),r}},eO=QB,tO=function t(e,r,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],t(e,r,n),--n.length}else r.apply(null,n)},rO={cache:eO,eachCombination:tO},oc=rO,cu=sc.Class,Vm=sc.abstractMethod,nO=oc.eachCombination,Wm=oc.cache,iO=uy,sO=cu(Object,{prototype:{captureFrameStrings:function(t){var e=this.createError();t.unshift(this.captureFrameStrings),t.unshift(this.createError);var r=this.getFrameStrings(e),n=r.slice(t.length),i=[];if(iO("arguments.callee.caller")){var s=[this.createError,this.captureFrameStrings];try{for(var o=arguments.callee;o=o.caller;)s.push(o)}catch{}i=s.slice(t.length)}return{frameStrings:n,functionValues:i}},getFrameStrings:function(t){var e=t.message||"",r=t.name||"",n=this.getStackString(t);if(n!==void 0){var i=n.split(`
`),s=0,o=i.length;return this.hasHeader&&(s+=r.split(`
`).length+e.split(`
`).length-1),this.hasFooter&&(o-=1),i.slice(s,o)}},createError:Vm,getStackString:Vm,hasHeader:void 0,hasFooter:void 0}}),oO=cu(Object,{prototype:{calibrateClass:function(t){return this.calibrateMethods(t)&&this.calibrateEnvelope(t)},calibrateMethods:function(t){try{nO([[function(e){return new Error(e)},function(e){try{throw new Error(e)}catch(r){return r}}],[function(e){return e.stack},function(e){return e.stacktrace}]],function(e,r){if(r(e()))throw{getStackString:r,createError:e}})}catch(e){return cu.merge.call(t,{prototype:e}),!0}return!1},calibrateEnvelope:function(t){var e=t.prototype.getStackString,r=t.prototype.createError,n=e(r("marker")),i=n.split(`
`);return cu.merge.call(t,{prototype:{hasHeader:/marker/.test(i[0]),hasFooter:i[i.length-1]===""}}),!0}}}),aO={getClass:Wm(function(){var t;if(t)return t;t=cu(sO,{});var e=new oO;if(!e.calibrateClass(t))throw new Error("Cannot read Error.prototype.stack in this environment.");return t}),getInstance:Wm(function(){var t=this.getClass(),e=new t;return e})},Jm=sc.Class,Xn=sc.abstractMethod,fO=Jm(Object,{prototype:{init:Jm.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:Xn,getTypeName:Xn,getFunction:function(){return this.functionValue},getFunctionName:Xn,getMethodName:Xn,getFileName:Xn,getLineNumber:Xn,getColumnNumber:Xn,getEvalOrigin:Xn,isTopLevel:Xn,isEval:Xn,isNative:Xn,isConstructor:Xn}}),uO=fO,Ym=sc.Class,cO=uO,Zm=oc.cache,lO=Ym(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(t){Ym.prototype.merge.call(this,t)},getFrames:function(t,e){for(var r=[],n=0,i=t.length;n<i;++n)r[n]=this.getFrame(t[n],e[n]);return r},getFrame:function(t,e){var r={frameString:t,functionValue:e};return new cO(r)}}}),hO={getClass:Zm(function(){return lO}),getInstance:Zm(function(){var t=this.getClass(),e=new t;return e})},Xm=aO,Qm=hO,dO=oc.cache,H0=cy,pO=function(){return Error.captureStackTrace=function t(e,r){var n,i=[t];r&&i.push(r);var s=Xm.getInstance().captureFrameStrings(i);Object.defineProperties(e,{stack:{configurable:!0,get:dO(function(){var o=Qm.getInstance().getFrames(s.frameStrings,s.functionValues);return(Error.prepareStackTrace||H0)(e,o,n)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=Xm.getInstance().getFrameStrings(t),r=[],n;e?r=Qm.getInstance().getFrames(e,[]):n=["The stack is not readable by unthrown errors in this environment."];var i=(Error.prepareStackTrace||H0)(t,r,n);if(e)try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:i},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return i},{prepareStackTrace:H0}},gO=oc.cache,G0=cy,yO=function(){return Error.captureStackTrace=function(t,e){Object.defineProperties(t,{stack:{configurable:!0,get:gO(function(){return(Error.prepareStackTrace||G0)(t,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=(Error.prepareStackTrace||G0)(t,[]);try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:e},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return e},{prepareStackTrace:G0}},ev=uy,Wc;ev("Error.captureStackTrace")?Wc=JB:ev("Error.prototype.stack")?Wc=pO:Wc=yO;Wc();(function(t){var e=V&&V.__createBinding||(Object.create?function(s,o,f,p){p===void 0&&(p=f),Object.defineProperty(s,p,{enumerable:!0,get:function(){return o[f]}})}:function(s,o,f,p){p===void 0&&(p=f),s[p]=o[f]}),r=V&&V.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=V&&V.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var f in s)f!=="default"&&Object.hasOwnProperty.call(s,f)&&e(o,s,f);return r(o,s),o},i=V&&V.__exportStar||function(s,o){for(var f in s)f!=="default"&&!o.hasOwnProperty(f)&&e(o,s,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=n(c_),i(Zg,t),i(Oh,t)})(u_);var ly=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wg,"__esModule",{value:!0});const tv=df,Hf=ly(ao),ds=u_,V0=bl,mO=ly(iv.exports),vO=Nd.exports,bO=ly(xo);class xO extends bO.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new ds.keyStores.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=ds.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var r;const n=await this.providerInstance,[i,s]=e.split(":"),o=await n.txStatusReceipts((0,V0.decode)(s),i),f=await n.block(o.transaction_outcome.block_hash),p=(await n.block({finality:"final"})).header.height;if(o.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const b=(r=o.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&r!==void 0?r:0;return{from:i,to:o.transaction.receiver_id,amount:new Hf.default(b),blockHeight:new Hf.default(f.header.height),pending:!1,confirmed:p-f.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:(0,V0.encode)(e);return(0,V0.decode)(r.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new tv.NearSigner(this.keyPair.secretKey)}async verify(e,r,n){return tv.NearSigner.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new Hf.default(e.sync_info.latest_block_height)}async getFee(e,r){const n=await this.providerInstance.gasPrice(null);return new Hf.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,o=ds.utils.serialize.base_decode(i.block_hash),f=[ds.transactions.transfer(new mO.default(new Hf.default(e).toString()))],p=ds.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,f,o),b=ds.utils.serialize.serialize(ds.transactions.SCHEMA,p),x=new Uint8Array(vO.sha256.array(b)),_=this.keyPair.sign(x);return{tx:new ds.transactions.SignedTransaction({transaction:p,signature:new ds.transactions.Signature({keyType:p.publicKey.keyType,data:_.signature})}),txId:void 0}}async getPublicKey(){return Buffer.from(this.keyPair.getPublicKey().data)}}Wg.default=xO;var hy={},wO=V&&V.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_O=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EO=V&&V.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wO(e,t,r);return _O(e,t),e},Lh=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hy,"__esModule",{value:!0});const rv=df,wa=Lh(ao),AO=Lh(xo),Gf=EO(H_),SO=Lh(bl),MO=Lh(Mh);class TO extends AO.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new Gf.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed"),s=new wa.default(n.meta.postBalances[1]).minus(new wa.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new wa.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=Buffer.from(e)),SO.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new rv.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,r,n){return rv.HexInjectedSolanaSigner.verify(e,r,n)}async getCurrentHeight(){return new wa.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,r){return new wa.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new Gf.PublicKey(await this.getPublicKey()),s=await(0,MO.default)(async f=>{var p;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(b){throw!((p=b.message)===null||p===void 0)&&p.includes("blockhash")?b:(f(b),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new Gf.Transaction({recentBlockhash:s,feePayer:i});return o.add(Gf.SystemProgram.transfer({fromPubkey:i,toPubkey:new Gf.PublicKey(r),lamports:+new wa.default(e).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}hy.default=TO;var L_={};(function(t){var e=V&&V.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const r=e(ao),n=yh,i=xo,s=e(Ih);class o extends s.default{constructor(p){super(p),this.contractAddress=p.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(p){const b=await this.providerInstance.getTransaction(p);if(!b)throw new Error("Tx doesn't exist");if(b.data.length!==138||b.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const x=`0x${b.data.slice(34,74)}`,_=new r.default(b.data.slice(74),16);return{from:b.from,to:x,blockHeight:b.blockNumber?new r.default(b.blockNumber):null,amount:_,pending:!b.blockNumber,confirmed:b.confirmations>=this.minConfirm}}async getFee(p,b){const x="0x"+new r.default(p).toString(16),_=await this.getContract(),S=await this.providerInstance.getGasPrice(),M=await _.estimateGas.transfer(b,x),N=new r.default(S.mul(M).toString()),[k]=await this.getGas(),I=k.multipliedBy(N),C=new r.default(await this.price());return new r.default(I).dividedToIntegerBy(C)}async createTx(p,b,x){const _=await this.getContract(),S="0x"+new r.default(p).toString(16),M=await _.populateTransaction.transfer(b,S);return M.gasPrice=await this.providerInstance.getGasPrice(),M.gasLimit=await _.estimateGas.transfer(b,S),M.chainId=(await this.providerInstance.getNetwork()).chainId,M.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:M}}async getGas(){return[new r.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}t.default=o,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})(L_);var Pf=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gg,"__esModule",{value:!0});const _a=Pf(Ih),PO=Pf(Wg),kO=Pf(hy),IO=Pf(L_),RO=Pf(jd),CO=Pf(oa);function NO(t,e,r,n){switch(t){case"ethereum":return new _a.default({name:"ethereum",ticker:"ETH",providerUrl:r??"https://cloudflare-eth.com/",wallet:e});case"matic":return new _a.default({name:"matic",ticker:"MATIC",providerUrl:r??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new _a.default({name:"arbitrum",ticker:"ETH",providerUrl:r??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new _a.default({name:"bnb",ticker:"BNB",providerUrl:r??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new _a.default({name:"avalanche",ticker:"AVAX",providerUrl:r??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new _a.default({name:"boba-eth",ticker:"ETH",providerUrl:r??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new IO.default({name:"boba",ticker:"BOBA",providerUrl:r??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const o=await RO.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await CO.default.checkAndThrow(o,"Getting price data"),!(!((s=o==null?void 0:o.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+o.data.rate},i}case"solana":return new kO.default({name:"solana",ticker:"SOL",providerUrl:r??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new PO.default({name:"near",ticker:"NEAR",providerUrl:r??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${t}`)}}Gg.default=NO;var kf=V&&V.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jc,"__esModule",{value:!0});const BO=kf(Od),OO=kf(qd),LO=kf(zg),DO=kf(Ju),UO=kf(oa),FO=kf(Gg);class $O extends OO.default{constructor(e,r,n,i){var s;super();const o=new URL(e);this.api=new BO.default({protocol:o.protocol.slice(0,-1),port:o.port,host:o.hostname,timeout:(s=i==null?void 0:i.timeout)!==null&&s!==void 0?s:1e5}),this.currency=r.toLowerCase(),this.currencyConfig=(0,FO.default)(r,n,i==null?void 0:i.providerUrl,i==null?void 0:i.contractAddress),this.utils=new UO.default(this.api,this.currency,this.currencyConfig),this.uploader=new DO.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new LO.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}Jc.default=$O;(function(t){var e=V&&V.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var r=Jc;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e(r).default}});var n=Jc;Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Bd);var jO=$_(Bd),VO=G_({__proto__:null,default:jO},[Bd]);export{VO as i};
