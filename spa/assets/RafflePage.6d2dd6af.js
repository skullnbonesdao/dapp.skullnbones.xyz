import{Q as tt,r as Xt,d as Zt,e as Ml,f as Bl,g as zl,u as ra,h as ua,i as fl,j as sa,a as vl,b as ca}from"./QInput.aace5420.js";import{Q as da}from"./QPage.482aa754.js";import{P as K,aL as fa,af as Se,u as m,a6 as ke,A as R,a7 as L,ad as le,ae as F,a9 as V,ak as W,a8 as ze,al as el,Z as Il,ai as Fe,an as Me,aa as tl,ao as ll,ah as Ie,b3 as pt,aM as ge,aN as Ol,bc as Le,b7 as El,aO as ve,bd as ml,aj as we,be as Yt,bf as gl,bg as va,t as De,v,Y as Ot,b5 as $l,bh as ma,w as It,E as ga,am as mt,F as Ne,H as Sa,C as ie,$ as $e,U as ba,bi as al,V as Fl,X as Dl,D as Ct,G as Et,I as Sl,ba as Ll,b9 as Nl,a0 as ya,bj as ha,aq as _a,T as et,ar as bl,aG as wa,aP as ka,bk as pa,O as Ut,aT as yt,av as Ca,Q as vt,aQ as xa,ax as qa,aJ as yl,bl as Jt,bm as hl,bn as Pa,bo as Aa,az as ht}from"./index.4de59bb1.js";import{Q as Hl,a as kt,b as We}from"./QCardActions.f19195e1.js";import{a as lt,Q as _l}from"./QSeparator.f0397cfa.js";import{p as Kl,l as nl,m as ol,C as jl,u as $t,d as Ft,g as Ta,f as Va,x as Ra,h as Ma,i as Ba,t as za,y as Ia,z as Oa,j as Ea,v as $a,A as wl,B as kl,D as Fa,E as Da,F as La,n as Na,o as Ha}from"./ClosePopup.bafabe87.js";import{A as Ka,P as pl,e as te,r as ja}from"./index.46f1ff27.js";import{d as Ql,Q as Wt}from"./QCheckbox.b4dbea20.js";import{g as Ul,c as Wl}from"./associatedTokenAccount.0e4e18fd.js";import{u as Qa,a as Ua,n as Cl}from"./use-prevent-scroll.43b5c216.js";import{_ as Wa}from"./plugin-vue_export-helper.21dcd24c.js";const Ga="0.1.0",Xa="dapp_raffle",Ya=[{name:"createRaffle",accounts:[{name:"creator",isMut:!0,isSigner:!0},{name:"raffle",isMut:!0,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"proceedsMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"name",type:"string"},{name:"description",type:"string"},{name:"ticketPrice",type:"u64"},{name:"ticketDecimals",type:"u8"},{name:"maxEntrants",type:"u32"}]},{name:"addPrize",accounts:[{name:"creator",isMut:!0,isSigner:!0},{name:"raffle",isMut:!0,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"prizeVault",isMut:!0,isSigner:!1},{name:"prizeMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"},{name:"imageUrl",type:"string"}]},{name:"buyTickets",accounts:[{name:"raffle",isMut:!1,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"proceedsMint",isMut:!1,isSigner:!1},{name:"from",isMut:!0,isSigner:!1},{name:"transferAuth",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"whitelist",isMut:!0,isSigner:!1,docs:["Checks"]},{name:"entry",isMut:!0,isSigner:!1},{name:"whitelistProgram",isMut:!1,isSigner:!1}],args:[{name:"ticketAmount",type:"u64"},{name:"listName",type:"string"},{name:"listAdmin",type:"publicKey"}]},{name:"revealWinners",accounts:[{name:"raffle",isMut:!0,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"recentBlockHashes",isMut:!1,isSigner:!1}],args:[]},{name:"claimPrize",accounts:[{name:"creator",isMut:!0,isSigner:!0},{name:"raffle",isMut:!0,isSigner:!1},{name:"entrants",isMut:!1,isSigner:!1},{name:"prizeVault",isMut:!0,isSigner:!1},{name:"prizeMint",isMut:!1,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"name",type:"string"}]},{name:"collectProceeds",accounts:[{name:"creator",isMut:!1,isSigner:!0},{name:"raffle",isMut:!0,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"proceedsMint",isMut:!1,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"name",type:"string"}]},{name:"closeRaffle",accounts:[{name:"creator",isMut:!0,isSigner:!0},{name:"entrants",isMut:!0,isSigner:!1},{name:"raffle",isMut:!0,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"prizeVault",isMut:!0,isSigner:!1,isOptional:!0},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"name",type:"string"}]}],Ja=[{name:"Raffle",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"creator",type:"publicKey"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"url",type:"string"},{name:"isRunning",type:"bool"},{name:"isClaimed",type:"bool"},{name:"ticketTokenMint",type:"publicKey"},{name:"ticketPrice",type:"u64"},{name:"ticketDecimals",type:"u8"},{name:"prizeTokenMint",type:"publicKey"},{name:"prizeVaultCount",type:"u64"},{name:"prizeDecimals",type:"u8"},{name:"randomness",type:{option:{array:["u8",32]}}},{name:"entrants",type:"publicKey"},{name:"winner",type:"publicKey"}]}},{name:"Entrants",type:{kind:"struct",fields:[{name:"total",type:"u32"},{name:"max",type:"u32"}]}}],Za=[{code:6e3,name:"NoRandomness",msg:"Error no randomness!"},{code:6001,name:"EntrantsAccountTooSmallForMaxEntrants",msg:"Entrants account too small for max entrants"},{code:6002,name:"InvalidPrizeIndex",msg:"Invalid prize index"},{code:6003,name:"NotClaimed",msg:"Raffle is not Claimed"},{code:6004,name:"InvalidTicketCount",msg:"No prize"},{code:6005,name:"NoPrize",msg:"Error ticket count invalid!"},{code:6006,name:"RaffleIsNotRunning",msg:"Error raffle is not running"},{code:6007,name:"RaffleIsRunning",msg:"Error raffle is still running"},{code:6008,name:"InvalidCalculation",msg:"Invalid calculation"},{code:6009,name:"NotEnoughTicketsLeft",msg:"Not enough tickets left"},{code:6010,name:"RaffleStillRunning",msg:"Raffle is still running"},{code:6011,name:"WinnersAlreadyDrawn",msg:"Winner already drawn"},{code:6012,name:"WinnerNotDrawn",msg:"Winner not drawn"},{code:6013,name:"InvalidRevealedData",msg:"Invalid revealed data"},{code:6014,name:"TokenAccountNotOwnedByWinner",msg:"Ticket account not owned by winner"},{code:6015,name:"TicketHasNotWon",msg:"Ticket has not won"},{code:6016,name:"UnclaimedPrizes",msg:"Unclaimed prizes"},{code:6017,name:"InvalidRecentBlockhashes",msg:"Invalid recent blockhashes"},{code:6018,name:"OnlyCreatorCanClaimNoEntrantRafflePrizes",msg:"Only the creator can calin no entrant raffle prizes"},{code:6019,name:"InvalidTreasuryTokenAccountOwner",msg:"Invalid treasury token account owner"}],en={address:"6hr9kL5zieg3WW6NJmTYfMVU4cTUTCxAHdDY2bUood3j"};var Gl={version:Ga,name:Xa,instructions:Ya,accounts:Ja,errors:Za,metadata:en};const tn="processed",ln="confirmed",an=new K(Ql.metadata.address),nn=new K(Gl.metadata.address);let Xl=null;const He=()=>Xl,on=()=>{const e=fa(),l=Se().connection,a=m(()=>new Ka(l,e.value,{preflightCommitment:tn,commitment:ln})),u=m(()=>new pl(Ql,an,a.value)),o=m(()=>new pl(Gl,nn,a.value));Xl={wallet:e,connection:l,provider:a,pg_raffle:o,pg_whitelist:u}},rn=W("p",{class:"text-h5"},"Raffle",-1),un=W("p",{class:"text-h5"},"Tickets",-1),sn={class:"row justify-center"},cn=ke({__name:"RaffleCreateRaffle",setup(e){const l=R(),a=R(),u=R(),o=R(),n=R();async function d(){var b;const{pg_raffle:s}=He();let[r,g]=K.findProgramAddressSync([te("raffle"),te(l.value)],s.value.programId),[i,S]=K.findProgramAddressSync([te("entrants"),r.toBytes()],s.value.programId),[y,k]=K.findProgramAddressSync([te("proceeds"),r.toBytes()],s.value.programId);const x=new K(n.value.account.data.parsed.info.mint.toString()),C=await Se().connection.getParsedAccountInfo(x);try{const $=await s.value.methods.createRaffle(l.value,a.value,new pt(o.value),new pt((b=C.value)==null?void 0:b.data.parsed.info.decimals),u.value).accounts({raffle:r,entrants:i,creator:ge().publicKey.value,proceeds:y,proceedsMint:x,systemProgram:Ol.programId,tokenProgram:Le,rent:El}).rpc();console.log($),ve.create({message:"TX-Signature: "+$,timeout:5e3})}catch($){ve.create({color:"red",message:`${$}`,timeout:5e3})}}return(s,r)=>(L(),le(Hl,{flat:"",bordered:"",class:"col q-pa-md"},{default:F(()=>[V(kt,{class:"q-gutter-y-md"},{default:F(()=>[rn,V(tt,{outlined:"",modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=g=>l.value=g),type:"text",label:"Name"},null,8,["modelValue"]),V(tt,{outlined:"",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=g=>a.value=g),type:"text",label:"Description"},null,8,["modelValue"])]),_:1}),V(lt),V(kt,{class:"q-gutter-y-md"},{default:F(()=>[un,W("div",sn,[V(Kl,{class:"col",color:"primary",label:n.value?n.value.account.data.parsed.info.mint:"Select Ticket Token Mint"},{default:F(()=>[V(nl,null,{default:F(()=>[(L(!0),ze(ll,null,el(tl(Se)().token_accounts,g=>Il((L(),le(ol,{clickable:"",onClick:i=>n.value=g,key:g},{default:F(()=>[Fe(Me(g.account.data.parsed.info.mint),1)]),_:2},1032,["onClick"])),[[jl]])),128))]),_:1})]),_:1},8,["label"])]),V(tt,{outlined:"",modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=g=>o.value=g),type:"number",label:"Tickets"},null,8,["modelValue"]),V(tt,{outlined:"",type:"number",modelValue:u.value,"onUpdate:modelValue":r[3]||(r[3]=g=>u.value=g),label:"Ticket Price"},null,8,["modelValue"])]),_:1}),V(lt),V(kt,null,{default:F(()=>[V(Ie,{class:"row",color:"primary",onClick:r[4]||(r[4]=g=>d())},{default:F(()=>[Fe("Create")]),_:1})]),_:1})]),_:1}))}});function il(e){ml(),Se().connection.confirmTransaction(e);const l=ml().notify({group:!1,timeout:0,spinner:!0,message:"Uploading file...",caption:"0%"});let a=0;const u=setInterval(()=>{a=Math.min(100,a+Math.floor(Math.random()*22)),l({caption:`${a}%`}),a===100&&(l({icon:"done",spinner:!1,message:"Uploading done!",timeout:2500}),clearInterval(u))},500);ve.create({message:"Confirmed: "+e,timeout:3e3,color:"green"})}const dn={key:0,class:"col q-gutter-y-md q-pb-md"},fn=W("p",{class:"text-h5"},"Add Prize",-1),vn={class:"row q-gutter-x-sm"},mn={class:"row"},gn={class:"row"},Sn=ke({__name:"RaffleAddPrize",props:["raffle","is_admin"],setup(e){const l=R(1),a=R(""),u=R(),o=e;async function n(){var k,x;const{pg_raffle:d}=He(),s=new K(u.value.account.data.parsed.info.mint.toString()),r=(await Se().connection.getParsedTokenAccountsByOwner(ge().publicKey.value,{mint:s})).value[0].pubkey,g=new K(o.raffle.publicKey.toString());let[i,S]=K.findProgramAddressSync([te("vault"),g.toBytes()],d.value.programId);const y=await Se().connection.getParsedAccountInfo(s);console.log((k=y.value)==null?void 0:k.data.parsed.info.decimals);try{const C=await d.value.methods.addPrize(new pt(l.value),new pt((x=y.value)==null?void 0:x.data.parsed.info.decimals),a.value).accounts({raffle:g,creator:ge().publicKey.value,from:r,prizeVault:i,prizeMint:s,systemProgram:Ol.programId,tokenProgram:Le,rent:El}).rpc();console.log(C),ve.create({message:"TX-Signature: "+C,timeout:5e3}),il(C)}catch(C){ve.create({color:"red",message:`${C}`,timeout:5e3})}}return(d,s)=>e.is_admin&&e.raffle.account.prizeTokenMint.toString()==="11111111111111111111111111111111"?(L(),ze("div",dn,[V(lt),fn,W("div",vn,[V(Kl,{class:"col",color:"primary",label:u.value?u.value.account.data.parsed.info.mint:"Select Ticket Token Mint"},{default:F(()=>[V(nl,null,{default:F(()=>[(L(!0),ze(ll,null,el(tl(Se)().token_accounts,r=>Il((L(),le(ol,{clickable:"",onClick:g=>u.value=r,key:r},{default:F(()=>[Fe(Me(r.account.data.parsed.info.mint),1)]),_:2},1032,["onClick"])),[[jl]])),128))]),_:1})]),_:1},8,["label"]),V(tt,{class:"col-2",outlined:"",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r),type:"number",label:"Count"},null,8,["modelValue"])]),W("div",mn,[V(tt,{class:"col",outlined:"",modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=r=>a.value=r),type:"text",label:"Image-URL"},null,8,["modelValue"])]),W("div",gn,[V(Ie,{class:"col",size:"md",color:"primary",onClick:s[2]||(s[2]=r=>n())},{default:F(()=>[Fe("Add Prize to Raffle")]),_:1})]),V(lt)])):we("",!0)}}),bn={key:0,class:"col q-gutter-y-md q-pb-md"},yn=W("p",{class:"text-h5"},"Buy Ticket(s)",-1),hn={class:"row q-gutter-x-sm"},_n=ke({__name:"RaffleBuyTicket",props:["raffle","is_admin","entrants"],setup(e){const l=R(),a=e;async function u(){const{pg_raffle:o,pg_whitelist:n}=He(),d=new K(a.raffle.account.ticketTokenMint.toString()),s=(await Se().connection.getParsedTokenAccountsByOwner(ge().publicKey.value,{mint:d})).value[0].pubkey,r=new K(a.raffle.publicKey.toString());let[g,i]=K.findProgramAddressSync([te("entrants"),r.toBytes()],o.value.programId),[S,y]=K.findProgramAddressSync([te("proceeds"),r.toBytes()],o.value.programId),[k,x]=K.findProgramAddressSync([Yt.toBuffer(),te(gl)],n.value.programId);const[C,b]=K.findProgramAddressSync([ge().publicKey.value.toBytes(),k.toBytes()],n.value.programId);console.log("---"),console.log(k.toString()),console.log(r.toString()),console.log(g.toString()),console.log(S.toString()),console.log(d.toString()),console.log(s.toString());try{const $=await o.value.methods.buyTickets(new pt(l.value),gl,Yt).accounts({raffle:r,entrants:g,proceeds:S,proceedsMint:d,from:s,transferAuth:ge().publicKey.value,tokenProgram:Le,whitelist:k,entry:C,whitelistProgram:n.value.programId}).rpc();console.log($),ve.create({message:"TX-Signature: "+$,timeout:5e3}),il($)}catch($){ve.create({color:"red",message:`${$}`,timeout:5e3})}}return(o,n)=>{var d,s,r;return!e.is_admin&&!((d=e.raffle)!=null&&d.account.randomness)&&((s=e.entrants)==null?void 0:s.total)!=((r=e.entrants)==null?void 0:r.max)?(L(),ze("div",bn,[V(lt),yn,W("div",hn,[V(tt,{type:"number",class:"col",label:"Amount",modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=g=>l.value=g)},null,8,["modelValue"]),V(Ie,{color:"primary",label:"Buy Tickets",onClick:n[1]||(n[1]=g=>u())})]),V(lt)])):we("",!0)}}}),wn={class:"col"},kn=ke({__name:"RaffleRevealWinner",props:["raffle","is_admin"],setup(e){R();const l=e;async function a(){const{pg_raffle:u,pg_whitelist:o}=He(),n=new K(l.raffle.publicKey.toString());let[d,s]=K.findProgramAddressSync([te("entrants"),n.toBytes()],u.value.programId);try{const r=await u.value.methods.revealWinners().accounts({raffle:n,entrants:d,recentBlockHashes:va}).rpc();console.log(r),ve.create({message:"TX-Signature: "+r,timeout:5e3}),il(r)}catch(r){ve.create({color:"red",message:`${r}`,timeout:5e3})}}return(u,o)=>{var n;return L(),ze("div",wn,[e.is_admin&&e.raffle.account.isRunning&&((n=e.raffle.account)==null?void 0:n.randomness)===null?(L(),le(Ie,{key:0,class:"row",color:"primary",label:"Reveal Winner",onClick:o[0]||(o[0]=d=>a())})):we("",!0)])}}}),pn=["top","middle","bottom"];var Mt=De({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pn.includes(e)}},setup(e,{slots:l}){const a=m(()=>e.align!==void 0?{verticalAlign:e.align}:null),u=m(()=>{const o=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(o!==void 0?` text-${o}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>v("div",{class:u.value,style:a.value,role:"status","aria-label":e.label},Ot(l.default,e.label!==void 0?[e.label]:[]))}});const Cn=ke({__name:"RaffleStateBadge",props:["raffle","entrants"],setup(e){return(l,a)=>{var u,o;return e.raffle.account.isClaimed?(L(),le(Mt,{key:0,color:"cyan",class:"text-caption text-md"},{default:F(()=>[Fe(" ready-to-close ")]),_:1})):e.raffle.account.isRunning&&e.raffle.account.randomness?(L(),le(Mt,{key:1,color:"yellow",class:"text-caption text-md text-black"},{default:F(()=>[Fe(" claimable ")]),_:1})):e.raffle.account.isRunning&&((u=e.entrants)==null?void 0:u.total)==((o=e.entrants)==null?void 0:o.max)?(L(),le(Mt,{key:2,color:"orange"},{default:F(()=>[Fe("...waiting for draw")]),_:1})):e.raffle.account.isRunning?(L(),le(Mt,{key:3,color:"green",class:"text-caption text-md"},{default:F(()=>{var n,d;return[Fe(" running "+Me((n=e.entrants)==null?void 0:n.total)+" / "+Me((d=e.entrants)==null?void 0:d.max),1)]}),_:1})):we("",!0)}}});var rl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.associatedAddress=e.ASSOCIATED_PROGRAM_ID=e.TOKEN_PROGRAM_ID=void 0;const l=ja;e.TOKEN_PROGRAM_ID=new l.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),e.ASSOCIATED_PROGRAM_ID=new l.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");function a({mint:u,owner:o}){return l.PublicKey.findProgramAddressSync([o.toBuffer(),e.TOKEN_PROGRAM_ID.toBuffer(),u.toBuffer()],e.ASSOCIATED_PROGRAM_ID)[0]}e.associatedAddress=a})(rl);const xn=ke({__name:"RaffleClaimPrize",props:["raffle","is_admin"],setup(e){const l=e;async function a(){const{pg_raffle:u}=He(),o=new K(l.raffle.account.prizeTokenMint.toString()),n=new K(l.raffle.account.winner.toString()),d=await Ul(o,n,!0,Le,rl.ASSOCIATED_PROGRAM_ID);if(await Se().connection.getAccountInfo(d)===null){let y=new $l;y.add(Wl(ge().publicKey.value,d,n,o)),await ge().sendTransaction(y,Se().connection)}const s=new K(l.raffle.publicKey.toString());let[r,g]=K.findProgramAddressSync([te("entrants"),s.toBytes()],u.value.programId),[i,S]=K.findProgramAddressSync([te("vault"),s.toBytes()],u.value.programId);console.log(l.raffle.account.name);try{const y=await u.value.methods.claimPrize(l.raffle.account.name).accounts({creator:Yt,raffle:s,entrants:r,prizeVault:i,prizeMint:o,to:d,tokenProgram:Le}).rpc();console.log(y),ve.create({message:"TX-Signature: "+y,timeout:5e3})}catch(y){ve.create({color:"red",message:`${y}`,timeout:5e3})}}return(u,o)=>e.raffle.account.winner!=tl(ma)&&e.is_admin?(L(),le(Ie,{key:0,class:"col",color:"primary",label:"Claim Prize",onClick:o[0]||(o[0]=n=>a())})):we("",!0)}}),qn=ke({__name:"RaffleClose",props:["raffle"],setup(e){const l=e;async function a(){const{pg_raffle:u}=He();let[o,n]=K.findProgramAddressSync([te("raffle"),te(l.raffle.account.name)],u.value.programId),[d,s]=K.findProgramAddressSync([te("entrants"),o.toBytes()],u.value.programId),[r,g]=K.findProgramAddressSync([te("proceeds"),o.toBytes()],u.value.programId),[i,S]=K.findProgramAddressSync([te("vault"),o.toBytes()],u.value.programId);try{const y=await u.value.methods.closeRaffle(l.raffle.account.name).accounts({creator:ge().publicKey.value,entrants:d,raffle:o,proceeds:r,prizeVault:i,tokenProgram:Le}).rpc();console.log(y),ve.create({message:"TX-Signature: "+y,timeout:5e3})}catch(y){ve.create({color:"red",message:`${y}`,timeout:5e3})}}return(u,o)=>(L(),le(Ie,{class:"col",size:"md",color:"primary",onClick:o[0]||(o[0]=n=>a())},{default:F(()=>[Fe("Close Raffle")]),_:1}))}}),Pn=ke({__name:"RaffleCollectProceeds",props:["raffle","is_admin"],setup(e){R(),R();const l=e;async function a(){const{pg_raffle:u}=He(),o=new K(l.raffle.account.ticketTokenMint.toString()),n=await Ul(o,ge().publicKey.value,!0,Le,rl.ASSOCIATED_PROGRAM_ID);if(await Se().connection.getAccountInfo(n)===null){let i=new $l;i.add(Wl(ge().publicKey.value,n,ge().publicKey.value,o)),await ge().sendTransaction(i,Se().connection)}let[d,s]=K.findProgramAddressSync([te("raffle"),te(l.raffle.account.name)],u.value.programId),[r,g]=K.findProgramAddressSync([te("proceeds"),d.toBytes()],u.value.programId);try{const i=await u.value.methods.collectProceeds(l.raffle.account.name).accounts({creator:ge().publicKey.value,raffle:d,proceeds:r,proceedsMint:o,to:n,tokenProgram:Le}).rpc();console.log(i),ve.create({message:"TX-Signature: "+i,timeout:5e3})}catch(i){ve.create({color:"red",message:`${i}`,timeout:5e3})}}return(u,o)=>l.is_admin&&e.raffle.account.isClaimed?(L(),le(Ie,{key:0,class:"col",size:"md",color:"primary",onClick:o[0]||(o[0]=n=>a())},{default:F(()=>[Fe("Collect Proceeds")]),_:1})):we("",!0)}});var An=De({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const u=Ne(),{proxy:{$q:o}}=u,n=d=>{a("click",d)};return()=>{if(e.props===void 0)return v("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:n},It(l.default));let d,s;const r=u.vnode.key;if(r){if(d=e.props.colsMap[r],d===void 0)return}else d=e.props.col;if(d.sortable===!0){const i=d.align==="right"?"unshift":"push";s=ga(l.default,[]),s[i](v(mt,{class:d.__iconClass,name:o.iconSet.table.arrowUp}))}else s=It(l.default);const g={class:d.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:d.headerStyle,onClick:i=>{d.sortable===!0&&e.props.sort(d),n(i)}};return v("th",g,s)}}});const Tn=["horizontal","vertical","cell","none"];var Vn=De({name:"QMarkupTable",props:{...$t,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Tn.includes(e)}},setup(e,{slots:l}){const a=Ne(),u=Ft(e,a.proxy.$q),o=m(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(u.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>v("div",{class:o.value},[v("table",{class:"q-table"},It(l.default))])}});function Yl(e,l){return v("div",e,[v("table",{class:"q-table"},l)])}const Be=1e3,Rn=["start","center","end","start-force","center-force","end-force"],Jl=Array.prototype.filter,Mn=window.getComputedStyle(document.body).overflowAnchor===void 0?Sa:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Jl.call(a,o=>o.dataset&&o.dataset.qVsAnchor!==void 0).forEach(o=>{delete o.dataset.qVsAnchor});const u=a[l];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function gt(e,l){return e+l}function Gt(e,l,a,u,o,n,d,s){const r=e===window?document.scrollingElement||document.documentElement:e,g=o===!0?"offsetWidth":"offsetHeight",i={scrollStart:0,scrollViewSize:-d-s,scrollMaxSize:0,offsetStart:-d,offsetEnd:-s};if(o===!0?(e===window?(i.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,i.scrollViewSize+=document.documentElement.clientWidth):(i.scrollStart=r.scrollLeft,i.scrollViewSize+=r.clientWidth),i.scrollMaxSize=r.scrollWidth,n===!0&&(i.scrollStart=(Xt===!0?i.scrollMaxSize-i.scrollViewSize:0)-i.scrollStart)):(e===window?(i.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,i.scrollViewSize+=document.documentElement.clientHeight):(i.scrollStart=r.scrollTop,i.scrollViewSize+=r.clientHeight),i.scrollMaxSize=r.scrollHeight),a!==null)for(let S=a.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(i.offsetStart+=S[g]);if(u!==null)for(let S=u.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(i.offsetEnd+=S[g]);if(l!==e){const S=r.getBoundingClientRect(),y=l.getBoundingClientRect();o===!0?(i.offsetStart+=y.left-S.left,i.offsetEnd-=y.width):(i.offsetStart+=y.top-S.top,i.offsetEnd-=y.height),e!==window&&(i.offsetStart+=i.scrollStart),i.offsetEnd+=i.scrollMaxSize-i.offsetStart}return i}function xl(e,l,a,u){l==="end"&&(l=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(u===!0&&(l=(Xt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):a===!0?(u===!0&&(l=(Xt===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function _t(e,l,a,u){if(a>=u)return 0;const o=l.length,n=Math.floor(a/Be),d=Math.floor((u-1)/Be)+1;let s=e.slice(n,d).reduce(gt,0);return a%Be!==0&&(s-=l.slice(n*Be,a).reduce(gt,0)),u%Be!==0&&u!==o&&(s-=l.slice(u,d*Be).reduce(gt,0)),s}const Zl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},ea=Object.keys(Zl),ta={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Zl};function la({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:a,virtualScrollItemSizeComputed:u}){const o=Ne(),{props:n,emit:d,proxy:s}=o,{$q:r}=s;let g,i,S,y=[],k;const x=R(0),C=R(0),b=R({}),$=R(null),G=R(null),D=R(null),z=R({from:0,to:0}),J=m(()=>n.tableColspan!==void 0?n.tableColspan:100);u===void 0&&(u=m(()=>n.virtualScrollItemSize));const j=m(()=>u.value+";"+n.virtualScrollHorizontal),se=m(()=>j.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);ie(se,()=>{ee()}),ie(j,be);function be(){pe(i,!0)}function Oe(f){pe(f===void 0?i:f)}function ae(f,_){const I=l();if(I==null||I.nodeType===8)return;const N=Gt(I,a(),$.value,G.value,n.virtualScrollHorizontal,r.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);S!==N.scrollViewSize&&ee(N.scrollViewSize),ne(I,N,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,Rn.indexOf(_)>-1?_:i>-1&&f>i?"end":"start")}function re(){const f=l();if(f==null||f.nodeType===8)return;const _=Gt(f,a(),$.value,G.value,n.virtualScrollHorizontal,r.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),I=e.value-1,N=_.scrollMaxSize-_.offsetStart-_.offsetEnd-C.value;if(g===_.scrollStart)return;if(_.scrollMaxSize<=0){ne(f,_,0,0);return}S!==_.scrollViewSize&&ee(_.scrollViewSize),Ee(z.value.from);const q=Math.floor(_.scrollMaxSize-Math.max(_.scrollViewSize,_.offsetEnd)-Math.min(k[I],_.scrollViewSize/2));if(q>0&&Math.ceil(_.scrollStart)>=q){ne(f,_,I,_.scrollMaxSize-_.offsetEnd-y.reduce(gt,0));return}let P=0,M=_.scrollStart-_.offsetStart,Q=M;if(M<=N&&M+_.scrollViewSize>=x.value)M-=x.value,P=z.value.from,Q=M;else for(let B=0;M>=y[B]&&P<I;B++)M-=y[B],P+=Be;for(;M>0&&P<I;)M-=k[P],M>-_.scrollViewSize?(P++,Q=M):Q=k[P]+M;ne(f,_,P,Q)}function ne(f,_,I,N,q){const P=typeof q=="string"&&q.indexOf("-force")>-1,M=P===!0?q.replace("-force",""):q,Q=M!==void 0?M:"start";let B=Math.max(0,I-b.value[Q]),oe=B+b.value.total;oe>e.value&&(oe=e.value,B=Math.max(0,oe-b.value.total)),g=_.scrollStart;const ye=B!==z.value.from||oe!==z.value.to;if(ye===!1&&M===void 0){xe(I);return}const{activeElement:at}=document,ce=D.value;ye===!0&&ce!==null&&ce!==at&&ce.contains(at)===!0&&(ce.addEventListener("focusout",Ke),setTimeout(()=>{ce!==null&&ce.removeEventListener("focusout",Ke)})),Mn(ce,I-B);const je=M!==void 0?k.slice(B,I).reduce(gt,0):0;if(ye===!0){const Pe=oe>=z.value.from&&B<=z.value.to?z.value.to:oe;z.value={from:B,to:Pe},x.value=_t(y,k,0,B),C.value=_t(y,k,oe,e.value),requestAnimationFrame(()=>{z.value.to!==oe&&g===_.scrollStart&&(z.value={from:z.value.from,to:oe},C.value=_t(y,k,oe,e.value))})}requestAnimationFrame(()=>{if(g!==_.scrollStart)return;ye===!0&&Ee(B);const Pe=k.slice(B,I).reduce(gt,0),Ae=Pe+_.offsetStart+x.value,Qe=Ae+k[I];let Ge=Ae+N;if(M!==void 0){const St=Pe-je,Xe=_.scrollStart+St;Ge=P!==!0&&Xe<Ae&&Qe<Xe+_.scrollViewSize?Xe:M==="end"?Qe-_.scrollViewSize:Ae-(M==="start"?0:Math.round((_.scrollViewSize-k[I])/2))}g=Ge,xl(f,Ge,n.virtualScrollHorizontal,r.lang.rtl),xe(I)})}function Ee(f){const _=D.value;if(_){const I=Jl.call(_.children,B=>B.classList&&B.classList.contains("q-virtual-scroll--skip")===!1),N=I.length,q=n.virtualScrollHorizontal===!0?B=>B.getBoundingClientRect().width:B=>B.offsetHeight;let P=f,M,Q;for(let B=0;B<N;){for(M=q(I[B]),B++;B<N&&I[B].classList.contains("q-virtual-scroll--with-prev")===!0;)M+=q(I[B]),B++;Q=M-k[P],Q!==0&&(k[P]+=Q,y[Math.floor(P/Be)]+=Q),P++}}}function Ke(){D.value!==null&&D.value!==void 0&&D.value.focus()}function pe(f,_){const I=1*u.value;(_===!0||Array.isArray(k)===!1)&&(k=[]);const N=k.length;k.length=e.value;for(let P=e.value-1;P>=N;P--)k[P]=I;const q=Math.floor((e.value-1)/Be);y=[];for(let P=0;P<=q;P++){let M=0;const Q=Math.min((P+1)*Be,e.value);for(let B=P*Be;B<Q;B++)M+=k[B];y.push(M)}i=-1,g=void 0,x.value=_t(y,k,0,z.value.from),C.value=_t(y,k,z.value.to,e.value),f>=0?(Ee(z.value.from),$e(()=>{ae(f)})):me()}function ee(f){if(f===void 0&&typeof window<"u"){const M=l();M!=null&&M.nodeType!==8&&(f=Gt(M,a(),$.value,G.value,n.virtualScrollHorizontal,r.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}S=f;const _=parseFloat(n.virtualScrollSliceRatioBefore)||0,I=parseFloat(n.virtualScrollSliceRatioAfter)||0,N=1+_+I,q=f===void 0||f<=0?1:Math.ceil(f/u.value),P=Math.max(1,q,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/N));b.value={total:Math.ceil(P*N),start:Math.ceil(P*_),center:Math.ceil(P*(.5+_)),end:Math.ceil(P*(1+_)),view:q}}function Ce(f,_){const I=n.virtualScrollHorizontal===!0?"width":"height",N={["--q-virtual-scroll-item-"+I]:u.value+"px"};return[f==="tbody"?v(f,{class:"q-virtual-scroll__padding",key:"before",ref:$},[v("tr",[v("td",{style:{[I]:`${x.value}px`,...N},colspan:J.value})])]):v(f,{class:"q-virtual-scroll__padding",key:"before",ref:$,style:{[I]:`${x.value}px`,...N}}),v(f,{class:"q-virtual-scroll__content",key:"content",ref:D,tabindex:-1},_.flat()),f==="tbody"?v(f,{class:"q-virtual-scroll__padding",key:"after",ref:G},[v("tr",[v("td",{style:{[I]:`${C.value}px`,...N},colspan:J.value})])]):v(f,{class:"q-virtual-scroll__padding",key:"after",ref:G,style:{[I]:`${C.value}px`,...N}})]}function xe(f){i!==f&&(n.onVirtualScroll!==void 0&&d("virtualScroll",{index:f,from:z.value.from,to:z.value.to-1,direction:f<i?"decrease":"increase",ref:s}),i=f)}ee();const me=ba(re,r.platform.is.ios===!0?120:35);al(()=>{ee()});let qe=!1;return Fl(()=>{qe=!0}),Dl(()=>{if(qe!==!0)return;const f=l();g!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?xl(f,g,n.virtualScrollHorizontal,r.lang.rtl):ae(i)}),Ct(()=>{me.cancel()}),Object.assign(s,{scrollTo:ae,reset:be,refresh:Oe}),{virtualScrollSliceRange:z,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:ee,onVirtualScrollEvt:me,localResetVirtualScroll:pe,padVirtualScroll:Ce,scrollTo:ae,reset:be,refresh:Oe}}const Bn={list:nl,table:Vn},zn=["list","table","__qtable"];var In=De({name:"QVirtualScroll",props:{...ta,type:{type:String,default:"list",validator:e=>zn.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:a}){let u;const o=R(null),n=m(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:d,localResetVirtualScroll:s,padVirtualScroll:r,onVirtualScrollEvt:g}=la({virtualScrollLength:n,getVirtualScrollTarget:x,getVirtualScrollEl:k}),i=m(()=>{if(n.value===0)return[];const G=(D,z)=>({index:d.value.from+z,item:D});return e.itemsFn===void 0?e.items.slice(d.value.from,d.value.to).map(G):e.itemsFn(d.value.from,d.value.to-d.value.from).map(G)}),S=m(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),y=m(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(n,()=>{s()}),ie(()=>e.scrollTarget,()=>{b(),C()});function k(){return o.value.$el||o.value}function x(){return u}function C(){u=Ta(k(),e.scrollTarget),u.addEventListener("scroll",g,Sl.passive)}function b(){u!==void 0&&(u.removeEventListener("scroll",g,Sl.passive),u=void 0)}function $(){let G=r(e.type==="list"?"div":"tbody",i.value.map(l.default));return l.before!==void 0&&(G=l.before().concat(G)),Ot(l.after,G)}return al(()=>{s()}),Et(()=>{C()}),Dl(()=>{C()}),Fl(()=>{b()}),Ct(()=>{b()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Yl({ref:o,class:"q-table__middle "+S.value},$()):v(Bn[e.type],{...a,ref:o,class:[a.class,S.value],...y.value},$)}}}),On=De({name:"QField",inheritAttrs:!1,props:Zt,emits:Ml,setup(){return Bl(zl())}});const En={xs:8,sm:10,md:14,lg:20,xl:24};var $n=De({name:"QChip",props:{...$t,...Ll,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:a}){const{proxy:{$q:u}}=Ne(),o=Ft(e,u),n=Nl(e,En),d=m(()=>e.selected===!0||e.icon!==void 0),s=m(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),r=m(()=>e.iconRemove||u.iconSet.chip.remove),g=m(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),i=m(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(g.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(o.value===!0?" q-chip--dark q-dark":"")}),S=m(()=>{const b=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},$={...b,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:b,remove:$}});function y(b){b.keyCode===13&&k(b)}function k(b){e.disable||(a("update:selected",!e.selected),a("click",b))}function x(b){(b.keyCode===void 0||b.keyCode===13)&&(et(b),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function C(){const b=[];g.value===!0&&b.push(v("div",{class:"q-focus-helper"})),d.value===!0&&b.push(v(mt,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const $=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ha(l.default,$))),e.iconRight&&b.push(v(mt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(v(mt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:r.value,...S.value.remove,onClick:x,onKeyup:x})),b}return()=>{if(e.modelValue===!1)return;const b={class:i.value,style:n.value};return g.value===!0&&Object.assign(b,S.value.chip,{onClick:k,onKeyup:y}),ya("div",b,C(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[_a,e.ripple]])}}});let Bt=0;const Fn={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},ql={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Dn=De({name:"QDialog",inheritAttrs:!1,props:{...Va,...Ra,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Ma,"shake","click","escapeKey"],setup(e,{slots:l,emit:a,attrs:u}){const o=Ne(),n=R(null),d=R(!1),s=R(!1);let r=null,g=null,i,S;const y=m(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:k}=Ua(),{registerTimeout:x}=Ba(),{registerTick:C,removeTick:b}=za(),{transitionProps:$,transitionStyle:G}=Ia(e,()=>ql[e.position][0],()=>ql[e.position][1]),{showPortal:D,hidePortal:z,portalIsAccessible:J,renderPortal:j}=Oa(o,n,N,"dialog"),{hide:se}=Ea({showing:d,hideOnRouteChange:y,handleShow:Ke,handleHide:pe,processOnMount:!0}),{addToHistory:be,removeFromHistory:Oe}=Qa(d,se,y),ae=m(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Fn[e.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),re=m(()=>d.value===!0&&e.seamless!==!0),ne=m(()=>e.autoClose===!0?{onClick:f}:{}),Ee=m(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${re.value===!0?"modal":"seamless"}`,u.class]);ie(()=>e.maximized,q=>{d.value===!0&&qe(q)}),ie(re,q=>{k(q),q===!0?(Fa(I),Da(xe)):(wl(I),kl(xe))});function Ke(q){be(),g=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,qe(e.maximized),D(),s.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),C(ee)):b(),x(()=>{if(o.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:P,bottom:M}=document.activeElement.getBoundingClientRect(),{innerHeight:Q}=window,B=window.visualViewport!==void 0?window.visualViewport.height:Q;P>0&&M>B/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-B,M>=Q?1/0:Math.ceil(document.scrollingElement.scrollTop+M-B/2))),document.activeElement.scrollIntoView()}S=!0,n.value.click(),S=!1}D(!0),s.value=!1,a("show",q)},e.transitionDuration)}function pe(q){b(),Oe(),me(!0),s.value=!0,z(),g!==null&&(((q&&q.type.indexOf("key")===0?g.closest('[tabindex]:not([tabindex^="-"])'):void 0)||g).focus(),g=null),x(()=>{z(!0),s.value=!1,a("hide",q)},e.transitionDuration)}function ee(q){$a(()=>{let P=n.value;P===null||P.contains(document.activeElement)===!0||(P=(q!==""?P.querySelector(q):null)||P.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||P.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||P.querySelector("[autofocus], [data-autofocus]")||P,P.focus({preventScroll:!0}))})}function Ce(q){q&&typeof q.focus=="function"?q.focus({preventScroll:!0}):ee(),a("shake");const P=n.value;P!==null&&(P.classList.remove("q-animate--scale"),P.classList.add("q-animate--scale"),r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,n.value!==null&&(P.classList.remove("q-animate--scale"),ee())},170))}function xe(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Ce():(a("escapeKey"),se()))}function me(q){r!==null&&(clearTimeout(r),r=null),(q===!0||d.value===!0)&&(qe(!1),e.seamless!==!0&&(k(!1),wl(I),kl(xe))),q!==!0&&(g=null)}function qe(q){q===!0?i!==!0&&(Bt<1&&document.body.classList.add("q-body--dialog"),Bt++,i=!0):i===!0&&(Bt<2&&document.body.classList.remove("q-body--dialog"),Bt--,i=!1)}function f(q){S!==!0&&(se(q),a("click",q))}function _(q){e.persistent!==!0&&e.noBackdropDismiss!==!0?se(q):e.noShake!==!0&&Ce()}function I(q){e.allowFocusOutside!==!0&&J.value===!0&&wa(n.value,q.target)!==!0&&ee('[tabindex]:not([tabindex="-1"])')}Object.assign(o.proxy,{focus:ee,shake:Ce,__updateRefocusTarget(q){g=q||null}}),Ct(me);function N(){return v("div",{role:"dialog","aria-modal":re.value===!0?"true":"false",...u,class:Ee.value},[v(bl,{name:"q-transition--fade",appear:!0},()=>re.value===!0?v("div",{class:"q-dialog__backdrop fixed-full",style:G.value,"aria-hidden":"true",tabindex:-1,onClick:_}):null),v(bl,$.value,()=>d.value===!0?v("div",{ref:n,class:ae.value,style:G.value,tabindex:-1,...ne.value},It(l.default)):null)])}return j}});const Pl=e=>["add","add-unique","toggle"].includes(e),Ln=".*+?^${}()|[]\\",Nn=Object.keys(Zt);var Hn=De({name:"QSelect",inheritAttrs:!1,props:{...ta,...ra,...Zt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Pl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Ml,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:a}){const{proxy:u}=Ne(),{$q:o}=u,n=R(!1),d=R(!1),s=R(-1),r=R(""),g=R(!1),i=R(!1);let S=null,y=null,k,x,C,b=null,$,G,D,z;const J=R(null),j=R(null),se=R(null),be=R(null),Oe=R(null),ae=ua(e),re=sa(p),ne=m(()=>Array.isArray(e.options)?e.options.length:0),Ee=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ke,virtualScrollSliceSizeComputed:pe,localResetVirtualScroll:ee,padVirtualScroll:Ce,onVirtualScrollEvt:xe,scrollTo:me,setVirtualScrollSize:qe}=la({virtualScrollLength:ne,getVirtualScrollTarget:Nt,getVirtualScrollEl:Vt,virtualScrollItemSizeComputed:Ee}),f=zl(),_=m(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,w=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const h=e.mapOptions===!0&&k!==void 0?k:[],O=w.map(U=>Lt(U,h));return e.modelValue===null&&t===!0?O.filter(U=>U!==null):O}return w}),I=m(()=>{const t={};return Nn.forEach(w=>{const h=e[w];h!==void 0&&(t[w]=h)}),t}),N=m(()=>e.optionsDark===null?f.isDark.value:e.optionsDark),q=m(()=>fl(_.value)),P=m(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||_.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Q=m(()=>ne.value===0),B=m(()=>_.value.map(t=>de.value(t)).join(", ")),oe=m(()=>e.displayValue!==void 0?e.displayValue:B.value),ye=m(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),at=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||_.value.some(ye.value))),ce=m(()=>f.focused.value===!0?e.tabindex:-1),je=m(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":n.value===!0?"true":"false","aria-controls":`${f.targetUid.value}_lb`};return s.value>=0&&(t["aria-activedescendant"]=`${f.targetUid.value}_${s.value}`),t}),Pe=m(()=>({id:`${f.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ae=m(()=>_.value.map((t,w)=>({index:w,opt:t,html:ye.value(t),selected:!0,removeAtIndex:Dt,toggleOption:Te,tabindex:ce.value}))),Qe=m(()=>{if(ne.value===0)return[];const{from:t,to:w}=Ke.value;return e.options.slice(t,w).map((h,O)=>{const U=Ue.value(h)===!0,H=t+O,Z={clickable:!0,active:!1,activeClass:Xe.value,manualFocus:!0,focused:!1,disable:U,tabindex:-1,dense:e.optionsDense,dark:N.value,role:"option",id:`${f.targetUid.value}_${H}`,onClick:()=>{Te(h)}};return U!==!0&&(it(h)===!0&&(Z.active=!0),s.value===H&&(Z.focused=!0),Z["aria-selected"]=Z.active===!0?"true":"false",o.platform.is.desktop===!0&&(Z.onMousemove=()=>{n.value===!0&&he(H)})),{index:H,opt:h,html:ye.value(h),label:de.value(h),selected:Z.active,focused:Z.focused,toggleOption:Te,setOptionIndex:he,itemProps:Z}})}),Ge=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:o.iconSet.arrow.dropdown),St=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Xe=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),_e=m(()=>ot(e.optionValue,"value")),de=m(()=>ot(e.optionLabel,"label")),Ue=m(()=>ot(e.optionDisable,"disable")),Ye=m(()=>_.value.map(t=>_e.value(t))),xt=m(()=>{const t={onInput:p,onChange:re,onKeydown:Tt,onKeyup:bt,onKeypress:Je,onFocus:At,onClick(w){x===!0&&vt(w)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=re,t});ie(_,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&f.innerLoading.value!==!0&&(d.value!==!0&&n.value!==!0||q.value!==!0)&&(C!==!0&&ft(),(d.value===!0||n.value===!0)&&E(""))},{immediate:!0}),ie(()=>e.fillInput,ft),ie(n,jt),ie(ne,ia);function qt(t){return e.emitValue===!0?_e.value(t):t}function nt(t){if(t>-1&&t<_.value.length)if(e.multiple===!0){const w=e.modelValue.slice();a("remove",{index:t,value:w.splice(t,1)[0]}),a("update:modelValue",w)}else a("update:modelValue",null)}function Dt(t){nt(t),f.focus()}function Pt(t,w){const h=qt(t);if(e.multiple!==!0){e.fillInput===!0&&T(de.value(t),!0,!0),a("update:modelValue",h);return}if(_.value.length===0){a("add",{index:0,value:h}),a("update:modelValue",e.multiple===!0?[h]:h);return}if(w===!0&&it(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();a("add",{index:O.length,value:h}),O.push(h),a("update:modelValue",O)}function Te(t,w){if(f.editable.value!==!0||t===void 0||Ue.value(t)===!0)return;const h=_e.value(t);if(e.multiple!==!0){w!==!0&&(T(e.fillInput===!0?de.value(t):"",!0,!0),Ze()),j.value!==null&&j.value.focus(),(_.value.length===0||yt(_e.value(_.value[0]),h)!==!0)&&a("update:modelValue",e.emitValue===!0?h:t);return}if((x!==!0||g.value===!0)&&f.focus(),At(),_.value.length===0){const H=e.emitValue===!0?h:t;a("add",{index:0,value:H}),a("update:modelValue",e.multiple===!0?[H]:H);return}const O=e.modelValue.slice(),U=Ye.value.findIndex(H=>yt(H,h));if(U>-1)a("remove",{index:U,value:O.splice(U,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const H=e.emitValue===!0?h:t;a("add",{index:O.length,value:H}),O.push(H)}a("update:modelValue",O)}function he(t){if(o.platform.is.desktop!==!0)return;const w=t>-1&&t<ne.value?t:-1;s.value!==w&&(s.value=w)}function Ve(t=1,w){if(n.value===!0){let h=s.value;do h=Cl(h+t,-1,ne.value-1);while(h!==-1&&h!==s.value&&Ue.value(e.options[h])===!0);s.value!==h&&(he(h),me(h),w!==!0&&e.useInput===!0&&e.fillInput===!0&&A(h>=0?de.value(e.options[h]):$,!0))}}function Lt(t,w){const h=O=>yt(_e.value(O),t);return e.options.find(h)||w.find(h)||t}function ot(t,w){const h=t!==void 0?t:w;return typeof h=="function"?h:O=>O!==null&&typeof O=="object"&&h in O?O[h]:O}function it(t){const w=_e.value(t);return Ye.value.find(h=>yt(h,w))!==void 0}function At(t){e.useInput===!0&&j.value!==null&&(t===void 0||j.value===t.target&&t.target.value===B.value)&&j.value.select()}function rt(t){Ca(t,27)===!0&&n.value===!0&&(vt(t),Ze(),ft()),a("keyup",t)}function bt(t){const{value:w}=t.target;if(t.keyCode!==void 0){rt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),y!==null&&(clearTimeout(y),y=null),ft(),typeof w=="string"&&w.length!==0){const h=w.toLocaleLowerCase(),O=H=>{const Z=e.options.find(fe=>H.value(fe).toLocaleLowerCase()===h);return Z===void 0?!1:(_.value.indexOf(Z)===-1?Te(Z):Ze(),!0)},U=H=>{O(_e)!==!0&&(O(de)===!0||H===!0||E(w,!0,()=>U(!0)))};U()}else f.clearValue(t)}function Je(t){a("keypress",t)}function Tt(t){if(a("keydown",t),xa(t)===!0)return;const w=r.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),h=t.shiftKey!==!0&&e.multiple!==!0&&(s.value>-1||w===!0);if(t.keyCode===27){Ut(t);return}if(t.keyCode===9&&h===!1){ct();return}if(t.target===void 0||t.target.id!==f.targetUid.value||f.editable.value!==!0)return;if(t.keyCode===40&&f.innerLoading.value!==!0&&n.value===!1){et(t),dt();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&r.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof r.value!="string"||r.value.length===0)&&(et(t),s.value=-1,Ve(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&pe.value!==void 0&&(et(t),s.value=Math.max(-1,Math.min(ne.value,s.value+(t.keyCode===33?-1:1)*pe.value.view)),Ve(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(et(t),Ve(t.keyCode===38?-1:1,e.multiple));const O=ne.value;if((D===void 0||z<Date.now())&&(D=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||D.length!==0)){n.value!==!0&&dt(t);const U=t.key.toLocaleLowerCase(),H=D.length===1&&D[0]===U;z=Date.now()+1500,H===!1&&(et(t),D+=U);const Z=new RegExp("^"+D.split("").map(Qt=>Ln.indexOf(Qt)>-1?"\\"+Qt:Qt).join(".*"),"i");let fe=s.value;if(H===!0||fe<0||Z.test(de.value(e.options[fe]))!==!0)do fe=Cl(fe+1,-1,O-1);while(fe!==s.value&&(Ue.value(e.options[fe])===!0||Z.test(de.value(e.options[fe]))!==!0));s.value!==fe&&$e(()=>{he(fe),me(fe),fe>=0&&e.useInput===!0&&e.fillInput===!0&&A(de.value(e.options[fe]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||D!=="")&&(t.keyCode!==9||h===!1))){if(t.keyCode!==9&&et(t),s.value>-1&&s.value<O){Te(e.options[s.value]);return}if(w===!0){const U=(H,Z)=>{if(Z){if(Pl(Z)!==!0)return}else Z=e.newValueMode;if(T("",e.multiple!==!0,!0),H==null)return;(Z==="toggle"?Te:Pt)(H,Z==="add-unique"),e.multiple!==!0&&(j.value!==null&&j.value.focus(),Ze())};if(e.onNewValue!==void 0?a("newValue",r.value,U):U(r.value),e.multiple!==!0)return}n.value===!0?ct():f.innerLoading.value!==!0&&dt()}}function Vt(){return x===!0?Oe.value:se.value!==null&&se.value.contentEl!==null?se.value.contentEl:void 0}function Nt(){return Vt()}function Ht(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?Ae.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?Ae.value.map((t,w)=>v($n,{key:"option-"+w,removable:f.editable.value===!0&&Ue.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ce.value,onRemove(){t.removeAtIndex(w)}},()=>v("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:de.value(t.opt)}))):[v("span",{[at.value===!0?"innerHTML":"textContent"]:oe.value})]}function Rt(){if(Q.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:r.value}):void 0;const t=l.option!==void 0?l.option:h=>v(ol,{key:h.index,...h.itemProps},()=>v(Na,()=>v(Ha,()=>v("span",{[h.html===!0?"innerHTML":"textContent"]:h.label}))));let w=Ce("div",Qe.value.map(t));return l["before-options"]!==void 0&&(w=l["before-options"]().concat(w)),Ot(l["after-options"],w)}function c(t,w){const h=w===!0?{...je.value,...f.splitAttrs.attributes.value}:void 0,O={ref:w===!0?j:void 0,key:"i_t",class:P.value,style:e.inputStyle,value:r.value!==void 0?r.value:"",type:"search",...h,id:w===!0?f.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...xt.value};return t!==!0&&x===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),v("input",O)}function p(t){S!==null&&(clearTimeout(S),S=null),y!==null&&(clearTimeout(y),y=null),!(t&&t.target&&t.target.qComposing===!0)&&(A(t.target.value||""),C=!0,$=r.value,f.focused.value!==!0&&(x!==!0||g.value===!0)&&f.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,E(r.value)},e.inputDebounce)))}function A(t,w){r.value!==t&&(r.value=t,w===!0||e.inputDebounce===0||e.inputDebounce==="0"?a("inputValue",t):y=setTimeout(()=>{y=null,a("inputValue",t)},e.inputDebounce))}function T(t,w,h){C=h!==!0,e.useInput===!0&&(A(t,!0),(w===!0||h!==!0)&&($=t),w!==!0&&E(t))}function E(t,w,h){if(e.onFilter===void 0||w!==!0&&f.focused.value!==!0)return;f.innerLoading.value===!0?a("filterAbort"):(f.innerLoading.value=!0,i.value=!0),t!==""&&e.multiple!==!0&&_.value.length!==0&&C!==!0&&t===de.value(_.value[0])&&(t="");const O=setTimeout(()=>{n.value===!0&&(n.value=!1)},10);b!==null&&clearTimeout(b),b=O,a("filter",t,(U,H)=>{(w===!0||f.focused.value===!0)&&b===O&&(clearTimeout(b),typeof U=="function"&&U(),i.value=!1,$e(()=>{f.innerLoading.value=!1,f.editable.value===!0&&(w===!0?n.value===!0&&Ze():n.value===!0?jt(!0):n.value=!0),typeof H=="function"&&$e(()=>{H(u)}),typeof h=="function"&&$e(()=>{h(u)})}))},()=>{f.focused.value===!0&&b===O&&(clearTimeout(b),f.innerLoading.value=!1,i.value=!1),n.value===!0&&(n.value=!1)})}function Y(){return v(La,{ref:se,class:M.value,style:e.popupContentStyle,modelValue:n.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Q.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:N.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:St.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Pe.value,onScrollPassive:xe,onBeforeShow:sl,onBeforeHide:X,onShow:Re},Rt)}function X(t){cl(t),ct()}function Re(){qe()}function ue(t){vt(t),j.value!==null&&j.value.focus(),g.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ut(t){vt(t),$e(()=>{g.value=!1})}function st(){const t=[v(On,{class:`col-auto ${f.fieldClass.value}`,...I.value,for:f.targetUid.value,dark:N.value,square:!0,loading:i.value,itemAligned:!1,filled:!0,stackLabel:r.value.length!==0,...f.splitAttrs.listeners.value,onFocus:ue,onBlur:ut},{...l,rawControl:()=>f.getControl(!0),before:void 0,after:void 0})];return n.value===!0&&t.push(v("div",{ref:Oe,class:M.value+" scroll",style:e.popupContentStyle,...Pe.value,onClick:Ut,onScrollPassive:xe},Rt())),v(Dn,{ref:be,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:G,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:sl,onBeforeHide:Kt,onHide:na,onShow:oa},()=>v("div",{class:"q-select__dialog"+(N.value===!0?" q-select__dialog--dark q-dark":"")+(g.value===!0?" q-select__dialog--focused":"")},t))}function Kt(t){cl(t),be.value!==null&&be.value.__updateRefocusTarget(f.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),f.focused.value=!1}function na(t){Ze(),f.focused.value===!1&&a("blur",t),ft()}function oa(){const t=document.activeElement;(t===null||t.id!==f.targetUid.value)&&j.value!==null&&j.value!==t&&j.value.focus(),qe()}function ct(){d.value!==!0&&(s.value=-1,n.value===!0&&(n.value=!1),f.focused.value===!1&&(b!==null&&(clearTimeout(b),b=null),f.innerLoading.value===!0&&(a("filterAbort"),f.innerLoading.value=!1,i.value=!1)))}function dt(t){f.editable.value===!0&&(x===!0?(f.onControlFocusin(t),d.value=!0,$e(()=>{f.focus()})):f.focus(),e.onFilter!==void 0?E(r.value):(Q.value!==!0||l["no-option"]!==void 0)&&(n.value=!0))}function Ze(){d.value=!1,ct()}function ft(){e.useInput===!0&&T(e.multiple!==!0&&e.fillInput===!0&&_.value.length!==0&&de.value(_.value[0])||"",!0,!0)}function jt(t){let w=-1;if(t===!0){if(_.value.length!==0){const h=_e.value(_.value[0]);w=e.options.findIndex(O=>yt(_e.value(O),h))}ee(w)}he(w)}function ia(t,w){n.value===!0&&f.innerLoading.value===!1&&(ee(-1,!0),$e(()=>{n.value===!0&&f.innerLoading.value===!1&&(t>w?ee():jt(!0))}))}function ul(){d.value===!1&&se.value!==null&&se.value.updatePosition()}function sl(t){t!==void 0&&vt(t),a("popupShow",t),f.hasPopupOpen=!0,f.onControlFocusin(t)}function cl(t){t!==void 0&&vt(t),a("popupHide",t),f.hasPopupOpen=!1,f.onControlFocusout(t)}function dl(){x=o.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||Q.value===!1:!0),G=o.platform.is.ios===!0&&x===!0&&e.useInput===!0?"fade":e.transitionShow}return ka(dl),pa(ul),dl(),Ct(()=>{S!==null&&clearTimeout(S),y!==null&&clearTimeout(y)}),Object.assign(u,{showPopup:dt,hidePopup:Ze,removeAtIndex:nt,add:Pt,toggleOption:Te,getOptionIndex:()=>s.value,setOptionIndex:he,moveOptionSelection:Ve,filter:E,updateMenuPosition:ul,updateInputValue:T,isOptionSelected:it,getEmittingOptionValue:qt,isOptionDisabled:(...t)=>Ue.value.apply(null,t)===!0,getOptionValue:(...t)=>_e.value.apply(null,t),getOptionLabel:(...t)=>de.value.apply(null,t)}),Object.assign(f,{innerValue:_,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:J,targetRef:j,hasValue:q,showPopup:dt,floatingLabel:m(()=>e.hideSelected!==!0&&q.value===!0||typeof r.value=="number"||r.value.length!==0||fl(e.displayValue)),getControlChild:()=>{if(f.editable.value!==!1&&(d.value===!0||Q.value!==!0||l["no-option"]!==void 0))return x===!0?st():Y();f.hasPopupOpen===!0&&(f.hasPopupOpen=!1)},controlEvents:{onFocusin(t){f.onControlFocusin(t)},onFocusout(t){f.onControlFocusout(t,()=>{ft(),ct()})},onClick(t){if(Ut(t),x!==!0&&n.value===!0){ct(),j.value!==null&&j.value.focus();return}dt(t)}},getControl:t=>{const w=Ht(),h=t===!0||d.value!==!0||x!==!0;if(e.useInput===!0)w.push(c(t,h));else if(f.editable.value===!0){const U=h===!0?je.value:void 0;w.push(v("input",{ref:h===!0?j:void 0,key:"d_t",class:"q-select__focus-target",id:h===!0?f.targetUid.value:void 0,value:oe.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...U,onKeydown:Tt,onKeyup:rt,onKeypress:Je})),h===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&w.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:bt}))}if(ae.value!==void 0&&e.disable!==!0&&Ye.value.length!==0){const U=Ye.value.map(H=>v("option",{value:H,selected:!0}));w.push(v("select",{class:"hidden",name:ae.value,multiple:e.multiple},U))}const O=e.useInput===!0||h!==!0?void 0:f.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...O,...f.splitAttrs.listeners.value},w)},getInnerAppend:()=>e.loading!==!0&&i.value!==!0&&e.hideDropdownIcon!==!0?[v(mt,{class:"q-select__dropdown-icon"+(n.value===!0?" rotate-180":""),name:Ge.value})]:null}),Bl(f)}});const Kn={xs:2,sm:4,md:6,lg:10,xl:14};function Al(e,l,a){return{transform:l===!0?`translateX(${a.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var jn=De({name:"QLinearProgress",props:{...$t,...Ll,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:a}=Ne(),u=Ft(e,a.$q),o=Nl(e,Kn),n=m(()=>e.indeterminate===!0||e.query===!0),d=m(()=>e.reverse!==e.query),s=m(()=>({...o.value!==null?o.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),r=m(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),g=m(()=>Al(e.buffer!==void 0?e.buffer:1,d.value,a.$q)),i=m(()=>`with${e.instantFeedback===!0?"out":""}-transition`),S=m(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${i.value} q-linear-progress__track--${u.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),y=m(()=>Al(n.value===!0?1:e.value,d.value,a.$q)),k=m(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${i.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),x=m(()=>({width:`${e.value*100}%`})),C=m(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${i.value}`);return()=>{const b=[v("div",{class:S.value,style:g.value}),v("div",{class:k.value,style:y.value})];return e.stripe===!0&&n.value===!1&&b.push(v("div",{class:C.value,style:x.value})),v("div",{class:r.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ot(l.default,b))}}});let wt=0;const Qn={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Un=["update:fullscreen","fullscreen"];function Wn(){const e=Ne(),{props:l,emit:a,proxy:u}=e;let o,n,d;const s=R(!1);qa(e)===!0&&ie(()=>u.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&i()}),ie(()=>l.fullscreen,S=>{s.value!==S&&r()}),ie(s,S=>{a("update:fullscreen",S),a("fullscreen",S)});function r(){s.value===!0?i():g()}function g(){s.value!==!0&&(s.value=!0,d=u.$el.parentNode,d.replaceChild(n,u.$el),document.body.appendChild(u.$el),wt++,wt===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:i},yl.add(o))}function i(){s.value===!0&&(o!==void 0&&(yl.remove(o),o=void 0),d.replaceChild(u.$el,n),s.value=!1,wt=Math.max(0,wt-1),wt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),u.$el.scrollIntoView!==void 0&&setTimeout(()=>{u.$el.scrollIntoView()})))}return al(()=>{n=document.createElement("span")}),Et(()=>{l.fullscreen===!0&&g()}),Ct(i),Object.assign(u,{toggleFullscreen:r,setFullscreen:g,exitFullscreen:i}),{inFullscreen:s,toggleFullscreen:r}}function Gn(e,l){return new Date(e)-new Date(l)}const Xn={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Yn(e,l,a,u){const o=m(()=>{const{sortBy:s}=l.value;return s&&a.value.find(r=>r.name===s)||null}),n=m(()=>e.sortMethod!==void 0?e.sortMethod:(s,r,g)=>{const i=a.value.find(k=>k.name===r);if(i===void 0||i.field===void 0)return s;const S=g===!0?-1:1,y=typeof i.field=="function"?k=>i.field(k):k=>k[i.field];return s.sort((k,x)=>{let C=y(k),b=y(x);return i.rawSort!==void 0?i.rawSort(C,b,k,x)*S:C==null?-1*S:b==null?1*S:i.sort!==void 0?i.sort(C,b,k,x)*S:Jt(C)===!0&&Jt(b)===!0?(C-b)*S:hl(C)===!0&&hl(b)===!0?Gn(C,b)*S:typeof C=="boolean"&&typeof b=="boolean"?(C-b)*S:([C,b]=[C,b].map($=>($+"").toLocaleString().toLowerCase()),C<b?-1*S:C===b?0:S)})});function d(s){let r=e.columnSortOrder;if(Pa(s)===!0)s.sortOrder&&(r=s.sortOrder),s=s.name;else{const S=a.value.find(y=>y.name===s);S!==void 0&&S.sortOrder&&(r=S.sortOrder)}let{sortBy:g,descending:i}=l.value;g!==s?(g=s,i=r==="da"):e.binaryStateSort===!0?i=!i:i===!0?r==="ad"?g=null:i=!1:r==="ad"?i=!0:g=null,u({sortBy:g,descending:i,page:1})}return{columnToSort:o,computedSortMethod:n,sort:d}}const Jn={filter:[String,Object],filterMethod:Function};function Zn(e,l){const a=m(()=>e.filterMethod!==void 0?e.filterMethod:(u,o,n,d)=>{const s=o?o.toLowerCase():"";return u.filter(r=>n.some(g=>{const i=d(g,r)+"";return(i==="undefined"||i==="null"?"":i.toLowerCase()).indexOf(s)!==-1}))});return ie(()=>e.filter,()=>{$e(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function eo(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function Tl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const to={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function lo(e,l){const{props:a,emit:u}=e,o=R(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),n=m(()=>{const i=a["onUpdate:pagination"]!==void 0?{...o.value,...a.pagination}:o.value;return Tl(i)}),d=m(()=>n.value.rowsNumber!==void 0);function s(i){r({pagination:i,filter:a.filter})}function r(i={}){$e(()=>{u("request",{pagination:i.pagination||n.value,filter:i.filter||a.filter,getCellValue:l})})}function g(i,S){const y=Tl({...n.value,...i});if(eo(n.value,y)===!0){d.value===!0&&S===!0&&s(y);return}if(d.value===!0){s(y);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?u("update:pagination",y):o.value=y}return{innerPagination:o,computedPagination:n,isServerSide:d,requestServerInteraction:r,setPagination:g}}function ao(e,l,a,u,o,n){const{props:d,emit:s,proxy:{$q:r}}=e,g=m(()=>u.value===!0?a.value.rowsNumber||0:n.value),i=m(()=>{const{page:z,rowsPerPage:J}=a.value;return(z-1)*J}),S=m(()=>{const{page:z,rowsPerPage:J}=a.value;return z*J}),y=m(()=>a.value.page===1),k=m(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(g.value/a.value.rowsPerPage))),x=m(()=>S.value===0?!0:a.value.page>=k.value),C=m(()=>(d.rowsPerPageOptions.includes(l.value.rowsPerPage)?d.rowsPerPageOptions:[l.value.rowsPerPage].concat(d.rowsPerPageOptions)).map(J=>({label:J===0?r.lang.table.allRows:""+J,value:J})));ie(k,(z,J)=>{if(z===J)return;const j=a.value.page;z&&!j?o({page:1}):z<j&&o({page:z})});function b(){o({page:1})}function $(){const{page:z}=a.value;z>1&&o({page:z-1})}function G(){const{page:z,rowsPerPage:J}=a.value;S.value>0&&z*J<g.value&&o({page:z+1})}function D(){o({page:k.value})}return d["onUpdate:pagination"]!==void 0&&s("update:pagination",{...a.value}),{firstRowIndex:i,lastRowIndex:S,isFirstPage:y,isLastPage:x,pagesNumber:k,computedRowsPerPageOptions:C,computedRowsNumber:g,firstPage:b,prevPage:$,nextPage:G,lastPage:D}}const no={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},oo=["update:selected","selection"];function io(e,l,a,u){const o=m(()=>{const x={};return e.selected.map(u.value).forEach(C=>{x[C]=!0}),x}),n=m(()=>e.selection!=="none"),d=m(()=>e.selection==="single"),s=m(()=>e.selection==="multiple"),r=m(()=>a.value.length!==0&&a.value.every(x=>o.value[u.value(x)]===!0)),g=m(()=>r.value!==!0&&a.value.some(x=>o.value[u.value(x)]===!0)),i=m(()=>e.selected.length);function S(x){return o.value[x]===!0}function y(){l("update:selected",[])}function k(x,C,b,$){l("selection",{rows:C,added:b,keys:x,evt:$});const G=d.value===!0?b===!0?C:[]:b===!0?e.selected.concat(C):e.selected.filter(D=>x.includes(u.value(D))===!1);l("update:selected",G)}return{hasSelectionMode:n,singleSelection:d,multipleSelection:s,allRowsSelected:r,someRowsSelected:g,rowsSelectedNumber:i,isRowSelected:S,clearSelection:y,updateSelection:k}}function Vl(e){return Array.isArray(e)?e.slice():[]}const ro={expanded:Array},uo=["update:expanded"];function so(e,l){const a=R(Vl(e.expanded));ie(()=>e.expanded,d=>{a.value=Vl(d)});function u(d){return a.value.includes(d)}function o(d){e.expanded!==void 0?l("update:expanded",d):a.value=d}function n(d,s){const r=a.value.slice(),g=r.indexOf(d);s===!0?g===-1&&(r.push(d),o(r)):g!==-1&&(r.splice(g,1),o(r))}return{isRowExpanded:u,setExpanded:o,updateExpanded:n}}const co={visibleColumns:Array};function fo(e,l,a){const u=m(()=>{if(e.columns!==void 0)return e.columns;const s=e.rows[0];return s!==void 0?Object.keys(s).map(r=>({name:r,label:r.toUpperCase(),field:r,align:Jt(s[r])?"right":"left",sortable:!0})):[]}),o=m(()=>{const{sortBy:s,descending:r}=l.value;return(e.visibleColumns!==void 0?u.value.filter(i=>i.required===!0||e.visibleColumns.includes(i.name)===!0):u.value).map(i=>{const S=i.align||"right",y=`text-${S}`;return{...i,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:y+(i.headerClasses!==void 0?" "+i.headerClasses:"")+(i.sortable===!0?" sortable":"")+(i.name===s?` sorted ${r===!0?"sort-desc":""}`:""),__tdStyle:i.style!==void 0?typeof i.style!="function"?()=>i.style:i.style:()=>null,__tdClass:i.classes!==void 0?typeof i.classes!="function"?()=>y+" "+i.classes:k=>y+" "+i.classes(k):()=>y}})}),n=m(()=>{const s={};return o.value.forEach(r=>{s[r.name]=r}),s}),d=m(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(a.value===!0?1:0));return{colList:u,computedCols:o,computedColsMap:n,computedColspan:d}}const zt="q-table__bottom row items-center",aa={};ea.forEach(e=>{aa[e]={}});var vo=De({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...aa,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...$t,...Qn,...co,...Jn,...to,...ro,...no,...Xn},emits:["request","virtualScroll",...Un,...uo,...oo],setup(e,{slots:l,emit:a}){const u=Ne(),{proxy:{$q:o}}=u,n=Ft(e,o),{inFullscreen:d,toggleFullscreen:s}=Wn(),r=m(()=>typeof e.rowKey=="function"?e.rowKey:c=>c[e.rowKey]),g=R(null),i=R(null),S=m(()=>e.grid!==!0&&e.virtualScroll===!0),y=m(()=>" q-table__card"+(n.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),k=m(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":y.value)+(n.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(d.value===!0?" fullscreen scroll":"")),x=m(()=>k.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+k.value,()=>{S.value===!0&&i.value!==null&&i.value.reset()});const{innerPagination:C,computedPagination:b,isServerSide:$,requestServerInteraction:G,setPagination:D}=lo(u,he),{computedFilterMethod:z}=Zn(e,D),{isRowExpanded:J,setExpanded:j,updateExpanded:se}=so(e,a),be=m(()=>{let c=e.rows;if($.value===!0||c.length===0)return c;const{sortBy:p,descending:A}=b.value;return e.filter&&(c=z.value(c,e.filter,f.value,he)),N.value!==null&&(c=q.value(e.rows===c?c.slice():c,p,A)),c}),Oe=m(()=>be.value.length),ae=m(()=>{let c=be.value;if($.value===!0)return c;const{rowsPerPage:p}=b.value;return p!==0&&(M.value===0&&e.rows!==c?c.length>Q.value&&(c=c.slice(0,Q.value)):c=c.slice(M.value,Q.value)),c}),{hasSelectionMode:re,singleSelection:ne,multipleSelection:Ee,allRowsSelected:Ke,someRowsSelected:pe,rowsSelectedNumber:ee,isRowSelected:Ce,clearSelection:xe,updateSelection:me}=io(e,a,ae,r),{colList:qe,computedCols:f,computedColsMap:_,computedColspan:I}=fo(e,b,re),{columnToSort:N,computedSortMethod:q,sort:P}=Yn(e,b,qe,D),{firstRowIndex:M,lastRowIndex:Q,isFirstPage:B,isLastPage:oe,pagesNumber:ye,computedRowsPerPageOptions:at,computedRowsNumber:ce,firstPage:je,prevPage:Pe,nextPage:Ae,lastPage:Qe}=ao(u,C,b,$,D,Oe),Ge=m(()=>ae.value.length===0),St=m(()=>{const c={};return ea.forEach(p=>{c[p]=e[p]}),c.virtualScrollItemSize===void 0&&(c.virtualScrollItemSize=e.dense===!0?28:48),c});function Xe(){S.value===!0&&i.value.reset()}function _e(){if(e.grid===!0)return Rt();const c=e.hideHeader!==!0?it:null;if(S.value===!0){const A=l["top-row"],T=l["bottom-row"],E={default:Y=>xt(Y.item,l.body,Y.index)};if(A!==void 0){const Y=v("tbody",A({cols:f.value}));E.before=c===null?()=>Y:()=>[c()].concat(Y)}else c!==null&&(E.before=c);return T!==void 0&&(E.after=()=>v("tbody",T({cols:f.value}))),v(In,{ref:i,class:e.tableClass,style:e.tableStyle,...St.value,scrollTarget:e.virtualScrollTarget,items:ae.value,type:"__qtable",tableColspan:I.value,onVirtualScroll:Ue},E)}const p=[qt()];return c!==null&&p.unshift(c()),Yl({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},p)}function de(c,p){if(i.value!==null){i.value.scrollTo(c,p);return}c=parseInt(c,10);const A=g.value.querySelector(`tbody tr:nth-of-type(${c+1})`);if(A!==null){const T=g.value.querySelector(".q-table__middle.scroll"),E=A.offsetTop-e.virtualScrollStickySizeStart,Y=E<T.scrollTop?"decrease":"increase";T.scrollTop=E,a("virtualScroll",{index:c,from:0,to:C.value.rowsPerPage-1,direction:Y})}}function Ue(c){a("virtualScroll",c)}function Ye(){return[v(jn,{class:"q-table__linear-progress",color:e.color,dark:n.value,indeterminate:!0,trackColor:"transparent"})]}function xt(c,p,A){const T=r.value(c),E=Ce(T);if(p!==void 0)return p(nt({key:T,row:c,pageIndex:A,__trClass:E?"selected":""}));const Y=l["body-cell"],X=f.value.map(ue=>{const ut=l[`body-cell-${ue.name}`],st=ut!==void 0?ut:Y;return st!==void 0?st(Dt({key:T,row:c,pageIndex:A,col:ue})):v("td",{class:ue.__tdClass(c),style:ue.__tdStyle(c)},he(ue,c))});if(re.value===!0){const ue=l["body-selection"],ut=ue!==void 0?ue(Pt({key:T,row:c,pageIndex:A})):[v(Wt,{modelValue:E,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(st,Kt)=>{me([T],[c],st,Kt)}})];X.unshift(v("td",{class:"q-table--col-auto-width"},ut))}const Re={key:T,class:{selected:E}};return e.onRowClick!==void 0&&(Re.class["cursor-pointer"]=!0,Re.onClick=ue=>{a("RowClick",ue,c,A)}),e.onRowDblclick!==void 0&&(Re.class["cursor-pointer"]=!0,Re.onDblclick=ue=>{a("RowDblclick",ue,c,A)}),e.onRowContextmenu!==void 0&&(Re.class["cursor-pointer"]=!0,Re.onContextmenu=ue=>{a("RowContextmenu",ue,c,A)}),v("tr",Re,X)}function qt(){const c=l.body,p=l["top-row"],A=l["bottom-row"];let T=ae.value.map((E,Y)=>xt(E,c,Y));return p!==void 0&&(T=p({cols:f.value}).concat(T)),A!==void 0&&(T=T.concat(A({cols:f.value}))),v("tbody",T)}function nt(c){return Te(c),c.cols=c.cols.map(p=>ht({...p},"value",()=>he(p,c.row))),c}function Dt(c){return Te(c),ht(c,"value",()=>he(c.col,c.row)),c}function Pt(c){return Te(c),c}function Te(c){Object.assign(c,{cols:f.value,colsMap:_.value,sort:P,rowIndex:M.value+c.pageIndex,color:e.color,dark:n.value,dense:e.dense}),re.value===!0&&ht(c,"selected",()=>Ce(c.key),(p,A)=>{me([c.key],[c.row],p,A)}),ht(c,"expand",()=>J(c.key),p=>{se(c.key,p)})}function he(c,p){const A=typeof c.field=="function"?c.field(p):p[c.field];return c.format!==void 0?c.format(A,p):A}const Ve=m(()=>({pagination:b.value,pagesNumber:ye.value,isFirstPage:B.value,isLastPage:oe.value,firstPage:je,prevPage:Pe,nextPage:Ae,lastPage:Qe,inFullscreen:d.value,toggleFullscreen:s}));function Lt(){const c=l.top,p=l["top-left"],A=l["top-right"],T=l["top-selection"],E=re.value===!0&&T!==void 0&&ee.value>0,Y="q-table__top relative-position row items-center";if(c!==void 0)return v("div",{class:Y},[c(Ve.value)]);let X;if(E===!0?X=T(Ve.value).slice():(X=[],p!==void 0?X.push(v("div",{class:"q-table__control"},[p(Ve.value)])):e.title&&X.push(v("div",{class:"q-table__control"},[v("div",{class:["q-table__title",e.titleClass]},e.title)]))),A!==void 0&&(X.push(v("div",{class:"q-table__separator col"})),X.push(v("div",{class:"q-table__control"},[A(Ve.value)]))),X.length!==0)return v("div",{class:Y},X)}const ot=m(()=>pe.value===!0?null:Ke.value);function it(){const c=At();return e.loading===!0&&l.loading===void 0&&c.push(v("tr",{class:"q-table__progress"},[v("th",{class:"relative-position",colspan:I.value},Ye())])),v("thead",c)}function At(){const c=l.header,p=l["header-cell"];if(c!==void 0)return c(rt({header:!0})).slice();const A=f.value.map(T=>{const E=l[`header-cell-${T.name}`],Y=E!==void 0?E:p,X=rt({col:T});return Y!==void 0?Y(X):v(An,{key:T.name,props:X},()=>T.label)});if(ne.value===!0&&e.grid!==!0)A.unshift(v("th",{class:"q-table--col-auto-width"}," "));else if(Ee.value===!0){const T=l["header-selection"],E=T!==void 0?T(rt({})):[v(Wt,{color:e.color,modelValue:ot.value,dark:n.value,dense:e.dense,"onUpdate:modelValue":bt})];A.unshift(v("th",{class:"q-table--col-auto-width"},E))}return[v("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},A)]}function rt(c){return Object.assign(c,{cols:f.value,sort:P,colsMap:_.value,color:e.color,dark:n.value,dense:e.dense}),Ee.value===!0&&ht(c,"selected",()=>ot.value,bt),c}function bt(c){pe.value===!0&&(c=!1),me(ae.value.map(r.value),ae.value,c)}const Je=m(()=>{const c=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?c.reverse():c});function Tt(){if(e.hideBottom===!0)return;if(Ge.value===!0){if(e.hideNoData===!0)return;const A=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,T=l["no-data"],E=T!==void 0?[T({message:A,icon:o.iconSet.table.warning,filter:e.filter})]:[v(mt,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),A];return v("div",{class:zt+" q-table__bottom--nodata"},E)}const c=l.bottom;if(c!==void 0)return v("div",{class:zt},[c(Ve.value)]);const p=e.hideSelectedBanner!==!0&&re.value===!0&&ee.value>0?[v("div",{class:"q-table__control"},[v("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(ee.value)])])]:[];if(e.hidePagination!==!0)return v("div",{class:zt+" justify-end"},Nt(p));if(p.length!==0)return v("div",{class:zt},p)}function Vt(c){D({page:1,rowsPerPage:c.value})}function Nt(c){let p;const{rowsPerPage:A}=b.value,T=e.paginationLabel||o.lang.table.pagination,E=l.pagination,Y=e.rowsPerPageOptions.length>1;if(c.push(v("div",{class:"q-table__separator col"})),Y===!0&&c.push(v("div",{class:"q-table__control"},[v("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),v(Hn,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:A,options:at.value,displayValue:A===0?o.lang.table.allRows:A,dark:n.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Vt})])),E!==void 0)p=E(Ve.value);else if(p=[v("span",A!==0?{class:"q-table__bottom-item"}:{},[A?T(M.value+1,Math.min(Q.value,ce.value),ce.value):T(1,Oe.value,ce.value)])],A!==0&&ye.value>1){const X={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(X.size="sm"),ye.value>2&&p.push(v(Ie,{key:"pgFirst",...X,icon:Je.value[0],disable:B.value,onClick:je})),p.push(v(Ie,{key:"pgPrev",...X,icon:Je.value[1],disable:B.value,onClick:Pe}),v(Ie,{key:"pgNext",...X,icon:Je.value[2],disable:oe.value,onClick:Ae})),ye.value>2&&p.push(v(Ie,{key:"pgLast",...X,icon:Je.value[3],disable:oe.value,onClick:Qe}))}return c.push(v("div",{class:"q-table__control"},p)),c}function Ht(){const c=e.gridHeader===!0?[v("table",{class:"q-table"},[it()])]:e.loading===!0&&l.loading===void 0?Ye():void 0;return v("div",{class:"q-table__middle"},c)}function Rt(){const c=l.item!==void 0?l.item:p=>{const A=p.cols.map(E=>v("div",{class:"q-table__grid-item-row"},[v("div",{class:"q-table__grid-item-title"},[E.label]),v("div",{class:"q-table__grid-item-value"},[E.value])]));if(re.value===!0){const E=l["body-selection"],Y=E!==void 0?E(p):[v(Wt,{modelValue:p.selected,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(X,Re)=>{me([p.key],[p.row],X,Re)}})];A.unshift(v("div",{class:"q-table__grid-item-row"},Y),v(lt,{dark:n.value}))}const T={class:["q-table__grid-item-card"+y.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(T.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(T.onClick=E=>{a("RowClick",E,p.row,p.pageIndex)}),e.onRowDblclick!==void 0&&(T.onDblclick=E=>{a("RowDblclick",E,p.row,p.pageIndex)})),v("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(p.selected===!0?" q-table__grid-item--selected":"")},[v("div",T,A)])};return v("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},ae.value.map((p,A)=>c(nt({key:r.value(p),row:p,pageIndex:A}))))}return Object.assign(u.proxy,{requestServerInteraction:G,setPagination:D,firstPage:je,prevPage:Pe,nextPage:Ae,lastPage:Qe,isRowSelected:Ce,clearSelection:xe,isRowExpanded:J,setExpanded:j,sort:P,resetVirtualScroll:Xe,scrollTo:de,getCellValue:he}),Aa(u.proxy,{filteredSortedRows:()=>be.value,computedRows:()=>ae.value,computedRowsNumber:()=>ce.value}),()=>{const c=[Lt()],p={ref:g,class:x.value};return e.grid===!0?c.push(Ht()):Object.assign(p,{class:[p.class,e.cardClass],style:e.cardStyle}),c.push(_e(),Tt()),e.loading===!0&&l.loading!==void 0&&c.push(l.loading()),v("div",p,c)}}});const mo=ke({__name:"AccountsTable",props:["accounts"],setup(e){const l=R([{name:"mint",required:!0,label:"Mint",align:"left",field:"mint",sortable:!0},{name:"calories",align:"right",label:"Amount",field:a=>a.tokenAmount.uiAmount,sortable:!0}]);return(a,u)=>{var o,n;return L(),le(vo,{class:"col",title:"Accounts",rows:(n=(o=e.accounts)==null?void 0:o.value)==null?void 0:n.map(d=>d.account.data.parsed.info),columns:l.value,"row-key":"mint","hide-bottom":"",flat:""},null,8,["rows","columns"])}}}),go={class:"text-h5 q-mt-sm q-mb-xs"},So={class:"text-caption text-grey"},bo={class:"row"},yo=W("div",{class:"col text-overline"},"Price per Ticket",-1),ho={class:"col text-overline text-orange-9"},_o={class:"row"},wo=W("div",{class:"col text-overline"},"Ticket Mint",-1),ko={class:"col text-overline text-orange-9"},po={class:"row"},Co=W("div",{class:"col text-overline"},"Prize Mint",-1),xo={class:"col text-overline text-orange-9"},qo={class:"row"},Po=W("div",{class:"col text-overline"},"Winner",-1),Ao={class:"col text-overline text-orange-9"},To=ke({__name:"RaffleCard",props:["raffle","is_admin"],setup(e){const l=e,a=R(),u=R();return Et(async()=>{const{pg_raffle:o}=He();a.value=await o.value.account.entrants.fetch(l.raffle.account.entrants),u.value=await Se().connection.getParsedTokenAccountsByOwner(l.raffle.publicKey,{programId:Le})}),(o,n)=>(L(),le(Hl,{flat:"",bordered:""},{default:F(()=>[e.raffle.account.url?(L(),le(_l,{key:0,width:"200px",src:e.raffle.account.url},null,8,["src"])):(L(),le(_l,{key:1,width:"200px",src:"snb_icon.svg"})),V(kt,null,{default:F(()=>[V(Cn,{raffle:e.raffle,entrants:a.value},null,8,["raffle","entrants"]),W("div",go,Me(e.raffle.account.name),1),W("div",So,Me(e.raffle.account.description),1)]),_:1}),V(kt,null,{default:F(()=>[W("div",bo,[yo,W("div",ho,Me(e.raffle.account.ticketPrice*Math.pow(10,-e.raffle.account.ticketDecimals)),1)]),W("div",_o,[wo,W("div",ko,Me(e.raffle.account.ticketTokenMint.toString().slice(0,15))+"... ",1)]),W("div",po,[Co,W("div",xo,Me(e.raffle.account.prizeTokenMint.toString().slice(0,15))+"... ",1)]),W("div",qo,[Po,W("div",Ao,Me(e.raffle.account.winner.toString().slice(0,15))+"... ",1)])]),_:1}),V(We,null,{default:F(()=>[W("p",null,Me(e.raffle.account.randomness??""),1)]),_:1}),V(We,null,{default:F(()=>[V(Sn,{class:"col",raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"])]),_:1}),V(We,null,{default:F(()=>[V(kn,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"])]),_:1}),V(We,null,{default:F(()=>[V(xn,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"])]),_:1}),V(We,null,{default:F(()=>[V(Pn,{raffle:e.raffle,is_admin:e.is_admin},null,8,["raffle","is_admin"])]),_:1}),V(We,null,{default:F(()=>[V(_n,{raffle:e.raffle,is_admin:e.is_admin,entrants:a.value},null,8,["raffle","is_admin","entrants"])]),_:1}),V(We,null,{default:F(()=>[e.is_admin&&(!e.raffle.account.isRunning||e.raffle.account.isClaimed)?(L(),le(qn,{key:0,raffle:e.raffle},null,8,["raffle"])):we("",!0)]),_:1}),V(We,null,{default:F(()=>[V(mo,{accounts:u.value},null,8,["accounts"])]),_:1})]),_:1}))}});const Vo={class:"q-pa-md example-row-equal-width"},Ro={class:"row"},Mo={key:0,class:"col"},Bo=ke({__name:"RaffleGrid",props:{is_admin:{type:Boolean,default:!1},raffles:{type:[],default:[]}},setup(e){const l=e;return R(),(a,u)=>(L(),ze("div",Vo,[W("div",Ro,[e.is_admin?(L(),ze("div",Mo,[V(cn)])):we("",!0),(L(!0),ze(ll,null,el(l.raffles,o=>(L(),ze("div",{key:o,class:"col"},[V(To,{is_admin:e.is_admin,raffle:o},null,8,["is_admin","raffle"])]))),128))])]))}});var Rl=Wa(Bo,[["__scopeId","data-v-a0351f26"]]);const zo={key:0},Io={key:1,class:"text-center"},Uo=ke({__name:"RafflePage",setup(e){const l=R(),a=R("raffle");return on(),Et(async()=>{await Se().update_wallet_accounts();const{pg_raffle:u}=He();l.value=await u.value.account.raffle.all()}),(u,o)=>(L(),le(da,{class:"col items-center justify-evenly"},{default:F(()=>{var n;return[V(ca,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value=d),"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"shadow-2"},{default:F(()=>[V(vl,{name:"raffle",label:"Raffle"}),V(vl,{name:"admin",label:"Admin"})]),_:1},8,["modelValue"]),l.value?(L(),ze("div",zo,[a.value==="raffle"?(L(),le(Rl,{key:0,raffles:l.value.filter(d=>d.account.isRunning===!0)},null,8,["raffles"])):we("",!0),a.value==="admin"?(L(),le(Rl,{key:1,raffles:l.value,is_admin:!0},null,8,["raffles"])):we("",!0)])):we("",!0),a.value==="raffle"&&!((n=l.value)!=null&&n.length)?(L(),ze("h6",Io," No Raffles Found ")):we("",!0)]}),_:1}))}});export{Uo as default};
